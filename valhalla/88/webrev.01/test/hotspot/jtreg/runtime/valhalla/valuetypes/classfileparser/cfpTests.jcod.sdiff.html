<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/runtime/valhalla/valuetypes/classfileparser/cfpTests.jcod</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../WithFieldNoAccessTest.jcod.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../identityObject/IdentityType.jcod.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/runtime/valhalla/valuetypes/classfileparser/cfpTests.jcod</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  31 //
  32 // final inline class Value {
  33 //     static final Value VT = makeValue(0x01234567);
  34 //     final int int_v;
  35 //     Value() {
  36 //         int_v = 1;
  37 //     }
  38 //     static Value makeValue(int x) {
  39 //         Value v = Value.default;
  40 //         v = __WithField(v.int_v, x);
  41 //         return v;
  42 //     }
  43 // }
  44 
  45 
  46 // Test that class modifiers cannot have both ACC_VALUE and ACC_ABSTRACT set.
  47 //
  48 class ValueAbstract {
  49   0xCAFEBABE;
  50   0; // minor version
<span class="line-modified">  51   59; // version</span>
  52   [28] { // Constant Pool
  53     ; // first element is empty
  54     Method #7 #23; // #1     at 0x0A
  55     Field #3 #24; // #2     at 0x0F
  56     class #9; // #3     at 0x14
  57     int 0x01234567; // #4     at 0x17
  58     Method #3 #25; // #5     at 0x1C
  59     Field #3 #26; // #6     at 0x21
  60     class #27; // #7     at 0x26
  61     Utf8 &quot;VT&quot;; // #8     at 0x29
  62     Utf8 &quot;ValueAbstract&quot;; // #9     at 0x2E
  63     Utf8 &quot;ValueTypes&quot;; // #10     at 0x36
  64     Utf8 &quot;LValueAbstract;&quot;; // #11     at 0x43
  65     Utf8 &quot;int_v&quot;; // #12     at 0x4D
  66     Utf8 &quot;I&quot;; // #13     at 0x55
  67     Utf8 &quot;&lt;init&gt;&quot;; // #14     at 0x59
  68     Utf8 &quot;()V&quot;; // #15     at 0x62
  69     Utf8 &quot;Code&quot;; // #16     at 0x68
  70     Utf8 &quot;LineNumberTable&quot;; // #17     at 0x6F
  71     Utf8 &quot;makeValueAbstract&quot;; // #18     at 0x81
</pre>
<hr />
<pre>
 187   } // methods
 188 
 189   [2] { // Attributes
 190     Attr(#21, 2) { // SourceFile at 0x01A5
 191       #22;
 192     } // end SourceFile
 193     ;
 194     Attr(#10, 4) { // ValueTypes at 0x01AD
 195       0x00010003;
 196     } // end ValueTypes
 197   } // Attributes
 198 } // end class ValueAbstract
 199 
 200 //////////////////////////////////////////////////////////////////////
 201 
 202 // Test that class modifiers cannot have both ACC_VALUE and ACC_ENUM set.
 203 //
 204 class ValueEnum {
 205   0xCAFEBABE;
 206   0; // minor version
<span class="line-modified"> 207   59; // version</span>
 208   [28] { // Constant Pool
 209     ; // first element is empty
 210     Method #7 #23; // #1     at 0x0A
 211     Field #3 #24; // #2     at 0x0F
 212     class #9; // #3     at 0x14
 213     int 0x01234567; // #4     at 0x17
 214     Method #3 #25; // #5     at 0x1C
 215     Field #3 #26; // #6     at 0x21
 216     class #27; // #7     at 0x26
 217     Utf8 &quot;VT&quot;; // #8     at 0x29
 218     Utf8 &quot;ValueEnum&quot;; // #9     at 0x2E
 219     Utf8 &quot;ValueTypes&quot;; // #10     at 0x36
 220     Utf8 &quot;LValueEnum;&quot;; // #11     at 0x43
 221     Utf8 &quot;int_v&quot;; // #12     at 0x4D
 222     Utf8 &quot;I&quot;; // #13     at 0x55
 223     Utf8 &quot;&lt;init&gt;&quot;; // #14     at 0x59
 224     Utf8 &quot;()V&quot;; // #15     at 0x62
 225     Utf8 &quot;Code&quot;; // #16     at 0x68
 226     Utf8 &quot;LineNumberTable&quot;; // #17     at 0x6F
 227     Utf8 &quot;makeValueEnum&quot;; // #18     at 0x81
</pre>
<hr />
<pre>
 343   } // methods
 344 
 345   [2] { // Attributes
 346     Attr(#21, 2) { // SourceFile at 0x01A5
 347       #22;
 348     } // end SourceFile
 349     ;
 350     Attr(#10, 4) { // ValueTypes at 0x01AD
 351       0x00010003;
 352     } // end ValueTypes
 353   } // Attributes
 354 } // end class ValueEnum
 355 
 356 //////////////////////////////////////////////////////////////////////
 357 
 358 // Test that inline type fields must be final.
 359 //
 360 class ValueFieldNotFinal {
 361   0xCAFEBABE;
 362   0; // minor version
<span class="line-modified"> 363   59; // version</span>
 364   [28] { // Constant Pool
 365     ; // first element is empty
 366     Method #7 #23; // #1     at 0x0A
 367     Field #3 #24; // #2     at 0x0F
 368     class #9; // #3     at 0x14
 369     int 0x01234567; // #4     at 0x17
 370     Method #3 #25; // #5     at 0x1C
 371     Field #3 #26; // #6     at 0x21
 372     class #27; // #7     at 0x26
 373     Utf8 &quot;VT&quot;; // #8     at 0x29
 374     Utf8 &quot;ValueFieldNotFinal&quot;; // #9     at 0x2E
 375     Utf8 &quot;ValueTypes&quot;; // #10     at 0x36
 376     Utf8 &quot;LValueFieldNotFinal;&quot;; // #11     at 0x43
 377     Utf8 &quot;int_v&quot;; // #12     at 0x4D
 378     Utf8 &quot;I&quot;; // #13     at 0x55
 379     Utf8 &quot;&lt;init&gt;&quot;; // #14     at 0x59
 380     Utf8 &quot;()V&quot;; // #15     at 0x62
 381     Utf8 &quot;Code&quot;; // #16     at 0x68
 382     Utf8 &quot;LineNumberTable&quot;; // #17     at 0x6F
 383     Utf8 &quot;makeValueFieldNotFinal&quot;; // #18     at 0x81
</pre>
<hr />
<pre>
 499   } // methods
 500 
 501   [2] { // Attributes
 502     Attr(#21, 2) { // SourceFile at 0x01A5
 503       #22;
 504     } // end SourceFile
 505     ;
 506     Attr(#10, 4) { // ValueTypes at 0x01AD
 507       0x00010003;
 508     } // end ValueTypes
 509   } // Attributes
 510 } // end class ValueFieldNotFinal
 511 
 512 //////////////////////////////////////////////////////////////////////
 513 
 514 // Test that class modifiers cannot have both ACC_VALUE and ACC_INTERFACE set.
 515 //
 516 class ValueInterface {
 517   0xCAFEBABE;
 518   0; // minor version
<span class="line-modified"> 519   59; // version</span>
 520   [27] { // Constant Pool
 521     ; // first element is empty
 522     Method #7 #21; // #1     at 0x0A
 523     Field #3 #22; // #2     at 0x0F
 524     class #23; // #3     at 0x14
 525     int 0x01234567; // #4     at 0x17
 526     Method #3 #24; // #5     at 0x1C
 527     Field #3 #25; // #6     at 0x21
 528     class #26; // #7     at 0x26
 529     Utf8 &quot;VT&quot;; // #8     at 0x29
 530     Utf8 &quot;LValueInterface;&quot;; // #9     at 0x2E
 531     Utf8 &quot;int_v&quot;; // #10     at 0x3C
 532     Utf8 &quot;I&quot;; // #11     at 0x44
 533     Utf8 &quot;&lt;init&gt;&quot;; // #12     at 0x48
 534     Utf8 &quot;()V&quot;; // #13     at 0x51
 535     Utf8 &quot;Code&quot;; // #14     at 0x57
 536     Utf8 &quot;LineNumberTable&quot;; // #15     at 0x5E
 537     Utf8 &quot;makeValueInterface&quot;; // #16     at 0x70
 538     Utf8 &quot;(I)LValueInterface;&quot;; // #17     at 0x80
 539     Utf8 &quot;&lt;clinit&gt;&quot;; // #18     at 0x91
</pre>
<hr />
<pre>
 606       #20;
 607     } // end SourceFile
 608   } // Attributes
 609 } // end class ValueInterface
 610 
 611 //////////////////////////////////////////////////////////////////////
 612 
 613 // Test that inline type instance methods cannot be synchronized.
 614 //
 615 // final inline class ValueMethodSynch {
 616 //     final int int_v;
 617 //
 618 //     ValueMethodSynch() { int_v = 1; }
 619 //
 620 //     int getInt(int x) { return x; }
 621 // }
 622 
 623 class ValueMethodSynch {
 624   0xCAFEBABE;
 625   0; // minor version
<span class="line-modified"> 626   59; // version</span>
 627   [46] { // Constant Pool
 628     ; // first element is empty
 629     class #23; // #1     at 0x0A
 630     Field #1 #24; // #2     at 0x0D
 631     InvokeDynamic 0s #27; // #3     at 0x12
 632     InvokeDynamic 0s #28; // #4     at 0x17
 633     InvokeDynamic 0s #29; // #5     at 0x1C
 634     class #30; // #6     at 0x21
 635     Utf8 &quot;int_v&quot;; // #7     at 0x24
 636     Utf8 &quot;I&quot;; // #8     at 0x2C
 637     Utf8 &quot;getInt&quot;; // #9     at 0x30
 638     Utf8 &quot;(I)I&quot;; // #10     at 0x39
 639     Utf8 &quot;Code&quot;; // #11     at 0x40
 640     Utf8 &quot;LineNumberTable&quot;; // #12     at 0x47
 641     Utf8 &quot;hashCode&quot;; // #13     at 0x59
 642     Utf8 &quot;()I&quot;; // #14     at 0x64
 643     Utf8 &quot;equals&quot;; // #15     at 0x6A
 644     Utf8 &quot;(Ljava/lang/Object;)Z&quot;; // #16     at 0x73
 645     Utf8 &quot;toString&quot;; // #17     at 0x8B
 646     Utf8 &quot;()Ljava/lang/String;&quot;; // #18     at 0x96
</pre>
<hr />
<pre>
 861 // }
 862 //----------------------------------------------------------------
 863 // final inline class Circ2 {
 864 //     static final Circ2 VT = makeCirc2(&#39;\u0123&#39;);
 865 //     final char char_v;
 866 //     final Circ vv;
 867 //     Circ2() {
 868 //         char_v = &#39;z&#39;;
 869 //         vv = Circ.default;
 870 //     }
 871 //     static Circ2 makeCirc2(char c) {
 872 //         Circ2 v = Circ2.default;
 873 //         v = __WithField(v.char_v, c);
 874 //         return v;
 875 //     }
 876 // }
 877 
 878 class Circ {
 879   0xCAFEBABE;
 880   0; // minor version
<span class="line-modified"> 881   59; // version</span>
 882   [61] { // Constant Pool
 883     ; // first element is empty
 884     class #34; // #1     at 0x0A
 885     Field #1 #35; // #2     at 0x0D
 886     class #36; // #3     at 0x12
 887     Field #1 #37; // #4     at 0x15
 888     InvokeDynamic 0s #40; // #5     at 0x1A
 889     InvokeDynamic 0s #41; // #6     at 0x1F
 890     InvokeDynamic 0s #42; // #7     at 0x24
 891     int 0x01234567; // #8     at 0x29
 892     Method #1 #43; // #9     at 0x2E
 893     Field #1 #44; // #10     at 0x33
 894     class #45; // #11     at 0x38
 895     Utf8 &quot;VT&quot;; // #12     at 0x3B
 896     Utf8 &quot;QCirc;&quot;; // #13     at 0x40
 897     Utf8 &quot;int_v&quot;; // #14     at 0x49
 898     Utf8 &quot;I&quot;; // #15     at 0x51
 899     Utf8 &quot;v2&quot;; // #16     at 0x55
 900     Utf8 &quot;QCirc2;&quot;; // #17     at 0x5A
 901     Utf8 &quot;makeCirc&quot;; // #18     at 0x64
</pre>
<hr />
<pre>
1140       [1] { // InnerClasses
1141         #54 #58 #55 25; //  at 0x046A
1142       }
1143     } // end InnerClasses
1144     ;
1145     Attr(#38, 6) { // BootstrapMethods at 0x046A
1146       [1] { // bootstrap_methods
1147         {  //  bootstrap_method
1148           #39; // bootstrap_method_ref
1149           [0] { // bootstrap_arguments
1150           }  //  bootstrap_arguments
1151         }  //  bootstrap_method
1152       }
1153     } // end BootstrapMethods
1154   } // Attributes
1155 } // end class Circ
1156 
1157 class Circ2 {
1158   0xCAFEBABE;
1159   0; // minor version
<span class="line-modified">1160   59; // version</span>
1161   [60] { // Constant Pool
1162     ; // first element is empty
1163     class #33; // #1     at 0x0A
1164     Field #1 #34; // #2     at 0x0D
1165     class #35; // #3     at 0x12
1166     Field #1 #36; // #4     at 0x15
1167     InvokeDynamic 0s #39; // #5     at 0x1A
1168     InvokeDynamic 0s #40; // #6     at 0x1F
1169     InvokeDynamic 0s #41; // #7     at 0x24
1170     Method #1 #42; // #8     at 0x29
1171     Field #1 #43; // #9     at 0x2E
1172     class #44; // #10     at 0x33
1173     Utf8 &quot;VT&quot;; // #11     at 0x36
1174     Utf8 &quot;QCirc2;&quot;; // #12     at 0x3B
1175     Utf8 &quot;char_v&quot;; // #13     at 0x45
1176     Utf8 &quot;C&quot;; // #14     at 0x4E
1177     Utf8 &quot;vv&quot;; // #15     at 0x52
1178     Utf8 &quot;QCirc;&quot;; // #16     at 0x57
1179     Utf8 &quot;makeCirc2&quot;; // #17     at 0x60
1180     Utf8 &quot;(C)QCirc2;&quot;; // #18     at 0x6C
</pre>
<hr />
<pre>
1454 //     }
1455 // }
1456 //----------------------------------------------------------------
1457 // final inline class CircStaticB {
1458 //     static final CircStaticB VT = makeCircStaticB(0x01234567);
1459 //     final int int_v;
1460 //     static final CircStaticA v2 = CircStaticA.default;
1461 //     CircStaticB() {
1462 //         int_v = 1;
1463 //     }
1464 //     static CircStaticB makeCircStaticB(int x) {
1465 //         CircStaticB v = CircStaticB.default;
1466 //         v = __WithField(v.int_v, x);
1467 //         return v;
1468 //     }
1469 // }
1470 
1471 class CircStaticA {
1472   0xCAFEBABE;
1473   0; // minor version
<span class="line-modified">1474   59; // version</span>
1475   [61] { // Constant Pool
1476     ; // first element is empty
1477     class #34; // #1     at 0x0A
1478     Field #1 #35; // #2     at 0x0D
1479     InvokeDynamic 0s #38; // #3     at 0x12
1480     InvokeDynamic 0s #39; // #4     at 0x17
1481     InvokeDynamic 0s #40; // #5     at 0x1C
1482     int 0x01234567; // #6     at 0x21
1483     Method #1 #41; // #7     at 0x26
1484     Field #1 #42; // #8     at 0x2B
1485     class #43; // #9     at 0x30
1486     Field #1 #44; // #10     at 0x33
1487     class #45; // #11     at 0x38
1488     Utf8 &quot;VT&quot;; // #12     at 0x3B
1489     Utf8 &quot;QCircStaticA;&quot;; // #13     at 0x40
1490     Utf8 &quot;int_v&quot;; // #14     at 0x50
1491     Utf8 &quot;I&quot;; // #15     at 0x58
1492     Utf8 &quot;v2&quot;; // #16     at 0x5C
1493     Utf8 &quot;QCircStaticB;&quot;; // #17     at 0x61
1494     Utf8 &quot;makeCircStaticA&quot;; // #18     at 0x71
</pre>
<hr />
<pre>
1732       [1] { // InnerClasses
1733         #54 #58 #55 25; //  at 0x04B2
1734       }
1735     } // end InnerClasses
1736     ;
1737     Attr(#36, 6) { // BootstrapMethods at 0x04B2
1738       [1] { // bootstrap_methods
1739         {  //  bootstrap_method
1740           #37; // bootstrap_method_ref
1741           [0] { // bootstrap_arguments
1742           }  //  bootstrap_arguments
1743         }  //  bootstrap_method
1744       }
1745     } // end BootstrapMethods
1746   } // Attributes
1747 } // end class CircStaticA
1748 
1749 class CircStaticB {
1750   0xCAFEBABE;
1751   0; // minor version
<span class="line-modified">1752   59; // version</span>
1753   [61] { // Constant Pool
1754     ; // first element is empty
1755     class #34; // #1     at 0x0A
1756     Field #1 #35; // #2     at 0x0D
1757     InvokeDynamic 0s #38; // #3     at 0x12
1758     InvokeDynamic 0s #39; // #4     at 0x17
1759     InvokeDynamic 0s #40; // #5     at 0x1C
1760     int 0x01234567; // #6     at 0x21
1761     Method #1 #41; // #7     at 0x26
1762     Field #1 #42; // #8     at 0x2B
1763     class #43; // #9     at 0x30
1764     Field #1 #44; // #10     at 0x33
1765     class #45; // #11     at 0x38
1766     Utf8 &quot;VT&quot;; // #12     at 0x3B
1767     Utf8 &quot;QCircStaticB;&quot;; // #13     at 0x40
1768     Utf8 &quot;int_v&quot;; // #14     at 0x50
1769     Utf8 &quot;I&quot;; // #15     at 0x58
1770     Utf8 &quot;v2&quot;; // #16     at 0x5C
1771     Utf8 &quot;QCircStaticA;&quot;; // #17     at 0x61
1772     Utf8 &quot;makeCircStaticB&quot;; // #18     at 0x71
</pre>
<hr />
<pre>
2019           [0] { // bootstrap_arguments
2020           }  //  bootstrap_arguments
2021         }  //  bootstrap_method
2022       }
2023     } // end BootstrapMethods
2024   } // Attributes
2025 } // end class CircStaticB
2026 
2027 //////////////////////////////////////////////////////////////////////
2028 
2029 // Test that an inline type cannot be Cloneable.
2030 //
2031 // final inline class ValueCloneable implements Cloneable {
2032 //    final int field;
2033 //    private ValueCloneable() { field = 0; }
2034 //}
2035 
2036 class ValueCloneable {
2037   0xCAFEBABE;
2038   0; // minor version
<span class="line-modified">2039   59; // version</span>
2040   [46] { // Constant Pool
2041     ; // first element is empty
2042     class #22; // #1     at 0x0A
2043     Field #1 #23; // #2     at 0x0D
2044     InvokeDynamic 0s #26; // #3     at 0x12
2045     InvokeDynamic 0s #27; // #4     at 0x17
2046     InvokeDynamic 0s #28; // #5     at 0x1C
2047     class #29; // #6     at 0x21
2048     class #30; // #7     at 0x24
2049     Utf8 &quot;field&quot;; // #8     at 0x27
2050     Utf8 &quot;I&quot;; // #9     at 0x2F
2051     Utf8 &quot;hashCode&quot;; // #10     at 0x33
2052     Utf8 &quot;()I&quot;; // #11     at 0x3E
2053     Utf8 &quot;Code&quot;; // #12     at 0x44
2054     Utf8 &quot;LineNumberTable&quot;; // #13     at 0x4B
2055     Utf8 &quot;equals&quot;; // #14     at 0x5D
2056     Utf8 &quot;(Ljava/lang/Object;)Z&quot;; // #15     at 0x66
2057     Utf8 &quot;toString&quot;; // #16     at 0x7E
2058     Utf8 &quot;()Ljava/lang/String;&quot;; // #17     at 0x89
2059     Utf8 &quot;&lt;init&gt;&quot;; // #18     at 0xA0
</pre>
</td>
<td>
<hr />
<pre>
  31 //
  32 // final inline class Value {
  33 //     static final Value VT = makeValue(0x01234567);
  34 //     final int int_v;
  35 //     Value() {
  36 //         int_v = 1;
  37 //     }
  38 //     static Value makeValue(int x) {
  39 //         Value v = Value.default;
  40 //         v = __WithField(v.int_v, x);
  41 //         return v;
  42 //     }
  43 // }
  44 
  45 
  46 // Test that class modifiers cannot have both ACC_VALUE and ACC_ABSTRACT set.
  47 //
  48 class ValueAbstract {
  49   0xCAFEBABE;
  50   0; // minor version
<span class="line-modified">  51   60; // version</span>
  52   [28] { // Constant Pool
  53     ; // first element is empty
  54     Method #7 #23; // #1     at 0x0A
  55     Field #3 #24; // #2     at 0x0F
  56     class #9; // #3     at 0x14
  57     int 0x01234567; // #4     at 0x17
  58     Method #3 #25; // #5     at 0x1C
  59     Field #3 #26; // #6     at 0x21
  60     class #27; // #7     at 0x26
  61     Utf8 &quot;VT&quot;; // #8     at 0x29
  62     Utf8 &quot;ValueAbstract&quot;; // #9     at 0x2E
  63     Utf8 &quot;ValueTypes&quot;; // #10     at 0x36
  64     Utf8 &quot;LValueAbstract;&quot;; // #11     at 0x43
  65     Utf8 &quot;int_v&quot;; // #12     at 0x4D
  66     Utf8 &quot;I&quot;; // #13     at 0x55
  67     Utf8 &quot;&lt;init&gt;&quot;; // #14     at 0x59
  68     Utf8 &quot;()V&quot;; // #15     at 0x62
  69     Utf8 &quot;Code&quot;; // #16     at 0x68
  70     Utf8 &quot;LineNumberTable&quot;; // #17     at 0x6F
  71     Utf8 &quot;makeValueAbstract&quot;; // #18     at 0x81
</pre>
<hr />
<pre>
 187   } // methods
 188 
 189   [2] { // Attributes
 190     Attr(#21, 2) { // SourceFile at 0x01A5
 191       #22;
 192     } // end SourceFile
 193     ;
 194     Attr(#10, 4) { // ValueTypes at 0x01AD
 195       0x00010003;
 196     } // end ValueTypes
 197   } // Attributes
 198 } // end class ValueAbstract
 199 
 200 //////////////////////////////////////////////////////////////////////
 201 
 202 // Test that class modifiers cannot have both ACC_VALUE and ACC_ENUM set.
 203 //
 204 class ValueEnum {
 205   0xCAFEBABE;
 206   0; // minor version
<span class="line-modified"> 207   60; // version</span>
 208   [28] { // Constant Pool
 209     ; // first element is empty
 210     Method #7 #23; // #1     at 0x0A
 211     Field #3 #24; // #2     at 0x0F
 212     class #9; // #3     at 0x14
 213     int 0x01234567; // #4     at 0x17
 214     Method #3 #25; // #5     at 0x1C
 215     Field #3 #26; // #6     at 0x21
 216     class #27; // #7     at 0x26
 217     Utf8 &quot;VT&quot;; // #8     at 0x29
 218     Utf8 &quot;ValueEnum&quot;; // #9     at 0x2E
 219     Utf8 &quot;ValueTypes&quot;; // #10     at 0x36
 220     Utf8 &quot;LValueEnum;&quot;; // #11     at 0x43
 221     Utf8 &quot;int_v&quot;; // #12     at 0x4D
 222     Utf8 &quot;I&quot;; // #13     at 0x55
 223     Utf8 &quot;&lt;init&gt;&quot;; // #14     at 0x59
 224     Utf8 &quot;()V&quot;; // #15     at 0x62
 225     Utf8 &quot;Code&quot;; // #16     at 0x68
 226     Utf8 &quot;LineNumberTable&quot;; // #17     at 0x6F
 227     Utf8 &quot;makeValueEnum&quot;; // #18     at 0x81
</pre>
<hr />
<pre>
 343   } // methods
 344 
 345   [2] { // Attributes
 346     Attr(#21, 2) { // SourceFile at 0x01A5
 347       #22;
 348     } // end SourceFile
 349     ;
 350     Attr(#10, 4) { // ValueTypes at 0x01AD
 351       0x00010003;
 352     } // end ValueTypes
 353   } // Attributes
 354 } // end class ValueEnum
 355 
 356 //////////////////////////////////////////////////////////////////////
 357 
 358 // Test that inline type fields must be final.
 359 //
 360 class ValueFieldNotFinal {
 361   0xCAFEBABE;
 362   0; // minor version
<span class="line-modified"> 363   60; // version</span>
 364   [28] { // Constant Pool
 365     ; // first element is empty
 366     Method #7 #23; // #1     at 0x0A
 367     Field #3 #24; // #2     at 0x0F
 368     class #9; // #3     at 0x14
 369     int 0x01234567; // #4     at 0x17
 370     Method #3 #25; // #5     at 0x1C
 371     Field #3 #26; // #6     at 0x21
 372     class #27; // #7     at 0x26
 373     Utf8 &quot;VT&quot;; // #8     at 0x29
 374     Utf8 &quot;ValueFieldNotFinal&quot;; // #9     at 0x2E
 375     Utf8 &quot;ValueTypes&quot;; // #10     at 0x36
 376     Utf8 &quot;LValueFieldNotFinal;&quot;; // #11     at 0x43
 377     Utf8 &quot;int_v&quot;; // #12     at 0x4D
 378     Utf8 &quot;I&quot;; // #13     at 0x55
 379     Utf8 &quot;&lt;init&gt;&quot;; // #14     at 0x59
 380     Utf8 &quot;()V&quot;; // #15     at 0x62
 381     Utf8 &quot;Code&quot;; // #16     at 0x68
 382     Utf8 &quot;LineNumberTable&quot;; // #17     at 0x6F
 383     Utf8 &quot;makeValueFieldNotFinal&quot;; // #18     at 0x81
</pre>
<hr />
<pre>
 499   } // methods
 500 
 501   [2] { // Attributes
 502     Attr(#21, 2) { // SourceFile at 0x01A5
 503       #22;
 504     } // end SourceFile
 505     ;
 506     Attr(#10, 4) { // ValueTypes at 0x01AD
 507       0x00010003;
 508     } // end ValueTypes
 509   } // Attributes
 510 } // end class ValueFieldNotFinal
 511 
 512 //////////////////////////////////////////////////////////////////////
 513 
 514 // Test that class modifiers cannot have both ACC_VALUE and ACC_INTERFACE set.
 515 //
 516 class ValueInterface {
 517   0xCAFEBABE;
 518   0; // minor version
<span class="line-modified"> 519   60; // version</span>
 520   [27] { // Constant Pool
 521     ; // first element is empty
 522     Method #7 #21; // #1     at 0x0A
 523     Field #3 #22; // #2     at 0x0F
 524     class #23; // #3     at 0x14
 525     int 0x01234567; // #4     at 0x17
 526     Method #3 #24; // #5     at 0x1C
 527     Field #3 #25; // #6     at 0x21
 528     class #26; // #7     at 0x26
 529     Utf8 &quot;VT&quot;; // #8     at 0x29
 530     Utf8 &quot;LValueInterface;&quot;; // #9     at 0x2E
 531     Utf8 &quot;int_v&quot;; // #10     at 0x3C
 532     Utf8 &quot;I&quot;; // #11     at 0x44
 533     Utf8 &quot;&lt;init&gt;&quot;; // #12     at 0x48
 534     Utf8 &quot;()V&quot;; // #13     at 0x51
 535     Utf8 &quot;Code&quot;; // #14     at 0x57
 536     Utf8 &quot;LineNumberTable&quot;; // #15     at 0x5E
 537     Utf8 &quot;makeValueInterface&quot;; // #16     at 0x70
 538     Utf8 &quot;(I)LValueInterface;&quot;; // #17     at 0x80
 539     Utf8 &quot;&lt;clinit&gt;&quot;; // #18     at 0x91
</pre>
<hr />
<pre>
 606       #20;
 607     } // end SourceFile
 608   } // Attributes
 609 } // end class ValueInterface
 610 
 611 //////////////////////////////////////////////////////////////////////
 612 
 613 // Test that inline type instance methods cannot be synchronized.
 614 //
 615 // final inline class ValueMethodSynch {
 616 //     final int int_v;
 617 //
 618 //     ValueMethodSynch() { int_v = 1; }
 619 //
 620 //     int getInt(int x) { return x; }
 621 // }
 622 
 623 class ValueMethodSynch {
 624   0xCAFEBABE;
 625   0; // minor version
<span class="line-modified"> 626   60; // version</span>
 627   [46] { // Constant Pool
 628     ; // first element is empty
 629     class #23; // #1     at 0x0A
 630     Field #1 #24; // #2     at 0x0D
 631     InvokeDynamic 0s #27; // #3     at 0x12
 632     InvokeDynamic 0s #28; // #4     at 0x17
 633     InvokeDynamic 0s #29; // #5     at 0x1C
 634     class #30; // #6     at 0x21
 635     Utf8 &quot;int_v&quot;; // #7     at 0x24
 636     Utf8 &quot;I&quot;; // #8     at 0x2C
 637     Utf8 &quot;getInt&quot;; // #9     at 0x30
 638     Utf8 &quot;(I)I&quot;; // #10     at 0x39
 639     Utf8 &quot;Code&quot;; // #11     at 0x40
 640     Utf8 &quot;LineNumberTable&quot;; // #12     at 0x47
 641     Utf8 &quot;hashCode&quot;; // #13     at 0x59
 642     Utf8 &quot;()I&quot;; // #14     at 0x64
 643     Utf8 &quot;equals&quot;; // #15     at 0x6A
 644     Utf8 &quot;(Ljava/lang/Object;)Z&quot;; // #16     at 0x73
 645     Utf8 &quot;toString&quot;; // #17     at 0x8B
 646     Utf8 &quot;()Ljava/lang/String;&quot;; // #18     at 0x96
</pre>
<hr />
<pre>
 861 // }
 862 //----------------------------------------------------------------
 863 // final inline class Circ2 {
 864 //     static final Circ2 VT = makeCirc2(&#39;\u0123&#39;);
 865 //     final char char_v;
 866 //     final Circ vv;
 867 //     Circ2() {
 868 //         char_v = &#39;z&#39;;
 869 //         vv = Circ.default;
 870 //     }
 871 //     static Circ2 makeCirc2(char c) {
 872 //         Circ2 v = Circ2.default;
 873 //         v = __WithField(v.char_v, c);
 874 //         return v;
 875 //     }
 876 // }
 877 
 878 class Circ {
 879   0xCAFEBABE;
 880   0; // minor version
<span class="line-modified"> 881   60; // version</span>
 882   [61] { // Constant Pool
 883     ; // first element is empty
 884     class #34; // #1     at 0x0A
 885     Field #1 #35; // #2     at 0x0D
 886     class #36; // #3     at 0x12
 887     Field #1 #37; // #4     at 0x15
 888     InvokeDynamic 0s #40; // #5     at 0x1A
 889     InvokeDynamic 0s #41; // #6     at 0x1F
 890     InvokeDynamic 0s #42; // #7     at 0x24
 891     int 0x01234567; // #8     at 0x29
 892     Method #1 #43; // #9     at 0x2E
 893     Field #1 #44; // #10     at 0x33
 894     class #45; // #11     at 0x38
 895     Utf8 &quot;VT&quot;; // #12     at 0x3B
 896     Utf8 &quot;QCirc;&quot;; // #13     at 0x40
 897     Utf8 &quot;int_v&quot;; // #14     at 0x49
 898     Utf8 &quot;I&quot;; // #15     at 0x51
 899     Utf8 &quot;v2&quot;; // #16     at 0x55
 900     Utf8 &quot;QCirc2;&quot;; // #17     at 0x5A
 901     Utf8 &quot;makeCirc&quot;; // #18     at 0x64
</pre>
<hr />
<pre>
1140       [1] { // InnerClasses
1141         #54 #58 #55 25; //  at 0x046A
1142       }
1143     } // end InnerClasses
1144     ;
1145     Attr(#38, 6) { // BootstrapMethods at 0x046A
1146       [1] { // bootstrap_methods
1147         {  //  bootstrap_method
1148           #39; // bootstrap_method_ref
1149           [0] { // bootstrap_arguments
1150           }  //  bootstrap_arguments
1151         }  //  bootstrap_method
1152       }
1153     } // end BootstrapMethods
1154   } // Attributes
1155 } // end class Circ
1156 
1157 class Circ2 {
1158   0xCAFEBABE;
1159   0; // minor version
<span class="line-modified">1160   60; // version</span>
1161   [60] { // Constant Pool
1162     ; // first element is empty
1163     class #33; // #1     at 0x0A
1164     Field #1 #34; // #2     at 0x0D
1165     class #35; // #3     at 0x12
1166     Field #1 #36; // #4     at 0x15
1167     InvokeDynamic 0s #39; // #5     at 0x1A
1168     InvokeDynamic 0s #40; // #6     at 0x1F
1169     InvokeDynamic 0s #41; // #7     at 0x24
1170     Method #1 #42; // #8     at 0x29
1171     Field #1 #43; // #9     at 0x2E
1172     class #44; // #10     at 0x33
1173     Utf8 &quot;VT&quot;; // #11     at 0x36
1174     Utf8 &quot;QCirc2;&quot;; // #12     at 0x3B
1175     Utf8 &quot;char_v&quot;; // #13     at 0x45
1176     Utf8 &quot;C&quot;; // #14     at 0x4E
1177     Utf8 &quot;vv&quot;; // #15     at 0x52
1178     Utf8 &quot;QCirc;&quot;; // #16     at 0x57
1179     Utf8 &quot;makeCirc2&quot;; // #17     at 0x60
1180     Utf8 &quot;(C)QCirc2;&quot;; // #18     at 0x6C
</pre>
<hr />
<pre>
1454 //     }
1455 // }
1456 //----------------------------------------------------------------
1457 // final inline class CircStaticB {
1458 //     static final CircStaticB VT = makeCircStaticB(0x01234567);
1459 //     final int int_v;
1460 //     static final CircStaticA v2 = CircStaticA.default;
1461 //     CircStaticB() {
1462 //         int_v = 1;
1463 //     }
1464 //     static CircStaticB makeCircStaticB(int x) {
1465 //         CircStaticB v = CircStaticB.default;
1466 //         v = __WithField(v.int_v, x);
1467 //         return v;
1468 //     }
1469 // }
1470 
1471 class CircStaticA {
1472   0xCAFEBABE;
1473   0; // minor version
<span class="line-modified">1474   60; // version</span>
1475   [61] { // Constant Pool
1476     ; // first element is empty
1477     class #34; // #1     at 0x0A
1478     Field #1 #35; // #2     at 0x0D
1479     InvokeDynamic 0s #38; // #3     at 0x12
1480     InvokeDynamic 0s #39; // #4     at 0x17
1481     InvokeDynamic 0s #40; // #5     at 0x1C
1482     int 0x01234567; // #6     at 0x21
1483     Method #1 #41; // #7     at 0x26
1484     Field #1 #42; // #8     at 0x2B
1485     class #43; // #9     at 0x30
1486     Field #1 #44; // #10     at 0x33
1487     class #45; // #11     at 0x38
1488     Utf8 &quot;VT&quot;; // #12     at 0x3B
1489     Utf8 &quot;QCircStaticA;&quot;; // #13     at 0x40
1490     Utf8 &quot;int_v&quot;; // #14     at 0x50
1491     Utf8 &quot;I&quot;; // #15     at 0x58
1492     Utf8 &quot;v2&quot;; // #16     at 0x5C
1493     Utf8 &quot;QCircStaticB;&quot;; // #17     at 0x61
1494     Utf8 &quot;makeCircStaticA&quot;; // #18     at 0x71
</pre>
<hr />
<pre>
1732       [1] { // InnerClasses
1733         #54 #58 #55 25; //  at 0x04B2
1734       }
1735     } // end InnerClasses
1736     ;
1737     Attr(#36, 6) { // BootstrapMethods at 0x04B2
1738       [1] { // bootstrap_methods
1739         {  //  bootstrap_method
1740           #37; // bootstrap_method_ref
1741           [0] { // bootstrap_arguments
1742           }  //  bootstrap_arguments
1743         }  //  bootstrap_method
1744       }
1745     } // end BootstrapMethods
1746   } // Attributes
1747 } // end class CircStaticA
1748 
1749 class CircStaticB {
1750   0xCAFEBABE;
1751   0; // minor version
<span class="line-modified">1752   60; // version</span>
1753   [61] { // Constant Pool
1754     ; // first element is empty
1755     class #34; // #1     at 0x0A
1756     Field #1 #35; // #2     at 0x0D
1757     InvokeDynamic 0s #38; // #3     at 0x12
1758     InvokeDynamic 0s #39; // #4     at 0x17
1759     InvokeDynamic 0s #40; // #5     at 0x1C
1760     int 0x01234567; // #6     at 0x21
1761     Method #1 #41; // #7     at 0x26
1762     Field #1 #42; // #8     at 0x2B
1763     class #43; // #9     at 0x30
1764     Field #1 #44; // #10     at 0x33
1765     class #45; // #11     at 0x38
1766     Utf8 &quot;VT&quot;; // #12     at 0x3B
1767     Utf8 &quot;QCircStaticB;&quot;; // #13     at 0x40
1768     Utf8 &quot;int_v&quot;; // #14     at 0x50
1769     Utf8 &quot;I&quot;; // #15     at 0x58
1770     Utf8 &quot;v2&quot;; // #16     at 0x5C
1771     Utf8 &quot;QCircStaticA;&quot;; // #17     at 0x61
1772     Utf8 &quot;makeCircStaticB&quot;; // #18     at 0x71
</pre>
<hr />
<pre>
2019           [0] { // bootstrap_arguments
2020           }  //  bootstrap_arguments
2021         }  //  bootstrap_method
2022       }
2023     } // end BootstrapMethods
2024   } // Attributes
2025 } // end class CircStaticB
2026 
2027 //////////////////////////////////////////////////////////////////////
2028 
2029 // Test that an inline type cannot be Cloneable.
2030 //
2031 // final inline class ValueCloneable implements Cloneable {
2032 //    final int field;
2033 //    private ValueCloneable() { field = 0; }
2034 //}
2035 
2036 class ValueCloneable {
2037   0xCAFEBABE;
2038   0; // minor version
<span class="line-modified">2039   60; // version</span>
2040   [46] { // Constant Pool
2041     ; // first element is empty
2042     class #22; // #1     at 0x0A
2043     Field #1 #23; // #2     at 0x0D
2044     InvokeDynamic 0s #26; // #3     at 0x12
2045     InvokeDynamic 0s #27; // #4     at 0x17
2046     InvokeDynamic 0s #28; // #5     at 0x1C
2047     class #29; // #6     at 0x21
2048     class #30; // #7     at 0x24
2049     Utf8 &quot;field&quot;; // #8     at 0x27
2050     Utf8 &quot;I&quot;; // #9     at 0x2F
2051     Utf8 &quot;hashCode&quot;; // #10     at 0x33
2052     Utf8 &quot;()I&quot;; // #11     at 0x3E
2053     Utf8 &quot;Code&quot;; // #12     at 0x44
2054     Utf8 &quot;LineNumberTable&quot;; // #13     at 0x4B
2055     Utf8 &quot;equals&quot;; // #14     at 0x5D
2056     Utf8 &quot;(Ljava/lang/Object;)Z&quot;; // #15     at 0x66
2057     Utf8 &quot;toString&quot;; // #16     at 0x7E
2058     Utf8 &quot;()Ljava/lang/String;&quot;; // #17     at 0x89
2059     Utf8 &quot;&lt;init&gt;&quot;; // #18     at 0xA0
</pre>
</td>
</tr>
</table>
<center><a href="../WithFieldNoAccessTest.jcod.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../identityObject/IdentityType.jcod.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>