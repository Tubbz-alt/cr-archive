<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/jfr/jni/jfrJniMethod.cpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="jfrJavaSupport.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../leakprofiler/checkpoint/eventEmitter.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/jfr/jni/jfrJniMethod.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
162 NO_TRANSITION(jlong, jfr_get_epoch_address(JNIEnv* env, jobject jvm))
163   return JfrTraceIdEpoch::epoch_address();
164 NO_TRANSITION_END
165 
166 NO_TRANSITION(jlong, jfr_get_unloaded_event_classes_count(JNIEnv* env, jobject jvm))
167   return JfrKlassUnloading::event_class_count();
168 NO_TRANSITION_END
169 
170 NO_TRANSITION(jdouble, jfr_time_conv_factor(JNIEnv* env, jobject jvm))
171   return (jdouble)JfrTimeConverter::nano_to_counter_multiplier();
172 NO_TRANSITION_END
173 
174 NO_TRANSITION(jboolean, jfr_set_cutoff(JNIEnv* env, jobject jvm, jlong event_type_id, jlong cutoff_ticks))
175   return JfrEventSetting::set_cutoff(event_type_id, cutoff_ticks) ? JNI_TRUE : JNI_FALSE;
176 NO_TRANSITION_END
177 
178 NO_TRANSITION(jboolean, jfr_should_rotate_disk(JNIEnv* env, jobject jvm))
179   return JfrChunkRotation::should_rotate() ? JNI_TRUE : JNI_FALSE;
180 NO_TRANSITION_END
181 






182 /*
183  * JVM_ENTRY_NO_ENV entries
184  *
185  * Transitions:
186  *   Entry: _thread_in_native -&gt; _thread_in_vm
187  *   Exit:  _thread_in_vm -&gt; _thread_in_native
188  *
189  * Current JavaThread available as &quot;thread&quot; variable
190  */
191 
192 JVM_ENTRY_NO_ENV(jboolean, jfr_create_jfr(JNIEnv* env, jobject jvm, jboolean simulate_failure))
193   if (JfrRecorder::is_created()) {
194     return JNI_TRUE;
195   }
196   if (!JfrRecorder::create(simulate_failure == JNI_TRUE)) {
197     if (!thread-&gt;has_pending_exception()) {
198       JfrJavaSupport::throw_illegal_state_exception(&quot;Unable to start Jfr&quot;, thread);
199     }
200     return JNI_FALSE;
201   }
</pre>
<hr />
<pre>
333 
334 JVM_ENTRY_NO_ENV(void, jfr_include_thread(JNIEnv* env, jobject jvm, jobject t))
335   JfrJavaSupport::include(t);
336 JVM_END
337 
338 JVM_ENTRY_NO_ENV(jboolean, jfr_is_thread_excluded(JNIEnv* env, jobject jvm, jobject t))
339   return JfrJavaSupport::is_excluded(t);
340 JVM_END
341 
342 JVM_ENTRY_NO_ENV(jlong, jfr_chunk_start_nanos(JNIEnv* env, jobject jvm))
343   return JfrRepository::current_chunk_start_nanos();
344 JVM_END
345 
346 JVM_ENTRY_NO_ENV(jobject, jfr_get_handler(JNIEnv * env, jobject jvm, jobject clazz))
347   return JfrJavaSupport::get_handler(clazz, thread);
348 JVM_END
349 
350 JVM_ENTRY_NO_ENV(jboolean, jfr_set_handler(JNIEnv * env, jobject jvm, jobject clazz, jobject handler))
351   return JfrJavaSupport::set_handler(clazz, handler, thread);
352 JVM_END
<span class="line-removed">353 </span>
<span class="line-removed">354 NO_TRANSITION(jlong, jfr_get_type_id_from_string(JNIEnv * env, jobject jvm, jstring type))</span>
<span class="line-removed">355   const char* type_name= env-&gt;GetStringUTFChars(type, NULL);</span>
<span class="line-removed">356   jlong id = JfrType::name_to_id(type_name);</span>
<span class="line-removed">357   env-&gt;ReleaseStringUTFChars(type, type_name);</span>
<span class="line-removed">358   return id;</span>
<span class="line-removed">359 NO_TRANSITION_END</span>
<span class="line-removed">360 </span>
</pre>
</td>
<td>
<hr />
<pre>
162 NO_TRANSITION(jlong, jfr_get_epoch_address(JNIEnv* env, jobject jvm))
163   return JfrTraceIdEpoch::epoch_address();
164 NO_TRANSITION_END
165 
166 NO_TRANSITION(jlong, jfr_get_unloaded_event_classes_count(JNIEnv* env, jobject jvm))
167   return JfrKlassUnloading::event_class_count();
168 NO_TRANSITION_END
169 
170 NO_TRANSITION(jdouble, jfr_time_conv_factor(JNIEnv* env, jobject jvm))
171   return (jdouble)JfrTimeConverter::nano_to_counter_multiplier();
172 NO_TRANSITION_END
173 
174 NO_TRANSITION(jboolean, jfr_set_cutoff(JNIEnv* env, jobject jvm, jlong event_type_id, jlong cutoff_ticks))
175   return JfrEventSetting::set_cutoff(event_type_id, cutoff_ticks) ? JNI_TRUE : JNI_FALSE;
176 NO_TRANSITION_END
177 
178 NO_TRANSITION(jboolean, jfr_should_rotate_disk(JNIEnv* env, jobject jvm))
179   return JfrChunkRotation::should_rotate() ? JNI_TRUE : JNI_FALSE;
180 NO_TRANSITION_END
181 
<span class="line-added">182 NO_TRANSITION(jlong, jfr_get_type_id_from_string(JNIEnv * env, jobject jvm, jstring type))</span>
<span class="line-added">183   const char* type_name = env-&gt;GetStringUTFChars(type, NULL);</span>
<span class="line-added">184   jlong id = JfrType::name_to_id(type_name);</span>
<span class="line-added">185   env-&gt;ReleaseStringUTFChars(type, type_name);</span>
<span class="line-added">186   return id;</span>
<span class="line-added">187 NO_TRANSITION_END</span>
188 /*
189  * JVM_ENTRY_NO_ENV entries
190  *
191  * Transitions:
192  *   Entry: _thread_in_native -&gt; _thread_in_vm
193  *   Exit:  _thread_in_vm -&gt; _thread_in_native
194  *
195  * Current JavaThread available as &quot;thread&quot; variable
196  */
197 
198 JVM_ENTRY_NO_ENV(jboolean, jfr_create_jfr(JNIEnv* env, jobject jvm, jboolean simulate_failure))
199   if (JfrRecorder::is_created()) {
200     return JNI_TRUE;
201   }
202   if (!JfrRecorder::create(simulate_failure == JNI_TRUE)) {
203     if (!thread-&gt;has_pending_exception()) {
204       JfrJavaSupport::throw_illegal_state_exception(&quot;Unable to start Jfr&quot;, thread);
205     }
206     return JNI_FALSE;
207   }
</pre>
<hr />
<pre>
339 
340 JVM_ENTRY_NO_ENV(void, jfr_include_thread(JNIEnv* env, jobject jvm, jobject t))
341   JfrJavaSupport::include(t);
342 JVM_END
343 
344 JVM_ENTRY_NO_ENV(jboolean, jfr_is_thread_excluded(JNIEnv* env, jobject jvm, jobject t))
345   return JfrJavaSupport::is_excluded(t);
346 JVM_END
347 
348 JVM_ENTRY_NO_ENV(jlong, jfr_chunk_start_nanos(JNIEnv* env, jobject jvm))
349   return JfrRepository::current_chunk_start_nanos();
350 JVM_END
351 
352 JVM_ENTRY_NO_ENV(jobject, jfr_get_handler(JNIEnv * env, jobject jvm, jobject clazz))
353   return JfrJavaSupport::get_handler(clazz, thread);
354 JVM_END
355 
356 JVM_ENTRY_NO_ENV(jboolean, jfr_set_handler(JNIEnv * env, jobject jvm, jobject clazz, jobject handler))
357   return JfrJavaSupport::set_handler(clazz, handler, thread);
358 JVM_END








</pre>
</td>
</tr>
</table>
<center><a href="jfrJavaSupport.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../leakprofiler/checkpoint/eventEmitter.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>