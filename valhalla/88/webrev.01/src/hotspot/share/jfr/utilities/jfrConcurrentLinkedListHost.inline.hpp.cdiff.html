<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/jfr/utilities/jfrConcurrentLinkedListHost.inline.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="jfrConcurrentLinkedListHost.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="jfrVersionSystem.inline.hpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/jfr/utilities/jfrConcurrentLinkedListHost.inline.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 220,11 ***</span>
    // Invariant: predecessor --&gt; (successor) --&gt; successor_next
    // Successor node now logically excised.
    assert(is_marked_for_removal(successor-&gt;_next), &quot;invariant&quot;);
    // Now attempt to physically excise the successor node.
    // If the cas fails, we can optimize for the slow path if we know we are not performing
<span class="line-modified">!   // insertions from the head. Then a failed cas results not from new a node being inserted,</span>
    // but only because another thread excised us already.
    if (!cas(&amp;predecessor-&gt;_next, successor, successor_next) &amp;&amp; insert_is_head) {
      // Physically excise using slow path, can be completed asynchronously by other threads.
      Identity&lt;Node&gt; excise(successor);
      find_adjacent&lt;Node, VersionHandle, Identity&gt;(head, tail, &amp;predecessor, version_handle, excise);
<span class="line-new-header">--- 220,11 ---</span>
    // Invariant: predecessor --&gt; (successor) --&gt; successor_next
    // Successor node now logically excised.
    assert(is_marked_for_removal(successor-&gt;_next), &quot;invariant&quot;);
    // Now attempt to physically excise the successor node.
    // If the cas fails, we can optimize for the slow path if we know we are not performing
<span class="line-modified">!   // insertions from the head. Then a failed cas results not from a new node being inserted,</span>
    // but only because another thread excised us already.
    if (!cas(&amp;predecessor-&gt;_next, successor, successor_next) &amp;&amp; insert_is_head) {
      // Physically excise using slow path, can be completed asynchronously by other threads.
      Identity&lt;Node&gt; excise(successor);
      find_adjacent&lt;Node, VersionHandle, Identity&gt;(head, tail, &amp;predecessor, version_handle, excise);
</pre>
<center><a href="jfrConcurrentLinkedListHost.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="jfrVersionSystem.inline.hpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>