<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/jfr/recorder/checkpoint/types/jfrTypeSet.cpp</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../jfrMetadataEvent.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../repository/jfrChunkRotation.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/jfr/recorder/checkpoint/types/jfrTypeSet.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
1021   assert(writer != NULL, &quot;invariant&quot;);
1022   ResourceMark rm;
1023   setup(writer, leakp_writer, class_unload, flushpoint);
1024   // write order is important because an individual write step
1025   // might tag an artifact to be written in a subsequent step
1026   if (!write_klasses()) {
1027     return 0;
1028   }
1029   write_packages();
1030   write_modules();
1031   write_classloaders();
1032   write_methods();
1033   write_symbols();
1034   return teardown();
1035 }
1036 
1037 /**
1038  * Clear all tags from the previous epoch.
1039  */
1040 void JfrTypeSet::clear() {

1041   JfrKlassUnloading::clear();
1042   clear_artifacts = true;
1043   setup(NULL, NULL, false, false);
1044   register_klasses();
1045   clear_packages();
1046   clear_modules();
1047   clear_classloaders();
1048   clear_klasses_and_methods();
1049 }
1050 
1051 size_t JfrTypeSet::on_unloading_classes(JfrCheckpointWriter* writer) {
1052   if (JfrRecorder::is_recording()) {
1053     return serialize(writer, NULL, true, false);
1054   }
1055   return register_unloading_klasses();
1056 }
</pre>
</td>
<td>
<hr />
<pre>
1021   assert(writer != NULL, &quot;invariant&quot;);
1022   ResourceMark rm;
1023   setup(writer, leakp_writer, class_unload, flushpoint);
1024   // write order is important because an individual write step
1025   // might tag an artifact to be written in a subsequent step
1026   if (!write_klasses()) {
1027     return 0;
1028   }
1029   write_packages();
1030   write_modules();
1031   write_classloaders();
1032   write_methods();
1033   write_symbols();
1034   return teardown();
1035 }
1036 
1037 /**
1038  * Clear all tags from the previous epoch.
1039  */
1040 void JfrTypeSet::clear() {
<span class="line-added">1041   ResourceMark rm;</span>
1042   JfrKlassUnloading::clear();
1043   clear_artifacts = true;
1044   setup(NULL, NULL, false, false);
1045   register_klasses();
1046   clear_packages();
1047   clear_modules();
1048   clear_classloaders();
1049   clear_klasses_and_methods();
1050 }
1051 
1052 size_t JfrTypeSet::on_unloading_classes(JfrCheckpointWriter* writer) {
1053   if (JfrRecorder::is_recording()) {
1054     return serialize(writer, NULL, true, false);
1055   }
1056   return register_unloading_klasses();
1057 }
</pre>
</td>
</tr>
</table>
<center><a href="../jfrMetadataEvent.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../repository/jfrChunkRotation.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>