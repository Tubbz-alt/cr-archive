<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.jpackage/share/native/applauncher/JvmLauncher.cpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../../classes/jdk/incubator/jpackage/internal/IOUtils.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="JvmLauncher.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.jpackage/share/native/applauncher/JvmLauncher.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
152 
153     // Add treminal &#39;0&#39;.
154     argv.push_back(0);
155 }
156 } // namespace
157 
158 void Jvm::launch() {
159     typedef int (JNICALL *LaunchFuncType)(int argc, char ** argv,
160         int jargc, const char** jargv,
161         int appclassc, const char** appclassv,
162         const char* fullversion,
163         const char* dotversion,
164         const char* pname,
165         const char* lname,
166         jboolean javaargs,
167         jboolean cpwildcard,
168         jboolean javaw,
169         jint ergo);
170 
171     std::vector&lt;char*&gt; argv;











172     convertArgs(args, argv);

173 
174     // Don&#39;t count terminal &#39;0&#39;.
175     const int argc = (int)argv.size() - 1;
176 
177     LOG_TRACE(tstrings::any() &lt;&lt; &quot;JVM library: \&quot;&quot; &lt;&lt; jvmPath &lt;&lt; &quot;\&quot;&quot;);
178 
179     DllFunction&lt;LaunchFuncType&gt; func(Dll(jvmPath), &quot;JLI_Launch&quot;);
180     int exitStatus = func(argc, argv.data(),
181         0, 0,
182         0, 0,
183         &quot;&quot;,
184         &quot;&quot;,
185         &quot;java&quot;,
186         &quot;java&quot;,
187         JNI_FALSE,
188         JNI_FALSE,
189         JNI_FALSE,
190         0);
191 
192     if (exitStatus != 0) {
</pre>
</td>
<td>
<hr />
<pre>
152 
153     // Add treminal &#39;0&#39;.
154     argv.push_back(0);
155 }
156 } // namespace
157 
158 void Jvm::launch() {
159     typedef int (JNICALL *LaunchFuncType)(int argc, char ** argv,
160         int jargc, const char** jargv,
161         int appclassc, const char** appclassv,
162         const char* fullversion,
163         const char* dotversion,
164         const char* pname,
165         const char* lname,
166         jboolean javaargs,
167         jboolean cpwildcard,
168         jboolean javaw,
169         jint ergo);
170 
171     std::vector&lt;char*&gt; argv;
<span class="line-added">172 #ifdef TSTRINGS_WITH_WCHAR</span>
<span class="line-added">173     std::vector&lt;std::string&gt; mbcs_args;</span>
<span class="line-added">174     do {</span>
<span class="line-added">175         tstring_array::const_iterator it = args.begin();</span>
<span class="line-added">176         const tstring_array::const_iterator end = args.end();</span>
<span class="line-added">177         for (; it != end; ++it) {</span>
<span class="line-added">178             mbcs_args.push_back(tstrings::toACP(*it));</span>
<span class="line-added">179         }</span>
<span class="line-added">180     } while (0);</span>
<span class="line-added">181     convertArgs(mbcs_args, argv);</span>
<span class="line-added">182 #else</span>
183     convertArgs(args, argv);
<span class="line-added">184 #endif</span>
185 
186     // Don&#39;t count terminal &#39;0&#39;.
187     const int argc = (int)argv.size() - 1;
188 
189     LOG_TRACE(tstrings::any() &lt;&lt; &quot;JVM library: \&quot;&quot; &lt;&lt; jvmPath &lt;&lt; &quot;\&quot;&quot;);
190 
191     DllFunction&lt;LaunchFuncType&gt; func(Dll(jvmPath), &quot;JLI_Launch&quot;);
192     int exitStatus = func(argc, argv.data(),
193         0, 0,
194         0, 0,
195         &quot;&quot;,
196         &quot;&quot;,
197         &quot;java&quot;,
198         &quot;java&quot;,
199         JNI_FALSE,
200         JNI_FALSE,
201         JNI_FALSE,
202         0);
203 
204     if (exitStatus != 0) {
</pre>
</td>
</tr>
</table>
<center><a href="../../classes/jdk/incubator/jpackage/internal/IOUtils.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="JvmLauncher.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>