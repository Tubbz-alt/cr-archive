<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.jpackage/share/native/common/tstrings.cpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../applauncher/JvmLauncher.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="tstrings.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.jpackage/share/native/common/tstrings.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
258         if (0 == cw) {
259             break;
260         }
261 
262         utf16.resize(cw);
263         int cw2 = MultiByteToWideChar(encoding,
264                                     MB_ERR_INVALID_CHARS,
265                                     str.c_str(),
266                                     int(str.size()),
267                                     &amp;*utf16.begin(),
268                                     cw);
269         if (cw != cw2) {
270             JP_THROW(&quot;Unexpected reply from MultiByteToWideChar()&quot;);
271         }
272     } while(0);
273 
274     return utf16;
275 }
276 } // namespace
277 




278 std::string toUtf8(const std::wstring&amp; utf16str) {
279     return toMultiByte(utf16str, CP_UTF8);
280 }
281 
282 std::wstring toUtf16(const std::string&amp; utf8str) {
283     return fromMultiByte(utf8str, CP_UTF8);
284 }
285 
286 } // namespace tstrings
287 #endif // ifdef TSTRINGS_WITH_WCHAR
</pre>
</td>
<td>
<hr />
<pre>
258         if (0 == cw) {
259             break;
260         }
261 
262         utf16.resize(cw);
263         int cw2 = MultiByteToWideChar(encoding,
264                                     MB_ERR_INVALID_CHARS,
265                                     str.c_str(),
266                                     int(str.size()),
267                                     &amp;*utf16.begin(),
268                                     cw);
269         if (cw != cw2) {
270             JP_THROW(&quot;Unexpected reply from MultiByteToWideChar()&quot;);
271         }
272     } while(0);
273 
274     return utf16;
275 }
276 } // namespace
277 
<span class="line-added">278 std::string toACP(const std::wstring&amp; utf16str) {</span>
<span class="line-added">279     return toMultiByte(utf16str, CP_ACP);</span>
<span class="line-added">280 }</span>
<span class="line-added">281 </span>
282 std::string toUtf8(const std::wstring&amp; utf16str) {
283     return toMultiByte(utf16str, CP_UTF8);
284 }
285 
286 std::wstring toUtf16(const std::string&amp; utf8str) {
287     return fromMultiByte(utf8str, CP_UTF8);
288 }
289 
290 } // namespace tstrings
291 #endif // ifdef TSTRINGS_WITH_WCHAR
</pre>
</td>
</tr>
</table>
<center><a href="../applauncher/JvmLauncher.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="tstrings.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>