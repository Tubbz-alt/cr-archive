<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.jpackage/share/classes/jdk/incubator/jpackage/internal/IOUtils.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AppImageFile.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../native/applauncher/JvmLauncher.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.jpackage/share/classes/jdk/incubator/jpackage/internal/IOUtils.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
234 
235     public static Path addSuffix(Path path, String suffix) {
236         Path parent = path.getParent();
237         String filename = path.getFileName().toString() + suffix;
238         return parent != null ? parent.resolve(filename) : Path.of(filename);
239     }
240 
241     public static String getSuffix(Path path) {
242         String filename = replaceSuffix(path.getFileName(), null).toString();
243         return path.getFileName().toString().substring(filename.length());
244     }
245 
246     @FunctionalInterface
247     public static interface XmlConsumer {
248         void accept(XMLStreamWriter xml) throws IOException, XMLStreamException;
249     }
250 
251     public static void createXml(Path dstFile, XmlConsumer xmlConsumer) throws
252             IOException {
253         XMLOutputFactory xmlFactory = XMLOutputFactory.newInstance();

254         try (Writer w = Files.newBufferedWriter(dstFile)) {
255             // Wrap with pretty print proxy
256             XMLStreamWriter xml = (XMLStreamWriter) Proxy.newProxyInstance(
257                     XMLStreamWriter.class.getClassLoader(), new Class&lt;?&gt;[]{
258                 XMLStreamWriter.class}, new PrettyPrintHandler(
259                     xmlFactory.createXMLStreamWriter(w)));
260 
261             xml.writeStartDocument();
262             xmlConsumer.accept(xml);
263             xml.writeEndDocument();
264             xml.flush();
265             xml.close();
266         } catch (XMLStreamException ex) {
267             throw new IOException(ex);
268         } catch (IOException ex) {
269             throw ex;
270         }
271     }
272 
273     private static class PrettyPrintHandler implements InvocationHandler {
</pre>
</td>
<td>
<hr />
<pre>
234 
235     public static Path addSuffix(Path path, String suffix) {
236         Path parent = path.getParent();
237         String filename = path.getFileName().toString() + suffix;
238         return parent != null ? parent.resolve(filename) : Path.of(filename);
239     }
240 
241     public static String getSuffix(Path path) {
242         String filename = replaceSuffix(path.getFileName(), null).toString();
243         return path.getFileName().toString().substring(filename.length());
244     }
245 
246     @FunctionalInterface
247     public static interface XmlConsumer {
248         void accept(XMLStreamWriter xml) throws IOException, XMLStreamException;
249     }
250 
251     public static void createXml(Path dstFile, XmlConsumer xmlConsumer) throws
252             IOException {
253         XMLOutputFactory xmlFactory = XMLOutputFactory.newInstance();
<span class="line-added">254         Files.createDirectories(dstFile.getParent());</span>
255         try (Writer w = Files.newBufferedWriter(dstFile)) {
256             // Wrap with pretty print proxy
257             XMLStreamWriter xml = (XMLStreamWriter) Proxy.newProxyInstance(
258                     XMLStreamWriter.class.getClassLoader(), new Class&lt;?&gt;[]{
259                 XMLStreamWriter.class}, new PrettyPrintHandler(
260                     xmlFactory.createXMLStreamWriter(w)));
261 
262             xml.writeStartDocument();
263             xmlConsumer.accept(xml);
264             xml.writeEndDocument();
265             xml.flush();
266             xml.close();
267         } catch (XMLStreamException ex) {
268             throw new IOException(ex);
269         } catch (IOException ex) {
270             throw ex;
271         }
272     }
273 
274     private static class PrettyPrintHandler implements InvocationHandler {
</pre>
</td>
</tr>
</table>
<center><a href="AppImageFile.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../native/applauncher/JvmLauncher.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>