<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/hotspot/jtreg/compiler/valhalla/valuetypes/TestLWorld.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="TestIntrinsics.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="TestLWorldProfiling.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/compiler/valhalla/valuetypes/TestLWorld.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 115,18 ***</span>
      Object objectField5 = null;
      Object objectField6 = null;
  
      MyValue1 valueField1 = testValue1;
      MyValue1 valueField2 = testValue1;
<span class="line-modified">!     MyValue1? valueField3 = testValue1;</span>
      MyValue1 valueField4;
<span class="line-modified">!     MyValue1? valueField5;</span>
  
<span class="line-modified">!     static MyValue1? staticValueField1 = testValue1;</span>
      static MyValue1 staticValueField2 = testValue1;
      static MyValue1 staticValueField3;
<span class="line-modified">!     static MyValue1? staticValueField4;</span>
  
      @DontInline
      public Object readValueField5() {
          return (Object)valueField5;
      }
<span class="line-new-header">--- 115,18 ---</span>
      Object objectField5 = null;
      Object objectField6 = null;
  
      MyValue1 valueField1 = testValue1;
      MyValue1 valueField2 = testValue1;
<span class="line-modified">!     MyValue1.ref valueField3 = testValue1;</span>
      MyValue1 valueField4;
<span class="line-modified">!     MyValue1.ref valueField5;</span>
  
<span class="line-modified">!     static MyValue1.ref staticValueField1 = testValue1;</span>
      static MyValue1 staticValueField2 = testValue1;
      static MyValue1 staticValueField3;
<span class="line-modified">!     static MyValue1.ref staticValueField4;</span>
  
      @DontInline
      public Object readValueField5() {
          return (Object)valueField5;
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1338,12 ***</span>
      public void test41_verifier(boolean warmup) {
          test41();
      }
  
      // Test for bug in Escape Analysis
<span class="line-modified">!     private static final MyValue1? test42VT1 = MyValue1.createWithFieldsInline(rI, rL);</span>
<span class="line-modified">!     private static final MyValue1? test42VT2 = MyValue1.createWithFieldsInline(rI + 1, rL + 1);</span>
  
      @Test()
      public void test42() {
          MyValue1[] vals = new MyValue1[] {(MyValue1) test42VT1, (MyValue1) test42VT2};
          Asserts.assertEQ(vals[0].hash(), test42VT1.hash());
<span class="line-new-header">--- 1338,12 ---</span>
      public void test41_verifier(boolean warmup) {
          test41();
      }
  
      // Test for bug in Escape Analysis
<span class="line-modified">!     private static final MyValue1.ref test42VT1 = MyValue1.createWithFieldsInline(rI, rL);</span>
<span class="line-modified">!     private static final MyValue1.ref test42VT2 = MyValue1.createWithFieldsInline(rI + 1, rL + 1);</span>
  
      @Test()
      public void test42() {
          MyValue1[] vals = new MyValue1[] {(MyValue1) test42VT1, (MyValue1) test42VT2};
          Asserts.assertEQ(vals[0].hash(), test42VT1.hash());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1499,13 ***</span>
          final Object objectField5;
          final Object objectField6;
  
          final MyValue1 valueField1;
          final MyValue1 valueField2;
<span class="line-modified">!         final MyValue1? valueField3;</span>
          final MyValue1 valueField4;
<span class="line-modified">!         final MyValue1? valueField5;</span>
  
          public Test51Value() {
              objectField1 = null;
              objectField2 = null;
              objectField3 = null;
<span class="line-new-header">--- 1499,13 ---</span>
          final Object objectField5;
          final Object objectField6;
  
          final MyValue1 valueField1;
          final MyValue1 valueField2;
<span class="line-modified">!         final MyValue1.ref valueField3;</span>
          final MyValue1 valueField4;
<span class="line-modified">!         final MyValue1.ref valueField5;</span>
  
          public Test51Value() {
              objectField1 = null;
              objectField2 = null;
              objectField3 = null;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1518,11 ***</span>
              valueField4 = MyValue1.createDefaultDontInline();
              valueField5 = MyValue1.createDefaultDontInline();
          }
  
          public Test51Value(Object o1, Object o2, Object o3, Object o4, Object o5, Object o6,
<span class="line-modified">!                            MyValue1 vt1, MyValue1 vt2, MyValue1? vt3, MyValue1 vt4, MyValue1? vt5) {</span>
              objectField1 = o1;
              objectField2 = o2;
              objectField3 = o3;
              objectField4 = o4;
              objectField5 = o5;
<span class="line-new-header">--- 1518,11 ---</span>
              valueField4 = MyValue1.createDefaultDontInline();
              valueField5 = MyValue1.createDefaultDontInline();
          }
  
          public Test51Value(Object o1, Object o2, Object o3, Object o4, Object o5, Object o6,
<span class="line-modified">!                            MyValue1 vt1, MyValue1 vt2, MyValue1.ref vt3, MyValue1 vt4, MyValue1.ref vt5) {</span>
              objectField1 = o1;
              objectField2 = o2;
              objectField3 = o3;
              objectField4 = o4;
              objectField5 = o5;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2089,16 ***</span>
          }
      }
  
      // Casting a null Integer to a nullable value type should not throw
      @ForceInline
<span class="line-modified">!     public MyValue1? test78_helper(Object o) {</span>
<span class="line-modified">!         return (MyValue1?)o;</span>
      }
  
      @Test
<span class="line-modified">!     public MyValue1? test78(Integer i) throws Throwable {</span>
          return test78_helper(i);
      }
  
      @DontCompile
      public void test78_verifier(boolean warmup) throws Throwable {
<span class="line-new-header">--- 2089,16 ---</span>
          }
      }
  
      // Casting a null Integer to a nullable value type should not throw
      @ForceInline
<span class="line-modified">!     public MyValue1.ref test78_helper(Object o) {</span>
<span class="line-modified">!         return (MyValue1.ref)o;</span>
      }
  
      @Test
<span class="line-modified">!     public MyValue1.ref test78(Integer i) throws Throwable {</span>
          return test78_helper(i);
      }
  
      @DontCompile
      public void test78_verifier(boolean warmup) throws Throwable {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2109,16 ***</span>
          }
      }
  
      // Casting an Integer to a nullable value type should throw a ClassCastException
      @ForceInline
<span class="line-modified">!     public MyValue1? test79_helper(Object o) {</span>
<span class="line-modified">!         return (MyValue1?)o;</span>
      }
  
      @Test
<span class="line-modified">!     public MyValue1? test79(Integer i) throws Throwable {</span>
          return test79_helper(i);
      }
  
      @DontCompile
      public void test79_verifier(boolean warmup) throws Throwable {
<span class="line-new-header">--- 2109,16 ---</span>
          }
      }
  
      // Casting an Integer to a nullable value type should throw a ClassCastException
      @ForceInline
<span class="line-modified">!     public MyValue1.ref test79_helper(Object o) {</span>
<span class="line-modified">!         return (MyValue1.ref)o;</span>
      }
  
      @Test
<span class="line-modified">!     public MyValue1.ref test79(Integer i) throws Throwable {</span>
          return test79_helper(i);
      }
  
      @DontCompile
      public void test79_verifier(boolean warmup) throws Throwable {
</pre>
<center><a href="TestIntrinsics.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="TestLWorldProfiling.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>