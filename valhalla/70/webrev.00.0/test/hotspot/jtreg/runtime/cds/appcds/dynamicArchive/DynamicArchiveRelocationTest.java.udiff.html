<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/hotspot/jtreg/runtime/cds/appcds/dynamicArchive/DynamicArchiveRelocationTest.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../ProblemList.txt.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../lib/sun/hotspot/WhiteBox.java.udiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/runtime/cds/appcds/dynamicArchive/DynamicArchiveRelocationTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -29,12 +29,14 @@</span>
   * @summary Testing relocation of dynamic CDS archive (during both dump time and run time)
   * @comment JDK-8231610 Relocate the CDS archive if it cannot be mapped to the requested address
   * @bug 8231610
   * @library /test/lib /test/hotspot/jtreg/runtime/cds/appcds /test/hotspot/jtreg/runtime/cds/appcds/test-classes
   * @build HelloRelocation
<span class="udiff-line-added">+  * @build sun.hotspot.WhiteBox</span>
   * @run driver ClassFileInstaller -jar hello.jar HelloRelocation HelloInlineClassApp HelloInlineClassApp$Point HelloInlineClassApp$Point$ref
<span class="udiff-line-modified-removed">-  * @run driver DynamicArchiveRelocationTest</span>
<span class="udiff-line-modified-added">+  * @run driver ClassFileInstaller sun.hotspot.WhiteBox sun.hotspot.WhiteBox$WhiteBoxPermission</span>
<span class="udiff-line-added">+  * @run main/othervm -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xbootclasspath/a:. DynamicArchiveRelocationTest</span>
   */
  
  import jdk.test.lib.process.OutputAnalyzer;
  import jtreg.SkippedException;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -91,11 +93,11 @@</span>
          String runtimeMsg = &quot;Try to map archive(s) at an alternative address&quot;;
          String unlockArg = &quot;-XX:+UnlockDiagnosticVMOptions&quot;;
  
          // (1) Dump base archive (static)
  
<span class="udiff-line-modified-removed">-         OutputAnalyzer out = dumpBaseArchive(baseArchiveName, unlockArg, dumpBaseRelocArg, logArg);</span>
<span class="udiff-line-modified-added">+         OutputAnalyzer out = TestCommon.dumpBaseArchive(baseArchiveName, unlockArg, dumpBaseRelocArg, logArg);</span>
          if (dump_base_reloc) {
              out.shouldContain(&quot;ArchiveRelocationMode == 1: always allocate class space at an alternative address&quot;);
              out.shouldContain(&quot;Relocating archive from&quot;);
          }
  
</pre>
<center><a href="../../../../ProblemList.txt.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../lib/sun/hotspot/WhiteBox.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>