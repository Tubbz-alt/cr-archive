<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.compiler/share/classes/com/sun/tools/javac/code/Symbol.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Flags.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../comp/Attr.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/com/sun/tools/javac/code/Symbol.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
1515         }
1516 
1517         @Override @DefinedBy(Api.LANGUAGE_MODEL)
1518         public Set&lt;Modifier&gt; getModifiers() {
1519             apiComplete();
1520             long flags = flags();
1521             return Flags.asModifierSet(flags &amp; ~DEFAULT);
1522         }
1523 
1524         public RecordComponent getRecordComponent(VarSymbol field) {
1525             for (RecordComponent rc : recordComponents) {
1526                 if (rc.name == field.name) {
1527                     return rc;
1528                 }
1529             }
1530             return null;
1531         }
1532 
1533         public RecordComponent getRecordComponent(JCVariableDecl var, boolean addIfMissing, List&lt;JCAnnotation&gt; annotations) {
1534             for (RecordComponent rc : recordComponents) {
<span class="line-modified">1535                 if (rc.name == var.name) {</span>



1536                     return rc;
1537                 }
1538             }
1539             RecordComponent rc = null;
1540             if (addIfMissing) {
1541                 recordComponents = recordComponents.append(rc = new RecordComponent(var, annotations));
1542             }
1543             return rc;
1544         }
1545 
1546         @Override @DefinedBy(Api.LANGUAGE_MODEL)
1547         @SuppressWarnings(&quot;preview&quot;)
1548         public List&lt;? extends RecordComponent&gt; getRecordComponents() {
1549             return recordComponents;
1550         }
1551 
1552         @DefinedBy(Api.LANGUAGE_MODEL)
1553         public NestingKind getNestingKind() {
1554             apiComplete();
1555             if (owner.kind == PCK)
</pre>
<hr />
<pre>
1850                     throw new AssertionError(ex);
1851                 }
1852             }
1853             return data;
1854         }
1855 
1856         public void setData(Object data) {
1857             Assert.check(!(data instanceof Env&lt;?&gt;), this);
1858             this.data = data;
1859         }
1860 
1861         public &lt;R, P&gt; R accept(Symbol.Visitor&lt;R, P&gt; v, P p) {
1862             return v.visitVarSymbol(this, p);
1863         }
1864     }
1865 
1866     @SuppressWarnings(&quot;preview&quot;)
1867     public static class RecordComponent extends VarSymbol implements RecordComponentElement {
1868         public MethodSymbol accessor;
1869         public JCTree.JCMethodDecl accessorMeth;


1870         private final List&lt;JCAnnotation&gt; originalAnnos;




1871 
1872         /**
1873          * Construct a record component, given its flags, name, type and owner.
1874          */
1875         public RecordComponent(JCVariableDecl fieldDecl, List&lt;JCAnnotation&gt; annotations) {
1876             super(PUBLIC, fieldDecl.sym.name, fieldDecl.sym.type, fieldDecl.sym.owner);
1877             this.originalAnnos = annotations;

1878         }
1879 
1880         public List&lt;JCAnnotation&gt; getOriginalAnnos() { return originalAnnos; }
1881 




1882         @Override @DefinedBy(Api.LANGUAGE_MODEL)
1883         @SuppressWarnings(&quot;preview&quot;)
1884         public ElementKind getKind() {
1885             return ElementKind.RECORD_COMPONENT;
1886         }
1887 
1888         @Override @DefinedBy(Api.LANGUAGE_MODEL)
1889         public ExecutableElement getAccessor() {
1890             return accessor;
1891         }
1892 
1893         @Override @DefinedBy(Api.LANGUAGE_MODEL)
1894         @SuppressWarnings(&quot;preview&quot;)
1895         public &lt;R, P&gt; R accept(ElementVisitor&lt;R, P&gt; v, P p) {
1896             return v.visitRecordComponent(this, p);
1897         }
1898     }
1899 
1900     public static class ParamSymbol extends VarSymbol {
1901         public ParamSymbol(long flags, Name name, Type type, Symbol owner) {
</pre>
</td>
<td>
<hr />
<pre>
1515         }
1516 
1517         @Override @DefinedBy(Api.LANGUAGE_MODEL)
1518         public Set&lt;Modifier&gt; getModifiers() {
1519             apiComplete();
1520             long flags = flags();
1521             return Flags.asModifierSet(flags &amp; ~DEFAULT);
1522         }
1523 
1524         public RecordComponent getRecordComponent(VarSymbol field) {
1525             for (RecordComponent rc : recordComponents) {
1526                 if (rc.name == field.name) {
1527                     return rc;
1528                 }
1529             }
1530             return null;
1531         }
1532 
1533         public RecordComponent getRecordComponent(JCVariableDecl var, boolean addIfMissing, List&lt;JCAnnotation&gt; annotations) {
1534             for (RecordComponent rc : recordComponents) {
<span class="line-modified">1535                 /* it could be that a record erroneously declares two record components with the same name, in that</span>
<span class="line-added">1536                  * case we need to use the position to disambiguate</span>
<span class="line-added">1537                  */</span>
<span class="line-added">1538                 if (rc.name == var.name &amp;&amp; var.pos == rc.pos) {</span>
1539                     return rc;
1540                 }
1541             }
1542             RecordComponent rc = null;
1543             if (addIfMissing) {
1544                 recordComponents = recordComponents.append(rc = new RecordComponent(var, annotations));
1545             }
1546             return rc;
1547         }
1548 
1549         @Override @DefinedBy(Api.LANGUAGE_MODEL)
1550         @SuppressWarnings(&quot;preview&quot;)
1551         public List&lt;? extends RecordComponent&gt; getRecordComponents() {
1552             return recordComponents;
1553         }
1554 
1555         @DefinedBy(Api.LANGUAGE_MODEL)
1556         public NestingKind getNestingKind() {
1557             apiComplete();
1558             if (owner.kind == PCK)
</pre>
<hr />
<pre>
1853                     throw new AssertionError(ex);
1854                 }
1855             }
1856             return data;
1857         }
1858 
1859         public void setData(Object data) {
1860             Assert.check(!(data instanceof Env&lt;?&gt;), this);
1861             this.data = data;
1862         }
1863 
1864         public &lt;R, P&gt; R accept(Symbol.Visitor&lt;R, P&gt; v, P p) {
1865             return v.visitVarSymbol(this, p);
1866         }
1867     }
1868 
1869     @SuppressWarnings(&quot;preview&quot;)
1870     public static class RecordComponent extends VarSymbol implements RecordComponentElement {
1871         public MethodSymbol accessor;
1872         public JCTree.JCMethodDecl accessorMeth;
<span class="line-added">1873         /* the original annotations applied to the record component</span>
<span class="line-added">1874          */</span>
1875         private final List&lt;JCAnnotation&gt; originalAnnos;
<span class="line-added">1876         /* if the user happens to erroneously declare two components with the same name, we need a way to differentiate</span>
<span class="line-added">1877          * them, the code will fail anyway but we need to keep the information for better error recovery</span>
<span class="line-added">1878          */</span>
<span class="line-added">1879         private final int pos;</span>
1880 
1881         /**
1882          * Construct a record component, given its flags, name, type and owner.
1883          */
1884         public RecordComponent(JCVariableDecl fieldDecl, List&lt;JCAnnotation&gt; annotations) {
1885             super(PUBLIC, fieldDecl.sym.name, fieldDecl.sym.type, fieldDecl.sym.owner);
1886             this.originalAnnos = annotations;
<span class="line-added">1887             this.pos = fieldDecl.pos;</span>
1888         }
1889 
1890         public List&lt;JCAnnotation&gt; getOriginalAnnos() { return originalAnnos; }
1891 
<span class="line-added">1892         public boolean isVarargs() {</span>
<span class="line-added">1893             return type.hasTag(TypeTag.ARRAY) &amp;&amp; ((ArrayType)type).isVarargs();</span>
<span class="line-added">1894         }</span>
<span class="line-added">1895 </span>
1896         @Override @DefinedBy(Api.LANGUAGE_MODEL)
1897         @SuppressWarnings(&quot;preview&quot;)
1898         public ElementKind getKind() {
1899             return ElementKind.RECORD_COMPONENT;
1900         }
1901 
1902         @Override @DefinedBy(Api.LANGUAGE_MODEL)
1903         public ExecutableElement getAccessor() {
1904             return accessor;
1905         }
1906 
1907         @Override @DefinedBy(Api.LANGUAGE_MODEL)
1908         @SuppressWarnings(&quot;preview&quot;)
1909         public &lt;R, P&gt; R accept(ElementVisitor&lt;R, P&gt; v, P p) {
1910             return v.visitRecordComponent(this, p);
1911         }
1912     }
1913 
1914     public static class ParamSymbol extends VarSymbol {
1915         public ParamSymbol(long flags, Name name, Type type, Symbol owner) {
</pre>
</td>
</tr>
</table>
<center><a href="Flags.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../comp/Attr.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>