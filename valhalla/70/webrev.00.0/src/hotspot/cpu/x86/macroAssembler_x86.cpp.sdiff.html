<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/cpu/x86/macroAssembler_x86.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="c1_globals_x86.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="methodHandles_x86.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/cpu/x86/macroAssembler_x86.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 886 }
 887 
 888 void MacroAssembler::print_state64(int64_t pc, int64_t regs[]) {
 889   ttyLocker ttyl;
 890   FlagSetting fs(Debugging, true);
 891   tty-&gt;print_cr(&quot;rip = 0x%016lx&quot;, (intptr_t)pc);
 892 #ifndef PRODUCT
 893   tty-&gt;cr();
 894   findpc(pc);
 895   tty-&gt;cr();
 896 #endif
 897 #define PRINT_REG(rax, value) \
 898   { tty-&gt;print(&quot;%s = &quot;, #rax); os::print_location(tty, value); }
 899   PRINT_REG(rax, regs[15]);
 900   PRINT_REG(rbx, regs[12]);
 901   PRINT_REG(rcx, regs[14]);
 902   PRINT_REG(rdx, regs[13]);
 903   PRINT_REG(rdi, regs[8]);
 904   PRINT_REG(rsi, regs[9]);
 905   PRINT_REG(rbp, regs[10]);
<span class="line-modified"> 906   PRINT_REG(rsp, regs[11]);</span>

 907   PRINT_REG(r8 , regs[7]);
 908   PRINT_REG(r9 , regs[6]);
 909   PRINT_REG(r10, regs[5]);
 910   PRINT_REG(r11, regs[4]);
 911   PRINT_REG(r12, regs[3]);
 912   PRINT_REG(r13, regs[2]);
 913   PRINT_REG(r14, regs[1]);
 914   PRINT_REG(r15, regs[0]);
 915 #undef PRINT_REG
<span class="line-modified"> 916   // Print some words near top of staack.</span>
<span class="line-modified"> 917   int64_t* rsp = (int64_t*) regs[11];</span>
 918   int64_t* dump_sp = rsp;
 919   for (int col1 = 0; col1 &lt; 8; col1++) {
 920     tty-&gt;print(&quot;(rsp+0x%03x) 0x%016lx: &quot;, (int)((intptr_t)dump_sp - (intptr_t)rsp), (intptr_t)dump_sp);
 921     os::print_location(tty, *dump_sp++);
 922   }
 923   for (int row = 0; row &lt; 25; row++) {
 924     tty-&gt;print(&quot;(rsp+0x%03x) 0x%016lx: &quot;, (int)((intptr_t)dump_sp - (intptr_t)rsp), (intptr_t)dump_sp);
 925     for (int col = 0; col &lt; 4; col++) {
 926       tty-&gt;print(&quot; 0x%016lx&quot;, (intptr_t)*dump_sp++);
 927     }
 928     tty-&gt;cr();
 929   }
 930   // Print some instructions around pc:
 931   Disassembler::decode((address)pc-64, (address)pc);
 932   tty-&gt;print_cr(&quot;--------&quot;);
 933   Disassembler::decode((address)pc, (address)pc+32);
 934 }
 935 
 936 #endif // _LP64
 937 
</pre>
</td>
<td>
<hr />
<pre>
 886 }
 887 
 888 void MacroAssembler::print_state64(int64_t pc, int64_t regs[]) {
 889   ttyLocker ttyl;
 890   FlagSetting fs(Debugging, true);
 891   tty-&gt;print_cr(&quot;rip = 0x%016lx&quot;, (intptr_t)pc);
 892 #ifndef PRODUCT
 893   tty-&gt;cr();
 894   findpc(pc);
 895   tty-&gt;cr();
 896 #endif
 897 #define PRINT_REG(rax, value) \
 898   { tty-&gt;print(&quot;%s = &quot;, #rax); os::print_location(tty, value); }
 899   PRINT_REG(rax, regs[15]);
 900   PRINT_REG(rbx, regs[12]);
 901   PRINT_REG(rcx, regs[14]);
 902   PRINT_REG(rdx, regs[13]);
 903   PRINT_REG(rdi, regs[8]);
 904   PRINT_REG(rsi, regs[9]);
 905   PRINT_REG(rbp, regs[10]);
<span class="line-modified"> 906   // rsp is actually not stored by pusha(), compute the old rsp from regs (rsp after pusha): regs + 16 = old rsp</span>
<span class="line-added"> 907   PRINT_REG(rsp, (intptr_t)(&amp;regs[16]));</span>
 908   PRINT_REG(r8 , regs[7]);
 909   PRINT_REG(r9 , regs[6]);
 910   PRINT_REG(r10, regs[5]);
 911   PRINT_REG(r11, regs[4]);
 912   PRINT_REG(r12, regs[3]);
 913   PRINT_REG(r13, regs[2]);
 914   PRINT_REG(r14, regs[1]);
 915   PRINT_REG(r15, regs[0]);
 916 #undef PRINT_REG
<span class="line-modified"> 917   // Print some words near the top of the stack.</span>
<span class="line-modified"> 918   int64_t* rsp = &amp;regs[16];</span>
 919   int64_t* dump_sp = rsp;
 920   for (int col1 = 0; col1 &lt; 8; col1++) {
 921     tty-&gt;print(&quot;(rsp+0x%03x) 0x%016lx: &quot;, (int)((intptr_t)dump_sp - (intptr_t)rsp), (intptr_t)dump_sp);
 922     os::print_location(tty, *dump_sp++);
 923   }
 924   for (int row = 0; row &lt; 25; row++) {
 925     tty-&gt;print(&quot;(rsp+0x%03x) 0x%016lx: &quot;, (int)((intptr_t)dump_sp - (intptr_t)rsp), (intptr_t)dump_sp);
 926     for (int col = 0; col &lt; 4; col++) {
 927       tty-&gt;print(&quot; 0x%016lx&quot;, (intptr_t)*dump_sp++);
 928     }
 929     tty-&gt;cr();
 930   }
 931   // Print some instructions around pc:
 932   Disassembler::decode((address)pc-64, (address)pc);
 933   tty-&gt;print_cr(&quot;--------&quot;);
 934   Disassembler::decode((address)pc, (address)pc+32);
 935 }
 936 
 937 #endif // _LP64
 938 
</pre>
</td>
</tr>
</table>
<center><a href="c1_globals_x86.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="methodHandles_x86.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>