<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.jdi/share/classes/com/sun/tools/jdi/JNITypeParser.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ArrayTypeImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ObjectReferenceImpl.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jdi/share/classes/com/sun/tools/jdi/JNITypeParser.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
205             while(currentIndex &lt; signature.length()) {
206                 elem = nextTypeName();
207                 typeNameList.add(elem);
208             }
209             if (typeNameList.size() == 0) {
210                 throw new IllegalArgumentException(&quot;Invalid JNI signature &#39;&quot; +
211                                                    signature + &quot;&#39;&quot;);
212             }
213         }
214         return typeNameList;
215     }
216 
217     private String nextSignature() {
218         char key = signature.charAt(currentIndex++);
219 
220         switch(key) {
221             case (JDWP.Tag.ARRAY):
222                 return  key + nextSignature();
223 
224             case (JDWP.Tag.OBJECT):

225                 int endClass = signature.indexOf(SIGNATURE_ENDCLASS,
226                                                  currentIndex);
227                 String retVal = signature.substring(currentIndex - 1,
228                                                     endClass + 1);
229                 currentIndex = endClass + 1;
230                 return retVal;
231 
232             case (JDWP.Tag.VOID):
233             case (JDWP.Tag.BOOLEAN):
234             case (JDWP.Tag.BYTE):
235             case (JDWP.Tag.CHAR):
236             case (JDWP.Tag.SHORT):
237             case (JDWP.Tag.INT):
238             case (JDWP.Tag.LONG):
239             case (JDWP.Tag.FLOAT):
240             case (JDWP.Tag.DOUBLE):
241                 return String.valueOf(key);
242 
243             case SIGNATURE_ENDFUNC:
244             case SIGNATURE_FUNC:
</pre>
<hr />
<pre>
248                 throw new IllegalArgumentException(
249                     &quot;Invalid JNI signature character &#39;&quot; + key + &quot;&#39;&quot;);
250 
251         }
252     }
253 
254     private String nextTypeName() {
255         char key = signature.charAt(currentIndex++);
256 
257         switch(key) {
258             case (JDWP.Tag.ARRAY):
259                 return  nextTypeName() + &quot;[]&quot;;
260 
261             case (JDWP.Tag.BYTE):
262                 return &quot;byte&quot;;
263 
264             case (JDWP.Tag.CHAR):
265                 return &quot;char&quot;;
266 
267             case (JDWP.Tag.OBJECT):

268                 int endClass = signature.indexOf(SIGNATURE_ENDCLASS,
269                                                  currentIndex);
270                 String retVal = signature.substring(currentIndex,
271                                                     endClass);
272                 int index = retVal.indexOf(&quot;.&quot;);
273                 if (index &lt; 0) {
274                     retVal = retVal.replace(&#39;/&#39;, &#39;.&#39;);
275                 } else {
276                     // hidden class
277                     retVal = retVal.substring(0, index).replace(&#39;/&#39;, &#39;.&#39;)
278                                 + &quot;/&quot; + retVal.substring(index + 1);
279                 }
280                 currentIndex = endClass + 1;
281                 return retVal;
282 
283             case (JDWP.Tag.FLOAT):
284                 return &quot;float&quot;;
285 
286             case (JDWP.Tag.DOUBLE):
287                 return &quot;double&quot;;
</pre>
</td>
<td>
<hr />
<pre>
205             while(currentIndex &lt; signature.length()) {
206                 elem = nextTypeName();
207                 typeNameList.add(elem);
208             }
209             if (typeNameList.size() == 0) {
210                 throw new IllegalArgumentException(&quot;Invalid JNI signature &#39;&quot; +
211                                                    signature + &quot;&#39;&quot;);
212             }
213         }
214         return typeNameList;
215     }
216 
217     private String nextSignature() {
218         char key = signature.charAt(currentIndex++);
219 
220         switch(key) {
221             case (JDWP.Tag.ARRAY):
222                 return  key + nextSignature();
223 
224             case (JDWP.Tag.OBJECT):
<span class="line-added">225             case (JDWP.Tag.INLINE_OBJECT):</span>
226                 int endClass = signature.indexOf(SIGNATURE_ENDCLASS,
227                                                  currentIndex);
228                 String retVal = signature.substring(currentIndex - 1,
229                                                     endClass + 1);
230                 currentIndex = endClass + 1;
231                 return retVal;
232 
233             case (JDWP.Tag.VOID):
234             case (JDWP.Tag.BOOLEAN):
235             case (JDWP.Tag.BYTE):
236             case (JDWP.Tag.CHAR):
237             case (JDWP.Tag.SHORT):
238             case (JDWP.Tag.INT):
239             case (JDWP.Tag.LONG):
240             case (JDWP.Tag.FLOAT):
241             case (JDWP.Tag.DOUBLE):
242                 return String.valueOf(key);
243 
244             case SIGNATURE_ENDFUNC:
245             case SIGNATURE_FUNC:
</pre>
<hr />
<pre>
249                 throw new IllegalArgumentException(
250                     &quot;Invalid JNI signature character &#39;&quot; + key + &quot;&#39;&quot;);
251 
252         }
253     }
254 
255     private String nextTypeName() {
256         char key = signature.charAt(currentIndex++);
257 
258         switch(key) {
259             case (JDWP.Tag.ARRAY):
260                 return  nextTypeName() + &quot;[]&quot;;
261 
262             case (JDWP.Tag.BYTE):
263                 return &quot;byte&quot;;
264 
265             case (JDWP.Tag.CHAR):
266                 return &quot;char&quot;;
267 
268             case (JDWP.Tag.OBJECT):
<span class="line-added">269             case (JDWP.Tag.INLINE_OBJECT):</span>
270                 int endClass = signature.indexOf(SIGNATURE_ENDCLASS,
271                                                  currentIndex);
272                 String retVal = signature.substring(currentIndex,
273                                                     endClass);
274                 int index = retVal.indexOf(&quot;.&quot;);
275                 if (index &lt; 0) {
276                     retVal = retVal.replace(&#39;/&#39;, &#39;.&#39;);
277                 } else {
278                     // hidden class
279                     retVal = retVal.substring(0, index).replace(&#39;/&#39;, &#39;.&#39;)
280                                 + &quot;/&quot; + retVal.substring(index + 1);
281                 }
282                 currentIndex = endClass + 1;
283                 return retVal;
284 
285             case (JDWP.Tag.FLOAT):
286                 return &quot;float&quot;;
287 
288             case (JDWP.Tag.DOUBLE):
289                 return &quot;double&quot;;
</pre>
</td>
</tr>
</table>
<center><a href="ArrayTypeImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ObjectReferenceImpl.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>