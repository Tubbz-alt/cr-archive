<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.jdi/share/classes/com/sun/tools/jdi/ArrayTypeImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../jdk.javadoc/share/classes/jdk/javadoc/internal/tool/resources/javadoc.properties.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="EventSetImpl.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jdi/share/classes/com/sun/tools/jdi/ArrayTypeImpl.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1998, 2017, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1998, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -57,11 +57,12 @@</span>
              throw exc.toJDIException();
          }
      }
  
      public String componentSignature() {
<span class="udiff-line-modified-removed">-         return signature().substring(1); // Just skip the leading &#39;[&#39;</span>
<span class="udiff-line-modified-added">+         JNITypeParser sig = new JNITypeParser(signature());</span>
<span class="udiff-line-added">+         return sig.componentSignature();</span>
      }
  
      public String componentTypeName() {
          JNITypeParser parser = new JNITypeParser(componentSignature());
          return parser.typeName();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -88,12 +89,13 @@</span>
       * the same class loader. Since array set operations don&#39;t have an
       * implicit enclosing type like field and variable set operations,
       * this method is sometimes needed for proper type checking.
       */
      Type findComponentType(String signature) throws ClassNotLoadedException {
<span class="udiff-line-modified-removed">-         byte tag = (byte)signature.charAt(0);</span>
<span class="udiff-line-modified-removed">-         if (PacketStream.isObjectTag(tag)) {</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+         JNITypeParser sig = new JNITypeParser(signature);</span>
<span class="udiff-line-added">+         if (sig.isReference()) {</span>
              // It&#39;s a reference type
              JNITypeParser parser = new JNITypeParser(componentSignature());
              List&lt;ReferenceType&gt; list = vm.classesBySignature(componentSignature());
              Iterator&lt;ReferenceType&gt; iter = list.iterator();
              while (iter.hasNext()) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -107,11 +109,11 @@</span>
              }
              // Component class has not yet been loaded
              throw new ClassNotLoadedException(componentTypeName());
          } else {
              // It&#39;s a primitive type
<span class="udiff-line-modified-removed">-             return vm.primitiveTypeMirror(tag);</span>
<span class="udiff-line-modified-added">+             return vm.primitiveTypeMirror(sig.jdwpTag());</span>
          }
      }
  
      public Type componentType() throws ClassNotLoadedException {
          return findComponentType(componentSignature());
</pre>
<center><a href="../../../../../../../jdk.javadoc/share/classes/jdk/javadoc/internal/tool/resources/javadoc.properties.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="EventSetImpl.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>