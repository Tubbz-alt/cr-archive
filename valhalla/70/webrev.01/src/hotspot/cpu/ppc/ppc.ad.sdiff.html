<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/cpu/ppc/ppc.ad</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="c1_globals_ppc.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="stubGenerator_ppc.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/cpu/ppc/ppc.ad</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
13813 %}
13814 
13815 instruct bytes_reverse_short_Ex(iRegIdst dst, iRegIsrc src) %{
13816   match(Set dst (ReverseBytesS src));
13817   ins_cost(3*DEFAULT_COST);
13818 
13819   expand %{
13820     immI16  imm16 %{ (int) 16 %}
13821     immI16   imm8 %{ (int)  8 %}
13822     iRegLdst tmpI1;
13823 
13824     urShiftI_reg_imm(tmpI1, src, imm8);
13825     insrwi(tmpI1, src, imm16, imm8);
13826     extsh(dst, tmpI1);
13827   %}
13828 %}
13829 
13830 // Load Integer reversed byte order
13831 instruct loadI_reversed(iRegIdst dst, indirect mem) %{
13832   match(Set dst (ReverseBytesI (LoadI mem)));

13833   ins_cost(MEMORY_REF_COST);
13834 
13835   size(4);
13836   ins_encode %{
13837     __ lwbrx($dst$$Register, $mem$$Register);
13838   %}
13839   ins_pipe(pipe_class_default);
13840 %}
13841 













13842 // Load Long - aligned and reversed
13843 instruct loadL_reversed(iRegLdst dst, indirect mem) %{
13844   match(Set dst (ReverseBytesL (LoadL mem)));
<span class="line-modified">13845   predicate(VM_Version::has_ldbrx());</span>
13846   ins_cost(MEMORY_REF_COST);
13847 
13848   size(4);
13849   ins_encode %{
13850     __ ldbrx($dst$$Register, $mem$$Register);
13851   %}
13852   ins_pipe(pipe_class_default);
13853 %}
13854 














13855 // Load unsigned short / char reversed byte order
13856 instruct loadUS_reversed(iRegIdst dst, indirect mem) %{
13857   match(Set dst (ReverseBytesUS (LoadUS mem)));

13858   ins_cost(MEMORY_REF_COST);
13859 
13860   size(4);
13861   ins_encode %{
13862     __ lhbrx($dst$$Register, $mem$$Register);
13863   %}
13864   ins_pipe(pipe_class_default);
13865 %}
13866 













13867 // Load short reversed byte order
13868 instruct loadS_reversed(iRegIdst dst, indirect mem) %{
13869   match(Set dst (ReverseBytesS (LoadS mem)));

13870   ins_cost(MEMORY_REF_COST + DEFAULT_COST);
13871 
13872   size(8);
13873   ins_encode %{
13874     __ lhbrx($dst$$Register, $mem$$Register);
13875     __ extsh($dst$$Register, $dst$$Register);
13876   %}
13877   ins_pipe(pipe_class_default);
13878 %}
13879 














13880 // Store Integer reversed byte order
13881 instruct storeI_reversed(iRegIsrc src, indirect mem) %{
13882   match(Set mem (StoreI mem (ReverseBytesI src)));
13883   ins_cost(MEMORY_REF_COST);
13884 
13885   size(4);
13886   ins_encode %{
13887     __ stwbrx($src$$Register, $mem$$Register);
13888   %}
13889   ins_pipe(pipe_class_default);
13890 %}
13891 
13892 // Store Long reversed byte order
13893 instruct storeL_reversed(iRegLsrc src, indirect mem) %{
13894   match(Set mem (StoreL mem (ReverseBytesL src)));
13895   predicate(VM_Version::has_stdbrx());
13896   ins_cost(MEMORY_REF_COST);
13897 
13898   size(4);
13899   ins_encode %{
</pre>
</td>
<td>
<hr />
<pre>
13813 %}
13814 
13815 instruct bytes_reverse_short_Ex(iRegIdst dst, iRegIsrc src) %{
13816   match(Set dst (ReverseBytesS src));
13817   ins_cost(3*DEFAULT_COST);
13818 
13819   expand %{
13820     immI16  imm16 %{ (int) 16 %}
13821     immI16   imm8 %{ (int)  8 %}
13822     iRegLdst tmpI1;
13823 
13824     urShiftI_reg_imm(tmpI1, src, imm8);
13825     insrwi(tmpI1, src, imm16, imm8);
13826     extsh(dst, tmpI1);
13827   %}
13828 %}
13829 
13830 // Load Integer reversed byte order
13831 instruct loadI_reversed(iRegIdst dst, indirect mem) %{
13832   match(Set dst (ReverseBytesI (LoadI mem)));
<span class="line-added">13833   predicate(n-&gt;in(1)-&gt;as_Load()-&gt;is_unordered() || followed_by_acquire(n-&gt;in(1)));</span>
13834   ins_cost(MEMORY_REF_COST);
13835 
13836   size(4);
13837   ins_encode %{
13838     __ lwbrx($dst$$Register, $mem$$Register);
13839   %}
13840   ins_pipe(pipe_class_default);
13841 %}
13842 
<span class="line-added">13843 instruct loadI_reversed_acquire(iRegIdst dst, indirect mem) %{</span>
<span class="line-added">13844   match(Set dst (ReverseBytesI (LoadI mem)));</span>
<span class="line-added">13845   ins_cost(2 * MEMORY_REF_COST);</span>
<span class="line-added">13846 </span>
<span class="line-added">13847   size(12);</span>
<span class="line-added">13848   ins_encode %{</span>
<span class="line-added">13849     __ lwbrx($dst$$Register, $mem$$Register);</span>
<span class="line-added">13850     __ twi_0($dst$$Register);</span>
<span class="line-added">13851     __ isync();</span>
<span class="line-added">13852   %}</span>
<span class="line-added">13853   ins_pipe(pipe_class_default);</span>
<span class="line-added">13854 %}</span>
<span class="line-added">13855 </span>
13856 // Load Long - aligned and reversed
13857 instruct loadL_reversed(iRegLdst dst, indirect mem) %{
13858   match(Set dst (ReverseBytesL (LoadL mem)));
<span class="line-modified">13859   predicate(VM_Version::has_ldbrx() &amp;&amp; (n-&gt;in(1)-&gt;as_Load()-&gt;is_unordered() || followed_by_acquire(n-&gt;in(1))));</span>
13860   ins_cost(MEMORY_REF_COST);
13861 
13862   size(4);
13863   ins_encode %{
13864     __ ldbrx($dst$$Register, $mem$$Register);
13865   %}
13866   ins_pipe(pipe_class_default);
13867 %}
13868 
<span class="line-added">13869 instruct loadL_reversed_acquire(iRegLdst dst, indirect mem) %{</span>
<span class="line-added">13870   match(Set dst (ReverseBytesL (LoadL mem)));</span>
<span class="line-added">13871   predicate(VM_Version::has_ldbrx());</span>
<span class="line-added">13872   ins_cost(2 * MEMORY_REF_COST);</span>
<span class="line-added">13873 </span>
<span class="line-added">13874   size(12);</span>
<span class="line-added">13875   ins_encode %{</span>
<span class="line-added">13876     __ ldbrx($dst$$Register, $mem$$Register);</span>
<span class="line-added">13877     __ twi_0($dst$$Register);</span>
<span class="line-added">13878     __ isync();</span>
<span class="line-added">13879   %}</span>
<span class="line-added">13880   ins_pipe(pipe_class_default);</span>
<span class="line-added">13881 %}</span>
<span class="line-added">13882 </span>
13883 // Load unsigned short / char reversed byte order
13884 instruct loadUS_reversed(iRegIdst dst, indirect mem) %{
13885   match(Set dst (ReverseBytesUS (LoadUS mem)));
<span class="line-added">13886   predicate(n-&gt;in(1)-&gt;as_Load()-&gt;is_unordered() || followed_by_acquire(n-&gt;in(1)));</span>
13887   ins_cost(MEMORY_REF_COST);
13888 
13889   size(4);
13890   ins_encode %{
13891     __ lhbrx($dst$$Register, $mem$$Register);
13892   %}
13893   ins_pipe(pipe_class_default);
13894 %}
13895 
<span class="line-added">13896 instruct loadUS_reversed_acquire(iRegIdst dst, indirect mem) %{</span>
<span class="line-added">13897   match(Set dst (ReverseBytesUS (LoadUS mem)));</span>
<span class="line-added">13898   ins_cost(2 * MEMORY_REF_COST);</span>
<span class="line-added">13899 </span>
<span class="line-added">13900   size(12);</span>
<span class="line-added">13901   ins_encode %{</span>
<span class="line-added">13902     __ lhbrx($dst$$Register, $mem$$Register);</span>
<span class="line-added">13903     __ twi_0($dst$$Register);</span>
<span class="line-added">13904     __ isync();</span>
<span class="line-added">13905   %}</span>
<span class="line-added">13906   ins_pipe(pipe_class_default);</span>
<span class="line-added">13907 %}</span>
<span class="line-added">13908 </span>
13909 // Load short reversed byte order
13910 instruct loadS_reversed(iRegIdst dst, indirect mem) %{
13911   match(Set dst (ReverseBytesS (LoadS mem)));
<span class="line-added">13912   predicate(n-&gt;in(1)-&gt;as_Load()-&gt;is_unordered() || followed_by_acquire(n-&gt;in(1)));</span>
13913   ins_cost(MEMORY_REF_COST + DEFAULT_COST);
13914 
13915   size(8);
13916   ins_encode %{
13917     __ lhbrx($dst$$Register, $mem$$Register);
13918     __ extsh($dst$$Register, $dst$$Register);
13919   %}
13920   ins_pipe(pipe_class_default);
13921 %}
13922 
<span class="line-added">13923 instruct loadS_reversed_acquire(iRegIdst dst, indirect mem) %{</span>
<span class="line-added">13924   match(Set dst (ReverseBytesS (LoadS mem)));</span>
<span class="line-added">13925   ins_cost(2 * MEMORY_REF_COST + DEFAULT_COST);</span>
<span class="line-added">13926 </span>
<span class="line-added">13927   size(16);</span>
<span class="line-added">13928   ins_encode %{</span>
<span class="line-added">13929     __ lhbrx($dst$$Register, $mem$$Register);</span>
<span class="line-added">13930     __ twi_0($dst$$Register);</span>
<span class="line-added">13931     __ extsh($dst$$Register, $dst$$Register);</span>
<span class="line-added">13932     __ isync();</span>
<span class="line-added">13933   %}</span>
<span class="line-added">13934   ins_pipe(pipe_class_default);</span>
<span class="line-added">13935 %}</span>
<span class="line-added">13936 </span>
13937 // Store Integer reversed byte order
13938 instruct storeI_reversed(iRegIsrc src, indirect mem) %{
13939   match(Set mem (StoreI mem (ReverseBytesI src)));
13940   ins_cost(MEMORY_REF_COST);
13941 
13942   size(4);
13943   ins_encode %{
13944     __ stwbrx($src$$Register, $mem$$Register);
13945   %}
13946   ins_pipe(pipe_class_default);
13947 %}
13948 
13949 // Store Long reversed byte order
13950 instruct storeL_reversed(iRegLsrc src, indirect mem) %{
13951   match(Set mem (StoreL mem (ReverseBytesL src)));
13952   predicate(VM_Version::has_stdbrx());
13953   ins_cost(MEMORY_REF_COST);
13954 
13955   size(4);
13956   ins_encode %{
</pre>
</td>
</tr>
</table>
<center><a href="c1_globals_ppc.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="stubGenerator_ppc.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>