<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/gc/shenandoah/c2/shenandoahBarrierSetC2.cpp</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../../shared/taskqueue.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="shenandoahSupport.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shenandoah/c2/shenandoahBarrierSetC2.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -481,18 +481,18 @@</span>
    return TypeFunc::make(domain, range);
  }
  
  const TypeFunc* ShenandoahBarrierSetC2::shenandoah_load_reference_barrier_Type() {
    const Type **fields = TypeTuple::fields(2);
<span class="udiff-line-modified-removed">-   fields[TypeFunc::Parms+0] = TypeInstPtr::NOTNULL; // original field value</span>
<span class="udiff-line-modified-removed">-   fields[TypeFunc::Parms+1] = TypeRawPtr::BOTTOM;   // original load address</span>
<span class="udiff-line-modified-added">+   fields[TypeFunc::Parms+0] = TypeOopPtr::BOTTOM; // original field value</span>
<span class="udiff-line-modified-added">+   fields[TypeFunc::Parms+1] = TypeRawPtr::BOTTOM; // original load address</span>
  
    const TypeTuple *domain = TypeTuple::make(TypeFunc::Parms+2, fields);
  
    // create result type (range)
    fields = TypeTuple::fields(1);
<span class="udiff-line-modified-removed">-   fields[TypeFunc::Parms+0] = TypeInstPtr::NOTNULL;</span>
<span class="udiff-line-modified-added">+   fields[TypeFunc::Parms+0] = TypeOopPtr::BOTTOM;</span>
    const TypeTuple *range = TypeTuple::make(TypeFunc::Parms+1, fields);
  
    return TypeFunc::make(domain, range);
  }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -523,11 +523,10 @@</span>
    } else {
      assert(access.is_opt_access(), &quot;only for optimization passes&quot;);
      assert(((decorators &amp; C2_TIGHTLY_COUPLED_ALLOC) != 0 || !ShenandoahSATBBarrier) &amp;&amp; (decorators &amp; C2_ARRAY_COPY) != 0, &quot;unexpected caller of this code&quot;);
      C2OptAccess&amp; opt_access = static_cast&lt;C2OptAccess&amp;&gt;(access);
      PhaseGVN&amp; gvn =  opt_access.gvn();
<span class="udiff-line-removed">-     MergeMemNode* mm = opt_access.mem();</span>
  
      if (ShenandoahStoreValEnqueueBarrier) {
        Node* enqueue = gvn.transform(new ShenandoahEnqueueBarrierNode(val.node()));
        val.set_node(enqueue);
      }
</pre>
<center><a href="../../shared/taskqueue.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="shenandoahSupport.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>