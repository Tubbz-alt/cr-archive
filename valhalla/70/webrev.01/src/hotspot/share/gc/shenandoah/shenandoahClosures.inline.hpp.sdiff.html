<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/gc/shenandoah/shenandoahClosures.inline.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="shenandoahClosures.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="shenandoahCodeRoots.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shenandoah/shenandoahClosures.inline.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
141 }
142 
143 void ShenandoahEvacUpdateOopStorageRootsClosure::do_oop(narrowOop* p) {
144   ShouldNotReachHere();
145 }
146 
147 ShenandoahCodeBlobAndDisarmClosure::ShenandoahCodeBlobAndDisarmClosure(OopClosure* cl) :
148   CodeBlobToOopClosure(cl, true /* fix_relocations */),
149    _bs(BarrierSet::barrier_set()-&gt;barrier_set_nmethod()) {
150 }
151 
152 void ShenandoahCodeBlobAndDisarmClosure::do_code_blob(CodeBlob* cb) {
153   nmethod* const nm = cb-&gt;as_nmethod_or_null();
154   if (nm != NULL &amp;&amp; nm-&gt;oops_do_try_claim()) {
155     assert(!ShenandoahNMethod::gc_data(nm)-&gt;is_unregistered(), &quot;Should not be here&quot;);
156     CodeBlobToOopClosure::do_code_blob(cb);
157     _bs-&gt;disarm(nm);
158   }
159 }
160 







161 #ifdef ASSERT
162 template &lt;class T&gt;
163 void ShenandoahAssertNotForwardedClosure::do_oop_work(T* p) {
164   T o = RawAccess&lt;&gt;::oop_load(p);
165   if (!CompressedOops::is_null(o)) {
166     oop obj = CompressedOops::decode_not_null(o);
167     shenandoah_assert_not_forwarded(p, obj);
168   }
169 }
170 
171 void ShenandoahAssertNotForwardedClosure::do_oop(narrowOop* p) { do_oop_work(p); }
172 void ShenandoahAssertNotForwardedClosure::do_oop(oop* p)       { do_oop_work(p); }
173 #endif
174 
175 #endif // SHARE_GC_SHENANDOAH_SHENANDOAHCLOSURES_HPP
</pre>
</td>
<td>
<hr />
<pre>
141 }
142 
143 void ShenandoahEvacUpdateOopStorageRootsClosure::do_oop(narrowOop* p) {
144   ShouldNotReachHere();
145 }
146 
147 ShenandoahCodeBlobAndDisarmClosure::ShenandoahCodeBlobAndDisarmClosure(OopClosure* cl) :
148   CodeBlobToOopClosure(cl, true /* fix_relocations */),
149    _bs(BarrierSet::barrier_set()-&gt;barrier_set_nmethod()) {
150 }
151 
152 void ShenandoahCodeBlobAndDisarmClosure::do_code_blob(CodeBlob* cb) {
153   nmethod* const nm = cb-&gt;as_nmethod_or_null();
154   if (nm != NULL &amp;&amp; nm-&gt;oops_do_try_claim()) {
155     assert(!ShenandoahNMethod::gc_data(nm)-&gt;is_unregistered(), &quot;Should not be here&quot;);
156     CodeBlobToOopClosure::do_code_blob(cb);
157     _bs-&gt;disarm(nm);
158   }
159 }
160 
<span class="line-added">161 ShenandoahRendezvousClosure::ShenandoahRendezvousClosure() :</span>
<span class="line-added">162   HandshakeClosure(&quot;ShenandoahRendezvous&quot;) {</span>
<span class="line-added">163 }</span>
<span class="line-added">164 </span>
<span class="line-added">165 void ShenandoahRendezvousClosure::do_thread(Thread* thread) {</span>
<span class="line-added">166 }</span>
<span class="line-added">167 </span>
168 #ifdef ASSERT
169 template &lt;class T&gt;
170 void ShenandoahAssertNotForwardedClosure::do_oop_work(T* p) {
171   T o = RawAccess&lt;&gt;::oop_load(p);
172   if (!CompressedOops::is_null(o)) {
173     oop obj = CompressedOops::decode_not_null(o);
174     shenandoah_assert_not_forwarded(p, obj);
175   }
176 }
177 
178 void ShenandoahAssertNotForwardedClosure::do_oop(narrowOop* p) { do_oop_work(p); }
179 void ShenandoahAssertNotForwardedClosure::do_oop(oop* p)       { do_oop_work(p); }
180 #endif
181 
182 #endif // SHARE_GC_SHENANDOAH_SHENANDOAHCLOSURES_HPP
</pre>
</td>
</tr>
</table>
<center><a href="shenandoahClosures.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="shenandoahCodeRoots.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>