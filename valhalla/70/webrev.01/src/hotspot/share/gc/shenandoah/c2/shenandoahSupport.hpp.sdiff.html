<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/gc/shenandoah/c2/shenandoahSupport.hpp</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="shenandoahSupport.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../mode/shenandoahIUMode.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shenandoah/c2/shenandoahSupport.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 46     ShenandoahOopStore,
 47     ShenandoahNone
 48   };
 49 
 50   static bool verify_helper(Node* in, Node_Stack&amp; phis, VectorSet&amp; visited, verify_type t, bool trace, Unique_Node_List&amp; barriers_used);
 51   static void report_verify_failure(const char* msg, Node* n1 = NULL, Node* n2 = NULL);
 52   static void verify_raw_mem(RootNode* root);
 53 #endif
 54   static Node* dom_mem(Node* mem, Node* ctrl, int alias, Node*&amp; mem_ctrl, PhaseIdealLoop* phase);
 55   static Node* no_branches(Node* c, Node* dom, bool allow_one_proj, PhaseIdealLoop* phase);
 56   static bool is_gc_state_test(Node* iff, int mask);
 57   static bool has_safepoint_between(Node* start, Node* stop, PhaseIdealLoop *phase);
 58   static Node* find_bottom_mem(Node* ctrl, PhaseIdealLoop* phase);
 59   static void follow_barrier_uses(Node* n, Node* ctrl, Unique_Node_List&amp; uses, PhaseIdealLoop* phase);
 60   static void test_null(Node*&amp; ctrl, Node* val, Node*&amp; null_ctrl, PhaseIdealLoop* phase);
 61   static void test_gc_state(Node*&amp; ctrl, Node* raw_mem, Node*&amp; heap_stable_ctrl,
 62                             PhaseIdealLoop* phase, int flags);
 63   static void call_lrb_stub(Node*&amp; ctrl, Node*&amp; val, Node* load_addr, Node*&amp; result_mem, Node* raw_mem, bool is_native, PhaseIdealLoop* phase);
 64   static void test_in_cset(Node*&amp; ctrl, Node*&amp; not_cset_ctrl, Node* val, Node* raw_mem, PhaseIdealLoop* phase);
 65   static void move_gc_state_test_out_of_loop(IfNode* iff, PhaseIdealLoop* phase);
<span class="line-removed"> 66   static Node* clone_null_check(Node*&amp; c, Node* val, Node* unc_ctrl, PhaseIdealLoop* phase);</span>
<span class="line-removed"> 67   static void fix_null_check(Node* unc, Node* unc_ctrl, Node* new_unc_ctrl, Unique_Node_List&amp; uses,</span>
<span class="line-removed"> 68                              PhaseIdealLoop* phase);</span>
 69   static void merge_back_to_back_tests(Node* n, PhaseIdealLoop* phase);
 70   static bool identical_backtoback_ifs(Node *n, PhaseIdealLoop* phase);
 71   static void fix_ctrl(Node* barrier, Node* region, const MemoryGraphFixer&amp; fixer, Unique_Node_List&amp; uses, Unique_Node_List&amp; uses_to_ignore, uint last, PhaseIdealLoop* phase);
 72   static IfNode* find_unswitching_candidate(const IdealLoopTree *loop, PhaseIdealLoop* phase);
 73 
 74   static Node* get_load_addr(PhaseIdealLoop* phase, VectorSet&amp; visited, Node* lrb);
 75 public:
 76   static bool is_dominator(Node* d_c, Node* n_c, Node* d, Node* n, PhaseIdealLoop* phase);
 77   static bool is_dominator_same_ctrl(Node* c, Node* d, Node* n, PhaseIdealLoop* phase);
 78 
 79   static bool is_gc_state_load(Node* n);
 80   static bool is_heap_stable_test(Node* iff);
 81 
 82   static bool expand(Compile* C, PhaseIterGVN&amp; igvn);
 83   static void pin_and_expand(PhaseIdealLoop* phase);
 84   static void optimize_after_expansion(VectorSet&amp; visited, Node_Stack&amp; nstack, Node_List&amp; old_new, PhaseIdealLoop* phase);
 85 
 86 #ifdef ASSERT
 87   static void verify(RootNode* root);
 88 #endif
</pre>
<hr />
<pre>
237 public:
238   ShenandoahLoadReferenceBarrierNode(Node* ctrl, Node* val, bool native);
239 
240   bool is_native() const;
241   virtual int Opcode() const;
242   virtual const Type* bottom_type() const;
243   virtual const Type* Value(PhaseGVN* phase) const;
244   virtual const class TypePtr *adr_type() const { return TypeOopPtr::BOTTOM; }
245   virtual uint match_edge(uint idx) const {
246     return idx &gt;= ValueIn;
247   }
248   virtual uint ideal_reg() const { return Op_RegP; }
249 
250   virtual Node* Identity(PhaseGVN* phase);
251 
252   virtual uint size_of() const;
253   virtual uint hash() const;
254   virtual bool cmp( const Node &amp;n ) const;
255 
256   bool is_redundant();
<span class="line-removed">257   CallStaticJavaNode* pin_and_expand_null_check(PhaseIterGVN&amp; igvn);</span>
258 
259 private:
260   bool needs_barrier(PhaseGVN* phase, Node* n);
261   bool needs_barrier_impl(PhaseGVN* phase, Node* n, Unique_Node_List &amp;visited);
262 };
263 
264 
265 #endif // SHARE_GC_SHENANDOAH_C2_SHENANDOAHSUPPORT_HPP
</pre>
</td>
<td>
<hr />
<pre>
 46     ShenandoahOopStore,
 47     ShenandoahNone
 48   };
 49 
 50   static bool verify_helper(Node* in, Node_Stack&amp; phis, VectorSet&amp; visited, verify_type t, bool trace, Unique_Node_List&amp; barriers_used);
 51   static void report_verify_failure(const char* msg, Node* n1 = NULL, Node* n2 = NULL);
 52   static void verify_raw_mem(RootNode* root);
 53 #endif
 54   static Node* dom_mem(Node* mem, Node* ctrl, int alias, Node*&amp; mem_ctrl, PhaseIdealLoop* phase);
 55   static Node* no_branches(Node* c, Node* dom, bool allow_one_proj, PhaseIdealLoop* phase);
 56   static bool is_gc_state_test(Node* iff, int mask);
 57   static bool has_safepoint_between(Node* start, Node* stop, PhaseIdealLoop *phase);
 58   static Node* find_bottom_mem(Node* ctrl, PhaseIdealLoop* phase);
 59   static void follow_barrier_uses(Node* n, Node* ctrl, Unique_Node_List&amp; uses, PhaseIdealLoop* phase);
 60   static void test_null(Node*&amp; ctrl, Node* val, Node*&amp; null_ctrl, PhaseIdealLoop* phase);
 61   static void test_gc_state(Node*&amp; ctrl, Node* raw_mem, Node*&amp; heap_stable_ctrl,
 62                             PhaseIdealLoop* phase, int flags);
 63   static void call_lrb_stub(Node*&amp; ctrl, Node*&amp; val, Node* load_addr, Node*&amp; result_mem, Node* raw_mem, bool is_native, PhaseIdealLoop* phase);
 64   static void test_in_cset(Node*&amp; ctrl, Node*&amp; not_cset_ctrl, Node* val, Node* raw_mem, PhaseIdealLoop* phase);
 65   static void move_gc_state_test_out_of_loop(IfNode* iff, PhaseIdealLoop* phase);



 66   static void merge_back_to_back_tests(Node* n, PhaseIdealLoop* phase);
 67   static bool identical_backtoback_ifs(Node *n, PhaseIdealLoop* phase);
 68   static void fix_ctrl(Node* barrier, Node* region, const MemoryGraphFixer&amp; fixer, Unique_Node_List&amp; uses, Unique_Node_List&amp; uses_to_ignore, uint last, PhaseIdealLoop* phase);
 69   static IfNode* find_unswitching_candidate(const IdealLoopTree *loop, PhaseIdealLoop* phase);
 70 
 71   static Node* get_load_addr(PhaseIdealLoop* phase, VectorSet&amp; visited, Node* lrb);
 72 public:
 73   static bool is_dominator(Node* d_c, Node* n_c, Node* d, Node* n, PhaseIdealLoop* phase);
 74   static bool is_dominator_same_ctrl(Node* c, Node* d, Node* n, PhaseIdealLoop* phase);
 75 
 76   static bool is_gc_state_load(Node* n);
 77   static bool is_heap_stable_test(Node* iff);
 78 
 79   static bool expand(Compile* C, PhaseIterGVN&amp; igvn);
 80   static void pin_and_expand(PhaseIdealLoop* phase);
 81   static void optimize_after_expansion(VectorSet&amp; visited, Node_Stack&amp; nstack, Node_List&amp; old_new, PhaseIdealLoop* phase);
 82 
 83 #ifdef ASSERT
 84   static void verify(RootNode* root);
 85 #endif
</pre>
<hr />
<pre>
234 public:
235   ShenandoahLoadReferenceBarrierNode(Node* ctrl, Node* val, bool native);
236 
237   bool is_native() const;
238   virtual int Opcode() const;
239   virtual const Type* bottom_type() const;
240   virtual const Type* Value(PhaseGVN* phase) const;
241   virtual const class TypePtr *adr_type() const { return TypeOopPtr::BOTTOM; }
242   virtual uint match_edge(uint idx) const {
243     return idx &gt;= ValueIn;
244   }
245   virtual uint ideal_reg() const { return Op_RegP; }
246 
247   virtual Node* Identity(PhaseGVN* phase);
248 
249   virtual uint size_of() const;
250   virtual uint hash() const;
251   virtual bool cmp( const Node &amp;n ) const;
252 
253   bool is_redundant();

254 
255 private:
256   bool needs_barrier(PhaseGVN* phase, Node* n);
257   bool needs_barrier_impl(PhaseGVN* phase, Node* n, Unique_Node_List &amp;visited);
258 };
259 
260 
261 #endif // SHARE_GC_SHENANDOAH_C2_SHENANDOAHSUPPORT_HPP
</pre>
</td>
</tr>
</table>
<center><a href="shenandoahSupport.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../mode/shenandoahIUMode.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>