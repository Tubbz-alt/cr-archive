<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/c1/c1_ValueMap.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="c1_Instruction.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="c1_globals.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/c1/c1_ValueMap.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
471         return false;
472       }
473     }
474   }
475 
476   bool optimistic = this-&gt;_gvn-&gt;compilation()-&gt;is_optimistic();
477 
478   if (UseLoopInvariantCodeMotion &amp;&amp; optimistic) {
479     LoopInvariantCodeMotion code_motion(this, _gvn, loop_header, &amp;_loop_blocks);
480   }
481 
482   TRACE_VALUE_NUMBERING(tty-&gt;print_cr(&quot;** loop successfully optimized&quot;));
483   return true;
484 }
485 
486 
487 GlobalValueNumbering::GlobalValueNumbering(IR* ir)
488   : _compilation(ir-&gt;compilation())
489   , _current_map(NULL)
490   , _value_maps(ir-&gt;linear_scan_order()-&gt;length(), ir-&gt;linear_scan_order()-&gt;length(), NULL)

491 {
492   TRACE_VALUE_NUMBERING(tty-&gt;print_cr(&quot;****** start of global value numbering&quot;));
493 
494   ShortLoopOptimizer short_loop_optimizer(this);
495 
496   BlockList* blocks = ir-&gt;linear_scan_order();
497   int num_blocks = blocks-&gt;length();
498 
499   BlockBegin* start_block = blocks-&gt;at(0);
500   assert(start_block == ir-&gt;start() &amp;&amp; start_block-&gt;number_of_preds() == 0 &amp;&amp; start_block-&gt;dominator() == NULL, &quot;must be start block&quot;);
501   assert(start_block-&gt;next()-&gt;as_Base() != NULL &amp;&amp; start_block-&gt;next()-&gt;next() == NULL, &quot;start block must not have instructions&quot;);
502 
503   // method parameters are not linked in instructions list, so process them separateley
504   for_each_state_value(start_block-&gt;state(), value,
505      assert(value-&gt;as_Local() != NULL, &quot;only method parameters allowed&quot;);
506      set_processed(value);
507   );
508 
509   // initial, empty value map with nesting 0
510   set_value_map_of(start_block, new ValueMap());
</pre>
</td>
<td>
<hr />
<pre>
471         return false;
472       }
473     }
474   }
475 
476   bool optimistic = this-&gt;_gvn-&gt;compilation()-&gt;is_optimistic();
477 
478   if (UseLoopInvariantCodeMotion &amp;&amp; optimistic) {
479     LoopInvariantCodeMotion code_motion(this, _gvn, loop_header, &amp;_loop_blocks);
480   }
481 
482   TRACE_VALUE_NUMBERING(tty-&gt;print_cr(&quot;** loop successfully optimized&quot;));
483   return true;
484 }
485 
486 
487 GlobalValueNumbering::GlobalValueNumbering(IR* ir)
488   : _compilation(ir-&gt;compilation())
489   , _current_map(NULL)
490   , _value_maps(ir-&gt;linear_scan_order()-&gt;length(), ir-&gt;linear_scan_order()-&gt;length(), NULL)
<span class="line-added">491   , _has_substitutions(false)</span>
492 {
493   TRACE_VALUE_NUMBERING(tty-&gt;print_cr(&quot;****** start of global value numbering&quot;));
494 
495   ShortLoopOptimizer short_loop_optimizer(this);
496 
497   BlockList* blocks = ir-&gt;linear_scan_order();
498   int num_blocks = blocks-&gt;length();
499 
500   BlockBegin* start_block = blocks-&gt;at(0);
501   assert(start_block == ir-&gt;start() &amp;&amp; start_block-&gt;number_of_preds() == 0 &amp;&amp; start_block-&gt;dominator() == NULL, &quot;must be start block&quot;);
502   assert(start_block-&gt;next()-&gt;as_Base() != NULL &amp;&amp; start_block-&gt;next()-&gt;next() == NULL, &quot;start block must not have instructions&quot;);
503 
504   // method parameters are not linked in instructions list, so process them separateley
505   for_each_state_value(start_block-&gt;state(), value,
506      assert(value-&gt;as_Local() != NULL, &quot;only method parameters allowed&quot;);
507      set_processed(value);
508   );
509 
510   // initial, empty value map with nesting 0
511   set_value_map_of(start_block, new ValueMap());
</pre>
</td>
</tr>
</table>
<center><a href="c1_Instruction.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="c1_globals.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>