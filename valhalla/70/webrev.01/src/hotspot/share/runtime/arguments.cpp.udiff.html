<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/runtime/arguments.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../prims/whitebox.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="arguments.hpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/arguments.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -523,10 +523,20 @@</span>
    { &quot;AllowRedefinitionToAddDeleteMethods&quot;, JDK_Version::jdk(13), JDK_Version::undefined(), JDK_Version::undefined() },
    { &quot;FlightRecorder&quot;,               JDK_Version::jdk(13), JDK_Version::undefined(), JDK_Version::undefined() },
    { &quot;PrintVMQWaitTime&quot;,             JDK_Version::jdk(15), JDK_Version::jdk(16), JDK_Version::jdk(17) },
    { &quot;UseNewFieldLayout&quot;,            JDK_Version::jdk(15), JDK_Version::jdk(16), JDK_Version::jdk(17) },
    { &quot;ForceNUMA&quot;,                    JDK_Version::jdk(15), JDK_Version::jdk(16), JDK_Version::jdk(17) },
<span class="udiff-line-added">+   { &quot;UseBiasedLocking&quot;,             JDK_Version::jdk(15), JDK_Version::jdk(16), JDK_Version::jdk(17) },</span>
<span class="udiff-line-added">+   { &quot;BiasedLockingStartupDelay&quot;,    JDK_Version::jdk(15), JDK_Version::jdk(16), JDK_Version::jdk(17) },</span>
<span class="udiff-line-added">+   { &quot;PrintBiasedLockingStatistics&quot;, JDK_Version::jdk(15), JDK_Version::jdk(16), JDK_Version::jdk(17) },</span>
<span class="udiff-line-added">+   { &quot;BiasedLockingBulkRebiasThreshold&quot;,    JDK_Version::jdk(15), JDK_Version::jdk(16), JDK_Version::jdk(17) },</span>
<span class="udiff-line-added">+   { &quot;BiasedLockingBulkRevokeThreshold&quot;,    JDK_Version::jdk(15), JDK_Version::jdk(16), JDK_Version::jdk(17) },</span>
<span class="udiff-line-added">+   { &quot;BiasedLockingDecayTime&quot;,              JDK_Version::jdk(15), JDK_Version::jdk(16), JDK_Version::jdk(17) },</span>
<span class="udiff-line-added">+   { &quot;UseOptoBiasInlining&quot;,                 JDK_Version::jdk(15), JDK_Version::jdk(16), JDK_Version::jdk(17) },</span>
<span class="udiff-line-added">+   { &quot;PrintPreciseBiasedLockingStatistics&quot;, JDK_Version::jdk(15), JDK_Version::jdk(16), JDK_Version::jdk(17) },</span>
<span class="udiff-line-added">+   { &quot;InitialBootClassLoaderMetaspaceSize&quot;, JDK_Version::jdk(15), JDK_Version::jdk(16), JDK_Version::jdk(17) },</span>
<span class="udiff-line-added">+   { &quot;UseLargePagesInMetaspace&quot;,            JDK_Version::jdk(15), JDK_Version::jdk(16), JDK_Version::jdk(17) },</span>
  
    // --- Deprecated alias flags (see also aliased_jvm_flags) - sorted by obsolete_in then expired_in:
    { &quot;DefaultMaxRAMFraction&quot;,        JDK_Version::jdk(8),  JDK_Version::undefined(), JDK_Version::undefined() },
    { &quot;CreateMinidumpOnCrash&quot;,        JDK_Version::jdk(9),  JDK_Version::undefined(), JDK_Version::undefined() },
    { &quot;TLABStats&quot;,                    JDK_Version::jdk(12), JDK_Version::undefined(), JDK_Version::undefined() },
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -560,10 +570,20 @@</span>
    { &quot;not deprecated or obsolete&quot;,   JDK_Version::undefined(), JDK_Version::undefined(), JDK_Version::jdk(9) },
    { &quot;dup option&quot;,                   JDK_Version::jdk(9), JDK_Version::undefined(), JDK_Version::undefined() },
    { &quot;dup option&quot;,                   JDK_Version::jdk(9), JDK_Version::undefined(), JDK_Version::undefined() },
  #endif
  
<span class="udiff-line-added">+ #ifndef COMPILER2</span>
<span class="udiff-line-added">+   // These flags were generally available, but are C2 only, now.</span>
<span class="udiff-line-added">+   { &quot;MaxInlineLevel&quot;,               JDK_Version::undefined(), JDK_Version::jdk(15), JDK_Version::jdk(16) },</span>
<span class="udiff-line-added">+   { &quot;MaxRecursiveInlineLevel&quot;,      JDK_Version::undefined(), JDK_Version::jdk(15), JDK_Version::jdk(16) },</span>
<span class="udiff-line-added">+   { &quot;InlineSmallCode&quot;,              JDK_Version::undefined(), JDK_Version::jdk(15), JDK_Version::jdk(16) },</span>
<span class="udiff-line-added">+   { &quot;MaxInlineSize&quot;,                JDK_Version::undefined(), JDK_Version::jdk(15), JDK_Version::jdk(16) },</span>
<span class="udiff-line-added">+   { &quot;FreqInlineSize&quot;,               JDK_Version::undefined(), JDK_Version::jdk(15), JDK_Version::jdk(16) },</span>
<span class="udiff-line-added">+   { &quot;MaxTrivialSize&quot;,               JDK_Version::undefined(), JDK_Version::jdk(15), JDK_Version::jdk(16) },</span>
<span class="udiff-line-added">+ #endif</span>
<span class="udiff-line-added">+ </span>
    { NULL, JDK_Version(0), JDK_Version(0) }
  };
  
  // Flags that are aliases for other flags.
  typedef struct {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3525,17 +3545,25 @@</span>
  
    delete options;
    return status;
  }
  
<span class="udiff-line-modified-removed">- void Arguments::set_shared_spaces_flags() {</span>
<span class="udiff-line-modified-added">+ jint Arguments::set_shared_spaces_flags_and_archive_paths() {</span>
    if (DumpSharedSpaces) {
      if (RequireSharedSpaces) {
        warning(&quot;Cannot dump shared archive while using shared archive&quot;);
      }
      UseSharedSpaces = false;
    }
<span class="udiff-line-added">+ #if INCLUDE_CDS</span>
<span class="udiff-line-added">+   // Initialize shared archive paths which could include both base and dynamic archive paths</span>
<span class="udiff-line-added">+   // This must be after set_ergonomics_flags() called so flag UseCompressedOops is set properly.</span>
<span class="udiff-line-added">+   if (!init_shared_archive_paths()) {</span>
<span class="udiff-line-added">+     return JNI_ENOMEM;</span>
<span class="udiff-line-added">+   }</span>
<span class="udiff-line-added">+ #endif  // INCLUDE_CDS</span>
<span class="udiff-line-added">+   return JNI_OK;</span>
  }
  
  #if INCLUDE_CDS
  // Sharing support
  // Construct the path to the archive
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3547,11 +3575,12 @@</span>
    if (end != NULL) *end = &#39;\0&#39;;
    size_t jvm_path_len = strlen(jvm_path);
    size_t file_sep_len = strlen(os::file_separator());
    const size_t len = jvm_path_len + file_sep_len + 20;
    default_archive_path = NEW_C_HEAP_ARRAY(char, len, mtArguments);
<span class="udiff-line-modified-removed">-   jio_snprintf(default_archive_path, len, &quot;%s%sclasses.jsa&quot;,</span>
<span class="udiff-line-modified-added">+   jio_snprintf(default_archive_path, len,</span>
<span class="udiff-line-added">+                UseCompressedOops ? &quot;%s%sclasses.jsa&quot;: &quot;%s%sclasses_nocoops.jsa&quot;,</span>
                 jvm_path, os::file_separator());
    return default_archive_path;
  }
  
  int Arguments::num_archives(const char* archive_path) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3992,17 +4021,10 @@</span>
  
    if (result != JNI_OK) {
      return result;
    }
  
<span class="udiff-line-removed">- #if INCLUDE_CDS</span>
<span class="udiff-line-removed">-   // Initialize shared archive paths which could include both base and dynamic archive paths</span>
<span class="udiff-line-removed">-   if (!init_shared_archive_paths()) {</span>
<span class="udiff-line-removed">-     return JNI_ENOMEM;</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-removed">- #endif</span>
<span class="udiff-line-removed">- </span>
    // Delay warning until here so that we&#39;ve had a chance to process
    // the -XX:-PrintWarnings flag
    if (needs_hotspotrc_warning) {
      warning(&quot;%s file is present but has been ignored.  &quot;
              &quot;Run with -XX:Flags=%s to load the file.&quot;,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -4086,11 +4108,12 @@</span>
    // Set heap size based on available physical memory
    set_heap_size();
  
    GCConfig::arguments()-&gt;initialize();
  
<span class="udiff-line-modified-removed">-   set_shared_spaces_flags();</span>
<span class="udiff-line-modified-added">+   result = set_shared_spaces_flags_and_archive_paths();</span>
<span class="udiff-line-added">+   if (result != JNI_OK) return result;</span>
  
    // Initialize Metaspace flags and alignments
    Metaspace::ergo_initialize();
  
    // Set compiler flags after GC is selected and GC specific
</pre>
<center><a href="../prims/whitebox.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="arguments.hpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>