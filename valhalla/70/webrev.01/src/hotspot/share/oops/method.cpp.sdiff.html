<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/oops/method.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="accessDecorators.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="oop.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/oops/method.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
1207          |                |  (_cds_entry_table: CODE)                                   |                 |
1208          |                +-&gt;[0]: jmp _entry_table[0] --&gt; (i2i_entry_for &quot;zero_locals&quot;) |                 |
1209          |                |                               (allocated at run time)       |                 |
1210          |                |  ...                           [asm code ...]               |                 |
1211          +-[not compiled]-+  [n]: jmp _entry_table[n]                                   |                 |
1212          |                                                                              |                 |
1213          |                                                                              |                 |
1214          +-[compiled]-------------------------------------------------------------------+                 |
1215                                                                                                           |
1216  _from_compiled_entry------------&gt;  (_c2i_entry_trampoline: CODE)                                         |
1217                                     [jmp c2i_entry] ------------------------------------------------------+
1218 
1219 ***/
1220 
1221 // Called when the method_holder is getting linked. Setup entrypoints so the method
1222 // is ready to be called from interpreter, compiler, and vtables.
1223 void Method::link_method(const methodHandle&amp; h_method, TRAPS) {
1224   // If the code cache is full, we may reenter this function for the
1225   // leftover methods that weren&#39;t linked.
1226   if (is_shared()) {
<span class="line-modified">1227 #ifdef ASSERT</span>
<span class="line-modified">1228     address entry = Interpreter::entry_for_cds_method(h_method);</span>
<span class="line-modified">1229     assert(entry != NULL &amp;&amp; entry == _i2i_entry,</span>
<span class="line-removed">1230            &quot;should be correctly set during dump time&quot;);</span>
<span class="line-removed">1231 #endif</span>
1232     if (adapter() != NULL) {
1233       return;
1234     }
<span class="line-removed">1235     assert(entry == _from_interpreted_entry,</span>
<span class="line-removed">1236            &quot;should be correctly set during dump time&quot;);</span>
1237   } else if (_i2i_entry != NULL) {
1238     return;
1239   }
1240   assert( _code == NULL, &quot;nothing compiled yet&quot; );
1241 
1242   // Setup interpreter entrypoint
1243   assert(this == h_method(), &quot;wrong h_method()&quot; );
1244 
1245   if (!is_shared()) {
1246     assert(adapter() == NULL, &quot;init&#39;d to NULL&quot;);
1247     address entry = Interpreter::entry_for_method(h_method);
1248     assert(entry != NULL, &quot;interpreter entry must be non-null&quot;);
1249     // Sets both _i2i_entry and _from_interpreted_entry
1250     set_interpreter_entry(entry);
1251   }
1252 
1253   // Don&#39;t overwrite already registered native entries.
1254   if (is_native() &amp;&amp; !has_native_function()) {
1255     set_native_function(
1256       SharedRuntime::native_method_throw_unsatisfied_link_error_entry(),
</pre>
</td>
<td>
<hr />
<pre>
1207          |                |  (_cds_entry_table: CODE)                                   |                 |
1208          |                +-&gt;[0]: jmp _entry_table[0] --&gt; (i2i_entry_for &quot;zero_locals&quot;) |                 |
1209          |                |                               (allocated at run time)       |                 |
1210          |                |  ...                           [asm code ...]               |                 |
1211          +-[not compiled]-+  [n]: jmp _entry_table[n]                                   |                 |
1212          |                                                                              |                 |
1213          |                                                                              |                 |
1214          +-[compiled]-------------------------------------------------------------------+                 |
1215                                                                                                           |
1216  _from_compiled_entry------------&gt;  (_c2i_entry_trampoline: CODE)                                         |
1217                                     [jmp c2i_entry] ------------------------------------------------------+
1218 
1219 ***/
1220 
1221 // Called when the method_holder is getting linked. Setup entrypoints so the method
1222 // is ready to be called from interpreter, compiler, and vtables.
1223 void Method::link_method(const methodHandle&amp; h_method, TRAPS) {
1224   // If the code cache is full, we may reenter this function for the
1225   // leftover methods that weren&#39;t linked.
1226   if (is_shared()) {
<span class="line-modified">1227     // Can&#39;t assert that the adapters are sane, because methods get linked before</span>
<span class="line-modified">1228     // the interpreter is generated, and hence before its adapters are generated.</span>
<span class="line-modified">1229     // If you messed them up you will notice soon enough though, don&#39;t you worry.</span>


1230     if (adapter() != NULL) {
1231       return;
1232     }


1233   } else if (_i2i_entry != NULL) {
1234     return;
1235   }
1236   assert( _code == NULL, &quot;nothing compiled yet&quot; );
1237 
1238   // Setup interpreter entrypoint
1239   assert(this == h_method(), &quot;wrong h_method()&quot; );
1240 
1241   if (!is_shared()) {
1242     assert(adapter() == NULL, &quot;init&#39;d to NULL&quot;);
1243     address entry = Interpreter::entry_for_method(h_method);
1244     assert(entry != NULL, &quot;interpreter entry must be non-null&quot;);
1245     // Sets both _i2i_entry and _from_interpreted_entry
1246     set_interpreter_entry(entry);
1247   }
1248 
1249   // Don&#39;t overwrite already registered native entries.
1250   if (is_native() &amp;&amp; !has_native_function()) {
1251     set_native_function(
1252       SharedRuntime::native_method_throw_unsatisfied_link_error_entry(),
</pre>
</td>
</tr>
</table>
<center><a href="accessDecorators.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="oop.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>