<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/memory/universe.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="oopFactory.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="virtualspace.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/memory/universe.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 190   f-&gt;do_oop((oop*)&amp;_the_null_sentinel);
 191   f-&gt;do_oop((oop*)&amp;_the_null_string);
 192   f-&gt;do_oop((oop*)&amp;_the_min_jint_string);
 193   f-&gt;do_oop((oop*)&amp;_out_of_memory_error_java_heap);
 194   f-&gt;do_oop((oop*)&amp;_out_of_memory_error_metaspace);
 195   f-&gt;do_oop((oop*)&amp;_out_of_memory_error_class_metaspace);
 196   f-&gt;do_oop((oop*)&amp;_out_of_memory_error_array_size);
 197   f-&gt;do_oop((oop*)&amp;_out_of_memory_error_gc_overhead_limit);
 198   f-&gt;do_oop((oop*)&amp;_out_of_memory_error_realloc_objects);
 199   f-&gt;do_oop((oop*)&amp;_out_of_memory_error_retry);
 200   f-&gt;do_oop((oop*)&amp;_delayed_stack_overflow_error_message);
 201   f-&gt;do_oop((oop*)&amp;_preallocated_out_of_memory_error_array);
 202   f-&gt;do_oop((oop*)&amp;_null_ptr_exception_instance);
 203   f-&gt;do_oop((oop*)&amp;_arithmetic_exception_instance);
 204   f-&gt;do_oop((oop*)&amp;_virtual_machine_error_instance);
 205   f-&gt;do_oop((oop*)&amp;_main_thread_group);
 206   f-&gt;do_oop((oop*)&amp;_system_thread_group);
 207   f-&gt;do_oop((oop*)&amp;_vm_exception);
 208   f-&gt;do_oop((oop*)&amp;_reference_pending_list);
 209   debug_only(f-&gt;do_oop((oop*)&amp;_fullgc_alot_dummy_array);)

 210 }
 211 
 212 void LatestMethodCache::metaspace_pointers_do(MetaspaceClosure* it) {
 213   it-&gt;push(&amp;_klass);
 214 }
 215 
 216 void Universe::metaspace_pointers_do(MetaspaceClosure* it) {
 217   for (int i = 0; i &lt; T_LONG+1; i++) {
 218     it-&gt;push(&amp;_typeArrayKlassObjs[i]);
 219   }
 220   it-&gt;push(&amp;_objectArrayKlassObj);
 221 
 222   it-&gt;push(&amp;_the_empty_int_array);
 223   it-&gt;push(&amp;_the_empty_short_array);
 224   it-&gt;push(&amp;_the_empty_klass_array);
 225   it-&gt;push(&amp;_the_empty_instance_klass_array);
 226   it-&gt;push(&amp;_the_empty_method_array);
 227   it-&gt;push(&amp;_the_array_interfaces_array);
 228   it-&gt;push(&amp;_the_single_IdentityObject_klass_array);
 229 
</pre>
<hr />
<pre>
 651     _non_oop_bits = (intptr_t)os::non_memory_address_word() | 1;
 652   }
 653 
 654   return (void*)_non_oop_bits;
 655 }
 656 
 657 static void initialize_global_behaviours() {
 658   CompiledICProtectionBehaviour::set_current(new DefaultICProtectionBehaviour());
 659 }
 660 
 661 jint universe_init() {
 662   assert(!Universe::_fully_initialized, &quot;called after initialize_vtables&quot;);
 663   guarantee(1 &lt;&lt; LogHeapWordSize == sizeof(HeapWord),
 664          &quot;LogHeapWordSize is incorrect.&quot;);
 665   guarantee(sizeof(oop) &gt;= sizeof(HeapWord), &quot;HeapWord larger than oop?&quot;);
 666   guarantee(sizeof(oop) % sizeof(HeapWord) == 0,
 667             &quot;oop size is not not a multiple of HeapWord size&quot;);
 668 
 669   TraceTime timer(&quot;Genesis&quot;, TRACETIME_LOG(Info, startuptime));
 670 
<span class="line-removed"> 671   JavaClasses::compute_hard_coded_offsets();</span>
<span class="line-removed"> 672 </span>
 673   initialize_global_behaviours();
 674 
 675   GCConfig::arguments()-&gt;initialize_heap_sizes();
 676 
 677   jint status = Universe::initialize_heap();
 678   if (status != JNI_OK) {
 679     return status;
 680   }
 681 
 682   Universe::initialize_tlab();
 683 
 684   Metaspace::global_initialize();
 685   // Initialize performance counters for metaspaces
 686   MetaspaceCounters::initialize_performance_counters();
 687   CompressedClassSpaceCounters::initialize_performance_counters();
 688 
 689   AOTLoader::universe_init();
 690 
 691   // Checks &#39;AfterMemoryInit&#39; constraints.
 692   if (!JVMFlagConstraintList::check_constraints(JVMFlagConstraint::AfterMemoryInit)) {
</pre>
</td>
<td>
<hr />
<pre>
 190   f-&gt;do_oop((oop*)&amp;_the_null_sentinel);
 191   f-&gt;do_oop((oop*)&amp;_the_null_string);
 192   f-&gt;do_oop((oop*)&amp;_the_min_jint_string);
 193   f-&gt;do_oop((oop*)&amp;_out_of_memory_error_java_heap);
 194   f-&gt;do_oop((oop*)&amp;_out_of_memory_error_metaspace);
 195   f-&gt;do_oop((oop*)&amp;_out_of_memory_error_class_metaspace);
 196   f-&gt;do_oop((oop*)&amp;_out_of_memory_error_array_size);
 197   f-&gt;do_oop((oop*)&amp;_out_of_memory_error_gc_overhead_limit);
 198   f-&gt;do_oop((oop*)&amp;_out_of_memory_error_realloc_objects);
 199   f-&gt;do_oop((oop*)&amp;_out_of_memory_error_retry);
 200   f-&gt;do_oop((oop*)&amp;_delayed_stack_overflow_error_message);
 201   f-&gt;do_oop((oop*)&amp;_preallocated_out_of_memory_error_array);
 202   f-&gt;do_oop((oop*)&amp;_null_ptr_exception_instance);
 203   f-&gt;do_oop((oop*)&amp;_arithmetic_exception_instance);
 204   f-&gt;do_oop((oop*)&amp;_virtual_machine_error_instance);
 205   f-&gt;do_oop((oop*)&amp;_main_thread_group);
 206   f-&gt;do_oop((oop*)&amp;_system_thread_group);
 207   f-&gt;do_oop((oop*)&amp;_vm_exception);
 208   f-&gt;do_oop((oop*)&amp;_reference_pending_list);
 209   debug_only(f-&gt;do_oop((oop*)&amp;_fullgc_alot_dummy_array);)
<span class="line-added"> 210   ThreadsSMRSupport::exiting_threads_oops_do(f);</span>
 211 }
 212 
 213 void LatestMethodCache::metaspace_pointers_do(MetaspaceClosure* it) {
 214   it-&gt;push(&amp;_klass);
 215 }
 216 
 217 void Universe::metaspace_pointers_do(MetaspaceClosure* it) {
 218   for (int i = 0; i &lt; T_LONG+1; i++) {
 219     it-&gt;push(&amp;_typeArrayKlassObjs[i]);
 220   }
 221   it-&gt;push(&amp;_objectArrayKlassObj);
 222 
 223   it-&gt;push(&amp;_the_empty_int_array);
 224   it-&gt;push(&amp;_the_empty_short_array);
 225   it-&gt;push(&amp;_the_empty_klass_array);
 226   it-&gt;push(&amp;_the_empty_instance_klass_array);
 227   it-&gt;push(&amp;_the_empty_method_array);
 228   it-&gt;push(&amp;_the_array_interfaces_array);
 229   it-&gt;push(&amp;_the_single_IdentityObject_klass_array);
 230 
</pre>
<hr />
<pre>
 652     _non_oop_bits = (intptr_t)os::non_memory_address_word() | 1;
 653   }
 654 
 655   return (void*)_non_oop_bits;
 656 }
 657 
 658 static void initialize_global_behaviours() {
 659   CompiledICProtectionBehaviour::set_current(new DefaultICProtectionBehaviour());
 660 }
 661 
 662 jint universe_init() {
 663   assert(!Universe::_fully_initialized, &quot;called after initialize_vtables&quot;);
 664   guarantee(1 &lt;&lt; LogHeapWordSize == sizeof(HeapWord),
 665          &quot;LogHeapWordSize is incorrect.&quot;);
 666   guarantee(sizeof(oop) &gt;= sizeof(HeapWord), &quot;HeapWord larger than oop?&quot;);
 667   guarantee(sizeof(oop) % sizeof(HeapWord) == 0,
 668             &quot;oop size is not not a multiple of HeapWord size&quot;);
 669 
 670   TraceTime timer(&quot;Genesis&quot;, TRACETIME_LOG(Info, startuptime));
 671 


 672   initialize_global_behaviours();
 673 
 674   GCConfig::arguments()-&gt;initialize_heap_sizes();
 675 
 676   jint status = Universe::initialize_heap();
 677   if (status != JNI_OK) {
 678     return status;
 679   }
 680 
 681   Universe::initialize_tlab();
 682 
 683   Metaspace::global_initialize();
 684   // Initialize performance counters for metaspaces
 685   MetaspaceCounters::initialize_performance_counters();
 686   CompressedClassSpaceCounters::initialize_performance_counters();
 687 
 688   AOTLoader::universe_init();
 689 
 690   // Checks &#39;AfterMemoryInit&#39; constraints.
 691   if (!JVMFlagConstraintList::check_constraints(JVMFlagConstraint::AfterMemoryInit)) {
</pre>
</td>
</tr>
</table>
<center><a href="oopFactory.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="virtualspace.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>