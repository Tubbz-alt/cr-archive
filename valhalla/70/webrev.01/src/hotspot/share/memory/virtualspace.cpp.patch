diff a/src/hotspot/share/memory/virtualspace.cpp b/src/hotspot/share/memory/virtualspace.cpp
--- a/src/hotspot/share/memory/virtualspace.cpp
+++ b/src/hotspot/share/memory/virtualspace.cpp
@@ -224,15 +224,14 @@
   if (_fd_for_heap != -1) {
     _special = true;
   }
 }
 
-ReservedSpace ReservedSpace::first_part(size_t partition_size, size_t alignment,
-                                        bool split, bool realloc) {
+ReservedSpace ReservedSpace::first_part(size_t partition_size, size_t alignment, bool split) {
   assert(partition_size <= size(), "partition failed");
-  if (split) {
-    os::split_reserved_memory(base(), size(), partition_size, realloc);
+  if (split && partition_size > 0 && partition_size < size()) {
+    os::split_reserved_memory(base(), size(), partition_size);
   }
   ReservedSpace result(base(), partition_size, alignment, special(),
                        executable());
   return result;
 }
