<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/memory/virtualspace.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="universe.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="virtualspace.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/memory/virtualspace.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 209       if (requested_address != 0 &amp;&amp;
 210           failed_to_reserve_as_requested(base, requested_address, size, false, _fd_for_heap != -1)) {
 211         // As a result of the alignment constraints, the allocated base differs
 212         // from the requested address. Return back to the caller who can
 213         // take remedial action (like try again without a requested address).
 214         assert(_base == NULL, &quot;should be&quot;);
 215         return;
 216       }
 217     }
 218   }
 219   // Done
 220   _base = base;
 221   _size = size;
 222   _alignment = alignment;
 223   // If heap is reserved with a backing file, the entire space has been committed. So set the _special flag to true
 224   if (_fd_for_heap != -1) {
 225     _special = true;
 226   }
 227 }
 228 
<span class="line-modified"> 229 ReservedSpace ReservedSpace::first_part(size_t partition_size, size_t alignment,</span>
<span class="line-removed"> 230                                         bool split, bool realloc) {</span>
 231   assert(partition_size &lt;= size(), &quot;partition failed&quot;);
<span class="line-modified"> 232   if (split) {</span>
<span class="line-modified"> 233     os::split_reserved_memory(base(), size(), partition_size, realloc);</span>
 234   }
 235   ReservedSpace result(base(), partition_size, alignment, special(),
 236                        executable());
 237   return result;
 238 }
 239 
 240 
 241 ReservedSpace
 242 ReservedSpace::last_part(size_t partition_size, size_t alignment) {
 243   assert(partition_size &lt;= size(), &quot;partition failed&quot;);
 244   ReservedSpace result(base() + partition_size, size() - partition_size,
 245                        alignment, special(), executable());
 246   return result;
 247 }
 248 
 249 
 250 size_t ReservedSpace::page_align_size_up(size_t size) {
 251   return align_up(size, os::vm_page_size());
 252 }
 253 
</pre>
</td>
<td>
<hr />
<pre>
 209       if (requested_address != 0 &amp;&amp;
 210           failed_to_reserve_as_requested(base, requested_address, size, false, _fd_for_heap != -1)) {
 211         // As a result of the alignment constraints, the allocated base differs
 212         // from the requested address. Return back to the caller who can
 213         // take remedial action (like try again without a requested address).
 214         assert(_base == NULL, &quot;should be&quot;);
 215         return;
 216       }
 217     }
 218   }
 219   // Done
 220   _base = base;
 221   _size = size;
 222   _alignment = alignment;
 223   // If heap is reserved with a backing file, the entire space has been committed. So set the _special flag to true
 224   if (_fd_for_heap != -1) {
 225     _special = true;
 226   }
 227 }
 228 
<span class="line-modified"> 229 ReservedSpace ReservedSpace::first_part(size_t partition_size, size_t alignment, bool split) {</span>

 230   assert(partition_size &lt;= size(), &quot;partition failed&quot;);
<span class="line-modified"> 231   if (split &amp;&amp; partition_size &gt; 0 &amp;&amp; partition_size &lt; size()) {</span>
<span class="line-modified"> 232     os::split_reserved_memory(base(), size(), partition_size);</span>
 233   }
 234   ReservedSpace result(base(), partition_size, alignment, special(),
 235                        executable());
 236   return result;
 237 }
 238 
 239 
 240 ReservedSpace
 241 ReservedSpace::last_part(size_t partition_size, size_t alignment) {
 242   assert(partition_size &lt;= size(), &quot;partition failed&quot;);
 243   ReservedSpace result(base() + partition_size, size() - partition_size,
 244                        alignment, special(), executable());
 245   return result;
 246 }
 247 
 248 
 249 size_t ReservedSpace::page_align_size_up(size_t size) {
 250   return align_up(size, os::vm_page_size());
 251 }
 252 
</pre>
</td>
</tr>
</table>
<center><a href="universe.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="virtualspace.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>