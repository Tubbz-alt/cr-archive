<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/memory/filemap.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../jvmci/jvmciCompilerToVM.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="heapShared.hpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/memory/filemap.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -205,20 +205,20 @@</span>
    }
    _version = CURRENT_CDS_ARCHIVE_VERSION;
    _alignment = alignment;
    _obj_alignment = ObjectAlignmentInBytes;
    _compact_strings = CompactStrings;
<span class="udiff-line-modified-removed">-   _narrow_oop_mode = CompressedOops::mode();</span>
<span class="udiff-line-modified-removed">-   _narrow_oop_base = CompressedOops::base();</span>
<span class="udiff-line-modified-removed">-   _narrow_oop_shift = CompressedOops::shift();</span>
<span class="udiff-line-modified-added">+   if (HeapShared::is_heap_object_archiving_allowed()) {</span>
<span class="udiff-line-modified-added">+     _narrow_oop_mode = CompressedOops::mode();</span>
<span class="udiff-line-modified-added">+     _narrow_oop_base = CompressedOops::base();</span>
<span class="udiff-line-added">+     _narrow_oop_shift = CompressedOops::shift();</span>
<span class="udiff-line-added">+     _heap_end = CompressedOops::end();</span>
<span class="udiff-line-added">+   }</span>
    _compressed_oops = UseCompressedOops;
    _compressed_class_ptrs = UseCompressedClassPointers;
    _max_heap_size = MaxHeapSize;
    _narrow_klass_shift = CompressedKlassPointers::shift();
<span class="udiff-line-removed">-   if (HeapShared::is_heap_object_archiving_allowed()) {</span>
<span class="udiff-line-removed">-     _heap_end = CompressedOops::end();</span>
<span class="udiff-line-removed">-   }</span>
  
    // The following fields are for sanity checks for whether this archive
    // will function correctly with this JVM and the bootclasspath it&#39;s
    // invoked with.
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1067,10 +1067,11 @@</span>
    if (is_static()) {
      _full_path = Arguments::GetSharedArchivePath();
    } else {
      _full_path = Arguments::GetSharedDynamicArchivePath();
    }
<span class="udiff-line-added">+   log_info(cds)(&quot;trying to map %s&quot;, _full_path);</span>
    int fd = os::open(_full_path, O_RDONLY | O_BINARY, 0);
    if (fd &lt; 0) {
      if (errno == ENOENT) {
        fail_continue(&quot;Specified shared archive not found (%s).&quot;, _full_path);
      } else {
</pre>
<center><a href="../jvmci/jvmciCompilerToVM.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="heapShared.hpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>