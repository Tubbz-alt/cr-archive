<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.incubator.jpackage/macosx/classes/jdk/incubator/jpackage/internal/MacPkgBundler.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="MacDmgBundler.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="resources/DMGsetup.scpt.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.jpackage/macosx/classes/jdk/incubator/jpackage/internal/MacPkgBundler.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 174,14 ***</span>
              throws IOException {
          Log.verbose(I18N.getString(&quot;message.preparing-scripts&quot;));
  
          Map&lt;String, String&gt; data = new HashMap&lt;&gt;();
  
<span class="line-modified">!         Path appLocation = Path.of(MAC_INSTALL_DIR.fetchFrom(params),</span>
                           APP_NAME.fetchFrom(params) + &quot;.app&quot;, &quot;Contents&quot;, &quot;app&quot;);
  
<span class="line-modified">!         data.put(&quot;INSTALL_LOCATION&quot;, MAC_INSTALL_DIR.fetchFrom(params));</span>
          data.put(&quot;APP_LOCATION&quot;, appLocation.toString());
  
          createResource(TEMPLATE_PREINSTALL_SCRIPT, params)
                  .setCategory(I18N.getString(&quot;resource.pkg-preinstall-script&quot;))
                  .setSubstitutionData(data)
<span class="line-new-header">--- 174,14 ---</span>
              throws IOException {
          Log.verbose(I18N.getString(&quot;message.preparing-scripts&quot;));
  
          Map&lt;String, String&gt; data = new HashMap&lt;&gt;();
  
<span class="line-modified">!         Path appLocation = Path.of(getInstallDir(params),</span>
                           APP_NAME.fetchFrom(params) + &quot;.app&quot;, &quot;Contents&quot;, &quot;app&quot;);
  
<span class="line-modified">!         data.put(&quot;INSTALL_LOCATION&quot;, getInstallDir(params));</span>
          data.put(&quot;APP_LOCATION&quot;, appLocation.toString());
  
          createResource(TEMPLATE_PREINSTALL_SCRIPT, params)
                  .setCategory(I18N.getString(&quot;resource.pkg-preinstall-script&quot;))
                  .setSubstitutionData(data)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 404,11 ***</span>
                      + File.separator + &quot;cpl.plist&quot;);
              ProcessBuilder pb = new ProcessBuilder(&quot;pkgbuild&quot;,
                      &quot;--root&quot;,
                      root,
                      &quot;--install-location&quot;,
<span class="line-modified">!                     MAC_INSTALL_DIR.fetchFrom(params),</span>
                      &quot;--analyze&quot;,
                      cpl.getAbsolutePath());
  
              IOUtils.exec(pb);
  
<span class="line-new-header">--- 404,11 ---</span>
                      + File.separator + &quot;cpl.plist&quot;);
              ProcessBuilder pb = new ProcessBuilder(&quot;pkgbuild&quot;,
                      &quot;--root&quot;,
                      root,
                      &quot;--install-location&quot;,
<span class="line-modified">!                     getInstallDir(params),</span>
                      &quot;--analyze&quot;,
                      cpl.getAbsolutePath());
  
              IOUtils.exec(pb);
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 419,11 ***</span>
              // build application package
              pb = new ProcessBuilder(&quot;pkgbuild&quot;,
                      &quot;--root&quot;,
                      root,
                      &quot;--install-location&quot;,
<span class="line-modified">!                     MAC_INSTALL_DIR.fetchFrom(params),</span>
                      &quot;--component-plist&quot;,
                      cpl.getAbsolutePath(),
                      &quot;--scripts&quot;,
                      SCRIPTS_DIR.fetchFrom(params).getAbsolutePath(),
                      &quot;--identifier&quot;,
<span class="line-new-header">--- 419,11 ---</span>
              // build application package
              pb = new ProcessBuilder(&quot;pkgbuild&quot;,
                      &quot;--root&quot;,
                      root,
                      &quot;--install-location&quot;,
<span class="line-modified">!                     getInstallDir(params),</span>
                      &quot;--component-plist&quot;,
                      cpl.getAbsolutePath(),
                      &quot;--scripts&quot;,
                      SCRIPTS_DIR.fetchFrom(params).getAbsolutePath(),
                      &quot;--identifier&quot;,
</pre>
<center><a href="MacDmgBundler.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="resources/DMGsetup.scpt.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>