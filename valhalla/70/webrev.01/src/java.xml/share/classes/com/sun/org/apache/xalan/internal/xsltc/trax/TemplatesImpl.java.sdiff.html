<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.xml/share/classes/com/sun/org/apache/xalan/internal/xsltc/trax/TemplatesImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../../../../java.security.jgss/share/classes/sun/security/jgss/wrapper/NativeGSSContext.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../xerces/internal/jaxp/datatype/DurationImpl.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/xalan/internal/xsltc/trax/TemplatesImpl.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2007, 2017, Oracle and/or its affiliates. All rights reserved.</span>
  3  */
  4 /*
  5  * Licensed to the Apache Software Foundation (ASF) under one or more
  6  * contributor license agreements.  See the NOTICE file distributed with
  7  * this work for additional information regarding copyright ownership.
  8  * The ASF licenses this file to You under the Apache License, Version 2.0
  9  * (the &quot;License&quot;); you may not use this file except in compliance with
 10  * the License.  You may obtain a copy of the License at
 11  *
 12  *      http://www.apache.org/licenses/LICENSE-2.0
 13  *
 14  * Unless required by applicable law or agreed to in writing, software
 15  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 16  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 17  * See the License for the specific language governing permissions and
 18  * limitations under the License.
 19  */
 20 /*
 21  * $Id: TemplatesImpl.java,v 1.8 2007/03/26 20:12:27 spericas Exp $
 22  */
</pre>
<hr />
<pre>
 51 import java.security.ProtectionDomain;
 52 import java.util.Arrays;
 53 import java.util.HashMap;
 54 import java.util.Map;
 55 import java.util.Optional;
 56 import java.util.Properties;
 57 import java.util.Set;
 58 import javax.xml.XMLConstants;
 59 import javax.xml.transform.Templates;
 60 import javax.xml.transform.Transformer;
 61 import javax.xml.transform.TransformerConfigurationException;
 62 import javax.xml.transform.URIResolver;
 63 import jdk.xml.internal.SecuritySupport;
 64 
 65 
 66 /**
 67  * @author Morten Jorgensen
 68  * @author G. Todd Millerj
 69  * @author Jochen Cordes &lt;Jochen.Cordes@t-online.de&gt;
 70  * @author Santiago Pericas-Geertsen
<span class="line-modified"> 71  * @LastModified: Nov 2017</span>
 72  */
 73 public final class TemplatesImpl implements Templates, Serializable {
 74     static final long serialVersionUID = 673094361519270707L;
 75     public final static String DESERIALIZE_TRANSLET = &quot;jdk.xml.enableTemplatesImplDeserialization&quot;;
 76 
 77     /**
 78      * Name of the superclass of all translets. This is needed to
 79      * determine which, among all classes comprising a translet,
 80      * is the main one.
 81      */
 82     private static String ABSTRACT_TRANSLET
 83         = &quot;com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet&quot;;
 84 
 85     /**
 86      * Name of the main class or default name if unknown.
 87      */
 88     private String _name = null;
 89 
 90     /**
 91      * Contains the actual class definition for the translet class and
</pre>
<hr />
<pre>
278         _class = (Class&lt;?&gt;[])gf.get(&quot;_class&quot;, null);
279         _transletIndex = gf.get(&quot;_transletIndex&quot;, -1);
280 
281         _outputProperties = (Properties)gf.get(&quot;_outputProperties&quot;, null);
282         _indentNumber = gf.get(&quot;_indentNumber&quot;, 0);
283 
284         if (is.readBoolean()) {
285             _uriResolver = (URIResolver) is.readObject();
286         }
287 
288         _tfactory = new TransformerFactoryImpl();
289     }
290 
291 
292     /**
293      *  This is to fix bugzilla bug 22438
294      *  If the user defined class implements URIResolver and Serializable
295      *  then we want it to get serialized
296      */
297     private void writeObject(ObjectOutputStream os)
<span class="line-modified">298         throws IOException, ClassNotFoundException {</span>
299         if (_auxClasses != null) {
300             //throw with the same message as when Hashtable was used for compatibility.
301             throw new NotSerializableException(
302                     &quot;com.sun.org.apache.xalan.internal.xsltc.runtime.Hashtable&quot;);
303         }
304 
305         // Write serialized fields
306         ObjectOutputStream.PutField pf = os.putFields();
307         pf.put(&quot;_name&quot;, _name);
308         pf.put(&quot;_bytecodes&quot;, _bytecodes);
309         pf.put(&quot;_class&quot;, _class);
310         pf.put(&quot;_transletIndex&quot;, _transletIndex);
311         pf.put(&quot;_outputProperties&quot;, _outputProperties);
312         pf.put(&quot;_indentNumber&quot;, _indentNumber);
313         os.writeFields();
314 
315         if (_uriResolver instanceof Serializable) {
316             os.writeBoolean(true);
317             os.writeObject((Serializable) _uriResolver);
318         }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2007, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  */
  4 /*
  5  * Licensed to the Apache Software Foundation (ASF) under one or more
  6  * contributor license agreements.  See the NOTICE file distributed with
  7  * this work for additional information regarding copyright ownership.
  8  * The ASF licenses this file to You under the Apache License, Version 2.0
  9  * (the &quot;License&quot;); you may not use this file except in compliance with
 10  * the License.  You may obtain a copy of the License at
 11  *
 12  *      http://www.apache.org/licenses/LICENSE-2.0
 13  *
 14  * Unless required by applicable law or agreed to in writing, software
 15  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 16  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 17  * See the License for the specific language governing permissions and
 18  * limitations under the License.
 19  */
 20 /*
 21  * $Id: TemplatesImpl.java,v 1.8 2007/03/26 20:12:27 spericas Exp $
 22  */
</pre>
<hr />
<pre>
 51 import java.security.ProtectionDomain;
 52 import java.util.Arrays;
 53 import java.util.HashMap;
 54 import java.util.Map;
 55 import java.util.Optional;
 56 import java.util.Properties;
 57 import java.util.Set;
 58 import javax.xml.XMLConstants;
 59 import javax.xml.transform.Templates;
 60 import javax.xml.transform.Transformer;
 61 import javax.xml.transform.TransformerConfigurationException;
 62 import javax.xml.transform.URIResolver;
 63 import jdk.xml.internal.SecuritySupport;
 64 
 65 
 66 /**
 67  * @author Morten Jorgensen
 68  * @author G. Todd Millerj
 69  * @author Jochen Cordes &lt;Jochen.Cordes@t-online.de&gt;
 70  * @author Santiago Pericas-Geertsen
<span class="line-modified"> 71  * @LastModified: May 2020</span>
 72  */
 73 public final class TemplatesImpl implements Templates, Serializable {
 74     static final long serialVersionUID = 673094361519270707L;
 75     public final static String DESERIALIZE_TRANSLET = &quot;jdk.xml.enableTemplatesImplDeserialization&quot;;
 76 
 77     /**
 78      * Name of the superclass of all translets. This is needed to
 79      * determine which, among all classes comprising a translet,
 80      * is the main one.
 81      */
 82     private static String ABSTRACT_TRANSLET
 83         = &quot;com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet&quot;;
 84 
 85     /**
 86      * Name of the main class or default name if unknown.
 87      */
 88     private String _name = null;
 89 
 90     /**
 91      * Contains the actual class definition for the translet class and
</pre>
<hr />
<pre>
278         _class = (Class&lt;?&gt;[])gf.get(&quot;_class&quot;, null);
279         _transletIndex = gf.get(&quot;_transletIndex&quot;, -1);
280 
281         _outputProperties = (Properties)gf.get(&quot;_outputProperties&quot;, null);
282         _indentNumber = gf.get(&quot;_indentNumber&quot;, 0);
283 
284         if (is.readBoolean()) {
285             _uriResolver = (URIResolver) is.readObject();
286         }
287 
288         _tfactory = new TransformerFactoryImpl();
289     }
290 
291 
292     /**
293      *  This is to fix bugzilla bug 22438
294      *  If the user defined class implements URIResolver and Serializable
295      *  then we want it to get serialized
296      */
297     private void writeObject(ObjectOutputStream os)
<span class="line-modified">298         throws IOException {</span>
299         if (_auxClasses != null) {
300             //throw with the same message as when Hashtable was used for compatibility.
301             throw new NotSerializableException(
302                     &quot;com.sun.org.apache.xalan.internal.xsltc.runtime.Hashtable&quot;);
303         }
304 
305         // Write serialized fields
306         ObjectOutputStream.PutField pf = os.putFields();
307         pf.put(&quot;_name&quot;, _name);
308         pf.put(&quot;_bytecodes&quot;, _bytecodes);
309         pf.put(&quot;_class&quot;, _class);
310         pf.put(&quot;_transletIndex&quot;, _transletIndex);
311         pf.put(&quot;_outputProperties&quot;, _outputProperties);
312         pf.put(&quot;_indentNumber&quot;, _indentNumber);
313         os.writeFields();
314 
315         if (_uriResolver instanceof Serializable) {
316             os.writeBoolean(true);
317             os.writeObject((Serializable) _uriResolver);
318         }
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../../../../../java.security.jgss/share/classes/sun/security/jgss/wrapper/NativeGSSContext.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../xerces/internal/jaxp/datatype/DurationImpl.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>