<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.xml/share/classes/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../xerces/internal/jaxp/datatype/DurationImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="PredicatedNodeTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2017, Oracle and/or its affiliates. All rights reserved.</span>
   3  */
   4 /*
   5  * Licensed to the Apache Software Foundation (ASF) under one or more
   6  * contributor license agreements.  See the NOTICE file distributed with
   7  * this work for additional information regarding copyright ownership.
   8  * The ASF licenses this file to You under the Apache License, Version 2.0
   9  * (the &quot;License&quot;); you may not use this file except in compliance with
  10  * the License.  You may obtain a copy of the License at
  11  *
  12  *      http://www.apache.org/licenses/LICENSE-2.0
  13  *
  14  * Unless required by applicable law or agreed to in writing, software
  15  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  16  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  17  * See the License for the specific language governing permissions and
  18  * limitations under the License.
  19  */
  20 
  21 package com.sun.org.apache.xpath.internal.axes;
  22 
</pre>
<hr />
<pre>
  28 import com.sun.org.apache.xml.internal.utils.PrefixResolver;
  29 import com.sun.org.apache.xpath.internal.ExpressionOwner;
  30 import com.sun.org.apache.xpath.internal.XPathContext;
  31 import com.sun.org.apache.xpath.internal.XPathVisitor;
  32 import com.sun.org.apache.xpath.internal.compiler.Compiler;
  33 import com.sun.org.apache.xpath.internal.objects.XNodeSet;
  34 import com.sun.org.apache.xpath.internal.objects.XObject;
  35 import com.sun.org.apache.xpath.internal.res.XPATHErrorResources;
  36 
  37 /**
  38  * This class extends NodeSetDTM, which implements NodeIterator,
  39  * and fetches nodes one at a time in document order based on a XPath
  40  * &lt;a href=&quot;http://www.w3.org/TR/xpath#NT-LocationPath&gt;LocationPath&lt;/a&gt;.
  41  *
  42  * &lt;p&gt;If setShouldCacheNodes(true) is called,
  43  * as each node is iterated via nextNode(), the node is also stored
  44  * in the NodeVector, so that previousNode() can easily be done, except in
  45  * the case where the LocPathIterator is &quot;owned&quot; by a UnionPathIterator,
  46  * in which case the UnionPathIterator will cache the nodes.&lt;/p&gt;
  47  * @xsl.usage advanced
<span class="line-modified">  48  * @LastModified: Nov 2017</span>
  49  */
  50 public abstract class LocPathIterator extends PredicatedNodeTest
  51         implements Cloneable, DTMIterator, java.io.Serializable, PathComponent
  52 {
  53     static final long serialVersionUID = -4602476357268405754L;
  54 
  55   /**
  56    * Create a LocPathIterator object.
  57    *
  58    */
  59   protected LocPathIterator()
  60   {
  61   }
  62 
  63 
  64   /**
  65    * Create a LocPathIterator object.
  66    *
  67    * @param nscontext The namespace context for this iterator,
  68    * should be OK if null.
</pre>
<hr />
<pre>
 113   {
 114     setLocPathIterator(this);
 115   }
 116 
 117   /**
 118    * Get the analysis bits for this walker, as defined in the WalkerFactory.
 119    * @return One of WalkerFactory#BIT_DESCENDANT, etc.
 120    */
 121   public int getAnalysisBits()
 122   {
 123         int axis = getAxis();
 124         int bit = WalkerFactory.getAnalysisBitFromAxes(axis);
 125         return bit;
 126   }
 127 
 128   /**
 129    * Read the object from a serialization stream.
 130    *
 131    * @param stream Input stream to read from
 132    *
<span class="line-modified"> 133    * @throws java.io.IOException</span>
<span class="line-modified"> 134    * @throws javax.xml.transform.TransformerException</span>
 135    */
 136   private void readObject(java.io.ObjectInputStream stream)
<span class="line-modified"> 137           throws java.io.IOException, javax.xml.transform.TransformerException</span>
 138   {
<span class="line-modified"> 139     try</span>
<span class="line-modified"> 140     {</span>
<span class="line-removed"> 141       stream.defaultReadObject();</span>
<span class="line-removed"> 142       m_clones =  new IteratorPool(this);</span>
<span class="line-removed"> 143     }</span>
<span class="line-removed"> 144     catch (ClassNotFoundException cnfe)</span>
<span class="line-removed"> 145     {</span>
<span class="line-removed"> 146       throw new javax.xml.transform.TransformerException(cnfe);</span>
<span class="line-removed"> 147     }</span>
 148   }
 149 
 150   /**
 151    * Set the environment in which this iterator operates, which should provide:
 152    * a node (the context node... same value as &quot;root&quot; defined below)
 153    * a pair of non-zero positive integers (the context position and the context size)
 154    * a set of variable bindings
 155    * a function library
 156    * the set of namespace declarations in scope for the expression.
 157    *
 158    * &lt;p&gt;At this time the exact implementation of this environment is application
 159    * dependent.  Probably a proper interface will be created fairly soon.&lt;/p&gt;
 160    *
 161    * @param environment The environment object.
 162    */
 163   public void setEnvironment(Object environment)
 164   {
 165     // no-op for now.
 166   }
 167 
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2017, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  */
   4 /*
   5  * Licensed to the Apache Software Foundation (ASF) under one or more
   6  * contributor license agreements.  See the NOTICE file distributed with
   7  * this work for additional information regarding copyright ownership.
   8  * The ASF licenses this file to You under the Apache License, Version 2.0
   9  * (the &quot;License&quot;); you may not use this file except in compliance with
  10  * the License.  You may obtain a copy of the License at
  11  *
  12  *      http://www.apache.org/licenses/LICENSE-2.0
  13  *
  14  * Unless required by applicable law or agreed to in writing, software
  15  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  16  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  17  * See the License for the specific language governing permissions and
  18  * limitations under the License.
  19  */
  20 
  21 package com.sun.org.apache.xpath.internal.axes;
  22 
</pre>
<hr />
<pre>
  28 import com.sun.org.apache.xml.internal.utils.PrefixResolver;
  29 import com.sun.org.apache.xpath.internal.ExpressionOwner;
  30 import com.sun.org.apache.xpath.internal.XPathContext;
  31 import com.sun.org.apache.xpath.internal.XPathVisitor;
  32 import com.sun.org.apache.xpath.internal.compiler.Compiler;
  33 import com.sun.org.apache.xpath.internal.objects.XNodeSet;
  34 import com.sun.org.apache.xpath.internal.objects.XObject;
  35 import com.sun.org.apache.xpath.internal.res.XPATHErrorResources;
  36 
  37 /**
  38  * This class extends NodeSetDTM, which implements NodeIterator,
  39  * and fetches nodes one at a time in document order based on a XPath
  40  * &lt;a href=&quot;http://www.w3.org/TR/xpath#NT-LocationPath&gt;LocationPath&lt;/a&gt;.
  41  *
  42  * &lt;p&gt;If setShouldCacheNodes(true) is called,
  43  * as each node is iterated via nextNode(), the node is also stored
  44  * in the NodeVector, so that previousNode() can easily be done, except in
  45  * the case where the LocPathIterator is &quot;owned&quot; by a UnionPathIterator,
  46  * in which case the UnionPathIterator will cache the nodes.&lt;/p&gt;
  47  * @xsl.usage advanced
<span class="line-modified">  48  * @LastModified: May 2020</span>
  49  */
  50 public abstract class LocPathIterator extends PredicatedNodeTest
  51         implements Cloneable, DTMIterator, java.io.Serializable, PathComponent
  52 {
  53     static final long serialVersionUID = -4602476357268405754L;
  54 
  55   /**
  56    * Create a LocPathIterator object.
  57    *
  58    */
  59   protected LocPathIterator()
  60   {
  61   }
  62 
  63 
  64   /**
  65    * Create a LocPathIterator object.
  66    *
  67    * @param nscontext The namespace context for this iterator,
  68    * should be OK if null.
</pre>
<hr />
<pre>
 113   {
 114     setLocPathIterator(this);
 115   }
 116 
 117   /**
 118    * Get the analysis bits for this walker, as defined in the WalkerFactory.
 119    * @return One of WalkerFactory#BIT_DESCENDANT, etc.
 120    */
 121   public int getAnalysisBits()
 122   {
 123         int axis = getAxis();
 124         int bit = WalkerFactory.getAnalysisBitFromAxes(axis);
 125         return bit;
 126   }
 127 
 128   /**
 129    * Read the object from a serialization stream.
 130    *
 131    * @param stream Input stream to read from
 132    *
<span class="line-modified"> 133    * @throws java.io.IOException in case of any IO related exceptions</span>
<span class="line-modified"> 134    * @throws ClassNotFoundException if Class of the serialized object cannot be found</span>
 135    */
 136   private void readObject(java.io.ObjectInputStream stream)
<span class="line-modified"> 137           throws java.io.IOException, ClassNotFoundException</span>
 138   {
<span class="line-modified"> 139     stream.defaultReadObject();</span>
<span class="line-modified"> 140     m_clones =  new IteratorPool(this);</span>







 141   }
 142 
 143   /**
 144    * Set the environment in which this iterator operates, which should provide:
 145    * a node (the context node... same value as &quot;root&quot; defined below)
 146    * a pair of non-zero positive integers (the context position and the context size)
 147    * a set of variable bindings
 148    * a function library
 149    * the set of namespace declarations in scope for the expression.
 150    *
 151    * &lt;p&gt;At this time the exact implementation of this environment is application
 152    * dependent.  Probably a proper interface will be created fairly soon.&lt;/p&gt;
 153    *
 154    * @param environment The environment object.
 155    */
 156   public void setEnvironment(Object environment)
 157   {
 158     // no-op for now.
 159   }
 160 
</pre>
</td>
</tr>
</table>
<center><a href="../../../xerces/internal/jaxp/datatype/DurationImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="PredicatedNodeTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>