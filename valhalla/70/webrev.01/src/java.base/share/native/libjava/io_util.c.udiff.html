<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.base/share/native/libjava/io_util.c</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="RandomAccessFile.c.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../../unix/classes/sun/nio/ch/InheritedChannel.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/native/libjava/io_util.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1994, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1994, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -37,11 +37,11 @@</span>
  
  jint
  readSingle(JNIEnv *env, jobject this, jfieldID fid) {
      jint nread;
      char ret;
<span class="udiff-line-modified-removed">-     FD fd = GET_FD(this, fid);</span>
<span class="udiff-line-modified-added">+     FD fd = getFD(env, this, fid);</span>
      if (fd == -1) {
          JNU_ThrowIOException(env, &quot;Stream Closed&quot;);
          return -1;
      }
      nread = IO_Read(fd, &amp;ret, 1);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -99,11 +99,11 @@</span>
          }
      } else {
          buf = stackBuf;
      }
  
<span class="udiff-line-modified-removed">-     fd = GET_FD(this, fid);</span>
<span class="udiff-line-modified-added">+     fd = getFD(env, this, fid);</span>
      if (fd == -1) {
          JNU_ThrowIOException(env, &quot;Stream Closed&quot;);
          nread = -1;
      } else {
          nread = IO_Read(fd, buf, len);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -125,11 +125,11 @@</span>
  void
  writeSingle(JNIEnv *env, jobject this, jint byte, jboolean append, jfieldID fid) {
      // Discard the 24 high-order bits of byte. See OutputStream#write(int)
      char c = (char) byte;
      jint n;
<span class="udiff-line-modified-removed">-     FD fd = GET_FD(this, fid);</span>
<span class="udiff-line-modified-added">+     FD fd = getFD(env, this, fid);</span>
      if (fd == -1) {
          JNU_ThrowIOException(env, &quot;Stream Closed&quot;);
          return;
      }
      if (append == JNI_TRUE) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -176,11 +176,11 @@</span>
      (*env)-&gt;GetByteArrayRegion(env, bytes, off, len, (jbyte *)buf);
  
      if (!(*env)-&gt;ExceptionOccurred(env)) {
          off = 0;
          while (len &gt; 0) {
<span class="udiff-line-modified-removed">-             fd = GET_FD(this, fid);</span>
<span class="udiff-line-modified-added">+             fd = getFD(env, this, fid);</span>
              if (fd == -1) {
                  JNU_ThrowIOException(env, &quot;Stream Closed&quot;);
                  break;
              }
              if (append == JNI_TRUE) {
</pre>
<center><a href="RandomAccessFile.c.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../../unix/classes/sun/nio/ch/InheritedChannel.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>