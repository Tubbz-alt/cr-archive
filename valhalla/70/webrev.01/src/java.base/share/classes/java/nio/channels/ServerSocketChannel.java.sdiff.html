<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/nio/channels/ServerSocketChannel.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="DatagramChannel.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="SocketChannel.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/nio/channels/ServerSocketChannel.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package java.nio.channels;
 27 
 28 import java.io.IOException;

 29 import java.net.ServerSocket;
 30 import java.net.SocketOption;
 31 import java.net.SocketAddress;
 32 import java.nio.channels.spi.AbstractSelectableChannel;
 33 import java.nio.channels.spi.SelectorProvider;

 34 
 35 /**
 36  * A selectable channel for stream-oriented listening sockets.
 37  *
 38  * &lt;p&gt; A server-socket channel is created by invoking the {@link #open() open}
 39  * method of this class.  It is not possible to create a channel for an arbitrary,
 40  * pre-existing {@link ServerSocket}. A newly-created server-socket channel is
 41  * open but not yet bound.  An attempt to invoke the {@link #accept() accept}
 42  * method of an unbound server-socket channel will cause a {@link NotYetBoundException}
 43  * to be thrown. A server-socket channel can be bound by invoking one of the
 44  * {@link #bind(java.net.SocketAddress,int) bind} methods defined by this class.
 45  *
 46  * &lt;p&gt; Socket options are configured using the {@link #setOption(SocketOption,Object)
 47  * setOption} method. Server-socket channels support the following options:
 48  * &lt;blockquote&gt;
 49  * &lt;table class=&quot;striped&quot;&gt;
 50  * &lt;caption style=&quot;display:none&quot;&gt;Socket options&lt;/caption&gt;
 51  * &lt;thead&gt;
 52  *   &lt;tr&gt;
 53  *     &lt;th scope=&quot;col&quot;&gt;Option Name&lt;/th&gt;
</pre>
<hr />
<pre>
 96      *
 97      * &lt;p&gt; The new channel is created by invoking the {@link
 98      * java.nio.channels.spi.SelectorProvider#openServerSocketChannel
 99      * openServerSocketChannel} method of the system-wide default {@link
100      * java.nio.channels.spi.SelectorProvider} object.
101      *
102      * &lt;p&gt; The new channel&#39;s socket is initially unbound; it must be bound to a
103      * specific address via one of its socket&#39;s {@link
104      * java.net.ServerSocket#bind(SocketAddress) bind} methods before
105      * connections can be accepted.  &lt;/p&gt;
106      *
107      * @return  A new socket channel
108      *
109      * @throws  IOException
110      *          If an I/O error occurs
111      */
112     public static ServerSocketChannel open() throws IOException {
113         return SelectorProvider.provider().openServerSocketChannel();
114     }
115 




























116     /**
117      * Returns an operation set identifying this channel&#39;s supported
118      * operations.
119      *
120      * &lt;p&gt; Server-socket channels only support the accepting of new
121      * connections, so this method returns {@link SelectionKey#OP_ACCEPT}.
122      * &lt;/p&gt;
123      *
124      * @return  The valid-operation set
125      */
126     public final int validOps() {
127         return SelectionKey.OP_ACCEPT;
128     }
129 
130 
131     // -- ServerSocket-specific operations --
132 
133     /**
134      * Binds the channel&#39;s socket to a local address and configures the socket
135      * to listen for connections.
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package java.nio.channels;
 27 
 28 import java.io.IOException;
<span class="line-added"> 29 import java.net.ProtocolFamily;</span>
 30 import java.net.ServerSocket;
 31 import java.net.SocketOption;
 32 import java.net.SocketAddress;
 33 import java.nio.channels.spi.AbstractSelectableChannel;
 34 import java.nio.channels.spi.SelectorProvider;
<span class="line-added"> 35 import static java.util.Objects.requireNonNull;</span>
 36 
 37 /**
 38  * A selectable channel for stream-oriented listening sockets.
 39  *
 40  * &lt;p&gt; A server-socket channel is created by invoking the {@link #open() open}
 41  * method of this class.  It is not possible to create a channel for an arbitrary,
 42  * pre-existing {@link ServerSocket}. A newly-created server-socket channel is
 43  * open but not yet bound.  An attempt to invoke the {@link #accept() accept}
 44  * method of an unbound server-socket channel will cause a {@link NotYetBoundException}
 45  * to be thrown. A server-socket channel can be bound by invoking one of the
 46  * {@link #bind(java.net.SocketAddress,int) bind} methods defined by this class.
 47  *
 48  * &lt;p&gt; Socket options are configured using the {@link #setOption(SocketOption,Object)
 49  * setOption} method. Server-socket channels support the following options:
 50  * &lt;blockquote&gt;
 51  * &lt;table class=&quot;striped&quot;&gt;
 52  * &lt;caption style=&quot;display:none&quot;&gt;Socket options&lt;/caption&gt;
 53  * &lt;thead&gt;
 54  *   &lt;tr&gt;
 55  *     &lt;th scope=&quot;col&quot;&gt;Option Name&lt;/th&gt;
</pre>
<hr />
<pre>
 98      *
 99      * &lt;p&gt; The new channel is created by invoking the {@link
100      * java.nio.channels.spi.SelectorProvider#openServerSocketChannel
101      * openServerSocketChannel} method of the system-wide default {@link
102      * java.nio.channels.spi.SelectorProvider} object.
103      *
104      * &lt;p&gt; The new channel&#39;s socket is initially unbound; it must be bound to a
105      * specific address via one of its socket&#39;s {@link
106      * java.net.ServerSocket#bind(SocketAddress) bind} methods before
107      * connections can be accepted.  &lt;/p&gt;
108      *
109      * @return  A new socket channel
110      *
111      * @throws  IOException
112      *          If an I/O error occurs
113      */
114     public static ServerSocketChannel open() throws IOException {
115         return SelectorProvider.provider().openServerSocketChannel();
116     }
117 
<span class="line-added">118     /**</span>
<span class="line-added">119      * Opens a server-socket channel.The {@code family} parameter specifies the</span>
<span class="line-added">120      * {@link ProtocolFamily protocol family} of the channel&#39;s socket.</span>
<span class="line-added">121      *</span>
<span class="line-added">122      * &lt;p&gt; The new channel is created by invoking the {@link</span>
<span class="line-added">123      * java.nio.channels.spi.SelectorProvider#openServerSocketChannel(ProtocolFamily)</span>
<span class="line-added">124      * openServerSocketChannel(ProtocolFamily)} method of the system-wide default {@link</span>
<span class="line-added">125      * java.nio.channels.spi.SelectorProvider} object. &lt;/p&gt;</span>
<span class="line-added">126      *</span>
<span class="line-added">127      * @param   family</span>
<span class="line-added">128      *          The protocol family</span>
<span class="line-added">129      *</span>
<span class="line-added">130      * @return  A new socket channel</span>
<span class="line-added">131      *</span>
<span class="line-added">132      * @throws  UnsupportedOperationException</span>
<span class="line-added">133      *          If the specified protocol family is not supported. For example,</span>
<span class="line-added">134      *          suppose the parameter is specified as {@link</span>
<span class="line-added">135      *          java.net.StandardProtocolFamily#INET6 StandardProtocolFamily.INET6}</span>
<span class="line-added">136      *          but IPv6 is not enabled on the platform.</span>
<span class="line-added">137      * @throws  IOException</span>
<span class="line-added">138      *          If an I/O error occurs</span>
<span class="line-added">139      *</span>
<span class="line-added">140      * @since 15</span>
<span class="line-added">141      */</span>
<span class="line-added">142     public static ServerSocketChannel open(ProtocolFamily family) throws IOException {</span>
<span class="line-added">143         return SelectorProvider.provider().openServerSocketChannel(requireNonNull(family));</span>
<span class="line-added">144     }</span>
<span class="line-added">145 </span>
146     /**
147      * Returns an operation set identifying this channel&#39;s supported
148      * operations.
149      *
150      * &lt;p&gt; Server-socket channels only support the accepting of new
151      * connections, so this method returns {@link SelectionKey#OP_ACCEPT}.
152      * &lt;/p&gt;
153      *
154      * @return  The valid-operation set
155      */
156     public final int validOps() {
157         return SelectionKey.OP_ACCEPT;
158     }
159 
160 
161     // -- ServerSocket-specific operations --
162 
163     /**
164      * Binds the channel&#39;s socket to a local address and configures the socket
165      * to listen for connections.
</pre>
</td>
</tr>
</table>
<center><a href="DatagramChannel.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="SocketChannel.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>