<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/jdk/internal/icu/util/CodePointMap.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../impl/UCharacterProperty.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CodePointTrie.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/jdk/internal/icu/util/CodePointMap.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 34,29 ***</span>
  
  /**
   * Abstract map from Unicode code points (U+0000..U+10FFFF) to integer values.
   * This does not implement java.util.Map.
   *
<span class="line-modified">!  * @draft ICU 63</span>
<span class="line-removed">-  * @provisional This API might change or be removed in a future release.</span>
   */
  public abstract class CodePointMap implements Iterable&lt;CodePointMap.Range&gt; {
      /**
       * Selectors for how getRange() should report value ranges overlapping with surrogates.
       * Most users should use NORMAL.
       *
       * @see #getRange
<span class="line-modified">!      * @draft ICU 63</span>
<span class="line-removed">-      * @provisional This API might change or be removed in a future release.</span>
       */
      public enum RangeOption {
          /**
           * getRange() enumerates all same-value ranges as stored in the map.
           * Most users should use this option.
           *
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          NORMAL,
          /**
           * getRange() enumerates all same-value ranges as stored in the map,
           * except that lead surrogates (U+D800..U+DBFF) are treated as having the
<span class="line-new-header">--- 34,26 ---</span>
  
  /**
   * Abstract map from Unicode code points (U+0000..U+10FFFF) to integer values.
   * This does not implement java.util.Map.
   *
<span class="line-modified">!  * @stable ICU 63</span>
   */
  public abstract class CodePointMap implements Iterable&lt;CodePointMap.Range&gt; {
      /**
       * Selectors for how getRange() should report value ranges overlapping with surrogates.
       * Most users should use NORMAL.
       *
       * @see #getRange
<span class="line-modified">!      * @stable ICU 63</span>
       */
      public enum RangeOption {
          /**
           * getRange() enumerates all same-value ranges as stored in the map.
           * Most users should use this option.
           *
<span class="line-modified">!          * @stable ICU 63</span>
           */
          NORMAL,
          /**
           * getRange() enumerates all same-value ranges as stored in the map,
           * except that lead surrogates (U+D800..U+DBFF) are treated as having the
</pre>
<hr />
<pre>
<span class="line-old-header">*** 69,12 ***</span>
           * &lt;p&gt;This option is useful for maps that map surrogate code *units* to
           * special values optimized for UTF-16 string processing
           * or for special error behavior for unpaired surrogates,
           * but those values are not to be associated with the lead surrogate code *points*.
           *
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          FIXED_LEAD_SURROGATES,
          /**
           * getRange() enumerates all same-value ranges as stored in the map,
           * except that all surrogates (U+D800..U+DFFF) are treated as having the
<span class="line-new-header">--- 66,11 ---</span>
           * &lt;p&gt;This option is useful for maps that map surrogate code *units* to
           * special values optimized for UTF-16 string processing
           * or for special error behavior for unpaired surrogates,
           * but those values are not to be associated with the lead surrogate code *points*.
           *
<span class="line-modified">!          * @stable ICU 63</span>
           */
          FIXED_LEAD_SURROGATES,
          /**
           * getRange() enumerates all same-value ranges as stored in the map,
           * except that all surrogates (U+D800..U+DFFF) are treated as having the
</pre>
<hr />
<pre>
<span class="line-old-header">*** 87,12 ***</span>
           * &lt;p&gt;This option is useful for maps that map surrogate code *units* to
           * special values optimized for UTF-16 string processing
           * or for special error behavior for unpaired surrogates,
           * but those values are not to be associated with the lead surrogate code *points*.
           *
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          FIXED_ALL_SURROGATES
      }
  
      /**
<span class="line-new-header">--- 83,11 ---</span>
           * &lt;p&gt;This option is useful for maps that map surrogate code *units* to
           * special values optimized for UTF-16 string processing
           * or for special error behavior for unpaired surrogates,
           * but those values are not to be associated with the lead surrogate code *points*.
           *
<span class="line-modified">!          * @stable ICU 63</span>
           */
          FIXED_ALL_SURROGATES
      }
  
      /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 104,21 ***</span>
       * make a filter for one of several values,
       * return a value index computed from the map value, etc.
       *
       * @see #getRange
       * @see #iterator
<span class="line-modified">!      * @draft ICU 63</span>
<span class="line-removed">-      * @provisional This API might change or be removed in a future release.</span>
       */
      public interface ValueFilter {
          /**
           * Modifies the map value.
           *
           * @param value map value
           * @return modified value
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          public int apply(int value);
      }
  
      /**
<span class="line-new-header">--- 99,19 ---</span>
       * make a filter for one of several values,
       * return a value index computed from the map value, etc.
       *
       * @see #getRange
       * @see #iterator
<span class="line-modified">!      * @stable ICU 63</span>
       */
      public interface ValueFilter {
          /**
           * Modifies the map value.
           *
           * @param value map value
           * @return modified value
<span class="line-modified">!          * @stable ICU 63</span>
           */
          public int apply(int value);
      }
  
      /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 127,56 ***</span>
       * The value may have been modified by {@link ValueFilter#apply(int)},
       * or it may be the surrogateValue if a RangeOption other than &quot;normal&quot; was used.
       *
       * @see #getRange
       * @see #iterator
<span class="line-modified">!      * @draft ICU 63</span>
<span class="line-removed">-      * @provisional This API might change or be removed in a future release.</span>
       */
      public static final class Range {
          private int start;
          private int end;
          private int value;
  
          /**
           * Constructor. Sets start and end to -1 and value to 0.
           *
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          public Range() {
              start = end = -1;
              value = 0;
          }
  
          /**
           * @return the start code point
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          public int getStart() { return start; }
          /**
           * @return the (inclusive) end code point
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          public int getEnd() { return end; }
          /**
           * @return the range value
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          public int getValue() { return value; }
          /**
           * Sets the range. When using {@link #iterator()},
           * iteration will resume after the newly set end.
           *
           * @param start new start code point
           * @param end new end code point
           * @param value new value
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          public void set(int start, int end, int value) {
              this.start = start;
              this.end = end;
              this.value = value;
<span class="line-new-header">--- 120,50 ---</span>
       * The value may have been modified by {@link ValueFilter#apply(int)},
       * or it may be the surrogateValue if a RangeOption other than &quot;normal&quot; was used.
       *
       * @see #getRange
       * @see #iterator
<span class="line-modified">!      * @stable ICU 63</span>
       */
      public static final class Range {
          private int start;
          private int end;
          private int value;
  
          /**
           * Constructor. Sets start and end to -1 and value to 0.
           *
<span class="line-modified">!          * @stable ICU 63</span>
           */
          public Range() {
              start = end = -1;
              value = 0;
          }
  
          /**
           * @return the start code point
<span class="line-modified">!          * @stable ICU 63</span>
           */
          public int getStart() { return start; }
          /**
           * @return the (inclusive) end code point
<span class="line-modified">!          * @stable ICU 63</span>
           */
          public int getEnd() { return end; }
          /**
           * @return the range value
<span class="line-modified">!          * @stable ICU 63</span>
           */
          public int getValue() { return value; }
          /**
           * Sets the range. When using {@link #iterator()},
           * iteration will resume after the newly set end.
           *
           * @param start new start code point
           * @param end new end code point
           * @param value new value
<span class="line-modified">!          * @stable ICU 63</span>
           */
          public void set(int start, int end, int value) {
              this.start = start;
              this.end = end;
              this.value = value;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 221,12 ***</span>
       * }
       * &lt;/pre&gt;
       *
       * &lt;p&gt;This class is not intended for public subclassing.
       *
<span class="line-modified">!      * @draft ICU 63</span>
<span class="line-removed">-      * @provisional This API might change or be removed in a future release.</span>
       */
      public class StringIterator {
          /**
           * @internal
           * @deprecated This API is ICU internal only.
<span class="line-new-header">--- 208,11 ---</span>
       * }
       * &lt;/pre&gt;
       *
       * &lt;p&gt;This class is not intended for public subclassing.
       *
<span class="line-modified">!      * @stable ICU 63</span>
       */
      public class StringIterator {
          /**
           * @internal
           * @deprecated This API is ICU internal only.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 267,12 ***</span>
          /**
           * Resets the iterator to a new string and/or a new string index.
           *
           * @param s string to iterate over
           * @param sIndex string index where the iteration will start
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          public void reset(CharSequence s, int sIndex) {
              this.s = s;
              this.sIndex = sIndex;
              c = -1;
<span class="line-new-header">--- 253,11 ---</span>
          /**
           * Resets the iterator to a new string and/or a new string index.
           *
           * @param s string to iterate over
           * @param sIndex string index where the iteration will start
<span class="line-modified">!          * @stable ICU 63</span>
           */
          public void reset(CharSequence s, int sIndex) {
              this.s = s;
              this.sIndex = sIndex;
              c = -1;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 284,12 ***</span>
           * and gets a value from the map.
           * Sets an implementation-defined error value if the code point is an unpaired surrogate.
           *
           * @return true if the string index was not yet at the end of the string;
           *         otherwise the iterator did not advance
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          public boolean next() {
              if (sIndex &gt;= s.length()) {
                  return false;
              }
<span class="line-new-header">--- 269,11 ---</span>
           * and gets a value from the map.
           * Sets an implementation-defined error value if the code point is an unpaired surrogate.
           *
           * @return true if the string index was not yet at the end of the string;
           *         otherwise the iterator did not advance
<span class="line-modified">!          * @stable ICU 63</span>
           */
          public boolean next() {
              if (sIndex &gt;= s.length()) {
                  return false;
              }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 304,12 ***</span>
           * and gets a value from the map.
           * Sets an implementation-defined error value if the code point is an unpaired surrogate.
           *
           * @return true if the string index was not yet at the start of the string;
           *         otherwise the iterator did not advance
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          public boolean previous() {
              if (sIndex &lt;= 0) {
                  return false;
              }
<span class="line-new-header">--- 288,11 ---</span>
           * and gets a value from the map.
           * Sets an implementation-defined error value if the code point is an unpaired surrogate.
           *
           * @return true if the string index was not yet at the start of the string;
           *         otherwise the iterator did not advance
<span class="line-modified">!          * @stable ICU 63</span>
           */
          public boolean previous() {
              if (sIndex &lt;= 0) {
                  return false;
              }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 318,35 ***</span>
              value = get(c);
              return true;
          }
          /**
           * @return the string index
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          public final int getIndex() { return sIndex; }
          /**
           * @return the code point
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          public final int getCodePoint() { return c; }
          /**
           * @return the map value,
           *         or an implementation-defined error value if
           *         the code point is an unpaired surrogate
<span class="line-modified">!          * @draft ICU 63</span>
<span class="line-removed">-          * @provisional This API might change or be removed in a future release.</span>
           */
          public final int getValue() { return value; }
      }
  
      /**
       * Protected no-args constructor.
       *
<span class="line-modified">!      * @draft ICU 63</span>
<span class="line-removed">-      * @provisional This API might change or be removed in a future release.</span>
       */
      protected CodePointMap() {
      }
  
      /**
<span class="line-new-header">--- 301,31 ---</span>
              value = get(c);
              return true;
          }
          /**
           * @return the string index
<span class="line-modified">!          * @stable ICU 63</span>
           */
          public final int getIndex() { return sIndex; }
          /**
           * @return the code point
<span class="line-modified">!          * @stable ICU 63</span>
           */
          public final int getCodePoint() { return c; }
          /**
           * @return the map value,
           *         or an implementation-defined error value if
           *         the code point is an unpaired surrogate
<span class="line-modified">!          * @stable ICU 63</span>
           */
          public final int getValue() { return value; }
      }
  
      /**
       * Protected no-args constructor.
       *
<span class="line-modified">!      * @stable ICU 63</span>
       */
      protected CodePointMap() {
      }
  
      /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 355,12 ***</span>
       *
       * @param c the code point
       * @return the map value,
       *         or an implementation-defined error value if
       *         the code point is not in the range 0..U+10FFFF
<span class="line-modified">!      * @draft ICU 63</span>
<span class="line-removed">-      * @provisional This API might change or be removed in a future release.</span>
       */
      public abstract int get(int c);
  
      /**
       * Sets the range object to a range of code points beginning with the start parameter.
<span class="line-new-header">--- 334,11 ---</span>
       *
       * @param c the code point
       * @return the map value,
       *         or an implementation-defined error value if
       *         the code point is not in the range 0..U+10FFFF
<span class="line-modified">!      * @stable ICU 63</span>
       */
      public abstract int get(int c);
  
      /**
       * Sets the range object to a range of code points beginning with the start parameter.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 393,12 ***</span>
       * @param start range start
       * @param filter an object that may modify the map data value,
       *     or null if the values from the map are to be used unmodified
       * @param range the range object that will be set to the code point range and value
       * @return true if start is 0..U+10FFFF; otherwise no new range is fetched
<span class="line-modified">!      * @draft ICU 63</span>
<span class="line-removed">-      * @provisional This API might change or be removed in a future release.</span>
       */
      public abstract boolean getRange(int start, ValueFilter filter, Range range);
  
      /**
       * Sets the range object to a range of code points beginning with the start parameter.
<span class="line-new-header">--- 371,11 ---</span>
       * @param start range start
       * @param filter an object that may modify the map data value,
       *     or null if the values from the map are to be used unmodified
       * @param range the range object that will be set to the code point range and value
       * @return true if start is 0..U+10FFFF; otherwise no new range is fetched
<span class="line-modified">!      * @stable ICU 63</span>
       */
      public abstract boolean getRange(int start, ValueFilter filter, Range range);
  
      /**
       * Sets the range object to a range of code points beginning with the start parameter.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 417,12 ***</span>
       * @param surrogateValue value for surrogates; ignored if option=={@link RangeOption#NORMAL}
       * @param filter an object that may modify the map data value,
       *     or null if the values from the map are to be used unmodified
       * @param range the range object that will be set to the code point range and value
       * @return true if start is 0..U+10FFFF; otherwise no new range is fetched
<span class="line-modified">!      * @draft ICU 63</span>
<span class="line-removed">-      * @provisional This API might change or be removed in a future release.</span>
       */
      public boolean getRange(int start, RangeOption option, int surrogateValue,
              ValueFilter filter, Range range) {
          assert option != null;
          if (!getRange(start, filter, range)) {
<span class="line-new-header">--- 394,11 ---</span>
       * @param surrogateValue value for surrogates; ignored if option=={@link RangeOption#NORMAL}
       * @param filter an object that may modify the map data value,
       *     or null if the values from the map are to be used unmodified
       * @param range the range object that will be set to the code point range and value
       * @return true if start is 0..U+10FFFF; otherwise no new range is fetched
<span class="line-modified">!      * @stable ICU 63</span>
       */
      public boolean getRange(int start, RangeOption option, int surrogateValue,
              ValueFilter filter, Range range) {
          assert option != null;
          if (!getRange(start, filter, range)) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 475,12 ***</span>
       * Adjacent ranges have different map values.
       *
       * &lt;p&gt;The iterator always returns the same Range object.
       *
       * @return a Range iterator
<span class="line-modified">!      * @draft ICU 63</span>
<span class="line-removed">-      * @provisional This API might change or be removed in a future release.</span>
       */
      @Override
      public Iterator&lt;Range&gt; iterator() {
          return new RangeIterator();
      }
<span class="line-new-header">--- 451,11 ---</span>
       * Adjacent ranges have different map values.
       *
       * &lt;p&gt;The iterator always returns the same Range object.
       *
       * @return a Range iterator
<span class="line-modified">!      * @stable ICU 63</span>
       */
      @Override
      public Iterator&lt;Range&gt; iterator() {
          return new RangeIterator();
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 490,12 ***</span>
       * for fetching map values.
       *
       * @param s string to iterate over
       * @param sIndex string index where the iteration will start
       * @return the iterator
<span class="line-modified">!      * @draft ICU 63</span>
<span class="line-removed">-      * @provisional This API might change or be removed in a future release.</span>
       */
      public StringIterator stringIterator(CharSequence s, int sIndex) {
          return new StringIterator(s, sIndex);
      }
  }
<span class="line-new-header">--- 465,11 ---</span>
       * for fetching map values.
       *
       * @param s string to iterate over
       * @param sIndex string index where the iteration will start
       * @return the iterator
<span class="line-modified">!      * @stable ICU 63</span>
       */
      public StringIterator stringIterator(CharSequence s, int sIndex) {
          return new StringIterator(s, sIndex);
      }
  }
</pre>
<center><a href="../impl/UCharacterProperty.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CodePointTrie.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>