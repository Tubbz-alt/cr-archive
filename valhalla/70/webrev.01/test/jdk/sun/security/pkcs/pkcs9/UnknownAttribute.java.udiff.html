<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/jdk/sun/security/pkcs/pkcs9/UnknownAttribute.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../pkcs10/PKCS10AttributeReader.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../pkcs12/PKCS12SameKeyId.java.udiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/sun/security/pkcs/pkcs9/UnknownAttribute.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -21,11 +21,11 @@</span>
   * questions.
   */
  
  /*
   * @test
<span class="udiff-line-modified-removed">-  * @bug 8011867</span>
<span class="udiff-line-modified-added">+  * @bug 8011867 8242151</span>
   * @summary Accept unknown PKCS #9 attributes
   * @library /test/lib
   * @modules java.base/sun.security.pkcs
   *          java.base/sun.security.util
   */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -41,11 +41,11 @@</span>
  public class UnknownAttribute {
  
      public static void main(String[] args) throws Exception {
          // Unknown attr
          PKCS9Attribute p1 = new PKCS9Attribute(
<span class="udiff-line-modified-removed">-                 PKCS9Attribute.CHALLENGE_PASSWORD_STR, &quot;t0p5ecr3t&quot;);</span>
<span class="udiff-line-modified-added">+                 PKCS9Attribute.CHALLENGE_PASSWORD_OID, &quot;t0p5ecr3t&quot;);</span>
          if (!p1.isKnown()) {
              throw new Exception();
          }
          // Unknown attr from DER
          byte[] data = {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -63,17 +63,17 @@</span>
          if (!Arrays.equals(data, bout.toByteArray())) {
              throw new Exception();
          }
          // Unknown attr from value
          try {
<span class="udiff-line-modified-removed">-             new PKCS9Attribute(new ObjectIdentifier(&quot;1.2.3&quot;), &quot;hello&quot;);</span>
<span class="udiff-line-modified-added">+             new PKCS9Attribute(ObjectIdentifier.of(&quot;1.2.3&quot;), &quot;hello&quot;);</span>
              throw new Exception();
          } catch (IllegalArgumentException iae) {
              // Good. Unknown attr must have byte[] value type
          }
          PKCS9Attribute p3 = new PKCS9Attribute(
<span class="udiff-line-modified-removed">-                 new ObjectIdentifier(&quot;1.2.3&quot;), new byte[]{0x31,0x02,0x05,0x00});</span>
<span class="udiff-line-modified-added">+                 ObjectIdentifier.of(&quot;1.2.3&quot;), new byte[]{0x31,0x02,0x05,0x00});</span>
          if (p3.isKnown()) {
              throw new Exception();
          }
          bout = new ByteArrayOutputStream();
          p3.derEncode(bout);
</pre>
<center><a href="../pkcs10/PKCS10AttributeReader.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../pkcs12/PKCS12SameKeyId.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>