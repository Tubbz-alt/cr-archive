<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/net/InetAddress/CheckJNI.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../DatagramSocketImpl/TestCreate.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../MulticastSocket/B6427403.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/net/InetAddress/CheckJNI.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 66             System.out.println(&quot;Address:&quot; + ia6);
 67             System.out.println(&quot;Testing IPv6 Socket&quot;);
 68             testSocket(ia6);
 69 
 70             System.out.println(&quot;Testing IPv6 DatagramSocket&quot;);
 71             testDatagram(ia6);
 72         }
 73         System.out.println(&quot;OK&quot;);
 74     }
 75 
 76     static void testSocket(InetAddress ia) throws Exception {
 77         ServerSocket server = new ServerSocket(0, 0, ia);
 78         Socket s = new Socket(ia, server.getLocalPort());
 79         s.close();
 80         server.close();
 81     }
 82 
 83     static void testDatagram(InetAddress ia) throws Exception {
 84         DatagramSocket s1 = new DatagramSocket(0, ia);
 85         DatagramSocket s2 = new DatagramSocket(0, ia);




 86 
 87         DatagramPacket p1 = new DatagramPacket (
 88                 &quot;hello world&quot;.getBytes(),
 89                 0, &quot;hello world&quot;.length(), s2.getLocalAddress(),
 90                 s2.getLocalPort()
 91         );
 92 
 93         DatagramPacket p2 = new DatagramPacket(new byte[128], 128);
 94         s1.send(p1);
 95         s2.receive(p2);
 96         s1.close();
 97         s2.close();
 98     }
 99 }
</pre>
</td>
<td>
<hr />
<pre>
 66             System.out.println(&quot;Address:&quot; + ia6);
 67             System.out.println(&quot;Testing IPv6 Socket&quot;);
 68             testSocket(ia6);
 69 
 70             System.out.println(&quot;Testing IPv6 DatagramSocket&quot;);
 71             testDatagram(ia6);
 72         }
 73         System.out.println(&quot;OK&quot;);
 74     }
 75 
 76     static void testSocket(InetAddress ia) throws Exception {
 77         ServerSocket server = new ServerSocket(0, 0, ia);
 78         Socket s = new Socket(ia, server.getLocalPort());
 79         s.close();
 80         server.close();
 81     }
 82 
 83     static void testDatagram(InetAddress ia) throws Exception {
 84         DatagramSocket s1 = new DatagramSocket(0, ia);
 85         DatagramSocket s2 = new DatagramSocket(0, ia);
<span class="line-added"> 86         System.out.println(&quot;s1: local address=&quot; + s1.getLocalAddress()</span>
<span class="line-added"> 87                             + &quot;, local port=&quot; + s1.getLocalPort());</span>
<span class="line-added"> 88         System.out.println(&quot;s2: local address=&quot; + s2.getLocalAddress()</span>
<span class="line-added"> 89                             + &quot;, local port=&quot; + s2.getLocalPort());</span>
 90 
 91         DatagramPacket p1 = new DatagramPacket (
 92                 &quot;hello world&quot;.getBytes(),
 93                 0, &quot;hello world&quot;.length(), s2.getLocalAddress(),
 94                 s2.getLocalPort()
 95         );
 96 
 97         DatagramPacket p2 = new DatagramPacket(new byte[128], 128);
 98         s1.send(p1);
 99         s2.receive(p2);
100         s1.close();
101         s2.close();
102     }
103 }
</pre>
</td>
</tr>
</table>
<center><a href="../DatagramSocketImpl/TestCreate.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../MulticastSocket/B6427403.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>