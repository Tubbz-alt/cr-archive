<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/net/DatagramSocket/ReuseAddressTest.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="InterruptibleDatagramSocket.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="SendCheck.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/net/DatagramSocket/ReuseAddressTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 19  * or visit www.oracle.com if you need additional information or have any
 20  * questions.
 21  */
 22 
 23 import java.io.IOException;
 24 import java.net.DatagramSocket;
 25 import java.net.InetAddress;
 26 import java.net.InetSocketAddress;
 27 import java.net.MulticastSocket;
 28 import java.net.SocketException;
 29 
 30 /*
 31  * @test
 32  * @bug 8153674
 33  * @key intermittent
 34  * @summary This test might fail intermittently as it needs a UDP socket that
 35  *          binds to the wildcard address.
 36  * @summary Expected SocketException not thrown when calling bind() with
 37  *   setReuseAddress(false)
 38  * @run main/othervm ReuseAddressTest

 39  */
 40 
 41 public class ReuseAddressTest {
 42 
 43     String getInfo(DatagramSocket soc) {
 44         if (soc == null) {
 45             return null;
 46         }
 47 
 48         return &quot;localPort: &quot; + soc.getLocalPort()
 49                 + &quot;; localAddress: &quot; + soc.getLocalAddress()
 50                 + &quot;; remotePort: &quot; + soc.getPort()
 51                 + &quot;; remoteAddress: &quot; + soc.getInetAddress()
 52                 + &quot;; isClosed: &quot; + soc.isClosed()
 53                 + &quot;; isBound: &quot; + soc.isBound();
 54     }
 55 
 56     static InetSocketAddress createSocketAddress(int testMcastPort) throws Exception {
 57         InetAddress localAddress = InetAddress.getLocalHost();
 58         InetSocketAddress localSocketAddress = new InetSocketAddress(localAddress, testMcastPort);
</pre>
</td>
<td>
<hr />
<pre>
 19  * or visit www.oracle.com if you need additional information or have any
 20  * questions.
 21  */
 22 
 23 import java.io.IOException;
 24 import java.net.DatagramSocket;
 25 import java.net.InetAddress;
 26 import java.net.InetSocketAddress;
 27 import java.net.MulticastSocket;
 28 import java.net.SocketException;
 29 
 30 /*
 31  * @test
 32  * @bug 8153674
 33  * @key intermittent
 34  * @summary This test might fail intermittently as it needs a UDP socket that
 35  *          binds to the wildcard address.
 36  * @summary Expected SocketException not thrown when calling bind() with
 37  *   setReuseAddress(false)
 38  * @run main/othervm ReuseAddressTest
<span class="line-added"> 39  * @run main/othervm -Djdk.net.usePlainDatagramSocketImpl ReuseAddressTest</span>
 40  */
 41 
 42 public class ReuseAddressTest {
 43 
 44     String getInfo(DatagramSocket soc) {
 45         if (soc == null) {
 46             return null;
 47         }
 48 
 49         return &quot;localPort: &quot; + soc.getLocalPort()
 50                 + &quot;; localAddress: &quot; + soc.getLocalAddress()
 51                 + &quot;; remotePort: &quot; + soc.getPort()
 52                 + &quot;; remoteAddress: &quot; + soc.getInetAddress()
 53                 + &quot;; isClosed: &quot; + soc.isClosed()
 54                 + &quot;; isBound: &quot; + soc.isBound();
 55     }
 56 
 57     static InetSocketAddress createSocketAddress(int testMcastPort) throws Exception {
 58         InetAddress localAddress = InetAddress.getLocalHost();
 59         InetSocketAddress localSocketAddress = new InetSocketAddress(localAddress, testMcastPort);
</pre>
</td>
</tr>
</table>
<center><a href="InterruptibleDatagramSocket.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="SendCheck.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>