<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/jdk/javax/xml/jaxp/common/8035437/run.sh</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 #!/bin/sh
 2 
 3 ##
 4 # Copyright (c) 2014, Oracle and/or its affiliates. All rights reserved.
 5 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 6 #
 7 # This code is free software; you can redistribute it and/or modify it
 8 # under the terms of the GNU General Public License version 2 only, as
 9 # published by the Free Software Foundation.
10 #
11 # This code is distributed in the hope that it will be useful, but WITHOUT
12 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
13 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
14 # version 2 for more details (a copy is included in the LICENSE file that
15 # accompanied this code).
16 #
17 # You should have received a copy of the GNU General Public License version
18 # 2 along with this work; if not, write to the Free Software Foundation,
19 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
20 #
21 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
22 # or visit www.oracle.com if you need additional information or have any
23 # questions.
24 ##
25 
26 # @test
27 # @bug 8035437
28 # @summary Tests that java.lang.AbstractMethodError is not thrown when
29 #    serializing improper version of DocumentImpl class.
30 
31 OS=`uname -s`
32 case &quot;$OS&quot; in
33   SunOS )
34     PS=&quot;:&quot;
35     ;;
36   Linux )
37     PS=&quot;:&quot;
38     ;;
39   Darwin )
40     PS=&quot;:&quot;
41     ;;
42   AIX )
43     PS=&quot;:&quot;
44     ;;
45   Windows*)
46     PS=&quot;;&quot;
47     ;;
48   CYGWIN*)
49     PS=&quot;;&quot;
50     ;;
51   * )
52     echo &quot;Unrecognized system!&quot;
53     exit 1;
54     ;;
55 esac
56 
57 mkdir -p exec/java.xml compile/java.xml
58 
59 $COMPILEJAVA/bin/javac ${TESTJAVACOPTS} ${TESTTOOLVMOPTS} \
60    -d compile/java.xml --patch-module java.xml=$TESTSRC/patch-src1 \
61    $TESTSRC/patch-src1/org/w3c/dom/Document.java \
62    $TESTSRC/patch-src1/org/w3c/dom/Node.java || exit 1
63 
64 $COMPILEJAVA/bin/javac ${TESTJAVACOPTS} ${TESTTOOLVMOPTS} \
65    -d exec/java.xml --patch-module java.xml=compile/java.xml${PS}$TESTSRC/patch-src2 \
66    $TESTSRC/patch-src2/com/sun/org/apache/xerces/internal/dom/DocumentImpl.java \
67    || exit 2
68 
69 $COMPILEJAVA/bin/javac ${TESTJAVACOPTS} ${TESTTOOLVMOPTS} \
70    $TESTSRC/AbstractMethodErrorTest.java -d exec || exit 3
71 
72 $TESTJAVA/bin/java ${TESTVMOPTS} --patch-module java.xml=exec -cp exec AbstractMethodErrorTest || exit 4
73 
74 exit 0
75 
    </pre>
  </body>
</html>