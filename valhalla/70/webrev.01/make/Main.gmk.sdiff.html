<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/Main.gmk</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="Images.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="MainSupport.gmk.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/Main.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 135 
 136 define DeclareModuleInfoRecipe
 137   $1-gensrc-moduleinfo:
 138 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) \
 139 	    -f common/modules/GensrcModuleInfo.gmk MODULE=$1)
 140 
 141   $1-gensrc: $1-gensrc-moduleinfo
 142 endef
 143 
 144 $(foreach m, $(GENSRC_MODULEINFO_MODULES), $(eval $(call DeclareModuleInfoRecipe,$m)))
 145 
 146 ALL_TARGETS += $(GENSRC_TARGETS)
 147 
 148 ################################################################################
 149 # Generate data targets
 150 $(eval $(call DeclareRecipesForPhase, GENDATA, \
 151     TARGET_SUFFIX := gendata, \
 152     FILE_PREFIX := Gendata, \
 153     MAKE_SUBDIR := gendata, \
 154     CHECK_MODULES := $(ALL_MODULES), \
<span class="line-modified"> 155     USE_WRAPPER := true))</span>
 156 
 157 ALL_TARGETS += $(GENDATA_TARGETS)
 158 
 159 ################################################################################
 160 # Copy files targets
 161 $(eval $(call DeclareRecipesForPhase, COPY, \
 162     TARGET_SUFFIX := copy, \
 163     FILE_PREFIX := Copy, \
 164     MAKE_SUBDIR := copy, \
 165     CHECK_MODULES := $(ALL_MODULES), \
<span class="line-removed"> 166     USE_WRAPPER := true, \</span>
 167 ))
 168 
 169 ALL_COPY_MODULES += $(COPY_MODULES)
 170 ALL_COPY_TARGETS += $(COPY_TARGETS)
 171 
 172 IMPORT_COPY_MODULES := $(call FindImportedModules)
 173 IMPORT_COPY_TARGETS := $(addsuffix -copy, $(IMPORT_COPY_MODULES))
 174 ALL_COPY_MODULES += $(IMPORT_COPY_MODULES)
 175 ALL_COPY_TARGETS += $(IMPORT_COPY_TARGETS)
 176 
 177 define DeclareImportCopyRecipe
 178   $1-copy:
 179 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) \
 180 	    -f CopyImportModules.gmk MODULE=$1)
 181 endef
 182 
 183 $(foreach m, $(IMPORT_COPY_MODULES), $(eval $(call DeclareImportCopyRecipe,$m)))
 184 
 185 ALL_TARGETS += $(ALL_COPY_TARGETS)
 186 
</pre>
<hr />
<pre>
 189 JAVA_MODULES := $(ALL_MODULES)
 190 JAVA_TARGETS := $(addsuffix -java, $(JAVA_MODULES))
 191 
 192 define DeclareCompileJavaRecipe
 193   $1-java:
 194 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) \
 195 	    -f CompileJavaModules.gmk MODULE=$1)
 196 endef
 197 
 198 $(foreach m, $(JAVA_MODULES), $(eval $(call DeclareCompileJavaRecipe,$m)))
 199 
 200 ALL_TARGETS += $(JAVA_TARGETS)
 201 
 202 ################################################################################
 203 # Targets for compiling native libraries
 204 $(eval $(call DeclareRecipesForPhase, LIBS, \
 205     TARGET_SUFFIX := libs, \
 206     FILE_PREFIX := Lib, \
 207     MAKE_SUBDIR := lib, \
 208     CHECK_MODULES := $(ALL_MODULES), \
<span class="line-modified"> 209     USE_WRAPPER := true))</span>
 210 
 211 ALL_TARGETS += $(LIBS_TARGETS)
 212 
 213 ################################################################################
 214 # Targets for compiling static versions of certain native libraries. These do
 215 # not end up in the jmods or the normal JDK image, but are instead bundled into
 216 # a special deliverable.
 217 $(eval $(call DeclareRecipesForPhase, STATIC_LIBS, \
 218     TARGET_SUFFIX := static-libs, \
 219     FILE_PREFIX := Lib, \
 220     MAKE_SUBDIR := lib, \
 221     CHECK_MODULES := $(STATIC_LIBS_MODULES), \
<span class="line-removed"> 222     USE_WRAPPER := true, \</span>
 223     EXTRA_ARGS := STATIC_LIBS=true, \
 224 ))
 225 
 226 ALL_TARGETS += $(STATIC_LIBS_TARGETS)
 227 
 228 ################################################################################
 229 # Targets for compiling native executables
 230 $(eval $(call DeclareRecipesForPhase, LAUNCHER, \
 231     TARGET_SUFFIX := launchers, \
 232     FILE_PREFIX := Launcher, \
 233     MAKE_SUBDIR := launcher, \
 234     CHECK_MODULES := $(ALL_MODULES), \
<span class="line-modified"> 235     USE_WRAPPER := true))</span>
 236 
 237 ALL_TARGETS += $(LAUNCHER_TARGETS)
 238 
 239 ################################################################################
 240 # Build hotspot target
 241 
 242 HOTSPOT_VARIANT_TARGETS := $(addprefix hotspot-, $(JVM_VARIANTS))
 243 HOTSPOT_VARIANT_GENSRC_TARGETS := $(addsuffix -gensrc, $(HOTSPOT_VARIANT_TARGETS))
 244 HOTSPOT_VARIANT_LIBS_TARGETS := $(addsuffix -libs, $(HOTSPOT_VARIANT_TARGETS))
 245 
 246 define DeclareHotspotGensrcRecipe
 247   hotspot-$1-gensrc:
 248 	$$(call LogInfo, Building JVM variant &#39;$1&#39; with features &#39;$(JVM_FEATURES_$1)&#39;)
 249 	+($(CD) $(TOPDIR)/make/hotspot &amp;&amp; $(MAKE) $(MAKE_ARGS) -f gensrc/GenerateSources.gmk \
 250 	    JVM_VARIANT=$1)
 251 endef
 252 
 253 $(foreach v, $(JVM_VARIANTS), $(eval $(call DeclareHotspotGensrcRecipe,$v)))
 254 
 255 define DeclareHotspotLibsRecipe
 256   hotspot-$1-libs:
 257 	+($(CD) $(TOPDIR)/make/hotspot &amp;&amp; $(MAKE) $(MAKE_ARGS) -f lib/CompileLibraries.gmk \
 258 	    JVM_VARIANT=$1)
 259 endef
 260 
 261 $(foreach v, $(JVM_VARIANTS), $(eval $(call DeclareHotspotLibsRecipe,$v)))
 262 
 263 $(eval $(call SetupTarget, hotspot-ide-project, \
<span class="line-modified"> 264     MAKEFILE := ide/CreateVSProject, \</span>
 265     DEPS := hotspot exploded-image, \

 266 ))
 267 
 268 ALL_TARGETS += $(HOTSPOT_VARIANT_TARGETS) $(HOTSPOT_VARIANT_GENSRC_TARGETS) \
 269     $(HOTSPOT_VARIANT_LIBS_TARGETS)
 270 
 271 ################################################################################
 272 # Generate libs and launcher targets for creating compile_commands.json fragments
 273 define DeclareCompileCommandsRecipe
 274   $1-compile-commands:
 275 	$$(call LogInfo, Generating compile_commands.json fragments for $1)
 276 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Main.gmk $1-only \
 277 	    GENERATE_COMPILE_COMMANDS_ONLY=true)
 278 
 279   COMPILE_COMMANDS_TARGETS_$2 += $1-compile-commands
 280 endef
 281 
 282 $(foreach t, $(HOTSPOT_VARIANT_LIBS_TARGETS), \
 283   $(eval $(call DeclareCompileCommandsRecipe,$t,HOTSPOT)) \
 284 )
 285 
 286 $(foreach t, $(LIBS_TARGETS) $(LAUNCHER_TARGETS), \
 287   $(eval $(call DeclareCompileCommandsRecipe,$t,JDK)) \
 288 )
 289 
 290 $(eval $(call SetupTarget, compile-commands, \
 291     MAKEFILE := CompileCommands, \
 292 ))
 293 
 294 $(eval $(call SetupTarget, compile-commands-hotspot, \
 295     MAKEFILE := CompileCommands, \
 296 ))
 297 
 298 ALL_TARGETS += $(COMPILE_COMMANDS_TARGETS_HOTSPOT) $(COMPILE_COMMANDS_TARGETS_JDK)
 299 
 300 ################################################################################
 301 # VS Code projects
 302 
 303 $(eval $(call SetupTarget, vscode-project, \
<span class="line-modified"> 304     MAKEFILE := CreateVSCodeProject, \</span>
 305     ARGS := VSCODE_INDEXER=cpptools, \
 306     DEPS := compile-commands, \
 307 ))
 308 
 309 $(eval $(call SetupTarget, vscode-project-clangd, \
<span class="line-modified"> 310     MAKEFILE := CreateVSCodeProject, \</span>
 311     ARGS := VSCODE_INDEXER=clangd, \
 312     DEPS := compile-commands, \
 313 ))
 314 
 315 $(eval $(call SetupTarget, vscode-project-rtags, \
<span class="line-modified"> 316     MAKEFILE := CreateVSCodeProject, \</span>
 317     ARGS := VSCODE_INDEXER=rtags, \
 318     DEPS := compile-commands, \
 319 ))
 320 
 321 $(eval $(call SetupTarget, vscode-project-ccls, \
<span class="line-modified"> 322     MAKEFILE := CreateVSCodeProject, \</span>
 323     ARGS := VSCODE_INDEXER=ccls, \
 324     DEPS := compile-commands, \
 325 ))
 326 
 327 ################################################################################
 328 # Build demos targets
 329 
 330 # The demos are currently linking to libjvm and libjava, just like all other
 331 # jdk libs, even though they don&#39;t need to. To avoid warnings, make sure they
 332 # aren&#39;t built until after libjava and libjvm are available to link to.
 333 $(eval $(call SetupTarget, demos-jdk, \
 334     MAKEFILE := CompileDemos, \
 335     DEPS := java.base-libs exploded-image, \
 336 ))
 337 
 338 $(eval $(call SetupTarget, test-image-demos-jdk, \
 339     MAKEFILE := CompileDemos, \
 340     TARGET := images, \
 341     DEPS := demos-jdk, \
 342 ))
</pre>
<hr />
<pre>
1084 
1085 # The module summary cannot be run when:
1086 # * Cross compiling and building a partial BUILDJDK for the build host
1087 # * An external buildjdk has been supplied since it may not match the
1088 #   module selection of the target jdk
1089 ifneq ($(CREATE_BUILDJDK), true)
1090   ifeq ($(EXTERNAL_BUILDJDK), false)
1091     product-images: generate-summary
1092   endif
1093 endif
1094 
1095 ifeq ($(call isTargetOs, macosx), true)
1096   product-images: mac-jdk-bundle
1097 
1098   legacy-images: mac-legacy-jre-bundle
1099 endif
1100 
1101 # This target builds the documentation image
1102 docs-image: docs-jdk
1103 
<span class="line-modified">1104 # If not already set, set the JVM specific targets to build the test image</span>
<span class="line-modified">1105 JVM_TEST_IMAGE_TARGETS ?= test-image-hotspot-jtreg-native test-image-hotspot-gtest</span>
1106 
<span class="line-modified">1107 ifeq ($(INCLUDE_GRAAL), true)</span>
<span class="line-modified">1108   JVM_TEST_IMAGE_TARGETS += test-image-hotspot-jtreg-graal</span>
<span class="line-modified">1109 endif</span>






1110 
<span class="line-modified">1111 # This target builds the test image</span>
<span class="line-modified">1112 test-image: prepare-test-image test-image-jdk-jtreg-native \</span>
<span class="line-modified">1113     test-image-demos-jdk $(JVM_TEST_IMAGE_TARGETS)</span>

1114 
1115 ifeq ($(BUILD_FAILURE_HANDLER), true)
1116   test-image: test-image-failure-handler
1117 endif
1118 
1119 ifneq ($(JMH_CORE_JAR), )
1120   test-image: build-microbenchmark
1121 endif
1122 
1123 ################################################################################
1124 
1125 # all-images builds all our deliverables as images.
1126 all-images: product-images test-image docs-image
1127 
1128 # all-bundles packages all our deliverables as tar.gz bundles.
1129 all-bundles: product-bundles test-bundles docs-bundles static-libs-bundles
1130 
1131 ALL_TARGETS += buildtools hotspot hotspot-libs hotspot-gensrc gensrc gendata \
1132     copy java libs static-libs launchers jmods \
1133     jdk.jdwp.agent-gensrc $(ALL_MODULES) demos \
</pre>
</td>
<td>
<hr />
<pre>
 135 
 136 define DeclareModuleInfoRecipe
 137   $1-gensrc-moduleinfo:
 138 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) \
 139 	    -f common/modules/GensrcModuleInfo.gmk MODULE=$1)
 140 
 141   $1-gensrc: $1-gensrc-moduleinfo
 142 endef
 143 
 144 $(foreach m, $(GENSRC_MODULEINFO_MODULES), $(eval $(call DeclareModuleInfoRecipe,$m)))
 145 
 146 ALL_TARGETS += $(GENSRC_TARGETS)
 147 
 148 ################################################################################
 149 # Generate data targets
 150 $(eval $(call DeclareRecipesForPhase, GENDATA, \
 151     TARGET_SUFFIX := gendata, \
 152     FILE_PREFIX := Gendata, \
 153     MAKE_SUBDIR := gendata, \
 154     CHECK_MODULES := $(ALL_MODULES), \
<span class="line-modified"> 155 ))</span>
 156 
 157 ALL_TARGETS += $(GENDATA_TARGETS)
 158 
 159 ################################################################################
 160 # Copy files targets
 161 $(eval $(call DeclareRecipesForPhase, COPY, \
 162     TARGET_SUFFIX := copy, \
 163     FILE_PREFIX := Copy, \
 164     MAKE_SUBDIR := copy, \
 165     CHECK_MODULES := $(ALL_MODULES), \

 166 ))
 167 
 168 ALL_COPY_MODULES += $(COPY_MODULES)
 169 ALL_COPY_TARGETS += $(COPY_TARGETS)
 170 
 171 IMPORT_COPY_MODULES := $(call FindImportedModules)
 172 IMPORT_COPY_TARGETS := $(addsuffix -copy, $(IMPORT_COPY_MODULES))
 173 ALL_COPY_MODULES += $(IMPORT_COPY_MODULES)
 174 ALL_COPY_TARGETS += $(IMPORT_COPY_TARGETS)
 175 
 176 define DeclareImportCopyRecipe
 177   $1-copy:
 178 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) \
 179 	    -f CopyImportModules.gmk MODULE=$1)
 180 endef
 181 
 182 $(foreach m, $(IMPORT_COPY_MODULES), $(eval $(call DeclareImportCopyRecipe,$m)))
 183 
 184 ALL_TARGETS += $(ALL_COPY_TARGETS)
 185 
</pre>
<hr />
<pre>
 188 JAVA_MODULES := $(ALL_MODULES)
 189 JAVA_TARGETS := $(addsuffix -java, $(JAVA_MODULES))
 190 
 191 define DeclareCompileJavaRecipe
 192   $1-java:
 193 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) \
 194 	    -f CompileJavaModules.gmk MODULE=$1)
 195 endef
 196 
 197 $(foreach m, $(JAVA_MODULES), $(eval $(call DeclareCompileJavaRecipe,$m)))
 198 
 199 ALL_TARGETS += $(JAVA_TARGETS)
 200 
 201 ################################################################################
 202 # Targets for compiling native libraries
 203 $(eval $(call DeclareRecipesForPhase, LIBS, \
 204     TARGET_SUFFIX := libs, \
 205     FILE_PREFIX := Lib, \
 206     MAKE_SUBDIR := lib, \
 207     CHECK_MODULES := $(ALL_MODULES), \
<span class="line-modified"> 208 ))</span>
 209 
 210 ALL_TARGETS += $(LIBS_TARGETS)
 211 
 212 ################################################################################
 213 # Targets for compiling static versions of certain native libraries. These do
 214 # not end up in the jmods or the normal JDK image, but are instead bundled into
 215 # a special deliverable.
 216 $(eval $(call DeclareRecipesForPhase, STATIC_LIBS, \
 217     TARGET_SUFFIX := static-libs, \
 218     FILE_PREFIX := Lib, \
 219     MAKE_SUBDIR := lib, \
 220     CHECK_MODULES := $(STATIC_LIBS_MODULES), \

 221     EXTRA_ARGS := STATIC_LIBS=true, \
 222 ))
 223 
 224 ALL_TARGETS += $(STATIC_LIBS_TARGETS)
 225 
 226 ################################################################################
 227 # Targets for compiling native executables
 228 $(eval $(call DeclareRecipesForPhase, LAUNCHER, \
 229     TARGET_SUFFIX := launchers, \
 230     FILE_PREFIX := Launcher, \
 231     MAKE_SUBDIR := launcher, \
 232     CHECK_MODULES := $(ALL_MODULES), \
<span class="line-modified"> 233 ))</span>
 234 
 235 ALL_TARGETS += $(LAUNCHER_TARGETS)
 236 
 237 ################################################################################
 238 # Build hotspot target
 239 
 240 HOTSPOT_VARIANT_TARGETS := $(addprefix hotspot-, $(JVM_VARIANTS))
 241 HOTSPOT_VARIANT_GENSRC_TARGETS := $(addsuffix -gensrc, $(HOTSPOT_VARIANT_TARGETS))
 242 HOTSPOT_VARIANT_LIBS_TARGETS := $(addsuffix -libs, $(HOTSPOT_VARIANT_TARGETS))
 243 
 244 define DeclareHotspotGensrcRecipe
 245   hotspot-$1-gensrc:
 246 	$$(call LogInfo, Building JVM variant &#39;$1&#39; with features &#39;$(JVM_FEATURES_$1)&#39;)
 247 	+($(CD) $(TOPDIR)/make/hotspot &amp;&amp; $(MAKE) $(MAKE_ARGS) -f gensrc/GenerateSources.gmk \
 248 	    JVM_VARIANT=$1)
 249 endef
 250 
 251 $(foreach v, $(JVM_VARIANTS), $(eval $(call DeclareHotspotGensrcRecipe,$v)))
 252 
 253 define DeclareHotspotLibsRecipe
 254   hotspot-$1-libs:
 255 	+($(CD) $(TOPDIR)/make/hotspot &amp;&amp; $(MAKE) $(MAKE_ARGS) -f lib/CompileLibraries.gmk \
 256 	    JVM_VARIANT=$1)
 257 endef
 258 
 259 $(foreach v, $(JVM_VARIANTS), $(eval $(call DeclareHotspotLibsRecipe,$v)))
 260 
 261 $(eval $(call SetupTarget, hotspot-ide-project, \
<span class="line-modified"> 262     MAKEFILE := ide/visualstudio/hotspot/CreateVSProject, \</span>
 263     DEPS := hotspot exploded-image, \
<span class="line-added"> 264     ARGS := -I$(TOPDIR)/make/hotspot, \</span>
 265 ))
 266 
 267 ALL_TARGETS += $(HOTSPOT_VARIANT_TARGETS) $(HOTSPOT_VARIANT_GENSRC_TARGETS) \
 268     $(HOTSPOT_VARIANT_LIBS_TARGETS)
 269 
 270 ################################################################################
 271 # Generate libs and launcher targets for creating compile_commands.json fragments
 272 define DeclareCompileCommandsRecipe
 273   $1-compile-commands:
 274 	$$(call LogInfo, Generating compile_commands.json fragments for $1)
 275 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Main.gmk $1-only \
 276 	    GENERATE_COMPILE_COMMANDS_ONLY=true)
 277 
 278   COMPILE_COMMANDS_TARGETS_$2 += $1-compile-commands
 279 endef
 280 
 281 $(foreach t, $(HOTSPOT_VARIANT_LIBS_TARGETS), \
 282   $(eval $(call DeclareCompileCommandsRecipe,$t,HOTSPOT)) \
 283 )
 284 
 285 $(foreach t, $(LIBS_TARGETS) $(LAUNCHER_TARGETS), \
 286   $(eval $(call DeclareCompileCommandsRecipe,$t,JDK)) \
 287 )
 288 
 289 $(eval $(call SetupTarget, compile-commands, \
 290     MAKEFILE := CompileCommands, \
 291 ))
 292 
 293 $(eval $(call SetupTarget, compile-commands-hotspot, \
 294     MAKEFILE := CompileCommands, \
 295 ))
 296 
 297 ALL_TARGETS += $(COMPILE_COMMANDS_TARGETS_HOTSPOT) $(COMPILE_COMMANDS_TARGETS_JDK)
 298 
 299 ################################################################################
 300 # VS Code projects
 301 
 302 $(eval $(call SetupTarget, vscode-project, \
<span class="line-modified"> 303     MAKEFILE := ide/vscode/hotspot/CreateVSCodeProject, \</span>
 304     ARGS := VSCODE_INDEXER=cpptools, \
 305     DEPS := compile-commands, \
 306 ))
 307 
 308 $(eval $(call SetupTarget, vscode-project-clangd, \
<span class="line-modified"> 309     MAKEFILE := ide/vscode/hotspot/CreateVSCodeProject, \</span>
 310     ARGS := VSCODE_INDEXER=clangd, \
 311     DEPS := compile-commands, \
 312 ))
 313 
 314 $(eval $(call SetupTarget, vscode-project-rtags, \
<span class="line-modified"> 315     MAKEFILE := ide/vscode/hotspot/CreateVSCodeProject, \</span>
 316     ARGS := VSCODE_INDEXER=rtags, \
 317     DEPS := compile-commands, \
 318 ))
 319 
 320 $(eval $(call SetupTarget, vscode-project-ccls, \
<span class="line-modified"> 321     MAKEFILE := ide/vscode/hotspot/CreateVSCodeProject, \</span>
 322     ARGS := VSCODE_INDEXER=ccls, \
 323     DEPS := compile-commands, \
 324 ))
 325 
 326 ################################################################################
 327 # Build demos targets
 328 
 329 # The demos are currently linking to libjvm and libjava, just like all other
 330 # jdk libs, even though they don&#39;t need to. To avoid warnings, make sure they
 331 # aren&#39;t built until after libjava and libjvm are available to link to.
 332 $(eval $(call SetupTarget, demos-jdk, \
 333     MAKEFILE := CompileDemos, \
 334     DEPS := java.base-libs exploded-image, \
 335 ))
 336 
 337 $(eval $(call SetupTarget, test-image-demos-jdk, \
 338     MAKEFILE := CompileDemos, \
 339     TARGET := images, \
 340     DEPS := demos-jdk, \
 341 ))
</pre>
<hr />
<pre>
1083 
1084 # The module summary cannot be run when:
1085 # * Cross compiling and building a partial BUILDJDK for the build host
1086 # * An external buildjdk has been supplied since it may not match the
1087 #   module selection of the target jdk
1088 ifneq ($(CREATE_BUILDJDK), true)
1089   ifeq ($(EXTERNAL_BUILDJDK), false)
1090     product-images: generate-summary
1091   endif
1092 endif
1093 
1094 ifeq ($(call isTargetOs, macosx), true)
1095   product-images: mac-jdk-bundle
1096 
1097   legacy-images: mac-legacy-jre-bundle
1098 endif
1099 
1100 # This target builds the documentation image
1101 docs-image: docs-jdk
1102 
<span class="line-modified">1103 # This target builds the test image</span>
<span class="line-modified">1104 test-image: prepare-test-image test-image-jdk-jtreg-native test-image-demos-jdk</span>
1105 
<span class="line-modified">1106 ifneq ($(JVM_TEST_IMAGE_TARGETS), )</span>
<span class="line-modified">1107   # If JVM_TEST_IMAGE_TARGETS is externally defined, use it instead of the</span>
<span class="line-modified">1108   # standard hotspot set of tests.</span>
<span class="line-added">1109   test-image: $(JVM_TEST_IMAGE_TARGETS)</span>
<span class="line-added">1110 else</span>
<span class="line-added">1111   test-image: test-image-hotspot-jtreg-native</span>
<span class="line-added">1112   ifeq ($(BUILD_GTEST), true)</span>
<span class="line-added">1113     test-image: test-image-hotspot-gtest</span>
<span class="line-added">1114   endif</span>
1115 
<span class="line-modified">1116   ifeq ($(INCLUDE_GRAAL), true)</span>
<span class="line-modified">1117     test-image: test-image-hotspot-jtreg-graal</span>
<span class="line-modified">1118   endif</span>
<span class="line-added">1119 endif</span>
1120 
1121 ifeq ($(BUILD_FAILURE_HANDLER), true)
1122   test-image: test-image-failure-handler
1123 endif
1124 
1125 ifneq ($(JMH_CORE_JAR), )
1126   test-image: build-microbenchmark
1127 endif
1128 
1129 ################################################################################
1130 
1131 # all-images builds all our deliverables as images.
1132 all-images: product-images test-image docs-image
1133 
1134 # all-bundles packages all our deliverables as tar.gz bundles.
1135 all-bundles: product-bundles test-bundles docs-bundles static-libs-bundles
1136 
1137 ALL_TARGETS += buildtools hotspot hotspot-libs hotspot-gensrc gensrc gendata \
1138     copy java libs static-libs launchers jmods \
1139     jdk.jdwp.agent-gensrc $(ALL_MODULES) demos \
</pre>
</td>
</tr>
</table>
<center><a href="Images.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="MainSupport.gmk.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>