<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/common/modules/GensrcCommonLangtools.gmk</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
<body>
<center><a href="GensrcCommonJdk.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="../../conf/jib-profiles.js.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/common/modules/GensrcCommonLangtools.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 #
<span class="line-modified">  2 # Copyright (c) 2014, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4 #
  5 # This code is free software; you can redistribute it and/or modify it
  6 # under the terms of the GNU General Public License version 2 only, as
  7 # published by the Free Software Foundation.  Oracle designates this
  8 # particular file as subject to the &quot;Classpath&quot; exception as provided
  9 # by Oracle in the LICENSE file that accompanied this code.
 10 #
 11 # This code is distributed in the hope that it will be useful, but WITHOUT
 12 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14 # version 2 for more details (a copy is included in the LICENSE file that
 15 # accompanied this code).
 16 #
 17 # You should have received a copy of the GNU General Public License version
 18 # 2 along with this work; if not, write to the Free Software Foundation,
 19 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20 #
 21 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22 # or visit www.oracle.com if you need additional information or have any
 23 # questions.
 24 #
<span class="line-removed"> 25 </span>
<span class="line-removed"> 26 # This must be the first rule</span>
<span class="line-removed"> 27 default: all</span>
<span class="line-removed"> 28 </span>
<span class="line-removed"> 29 include $(SPEC)</span>
<span class="line-removed"> 30 include MakeBase.gmk</span>
 31 include JavaCompilation.gmk
 32 
 33 ################################################################################
 34 # The compileprops tools compiles a properties file into a resource bundle.
 35 TOOL_COMPILEPROPS_CMD := $(JAVA_SMALL) -cp $(BUILDTOOLS_OUTPUTDIR)/langtools_tools_classes \
 36     compileproperties.CompileProperties -quiet
 37 
 38 ################################################################################
 39 # The compileprops tools compiles a properties file into an enum-like class.
 40 TOOL_PARSEPROPS_CMD := $(JAVA_SMALL) -cp $(BUILDTOOLS_OUTPUTDIR)/langtools_tools_classes \
 41     propertiesparser.PropertiesParser
 42 
 43 
 44 ################################################################################
 45 # Sets up a rule that creates a version.properties file in the gensrc output
 46 # directory.
 47 # Param 1 - Variable to add generated file name to
 48 # Param 2 - Name of version.properties file including packages from the src
 49 #           root.
 50 define SetupVersionProperties
</pre>
<hr />
<pre>
114       $(SUPPORT_OUTPUTDIR)/gensrc/$(MODULE)/%, \
115       $$(dir $$(PARSEPROPSOURCES)))
116 
117   PARSEPROPDIRS := $$(sort $$(PARSEPROPALLDIRS))
118 
119   PARSEPROPCMDLINE := $$(subst _SPACE_, $$(SPACE), \
120     $$(join $$(foreach var,$$(PARSEPROPSOURCES),$$(addprefix -compile_SPACE_,$$(var))), \
121     $$(addprefix _SPACE_, $$(PARSEPROPALLDIRS))))
122 
123   # Now setup the rule for the generation of the resource bundles.
124   $(SUPPORT_OUTPUTDIR)/gensrc/$(MODULE)/_the_parsed_props: $$(PARSEPROPSOURCES)
125 	$$(call MakeDir, $$(@D) $$(PARSEPROPDIRS))
126 	$(FIND) $$(@D) -name &quot;*Properties.java&quot; $(FIND_DELETE)
127 	$(ECHO) Parsing $$(words $$(PARSEPROPSOURCES)) properties into enum-like class for $(MODULE)
128 	$(TOOL_PARSEPROPS_CMD) $$(PARSEPROPCMDLINE)
129 	$(TOUCH) $$@
130 
131   $$(strip $1) += $(SUPPORT_OUTPUTDIR)/gensrc/$(MODULE)/_the_parsed_props
132 endef
133 
<span class="line-removed">134 ################################################################################</span>
</pre>
</td>
<td>
<hr />
<pre>
  1 #
<span class="line-modified">  2 # Copyright (c) 2014, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4 #
  5 # This code is free software; you can redistribute it and/or modify it
  6 # under the terms of the GNU General Public License version 2 only, as
  7 # published by the Free Software Foundation.  Oracle designates this
  8 # particular file as subject to the &quot;Classpath&quot; exception as provided
  9 # by Oracle in the LICENSE file that accompanied this code.
 10 #
 11 # This code is distributed in the hope that it will be useful, but WITHOUT
 12 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14 # version 2 for more details (a copy is included in the LICENSE file that
 15 # accompanied this code).
 16 #
 17 # You should have received a copy of the GNU General Public License version
 18 # 2 along with this work; if not, write to the Free Software Foundation,
 19 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20 #
 21 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22 # or visit www.oracle.com if you need additional information or have any
 23 # questions.
 24 #






 25 include JavaCompilation.gmk
 26 
 27 ################################################################################
 28 # The compileprops tools compiles a properties file into a resource bundle.
 29 TOOL_COMPILEPROPS_CMD := $(JAVA_SMALL) -cp $(BUILDTOOLS_OUTPUTDIR)/langtools_tools_classes \
 30     compileproperties.CompileProperties -quiet
 31 
 32 ################################################################################
 33 # The compileprops tools compiles a properties file into an enum-like class.
 34 TOOL_PARSEPROPS_CMD := $(JAVA_SMALL) -cp $(BUILDTOOLS_OUTPUTDIR)/langtools_tools_classes \
 35     propertiesparser.PropertiesParser
 36 
 37 
 38 ################################################################################
 39 # Sets up a rule that creates a version.properties file in the gensrc output
 40 # directory.
 41 # Param 1 - Variable to add generated file name to
 42 # Param 2 - Name of version.properties file including packages from the src
 43 #           root.
 44 define SetupVersionProperties
</pre>
<hr />
<pre>
108       $(SUPPORT_OUTPUTDIR)/gensrc/$(MODULE)/%, \
109       $$(dir $$(PARSEPROPSOURCES)))
110 
111   PARSEPROPDIRS := $$(sort $$(PARSEPROPALLDIRS))
112 
113   PARSEPROPCMDLINE := $$(subst _SPACE_, $$(SPACE), \
114     $$(join $$(foreach var,$$(PARSEPROPSOURCES),$$(addprefix -compile_SPACE_,$$(var))), \
115     $$(addprefix _SPACE_, $$(PARSEPROPALLDIRS))))
116 
117   # Now setup the rule for the generation of the resource bundles.
118   $(SUPPORT_OUTPUTDIR)/gensrc/$(MODULE)/_the_parsed_props: $$(PARSEPROPSOURCES)
119 	$$(call MakeDir, $$(@D) $$(PARSEPROPDIRS))
120 	$(FIND) $$(@D) -name &quot;*Properties.java&quot; $(FIND_DELETE)
121 	$(ECHO) Parsing $$(words $$(PARSEPROPSOURCES)) properties into enum-like class for $(MODULE)
122 	$(TOOL_PARSEPROPS_CMD) $$(PARSEPROPCMDLINE)
123 	$(TOUCH) $$@
124 
125   $$(strip $1) += $(SUPPORT_OUTPUTDIR)/gensrc/$(MODULE)/_the_parsed_props
126 endef
127 

</pre>
</td>
</tr>
</table>
<center><a href="GensrcCommonJdk.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="../../conf/jib-profiles.js.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>