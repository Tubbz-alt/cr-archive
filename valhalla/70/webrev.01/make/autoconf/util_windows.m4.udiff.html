<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/autoconf/util_windows.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="util.m4.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../common/MakeBase.gmk.udiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/util_windows.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  #
<span class="udiff-line-modified-removed">- # Copyright (c) 2011, 2016, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+ # Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -125,14 +125,19 @@</span>
      # Now convert it to mixed DOS-style, short mode (no spaces, and / instead of \)
      TOPDIR_windows=&quot;$TOPDIR&quot;
      UTIL_REWRITE_AS_WINDOWS_MIXED_PATH([TOPDIR_windows])
      # First convert to Windows path to make input valid for cmd
      UTIL_REWRITE_AS_WINDOWS_MIXED_PATH([input_path])
<span class="udiff-line-added">+     # Reset PATH since it can contain a mix of WSL/linux paths and Windows paths from VS,</span>
<span class="udiff-line-added">+     # which, in combination with WSLENV, will make the WSL layer complain</span>
<span class="udiff-line-added">+     old_path=&quot;$PATH&quot;</span>
<span class="udiff-line-added">+     PATH=</span>
      new_path=`$CMD /c $TOPDIR_windows/make/scripts/windowsShortName.bat &quot;$input_path&quot; \
          | $SED -e &#39;s|\r||g&#39; \
          | $TR \\\\\\\\ / | $TR &#39;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#39; &#39;abcdefghijklmnopqrstuvwxyz&#39;`
      # Rewrite back to unix style
<span class="udiff-line-added">+     PATH=&quot;$old_path&quot;</span>
      UTIL_REWRITE_AS_UNIX_PATH([new_path])
    fi
  ])
  
  # FIXME: The UTIL_FIXUP_*_CYGWIN/MSYS is most likely too convoluted
</pre>
<center><a href="util.m4.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../common/MakeBase.gmk.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>