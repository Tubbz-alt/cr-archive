<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/modules/jdk.compiler/Gendata.gmk</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
<body>
<center><a href="../jdk.charsets/Gensrc.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="Gensrc.gmk.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/modules/jdk.compiler/Gendata.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 47     --add-exports java.base/jdk.internal=java.compiler.interim,jdk.compiler.interim \
 48     --add-exports jdk.compiler.interim/com.sun.tools.javac.api=ALL-UNNAMED \
 49     --add-exports jdk.compiler.interim/com.sun.tools.javac.code=ALL-UNNAMED \
 50     --add-exports jdk.compiler.interim/com.sun.tools.javac.util=ALL-UNNAMED \
 51     --add-exports jdk.compiler.interim/com.sun.tools.javac.jvm=ALL-UNNAMED \
 52     #
 53 
 54 $(eval $(call SetupJavaCompilation, COMPILE_CREATE_SYMBOLS, \
 55     TARGET_RELEASE := $(TARGET_RELEASE_BOOTJDK), \
 56     SRC := $(TOPDIR)/make/langtools/src/classes \
 57         $(TOPDIR)/src/jdk.jdeps/share/classes, \
 58     INCLUDES := build/tools/symbolgenerator com/sun/tools/classfile, \
 59     BIN := $(BUILDTOOLS_OUTPUTDIR)/create_symbols, \
 60     DISABLED_WARNINGS := options, \
 61     JAVAC_FLAGS := \
 62         $(INTERIM_LANGTOOLS_ARGS) \
 63         --patch-module java.base=$(BUILDTOOLS_OUTPUTDIR)/gensrc/java.base.interim \
 64         $(COMPILECREATESYMBOLS_ADD_EXPORTS), \
 65 ))
 66 
<span class="line-modified"> 67 $(SUPPORT_OUTPUTDIR)/symbols/ct.sym-files/_the.symbols: \</span>
 68     $(COMPILE_CREATE_SYMBOLS) \
 69     $(wildcard $(TOPDIR)/make/data/symbols/*) \
 70     $(MODULE_INFOS)
 71 	$(RM) -r $(@D)
 72 	$(MKDIR) -p $(@D)
 73 	$(ECHO) Creating ct.sym classes
<span class="line-removed"> 74 	$(JAVA_SMALL) $(INTERIM_LANGTOOLS_ARGS) \</span>
<span class="line-removed"> 75 	    $(COMPILECREATESYMBOLS_ADD_EXPORTS) \</span>
<span class="line-removed"> 76 	    -classpath $(BUILDTOOLS_OUTPUTDIR)/create_symbols \</span>
<span class="line-removed"> 77 	    build.tools.symbolgenerator.CreateSymbols \</span>
<span class="line-removed"> 78 	    build-ctsym \</span>
<span class="line-removed"> 79 	    $(CT_DATA_DESCRIPTION) \</span>
<span class="line-removed"> 80 	    $(@D)</span>
 81 	$(JAVA_SMALL) $(INTERIM_LANGTOOLS_ARGS) \
 82 	    $(COMPILECREATESYMBOLS_ADD_EXPORTS) \
 83 	    -classpath $(BUILDTOOLS_OUTPUTDIR)/create_symbols \
 84 	    build.tools.symbolgenerator.TransitiveDependencies \
<span class="line-modified"> 85 	    $(@D) \</span>
 86 	    $(CT_MODULESOURCEPATH) \
 87 	    $(CT_MODULES)










 88 	$(TOUCH) $@
 89 
<span class="line-removed"> 90 # Can&#39;t generate ct.sym directly into modules libs as the SetupJarArchive macro</span>
<span class="line-removed"> 91 # creates meta data files in the output dir.</span>
<span class="line-removed"> 92 $(eval $(call SetupJarArchive, CREATE_CTSYM, \</span>
<span class="line-removed"> 93     DEPENDENCIES := $(SUPPORT_OUTPUTDIR)/symbols/ct.sym-files/_the.symbols, \</span>
<span class="line-removed"> 94     SRCS := $(SUPPORT_OUTPUTDIR)/symbols/ct.sym-files, \</span>
<span class="line-removed"> 95     SUFFIXES := .sig system-modules, \</span>
<span class="line-removed"> 96     JAR := $(SUPPORT_OUTPUTDIR)/symbols/ct.sym, \</span>
<span class="line-removed"> 97 ))</span>
<span class="line-removed"> 98 </span>
 99 # Copy ct.sym to the modules libs dir
100 $(eval $(call SetupCopyFiles, COPY_TO_LIBS, \
101     FILES := $(SUPPORT_OUTPUTDIR)/symbols/ct.sym, \
102     DEST := $(SUPPORT_OUTPUTDIR)/modules_libs/jdk.compiler, \
103 ))
104 
<span class="line-modified">105 TARGETS += $(CREATE_CTSYM) $(COPY_TO_LIBS)</span>
106 
107 ################################################################################
</pre>
</td>
<td>
<hr />
<pre>
 47     --add-exports java.base/jdk.internal=java.compiler.interim,jdk.compiler.interim \
 48     --add-exports jdk.compiler.interim/com.sun.tools.javac.api=ALL-UNNAMED \
 49     --add-exports jdk.compiler.interim/com.sun.tools.javac.code=ALL-UNNAMED \
 50     --add-exports jdk.compiler.interim/com.sun.tools.javac.util=ALL-UNNAMED \
 51     --add-exports jdk.compiler.interim/com.sun.tools.javac.jvm=ALL-UNNAMED \
 52     #
 53 
 54 $(eval $(call SetupJavaCompilation, COMPILE_CREATE_SYMBOLS, \
 55     TARGET_RELEASE := $(TARGET_RELEASE_BOOTJDK), \
 56     SRC := $(TOPDIR)/make/langtools/src/classes \
 57         $(TOPDIR)/src/jdk.jdeps/share/classes, \
 58     INCLUDES := build/tools/symbolgenerator com/sun/tools/classfile, \
 59     BIN := $(BUILDTOOLS_OUTPUTDIR)/create_symbols, \
 60     DISABLED_WARNINGS := options, \
 61     JAVAC_FLAGS := \
 62         $(INTERIM_LANGTOOLS_ARGS) \
 63         --patch-module java.base=$(BUILDTOOLS_OUTPUTDIR)/gensrc/java.base.interim \
 64         $(COMPILECREATESYMBOLS_ADD_EXPORTS), \
 65 ))
 66 
<span class="line-modified"> 67 $(SUPPORT_OUTPUTDIR)/symbols/ct.sym: \</span>
 68     $(COMPILE_CREATE_SYMBOLS) \
 69     $(wildcard $(TOPDIR)/make/data/symbols/*) \
 70     $(MODULE_INFOS)
 71 	$(RM) -r $(@D)
 72 	$(MKDIR) -p $(@D)
 73 	$(ECHO) Creating ct.sym classes







 74 	$(JAVA_SMALL) $(INTERIM_LANGTOOLS_ARGS) \
 75 	    $(COMPILECREATESYMBOLS_ADD_EXPORTS) \
 76 	    -classpath $(BUILDTOOLS_OUTPUTDIR)/create_symbols \
 77 	    build.tools.symbolgenerator.TransitiveDependencies \
<span class="line-modified"> 78 	    $(@D)/system-modules \</span>
 79 	    $(CT_MODULESOURCEPATH) \
 80 	    $(CT_MODULES)
<span class="line-added"> 81 	$(JAVA_SMALL) $(INTERIM_LANGTOOLS_ARGS) \</span>
<span class="line-added"> 82 	    $(COMPILECREATESYMBOLS_ADD_EXPORTS) \</span>
<span class="line-added"> 83 	    -classpath $(BUILDTOOLS_OUTPUTDIR)/create_symbols \</span>
<span class="line-added"> 84 	    build.tools.symbolgenerator.CreateSymbols \</span>
<span class="line-added"> 85 	    build-ctsym \</span>
<span class="line-added"> 86 	    $(CT_DATA_DESCRIPTION) \</span>
<span class="line-added"> 87 	    $(@D)/ct.sym \</span>
<span class="line-added"> 88 	    $(SOURCE_DATE_EPOCH) \</span>
<span class="line-added"> 89 	    $(JDK_SOURCE_TARGET_VERSION) \</span>
<span class="line-added"> 90 	    $(@D)/system-modules</span>
 91 	$(TOUCH) $@
 92 









 93 # Copy ct.sym to the modules libs dir
 94 $(eval $(call SetupCopyFiles, COPY_TO_LIBS, \
 95     FILES := $(SUPPORT_OUTPUTDIR)/symbols/ct.sym, \
 96     DEST := $(SUPPORT_OUTPUTDIR)/modules_libs/jdk.compiler, \
 97 ))
 98 
<span class="line-modified"> 99 TARGETS += $(COPY_TO_LIBS)</span>
100 
101 ################################################################################
</pre>
</td>
</tr>
</table>
<center><a href="../jdk.charsets/Gensrc.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="Gensrc.gmk.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>