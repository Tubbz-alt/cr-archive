<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/modules/jdk.compiler/Gendata.gmk</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
<body>
<center><a href="../jdk.charsets/Gensrc.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="Gensrc.gmk.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/modules/jdk.compiler/Gendata.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 62,46 ***</span>
          $(INTERIM_LANGTOOLS_ARGS) \
          --patch-module java.base=$(BUILDTOOLS_OUTPUTDIR)/gensrc/java.base.interim \
          $(COMPILECREATESYMBOLS_ADD_EXPORTS), \
  ))
  
<span class="line-modified">! $(SUPPORT_OUTPUTDIR)/symbols/ct.sym-files/_the.symbols: \</span>
      $(COMPILE_CREATE_SYMBOLS) \
      $(wildcard $(TOPDIR)/make/data/symbols/*) \
      $(MODULE_INFOS)
  	$(RM) -r $(@D)
  	$(MKDIR) -p $(@D)
  	$(ECHO) Creating ct.sym classes
<span class="line-removed">- 	$(JAVA_SMALL) $(INTERIM_LANGTOOLS_ARGS) \</span>
<span class="line-removed">- 	    $(COMPILECREATESYMBOLS_ADD_EXPORTS) \</span>
<span class="line-removed">- 	    -classpath $(BUILDTOOLS_OUTPUTDIR)/create_symbols \</span>
<span class="line-removed">- 	    build.tools.symbolgenerator.CreateSymbols \</span>
<span class="line-removed">- 	    build-ctsym \</span>
<span class="line-removed">- 	    $(CT_DATA_DESCRIPTION) \</span>
<span class="line-removed">- 	    $(@D)</span>
  	$(JAVA_SMALL) $(INTERIM_LANGTOOLS_ARGS) \
  	    $(COMPILECREATESYMBOLS_ADD_EXPORTS) \
  	    -classpath $(BUILDTOOLS_OUTPUTDIR)/create_symbols \
  	    build.tools.symbolgenerator.TransitiveDependencies \
<span class="line-modified">! 	    $(@D) \</span>
  	    $(CT_MODULESOURCEPATH) \
  	    $(CT_MODULES)
  	$(TOUCH) $@
  
<span class="line-removed">- # Can&#39;t generate ct.sym directly into modules libs as the SetupJarArchive macro</span>
<span class="line-removed">- # creates meta data files in the output dir.</span>
<span class="line-removed">- $(eval $(call SetupJarArchive, CREATE_CTSYM, \</span>
<span class="line-removed">-     DEPENDENCIES := $(SUPPORT_OUTPUTDIR)/symbols/ct.sym-files/_the.symbols, \</span>
<span class="line-removed">-     SRCS := $(SUPPORT_OUTPUTDIR)/symbols/ct.sym-files, \</span>
<span class="line-removed">-     SUFFIXES := .sig system-modules, \</span>
<span class="line-removed">-     JAR := $(SUPPORT_OUTPUTDIR)/symbols/ct.sym, \</span>
<span class="line-removed">- ))</span>
<span class="line-removed">- </span>
  # Copy ct.sym to the modules libs dir
  $(eval $(call SetupCopyFiles, COPY_TO_LIBS, \
      FILES := $(SUPPORT_OUTPUTDIR)/symbols/ct.sym, \
      DEST := $(SUPPORT_OUTPUTDIR)/modules_libs/jdk.compiler, \
  ))
  
<span class="line-modified">! TARGETS += $(CREATE_CTSYM) $(COPY_TO_LIBS)</span>
  
  ################################################################################
<span class="line-new-header">--- 62,40 ---</span>
          $(INTERIM_LANGTOOLS_ARGS) \
          --patch-module java.base=$(BUILDTOOLS_OUTPUTDIR)/gensrc/java.base.interim \
          $(COMPILECREATESYMBOLS_ADD_EXPORTS), \
  ))
  
<span class="line-modified">! $(SUPPORT_OUTPUTDIR)/symbols/ct.sym: \</span>
      $(COMPILE_CREATE_SYMBOLS) \
      $(wildcard $(TOPDIR)/make/data/symbols/*) \
      $(MODULE_INFOS)
  	$(RM) -r $(@D)
  	$(MKDIR) -p $(@D)
  	$(ECHO) Creating ct.sym classes
  	$(JAVA_SMALL) $(INTERIM_LANGTOOLS_ARGS) \
  	    $(COMPILECREATESYMBOLS_ADD_EXPORTS) \
  	    -classpath $(BUILDTOOLS_OUTPUTDIR)/create_symbols \
  	    build.tools.symbolgenerator.TransitiveDependencies \
<span class="line-modified">! 	    $(@D)/system-modules \</span>
  	    $(CT_MODULESOURCEPATH) \
  	    $(CT_MODULES)
<span class="line-added">+ 	$(JAVA_SMALL) $(INTERIM_LANGTOOLS_ARGS) \</span>
<span class="line-added">+ 	    $(COMPILECREATESYMBOLS_ADD_EXPORTS) \</span>
<span class="line-added">+ 	    -classpath $(BUILDTOOLS_OUTPUTDIR)/create_symbols \</span>
<span class="line-added">+ 	    build.tools.symbolgenerator.CreateSymbols \</span>
<span class="line-added">+ 	    build-ctsym \</span>
<span class="line-added">+ 	    $(CT_DATA_DESCRIPTION) \</span>
<span class="line-added">+ 	    $(@D)/ct.sym \</span>
<span class="line-added">+ 	    $(SOURCE_DATE_EPOCH) \</span>
<span class="line-added">+ 	    $(JDK_SOURCE_TARGET_VERSION) \</span>
<span class="line-added">+ 	    $(@D)/system-modules</span>
  	$(TOUCH) $@
  
  # Copy ct.sym to the modules libs dir
  $(eval $(call SetupCopyFiles, COPY_TO_LIBS, \
      FILES := $(SUPPORT_OUTPUTDIR)/symbols/ct.sym, \
      DEST := $(SUPPORT_OUTPUTDIR)/modules_libs/jdk.compiler, \
  ))
  
<span class="line-modified">! TARGETS += $(COPY_TO_LIBS)</span>
  
  ################################################################################
</pre>
<center><a href="../jdk.charsets/Gensrc.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="Gensrc.gmk.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>