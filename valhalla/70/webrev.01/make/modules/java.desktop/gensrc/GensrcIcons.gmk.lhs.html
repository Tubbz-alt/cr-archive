<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames make/modules/java.desktop/gensrc/GensrcIcons.gmk</title>
    <link rel="stylesheet" href="../../../../style.css" />
    <script type="text/javascript" src="../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 #
  2 # Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.
  3 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4 #
  5 # This code is free software; you can redistribute it and/or modify it
  6 # under the terms of the GNU General Public License version 2 only, as
  7 # published by the Free Software Foundation.  Oracle designates this
  8 # particular file as subject to the &quot;Classpath&quot; exception as provided
  9 # by Oracle in the LICENSE file that accompanied this code.
 10 #
 11 # This code is distributed in the hope that it will be useful, but WITHOUT
 12 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14 # version 2 for more details (a copy is included in the LICENSE file that
 15 # accompanied this code).
 16 #
 17 # You should have received a copy of the GNU General Public License version
 18 # 2 along with this work; if not, write to the Free Software Foundation,
 19 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20 #
 21 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22 # or visit www.oracle.com if you need additional information or have any
 23 # questions.
 24 #
 25 
 26 GENSRC_AWT_ICONS :=
 27 GENSRC_AWT_ICONS_SRC :=
 28 GENSRC_AWT_ICONS_TMP := $(SUPPORT_OUTPUTDIR)/gensrc/java.desktop
 29 GENSRC_AWT_ICONS_DST := $(GENSRC_AWT_ICONS_TMP)/sun/awt/
 30 
 31 # Allow this to be overridden from a custom makefile
 32 X11_ICONS_PATH_PREFIX ?= $(TOPDIR)/src/java.desktop/$(OPENJDK_TARGET_OS_TYPE)
 33 
 34 GENSRC_AWT_ICONS_SRC += \
 35     $(X11_ICONS_PATH_PREFIX)/classes/sun/awt/X11/java-icon16.png \
 36     $(X11_ICONS_PATH_PREFIX)/classes/sun/awt/X11/java-icon24.png \
 37     $(X11_ICONS_PATH_PREFIX)/classes/sun/awt/X11/java-icon32.png \
 38     $(X11_ICONS_PATH_PREFIX)/classes/sun/awt/X11/java-icon48.png
 39 
 40 
 41 AWT_ICONPATH := $(TOPDIR)/src/java.desktop/share/classes/sun/awt/resources
 42 
 43 GENSRC_AWT_ICONS_SRC += \
 44     $(AWT_ICONPATH)/security-icon-bw16.png \
 45     $(AWT_ICONPATH)/security-icon-interim16.png \
 46     $(AWT_ICONPATH)/security-icon-yellow16.png \
 47     $(AWT_ICONPATH)/security-icon-bw24.png \
 48     $(AWT_ICONPATH)/security-icon-interim24.png \
 49     $(AWT_ICONPATH)/security-icon-yellow24.png \
 50     $(AWT_ICONPATH)/security-icon-bw32.png \
 51     $(AWT_ICONPATH)/security-icon-interim32.png \
 52     $(AWT_ICONPATH)/security-icon-yellow32.png \
 53     $(AWT_ICONPATH)/security-icon-bw48.png \
 54     $(AWT_ICONPATH)/security-icon-interim48.png \
 55     $(AWT_ICONPATH)/security-icon-yellow48.png
 56 
 57 GENSRC_AWT_ICONS_FILES := $(notdir $(GENSRC_AWT_ICONS_SRC))
 58 
 59 GENSRC_AWT_ICONS_SHORT_NAME = $(subst .,_,$(subst -,_,$(1)))
 60 GENSRC_AWT_ICONS_DST_NAME = AWTIcon$(2)_$(subst .,_,$(subst -,_,$(1)))
 61 
 62 ################################################################################
 63 
 64 $(GENSRC_AWT_ICONS_TMP)/_the.icons.dir:
 65 	$(call LogInfo, Generating icon classes)
 66 	$(call MakeDir, $(GENSRC_AWT_ICONS_DST))
 67 	$(TOUCH) $@
 68 
 69 ################################################################################
 70 
 71 define SetupGensrcAWTIcon
 72   # param 1 is for src-file
 73   # param 2 is for src-dir
 74   $1_SHORTNAME := $(call GENSRC_AWT_ICONS_SHORT_NAME,$1)
 75   $1_NAME32 := $(call GENSRC_AWT_ICONS_DST_NAME,$1,32)
 76   $1_TARGET32 := $(GENSRC_AWT_ICONS_DST)/$$($1_NAME32).java
 77   $1_NAME64 := $(call GENSRC_AWT_ICONS_DST_NAME,$1,64)
 78   $1_TARGET64 := $(GENSRC_AWT_ICONS_DST)/$$($1_NAME64).java
 79 
 80   $$($1_TARGET32): $2/$1 $(GENSRC_AWT_ICONS_TMP)/_the.icons.dir $(BUILD_TOOLS_JDK)
 81 	$(RM) $$@ $$@.tmp
 82 	$(ECHO) &quot;package sun.awt;&quot; &gt; $$@.tmp
 83 	$(ECHO) &quot;public class $$($1_NAME32) {&quot; &gt;&gt; $$@.tmp
 84 	$(ECHO) &quot;public static int[] $$($1_SHORTNAME) = { &quot; &gt;&gt; $$@.tmp
 85 	$(CAT) $$&lt; | $(TOOL_AWT_TOBIN) &gt;&gt; $$@.tmp
 86 	$(ECHO) &quot;}; }&quot; &gt;&gt; $$@.tmp
 87 	$(MV) $$@.tmp $$@
 88 
 89   GENSRC_AWT_ICONS += $$($1_TARGET32)
 90 
 91   $$($1_TARGET64): $2/$1 $(GENSRC_AWT_ICONS_TMP)/_the.icons.dir $(BUILD_TOOLS_JDK)
 92 	$(RM) $$@ $$@.tmp
 93 	$(ECHO) &quot;package sun.awt;&quot; &gt; $$@.tmp
 94 	$(ECHO) &quot;public class $$($1_NAME64) {&quot; &gt;&gt; $$@.tmp
 95 	$(ECHO) &quot;public static long[] $$($1_SHORTNAME) = { &quot; &gt;&gt; $$@.tmp
 96 	$(CAT) $$&lt; | $(TOOL_AWT_TOBIN) &gt;&gt; $$@.tmp
 97 	$(ECHO) &quot;}; }&quot; &gt;&gt; $$@.tmp
 98 	$(MV) $$@.tmp $$@
 99 
100   GENSRC_AWT_ICONS += $$($1_TARGET64)
101 endef
102 
103 $(foreach I, $(GENSRC_AWT_ICONS_SRC), $(eval $(call SetupGensrcAWTIcon,$(notdir $(I)),$(dir $(I)))))
104 
<a name="1" id="anc1"></a><span class="line-modified">105 GENSRC_JAVA_DESKTOP += $(GENSRC_AWT_ICONS)</span>
106 
107 ################################################################################
108 
109 ifeq ($(call isTargetOs, macosx), true)
110 
111   GENSRC_OSX_ICONS_DST := $(SUPPORT_OUTPUTDIR)/headers/java.desktop
112   GENSRC_OSX_ICONS := $(GENSRC_OSX_ICONS_DST)/AWTIconData.h
113 
114   GENSRC_OSX_ICONS_SRC ?= $(TOPDIR)/make/data/macosxicons/JavaApp.icns
115 
116 
117   $(GENSRC_OSX_ICONS): $(GENSRC_OSX_ICONS_SRC) $(BUILD_TOOLS_JDK)
118 	$(call LogInfo, Generating $(patsubst $(OUTPUTDIR)/%, %, $@))
119 	$(call MakeDir, $(@D))
120 	$(RM) $@ $@.tmp
121 	$(ECHO) &quot;static unsigned char sAWTIconData[] = { &quot; &gt;&gt; $@.tmp
122 	$(CAT) $&lt; | $(TOOL_OSX_TOBIN) &gt;&gt; $@.tmp
123 	$(ECHO) &quot;};&quot; &gt;&gt; $@.tmp
124 	$(MV) $@.tmp $@
125 
<a name="2" id="anc2"></a><span class="line-modified">126   GENSRC_JAVA_DESKTOP += $(GENSRC_OSX_ICONS)</span>
127 endif
<a name="3" id="anc3"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="3" type="hidden" />
</body>
</html>