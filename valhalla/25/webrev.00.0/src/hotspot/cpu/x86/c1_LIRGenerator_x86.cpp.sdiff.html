<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/cpu/x86/c1_LIRGenerator_x86.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="c1_LIRAssembler_x86.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="frame_x86.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/cpu/x86/c1_LIRGenerator_x86.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2005, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  *
</pre>
<hr />
<pre>
 146     return true;
 147   }
 148   return false;
 149 }
 150 
 151 
 152 bool LIRGenerator::can_inline_as_constant(Value v) const {
 153   if (v-&gt;type()-&gt;tag() == longTag) return false;
 154   return v-&gt;type()-&gt;tag() != objectTag ||
 155     (v-&gt;type()-&gt;is_constant() &amp;&amp; v-&gt;type()-&gt;as_ObjectType()-&gt;constant_value()-&gt;is_null_object());
 156 }
 157 
 158 
 159 bool LIRGenerator::can_inline_as_constant(LIR_Const* c) const {
 160   if (c-&gt;type() == T_LONG) return false;
 161   return c-&gt;type() != T_OBJECT || c-&gt;as_jobject() == NULL;
 162 }
 163 
 164 
 165 LIR_Opr LIRGenerator::safepoint_poll_register() {
<span class="line-modified"> 166   NOT_LP64( if (SafepointMechanism::uses_thread_local_poll()) { return new_register(T_ADDRESS); } )</span>
 167   return LIR_OprFact::illegalOpr;
 168 }
 169 
 170 
 171 LIR_Address* LIRGenerator::generate_address(LIR_Opr base, LIR_Opr index,
 172                                             int shift, int disp, BasicType type) {
 173   assert(base-&gt;is_register(), &quot;must be&quot;);
 174   if (index-&gt;is_constant()) {
 175     LIR_Const *constant = index-&gt;as_constant_ptr();
 176 #ifdef _LP64
 177     jlong c;
 178     if (constant-&gt;type() == T_INT) {
 179       c = (jlong(index-&gt;as_jint()) &lt;&lt; shift) + disp;
 180     } else {
 181       assert(constant-&gt;type() == T_LONG, &quot;should be&quot;);
 182       c = (index-&gt;as_jlong() &lt;&lt; shift) + disp;
 183     }
 184     if ((jlong)((jint)c) == c) {
 185       return new LIR_Address(base, (jint)c, type);
 186     } else {
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2005, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  *
</pre>
<hr />
<pre>
 146     return true;
 147   }
 148   return false;
 149 }
 150 
 151 
 152 bool LIRGenerator::can_inline_as_constant(Value v) const {
 153   if (v-&gt;type()-&gt;tag() == longTag) return false;
 154   return v-&gt;type()-&gt;tag() != objectTag ||
 155     (v-&gt;type()-&gt;is_constant() &amp;&amp; v-&gt;type()-&gt;as_ObjectType()-&gt;constant_value()-&gt;is_null_object());
 156 }
 157 
 158 
 159 bool LIRGenerator::can_inline_as_constant(LIR_Const* c) const {
 160   if (c-&gt;type() == T_LONG) return false;
 161   return c-&gt;type() != T_OBJECT || c-&gt;as_jobject() == NULL;
 162 }
 163 
 164 
 165 LIR_Opr LIRGenerator::safepoint_poll_register() {
<span class="line-modified"> 166   NOT_LP64( return new_register(T_ADDRESS); )</span>
 167   return LIR_OprFact::illegalOpr;
 168 }
 169 
 170 
 171 LIR_Address* LIRGenerator::generate_address(LIR_Opr base, LIR_Opr index,
 172                                             int shift, int disp, BasicType type) {
 173   assert(base-&gt;is_register(), &quot;must be&quot;);
 174   if (index-&gt;is_constant()) {
 175     LIR_Const *constant = index-&gt;as_constant_ptr();
 176 #ifdef _LP64
 177     jlong c;
 178     if (constant-&gt;type() == T_INT) {
 179       c = (jlong(index-&gt;as_jint()) &lt;&lt; shift) + disp;
 180     } else {
 181       assert(constant-&gt;type() == T_LONG, &quot;should be&quot;);
 182       c = (index-&gt;as_jlong() &lt;&lt; shift) + disp;
 183     }
 184     if ((jlong)((jint)c) == c) {
 185       return new LIR_Address(base, (jint)c, type);
 186     } else {
</pre>
</td>
</tr>
</table>
<center><a href="c1_LIRAssembler_x86.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="frame_x86.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>