<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/opto/node.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="node.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="output.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/opto/node.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 733   };
 734   #undef DEFINE_CLASS_ID
 735 
 736   // Flags are sorted by usage frequency.
 737   enum NodeFlags {
 738     Flag_is_Copy                     = 0x01, // should be first bit to avoid shift
 739     Flag_rematerialize               = Flag_is_Copy &lt;&lt; 1,
 740     Flag_needs_anti_dependence_check = Flag_rematerialize &lt;&lt; 1,
 741     Flag_is_macro                    = Flag_needs_anti_dependence_check &lt;&lt; 1,
 742     Flag_is_Con                      = Flag_is_macro &lt;&lt; 1,
 743     Flag_is_cisc_alternate           = Flag_is_Con &lt;&lt; 1,
 744     Flag_is_dead_loop_safe           = Flag_is_cisc_alternate &lt;&lt; 1,
 745     Flag_may_be_short_branch         = Flag_is_dead_loop_safe &lt;&lt; 1,
 746     Flag_avoid_back_to_back_before   = Flag_may_be_short_branch &lt;&lt; 1,
 747     Flag_avoid_back_to_back_after    = Flag_avoid_back_to_back_before &lt;&lt; 1,
 748     Flag_has_call                    = Flag_avoid_back_to_back_after &lt;&lt; 1,
 749     Flag_is_reduction                = Flag_has_call &lt;&lt; 1,
 750     Flag_is_scheduled                = Flag_is_reduction &lt;&lt; 1,
 751     Flag_has_vector_mask_set         = Flag_is_scheduled &lt;&lt; 1,
 752     Flag_is_expensive                = Flag_has_vector_mask_set &lt;&lt; 1,
<span class="line-modified"> 753     Flag_intel_jcc_erratum           = Flag_is_expensive &lt;&lt; 1,</span>
<span class="line-removed"> 754     _max_flags = (Flag_intel_jcc_erratum &lt;&lt; 1) - 1 // allow flags combination</span>
 755   };
 756 


 757 private:
 758   jushort _class_id;
 759   jushort _flags;
 760 


 761 protected:
 762   // These methods should be called from constructors only.
 763   void init_class_id(jushort c) {
 764     _class_id = c; // cast out const
 765   }
 766   void init_flags(uint fl) {
<span class="line-modified"> 767     assert(fl &lt;= _max_flags, &quot;invalid node flag&quot;);</span>
 768     _flags |= fl;
 769   }
 770   void clear_flag(uint fl) {
<span class="line-modified"> 771     assert(fl &lt;= _max_flags, &quot;invalid node flag&quot;);</span>
 772     _flags &amp;= ~fl;
 773   }
 774 
 775 public:
 776   const jushort class_id() const { return _class_id; }
 777 
 778   const jushort flags() const { return _flags; }
 779 
 780   void add_flag(jushort fl) { init_flags(fl); }
 781 
 782   void remove_flag(jushort fl) { clear_flag(fl); }
 783 
 784   // Return a dense integer opcode number
 785   virtual int Opcode() const;
 786 
 787   // Virtual inherited Node size
 788   virtual uint size_of() const;
 789 
 790   // Other interesting Node properties
 791   #define DEFINE_CLASS_QUERY(type)                           \
</pre>
</td>
<td>
<hr />
<pre>
 733   };
 734   #undef DEFINE_CLASS_ID
 735 
 736   // Flags are sorted by usage frequency.
 737   enum NodeFlags {
 738     Flag_is_Copy                     = 0x01, // should be first bit to avoid shift
 739     Flag_rematerialize               = Flag_is_Copy &lt;&lt; 1,
 740     Flag_needs_anti_dependence_check = Flag_rematerialize &lt;&lt; 1,
 741     Flag_is_macro                    = Flag_needs_anti_dependence_check &lt;&lt; 1,
 742     Flag_is_Con                      = Flag_is_macro &lt;&lt; 1,
 743     Flag_is_cisc_alternate           = Flag_is_Con &lt;&lt; 1,
 744     Flag_is_dead_loop_safe           = Flag_is_cisc_alternate &lt;&lt; 1,
 745     Flag_may_be_short_branch         = Flag_is_dead_loop_safe &lt;&lt; 1,
 746     Flag_avoid_back_to_back_before   = Flag_may_be_short_branch &lt;&lt; 1,
 747     Flag_avoid_back_to_back_after    = Flag_avoid_back_to_back_before &lt;&lt; 1,
 748     Flag_has_call                    = Flag_avoid_back_to_back_after &lt;&lt; 1,
 749     Flag_is_reduction                = Flag_has_call &lt;&lt; 1,
 750     Flag_is_scheduled                = Flag_is_reduction &lt;&lt; 1,
 751     Flag_has_vector_mask_set         = Flag_is_scheduled &lt;&lt; 1,
 752     Flag_is_expensive                = Flag_has_vector_mask_set &lt;&lt; 1,
<span class="line-modified"> 753     _last_flag                       = Flag_is_expensive</span>

 754   };
 755 
<span class="line-added"> 756   class PD;</span>
<span class="line-added"> 757 </span>
 758 private:
 759   jushort _class_id;
 760   jushort _flags;
 761 
<span class="line-added"> 762   static juint max_flags();</span>
<span class="line-added"> 763 </span>
 764 protected:
 765   // These methods should be called from constructors only.
 766   void init_class_id(jushort c) {
 767     _class_id = c; // cast out const
 768   }
 769   void init_flags(uint fl) {
<span class="line-modified"> 770     assert(fl &lt;= max_flags(), &quot;invalid node flag&quot;);</span>
 771     _flags |= fl;
 772   }
 773   void clear_flag(uint fl) {
<span class="line-modified"> 774     assert(fl &lt;= max_flags(), &quot;invalid node flag&quot;);</span>
 775     _flags &amp;= ~fl;
 776   }
 777 
 778 public:
 779   const jushort class_id() const { return _class_id; }
 780 
 781   const jushort flags() const { return _flags; }
 782 
 783   void add_flag(jushort fl) { init_flags(fl); }
 784 
 785   void remove_flag(jushort fl) { clear_flag(fl); }
 786 
 787   // Return a dense integer opcode number
 788   virtual int Opcode() const;
 789 
 790   // Virtual inherited Node size
 791   virtual uint size_of() const;
 792 
 793   // Other interesting Node properties
 794   #define DEFINE_CLASS_QUERY(type)                           \
</pre>
</td>
</tr>
</table>
<center><a href="node.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="output.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>