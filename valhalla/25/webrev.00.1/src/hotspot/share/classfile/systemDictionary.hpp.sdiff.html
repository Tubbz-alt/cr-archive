<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/classfile/systemDictionary.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="systemDictionary.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../code/compiledMethod.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/classfile/systemDictionary.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 59 // domain field of the dictionary entry has not yet been filled in when
 60 // the &quot;real&quot; dictionary entry is created.
 61 //
 62 // Clients of this class who are interested in finding if a class has
 63 // been completely loaded -- not classes in the process of being loaded --
 64 // can read the dictionary unlocked. This is safe because
 65 //    - entries are only deleted at safepoints
 66 //    - readers cannot come to a safepoint while actively examining
 67 //         an entry  (an entry cannot be deleted from under a reader)
 68 //    - entries must be fully formed before they are available to concurrent
 69 //         readers (we must ensure write ordering)
 70 //
 71 // Note that placeholders are deleted at any time, as they are removed
 72 // when a class is completely loaded. Therefore, readers as well as writers
 73 // of placeholders must hold the SystemDictionary_lock.
 74 //
 75 
 76 class BootstrapInfo;
 77 class ClassFileStream;
 78 class Dictionary;

 79 class PlaceholderTable;
 80 class LoaderConstraintTable;
 81 template &lt;MEMFLAGS F&gt; class HashtableBucket;
 82 class ResolutionErrorTable;
 83 class SymbolPropertyTable;
 84 class ProtectionDomainCacheTable;
 85 class ProtectionDomainCacheEntry;
 86 class GCTimer;
 87 
 88 #define WK_KLASS_ENUM_NAME(kname)    kname##_knum
 89 
 90 // Certain classes, such as java.lang.Object and java.lang.String,
 91 // are &quot;well-known&quot;, in the sense that no class loader is allowed
 92 // to provide a different definition.
 93 //
 94 // Each well-known class has a short klass name (like object_klass),
 95 // and a vmSymbol name (like java_lang_Object).
 96 //
 97 // The order of these definitions is significant: the classes are
 98 // resolved during early VM start-up by resolve_well_known_classes
 99 // in this order. Changing the order may require careful restructuring
100 // of the VM start-up sequence.
101 //
102 #define WK_KLASSES_DO(do_klass)                                                                                 \
103   /* well-known classes */                                                                                      \
104   do_klass(Object_klass,                                java_lang_Object                                      ) \

105   do_klass(String_klass,                                java_lang_String                                      ) \
106   do_klass(Class_klass,                                 java_lang_Class                                       ) \
107   do_klass(Cloneable_klass,                             java_lang_Cloneable                                   ) \
108   do_klass(ClassLoader_klass,                           java_lang_ClassLoader                                 ) \
109   do_klass(Serializable_klass,                          java_io_Serializable                                  ) \
110   do_klass(System_klass,                                java_lang_System                                      ) \
111   do_klass(Throwable_klass,                             java_lang_Throwable                                   ) \
112   do_klass(Error_klass,                                 java_lang_Error                                       ) \
113   do_klass(ThreadDeath_klass,                           java_lang_ThreadDeath                                 ) \
114   do_klass(Exception_klass,                             java_lang_Exception                                   ) \
115   do_klass(RuntimeException_klass,                      java_lang_RuntimeException                            ) \
116   do_klass(SecurityManager_klass,                       java_lang_SecurityManager                             ) \
117   do_klass(ProtectionDomain_klass,                      java_security_ProtectionDomain                        ) \
118   do_klass(AccessControlContext_klass,                  java_security_AccessControlContext                    ) \
119   do_klass(AccessController_klass,                      java_security_AccessController                        ) \
120   do_klass(SecureClassLoader_klass,                     java_security_SecureClassLoader                       ) \
121   do_klass(ClassNotFoundException_klass,                java_lang_ClassNotFoundException                      ) \
122   do_klass(Record_klass,                                java_lang_Record                                      ) \
123   do_klass(NoClassDefFoundError_klass,                  java_lang_NoClassDefFoundError                        ) \
124   do_klass(LinkageError_klass,                          java_lang_LinkageError                                ) \
</pre>
<hr />
<pre>
155   do_klass(reflect_DelegatingClassLoader_klass,         reflect_DelegatingClassLoader                         ) \
156   do_klass(reflect_ConstantPool_klass,                  reflect_ConstantPool                                  ) \
157   do_klass(reflect_UnsafeStaticFieldAccessorImpl_klass, reflect_UnsafeStaticFieldAccessorImpl                 ) \
158   do_klass(reflect_CallerSensitive_klass,               reflect_CallerSensitive                               ) \
159   do_klass(reflect_NativeConstructorAccessorImpl_klass, reflect_NativeConstructorAccessorImpl                 ) \
160                                                                                                                 \
161   /* support for dynamic typing; it&#39;s OK if these are NULL in earlier JDKs */                                   \
162   do_klass(DirectMethodHandle_klass,                    java_lang_invoke_DirectMethodHandle                   ) \
163   do_klass(MethodHandle_klass,                          java_lang_invoke_MethodHandle                         ) \
164   do_klass(VarHandle_klass,                             java_lang_invoke_VarHandle                            ) \
165   do_klass(MemberName_klass,                            java_lang_invoke_MemberName                           ) \
166   do_klass(ResolvedMethodName_klass,                    java_lang_invoke_ResolvedMethodName                   ) \
167   do_klass(MethodHandleNatives_klass,                   java_lang_invoke_MethodHandleNatives                  ) \
168   do_klass(LambdaForm_klass,                            java_lang_invoke_LambdaForm                           ) \
169   do_klass(MethodType_klass,                            java_lang_invoke_MethodType                           ) \
170   do_klass(BootstrapMethodError_klass,                  java_lang_BootstrapMethodError                        ) \
171   do_klass(CallSite_klass,                              java_lang_invoke_CallSite                             ) \
172   do_klass(Context_klass,                               java_lang_invoke_MethodHandleNatives_CallSiteContext  ) \
173   do_klass(ConstantCallSite_klass,                      java_lang_invoke_ConstantCallSite                     ) \
174   do_klass(MutableCallSite_klass,                       java_lang_invoke_MutableCallSite                      ) \

175   do_klass(VolatileCallSite_klass,                      java_lang_invoke_VolatileCallSite                     ) \
176   /* Note: MethodHandle must be first, and VolatileCallSite last in group */                                    \
177                                                                                                                 \
178   do_klass(AssertionStatusDirectives_klass,             java_lang_AssertionStatusDirectives                   ) \
179   do_klass(StringBuffer_klass,                          java_lang_StringBuffer                                ) \
180   do_klass(StringBuilder_klass,                         java_lang_StringBuilder                               ) \
181   do_klass(UnsafeConstants_klass,                       jdk_internal_misc_UnsafeConstants                     ) \
182   do_klass(internal_Unsafe_klass,                       jdk_internal_misc_Unsafe                              ) \
183   do_klass(module_Modules_klass,                        jdk_internal_module_Modules                           ) \
184                                                                                                                 \
185   /* support for CDS */                                                                                         \
186   do_klass(ByteArrayInputStream_klass,                  java_io_ByteArrayInputStream                          ) \
187   do_klass(URL_klass,                                   java_net_URL                                          ) \
188   do_klass(Jar_Manifest_klass,                          java_util_jar_Manifest                                ) \
189   do_klass(jdk_internal_loader_ClassLoaders_klass,      jdk_internal_loader_ClassLoaders                      ) \
190   do_klass(jdk_internal_loader_ClassLoaders_AppClassLoader_klass,      jdk_internal_loader_ClassLoaders_AppClassLoader) \
191   do_klass(jdk_internal_loader_ClassLoaders_PlatformClassLoader_klass, jdk_internal_loader_ClassLoaders_PlatformClassLoader) \
192   do_klass(CodeSource_klass,                            java_security_CodeSource                              ) \
193                                                                                                                 \
194   do_klass(StackTraceElement_klass,                     java_lang_StackTraceElement                           ) \
</pre>
<hr />
<pre>
201   do_klass(AbstractStackWalker_klass,                   java_lang_StackStreamFactory_AbstractStackWalker      ) \
202   do_klass(StackFrameInfo_klass,                        java_lang_StackFrameInfo                              ) \
203   do_klass(LiveStackFrameInfo_klass,                    java_lang_LiveStackFrameInfo                          ) \
204                                                                                                                 \
205   /* support for stack dump lock analysis */                                                                    \
206   do_klass(java_util_concurrent_locks_AbstractOwnableSynchronizer_klass, java_util_concurrent_locks_AbstractOwnableSynchronizer) \
207                                                                                                                 \
208   /* boxing klasses */                                                                                          \
209   do_klass(Boolean_klass,                               java_lang_Boolean                                     ) \
210   do_klass(Character_klass,                             java_lang_Character                                   ) \
211   do_klass(Float_klass,                                 java_lang_Float                                       ) \
212   do_klass(Double_klass,                                java_lang_Double                                      ) \
213   do_klass(Byte_klass,                                  java_lang_Byte                                        ) \
214   do_klass(Short_klass,                                 java_lang_Short                                       ) \
215   do_klass(Integer_klass,                               java_lang_Integer                                     ) \
216   do_klass(Long_klass,                                  java_lang_Long                                        ) \
217                                                                                                                 \
218   /* force inline of iterators */                                                                               \
219   do_klass(Iterator_klass,                              java_util_Iterator                                    ) \
220                                                                                                                 \

221   /* support for records */                                                                                     \
222   do_klass(RecordComponent_klass,                       java_lang_reflect_RecordComponent                     ) \
223                                                                                                                 \
224   /*end*/
225 
226 class SystemDictionary : AllStatic {
227   friend class BootstrapInfo;
228   friend class VMStructs;
229 
230  public:
231   enum WKID {
232     NO_WKID = 0,
233 
234     #define WK_KLASS_ENUM(name, symbol) WK_KLASS_ENUM_NAME(name), WK_KLASS_ENUM_NAME(symbol) = WK_KLASS_ENUM_NAME(name),
235     WK_KLASSES_DO(WK_KLASS_ENUM)
236     #undef WK_KLASS_ENUM
237 
238     WKID_LIMIT,
239 
240     FIRST_WKID = NO_WKID + 1
</pre>
<hr />
<pre>
254   static Klass* handle_resolution_exception(Symbol* class_name, bool throw_error, Klass* klass, TRAPS);
255 
256 public:
257 
258   // Returns a class with a given class name and class loader.
259   // Loads the class if needed. If not found NULL is returned.
260   static Klass* resolve_or_null(Symbol* class_name, Handle class_loader, Handle protection_domain, TRAPS);
261   // Version with null loader and protection domain
262   static Klass* resolve_or_null(Symbol* class_name, TRAPS);
263 
264   // Resolve a superclass or superinterface. Called from ClassFileParser,
265   // parse_interfaces, resolve_instance_class_or_null, load_shared_class
266   // &quot;child_name&quot; is the class whose super class or interface is being resolved.
267   static InstanceKlass* resolve_super_or_fail(Symbol* child_name,
268                                               Symbol* class_name,
269                                               Handle class_loader,
270                                               Handle protection_domain,
271                                               bool is_superclass,
272                                               TRAPS);
273 






274   // Parse new stream. This won&#39;t update the dictionary or
275   // class hierarchy, simply parse the stream. Used by JVMTI RedefineClasses.
276   // Also used by Unsafe_DefineAnonymousClass
277   static InstanceKlass* parse_stream(Symbol* class_name,
278                                      Handle class_loader,
279                                      Handle protection_domain,
280                                      ClassFileStream* st,
281                                      TRAPS) {
282     return parse_stream(class_name,
283                         class_loader,
284                         protection_domain,
285                         st,
286                         NULL, // unsafe_anonymous_host
287                         NULL, // cp_patches
288                         THREAD);
289   }
290   static InstanceKlass* parse_stream(Symbol* class_name,
291                                      Handle class_loader,
292                                      Handle protection_domain,
293                                      ClassFileStream* st,
</pre>
<hr />
<pre>
363 public:
364   // Printing
365   static void print();
366   static void print_on(outputStream* st);
367   static void dump(outputStream* st, bool verbose);
368 
369   // Verification
370   static void verify();
371 
372   // Initialization
373   static void initialize(TRAPS);
374 
375   // Checked fast access to the well-known classes -- so that you don&#39;t try to use them
376   // before they are resolved.
377   static InstanceKlass* check_klass(InstanceKlass* k) {
378     assert(k != NULL, &quot;klass not loaded&quot;);
379     return k;
380   }
381 
382   static bool resolve_wk_klass(WKID id, TRAPS);

383   static void resolve_wk_klasses_until(WKID limit_id, WKID &amp;start_id, TRAPS);
384   static void resolve_wk_klasses_through(WKID end_id, WKID &amp;start_id, TRAPS) {
385     int limit = (int)end_id + 1;
386     resolve_wk_klasses_until((WKID) limit, start_id, THREAD);
387   }
388 public:
389   #define WK_KLASS(name) _well_known_klasses[SystemDictionary::WK_KLASS_ENUM_NAME(name)]
390 
391   #define WK_KLASS_DECLARE(name, symbol) \
392     static InstanceKlass* name() { return check_klass(_well_known_klasses[WK_KLASS_ENUM_NAME(name)]); } \
393     static InstanceKlass** name##_addr() {                                                              \
394       return &amp;_well_known_klasses[SystemDictionary::WK_KLASS_ENUM_NAME(name)];                          \
395     }                                                                                                   \
396     static bool name##_is_loaded() {                                                                    \
397       return is_wk_klass_loaded(WK_KLASS(name));                                                        \
398     }
399   WK_KLASSES_DO(WK_KLASS_DECLARE);
400   #undef WK_KLASS_DECLARE
401 
402   static InstanceKlass* well_known_klass(WKID id) {
</pre>
</td>
<td>
<hr />
<pre>
 59 // domain field of the dictionary entry has not yet been filled in when
 60 // the &quot;real&quot; dictionary entry is created.
 61 //
 62 // Clients of this class who are interested in finding if a class has
 63 // been completely loaded -- not classes in the process of being loaded --
 64 // can read the dictionary unlocked. This is safe because
 65 //    - entries are only deleted at safepoints
 66 //    - readers cannot come to a safepoint while actively examining
 67 //         an entry  (an entry cannot be deleted from under a reader)
 68 //    - entries must be fully formed before they are available to concurrent
 69 //         readers (we must ensure write ordering)
 70 //
 71 // Note that placeholders are deleted at any time, as they are removed
 72 // when a class is completely loaded. Therefore, readers as well as writers
 73 // of placeholders must hold the SystemDictionary_lock.
 74 //
 75 
 76 class BootstrapInfo;
 77 class ClassFileStream;
 78 class Dictionary;
<span class="line-added"> 79 class AllFieldStream;</span>
 80 class PlaceholderTable;
 81 class LoaderConstraintTable;
 82 template &lt;MEMFLAGS F&gt; class HashtableBucket;
 83 class ResolutionErrorTable;
 84 class SymbolPropertyTable;
 85 class ProtectionDomainCacheTable;
 86 class ProtectionDomainCacheEntry;
 87 class GCTimer;
 88 
 89 #define WK_KLASS_ENUM_NAME(kname)    kname##_knum
 90 
 91 // Certain classes, such as java.lang.Object and java.lang.String,
 92 // are &quot;well-known&quot;, in the sense that no class loader is allowed
 93 // to provide a different definition.
 94 //
 95 // Each well-known class has a short klass name (like object_klass),
 96 // and a vmSymbol name (like java_lang_Object).
 97 //
 98 // The order of these definitions is significant: the classes are
 99 // resolved during early VM start-up by resolve_well_known_classes
100 // in this order. Changing the order may require careful restructuring
101 // of the VM start-up sequence.
102 //
103 #define WK_KLASSES_DO(do_klass)                                                                                 \
104   /* well-known classes */                                                                                      \
105   do_klass(Object_klass,                                java_lang_Object                                      ) \
<span class="line-added">106   do_klass(IdentityObject_klass,                        java_lang_IdentityObject                              ) \</span>
107   do_klass(String_klass,                                java_lang_String                                      ) \
108   do_klass(Class_klass,                                 java_lang_Class                                       ) \
109   do_klass(Cloneable_klass,                             java_lang_Cloneable                                   ) \
110   do_klass(ClassLoader_klass,                           java_lang_ClassLoader                                 ) \
111   do_klass(Serializable_klass,                          java_io_Serializable                                  ) \
112   do_klass(System_klass,                                java_lang_System                                      ) \
113   do_klass(Throwable_klass,                             java_lang_Throwable                                   ) \
114   do_klass(Error_klass,                                 java_lang_Error                                       ) \
115   do_klass(ThreadDeath_klass,                           java_lang_ThreadDeath                                 ) \
116   do_klass(Exception_klass,                             java_lang_Exception                                   ) \
117   do_klass(RuntimeException_klass,                      java_lang_RuntimeException                            ) \
118   do_klass(SecurityManager_klass,                       java_lang_SecurityManager                             ) \
119   do_klass(ProtectionDomain_klass,                      java_security_ProtectionDomain                        ) \
120   do_klass(AccessControlContext_klass,                  java_security_AccessControlContext                    ) \
121   do_klass(AccessController_klass,                      java_security_AccessController                        ) \
122   do_klass(SecureClassLoader_klass,                     java_security_SecureClassLoader                       ) \
123   do_klass(ClassNotFoundException_klass,                java_lang_ClassNotFoundException                      ) \
124   do_klass(Record_klass,                                java_lang_Record                                      ) \
125   do_klass(NoClassDefFoundError_klass,                  java_lang_NoClassDefFoundError                        ) \
126   do_klass(LinkageError_klass,                          java_lang_LinkageError                                ) \
</pre>
<hr />
<pre>
157   do_klass(reflect_DelegatingClassLoader_klass,         reflect_DelegatingClassLoader                         ) \
158   do_klass(reflect_ConstantPool_klass,                  reflect_ConstantPool                                  ) \
159   do_klass(reflect_UnsafeStaticFieldAccessorImpl_klass, reflect_UnsafeStaticFieldAccessorImpl                 ) \
160   do_klass(reflect_CallerSensitive_klass,               reflect_CallerSensitive                               ) \
161   do_klass(reflect_NativeConstructorAccessorImpl_klass, reflect_NativeConstructorAccessorImpl                 ) \
162                                                                                                                 \
163   /* support for dynamic typing; it&#39;s OK if these are NULL in earlier JDKs */                                   \
164   do_klass(DirectMethodHandle_klass,                    java_lang_invoke_DirectMethodHandle                   ) \
165   do_klass(MethodHandle_klass,                          java_lang_invoke_MethodHandle                         ) \
166   do_klass(VarHandle_klass,                             java_lang_invoke_VarHandle                            ) \
167   do_klass(MemberName_klass,                            java_lang_invoke_MemberName                           ) \
168   do_klass(ResolvedMethodName_klass,                    java_lang_invoke_ResolvedMethodName                   ) \
169   do_klass(MethodHandleNatives_klass,                   java_lang_invoke_MethodHandleNatives                  ) \
170   do_klass(LambdaForm_klass,                            java_lang_invoke_LambdaForm                           ) \
171   do_klass(MethodType_klass,                            java_lang_invoke_MethodType                           ) \
172   do_klass(BootstrapMethodError_klass,                  java_lang_BootstrapMethodError                        ) \
173   do_klass(CallSite_klass,                              java_lang_invoke_CallSite                             ) \
174   do_klass(Context_klass,                               java_lang_invoke_MethodHandleNatives_CallSiteContext  ) \
175   do_klass(ConstantCallSite_klass,                      java_lang_invoke_ConstantCallSite                     ) \
176   do_klass(MutableCallSite_klass,                       java_lang_invoke_MutableCallSite                      ) \
<span class="line-added">177   do_klass(ValueBootstrapMethods_klass,                 java_lang_invoke_ValueBootstrapMethods                ) \</span>
178   do_klass(VolatileCallSite_klass,                      java_lang_invoke_VolatileCallSite                     ) \
179   /* Note: MethodHandle must be first, and VolatileCallSite last in group */                                    \
180                                                                                                                 \
181   do_klass(AssertionStatusDirectives_klass,             java_lang_AssertionStatusDirectives                   ) \
182   do_klass(StringBuffer_klass,                          java_lang_StringBuffer                                ) \
183   do_klass(StringBuilder_klass,                         java_lang_StringBuilder                               ) \
184   do_klass(UnsafeConstants_klass,                       jdk_internal_misc_UnsafeConstants                     ) \
185   do_klass(internal_Unsafe_klass,                       jdk_internal_misc_Unsafe                              ) \
186   do_klass(module_Modules_klass,                        jdk_internal_module_Modules                           ) \
187                                                                                                                 \
188   /* support for CDS */                                                                                         \
189   do_klass(ByteArrayInputStream_klass,                  java_io_ByteArrayInputStream                          ) \
190   do_klass(URL_klass,                                   java_net_URL                                          ) \
191   do_klass(Jar_Manifest_klass,                          java_util_jar_Manifest                                ) \
192   do_klass(jdk_internal_loader_ClassLoaders_klass,      jdk_internal_loader_ClassLoaders                      ) \
193   do_klass(jdk_internal_loader_ClassLoaders_AppClassLoader_klass,      jdk_internal_loader_ClassLoaders_AppClassLoader) \
194   do_klass(jdk_internal_loader_ClassLoaders_PlatformClassLoader_klass, jdk_internal_loader_ClassLoaders_PlatformClassLoader) \
195   do_klass(CodeSource_klass,                            java_security_CodeSource                              ) \
196                                                                                                                 \
197   do_klass(StackTraceElement_klass,                     java_lang_StackTraceElement                           ) \
</pre>
<hr />
<pre>
204   do_klass(AbstractStackWalker_klass,                   java_lang_StackStreamFactory_AbstractStackWalker      ) \
205   do_klass(StackFrameInfo_klass,                        java_lang_StackFrameInfo                              ) \
206   do_klass(LiveStackFrameInfo_klass,                    java_lang_LiveStackFrameInfo                          ) \
207                                                                                                                 \
208   /* support for stack dump lock analysis */                                                                    \
209   do_klass(java_util_concurrent_locks_AbstractOwnableSynchronizer_klass, java_util_concurrent_locks_AbstractOwnableSynchronizer) \
210                                                                                                                 \
211   /* boxing klasses */                                                                                          \
212   do_klass(Boolean_klass,                               java_lang_Boolean                                     ) \
213   do_klass(Character_klass,                             java_lang_Character                                   ) \
214   do_klass(Float_klass,                                 java_lang_Float                                       ) \
215   do_klass(Double_klass,                                java_lang_Double                                      ) \
216   do_klass(Byte_klass,                                  java_lang_Byte                                        ) \
217   do_klass(Short_klass,                                 java_lang_Short                                       ) \
218   do_klass(Integer_klass,                               java_lang_Integer                                     ) \
219   do_klass(Long_klass,                                  java_lang_Long                                        ) \
220                                                                                                                 \
221   /* force inline of iterators */                                                                               \
222   do_klass(Iterator_klass,                              java_util_Iterator                                    ) \
223                                                                                                                 \
<span class="line-added">224   do_klass(jdk_internal_vm_jni_SubElementSelector_klass, jdk_internal_vm_jni_SubElementSelector               ) \</span>
225   /* support for records */                                                                                     \
226   do_klass(RecordComponent_klass,                       java_lang_reflect_RecordComponent                     ) \
227                                                                                                                 \
228   /*end*/
229 
230 class SystemDictionary : AllStatic {
231   friend class BootstrapInfo;
232   friend class VMStructs;
233 
234  public:
235   enum WKID {
236     NO_WKID = 0,
237 
238     #define WK_KLASS_ENUM(name, symbol) WK_KLASS_ENUM_NAME(name), WK_KLASS_ENUM_NAME(symbol) = WK_KLASS_ENUM_NAME(name),
239     WK_KLASSES_DO(WK_KLASS_ENUM)
240     #undef WK_KLASS_ENUM
241 
242     WKID_LIMIT,
243 
244     FIRST_WKID = NO_WKID + 1
</pre>
<hr />
<pre>
258   static Klass* handle_resolution_exception(Symbol* class_name, bool throw_error, Klass* klass, TRAPS);
259 
260 public:
261 
262   // Returns a class with a given class name and class loader.
263   // Loads the class if needed. If not found NULL is returned.
264   static Klass* resolve_or_null(Symbol* class_name, Handle class_loader, Handle protection_domain, TRAPS);
265   // Version with null loader and protection domain
266   static Klass* resolve_or_null(Symbol* class_name, TRAPS);
267 
268   // Resolve a superclass or superinterface. Called from ClassFileParser,
269   // parse_interfaces, resolve_instance_class_or_null, load_shared_class
270   // &quot;child_name&quot; is the class whose super class or interface is being resolved.
271   static InstanceKlass* resolve_super_or_fail(Symbol* child_name,
272                                               Symbol* class_name,
273                                               Handle class_loader,
274                                               Handle protection_domain,
275                                               bool is_superclass,
276                                               TRAPS);
277 
<span class="line-added">278   static Klass* resolve_flattenable_field_or_fail(AllFieldStream* fs,</span>
<span class="line-added">279                                                   Handle class_loader,</span>
<span class="line-added">280                                                   Handle protection_domain,</span>
<span class="line-added">281                                                   bool throw_error,</span>
<span class="line-added">282                                                   TRAPS);</span>
<span class="line-added">283 </span>
284   // Parse new stream. This won&#39;t update the dictionary or
285   // class hierarchy, simply parse the stream. Used by JVMTI RedefineClasses.
286   // Also used by Unsafe_DefineAnonymousClass
287   static InstanceKlass* parse_stream(Symbol* class_name,
288                                      Handle class_loader,
289                                      Handle protection_domain,
290                                      ClassFileStream* st,
291                                      TRAPS) {
292     return parse_stream(class_name,
293                         class_loader,
294                         protection_domain,
295                         st,
296                         NULL, // unsafe_anonymous_host
297                         NULL, // cp_patches
298                         THREAD);
299   }
300   static InstanceKlass* parse_stream(Symbol* class_name,
301                                      Handle class_loader,
302                                      Handle protection_domain,
303                                      ClassFileStream* st,
</pre>
<hr />
<pre>
373 public:
374   // Printing
375   static void print();
376   static void print_on(outputStream* st);
377   static void dump(outputStream* st, bool verbose);
378 
379   // Verification
380   static void verify();
381 
382   // Initialization
383   static void initialize(TRAPS);
384 
385   // Checked fast access to the well-known classes -- so that you don&#39;t try to use them
386   // before they are resolved.
387   static InstanceKlass* check_klass(InstanceKlass* k) {
388     assert(k != NULL, &quot;klass not loaded&quot;);
389     return k;
390   }
391 
392   static bool resolve_wk_klass(WKID id, TRAPS);
<span class="line-added">393   static InstanceKlass* check_klass_ValhallaClasses(InstanceKlass* k) { return k; }</span>
394   static void resolve_wk_klasses_until(WKID limit_id, WKID &amp;start_id, TRAPS);
395   static void resolve_wk_klasses_through(WKID end_id, WKID &amp;start_id, TRAPS) {
396     int limit = (int)end_id + 1;
397     resolve_wk_klasses_until((WKID) limit, start_id, THREAD);
398   }
399 public:
400   #define WK_KLASS(name) _well_known_klasses[SystemDictionary::WK_KLASS_ENUM_NAME(name)]
401 
402   #define WK_KLASS_DECLARE(name, symbol) \
403     static InstanceKlass* name() { return check_klass(_well_known_klasses[WK_KLASS_ENUM_NAME(name)]); } \
404     static InstanceKlass** name##_addr() {                                                              \
405       return &amp;_well_known_klasses[SystemDictionary::WK_KLASS_ENUM_NAME(name)];                          \
406     }                                                                                                   \
407     static bool name##_is_loaded() {                                                                    \
408       return is_wk_klass_loaded(WK_KLASS(name));                                                        \
409     }
410   WK_KLASSES_DO(WK_KLASS_DECLARE);
411   #undef WK_KLASS_DECLARE
412 
413   static InstanceKlass* well_known_klass(WKID id) {
</pre>
</td>
</tr>
</table>
<center><a href="systemDictionary.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../code/compiledMethod.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>