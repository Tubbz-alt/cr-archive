<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/hotspot/jtreg/compiler/valhalla/valuetypes/TestLWorld.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="TestArrays.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="TestNullableArrays.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/compiler/valhalla/valuetypes/TestLWorld.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 2359,26 ***</span>
                                  () -&gt; { test88(src1, dst1, src2, dst2);
                                          Asserts.assertTrue(Arrays.equals(src1, dst1));
                                          Asserts.assertTrue(Arrays.equals(src2, dst2)); });
      }
  
<span class="line-modified">!     // Verify that the storage property bits in the klass pointer are</span>
<span class="line-removed">-     // not cleared if we are comparing to a klass that can&#39;t be a inline</span>
<span class="line-removed">-     // type array klass anyway.</span>
<span class="line-removed">-     @Test(failOn = STORAGE_PROPERTY_CLEARING)</span>
      public boolean test89(Object obj) {
          return obj.getClass() == Integer.class;
      }
  
      @DontCompile
      public void test89_verifier(boolean warmup) {
          Asserts.assertTrue(test89(new Integer(42)));
          Asserts.assertFalse(test89(new Object()));
      }
  
<span class="line-modified">!     // Same as test89 but with a cast</span>
<span class="line-removed">-     @Test(failOn = STORAGE_PROPERTY_CLEARING)</span>
      public Integer test90(Object obj) {
          return (Integer)obj;
      }
  
      @DontCompile
<span class="line-new-header">--- 2359,22 ---</span>
                                  () -&gt; { test88(src1, dst1, src2, dst2);
                                          Asserts.assertTrue(Arrays.equals(src1, dst1));
                                          Asserts.assertTrue(Arrays.equals(src2, dst2)); });
      }
  
<span class="line-modified">!     @Test</span>
      public boolean test89(Object obj) {
          return obj.getClass() == Integer.class;
      }
  
      @DontCompile
      public void test89_verifier(boolean warmup) {
          Asserts.assertTrue(test89(new Integer(42)));
          Asserts.assertFalse(test89(new Object()));
      }
  
<span class="line-modified">!     @Test</span>
      public Integer test90(Object obj) {
          return (Integer)obj;
      }
  
      @DontCompile
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2390,13 ***</span>
          } catch (ClassCastException e) {
              // Expected
          }
      }
  
<span class="line-modified">!     // Same as test89 but bit clearing can not be removed because</span>
<span class="line-removed">-     // we are comparing to a inline type array klass.</span>
<span class="line-removed">-     @Test(match = {STORAGE_PROPERTY_CLEARING}, matchCount = { 1 })</span>
      public boolean test91(Object obj) {
          return obj.getClass() == MyValue2[].class;
      }
  
      @DontCompile
<span class="line-new-header">--- 2386,11 ---</span>
          } catch (ClassCastException e) {
              // Expected
          }
      }
  
<span class="line-modified">!     @Test</span>
      public boolean test91(Object obj) {
          return obj.getClass() == MyValue2[].class;
      }
  
      @DontCompile
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2496,14 ***</span>
          array[3] = 0x42;
          int result = test94(array);
          Asserts.assertEquals(result, 0x42 * 2);
      }
  
<span class="line-removed">-     // Test that no code for clearing the array klass property bits is emitted for acmp</span>
<span class="line-removed">-     // because when loading the klass, we already know that the operand is a value type.</span>
      @Warmup(10000)
<span class="line-modified">!     @Test(failOn = STORAGE_PROPERTY_CLEARING)</span>
      public boolean test95(Object o1, Object o2) {
          return o1 == o2;
      }
  
      @DontCompile
<span class="line-new-header">--- 2490,12 ---</span>
          array[3] = 0x42;
          int result = test94(array);
          Asserts.assertEquals(result, 0x42 * 2);
      }
  
      @Warmup(10000)
<span class="line-modified">!     @Test</span>
      public boolean test95(Object o1, Object o2) {
          return o1 == o2;
      }
  
      @DontCompile
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2514,13 ***</span>
          Asserts.assertTrue(test95(null, null));
          Asserts.assertFalse(test95(o1, null));
          Asserts.assertFalse(test95(o1, o2));
      }
  
<span class="line-removed">-     // Same as test95 but operands are never null</span>
      @Warmup(10000)
<span class="line-modified">!     @Test(failOn = STORAGE_PROPERTY_CLEARING)</span>
      public boolean test96(Object o1, Object o2) {
          return o1 == o2;
      }
  
      @DontCompile
<span class="line-new-header">--- 2506,12 ---</span>
          Asserts.assertTrue(test95(null, null));
          Asserts.assertFalse(test95(o1, null));
          Asserts.assertFalse(test95(o1, o2));
      }
  
      @Warmup(10000)
<span class="line-modified">!     @Test</span>
      public boolean test96(Object o1, Object o2) {
          return o1 == o2;
      }
  
      @DontCompile
</pre>
<center><a href="TestArrays.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="TestNullableArrays.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>