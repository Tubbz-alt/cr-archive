<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/micro/org/openjdk/bench/valhalla/lworld/invoke/ObjectHashCodeExplicit.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../fields/Sum8.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ObjectHashCodeImplicit.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/micro/org/openjdk/bench/valhalla/lworld/invoke/ObjectHashCodeExplicit.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 28         public int hashCode() {
 29             return f0;
 30         }
 31     }
 32 
 33     public static inline class Val3 {
 34         public final int f0;
 35         public Val3(int f0) {
 36             this.f0 = f0;
 37         }
 38         @Override
 39         public int hashCode() {
 40             return f0;
 41         }
 42     }
 43 
 44 
 45     Val1[] values1;
 46     Val2[] values2;
 47     Val3[] values3;
<span class="line-modified"> 48     Val1?[] boxed1;</span>
<span class="line-modified"> 49     Val2?[] boxed2;</span>
<span class="line-modified"> 50     Val3?[] boxed3;</span>
 51 
 52     @Setup
 53     public void setup() {
 54         values1 = new Val1[SIZE];
 55         for (int i = 0; i &lt; SIZE; i++) {
 56             values1[i] = new Val1(42);
 57         }
 58         values2 = new Val2[SIZE];
 59         for (int i = 0; i &lt; SIZE; i++) {
 60             values2[i] = new Val2(42);
 61         }
 62         values3 = new Val3[SIZE];
 63         for (int i = 0; i &lt; SIZE; i++) {
 64             values3[i] = new Val3(42);
 65         }
<span class="line-modified"> 66         boxed1 = new Val1?[SIZE];</span>
 67         for (int i = 0; i &lt; SIZE; i++) {
 68             boxed1[i] = new Val1(42);
 69         }
<span class="line-modified"> 70         boxed2 = new Val2?[SIZE];</span>
 71         for (int i = 0; i &lt; SIZE; i++) {
 72             boxed2[i] = new Val2(42);
 73         }
<span class="line-modified"> 74         boxed3 = new Val3?[SIZE];</span>
 75         for (int i = 0; i &lt; SIZE; i++) {
 76             boxed3[i] = new Val3(42);
 77         }
 78     }
 79 
 80 
 81     @CompilerControl(CompilerControl.Mode.DONT_INLINE)
 82     public int hashObject(Object[] arr) {
 83         int r = 0;
 84         for(Object o : arr) {
 85             r += o.hashCode();
 86         }
 87         return r;
 88     }
 89 
 90     @CompilerControl(CompilerControl.Mode.DONT_INLINE)
 91     public int hashExact(Val1[] arr) {
 92         int r = 0;
 93         for(Val1 o : arr) {
 94             r += o.hashCode();
 95         }
 96         return r;
 97     }
 98 
 99     @CompilerControl(CompilerControl.Mode.DONT_INLINE)
<span class="line-modified">100     public int hashExactBoxed(Val1?[] arr) {</span>
101         int r = 0;
<span class="line-modified">102         for(Val1? o : arr) {</span>
103             r += o.hashCode();
104         }
105         return r;
106     }
107 
108     @Benchmark
109     @OperationsPerInvocation(SIZE * 6)
110     @CompilerControl(CompilerControl.Mode.INLINE)
111     public int value_exact() {
112         return hashExact(values1) +
113                hashExact(values1) +
114                hashExact(values1) +
115                hashExact(values1) +
116                hashExact(values1) +
117                hashExact(values1) ;
118     }
119 
120     @Benchmark
121     @OperationsPerInvocation(SIZE * 6)
122     @CompilerControl(CompilerControl.Mode.INLINE)
</pre>
<hr />
<pre>
185                 hashObject(values2) +
186                 hashObject(values1) +
187                 hashObject(values2) +
188                 hashObject(values1) +
189                 hashObject(values2) ;
190     }
191 
192     @Benchmark
193     @OperationsPerInvocation(SIZE * 6)
194     @CompilerControl(CompilerControl.Mode.INLINE)
195     public int covariance_targets3() {
196         return hashObject(values1) +
197                 hashObject(values2) +
198                 hashObject(values3) +
199                 hashObject(values1) +
200                 hashObject(values2) +
201                 hashObject(values3) ;
202     }
203 
204 
<span class="line-modified">205 }</span>
</pre>
</td>
<td>
<hr />
<pre>
 28         public int hashCode() {
 29             return f0;
 30         }
 31     }
 32 
 33     public static inline class Val3 {
 34         public final int f0;
 35         public Val3(int f0) {
 36             this.f0 = f0;
 37         }
 38         @Override
 39         public int hashCode() {
 40             return f0;
 41         }
 42     }
 43 
 44 
 45     Val1[] values1;
 46     Val2[] values2;
 47     Val3[] values3;
<span class="line-modified"> 48     Val1.ref[] boxed1;</span>
<span class="line-modified"> 49     Val2.ref[] boxed2;</span>
<span class="line-modified"> 50     Val3.ref[] boxed3;</span>
 51 
 52     @Setup
 53     public void setup() {
 54         values1 = new Val1[SIZE];
 55         for (int i = 0; i &lt; SIZE; i++) {
 56             values1[i] = new Val1(42);
 57         }
 58         values2 = new Val2[SIZE];
 59         for (int i = 0; i &lt; SIZE; i++) {
 60             values2[i] = new Val2(42);
 61         }
 62         values3 = new Val3[SIZE];
 63         for (int i = 0; i &lt; SIZE; i++) {
 64             values3[i] = new Val3(42);
 65         }
<span class="line-modified"> 66         boxed1 = new Val1.ref[SIZE];</span>
 67         for (int i = 0; i &lt; SIZE; i++) {
 68             boxed1[i] = new Val1(42);
 69         }
<span class="line-modified"> 70         boxed2 = new Val2.ref[SIZE];</span>
 71         for (int i = 0; i &lt; SIZE; i++) {
 72             boxed2[i] = new Val2(42);
 73         }
<span class="line-modified"> 74         boxed3 = new Val3.ref[SIZE];</span>
 75         for (int i = 0; i &lt; SIZE; i++) {
 76             boxed3[i] = new Val3(42);
 77         }
 78     }
 79 
 80 
 81     @CompilerControl(CompilerControl.Mode.DONT_INLINE)
 82     public int hashObject(Object[] arr) {
 83         int r = 0;
 84         for(Object o : arr) {
 85             r += o.hashCode();
 86         }
 87         return r;
 88     }
 89 
 90     @CompilerControl(CompilerControl.Mode.DONT_INLINE)
 91     public int hashExact(Val1[] arr) {
 92         int r = 0;
 93         for(Val1 o : arr) {
 94             r += o.hashCode();
 95         }
 96         return r;
 97     }
 98 
 99     @CompilerControl(CompilerControl.Mode.DONT_INLINE)
<span class="line-modified">100     public int hashExactBoxed(Val1.ref[] arr) {</span>
101         int r = 0;
<span class="line-modified">102         for(Val1.ref o : arr) {</span>
103             r += o.hashCode();
104         }
105         return r;
106     }
107 
108     @Benchmark
109     @OperationsPerInvocation(SIZE * 6)
110     @CompilerControl(CompilerControl.Mode.INLINE)
111     public int value_exact() {
112         return hashExact(values1) +
113                hashExact(values1) +
114                hashExact(values1) +
115                hashExact(values1) +
116                hashExact(values1) +
117                hashExact(values1) ;
118     }
119 
120     @Benchmark
121     @OperationsPerInvocation(SIZE * 6)
122     @CompilerControl(CompilerControl.Mode.INLINE)
</pre>
<hr />
<pre>
185                 hashObject(values2) +
186                 hashObject(values1) +
187                 hashObject(values2) +
188                 hashObject(values1) +
189                 hashObject(values2) ;
190     }
191 
192     @Benchmark
193     @OperationsPerInvocation(SIZE * 6)
194     @CompilerControl(CompilerControl.Mode.INLINE)
195     public int covariance_targets3() {
196         return hashObject(values1) +
197                 hashObject(values2) +
198                 hashObject(values3) +
199                 hashObject(values1) +
200                 hashObject(values2) +
201                 hashObject(values3) ;
202     }
203 
204 
<span class="line-modified">205 }</span>
</pre>
</td>
</tr>
</table>
<center><a href="../fields/Sum8.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ObjectHashCodeImplicit.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>