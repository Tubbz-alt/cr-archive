<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames test/micro/org/openjdk/bench/valhalla/lworld/traversal/Boxed.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 package org.openjdk.bench.valhalla.lworld.traversal;
  2 
  3 import org.openjdk.jmh.annotations.Benchmark;
  4 import org.openjdk.jmh.annotations.CompilerControl;
  5 import org.openjdk.jmh.annotations.OperationsPerInvocation;
  6 import org.openjdk.jmh.annotations.Setup;
  7 import org.openjdk.bench.valhalla.TraversalBase;
  8 import org.openjdk.bench.valhalla.lworld.types.Val1;
  9 
 10 public abstract class Boxed extends TraversalBase {
 11 
<a name="1" id="anc1"></a><span class="line-modified"> 12     Val1?[] values;</span>
 13 
 14     public void setup(int[] a) {
<a name="2" id="anc2"></a><span class="line-modified"> 15         values = new Val1?[a.length];</span>
 16         for (int i = 0; i &lt; a.length; i++) {
 17             values[i] = new Val1(a[i]);
 18         }
 19     }
 20 
 21     @CompilerControl(CompilerControl.Mode.INLINE)
<a name="3" id="anc3"></a><span class="line-modified"> 22     public static int walk(Val1?[] a) {</span>
 23         int steps = 0;
 24         for(int i = a[0].reduce(); i!=0; i=a[i].reduce()) steps++;
 25         return steps;
 26     }
 27 
 28 
 29     public static class W0001 extends Boxed {
 30 
 31         private static final int SIZE = 1*K;
 32 
 33         @Setup
 34         public void setup() {
 35             setup(prepare(SIZE, shuffle));
 36         }
 37 
 38         @Benchmark
 39         @OperationsPerInvocation(SIZE)
 40         public int walk() {
 41             return walk(values);
 42         }
 43     }
 44 
 45     public static class W0004 extends Boxed {
 46 
 47         private static final int SIZE = 4*K;
 48 
 49         @Setup
 50         public void setup() {
 51             setup(prepare(SIZE, shuffle));
 52         }
 53 
 54         @Benchmark
 55         @OperationsPerInvocation(SIZE)
 56         public int walk() {
 57             return walk(values);
 58         }
 59     }
 60 
 61     public static class W0016 extends Boxed {
 62 
 63         private static final int SIZE = 16*K;
 64 
 65         @Setup
 66         public void setup() {
 67             setup(prepare(SIZE, shuffle));
 68         }
 69 
 70         @Benchmark
 71         @OperationsPerInvocation(SIZE)
 72         public int walk() {
 73             return walk(values);
 74         }
 75     }
 76 
 77     public static class W0032 extends Boxed {
 78 
 79         private static final int SIZE = 32*K;
 80 
 81         @Setup
 82         public void setup() {
 83             setup(prepare(SIZE, shuffle));
 84         }
 85 
 86         @Benchmark
 87         @OperationsPerInvocation(SIZE)
 88         public int walk() {
 89             return walk(values);
 90         }
 91     }
 92 
 93     public static class W0128 extends Boxed {
 94 
 95         private static final int SIZE = 128*K;
 96 
 97         @Setup
 98         public void setup() {
 99             setup(prepare(SIZE, shuffle));
100         }
101 
102         @Benchmark
103         @OperationsPerInvocation(SIZE)
104         public int walk() {
105             return walk(values);
106         }
107     }
108 
109     public static class W0256 extends Boxed {
110 
111         private static final int SIZE = 256*K;
112 
113         @Setup
114         public void setup() {
115             setup(prepare(SIZE, shuffle));
116         }
117 
118         @Benchmark
119         @OperationsPerInvocation(SIZE)
120         public int walk() {
121             return walk(values);
122         }
123     }
124 
125     public static class W1024 extends Boxed {
126 
127         private static final int SIZE = 1024*K;
128 
129         @Setup
130         public void setup() {
131             setup(prepare(SIZE, shuffle));
132         }
133 
134         @Benchmark
135         @OperationsPerInvocation(SIZE)
136         public int walk() {
137             return walk(values);
138         }
139     }
140 
141 
142 }
<a name="4" id="anc4"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="4" type="hidden" />
</body>
</html>