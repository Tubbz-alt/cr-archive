<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/builders/MemberSummaryBuilder.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FieldBuilder.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="MethodBuilder.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/builders/MemberSummaryBuilder.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -37,11 +37,10 @@</span>
  
  import com.sun.source.doctree.DocCommentTree;
  import com.sun.source.doctree.DocTree;
  import com.sun.source.doctree.DocTree.Kind;
  import com.sun.source.doctree.UnknownBlockTagTree;
<span class="udiff-line-removed">- import jdk.javadoc.internal.doclets.toolkit.AnnotationTypeWriter;</span>
  import jdk.javadoc.internal.doclets.toolkit.ClassWriter;
  import jdk.javadoc.internal.doclets.toolkit.Content;
  import jdk.javadoc.internal.doclets.toolkit.MemberSummaryWriter;
  import jdk.javadoc.internal.doclets.toolkit.WriterFactory;
  import jdk.javadoc.internal.doclets.toolkit.util.CommentHelper;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -83,11 +82,11 @@</span>
       * @param typeElement   the type element.
       */
      private MemberSummaryBuilder(Context context, TypeElement typeElement) {
          super(context, typeElement);
          memberSummaryWriters = new EnumMap&lt;&gt;(VisibleMemberTable.Kind.class);
<span class="udiff-line-modified-removed">-         comparator = utils.makeIndexUseComparator();</span>
<span class="udiff-line-modified-added">+         comparator = utils.comparators.makeIndexElementComparator();</span>
          pHelper = new PropertyHelper(this);
      }
  
      /**
       * Construct a new MemberSummaryBuilder for a general type.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -103,10 +102,12 @@</span>
              @Override
              public void build(Content contentTree) {
                  buildPropertiesSummary(contentTree);
                  buildNestedClassesSummary(contentTree);
                  buildEnumConstantsSummary(contentTree);
<span class="udiff-line-added">+                 buildAnnotationTypeRequiredMemberSummary(contentTree);</span>
<span class="udiff-line-added">+                 buildAnnotationTypeOptionalMemberSummary(contentTree);</span>
                  buildFieldsSummary(contentTree);
                  buildConstructorsSummary(contentTree);
                  buildMethodsSummary(contentTree);
              }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -123,44 +124,10 @@</span>
              builder.memberSummaryWriters.put(kind, msw);
          }
          return builder;
      }
  
<span class="udiff-line-removed">-     /**</span>
<span class="udiff-line-removed">-      * Construct a new MemberSummaryBuilder for an annotation type.</span>
<span class="udiff-line-removed">-      *</span>
<span class="udiff-line-removed">-      * @param annotationTypeWriter the writer for the class whose members are</span>
<span class="udiff-line-removed">-      *                             being summarized.</span>
<span class="udiff-line-removed">-      * @param context       the build context.</span>
<span class="udiff-line-removed">-      * @return              the instance</span>
<span class="udiff-line-removed">-      */</span>
<span class="udiff-line-removed">-     public static MemberSummaryBuilder getInstance(</span>
<span class="udiff-line-removed">-             AnnotationTypeWriter annotationTypeWriter, Context context) {</span>
<span class="udiff-line-removed">-         MemberSummaryBuilder builder = new MemberSummaryBuilder(context,</span>
<span class="udiff-line-removed">-                 annotationTypeWriter.getAnnotationTypeElement()) {</span>
<span class="udiff-line-removed">-             @Override</span>
<span class="udiff-line-removed">-             public void build(Content contentTree) {</span>
<span class="udiff-line-removed">-                 buildAnnotationTypeFieldsSummary(contentTree);</span>
<span class="udiff-line-removed">-                 buildAnnotationTypeRequiredMemberSummary(contentTree);</span>
<span class="udiff-line-removed">-                 buildAnnotationTypeOptionalMemberSummary(contentTree);</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-             @Override</span>
<span class="udiff-line-removed">-             public boolean hasMembersToDocument() {</span>
<span class="udiff-line-removed">-                 return !utils.getAnnotationMembers(typeElement).isEmpty();</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">-         };</span>
<span class="udiff-line-removed">-         WriterFactory wf = context.configuration.getWriterFactory();</span>
<span class="udiff-line-removed">-         for (VisibleMemberTable.Kind kind : VisibleMemberTable.Kind.values()) {</span>
<span class="udiff-line-removed">-             MemberSummaryWriter msw = builder.getVisibleMemberTable().hasVisibleMembers(kind)</span>
<span class="udiff-line-removed">-                     ? wf.getMemberSummaryWriter(annotationTypeWriter, kind)</span>
<span class="udiff-line-removed">-                     : null;</span>
<span class="udiff-line-removed">-             builder.memberSummaryWriters.put(kind, msw);</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-removed">-         return builder;</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
      /**
       * Return the specified visible member map.
       *
       * @return the specified visible member map.
       * @throws ArrayIndexOutOfBoundsException when the type is invalid.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -220,12 +187,12 @@</span>
       * Build the summary for fields.
       *
       * @param memberSummaryTree the content tree to which the documentation will be added
       */
      protected void buildAnnotationTypeFieldsSummary(Content memberSummaryTree) {
<span class="udiff-line-modified-removed">-         MemberSummaryWriter writer = memberSummaryWriters.get(ANNOTATION_TYPE_FIELDS);</span>
<span class="udiff-line-modified-removed">-         addSummary(writer, ANNOTATION_TYPE_FIELDS, false, memberSummaryTree);</span>
<span class="udiff-line-modified-added">+         MemberSummaryWriter writer = memberSummaryWriters.get(FIELDS);</span>
<span class="udiff-line-modified-added">+         addSummary(writer, FIELDS, false, memberSummaryTree);</span>
      }
  
      /**
       * Build the summary for the optional members.
       *
</pre>
<center><a href="FieldBuilder.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="MethodBuilder.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>