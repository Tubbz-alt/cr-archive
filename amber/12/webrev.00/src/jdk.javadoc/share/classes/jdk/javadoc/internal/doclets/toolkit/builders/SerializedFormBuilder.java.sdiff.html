<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/builders/SerializedFormBuilder.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="PropertyBuilder.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../resources/doclets.properties.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/builders/SerializedFormBuilder.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
100         super(context);
101     }
102 
103     /**
104      * Construct a new SerializedFormBuilder.
105      *
106      * @param context  the build context.
107      * @return the new SerializedFormBuilder
108      */
109     public static SerializedFormBuilder getInstance(Context context) {
110         return new SerializedFormBuilder(context);
111     }
112 
113     /**
114      * Build the serialized form.
115      *
116      * @throws DocletException if there is a problem while building the documentation
117      */
118     @Override
119     public void build() throws DocletException {
<span class="line-modified">120         SortedSet&lt;TypeElement&gt; rootclasses = new TreeSet&lt;&gt;(utils.makeGeneralPurposeComparator());</span>
121         rootclasses.addAll(configuration.getIncludedTypeElements());
122         if (!serialClassFoundToDocument(rootclasses)) {
123             //Nothing to document.
124             return;
125         }
126         writer = configuration.getWriterFactory().getSerializedFormWriter();
127         if (writer == null) {
128             //Doclet does not support this output.
129             return;
130         }
131         buildSerializedForm();
132     }
133 
134     /**
135      * Build the serialized form.
136      *
137      * @throws DocletException if there is a problem while building the documentation
138      */
139     protected void buildSerializedForm() throws DocletException {
140         Content contentTree = writer.getHeader(resources.getText(
</pre>
<hr />
<pre>
453         if (!utils.definesSerializableFields(currentTypeElement)) {
454             fieldWriter.addMemberDeprecatedInfo((VariableElement)currentMember,
455                     fieldsContentTree);
456         }
457     }
458 
459     /**
460      * Build the serial field tags information.
461      *
462      * @param serializableFieldsTree content tree to which the documentation will be added
463      */
464     protected void buildSerialFieldTagsInfo(Content serializableFieldsTree) {
465         if (options.noComment()) {
466             return;
467         }
468         VariableElement field = (VariableElement)currentMember;
469         // Process Serializable Fields specified as array of
470         // ObjectStreamFields. Print a member for each serialField tag.
471         // (There should be one serialField tag per ObjectStreamField
472         // element.)
<span class="line-modified">473         SortedSet&lt;SerialFieldTree&gt; tags = new TreeSet&lt;&gt;(utils.makeSerialFieldTreeComparator());</span>
474         // sort the elements
475         for (DocTree dt : utils.getSerialFieldTrees(field)) {
476             SerialFieldTree st = (SerialFieldTree) dt;
477             tags.add(st);
478         }
479 
480         CommentHelper ch = utils.getCommentHelper(field);
481         for (SerialFieldTree tag : tags) {
482             if (tag.getName() == null || tag.getType() == null)  // ignore malformed @serialField tags
483                 continue;
484             Content fieldsContentTree = fieldWriter.getFieldsContentHeader(tag.equals(tags.last()));
485             TypeElement te = ch.getReferencedClass(tag);
486             String fieldType = ch.getReferencedMemberName(tag);
487             if (te != null &amp;&amp; utils.isPrimitive(te.asType())) {
488                 fieldType = utils.getTypeName(te.asType(), false);
489                 te = null;
490             }
491             String refSignature = ch.getReferencedSignature(tag);
492             // TODO: Print the signature directly, if it is an array, the
493             // current DocTree APIs makes it very hard to distinguish
</pre>
</td>
<td>
<hr />
<pre>
100         super(context);
101     }
102 
103     /**
104      * Construct a new SerializedFormBuilder.
105      *
106      * @param context  the build context.
107      * @return the new SerializedFormBuilder
108      */
109     public static SerializedFormBuilder getInstance(Context context) {
110         return new SerializedFormBuilder(context);
111     }
112 
113     /**
114      * Build the serialized form.
115      *
116      * @throws DocletException if there is a problem while building the documentation
117      */
118     @Override
119     public void build() throws DocletException {
<span class="line-modified">120         SortedSet&lt;TypeElement&gt; rootclasses = new TreeSet&lt;&gt;(utils.comparators.makeGeneralPurposeComparator());</span>
121         rootclasses.addAll(configuration.getIncludedTypeElements());
122         if (!serialClassFoundToDocument(rootclasses)) {
123             //Nothing to document.
124             return;
125         }
126         writer = configuration.getWriterFactory().getSerializedFormWriter();
127         if (writer == null) {
128             //Doclet does not support this output.
129             return;
130         }
131         buildSerializedForm();
132     }
133 
134     /**
135      * Build the serialized form.
136      *
137      * @throws DocletException if there is a problem while building the documentation
138      */
139     protected void buildSerializedForm() throws DocletException {
140         Content contentTree = writer.getHeader(resources.getText(
</pre>
<hr />
<pre>
453         if (!utils.definesSerializableFields(currentTypeElement)) {
454             fieldWriter.addMemberDeprecatedInfo((VariableElement)currentMember,
455                     fieldsContentTree);
456         }
457     }
458 
459     /**
460      * Build the serial field tags information.
461      *
462      * @param serializableFieldsTree content tree to which the documentation will be added
463      */
464     protected void buildSerialFieldTagsInfo(Content serializableFieldsTree) {
465         if (options.noComment()) {
466             return;
467         }
468         VariableElement field = (VariableElement)currentMember;
469         // Process Serializable Fields specified as array of
470         // ObjectStreamFields. Print a member for each serialField tag.
471         // (There should be one serialField tag per ObjectStreamField
472         // element.)
<span class="line-modified">473         SortedSet&lt;SerialFieldTree&gt; tags = new TreeSet&lt;&gt;(utils.comparators.makeSerialFieldTreeComparator());</span>
474         // sort the elements
475         for (DocTree dt : utils.getSerialFieldTrees(field)) {
476             SerialFieldTree st = (SerialFieldTree) dt;
477             tags.add(st);
478         }
479 
480         CommentHelper ch = utils.getCommentHelper(field);
481         for (SerialFieldTree tag : tags) {
482             if (tag.getName() == null || tag.getType() == null)  // ignore malformed @serialField tags
483                 continue;
484             Content fieldsContentTree = fieldWriter.getFieldsContentHeader(tag.equals(tags.last()));
485             TypeElement te = ch.getReferencedClass(tag);
486             String fieldType = ch.getReferencedMemberName(tag);
487             if (te != null &amp;&amp; utils.isPrimitive(te.asType())) {
488                 fieldType = utils.getTypeName(te.asType(), false);
489                 te = null;
490             }
491             String refSignature = ch.getReferencedSignature(tag);
492             // TODO: Print the signature directly, if it is an array, the
493             // current DocTree APIs makes it very hard to distinguish
</pre>
</td>
</tr>
</table>
<center><a href="PropertyBuilder.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../resources/doclets.properties.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>