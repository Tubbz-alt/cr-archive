<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/HelpWriter.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Headings.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="HtmlDoclet.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/HelpWriter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package jdk.javadoc.internal.doclets.formats.html;
 27 


 28 import jdk.javadoc.internal.doclets.formats.html.markup.BodyContents;
 29 import jdk.javadoc.internal.doclets.formats.html.markup.ContentBuilder;
 30 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyle;
<span class="line-modified"> 31 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTag;</span>
 32 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTree;
<span class="line-modified"> 33 import jdk.javadoc.internal.doclets.formats.html.markup.Navigation;</span>
<span class="line-removed"> 34 import jdk.javadoc.internal.doclets.formats.html.markup.Navigation.PageMode;</span>
 35 import jdk.javadoc.internal.doclets.formats.html.markup.StringContent;
 36 import jdk.javadoc.internal.doclets.toolkit.Content;
 37 import jdk.javadoc.internal.doclets.toolkit.util.DocFileIOException;
 38 import jdk.javadoc.internal.doclets.toolkit.util.DocPath;
 39 import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;
 40 
 41 
 42 /**
 43  * Generate the Help File for the generated API documentation. The help file
 44  * contents are helpful for browsing the generated documentation.
 45  *
 46  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
 47  *  If you write code that depends on this, you do so at your own risk.
 48  *  This code and its internal interfaces are subject to change or
 49  *  deletion without notice.&lt;/b&gt;
 50  */
 51 public class HelpWriter extends HtmlDocletWriter {
 52 
 53     private final Navigation navBar;
 54 
</pre>
<hr />
<pre>
 78      * @param configuration the configuration
 79      * @throws DocFileIOException if there is a problem while generating the documentation
 80      */
 81     public static void generate(HtmlConfiguration configuration) throws DocFileIOException {
 82         DocPath filename = DocPaths.HELP_DOC;
 83         HelpWriter helpgen = new HelpWriter(configuration, filename);
 84         helpgen.generateHelpFile();
 85     }
 86 
 87     /**
 88      * Generate the help file contents.
 89      *
 90      * @throws DocFileIOException if there is a problem while generating the documentation
 91      */
 92     protected void generateHelpFile() throws DocFileIOException {
 93         String title = resources.getText(&quot;doclet.Window_Help_title&quot;);
 94         HtmlTree body = getBody(getWindowTitle(title));
 95         Content headerContent = new ContentBuilder();
 96         addTop(headerContent);
 97         navBar.setUserHeader(getUserHeaderFooter(true));
<span class="line-modified"> 98         headerContent.add(navBar.getContent(true));</span>
 99         ContentBuilder helpFileContent = new ContentBuilder();
100         addHelpFileContents(helpFileContent);
101         HtmlTree footer = HtmlTree.FOOTER();
102         navBar.setUserFooter(getUserHeaderFooter(false));
<span class="line-modified">103         footer.add(navBar.getContent(false));</span>
104         addBottom(footer);
105         body.add(new BodyContents()
106                 .setHeader(headerContent)
107                 .addMainContent(helpFileContent)
<span class="line-modified">108                 .setFooter(footer)</span>
<span class="line-removed">109                 .toContent());</span>
110         printHtmlDocument(null, &quot;help&quot;, body);
111     }
112 
113     /**
114      * Add the help file contents from the resource file to the content tree. While adding the
115      * help file contents it also keeps track of user options. If &quot;-notree&quot;
116      * is used, then the &quot;overview-tree.html&quot; will not get added and hence
117      * help information also will not get added.
118      *
119      * @param contentTree the content tree to which the help file contents will be added
120      */
121     protected void addHelpFileContents(Content contentTree) {
122         // Heading
<span class="line-modified">123         Content heading = HtmlTree.HEADING(Headings.PAGE_TITLE_HEADING, false, HtmlStyle.title,</span>
<span class="line-modified">124                 contents.getContent(&quot;doclet.help.main_heading&quot;));</span>
125         Content div = HtmlTree.DIV(HtmlStyle.header, heading);
126         Content intro = HtmlTree.DIV(HtmlStyle.subTitle,
<span class="line-modified">127                 contents.getContent(&quot;doclet.help.intro&quot;));</span>
128         div.add(intro);
129         contentTree.add(div);
<span class="line-modified">130         HtmlTree htmlTree;</span>
<span class="line-modified">131         HtmlTree ul = new HtmlTree(HtmlTag.UL);</span>
<span class="line-removed">132         ul.setStyle(HtmlStyle.blockList);</span>
133 
134         // Overview
135         if (options.createOverview()) {
<span class="line-modified">136             Content overviewHeading = HtmlTree.HEADING(Headings.CONTENT_HEADING,</span>
<span class="line-removed">137                 contents.overviewLabel);</span>
<span class="line-removed">138             htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, overviewHeading);</span>
139             String overviewKey = configuration.showModules
140                     ? &quot;doclet.help.overview.modules.body&quot;
141                     : &quot;doclet.help.overview.packages.body&quot;;
142             Content overviewLink = links.createLink(
143                     DocPaths.INDEX, resources.getText(&quot;doclet.Overview&quot;));
<span class="line-modified">144             Content overviewBody = contents.getContent(overviewKey, overviewLink);</span>
<span class="line-modified">145             Content overviewPara = HtmlTree.P(overviewBody);</span>
<span class="line-removed">146             htmlTree.add(overviewPara);</span>
<span class="line-removed">147             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>
148         }
149 
150         // Module
151         if (configuration.showModules) {
<span class="line-modified">152             Content moduleHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,</span>
<span class="line-modified">153                     contents.moduleLabel);</span>
<span class="line-removed">154             htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, moduleHead);</span>
<span class="line-removed">155             Content moduleIntro = contents.getContent(&quot;doclet.help.module.intro&quot;);</span>
156             Content modulePara = HtmlTree.P(moduleIntro);
<span class="line-modified">157             htmlTree.add(modulePara);</span>
<span class="line-modified">158             HtmlTree ulModule = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">159             ulModule.add(HtmlTree.LI(contents.packagesLabel));</span>
<span class="line-modified">160             ulModule.add(HtmlTree.LI(contents.modulesLabel));</span>
<span class="line-modified">161             ulModule.add(HtmlTree.LI(contents.servicesLabel));</span>
<span class="line-modified">162             htmlTree.add(ulModule);</span>
<span class="line-removed">163             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>
164         }
165 
166         // Package
<span class="line-modified">167         Content packageHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,</span>
<span class="line-modified">168                 contents.packageLabel);</span>
<span class="line-modified">169         htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, packageHead);</span>
<span class="line-modified">170         Content packageIntro = contents.getContent(&quot;doclet.help.package.intro&quot;);</span>
<span class="line-modified">171         Content packagePara = HtmlTree.P(packageIntro);</span>
<span class="line-modified">172         htmlTree.add(packagePara);</span>
<span class="line-modified">173         HtmlTree ulPackage = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">174         ulPackage.add(HtmlTree.LI(contents.interfaces));</span>
<span class="line-modified">175         ulPackage.add(HtmlTree.LI(contents.classes));</span>
<span class="line-modified">176         ulPackage.add(HtmlTree.LI(contents.enums));</span>
<span class="line-removed">177         ulPackage.add(HtmlTree.LI(contents.exceptions));</span>
<span class="line-removed">178         ulPackage.add(HtmlTree.LI(contents.errors));</span>
<span class="line-removed">179         ulPackage.add(HtmlTree.LI(contents.annotationTypes));</span>
<span class="line-removed">180         htmlTree.add(ulPackage);</span>
<span class="line-removed">181         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>
182 
183         // Class/interface
<span class="line-modified">184         Content classHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,</span>
<span class="line-modified">185                 contents.getContent(&quot;doclet.help.class_interface.head&quot;));</span>
<span class="line-modified">186         htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, classHead);</span>
<span class="line-modified">187         Content classIntro = contents.getContent(&quot;doclet.help.class_interface.intro&quot;);</span>
<span class="line-modified">188         Content classPara = HtmlTree.P(classIntro);</span>
<span class="line-modified">189         htmlTree.add(classPara);</span>
<span class="line-modified">190         HtmlTree ul1 = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">191         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.inheritance_diagram&quot;)));</span>
<span class="line-modified">192         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.subclasses&quot;)));</span>
<span class="line-modified">193         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.subinterfaces&quot;)));</span>
<span class="line-modified">194         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.implementations&quot;)));</span>
<span class="line-modified">195         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.declaration&quot;)));</span>
<span class="line-modified">196         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.description&quot;)));</span>
<span class="line-modified">197         htmlTree.add(ul1);</span>
<span class="line-modified">198         htmlTree.add(new HtmlTree(HtmlTag.BR));</span>
<span class="line-modified">199         HtmlTree ul2 = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">200         ul2.add(HtmlTree.LI(contents.nestedClassSummary));</span>
<span class="line-modified">201         ul2.add(HtmlTree.LI(contents.fieldSummaryLabel));</span>
<span class="line-modified">202         ul2.add(HtmlTree.LI(contents.propertySummaryLabel));</span>
<span class="line-modified">203         ul2.add(HtmlTree.LI(contents.constructorSummaryLabel));</span>
<span class="line-modified">204         ul2.add(HtmlTree.LI(contents.methodSummary));</span>
<span class="line-modified">205         htmlTree.add(ul2);</span>
<span class="line-modified">206         htmlTree.add(new HtmlTree(HtmlTag.BR));</span>
<span class="line-modified">207         HtmlTree ul3 = new HtmlTree(HtmlTag.UL);</span>
<span class="line-removed">208         ul3.add(HtmlTree.LI(contents.fieldDetailsLabel));</span>
<span class="line-removed">209         ul3.add(HtmlTree.LI(contents.propertyDetailsLabel));</span>
<span class="line-removed">210         ul3.add(HtmlTree.LI(contents.constructorDetailsLabel));</span>
<span class="line-removed">211         ul3.add(HtmlTree.LI(contents.methodDetailLabel));</span>
<span class="line-removed">212         htmlTree.add(ul3);</span>
<span class="line-removed">213         Content classSummary = contents.getContent(&quot;doclet.help.class_interface.summary&quot;);</span>
<span class="line-removed">214         Content para = HtmlTree.P(classSummary);</span>
<span class="line-removed">215         htmlTree.add(para);</span>
<span class="line-removed">216         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>
217 
218         // Annotation Types
<span class="line-modified">219         Content aHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,</span>
<span class="line-modified">220                 contents.annotationType);</span>
<span class="line-modified">221         htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, aHead);</span>
<span class="line-modified">222         Content aIntro = contents.getContent(&quot;doclet.help.annotation_type.intro&quot;);</span>
<span class="line-modified">223         Content aPara = HtmlTree.P(aIntro);</span>
<span class="line-modified">224         htmlTree.add(aPara);</span>
<span class="line-modified">225         HtmlTree aul = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">226         aul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.annotation_type.declaration&quot;)));</span>
<span class="line-modified">227         aul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.annotation_type.description&quot;)));</span>
<span class="line-removed">228         aul.add(HtmlTree.LI(contents.annotateTypeRequiredMemberSummaryLabel));</span>
<span class="line-removed">229         aul.add(HtmlTree.LI(contents.annotateTypeOptionalMemberSummaryLabel));</span>
<span class="line-removed">230         aul.add(HtmlTree.LI(contents.annotationTypeMemberDetail));</span>
<span class="line-removed">231         htmlTree.add(aul);</span>
<span class="line-removed">232         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>
233 
234         // Enums
<span class="line-modified">235         Content enumHead = HtmlTree.HEADING(Headings.CONTENT_HEADING, contents.enum_);</span>
<span class="line-modified">236         htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, enumHead);</span>
<span class="line-modified">237         Content eIntro = contents.getContent(&quot;doclet.help.enum.intro&quot;);</span>
<span class="line-modified">238         Content enumPara = HtmlTree.P(eIntro);</span>
<span class="line-modified">239         htmlTree.add(enumPara);</span>
<span class="line-modified">240         HtmlTree eul = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">241         eul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.enum.declaration&quot;)));</span>
<span class="line-modified">242         eul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.enum.definition&quot;)));</span>
<span class="line-removed">243         eul.add(HtmlTree.LI(contents.enumConstantSummary));</span>
<span class="line-removed">244         eul.add(HtmlTree.LI(contents.enumConstantDetailLabel));</span>
<span class="line-removed">245         htmlTree.add(eul);</span>
<span class="line-removed">246         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>
247 
248         // Class Use
249         if (options.classUse()) {
<span class="line-modified">250             Content useHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,</span>
<span class="line-modified">251                     contents.getContent(&quot;doclet.help.use.head&quot;));</span>
<span class="line-modified">252             htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, useHead);</span>
<span class="line-removed">253             Content useBody = contents.getContent(&quot;doclet.help.use.body&quot;);</span>
<span class="line-removed">254             Content usePara = HtmlTree.P(useBody);</span>
<span class="line-removed">255             htmlTree.add(usePara);</span>
<span class="line-removed">256             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>
257         }
258 
259         // Tree
260         if (options.createTree()) {
<span class="line-modified">261             Content treeHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,</span>
<span class="line-modified">262                     contents.getContent(&quot;doclet.help.tree.head&quot;));</span>
<span class="line-modified">263             htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, treeHead);</span>
<span class="line-removed">264             Content treeIntro = contents.getContent(&quot;doclet.help.tree.intro&quot;,</span>
<span class="line-removed">265                     links.createLink(DocPaths.OVERVIEW_TREE,</span>
<span class="line-removed">266                     resources.getText(&quot;doclet.Class_Hierarchy&quot;)),</span>
267                     HtmlTree.CODE(new StringContent(&quot;java.lang.Object&quot;)));
<span class="line-modified">268             Content treePara = HtmlTree.P(treeIntro);</span>
<span class="line-modified">269             htmlTree.add(treePara);</span>
<span class="line-modified">270             HtmlTree tul = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">271             tul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.tree.overview&quot;)));</span>
<span class="line-modified">272             tul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.tree.package&quot;)));</span>
<span class="line-removed">273             htmlTree.add(tul);</span>
<span class="line-removed">274             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>
275         }
276 
277         // Deprecated
278         if (!(options.noDeprecatedList() || options.noDeprecated())) {
<span class="line-modified">279             Content dHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,</span>
<span class="line-modified">280                     contents.deprecatedAPI);</span>
<span class="line-modified">281             htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, dHead);</span>
<span class="line-modified">282             Content deprBody = contents.getContent(&quot;doclet.help.deprecated.body&quot;,</span>
<span class="line-modified">283                     links.createLink(DocPaths.DEPRECATED_LIST,</span>
<span class="line-removed">284                     resources.getText(&quot;doclet.Deprecated_API&quot;)));</span>
<span class="line-removed">285             Content dPara = HtmlTree.P(deprBody);</span>
<span class="line-removed">286             htmlTree.add(dPara);</span>
<span class="line-removed">287             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>
288         }
289 
290         // Index
291         if (options.createIndex()) {
<span class="line-modified">292             Content indexlink;</span>
<span class="line-modified">293             if (options.splitIndex()) {</span>
<span class="line-modified">294                 indexlink = links.createLink(DocPaths.INDEX_FILES.resolve(DocPaths.indexN(1)),</span>
<span class="line-modified">295                         resources.getText(&quot;doclet.Index&quot;));</span>
<span class="line-modified">296             } else {</span>
<span class="line-modified">297                 indexlink = links.createLink(DocPaths.INDEX_ALL,</span>
<span class="line-modified">298                         resources.getText(&quot;doclet.Index&quot;));</span>
<span class="line-removed">299             }</span>
<span class="line-removed">300             Content indexHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,</span>
<span class="line-removed">301                     contents.getContent(&quot;doclet.help.index.head&quot;));</span>
<span class="line-removed">302             htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, indexHead);</span>
<span class="line-removed">303             Content indexBody = contents.getContent(&quot;doclet.help.index.body&quot;, indexlink);</span>
<span class="line-removed">304             Content indexPara = HtmlTree.P(indexBody);</span>
<span class="line-removed">305             htmlTree.add(indexPara);</span>
<span class="line-removed">306             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>
307         }
308 
309         // Serialized Form
<span class="line-modified">310         Content sHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,</span>
<span class="line-modified">311                 contents.serializedForm);</span>
<span class="line-modified">312         htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, sHead);</span>
<span class="line-removed">313         Content serialBody = contents.getContent(&quot;doclet.help.serial_form.body&quot;);</span>
<span class="line-removed">314         Content serialPara = HtmlTree.P(serialBody);</span>
<span class="line-removed">315         htmlTree.add(serialPara);</span>
<span class="line-removed">316         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>
317 
318         // Constant Field Values
<span class="line-modified">319         Content constHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,</span>
<span class="line-modified">320                 contents.constantsSummaryTitle);</span>
<span class="line-modified">321         htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, constHead);</span>
<span class="line-modified">322         Content constantsBody = contents.getContent(&quot;doclet.help.constants.body&quot;,</span>
<span class="line-modified">323                 links.createLink(DocPaths.CONSTANT_VALUES,</span>
<span class="line-removed">324                 resources.getText(&quot;doclet.Constants_Summary&quot;)));</span>
<span class="line-removed">325         Content constPara = HtmlTree.P(constantsBody);</span>
<span class="line-removed">326         htmlTree.add(constPara);</span>
<span class="line-removed">327         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>
328 
329         // Search
<span class="line-modified">330         Content searchHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,</span>
<span class="line-modified">331                 contents.getContent(&quot;doclet.help.search.head&quot;));</span>
<span class="line-modified">332         htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, searchHead);</span>
<span class="line-removed">333         Content searchIntro = HtmlTree.P(contents.getContent(&quot;doclet.help.search.intro&quot;));</span>
<span class="line-removed">334         Content searchExamples = new HtmlTree(HtmlTag.UL);</span>
335         for (String[] example : SEARCH_EXAMPLES) {
336             searchExamples.add(HtmlTree.LI(
<span class="line-modified">337                     contents.getContent(&quot;doclet.help.search.example&quot;,</span>
338                             HtmlTree.CODE(new StringContent(example[0])), example[1])));
339         }
340         Content searchSpecLink = HtmlTree.A(
341                 resources.getText(&quot;doclet.help.search.spec.url&quot;, Runtime.version().feature()),
<span class="line-modified">342                 contents.getContent(&quot;doclet.help.search.spec.title&quot;));</span>
<span class="line-modified">343         Content searchRefer = HtmlTree.P(contents.getContent(&quot;doclet.help.search.refer&quot;, searchSpecLink));</span>
<span class="line-modified">344         htmlTree.add(searchIntro);</span>
<span class="line-modified">345         htmlTree.add(searchExamples);</span>
<span class="line-modified">346         htmlTree.add(searchRefer);</span>
<span class="line-modified">347         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>






















348 
<span class="line-modified">349         contentTree.add(ul);</span>
<span class="line-modified">350         contentTree.add(new HtmlTree(HtmlTag.HR));</span>
<span class="line-modified">351         contentTree.add(HtmlTree.SPAN(HtmlStyle.emphasizedPhrase,</span>
<span class="line-modified">352                 contents.getContent(&quot;doclet.help.footnote&quot;)));</span>
353     }
354 }
</pre>
</td>
<td>
<hr />
<pre>
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package jdk.javadoc.internal.doclets.formats.html;
 27 
<span class="line-added"> 28 import java.util.List;</span>
<span class="line-added"> 29 </span>
 30 import jdk.javadoc.internal.doclets.formats.html.markup.BodyContents;
 31 import jdk.javadoc.internal.doclets.formats.html.markup.ContentBuilder;
 32 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyle;
<span class="line-modified"> 33 import jdk.javadoc.internal.doclets.formats.html.markup.TagName;</span>
 34 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTree;
<span class="line-modified"> 35 import jdk.javadoc.internal.doclets.formats.html.Navigation.PageMode;</span>

 36 import jdk.javadoc.internal.doclets.formats.html.markup.StringContent;
 37 import jdk.javadoc.internal.doclets.toolkit.Content;
 38 import jdk.javadoc.internal.doclets.toolkit.util.DocFileIOException;
 39 import jdk.javadoc.internal.doclets.toolkit.util.DocPath;
 40 import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;
 41 
 42 
 43 /**
 44  * Generate the Help File for the generated API documentation. The help file
 45  * contents are helpful for browsing the generated documentation.
 46  *
 47  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
 48  *  If you write code that depends on this, you do so at your own risk.
 49  *  This code and its internal interfaces are subject to change or
 50  *  deletion without notice.&lt;/b&gt;
 51  */
 52 public class HelpWriter extends HtmlDocletWriter {
 53 
 54     private final Navigation navBar;
 55 
</pre>
<hr />
<pre>
 79      * @param configuration the configuration
 80      * @throws DocFileIOException if there is a problem while generating the documentation
 81      */
 82     public static void generate(HtmlConfiguration configuration) throws DocFileIOException {
 83         DocPath filename = DocPaths.HELP_DOC;
 84         HelpWriter helpgen = new HelpWriter(configuration, filename);
 85         helpgen.generateHelpFile();
 86     }
 87 
 88     /**
 89      * Generate the help file contents.
 90      *
 91      * @throws DocFileIOException if there is a problem while generating the documentation
 92      */
 93     protected void generateHelpFile() throws DocFileIOException {
 94         String title = resources.getText(&quot;doclet.Window_Help_title&quot;);
 95         HtmlTree body = getBody(getWindowTitle(title));
 96         Content headerContent = new ContentBuilder();
 97         addTop(headerContent);
 98         navBar.setUserHeader(getUserHeaderFooter(true));
<span class="line-modified"> 99         headerContent.add(navBar.getContent(Navigation.Position.TOP));</span>
100         ContentBuilder helpFileContent = new ContentBuilder();
101         addHelpFileContents(helpFileContent);
102         HtmlTree footer = HtmlTree.FOOTER();
103         navBar.setUserFooter(getUserHeaderFooter(false));
<span class="line-modified">104         footer.add(navBar.getContent(Navigation.Position.BOTTOM));</span>
105         addBottom(footer);
106         body.add(new BodyContents()
107                 .setHeader(headerContent)
108                 .addMainContent(helpFileContent)
<span class="line-modified">109                 .setFooter(footer));</span>

110         printHtmlDocument(null, &quot;help&quot;, body);
111     }
112 
113     /**
114      * Add the help file contents from the resource file to the content tree. While adding the
115      * help file contents it also keeps track of user options. If &quot;-notree&quot;
116      * is used, then the &quot;overview-tree.html&quot; will not get added and hence
117      * help information also will not get added.
118      *
119      * @param contentTree the content tree to which the help file contents will be added
120      */
121     protected void addHelpFileContents(Content contentTree) {
122         // Heading
<span class="line-modified">123         Content heading = HtmlTree.HEADING(Headings.PAGE_TITLE_HEADING, HtmlStyle.title,</span>
<span class="line-modified">124                 getContent(&quot;doclet.help.main_heading&quot;));</span>
125         Content div = HtmlTree.DIV(HtmlStyle.header, heading);
126         Content intro = HtmlTree.DIV(HtmlStyle.subTitle,
<span class="line-modified">127                 getContent(&quot;doclet.help.intro&quot;));</span>
128         div.add(intro);
129         contentTree.add(div);
<span class="line-modified">130 </span>
<span class="line-modified">131         HtmlTree section;</span>

132 
133         // Overview
134         if (options.createOverview()) {
<span class="line-modified">135             section = newHelpSection(contents.overviewLabel);</span>


136             String overviewKey = configuration.showModules
137                     ? &quot;doclet.help.overview.modules.body&quot;
138                     : &quot;doclet.help.overview.packages.body&quot;;
139             Content overviewLink = links.createLink(
140                     DocPaths.INDEX, resources.getText(&quot;doclet.Overview&quot;));
<span class="line-modified">141             section.add(HtmlTree.P(getContent(overviewKey, overviewLink)));</span>
<span class="line-modified">142             contentTree.add(section);</span>


143         }
144 
145         // Module
146         if (configuration.showModules) {
<span class="line-modified">147             section = newHelpSection(contents.moduleLabel);</span>
<span class="line-modified">148             Content moduleIntro = getContent(&quot;doclet.help.module.intro&quot;);</span>


149             Content modulePara = HtmlTree.P(moduleIntro);
<span class="line-modified">150             section.add(modulePara)</span>
<span class="line-modified">151                     .add(newHelpSectionList(</span>
<span class="line-modified">152                             contents.packagesLabel,</span>
<span class="line-modified">153                             contents.modulesLabel,</span>
<span class="line-modified">154                             contents.servicesLabel));</span>
<span class="line-modified">155             contentTree.add(section);</span>

156         }
157 
158         // Package
<span class="line-modified">159         section = newHelpSection(contents.packageLabel)</span>
<span class="line-modified">160                 .add(HtmlTree.P(getContent(&quot;doclet.help.package.intro&quot;)))</span>
<span class="line-modified">161                 .add(newHelpSectionList(</span>
<span class="line-modified">162                         contents.interfaces,</span>
<span class="line-modified">163                         contents.classes,</span>
<span class="line-modified">164                         contents.enums,</span>
<span class="line-modified">165                         contents.exceptions,</span>
<span class="line-modified">166                         contents.errors,</span>
<span class="line-modified">167                         contents.annotationTypes));</span>
<span class="line-modified">168         contentTree.add(section);</span>





169 
170         // Class/interface
<span class="line-modified">171         section = newHelpSection(getContent(&quot;doclet.help.class_interface.head&quot;))</span>
<span class="line-modified">172                 .add(HtmlTree.P(getContent(&quot;doclet.help.class_interface.intro&quot;)))</span>
<span class="line-modified">173                 .add(newHelpSectionList(</span>
<span class="line-modified">174                         getContent(&quot;doclet.help.class_interface.inheritance_diagram&quot;),</span>
<span class="line-modified">175                         getContent(&quot;doclet.help.class_interface.subclasses&quot;),</span>
<span class="line-modified">176                         getContent(&quot;doclet.help.class_interface.subinterfaces&quot;),</span>
<span class="line-modified">177                         getContent(&quot;doclet.help.class_interface.implementations&quot;),</span>
<span class="line-modified">178                         getContent(&quot;doclet.help.class_interface.declaration&quot;),</span>
<span class="line-modified">179                         getContent(&quot;doclet.help.class_interface.description&quot;)))</span>
<span class="line-modified">180                 .add(new HtmlTree(TagName.BR))</span>
<span class="line-modified">181                 .add(newHelpSectionList(</span>
<span class="line-modified">182                         contents.nestedClassSummary,</span>
<span class="line-modified">183                         contents.fieldSummaryLabel,</span>
<span class="line-modified">184                         contents.propertySummaryLabel,</span>
<span class="line-modified">185                         contents.constructorSummaryLabel,</span>
<span class="line-modified">186                         contents.methodSummary))</span>
<span class="line-modified">187                 .add(new HtmlTree(TagName.BR))</span>
<span class="line-modified">188                 .add(newHelpSectionList(</span>
<span class="line-modified">189                         contents.fieldDetailsLabel,</span>
<span class="line-modified">190                         contents.propertyDetailsLabel,</span>
<span class="line-modified">191                         contents.constructorDetailsLabel,</span>
<span class="line-modified">192                         contents.methodDetailLabel))</span>
<span class="line-modified">193                 .add(HtmlTree.P(getContent(&quot;doclet.help.class_interface.summary&quot;)));</span>
<span class="line-modified">194         contentTree.add(section);</span>









195 
196         // Annotation Types
<span class="line-modified">197         section = newHelpSection(contents.annotationType)</span>
<span class="line-modified">198                 .add(HtmlTree.P(getContent(&quot;doclet.help.annotation_type.intro&quot;)))</span>
<span class="line-modified">199                 .add(newHelpSectionList(</span>
<span class="line-modified">200                         getContent(&quot;doclet.help.annotation_type.declaration&quot;),</span>
<span class="line-modified">201                         getContent(&quot;doclet.help.annotation_type.description&quot;),</span>
<span class="line-modified">202                         contents.annotateTypeRequiredMemberSummaryLabel,</span>
<span class="line-modified">203                         contents.annotateTypeOptionalMemberSummaryLabel,</span>
<span class="line-modified">204                         contents.annotationTypeMemberDetail));</span>
<span class="line-modified">205         contentTree.add(section);</span>





206 
207         // Enums
<span class="line-modified">208         section = newHelpSection(contents.enum_)</span>
<span class="line-modified">209                 .add(HtmlTree.P(getContent(&quot;doclet.help.enum.intro&quot;)))</span>
<span class="line-modified">210                 .add(newHelpSectionList(</span>
<span class="line-modified">211                         getContent(&quot;doclet.help.enum.declaration&quot;),</span>
<span class="line-modified">212                         getContent(&quot;doclet.help.enum.definition&quot;),</span>
<span class="line-modified">213                         contents.enumConstantSummary,</span>
<span class="line-modified">214                         contents.enumConstantDetailLabel));</span>
<span class="line-modified">215         contentTree.add(section);</span>




216 
217         // Class Use
218         if (options.classUse()) {
<span class="line-modified">219             section = newHelpSection(getContent(&quot;doclet.help.use.head&quot;))</span>
<span class="line-modified">220                     .add(HtmlTree.P(getContent(&quot;doclet.help.use.body&quot;)));</span>
<span class="line-modified">221             contentTree.add(section);</span>




222         }
223 
224         // Tree
225         if (options.createTree()) {
<span class="line-modified">226             section = newHelpSection(getContent(&quot;doclet.help.tree.head&quot;));</span>
<span class="line-modified">227             Content treeIntro = getContent(&quot;doclet.help.tree.intro&quot;,</span>
<span class="line-modified">228                     links.createLink(DocPaths.OVERVIEW_TREE, resources.getText(&quot;doclet.Class_Hierarchy&quot;)),</span>



229                     HtmlTree.CODE(new StringContent(&quot;java.lang.Object&quot;)));
<span class="line-modified">230             section.add(HtmlTree.P(treeIntro))</span>
<span class="line-modified">231                     .add(newHelpSectionList(</span>
<span class="line-modified">232                             getContent(&quot;doclet.help.tree.overview&quot;),</span>
<span class="line-modified">233                             getContent(&quot;doclet.help.tree.package&quot;)));</span>
<span class="line-modified">234             contentTree.add(section);</span>


235         }
236 
237         // Deprecated
238         if (!(options.noDeprecatedList() || options.noDeprecated())) {
<span class="line-modified">239             section = newHelpSection(contents.deprecatedAPI);</span>
<span class="line-modified">240             Content deprBody = getContent(&quot;doclet.help.deprecated.body&quot;,</span>
<span class="line-modified">241                     links.createLink(DocPaths.DEPRECATED_LIST, resources.getText(&quot;doclet.Deprecated_API&quot;)));</span>
<span class="line-modified">242             section.add(HtmlTree.P(deprBody));</span>
<span class="line-modified">243             contentTree.add(section);</span>




244         }
245 
246         // Index
247         if (options.createIndex()) {
<span class="line-modified">248             DocPath dp = options.splitIndex()</span>
<span class="line-modified">249                     ? DocPaths.INDEX_FILES.resolve(DocPaths.indexN(1))</span>
<span class="line-modified">250                     : DocPaths.INDEX_ALL;</span>
<span class="line-modified">251             Content indexLink = links.createLink(dp, resources.getText(&quot;doclet.Index&quot;));</span>
<span class="line-modified">252             section = newHelpSection(getContent(&quot;doclet.help.index.head&quot;))</span>
<span class="line-modified">253                     .add(HtmlTree.P(getContent(&quot;doclet.help.index.body&quot;, indexLink)));</span>
<span class="line-modified">254             contentTree.add(section);</span>








255         }
256 
257         // Serialized Form
<span class="line-modified">258         section = newHelpSection(contents.serializedForm)</span>
<span class="line-modified">259                 .add(HtmlTree.P(getContent(&quot;doclet.help.serial_form.body&quot;)));</span>
<span class="line-modified">260         contentTree.add(section);</span>




261 
262         // Constant Field Values
<span class="line-modified">263         section = newHelpSection(contents.constantsSummaryTitle);</span>
<span class="line-modified">264         Content constantsBody = getContent(&quot;doclet.help.constants.body&quot;,</span>
<span class="line-modified">265                 links.createLink(DocPaths.CONSTANT_VALUES, resources.getText(&quot;doclet.Constants_Summary&quot;)));</span>
<span class="line-modified">266         section.add(HtmlTree.P(constantsBody));</span>
<span class="line-modified">267         contentTree.add(section);</span>




268 
269         // Search
<span class="line-modified">270         section = newHelpSection(getContent(&quot;doclet.help.search.head&quot;));</span>
<span class="line-modified">271         Content searchIntro = HtmlTree.P(getContent(&quot;doclet.help.search.intro&quot;));</span>
<span class="line-modified">272         Content searchExamples = new HtmlTree(TagName.UL).setStyle(HtmlStyle.helpSectionList);</span>


273         for (String[] example : SEARCH_EXAMPLES) {
274             searchExamples.add(HtmlTree.LI(
<span class="line-modified">275                     getContent(&quot;doclet.help.search.example&quot;,</span>
276                             HtmlTree.CODE(new StringContent(example[0])), example[1])));
277         }
278         Content searchSpecLink = HtmlTree.A(
279                 resources.getText(&quot;doclet.help.search.spec.url&quot;, Runtime.version().feature()),
<span class="line-modified">280                 getContent(&quot;doclet.help.search.spec.title&quot;));</span>
<span class="line-modified">281         Content searchRefer = HtmlTree.P(getContent(&quot;doclet.help.search.refer&quot;, searchSpecLink));</span>
<span class="line-modified">282         section.add(searchIntro)</span>
<span class="line-modified">283             .add(searchExamples)</span>
<span class="line-modified">284             .add(searchRefer);</span>
<span class="line-modified">285         contentTree.add(section);</span>
<span class="line-added">286 </span>
<span class="line-added">287         contentTree.add(new HtmlTree(TagName.HR))</span>
<span class="line-added">288                 .add(HtmlTree.SPAN(HtmlStyle.helpFootnote,</span>
<span class="line-added">289                             getContent(&quot;doclet.help.footnote&quot;)));</span>
<span class="line-added">290     }</span>
<span class="line-added">291 </span>
<span class="line-added">292     private Content getContent(String key) {</span>
<span class="line-added">293         return contents.getContent(key);</span>
<span class="line-added">294     }</span>
<span class="line-added">295 </span>
<span class="line-added">296     private Content getContent(String key, Object arg) {</span>
<span class="line-added">297         return contents.getContent(key, arg);</span>
<span class="line-added">298     }</span>
<span class="line-added">299 </span>
<span class="line-added">300     private Content getContent(String key, Object arg1, Object arg2) {</span>
<span class="line-added">301         return contents.getContent(key, arg1, arg2);</span>
<span class="line-added">302     }</span>
<span class="line-added">303 </span>
<span class="line-added">304     private HtmlTree newHelpSection(Content headingContent) {</span>
<span class="line-added">305         return HtmlTree.SECTION(HtmlStyle.helpSection,</span>
<span class="line-added">306                 HtmlTree.HEADING(Headings.CONTENT_HEADING, headingContent));</span>
<span class="line-added">307     }</span>
308 
<span class="line-modified">309     private HtmlTree newHelpSectionList(Content first, Content... rest) {</span>
<span class="line-modified">310         HtmlTree list = HtmlTree.UL(HtmlStyle.helpSectionList, HtmlTree.LI(first));</span>
<span class="line-modified">311         List.of(rest).forEach(i -&gt; list.add(HtmlTree.LI(i)));</span>
<span class="line-modified">312         return list;</span>
313     }
314 }
</pre>
</td>
</tr>
</table>
<center><a href="Headings.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="HtmlDoclet.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>