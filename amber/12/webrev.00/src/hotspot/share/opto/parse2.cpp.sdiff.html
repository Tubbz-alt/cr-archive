<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/opto/parse2.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="parse1.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="phase.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/opto/parse2.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
1628     // Update method data
1629     profile_not_taken_branch();
1630     adjust_map_after_if(untaken_btest, c, untaken_prob,
1631                         next_block, branch_block);
1632   }
1633 }
1634 
1635 bool Parse::path_is_suitable_for_uncommon_trap(float prob) const {
1636   // Don&#39;t want to speculate on uncommon traps when running with -Xcomp
1637   if (!UseInterpreter) {
1638     return false;
1639   }
1640   return (seems_never_taken(prob) &amp;&amp; seems_stable_comparison());
1641 }
1642 
1643 void Parse::maybe_add_predicate_after_if(Block* path) {
1644   if (path-&gt;is_SEL_head() &amp;&amp; path-&gt;preds_parsed() == 0) {
1645     // Add predicates at bci of if dominating the loop so traps can be
1646     // recorded on the if&#39;s profile data
1647     int bc_depth = repush_if_args();
<span class="line-modified">1648     add_predicate();</span>
1649     dec_sp(bc_depth);
1650     path-&gt;set_has_predicates();
1651   }
1652 }
1653 
1654 
1655 //----------------------------adjust_map_after_if------------------------------
1656 // Adjust the JVM state to reflect the result of taking this path.
1657 // Basically, it means inspecting the CmpNode controlling this
1658 // branch, seeing how it constrains a tested value, and then
1659 // deciding if it&#39;s worth our while to encode this constraint
1660 // as graph nodes in the current abstract interpretation map.
1661 void Parse::adjust_map_after_if(BoolTest::mask btest, Node* c, float prob,
1662                                 Block* path, Block* other_path) {
1663   if (!c-&gt;is_Cmp()) {
1664     maybe_add_predicate_after_if(path);
1665     return;
1666   }
1667 
1668   if (stopped() || btest == BoolTest::illegal) {
</pre>
</td>
<td>
<hr />
<pre>
1628     // Update method data
1629     profile_not_taken_branch();
1630     adjust_map_after_if(untaken_btest, c, untaken_prob,
1631                         next_block, branch_block);
1632   }
1633 }
1634 
1635 bool Parse::path_is_suitable_for_uncommon_trap(float prob) const {
1636   // Don&#39;t want to speculate on uncommon traps when running with -Xcomp
1637   if (!UseInterpreter) {
1638     return false;
1639   }
1640   return (seems_never_taken(prob) &amp;&amp; seems_stable_comparison());
1641 }
1642 
1643 void Parse::maybe_add_predicate_after_if(Block* path) {
1644   if (path-&gt;is_SEL_head() &amp;&amp; path-&gt;preds_parsed() == 0) {
1645     // Add predicates at bci of if dominating the loop so traps can be
1646     // recorded on the if&#39;s profile data
1647     int bc_depth = repush_if_args();
<span class="line-modified">1648     add_empty_predicates();</span>
1649     dec_sp(bc_depth);
1650     path-&gt;set_has_predicates();
1651   }
1652 }
1653 
1654 
1655 //----------------------------adjust_map_after_if------------------------------
1656 // Adjust the JVM state to reflect the result of taking this path.
1657 // Basically, it means inspecting the CmpNode controlling this
1658 // branch, seeing how it constrains a tested value, and then
1659 // deciding if it&#39;s worth our while to encode this constraint
1660 // as graph nodes in the current abstract interpretation map.
1661 void Parse::adjust_map_after_if(BoolTest::mask btest, Node* c, float prob,
1662                                 Block* path, Block* other_path) {
1663   if (!c-&gt;is_Cmp()) {
1664     maybe_add_predicate_after_if(path);
1665     return;
1666   }
1667 
1668   if (stopped() || btest == BoolTest::illegal) {
</pre>
</td>
</tr>
</table>
<center><a href="parse1.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="phase.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>