<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/demo/share/jfc/SwingSet2/TableDemo.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="SwingSet2.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../TableExample/JDBCAdapter.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/demo/share/jfc/SwingSet2/TableDemo.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 58  * @author Steve Wilson
 59  */
 60 public class TableDemo extends DemoModule {
 61     JTable      tableView;
 62     JScrollPane scrollpane;
 63     Dimension   origin = new Dimension(0, 0);
 64 
 65     JCheckBox   isColumnReorderingAllowedCheckBox;
 66     JCheckBox   showHorizontalLinesCheckBox;
 67     JCheckBox   showVerticalLinesCheckBox;
 68 
 69     JCheckBox   isColumnSelectionAllowedCheckBox;
 70     JCheckBox   isRowSelectionAllowedCheckBox;
 71 
 72     JLabel      interCellSpacingLabel;
 73     JLabel      rowHeightLabel;
 74 
 75     JSlider     interCellSpacingSlider;
 76     JSlider     rowHeightSlider;
 77 
<span class="line-modified"> 78     JComboBox   selectionModeComboBox = null;</span>
<span class="line-modified"> 79     JComboBox   resizeModeComboBox = null;</span>
 80 
 81     JLabel      headerLabel;
 82     JLabel      footerLabel;
 83 
 84     JTextField  headerTextField;
 85     JTextField  footerTextField;
 86 
 87     JCheckBox   fitWidth;
 88     JButton     printButton;
 89 
 90     JPanel      controlPanel;
 91     JScrollPane tableAggregate;
 92 
 93     String path = &quot;food/&quot;;
 94 
 95     final int INITIAL_ROWHEIGHT = 33;
 96 
 97     /**
 98      * main method allows us to run as a standalone demo.
 99      */
</pre>
<hr />
<pre>
109         super(swingset, &quot;TableDemo&quot;, &quot;toolbar/JTable.gif&quot;);
110 
111         getDemoPanel().setLayout(new BorderLayout());
112         controlPanel = new JPanel();
113         controlPanel.setLayout(new BoxLayout(controlPanel, BoxLayout.X_AXIS));
114         JPanel cbPanel = new JPanel(new GridLayout(3, 2));
115         JPanel labelPanel = new JPanel(new GridLayout(2, 1)) {
116             public Dimension getMaximumSize() {
117                 return new Dimension(getPreferredSize().width, super.getMaximumSize().height);
118             }
119         };
120         JPanel sliderPanel = new JPanel(new GridLayout(2, 1)) {
121             public Dimension getMaximumSize() {
122                 return new Dimension(getPreferredSize().width, super.getMaximumSize().height);
123             }
124         };
125         JPanel comboPanel = new JPanel(new GridLayout(2, 1));
126         JPanel printPanel = new JPanel(new ColumnLayout());
127 
128         getDemoPanel().add(controlPanel, BorderLayout.NORTH);
<span class="line-modified">129         Vector relatedComponents = new Vector();</span>
130 
131 
132         // check box panel
133         isColumnReorderingAllowedCheckBox = new JCheckBox(getString(&quot;TableDemo.reordering_allowed&quot;), true);
134         isColumnReorderingAllowedCheckBox.addActionListener(new ActionListener() {
135             public void actionPerformed(ActionEvent e) {
136                 boolean flag = ((JCheckBox)e.getSource()).isSelected();
137                 tableView.getTableHeader().setReorderingAllowed(flag);
138                 tableView.repaint();
139             }
140         });
141 
142         showHorizontalLinesCheckBox = new JCheckBox(getString(&quot;TableDemo.horz_lines&quot;), true);
143         showHorizontalLinesCheckBox.addActionListener(new ActionListener() {
144             public void actionPerformed(ActionEvent e) {
145                 boolean flag = ((JCheckBox)e.getSource()).isSelected();
146                 tableView.setShowHorizontalLines(flag); ;
147                 tableView.repaint();
148             }
149         });
</pre>
<hr />
<pre>
228         });
229 
230         // Show that spacing controls are related
231         relatedComponents.removeAllElements();
232         relatedComponents.add(interCellSpacingSlider);
233         relatedComponents.add(rowHeightSlider);
234         buildAccessibleGroup(relatedComponents);
235 
236 
237         // Create the table.
238         tableAggregate = createTable();
239         getDemoPanel().add(tableAggregate, BorderLayout.CENTER);
240 
241 
242         // ComboBox for selection modes.
243         JPanel selectMode = new JPanel();
244         selectMode.setLayout(new BoxLayout(selectMode, BoxLayout.X_AXIS));
245         selectMode.setBorder(new TitledBorder(getString(&quot;TableDemo.selection_mode&quot;)));
246 
247 
<span class="line-modified">248         selectionModeComboBox = new JComboBox() {</span>
249             public Dimension getMaximumSize() {
250                 return getPreferredSize();
251             }
252         };
253         selectionModeComboBox.addItem(getString(&quot;TableDemo.single&quot;));
254         selectionModeComboBox.addItem(getString(&quot;TableDemo.one_range&quot;));
255         selectionModeComboBox.addItem(getString(&quot;TableDemo.multiple_ranges&quot;));
256         selectionModeComboBox.setSelectedIndex(tableView.getSelectionModel().getSelectionMode());
257         selectionModeComboBox.addItemListener(new ItemListener() {
258             public void itemStateChanged(ItemEvent e) {
<span class="line-modified">259                 JComboBox source = (JComboBox)e.getSource();</span>
260                 tableView.setSelectionMode(source.getSelectedIndex());
261             }
262         });
263 
264         selectMode.add(Box.createHorizontalStrut(2));
265         selectMode.add(selectionModeComboBox);
266         selectMode.add(Box.createHorizontalGlue());
267         comboPanel.add(selectMode);
268 
269         // Combo box for table resize mode.
270         JPanel resizeMode = new JPanel();
271         resizeMode.setLayout(new BoxLayout(resizeMode, BoxLayout.X_AXIS));
272         resizeMode.setBorder(new TitledBorder(getString(&quot;TableDemo.autoresize_mode&quot;)));
273 
274 
<span class="line-modified">275         resizeModeComboBox = new JComboBox() {</span>
276             public Dimension getMaximumSize() {
277                 return getPreferredSize();
278             }
279         };
280         resizeModeComboBox.addItem(getString(&quot;TableDemo.off&quot;));
281         resizeModeComboBox.addItem(getString(&quot;TableDemo.column_boundaries&quot;));
282         resizeModeComboBox.addItem(getString(&quot;TableDemo.subsequent_columns&quot;));
283         resizeModeComboBox.addItem(getString(&quot;TableDemo.last_column&quot;));
284         resizeModeComboBox.addItem(getString(&quot;TableDemo.all_columns&quot;));
285         resizeModeComboBox.setSelectedIndex(tableView.getAutoResizeMode());
286         resizeModeComboBox.addItemListener(new ItemListener() {
287             public void itemStateChanged(ItemEvent e) {
<span class="line-modified">288                 JComboBox source = (JComboBox)e.getSource();</span>
289                 tableView.setAutoResizeMode(source.getSelectedIndex());
290             }
291         });
292 
293         resizeMode.add(Box.createHorizontalStrut(2));
294         resizeMode.add(resizeModeComboBox);
295         resizeMode.add(Box.createHorizontalGlue());
296         comboPanel.add(resizeMode);
297 
298         // print panel
299         printPanel.setBorder(new TitledBorder(getString(&quot;TableDemo.printing&quot;)));
300         headerLabel = new JLabel(getString(&quot;TableDemo.header&quot;));
301         footerLabel = new JLabel(getString(&quot;TableDemo.footer&quot;));
302         headerTextField = new JTextField(getString(&quot;TableDemo.headerText&quot;), 15);
303         footerTextField = new JTextField(getString(&quot;TableDemo.footerText&quot;), 15);
304         fitWidth = new JCheckBox(getString(&quot;TableDemo.fitWidth&quot;), true);
305         printButton = new JButton(getString(&quot;TableDemo.print&quot;));
306         printButton.addActionListener(new ActionListener() {
307             public void actionPerformed(ActionEvent ae) {
308                 printTable();
</pre>
<hr />
<pre>
350 
351         getDemoPanel().getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT)
352             .put(KeyStroke.getKeyStroke(&quot;ctrl P&quot;), &quot;print&quot;);
353 
354         getDemoPanel().getActionMap().put(&quot;print&quot;, new AbstractAction() {
355             public void actionPerformed(ActionEvent ae) {
356                 printTable();
357             }
358         });
359 
360     } // TableDemo()
361 
362     /**
363      * Sets the Accessibility MEMBER_OF property to denote that
364      * these components work together as a group. Each object
365      * is set to be a MEMBER_OF an array that contains all of
366      * the objects in the group, including itself.
367      *
368      * @param components The list of objects that are related
369      */
<span class="line-modified">370     void buildAccessibleGroup(Vector components) {</span>
371 
372         AccessibleContext context = null;
373         int numComponents = components.size();
374         Object[] group = components.toArray();
375         Object object = null;
376         for (int i = 0; i &lt; numComponents; ++i) {
377             object = components.elementAt(i);
378             if (object instanceof Accessible) {
379                 context = ((Accessible)components.elementAt(i)).
380                                                  getAccessibleContext();
381                 context.getAccessibleRelationSet().add(
382                     new AccessibleRelation(
383                         AccessibleRelation.MEMBER_OF, group));
384             }
385         }
386     } // buildAccessibleGroup()
387 
388     /**
389      * This sets CONTROLLER_FOR on the controls that manipulate the
390      * table and CONTROLLED_BY relationships on the table to point
</pre>
<hr />
<pre>
475         NamedColor eblue       = new NamedColor(Color.blue, getString(&quot;TableDemo.eblue&quot;));
476         NamedColor jfcblue     = new NamedColor(new Color(204, 204, 255), getString(&quot;TableDemo.jfcblue&quot;));
477         NamedColor jfcblue2    = new NamedColor(new Color(153, 153, 204), getString(&quot;TableDemo.jfcblue2&quot;));
478         NamedColor cybergreen  = new NamedColor(Color.green.darker().brighter(), getString(&quot;TableDemo.cybergreen&quot;));
479         NamedColor darkgreen   = new NamedColor(new Color(0, 100, 75), getString(&quot;TableDemo.darkgreen&quot;));
480         NamedColor forestgreen = new NamedColor(Color.green.darker(), getString(&quot;TableDemo.forestgreen&quot;));
481         NamedColor gray        = new NamedColor(Color.gray, getString(&quot;TableDemo.gray&quot;));
482         NamedColor green       = new NamedColor(Color.green, getString(&quot;TableDemo.green&quot;));
483         NamedColor orange      = new NamedColor(new Color(255, 165, 0), getString(&quot;TableDemo.orange&quot;));
484         NamedColor purple      = new NamedColor(new Color(160, 32, 240),  getString(&quot;TableDemo.purple&quot;));
485         NamedColor red         = new NamedColor(Color.red, getString(&quot;TableDemo.red&quot;));
486         NamedColor rustred     = new NamedColor(Color.red.darker(), getString(&quot;TableDemo.rustred&quot;));
487         NamedColor sunpurple   = new NamedColor(new Color(100, 100, 255), getString(&quot;TableDemo.sunpurple&quot;));
488         NamedColor suspectpink = new NamedColor(new Color(255, 105, 180), getString(&quot;TableDemo.suspectpink&quot;));
489         NamedColor turquoise   = new NamedColor(new Color(0, 255, 255), getString(&quot;TableDemo.turquoise&quot;));
490         NamedColor violet      = new NamedColor(new Color(238, 130, 238), getString(&quot;TableDemo.violet&quot;));
491         NamedColor yellow      = new NamedColor(Color.yellow, getString(&quot;TableDemo.yellow&quot;));
492 
493         // Create the dummy data (a few rows of names)
494         final Object[][] data = {
<span class="line-modified">495           {&quot;Mike&quot;, &quot;Albers&quot;,      green,       getString(&quot;TableDemo.brazil&quot;), new Double(44.0), strawberry},</span>
<span class="line-modified">496           {&quot;Mark&quot;, &quot;Andrews&quot;,     blue,        getString(&quot;TableDemo.curse&quot;), new Double(3), grapes},</span>
<span class="line-modified">497           {&quot;Brian&quot;, &quot;Beck&quot;,       black,       getString(&quot;TableDemo.bluesbros&quot;), new Double(2.7182818285), raspberry},</span>
<span class="line-modified">498           {&quot;Lara&quot;, &quot;Bunni&quot;,       red,         getString(&quot;TableDemo.airplane&quot;), new Double(15), strawberry},</span>
<span class="line-modified">499           {&quot;Roger&quot;, &quot;Brinkley&quot;,   blue,        getString(&quot;TableDemo.man&quot;), new Double(13), peach},</span>
<span class="line-modified">500           {&quot;Brent&quot;, &quot;Christian&quot;,  black,       getString(&quot;TableDemo.bladerunner&quot;), new Double(23), broccoli},</span>
<span class="line-modified">501           {&quot;Mark&quot;, &quot;Davidson&quot;,    darkgreen,   getString(&quot;TableDemo.brazil&quot;), new Double(27), asparagus},</span>
<span class="line-modified">502           {&quot;Jeff&quot;, &quot;Dinkins&quot;,     blue,        getString(&quot;TableDemo.ladyvanishes&quot;), new Double(8), kiwi},</span>
<span class="line-modified">503           {&quot;Ewan&quot;, &quot;Dinkins&quot;,     yellow,      getString(&quot;TableDemo.bugs&quot;), new Double(2), strawberry},</span>
<span class="line-modified">504           {&quot;Amy&quot;, &quot;Fowler&quot;,       violet,      getString(&quot;TableDemo.reservoir&quot;), new Double(3), raspberry},</span>
<span class="line-modified">505           {&quot;Hania&quot;, &quot;Gajewska&quot;,   purple,      getString(&quot;TableDemo.jules&quot;), new Double(5), raspberry},</span>
<span class="line-modified">506           {&quot;David&quot;, &quot;Geary&quot;,      blue,        getString(&quot;TableDemo.pulpfiction&quot;), new Double(3), watermelon},</span>
<span class="line-modified">507 //        {&quot;James&quot;, &quot;Gosling&quot;,    pink,        getString(&quot;TableDemo.tennis&quot;), new Double(21), donut},</span>
<span class="line-modified">508           {&quot;Eric&quot;, &quot;Hawkes&quot;,      blue,        getString(&quot;TableDemo.bladerunner&quot;), new Double(.693), pickle},</span>
<span class="line-modified">509           {&quot;Shannon&quot;, &quot;Hickey&quot;,   green,       getString(&quot;TableDemo.shawshank&quot;), new Double(2), grapes},</span>
<span class="line-modified">510           {&quot;Earl&quot;, &quot;Johnson&quot;,     green,       getString(&quot;TableDemo.pulpfiction&quot;), new Double(8), carrot},</span>
<span class="line-modified">511           {&quot;Robi&quot;, &quot;Khan&quot;,        green,       getString(&quot;TableDemo.goodfellas&quot;), new Double(89), apple},</span>
<span class="line-modified">512           {&quot;Robert&quot;, &quot;Kim&quot;,       blue,        getString(&quot;TableDemo.mohicans&quot;), new Double(655321), strawberry},</span>
<span class="line-modified">513           {&quot;Janet&quot;, &quot;Koenig&quot;,     turquoise,   getString(&quot;TableDemo.lonestar&quot;), new Double(7), peach},</span>
<span class="line-modified">514           {&quot;Jeff&quot;, &quot;Kesselman&quot;,   blue,        getString(&quot;TableDemo.stuntman&quot;), new Double(17), pineapple},</span>
<span class="line-modified">515           {&quot;Onno&quot;, &quot;Kluyt&quot;,       orange,      getString(&quot;TableDemo.oncewest&quot;), new Double(8), broccoli},</span>
<span class="line-modified">516           {&quot;Peter&quot;, &quot;Korn&quot;,       sunpurple,   getString(&quot;TableDemo.musicman&quot;), new Double(12), sparegrass},</span>
<span class="line-modified">517 </span>
<span class="line-modified">518           {&quot;Rick&quot;, &quot;Levenson&quot;,    black,       getString(&quot;TableDemo.harold&quot;), new Double(1327), raspberry},</span>
<span class="line-modified">519           {&quot;Brian&quot;, &quot;Lichtenwalter&quot;, jfcblue,  getString(&quot;TableDemo.fifthelement&quot;), new Double(22), pear},</span>
<span class="line-modified">520           {&quot;Malini&quot;, &quot;Minasandram&quot;, beige,     getString(&quot;TableDemo.joyluck&quot;), new Double(9), corn},</span>
<span class="line-modified">521           {&quot;Michael&quot;, &quot;Martak&quot;,   green,       getString(&quot;TableDemo.city&quot;), new Double(3), strawberry},</span>
<span class="line-modified">522           {&quot;David&quot;, &quot;Mendenhall&quot;, forestgreen, getString(&quot;TableDemo.schindlerslist&quot;), new Double(7), peach},</span>
<span class="line-modified">523           {&quot;Phil&quot;, &quot;Milne&quot;,       suspectpink, getString(&quot;TableDemo.withnail&quot;), new Double(3), banana},</span>
<span class="line-modified">524           {&quot;Lynn&quot;, &quot;Monsanto&quot;,    cybergreen,  getString(&quot;TableDemo.dasboot&quot;), new Double(52), peach},</span>
<span class="line-modified">525           {&quot;Hans&quot;, &quot;Muller&quot;,      rustred,     getString(&quot;TableDemo.eraserhead&quot;), new Double(0), pineapple},</span>
<span class="line-modified">526           {&quot;Joshua&quot;, &quot;Outwater&quot;,  blue,        getString(&quot;TableDemo.labyrinth&quot;), new Double(3), pineapple},</span>
<span class="line-modified">527           {&quot;Tim&quot;, &quot;Prinzing&quot;,     blue,        getString(&quot;TableDemo.firstsight&quot;), new Double(69), pepper},</span>
<span class="line-modified">528           {&quot;Raj&quot;, &quot;Premkumar&quot;,    jfcblue2,    getString(&quot;TableDemo.none&quot;), new Double(7), broccoli},</span>
<span class="line-modified">529           {&quot;Howard&quot;, &quot;Rosen&quot;,     green,       getString(&quot;TableDemo.defending&quot;), new Double(7), strawberry},</span>
530           {&quot;Ray&quot;, &quot;Ryan&quot;,         black,       getString(&quot;TableDemo.buckaroo&quot;),
<span class="line-modified">531            new Double(3.141592653589793238462643383279502884197169399375105820974944), banana},</span>
<span class="line-modified">532           {&quot;Georges&quot;, &quot;Saab&quot;,     aqua,        getString(&quot;TableDemo.bicycle&quot;), new Double(290), cantaloupe},</span>
<span class="line-modified">533           {&quot;Tom&quot;, &quot;Santos&quot;,       blue,        getString(&quot;TableDemo.spinaltap&quot;), new Double(241), pepper},</span>
<span class="line-modified">534           {&quot;Rich&quot;, &quot;Schiavi&quot;,     blue,        getString(&quot;TableDemo.repoman&quot;), new Double(0xFF), pepper},</span>
<span class="line-modified">535           {&quot;Nancy&quot;, &quot;Schorr&quot;,     green,       getString(&quot;TableDemo.fifthelement&quot;), new Double(47), watermelon},</span>
<span class="line-modified">536           {&quot;Keith&quot;, &quot;Sprochi&quot;,    darkgreen,   getString(&quot;TableDemo.2001&quot;), new Double(13), watermelon},</span>
<span class="line-modified">537           {&quot;Matt&quot;, &quot;Tucker&quot;,      eblue,       getString(&quot;TableDemo.starwars&quot;), new Double(2), broccoli},</span>
<span class="line-modified">538           {&quot;Dmitri&quot;, &quot;Trembovetski&quot;, red,      getString(&quot;TableDemo.aliens&quot;), new Double(222), tomato},</span>
<span class="line-modified">539           {&quot;Scott&quot;, &quot;Violet&quot;,     violet,      getString(&quot;TableDemo.raiders&quot;), new Double(-97), banana},</span>
<span class="line-modified">540           {&quot;Kathy&quot;, &quot;Walrath&quot;,    darkgreen,   getString(&quot;TableDemo.thinman&quot;), new Double(8), pear},</span>
<span class="line-modified">541           {&quot;Nathan&quot;, &quot;Walrath&quot;,   black,       getString(&quot;TableDemo.chusingura&quot;), new Double(3), grapefruit},</span>
<span class="line-modified">542           {&quot;Steve&quot;, &quot;Wilson&quot;,     green,       getString(&quot;TableDemo.raiders&quot;), new Double(7), onion},</span>
<span class="line-modified">543           {&quot;Kathleen&quot;, &quot;Zelony&quot;,  gray,        getString(&quot;TableDemo.dog&quot;), new Double(13), grapes}</span>
544         };
545 
546         // Create a model of the data.
547         TableModel dataModel = new AbstractTableModel() {
548             public int getColumnCount() { return names.length; }
549             public int getRowCount() { return data.length;}
550             public Object getValueAt(int row, int col) {return data[row][col];}
551             public String getColumnName(int column) {return names[column];}
<span class="line-modified">552             public Class getColumnClass(int c) {return getValueAt(0, c).getClass();}</span>
553             public boolean isCellEditable(int row, int col) {return col != 5;}
554             public void setValueAt(Object aValue, int row, int column) { data[row][column] = aValue; }
555          };
556 
557 
558         // Create the table
559         tableView = new JTable(dataModel);
<span class="line-modified">560         TableRowSorter sorter = new TableRowSorter(dataModel);</span>
561         tableView.setRowSorter(sorter);
562 
563         // Show colors by rendering them in their own color.
564         DefaultTableCellRenderer colorRenderer = new DefaultTableCellRenderer() {
565             public void setValue(Object value) {
566                 if (value instanceof NamedColor) {
567                     NamedColor c = (NamedColor) value;
568                     setBackground(c);
569                     setForeground(c.getTextColor());
570                     setText(c.toString());
571                 } else {
572                     super.setValue(value);
573                 }
574             }
575         };
576 
577         // Create a combo box to show that you can use one in a table.
<span class="line-modified">578         JComboBox comboBox = new JComboBox();</span>
579         comboBox.addItem(aqua);
580         comboBox.addItem(beige);
581         comboBox.addItem(black);
582         comboBox.addItem(blue);
583         comboBox.addItem(eblue);
584         comboBox.addItem(jfcblue);
585         comboBox.addItem(jfcblue2);
586         comboBox.addItem(cybergreen);
587         comboBox.addItem(darkgreen);
588         comboBox.addItem(forestgreen);
589         comboBox.addItem(gray);
590         comboBox.addItem(green);
591         comboBox.addItem(orange);
592         comboBox.addItem(purple);
593         comboBox.addItem(red);
594         comboBox.addItem(rustred);
595         comboBox.addItem(sunpurple);
596         comboBox.addItem(suspectpink);
597         comboBox.addItem(turquoise);
598         comboBox.addItem(violet);
</pre>
</td>
<td>
<hr />
<pre>
 58  * @author Steve Wilson
 59  */
 60 public class TableDemo extends DemoModule {
 61     JTable      tableView;
 62     JScrollPane scrollpane;
 63     Dimension   origin = new Dimension(0, 0);
 64 
 65     JCheckBox   isColumnReorderingAllowedCheckBox;
 66     JCheckBox   showHorizontalLinesCheckBox;
 67     JCheckBox   showVerticalLinesCheckBox;
 68 
 69     JCheckBox   isColumnSelectionAllowedCheckBox;
 70     JCheckBox   isRowSelectionAllowedCheckBox;
 71 
 72     JLabel      interCellSpacingLabel;
 73     JLabel      rowHeightLabel;
 74 
 75     JSlider     interCellSpacingSlider;
 76     JSlider     rowHeightSlider;
 77 
<span class="line-modified"> 78     JComboBox&lt;String&gt;   selectionModeComboBox = null;</span>
<span class="line-modified"> 79     JComboBox&lt;String&gt;   resizeModeComboBox = null;</span>
 80 
 81     JLabel      headerLabel;
 82     JLabel      footerLabel;
 83 
 84     JTextField  headerTextField;
 85     JTextField  footerTextField;
 86 
 87     JCheckBox   fitWidth;
 88     JButton     printButton;
 89 
 90     JPanel      controlPanel;
 91     JScrollPane tableAggregate;
 92 
 93     String path = &quot;food/&quot;;
 94 
 95     final int INITIAL_ROWHEIGHT = 33;
 96 
 97     /**
 98      * main method allows us to run as a standalone demo.
 99      */
</pre>
<hr />
<pre>
109         super(swingset, &quot;TableDemo&quot;, &quot;toolbar/JTable.gif&quot;);
110 
111         getDemoPanel().setLayout(new BorderLayout());
112         controlPanel = new JPanel();
113         controlPanel.setLayout(new BoxLayout(controlPanel, BoxLayout.X_AXIS));
114         JPanel cbPanel = new JPanel(new GridLayout(3, 2));
115         JPanel labelPanel = new JPanel(new GridLayout(2, 1)) {
116             public Dimension getMaximumSize() {
117                 return new Dimension(getPreferredSize().width, super.getMaximumSize().height);
118             }
119         };
120         JPanel sliderPanel = new JPanel(new GridLayout(2, 1)) {
121             public Dimension getMaximumSize() {
122                 return new Dimension(getPreferredSize().width, super.getMaximumSize().height);
123             }
124         };
125         JPanel comboPanel = new JPanel(new GridLayout(2, 1));
126         JPanel printPanel = new JPanel(new ColumnLayout());
127 
128         getDemoPanel().add(controlPanel, BorderLayout.NORTH);
<span class="line-modified">129         Vector&lt;JComponent&gt; relatedComponents = new Vector&lt;&gt;();</span>
130 
131 
132         // check box panel
133         isColumnReorderingAllowedCheckBox = new JCheckBox(getString(&quot;TableDemo.reordering_allowed&quot;), true);
134         isColumnReorderingAllowedCheckBox.addActionListener(new ActionListener() {
135             public void actionPerformed(ActionEvent e) {
136                 boolean flag = ((JCheckBox)e.getSource()).isSelected();
137                 tableView.getTableHeader().setReorderingAllowed(flag);
138                 tableView.repaint();
139             }
140         });
141 
142         showHorizontalLinesCheckBox = new JCheckBox(getString(&quot;TableDemo.horz_lines&quot;), true);
143         showHorizontalLinesCheckBox.addActionListener(new ActionListener() {
144             public void actionPerformed(ActionEvent e) {
145                 boolean flag = ((JCheckBox)e.getSource()).isSelected();
146                 tableView.setShowHorizontalLines(flag); ;
147                 tableView.repaint();
148             }
149         });
</pre>
<hr />
<pre>
228         });
229 
230         // Show that spacing controls are related
231         relatedComponents.removeAllElements();
232         relatedComponents.add(interCellSpacingSlider);
233         relatedComponents.add(rowHeightSlider);
234         buildAccessibleGroup(relatedComponents);
235 
236 
237         // Create the table.
238         tableAggregate = createTable();
239         getDemoPanel().add(tableAggregate, BorderLayout.CENTER);
240 
241 
242         // ComboBox for selection modes.
243         JPanel selectMode = new JPanel();
244         selectMode.setLayout(new BoxLayout(selectMode, BoxLayout.X_AXIS));
245         selectMode.setBorder(new TitledBorder(getString(&quot;TableDemo.selection_mode&quot;)));
246 
247 
<span class="line-modified">248         selectionModeComboBox = new JComboBox&lt;&gt;() {</span>
249             public Dimension getMaximumSize() {
250                 return getPreferredSize();
251             }
252         };
253         selectionModeComboBox.addItem(getString(&quot;TableDemo.single&quot;));
254         selectionModeComboBox.addItem(getString(&quot;TableDemo.one_range&quot;));
255         selectionModeComboBox.addItem(getString(&quot;TableDemo.multiple_ranges&quot;));
256         selectionModeComboBox.setSelectedIndex(tableView.getSelectionModel().getSelectionMode());
257         selectionModeComboBox.addItemListener(new ItemListener() {
258             public void itemStateChanged(ItemEvent e) {
<span class="line-modified">259                 JComboBox&lt;?&gt; source = (JComboBox&lt;?&gt;)e.getSource();</span>
260                 tableView.setSelectionMode(source.getSelectedIndex());
261             }
262         });
263 
264         selectMode.add(Box.createHorizontalStrut(2));
265         selectMode.add(selectionModeComboBox);
266         selectMode.add(Box.createHorizontalGlue());
267         comboPanel.add(selectMode);
268 
269         // Combo box for table resize mode.
270         JPanel resizeMode = new JPanel();
271         resizeMode.setLayout(new BoxLayout(resizeMode, BoxLayout.X_AXIS));
272         resizeMode.setBorder(new TitledBorder(getString(&quot;TableDemo.autoresize_mode&quot;)));
273 
274 
<span class="line-modified">275         resizeModeComboBox = new JComboBox&lt;&gt;() {</span>
276             public Dimension getMaximumSize() {
277                 return getPreferredSize();
278             }
279         };
280         resizeModeComboBox.addItem(getString(&quot;TableDemo.off&quot;));
281         resizeModeComboBox.addItem(getString(&quot;TableDemo.column_boundaries&quot;));
282         resizeModeComboBox.addItem(getString(&quot;TableDemo.subsequent_columns&quot;));
283         resizeModeComboBox.addItem(getString(&quot;TableDemo.last_column&quot;));
284         resizeModeComboBox.addItem(getString(&quot;TableDemo.all_columns&quot;));
285         resizeModeComboBox.setSelectedIndex(tableView.getAutoResizeMode());
286         resizeModeComboBox.addItemListener(new ItemListener() {
287             public void itemStateChanged(ItemEvent e) {
<span class="line-modified">288                 JComboBox&lt;?&gt; source = (JComboBox&lt;?&gt;)e.getSource();</span>
289                 tableView.setAutoResizeMode(source.getSelectedIndex());
290             }
291         });
292 
293         resizeMode.add(Box.createHorizontalStrut(2));
294         resizeMode.add(resizeModeComboBox);
295         resizeMode.add(Box.createHorizontalGlue());
296         comboPanel.add(resizeMode);
297 
298         // print panel
299         printPanel.setBorder(new TitledBorder(getString(&quot;TableDemo.printing&quot;)));
300         headerLabel = new JLabel(getString(&quot;TableDemo.header&quot;));
301         footerLabel = new JLabel(getString(&quot;TableDemo.footer&quot;));
302         headerTextField = new JTextField(getString(&quot;TableDemo.headerText&quot;), 15);
303         footerTextField = new JTextField(getString(&quot;TableDemo.footerText&quot;), 15);
304         fitWidth = new JCheckBox(getString(&quot;TableDemo.fitWidth&quot;), true);
305         printButton = new JButton(getString(&quot;TableDemo.print&quot;));
306         printButton.addActionListener(new ActionListener() {
307             public void actionPerformed(ActionEvent ae) {
308                 printTable();
</pre>
<hr />
<pre>
350 
351         getDemoPanel().getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT)
352             .put(KeyStroke.getKeyStroke(&quot;ctrl P&quot;), &quot;print&quot;);
353 
354         getDemoPanel().getActionMap().put(&quot;print&quot;, new AbstractAction() {
355             public void actionPerformed(ActionEvent ae) {
356                 printTable();
357             }
358         });
359 
360     } // TableDemo()
361 
362     /**
363      * Sets the Accessibility MEMBER_OF property to denote that
364      * these components work together as a group. Each object
365      * is set to be a MEMBER_OF an array that contains all of
366      * the objects in the group, including itself.
367      *
368      * @param components The list of objects that are related
369      */
<span class="line-modified">370     void buildAccessibleGroup(Vector&lt;JComponent&gt; components) {</span>
371 
372         AccessibleContext context = null;
373         int numComponents = components.size();
374         Object[] group = components.toArray();
375         Object object = null;
376         for (int i = 0; i &lt; numComponents; ++i) {
377             object = components.elementAt(i);
378             if (object instanceof Accessible) {
379                 context = ((Accessible)components.elementAt(i)).
380                                                  getAccessibleContext();
381                 context.getAccessibleRelationSet().add(
382                     new AccessibleRelation(
383                         AccessibleRelation.MEMBER_OF, group));
384             }
385         }
386     } // buildAccessibleGroup()
387 
388     /**
389      * This sets CONTROLLER_FOR on the controls that manipulate the
390      * table and CONTROLLED_BY relationships on the table to point
</pre>
<hr />
<pre>
475         NamedColor eblue       = new NamedColor(Color.blue, getString(&quot;TableDemo.eblue&quot;));
476         NamedColor jfcblue     = new NamedColor(new Color(204, 204, 255), getString(&quot;TableDemo.jfcblue&quot;));
477         NamedColor jfcblue2    = new NamedColor(new Color(153, 153, 204), getString(&quot;TableDemo.jfcblue2&quot;));
478         NamedColor cybergreen  = new NamedColor(Color.green.darker().brighter(), getString(&quot;TableDemo.cybergreen&quot;));
479         NamedColor darkgreen   = new NamedColor(new Color(0, 100, 75), getString(&quot;TableDemo.darkgreen&quot;));
480         NamedColor forestgreen = new NamedColor(Color.green.darker(), getString(&quot;TableDemo.forestgreen&quot;));
481         NamedColor gray        = new NamedColor(Color.gray, getString(&quot;TableDemo.gray&quot;));
482         NamedColor green       = new NamedColor(Color.green, getString(&quot;TableDemo.green&quot;));
483         NamedColor orange      = new NamedColor(new Color(255, 165, 0), getString(&quot;TableDemo.orange&quot;));
484         NamedColor purple      = new NamedColor(new Color(160, 32, 240),  getString(&quot;TableDemo.purple&quot;));
485         NamedColor red         = new NamedColor(Color.red, getString(&quot;TableDemo.red&quot;));
486         NamedColor rustred     = new NamedColor(Color.red.darker(), getString(&quot;TableDemo.rustred&quot;));
487         NamedColor sunpurple   = new NamedColor(new Color(100, 100, 255), getString(&quot;TableDemo.sunpurple&quot;));
488         NamedColor suspectpink = new NamedColor(new Color(255, 105, 180), getString(&quot;TableDemo.suspectpink&quot;));
489         NamedColor turquoise   = new NamedColor(new Color(0, 255, 255), getString(&quot;TableDemo.turquoise&quot;));
490         NamedColor violet      = new NamedColor(new Color(238, 130, 238), getString(&quot;TableDemo.violet&quot;));
491         NamedColor yellow      = new NamedColor(Color.yellow, getString(&quot;TableDemo.yellow&quot;));
492 
493         // Create the dummy data (a few rows of names)
494         final Object[][] data = {
<span class="line-modified">495           {&quot;Mike&quot;, &quot;Albers&quot;,      green,       getString(&quot;TableDemo.brazil&quot;), Double.valueOf(44.0), strawberry},</span>
<span class="line-modified">496           {&quot;Mark&quot;, &quot;Andrews&quot;,     blue,        getString(&quot;TableDemo.curse&quot;), Double.valueOf(3), grapes},</span>
<span class="line-modified">497           {&quot;Brian&quot;, &quot;Beck&quot;,       black,       getString(&quot;TableDemo.bluesbros&quot;), Double.valueOf(2.7182818285), raspberry},</span>
<span class="line-modified">498           {&quot;Lara&quot;, &quot;Bunni&quot;,       red,         getString(&quot;TableDemo.airplane&quot;), Double.valueOf(15), strawberry},</span>
<span class="line-modified">499           {&quot;Roger&quot;, &quot;Brinkley&quot;,   blue,        getString(&quot;TableDemo.man&quot;), Double.valueOf(13), peach},</span>
<span class="line-modified">500           {&quot;Brent&quot;, &quot;Christian&quot;,  black,       getString(&quot;TableDemo.bladerunner&quot;), Double.valueOf(23), broccoli},</span>
<span class="line-modified">501           {&quot;Mark&quot;, &quot;Davidson&quot;,    darkgreen,   getString(&quot;TableDemo.brazil&quot;), Double.valueOf(27), asparagus},</span>
<span class="line-modified">502           {&quot;Jeff&quot;, &quot;Dinkins&quot;,     blue,        getString(&quot;TableDemo.ladyvanishes&quot;), Double.valueOf(8), kiwi},</span>
<span class="line-modified">503           {&quot;Ewan&quot;, &quot;Dinkins&quot;,     yellow,      getString(&quot;TableDemo.bugs&quot;), Double.valueOf(2), strawberry},</span>
<span class="line-modified">504           {&quot;Amy&quot;, &quot;Fowler&quot;,       violet,      getString(&quot;TableDemo.reservoir&quot;), Double.valueOf(3), raspberry},</span>
<span class="line-modified">505           {&quot;Hania&quot;, &quot;Gajewska&quot;,   purple,      getString(&quot;TableDemo.jules&quot;), Double.valueOf(5), raspberry},</span>
<span class="line-modified">506           {&quot;David&quot;, &quot;Geary&quot;,      blue,        getString(&quot;TableDemo.pulpfiction&quot;), Double.valueOf(3), watermelon},</span>
<span class="line-modified">507 //        {&quot;James&quot;, &quot;Gosling&quot;,    pink,        getString(&quot;TableDemo.tennis&quot;), Double.valueOf(21), donut},</span>
<span class="line-modified">508           {&quot;Eric&quot;, &quot;Hawkes&quot;,      blue,        getString(&quot;TableDemo.bladerunner&quot;), Double.valueOf(.693), pickle},</span>
<span class="line-modified">509           {&quot;Shannon&quot;, &quot;Hickey&quot;,   green,       getString(&quot;TableDemo.shawshank&quot;), Double.valueOf(2), grapes},</span>
<span class="line-modified">510           {&quot;Earl&quot;, &quot;Johnson&quot;,     green,       getString(&quot;TableDemo.pulpfiction&quot;), Double.valueOf(8), carrot},</span>
<span class="line-modified">511           {&quot;Robi&quot;, &quot;Khan&quot;,        green,       getString(&quot;TableDemo.goodfellas&quot;), Double.valueOf(89), apple},</span>
<span class="line-modified">512           {&quot;Robert&quot;, &quot;Kim&quot;,       blue,        getString(&quot;TableDemo.mohicans&quot;), Double.valueOf(655321), strawberry},</span>
<span class="line-modified">513           {&quot;Janet&quot;, &quot;Koenig&quot;,     turquoise,   getString(&quot;TableDemo.lonestar&quot;), Double.valueOf(7), peach},</span>
<span class="line-modified">514           {&quot;Jeff&quot;, &quot;Kesselman&quot;,   blue,        getString(&quot;TableDemo.stuntman&quot;), Double.valueOf(17), pineapple},</span>
<span class="line-modified">515           {&quot;Onno&quot;, &quot;Kluyt&quot;,       orange,      getString(&quot;TableDemo.oncewest&quot;), Double.valueOf(8), broccoli},</span>
<span class="line-modified">516           {&quot;Peter&quot;, &quot;Korn&quot;,       sunpurple,   getString(&quot;TableDemo.musicman&quot;), Double.valueOf(12), sparegrass},</span>
<span class="line-modified">517 </span>
<span class="line-modified">518           {&quot;Rick&quot;, &quot;Levenson&quot;,    black,       getString(&quot;TableDemo.harold&quot;), Double.valueOf(1327), raspberry},</span>
<span class="line-modified">519           {&quot;Brian&quot;, &quot;Lichtenwalter&quot;, jfcblue,  getString(&quot;TableDemo.fifthelement&quot;), Double.valueOf(22), pear},</span>
<span class="line-modified">520           {&quot;Malini&quot;, &quot;Minasandram&quot;, beige,     getString(&quot;TableDemo.joyluck&quot;), Double.valueOf(9), corn},</span>
<span class="line-modified">521           {&quot;Michael&quot;, &quot;Martak&quot;,   green,       getString(&quot;TableDemo.city&quot;), Double.valueOf(3), strawberry},</span>
<span class="line-modified">522           {&quot;David&quot;, &quot;Mendenhall&quot;, forestgreen, getString(&quot;TableDemo.schindlerslist&quot;), Double.valueOf(7), peach},</span>
<span class="line-modified">523           {&quot;Phil&quot;, &quot;Milne&quot;,       suspectpink, getString(&quot;TableDemo.withnail&quot;), Double.valueOf(3), banana},</span>
<span class="line-modified">524           {&quot;Lynn&quot;, &quot;Monsanto&quot;,    cybergreen,  getString(&quot;TableDemo.dasboot&quot;), Double.valueOf(52), peach},</span>
<span class="line-modified">525           {&quot;Hans&quot;, &quot;Muller&quot;,      rustred,     getString(&quot;TableDemo.eraserhead&quot;), Double.valueOf(0), pineapple},</span>
<span class="line-modified">526           {&quot;Joshua&quot;, &quot;Outwater&quot;,  blue,        getString(&quot;TableDemo.labyrinth&quot;), Double.valueOf(3), pineapple},</span>
<span class="line-modified">527           {&quot;Tim&quot;, &quot;Prinzing&quot;,     blue,        getString(&quot;TableDemo.firstsight&quot;), Double.valueOf(69), pepper},</span>
<span class="line-modified">528           {&quot;Raj&quot;, &quot;Premkumar&quot;,    jfcblue2,    getString(&quot;TableDemo.none&quot;), Double.valueOf(7), broccoli},</span>
<span class="line-modified">529           {&quot;Howard&quot;, &quot;Rosen&quot;,     green,       getString(&quot;TableDemo.defending&quot;), Double.valueOf(7), strawberry},</span>
530           {&quot;Ray&quot;, &quot;Ryan&quot;,         black,       getString(&quot;TableDemo.buckaroo&quot;),
<span class="line-modified">531            Double.valueOf(3.141592653589793238462643383279502884197169399375105820974944), banana},</span>
<span class="line-modified">532           {&quot;Georges&quot;, &quot;Saab&quot;,     aqua,        getString(&quot;TableDemo.bicycle&quot;), Double.valueOf(290), cantaloupe},</span>
<span class="line-modified">533           {&quot;Tom&quot;, &quot;Santos&quot;,       blue,        getString(&quot;TableDemo.spinaltap&quot;), Double.valueOf(241), pepper},</span>
<span class="line-modified">534           {&quot;Rich&quot;, &quot;Schiavi&quot;,     blue,        getString(&quot;TableDemo.repoman&quot;), Double.valueOf(0xFF), pepper},</span>
<span class="line-modified">535           {&quot;Nancy&quot;, &quot;Schorr&quot;,     green,       getString(&quot;TableDemo.fifthelement&quot;), Double.valueOf(47), watermelon},</span>
<span class="line-modified">536           {&quot;Keith&quot;, &quot;Sprochi&quot;,    darkgreen,   getString(&quot;TableDemo.2001&quot;), Double.valueOf(13), watermelon},</span>
<span class="line-modified">537           {&quot;Matt&quot;, &quot;Tucker&quot;,      eblue,       getString(&quot;TableDemo.starwars&quot;), Double.valueOf(2), broccoli},</span>
<span class="line-modified">538           {&quot;Dmitri&quot;, &quot;Trembovetski&quot;, red,      getString(&quot;TableDemo.aliens&quot;), Double.valueOf(222), tomato},</span>
<span class="line-modified">539           {&quot;Scott&quot;, &quot;Violet&quot;,     violet,      getString(&quot;TableDemo.raiders&quot;), Double.valueOf(-97), banana},</span>
<span class="line-modified">540           {&quot;Kathy&quot;, &quot;Walrath&quot;,    darkgreen,   getString(&quot;TableDemo.thinman&quot;), Double.valueOf(8), pear},</span>
<span class="line-modified">541           {&quot;Nathan&quot;, &quot;Walrath&quot;,   black,       getString(&quot;TableDemo.chusingura&quot;), Double.valueOf(3), grapefruit},</span>
<span class="line-modified">542           {&quot;Steve&quot;, &quot;Wilson&quot;,     green,       getString(&quot;TableDemo.raiders&quot;), Double.valueOf(7), onion},</span>
<span class="line-modified">543           {&quot;Kathleen&quot;, &quot;Zelony&quot;,  gray,        getString(&quot;TableDemo.dog&quot;), Double.valueOf(13), grapes}</span>
544         };
545 
546         // Create a model of the data.
547         TableModel dataModel = new AbstractTableModel() {
548             public int getColumnCount() { return names.length; }
549             public int getRowCount() { return data.length;}
550             public Object getValueAt(int row, int col) {return data[row][col];}
551             public String getColumnName(int column) {return names[column];}
<span class="line-modified">552             public Class&lt;?&gt; getColumnClass(int c) {return getValueAt(0, c).getClass();}</span>
553             public boolean isCellEditable(int row, int col) {return col != 5;}
554             public void setValueAt(Object aValue, int row, int column) { data[row][column] = aValue; }
555          };
556 
557 
558         // Create the table
559         tableView = new JTable(dataModel);
<span class="line-modified">560         TableRowSorter&lt;TableModel&gt; sorter = new TableRowSorter&lt;&gt;(dataModel);</span>
561         tableView.setRowSorter(sorter);
562 
563         // Show colors by rendering them in their own color.
564         DefaultTableCellRenderer colorRenderer = new DefaultTableCellRenderer() {
565             public void setValue(Object value) {
566                 if (value instanceof NamedColor) {
567                     NamedColor c = (NamedColor) value;
568                     setBackground(c);
569                     setForeground(c.getTextColor());
570                     setText(c.toString());
571                 } else {
572                     super.setValue(value);
573                 }
574             }
575         };
576 
577         // Create a combo box to show that you can use one in a table.
<span class="line-modified">578         JComboBox&lt;NamedColor&gt; comboBox = new JComboBox&lt;&gt;();</span>
579         comboBox.addItem(aqua);
580         comboBox.addItem(beige);
581         comboBox.addItem(black);
582         comboBox.addItem(blue);
583         comboBox.addItem(eblue);
584         comboBox.addItem(jfcblue);
585         comboBox.addItem(jfcblue2);
586         comboBox.addItem(cybergreen);
587         comboBox.addItem(darkgreen);
588         comboBox.addItem(forestgreen);
589         comboBox.addItem(gray);
590         comboBox.addItem(green);
591         comboBox.addItem(orange);
592         comboBox.addItem(purple);
593         comboBox.addItem(red);
594         comboBox.addItem(rustred);
595         comboBox.addItem(sunpurple);
596         comboBox.addItem(suspectpink);
597         comboBox.addItem(turquoise);
598         comboBox.addItem(violet);
</pre>
</td>
</tr>
</table>
<center><a href="SwingSet2.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../TableExample/JDBCAdapter.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>