<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/demo/share/jfc/SwingSet2/SwingSet2.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="SplitPaneDemo.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="TableDemo.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/demo/share/jfc/SwingSet2/SwingSet2.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  54     String[] demos = {
  55       &quot;ButtonDemo&quot;,
  56       &quot;ColorChooserDemo&quot;,
  57       &quot;ComboBoxDemo&quot;,
  58       &quot;FileChooserDemo&quot;,
  59       &quot;HtmlDemo&quot;,
  60       &quot;ListDemo&quot;,
  61       &quot;OptionPaneDemo&quot;,
  62       &quot;ProgressBarDemo&quot;,
  63       &quot;ScrollPaneDemo&quot;,
  64       &quot;SliderDemo&quot;,
  65       &quot;SplitPaneDemo&quot;,
  66       &quot;TabbedPaneDemo&quot;,
  67       &quot;TableDemo&quot;,
  68       &quot;ToolTipDemo&quot;,
  69       &quot;TreeDemo&quot;
  70     };
  71 
  72     void loadDemos() {
  73         for(int i = 0; i &lt; demos.length;) {
<span class="line-modified">  74             if(isApplet() &amp;&amp; demos[i].equals(&quot;FileChooserDemo&quot;)) {</span>
<span class="line-removed">  75                // don&#39;t load the file chooser demo if we are</span>
<span class="line-removed">  76                // an applet</span>
<span class="line-removed">  77             } else {</span>
<span class="line-removed">  78                loadDemo(demos[i]);</span>
<span class="line-removed">  79             }</span>
  80             i++;
  81         }
  82     }
  83 
  84     // The current Look &amp; Feel
  85     private static LookAndFeelData currentLookAndFeel;
  86     private static LookAndFeelData[] lookAndFeelData;
  87     // List of demos
  88     private ArrayList&lt;DemoModule&gt; demosList = new ArrayList&lt;DemoModule&gt;();
  89 
  90     // The preferred size of the demo
  91     private static final int PREFERRED_WIDTH = 720;
  92     private static final int PREFERRED_HEIGHT = 640;
  93 
  94     // Box spacers
  95     private Dimension HGAP = new Dimension(1,5);
  96     private Dimension VGAP = new Dimension(5,1);
  97 
  98     // A place to hold on to the visible demo
  99     private DemoModule currentDemo = null;
</pre>
<hr />
<pre>
 109     private ToggleButtonToolBar toolbar = null;
 110     private ButtonGroup toolbarGroup = new ButtonGroup();
 111 
 112     // Menus
 113     private JMenuBar menuBar = null;
 114     private JMenu lafMenu = null;
 115     private JMenu themesMenu = null;
 116     private JMenu audioMenu = null;
 117     private JMenu optionsMenu = null;
 118     private ButtonGroup lafMenuGroup = new ButtonGroup();
 119     private ButtonGroup themesMenuGroup = new ButtonGroup();
 120     private ButtonGroup audioMenuGroup = new ButtonGroup();
 121 
 122     // Popup menu
 123     private JPopupMenu popupMenu = null;
 124     private ButtonGroup popupMenuGroup = new ButtonGroup();
 125 
 126     // Used only if swingset is an application
 127     private JFrame frame = null;
 128 
<span class="line-removed"> 129     // Used only if swingset is an applet</span>
<span class="line-removed"> 130     private SwingSet2Applet applet = null;</span>
<span class="line-removed"> 131 </span>
 132     // To debug or not to debug, that is the question
 133     private boolean DEBUG = true;
 134     private int debugCounter = 0;
 135 
 136     // The tab pane that holds the demo
 137     private JTabbedPane tabbedPane = null;
 138 
 139     private JEditorPane demoSrcPane = null;
 140 
 141 
 142     // contentPane cache, saved from the applet or application frame
 143     Container contentPane = null;
 144 
 145 
 146     // number of swingsets - for multiscreen
 147     // keep track of the number of SwingSets created - we only want to exit
 148     // the program when the last one has been closed.
 149     private static int numSSs = 0;
 150     private static Vector&lt;SwingSet2&gt; swingSets = new Vector&lt;SwingSet2&gt;();
 151 
 152     private boolean dragEnabled = false;
 153 
<span class="line-modified"> 154     public SwingSet2(SwingSet2Applet applet) {</span>
<span class="line-modified"> 155         this(applet, null);</span>
 156     }
 157 
 158     /**
 159      * SwingSet2 Constructor
 160      */
<span class="line-modified"> 161     public SwingSet2(SwingSet2Applet applet, GraphicsConfiguration gc) {</span>
<span class="line-removed"> 162 </span>
<span class="line-removed"> 163         // Note that applet may be null if this is started as an application</span>
<span class="line-removed"> 164         this.applet = applet;</span>
<span class="line-removed"> 165 </span>
 166         String lafClassName = UIManager.getLookAndFeel().getClass().getName();
 167         lookAndFeelData = getInstalledLookAndFeelData();
 168         currentLookAndFeel = Arrays.stream(lookAndFeelData)
 169                 .filter(laf -&gt; lafClassName.equals(laf.className))
 170                 .findFirst().get();
 171 
<span class="line-modified"> 172         if (!isApplet()) {</span>
<span class="line-removed"> 173             frame = createFrame(gc);</span>
<span class="line-removed"> 174         }</span>
 175 
 176         // set the layout
 177         setLayout(new BorderLayout());
 178 
 179         // set the preferred size of the demo
 180         setPreferredSize(new Dimension(PREFERRED_WIDTH,PREFERRED_HEIGHT));
 181 
 182         initializeDemo();
 183         preloadFirstDemo();
 184 
 185         showSwingSet2();
 186 
 187         // Start loading the rest of the demo in the background
 188         DemoLoadThread demoLoader = new DemoLoadThread(this);
 189         demoLoader.start();
 190     }
 191 
 192 
 193     /**
 194      * SwingSet2 Main. Called only if we&#39;re an application, not an applet.
 195      */
 196     public static void main(final String[] args) {
 197         // must run in EDT when constructing the GUI components
 198         SwingUtilities.invokeLater(() -&gt; {
 199             // Create SwingSet on the default monitor
 200             UIManager.put(&quot;swing.boldMetal&quot;, Boolean.FALSE);
<span class="line-modified"> 201             SwingSet2 swingset = new SwingSet2(null, GraphicsEnvironment.</span>
 202                                          getLocalGraphicsEnvironment().
 203                                          getDefaultScreenDevice().
 204                                          getDefaultConfiguration());
 205         });
 206     }
 207 
 208     // *******************************************************
 209     // *************** Demo Loading Methods ******************
 210     // *******************************************************
 211 
 212 
 213 
 214     public void initializeDemo() {
 215         JPanel top = new JPanel();
 216         top.setLayout(new BorderLayout());
 217         add(top, BorderLayout.NORTH);
 218 
 219         menuBar = createMenus();
 220 
<span class="line-removed"> 221     if (isApplet()) {</span>
<span class="line-removed"> 222         applet.setJMenuBar(menuBar);</span>
<span class="line-removed"> 223     } else {</span>
 224         frame.setJMenuBar(menuBar);
<span class="line-removed"> 225     }</span>
 226 
 227         // creates popup menu accessible via keyboard
 228         popupMenu = createPopupMenu();
 229 
 230         ToolBarPanel toolbarPanel = new ToolBarPanel();
 231         toolbarPanel.setLayout(new BorderLayout());
 232         toolbar = new ToggleButtonToolBar();
 233         toolbarPanel.add(toolbar, BorderLayout.CENTER);
 234         top.add(toolbarPanel, BorderLayout.SOUTH);
 235         toolbarPanel.addContainerListener(toolbarPanel);
 236 
 237         tabbedPane = new JTabbedPane();
 238         add(tabbedPane, BorderLayout.CENTER);
 239         tabbedPane.getModel().addChangeListener(new TabListener());
 240 
 241         statusField = new JTextField(&quot;&quot;);
 242         statusField.setEditable(false);
 243         add(statusField, BorderLayout.SOUTH);
 244 
 245         demoPanel = new JPanel();
</pre>
<hr />
<pre>
 292         // ***** create File menu
 293         JMenu fileMenu = (JMenu) menuBar.add(new JMenu(getString(&quot;FileMenu.file_label&quot;)));
 294         fileMenu.setMnemonic(getMnemonic(&quot;FileMenu.file_mnemonic&quot;));
 295         fileMenu.getAccessibleContext().setAccessibleDescription(getString(&quot;FileMenu.accessible_description&quot;));
 296 
 297         createMenuItem(fileMenu, &quot;FileMenu.about_label&quot;, &quot;FileMenu.about_mnemonic&quot;,
 298                        &quot;FileMenu.about_accessible_description&quot;, new AboutAction(this));
 299 
 300         fileMenu.addSeparator();
 301 
 302         createMenuItem(fileMenu, &quot;FileMenu.open_label&quot;, &quot;FileMenu.open_mnemonic&quot;,
 303                        &quot;FileMenu.open_accessible_description&quot;, null);
 304 
 305         createMenuItem(fileMenu, &quot;FileMenu.save_label&quot;, &quot;FileMenu.save_mnemonic&quot;,
 306                        &quot;FileMenu.save_accessible_description&quot;, null);
 307 
 308         createMenuItem(fileMenu, &quot;FileMenu.save_as_label&quot;, &quot;FileMenu.save_as_mnemonic&quot;,
 309                        &quot;FileMenu.save_as_accessible_description&quot;, null);
 310 
 311 
<span class="line-modified"> 312         if(!isApplet()) {</span>
<span class="line-removed"> 313             fileMenu.addSeparator();</span>
 314 
<span class="line-modified"> 315             createMenuItem(fileMenu, &quot;FileMenu.exit_label&quot;, &quot;FileMenu.exit_mnemonic&quot;,</span>
<span class="line-modified"> 316                            &quot;FileMenu.exit_accessible_description&quot;, new ExitAction(this)</span>
<span class="line-modified"> 317             );</span>
<span class="line-removed"> 318         }</span>
 319 
 320         // Create these menu items for the first SwingSet only.
 321         if (numSSs == 0) {
 322         // ***** create laf switcher menu
 323         lafMenu = (JMenu) menuBar.add(new JMenu(getString(&quot;LafMenu.laf_label&quot;)));
 324         lafMenu.setMnemonic(getMnemonic(&quot;LafMenu.laf_mnemonic&quot;));
 325         lafMenu.getAccessibleContext().setAccessibleDescription(
 326             getString(&quot;LafMenu.laf_accessible_description&quot;));
 327 
 328         for (LookAndFeelData lafData : lookAndFeelData) {
 329             mi = createLafMenuItem(lafMenu, lafData);
 330             mi.setSelected(lafData.equals(currentLookAndFeel));
 331         }
 332 
 333         // ***** create themes menu
 334         themesMenu = (JMenu) menuBar.add(new JMenu(getString(&quot;ThemesMenu.themes_label&quot;)));
 335         themesMenu.setMnemonic(getMnemonic(&quot;ThemesMenu.themes_mnemonic&quot;));
 336         themesMenu.getAccessibleContext().setAccessibleDescription(
 337             getString(&quot;ThemesMenu.themes_accessible_description&quot;));
 338 
</pre>
<hr />
<pre>
 414         optionsMenu.getAccessibleContext().setAccessibleDescription(
 415             getString(&quot;OptionsMenu.options_accessible_description&quot;));
 416 
 417         // ***** create tool tip submenu item.
 418         mi = createCheckBoxMenuItem(optionsMenu, &quot;OptionsMenu.tooltip_label&quot;,
 419                 &quot;OptionsMenu.tooltip_mnemonic&quot;,
 420                 &quot;OptionsMenu.tooltip_accessible_description&quot;,
 421                 new ToolTipAction());
 422         mi.setSelected(true);
 423 
 424         // ***** create drag support submenu item.
 425         createCheckBoxMenuItem(optionsMenu, &quot;OptionsMenu.dragEnabled_label&quot;,
 426                 &quot;OptionsMenu.dragEnabled_mnemonic&quot;,
 427                 &quot;OptionsMenu.dragEnabled_accessible_description&quot;,
 428                 new DragSupportAction());
 429 
 430         }
 431 
 432 
 433         // ***** create the multiscreen menu, if we have multiple screens
<span class="line-removed"> 434     if (!isApplet()) {</span>
 435         GraphicsDevice[] screens = GraphicsEnvironment.
 436                                     getLocalGraphicsEnvironment().
 437                                     getScreenDevices();
 438         if (screens.length &gt; 1) {
 439 
 440             JMenu multiScreenMenu = (JMenu) menuBar.add(new JMenu(
 441                                      getString(&quot;MultiMenu.multi_label&quot;)));
 442 
 443             multiScreenMenu.setMnemonic(getMnemonic(&quot;MultiMenu.multi_mnemonic&quot;));
 444             multiScreenMenu.getAccessibleContext().setAccessibleDescription(
 445              getString(&quot;MultiMenu.multi_accessible_description&quot;));
 446 
 447             createMultiscreenMenuItem(multiScreenMenu, MultiScreenAction.ALL_SCREENS);
 448             for (int i = 0; i &lt; screens.length; i++) {
 449                 createMultiscreenMenuItem(multiScreenMenu, i);
 450             }
 451         }
<span class="line-removed"> 452     }</span>
 453 
 454         return menuBar;
 455     }
 456 
 457     /**
 458      * Create a checkbox menu menu item
 459      */
 460     private JMenuItem createCheckBoxMenuItem(JMenu menu, String label,
 461                                              String mnemonic,
 462                                              String accessibleDescription,
 463                                              Action action) {
 464         JCheckBoxMenuItem mi = (JCheckBoxMenuItem)menu.add(
 465                 new JCheckBoxMenuItem(getString(label)));
 466         mi.setMnemonic(getMnemonic(mnemonic));
 467         mi.getAccessibleContext().setAccessibleDescription(getString(
 468                 accessibleDescription));
 469         mi.addActionListener(action);
 470         return mi;
 471     }
 472 
</pre>
<hr />
<pre>
 561             mi = (JMenuItem) menu.add(new JMenuItem(getString(&quot;MultiMenu.single_label&quot;) + &quot; &quot; +
 562                                                                                                  screen));
 563             mi.setMnemonic(KeyEvent.VK_0 + screen);
 564             mi.getAccessibleContext().setAccessibleDescription(getString(
 565                                                &quot;MultiMenu.single_accessible_description&quot;) + &quot; &quot; + screen);
 566 
 567         }
 568         mi.addActionListener(new MultiScreenAction(this, screen));
 569         return mi;
 570     }
 571 
 572     public JPopupMenu createPopupMenu() {
 573         JPopupMenu popup = new JPopupMenu(&quot;JPopupMenu demo&quot;);
 574 
 575         for (LookAndFeelData lafData : lookAndFeelData) {
 576             createPopupMenuItem(popup, lafData);
 577         }
 578 
 579         // register key binding to activate popup menu
 580         InputMap map = getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
<span class="line-modified"> 581         map.put(KeyStroke.getKeyStroke(KeyEvent.VK_F10, InputEvent.SHIFT_MASK),</span>
 582                 &quot;postMenuAction&quot;);
 583         map.put(KeyStroke.getKeyStroke(KeyEvent.VK_CONTEXT_MENU, 0), &quot;postMenuAction&quot;);
 584         getActionMap().put(&quot;postMenuAction&quot;, new ActivatePopupMenuAction(this, popup));
 585 
 586         return popup;
 587     }
 588 
 589     /**
 590      * Creates a JMenuItem for the Look and Feel popup menu
 591      */
 592     public JMenuItem createPopupMenuItem(JPopupMenu menu, LookAndFeelData lafData) {
 593         JMenuItem mi = menu.add(new JMenuItem(lafData.label));
 594         popupMenuGroup.add(mi);
 595         mi.setMnemonic(lafData.mnemonic);
 596         mi.getAccessibleContext().setAccessibleDescription(lafData.accDescription);
 597         mi.addActionListener(new ChangeLookAndFeelAction(this, lafData));
 598         return mi;
 599     }
 600 
 601 
</pre>
<hr />
<pre>
 642     /**
 643      * Sets the current demo
 644      */
 645     public void setDemo(DemoModule demo) {
 646         currentDemo = demo;
 647 
 648         // Ensure panel&#39;s UI is current before making visible
 649         JComponent currentDemoPanel = demo.getDemoPanel();
 650         SwingUtilities.updateComponentTreeUI(currentDemoPanel);
 651 
 652         demoPanel.removeAll();
 653         demoPanel.add(currentDemoPanel, BorderLayout.CENTER);
 654 
 655         tabbedPane.setSelectedIndex(0);
 656         tabbedPane.setTitleAt(0, demo.getName());
 657         tabbedPane.setToolTipTextAt(0, demo.getToolTip());
 658     }
 659 
 660 
 661     /**
<span class="line-modified"> 662      * Bring up the SwingSet2 demo by showing the frame (only</span>
<span class="line-removed"> 663      * applicable if coming up as an application, not an applet);</span>
 664      */
 665     public void showSwingSet2() {
<span class="line-modified"> 666         if(!isApplet() &amp;&amp; getFrame() != null) {</span>
<span class="line-modified"> 667             // put swingset in a frame and show it</span>
<span class="line-modified"> 668             JFrame f = getFrame();</span>
<span class="line-modified"> 669             f.setTitle(getString(&quot;Frame.title&quot;));</span>
<span class="line-modified"> 670             f.getContentPane().add(this, BorderLayout.CENTER);</span>
<span class="line-modified"> 671             f.pack();</span>
<span class="line-modified"> 672 </span>
<span class="line-modified"> 673             Rectangle screenRect = f.getGraphicsConfiguration().getBounds();</span>
<span class="line-modified"> 674             Insets screenInsets = Toolkit.getDefaultToolkit().getScreenInsets(</span>
<span class="line-modified"> 675                     f.getGraphicsConfiguration());</span>
<span class="line-modified"> 676 </span>
<span class="line-modified"> 677             // Make sure we don&#39;t place the demo off the screen.</span>
<span class="line-modified"> 678             int centerWidth = screenRect.width &lt; f.getSize().width ?</span>
<span class="line-modified"> 679                     screenRect.x :</span>
<span class="line-modified"> 680                     screenRect.x + screenRect.width/2 - f.getSize().width/2;</span>
<span class="line-modified"> 681             int centerHeight = screenRect.height &lt; f.getSize().height ?</span>
<span class="line-modified"> 682                     screenRect.y :</span>
<span class="line-modified"> 683                     screenRect.y + screenRect.height/2 - f.getSize().height/2;</span>
<span class="line-modified"> 684 </span>
<span class="line-modified"> 685             centerHeight = centerHeight &lt; screenInsets.top ?</span>
<span class="line-modified"> 686                     screenInsets.top : centerHeight;</span>
<span class="line-modified"> 687 </span>
<span class="line-modified"> 688             f.setLocation(centerWidth, centerHeight);</span>
<span class="line-modified"> 689             f.show();</span>
<span class="line-modified"> 690             numSSs++;</span>
<span class="line-removed"> 691             swingSets.add(this);</span>
<span class="line-removed"> 692         }</span>
 693     }
 694 
 695     // *******************************************************
 696     // ****************** Utility Methods ********************
 697     // *******************************************************
 698 
 699     /**
 700      * Loads a demo from a classname
 701      */
 702     void loadDemo(String classname) {
 703         setStatus(getString(&quot;Status.loading&quot;) + getString(classname + &quot;.name&quot;));
 704         DemoModule demo = null;
 705         try {
<span class="line-modified"> 706             Class demoClass = Class.forName(classname);</span>
<span class="line-modified"> 707             Constructor demoConstructor = demoClass.getConstructor(new Class[]{SwingSet2.class});</span>
 708             demo = (DemoModule) demoConstructor.newInstance(new Object[]{this});
 709             addDemo(demo);
 710         } catch (Exception e) {
 711             System.out.println(&quot;Error occurred loading demo: &quot; + classname);
 712         }
 713     }
 714 
<span class="line-removed"> 715     /**</span>
<span class="line-removed"> 716      * Determines if this is an applet or application</span>
<span class="line-removed"> 717      */</span>
<span class="line-removed"> 718     public boolean isApplet() {</span>
<span class="line-removed"> 719         return (applet != null);</span>
<span class="line-removed"> 720     }</span>
<span class="line-removed"> 721 </span>
<span class="line-removed"> 722     /**</span>
<span class="line-removed"> 723      * Returns the applet instance</span>
<span class="line-removed"> 724      */</span>
<span class="line-removed"> 725     public SwingSet2Applet getApplet() {</span>
<span class="line-removed"> 726         return applet;</span>
<span class="line-removed"> 727     }</span>
<span class="line-removed"> 728 </span>
<span class="line-removed"> 729 </span>
 730     /**
 731      * Returns the frame instance
 732      */
 733     public JFrame getFrame() {
 734         return frame;
 735     }
 736 
 737     /**
 738      * Returns the menubar
 739      */
 740     public JMenuBar getMenuBar() {
 741         return menuBar;
 742     }
 743 
 744     /**
 745      * Returns the toolbar
 746      */
 747     public ToggleButtonToolBar getToolBar() {
 748         return toolbar;
 749     }
 750 
 751     /**
 752      * Returns the toolbar button group
 753      */
 754     public ButtonGroup getToolBarGroup() {
 755         return toolbarGroup;
 756     }
 757 
 758     /**
 759      * Returns the content pane whether we&#39;re in an applet
 760      * or application
 761      */
 762     public Container getContentPane() {
 763         if(contentPane == null) {
 764             if(getFrame() != null) {
 765                 contentPane = getFrame().getContentPane();
<span class="line-removed"> 766             } else if (getApplet() != null) {</span>
<span class="line-removed"> 767                 contentPane = getApplet().getContentPane();</span>
 768             }
 769         }
 770         return contentPane;
 771     }
 772 
 773     /**
 774      * Create a frame for SwingSet2 to reside in if brought up
 775      * as an application.
 776      */
 777     public static JFrame createFrame(GraphicsConfiguration gc) {
 778         JFrame frame = new JFrame(gc);
 779         if (numSSs == 0) {
 780             frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
 781         } else {
 782             WindowListener l = new WindowAdapter() {
 783                 public void windowClosing(WindowEvent e) {
 784                     numSSs--;
 785                     swingSets.remove(this);
 786                 }
 787             };
</pre>
<hr />
<pre>
 869      */
 870     public void setLookAndFeel(LookAndFeelData laf) {
 871         if(!currentLookAndFeel.equals(laf)) {
 872             currentLookAndFeel = laf;
 873             /* The recommended way of synchronizing state between multiple
 874              * controls that represent the same command is to use Actions.
 875              * The code below is a workaround and will be replaced in future
 876              * version of SwingSet2 demo.
 877              */
 878             String lafName = laf.label;
 879             themesMenu.setEnabled(laf.name.equals(&quot;Metal&quot;));
 880             updateLookAndFeel();
 881             for(int i=0;i&lt;lafMenu.getItemCount();i++) {
 882                 JMenuItem item = lafMenu.getItem(i);
 883                 item.setSelected(item.getText().equals(lafName));
 884             }
 885         }
 886     }
 887 
 888     private void updateThisSwingSet() {
<span class="line-modified"> 889         if (isApplet()) {</span>
<span class="line-modified"> 890             SwingUtilities.updateComponentTreeUI(getApplet());</span>

 891         } else {
<span class="line-modified"> 892             JFrame frame = getFrame();</span>
<span class="line-removed"> 893             if (frame == null) {</span>
<span class="line-removed"> 894                 SwingUtilities.updateComponentTreeUI(this);</span>
<span class="line-removed"> 895             } else {</span>
<span class="line-removed"> 896                 SwingUtilities.updateComponentTreeUI(frame);</span>
<span class="line-removed"> 897             }</span>
 898         }
 899 
 900         SwingUtilities.updateComponentTreeUI(popupMenu);
 901         if (aboutBox != null) {
 902             SwingUtilities.updateComponentTreeUI(aboutBox);
 903         }
 904     }
 905 
 906     /**
 907      * Sets the current L&amp;F on each demo module
 908      */
 909     public void updateLookAndFeel() {
 910         try {
 911             UIManager.setLookAndFeel(currentLookAndFeel.className);
<span class="line-modified"> 912             if (isApplet()) {</span>
<span class="line-modified"> 913                 updateThisSwingSet();</span>
<span class="line-removed"> 914             } else {</span>
<span class="line-removed"> 915                 for (SwingSet2 ss : swingSets) {</span>
<span class="line-removed"> 916                     ss.updateThisSwingSet();</span>
<span class="line-removed"> 917                 }</span>
 918             }
 919         } catch (Exception ex) {
 920             System.out.println(&quot;Failed loading L&amp;F: &quot; + currentLookAndFeel);
 921             System.out.println(ex);
 922         }
 923     }
 924 
 925     /**
 926      * Loads and puts the source code text into JEditorPane in the &quot;Source Code&quot; tab
 927      */
 928     public void setSourceCode(DemoModule demo) {
 929         // do the following on the gui thread
 930         SwingUtilities.invokeLater(new SwingSetRunnable(this, demo) {
 931             public void run() {
 932                 swingset.demoSrcPane.setText(((DemoModule)obj).getSourceCode());
 933                 swingset.demoSrcPane.setCaretPosition(0);
 934 
 935             }
 936         });
 937     }
</pre>
<hr />
<pre>
1125 
1126     // Turns on or off the tool tips for the demo.
1127     class ToolTipAction extends AbstractAction {
1128         protected ToolTipAction() {
1129             super(&quot;ToolTip Control&quot;);
1130         }
1131 
1132         public void actionPerformed(ActionEvent e) {
1133             boolean status = ((JCheckBoxMenuItem)e.getSource()).isSelected();
1134             ToolTipManager.sharedInstance().setEnabled(status);
1135         }
1136     }
1137 
1138     class DragSupportAction extends AbstractAction {
1139         protected DragSupportAction() {
1140             super(&quot;DragSupport Control&quot;);
1141         }
1142 
1143         public void actionPerformed(ActionEvent e) {
1144             boolean dragEnabled = ((JCheckBoxMenuItem)e.getSource()).isSelected();
<span class="line-modified">1145             if (isApplet()) {</span>
<span class="line-modified">1146                 setDragEnabled(dragEnabled);</span>
<span class="line-removed">1147             } else {</span>
<span class="line-removed">1148                 for (SwingSet2 ss : swingSets) {</span>
<span class="line-removed">1149                     ss.setDragEnabled(dragEnabled);</span>
<span class="line-removed">1150                 }</span>
1151             }
1152         }
1153     }
1154 
1155     class ChangeThemeAction extends AbstractAction {
1156         SwingSet2 swingset;
1157         MetalTheme theme;
1158         protected ChangeThemeAction(SwingSet2 swingset, MetalTheme theme) {
1159             super(&quot;ChangeTheme&quot;);
1160             this.swingset = swingset;
1161             this.theme = theme;
1162         }
1163 
1164         public void actionPerformed(ActionEvent e) {
1165             MetalLookAndFeel.setCurrentTheme(theme);
1166             swingset.updateLookAndFeel();
1167         }
1168     }
1169 
1170     class ExitAction extends AbstractAction {
</pre>
<hr />
<pre>
1191                 // JPanel panel = new JPanel(new BorderLayout());
1192                 JPanel panel = new AboutPanel(swingset);
1193                 panel.setLayout(new BorderLayout());
1194 
1195                 aboutBox = new JDialog(swingset.getFrame(), getString(&quot;AboutBox.title&quot;), false);
1196                 aboutBox.setResizable(false);
1197                 aboutBox.getContentPane().add(panel, BorderLayout.CENTER);
1198 
1199                 // JButton button = new JButton(getString(&quot;AboutBox.ok_button_text&quot;));
1200                 JPanel buttonpanel = new JPanel();
1201                 buttonpanel.setBorder(new javax.swing.border.EmptyBorder(0, 0, 3, 0));
1202                 buttonpanel.setOpaque(false);
1203                 JButton button = (JButton) buttonpanel.add(
1204                     new JButton(getString(&quot;AboutBox.ok_button_text&quot;))
1205                 );
1206                 panel.add(buttonpanel, BorderLayout.SOUTH);
1207 
1208                 button.addActionListener(new OkAction(aboutBox));
1209             }
1210             aboutBox.pack();
<span class="line-modified">1211             if (isApplet()) {</span>
<span class="line-modified">1212                 aboutBox.setLocationRelativeTo(getApplet());</span>
<span class="line-removed">1213             } else {</span>
<span class="line-removed">1214                 aboutBox.setLocationRelativeTo(getFrame());</span>
<span class="line-removed">1215             }</span>
<span class="line-removed">1216             aboutBox.show();</span>
1217         }
1218     }
1219 
1220     class MultiScreenAction extends AbstractAction {
1221         static final int ALL_SCREENS = -1;
1222         int screen;
1223         protected MultiScreenAction(SwingSet2 swingset, int screen) {
1224             super(&quot;MultiScreenAction&quot;);
1225             this.screen = screen;
1226         }
1227 
1228         public void actionPerformed(ActionEvent e) {
1229             GraphicsDevice[] gds = GraphicsEnvironment.
1230                                    getLocalGraphicsEnvironment().
1231                                    getScreenDevices();
1232             if (screen == ALL_SCREENS) {
1233                 for (int i = 0; i &lt; gds.length; i++) {
<span class="line-modified">1234                     SwingSet2 swingset = new SwingSet2(null,</span>
1235                                   gds[i].getDefaultConfiguration());
1236                     swingset.setDragEnabled(dragEnabled);
1237                 }
1238             }
1239             else {
<span class="line-modified">1240                 SwingSet2 swingset = new SwingSet2(null,</span>
1241                              gds[screen].getDefaultConfiguration());
1242                 swingset.setDragEnabled(dragEnabled);
1243             }
1244         }
1245     }
1246 
1247     // *******************************************************
1248     // **********************  Misc  *************************
1249     // *******************************************************
1250 
1251     class DemoLoadThread extends Thread {
1252         SwingSet2 swingset;
1253 
1254         DemoLoadThread(SwingSet2 swingset) {
1255             this.swingset = swingset;
1256         }
1257 
1258         public void run() {
1259             SwingUtilities.invokeLater(swingset::loadDemos);
1260         }
</pre>
</td>
<td>
<hr />
<pre>
  54     String[] demos = {
  55       &quot;ButtonDemo&quot;,
  56       &quot;ColorChooserDemo&quot;,
  57       &quot;ComboBoxDemo&quot;,
  58       &quot;FileChooserDemo&quot;,
  59       &quot;HtmlDemo&quot;,
  60       &quot;ListDemo&quot;,
  61       &quot;OptionPaneDemo&quot;,
  62       &quot;ProgressBarDemo&quot;,
  63       &quot;ScrollPaneDemo&quot;,
  64       &quot;SliderDemo&quot;,
  65       &quot;SplitPaneDemo&quot;,
  66       &quot;TabbedPaneDemo&quot;,
  67       &quot;TableDemo&quot;,
  68       &quot;ToolTipDemo&quot;,
  69       &quot;TreeDemo&quot;
  70     };
  71 
  72     void loadDemos() {
  73         for(int i = 0; i &lt; demos.length;) {
<span class="line-modified">  74             loadDemo(demos[i]);</span>





  75             i++;
  76         }
  77     }
  78 
  79     // The current Look &amp; Feel
  80     private static LookAndFeelData currentLookAndFeel;
  81     private static LookAndFeelData[] lookAndFeelData;
  82     // List of demos
  83     private ArrayList&lt;DemoModule&gt; demosList = new ArrayList&lt;DemoModule&gt;();
  84 
  85     // The preferred size of the demo
  86     private static final int PREFERRED_WIDTH = 720;
  87     private static final int PREFERRED_HEIGHT = 640;
  88 
  89     // Box spacers
  90     private Dimension HGAP = new Dimension(1,5);
  91     private Dimension VGAP = new Dimension(5,1);
  92 
  93     // A place to hold on to the visible demo
  94     private DemoModule currentDemo = null;
</pre>
<hr />
<pre>
 104     private ToggleButtonToolBar toolbar = null;
 105     private ButtonGroup toolbarGroup = new ButtonGroup();
 106 
 107     // Menus
 108     private JMenuBar menuBar = null;
 109     private JMenu lafMenu = null;
 110     private JMenu themesMenu = null;
 111     private JMenu audioMenu = null;
 112     private JMenu optionsMenu = null;
 113     private ButtonGroup lafMenuGroup = new ButtonGroup();
 114     private ButtonGroup themesMenuGroup = new ButtonGroup();
 115     private ButtonGroup audioMenuGroup = new ButtonGroup();
 116 
 117     // Popup menu
 118     private JPopupMenu popupMenu = null;
 119     private ButtonGroup popupMenuGroup = new ButtonGroup();
 120 
 121     // Used only if swingset is an application
 122     private JFrame frame = null;
 123 



 124     // To debug or not to debug, that is the question
 125     private boolean DEBUG = true;
 126     private int debugCounter = 0;
 127 
 128     // The tab pane that holds the demo
 129     private JTabbedPane tabbedPane = null;
 130 
 131     private JEditorPane demoSrcPane = null;
 132 
 133 
 134     // contentPane cache, saved from the applet or application frame
 135     Container contentPane = null;
 136 
 137 
 138     // number of swingsets - for multiscreen
 139     // keep track of the number of SwingSets created - we only want to exit
 140     // the program when the last one has been closed.
 141     private static int numSSs = 0;
 142     private static Vector&lt;SwingSet2&gt; swingSets = new Vector&lt;SwingSet2&gt;();
 143 
 144     private boolean dragEnabled = false;
 145 
<span class="line-modified"> 146     public SwingSet2() {</span>
<span class="line-modified"> 147         this(null);</span>
 148     }
 149 
 150     /**
 151      * SwingSet2 Constructor
 152      */
<span class="line-modified"> 153     public SwingSet2(GraphicsConfiguration gc) {</span>




 154         String lafClassName = UIManager.getLookAndFeel().getClass().getName();
 155         lookAndFeelData = getInstalledLookAndFeelData();
 156         currentLookAndFeel = Arrays.stream(lookAndFeelData)
 157                 .filter(laf -&gt; lafClassName.equals(laf.className))
 158                 .findFirst().get();
 159 
<span class="line-modified"> 160         frame = createFrame(gc);</span>


 161 
 162         // set the layout
 163         setLayout(new BorderLayout());
 164 
 165         // set the preferred size of the demo
 166         setPreferredSize(new Dimension(PREFERRED_WIDTH,PREFERRED_HEIGHT));
 167 
 168         initializeDemo();
 169         preloadFirstDemo();
 170 
 171         showSwingSet2();
 172 
 173         // Start loading the rest of the demo in the background
 174         DemoLoadThread demoLoader = new DemoLoadThread(this);
 175         demoLoader.start();
 176     }
 177 
 178 
 179     /**
 180      * SwingSet2 Main. Called only if we&#39;re an application, not an applet.
 181      */
 182     public static void main(final String[] args) {
 183         // must run in EDT when constructing the GUI components
 184         SwingUtilities.invokeLater(() -&gt; {
 185             // Create SwingSet on the default monitor
 186             UIManager.put(&quot;swing.boldMetal&quot;, Boolean.FALSE);
<span class="line-modified"> 187             SwingSet2 swingset = new SwingSet2(GraphicsEnvironment.</span>
 188                                          getLocalGraphicsEnvironment().
 189                                          getDefaultScreenDevice().
 190                                          getDefaultConfiguration());
 191         });
 192     }
 193 
 194     // *******************************************************
 195     // *************** Demo Loading Methods ******************
 196     // *******************************************************
 197 
 198 
 199 
 200     public void initializeDemo() {
 201         JPanel top = new JPanel();
 202         top.setLayout(new BorderLayout());
 203         add(top, BorderLayout.NORTH);
 204 
 205         menuBar = createMenus();
 206 



 207         frame.setJMenuBar(menuBar);

 208 
 209         // creates popup menu accessible via keyboard
 210         popupMenu = createPopupMenu();
 211 
 212         ToolBarPanel toolbarPanel = new ToolBarPanel();
 213         toolbarPanel.setLayout(new BorderLayout());
 214         toolbar = new ToggleButtonToolBar();
 215         toolbarPanel.add(toolbar, BorderLayout.CENTER);
 216         top.add(toolbarPanel, BorderLayout.SOUTH);
 217         toolbarPanel.addContainerListener(toolbarPanel);
 218 
 219         tabbedPane = new JTabbedPane();
 220         add(tabbedPane, BorderLayout.CENTER);
 221         tabbedPane.getModel().addChangeListener(new TabListener());
 222 
 223         statusField = new JTextField(&quot;&quot;);
 224         statusField.setEditable(false);
 225         add(statusField, BorderLayout.SOUTH);
 226 
 227         demoPanel = new JPanel();
</pre>
<hr />
<pre>
 274         // ***** create File menu
 275         JMenu fileMenu = (JMenu) menuBar.add(new JMenu(getString(&quot;FileMenu.file_label&quot;)));
 276         fileMenu.setMnemonic(getMnemonic(&quot;FileMenu.file_mnemonic&quot;));
 277         fileMenu.getAccessibleContext().setAccessibleDescription(getString(&quot;FileMenu.accessible_description&quot;));
 278 
 279         createMenuItem(fileMenu, &quot;FileMenu.about_label&quot;, &quot;FileMenu.about_mnemonic&quot;,
 280                        &quot;FileMenu.about_accessible_description&quot;, new AboutAction(this));
 281 
 282         fileMenu.addSeparator();
 283 
 284         createMenuItem(fileMenu, &quot;FileMenu.open_label&quot;, &quot;FileMenu.open_mnemonic&quot;,
 285                        &quot;FileMenu.open_accessible_description&quot;, null);
 286 
 287         createMenuItem(fileMenu, &quot;FileMenu.save_label&quot;, &quot;FileMenu.save_mnemonic&quot;,
 288                        &quot;FileMenu.save_accessible_description&quot;, null);
 289 
 290         createMenuItem(fileMenu, &quot;FileMenu.save_as_label&quot;, &quot;FileMenu.save_as_mnemonic&quot;,
 291                        &quot;FileMenu.save_as_accessible_description&quot;, null);
 292 
 293 
<span class="line-modified"> 294         fileMenu.addSeparator();</span>

 295 
<span class="line-modified"> 296         createMenuItem(fileMenu, &quot;FileMenu.exit_label&quot;, &quot;FileMenu.exit_mnemonic&quot;,</span>
<span class="line-modified"> 297                        &quot;FileMenu.exit_accessible_description&quot;, new ExitAction(this)</span>
<span class="line-modified"> 298         );</span>

 299 
 300         // Create these menu items for the first SwingSet only.
 301         if (numSSs == 0) {
 302         // ***** create laf switcher menu
 303         lafMenu = (JMenu) menuBar.add(new JMenu(getString(&quot;LafMenu.laf_label&quot;)));
 304         lafMenu.setMnemonic(getMnemonic(&quot;LafMenu.laf_mnemonic&quot;));
 305         lafMenu.getAccessibleContext().setAccessibleDescription(
 306             getString(&quot;LafMenu.laf_accessible_description&quot;));
 307 
 308         for (LookAndFeelData lafData : lookAndFeelData) {
 309             mi = createLafMenuItem(lafMenu, lafData);
 310             mi.setSelected(lafData.equals(currentLookAndFeel));
 311         }
 312 
 313         // ***** create themes menu
 314         themesMenu = (JMenu) menuBar.add(new JMenu(getString(&quot;ThemesMenu.themes_label&quot;)));
 315         themesMenu.setMnemonic(getMnemonic(&quot;ThemesMenu.themes_mnemonic&quot;));
 316         themesMenu.getAccessibleContext().setAccessibleDescription(
 317             getString(&quot;ThemesMenu.themes_accessible_description&quot;));
 318 
</pre>
<hr />
<pre>
 394         optionsMenu.getAccessibleContext().setAccessibleDescription(
 395             getString(&quot;OptionsMenu.options_accessible_description&quot;));
 396 
 397         // ***** create tool tip submenu item.
 398         mi = createCheckBoxMenuItem(optionsMenu, &quot;OptionsMenu.tooltip_label&quot;,
 399                 &quot;OptionsMenu.tooltip_mnemonic&quot;,
 400                 &quot;OptionsMenu.tooltip_accessible_description&quot;,
 401                 new ToolTipAction());
 402         mi.setSelected(true);
 403 
 404         // ***** create drag support submenu item.
 405         createCheckBoxMenuItem(optionsMenu, &quot;OptionsMenu.dragEnabled_label&quot;,
 406                 &quot;OptionsMenu.dragEnabled_mnemonic&quot;,
 407                 &quot;OptionsMenu.dragEnabled_accessible_description&quot;,
 408                 new DragSupportAction());
 409 
 410         }
 411 
 412 
 413         // ***** create the multiscreen menu, if we have multiple screens

 414         GraphicsDevice[] screens = GraphicsEnvironment.
 415                                     getLocalGraphicsEnvironment().
 416                                     getScreenDevices();
 417         if (screens.length &gt; 1) {
 418 
 419             JMenu multiScreenMenu = (JMenu) menuBar.add(new JMenu(
 420                                      getString(&quot;MultiMenu.multi_label&quot;)));
 421 
 422             multiScreenMenu.setMnemonic(getMnemonic(&quot;MultiMenu.multi_mnemonic&quot;));
 423             multiScreenMenu.getAccessibleContext().setAccessibleDescription(
 424              getString(&quot;MultiMenu.multi_accessible_description&quot;));
 425 
 426             createMultiscreenMenuItem(multiScreenMenu, MultiScreenAction.ALL_SCREENS);
 427             for (int i = 0; i &lt; screens.length; i++) {
 428                 createMultiscreenMenuItem(multiScreenMenu, i);
 429             }
 430         }

 431 
 432         return menuBar;
 433     }
 434 
 435     /**
 436      * Create a checkbox menu menu item
 437      */
 438     private JMenuItem createCheckBoxMenuItem(JMenu menu, String label,
 439                                              String mnemonic,
 440                                              String accessibleDescription,
 441                                              Action action) {
 442         JCheckBoxMenuItem mi = (JCheckBoxMenuItem)menu.add(
 443                 new JCheckBoxMenuItem(getString(label)));
 444         mi.setMnemonic(getMnemonic(mnemonic));
 445         mi.getAccessibleContext().setAccessibleDescription(getString(
 446                 accessibleDescription));
 447         mi.addActionListener(action);
 448         return mi;
 449     }
 450 
</pre>
<hr />
<pre>
 539             mi = (JMenuItem) menu.add(new JMenuItem(getString(&quot;MultiMenu.single_label&quot;) + &quot; &quot; +
 540                                                                                                  screen));
 541             mi.setMnemonic(KeyEvent.VK_0 + screen);
 542             mi.getAccessibleContext().setAccessibleDescription(getString(
 543                                                &quot;MultiMenu.single_accessible_description&quot;) + &quot; &quot; + screen);
 544 
 545         }
 546         mi.addActionListener(new MultiScreenAction(this, screen));
 547         return mi;
 548     }
 549 
 550     public JPopupMenu createPopupMenu() {
 551         JPopupMenu popup = new JPopupMenu(&quot;JPopupMenu demo&quot;);
 552 
 553         for (LookAndFeelData lafData : lookAndFeelData) {
 554             createPopupMenuItem(popup, lafData);
 555         }
 556 
 557         // register key binding to activate popup menu
 558         InputMap map = getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
<span class="line-modified"> 559         map.put(KeyStroke.getKeyStroke(KeyEvent.VK_F10, InputEvent.SHIFT_DOWN_MASK),</span>
 560                 &quot;postMenuAction&quot;);
 561         map.put(KeyStroke.getKeyStroke(KeyEvent.VK_CONTEXT_MENU, 0), &quot;postMenuAction&quot;);
 562         getActionMap().put(&quot;postMenuAction&quot;, new ActivatePopupMenuAction(this, popup));
 563 
 564         return popup;
 565     }
 566 
 567     /**
 568      * Creates a JMenuItem for the Look and Feel popup menu
 569      */
 570     public JMenuItem createPopupMenuItem(JPopupMenu menu, LookAndFeelData lafData) {
 571         JMenuItem mi = menu.add(new JMenuItem(lafData.label));
 572         popupMenuGroup.add(mi);
 573         mi.setMnemonic(lafData.mnemonic);
 574         mi.getAccessibleContext().setAccessibleDescription(lafData.accDescription);
 575         mi.addActionListener(new ChangeLookAndFeelAction(this, lafData));
 576         return mi;
 577     }
 578 
 579 
</pre>
<hr />
<pre>
 620     /**
 621      * Sets the current demo
 622      */
 623     public void setDemo(DemoModule demo) {
 624         currentDemo = demo;
 625 
 626         // Ensure panel&#39;s UI is current before making visible
 627         JComponent currentDemoPanel = demo.getDemoPanel();
 628         SwingUtilities.updateComponentTreeUI(currentDemoPanel);
 629 
 630         demoPanel.removeAll();
 631         demoPanel.add(currentDemoPanel, BorderLayout.CENTER);
 632 
 633         tabbedPane.setSelectedIndex(0);
 634         tabbedPane.setTitleAt(0, demo.getName());
 635         tabbedPane.setToolTipTextAt(0, demo.getToolTip());
 636     }
 637 
 638 
 639     /**
<span class="line-modified"> 640      * Bring up the SwingSet2 demo by showing the frame</span>

 641      */
 642     public void showSwingSet2() {
<span class="line-modified"> 643         // put swingset in a frame and show it</span>
<span class="line-modified"> 644         JFrame f = getFrame();</span>
<span class="line-modified"> 645         f.setTitle(getString(&quot;Frame.title&quot;));</span>
<span class="line-modified"> 646         f.getContentPane().add(this, BorderLayout.CENTER);</span>
<span class="line-modified"> 647         f.pack();</span>
<span class="line-modified"> 648 </span>
<span class="line-modified"> 649         Rectangle screenRect = f.getGraphicsConfiguration().getBounds();</span>
<span class="line-modified"> 650         Insets screenInsets = Toolkit.getDefaultToolkit().getScreenInsets(</span>
<span class="line-modified"> 651                 f.getGraphicsConfiguration());</span>
<span class="line-modified"> 652 </span>
<span class="line-modified"> 653         // Make sure we don&#39;t place the demo off the screen.</span>
<span class="line-modified"> 654         int centerWidth = screenRect.width &lt; f.getSize().width ?</span>
<span class="line-modified"> 655                 screenRect.x :</span>
<span class="line-modified"> 656                 screenRect.x + screenRect.width/2 - f.getSize().width/2;</span>
<span class="line-modified"> 657         int centerHeight = screenRect.height &lt; f.getSize().height ?</span>
<span class="line-modified"> 658                 screenRect.y :</span>
<span class="line-modified"> 659                 screenRect.y + screenRect.height/2 - f.getSize().height/2;</span>
<span class="line-modified"> 660 </span>
<span class="line-modified"> 661         centerHeight = centerHeight &lt; screenInsets.top ?</span>
<span class="line-modified"> 662                 screenInsets.top : centerHeight;</span>
<span class="line-modified"> 663 </span>
<span class="line-modified"> 664         f.setLocation(centerWidth, centerHeight);</span>
<span class="line-modified"> 665         f.setVisible(true);</span>
<span class="line-modified"> 666         numSSs++;</span>
<span class="line-modified"> 667         swingSets.add(this);</span>


 668     }
 669 
 670     // *******************************************************
 671     // ****************** Utility Methods ********************
 672     // *******************************************************
 673 
 674     /**
 675      * Loads a demo from a classname
 676      */
 677     void loadDemo(String classname) {
 678         setStatus(getString(&quot;Status.loading&quot;) + getString(classname + &quot;.name&quot;));
 679         DemoModule demo = null;
 680         try {
<span class="line-modified"> 681             Class&lt;?&gt; demoClass = Class.forName(classname);</span>
<span class="line-modified"> 682             Constructor&lt;?&gt; demoConstructor = demoClass.getConstructor(new Class[]{SwingSet2.class});</span>
 683             demo = (DemoModule) demoConstructor.newInstance(new Object[]{this});
 684             addDemo(demo);
 685         } catch (Exception e) {
 686             System.out.println(&quot;Error occurred loading demo: &quot; + classname);
 687         }
 688     }
 689 















 690     /**
 691      * Returns the frame instance
 692      */
 693     public JFrame getFrame() {
 694         return frame;
 695     }
 696 
 697     /**
 698      * Returns the menubar
 699      */
 700     public JMenuBar getMenuBar() {
 701         return menuBar;
 702     }
 703 
 704     /**
 705      * Returns the toolbar
 706      */
 707     public ToggleButtonToolBar getToolBar() {
 708         return toolbar;
 709     }
 710 
 711     /**
 712      * Returns the toolbar button group
 713      */
 714     public ButtonGroup getToolBarGroup() {
 715         return toolbarGroup;
 716     }
 717 
 718     /**
 719      * Returns the content pane whether we&#39;re in an applet
 720      * or application
 721      */
 722     public Container getContentPane() {
 723         if(contentPane == null) {
 724             if(getFrame() != null) {
 725                 contentPane = getFrame().getContentPane();


 726             }
 727         }
 728         return contentPane;
 729     }
 730 
 731     /**
 732      * Create a frame for SwingSet2 to reside in if brought up
 733      * as an application.
 734      */
 735     public static JFrame createFrame(GraphicsConfiguration gc) {
 736         JFrame frame = new JFrame(gc);
 737         if (numSSs == 0) {
 738             frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
 739         } else {
 740             WindowListener l = new WindowAdapter() {
 741                 public void windowClosing(WindowEvent e) {
 742                     numSSs--;
 743                     swingSets.remove(this);
 744                 }
 745             };
</pre>
<hr />
<pre>
 827      */
 828     public void setLookAndFeel(LookAndFeelData laf) {
 829         if(!currentLookAndFeel.equals(laf)) {
 830             currentLookAndFeel = laf;
 831             /* The recommended way of synchronizing state between multiple
 832              * controls that represent the same command is to use Actions.
 833              * The code below is a workaround and will be replaced in future
 834              * version of SwingSet2 demo.
 835              */
 836             String lafName = laf.label;
 837             themesMenu.setEnabled(laf.name.equals(&quot;Metal&quot;));
 838             updateLookAndFeel();
 839             for(int i=0;i&lt;lafMenu.getItemCount();i++) {
 840                 JMenuItem item = lafMenu.getItem(i);
 841                 item.setSelected(item.getText().equals(lafName));
 842             }
 843         }
 844     }
 845 
 846     private void updateThisSwingSet() {
<span class="line-modified"> 847         JFrame frame = getFrame();</span>
<span class="line-modified"> 848         if (frame == null) {</span>
<span class="line-added"> 849             SwingUtilities.updateComponentTreeUI(this);</span>
 850         } else {
<span class="line-modified"> 851             SwingUtilities.updateComponentTreeUI(frame);</span>





 852         }
 853 
 854         SwingUtilities.updateComponentTreeUI(popupMenu);
 855         if (aboutBox != null) {
 856             SwingUtilities.updateComponentTreeUI(aboutBox);
 857         }
 858     }
 859 
 860     /**
 861      * Sets the current L&amp;F on each demo module
 862      */
 863     public void updateLookAndFeel() {
 864         try {
 865             UIManager.setLookAndFeel(currentLookAndFeel.className);
<span class="line-modified"> 866             for (SwingSet2 ss : swingSets) {</span>
<span class="line-modified"> 867                 ss.updateThisSwingSet();</span>




 868             }
 869         } catch (Exception ex) {
 870             System.out.println(&quot;Failed loading L&amp;F: &quot; + currentLookAndFeel);
 871             System.out.println(ex);
 872         }
 873     }
 874 
 875     /**
 876      * Loads and puts the source code text into JEditorPane in the &quot;Source Code&quot; tab
 877      */
 878     public void setSourceCode(DemoModule demo) {
 879         // do the following on the gui thread
 880         SwingUtilities.invokeLater(new SwingSetRunnable(this, demo) {
 881             public void run() {
 882                 swingset.demoSrcPane.setText(((DemoModule)obj).getSourceCode());
 883                 swingset.demoSrcPane.setCaretPosition(0);
 884 
 885             }
 886         });
 887     }
</pre>
<hr />
<pre>
1075 
1076     // Turns on or off the tool tips for the demo.
1077     class ToolTipAction extends AbstractAction {
1078         protected ToolTipAction() {
1079             super(&quot;ToolTip Control&quot;);
1080         }
1081 
1082         public void actionPerformed(ActionEvent e) {
1083             boolean status = ((JCheckBoxMenuItem)e.getSource()).isSelected();
1084             ToolTipManager.sharedInstance().setEnabled(status);
1085         }
1086     }
1087 
1088     class DragSupportAction extends AbstractAction {
1089         protected DragSupportAction() {
1090             super(&quot;DragSupport Control&quot;);
1091         }
1092 
1093         public void actionPerformed(ActionEvent e) {
1094             boolean dragEnabled = ((JCheckBoxMenuItem)e.getSource()).isSelected();
<span class="line-modified">1095             for (SwingSet2 ss : swingSets) {</span>
<span class="line-modified">1096                 ss.setDragEnabled(dragEnabled);</span>




1097             }
1098         }
1099     }
1100 
1101     class ChangeThemeAction extends AbstractAction {
1102         SwingSet2 swingset;
1103         MetalTheme theme;
1104         protected ChangeThemeAction(SwingSet2 swingset, MetalTheme theme) {
1105             super(&quot;ChangeTheme&quot;);
1106             this.swingset = swingset;
1107             this.theme = theme;
1108         }
1109 
1110         public void actionPerformed(ActionEvent e) {
1111             MetalLookAndFeel.setCurrentTheme(theme);
1112             swingset.updateLookAndFeel();
1113         }
1114     }
1115 
1116     class ExitAction extends AbstractAction {
</pre>
<hr />
<pre>
1137                 // JPanel panel = new JPanel(new BorderLayout());
1138                 JPanel panel = new AboutPanel(swingset);
1139                 panel.setLayout(new BorderLayout());
1140 
1141                 aboutBox = new JDialog(swingset.getFrame(), getString(&quot;AboutBox.title&quot;), false);
1142                 aboutBox.setResizable(false);
1143                 aboutBox.getContentPane().add(panel, BorderLayout.CENTER);
1144 
1145                 // JButton button = new JButton(getString(&quot;AboutBox.ok_button_text&quot;));
1146                 JPanel buttonpanel = new JPanel();
1147                 buttonpanel.setBorder(new javax.swing.border.EmptyBorder(0, 0, 3, 0));
1148                 buttonpanel.setOpaque(false);
1149                 JButton button = (JButton) buttonpanel.add(
1150                     new JButton(getString(&quot;AboutBox.ok_button_text&quot;))
1151                 );
1152                 panel.add(buttonpanel, BorderLayout.SOUTH);
1153 
1154                 button.addActionListener(new OkAction(aboutBox));
1155             }
1156             aboutBox.pack();
<span class="line-modified">1157             aboutBox.setLocationRelativeTo(getFrame());</span>
<span class="line-modified">1158             aboutBox.setVisible(true);</span>




1159         }
1160     }
1161 
1162     class MultiScreenAction extends AbstractAction {
1163         static final int ALL_SCREENS = -1;
1164         int screen;
1165         protected MultiScreenAction(SwingSet2 swingset, int screen) {
1166             super(&quot;MultiScreenAction&quot;);
1167             this.screen = screen;
1168         }
1169 
1170         public void actionPerformed(ActionEvent e) {
1171             GraphicsDevice[] gds = GraphicsEnvironment.
1172                                    getLocalGraphicsEnvironment().
1173                                    getScreenDevices();
1174             if (screen == ALL_SCREENS) {
1175                 for (int i = 0; i &lt; gds.length; i++) {
<span class="line-modified">1176                     SwingSet2 swingset = new SwingSet2(</span>
1177                                   gds[i].getDefaultConfiguration());
1178                     swingset.setDragEnabled(dragEnabled);
1179                 }
1180             }
1181             else {
<span class="line-modified">1182                 SwingSet2 swingset = new SwingSet2(</span>
1183                              gds[screen].getDefaultConfiguration());
1184                 swingset.setDragEnabled(dragEnabled);
1185             }
1186         }
1187     }
1188 
1189     // *******************************************************
1190     // **********************  Misc  *************************
1191     // *******************************************************
1192 
1193     class DemoLoadThread extends Thread {
1194         SwingSet2 swingset;
1195 
1196         DemoLoadThread(SwingSet2 swingset) {
1197             this.swingset = swingset;
1198         }
1199 
1200         public void run() {
1201             SwingUtilities.invokeLater(swingset::loadDemos);
1202         }
</pre>
</td>
</tr>
</table>
<center><a href="SplitPaneDemo.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="TableDemo.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>