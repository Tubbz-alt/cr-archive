<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/jdk/internal/icu/impl/UCharacterProperty.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Trie2.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../lang/UCharacterEnums.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/jdk/internal/icu/impl/UCharacterProperty.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 50 * &lt;p&gt;Due to the form most commonly used for retrieval, array of char is used
 51 * to store the binary data.&lt;/p&gt;
 52 * &lt;p&gt;UCharacterPropertyDB also contains information on accessing indexes to
 53 * significant points in the binary data.&lt;/p&gt;
 54 * &lt;p&gt;Responsibility for molding the binary data into more meaning form lies on
 55 * &lt;a href=UCharacter.html&gt;UCharacter&lt;/a&gt;.&lt;/p&gt;
 56 * @author Syn Wee Quek
 57 * @since release 2.1, february 1st 2002
 58 */
 59 
 60 public final class UCharacterProperty
 61 {
 62     // public data members -----------------------------------------------
 63 
 64     /*
 65      * public singleton instance
 66      */
 67     public static final UCharacterProperty INSTANCE;
 68 
 69     /**
<span class="line-modified"> 70     * Trie data</span>
<span class="line-modified"> 71     */</span>
 72     public Trie2_16 m_trie_;
 73 
 74     /**
<span class="line-modified"> 75     * Unicode version</span>
<span class="line-modified"> 76     */</span>
 77     public VersionInfo m_unicodeVersion_;
 78 
 79     /**
<span class="line-modified"> 80     * Character type mask</span>
<span class="line-modified"> 81     */</span>
 82     public static final int TYPE_MASK = 0x1F;
 83 
 84     // uprops.h enum UPropertySource --------------------------------------- ***
 85 
 86     /** From uchar.c/uprops.icu main trie */
 87     public static final int SRC_CHAR=1;
 88     /** From uchar.c/uprops.icu properties vectors trie */
 89     public static final int SRC_PROPSVEC=2;
 90     /** From ubidi_props.c/ubidi.icu */
 91     public static final int SRC_BIDI=5;
 92     /** From normalizer2impl.cpp/nfc.nrm */
 93     public static final int SRC_NFC=8;
 94     /** From normalizer2impl.cpp/nfkc.nrm */
 95     public static final int SRC_NFKC=9;
 96 
 97     // public methods ----------------------------------------------------
 98 
 99     /**
<span class="line-modified">100     * Gets the main property value for code point ch.</span>
<span class="line-modified">101     * @param ch code point whose property value is to be retrieved</span>
<span class="line-modified">102     * @return property value of code point</span>
<span class="line-modified">103     */</span>
104     public final int getProperty(int ch)
105     {
106         return m_trie_.get(ch);
107     }
108 
109     /**
110      * Gets the unicode additional properties.
111      * Java version of C u_getUnicodeProperties().
112      * @param codepoint codepoint whose additional properties is to be
113      *                  retrieved
114      * @param column The column index.
115      * @return unicode properties
116      */
117     public int getAdditional(int codepoint, int column) {
118         assert column &gt;= 0;
119         if (column &gt;= m_additionalColumnsCount_) {
120             return 0;
121         }
122         return m_additionalVectors_[m_additionalTrie_.get(codepoint) + column];
123     }
</pre>
<hr />
<pre>
211             super(source);
212             this.which=which;
213             this.max=max;
214         }
215     }
216 
217     private IntProperty intProp =  new BiDiIntProperty() {  // BIDI_PAIRED_BRACKET_TYPE
218         int getValue(int c) {
219             return UBiDiProps.INSTANCE.getPairedBracketType(c);
220         }
221     };
222 
223     public int getIntPropertyValue(int c, int which) {
224         if (which == BIDI_PAIRED_BRACKET_TYPE) {
225             return intProp.getValue(c);
226         }
227         return 0; // undefined
228     }
229 
230     /**
<span class="line-modified">231     * Forms a supplementary code point from the argument character&lt;br&gt;</span>
<span class="line-modified">232     * Note this is for internal use hence no checks for the validity of the</span>
<span class="line-modified">233     * surrogate characters are done</span>
<span class="line-modified">234     * @param lead lead surrogate character</span>
<span class="line-modified">235     * @param trail trailing surrogate character</span>
<span class="line-modified">236     * @return code point of the supplementary character</span>
<span class="line-modified">237     */</span>
238     public static int getRawSupplementary(char lead, char trail)
239     {
240         return (lead &lt;&lt; LEAD_SURROGATE_SHIFT_) + trail + SURROGATE_OFFSET_;
241     }
242 
243     /**
244      * Gets the type mask
245      * @param type character type
246      * @return mask
247      */
248     public static final int getMask(int type)
249     {
250         return 1 &lt;&lt; type;
251     }
252 
253     /**
254      * Returns the digit values of characters like &#39;A&#39; - &#39;Z&#39;, normal,
255      * half-width and full-width. This method assumes that the other digit
256      * characters are checked by the calling method.
257      * @param ch character to test
</pre>
<hr />
<pre>
301      */
302     int m_additionalColumnsCount_;
303     /**
304      * Maximum values for block, bits used as in vector word
305      * 0
306      */
307     int m_maxBlockScriptValue_;
308     /**
309      * Maximum values for script, bits used as in vector word
310      * 0
311      */
312      int m_maxJTGValue_;
313     /**
314      * Script_Extensions data
315      */
316     public char[] m_scriptExtensions_;
317 
318     // private variables -------------------------------------------------
319 
320     /**
<span class="line-modified">321     * Default name of the datafile</span>
<span class="line-modified">322     */</span>
323     @SuppressWarnings(&quot;deprecation&quot;)
324     private static final String DATA_FILE_NAME_ =
325             &quot;/jdk/internal/icu/impl/data/icudt&quot; +
326             VersionInfo.ICU_DATA_VERSION_PATH +
327             &quot;/uprops.icu&quot;;
328 
329     /**
<span class="line-modified">330     * Shift value for lead surrogate to form a supplementary character.</span>
<span class="line-modified">331     */</span>
332     private static final int LEAD_SURROGATE_SHIFT_ = 10;
333     /**
<span class="line-modified">334     * Offset to add to combined surrogate pair to avoid masking.</span>
<span class="line-modified">335     */</span>
336     private static final int SURROGATE_OFFSET_ =
337                            UTF16.SUPPLEMENTARY_MIN_VALUE -
338                            (UTF16.SURROGATE_MIN_VALUE &lt;&lt;
339                            LEAD_SURROGATE_SHIFT_) -
340                            UTF16.TRAIL_SURROGATE_MIN_VALUE;
341 
342 
343     // property data constants -------------------------------------------------
344 
345     /**
346      * Numeric types and values in the main properties words.
347      */
348     private static final int NUMERIC_TYPE_VALUE_SHIFT_ = 6;
349     private static final int getNumericTypeValue(int props) {
350         return props &gt;&gt; NUMERIC_TYPE_VALUE_SHIFT_;
351     }
352 
353     /* constants for the storage form of numeric types and values */
354     /** No numeric value. */
355     private static final int NTV_NONE_ = 0;
</pre>
</td>
<td>
<hr />
<pre>
 50 * &lt;p&gt;Due to the form most commonly used for retrieval, array of char is used
 51 * to store the binary data.&lt;/p&gt;
 52 * &lt;p&gt;UCharacterPropertyDB also contains information on accessing indexes to
 53 * significant points in the binary data.&lt;/p&gt;
 54 * &lt;p&gt;Responsibility for molding the binary data into more meaning form lies on
 55 * &lt;a href=UCharacter.html&gt;UCharacter&lt;/a&gt;.&lt;/p&gt;
 56 * @author Syn Wee Quek
 57 * @since release 2.1, february 1st 2002
 58 */
 59 
 60 public final class UCharacterProperty
 61 {
 62     // public data members -----------------------------------------------
 63 
 64     /*
 65      * public singleton instance
 66      */
 67     public static final UCharacterProperty INSTANCE;
 68 
 69     /**
<span class="line-modified"> 70      * Trie data</span>
<span class="line-modified"> 71      */</span>
 72     public Trie2_16 m_trie_;
 73 
 74     /**
<span class="line-modified"> 75      * Unicode version</span>
<span class="line-modified"> 76      */</span>
 77     public VersionInfo m_unicodeVersion_;
 78 
 79     /**
<span class="line-modified"> 80      * Character type mask</span>
<span class="line-modified"> 81      */</span>
 82     public static final int TYPE_MASK = 0x1F;
 83 
 84     // uprops.h enum UPropertySource --------------------------------------- ***
 85 
 86     /** From uchar.c/uprops.icu main trie */
 87     public static final int SRC_CHAR=1;
 88     /** From uchar.c/uprops.icu properties vectors trie */
 89     public static final int SRC_PROPSVEC=2;
 90     /** From ubidi_props.c/ubidi.icu */
 91     public static final int SRC_BIDI=5;
 92     /** From normalizer2impl.cpp/nfc.nrm */
 93     public static final int SRC_NFC=8;
 94     /** From normalizer2impl.cpp/nfkc.nrm */
 95     public static final int SRC_NFKC=9;
 96 
 97     // public methods ----------------------------------------------------
 98 
 99     /**
<span class="line-modified">100      * Gets the main property value for code point ch.</span>
<span class="line-modified">101      * @param ch code point whose property value is to be retrieved</span>
<span class="line-modified">102      * @return property value of code point</span>
<span class="line-modified">103      */</span>
104     public final int getProperty(int ch)
105     {
106         return m_trie_.get(ch);
107     }
108 
109     /**
110      * Gets the unicode additional properties.
111      * Java version of C u_getUnicodeProperties().
112      * @param codepoint codepoint whose additional properties is to be
113      *                  retrieved
114      * @param column The column index.
115      * @return unicode properties
116      */
117     public int getAdditional(int codepoint, int column) {
118         assert column &gt;= 0;
119         if (column &gt;= m_additionalColumnsCount_) {
120             return 0;
121         }
122         return m_additionalVectors_[m_additionalTrie_.get(codepoint) + column];
123     }
</pre>
<hr />
<pre>
211             super(source);
212             this.which=which;
213             this.max=max;
214         }
215     }
216 
217     private IntProperty intProp =  new BiDiIntProperty() {  // BIDI_PAIRED_BRACKET_TYPE
218         int getValue(int c) {
219             return UBiDiProps.INSTANCE.getPairedBracketType(c);
220         }
221     };
222 
223     public int getIntPropertyValue(int c, int which) {
224         if (which == BIDI_PAIRED_BRACKET_TYPE) {
225             return intProp.getValue(c);
226         }
227         return 0; // undefined
228     }
229 
230     /**
<span class="line-modified">231      * Forms a supplementary code point from the argument character&lt;br&gt;</span>
<span class="line-modified">232      * Note this is for internal use hence no checks for the validity of the</span>
<span class="line-modified">233      * surrogate characters are done</span>
<span class="line-modified">234      * @param lead lead surrogate character</span>
<span class="line-modified">235      * @param trail trailing surrogate character</span>
<span class="line-modified">236      * @return code point of the supplementary character</span>
<span class="line-modified">237      */</span>
238     public static int getRawSupplementary(char lead, char trail)
239     {
240         return (lead &lt;&lt; LEAD_SURROGATE_SHIFT_) + trail + SURROGATE_OFFSET_;
241     }
242 
243     /**
244      * Gets the type mask
245      * @param type character type
246      * @return mask
247      */
248     public static final int getMask(int type)
249     {
250         return 1 &lt;&lt; type;
251     }
252 
253     /**
254      * Returns the digit values of characters like &#39;A&#39; - &#39;Z&#39;, normal,
255      * half-width and full-width. This method assumes that the other digit
256      * characters are checked by the calling method.
257      * @param ch character to test
</pre>
<hr />
<pre>
301      */
302     int m_additionalColumnsCount_;
303     /**
304      * Maximum values for block, bits used as in vector word
305      * 0
306      */
307     int m_maxBlockScriptValue_;
308     /**
309      * Maximum values for script, bits used as in vector word
310      * 0
311      */
312      int m_maxJTGValue_;
313     /**
314      * Script_Extensions data
315      */
316     public char[] m_scriptExtensions_;
317 
318     // private variables -------------------------------------------------
319 
320     /**
<span class="line-modified">321      * Default name of the datafile</span>
<span class="line-modified">322      */</span>
323     @SuppressWarnings(&quot;deprecation&quot;)
324     private static final String DATA_FILE_NAME_ =
325             &quot;/jdk/internal/icu/impl/data/icudt&quot; +
326             VersionInfo.ICU_DATA_VERSION_PATH +
327             &quot;/uprops.icu&quot;;
328 
329     /**
<span class="line-modified">330      * Shift value for lead surrogate to form a supplementary character.</span>
<span class="line-modified">331      */</span>
332     private static final int LEAD_SURROGATE_SHIFT_ = 10;
333     /**
<span class="line-modified">334      * Offset to add to combined surrogate pair to avoid masking.</span>
<span class="line-modified">335      */</span>
336     private static final int SURROGATE_OFFSET_ =
337                            UTF16.SUPPLEMENTARY_MIN_VALUE -
338                            (UTF16.SURROGATE_MIN_VALUE &lt;&lt;
339                            LEAD_SURROGATE_SHIFT_) -
340                            UTF16.TRAIL_SURROGATE_MIN_VALUE;
341 
342 
343     // property data constants -------------------------------------------------
344 
345     /**
346      * Numeric types and values in the main properties words.
347      */
348     private static final int NUMERIC_TYPE_VALUE_SHIFT_ = 6;
349     private static final int getNumericTypeValue(int props) {
350         return props &gt;&gt; NUMERIC_TYPE_VALUE_SHIFT_;
351     }
352 
353     /* constants for the storage form of numeric types and values */
354     /** No numeric value. */
355     private static final int NTV_NONE_ = 0;
</pre>
</td>
</tr>
</table>
<center><a href="Trie2.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../lang/UCharacterEnums.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>