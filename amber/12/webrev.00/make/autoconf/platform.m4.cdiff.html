<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/autoconf/platform.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="lib-ffi.m4.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="spec.gmk.in.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/platform.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  #
<span class="line-modified">! # Copyright (c) 2011, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  #
<span class="line-modified">! # Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 118,10 ***</span>
<span class="line-new-header">--- 118,16 ---</span>
        VAR_CPU=ppc64le
        VAR_CPU_ARCH=ppc
        VAR_CPU_BITS=64
        VAR_CPU_ENDIAN=little
        ;;
<span class="line-added">+     riscv64)</span>
<span class="line-added">+       VAR_CPU=riscv64</span>
<span class="line-added">+       VAR_CPU_ARCH=riscv</span>
<span class="line-added">+       VAR_CPU_BITS=64</span>
<span class="line-added">+       VAR_CPU_ENDIAN=little</span>
<span class="line-added">+       ;;</span>
      s390)
        VAR_CPU=s390
        VAR_CPU_ARCH=s390
        VAR_CPU_BITS=32
        VAR_CPU_ENDIAN=big
</pre>
<hr />
<pre>
<span class="line-old-header">*** 483,10 ***</span>
<span class="line-new-header">--- 489,12 ---</span>
      HOTSPOT_$1_CPU_DEFINE=PPC32
    elif test &quot;x$OPENJDK_$1_CPU&quot; = xs390; then
      HOTSPOT_$1_CPU_DEFINE=S390
    elif test &quot;x$OPENJDK_$1_CPU&quot; = xs390x; then
      HOTSPOT_$1_CPU_DEFINE=S390
<span class="line-added">+   elif test &quot;x$OPENJDK_$1_CPU&quot; = xriscv64; then</span>
<span class="line-added">+     HOTSPOT_$1_CPU_DEFINE=RISCV</span>
    elif test &quot;x$OPENJDK_$1_CPU&quot; != x; then
      HOTSPOT_$1_CPU_DEFINE=$(echo $OPENJDK_$1_CPU | tr a-z A-Z)
    fi
    AC_SUBST(HOTSPOT_$1_CPU_DEFINE)
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 561,15 ***</span>
    PLATFORM_CHECK_DEPRECATION
  ])
  
  AC_DEFUN([PLATFORM_CHECK_DEPRECATION],
  [
<span class="line-modified">!   AC_ARG_ENABLE(deprecated-ports, [AS_HELP_STRING([--enable-deprecated-ports@&lt;:@=yes/no@:&gt;@],</span>
<span class="line-modified">!        [Suppress the error when configuring for a deprecated port @&lt;:@no@:&gt;@])])</span>
<span class="line-modified">! </span>
<span class="line-modified">!   if test &quot;x$OPENJDK_TARGET_OS&quot; = xsolaris || (test &quot;x$OPENJDK_TARGET_CPU_ARCH&quot; = xsparc &amp;&amp; test &quot;x$with_jvm_variants&quot; != xzero); then</span>
<span class="line-modified">!     if test &quot;x$enable_deprecated_ports&quot; = &quot;xyes&quot;; then</span>
        AC_MSG_WARN([The Solaris and SPARC ports are deprecated and may be removed in a future release.])
      else
        AC_MSG_ERROR(m4_normalize([The Solaris and SPARC ports are deprecated and may be removed in a
          future release. Use --enable-deprecated-ports=yes to suppress this error.]))
      fi
<span class="line-new-header">--- 569,18 ---</span>
    PLATFORM_CHECK_DEPRECATION
  ])
  
  AC_DEFUN([PLATFORM_CHECK_DEPRECATION],
  [
<span class="line-modified">!   UTIL_ARG_ENABLE(NAME: deprecated-ports, DEFAULT: false,</span>
<span class="line-modified">!       RESULT: ENABLE_DEPRECATED_PORTS,</span>
<span class="line-modified">!       DESC: [suppress the error when configuring for a deprecated port])</span>
<span class="line-modified">! </span>
<span class="line-modified">!   if test &quot;x$OPENJDK_TARGET_OS&quot; = xsolaris || \</span>
<span class="line-added">+       (test &quot;x$OPENJDK_TARGET_CPU_ARCH&quot; = xsparc &amp;&amp; \</span>
<span class="line-added">+       test &quot;x$with_jvm_variants&quot; != xzero); then</span>
<span class="line-added">+     if test &quot;x$ENABLE_DEPRECATED_PORTS&quot; = &quot;xtrue&quot;; then</span>
        AC_MSG_WARN([The Solaris and SPARC ports are deprecated and may be removed in a future release.])
      else
        AC_MSG_ERROR(m4_normalize([The Solaris and SPARC ports are deprecated and may be removed in a
          future release. Use --enable-deprecated-ports=yes to suppress this error.]))
      fi
</pre>
<center><a href="lib-ffi.m4.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="spec.gmk.in.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>