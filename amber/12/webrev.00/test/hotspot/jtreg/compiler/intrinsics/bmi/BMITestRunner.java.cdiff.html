<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/hotspot/jtreg/compiler/intrinsics/bmi/BMITestRunner.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../bigInteger/TestSquareToLen.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="TestAndnI.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/compiler/intrinsics/bmi/BMITestRunner.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2014, 2016, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2014, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 57,13 ***</span>
       * To control behaviour of test following options could be passed:
       * &lt;ul&gt;
       *   &lt;li&gt;-iterations=&amp;lt;N&amp;gt; each operation implemented by
       *       &lt;b&gt;expr&lt;/b&gt; will be executed &lt;i&gt;N&lt;/i&gt; times. Default value
       *       is 4000.&lt;/li&gt;
<span class="line-removed">-      *   &lt;li&gt;-seed=&amp;lt;SEED&amp;gt; arguments for &lt;b&gt;expr&lt;/b&gt;&#39;s methods</span>
<span class="line-removed">-      *       obtained via RNG initiated with seed &lt;i&gt;SEED&lt;/i&gt;. By default</span>
<span class="line-removed">-      *       some random seed will be used.&lt;/li&gt;</span>
       * &lt;/ul&gt;
       *
       * @param expr operation that should be tested
       * @param testOpts options to control test behaviour
       * @param additionalVMOpts additional options for VM
<span class="line-new-header">--- 57,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 73,19 ***</span>
      public static void runTests(Class&lt;? extends Expr&gt; expr,
                                  String testOpts[],
                                  String... additionalVMOpts)
                           throws Throwable {
  
<span class="line-modified">!         int seed = Utils.getRandomInstance().nextInt();</span>
          int iterations = DEFAULT_ITERATIONS_COUNT;
  
          for (String testOption : testOpts) {
              if (testOption.startsWith(&quot;-iterations=&quot;)) {
                  iterations = Integer.valueOf(testOption.
                                               replace(&quot;-iterations=&quot;, &quot;&quot;));
<span class="line-removed">-             } else if (testOption.startsWith(&quot;-seed=&quot;)) {</span>
<span class="line-removed">-                 seed = Integer.valueOf(testOption.replace(&quot;-seed=&quot;, &quot;&quot;));</span>
              }
          }
  
          OutputAnalyzer intOutput = runTest(expr, VMMode.INT,
                                             additionalVMOpts,
<span class="line-new-header">--- 70,19 ---</span>
      public static void runTests(Class&lt;? extends Expr&gt; expr,
                                  String testOpts[],
                                  String... additionalVMOpts)
                           throws Throwable {
  
<span class="line-modified">!         // ensure seed got printed out</span>
<span class="line-added">+         Utils.getRandomInstance();</span>
<span class="line-added">+         long seed = Utils.SEED;</span>
          int iterations = DEFAULT_ITERATIONS_COUNT;
  
          for (String testOption : testOpts) {
              if (testOption.startsWith(&quot;-iterations=&quot;)) {
                  iterations = Integer.valueOf(testOption.
                                               replace(&quot;-iterations=&quot;, &quot;&quot;));
              }
          }
  
          OutputAnalyzer intOutput = runTest(expr, VMMode.INT,
                                             additionalVMOpts,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 117,11 ***</span>
       * @throws Throwable when something goes wrong.
       */
      public static OutputAnalyzer runTest(Class&lt;? extends Expr&gt; expr,
                                           VMMode testVMMode,
                                           String additionalVMOpts[],
<span class="line-modified">!                                          int seed, int iterations)</span>
                                    throws Throwable {
  
          List&lt;String&gt; vmOpts = new LinkedList&lt;String&gt;();
  
          Collections.addAll(vmOpts, additionalVMOpts);
<span class="line-new-header">--- 114,11 ---</span>
       * @throws Throwable when something goes wrong.
       */
      public static OutputAnalyzer runTest(Class&lt;? extends Expr&gt; expr,
                                           VMMode testVMMode,
                                           String additionalVMOpts[],
<span class="line-modified">!                                          long seed, int iterations)</span>
                                    throws Throwable {
  
          List&lt;String&gt; vmOpts = new LinkedList&lt;String&gt;();
  
          Collections.addAll(vmOpts, additionalVMOpts);
</pre>
<center><a href="../bigInteger/TestSquareToLen.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="TestAndnI.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>