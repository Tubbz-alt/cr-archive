<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/rmi/testlibrary/README.jcov</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../reliability/benchmark/bench/rmi/Makefile.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../security/KeyAgreement/KeyAgreementTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/rmi/testlibrary/README.jcov</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
<span class="line-modified"> 1 ######################################################################## </span>
<span class="line-modified"> 2 # This file contains example scripts and property files for collecting </span>
 3 # code coverage data of the RMI regression suite.
 4 #
 5 # Since many RMI regression tests spawn child VMs (either directly
 6 # or through activation), special support is required for setting
<span class="line-modified"> 7 # command line options and arguments needed by jcov - the code coverage </span>
 8 # instrumentation and collection tool.  This special support is provided
<span class="line-modified"> 9 # by properties in the test.props file.  If a file named ../../test.props </span>
10 # exists (assuming the working directory is &quot;&lt;path&gt;/JTwork/scratch&quot;, this
<span class="line-modified">11 # will find &quot;&lt;path&gt;/test.props&quot;), then it will be used by test library </span>
12 # code that spawns VMs or instances of rmid.  See the example test.props
13 # file below for the properties that may be defined.
14 
15 
<span class="line-modified">16 ######################################################################## </span>
<span class="line-modified">17 # The following is a script used to execute RMI regression tests </span>
18 # on Solaris and collect code coverage data.
19 
20 #!/bin/ksh
21 export JAVA_HOME=&lt;path to special JDK jcov instrumented build&gt;
22 export JT_HOME=&lt;path to special JTREG build with jcov hooks&gt;
23 export CLASSPATH=.:${JT_HOME}/javatest.jar
24 export OPTS=&quot;-Xms256m -Xmx256m -XX:+UseUnsupportedDeprecatedJVMPI -XX:+EnableJVMPIInstructionStartEvent -XX:-UseFastEmptyMethods -XX:-UseFastAccessorMethods -timeoutFactor:4&quot;
25 export TESTBASE=/files/&lt;JDK workspace&gt;/test
26 ${JT_HOME}/solaris/bin/jtreg -Xrunjcov:file=/files/rmi.jcov ${OPTS} -va -w:/tmp/JT -r:/tmp/JTreport -jdk:${JAVA_HOME} ${TESTBASE}
27 
28 
29 ########################################################################
30 # The following section is an example test.props property file
31 # used for collecting code coverage data for JDK 1.6.  These properties
32 # are currently supported:
33 #   jcov.options are the jcov options that should be added to VMs
34 #                system properties
35 #   rmid.jcov.args are the jcov options that should be added as
36 #                  arguments to rmid command line; effectively, these
37 #                  are identical to jcov.options but each option is
</pre>
<hr />
<pre>
56 
57 export CLASSPATH=&lt;path to jcov.jar&gt;
58 export SRCS=&lt;path to sources of the instrumented JDK build&gt;
59 java com.sun.tdk.jcov.MergerMain &lt;path to jcov &#39;A&#39; template for the build&gt;template_a.jcov /files/rmi.jcov
60 java -Xms256m -Xmx512m com.sun.tdk.jcov.RepGenMain -fmt=html_ns -src_root=${SRCS} \
61         -include=java.rmi.* \
62         -include=java.rmi.activation.* \
63         -include=java.rmi.dgc.* \
64         -include=java.rmi.registry.* \
65         -include=java.rmi.server.* \
66         -include=sun.rmi.log.* \
67         -include=sun.rmi.registry.* \
68         -include=sun.rmi.runtime.* \
69         -include=sun.rmi.server.* \
70         -include=sun.rmi.transport.* \
71         -include=sun.rmi.transport.proxy.* \
72         -include=sun.rmi.transport.tcp.* \
73         -include=java.lang.reflect.Proxy \
74         -include=sun.misc.ProxyGenerator \
75         -exclude=com.sun.rmi.rmid.* \
<span class="line-removed">76         -exclude=sun.rmi.rmic.* \</span>
77         -exclude=javax.rmi.ssl.* \
78         java.jcov
79 
</pre>
</td>
<td>
<hr />
<pre>
<span class="line-modified"> 1 ########################################################################</span>
<span class="line-modified"> 2 # This file contains example scripts and property files for collecting</span>
 3 # code coverage data of the RMI regression suite.
 4 #
 5 # Since many RMI regression tests spawn child VMs (either directly
 6 # or through activation), special support is required for setting
<span class="line-modified"> 7 # command line options and arguments needed by jcov - the code coverage</span>
 8 # instrumentation and collection tool.  This special support is provided
<span class="line-modified"> 9 # by properties in the test.props file.  If a file named ../../test.props</span>
10 # exists (assuming the working directory is &quot;&lt;path&gt;/JTwork/scratch&quot;, this
<span class="line-modified">11 # will find &quot;&lt;path&gt;/test.props&quot;), then it will be used by test library</span>
12 # code that spawns VMs or instances of rmid.  See the example test.props
13 # file below for the properties that may be defined.
14 
15 
<span class="line-modified">16 ########################################################################</span>
<span class="line-modified">17 # The following is a script used to execute RMI regression tests</span>
18 # on Solaris and collect code coverage data.
19 
20 #!/bin/ksh
21 export JAVA_HOME=&lt;path to special JDK jcov instrumented build&gt;
22 export JT_HOME=&lt;path to special JTREG build with jcov hooks&gt;
23 export CLASSPATH=.:${JT_HOME}/javatest.jar
24 export OPTS=&quot;-Xms256m -Xmx256m -XX:+UseUnsupportedDeprecatedJVMPI -XX:+EnableJVMPIInstructionStartEvent -XX:-UseFastEmptyMethods -XX:-UseFastAccessorMethods -timeoutFactor:4&quot;
25 export TESTBASE=/files/&lt;JDK workspace&gt;/test
26 ${JT_HOME}/solaris/bin/jtreg -Xrunjcov:file=/files/rmi.jcov ${OPTS} -va -w:/tmp/JT -r:/tmp/JTreport -jdk:${JAVA_HOME} ${TESTBASE}
27 
28 
29 ########################################################################
30 # The following section is an example test.props property file
31 # used for collecting code coverage data for JDK 1.6.  These properties
32 # are currently supported:
33 #   jcov.options are the jcov options that should be added to VMs
34 #                system properties
35 #   rmid.jcov.args are the jcov options that should be added as
36 #                  arguments to rmid command line; effectively, these
37 #                  are identical to jcov.options but each option is
</pre>
<hr />
<pre>
56 
57 export CLASSPATH=&lt;path to jcov.jar&gt;
58 export SRCS=&lt;path to sources of the instrumented JDK build&gt;
59 java com.sun.tdk.jcov.MergerMain &lt;path to jcov &#39;A&#39; template for the build&gt;template_a.jcov /files/rmi.jcov
60 java -Xms256m -Xmx512m com.sun.tdk.jcov.RepGenMain -fmt=html_ns -src_root=${SRCS} \
61         -include=java.rmi.* \
62         -include=java.rmi.activation.* \
63         -include=java.rmi.dgc.* \
64         -include=java.rmi.registry.* \
65         -include=java.rmi.server.* \
66         -include=sun.rmi.log.* \
67         -include=sun.rmi.registry.* \
68         -include=sun.rmi.runtime.* \
69         -include=sun.rmi.server.* \
70         -include=sun.rmi.transport.* \
71         -include=sun.rmi.transport.proxy.* \
72         -include=sun.rmi.transport.tcp.* \
73         -include=java.lang.reflect.Proxy \
74         -include=sun.misc.ProxyGenerator \
75         -exclude=com.sun.rmi.rmid.* \

76         -exclude=javax.rmi.ssl.* \
77         java.jcov
78 
</pre>
</td>
</tr>
</table>
<center><a href="../reliability/benchmark/bench/rmi/Makefile.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../security/KeyAgreement/KeyAgreementTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>