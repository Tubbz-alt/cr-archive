<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New src/jdk.jdi/share/classes/com/sun/jdi/VirtualMachine.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 1998, 2020, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package com.sun.jdi;
 27 
 28 import java.util.List;
 29 import java.util.Map;
 30 
 31 import com.sun.jdi.connect.AttachingConnector;
 32 import com.sun.jdi.connect.Connector;
 33 import com.sun.jdi.connect.LaunchingConnector;
 34 import com.sun.jdi.connect.spi.Connection;
 35 import com.sun.jdi.event.EventQueue;
 36 import com.sun.jdi.event.MethodExitEvent;
 37 import com.sun.jdi.event.VMDisconnectEvent;
 38 import com.sun.jdi.event.VMStartEvent;
 39 import com.sun.jdi.request.BreakpointRequest;
 40 import com.sun.jdi.request.ClassPrepareRequest;
 41 import com.sun.jdi.request.EventRequestManager;
 42 import com.sun.jdi.request.MonitorContendedEnterRequest;
 43 import com.sun.jdi.request.MonitorContendedEnteredRequest;
 44 import com.sun.jdi.request.MonitorWaitRequest;
 45 import com.sun.jdi.request.MonitorWaitedRequest;
 46 import com.sun.jdi.request.VMDeathRequest;
 47 
 48 /**
 49  * A virtual machine targeted for debugging.
 50  * More precisely, a {@link Mirror mirror} representing the
 51  * composite state of the target VM.
 52  * All other mirrors are associated with an instance of this
 53  * interface.  Access to all other mirrors is achieved
 54  * directly or indirectly through an instance of this
 55  * interface.
 56  * Access to global VM properties and control of VM execution
 57  * are supported directly by this interface.
 58  * &lt;P&gt;
 59  * Instances of this interface are created by instances of
 60  * {@link Connector}. For example,
 61  * an {@link AttachingConnector AttachingConnector}
 62  * attaches to a target VM and returns its virtual machine mirror.
 63  * A Connector will typically create a VirtualMachine by invoking
 64  * the VirtualMachineManager&#39;s {@link
 65  * VirtualMachineManager#createVirtualMachine(Connection)}
 66  * createVirtualMachine(Connection) method.
 67  * &lt;p&gt;
 68  * Note that a target VM launched by a launching connector is not
 69  * guaranteed to be stable until after the {@link VMStartEvent} has been
 70  * received.
 71  * &lt;p&gt;
 72  * Any method on &lt;code&gt;VirtualMachine&lt;/code&gt; which
 73  * takes &lt;code&gt;VirtualMachine&lt;/code&gt; as an parameter may throw
 74  * {@link VMDisconnectedException} if the target VM is
 75  * disconnected and the {@link VMDisconnectEvent} has been or is
 76  * available to be read from the {@link EventQueue}.
 77  * &lt;p&gt;
 78  * Any method on &lt;code&gt;VirtualMachine&lt;/code&gt; which
 79  * takes &lt;code&gt;VirtualMachine&lt;/code&gt; as an parameter may throw
 80  * {@link VMOutOfMemoryException} if the target VM has run out of memory.
 81  *
 82  * @author Robert Field
 83  * @author Gordon Hirsch
 84  * @author James McIlree
 85  * @since  1.3
 86  */
 87 public interface VirtualMachine extends Mirror {
 88 
 89     /**
 90      * Returns all modules. For each module in the target
 91      * VM a {@link ModuleReference} will be placed in the returned list.
 92      * &lt;P&gt;
 93      *
 94      * Not all target virtual machines support this operation.
 95      * Use {@link VirtualMachine#canGetModuleInfo()}
 96      * to determine if the operation is supported.
 97      *
 98      * @implSpec
 99      * The default implementation throws {@code UnsupportedOperationException}.
100      *
101      * @return a list of {@link ModuleReference} objects, each mirroring
102      * a module in the target VM.
103      *
104      * @throws java.lang.UnsupportedOperationException if
105      * the target virtual machine does not support this
106      * operation.
107      *
108      * @since 9
109      */
110     default List&lt;ModuleReference&gt; allModules() {
111         throw new java.lang.UnsupportedOperationException(
112             &quot;The method allModules() must be implemented&quot;);
113     }
114 
115     /**
116      * Returns the loaded reference types that
117      * match a given name. The name must be fully qualified
118      * (for example, java.lang.String). The returned list
119      * will contain a {@link ReferenceType} for each class
120      * or interface found with the given name. The search
121      * is confined to loaded classes only; no attempt is made
122      * to load a class of the given name.
123      * &lt;P&gt;
124      * The returned list will include reference types
125      * loaded at least to the point of preparation and
126      * types (like array) for which preparation is
127      * not defined.
128      *
129      * @param className the class/interface name to search for
130      * @return a list of {@link ReferenceType} objects, each
131      * mirroring a type in the target VM with the given name.
132      */
133     List&lt;ReferenceType&gt; classesByName(String className);
134 
135     /**
136      * Returns all {@linkplain ReferenceType loaded types} in the target VM.
137      * &lt;p&gt;
138      * The returned list includes all reference types, including
139      * {@link Class#isHidden hidden classes or interfaces}, loaded
140      * at least to the point of preparation and types (like array)
141      * for which preparation is not defined.
142      *
143      * @return a list of {@link ReferenceType} objects, each mirroring
144      * a loaded type in the target VM.
145      * @see &lt;a href=&quot;{@docRoot}/../specs/jvmti/jvmti.html#GetLoadedClasses&quot;&gt;
146      * JVM TI GetLoadedClasses&lt;/a&gt; regarding how class and interface creation can be triggered
147      */
148     List&lt;ReferenceType&gt; allClasses();
149 
150     /**
151      * All classes given are redefined according to the
152      * definitions supplied.  A method in a redefined class
153      * is called &#39;equivalent&#39; (to the old version of the
154      * method) if
155      * &lt;UL&gt;
156      * &lt;LI&gt;their bytecodes are the same except for indicies into
157      *   the constant pool, and
158      * &lt;LI&gt;the referenced constants are equal.
159      * &lt;/UL&gt;
160      * Otherwise, the new method is called &#39;non-equivalent&#39;.
161      * If a redefined method has active stack frames, those active
162      * frames continue to run the bytecodes of the previous version of the
163      * method.  If the new version of such a method is non-equivalent,
164      * then a method from one of these active frames is called &#39;obsolete&#39; and
165      * {@link Method#isObsolete Method.isObsolete()}
166      * will return true when called on one of these methods.
167      * If resetting such a frame is desired, use
168      * {@link ThreadReference#popFrames ThreadReference.popFrames(StackFrame)}
169      * to pop the old obsolete method execution from the stack.
170      * New invocations of redefined methods will always invoke the new versions.
171      * &lt;p&gt;
172      * This function does not cause any initialization except
173      * that which would occur under the customary JVM semantics.
174      * In other words, redefining a class does not cause
175      * its initializers to be run. The values of preexisting
176      * static variables will remain as they were prior to the
177      * call. However, completely uninitialized (new) static
178      * variables will be assigned their default value.
179      * &lt;p&gt;
180      * If a redefined class has instances then all those
181      * instances will have the fields defined by the redefined
182      * class at the completion of the call. Preexisting fields
183      * will retain their previous values. Any new fields will
184      * have their default values; no instance initializers or
185      * constructors are run.
186      * &lt;p&gt;
187      * Threads need not be suspended.
188      * &lt;p&gt;
189      * No events are generated by this function.
190      * &lt;p&gt;
191      * All breakpoints in the redefined classes are deleted.
192      * &lt;p&gt;
193      * Not all target virtual machines support this operation.
194      * Use {@link #canRedefineClasses() canRedefineClasses()}
195      * to determine if the operation is supported.
196      * Use {@link #canAddMethod() canAddMethod()}
197      * to determine if the redefinition can add methods.
198      * Use {@link #canUnrestrictedlyRedefineClasses() canUnrestrictedlyRedefineClasses()}
199      * to determine if the redefinition can change the schema,
200      * delete methods, change the class hierarchy, etc.
201      *
202      * @param classToBytes A map from {@link ReferenceType}
203      * to array of byte.
204      * The bytes represent the new class definition and
205      * are in Java Virtual Machine class file format.
206      *
207      * @throws java.lang.UnsupportedOperationException if
208      * the target virtual machine does not support this
209      * operation.
210      * &lt;UL&gt;
211      * &lt;LI&gt;If {@link #canRedefineClasses() canRedefineClasses()}
212      * is false any call of this method will throw this exception.
213      * &lt;LI&gt;If {@link #canAddMethod() canAddMethod()} is false
214      * attempting to add a method will throw this exception.
215      * &lt;LI&gt;If {@link #canUnrestrictedlyRedefineClasses()
216      *            canUnrestrictedlyRedefineClasses()}
217 &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
218      * is false attempting any of the unsupported class file changes described
219      * in &lt;a href=&quot;{@docRoot}/../specs/jvmti.html#RedefineClasses&quot;&gt;
220      * JVM TI RedefineClasses&lt;/a&gt; will throw this exception.
221 =======
222      * is false, attempting any of the following will throw
223      * this exception
224      *   &lt;UL&gt;
225      *   &lt;LI&gt;changing the schema (the fields)
226      *   &lt;LI&gt;changing the hierarchy (superclasses, interfaces)
227      *   &lt;LI&gt;deleting a method
228      *   &lt;LI&gt;changing class modifiers
229      *   &lt;LI&gt;changing method modifiers
230      *   &lt;LI&gt;changing the {@code NestHost}, {@code NestMembers}, {@code PermittedSubclasses}, or {@code Record} class attributes
231      *   &lt;/UL&gt;
232      * &lt;/UL&gt;
233 &gt;&gt;&gt;&gt;&gt;&gt;&gt; 926ea22b56c80bf0e4ce5f1d92bc1d31ac91e978
234      *
235      * @throws java.lang.NoClassDefFoundError if the bytes
236      * don&#39;t correspond to the reference type (the names
237      * don&#39;t match).
238      *
239      * @throws java.lang.VerifyError if a &quot;verifier&quot; detects
240      * that a class, though well formed, contains an internal
241      * inconsistency or security problem.
242      *
243      * @throws java.lang.ClassFormatError if the bytes
244      * do not represent a valid class.
245      *
246      * @throws java.lang.ClassCircularityError if a
247      * circularity has been detected while initializing a class.
248      *
249      * @throws java.lang.UnsupportedClassVersionError if the
250      * major and minor version numbers in bytes
251      * are not supported by the VM.
252      *
253      * @throws VMCannotBeModifiedException if the VirtualMachine is read-only - see {@link VirtualMachine#canBeModified()}.
254      *
255      * @see Method#isObsolete
256      * @see ThreadReference#popFrames
257      * @see #canRedefineClasses
258      * @see #canAddMethod
259      * @see #canUnrestrictedlyRedefineClasses
260      *
261      * @since 1.4
262      */
263     void redefineClasses(Map&lt;? extends ReferenceType,byte[]&gt; classToBytes);
264 
265     /**
266      * Returns a list of the currently running threads. For each
267      * running thread in the target VM, a {@link ThreadReference}
268      * that mirrors it is placed in the list.
269      * The returned list contains threads created through
270      * java.lang.Thread, all native threads attached to
271      * the target VM through JNI, and system threads created
272      * by the target VM. Thread objects that have
273      * not yet been started
274      * (see {@link java.lang.Thread#start Thread.start()})
275      * and thread objects that have
276      * completed their execution are not included in the returned list.
277      *
278      * @return a list of {@link ThreadReference} objects, one for each
279      * running thread in the mirrored VM.
280      */
281     List&lt;ThreadReference&gt; allThreads();
282 
283     /**
284      * Suspends the execution of the application running in this
285      * virtual machine. All threads currently running will be suspended.
286      * &lt;p&gt;
287      * Unlike {@link java.lang.Thread#suspend Thread.suspend()},
288      * suspends of both the virtual machine and individual threads are
289      * counted. Before a thread will run again, it must be resumed
290      * (through {@link #resume} or {@link ThreadReference#resume})
291      * the same number of times it has been suspended.
292      *
293      * @throws VMCannotBeModifiedException if the VirtualMachine is read-only - see {@link VirtualMachine#canBeModified()}.
294      */
295     void suspend();
296 
297     /**
298      * Continues the execution of the application running in this
299      * virtual machine. All threads are resumed as documented in
300      * {@link ThreadReference#resume}.
301      *
302      * @throws VMCannotBeModifiedException if the VirtualMachine is read-only - see {@link VirtualMachine#canBeModified()}.
303      *
304      * @see #suspend
305      */
306     void resume();
307 
308     /**
309      * Returns each thread group which does not have a parent. For each
310      * top level thread group a {@link ThreadGroupReference} is placed in the
311      * returned list.
312      * &lt;p&gt;
313      * This command may be used as the first step in building a tree
314      * (or trees) of the existing thread groups.
315      *
316      * @return a list of {@link ThreadGroupReference} objects, one for each
317      * top level thread group.
318      */
319     List&lt;ThreadGroupReference&gt; topLevelThreadGroups();
320 
321     /**
322      * Returns the event queue for this virtual machine.
323      * A virtual machine has only one {@link EventQueue} object, this
324      * method will return the same instance each time it
325      * is invoked.
326      *
327      * @throws VMCannotBeModifiedException if the VirtualMachine is read-only - see {@link VirtualMachine#canBeModified()}.
328      *
329      * @return the {@link EventQueue} for this virtual machine.
330      */
331     EventQueue eventQueue();
332 
333     /**
334      * Returns the event request manager for this virtual machine.
335      * The {@link EventRequestManager} controls user settable events
336      * such as breakpoints.
337      * A virtual machine has only one {@link EventRequestManager} object,
338      * this method will return the same instance each time it
339      * is invoked.
340      *
341      * @throws VMCannotBeModifiedException if the VirtualMachine is read-only - see {@link VirtualMachine#canBeModified()}.
342      *
343      * @return the {@link EventRequestManager} for this virtual machine.
344      */
345     EventRequestManager eventRequestManager();
346 
347     /**
348      * Creates a {@link BooleanValue} for the given value. This value
349      * can be used for setting and comparing against a value retrieved
350      * from a variable or field in this virtual machine.
351      *
352      * @param value a boolean for which to create the value
353      * @return the {@link BooleanValue} for the given boolean.
354      */
355     BooleanValue mirrorOf(boolean value);
356 
357     /**
358      * Creates a {@link ByteValue} for the given value. This value
359      * can be used for setting and comparing against a value retrieved
360      * from a variable or field in this virtual machine.
361      *
362      * @param value a byte for which to create the value
363      * @return the {@link ByteValue} for the given byte.
364      */
365     ByteValue mirrorOf(byte value);
366 
367     /**
368      * Creates a {@link CharValue} for the given value. This value
369      * can be used for setting and comparing against a value retrieved
370      * from a variable or field in this virtual machine.
371      *
372      * @param value a char for which to create the value
373      * @return the {@link CharValue} for the given char.
374      */
375     CharValue mirrorOf(char value);
376 
377     /**
378      * Creates a {@link ShortValue} for the given value. This value
379      * can be used for setting and comparing against a value retrieved
380      * from a variable or field in this virtual machine.
381      *
382      * @param value a short for which to create the value
383      * @return the {@link ShortValue} for the given short.
384      */
385     ShortValue mirrorOf(short value);
386 
387     /**
388      * Creates an {@link IntegerValue} for the given value. This value
389      * can be used for setting and comparing against a value retrieved
390      * from a variable or field in this virtual machine.
391      *
392      * @param value an int for which to create the value
393      * @return the {@link IntegerValue} for the given int.
394      */
395     IntegerValue mirrorOf(int value);
396 
397     /**
398      * Creates a {@link LongValue} for the given value. This value
399      * can be used for setting and comparing against a value retrieved
400      * from a variable or field in this virtual machine.
401      *
402      * @param value a long for which to create the value
403      * @return the {@link LongValue} for the given long.
404      */
405     LongValue mirrorOf(long value);
406 
407     /**
408      * Creates a {@link FloatValue} for the given value. This value
409      * can be used for setting and comparing against a value retrieved
410      * from a variable or field in this virtual machine.
411      *
412      * @param value a float for which to create the value
413      * @return the {@link FloatValue} for the given float.
414      */
415     FloatValue mirrorOf(float value);
416 
417     /**
418      * Creates a {@link DoubleValue} for the given value. This value
419      * can be used for setting and comparing against a value retrieved
420      * from a variable or field in this virtual machine.
421      *
422      * @param value a double for which to create the value
423      * @return the {@link DoubleValue} for the given double.
424      */
425     DoubleValue mirrorOf(double value);
426 
427     /**
428      * Creates a string in this virtual machine.
429      * The created string can be used for setting and comparing against
430      * a string value retrieved from a variable or field in this
431      * virtual machine.
432      *
433      * @param value the string to be created
434      * @return a {@link StringReference} that mirrors the newly created
435      * string in the target VM.
436      * @throws VMCannotBeModifiedException if the VirtualMachine is read-only
437      * -see {@link VirtualMachine#canBeModified()}.
438      */
439     StringReference mirrorOf(String value);
440 
441 
442     /**
443      * Creates a {@link VoidValue}.  This value
444      * can be passed to {@link ThreadReference#forceEarlyReturn}
445      * when a void method is to be exited.
446      *
447      * @return the {@link VoidValue}.
448      */
449     VoidValue mirrorOfVoid();
450 
451     /**
452      * Returns the {@link java.lang.Process} object for this
453      * virtual machine if launched by a {@link LaunchingConnector}
454      *
455      * @return the {@link java.lang.Process} object for this virtual
456      * machine, or null if it was not launched by a {@link LaunchingConnector}.
457      * @throws VMCannotBeModifiedException if the VirtualMachine is read-only
458      * -see {@link VirtualMachine#canBeModified()}.
459      */
460     Process process();
461 
462     /**
463      * Invalidates this virtual machine mirror.
464      * The communication channel to the target VM is closed, and
465      * the target VM prepares to accept another subsequent connection
466      * from this debugger or another debugger, including the
467      * following tasks:
468      * &lt;ul&gt;
469      * &lt;li&gt;All event requests are cancelled.
470      * &lt;li&gt;All threads suspended by {@link #suspend} or by
471      * {@link ThreadReference#suspend} are resumed as many
472      * times as necessary for them to run.
473      * &lt;li&gt;Garbage collection is re-enabled in all cases where it was
474      * disabled through {@link ObjectReference#disableCollection}.
475      * &lt;/ul&gt;
476      * Any current method invocations executing in the target VM
477      * are continued after the disconnection. Upon completion of any such
478      * method invocation, the invoking thread continues from the
479      * location where it was originally stopped.
480      * &lt;p&gt;
481      * Resources originating in
482      * this VirtualMachine (ObjectReferences, ReferenceTypes, etc.)
483      * will become invalid.
484      */
485     void dispose();
486 
487     /**
488      * Causes the mirrored VM to terminate with the given error code.
489      * All resources associated with this VirtualMachine are freed.
490      * If the mirrored VM is remote, the communication channel
491      * to it will be closed. Resources originating in
492      * this VirtualMachine (ObjectReferences, ReferenceTypes, etc.)
493      * will become invalid.
494      * &lt;p&gt;
495      * Threads running in the mirrored VM are abruptly terminated.
496      * A thread death exception is not thrown and
497      * finally blocks are not run.
498      *
499      * @param exitCode the exit code for the target VM.  On some platforms,
500      * the exit code might be truncated, for example, to the lower order 8 bits.
501      *
502      * @throws VMCannotBeModifiedException if the VirtualMachine is read-only - see {@link VirtualMachine#canBeModified()}.
503      */
504     void exit(int exitCode);
505 
506     /**
507      * Determines if the target VM supports watchpoints
508      * for field modification.
509      *
510      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
511      * &lt;code&gt;false&lt;/code&gt; otherwise.
512      */
513     boolean canWatchFieldModification();
514 
515     /**
516      * Determines if the target VM supports watchpoints
517      * for field access.
518      *
519      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
520      * &lt;code&gt;false&lt;/code&gt; otherwise.
521      */
522     boolean canWatchFieldAccess();
523 
524     /**
525      * Determines if the target VM supports the retrieval
526      * of a method&#39;s bytecodes.
527      *
528      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
529      * &lt;code&gt;false&lt;/code&gt; otherwise.
530      */
531     boolean canGetBytecodes();
532 
533     /**
534      * Determines if the target VM supports the query
535      * of the synthetic attribute of a method or field.
536      *
537      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
538      * &lt;code&gt;false&lt;/code&gt; otherwise.
539      */
540     boolean canGetSyntheticAttribute();
541 
542     /**
543      * Determines if the target VM supports the retrieval
544      * of the monitors owned by a thread.
545      *
546      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
547      * &lt;code&gt;false&lt;/code&gt; otherwise.
548      */
549     boolean canGetOwnedMonitorInfo();
550 
551     /**
552      * Determines if the target VM supports the retrieval
553      * of the monitor for which a thread is currently waiting.
554      *
555      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
556      * &lt;code&gt;false&lt;/code&gt; otherwise.
557      */
558     boolean canGetCurrentContendedMonitor();
559 
560     /**
561      * Determines if the target VM supports the retrieval
562      * of the monitor information for an object.
563      *
564      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
565      * &lt;code&gt;false&lt;/code&gt; otherwise.
566      */
567     boolean canGetMonitorInfo();
568 
569     /**
570      * Determines if the target VM supports filtering
571      * events by specific instance object.  For example,
572      * see {@link BreakpointRequest#addInstanceFilter}.
573      *
574      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
575      * &lt;code&gt;false&lt;/code&gt; otherwise.
576      */
577     boolean canUseInstanceFilters();
578 
579     /**
580      * Determines if the target VM supports any level
581      * of class redefinition.
582      * @see #redefineClasses
583      *
584      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
585      * &lt;code&gt;false&lt;/code&gt; otherwise.
586      *
587      * @since 1.4
588      */
589     boolean canRedefineClasses();
590 
591     /**
592      * Determines if the target VM supports the addition
593      * of methods when performing class redefinition.
594      * @see #redefineClasses
595      *
596      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
597      * &lt;code&gt;false&lt;/code&gt; otherwise.
598      *
599      * @since 1.4
600      */
601     boolean canAddMethod();
602 
603     /**
604      * Determines if the target VM supports
605      * changes when performing class redefinition that are
606      * otherwise restricted by {@link #redefineClasses}.
607      * @see #redefineClasses
608      *
609      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
610      * &lt;code&gt;false&lt;/code&gt; otherwise.
611      *
612      * @since 1.4
613      */
614     boolean canUnrestrictedlyRedefineClasses();
615 
616     /**
617      * Determines if the target VM supports popping
618      * frames of a threads stack.
619      * @see ThreadReference#popFrames
620      *
621      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
622      * &lt;code&gt;false&lt;/code&gt; otherwise.
623      *
624      * @since 1.4
625      */
626     boolean canPopFrames();
627 
628     /**
629      * Determines if the target VM supports getting
630      * the source debug extension.
631      * @see ReferenceType#sourceDebugExtension
632      *
633      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
634      * &lt;code&gt;false&lt;/code&gt; otherwise.
635      *
636      * @since 1.4
637      */
638     boolean canGetSourceDebugExtension();
639 
640     /**
641      * Determines if the target VM supports the creation of
642      * {@link VMDeathRequest}s.
643      * @see EventRequestManager#createVMDeathRequest
644      *
645      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
646      * &lt;code&gt;false&lt;/code&gt; otherwise.
647      *
648      * @since 1.4
649      */
650     boolean canRequestVMDeathEvent();
651 
652     /**
653      * Determines if the target VM supports the inclusion of return values
654      * in
655      * {@link MethodExitEvent}s.
656      * @see EventRequestManager#createMethodExitRequest
657      *
658      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
659      * &lt;code&gt;false&lt;/code&gt; otherwise.
660      *
661      * @since 1.6
662      */
663     boolean canGetMethodReturnValues();
664 
665     /**
666      * Determines if the target VM supports the accessing of class instances,
667      * instance counts, and referring objects.
668      *
669      * @see #instanceCounts
670      * @see ReferenceType#instances(long)
671      * @see ObjectReference#referringObjects(long)
672      *
673      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
674      * &lt;code&gt;false&lt;/code&gt; otherwise.
675      *
676      * @since 1.6
677      */
678     boolean canGetInstanceInfo();
679 
680     /**
681      * Determines if the target VM supports the filtering of
682      * class prepare events by source name.
683      *
684      * see {@link ClassPrepareRequest#addSourceNameFilter}.
685      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
686      * &lt;code&gt;false&lt;/code&gt; otherwise.
687      *
688      * @since 1.6
689      */
690     boolean canUseSourceNameFilters();
691 
692     /**
693      * Determines if the target VM supports the forcing of a method to
694      * return early.
695      *
696      * @see ThreadReference#forceEarlyReturn(Value)
697      *
698      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
699      * &lt;code&gt;false&lt;/code&gt; otherwise.
700      *
701      * @since 1.6
702      */
703     boolean canForceEarlyReturn();
704 
705     /**
706      * Determines if the target VM is a read-only VM.  If a method which
707      * would modify the state of the VM is called on a read-only VM,
708      * then {@link VMCannotBeModifiedException} is thrown.
709      *
710      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
711      * &lt;code&gt;false&lt;/code&gt; otherwise.
712      *
713      * @since 1.5
714      */
715 
716     boolean canBeModified();
717 
718     /**
719      * Determines if the target VM supports the creation of
720      * {@link MonitorContendedEnterRequest}s.
721      * {@link MonitorContendedEnteredRequest}s.
722      * {@link MonitorWaitRequest}s.
723      * {@link MonitorWaitedRequest}s.
724      * @see EventRequestManager#createMonitorContendedEnterRequest
725      * @see EventRequestManager#createMonitorContendedEnteredRequest
726      * @see EventRequestManager#createMonitorWaitRequest
727      * @see EventRequestManager#createMonitorWaitedRequest
728      *
729      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
730      * &lt;code&gt;false&lt;/code&gt; otherwise.
731      *
732      * @since 1.6
733      */
734 
735     boolean canRequestMonitorEvents();
736 
737     /**
738      * Determines if the target VM supports getting which
739      * frame has acquired a monitor.
740      * @see ThreadReference#ownedMonitorsAndFrames
741      *
742      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
743      * &lt;code&gt;false&lt;/code&gt; otherwise.
744      *
745      * @since 1.6
746      */
747 
748      boolean canGetMonitorFrameInfo();
749 
750 
751     /**
752      * Determines if the target VM supports reading class file
753      * major and minor versions.
754      *
755      * @see ReferenceType#majorVersion()
756      * @see ReferenceType#minorVersion()
757      *
758      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
759      * &lt;code&gt;false&lt;/code&gt; otherwise.
760      *
761      * @since 1.6
762      */
763     boolean canGetClassFileVersion();
764 
765     /**
766      * Determines if the target VM supports getting constant pool
767      * information of a class.
768      *
769      * @see ReferenceType#constantPoolCount()
770      * @see ReferenceType#constantPool()
771      *
772      * @return &lt;code&gt;true&lt;/code&gt; if the feature is supported,
773      * &lt;code&gt;false&lt;/code&gt; otherwise.
774      *
775      * @since 1.6
776      */
777     boolean canGetConstantPool();
778 
779     /**
780      * Determines if the target VM supports getting information about modules.
781      *
782      * @return {@code true} if the feature is supported, {@code false} otherwise
783      *
784      * @implSpec
785      * The default implementation returns {@code false}.
786      *
787      * @see VirtualMachine#allModules()
788      * @see ReferenceType#module()
789      * @see ModuleReference
790      *
791      * @since 9
792      */
793     default boolean canGetModuleInfo() {
794         return false;
795     }
796 
797     /**
798      * Set this VM&#39;s default stratum (see {@link Location} for a
799      * discussion of strata).  Overrides the per-class default set
800      * in the class file.
801      * &lt;P&gt;
802      * Affects location queries (such as,
803      * {@link Location#sourceName()})
804      * and the line boundaries used in
805      * single stepping.
806      *
807      * @param stratum the stratum to set as VM default,
808      * or null to use per-class defaults.
809      *
810      * @throws java.lang.UnsupportedOperationException if the
811      * target virtual machine does not support this operation.
812      *
813      * @since 1.4
814      */
815     void setDefaultStratum(String stratum);
816 
817     /**
818      * Return this VM&#39;s default stratum.
819      *
820      * @see #setDefaultStratum(String)
821      * @see ReferenceType#defaultStratum()
822      * @return &lt;code&gt;null&lt;/code&gt; (meaning that the per-class
823      * default - {@link ReferenceType#defaultStratum()} -
824      * should be used) unless the default stratum has been
825      * set with
826      * {@link #setDefaultStratum(String)}.
827      *
828      * @since 1.4
829      */
830     String getDefaultStratum();
831 
832     /**
833      * Returns the number of instances of each ReferenceType in the &#39;refTypes&#39;
834      * list.
835      * Only instances that are reachable for the purposes of garbage collection
836      * are counted.
837      * &lt;p&gt;
838      * Not all target virtual machines support this operation.
839      * Use {@link VirtualMachine#canGetInstanceInfo()}
840      * to determine if the operation is supported.
841      *
842      * @see ReferenceType#instances(long)
843      * @see ObjectReference#referringObjects(long)
844      * @param refTypes the list of {@link ReferenceType} objects for which counts
845      *        are to be obtained.
846      *
847      * @return an array of &lt;code&gt;long&lt;/code&gt; containing one element for each
848      *         element in the &#39;refTypes&#39; list.  Element i of the array contains
849      *         the number of instances in the target VM of the ReferenceType at
850      *         position i in the &#39;refTypes&#39; list.
851      *         If the &#39;refTypes&#39; list is empty, a zero-length array is returned.
852      *         If a ReferenceType in refTypes has been garbage collected, zero
853      *         is returned for its instance count.
854      * @throws java.lang.UnsupportedOperationException if
855      * the target virtual machine does not support this
856      * operation - see
857      * {@link VirtualMachine#canGetInstanceInfo() canGetInstanceInfo()}
858      * @throws NullPointerException if the &#39;refTypes&#39; list is null.
859      * @since 1.6
860      */
861     long[] instanceCounts(List&lt;? extends ReferenceType&gt; refTypes);
862 
863     /**
864      * Returns text information on the target VM and the
865      * debugger support that mirrors it. No specific format
866      * for this information is guaranteed.
867      * Typically, this string contains version information for the
868      * target VM and debugger interfaces.
869      * More precise information
870      * on VM and JDI versions is available through
871      * {@link #version}, {@link VirtualMachineManager#majorInterfaceVersion},
872      * and {@link VirtualMachineManager#minorInterfaceVersion}
873      *
874      * @return the description.
875      */
876     String description();
877 
878     /**
879      * Returns the version of the Java Runtime Environment in the target
880      * VM as reported by the property &lt;code&gt;java.version&lt;/code&gt;.
881      * For obtaining the JDI interface version, use
882      * {@link VirtualMachineManager#majorInterfaceVersion}
883      * and {@link VirtualMachineManager#minorInterfaceVersion}
884      *
885      * @return the target VM version.
886      */
887     String version();
888 
889     /**
890      * Returns the name of the target VM as reported by the
891      * property &lt;code&gt;java.vm.name&lt;/code&gt;.
892      *
893      * @return the target VM name.
894      */
895     String name();
896 
897     /** All tracing is disabled. */
898     int TRACE_NONE        = 0x00000000;
899     /** Tracing enabled for JDWP packets sent to target VM. */
900     int TRACE_SENDS       = 0x00000001;
901     /** Tracing enabled for JDWP packets received from target VM. */
902     int TRACE_RECEIVES    = 0x00000002;
903     /** Tracing enabled for internal event handling. */
904     int TRACE_EVENTS      = 0x00000004;
905     /** Tracing enabled for internal managment of reference types. */
906     int TRACE_REFTYPES    = 0x00000008;
907     /** Tracing enabled for internal management of object references. */
908     int TRACE_OBJREFS      = 0x00000010;
909     /** All tracing is enabled. */
910     int TRACE_ALL         = 0x00ffffff;
911 
912     /**
913      * Traces the activities performed by the com.sun.jdi implementation.
914      * All trace information is output to System.err. The given trace
915      * flags are used to limit the output to only the information
916      * desired. The given flags are in effect and the corresponding
917      * trace will continue until the next call to
918      * this method.
919      * &lt;p&gt;
920      * Output is implementation dependent and trace mode may be ignored.
921      *
922      * @param traceFlags identifies which kinds of tracing to enable.
923      */
924     void setDebugTraceMode(int traceFlags);
925 }
    </pre>
  </body>
</html>