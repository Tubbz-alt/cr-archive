<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/oops/InstanceKlass.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../memory/Dictionary.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../runtime/VM.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/oops/InstanceKlass.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 128     CLASS_STATE_FULLY_INITIALIZED = db.lookupIntConstant(&quot;InstanceKlass::fully_initialized&quot;).intValue();
 129     CLASS_STATE_INITIALIZATION_ERROR = db.lookupIntConstant(&quot;InstanceKlass::initialization_error&quot;).intValue();
 130 
 131     MISC_REWRITTEN                    = db.lookupIntConstant(&quot;InstanceKlass::_misc_rewritten&quot;).intValue();
 132     MISC_HAS_NONSTATIC_FIELDS         = db.lookupIntConstant(&quot;InstanceKlass::_misc_has_nonstatic_fields&quot;).intValue();
 133     MISC_SHOULD_VERIFY_CLASS          = db.lookupIntConstant(&quot;InstanceKlass::_misc_should_verify_class&quot;).intValue();
 134     MISC_IS_UNSAFE_ANONYMOUS          = db.lookupIntConstant(&quot;InstanceKlass::_misc_is_unsafe_anonymous&quot;).intValue();
 135     MISC_IS_CONTENDED                 = db.lookupIntConstant(&quot;InstanceKlass::_misc_is_contended&quot;).intValue();
 136     MISC_HAS_NONSTATIC_CONCRETE_METHODS      = db.lookupIntConstant(&quot;InstanceKlass::_misc_has_nonstatic_concrete_methods&quot;).intValue();
 137     MISC_DECLARES_NONSTATIC_CONCRETE_METHODS = db.lookupIntConstant(&quot;InstanceKlass::_misc_declares_nonstatic_concrete_methods&quot;).intValue();
 138     MISC_HAS_BEEN_REDEFINED           = db.lookupIntConstant(&quot;InstanceKlass::_misc_has_been_redefined&quot;).intValue();
 139     MISC_HAS_PASSED_FINGERPRINT_CHECK = db.lookupIntConstant(&quot;InstanceKlass::_misc_has_passed_fingerprint_check&quot;).intValue();
 140     MISC_IS_SCRATCH_CLASS             = db.lookupIntConstant(&quot;InstanceKlass::_misc_is_scratch_class&quot;).intValue();
 141     MISC_IS_SHARED_BOOT_CLASS         = db.lookupIntConstant(&quot;InstanceKlass::_misc_is_shared_boot_class&quot;).intValue();
 142     MISC_IS_SHARED_PLATFORM_CLASS     = db.lookupIntConstant(&quot;InstanceKlass::_misc_is_shared_platform_class&quot;).intValue();
 143     MISC_IS_SHARED_APP_CLASS          = db.lookupIntConstant(&quot;InstanceKlass::_misc_is_shared_app_class&quot;).intValue();
 144   }
 145 
 146   public InstanceKlass(Address addr) {
 147     super(addr);












 148     if (getJavaFieldsCount() != getAllFieldsCount()) {
 149       // Exercise the injected field logic
 150       for (int i = getJavaFieldsCount(); i &lt; getAllFieldsCount(); i++) {
 151         getFieldName(i);
 152         getFieldSignature(i);
 153       }
 154     }
 155   }
 156 
 157   private static MetadataField arrayKlasses;
 158   private static AddressField  methods;
 159   private static AddressField  defaultMethods;
 160   private static AddressField  methodOrdering;
 161   private static AddressField  localInterfaces;
 162   private static AddressField  transitiveInterfaces;
 163   private static AddressField fields;
 164   private static CIntField javaFieldsCount;
 165   private static MetadataField constants;
 166   private static AddressField  sourceDebugExtension;
 167   private static AddressField  innerClasses;
</pre>
</td>
<td>
<hr />
<pre>
 128     CLASS_STATE_FULLY_INITIALIZED = db.lookupIntConstant(&quot;InstanceKlass::fully_initialized&quot;).intValue();
 129     CLASS_STATE_INITIALIZATION_ERROR = db.lookupIntConstant(&quot;InstanceKlass::initialization_error&quot;).intValue();
 130 
 131     MISC_REWRITTEN                    = db.lookupIntConstant(&quot;InstanceKlass::_misc_rewritten&quot;).intValue();
 132     MISC_HAS_NONSTATIC_FIELDS         = db.lookupIntConstant(&quot;InstanceKlass::_misc_has_nonstatic_fields&quot;).intValue();
 133     MISC_SHOULD_VERIFY_CLASS          = db.lookupIntConstant(&quot;InstanceKlass::_misc_should_verify_class&quot;).intValue();
 134     MISC_IS_UNSAFE_ANONYMOUS          = db.lookupIntConstant(&quot;InstanceKlass::_misc_is_unsafe_anonymous&quot;).intValue();
 135     MISC_IS_CONTENDED                 = db.lookupIntConstant(&quot;InstanceKlass::_misc_is_contended&quot;).intValue();
 136     MISC_HAS_NONSTATIC_CONCRETE_METHODS      = db.lookupIntConstant(&quot;InstanceKlass::_misc_has_nonstatic_concrete_methods&quot;).intValue();
 137     MISC_DECLARES_NONSTATIC_CONCRETE_METHODS = db.lookupIntConstant(&quot;InstanceKlass::_misc_declares_nonstatic_concrete_methods&quot;).intValue();
 138     MISC_HAS_BEEN_REDEFINED           = db.lookupIntConstant(&quot;InstanceKlass::_misc_has_been_redefined&quot;).intValue();
 139     MISC_HAS_PASSED_FINGERPRINT_CHECK = db.lookupIntConstant(&quot;InstanceKlass::_misc_has_passed_fingerprint_check&quot;).intValue();
 140     MISC_IS_SCRATCH_CLASS             = db.lookupIntConstant(&quot;InstanceKlass::_misc_is_scratch_class&quot;).intValue();
 141     MISC_IS_SHARED_BOOT_CLASS         = db.lookupIntConstant(&quot;InstanceKlass::_misc_is_shared_boot_class&quot;).intValue();
 142     MISC_IS_SHARED_PLATFORM_CLASS     = db.lookupIntConstant(&quot;InstanceKlass::_misc_is_shared_platform_class&quot;).intValue();
 143     MISC_IS_SHARED_APP_CLASS          = db.lookupIntConstant(&quot;InstanceKlass::_misc_is_shared_app_class&quot;).intValue();
 144   }
 145 
 146   public InstanceKlass(Address addr) {
 147     super(addr);
<span class="line-added"> 148 </span>
<span class="line-added"> 149     // If the class hasn&#39;t yet reached the &quot;loaded&quot; init state, then don&#39;t go any further</span>
<span class="line-added"> 150     // or we&#39;ll run into problems trying to look at fields that are not yet setup.</span>
<span class="line-added"> 151     // Attempted lookups of this InstanceKlass via ClassLoaderDataGraph, ClassLoaderData,</span>
<span class="line-added"> 152     // and Dictionary will all refuse to return it. The main purpose of allowing this</span>
<span class="line-added"> 153     // InstanceKlass to initialize is so ClassLoaderData.getKlasses() will succeed, allowing</span>
<span class="line-added"> 154     // ClassLoaderData.classesDo() to iterate over all Klasses (skipping those that are</span>
<span class="line-added"> 155     // not yet fully loaded).</span>
<span class="line-added"> 156     if (!isLoaded()) {</span>
<span class="line-added"> 157         return;</span>
<span class="line-added"> 158     }</span>
<span class="line-added"> 159 </span>
 160     if (getJavaFieldsCount() != getAllFieldsCount()) {
 161       // Exercise the injected field logic
 162       for (int i = getJavaFieldsCount(); i &lt; getAllFieldsCount(); i++) {
 163         getFieldName(i);
 164         getFieldSignature(i);
 165       }
 166     }
 167   }
 168 
 169   private static MetadataField arrayKlasses;
 170   private static AddressField  methods;
 171   private static AddressField  defaultMethods;
 172   private static AddressField  methodOrdering;
 173   private static AddressField  localInterfaces;
 174   private static AddressField  transitiveInterfaces;
 175   private static AddressField fields;
 176   private static CIntField javaFieldsCount;
 177   private static MetadataField constants;
 178   private static AddressField  sourceDebugExtension;
 179   private static AddressField  innerClasses;
</pre>
</td>
</tr>
</table>
<center><a href="../memory/Dictionary.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../runtime/VM.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>