diff a/src/java.base/unix/native/libjli/java_md.h b/src/java.base/unix/native/libjli/java_md.h
--- a/src/java.base/unix/native/libjli/java_md.h
+++ b/src/java.base/unix/native/libjli/java_md.h
@@ -30,10 +30,12 @@
  * This file contains common defines and includes for unix.
  */
 #include <limits.h>
 #include <unistd.h>
 #include <sys/param.h>
+#include <dlfcn.h>
+#include <pthread.h>
 #include "manifest_info.h"
 #include "jli_util.h"
 
 #define PATH_SEPARATOR       ':'
 #define FILESEP              "/"
@@ -59,11 +61,13 @@
 
 #if defined(_AIX)
 #include "java_md_aix.h"
 #endif
 
-#ifdef MACOSX
-#include "java_md_macosx.h"
-#else  /* !MACOSX */
-#include "java_md_solinux.h"
-#endif /* MACOSX */
+#if defined(MACOSX)
+#include <crt_externs.h>
+#define environ (*_NSGetEnviron())
+#else
+extern char **environ;
+#endif
+
 #endif /* JAVA_MD_H */
