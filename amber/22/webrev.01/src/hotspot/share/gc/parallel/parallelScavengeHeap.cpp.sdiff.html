<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/gc/parallel/parallelScavengeHeap.cpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../g1/heapRegion.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../shared/gc_globals.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/parallel/parallelScavengeHeap.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 
 25 #include &quot;precompiled.hpp&quot;
 26 #include &quot;code/codeCache.hpp&quot;
 27 #include &quot;gc/parallel/parallelArguments.hpp&quot;
 28 #include &quot;gc/parallel/objectStartArray.inline.hpp&quot;
 29 #include &quot;gc/parallel/parallelScavengeHeap.inline.hpp&quot;
 30 #include &quot;gc/parallel/psAdaptiveSizePolicy.hpp&quot;
 31 #include &quot;gc/parallel/psMemoryPool.hpp&quot;
 32 #include &quot;gc/parallel/psParallelCompact.inline.hpp&quot;
 33 #include &quot;gc/parallel/psPromotionManager.hpp&quot;
 34 #include &quot;gc/parallel/psScavenge.hpp&quot;
 35 #include &quot;gc/parallel/psVMOperations.hpp&quot;
 36 #include &quot;gc/shared/gcHeapSummary.hpp&quot;
 37 #include &quot;gc/shared/gcLocker.hpp&quot;
 38 #include &quot;gc/shared/gcWhen.hpp&quot;
 39 #include &quot;gc/shared/genArguments.hpp&quot;

 40 #include &quot;gc/shared/locationPrinter.inline.hpp&quot;
 41 #include &quot;gc/shared/scavengableNMethods.hpp&quot;
 42 #include &quot;logging/log.hpp&quot;
 43 #include &quot;memory/iterator.hpp&quot;
 44 #include &quot;memory/metaspaceCounters.hpp&quot;
 45 #include &quot;memory/universe.hpp&quot;
 46 #include &quot;oops/oop.inline.hpp&quot;
 47 #include &quot;runtime/handles.inline.hpp&quot;
 48 #include &quot;runtime/java.hpp&quot;
 49 #include &quot;runtime/vmThread.hpp&quot;
 50 #include &quot;services/memoryManager.hpp&quot;
 51 #include &quot;services/memTracker.hpp&quot;
 52 #include &quot;utilities/macros.hpp&quot;
 53 #include &quot;utilities/vmError.hpp&quot;
 54 
 55 PSYoungGen*  ParallelScavengeHeap::_young_gen = NULL;
 56 PSOldGen*    ParallelScavengeHeap::_old_gen = NULL;
 57 PSAdaptiveSizePolicy* ParallelScavengeHeap::_size_policy = NULL;
 58 PSGCAdaptivePolicyCounters* ParallelScavengeHeap::_gc_policy_counters = NULL;
 59 
</pre>
<hr />
<pre>
117                              max_gc_pause_sec,
118                              max_gc_minor_pause_sec,
119                              GCTimeRatio
120                              );
121 
122   assert(ParallelArguments::is_heterogeneous_heap() ||
123          (old_gen()-&gt;virtual_space()-&gt;high_boundary() ==
124           young_gen()-&gt;virtual_space()-&gt;low_boundary()),
125          &quot;Boundaries must meet&quot;);
126   // initialize the policy counters - 2 collectors, 2 generations
127   _gc_policy_counters =
128     new PSGCAdaptivePolicyCounters(&quot;ParScav:MSC&quot;, 2, 2, _size_policy);
129 
130   if (!PSParallelCompact::initialize()) {
131     return JNI_ENOMEM;
132   }
133 
134   // Set up WorkGang
135   _workers.initialize_workers();
136 


137   return JNI_OK;
138 }
139 
140 void ParallelScavengeHeap::initialize_serviceability() {
141 
142   _eden_pool = new EdenMutableSpacePool(_young_gen,
143                                         _young_gen-&gt;eden_space(),
144                                         &quot;PS Eden Space&quot;,
145                                         false /* support_usage_threshold */);
146 
147   _survivor_pool = new SurvivorMutableSpacePool(_young_gen,
148                                                 &quot;PS Survivor Space&quot;,
149                                                 false /* support_usage_threshold */);
150 
151   _old_pool = new PSGenerationPool(_old_gen,
152                                    &quot;PS Old Gen&quot;,
153                                    true /* support_usage_threshold */);
154 
155   _young_manager = new GCMemoryManager(&quot;PS Scavenge&quot;, &quot;end of minor GC&quot;);
156   _old_manager = new GCMemoryManager(&quot;PS MarkSweep&quot;, &quot;end of major GC&quot;);
</pre>
</td>
<td>
<hr />
<pre>
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 
 25 #include &quot;precompiled.hpp&quot;
 26 #include &quot;code/codeCache.hpp&quot;
 27 #include &quot;gc/parallel/parallelArguments.hpp&quot;
 28 #include &quot;gc/parallel/objectStartArray.inline.hpp&quot;
 29 #include &quot;gc/parallel/parallelScavengeHeap.inline.hpp&quot;
 30 #include &quot;gc/parallel/psAdaptiveSizePolicy.hpp&quot;
 31 #include &quot;gc/parallel/psMemoryPool.hpp&quot;
 32 #include &quot;gc/parallel/psParallelCompact.inline.hpp&quot;
 33 #include &quot;gc/parallel/psPromotionManager.hpp&quot;
 34 #include &quot;gc/parallel/psScavenge.hpp&quot;
 35 #include &quot;gc/parallel/psVMOperations.hpp&quot;
 36 #include &quot;gc/shared/gcHeapSummary.hpp&quot;
 37 #include &quot;gc/shared/gcLocker.hpp&quot;
 38 #include &quot;gc/shared/gcWhen.hpp&quot;
 39 #include &quot;gc/shared/genArguments.hpp&quot;
<span class="line-added"> 40 #include &quot;gc/shared/gcInitLogger.hpp&quot;</span>
 41 #include &quot;gc/shared/locationPrinter.inline.hpp&quot;
 42 #include &quot;gc/shared/scavengableNMethods.hpp&quot;
 43 #include &quot;logging/log.hpp&quot;
 44 #include &quot;memory/iterator.hpp&quot;
 45 #include &quot;memory/metaspaceCounters.hpp&quot;
 46 #include &quot;memory/universe.hpp&quot;
 47 #include &quot;oops/oop.inline.hpp&quot;
 48 #include &quot;runtime/handles.inline.hpp&quot;
 49 #include &quot;runtime/java.hpp&quot;
 50 #include &quot;runtime/vmThread.hpp&quot;
 51 #include &quot;services/memoryManager.hpp&quot;
 52 #include &quot;services/memTracker.hpp&quot;
 53 #include &quot;utilities/macros.hpp&quot;
 54 #include &quot;utilities/vmError.hpp&quot;
 55 
 56 PSYoungGen*  ParallelScavengeHeap::_young_gen = NULL;
 57 PSOldGen*    ParallelScavengeHeap::_old_gen = NULL;
 58 PSAdaptiveSizePolicy* ParallelScavengeHeap::_size_policy = NULL;
 59 PSGCAdaptivePolicyCounters* ParallelScavengeHeap::_gc_policy_counters = NULL;
 60 
</pre>
<hr />
<pre>
118                              max_gc_pause_sec,
119                              max_gc_minor_pause_sec,
120                              GCTimeRatio
121                              );
122 
123   assert(ParallelArguments::is_heterogeneous_heap() ||
124          (old_gen()-&gt;virtual_space()-&gt;high_boundary() ==
125           young_gen()-&gt;virtual_space()-&gt;low_boundary()),
126          &quot;Boundaries must meet&quot;);
127   // initialize the policy counters - 2 collectors, 2 generations
128   _gc_policy_counters =
129     new PSGCAdaptivePolicyCounters(&quot;ParScav:MSC&quot;, 2, 2, _size_policy);
130 
131   if (!PSParallelCompact::initialize()) {
132     return JNI_ENOMEM;
133   }
134 
135   // Set up WorkGang
136   _workers.initialize_workers();
137 
<span class="line-added">138   GCInitLogger::print();</span>
<span class="line-added">139 </span>
140   return JNI_OK;
141 }
142 
143 void ParallelScavengeHeap::initialize_serviceability() {
144 
145   _eden_pool = new EdenMutableSpacePool(_young_gen,
146                                         _young_gen-&gt;eden_space(),
147                                         &quot;PS Eden Space&quot;,
148                                         false /* support_usage_threshold */);
149 
150   _survivor_pool = new SurvivorMutableSpacePool(_young_gen,
151                                                 &quot;PS Survivor Space&quot;,
152                                                 false /* support_usage_threshold */);
153 
154   _old_pool = new PSGenerationPool(_old_gen,
155                                    &quot;PS Old Gen&quot;,
156                                    true /* support_usage_threshold */);
157 
158   _young_manager = new GCMemoryManager(&quot;PS Scavenge&quot;, &quot;end of minor GC&quot;);
159   _old_manager = new GCMemoryManager(&quot;PS MarkSweep&quot;, &quot;end of major GC&quot;);
</pre>
</td>
</tr>
</table>
<center><a href="../g1/heapRegion.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../shared/gc_globals.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>