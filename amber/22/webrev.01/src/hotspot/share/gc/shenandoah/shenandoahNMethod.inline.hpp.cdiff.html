<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/gc/shenandoah/shenandoahNMethod.inline.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="shenandoahNMethod.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="shenandoahPhaseTimings.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shenandoah/shenandoahNMethod.inline.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 122,37 ***</span>
  
  ShenandoahNMethod** ShenandoahNMethodList::list() const {
    return _list;
  }
  
<span class="line-removed">- template&lt;bool CSET_FILTER&gt;</span>
<span class="line-removed">- void ShenandoahNMethodTableSnapshot::parallel_blobs_do(CodeBlobClosure *f) {</span>
<span class="line-removed">-   size_t stride = 256; // educated guess</span>
<span class="line-removed">- </span>
<span class="line-removed">-   ShenandoahNMethod** const list = _list-&gt;list();</span>
<span class="line-removed">- </span>
<span class="line-removed">-   size_t max = (size_t)_limit;</span>
<span class="line-removed">-   while (_claimed &lt; max) {</span>
<span class="line-removed">-     size_t cur = Atomic::fetch_and_add(&amp;_claimed, stride);</span>
<span class="line-removed">-     size_t start = cur;</span>
<span class="line-removed">-     size_t end = MIN2(cur + stride, max);</span>
<span class="line-removed">-     if (start &gt;= max) break;</span>
<span class="line-removed">- </span>
<span class="line-removed">-     for (size_t idx = start; idx &lt; end; idx++) {</span>
<span class="line-removed">-       ShenandoahNMethod* nmr = list[idx];</span>
<span class="line-removed">-       assert(nmr != NULL, &quot;Sanity&quot;);</span>
<span class="line-removed">-       if (nmr-&gt;is_unregistered()) {</span>
<span class="line-removed">-         continue;</span>
<span class="line-removed">-       }</span>
<span class="line-removed">- </span>
<span class="line-removed">-       nmr-&gt;assert_alive_and_correct();</span>
<span class="line-removed">- </span>
<span class="line-removed">-       if (CSET_FILTER &amp;&amp; !nmr-&gt;has_cset_oops(_heap)) {</span>
<span class="line-removed">-         continue;</span>
<span class="line-removed">-       }</span>
<span class="line-removed">- </span>
<span class="line-removed">-       f-&gt;do_code_blob(nmr-&gt;nm());</span>
<span class="line-removed">-     }</span>
<span class="line-removed">-   }</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  #endif // SHARE_GC_SHENANDOAH_SHENANDOAHNMETHOD_INLINE_HPP
<span class="line-new-header">--- 122,6 ---</span>
</pre>
<center><a href="shenandoahNMethod.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="shenandoahPhaseTimings.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>