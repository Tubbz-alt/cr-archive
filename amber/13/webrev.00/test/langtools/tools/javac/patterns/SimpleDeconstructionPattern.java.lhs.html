<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames test/langtools/tools/javac/patterns/SimpleDeconstructionPattern.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
    <script type="text/javascript" src="../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /**
  2  * @test
<a name="1" id="anc1"></a>
  3  * @compile --enable-preview -source ${jdk.version} SimpleDeconstructionPattern.java
  4  * @run main/othervm --enable-preview SimpleDeconstructionPattern
  5  */
  6 
<a name="2" id="anc2"></a>




  7 public class SimpleDeconstructionPattern {
  8 
  9     public static void main(String... args) throws Throwable {
 10 //        if (!test1(new P(42))) {
 11 //            throw new IllegalStateException();
 12 //        }
 13 //        if (test1(new P(41))) {
 14 //            throw new IllegalStateException();
 15 //        }
 16         if (!test2(new P(42))) {
 17             throw new IllegalStateException();
 18         }
 19         if (test2(new P(41))) {
 20             throw new IllegalStateException();
 21         }
<a name="3" id="anc3"></a>





 22 //        if (!test3(new P2(new P(42), &quot;&quot;))) {
 23 //            throw new IllegalStateException();
 24 //        }
 25 //        if (test3(new P2(new P(41), &quot;&quot;))) {
 26 //            throw new IllegalStateException();
 27 //        }
 28 //        if (test3(new P2(new P(42), &quot;a&quot;))) {
 29 //            throw new IllegalStateException();
 30 //        }
 31         if (!test4(new P2(new P(42), &quot;&quot;))) {
 32             throw new IllegalStateException();
 33         }
 34         if (test4(new P2(new P(41), &quot;&quot;))) {
 35             throw new IllegalStateException();
 36         }
 37         if (test4(new P2(new P(42), &quot;a&quot;))) {
 38             throw new IllegalStateException();
 39         }
 40         if (!test5(new P(42))) {
 41             throw new IllegalStateException();
 42         }
 43         if (test5(new P(41))) {
 44             throw new IllegalStateException();
 45         }
<a name="4" id="anc4"></a><span class="line-modified"> 46         if (!test6(new P(42))) {</span>
<span class="line-modified"> 47             throw new IllegalStateException();</span>
<span class="line-modified"> 48         }</span>
<span class="line-modified"> 49         if (!test6(new P(41))) {</span>
<span class="line-modified"> 50             throw new IllegalStateException();</span>
<span class="line-modified"> 51         }</span>
 52 //        if (!((new BaseUse(new BaseSubclass(0))) instanceof BaseUse(BaseSubclass(0)))) {
 53 //            throw new IllegalStateException();
 54 //        }
 55         if (!test7(new P3(&quot;&quot;))) {
 56             throw new IllegalStateException();
 57         }
 58         if (test7(new P3(&quot;a&quot;))) {
 59             throw new IllegalStateException();
 60         }
<a name="5" id="anc5"></a>





 61         if (test8(new P4(&quot;&quot;))) {
 62             throw new IllegalStateException();
 63         }
 64         if (!test8(new P4(new P3(&quot;&quot;)))) {
 65             throw new IllegalStateException();
 66         }
<a name="6" id="anc6"></a>


 67         if (test8(new P4(new P3(&quot;a&quot;)))) {
 68             throw new IllegalStateException();
 69         }
<a name="7" id="anc7"></a>


















































 70     }
 71 
 72 //    private static boolean test1(Object o) throws Throwable {
 73 //        return o instanceof P(42);
 74 //    }
 75 //
 76     private static void exp(Object o) throws Throwable {
 77         if (o instanceof P(var i)) {
 78             System.err.println(&quot;i=&quot; + i);
 79         }
 80     }
 81 
 82     private static boolean test2(Object o) throws Throwable {
 83         return o instanceof P(var i) &amp;&amp; i == 42;
 84     }
 85 
<a name="8" id="anc8"></a>



 86 //    private static boolean test3(Object o) throws Throwable {
 87 //        return o instanceof P2(P(42), &quot;&quot;);
 88 //    }
 89 //
 90     private static boolean test4(Object o) throws Throwable {
 91         return o instanceof P2(P(var i), var s) &amp;&amp; i == 42 &amp;&amp; &quot;&quot;.equals(s);
 92     }
 93 
 94     private static boolean test5(Object o) throws Throwable {
 95         return o instanceof P(var i) &amp;&amp; i == 42;
 96     }
 97 
<a name="9" id="anc9"></a><span class="line-modified"> 98     private static boolean test6(Object o) throws Throwable {</span>
<span class="line-modified"> 99         return o instanceof P(_);</span>
<span class="line-modified">100     }</span>
101 
102     private static boolean test7(Object o) throws Throwable {
103         return o instanceof P3(var s) &amp;&amp; &quot;&quot;.equals(s);
104     }
105 
<a name="10" id="anc10"></a>



106     private static boolean test8(Object o) throws Throwable {
107         return o instanceof P4(P3(var s)) &amp;&amp; &quot;&quot;.equals(s);
108     }
109 
<a name="11" id="anc11"></a>



































110     public record P(int i) {
111     }
112 
113     public record P2(P p, String s) {
114     }
115 
116     public record P3(String s) {
117     }
118 
119     public record P4(Object o) {}
120 
<a name="12" id="anc12"></a>


121     public interface Base {}
122     public record BaseUse(Base b) {}
123     public record BaseSubclass(int i) implements Base {}
<a name="13" id="anc13"></a><span class="line-modified">124 }</span>



<a name="14" id="anc14"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="14" type="hidden" />
</body>
</html>