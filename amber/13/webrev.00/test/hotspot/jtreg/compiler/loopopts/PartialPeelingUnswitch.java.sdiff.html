<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/compiler/loopopts/PartialPeelingUnswitch.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../jvmci/jdk.vm.ci.hotspot.test/src/jdk/vm/ci/hotspot/test/TestTranslatedException.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="superword/Vec_MulAddS2I.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/compiler/loopopts/PartialPeelingUnswitch.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  */
  23 
  24 /*
  25  * @test
<span class="line-modified">  26  * @bug 8233033 8235984</span>
  27  * @summary Tests if partially peeled statements are not executed before the loop predicates by bailing out of loop unswitching.
  28  *








  29  * @run main/othervm -Xbatch
  30  *      -XX:CompileCommand=compileonly,compiler.loopopts.PartialPeelingUnswitch::test*
<span class="line-modified">  31  *      -XX:CompileCommand=dontinline,compiler.loopopts.PartialPeelingUnswitch::dontInline</span>












  32  *      compiler.loopopts.PartialPeelingUnswitch
  33  */
  34 
  35 package compiler.loopopts;
  36 
  37 public class PartialPeelingUnswitch {
  38 
  39     public static int iFld;

  40     public static int x = 42;
  41     public static int y = 31;
  42     public static int z = 22;



  43     public static int[] iArr = new int[10];
  44 
  45     public int test() {
  46         /*
  47          * The inner loop of this test is first partially peeled and then unswitched. An uncommon trap is hit in one
  48          * of the cloned loop predicates for the fast loop (set up at unswitching stage). The only partially peeled
  49          * statement &quot;iFld += 7&quot; was wrongly executed before the predicates (and before the loop itself).
  50          * When hitting the uncommon trap, &quot;iFld &gt;&gt;= 1&quot; was not yet executed. As a result, the interpreter directly
  51          * reexecuted &quot;iFld += 7&quot; again. This resulted in a wrong result for &quot;iFld&quot;. The fix in 8233033 makes peeled
  52          * statements control dependant on the cloned loop predicates such that they are executed after them. However,
  53          * some cases are not handled properly. For now, the new fix in 8235984 just bails out of loop unswitching.
  54          */
  55         iFld = 13;
  56         for (int i = 0; i &lt; 8; i++) {
  57             int j = 10;
  58             while (--j &gt; 0) {
  59                 iFld += -7;
  60                 switch ((i * 5) + 102) {
  61                 case 120:
  62                     break;
</pre>
<hr />
<pre>
 235         for (int i = 0; i &lt; 8; i++) {
 236             int j = 10;
 237             while (--j &gt; 0) {
 238                 iFld += -7;
 239                 iArr[5] = 8;
 240                 switch ((i * 5) + 102) {
 241                 case 120:
 242                     return iFld;
 243                 case 103:
 244                     break;
 245                 case 116:
 246                     break;
 247                 default:
 248                     iFld &gt;&gt;= 1;
 249                 }
 250             }
 251         }
 252         return iFld;
 253     }
 254 
<span class="line-modified"> 255     public static void main(String[] strArr) {</span>
<span class="line-modified"> 256         PartialPeelingUnswitch _instance = new PartialPeelingUnswitch();</span>
<span class="line-modified"> 257         for (int i = 0; i &lt; 2000; i++) {</span>
<span class="line-modified"> 258             int result = _instance.test();</span>
<span class="line-modified"> 259             if (result != -7) {</span>
<span class="line-modified"> 260                 throw new RuntimeException(&quot;Result should always be -7 but was &quot; + result);</span>

















 261             }
 262         }


 263 
<span class="line-removed"> 264         for (int i = 0; i &lt; 2000; i++) {</span>
<span class="line-removed"> 265             int result = _instance.test2();</span>
<span class="line-removed"> 266             check(-1, result);</span>
<span class="line-removed"> 267             check(-7, iFld);</span>
<span class="line-removed"> 268             check(-9, x);</span>
<span class="line-removed"> 269             check(5, y);</span>
<span class="line-removed"> 270             check(5, iArr[5]);</span>
<span class="line-removed"> 271             check(149, iArr[6]);</span>
<span class="line-removed"> 272             check(183, iArr[7]);</span>
 273 
<span class="line-modified"> 274             // Reset fields</span>
<span class="line-modified"> 275             for (int j = 0; j &lt; 10; j++) {</span>
<span class="line-modified"> 276                 iArr[j] = 0;</span>















 277             }
<span class="line-removed"> 278             x = 42;</span>
<span class="line-removed"> 279             y = 31;</span>
 280         }
 281 
<span class="line-modified"> 282         for (int i = 0; i &lt; 2000; i++) {</span>
<span class="line-modified"> 283             _instance.test3();</span>
<span class="line-modified"> 284             _instance.test4();</span>
<span class="line-modified"> 285             _instance.test5();</span>
<span class="line-modified"> 286             _instance.test6();</span>
<span class="line-modified"> 287             _instance.test7();</span>
 288         }
 289 
<span class="line-modified"> 290         for (int i = 0; i &lt; 2000; i++) {</span>
<span class="line-modified"> 291             if (i % 2 == 0) {</span>
<span class="line-modified"> 292                 z = 23;</span>














 293             }
<span class="line-removed"> 294             _instance.test3();</span>
<span class="line-removed"> 295             _instance.test4();</span>
 296         }




 297     }
 298 
<span class="line-modified"> 299     public static void check(int expected, int actual) {</span>
<span class="line-modified"> 300         if (expected != actual) {</span>
<span class="line-modified"> 301             throw new RuntimeException(&quot;Wrong result, expected: &quot; + expected + &quot;, actual: &quot; + actual);</span>



























 302         }

 303     }
 304 
<span class="line-modified"> 305     public void dontInline(int i) { }</span>

























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































 306 }
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  */
  23 
  24 /*
  25  * @test
<span class="line-modified">  26  * @bug 8233033 8235984 8240227</span>
  27  * @summary Tests if partially peeled statements are not executed before the loop predicates by bailing out of loop unswitching.
  28  *
<span class="line-added">  29  * @run main/othervm -Xbatch -XX:LoopStripMiningIter=0</span>
<span class="line-added">  30  *      -XX:CompileCommand=compileonly,compiler.loopopts.PartialPeelingUnswitch::test*</span>
<span class="line-added">  31  *      -XX:CompileCommand=dontinline,compiler.loopopts.PartialPeelingUnswitch::dontInline*</span>
<span class="line-added">  32  *      compiler.loopopts.PartialPeelingUnswitch</span>
<span class="line-added">  33  * @run main/othervm -Xbatch -Xcomp -XX:LoopStripMiningIter=0</span>
<span class="line-added">  34  *      -XX:CompileCommand=compileonly,compiler.loopopts.PartialPeelingUnswitch::test*</span>
<span class="line-added">  35  *      -XX:CompileCommand=dontinline,compiler.loopopts.PartialPeelingUnswitch::dontInline*</span>
<span class="line-added">  36  *      compiler.loopopts.PartialPeelingUnswitch</span>
  37  * @run main/othervm -Xbatch
  38  *      -XX:CompileCommand=compileonly,compiler.loopopts.PartialPeelingUnswitch::test*
<span class="line-modified">  39  *      -XX:CompileCommand=dontinline,compiler.loopopts.PartialPeelingUnswitch::dontInline*</span>
<span class="line-added">  40  *      compiler.loopopts.PartialPeelingUnswitch</span>
<span class="line-added">  41  * @run main/othervm -Xbatch -Xcomp</span>
<span class="line-added">  42  *      -XX:CompileCommand=compileonly,compiler.loopopts.PartialPeelingUnswitch::test*</span>
<span class="line-added">  43  *      -XX:CompileCommand=dontinline,compiler.loopopts.PartialPeelingUnswitch::dontInline*</span>
<span class="line-added">  44  *      compiler.loopopts.PartialPeelingUnswitch</span>
<span class="line-added">  45  * @run main/othervm -Xbatch</span>
<span class="line-added">  46  *      -XX:CompileCommand=compileonly,compiler.loopopts.PartialPeelingUnswitch::*</span>
<span class="line-added">  47  *      -XX:CompileCommand=dontinline,compiler.loopopts.PartialPeelingUnswitch::dontInline*</span>
<span class="line-added">  48  *      compiler.loopopts.PartialPeelingUnswitch</span>
<span class="line-added">  49  * @run main/othervm -Xbatch -Xcomp</span>
<span class="line-added">  50  *      -XX:CompileCommand=compileonly,compiler.loopopts.PartialPeelingUnswitch::*</span>
<span class="line-added">  51  *      -XX:CompileCommand=dontinline,compiler.loopopts.PartialPeelingUnswitch::dontInline*</span>
  52  *      compiler.loopopts.PartialPeelingUnswitch
  53  */
  54 
  55 package compiler.loopopts;
  56 
  57 public class PartialPeelingUnswitch {
  58 
  59     public static int iFld;
<span class="line-added">  60     public static int w = 88;</span>
  61     public static int x = 42;
  62     public static int y = 31;
  63     public static int z = 22;
<span class="line-added">  64     public static int val = 34;</span>
<span class="line-added">  65     public static final int iCon = 20;</span>
<span class="line-added">  66 </span>
  67     public static int[] iArr = new int[10];
  68 
  69     public int test() {
  70         /*
  71          * The inner loop of this test is first partially peeled and then unswitched. An uncommon trap is hit in one
  72          * of the cloned loop predicates for the fast loop (set up at unswitching stage). The only partially peeled
  73          * statement &quot;iFld += 7&quot; was wrongly executed before the predicates (and before the loop itself).
  74          * When hitting the uncommon trap, &quot;iFld &gt;&gt;= 1&quot; was not yet executed. As a result, the interpreter directly
  75          * reexecuted &quot;iFld += 7&quot; again. This resulted in a wrong result for &quot;iFld&quot;. The fix in 8233033 makes peeled
  76          * statements control dependant on the cloned loop predicates such that they are executed after them. However,
  77          * some cases are not handled properly. For now, the new fix in 8235984 just bails out of loop unswitching.
  78          */
  79         iFld = 13;
  80         for (int i = 0; i &lt; 8; i++) {
  81             int j = 10;
  82             while (--j &gt; 0) {
  83                 iFld += -7;
  84                 switch ((i * 5) + 102) {
  85                 case 120:
  86                     break;
</pre>
<hr />
<pre>
 259         for (int i = 0; i &lt; 8; i++) {
 260             int j = 10;
 261             while (--j &gt; 0) {
 262                 iFld += -7;
 263                 iArr[5] = 8;
 264                 switch ((i * 5) + 102) {
 265                 case 120:
 266                     return iFld;
 267                 case 103:
 268                     break;
 269                 case 116:
 270                     break;
 271                 default:
 272                     iFld &gt;&gt;= 1;
 273                 }
 274             }
 275         }
 276         return iFld;
 277     }
 278 
<span class="line-modified"> 279     public int test8() {</span>
<span class="line-modified"> 280 </span>
<span class="line-modified"> 281         iFld = 13;</span>
<span class="line-modified"> 282         for (int i = 0; i &lt; 8; i++) {</span>
<span class="line-modified"> 283             int j = 50;</span>
<span class="line-modified"> 284             while (--j &gt; 0) {</span>
<span class="line-added"> 285                 // All statements before the switch expression are partially peeled</span>
<span class="line-added"> 286                 iFld += -7;</span>
<span class="line-added"> 287                 x = y + iFld;</span>
<span class="line-added"> 288                 y = iArr[5];</span>
<span class="line-added"> 289                 iArr[5] = 5;</span>
<span class="line-added"> 290                 iArr[6] += 23;</span>
<span class="line-added"> 291                 iArr[7] = iArr[8] + iArr[6];</span>
<span class="line-added"> 292                 switch ((val * 5) + 102) {</span>
<span class="line-added"> 293                 case 120:</span>
<span class="line-added"> 294                     break;</span>
<span class="line-added"> 295                 case 103:</span>
<span class="line-added"> 296                     break;</span>
<span class="line-added"> 297                 case 116:</span>
<span class="line-added"> 298                     break;</span>
<span class="line-added"> 299                 default:</span>
<span class="line-added"> 300                     iFld &gt;&gt;= 1;</span>
<span class="line-added"> 301                 }</span>
 302             }
 303         }
<span class="line-added"> 304         return iFld;</span>
<span class="line-added"> 305     }</span>
 306 









 307 
<span class="line-modified"> 308     public int test9() {</span>
<span class="line-modified"> 309         iFld = 13;</span>
<span class="line-modified"> 310         for (int i = 0; i &lt; 8; i++) {</span>
<span class="line-added"> 311             int j = 10;</span>
<span class="line-added"> 312             while (--j &gt; 0) {</span>
<span class="line-added"> 313                 iFld += -7;</span>
<span class="line-added"> 314                 iArr[4] = 8;</span>
<span class="line-added"> 315                 x = iArr[5];</span>
<span class="line-added"> 316                 switch ((i * 5) + 102) {</span>
<span class="line-added"> 317                 case 120:</span>
<span class="line-added"> 318                     return iFld + 1;</span>
<span class="line-added"> 319                 case 103:</span>
<span class="line-added"> 320                     break;</span>
<span class="line-added"> 321                 case 116:</span>
<span class="line-added"> 322                     break;</span>
<span class="line-added"> 323                 default:</span>
<span class="line-added"> 324                     iFld &gt;&gt;= 1;</span>
<span class="line-added"> 325                 }</span>
 326             }


 327         }
 328 
<span class="line-modified"> 329         return iFld;</span>
<span class="line-modified"> 330     }</span>
<span class="line-modified"> 331 </span>
<span class="line-modified"> 332    public int test10() {</span>
<span class="line-modified"> 333         if (z &lt; 34) {</span>
<span class="line-modified"> 334             z = 34;</span>
 335         }
 336 
<span class="line-modified"> 337         iFld = 13;</span>
<span class="line-modified"> 338         for (int i = 0; i &lt; 80; i++) {</span>
<span class="line-modified"> 339             int j = 50;</span>
<span class="line-added"> 340             while (--j &gt; 0) {</span>
<span class="line-added"> 341                 iFld += -7;</span>
<span class="line-added"> 342                 iArr[4] = 8;</span>
<span class="line-added"> 343                 x = iArr[5];</span>
<span class="line-added"> 344                 switch ((i * 5) + 102) {</span>
<span class="line-added"> 345                 case 120:</span>
<span class="line-added"> 346                     break;</span>
<span class="line-added"> 347                 case 103:</span>
<span class="line-added"> 348                     break;</span>
<span class="line-added"> 349                 case 116:</span>
<span class="line-added"> 350                     break;</span>
<span class="line-added"> 351                 default:</span>
<span class="line-added"> 352                     iFld &gt;&gt;= 1;</span>
<span class="line-added"> 353                 }</span>
 354             }


 355         }
<span class="line-added"> 356         if (z == 34) {</span>
<span class="line-added"> 357             x = iArr[6];</span>
<span class="line-added"> 358         }</span>
<span class="line-added"> 359         return iFld;</span>
 360     }
 361 
<span class="line-modified"> 362 </span>
<span class="line-modified"> 363     public int test11Xcomp() {</span>
<span class="line-modified"> 364         if (z &lt; 34) {</span>
<span class="line-added"> 365             z = 34;</span>
<span class="line-added"> 366         }</span>
<span class="line-added"> 367 </span>
<span class="line-added"> 368         iFld = 13;</span>
<span class="line-added"> 369         for (int i = 0; i &lt; 80; i++) {</span>
<span class="line-added"> 370             int j = 50;</span>
<span class="line-added"> 371             while (--j &gt; 0) {</span>
<span class="line-added"> 372                 iFld += -7;</span>
<span class="line-added"> 373                 iArr[4] = 8;</span>
<span class="line-added"> 374                 x = iArr[5];</span>
<span class="line-added"> 375                 switch ((i * 5) + 102) {</span>
<span class="line-added"> 376                 case 120:</span>
<span class="line-added"> 377                     break;</span>
<span class="line-added"> 378                 case 103:</span>
<span class="line-added"> 379                     break;</span>
<span class="line-added"> 380                 case 116:</span>
<span class="line-added"> 381                     break;</span>
<span class="line-added"> 382                 default:</span>
<span class="line-added"> 383                     iFld &gt;&gt;= 1;</span>
<span class="line-added"> 384                 }</span>
<span class="line-added"> 385                 if (z == 34) {</span>
<span class="line-added"> 386                     break;</span>
<span class="line-added"> 387                 }</span>
<span class="line-added"> 388             }</span>
<span class="line-added"> 389         }</span>
<span class="line-added"> 390         if (z == 34) {</span>
<span class="line-added"> 391             x = iArr[6];</span>
 392         }
<span class="line-added"> 393         return iFld;</span>
 394     }
 395 
<span class="line-modified"> 396     // Phi with multiple inputs from same peeled node</span>
<span class="line-added"> 397     public int test12Xcomp() {</span>
<span class="line-added"> 398         if (z &lt; 34) {</span>
<span class="line-added"> 399             z = 34;</span>
<span class="line-added"> 400         }</span>
<span class="line-added"> 401 </span>
<span class="line-added"> 402         iFld = 13;</span>
<span class="line-added"> 403         for (int i = 0; i &lt; 80; i++) {</span>
<span class="line-added"> 404             int j = 50;</span>
<span class="line-added"> 405             while (--j &gt; 0) {</span>
<span class="line-added"> 406                 iFld += -7;</span>
<span class="line-added"> 407                 iArr[4] = 8;</span>
<span class="line-added"> 408                 x = iArr[5];</span>
<span class="line-added"> 409                 switch ((i * 5) + 102) {</span>
<span class="line-added"> 410                 case 120:</span>
<span class="line-added"> 411                     break;</span>
<span class="line-added"> 412                 case 103:</span>
<span class="line-added"> 413                     break;</span>
<span class="line-added"> 414                 case 116:</span>
<span class="line-added"> 415                     return z;</span>
<span class="line-added"> 416                 case 106:</span>
<span class="line-added"> 417                     return y;</span>
<span class="line-added"> 418                 case 111:</span>
<span class="line-added"> 419                     return x;</span>
<span class="line-added"> 420                 default:</span>
<span class="line-added"> 421                     iFld &gt;&gt;= 1;</span>
<span class="line-added"> 422                 }</span>
<span class="line-added"> 423                 w = 45;</span>
<span class="line-added"> 424             }</span>
<span class="line-added"> 425 </span>
<span class="line-added"> 426         }</span>
<span class="line-added"> 427         if (z == 34) {</span>
<span class="line-added"> 428             x = iArr[6];</span>
<span class="line-added"> 429         }</span>
<span class="line-added"> 430         return iFld;</span>
<span class="line-added"> 431     }</span>
<span class="line-added"> 432 </span>
<span class="line-added"> 433     public int test13Xcomp() {</span>
<span class="line-added"> 434         if (z &lt; 34) {</span>
<span class="line-added"> 435             z = 34;</span>
<span class="line-added"> 436         }</span>
<span class="line-added"> 437 </span>
<span class="line-added"> 438         iFld = 13;</span>
<span class="line-added"> 439         for (int i = 0; i &lt; 80; i++) {</span>
<span class="line-added"> 440             int j = 50;</span>
<span class="line-added"> 441             while (--j &gt; 0) {</span>
<span class="line-added"> 442                 iFld += -7;</span>
<span class="line-added"> 443                 iArr[4] = 8;</span>
<span class="line-added"> 444                 x = iArr[5];</span>
<span class="line-added"> 445                 switch ((i * 5) + 102) {</span>
<span class="line-added"> 446                 case 120:</span>
<span class="line-added"> 447                     break;</span>
<span class="line-added"> 448                 case 103:</span>
<span class="line-added"> 449                     break;</span>
<span class="line-added"> 450                 case 116:</span>
<span class="line-added"> 451                     break;</span>
<span class="line-added"> 452                 default:</span>
<span class="line-added"> 453                     iFld &gt;&gt;= 1;</span>
<span class="line-added"> 454                 }</span>
<span class="line-added"> 455                 w = 45;</span>
<span class="line-added"> 456             }</span>
<span class="line-added"> 457 </span>
<span class="line-added"> 458         }</span>
<span class="line-added"> 459         if (z == 34) {</span>
<span class="line-added"> 460             x = iArr[6];</span>
<span class="line-added"> 461         }</span>
<span class="line-added"> 462         return iFld;</span>
<span class="line-added"> 463     }</span>
<span class="line-added"> 464 </span>
<span class="line-added"> 465     // Triggers after peeling with Xcomp</span>
<span class="line-added"> 466     public int test14Peel() {</span>
<span class="line-added"> 467         iFld = 13;</span>
<span class="line-added"> 468         for (int i = 0; i &lt; 8; i++) {</span>
<span class="line-added"> 469             int j = 10;</span>
<span class="line-added"> 470             while (--j &gt; 0) {</span>
<span class="line-added"> 471                 iFld += -7;</span>
<span class="line-added"> 472                 iArr[4] = 8;</span>
<span class="line-added"> 473                 x = iArr[5];</span>
<span class="line-added"> 474                 switch ((i * 5) + 102) {</span>
<span class="line-added"> 475                 case 120:</span>
<span class="line-added"> 476                     return iFld;</span>
<span class="line-added"> 477                 case 103:</span>
<span class="line-added"> 478                     break;</span>
<span class="line-added"> 479                 case 116:</span>
<span class="line-added"> 480                     break;</span>
<span class="line-added"> 481                 default:</span>
<span class="line-added"> 482                     iFld &gt;&gt;= 1;</span>
<span class="line-added"> 483                 }</span>
<span class="line-added"> 484                 iFld = 3;</span>
<span class="line-added"> 485             }</span>
<span class="line-added"> 486         }</span>
<span class="line-added"> 487         y = iArr[4];</span>
<span class="line-added"> 488         x = iArr[6];</span>
<span class="line-added"> 489 </span>
<span class="line-added"> 490         return iFld;</span>
<span class="line-added"> 491     }</span>
<span class="line-added"> 492 </span>
<span class="line-added"> 493 </span>
<span class="line-added"> 494     public int test15earlyCtrl() {</span>
<span class="line-added"> 495         iFld = 13;</span>
<span class="line-added"> 496         if (z &lt; 34) {</span>
<span class="line-added"> 497             z = 34;</span>
<span class="line-added"> 498         }</span>
<span class="line-added"> 499 </span>
<span class="line-added"> 500         for (int i = 0; i &lt; 8; i++) {</span>
<span class="line-added"> 501             int j = 10;</span>
<span class="line-added"> 502             while (--j &gt; 0) {</span>
<span class="line-added"> 503                 iFld += -7;</span>
<span class="line-added"> 504                 iArr[5] = 8;</span>
<span class="line-added"> 505                 x = iArr[6];</span>
<span class="line-added"> 506                 y = x;</span>
<span class="line-added"> 507                 x = iArr[7];</span>
<span class="line-added"> 508                 switch ((i * 5) + 102) {</span>
<span class="line-added"> 509                 case 120:</span>
<span class="line-added"> 510                     return iFld;</span>
<span class="line-added"> 511                 case 103:</span>
<span class="line-added"> 512                     break;</span>
<span class="line-added"> 513                 case 116:</span>
<span class="line-added"> 514                     break;</span>
<span class="line-added"> 515                 default:</span>
<span class="line-added"> 516                     if (iFld == -7) {</span>
<span class="line-added"> 517                         return iFld;</span>
<span class="line-added"> 518                     }</span>
<span class="line-added"> 519                     z = iArr[5];</span>
<span class="line-added"> 520                     iFld &gt;&gt;= 1;</span>
<span class="line-added"> 521                 }</span>
<span class="line-added"> 522             }</span>
<span class="line-added"> 523             if (iFld == 7) {</span>
<span class="line-added"> 524                 iArr[3] = 3;</span>
<span class="line-added"> 525             }</span>
<span class="line-added"> 526             dontInline(7);</span>
<span class="line-added"> 527             iArr[5] = 34;</span>
<span class="line-added"> 528         }</span>
<span class="line-added"> 529         return iFld;</span>
<span class="line-added"> 530     }</span>
<span class="line-added"> 531 </span>
<span class="line-added"> 532     // Load after loop -&gt; LoadI after loop from peeled StoreI</span>
<span class="line-added"> 533     public int test16() {</span>
<span class="line-added"> 534         iFld = 13;</span>
<span class="line-added"> 535         if (z &lt; 34) {</span>
<span class="line-added"> 536             z = 34;</span>
<span class="line-added"> 537         }</span>
<span class="line-added"> 538 </span>
<span class="line-added"> 539         for (int i = 0; i &lt; 8; i++) {</span>
<span class="line-added"> 540             int j = 60;</span>
<span class="line-added"> 541             while (--j &gt; 0) {</span>
<span class="line-added"> 542                 iFld += -7;</span>
<span class="line-added"> 543                 y += iFld + 1;</span>
<span class="line-added"> 544 </span>
<span class="line-added"> 545                 iArr[5] = 8;</span>
<span class="line-added"> 546                 x = iArr[6];</span>
<span class="line-added"> 547                 x = iArr[7];</span>
<span class="line-added"> 548                 switch ((i * 5) + 102) {</span>
<span class="line-added"> 549                 case 120:</span>
<span class="line-added"> 550                     return iFld;</span>
<span class="line-added"> 551                 case 103:</span>
<span class="line-added"> 552                     break;</span>
<span class="line-added"> 553                 case 116:</span>
<span class="line-added"> 554                     break;</span>
<span class="line-added"> 555                 default:</span>
<span class="line-added"> 556                     if (iFld == -7) {</span>
<span class="line-added"> 557                         return iFld;</span>
<span class="line-added"> 558                     }</span>
<span class="line-added"> 559                     z = iArr[5];</span>
<span class="line-added"> 560                     iFld &gt;&gt;= 1;</span>
<span class="line-added"> 561                 }</span>
<span class="line-added"> 562             }</span>
<span class="line-added"> 563             w = iArr[9];</span>
<span class="line-added"> 564             if (iFld == 7) {</span>
<span class="line-added"> 565                 iArr[3] = 3;</span>
<span class="line-added"> 566             }</span>
<span class="line-added"> 567             dontInline(7);</span>
<span class="line-added"> 568             iArr[5] = 34;</span>
<span class="line-added"> 569         }</span>
<span class="line-added"> 570         return iFld;</span>
<span class="line-added"> 571     }</span>
<span class="line-added"> 572 </span>
<span class="line-added"> 573     // Region 13 before return, which region to choose for MergeMem?</span>
<span class="line-added"> 574     public int test17Xcomp() {</span>
<span class="line-added"> 575         A p = dontInlineGetA();</span>
<span class="line-added"> 576         if (z &lt; 34) {</span>
<span class="line-added"> 577             z = 34;</span>
<span class="line-added"> 578         }</span>
<span class="line-added"> 579 </span>
<span class="line-added"> 580         iFld = 13;</span>
<span class="line-added"> 581         for (int i = 0; i &lt; 80; i++) {</span>
<span class="line-added"> 582             int j = 50;</span>
<span class="line-added"> 583             while (--j &gt; 0) {</span>
<span class="line-added"> 584                 iFld += -7;</span>
<span class="line-added"> 585                 iArr[4] = 8;</span>
<span class="line-added"> 586                 x = iArr[5];</span>
<span class="line-added"> 587                 y = p.i;</span>
<span class="line-added"> 588                 switch ((i * 5) + 102) {</span>
<span class="line-added"> 589                 case 120:</span>
<span class="line-added"> 590                     break;</span>
<span class="line-added"> 591                 case 103:</span>
<span class="line-added"> 592                     break;</span>
<span class="line-added"> 593                 case 116:</span>
<span class="line-added"> 594                     return z;</span>
<span class="line-added"> 595                 case 106:</span>
<span class="line-added"> 596                     return y;</span>
<span class="line-added"> 597                 case 111:</span>
<span class="line-added"> 598                     return x;</span>
<span class="line-added"> 599                 default:</span>
<span class="line-added"> 600                     iFld &gt;&gt;= 1;</span>
<span class="line-added"> 601                 }</span>
<span class="line-added"> 602                 w = 45;</span>
<span class="line-added"> 603             }</span>
<span class="line-added"> 604 </span>
<span class="line-added"> 605         }</span>
<span class="line-added"> 606         if (z == 34) {</span>
<span class="line-added"> 607             x = iArr[6];</span>
<span class="line-added"> 608         }</span>
<span class="line-added"> 609         return iFld;</span>
<span class="line-added"> 610     }</span>
<span class="line-added"> 611 </span>
<span class="line-added"> 612     // Region 13 before return, which region to choose for MergeMem?</span>
<span class="line-added"> 613     public int test18Xcomp() {</span>
<span class="line-added"> 614         if (z &lt; 34) {</span>
<span class="line-added"> 615             z = 34;</span>
<span class="line-added"> 616         }</span>
<span class="line-added"> 617 </span>
<span class="line-added"> 618         iFld = 13;</span>
<span class="line-added"> 619         for (int i = 0; i &lt; 80; i++) {</span>
<span class="line-added"> 620             int j = 50;</span>
<span class="line-added"> 621             while (--j &gt; 0) {</span>
<span class="line-added"> 622                 iFld += -7;</span>
<span class="line-added"> 623                 iArr[4] = 8;</span>
<span class="line-added"> 624                 x = iArr[5];</span>
<span class="line-added"> 625                 y = 85;</span>
<span class="line-added"> 626                 switch ((i * 5) + 102) {</span>
<span class="line-added"> 627                 case 120:</span>
<span class="line-added"> 628                     break;</span>
<span class="line-added"> 629                 case 103:</span>
<span class="line-added"> 630                     break;</span>
<span class="line-added"> 631                 case 116:</span>
<span class="line-added"> 632                     return z;</span>
<span class="line-added"> 633                 case 106:</span>
<span class="line-added"> 634                     if (z == 34) {</span>
<span class="line-added"> 635                         x = iArr[7];</span>
<span class="line-added"> 636                     }</span>
<span class="line-added"> 637                     return y;</span>
<span class="line-added"> 638                 case 111:</span>
<span class="line-added"> 639                     return x;</span>
<span class="line-added"> 640                 default:</span>
<span class="line-added"> 641                     iFld &gt;&gt;= 1;</span>
<span class="line-added"> 642                 }</span>
<span class="line-added"> 643                 w = 45;</span>
<span class="line-added"> 644             }</span>
<span class="line-added"> 645 </span>
<span class="line-added"> 646         }</span>
<span class="line-added"> 647 </span>
<span class="line-added"> 648         if (z == 34) {</span>
<span class="line-added"> 649             x = iArr[6];</span>
<span class="line-added"> 650         }</span>
<span class="line-added"> 651         return iFld;</span>
<span class="line-added"> 652     }</span>
<span class="line-added"> 653 </span>
<span class="line-added"> 654     public int test19Xcomp() {</span>
<span class="line-added"> 655         if (z &lt; 34) {</span>
<span class="line-added"> 656             z = 34;</span>
<span class="line-added"> 657         }</span>
<span class="line-added"> 658 </span>
<span class="line-added"> 659         iFld = 13;</span>
<span class="line-added"> 660         for (int i = 0; i &lt; 80; i++) {</span>
<span class="line-added"> 661             int j = 50;</span>
<span class="line-added"> 662             while (--j &gt; 0) {</span>
<span class="line-added"> 663                 iFld += -7;</span>
<span class="line-added"> 664                 iArr[4] = 8;</span>
<span class="line-added"> 665                 x = iArr[5]+ iArr[6];</span>
<span class="line-added"> 666                 y = 85;</span>
<span class="line-added"> 667                 switch ((i * 5) + 102) {</span>
<span class="line-added"> 668                 case 120:</span>
<span class="line-added"> 669                     break;</span>
<span class="line-added"> 670                 case 103:</span>
<span class="line-added"> 671                     break;</span>
<span class="line-added"> 672                 case 116:</span>
<span class="line-added"> 673                     break;</span>
<span class="line-added"> 674                 case 106:</span>
<span class="line-added"> 675                     if (z == 34) {</span>
<span class="line-added"> 676                         x = iArr[7];</span>
<span class="line-added"> 677                     }</span>
<span class="line-added"> 678                     return y;</span>
<span class="line-added"> 679                 case 111:</span>
<span class="line-added"> 680                     return x;</span>
<span class="line-added"> 681                 default:</span>
<span class="line-added"> 682                     iFld &gt;&gt;= 1;</span>
<span class="line-added"> 683                 }</span>
<span class="line-added"> 684                 w = 45;</span>
<span class="line-added"> 685             }</span>
<span class="line-added"> 686         }</span>
<span class="line-added"> 687 </span>
<span class="line-added"> 688         if (z == 34) {</span>
<span class="line-added"> 689             iArr[7] = 34;</span>
<span class="line-added"> 690         }</span>
<span class="line-added"> 691         return iFld;</span>
<span class="line-added"> 692     }</span>
<span class="line-added"> 693 </span>
<span class="line-added"> 694     public int test20() {</span>
<span class="line-added"> 695         if (z &lt; 34) {</span>
<span class="line-added"> 696             z = 34;</span>
<span class="line-added"> 697         }</span>
<span class="line-added"> 698 </span>
<span class="line-added"> 699         iFld = 13;</span>
<span class="line-added"> 700         for (int i = 0; i &lt; 80; i++) {</span>
<span class="line-added"> 701             int j = 50;</span>
<span class="line-added"> 702             while (--j &gt; 0) {</span>
<span class="line-added"> 703                 iFld += -7;</span>
<span class="line-added"> 704                 iArr[4] = 8;</span>
<span class="line-added"> 705                 x = iArr[5];</span>
<span class="line-added"> 706                 switch ((i * 5) + 102) {</span>
<span class="line-added"> 707                 case 120:</span>
<span class="line-added"> 708                     break;</span>
<span class="line-added"> 709                 case 103:</span>
<span class="line-added"> 710                     break;</span>
<span class="line-added"> 711                 case 116:</span>
<span class="line-added"> 712                     break;</span>
<span class="line-added"> 713                 default:</span>
<span class="line-added"> 714                     iFld &gt;&gt;= 1;</span>
<span class="line-added"> 715                 }</span>
<span class="line-added"> 716             }</span>
<span class="line-added"> 717             x = iArr[6];</span>
<span class="line-added"> 718         }</span>
<span class="line-added"> 719         if (z == 34) {</span>
<span class="line-added"> 720             x = iArr[7];</span>
<span class="line-added"> 721         }</span>
<span class="line-added"> 722         return iFld;</span>
<span class="line-added"> 723     }</span>
<span class="line-added"> 724 </span>
<span class="line-added"> 725 </span>
<span class="line-added"> 726     public int test21() {</span>
<span class="line-added"> 727         if (z &lt; 34) {</span>
<span class="line-added"> 728             z = 34;</span>
<span class="line-added"> 729         }</span>
<span class="line-added"> 730 </span>
<span class="line-added"> 731         iFld = 13;</span>
<span class="line-added"> 732         for (int i = 0; i &lt; 80; i++) {</span>
<span class="line-added"> 733             int j = 50;</span>
<span class="line-added"> 734             while (--j &gt; 0) {</span>
<span class="line-added"> 735                 iFld += -7;</span>
<span class="line-added"> 736                 iArr[4] = 8;</span>
<span class="line-added"> 737                 x = iArr[5];</span>
<span class="line-added"> 738                 switch ((i * 5) + 102) {</span>
<span class="line-added"> 739                 case 120:</span>
<span class="line-added"> 740                     break;</span>
<span class="line-added"> 741                 case 103:</span>
<span class="line-added"> 742                     break;</span>
<span class="line-added"> 743                 case 116:</span>
<span class="line-added"> 744                     break;</span>
<span class="line-added"> 745                 default:</span>
<span class="line-added"> 746                     iFld &gt;&gt;= 1;</span>
<span class="line-added"> 747                 }</span>
<span class="line-added"> 748             }</span>
<span class="line-added"> 749             x = iArr[6];</span>
<span class="line-added"> 750         }</span>
<span class="line-added"> 751         if (z == 34) {</span>
<span class="line-added"> 752             y = iArr[7];</span>
<span class="line-added"> 753         }</span>
<span class="line-added"> 754         return iFld;</span>
<span class="line-added"> 755     }</span>
<span class="line-added"> 756 </span>
<span class="line-added"> 757     public int testNoOuter() {</span>
<span class="line-added"> 758         iFld = 13;</span>
<span class="line-added"> 759         int j = 10;</span>
<span class="line-added"> 760         while (--j &gt; 0) {</span>
<span class="line-added"> 761             iFld += -7;</span>
<span class="line-added"> 762             switch ((iCon * 5) + 102) {</span>
<span class="line-added"> 763             case 120:</span>
<span class="line-added"> 764                 break;</span>
<span class="line-added"> 765             case 103:</span>
<span class="line-added"> 766                 break;</span>
<span class="line-added"> 767             case 116:</span>
<span class="line-added"> 768                 break;</span>
<span class="line-added"> 769             default:</span>
<span class="line-added"> 770                 iFld &gt;&gt;= 1;</span>
<span class="line-added"> 771             }</span>
<span class="line-added"> 772         }</span>
<span class="line-added"> 773         return iFld;</span>
<span class="line-added"> 774     }</span>
<span class="line-added"> 775 </span>
<span class="line-added"> 776     public int test2NoOuter() {</span>
<span class="line-added"> 777         /*</span>
<span class="line-added"> 778          * Same nested loop structure as in test() but with more statements that are partially peeled from the inner loop.</span>
<span class="line-added"> 779          * Afterwards the inner loop is unswitched.</span>
<span class="line-added"> 780          */</span>
<span class="line-added"> 781         iFld = 13;</span>
<span class="line-added"> 782         int k = 0;</span>
<span class="line-added"> 783         int j = 10;</span>
<span class="line-added"> 784         while (--j &gt; 0) {</span>
<span class="line-added"> 785             // All statements before the switch expression are partially peeled</span>
<span class="line-added"> 786             iFld += -7;</span>
<span class="line-added"> 787             x = y + iFld;</span>
<span class="line-added"> 788             y = iArr[5];</span>
<span class="line-added"> 789             k = 6;</span>
<span class="line-added"> 790             iArr[5] = 5;</span>
<span class="line-added"> 791             iArr[6] += 23;</span>
<span class="line-added"> 792             iArr[7] = iArr[8] + iArr[6];</span>
<span class="line-added"> 793             iArr[j] = 34;</span>
<span class="line-added"> 794             switch ((iCon * 5) + 102) {</span>
<span class="line-added"> 795             case 120:</span>
<span class="line-added"> 796                 break;</span>
<span class="line-added"> 797             case 103:</span>
<span class="line-added"> 798                 break;</span>
<span class="line-added"> 799             case 116:</span>
<span class="line-added"> 800                 break;</span>
<span class="line-added"> 801             default:</span>
<span class="line-added"> 802                 iFld &gt;&gt;= 1;</span>
<span class="line-added"> 803             }</span>
<span class="line-added"> 804         }</span>
<span class="line-added"> 805         return iFld + k;</span>
<span class="line-added"> 806     }</span>
<span class="line-added"> 807 </span>
<span class="line-added"> 808     public int test3NoOuter() {</span>
<span class="line-added"> 809         iFld = 13;</span>
<span class="line-added"> 810         if (z &lt; 34) {</span>
<span class="line-added"> 811             z = 34;</span>
<span class="line-added"> 812         }</span>
<span class="line-added"> 813 </span>
<span class="line-added"> 814         int j = 10;</span>
<span class="line-added"> 815         while (--j &gt; 0) {</span>
<span class="line-added"> 816             iFld += -7;</span>
<span class="line-added"> 817             iArr[5] = 8;</span>
<span class="line-added"> 818             x = iArr[6];</span>
<span class="line-added"> 819             y = x;</span>
<span class="line-added"> 820             for (int k = 50; k &lt; 51; k++) {</span>
<span class="line-added"> 821                 x = iArr[7];</span>
<span class="line-added"> 822             }</span>
<span class="line-added"> 823             switch ((iCon * 5) + 102) {</span>
<span class="line-added"> 824             case 120:</span>
<span class="line-added"> 825                 return iFld;</span>
<span class="line-added"> 826             case 103:</span>
<span class="line-added"> 827                 break;</span>
<span class="line-added"> 828             case 116:</span>
<span class="line-added"> 829                 break;</span>
<span class="line-added"> 830             default:</span>
<span class="line-added"> 831                 if (iFld == -7) {</span>
<span class="line-added"> 832                     return iFld;</span>
<span class="line-added"> 833                 }</span>
<span class="line-added"> 834                 z = iArr[5];</span>
<span class="line-added"> 835                 iFld &gt;&gt;= 1;</span>
<span class="line-added"> 836             }</span>
<span class="line-added"> 837         }</span>
<span class="line-added"> 838         iArr[5] = 34;</span>
<span class="line-added"> 839         dontInline(iArr[5]);</span>
<span class="line-added"> 840         return iFld;</span>
<span class="line-added"> 841     }</span>
<span class="line-added"> 842 </span>
<span class="line-added"> 843     public int test4NoOuter() {</span>
<span class="line-added"> 844         iFld = 13;</span>
<span class="line-added"> 845         if (z &lt; 34) {</span>
<span class="line-added"> 846             z = 34;</span>
<span class="line-added"> 847         }</span>
<span class="line-added"> 848 </span>
<span class="line-added"> 849         int j = 10;</span>
<span class="line-added"> 850         while (--j &gt; 0) {</span>
<span class="line-added"> 851             iFld += -7;</span>
<span class="line-added"> 852             iArr[5] = 8;</span>
<span class="line-added"> 853             x = iArr[6];</span>
<span class="line-added"> 854             y = x;</span>
<span class="line-added"> 855             for (int k = 50; k &lt; 51; k++) {</span>
<span class="line-added"> 856                 x = iArr[7];</span>
<span class="line-added"> 857             }</span>
<span class="line-added"> 858             switch ((iCon * 5) + 102) {</span>
<span class="line-added"> 859             case 120:</span>
<span class="line-added"> 860                 return iFld;</span>
<span class="line-added"> 861             case 103:</span>
<span class="line-added"> 862                 break;</span>
<span class="line-added"> 863             case 116:</span>
<span class="line-added"> 864                 break;</span>
<span class="line-added"> 865             default:</span>
<span class="line-added"> 866                 if (iFld == -7) {</span>
<span class="line-added"> 867                     return iFld;</span>
<span class="line-added"> 868                 }</span>
<span class="line-added"> 869                 z = iArr[5];</span>
<span class="line-added"> 870                 iFld &gt;&gt;= 1;</span>
<span class="line-added"> 871             }</span>
<span class="line-added"> 872         }</span>
<span class="line-added"> 873         iArr[5] = 34;</span>
<span class="line-added"> 874         return iFld;</span>
<span class="line-added"> 875     }</span>
<span class="line-added"> 876 </span>
<span class="line-added"> 877     public int test5NoOuter() {</span>
<span class="line-added"> 878         iFld = 13;</span>
<span class="line-added"> 879         int j = 10;</span>
<span class="line-added"> 880         while (--j &gt; 0) {</span>
<span class="line-added"> 881             iFld += -7;</span>
<span class="line-added"> 882             iArr[5] = 8;</span>
<span class="line-added"> 883             x = iArr[6];</span>
<span class="line-added"> 884             y = x;</span>
<span class="line-added"> 885             for (int k = 50; k &lt; 51; k++) {</span>
<span class="line-added"> 886                 x = iArr[7];</span>
<span class="line-added"> 887             }</span>
<span class="line-added"> 888             switch ((iCon * 5) + 102) {</span>
<span class="line-added"> 889             case 120:</span>
<span class="line-added"> 890                 return iFld;</span>
<span class="line-added"> 891             case 103:</span>
<span class="line-added"> 892                 break;</span>
<span class="line-added"> 893             case 116:</span>
<span class="line-added"> 894                 break;</span>
<span class="line-added"> 895             default:</span>
<span class="line-added"> 896                 iFld &gt;&gt;= 1;</span>
<span class="line-added"> 897             }</span>
<span class="line-added"> 898         }</span>
<span class="line-added"> 899         return iFld;</span>
<span class="line-added"> 900     }</span>
<span class="line-added"> 901 </span>
<span class="line-added"> 902     public int test6NoOuter() {</span>
<span class="line-added"> 903         iFld = 13;</span>
<span class="line-added"> 904         int j = 10;</span>
<span class="line-added"> 905         while (--j &gt; 0) {</span>
<span class="line-added"> 906             iFld += -7;</span>
<span class="line-added"> 907             iArr[5] = 8;</span>
<span class="line-added"> 908             x = iArr[6];</span>
<span class="line-added"> 909             y = x;</span>
<span class="line-added"> 910             switch ((iCon * 5) + 102) {</span>
<span class="line-added"> 911             case 120:</span>
<span class="line-added"> 912                 return iFld;</span>
<span class="line-added"> 913             case 103:</span>
<span class="line-added"> 914                 break;</span>
<span class="line-added"> 915             case 116:</span>
<span class="line-added"> 916                 break;</span>
<span class="line-added"> 917             default:</span>
<span class="line-added"> 918                 iFld &gt;&gt;= 1;</span>
<span class="line-added"> 919             }</span>
<span class="line-added"> 920         }</span>
<span class="line-added"> 921         return iFld;</span>
<span class="line-added"> 922     }</span>
<span class="line-added"> 923 </span>
<span class="line-added"> 924     public int test7NoOuter() {</span>
<span class="line-added"> 925         iFld = 13;</span>
<span class="line-added"> 926         int j = 10;</span>
<span class="line-added"> 927         while (--j &gt; 0) {</span>
<span class="line-added"> 928             iFld += -7;</span>
<span class="line-added"> 929             iArr[5] = 8;</span>
<span class="line-added"> 930             switch ((iCon * 5) + 102) {</span>
<span class="line-added"> 931             case 120:</span>
<span class="line-added"> 932                 return iFld;</span>
<span class="line-added"> 933             case 103:</span>
<span class="line-added"> 934                 break;</span>
<span class="line-added"> 935             case 116:</span>
<span class="line-added"> 936                 break;</span>
<span class="line-added"> 937             default:</span>
<span class="line-added"> 938                 iFld &gt;&gt;= 1;</span>
<span class="line-added"> 939             }</span>
<span class="line-added"> 940         }</span>
<span class="line-added"> 941         return iFld;</span>
<span class="line-added"> 942     }</span>
<span class="line-added"> 943 </span>
<span class="line-added"> 944     public int test8NoOuter() {</span>
<span class="line-added"> 945 </span>
<span class="line-added"> 946         iFld = 13;</span>
<span class="line-added"> 947         int j = 50;</span>
<span class="line-added"> 948         while (--j &gt; 0) {</span>
<span class="line-added"> 949             // All statements before the switch expression are partially peeled</span>
<span class="line-added"> 950             iFld += -7;</span>
<span class="line-added"> 951             x = y + iFld;</span>
<span class="line-added"> 952             y = iArr[5];</span>
<span class="line-added"> 953             iArr[5] = 5;</span>
<span class="line-added"> 954             iArr[6] += 23;</span>
<span class="line-added"> 955             iArr[7] = iArr[8] + iArr[6];</span>
<span class="line-added"> 956             switch ((val * 5) + 102) {</span>
<span class="line-added"> 957             case 120:</span>
<span class="line-added"> 958                 break;</span>
<span class="line-added"> 959             case 103:</span>
<span class="line-added"> 960                 break;</span>
<span class="line-added"> 961             case 116:</span>
<span class="line-added"> 962                 break;</span>
<span class="line-added"> 963             default:</span>
<span class="line-added"> 964                 iFld &gt;&gt;= 1;</span>
<span class="line-added"> 965             }</span>
<span class="line-added"> 966         }</span>
<span class="line-added"> 967         return iFld;</span>
<span class="line-added"> 968     }</span>
<span class="line-added"> 969 </span>
<span class="line-added"> 970 </span>
<span class="line-added"> 971     public int test9NoOuter() {</span>
<span class="line-added"> 972         iFld = 13;</span>
<span class="line-added"> 973         int j = 10;</span>
<span class="line-added"> 974         while (--j &gt; 0) {</span>
<span class="line-added"> 975             iFld += -7;</span>
<span class="line-added"> 976             iArr[4] = 8;</span>
<span class="line-added"> 977             x = iArr[5];</span>
<span class="line-added"> 978             switch ((iCon * 5) + 102) {</span>
<span class="line-added"> 979             case 120:</span>
<span class="line-added"> 980                 return iFld + 1;</span>
<span class="line-added"> 981             case 103:</span>
<span class="line-added"> 982                 break;</span>
<span class="line-added"> 983             case 116:</span>
<span class="line-added"> 984                 break;</span>
<span class="line-added"> 985             default:</span>
<span class="line-added"> 986                 iFld &gt;&gt;= 1;</span>
<span class="line-added"> 987             }</span>
<span class="line-added"> 988         }</span>
<span class="line-added"> 989         return iFld;</span>
<span class="line-added"> 990     }</span>
<span class="line-added"> 991 </span>
<span class="line-added"> 992    public int test10NoOuter() {</span>
<span class="line-added"> 993         if (z &lt; 34) {</span>
<span class="line-added"> 994             z = 34;</span>
<span class="line-added"> 995         }</span>
<span class="line-added"> 996 </span>
<span class="line-added"> 997         iFld = 13;</span>
<span class="line-added"> 998         int j = 50;</span>
<span class="line-added"> 999         while (--j &gt; 0) {</span>
<span class="line-added">1000             iFld += -7;</span>
<span class="line-added">1001             iArr[4] = 8;</span>
<span class="line-added">1002             x = iArr[5];</span>
<span class="line-added">1003             switch ((iCon * 5) + 102) {</span>
<span class="line-added">1004             case 120:</span>
<span class="line-added">1005                 break;</span>
<span class="line-added">1006             case 103:</span>
<span class="line-added">1007                 break;</span>
<span class="line-added">1008             case 116:</span>
<span class="line-added">1009                 break;</span>
<span class="line-added">1010             default:</span>
<span class="line-added">1011                 iFld &gt;&gt;= 1;</span>
<span class="line-added">1012             }</span>
<span class="line-added">1013         }</span>
<span class="line-added">1014         if (z == 34) {</span>
<span class="line-added">1015             x = iArr[6];</span>
<span class="line-added">1016         }</span>
<span class="line-added">1017         return iFld;</span>
<span class="line-added">1018     }</span>
<span class="line-added">1019 </span>
<span class="line-added">1020 </span>
<span class="line-added">1021     public int test11XcompNoOuter() {</span>
<span class="line-added">1022         if (z &lt; 34) {</span>
<span class="line-added">1023             z = 34;</span>
<span class="line-added">1024         }</span>
<span class="line-added">1025 </span>
<span class="line-added">1026         iFld = 13;</span>
<span class="line-added">1027         int j = 50;</span>
<span class="line-added">1028         while (--j &gt; 0) {</span>
<span class="line-added">1029             iFld += -7;</span>
<span class="line-added">1030             iArr[4] = 8;</span>
<span class="line-added">1031             x = iArr[5];</span>
<span class="line-added">1032             switch ((iCon * 5) + 102) {</span>
<span class="line-added">1033             case 120:</span>
<span class="line-added">1034                 break;</span>
<span class="line-added">1035             case 103:</span>
<span class="line-added">1036                 break;</span>
<span class="line-added">1037             case 116:</span>
<span class="line-added">1038                 break;</span>
<span class="line-added">1039             default:</span>
<span class="line-added">1040                 iFld &gt;&gt;= 1;</span>
<span class="line-added">1041             }</span>
<span class="line-added">1042             if (z == 34) {</span>
<span class="line-added">1043                 break;</span>
<span class="line-added">1044             }</span>
<span class="line-added">1045         }</span>
<span class="line-added">1046         if (z == 34) {</span>
<span class="line-added">1047             x = iArr[6];</span>
<span class="line-added">1048         }</span>
<span class="line-added">1049         return iFld;</span>
<span class="line-added">1050     }</span>
<span class="line-added">1051 </span>
<span class="line-added">1052     // Phi with multiple inputs from same peeled node</span>
<span class="line-added">1053     public int test12XcompNoOuter() {</span>
<span class="line-added">1054         if (z &lt; 34) {</span>
<span class="line-added">1055             z = 34;</span>
<span class="line-added">1056         }</span>
<span class="line-added">1057 </span>
<span class="line-added">1058         iFld = 13;</span>
<span class="line-added">1059         int j = 50;</span>
<span class="line-added">1060         while (--j &gt; 0) {</span>
<span class="line-added">1061             iFld += -7;</span>
<span class="line-added">1062             iArr[4] = 8;</span>
<span class="line-added">1063             x = iArr[5];</span>
<span class="line-added">1064             switch ((iCon * 5) + 102) {</span>
<span class="line-added">1065             case 120:</span>
<span class="line-added">1066                 break;</span>
<span class="line-added">1067             case 103:</span>
<span class="line-added">1068                 break;</span>
<span class="line-added">1069             case 116:</span>
<span class="line-added">1070                 return z;</span>
<span class="line-added">1071             case 106:</span>
<span class="line-added">1072                 return y;</span>
<span class="line-added">1073             case 111:</span>
<span class="line-added">1074                 return x;</span>
<span class="line-added">1075             default:</span>
<span class="line-added">1076                 iFld &gt;&gt;= 1;</span>
<span class="line-added">1077             }</span>
<span class="line-added">1078             w = 45;</span>
<span class="line-added">1079         }</span>
<span class="line-added">1080 </span>
<span class="line-added">1081         if (z == 34) {</span>
<span class="line-added">1082             x = iArr[6];</span>
<span class="line-added">1083         }</span>
<span class="line-added">1084         return iFld;</span>
<span class="line-added">1085     }</span>
<span class="line-added">1086 </span>
<span class="line-added">1087     public int test13XcompNoOuter() {</span>
<span class="line-added">1088         if (z &lt; 34) {</span>
<span class="line-added">1089             z = 34;</span>
<span class="line-added">1090         }</span>
<span class="line-added">1091 </span>
<span class="line-added">1092         iFld = 13;</span>
<span class="line-added">1093         int j = 50;</span>
<span class="line-added">1094         while (--j &gt; 0) {</span>
<span class="line-added">1095             iFld += -7;</span>
<span class="line-added">1096             iArr[4] = 8;</span>
<span class="line-added">1097             x = iArr[5];</span>
<span class="line-added">1098             switch ((iCon * 5) + 102) {</span>
<span class="line-added">1099             case 120:</span>
<span class="line-added">1100                 break;</span>
<span class="line-added">1101             case 103:</span>
<span class="line-added">1102                 break;</span>
<span class="line-added">1103             case 116:</span>
<span class="line-added">1104                 break;</span>
<span class="line-added">1105             default:</span>
<span class="line-added">1106                 iFld &gt;&gt;= 1;</span>
<span class="line-added">1107             }</span>
<span class="line-added">1108             w = 45;</span>
<span class="line-added">1109         }</span>
<span class="line-added">1110 </span>
<span class="line-added">1111         if (z == 34) {</span>
<span class="line-added">1112             x = iArr[6];</span>
<span class="line-added">1113         }</span>
<span class="line-added">1114         return iFld;</span>
<span class="line-added">1115     }</span>
<span class="line-added">1116 </span>
<span class="line-added">1117     // Triggers after peeling with Xcomp</span>
<span class="line-added">1118     public int test14PeelNoOuter() {</span>
<span class="line-added">1119         iFld = 13;</span>
<span class="line-added">1120         int j = 10;</span>
<span class="line-added">1121         while (--j &gt; 0) {</span>
<span class="line-added">1122             iFld += -7;</span>
<span class="line-added">1123             iArr[4] = 8;</span>
<span class="line-added">1124             x = iArr[5];</span>
<span class="line-added">1125             switch ((iCon * 5) + 102) {</span>
<span class="line-added">1126             case 120:</span>
<span class="line-added">1127                 return iFld;</span>
<span class="line-added">1128             case 103:</span>
<span class="line-added">1129                 break;</span>
<span class="line-added">1130             case 116:</span>
<span class="line-added">1131                 break;</span>
<span class="line-added">1132             default:</span>
<span class="line-added">1133                 iFld &gt;&gt;= 1;</span>
<span class="line-added">1134             }</span>
<span class="line-added">1135             iFld = 3;</span>
<span class="line-added">1136         }</span>
<span class="line-added">1137         y = iArr[4];</span>
<span class="line-added">1138         x = iArr[6];</span>
<span class="line-added">1139 </span>
<span class="line-added">1140         return iFld;</span>
<span class="line-added">1141     }</span>
<span class="line-added">1142 </span>
<span class="line-added">1143 </span>
<span class="line-added">1144     public int test15earlyCtrlNoOuter() {</span>
<span class="line-added">1145         iFld = 13;</span>
<span class="line-added">1146         if (z &lt; 34) {</span>
<span class="line-added">1147             z = 34;</span>
<span class="line-added">1148         }</span>
<span class="line-added">1149 </span>
<span class="line-added">1150         int j = 10;</span>
<span class="line-added">1151         while (--j &gt; 0) {</span>
<span class="line-added">1152             iFld += -7;</span>
<span class="line-added">1153             iArr[5] = 8;</span>
<span class="line-added">1154             x = iArr[6];</span>
<span class="line-added">1155             y = x;</span>
<span class="line-added">1156             x = iArr[7];</span>
<span class="line-added">1157             switch ((iCon * 5) + 102) {</span>
<span class="line-added">1158             case 120:</span>
<span class="line-added">1159                 return iFld;</span>
<span class="line-added">1160             case 103:</span>
<span class="line-added">1161                 break;</span>
<span class="line-added">1162             case 116:</span>
<span class="line-added">1163                 break;</span>
<span class="line-added">1164             default:</span>
<span class="line-added">1165                 if (iFld == -7) {</span>
<span class="line-added">1166                     return iFld;</span>
<span class="line-added">1167                 }</span>
<span class="line-added">1168                 z = iArr[5];</span>
<span class="line-added">1169                 iFld &gt;&gt;= 1;</span>
<span class="line-added">1170             }</span>
<span class="line-added">1171         }</span>
<span class="line-added">1172         if (iFld == 7) {</span>
<span class="line-added">1173             iArr[3] = 3;</span>
<span class="line-added">1174         }</span>
<span class="line-added">1175         dontInline(7);</span>
<span class="line-added">1176         iArr[5] = 34;</span>
<span class="line-added">1177         return iFld;</span>
<span class="line-added">1178     }</span>
<span class="line-added">1179 </span>
<span class="line-added">1180     // Load after loop -&gt; LoadI after loop from peeled StoreI</span>
<span class="line-added">1181     public int test16NoOuter() {</span>
<span class="line-added">1182         iFld = 13;</span>
<span class="line-added">1183         if (z &lt; 34) {</span>
<span class="line-added">1184             z = 34;</span>
<span class="line-added">1185         }</span>
<span class="line-added">1186 </span>
<span class="line-added">1187         int j = 60;</span>
<span class="line-added">1188         while (--j &gt; 0) {</span>
<span class="line-added">1189             iFld += -7;</span>
<span class="line-added">1190             y += iFld + 1;</span>
<span class="line-added">1191 </span>
<span class="line-added">1192             iArr[5] = 8;</span>
<span class="line-added">1193             x = iArr[6];</span>
<span class="line-added">1194             x = iArr[7];</span>
<span class="line-added">1195             switch ((iCon * 5) + 102) {</span>
<span class="line-added">1196             case 120:</span>
<span class="line-added">1197                 return iFld;</span>
<span class="line-added">1198             case 103:</span>
<span class="line-added">1199                 break;</span>
<span class="line-added">1200             case 116:</span>
<span class="line-added">1201                 break;</span>
<span class="line-added">1202             default:</span>
<span class="line-added">1203                 if (iFld == -7) {</span>
<span class="line-added">1204                     return iFld;</span>
<span class="line-added">1205                 }</span>
<span class="line-added">1206                 z = iArr[5];</span>
<span class="line-added">1207                 iFld &gt;&gt;= 1;</span>
<span class="line-added">1208             }</span>
<span class="line-added">1209         }</span>
<span class="line-added">1210         w = iArr[9];</span>
<span class="line-added">1211         if (iFld == 7) {</span>
<span class="line-added">1212             iArr[3] = 3;</span>
<span class="line-added">1213         }</span>
<span class="line-added">1214         dontInline(7);</span>
<span class="line-added">1215         iArr[5] = 34;</span>
<span class="line-added">1216         return iFld;</span>
<span class="line-added">1217     }</span>
<span class="line-added">1218 </span>
<span class="line-added">1219     // Region 13 before return, which region to choose for MergeMem?</span>
<span class="line-added">1220     public int test17XcompNoOuter() {</span>
<span class="line-added">1221         A p = dontInlineGetA();</span>
<span class="line-added">1222         if (z &lt; 34) {</span>
<span class="line-added">1223             z = 34;</span>
<span class="line-added">1224         }</span>
<span class="line-added">1225 </span>
<span class="line-added">1226         iFld = 13;</span>
<span class="line-added">1227         int j = 50;</span>
<span class="line-added">1228         while (--j &gt; 0) {</span>
<span class="line-added">1229             iFld += -7;</span>
<span class="line-added">1230             iArr[4] = 8;</span>
<span class="line-added">1231             x = iArr[5];</span>
<span class="line-added">1232             y = p.i;</span>
<span class="line-added">1233             switch ((iCon * 5) + 102) {</span>
<span class="line-added">1234             case 120:</span>
<span class="line-added">1235                 break;</span>
<span class="line-added">1236             case 103:</span>
<span class="line-added">1237                 break;</span>
<span class="line-added">1238             case 116:</span>
<span class="line-added">1239                 return z;</span>
<span class="line-added">1240             case 106:</span>
<span class="line-added">1241                 return y;</span>
<span class="line-added">1242             case 111:</span>
<span class="line-added">1243                 return x;</span>
<span class="line-added">1244             default:</span>
<span class="line-added">1245                 iFld &gt;&gt;= 1;</span>
<span class="line-added">1246             }</span>
<span class="line-added">1247             w = 45;</span>
<span class="line-added">1248         }</span>
<span class="line-added">1249         if (z == 34) {</span>
<span class="line-added">1250             x = iArr[6];</span>
<span class="line-added">1251         }</span>
<span class="line-added">1252         return iFld;</span>
<span class="line-added">1253     }</span>
<span class="line-added">1254 </span>
<span class="line-added">1255     // Region 13 before return, which region to choose for MergeMem?</span>
<span class="line-added">1256     public int test18XcompNoOuter() {</span>
<span class="line-added">1257         if (z &lt; 34) {</span>
<span class="line-added">1258             z = 34;</span>
<span class="line-added">1259         }</span>
<span class="line-added">1260 </span>
<span class="line-added">1261         iFld = 13;</span>
<span class="line-added">1262         int j = 50;</span>
<span class="line-added">1263         while (--j &gt; 0) {</span>
<span class="line-added">1264             iFld += -7;</span>
<span class="line-added">1265             iArr[4] = 8;</span>
<span class="line-added">1266             x = iArr[5];</span>
<span class="line-added">1267             y = 85;</span>
<span class="line-added">1268             switch ((iCon * 5) + 102) {</span>
<span class="line-added">1269             case 120:</span>
<span class="line-added">1270                 break;</span>
<span class="line-added">1271             case 103:</span>
<span class="line-added">1272                 break;</span>
<span class="line-added">1273             case 116:</span>
<span class="line-added">1274                 return z;</span>
<span class="line-added">1275             case 106:</span>
<span class="line-added">1276                 if (z == 34) {</span>
<span class="line-added">1277                     x = iArr[7];</span>
<span class="line-added">1278                 }</span>
<span class="line-added">1279                 return y;</span>
<span class="line-added">1280             case 111:</span>
<span class="line-added">1281                 return x;</span>
<span class="line-added">1282             default:</span>
<span class="line-added">1283                 iFld &gt;&gt;= 1;</span>
<span class="line-added">1284             }</span>
<span class="line-added">1285             w = 45;</span>
<span class="line-added">1286         }</span>
<span class="line-added">1287 </span>
<span class="line-added">1288         if (z == 34) {</span>
<span class="line-added">1289             x = iArr[6];</span>
<span class="line-added">1290         }</span>
<span class="line-added">1291         return iFld;</span>
<span class="line-added">1292     }</span>
<span class="line-added">1293 </span>
<span class="line-added">1294     public int test19XcompNoOuter() {</span>
<span class="line-added">1295         if (z &lt; 34) {</span>
<span class="line-added">1296             z = 34;</span>
<span class="line-added">1297         }</span>
<span class="line-added">1298 </span>
<span class="line-added">1299         iFld = 13;</span>
<span class="line-added">1300         int j = 50;</span>
<span class="line-added">1301         while (--j &gt; 0) {</span>
<span class="line-added">1302             iFld += -7;</span>
<span class="line-added">1303             iArr[4] = 8;</span>
<span class="line-added">1304             x = iArr[5]+ iArr[6];</span>
<span class="line-added">1305             y = 85;</span>
<span class="line-added">1306             switch ((iCon * 5) + 102) {</span>
<span class="line-added">1307             case 120:</span>
<span class="line-added">1308                 break;</span>
<span class="line-added">1309             case 103:</span>
<span class="line-added">1310                 break;</span>
<span class="line-added">1311             case 116:</span>
<span class="line-added">1312                 break;</span>
<span class="line-added">1313             case 106:</span>
<span class="line-added">1314                 if (z == 34) {</span>
<span class="line-added">1315                     x = iArr[7];</span>
<span class="line-added">1316                 }</span>
<span class="line-added">1317                 return y;</span>
<span class="line-added">1318             case 111:</span>
<span class="line-added">1319                 return x;</span>
<span class="line-added">1320             default:</span>
<span class="line-added">1321                 iFld &gt;&gt;= 1;</span>
<span class="line-added">1322             }</span>
<span class="line-added">1323             w = 45;</span>
<span class="line-added">1324         }</span>
<span class="line-added">1325 </span>
<span class="line-added">1326         if (z == 34) {</span>
<span class="line-added">1327             iArr[7] = 34;</span>
<span class="line-added">1328         }</span>
<span class="line-added">1329         return iFld;</span>
<span class="line-added">1330     }</span>
<span class="line-added">1331 </span>
<span class="line-added">1332 </span>
<span class="line-added">1333     public int test20NoOuter() {</span>
<span class="line-added">1334         if (z &lt; 34) {</span>
<span class="line-added">1335             z = 34;</span>
<span class="line-added">1336         }</span>
<span class="line-added">1337 </span>
<span class="line-added">1338         iFld = 13;</span>
<span class="line-added">1339         int j = 50;</span>
<span class="line-added">1340         while (--j &gt; 0) {</span>
<span class="line-added">1341             iFld += -7;</span>
<span class="line-added">1342             iArr[4] = 8;</span>
<span class="line-added">1343             x = iArr[5];</span>
<span class="line-added">1344             switch ((iCon * 5) + 102) {</span>
<span class="line-added">1345             case 120:</span>
<span class="line-added">1346                 break;</span>
<span class="line-added">1347             case 103:</span>
<span class="line-added">1348                 break;</span>
<span class="line-added">1349             case 116:</span>
<span class="line-added">1350                 break;</span>
<span class="line-added">1351             default:</span>
<span class="line-added">1352                 iFld &gt;&gt;= 1;</span>
<span class="line-added">1353             }</span>
<span class="line-added">1354         }</span>
<span class="line-added">1355         x = iArr[6];</span>
<span class="line-added">1356         if (z == 34) {</span>
<span class="line-added">1357             x = iArr[7];</span>
<span class="line-added">1358         }</span>
<span class="line-added">1359         return iFld;</span>
<span class="line-added">1360     }</span>
<span class="line-added">1361 </span>
<span class="line-added">1362     public int test21NoOuter() {</span>
<span class="line-added">1363         if (z &lt; 34) {</span>
<span class="line-added">1364             z = 34;</span>
<span class="line-added">1365         }</span>
<span class="line-added">1366 </span>
<span class="line-added">1367         iFld = 13;</span>
<span class="line-added">1368         int j = 50;</span>
<span class="line-added">1369         while (--j &gt; 0) {</span>
<span class="line-added">1370             iFld += -7;</span>
<span class="line-added">1371             iArr[4] = 8;</span>
<span class="line-added">1372             x = iArr[5];</span>
<span class="line-added">1373             switch ((iCon * 5) + 102) {</span>
<span class="line-added">1374             case 120:</span>
<span class="line-added">1375                 break;</span>
<span class="line-added">1376             case 103:</span>
<span class="line-added">1377                 break;</span>
<span class="line-added">1378             case 116:</span>
<span class="line-added">1379                 break;</span>
<span class="line-added">1380             default:</span>
<span class="line-added">1381                 iFld &gt;&gt;= 1;</span>
<span class="line-added">1382             }</span>
<span class="line-added">1383         }</span>
<span class="line-added">1384         x = iArr[6];</span>
<span class="line-added">1385         if (z == 34) {</span>
<span class="line-added">1386             y = iArr[7];</span>
<span class="line-added">1387         }</span>
<span class="line-added">1388         return iFld;</span>
<span class="line-added">1389     }</span>
<span class="line-added">1390     public static void main(String[] strArr) {</span>
<span class="line-added">1391         BookKeeper[] bookKeeper = new BookKeeper[22];</span>
<span class="line-added">1392         for (int i = 0; i &lt; 22; i++) {</span>
<span class="line-added">1393             bookKeeper[i] = new BookKeeper();</span>
<span class="line-added">1394         }</span>
<span class="line-added">1395 </span>
<span class="line-added">1396         PartialPeelingUnswitch _instance = new PartialPeelingUnswitch();</span>
<span class="line-added">1397         for (int i = 0; i &lt; 2000; i++) {</span>
<span class="line-added">1398             int result = _instance.test();</span>
<span class="line-added">1399             if (result != -7) {</span>
<span class="line-added">1400                 throw new RuntimeException(&quot;Result should always be -7 but was &quot; + result);</span>
<span class="line-added">1401             }</span>
<span class="line-added">1402         }</span>
<span class="line-added">1403 </span>
<span class="line-added">1404         for (int i = 0; i &lt; 2000; i++) {</span>
<span class="line-added">1405             int result = _instance.test2();</span>
<span class="line-added">1406             check(-1, result);</span>
<span class="line-added">1407             check(-7, iFld);</span>
<span class="line-added">1408             check(-9, x);</span>
<span class="line-added">1409             check(5, y);</span>
<span class="line-added">1410             check(5, iArr[5]);</span>
<span class="line-added">1411             check(149, iArr[6]);</span>
<span class="line-added">1412             check(183, iArr[7]);</span>
<span class="line-added">1413 </span>
<span class="line-added">1414             // Reset fields</span>
<span class="line-added">1415             for (int j = 0; j &lt; 10; j++) {</span>
<span class="line-added">1416                 iArr[j] = 0;</span>
<span class="line-added">1417             }</span>
<span class="line-added">1418             x = 42;</span>
<span class="line-added">1419             y = 31;</span>
<span class="line-added">1420         }</span>
<span class="line-added">1421 </span>
<span class="line-added">1422         for (int i = 0; i &lt; 2000; i++) {</span>
<span class="line-added">1423             BookKeeper.setup();</span>
<span class="line-added">1424             _instance.test3();</span>
<span class="line-added">1425             bookKeeper[3].compare();</span>
<span class="line-added">1426             BookKeeper.setup();</span>
<span class="line-added">1427             _instance.test4();</span>
<span class="line-added">1428             bookKeeper[4].compare();</span>
<span class="line-added">1429             BookKeeper.setup();</span>
<span class="line-added">1430             _instance.test5();</span>
<span class="line-added">1431             bookKeeper[5].compare();</span>
<span class="line-added">1432             BookKeeper.setup();</span>
<span class="line-added">1433             _instance.test6();</span>
<span class="line-added">1434             bookKeeper[6].compare();</span>
<span class="line-added">1435             BookKeeper.setup();</span>
<span class="line-added">1436             _instance.test7();</span>
<span class="line-added">1437             bookKeeper[7].compare();</span>
<span class="line-added">1438             BookKeeper.setup();</span>
<span class="line-added">1439             _instance.test8();</span>
<span class="line-added">1440             bookKeeper[8].compare();</span>
<span class="line-added">1441             BookKeeper.setup();</span>
<span class="line-added">1442             _instance.test9();</span>
<span class="line-added">1443             bookKeeper[9].compare();</span>
<span class="line-added">1444             BookKeeper.setup();</span>
<span class="line-added">1445             _instance.test10();</span>
<span class="line-added">1446             bookKeeper[10].compare();</span>
<span class="line-added">1447             BookKeeper.setup();</span>
<span class="line-added">1448             _instance.test11Xcomp();</span>
<span class="line-added">1449             bookKeeper[11].compare();</span>
<span class="line-added">1450             BookKeeper.setup();</span>
<span class="line-added">1451             _instance.test12Xcomp();</span>
<span class="line-added">1452             bookKeeper[12].compare();</span>
<span class="line-added">1453             BookKeeper.setup();</span>
<span class="line-added">1454             _instance.test13Xcomp();</span>
<span class="line-added">1455             bookKeeper[13].compare();</span>
<span class="line-added">1456             BookKeeper.setup();</span>
<span class="line-added">1457             _instance.test14Peel();</span>
<span class="line-added">1458             bookKeeper[14].compare();</span>
<span class="line-added">1459             BookKeeper.setup();</span>
<span class="line-added">1460             _instance.test15earlyCtrl();</span>
<span class="line-added">1461             bookKeeper[15].compare();</span>
<span class="line-added">1462             BookKeeper.setup();</span>
<span class="line-added">1463             _instance.test16();</span>
<span class="line-added">1464             bookKeeper[16].compare();</span>
<span class="line-added">1465             BookKeeper.setup();</span>
<span class="line-added">1466             _instance.test17Xcomp();</span>
<span class="line-added">1467             bookKeeper[17].compare();</span>
<span class="line-added">1468             BookKeeper.setup();</span>
<span class="line-added">1469             _instance.test18Xcomp();</span>
<span class="line-added">1470             bookKeeper[18].compare();</span>
<span class="line-added">1471             BookKeeper.setup();</span>
<span class="line-added">1472             _instance.test19Xcomp();</span>
<span class="line-added">1473             bookKeeper[19].compare();</span>
<span class="line-added">1474             BookKeeper.setup();</span>
<span class="line-added">1475             _instance.test20();</span>
<span class="line-added">1476             bookKeeper[20].compare();</span>
<span class="line-added">1477             BookKeeper.setup();</span>
<span class="line-added">1478             _instance.test21();</span>
<span class="line-added">1479             bookKeeper[21].compare();</span>
<span class="line-added">1480         }</span>
<span class="line-added">1481 </span>
<span class="line-added">1482         for (int i = 0; i &lt; 22; i++) {</span>
<span class="line-added">1483             bookKeeper[i] = new BookKeeper();</span>
<span class="line-added">1484         }</span>
<span class="line-added">1485 </span>
<span class="line-added">1486         for (int i = 0; i &lt; 2000; i++) {</span>
<span class="line-added">1487             BookKeeper.setup();</span>
<span class="line-added">1488             _instance.testNoOuter();</span>
<span class="line-added">1489             bookKeeper[1].compare();</span>
<span class="line-added">1490             BookKeeper.setup();</span>
<span class="line-added">1491             _instance.test2NoOuter();</span>
<span class="line-added">1492             bookKeeper[2].compare();</span>
<span class="line-added">1493             BookKeeper.setup();</span>
<span class="line-added">1494             _instance.test3NoOuter();</span>
<span class="line-added">1495             bookKeeper[3].compare();</span>
<span class="line-added">1496             BookKeeper.setup();</span>
<span class="line-added">1497             _instance.test4NoOuter();</span>
<span class="line-added">1498             bookKeeper[4].compare();</span>
<span class="line-added">1499             BookKeeper.setup();</span>
<span class="line-added">1500             _instance.test5NoOuter();</span>
<span class="line-added">1501             bookKeeper[5].compare();</span>
<span class="line-added">1502             BookKeeper.setup();</span>
<span class="line-added">1503             _instance.test6NoOuter();</span>
<span class="line-added">1504             bookKeeper[6].compare();</span>
<span class="line-added">1505             BookKeeper.setup();</span>
<span class="line-added">1506             _instance.test7NoOuter();</span>
<span class="line-added">1507             bookKeeper[7].compare();</span>
<span class="line-added">1508             BookKeeper.setup();</span>
<span class="line-added">1509             _instance.test8NoOuter();</span>
<span class="line-added">1510             bookKeeper[8].compare();</span>
<span class="line-added">1511             BookKeeper.setup();</span>
<span class="line-added">1512             _instance.test9NoOuter();</span>
<span class="line-added">1513             bookKeeper[9].compare();</span>
<span class="line-added">1514             BookKeeper.setup();</span>
<span class="line-added">1515             _instance.test10NoOuter();</span>
<span class="line-added">1516             bookKeeper[10].compare();</span>
<span class="line-added">1517             BookKeeper.setup();</span>
<span class="line-added">1518             _instance.test11XcompNoOuter();</span>
<span class="line-added">1519             bookKeeper[11].compare();</span>
<span class="line-added">1520             BookKeeper.setup();</span>
<span class="line-added">1521             _instance.test12XcompNoOuter();</span>
<span class="line-added">1522             bookKeeper[12].compare();</span>
<span class="line-added">1523             BookKeeper.setup();</span>
<span class="line-added">1524             _instance.test13XcompNoOuter();</span>
<span class="line-added">1525             bookKeeper[13].compare();</span>
<span class="line-added">1526             BookKeeper.setup();</span>
<span class="line-added">1527             _instance.test14PeelNoOuter();</span>
<span class="line-added">1528             bookKeeper[14].compare();</span>
<span class="line-added">1529             BookKeeper.setup();</span>
<span class="line-added">1530             _instance.test15earlyCtrlNoOuter();</span>
<span class="line-added">1531             bookKeeper[15].compare();</span>
<span class="line-added">1532             BookKeeper.setup();</span>
<span class="line-added">1533             _instance.test16NoOuter();</span>
<span class="line-added">1534             bookKeeper[16].compare();</span>
<span class="line-added">1535             BookKeeper.setup();</span>
<span class="line-added">1536             _instance.test17XcompNoOuter();</span>
<span class="line-added">1537             bookKeeper[17].compare();</span>
<span class="line-added">1538             BookKeeper.setup();</span>
<span class="line-added">1539             _instance.test18XcompNoOuter();</span>
<span class="line-added">1540             bookKeeper[18].compare();</span>
<span class="line-added">1541             BookKeeper.setup();</span>
<span class="line-added">1542             _instance.test19XcompNoOuter();</span>
<span class="line-added">1543             bookKeeper[19].compare();</span>
<span class="line-added">1544             BookKeeper.setup();</span>
<span class="line-added">1545             _instance.test20NoOuter();</span>
<span class="line-added">1546             bookKeeper[20].compare();</span>
<span class="line-added">1547             BookKeeper.setup();</span>
<span class="line-added">1548             _instance.test21NoOuter();</span>
<span class="line-added">1549             bookKeeper[21].compare();</span>
<span class="line-added">1550         }</span>
<span class="line-added">1551 </span>
<span class="line-added">1552         for (int i = 0; i &lt; 22; i++) {</span>
<span class="line-added">1553             bookKeeper[i] = new BookKeeper();</span>
<span class="line-added">1554         }</span>
<span class="line-added">1555 </span>
<span class="line-added">1556         for (int i = 0; i &lt; 2000; i++) {</span>
<span class="line-added">1557             BookKeeper.setup();</span>
<span class="line-added">1558             setZ(i);</span>
<span class="line-added">1559             _instance.test3();</span>
<span class="line-added">1560             bookKeeper[3].compare(i);</span>
<span class="line-added">1561             BookKeeper.setup();</span>
<span class="line-added">1562             setZ(i);</span>
<span class="line-added">1563             _instance.test4();</span>
<span class="line-added">1564             bookKeeper[4].compare(i);</span>
<span class="line-added">1565             BookKeeper.setup();</span>
<span class="line-added">1566             setZ(i);</span>
<span class="line-added">1567             _instance.test5();</span>
<span class="line-added">1568             bookKeeper[5].compare(i);</span>
<span class="line-added">1569             BookKeeper.setup();</span>
<span class="line-added">1570             setZ(i);</span>
<span class="line-added">1571             _instance.test6();</span>
<span class="line-added">1572             bookKeeper[6].compare(i);</span>
<span class="line-added">1573             BookKeeper.setup();</span>
<span class="line-added">1574             setZ(i);</span>
<span class="line-added">1575             _instance.test7();</span>
<span class="line-added">1576             bookKeeper[7].compare(i);</span>
<span class="line-added">1577             BookKeeper.setup();</span>
<span class="line-added">1578             setZ(i);</span>
<span class="line-added">1579             _instance.test8();</span>
<span class="line-added">1580             bookKeeper[8].compare(i);</span>
<span class="line-added">1581             BookKeeper.setup();</span>
<span class="line-added">1582             setZ(i);</span>
<span class="line-added">1583             _instance.test9();</span>
<span class="line-added">1584             bookKeeper[9].compare(i);</span>
<span class="line-added">1585             BookKeeper.setup();</span>
<span class="line-added">1586             setZ(i);</span>
<span class="line-added">1587             _instance.test10();</span>
<span class="line-added">1588             bookKeeper[10].compare(i);</span>
<span class="line-added">1589             setZ(i);</span>
<span class="line-added">1590             BookKeeper.setup();</span>
<span class="line-added">1591             _instance.test11Xcomp();</span>
<span class="line-added">1592             bookKeeper[11].compare(i);</span>
<span class="line-added">1593             setZ(i);</span>
<span class="line-added">1594             BookKeeper.setup();</span>
<span class="line-added">1595             _instance.test12Xcomp();</span>
<span class="line-added">1596             bookKeeper[12].compare(i);</span>
<span class="line-added">1597             setZ(i);</span>
<span class="line-added">1598             BookKeeper.setup();</span>
<span class="line-added">1599             _instance.test13Xcomp();</span>
<span class="line-added">1600             bookKeeper[13].compare(i);</span>
<span class="line-added">1601             setZ(i);</span>
<span class="line-added">1602             BookKeeper.setup();</span>
<span class="line-added">1603             _instance.test14Peel();</span>
<span class="line-added">1604             bookKeeper[14].compare(i);</span>
<span class="line-added">1605             setZ(i);</span>
<span class="line-added">1606             BookKeeper.setup();</span>
<span class="line-added">1607             _instance.test15earlyCtrl();</span>
<span class="line-added">1608             bookKeeper[15].compare(i);</span>
<span class="line-added">1609             setZ(i);</span>
<span class="line-added">1610             BookKeeper.setup();</span>
<span class="line-added">1611             _instance.test16();</span>
<span class="line-added">1612             bookKeeper[16].compare(i);</span>
<span class="line-added">1613             setZ(i);</span>
<span class="line-added">1614             BookKeeper.setup();</span>
<span class="line-added">1615             _instance.test17Xcomp();</span>
<span class="line-added">1616             bookKeeper[17].compare(i);</span>
<span class="line-added">1617             setZ(i);</span>
<span class="line-added">1618             BookKeeper.setup();</span>
<span class="line-added">1619             _instance.test18Xcomp();</span>
<span class="line-added">1620             bookKeeper[18].compare(i);</span>
<span class="line-added">1621             setZ(i);</span>
<span class="line-added">1622             BookKeeper.setup();</span>
<span class="line-added">1623             _instance.test19Xcomp();</span>
<span class="line-added">1624             bookKeeper[19].compare(i);</span>
<span class="line-added">1625             setZ(i);</span>
<span class="line-added">1626             BookKeeper.setup();</span>
<span class="line-added">1627             _instance.test20();</span>
<span class="line-added">1628             bookKeeper[20].compare(i);</span>
<span class="line-added">1629             setZ(i);</span>
<span class="line-added">1630             BookKeeper.setup();</span>
<span class="line-added">1631             _instance.test21();</span>
<span class="line-added">1632             bookKeeper[21].compare(i);</span>
<span class="line-added">1633         }</span>
<span class="line-added">1634 </span>
<span class="line-added">1635         for (int i = 0; i &lt; 22; i++) {</span>
<span class="line-added">1636             bookKeeper[i] = new BookKeeper();</span>
<span class="line-added">1637         }</span>
<span class="line-added">1638 </span>
<span class="line-added">1639         for (int i = 0; i &lt; 2000; i++) {</span>
<span class="line-added">1640             BookKeeper.setup();</span>
<span class="line-added">1641             setZ(i);</span>
<span class="line-added">1642             _instance.testNoOuter();</span>
<span class="line-added">1643             bookKeeper[1].compare(i);</span>
<span class="line-added">1644             BookKeeper.setup();</span>
<span class="line-added">1645             setZ(i);</span>
<span class="line-added">1646             _instance.test2NoOuter();</span>
<span class="line-added">1647             bookKeeper[2].compare(i);</span>
<span class="line-added">1648             BookKeeper.setup();</span>
<span class="line-added">1649             setZ(i);</span>
<span class="line-added">1650             _instance.test3NoOuter();</span>
<span class="line-added">1651             bookKeeper[3].compare(i);</span>
<span class="line-added">1652             BookKeeper.setup();</span>
<span class="line-added">1653             setZ(i);</span>
<span class="line-added">1654             _instance.test4NoOuter();</span>
<span class="line-added">1655             bookKeeper[4].compare(i);</span>
<span class="line-added">1656             BookKeeper.setup();</span>
<span class="line-added">1657             setZ(i);</span>
<span class="line-added">1658             _instance.test5NoOuter();</span>
<span class="line-added">1659             bookKeeper[5].compare(i);</span>
<span class="line-added">1660             BookKeeper.setup();</span>
<span class="line-added">1661             setZ(i);</span>
<span class="line-added">1662             _instance.test6NoOuter();</span>
<span class="line-added">1663             bookKeeper[6].compare(i);</span>
<span class="line-added">1664             BookKeeper.setup();</span>
<span class="line-added">1665             setZ(i);</span>
<span class="line-added">1666             _instance.test7NoOuter();</span>
<span class="line-added">1667             bookKeeper[7].compare(i);</span>
<span class="line-added">1668             BookKeeper.setup();</span>
<span class="line-added">1669             setZ(i);</span>
<span class="line-added">1670             _instance.test8NoOuter();</span>
<span class="line-added">1671             bookKeeper[8].compare(i);</span>
<span class="line-added">1672             BookKeeper.setup();</span>
<span class="line-added">1673             setZ(i);</span>
<span class="line-added">1674             _instance.test9NoOuter();</span>
<span class="line-added">1675             bookKeeper[9].compare(i);</span>
<span class="line-added">1676             BookKeeper.setup();</span>
<span class="line-added">1677             setZ(i);</span>
<span class="line-added">1678             _instance.test10NoOuter();</span>
<span class="line-added">1679             bookKeeper[10].compare(i);</span>
<span class="line-added">1680             BookKeeper.setup();</span>
<span class="line-added">1681             setZ(i);</span>
<span class="line-added">1682             _instance.test11XcompNoOuter();</span>
<span class="line-added">1683             bookKeeper[11].compare(i);</span>
<span class="line-added">1684             BookKeeper.setup();</span>
<span class="line-added">1685             setZ(i);</span>
<span class="line-added">1686             _instance.test12XcompNoOuter();</span>
<span class="line-added">1687             bookKeeper[12].compare(i);</span>
<span class="line-added">1688             BookKeeper.setup();</span>
<span class="line-added">1689             setZ(i);</span>
<span class="line-added">1690             _instance.test13XcompNoOuter();</span>
<span class="line-added">1691             bookKeeper[13].compare(i);</span>
<span class="line-added">1692             BookKeeper.setup();</span>
<span class="line-added">1693             setZ(i);</span>
<span class="line-added">1694             _instance.test14PeelNoOuter();</span>
<span class="line-added">1695             bookKeeper[14].compare(i);</span>
<span class="line-added">1696             BookKeeper.setup();</span>
<span class="line-added">1697             setZ(i);</span>
<span class="line-added">1698             _instance.test15earlyCtrlNoOuter();</span>
<span class="line-added">1699             bookKeeper[15].compare(i);</span>
<span class="line-added">1700             BookKeeper.setup();</span>
<span class="line-added">1701             setZ(i);</span>
<span class="line-added">1702             _instance.test16NoOuter();</span>
<span class="line-added">1703             bookKeeper[16].compare(i);</span>
<span class="line-added">1704             BookKeeper.setup();</span>
<span class="line-added">1705             setZ(i);</span>
<span class="line-added">1706             _instance.test17XcompNoOuter();</span>
<span class="line-added">1707             bookKeeper[17].compare(i);</span>
<span class="line-added">1708             BookKeeper.setup();</span>
<span class="line-added">1709             setZ(i);</span>
<span class="line-added">1710             _instance.test18XcompNoOuter();</span>
<span class="line-added">1711             bookKeeper[18].compare(i);</span>
<span class="line-added">1712             BookKeeper.setup();</span>
<span class="line-added">1713             setZ(i);</span>
<span class="line-added">1714             _instance.test19XcompNoOuter();</span>
<span class="line-added">1715             bookKeeper[19].compare(i);</span>
<span class="line-added">1716             BookKeeper.setup();</span>
<span class="line-added">1717             setZ(i);</span>
<span class="line-added">1718             _instance.test20NoOuter();</span>
<span class="line-added">1719             bookKeeper[20].compare(i);</span>
<span class="line-added">1720             BookKeeper.setup();</span>
<span class="line-added">1721             setZ(i);</span>
<span class="line-added">1722             _instance.test21NoOuter();</span>
<span class="line-added">1723             bookKeeper[21].compare(i);</span>
<span class="line-added">1724         }</span>
<span class="line-added">1725     }</span>
<span class="line-added">1726 </span>
<span class="line-added">1727     public static void setZ(int i) {</span>
<span class="line-added">1728         if (i % 2 == 0) {</span>
<span class="line-added">1729             z = 23;</span>
<span class="line-added">1730         } else {</span>
<span class="line-added">1731             z = 35;</span>
<span class="line-added">1732         }</span>
<span class="line-added">1733     }</span>
<span class="line-added">1734 </span>
<span class="line-added">1735     public static void check(int expected, int actual) {</span>
<span class="line-added">1736         if (expected != actual) {</span>
<span class="line-added">1737             throw new RuntimeException(&quot;Wrong result, expected: &quot; + expected + &quot;, actual: &quot; + actual);</span>
<span class="line-added">1738         }</span>
<span class="line-added">1739     }</span>
<span class="line-added">1740 </span>
<span class="line-added">1741     public void dontInline(int i) { }</span>
<span class="line-added">1742 </span>
<span class="line-added">1743     class A {</span>
<span class="line-added">1744         int i = 3;</span>
<span class="line-added">1745     }</span>
<span class="line-added">1746 </span>
<span class="line-added">1747     A dontInlineGetA() {</span>
<span class="line-added">1748         return new A();</span>
<span class="line-added">1749     }</span>
<span class="line-added">1750 </span>
<span class="line-added">1751     static class BookKeeper {</span>
<span class="line-added">1752         public int iFld;</span>
<span class="line-added">1753         public int w;</span>
<span class="line-added">1754         public int x;</span>
<span class="line-added">1755         public int y;</span>
<span class="line-added">1756         public int z;</span>
<span class="line-added">1757         public int val;</span>
<span class="line-added">1758         public int[] iArr;</span>
<span class="line-added">1759 </span>
<span class="line-added">1760         public int iFld2;</span>
<span class="line-added">1761         public int w2;</span>
<span class="line-added">1762         public int x2;</span>
<span class="line-added">1763         public int y2;</span>
<span class="line-added">1764         public int z2;</span>
<span class="line-added">1765         public int val2;</span>
<span class="line-added">1766         public int[] iArr2;</span>
<span class="line-added">1767 </span>
<span class="line-added">1768         public void compare() {</span>
<span class="line-added">1769             if (iArr == null) {</span>
<span class="line-added">1770                 // First compare, initialize values</span>
<span class="line-added">1771                 this.iFld = PartialPeelingUnswitch.iFld;</span>
<span class="line-added">1772                 this.w = PartialPeelingUnswitch.w;</span>
<span class="line-added">1773                 this.x = PartialPeelingUnswitch.x;</span>
<span class="line-added">1774                 this.y = PartialPeelingUnswitch.y;</span>
<span class="line-added">1775                 this.z = PartialPeelingUnswitch.z;</span>
<span class="line-added">1776                 this.val = PartialPeelingUnswitch.val;</span>
<span class="line-added">1777                 this.iArr = new int[10];</span>
<span class="line-added">1778                 System.arraycopy(PartialPeelingUnswitch.iArr, 0, this.iArr, 0, 10);</span>
<span class="line-added">1779             } else {</span>
<span class="line-added">1780 </span>
<span class="line-added">1781                 // Do comparison</span>
<span class="line-added">1782                 boolean check = PartialPeelingUnswitch.iFld == this.iFld</span>
<span class="line-added">1783                                 &amp;&amp; this.w == PartialPeelingUnswitch.w</span>
<span class="line-added">1784                                 &amp;&amp; this.x == PartialPeelingUnswitch.x</span>
<span class="line-added">1785                                 &amp;&amp; this.y == PartialPeelingUnswitch.y</span>
<span class="line-added">1786                                 &amp;&amp; this.z == PartialPeelingUnswitch.z</span>
<span class="line-added">1787                                 &amp;&amp; this.val == PartialPeelingUnswitch.val;</span>
<span class="line-added">1788                 for (int i = 0; i &lt; 10; i++) {</span>
<span class="line-added">1789                     check = check &amp;&amp; this.iArr[i] == PartialPeelingUnswitch.iArr[i];</span>
<span class="line-added">1790                 }</span>
<span class="line-added">1791 </span>
<span class="line-added">1792                 if (!check) {</span>
<span class="line-added">1793                     throw new RuntimeException(&quot;Failed comparison&quot;);</span>
<span class="line-added">1794                 }</span>
<span class="line-added">1795             }</span>
<span class="line-added">1796         }</span>
<span class="line-added">1797 </span>
<span class="line-added">1798         public void compare(int i) {</span>
<span class="line-added">1799             if (i % 2 == 0 &amp;&amp; iArr == null) {</span>
<span class="line-added">1800                 // First compare, initialize values</span>
<span class="line-added">1801                 this.iFld = PartialPeelingUnswitch.iFld;</span>
<span class="line-added">1802                 this.w = PartialPeelingUnswitch.w;</span>
<span class="line-added">1803                 this.x = PartialPeelingUnswitch.x;</span>
<span class="line-added">1804                 this.y = PartialPeelingUnswitch.y;</span>
<span class="line-added">1805                 this.z = PartialPeelingUnswitch.z;</span>
<span class="line-added">1806                 this.val = PartialPeelingUnswitch.val;</span>
<span class="line-added">1807                 this.iArr = new int[10];</span>
<span class="line-added">1808                 System.arraycopy(PartialPeelingUnswitch.iArr, 0, this.iArr, 0, 10);</span>
<span class="line-added">1809             } else if (i % 2 != 0 &amp;&amp; iArr2 == null) {</span>
<span class="line-added">1810                 // First compare, initialize values</span>
<span class="line-added">1811                 this.iFld2 = PartialPeelingUnswitch.iFld;</span>
<span class="line-added">1812                 this.w2 = PartialPeelingUnswitch.w;</span>
<span class="line-added">1813                 this.x2 = PartialPeelingUnswitch.x;</span>
<span class="line-added">1814                 this.y2 = PartialPeelingUnswitch.y;</span>
<span class="line-added">1815                 this.z2 = PartialPeelingUnswitch.z;</span>
<span class="line-added">1816                 this.val2 = PartialPeelingUnswitch.val;</span>
<span class="line-added">1817                 this.iArr2 = new int[10];</span>
<span class="line-added">1818                 System.arraycopy(PartialPeelingUnswitch.iArr, 0, this.iArr2, 0, 10);</span>
<span class="line-added">1819             } else if (i % 2 == 0) {</span>
<span class="line-added">1820                 // Do comparison</span>
<span class="line-added">1821                 boolean check = PartialPeelingUnswitch.iFld == this.iFld</span>
<span class="line-added">1822                                 &amp;&amp; this.w == PartialPeelingUnswitch.w</span>
<span class="line-added">1823                                 &amp;&amp; this.x == PartialPeelingUnswitch.x</span>
<span class="line-added">1824                                 &amp;&amp; this.y == PartialPeelingUnswitch.y</span>
<span class="line-added">1825                                 &amp;&amp; this.z == PartialPeelingUnswitch.z</span>
<span class="line-added">1826                                 &amp;&amp; this.val == PartialPeelingUnswitch.val;</span>
<span class="line-added">1827                 for (int j = 0; j &lt; 10; j++) {</span>
<span class="line-added">1828                     check = check &amp;&amp; this.iArr[j] == PartialPeelingUnswitch.iArr[j];</span>
<span class="line-added">1829                 }</span>
<span class="line-added">1830 </span>
<span class="line-added">1831                 if (!check) {</span>
<span class="line-added">1832                     throw new RuntimeException(&quot;Failed comparison&quot;);</span>
<span class="line-added">1833                 }</span>
<span class="line-added">1834             } else {</span>
<span class="line-added">1835                 // Do comparison</span>
<span class="line-added">1836                 boolean check = PartialPeelingUnswitch.iFld == this.iFld2</span>
<span class="line-added">1837                                 &amp;&amp; this.w2 == PartialPeelingUnswitch.w</span>
<span class="line-added">1838                                 &amp;&amp; this.x2 == PartialPeelingUnswitch.x</span>
<span class="line-added">1839                                 &amp;&amp; this.y2 == PartialPeelingUnswitch.y</span>
<span class="line-added">1840                                 &amp;&amp; this.z2 == PartialPeelingUnswitch.z</span>
<span class="line-added">1841                                 &amp;&amp; this.val2 == PartialPeelingUnswitch.val;</span>
<span class="line-added">1842                 for (int j = 0; j &lt; 10; j++) {</span>
<span class="line-added">1843                     check = check &amp;&amp; this.iArr2[j] == PartialPeelingUnswitch.iArr[j];</span>
<span class="line-added">1844                 }</span>
<span class="line-added">1845 </span>
<span class="line-added">1846                 if (!check) {</span>
<span class="line-added">1847                     throw new RuntimeException(&quot;Failed comparison&quot;);</span>
<span class="line-added">1848                 }</span>
<span class="line-added">1849             }</span>
<span class="line-added">1850         }</span>
<span class="line-added">1851 </span>
<span class="line-added">1852         public static void setup() {</span>
<span class="line-added">1853             PartialPeelingUnswitch.iFld = 0;</span>
<span class="line-added">1854             PartialPeelingUnswitch.w = 88;</span>
<span class="line-added">1855             PartialPeelingUnswitch.x = 42;</span>
<span class="line-added">1856             PartialPeelingUnswitch.y = 31;</span>
<span class="line-added">1857             PartialPeelingUnswitch.z = 22;</span>
<span class="line-added">1858             PartialPeelingUnswitch.val = 34;</span>
<span class="line-added">1859             PartialPeelingUnswitch.iArr = new int[10];</span>
<span class="line-added">1860         }</span>
<span class="line-added">1861     }</span>
1862 }
</pre>
</td>
</tr>
</table>
<center><a href="../jvmci/jdk.vm.ci.hotspot.test/src/jdk/vm/ci/hotspot/test/TestTranslatedException.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="superword/Vec_MulAddS2I.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>