<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/autoconf/toolchain.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="spec.gmk.in.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="util.m4.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/toolchain.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1090,33 ***</span>
  
      if test ! -e &quot;$JT_HOME/lib/jtreg.jar&quot;; then
        AC_MSG_ERROR([jtreg home directory from --with-jtreg=$with_jtreg is not a valid jtreg home])
      fi
  
<span class="line-removed">-     JTREGEXE=&quot;$JT_HOME/bin/jtreg&quot;</span>
<span class="line-removed">-     if test ! -x &quot;$JTREGEXE&quot;; then</span>
<span class="line-removed">-       AC_MSG_ERROR([jtreg home directory from --with-jtreg=$with_jtreg does not contain valid jtreg executable])</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">- </span>
      AC_MSG_CHECKING([for jtreg test harness])
      AC_MSG_RESULT([$JT_HOME])
    else
<span class="line-modified">!     # Try to locate jtreg</span>
      if test &quot;x$JT_HOME&quot; != x; then
        # JT_HOME set in environment, use it
        if test ! -d &quot;$JT_HOME&quot;; then
          AC_MSG_WARN([Ignoring JT_HOME pointing to invalid directory: $JT_HOME])
          JT_HOME=
        else
          if test ! -e &quot;$JT_HOME/lib/jtreg.jar&quot;; then
            AC_MSG_WARN([Ignoring JT_HOME which is not a valid jtreg home: $JT_HOME])
            JT_HOME=
<span class="line-removed">-         elif test ! -x &quot;$JT_HOME/bin/jtreg&quot;; then</span>
<span class="line-removed">-           AC_MSG_WARN([Ignoring JT_HOME which does not contain valid jtreg executable: $JT_HOME])</span>
<span class="line-removed">-           JT_HOME=</span>
          else
<span class="line-removed">-           JTREGEXE=&quot;$JT_HOME/bin/jtreg&quot;</span>
            AC_MSG_NOTICE([Located jtreg using JT_HOME from environment])
          fi
        fi
      fi
  
<span class="line-new-header">--- 1090,24 ---</span>
  
      if test ! -e &quot;$JT_HOME/lib/jtreg.jar&quot;; then
        AC_MSG_ERROR([jtreg home directory from --with-jtreg=$with_jtreg is not a valid jtreg home])
      fi
  
      AC_MSG_CHECKING([for jtreg test harness])
      AC_MSG_RESULT([$JT_HOME])
    else
<span class="line-modified">!     # Try to locate jtreg using the JT_HOME environment variable</span>
      if test &quot;x$JT_HOME&quot; != x; then
        # JT_HOME set in environment, use it
        if test ! -d &quot;$JT_HOME&quot;; then
          AC_MSG_WARN([Ignoring JT_HOME pointing to invalid directory: $JT_HOME])
          JT_HOME=
        else
          if test ! -e &quot;$JT_HOME/lib/jtreg.jar&quot;; then
            AC_MSG_WARN([Ignoring JT_HOME which is not a valid jtreg home: $JT_HOME])
            JT_HOME=
          else
            AC_MSG_NOTICE([Located jtreg using JT_HOME from environment])
          fi
        fi
      fi
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1128,11 ***</span>
          # That&#39;s good, now try to derive JT_HOME
          JT_HOME=`(cd $($DIRNAME $JTREGEXE)/.. &amp;&amp; pwd)`
          if test ! -e &quot;$JT_HOME/lib/jtreg.jar&quot;; then
            AC_MSG_WARN([Ignoring jtreg from path since a valid jtreg home cannot be found])
            JT_HOME=
<span class="line-removed">-           JTREGEXE=</span>
          else
            AC_MSG_NOTICE([Located jtreg using jtreg executable in path])
          fi
        fi
      fi
<span class="line-new-header">--- 1119,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1147,14 ***</span>
          AC_MSG_ERROR([--with-jtreg was specified, but no jtreg found.])
        fi
      fi
    fi
  
<span class="line-removed">-   UTIL_FIXUP_EXECUTABLE(JTREGEXE)</span>
    UTIL_FIXUP_PATH(JT_HOME)
    AC_SUBST(JT_HOME)
<span class="line-removed">-   AC_SUBST(JTREGEXE)</span>
  ])
  
  # Setup the JIB dependency resolver
  AC_DEFUN_ONCE([TOOLCHAIN_SETUP_JIB],
  [
<span class="line-new-header">--- 1137,12 ---</span>
</pre>
<center><a href="spec.gmk.in.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="util.m4.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>