<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/autoconf/jdk-options.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="hotspot.m4.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="jvm-features.m4.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/jdk-options.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 44,23 ***</span>
  #    fastdebug: debug information (-g), all optimizations, all asserts
  #    slowdebug: debug information (-g), no optimizations, all asserts
  AC_DEFUN_ONCE([JDKOPT_SETUP_DEBUG_LEVEL],
  [
    DEBUG_LEVEL=&quot;release&quot;
<span class="line-removed">-   AC_MSG_CHECKING([which debug level to use])</span>
<span class="line-removed">-   AC_ARG_ENABLE([debug], [AS_HELP_STRING([--enable-debug],</span>
<span class="line-removed">-       [set the debug level to fastdebug (shorthand for --with-debug-level=fastdebug) @&lt;:@disabled@:&gt;@])],</span>
<span class="line-removed">-       [</span>
<span class="line-removed">-         ENABLE_DEBUG=&quot;${enableval}&quot;</span>
<span class="line-removed">-         DEBUG_LEVEL=&quot;fastdebug&quot;</span>
<span class="line-removed">-       ], [ENABLE_DEBUG=&quot;no&quot;])</span>
  
    AC_ARG_WITH([debug-level], [AS_HELP_STRING([--with-debug-level],
        [set the debug level (release, fastdebug, slowdebug, optimized) @&lt;:@release@:&gt;@])],
        [
          DEBUG_LEVEL=&quot;${withval}&quot;
<span class="line-modified">!         if test &quot;x$ENABLE_DEBUG&quot; = xyes; then</span>
            AC_MSG_ERROR([You cannot use both --enable-debug and --with-debug-level at the same time.])
          fi
        ])
    AC_MSG_RESULT([$DEBUG_LEVEL])
  
<span class="line-new-header">--- 44,21 ---</span>
  #    fastdebug: debug information (-g), all optimizations, all asserts
  #    slowdebug: debug information (-g), no optimizations, all asserts
  AC_DEFUN_ONCE([JDKOPT_SETUP_DEBUG_LEVEL],
  [
    DEBUG_LEVEL=&quot;release&quot;
  
<span class="line-added">+   UTIL_ARG_ENABLE(NAME: debug, DEFAULT: false, RESULT: ENABLE_DEBUG,</span>
<span class="line-added">+       DESC: [enable debugging (shorthand for --with-debug-level=fastdebug)],</span>
<span class="line-added">+       IF_ENABLED: [ DEBUG_LEVEL=&quot;fastdebug&quot; ])</span>
<span class="line-added">+ </span>
<span class="line-added">+   AC_MSG_CHECKING([which debug level to use])</span>
    AC_ARG_WITH([debug-level], [AS_HELP_STRING([--with-debug-level],
        [set the debug level (release, fastdebug, slowdebug, optimized) @&lt;:@release@:&gt;@])],
        [
          DEBUG_LEVEL=&quot;${withval}&quot;
<span class="line-modified">!         if test &quot;x$ENABLE_DEBUG&quot; = xtrue; then</span>
            AC_MSG_ERROR([You cannot use both --enable-debug and --with-debug-level at the same time.])
          fi
        ])
    AC_MSG_RESULT([$DEBUG_LEVEL])
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 101,117 ***</span>
  #
  # Should we build only OpenJDK even if closed sources are present?
  #
  AC_DEFUN_ONCE([JDKOPT_SETUP_OPEN_OR_CUSTOM],
  [
<span class="line-modified">!   AC_ARG_ENABLE([openjdk-only], [AS_HELP_STRING([--enable-openjdk-only],</span>
<span class="line-modified">!       [suppress building custom source even if present @&lt;:@disabled@:&gt;@])],,[enable_openjdk_only=&quot;no&quot;])</span>
<span class="line-modified">! </span>
<span class="line-modified">!   AC_MSG_CHECKING([if custom source is suppressed (openjdk-only)])</span>
<span class="line-removed">-   AC_MSG_RESULT([$enable_openjdk_only])</span>
<span class="line-removed">-   if test &quot;x$enable_openjdk_only&quot; = &quot;xyes&quot;; then</span>
<span class="line-removed">-     SUPPRESS_CUSTOM_EXTENSIONS=&quot;true&quot;</span>
<span class="line-removed">-   elif test &quot;x$enable_openjdk_only&quot; = &quot;xno&quot;; then</span>
<span class="line-removed">-     SUPPRESS_CUSTOM_EXTENSIONS=&quot;false&quot;</span>
<span class="line-removed">-   else</span>
<span class="line-removed">-     AC_MSG_ERROR([Invalid value for --enable-openjdk-only: $enable_openjdk_only])</span>
<span class="line-removed">-   fi</span>
  ])
  
  AC_DEFUN_ONCE([JDKOPT_SETUP_JDK_OPTIONS],
  [
    # Should we build a JDK without a graphical UI?
<span class="line-modified">!   AC_MSG_CHECKING([headless only])</span>
<span class="line-modified">!   AC_ARG_ENABLE([headless-only], [AS_HELP_STRING([--enable-headless-only],</span>
<span class="line-modified">!       [only build headless (no GUI) support @&lt;:@disabled@:&gt;@])])</span>
<span class="line-modified">! </span>
<span class="line-removed">-   if test &quot;x$enable_headless_only&quot; = &quot;xyes&quot;; then</span>
<span class="line-removed">-     ENABLE_HEADLESS_ONLY=&quot;true&quot;</span>
<span class="line-removed">-     AC_MSG_RESULT([yes])</span>
<span class="line-removed">-   elif test &quot;x$enable_headless_only&quot; = &quot;xno&quot;; then</span>
<span class="line-removed">-     ENABLE_HEADLESS_ONLY=&quot;false&quot;</span>
<span class="line-removed">-     AC_MSG_RESULT([no])</span>
<span class="line-removed">-   elif test &quot;x$enable_headless_only&quot; = &quot;x&quot;; then</span>
<span class="line-removed">-     ENABLE_HEADLESS_ONLY=&quot;false&quot;</span>
<span class="line-removed">-     AC_MSG_RESULT([no])</span>
<span class="line-removed">-   else</span>
<span class="line-removed">-     AC_MSG_ERROR([--enable-headless-only can only take yes or no])</span>
<span class="line-removed">-   fi</span>
<span class="line-removed">- </span>
    AC_SUBST(ENABLE_HEADLESS_ONLY)
  
    # should we linktime gc unused code sections in the JDK build ?
<span class="line-modified">!   AC_MSG_CHECKING([linktime gc])</span>
<span class="line-modified">!   AC_ARG_ENABLE([linktime-gc], [AS_HELP_STRING([--enable-linktime-gc],</span>
<span class="line-removed">-       [linktime gc unused code sections in the JDK build @&lt;:@disabled@:&gt;@])])</span>
<span class="line-removed">- </span>
<span class="line-removed">-   if test &quot;x$enable_linktime_gc&quot; = &quot;xyes&quot;; then</span>
<span class="line-removed">-     ENABLE_LINKTIME_GC=&quot;true&quot;</span>
<span class="line-removed">-     AC_MSG_RESULT([yes])</span>
<span class="line-removed">-   elif test &quot;x$enable_linktime_gc&quot; = &quot;xno&quot;; then</span>
<span class="line-removed">-     ENABLE_LINKTIME_GC=&quot;false&quot;</span>
<span class="line-removed">-     AC_MSG_RESULT([no])</span>
<span class="line-removed">-   elif test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xlinux&quot; &amp;&amp; test &quot;x$OPENJDK_TARGET_CPU&quot; = xs390x; then</span>
<span class="line-removed">-     ENABLE_LINKTIME_GC=&quot;true&quot;</span>
<span class="line-removed">-     AC_MSG_RESULT([yes])</span>
<span class="line-removed">-   elif test &quot;x$enable_linktime_gc&quot; = &quot;x&quot;; then</span>
<span class="line-removed">-     ENABLE_LINKTIME_GC=&quot;false&quot;</span>
<span class="line-removed">-     AC_MSG_RESULT([no])</span>
    else
<span class="line-modified">!     AC_MSG_ERROR([--enable-linktime-gc can only take yes or no])</span>
    fi
  
    AC_SUBST(ENABLE_LINKTIME_GC)
  
<span class="line-modified">! </span>
<span class="line-modified">!   # Should we build the complete docs, or just a lightweight version?</span>
<span class="line-removed">-   AC_ARG_ENABLE([full-docs], [AS_HELP_STRING([--enable-full-docs],</span>
<span class="line-removed">-       [build complete documentation @&lt;:@enabled if all tools found@:&gt;@])])</span>
<span class="line-removed">- </span>
<span class="line-removed">-   # Verify dependencies</span>
    AC_MSG_CHECKING([for graphviz dot])
    if test &quot;x$DOT&quot; != &quot;x&quot;; then
      AC_MSG_RESULT([yes])
    else
      AC_MSG_RESULT([no, cannot generate full docs])
<span class="line-modified">!     FULL_DOCS_DEP_MISSING=true</span>
    fi
  
    AC_MSG_CHECKING([for pandoc])
    if test &quot;x$PANDOC&quot; != &quot;x&quot;; then
      AC_MSG_RESULT([yes])
    else
      AC_MSG_RESULT([no, cannot generate full docs])
<span class="line-modified">!     FULL_DOCS_DEP_MISSING=true</span>
<span class="line-removed">-   fi</span>
<span class="line-removed">- </span>
<span class="line-removed">-   AC_MSG_CHECKING([full docs])</span>
<span class="line-removed">-   if test &quot;x$enable_full_docs&quot; = xyes; then</span>
<span class="line-removed">-     if test &quot;x$FULL_DOCS_DEP_MISSING&quot; = &quot;xtrue&quot;; then</span>
<span class="line-removed">-       AC_MSG_RESULT([no, missing dependencies])</span>
<span class="line-removed">-       HELP_MSG_MISSING_DEPENDENCY([dot])</span>
<span class="line-removed">-       AC_MSG_ERROR([Cannot enable full docs with missing dependencies. See above. $HELP_MSG])</span>
<span class="line-removed">-     else</span>
<span class="line-removed">-       ENABLE_FULL_DOCS=true</span>
<span class="line-removed">-       AC_MSG_RESULT([yes, forced])</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">-   elif test &quot;x$enable_full_docs&quot; = xno; then</span>
<span class="line-removed">-     ENABLE_FULL_DOCS=false</span>
<span class="line-removed">-     AC_MSG_RESULT([no, forced])</span>
<span class="line-removed">-   elif test &quot;x$enable_full_docs&quot; = x; then</span>
<span class="line-removed">-     # Check for prerequisites</span>
<span class="line-removed">-     if test &quot;x$FULL_DOCS_DEP_MISSING&quot; = xtrue; then</span>
<span class="line-removed">-       ENABLE_FULL_DOCS=false</span>
<span class="line-removed">-       AC_MSG_RESULT([no, missing dependencies])</span>
<span class="line-removed">-     else</span>
<span class="line-removed">-       ENABLE_FULL_DOCS=true</span>
<span class="line-removed">-       AC_MSG_RESULT([yes, dependencies present])</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">-   else</span>
<span class="line-removed">-     AC_MSG_ERROR([--enable-full-docs can only take yes or no])</span>
    fi
  
    AC_SUBST(ENABLE_FULL_DOCS)
  
    # Choose cacerts source file
    AC_ARG_WITH(cacerts-file, [AS_HELP_STRING([--with-cacerts-file],
        [specify alternative cacerts file])])
<span class="line-new-header">--- 99,60 ---</span>
  #
  # Should we build only OpenJDK even if closed sources are present?
  #
  AC_DEFUN_ONCE([JDKOPT_SETUP_OPEN_OR_CUSTOM],
  [
<span class="line-modified">!   UTIL_ARG_ENABLE(NAME: openjdk-only, DEFAULT: false,</span>
<span class="line-modified">!       RESULT: SUPPRESS_CUSTOM_EXTENSIONS,</span>
<span class="line-modified">!       DESC: [suppress building custom source even if present],</span>
<span class="line-modified">!       CHECKING_MSG: [if custom source is suppressed (openjdk-only)])</span>
  ])
  
  AC_DEFUN_ONCE([JDKOPT_SETUP_JDK_OPTIONS],
  [
    # Should we build a JDK without a graphical UI?
<span class="line-modified">!   UTIL_ARG_ENABLE(NAME: headless-only, DEFAULT: false,</span>
<span class="line-modified">!       RESULT: ENABLE_HEADLESS_ONLY,</span>
<span class="line-modified">!       DESC: [only build headless (no GUI) support],</span>
<span class="line-modified">!       CHECKING_MSG: [if we should build headless-only (no GUI)])</span>
    AC_SUBST(ENABLE_HEADLESS_ONLY)
  
    # should we linktime gc unused code sections in the JDK build ?
<span class="line-modified">!   if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xlinux&quot; &amp;&amp; test &quot;x$OPENJDK_TARGET_CPU&quot; = xs390x; then</span>
<span class="line-modified">!     LINKTIME_GC_DEFAULT=true</span>
    else
<span class="line-modified">!     LINKTIME_GC_DEFAULT=false</span>
    fi
  
<span class="line-added">+   UTIL_ARG_ENABLE(NAME: linktime-gc, DEFAULT: $LINKTIME_GC_DEFAULT,</span>
<span class="line-added">+       DEFAULT_DESC: [auto], RESULT: ENABLE_LINKTIME_GC,</span>
<span class="line-added">+       DESC: [use link time gc on unused code sections in the JDK build],</span>
<span class="line-added">+       CHECKING_MSG: [if linker should clean out unused code (linktime-gc)])</span>
    AC_SUBST(ENABLE_LINKTIME_GC)
  
<span class="line-modified">!   # Check for full doc dependencies</span>
<span class="line-modified">!   FULL_DOCS_AVAILABLE=true</span>
    AC_MSG_CHECKING([for graphviz dot])
    if test &quot;x$DOT&quot; != &quot;x&quot;; then
      AC_MSG_RESULT([yes])
    else
      AC_MSG_RESULT([no, cannot generate full docs])
<span class="line-modified">!     FULL_DOCS_AVAILABLE=false</span>
    fi
  
    AC_MSG_CHECKING([for pandoc])
    if test &quot;x$PANDOC&quot; != &quot;x&quot;; then
      AC_MSG_RESULT([yes])
    else
      AC_MSG_RESULT([no, cannot generate full docs])
<span class="line-modified">!     FULL_DOCS_AVAILABLE=false</span>
    fi
  
<span class="line-added">+   # Should we build the complete docs, or just a lightweight version?</span>
<span class="line-added">+   UTIL_ARG_ENABLE(NAME: full-docs, DEFAULT: auto, RESULT: ENABLE_FULL_DOCS,</span>
<span class="line-added">+       AVAILABLE: $FULL_DOCS_AVAILABLE, DESC: [build complete documentation],</span>
<span class="line-added">+       DEFAULT_DESC: [enabled if all tools found])</span>
    AC_SUBST(ENABLE_FULL_DOCS)
  
    # Choose cacerts source file
    AC_ARG_WITH(cacerts-file, [AS_HELP_STRING([--with-cacerts-file],
        [specify alternative cacerts file])])
</pre>
<hr />
<pre>
<span class="line-old-header">*** 227,18 ***</span>
      AC_MSG_RESULT([$CACERTS_FILE])
    fi
    AC_SUBST(CACERTS_FILE)
  
    # Enable or disable unlimited crypto
<span class="line-modified">!   AC_ARG_ENABLE(unlimited-crypto, [AS_HELP_STRING([--disable-unlimited-crypto],</span>
<span class="line-modified">!       [Disable unlimited crypto policy @&lt;:@enabled@:&gt;@])],,</span>
<span class="line-removed">-       [enable_unlimited_crypto=yes])</span>
<span class="line-removed">-   if test &quot;x$enable_unlimited_crypto&quot; = &quot;xyes&quot;; then</span>
<span class="line-removed">-     UNLIMITED_CRYPTO=true</span>
<span class="line-removed">-   else</span>
<span class="line-removed">-     UNLIMITED_CRYPTO=false</span>
<span class="line-removed">-   fi</span>
    AC_SUBST(UNLIMITED_CRYPTO)
  
    # Should we build the serviceability agent (SA)?
    INCLUDE_SA=true
    if HOTSPOT_CHECK_JVM_VARIANT(zero); then
<span class="line-new-header">--- 168,12 ---</span>
      AC_MSG_RESULT([$CACERTS_FILE])
    fi
    AC_SUBST(CACERTS_FILE)
  
    # Enable or disable unlimited crypto
<span class="line-modified">!   UTIL_ARG_ENABLE(NAME: unlimited-crypto, DEFAULT: true, RESULT: UNLIMITED_CRYPTO,</span>
<span class="line-modified">!       DESC: [enable unlimited crypto policy])</span>
    AC_SUBST(UNLIMITED_CRYPTO)
  
    # Should we build the serviceability agent (SA)?
    INCLUDE_SA=true
    if HOTSPOT_CHECK_JVM_VARIANT(zero); then
</pre>
<hr />
<pre>
<span class="line-old-header">*** 420,40 ***</span>
  #
  # Native and Java code coverage
  #
  AC_DEFUN_ONCE([JDKOPT_SETUP_CODE_COVERAGE],
  [
<span class="line-modified">!   AC_ARG_ENABLE(native-coverage, [AS_HELP_STRING([--enable-native-coverage],</span>
<span class="line-modified">!       [enable native compilation with code coverage data@&lt;:@disabled@:&gt;@])])</span>
<span class="line-modified">!   GCOV_ENABLED=&quot;false&quot;</span>
<span class="line-modified">!   if test &quot;x$enable_native_coverage&quot; = &quot;xyes&quot;; then</span>
<span class="line-modified">!     case $TOOLCHAIN_TYPE in</span>
<span class="line-modified">!       gcc | clang)</span>
<span class="line-modified">!         AC_MSG_CHECKING([if native coverage is enabled])</span>
<span class="line-modified">!         AC_MSG_RESULT([yes])</span>
          GCOV_CFLAGS=&quot;-fprofile-arcs -ftest-coverage -fno-inline&quot;
          GCOV_LDFLAGS=&quot;-fprofile-arcs&quot;
          JVM_CFLAGS=&quot;$JVM_CFLAGS $GCOV_CFLAGS&quot;
          JVM_LDFLAGS=&quot;$JVM_LDFLAGS $GCOV_LDFLAGS&quot;
          CFLAGS_JDKLIB=&quot;$CFLAGS_JDKLIB $GCOV_CFLAGS&quot;
          CFLAGS_JDKEXE=&quot;$CFLAGS_JDKEXE $GCOV_CFLAGS&quot;
          CXXFLAGS_JDKLIB=&quot;$CXXFLAGS_JDKLIB $GCOV_CFLAGS&quot;
          CXXFLAGS_JDKEXE=&quot;$CXXFLAGS_JDKEXE $GCOV_CFLAGS&quot;
          LDFLAGS_JDKLIB=&quot;$LDFLAGS_JDKLIB $GCOV_LDFLAGS&quot;
          LDFLAGS_JDKEXE=&quot;$LDFLAGS_JDKEXE $GCOV_LDFLAGS&quot;
<span class="line-modified">!         GCOV_ENABLED=&quot;true&quot;</span>
<span class="line-removed">-         ;;</span>
<span class="line-removed">-       *)</span>
<span class="line-removed">-         AC_MSG_ERROR([--enable-native-coverage only works with toolchain type gcc or clang])</span>
<span class="line-removed">-         ;;</span>
<span class="line-removed">-     esac</span>
<span class="line-removed">-   elif test &quot;x$enable_native_coverage&quot; = &quot;xno&quot;; then</span>
<span class="line-removed">-     AC_MSG_CHECKING([if native coverage is enabled])</span>
<span class="line-removed">-     AC_MSG_RESULT([no])</span>
<span class="line-removed">-   elif test &quot;x$enable_native_coverage&quot; != &quot;x&quot;; then</span>
<span class="line-removed">-     AC_MSG_ERROR([--enable-native-coverage can only be assigned &quot;yes&quot; or &quot;no&quot;])</span>
<span class="line-removed">-   fi</span>
    AC_SUBST(GCOV_ENABLED)
  
    AC_ARG_WITH(jcov, [AS_HELP_STRING([--with-jcov],
        [jcov library location])])
    AC_ARG_WITH(jcov-input-jdk, [AS_HELP_STRING([--with-jcov-input-jdk],
<span class="line-new-header">--- 355,34 ---</span>
  #
  # Native and Java code coverage
  #
  AC_DEFUN_ONCE([JDKOPT_SETUP_CODE_COVERAGE],
  [
<span class="line-modified">!   UTIL_ARG_ENABLE(NAME: native-coverage, DEFAULT: false, RESULT: GCOV_ENABLED,</span>
<span class="line-modified">!       DESC: [enable native compilation with code coverage data],</span>
<span class="line-modified">!       CHECK_AVAILABLE: [</span>
<span class="line-modified">!         AC_MSG_CHECKING([if native coverage is available])</span>
<span class="line-modified">!         if test &quot;x$TOOLCHAIN_TYPE&quot; = &quot;xgcc&quot; ||</span>
<span class="line-modified">!             test &quot;x$TOOLCHAIN_TYPE&quot; = &quot;xclang&quot;; then</span>
<span class="line-modified">!           AC_MSG_RESULT([yes])</span>
<span class="line-modified">!         else</span>
<span class="line-added">+           AC_MSG_RESULT([no])</span>
<span class="line-added">+           AVAILABLE=false</span>
<span class="line-added">+         fi</span>
<span class="line-added">+       ],</span>
<span class="line-added">+       IF_ENABLED: [</span>
          GCOV_CFLAGS=&quot;-fprofile-arcs -ftest-coverage -fno-inline&quot;
          GCOV_LDFLAGS=&quot;-fprofile-arcs&quot;
          JVM_CFLAGS=&quot;$JVM_CFLAGS $GCOV_CFLAGS&quot;
          JVM_LDFLAGS=&quot;$JVM_LDFLAGS $GCOV_LDFLAGS&quot;
          CFLAGS_JDKLIB=&quot;$CFLAGS_JDKLIB $GCOV_CFLAGS&quot;
          CFLAGS_JDKEXE=&quot;$CFLAGS_JDKEXE $GCOV_CFLAGS&quot;
          CXXFLAGS_JDKLIB=&quot;$CXXFLAGS_JDKLIB $GCOV_CFLAGS&quot;
          CXXFLAGS_JDKEXE=&quot;$CXXFLAGS_JDKEXE $GCOV_CFLAGS&quot;
          LDFLAGS_JDKLIB=&quot;$LDFLAGS_JDKLIB $GCOV_LDFLAGS&quot;
          LDFLAGS_JDKEXE=&quot;$LDFLAGS_JDKEXE $GCOV_LDFLAGS&quot;
<span class="line-modified">!       ])</span>
    AC_SUBST(GCOV_ENABLED)
  
    AC_ARG_WITH(jcov, [AS_HELP_STRING([--with-jcov],
        [jcov library location])])
    AC_ARG_WITH(jcov-input-jdk, [AS_HELP_STRING([--with-jcov-input-jdk],
</pre>
<hr />
<pre>
<span class="line-old-header">*** 496,18 ***</span>
  #
  # AddressSanitizer
  #
  AC_DEFUN_ONCE([JDKOPT_SETUP_ADDRESS_SANITIZER],
  [
<span class="line-modified">!   AC_ARG_ENABLE(asan, [AS_HELP_STRING([--enable-asan],</span>
<span class="line-modified">!       [enable AddressSanitizer if possible @&lt;:@disabled@:&gt;@])])</span>
<span class="line-modified">!   ASAN_ENABLED=&quot;no&quot;</span>
<span class="line-modified">!   if test &quot;x$enable_asan&quot; = &quot;xyes&quot;; then</span>
<span class="line-modified">!     case $TOOLCHAIN_TYPE in</span>
<span class="line-modified">!       gcc | clang)</span>
<span class="line-modified">!         AC_MSG_CHECKING([if asan is enabled])</span>
<span class="line-modified">!         AC_MSG_RESULT([yes])</span>
          ASAN_CFLAGS=&quot;-fsanitize=address -fno-omit-frame-pointer&quot;
          ASAN_LDFLAGS=&quot;-fsanitize=address&quot;
          JVM_CFLAGS=&quot;$JVM_CFLAGS $ASAN_CFLAGS&quot;
          JVM_LDFLAGS=&quot;$JVM_LDFLAGS $ASAN_LDFLAGS&quot;
          CFLAGS_JDKLIB=&quot;$CFLAGS_JDKLIB $ASAN_CFLAGS&quot;
<span class="line-new-header">--- 425,23 ---</span>
  #
  # AddressSanitizer
  #
  AC_DEFUN_ONCE([JDKOPT_SETUP_ADDRESS_SANITIZER],
  [
<span class="line-modified">!   UTIL_ARG_ENABLE(NAME: asan, DEFAULT: false,</span>
<span class="line-modified">!       DESC: [enable AddressSanitizer],</span>
<span class="line-modified">!       CHECK_AVAILABLE: [</span>
<span class="line-modified">!         AC_MSG_CHECKING([if AddressSanitizer (asan) is available])</span>
<span class="line-modified">!         if test &quot;x$TOOLCHAIN_TYPE&quot; = &quot;xgcc&quot; ||</span>
<span class="line-modified">!             test &quot;x$TOOLCHAIN_TYPE&quot; = &quot;xclang&quot;; then</span>
<span class="line-modified">!           AC_MSG_RESULT([yes])</span>
<span class="line-modified">!         else</span>
<span class="line-added">+           AC_MSG_RESULT([no])</span>
<span class="line-added">+           AVAILABLE=false</span>
<span class="line-added">+         fi</span>
<span class="line-added">+       ],</span>
<span class="line-added">+       IF_ENABLED: [</span>
          ASAN_CFLAGS=&quot;-fsanitize=address -fno-omit-frame-pointer&quot;
          ASAN_LDFLAGS=&quot;-fsanitize=address&quot;
          JVM_CFLAGS=&quot;$JVM_CFLAGS $ASAN_CFLAGS&quot;
          JVM_LDFLAGS=&quot;$JVM_LDFLAGS $ASAN_LDFLAGS&quot;
          CFLAGS_JDKLIB=&quot;$CFLAGS_JDKLIB $ASAN_CFLAGS&quot;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 515,21 ***</span>
          CXXFLAGS_JDKLIB=&quot;$CXXFLAGS_JDKLIB $ASAN_CFLAGS&quot;
          CXXFLAGS_JDKEXE=&quot;$CXXFLAGS_JDKEXE $ASAN_CFLAGS&quot;
          LDFLAGS_JDKLIB=&quot;$LDFLAGS_JDKLIB $ASAN_LDFLAGS&quot;
          LDFLAGS_JDKEXE=&quot;$LDFLAGS_JDKEXE $ASAN_LDFLAGS&quot;
          ASAN_ENABLED=&quot;yes&quot;
<span class="line-modified">!         ;;</span>
<span class="line-modified">!       *)</span>
<span class="line-modified">!         AC_MSG_ERROR([--enable-asan only works with toolchain type gcc or clang])</span>
<span class="line-modified">!         ;;</span>
<span class="line-removed">-     esac</span>
<span class="line-removed">-   elif test &quot;x$enable_asan&quot; = &quot;xno&quot;; then</span>
<span class="line-removed">-     AC_MSG_CHECKING([if asan is enabled])</span>
<span class="line-removed">-     AC_MSG_RESULT([no])</span>
<span class="line-removed">-   elif test &quot;x$enable_asan&quot; != &quot;x&quot;; then</span>
<span class="line-removed">-     AC_MSG_ERROR([--enable-asan can only be assigned &quot;yes&quot; or &quot;no&quot;])</span>
<span class="line-removed">-   fi</span>
  
    AC_SUBST(ASAN_ENABLED)
  ])
  
  ################################################################################
<span class="line-new-header">--- 449,14 ---</span>
          CXXFLAGS_JDKLIB=&quot;$CXXFLAGS_JDKLIB $ASAN_CFLAGS&quot;
          CXXFLAGS_JDKEXE=&quot;$CXXFLAGS_JDKEXE $ASAN_CFLAGS&quot;
          LDFLAGS_JDKLIB=&quot;$LDFLAGS_JDKLIB $ASAN_LDFLAGS&quot;
          LDFLAGS_JDKEXE=&quot;$LDFLAGS_JDKEXE $ASAN_LDFLAGS&quot;
          ASAN_ENABLED=&quot;yes&quot;
<span class="line-modified">!       ],</span>
<span class="line-modified">!       IF_DISABLED: [</span>
<span class="line-modified">!         ASAN_ENABLED=&quot;no&quot;</span>
<span class="line-modified">!       ])</span>
  
    AC_SUBST(ASAN_ENABLED)
  ])
  
  ################################################################################
</pre>
<hr />
<pre>
<span class="line-old-header">*** 537,139 ***</span>
  # Static build support.  When enabled will generate static
  # libraries instead of shared libraries for all JDK libs.
  #
  AC_DEFUN_ONCE([JDKOPT_SETUP_STATIC_BUILD],
  [
<span class="line-modified">!   AC_ARG_ENABLE([static-build], [AS_HELP_STRING([--enable-static-build],</span>
<span class="line-modified">!     [enable static library build @&lt;:@disabled@:&gt;@])])</span>
<span class="line-modified">!   STATIC_BUILD=false</span>
<span class="line-modified">!   if test &quot;x$enable_static_build&quot; = &quot;xyes&quot;; then</span>
<span class="line-modified">!     AC_MSG_CHECKING([if static build is enabled])</span>
<span class="line-modified">!     AC_MSG_RESULT([yes])</span>
<span class="line-modified">!     if test &quot;x$OPENJDK_TARGET_OS&quot; != &quot;xmacosx&quot;; then</span>
<span class="line-modified">!       AC_MSG_ERROR([--enable-static-build is only supported for macosx builds])</span>
<span class="line-modified">!     fi</span>
<span class="line-modified">!     STATIC_BUILD_CFLAGS=&quot;-DSTATIC_BUILD=1&quot;</span>
<span class="line-modified">!     CFLAGS_JDKLIB_EXTRA=&quot;$CFLAGS_JDKLIB_EXTRA $STATIC_BUILD_CFLAGS&quot;</span>
<span class="line-modified">!     CXXFLAGS_JDKLIB_EXTRA=&quot;$CXXFLAGS_JDKLIB_EXTRA $STATIC_BUILD_CFLAGS&quot;</span>
<span class="line-modified">!     STATIC_BUILD=true</span>
<span class="line-modified">!   elif test &quot;x$enable_static_build&quot; = &quot;xno&quot;; then</span>
<span class="line-modified">!     AC_MSG_CHECKING([if static build is enabled])</span>
<span class="line-modified">!     AC_MSG_RESULT([no])</span>
<span class="line-modified">!   elif test &quot;x$enable_static_build&quot; != &quot;x&quot;; then</span>
<span class="line-removed">-     AC_MSG_ERROR([--enable-static-build can only be assigned &quot;yes&quot; or &quot;no&quot;])</span>
<span class="line-removed">-   fi</span>
<span class="line-removed">- </span>
    AC_SUBST(STATIC_BUILD)
  ])
  
  ################################################################################
  #
  # jlink options.
  # We always keep packaged modules in JDK image.
  #
  AC_DEFUN_ONCE([JDKOPT_SETUP_JLINK_OPTIONS],
  [
<span class="line-modified">!   AC_ARG_ENABLE([keep-packaged-modules], [AS_HELP_STRING([--disable-keep-packaged-modules],</span>
<span class="line-modified">!     [Do not keep packaged modules in jdk image @&lt;:@enable@:&gt;@])])</span>
<span class="line-modified">! </span>
<span class="line-modified">!   AC_MSG_CHECKING([if packaged modules are kept])</span>
<span class="line-removed">-   if test &quot;x$enable_keep_packaged_modules&quot; = &quot;xyes&quot;; then</span>
<span class="line-removed">-     AC_MSG_RESULT([yes])</span>
<span class="line-removed">-     JLINK_KEEP_PACKAGED_MODULES=true</span>
<span class="line-removed">-   elif test &quot;x$enable_keep_packaged_modules&quot; = &quot;xno&quot;; then</span>
<span class="line-removed">-     AC_MSG_RESULT([no])</span>
<span class="line-removed">-     JLINK_KEEP_PACKAGED_MODULES=false</span>
<span class="line-removed">-   elif test &quot;x$enable_keep_packaged_modules&quot; = &quot;x&quot;; then</span>
<span class="line-removed">-     AC_MSG_RESULT([yes (default)])</span>
<span class="line-removed">-     JLINK_KEEP_PACKAGED_MODULES=true</span>
<span class="line-removed">-   else</span>
<span class="line-removed">-     AC_MSG_RESULT([error])</span>
<span class="line-removed">-     AC_MSG_ERROR([--enable-keep-packaged-modules accepts no argument])</span>
<span class="line-removed">-   fi</span>
<span class="line-removed">- </span>
    AC_SUBST(JLINK_KEEP_PACKAGED_MODULES)
  ])
  
  ################################################################################
  #
  # Check if building of the jtreg failure handler should be enabled.
  #
  AC_DEFUN_ONCE([JDKOPT_ENABLE_DISABLE_FAILURE_HANDLER],
  [
<span class="line-modified">!   AC_ARG_ENABLE([jtreg-failure-handler], [AS_HELP_STRING([--enable-jtreg-failure-handler],</span>
<span class="line-modified">!     [forces build of the jtreg failure handler to be enabled, missing dependencies</span>
<span class="line-modified">!      become fatal errors. Default is auto, where the failure handler is built if all</span>
<span class="line-modified">!      dependencies are present and otherwise just disabled.])])</span>
<span class="line-modified">! </span>
<span class="line-modified">!   AC_MSG_CHECKING([if jtreg failure handler should be built])</span>
<span class="line-modified">! </span>
<span class="line-modified">!   if test &quot;x$enable_jtreg_failure_handler&quot; = &quot;xyes&quot;; then</span>
<span class="line-modified">!     if test &quot;x$JT_HOME&quot; = &quot;x&quot;; then</span>
<span class="line-modified">!       AC_MSG_ERROR([Cannot enable jtreg failure handler without jtreg.])</span>
<span class="line-modified">!     else</span>
<span class="line-modified">!       BUILD_FAILURE_HANDLER=true</span>
<span class="line-modified">!       AC_MSG_RESULT([yes, forced])</span>
<span class="line-modified">!     fi</span>
<span class="line-removed">-   elif test &quot;x$enable_jtreg_failure_handler&quot; = &quot;xno&quot;; then</span>
<span class="line-removed">-     BUILD_FAILURE_HANDLER=false</span>
<span class="line-removed">-     AC_MSG_RESULT([no, forced])</span>
<span class="line-removed">-   elif test &quot;x$enable_jtreg_failure_handler&quot; = &quot;xauto&quot; \</span>
<span class="line-removed">-       || test &quot;x$enable_jtreg_failure_handler&quot; = &quot;x&quot;; then</span>
<span class="line-removed">-     if test &quot;x$JT_HOME&quot; = &quot;x&quot;; then</span>
<span class="line-removed">-       BUILD_FAILURE_HANDLER=false</span>
<span class="line-removed">-       AC_MSG_RESULT([no, missing jtreg])</span>
<span class="line-removed">-     else</span>
<span class="line-removed">-       BUILD_FAILURE_HANDLER=true</span>
<span class="line-removed">-       AC_MSG_RESULT([yes, jtreg present])</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">-   else</span>
<span class="line-removed">-     AC_MSG_ERROR([Invalid value for --enable-jtreg-failure-handler: $enable_jtreg_failure_handler])</span>
<span class="line-removed">-   fi</span>
<span class="line-removed">- </span>
    AC_SUBST(BUILD_FAILURE_HANDLER)
  ])
  
  ################################################################################
  #
  # Enable or disable generation of the classlist at build time
  #
  AC_DEFUN_ONCE([JDKOPT_ENABLE_DISABLE_GENERATE_CLASSLIST],
  [
<span class="line-modified">!   AC_ARG_ENABLE([generate-classlist], [AS_HELP_STRING([--disable-generate-classlist],</span>
<span class="line-modified">!       [forces enabling or disabling of the generation of a CDS classlist at build time.</span>
<span class="line-modified">!       Default is to generate it when either the server or client JVMs are built and</span>
<span class="line-modified">!       enable-cds is true.])])</span>
<span class="line-modified">! </span>
<span class="line-modified">!   # In jvm-features.m4 ENABLE_CDS is set to true iff all JVM variants has cds</span>
<span class="line-modified">!   # enabled.</span>
<span class="line-modified">! </span>
<span class="line-removed">-   AC_MSG_CHECKING([if the CDS classlist generation should be enabled])</span>
<span class="line-removed">-   if test &quot;x$enable_generate_classlist&quot; = &quot;xyes&quot;; then</span>
<span class="line-removed">-     AC_MSG_RESULT([yes, forced])</span>
<span class="line-removed">-     ENABLE_GENERATE_CLASSLIST=&quot;true&quot;</span>
<span class="line-removed">-     if test &quot;x$ENABLE_CDS&quot; = &quot;xfalse&quot;; then</span>
<span class="line-removed">-       # In GenerateLinkOptData.gmk, DumpLoadedClassList is used to generate the</span>
<span class="line-removed">-       # classlist file. It never will work in this case since the VM will report</span>
<span class="line-removed">-       # an error for DumpLoadedClassList when CDS is disabled.</span>
<span class="line-removed">-       AC_MSG_ERROR([Generation of classlist is not possible without JVM feature &#39;cds&#39;])</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">-   elif test &quot;x$enable_generate_classlist&quot; = &quot;xno&quot;; then</span>
<span class="line-removed">-     AC_MSG_RESULT([no, forced])</span>
<span class="line-removed">-     ENABLE_GENERATE_CLASSLIST=&quot;false&quot;</span>
<span class="line-removed">-   elif test &quot;x$enable_generate_classlist&quot; = &quot;x&quot;; then</span>
<span class="line-removed">-     if test &quot;x$ENABLE_CDS&quot; = &quot;xtrue&quot;; then</span>
<span class="line-removed">-       AC_MSG_RESULT([yes])</span>
<span class="line-removed">-       ENABLE_GENERATE_CLASSLIST=&quot;true&quot;</span>
<span class="line-removed">-     else</span>
<span class="line-removed">-       AC_MSG_RESULT([no])</span>
<span class="line-removed">-       ENABLE_GENERATE_CLASSLIST=&quot;false&quot;</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">-   else</span>
<span class="line-removed">-     AC_MSG_ERROR([Invalid value for --enable-generate-classlist: $enable_generate_classlist])</span>
<span class="line-removed">-   fi</span>
<span class="line-removed">- </span>
    AC_SUBST(ENABLE_GENERATE_CLASSLIST)
  ])
  
  ################################################################################
  #
<span class="line-new-header">--- 464,81 ---</span>
  # Static build support.  When enabled will generate static
  # libraries instead of shared libraries for all JDK libs.
  #
  AC_DEFUN_ONCE([JDKOPT_SETUP_STATIC_BUILD],
  [
<span class="line-modified">!   UTIL_ARG_ENABLE(NAME: static-build, DEFAULT: false, RESULT: STATIC_BUILD,</span>
<span class="line-modified">!       DESC: [enable static library build],</span>
<span class="line-modified">!       CHECKING_MSG: [if static build is enabled],</span>
<span class="line-modified">!       CHECK_AVAILABLE: [</span>
<span class="line-modified">!         AC_MSG_CHECKING([if static build is available])</span>
<span class="line-modified">!         if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xmacosx&quot;; then</span>
<span class="line-modified">!           AC_MSG_RESULT([yes])</span>
<span class="line-modified">!         else</span>
<span class="line-modified">!           AC_MSG_RESULT([no])</span>
<span class="line-modified">!           AVAILABLE=false</span>
<span class="line-modified">!         fi</span>
<span class="line-modified">!       ],</span>
<span class="line-modified">!       IF_ENABLED: [</span>
<span class="line-modified">!         STATIC_BUILD_CFLAGS=&quot;-DSTATIC_BUILD=1&quot;</span>
<span class="line-modified">!         CFLAGS_JDKLIB_EXTRA=&quot;$CFLAGS_JDKLIB_EXTRA $STATIC_BUILD_CFLAGS&quot;</span>
<span class="line-modified">!         CXXFLAGS_JDKLIB_EXTRA=&quot;$CXXFLAGS_JDKLIB_EXTRA $STATIC_BUILD_CFLAGS&quot;</span>
<span class="line-modified">!       ])</span>
    AC_SUBST(STATIC_BUILD)
  ])
  
  ################################################################################
  #
  # jlink options.
  # We always keep packaged modules in JDK image.
  #
  AC_DEFUN_ONCE([JDKOPT_SETUP_JLINK_OPTIONS],
  [
<span class="line-modified">!   UTIL_ARG_ENABLE(NAME: keep-packaged-modules, DEFAULT: true,</span>
<span class="line-modified">!       RESULT: JLINK_KEEP_PACKAGED_MODULES,</span>
<span class="line-modified">!       DESC: [enable keeping of packaged modules in jdk image],</span>
<span class="line-modified">!       CHECKING_MSG: [if packaged modules are kept])</span>
    AC_SUBST(JLINK_KEEP_PACKAGED_MODULES)
  ])
  
  ################################################################################
  #
  # Check if building of the jtreg failure handler should be enabled.
  #
  AC_DEFUN_ONCE([JDKOPT_ENABLE_DISABLE_FAILURE_HANDLER],
  [
<span class="line-modified">!   UTIL_ARG_ENABLE(NAME: jtreg-failure-handler, DEFAULT: auto,</span>
<span class="line-modified">!       RESULT: BUILD_FAILURE_HANDLER,</span>
<span class="line-modified">!       DESC: [enable keeping of packaged modules in jdk image],</span>
<span class="line-modified">!       DEFAULT_DESC: [enabled if jtreg is present],</span>
<span class="line-modified">!       CHECKING_MSG: [if the jtreg failure handler should be built],</span>
<span class="line-modified">!       CHECK_AVAILABLE: [</span>
<span class="line-modified">!         AC_MSG_CHECKING([if the jtreg failure handler is available])</span>
<span class="line-modified">!         if test &quot;x$JT_HOME&quot; != &quot;x&quot;; then</span>
<span class="line-modified">!           AC_MSG_RESULT([yes])</span>
<span class="line-modified">!         else</span>
<span class="line-modified">!           AVAILABLE=false</span>
<span class="line-modified">!           AC_MSG_RESULT([no (jtreg not present)])</span>
<span class="line-modified">!         fi</span>
<span class="line-modified">!       ])</span>
    AC_SUBST(BUILD_FAILURE_HANDLER)
  ])
  
  ################################################################################
  #
  # Enable or disable generation of the classlist at build time
  #
  AC_DEFUN_ONCE([JDKOPT_ENABLE_DISABLE_GENERATE_CLASSLIST],
  [
<span class="line-modified">!   # In GenerateLinkOptData.gmk, DumpLoadedClassList is used to generate the</span>
<span class="line-modified">!   # classlist file. It never will work if CDS is disabled, since the VM will report</span>
<span class="line-modified">!   # an error for DumpLoadedClassList.</span>
<span class="line-modified">!   UTIL_ARG_ENABLE(NAME: generate-classlist, DEFAULT: auto,</span>
<span class="line-modified">!       RESULT: ENABLE_GENERATE_CLASSLIST, AVAILABLE: $ENABLE_CDS,</span>
<span class="line-modified">!       DESC: [enable generation of a CDS classlist at build time],</span>
<span class="line-modified">!       DEFAULT_DESC: [enabled if the JVM feature &#39;cds&#39; is enabled for all JVM variants],</span>
<span class="line-modified">!       CHECKING_MSG: [if the CDS classlist generation should be enabled])</span>
    AC_SUBST(ENABLE_GENERATE_CLASSLIST)
  ])
  
  ################################################################################
  #
</pre>
<hr />
<pre>
<span class="line-old-header">*** 697,58 ***</span>
  #
  # Optionally disable man pages
  #
  AC_DEFUN([JDKOPT_ENABLE_DISABLE_MANPAGES],
  [
<span class="line-modified">!   AC_ARG_ENABLE([manpages], [AS_HELP_STRING([--disable-manpages],</span>
<span class="line-modified">!       [Set to disable copy of static man pages @&lt;:@enabled@:&gt;@])])</span>
<span class="line-modified">! </span>
<span class="line-removed">-   BUILD_MANPAGES=&quot;true&quot;</span>
<span class="line-removed">-   AC_MSG_CHECKING([if static man pages should be copied])</span>
<span class="line-removed">-   if test &quot;x$enable_manpages&quot; = &quot;x&quot;; then</span>
<span class="line-removed">-     AC_MSG_RESULT([yes])</span>
<span class="line-removed">-   elif test &quot;x$enable_manpages&quot; = &quot;xyes&quot;; then</span>
<span class="line-removed">-     AC_MSG_RESULT([yes, forced])</span>
<span class="line-removed">-   elif test &quot;x$enable_manpages&quot; = &quot;xno&quot;; then</span>
<span class="line-removed">-     AC_MSG_RESULT([no, forced])</span>
<span class="line-removed">-     BUILD_MANPAGES=&quot;false&quot;</span>
<span class="line-removed">-   else</span>
<span class="line-removed">-     AC_MSG_RESULT([no])</span>
<span class="line-removed">-     AC_MSG_ERROR([--enable-manpages can only yes/no or empty])</span>
<span class="line-removed">-   fi</span>
<span class="line-removed">- </span>
    AC_SUBST(BUILD_MANPAGES)
  ])
  
  ################################################################################
  #
  # Disable the default CDS archive generation
<span class="line-removed">- #   cross compilation - disabled</span>
  #
  AC_DEFUN([JDKOPT_ENABLE_DISABLE_CDS_ARCHIVE],
  [
<span class="line-modified">!   AC_ARG_ENABLE([cds-archive], [AS_HELP_STRING([--disable-cds-archive],</span>
<span class="line-modified">!       [Set to disable generation of a default CDS archive in the product image @&lt;:@enabled@:&gt;@])])</span>
<span class="line-modified">! </span>
<span class="line-modified">!   AC_MSG_CHECKING([if a default CDS archive should be generated])</span>
<span class="line-modified">!   if test &quot;x$ENABLE_CDS&quot; = &quot;xfalse&quot;; then</span>
<span class="line-modified">!     AC_MSG_RESULT([no, because CDS is disabled])</span>
<span class="line-modified">!     BUILD_CDS_ARCHIVE=&quot;false&quot;</span>
<span class="line-modified">!   elif test &quot;x$COMPILE_TYPE&quot; = &quot;xcross&quot;; then</span>
<span class="line-modified">!     AC_MSG_RESULT([no, not possible with cross compilation])</span>
<span class="line-modified">!     BUILD_CDS_ARCHIVE=&quot;false&quot;</span>
<span class="line-modified">!   elif test &quot;x$enable_cds_archive&quot; = &quot;xyes&quot;; then</span>
<span class="line-modified">!     AC_MSG_RESULT([yes, forced])</span>
<span class="line-modified">!     BUILD_CDS_ARCHIVE=&quot;true&quot;</span>
<span class="line-modified">!   elif test &quot;x$enable_cds_archive&quot; = &quot;x&quot;; then</span>
<span class="line-modified">!     AC_MSG_RESULT([yes])</span>
<span class="line-modified">!     BUILD_CDS_ARCHIVE=&quot;true&quot;</span>
<span class="line-removed">-   elif test &quot;x$enable_cds_archive&quot; = &quot;xno&quot;; then</span>
<span class="line-removed">-     AC_MSG_RESULT([no, forced])</span>
<span class="line-removed">-     BUILD_CDS_ARCHIVE=&quot;false&quot;</span>
<span class="line-removed">-   else</span>
<span class="line-removed">-     AC_MSG_RESULT([no])</span>
<span class="line-removed">-     AC_MSG_ERROR([--enable-cds_archive can only be yes/no or empty])</span>
<span class="line-removed">-   fi</span>
<span class="line-removed">- </span>
    AC_SUBST(BUILD_CDS_ARCHIVE)
  ])
<span class="line-new-header">--- 566,35 ---</span>
  #
  # Optionally disable man pages
  #
  AC_DEFUN([JDKOPT_ENABLE_DISABLE_MANPAGES],
  [
<span class="line-modified">!   UTIL_ARG_ENABLE(NAME: manpages, DEFAULT: true, RESULT: BUILD_MANPAGES,</span>
<span class="line-modified">!       DESC: [enable copying of static man pages],</span>
<span class="line-modified">!       CHECKING_MSG: [if static man pages should be copied])</span>
    AC_SUBST(BUILD_MANPAGES)
  ])
  
  ################################################################################
  #
  # Disable the default CDS archive generation
  #
  AC_DEFUN([JDKOPT_ENABLE_DISABLE_CDS_ARCHIVE],
  [
<span class="line-modified">!   UTIL_ARG_ENABLE(NAME: cds-archive, DEFAULT: auto, RESULT: BUILD_CDS_ARCHIVE,</span>
<span class="line-modified">!       DESC: [enable generation of a default CDS archive in the product image],</span>
<span class="line-modified">!       DEFAULT_DESC: [enabled if possible],</span>
<span class="line-modified">!       CHECKING_MSG: [if a default CDS archive should be generated],</span>
<span class="line-modified">!       CHECK_AVAILABLE: [</span>
<span class="line-modified">!         AC_MSG_CHECKING([if CDS archive is available])</span>
<span class="line-modified">!         if test &quot;x$ENABLE_CDS&quot; = &quot;xfalse&quot;; then</span>
<span class="line-modified">!           AC_MSG_RESULT([no (CDS is disabled)])</span>
<span class="line-modified">!           AVAILABLE=false</span>
<span class="line-modified">!         elif test &quot;x$COMPILE_TYPE&quot; = &quot;xcross&quot;; then</span>
<span class="line-modified">!           AC_MSG_RESULT([no (not possible with cross compilation)])</span>
<span class="line-modified">!           AVAILABLE=false</span>
<span class="line-modified">!         else</span>
<span class="line-modified">!           AC_MSG_RESULT([yes])</span>
<span class="line-modified">!         fi</span>
<span class="line-modified">!       ])</span>
    AC_SUBST(BUILD_CDS_ARCHIVE)
  ])
</pre>
<center><a href="hotspot.m4.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="jvm-features.m4.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>