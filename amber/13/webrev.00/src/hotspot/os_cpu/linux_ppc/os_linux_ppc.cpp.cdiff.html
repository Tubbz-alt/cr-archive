<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/os_cpu/linux_ppc/os_linux_ppc.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../linux_arm/os_linux_arm.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../linux_s390/os_linux_s390.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/os_cpu/linux_ppc/os_linux_ppc.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 408,11 ***</span>
            tty-&gt;print_cr(&quot;trap: zombie_not_entrant (%s)&quot;, (sig == SIGTRAP) ? &quot;SIGTRAP&quot; : &quot;SIGILL&quot;);
          }
          stub = SharedRuntime::get_handle_wrong_method_stub();
        }
  
<span class="line-modified">!       else if (sig == ((SafepointMechanism::uses_thread_local_poll() &amp;&amp; USE_POLL_BIT_ONLY) ? SIGTRAP : SIGSEGV) &amp;&amp;</span>
                 // A linux-ppc64 kernel before 2.6.6 doesn&#39;t set si_addr on some segfaults
                 // in 64bit mode (cf. http://www.kernel.org/pub/linux/kernel/v2.6/ChangeLog-2.6.6),
                 // especially when we try to read from the safepoint polling page. So the check
                 //   (address)info-&gt;si_addr == os::get_standard_polling_page()
                 // doesn&#39;t work for us. We use:
<span class="line-new-header">--- 408,11 ---</span>
            tty-&gt;print_cr(&quot;trap: zombie_not_entrant (%s)&quot;, (sig == SIGTRAP) ? &quot;SIGTRAP&quot; : &quot;SIGILL&quot;);
          }
          stub = SharedRuntime::get_handle_wrong_method_stub();
        }
  
<span class="line-modified">!       else if ((sig == USE_POLL_BIT_ONLY ? SIGTRAP : SIGSEGV) &amp;&amp;</span>
                 // A linux-ppc64 kernel before 2.6.6 doesn&#39;t set si_addr on some segfaults
                 // in 64bit mode (cf. http://www.kernel.org/pub/linux/kernel/v2.6/ChangeLog-2.6.6),
                 // especially when we try to read from the safepoint polling page. So the check
                 //   (address)info-&gt;si_addr == os::get_standard_polling_page()
                 // doesn&#39;t work for us. We use:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 420,11 ***</span>
                 CodeCache::contains((void*) pc) &amp;&amp;
                 ((cb = CodeCache::find_blob(pc)) != NULL) &amp;&amp;
                 cb-&gt;is_compiled()) {
          if (TraceTraps) {
            tty-&gt;print_cr(&quot;trap: safepoint_poll at &quot; INTPTR_FORMAT &quot; (%s)&quot;, p2i(pc),
<span class="line-modified">!                         (SafepointMechanism::uses_thread_local_poll() &amp;&amp; USE_POLL_BIT_ONLY) ? &quot;SIGTRAP&quot; : &quot;SIGSEGV&quot;);</span>
          }
          stub = SharedRuntime::get_poll_stub(pc);
        }
  
        // SIGTRAP-based ic miss check in compiled code.
<span class="line-new-header">--- 420,11 ---</span>
                 CodeCache::contains((void*) pc) &amp;&amp;
                 ((cb = CodeCache::find_blob(pc)) != NULL) &amp;&amp;
                 cb-&gt;is_compiled()) {
          if (TraceTraps) {
            tty-&gt;print_cr(&quot;trap: safepoint_poll at &quot; INTPTR_FORMAT &quot; (%s)&quot;, p2i(pc),
<span class="line-modified">!                         USE_POLL_BIT_ONLY ? &quot;SIGTRAP&quot; : &quot;SIGSEGV&quot;);</span>
          }
          stub = SharedRuntime::get_poll_stub(pc);
        }
  
        // SIGTRAP-based ic miss check in compiled code.
</pre>
<center><a href="../linux_arm/os_linux_arm.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../linux_s390/os_linux_s390.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>