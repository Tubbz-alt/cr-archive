<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.xml/share/classes/com/sun/org/apache/xalan/internal/xsltc/trax/SAX2StAXStreamWriter.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SAX2StAXEventWriter.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../legal/xerces.md.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/xalan/internal/xsltc/trax/SAX2StAXStreamWriter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2005, 2006, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package com.sun.org.apache.xalan.internal.xsltc.trax;
 27 
<span class="line-removed"> 28 import java.util.Iterator;</span>
 29 
 30 import javax.xml.stream.XMLStreamException;
 31 import javax.xml.stream.XMLStreamWriter;
<span class="line-removed"> 32 import javax.xml.stream.XMLEventWriter;</span>
<span class="line-removed"> 33 </span>
 34 import org.xml.sax.Attributes;
 35 import org.xml.sax.SAXException;
 36 import org.xml.sax.ext.Locator2;
 37 
 38 /**
 39  * @author Sunitha Reddy
 40  */
<span class="line-removed"> 41 </span>
 42 public class SAX2StAXStreamWriter extends SAX2StAXBaseWriter {
 43 

 44 
<span class="line-modified"> 45         private XMLStreamWriter writer;</span>
<span class="line-removed"> 46 </span>
<span class="line-removed"> 47         private boolean needToCallStartDocument = false;</span>
<span class="line-removed"> 48 </span>
<span class="line-removed"> 49         public SAX2StAXStreamWriter() {</span>
<span class="line-removed"> 50 </span>
<span class="line-removed"> 51         }</span>
 52 
<span class="line-modified"> 53         public SAX2StAXStreamWriter(XMLStreamWriter writer) {</span>
 54 
<span class="line-modified"> 55                 this.writer = writer;</span>
 56 
<span class="line-modified"> 57         }</span>


 58 



 59 
<span class="line-modified"> 60         public XMLStreamWriter getStreamWriter() {</span>


 61 
<span class="line-modified"> 62                 return writer;</span>






 63 





 64         }
 65 


 66 
<span class="line-modified"> 67         public void setStreamWriter(XMLStreamWriter writer) {</span>
<span class="line-modified"> 68 </span>
<span class="line-removed"> 69                 this.writer = writer;</span>
<span class="line-removed"> 70 </span>
<span class="line-removed"> 71         }</span>
<span class="line-removed"> 72 </span>
<span class="line-removed"> 73         public void startDocument() throws SAXException {</span>
 74 
<span class="line-modified"> 75                 super.startDocument();</span>
<span class="line-modified"> 76                 // Encoding and version info will be available only after startElement</span>
<span class="line-removed"> 77                 // is called for first time. So, defer START_DOCUMENT event of StAX till</span>
<span class="line-removed"> 78                 // that point of time.</span>
<span class="line-removed"> 79                 needToCallStartDocument = true;</span>
 80         }
 81 
<span class="line-modified"> 82         public void endDocument() throws SAXException {</span>
<span class="line-removed"> 83 </span>
<span class="line-removed"> 84                 try {</span>
 85 
<span class="line-modified"> 86                         writer.writeEndDocument();</span>





 87 
<span class="line-modified"> 88                 } catch (XMLStreamException e) {</span>

 89 
<span class="line-modified"> 90                         throw new SAXException(e);</span>
 91 
<span class="line-modified"> 92                 }</span>
<span class="line-modified"> 93 </span>
<span class="line-removed"> 94                 super.endDocument();</span>
<span class="line-removed"> 95 </span>
<span class="line-removed"> 96         }</span>
<span class="line-removed"> 97 </span>
<span class="line-removed"> 98         public void startElement(String uri, String localName, String qName,</span>
<span class="line-removed"> 99                         Attributes attributes) throws SAXException {</span>
<span class="line-removed">100 </span>
<span class="line-removed">101                 if (needToCallStartDocument) {</span>
<span class="line-removed">102                     try {</span>
<span class="line-removed">103                         if (docLocator == null)</span>
<span class="line-removed">104                             writer.writeStartDocument();</span>
<span class="line-removed">105                         else {</span>
<span class="line-removed">106                             try{</span>
<span class="line-removed">107                                 writer.writeStartDocument(((Locator2)docLocator).getXMLVersion());</span>
<span class="line-removed">108                             }catch(ClassCastException e){</span>
<span class="line-removed">109                                 writer.writeStartDocument();</span>
<span class="line-removed">110                             }</span>
<span class="line-removed">111                         }</span>
112 
<span class="line-modified">113                     } catch (XMLStreamException e) {</span>
<span class="line-modified">114 </span>
<span class="line-modified">115                             throw new SAXException(e);</span>
116 







117                     }
<span class="line-removed">118                     needToCallStartDocument = false;</span>
<span class="line-removed">119                 }</span>
<span class="line-removed">120 </span>
<span class="line-removed">121                 try {</span>
<span class="line-removed">122 </span>
<span class="line-removed">123                         String[] qname = {null, null};</span>
<span class="line-removed">124                         parseQName(qName, qname);</span>
<span class="line-removed">125                         //Do not call writeStartElement with prefix and namespaceURI, as it writes out</span>
<span class="line-removed">126                         //namespace declaration.</span>
<span class="line-removed">127                         //writer.writeStartElement(qname[0], qname[1], uri);</span>
<span class="line-removed">128                         writer.writeStartElement(qName);</span>
<span class="line-removed">129 </span>
<span class="line-removed">130 </span>
<span class="line-removed">131                         // No need to write namespaces, as they are written as part of attributes.</span>
<span class="line-removed">132                         /*if (namespaces != null) {</span>
133 
<span class="line-modified">134                             final int nDecls = namespaces.size();</span>
<span class="line-removed">135                             for (int i = 0; i &lt; nDecls; i++) {</span>
<span class="line-removed">136                                 final String prefix = (String) namespaces.elementAt(i);</span>
<span class="line-removed">137                                 if (prefix.length() == 0) {</span>
<span class="line-removed">138                                     writer.setDefaultNamespace((String)namespaces.elementAt(++i));</span>
<span class="line-removed">139                                 } else {</span>
<span class="line-removed">140                                     writer.setPrefix(prefix, (String) namespaces.elementAt(++i));</span>
<span class="line-removed">141                                 }</span>
<span class="line-removed">142 </span>
<span class="line-removed">143                                 writer.writeNamespace(prefix, (String)namespaces.elementAt(i));</span>
<span class="line-removed">144                             }</span>
<span class="line-removed">145 </span>
<span class="line-removed">146 </span>
<span class="line-removed">147                         }*/</span>
<span class="line-removed">148 </span>
<span class="line-removed">149                         // write attributes</span>
<span class="line-removed">150                         for (int i = 0, s = attributes.getLength(); i &lt; s; i++) {</span>
<span class="line-removed">151 </span>
<span class="line-removed">152                                 parseQName(attributes.getQName(i), qname);</span>
<span class="line-removed">153 </span>
<span class="line-removed">154                                 String attrPrefix = qname[0];</span>
<span class="line-removed">155                                 String attrLocal = qname[1];</span>
<span class="line-removed">156 </span>
<span class="line-removed">157                                 String attrQName = attributes.getQName(i);</span>
<span class="line-removed">158                                 String attrValue = attributes.getValue(i);</span>
<span class="line-removed">159                                 String attrURI = attributes.getURI(i);</span>
<span class="line-removed">160 </span>
<span class="line-removed">161                                 if (&quot;xmlns&quot;.equals(attrPrefix) || &quot;xmlns&quot;.equals(attrQName)) {</span>
<span class="line-removed">162 </span>
<span class="line-removed">163                                         // namespace declaration disguised as an attribute.</span>
<span class="line-removed">164                                         // write it as an namespace</span>
<span class="line-removed">165 </span>
<span class="line-removed">166                                         if (attrLocal.length() == 0) {</span>
<span class="line-removed">167 </span>
<span class="line-removed">168                                             writer.setDefaultNamespace(attrValue);</span>
<span class="line-removed">169 </span>
<span class="line-removed">170                                         } else {</span>
<span class="line-removed">171 </span>
<span class="line-removed">172                                             writer.setPrefix(attrLocal, attrValue);</span>
<span class="line-removed">173 </span>
<span class="line-removed">174                                         }</span>
<span class="line-removed">175 </span>
<span class="line-removed">176                                         writer.writeNamespace(attrLocal, attrValue);</span>
<span class="line-removed">177 </span>
<span class="line-removed">178                                 } else if (attrPrefix.length() &gt; 0) {</span>
<span class="line-removed">179 </span>
<span class="line-removed">180                                         writer.writeAttribute(attrPrefix, attrURI, attrLocal,</span>
<span class="line-removed">181                                                         attrValue);</span>
<span class="line-removed">182 </span>
<span class="line-removed">183                                 } else {</span>
<span class="line-removed">184                                         writer.writeAttribute(attrQName, attrValue);</span>
<span class="line-removed">185                                 }</span>
<span class="line-removed">186 </span>
<span class="line-removed">187                         }</span>
<span class="line-removed">188 </span>
<span class="line-removed">189                 } catch (XMLStreamException e) {</span>
<span class="line-removed">190                         throw new SAXException(e);</span>
<span class="line-removed">191 </span>
<span class="line-removed">192                 } finally {</span>
<span class="line-removed">193 </span>
<span class="line-removed">194                         super.startElement(uri, localName, qName, attributes);</span>
195 





196                 }

197 




198         }
<span class="line-modified">199 </span>
<span class="line-modified">200         public void endElement(String uri, String localName, String qName)</span>
<span class="line-modified">201                         throws SAXException {</span>
<span class="line-modified">202 </span>
<span class="line-modified">203                 try {</span>
<span class="line-modified">204 </span>
<span class="line-modified">205                         writer.writeEndElement();</span>
<span class="line-modified">206 </span>
<span class="line-modified">207                 } catch (XMLStreamException e) {</span>
<span class="line-modified">208 </span>
<span class="line-removed">209                         throw new SAXException(e);</span>
<span class="line-removed">210 </span>
<span class="line-removed">211                 } finally {</span>
<span class="line-removed">212 </span>
<span class="line-removed">213                         super.endElement(uri, localName, qName);</span>
<span class="line-removed">214 </span>
<span class="line-removed">215                 }</span>
<span class="line-removed">216 </span>
217         }

218 
<span class="line-modified">219         public void comment(char[] ch, int start, int length) throws SAXException {</span>
<span class="line-modified">220 </span>
<span class="line-modified">221                 super.comment(ch, start, length);</span>
<span class="line-removed">222                 try {</span>
<span class="line-removed">223 </span>
<span class="line-removed">224                         writer.writeComment(new String(ch, start, length));</span>
<span class="line-removed">225 </span>
<span class="line-removed">226                 } catch (XMLStreamException e) {</span>
<span class="line-removed">227 </span>
<span class="line-removed">228                         throw new SAXException(e);</span>
<span class="line-removed">229 </span>
<span class="line-removed">230                 }</span>
<span class="line-removed">231 </span>
232         }
<span class="line-modified">233 </span>
<span class="line-modified">234         public void characters(char[] ch, int start, int length)</span>
<span class="line-modified">235                         throws SAXException {</span>
<span class="line-modified">236 </span>
<span class="line-modified">237                 super.characters(ch, start, length);</span>
<span class="line-removed">238                 try {</span>
<span class="line-removed">239 </span>
<span class="line-removed">240                         if (!isCDATA) {</span>
<span class="line-removed">241 </span>
<span class="line-removed">242                                 writer.writeCharacters(ch, start, length);</span>
<span class="line-removed">243 </span>
<span class="line-removed">244                         }</span>
<span class="line-removed">245 </span>
<span class="line-removed">246                 } catch (XMLStreamException e) {</span>
<span class="line-removed">247 </span>
<span class="line-removed">248                         throw new SAXException(e);</span>
<span class="line-removed">249 </span>
<span class="line-removed">250                 }</span>
<span class="line-removed">251 </span>
252         }
<span class="line-modified">253 </span>
<span class="line-modified">254         public void endCDATA() throws SAXException {</span>
<span class="line-modified">255 </span>
<span class="line-modified">256                 try {</span>
<span class="line-modified">257 </span>
<span class="line-modified">258                         writer.writeCData(CDATABuffer.toString());</span>
<span class="line-modified">259 </span>
<span class="line-modified">260                 } catch (XMLStreamException e) {</span>
<span class="line-modified">261 </span>
<span class="line-modified">262                         throw new SAXException(e);</span>
<span class="line-modified">263 </span>
<span class="line-removed">264                 }</span>
<span class="line-removed">265 </span>
<span class="line-removed">266                 super.endCDATA();</span>
<span class="line-removed">267 </span>
268         }

269 
<span class="line-modified">270         public void ignorableWhitespace(char[] ch, int start, int length)</span>
<span class="line-modified">271                         throws SAXException {</span>
<span class="line-modified">272 </span>
<span class="line-modified">273                 super.ignorableWhitespace(ch, start, length);</span>
<span class="line-modified">274                 try {</span>
<span class="line-removed">275 </span>
<span class="line-removed">276                         writer.writeCharacters(ch, start, length);</span>
<span class="line-removed">277 </span>
<span class="line-removed">278                 } catch (XMLStreamException e) {</span>
<span class="line-removed">279 </span>
<span class="line-removed">280                         throw new SAXException(e);</span>
<span class="line-removed">281 </span>
<span class="line-removed">282                 }</span>
<span class="line-removed">283 </span>
284         }
285 
<span class="line-modified">286         public void processingInstruction(String target, String data)</span>
<span class="line-modified">287                         throws SAXException {</span>
<span class="line-removed">288 </span>
<span class="line-removed">289                 super.processingInstruction(target, data);</span>
<span class="line-removed">290                 try {</span>
291 
<span class="line-modified">292                         writer.writeProcessingInstruction(target, data);</span>

293 
<span class="line-modified">294                 } catch (XMLStreamException e) {</span>
<span class="line-modified">295 </span>
<span class="line-modified">296                         throw new SAXException(e);</span>




297 
<span class="line-modified">298                 }</span>

299 





300         }
<span class="line-modified">301 </span>










302 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2005, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package com.sun.org.apache.xalan.internal.xsltc.trax;
 27 

 28 
 29 import javax.xml.stream.XMLStreamException;
 30 import javax.xml.stream.XMLStreamWriter;


 31 import org.xml.sax.Attributes;
 32 import org.xml.sax.SAXException;
 33 import org.xml.sax.ext.Locator2;
 34 
 35 /**
 36  * @author Sunitha Reddy
 37  */

 38 public class SAX2StAXStreamWriter extends SAX2StAXBaseWriter {
 39 
<span class="line-added"> 40     private XMLStreamWriter writer;</span>
 41 
<span class="line-modified"> 42     private boolean needToCallStartDocument = false;</span>






 43 
<span class="line-modified"> 44     public SAX2StAXStreamWriter() {</span>
 45 
<span class="line-modified"> 46     }</span>
 47 
<span class="line-modified"> 48     public SAX2StAXStreamWriter(XMLStreamWriter writer) {</span>
<span class="line-added"> 49         this.writer = writer;</span>
<span class="line-added"> 50     }</span>
 51 
<span class="line-added"> 52     public XMLStreamWriter getStreamWriter() {</span>
<span class="line-added"> 53         return writer;</span>
<span class="line-added"> 54     }</span>
 55 
<span class="line-modified"> 56     public void setStreamWriter(XMLStreamWriter writer) {</span>
<span class="line-added"> 57         this.writer = writer;</span>
<span class="line-added"> 58     }</span>
 59 
<span class="line-modified"> 60     public void startDocument() throws SAXException {</span>
<span class="line-added"> 61         super.startDocument();</span>
<span class="line-added"> 62         // Encoding and version info will be available only after startElement</span>
<span class="line-added"> 63         // is called for first time. So, defer START_DOCUMENT event of StAX till</span>
<span class="line-added"> 64         // that point of time.</span>
<span class="line-added"> 65         needToCallStartDocument = true;</span>
<span class="line-added"> 66     }</span>
 67 
<span class="line-added"> 68     public void endDocument() throws SAXException {</span>
<span class="line-added"> 69         try {</span>
<span class="line-added"> 70             writer.writeEndDocument();</span>
<span class="line-added"> 71         } catch (XMLStreamException e) {</span>
<span class="line-added"> 72             throw new SAXException(e);</span>
 73         }
 74 
<span class="line-added"> 75         super.endDocument();</span>
<span class="line-added"> 76     }</span>
 77 
<span class="line-modified"> 78     public void startElement(String uri, String localName, String qName,</span>
<span class="line-modified"> 79             Attributes attributes) throws SAXException {</span>





 80 
<span class="line-modified"> 81         if (needToCallStartDocument) {</span>
<span class="line-modified"> 82             writeStartDocument();</span>



 83         }
 84 
<span class="line-modified"> 85         try {</span>


 86 
<span class="line-modified"> 87             String[] qname = {null, null};</span>
<span class="line-added"> 88             parseQName(qName, qname);</span>
<span class="line-added"> 89             //Do not call writeStartElement with prefix and namespaceURI, as it writes out</span>
<span class="line-added"> 90             //namespace declaration.</span>
<span class="line-added"> 91             //writer.writeStartElement(qname[0], qname[1], uri);</span>
<span class="line-added"> 92             writer.writeStartElement(qName);</span>
 93 
<span class="line-modified"> 94             // write attributes and namespaces as attributes</span>
<span class="line-added"> 95             for (int i = 0, s = attributes.getLength(); i &lt; s; i++) {</span>
 96 
<span class="line-modified"> 97                 parseQName(attributes.getQName(i), qname);</span>
 98 
<span class="line-modified"> 99                 String attrPrefix = qname[0];</span>
<span class="line-modified">100                 String attrLocal = qname[1];</span>


















101 
<span class="line-modified">102                 String attrQName = attributes.getQName(i);</span>
<span class="line-modified">103                 String attrValue = attributes.getValue(i);</span>
<span class="line-modified">104                 String attrURI = attributes.getURI(i);</span>
105 
<span class="line-added">106                 if (&quot;xmlns&quot;.equals(attrPrefix) || &quot;xmlns&quot;.equals(attrQName)) {</span>
<span class="line-added">107                     // namespace declaration disguised as an attribute.</span>
<span class="line-added">108                     // write it as an namespace</span>
<span class="line-added">109                     if (attrLocal.length() == 0) {</span>
<span class="line-added">110                         writer.setDefaultNamespace(attrValue);</span>
<span class="line-added">111                     } else {</span>
<span class="line-added">112                         writer.setPrefix(attrLocal, attrValue);</span>
113                     }















114 
<span class="line-modified">115                     writer.writeNamespace(attrLocal, attrValue);</span>




























































116 
<span class="line-added">117                 } else if (attrPrefix.length() &gt; 0) {</span>
<span class="line-added">118                     writer.writeAttribute(attrPrefix, attrURI, attrLocal,</span>
<span class="line-added">119                             attrValue);</span>
<span class="line-added">120                 } else {</span>
<span class="line-added">121                     writer.writeAttribute(attrQName, attrValue);</span>
122                 }
<span class="line-added">123             }</span>
124 
<span class="line-added">125         } catch (XMLStreamException e) {</span>
<span class="line-added">126             throw new SAXException(e);</span>
<span class="line-added">127         } finally {</span>
<span class="line-added">128             super.startElement(uri, localName, qName, attributes);</span>
129         }
<span class="line-modified">130     }</span>
<span class="line-modified">131 </span>
<span class="line-modified">132     public void endElement(String uri, String localName, String qName)</span>
<span class="line-modified">133             throws SAXException {</span>
<span class="line-modified">134         try {</span>
<span class="line-modified">135             writer.writeEndElement();</span>
<span class="line-modified">136         } catch (XMLStreamException e) {</span>
<span class="line-modified">137             throw new SAXException(e);</span>
<span class="line-modified">138         } finally {</span>
<span class="line-modified">139             super.endElement(uri, localName, qName);</span>








140         }
<span class="line-added">141     }</span>
142 
<span class="line-modified">143     public void comment(char[] ch, int start, int length) throws SAXException {</span>
<span class="line-modified">144         if (needToCallStartDocument) {</span>
<span class="line-modified">145             writeStartDocument();</span>










146         }
<span class="line-modified">147         super.comment(ch, start, length);</span>
<span class="line-modified">148         try {</span>
<span class="line-modified">149             writer.writeComment(new String(ch, start, length));</span>
<span class="line-modified">150         } catch (XMLStreamException e) {</span>
<span class="line-modified">151             throw new SAXException(e);</span>














152         }
<span class="line-modified">153     }</span>
<span class="line-modified">154 </span>
<span class="line-modified">155     public void characters(char[] ch, int start, int length)</span>
<span class="line-modified">156             throws SAXException {</span>
<span class="line-modified">157         super.characters(ch, start, length);</span>
<span class="line-modified">158         try {</span>
<span class="line-modified">159             if (!isCDATA) {</span>
<span class="line-modified">160                 writer.writeCharacters(ch, start, length);</span>
<span class="line-modified">161             }</span>
<span class="line-modified">162         } catch (XMLStreamException e) {</span>
<span class="line-modified">163             throw new SAXException(e);</span>




164         }
<span class="line-added">165     }</span>
166 
<span class="line-modified">167     public void endCDATA() throws SAXException {</span>
<span class="line-modified">168         try {</span>
<span class="line-modified">169             writer.writeCData(CDATABuffer.toString());</span>
<span class="line-modified">170         } catch (XMLStreamException e) {</span>
<span class="line-modified">171             throw new SAXException(e);</span>









172         }
173 
<span class="line-modified">174         super.endCDATA();</span>
<span class="line-modified">175     }</span>



176 
<span class="line-modified">177     public void ignorableWhitespace(char[] ch, int start, int length)</span>
<span class="line-added">178             throws SAXException {</span>
179 
<span class="line-modified">180         super.ignorableWhitespace(ch, start, length);</span>
<span class="line-modified">181         try {</span>
<span class="line-modified">182             writer.writeCharacters(ch, start, length);</span>
<span class="line-added">183         } catch (XMLStreamException e) {</span>
<span class="line-added">184             throw new SAXException(e);</span>
<span class="line-added">185         }</span>
<span class="line-added">186     }</span>
187 
<span class="line-modified">188     public void processingInstruction(String target, String data)</span>
<span class="line-added">189             throws SAXException {</span>
190 
<span class="line-added">191         super.processingInstruction(target, data);</span>
<span class="line-added">192         try {</span>
<span class="line-added">193             writer.writeProcessingInstruction(target, data);</span>
<span class="line-added">194         } catch (XMLStreamException e) {</span>
<span class="line-added">195             throw new SAXException(e);</span>
196         }
<span class="line-modified">197     }</span>
<span class="line-added">198 </span>
<span class="line-added">199     void writeStartDocument() throws SAXException {</span>
<span class="line-added">200         super.writeStartDocument();</span>
<span class="line-added">201         try {</span>
<span class="line-added">202             writer.writeStartDocument(xmlVersion);</span>
<span class="line-added">203         } catch (XMLStreamException e) {</span>
<span class="line-added">204             throw new SAXException(e);</span>
<span class="line-added">205         }</span>
<span class="line-added">206         needToCallStartDocument = false;</span>
<span class="line-added">207     }</span>
208 }
</pre>
</td>
</tr>
</table>
<center><a href="SAX2StAXEventWriter.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../legal/xerces.md.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>