<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.base/share/classes/java/lang/invoke/MethodHandle.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="InvokerBytecodeGenerator.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MethodHandleProxies.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/lang/invoke/MethodHandle.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1071,40 +1071,41 @@</span>
              if (arrayElement == long.class ||
                  arrayElement == double.class)
                  throw newIllegalArgumentException(&quot;array length is not legal for long[] or double[]&quot;, arrayLength);
          }
      }
<span class="udiff-line-added">+ </span>
      /**
<span class="udiff-line-modified-removed">-       * Adapts this method handle to be {@linkplain #asVarargsCollector variable arity}</span>
<span class="udiff-line-modified-removed">-       * if the boolean flag is true, else {@linkplain #asFixedArity fixed arity}.</span>
<span class="udiff-line-modified-removed">-       * If the method handle is already of the proper arity mode, it is returned</span>
<span class="udiff-line-modified-removed">-       * unchanged.</span>
<span class="udiff-line-modified-removed">-       * @apiNote</span>
<span class="udiff-line-modified-removed">-       * &lt;p&gt;This method is sometimes useful when adapting a method handle that</span>
<span class="udiff-line-modified-removed">-       * may be variable arity, to ensure that the resulting adapter is also</span>
<span class="udiff-line-modified-removed">-       * variable arity if and only if the original handle was.  For example,</span>
<span class="udiff-line-modified-removed">-       * this code changes the first argument of a handle {@code mh} to {@code int} without</span>
<span class="udiff-line-modified-removed">-       * disturbing its variable arity property:</span>
<span class="udiff-line-modified-removed">-       * {@code mh.asType(mh.type().changeParameterType(0,int.class))</span>
<span class="udiff-line-modified-removed">-       *     .withVarargs(mh.isVarargsCollector())}</span>
<span class="udiff-line-modified-removed">-       * &lt;p&gt;</span>
<span class="udiff-line-modified-removed">-       * This call is approximately equivalent to the following code:</span>
<span class="udiff-line-modified-removed">-       * &lt;blockquote&gt;&lt;pre&gt;{@code</span>
<span class="udiff-line-modified-removed">-       * if (makeVarargs == isVarargsCollector())</span>
<span class="udiff-line-modified-removed">-       *   return this;</span>
<span class="udiff-line-modified-removed">-       * else if (makeVarargs)</span>
<span class="udiff-line-modified-removed">-       *   return asVarargsCollector(type().lastParameterType());</span>
<span class="udiff-line-modified-removed">-       * else</span>
<span class="udiff-line-modified-removed">-       *   return asFixedArity();</span>
<span class="udiff-line-modified-removed">-       * }&lt;/pre&gt;&lt;/blockquote&gt;</span>
<span class="udiff-line-modified-removed">-       * @param makeVarargs true if the return method handle should have variable arity behavior</span>
<span class="udiff-line-modified-removed">-       * @return a method handle of the same type, with possibly adjusted variable arity behavior</span>
<span class="udiff-line-modified-removed">-       * @throws IllegalArgumentException if {@code makeVarargs} is true and</span>
<span class="udiff-line-modified-removed">-       *         this method handle does not have a trailing array parameter</span>
<span class="udiff-line-modified-removed">-       * @since 9</span>
<span class="udiff-line-modified-removed">-       * @see #asVarargsCollector</span>
<span class="udiff-line-modified-removed">-       * @see #asFixedArity</span>
<span class="udiff-line-modified-added">+      * Adapts this method handle to be {@linkplain #asVarargsCollector variable arity}</span>
<span class="udiff-line-modified-added">+      * if the boolean flag is true, else {@linkplain #asFixedArity fixed arity}.</span>
<span class="udiff-line-modified-added">+      * If the method handle is already of the proper arity mode, it is returned</span>
<span class="udiff-line-modified-added">+      * unchanged.</span>
<span class="udiff-line-modified-added">+      * @apiNote</span>
<span class="udiff-line-modified-added">+      * &lt;p&gt;This method is sometimes useful when adapting a method handle that</span>
<span class="udiff-line-modified-added">+      * may be variable arity, to ensure that the resulting adapter is also</span>
<span class="udiff-line-modified-added">+      * variable arity if and only if the original handle was.  For example,</span>
<span class="udiff-line-modified-added">+      * this code changes the first argument of a handle {@code mh} to {@code int} without</span>
<span class="udiff-line-modified-added">+      * disturbing its variable arity property:</span>
<span class="udiff-line-modified-added">+      * {@code mh.asType(mh.type().changeParameterType(0,int.class))</span>
<span class="udiff-line-modified-added">+      *     .withVarargs(mh.isVarargsCollector())}</span>
<span class="udiff-line-modified-added">+      * &lt;p&gt;</span>
<span class="udiff-line-modified-added">+      * This call is approximately equivalent to the following code:</span>
<span class="udiff-line-modified-added">+      * &lt;blockquote&gt;&lt;pre&gt;{@code</span>
<span class="udiff-line-modified-added">+      * if (makeVarargs == isVarargsCollector())</span>
<span class="udiff-line-modified-added">+      *   return this;</span>
<span class="udiff-line-modified-added">+      * else if (makeVarargs)</span>
<span class="udiff-line-modified-added">+      *   return asVarargsCollector(type().lastParameterType());</span>
<span class="udiff-line-modified-added">+      * else</span>
<span class="udiff-line-modified-added">+      *   return asFixedArity();</span>
<span class="udiff-line-modified-added">+      * }&lt;/pre&gt;&lt;/blockquote&gt;</span>
<span class="udiff-line-modified-added">+      * @param makeVarargs true if the return method handle should have variable arity behavior</span>
<span class="udiff-line-modified-added">+      * @return a method handle of the same type, with possibly adjusted variable arity behavior</span>
<span class="udiff-line-modified-added">+      * @throws IllegalArgumentException if {@code makeVarargs} is true and</span>
<span class="udiff-line-modified-added">+      *         this method handle does not have a trailing array parameter</span>
<span class="udiff-line-modified-added">+      * @since 9</span>
<span class="udiff-line-modified-added">+      * @see #asVarargsCollector</span>
<span class="udiff-line-modified-added">+      * @see #asFixedArity</span>
       */
      public MethodHandle withVarargs(boolean makeVarargs) {
          assert(!isVarargsCollector());  // subclass responsibility
          if (makeVarargs) {
             return asVarargsCollector(type().lastParameterType());
</pre>
<center><a href="InvokerBytecodeGenerator.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MethodHandleProxies.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>