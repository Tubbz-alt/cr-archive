<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/langtools/tools/javac/sealed/SealedDiffConfigurationsTest.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../src/jdk.compiler/share/classes/com/sun/tools/javac/comp/TypeEnter.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>test/langtools/tools/javac/sealed/SealedDiffConfigurationsTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
549         Path classes = base.resolve(&quot;classes&quot;);
550         tb.createDirectories(classes);
551 
552         List&lt;String&gt; error = new JavacTask(tb)
553                 .options(&quot;-XDrawDiagnostics&quot;, &quot;--module-source-path&quot;,
554                         src.toString(), &quot;--enable-preview&quot;,
555                         &quot;-source&quot;, Integer.toString(Runtime.version().feature()))
556                 .outdir(classes)
557                 .files(findJavaFiles(src))
558                 .run(Task.Expect.FAIL)
559                 .writeAll()
560                 .getOutputLines(OutputKind.DIRECT);
561 
562         List&lt;String&gt; expected = List.of(
563                 &quot;Sealed.java:1:66: compiler.err.subtype.listed.in.permits.doesnt.extend.sealed: pkg.Sub2, pkg.Sealed&quot;,
564                 &quot;1 error&quot;);
565         if (!error.containsAll(expected)) {
566             throw new AssertionError(&quot;Expected output not found. Found: &quot; + error);
567         }
568     }



































































569 }
</pre>
</td>
<td>
<hr />
<pre>
549         Path classes = base.resolve(&quot;classes&quot;);
550         tb.createDirectories(classes);
551 
552         List&lt;String&gt; error = new JavacTask(tb)
553                 .options(&quot;-XDrawDiagnostics&quot;, &quot;--module-source-path&quot;,
554                         src.toString(), &quot;--enable-preview&quot;,
555                         &quot;-source&quot;, Integer.toString(Runtime.version().feature()))
556                 .outdir(classes)
557                 .files(findJavaFiles(src))
558                 .run(Task.Expect.FAIL)
559                 .writeAll()
560                 .getOutputLines(OutputKind.DIRECT);
561 
562         List&lt;String&gt; expected = List.of(
563                 &quot;Sealed.java:1:66: compiler.err.subtype.listed.in.permits.doesnt.extend.sealed: pkg.Sub2, pkg.Sealed&quot;,
564                 &quot;1 error&quot;);
565         if (!error.containsAll(expected)) {
566             throw new AssertionError(&quot;Expected output not found. Found: &quot; + error);
567         }
568     }
<span class="line-added">569 </span>
<span class="line-added">570     @Test</span>
<span class="line-added">571     public void testSeparateCompilation(Path base) throws Exception {</span>
<span class="line-added">572         Path src = base.resolve(&quot;src&quot;);</span>
<span class="line-added">573         Path src_m = src.resolve(&quot;m&quot;);</span>
<span class="line-added">574         tb.writeJavaFiles(src_m,</span>
<span class="line-added">575                 &quot;module m {}&quot;,</span>
<span class="line-added">576                 &quot;package pkg.a; public sealed interface Sealed permits pkg.b.Sub {}&quot;,</span>
<span class="line-added">577                 &quot;package pkg.b; public final class Sub implements pkg.a.Sealed {}&quot;);</span>
<span class="line-added">578         Path classes = base.resolve(&quot;classes&quot;);</span>
<span class="line-added">579         tb.createDirectories(classes);</span>
<span class="line-added">580 </span>
<span class="line-added">581         new JavacTask(tb)</span>
<span class="line-added">582                 .options(&quot;-XDrawDiagnostics&quot;, &quot;--module-source-path&quot;,</span>
<span class="line-added">583                         src.toString(), &quot;--enable-preview&quot;,</span>
<span class="line-added">584                         &quot;-source&quot;, Integer.toString(Runtime.version().feature()))</span>
<span class="line-added">585                 .outdir(classes)</span>
<span class="line-added">586                 .files(findJavaFiles(src_m))</span>
<span class="line-added">587                 .run()</span>
<span class="line-added">588                 .writeAll()</span>
<span class="line-added">589                 .getOutputLines(OutputKind.DIRECT);</span>
<span class="line-added">590 </span>
<span class="line-added">591         new JavacTask(tb)</span>
<span class="line-added">592                 .options(&quot;-XDrawDiagnostics&quot;, &quot;--module-source-path&quot;,</span>
<span class="line-added">593                         src.toString(), &quot;--enable-preview&quot;, &quot;-doe&quot;,</span>
<span class="line-added">594                         &quot;-source&quot;, Integer.toString(Runtime.version().feature()))</span>
<span class="line-added">595                 .outdir(classes)</span>
<span class="line-added">596                 .files(findJavaFiles(src_m.resolve(&quot;pkg&quot;).resolve(&quot;a&quot;)))</span>
<span class="line-added">597                 .run()</span>
<span class="line-added">598                 .writeAll()</span>
<span class="line-added">599                 .getOutputLines(OutputKind.DIRECT);</span>
<span class="line-added">600 </span>
<span class="line-added">601         new JavacTask(tb)</span>
<span class="line-added">602                 .options(&quot;-XDrawDiagnostics&quot;, &quot;--module-source-path&quot;,</span>
<span class="line-added">603                         src.toString(), &quot;--enable-preview&quot;, &quot;-doe&quot;,</span>
<span class="line-added">604                         &quot;-source&quot;, Integer.toString(Runtime.version().feature()))</span>
<span class="line-added">605                 .outdir(classes)</span>
<span class="line-added">606                 .files(findJavaFiles(src_m.resolve(&quot;pkg&quot;).resolve(&quot;b&quot;)))</span>
<span class="line-added">607                 .run()</span>
<span class="line-added">608                 .writeAll()</span>
<span class="line-added">609                 .getOutputLines(OutputKind.DIRECT);</span>
<span class="line-added">610 </span>
<span class="line-added">611         tb.cleanDirectory(classes);</span>
<span class="line-added">612 </span>
<span class="line-added">613         //implicit compilations:</span>
<span class="line-added">614         new JavacTask(tb)</span>
<span class="line-added">615                 .options(&quot;-XDrawDiagnostics&quot;, &quot;--module-source-path&quot;,</span>
<span class="line-added">616                         src.toString(), &quot;--enable-preview&quot;, &quot;-doe&quot;,</span>
<span class="line-added">617                         &quot;-source&quot;, Integer.toString(Runtime.version().feature()))</span>
<span class="line-added">618                 .outdir(classes)</span>
<span class="line-added">619                 .files(findJavaFiles(src_m.resolve(&quot;pkg&quot;).resolve(&quot;a&quot;)))</span>
<span class="line-added">620                 .run()</span>
<span class="line-added">621                 .writeAll()</span>
<span class="line-added">622                 .getOutputLines(OutputKind.DIRECT);</span>
<span class="line-added">623 </span>
<span class="line-added">624         tb.cleanDirectory(classes);</span>
<span class="line-added">625 </span>
<span class="line-added">626         new JavacTask(tb)</span>
<span class="line-added">627                 .options(&quot;-XDrawDiagnostics&quot;, &quot;--module-source-path&quot;,</span>
<span class="line-added">628                         src.toString(), &quot;--enable-preview&quot;, &quot;-doe&quot;,</span>
<span class="line-added">629                         &quot;-source&quot;, Integer.toString(Runtime.version().feature()))</span>
<span class="line-added">630                 .outdir(classes)</span>
<span class="line-added">631                 .files(findJavaFiles(src_m.resolve(&quot;pkg&quot;).resolve(&quot;b&quot;)))</span>
<span class="line-added">632                 .run()</span>
<span class="line-added">633                 .writeAll()</span>
<span class="line-added">634                 .getOutputLines(OutputKind.DIRECT);</span>
<span class="line-added">635     }</span>
636 }
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../src/jdk.compiler/share/classes/com/sun/tools/javac/comp/TypeEnter.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>