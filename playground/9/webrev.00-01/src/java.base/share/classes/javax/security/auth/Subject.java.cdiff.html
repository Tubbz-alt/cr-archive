<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/javax/security/auth/Subject.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/java.base/share/classes/javax/security/auth/Subject.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 201,25 ***</span>
       *          or {@code privCredentials} are {@code null},
       *          or a null value exists within any of these three
       *          Sets.
       */
      public Subject(boolean readOnly, Set&lt;? extends Principal&gt; principals,
<span class="line-modified">!                    Set&lt;?&gt; pubCredentials, Set&lt;?&gt; privCredentials)</span>
<span class="line-modified">!     {</span>
<span class="line-removed">-         LinkedList&lt;Principal&gt; princList</span>
                  = collectionNullClean(principals);
          LinkedList&lt;Object&gt; pubCredsList
                  = collectionNullClean(pubCredentials);
          LinkedList&lt;Object&gt; privCredsList
                  = collectionNullClean(privCredentials);
  
<span class="line-modified">!         this.principals = Collections.synchronizedSet(new SecureSet&lt;&gt;</span>
<span class="line-modified">!                                 (this, PRINCIPAL_SET, princList));</span>
<span class="line-modified">!         this.pubCredentials = Collections.synchronizedSet(new SecureSet&lt;&gt;</span>
<span class="line-modified">!                                 (this, PUB_CREDENTIAL_SET, pubCredsList));</span>
<span class="line-modified">!         this.privCredentials = Collections.synchronizedSet(new SecureSet&lt;&gt;</span>
<span class="line-modified">!                                 (this, PRIV_CREDENTIAL_SET, privCredsList));</span>
          this.readOnly = readOnly;
      }
  
      /**
       * Set this {@code Subject} to be read-only.
<span class="line-new-header">--- 201,24 ---</span>
       *          or {@code privCredentials} are {@code null},
       *          or a null value exists within any of these three
       *          Sets.
       */
      public Subject(boolean readOnly, Set&lt;? extends Principal&gt; principals,
<span class="line-modified">!                    Set&lt;?&gt; pubCredentials, Set&lt;?&gt; privCredentials) {</span>
<span class="line-modified">!         LinkedList&lt;Principal&gt; principalList</span>
                  = collectionNullClean(principals);
          LinkedList&lt;Object&gt; pubCredsList
                  = collectionNullClean(pubCredentials);
          LinkedList&lt;Object&gt; privCredsList
                  = collectionNullClean(privCredentials);
  
<span class="line-modified">!         this.principals = Collections.synchronizedSet(</span>
<span class="line-modified">!                 new SecureSet&lt;&gt;(this, PRINCIPAL_SET, principalList));</span>
<span class="line-modified">!         this.pubCredentials = Collections.synchronizedSet(</span>
<span class="line-modified">!                 new SecureSet&lt;&gt;(this, PUB_CREDENTIAL_SET, pubCredsList));</span>
<span class="line-modified">!         this.privCredentials = Collections.synchronizedSet(</span>
<span class="line-modified">!                 new SecureSet&lt;&gt;(this, PRIV_CREDENTIAL_SET, privCredsList));</span>
          this.readOnly = readOnly;
      }
  
      /**
       * Set this {@code Subject} to be read-only.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 976,13 ***</span>
          Objects.requireNonNull(inputPrincs,
                  ResourcesMgr.getString(&quot;invalid.null.input.s.&quot;));
  
          // Rewrap the principals into a SecureSet
          try {
<span class="line-modified">!             LinkedList&lt;Principal&gt; princList = collectionNullClean(inputPrincs);</span>
              principals = Collections.synchronizedSet(new SecureSet&lt;&gt;
<span class="line-modified">!                                 (this, PRINCIPAL_SET, princList));</span>
          } catch (NullPointerException npe) {
              // Sometimes people deserialize the principals set only.
              // Subject is not accessible, so just don&#39;t fail.
              principals = Collections.synchronizedSet
                          (new SecureSet&lt;&gt;(this, PRINCIPAL_SET));
<span class="line-new-header">--- 975,13 ---</span>
          Objects.requireNonNull(inputPrincs,
                  ResourcesMgr.getString(&quot;invalid.null.input.s.&quot;));
  
          // Rewrap the principals into a SecureSet
          try {
<span class="line-modified">!             LinkedList&lt;Principal&gt; principalList = collectionNullClean(inputPrincs);</span>
              principals = Collections.synchronizedSet(new SecureSet&lt;&gt;
<span class="line-modified">!                                 (this, PRINCIPAL_SET, principalList));</span>
          } catch (NullPointerException npe) {
              // Sometimes people deserialize the principals set only.
              // Subject is not accessible, so just don&#39;t fail.
              principals = Collections.synchronizedSet
                          (new SecureSet&lt;&gt;(this, PRINCIPAL_SET));
</pre>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>