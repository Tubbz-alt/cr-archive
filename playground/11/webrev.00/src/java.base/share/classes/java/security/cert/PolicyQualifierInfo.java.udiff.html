<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.base/share/classes/java/security/cert/PolicyQualifierInfo.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../com/sun/crypto/provider/PBES2Parameters.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../sun/security/pkcs/PKCS7.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/security/cert/PolicyQualifierInfo.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -25,12 +25,14 @@</span>
  
  package java.security.cert;
  
  import java.io.IOException;
  
<span class="udiff-line-added">+ import sun.security.util.DerOutputStream;</span>
  import sun.security.util.HexDumpEncoder;
  import sun.security.util.DerValue;
<span class="udiff-line-added">+ import sun.security.util.ObjectIdentifier;</span>
  
  /**
   * An immutable policy qualifier represented by the ASN.1 PolicyQualifierInfo
   * structure.
   *
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -87,10 +89,32 @@</span>
      private byte [] mEncoded;
      private String mId;
      private byte [] mData;
      private String pqiString;
  
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * Creates from material.</span>
<span class="udiff-line-added">+      * @param mId id</span>
<span class="udiff-line-added">+      * @param mData data</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public PolicyQualifierInfo(String mId, byte[] mData) {</span>
<span class="udiff-line-added">+         this.mId = mId;</span>
<span class="udiff-line-added">+         this.mData = mData;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     private void encodeThis() throws IOException {</span>
<span class="udiff-line-added">+         if (mEncoded != null) {</span>
<span class="udiff-line-added">+             return;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+         DerOutputStream out = new DerOutputStream();</span>
<span class="udiff-line-added">+         DerOutputStream ins = new DerOutputStream();</span>
<span class="udiff-line-added">+         ins.putOID(ObjectIdentifier.of(mId));</span>
<span class="udiff-line-added">+         ins.write(mData);</span>
<span class="udiff-line-added">+         out.write(DerValue.tag_Sequence, ins);</span>
<span class="udiff-line-added">+         mEncoded = out.toByteArray();</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      /**
       * Creates an instance of {@code PolicyQualifierInfo} from the
       * encoded bytes. The encoded byte array is copied on construction.
       *
       * @param encoded a byte array containing the qualifier in DER encoding
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -132,11 +156,12 @@</span>
       *
       * @return the ASN.1 DER encoded bytes (never {@code null}).
       * Note that a copy is returned, so the data is cloned each time
       * this method is called.
       */
<span class="udiff-line-modified-removed">-     public final byte[] getEncoded() {</span>
<span class="udiff-line-modified-added">+     public final byte[] getEncoded() throws IOException {</span>
<span class="udiff-line-added">+         encodeThis();</span>
          return mEncoded.clone();
      }
  
      /**
       * Returns the ASN.1 DER encoded form of the {@code qualifier}
</pre>
<center><a href="../../../com/sun/crypto/provider/PBES2Parameters.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../sun/security/pkcs/PKCS7.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>