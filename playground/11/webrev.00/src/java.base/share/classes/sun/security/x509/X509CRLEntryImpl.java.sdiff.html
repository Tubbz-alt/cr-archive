<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/sun/security/x509/X509CRLEntryImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="PrivateKeyUsageExtension.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="X509CRLImpl.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/x509/X509CRLEntryImpl.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
450         return extensions.get(OIDMap.getName(oid));
451     }
452 
453     private void parse(DerValue derVal)
454     throws CRLException, IOException {
455 
456         if (derVal.tag != DerValue.tag_Sequence) {
457             throw new CRLException(&quot;Invalid encoded RevokedCertificate, &quot; +
458                                   &quot;starting sequence tag missing.&quot;);
459         }
460         if (derVal.data.available() == 0)
461             throw new CRLException(&quot;No data encoded for RevokedCertificates&quot;);
462 
463         revokedCert = derVal.toByteArray();
464         // serial number
465         DerInputStream in = derVal.toDerInputStream();
466         DerValue val = in.getDerValue();
467         this.serialNumber = new SerialNumber(val);
468 
469         // revocationDate
<span class="line-modified">470         int nextByte = derVal.data.peekByte();</span>
<span class="line-removed">471         if ((byte)nextByte == DerValue.tag_UtcTime) {</span>
<span class="line-removed">472             this.revocationDate = derVal.data.getUTCTime();</span>
<span class="line-removed">473         } else if ((byte)nextByte == DerValue.tag_GeneralizedTime) {</span>
<span class="line-removed">474             this.revocationDate = derVal.data.getGeneralizedTime();</span>
<span class="line-removed">475         } else</span>
<span class="line-removed">476             throw new CRLException(&quot;Invalid encoding for revocation date&quot;);</span>
477 
478         if (derVal.data.available() == 0)
479             return;  // no extensions
480 
481         // crlEntryExtensions
<span class="line-modified">482         this.extensions = new CRLExtensions(derVal.toDerInputStream());</span>
483     }
484 
485     /**
486      * Utility method to convert an arbitrary instance of X509CRLEntry
487      * to a X509CRLEntryImpl. Does a cast if possible, otherwise reparses
488      * the encoding.
489      */
490     public static X509CRLEntryImpl toImpl(X509CRLEntry entry)
491             throws CRLException {
492         if (entry instanceof X509CRLEntryImpl) {
493             return (X509CRLEntryImpl)entry;
494         } else {
495             return new X509CRLEntryImpl(entry.getEncoded());
496         }
497     }
498 
499     /**
500      * Returns the CertificateIssuerExtension
501      *
502      * @return the CertificateIssuerExtension, or null if it does not exist
</pre>
</td>
<td>
<hr />
<pre>
450         return extensions.get(OIDMap.getName(oid));
451     }
452 
453     private void parse(DerValue derVal)
454     throws CRLException, IOException {
455 
456         if (derVal.tag != DerValue.tag_Sequence) {
457             throw new CRLException(&quot;Invalid encoded RevokedCertificate, &quot; +
458                                   &quot;starting sequence tag missing.&quot;);
459         }
460         if (derVal.data.available() == 0)
461             throw new CRLException(&quot;No data encoded for RevokedCertificates&quot;);
462 
463         revokedCert = derVal.toByteArray();
464         // serial number
465         DerInputStream in = derVal.toDerInputStream();
466         DerValue val = in.getDerValue();
467         this.serialNumber = new SerialNumber(val);
468 
469         // revocationDate
<span class="line-modified">470         this.revocationDate = derVal.data.getTime();</span>






471 
472         if (derVal.data.available() == 0)
473             return;  // no extensions
474 
475         // crlEntryExtensions
<span class="line-modified">476         this.extensions = new CRLExtensions(derVal.data);</span>
477     }
478 
479     /**
480      * Utility method to convert an arbitrary instance of X509CRLEntry
481      * to a X509CRLEntryImpl. Does a cast if possible, otherwise reparses
482      * the encoding.
483      */
484     public static X509CRLEntryImpl toImpl(X509CRLEntry entry)
485             throws CRLException {
486         if (entry instanceof X509CRLEntryImpl) {
487             return (X509CRLEntryImpl)entry;
488         } else {
489             return new X509CRLEntryImpl(entry.getEncoded());
490         }
491     }
492 
493     /**
494      * Returns the CertificateIssuerExtension
495      *
496      * @return the CertificateIssuerExtension, or null if it does not exist
</pre>
</td>
</tr>
</table>
<center><a href="PrivateKeyUsageExtension.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="X509CRLImpl.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>