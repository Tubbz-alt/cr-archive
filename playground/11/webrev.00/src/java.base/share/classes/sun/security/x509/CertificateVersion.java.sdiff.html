<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/sun/security/x509/CertificateVersion.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="CRLExtensions.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="DistributionPoint.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/x509/CertificateVersion.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 54     public static final int     V3 = 2;
 55     /**
 56      * Identifier for this attribute, to be used with the
 57      * get, set, delete methods of Certificate, x509 type.
 58      */
 59     public static final String IDENT = &quot;x509.info.version&quot;;
 60     /**
 61      * Sub attributes name for this CertAttrSet.
 62      */
 63     public static final String NAME = &quot;version&quot;;
 64     public static final String VERSION = &quot;number&quot;;
 65 
 66     // Private data members
 67     int version = V1;
 68 
 69     // Returns the version number.
 70     private int getVersion() {
 71         return(version);
 72     }
 73 
<span class="line-removed"> 74     // Construct the class from the passed DerValue</span>
<span class="line-removed"> 75     private void construct(DerValue derVal) throws IOException {</span>
<span class="line-removed"> 76         if (derVal.isConstructed() &amp;&amp; derVal.isContextSpecific()) {</span>
<span class="line-removed"> 77             derVal = derVal.data.getDerValue();</span>
<span class="line-removed"> 78             version = derVal.getInteger();</span>
<span class="line-removed"> 79             if (derVal.data.available() != 0) {</span>
<span class="line-removed"> 80                 throw new IOException(&quot;X.509 version, bad format&quot;);</span>
<span class="line-removed"> 81             }</span>
<span class="line-removed"> 82         }</span>
<span class="line-removed"> 83     }</span>
<span class="line-removed"> 84 </span>
 85     /**
 86      * The default constructor for this class,
 87      *  sets the version to 0 (i.e. X.509 version 1).
 88      */
 89     public CertificateVersion() {
 90         version = V1;
 91     }
 92 
 93     /**
 94      * The constructor for this class for the required version.
 95      *
 96      * @param version the version for the certificate.
 97      * @exception IOException if the version is not valid.
 98      */
 99     public CertificateVersion(int version) throws IOException {
100 
101         // check that it is a valid version
102         if (version == V1 || version == V2 || version == V3)
103             this.version = version;
104         else {
105             throw new IOException(&quot;X.509 Certificate version &quot; +
106                                    version + &quot; not supported.\n&quot;);
107         }
108     }
109 
<span class="line-removed">110     /**</span>
<span class="line-removed">111      * Create the object, decoding the values from the passed DER stream.</span>
<span class="line-removed">112      *</span>
<span class="line-removed">113      * @param in the DerInputStream to read the CertificateVersion from.</span>
<span class="line-removed">114      * @exception IOException on decoding errors.</span>
<span class="line-removed">115      */</span>
<span class="line-removed">116     public CertificateVersion(DerInputStream in) throws IOException {</span>
<span class="line-removed">117         version = V1;</span>
<span class="line-removed">118         DerValue derVal = in.getDerValue();</span>
<span class="line-removed">119 </span>
<span class="line-removed">120         construct(derVal);</span>
<span class="line-removed">121     }</span>
<span class="line-removed">122 </span>
<span class="line-removed">123     /**</span>
<span class="line-removed">124      * Create the object, decoding the values from the passed stream.</span>
<span class="line-removed">125      *</span>
<span class="line-removed">126      * @param in the InputStream to read the CertificateVersion from.</span>
<span class="line-removed">127      * @exception IOException on decoding errors.</span>
<span class="line-removed">128      */</span>
<span class="line-removed">129     public CertificateVersion(InputStream in) throws IOException {</span>
<span class="line-removed">130         version = V1;</span>
<span class="line-removed">131         DerValue derVal = new DerValue(in);</span>
<span class="line-removed">132 </span>
<span class="line-removed">133         construct(derVal);</span>
<span class="line-removed">134     }</span>
<span class="line-removed">135 </span>
<span class="line-removed">136     /**</span>
<span class="line-removed">137      * Create the object, decoding the values from the passed DerValue.</span>
<span class="line-removed">138      *</span>
<span class="line-removed">139      * @param val the Der encoded value.</span>
<span class="line-removed">140      * @exception IOException on decoding errors.</span>
<span class="line-removed">141      */</span>
<span class="line-removed">142     public CertificateVersion(DerValue val) throws IOException {</span>
<span class="line-removed">143         version = V1;</span>
<span class="line-removed">144 </span>
<span class="line-removed">145         construct(val);</span>
<span class="line-removed">146     }</span>
<span class="line-removed">147 </span>
148     /**
149      * Return the version number of the certificate.
150      */
151     public String toString() {
152         return(&quot;Version: V&quot; + (version+1));
153     }
154 
155     /**
156      * Encode the CertificateVersion period in DER form to the stream.
157      *
158      * @param out the OutputStream to marshal the contents to.
159      * @exception IOException on errors.
160      */
161     public void encode(OutputStream out) throws IOException {
162         // Nothing for default
163         if (version == V1) {
164             return;
165         }
166         DerOutputStream tmp = new DerOutputStream();
167         tmp.putInteger(version);
</pre>
</td>
<td>
<hr />
<pre>
 54     public static final int     V3 = 2;
 55     /**
 56      * Identifier for this attribute, to be used with the
 57      * get, set, delete methods of Certificate, x509 type.
 58      */
 59     public static final String IDENT = &quot;x509.info.version&quot;;
 60     /**
 61      * Sub attributes name for this CertAttrSet.
 62      */
 63     public static final String NAME = &quot;version&quot;;
 64     public static final String VERSION = &quot;number&quot;;
 65 
 66     // Private data members
 67     int version = V1;
 68 
 69     // Returns the version number.
 70     private int getVersion() {
 71         return(version);
 72     }
 73 











 74     /**
 75      * The default constructor for this class,
 76      *  sets the version to 0 (i.e. X.509 version 1).
 77      */
 78     public CertificateVersion() {
 79         version = V1;
 80     }
 81 
 82     /**
 83      * The constructor for this class for the required version.
 84      *
 85      * @param version the version for the certificate.
 86      * @exception IOException if the version is not valid.
 87      */
 88     public CertificateVersion(int version) throws IOException {
 89 
 90         // check that it is a valid version
 91         if (version == V1 || version == V2 || version == V3)
 92             this.version = version;
 93         else {
 94             throw new IOException(&quot;X.509 Certificate version &quot; +
 95                                    version + &quot; not supported.\n&quot;);
 96         }
 97     }
 98 






































 99     /**
100      * Return the version number of the certificate.
101      */
102     public String toString() {
103         return(&quot;Version: V&quot; + (version+1));
104     }
105 
106     /**
107      * Encode the CertificateVersion period in DER form to the stream.
108      *
109      * @param out the OutputStream to marshal the contents to.
110      * @exception IOException on errors.
111      */
112     public void encode(OutputStream out) throws IOException {
113         // Nothing for default
114         if (version == V1) {
115             return;
116         }
117         DerOutputStream tmp = new DerOutputStream();
118         tmp.putInteger(version);
</pre>
</td>
</tr>
</table>
<center><a href="CRLExtensions.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="DistributionPoint.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>