<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/com/sun/crypto/provider/DHPrivateKey.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DHPublicKey.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/com/sun/crypto/provider/DHPrivateKey.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
187 
188     /**
189      * Returns the encoding format of this key: &quot;PKCS#8&quot;
190      */
191     public String getFormat() {
192         return &quot;PKCS#8&quot;;
193     }
194 
195     /**
196      * Returns the name of the algorithm associated with this key: &quot;DH&quot;
197      */
198     public String getAlgorithm() {
199         return &quot;DH&quot;;
200     }
201 
202     /**
203      * Get the encoding of the key.
204      */
205     public synchronized byte[] getEncoded() {
206         if (this.encodedKey == null) {
<span class="line-modified">207             try {</span>
<span class="line-removed">208                 DerOutputStream tmp = new DerOutputStream();</span>
209 
<span class="line-modified">210                 //</span>
<span class="line-modified">211                 // version</span>
<span class="line-modified">212                 //</span>
<span class="line-modified">213                 tmp.putInteger(PKCS8_VERSION);</span>
<span class="line-removed">214 </span>
<span class="line-removed">215                 //</span>
<span class="line-removed">216                 // privateKeyAlgorithm</span>
<span class="line-removed">217                 //</span>
<span class="line-removed">218                 DerOutputStream algid = new DerOutputStream();</span>
219 
<span class="line-modified">220                 // store OID</span>
<span class="line-modified">221                 algid.putOID(DHPublicKey.DH_OID);</span>
<span class="line-modified">222                 // encode parameters</span>
<span class="line-modified">223                 DerOutputStream params = new DerOutputStream();</span>
<span class="line-modified">224                 params.putInteger(this.p);</span>
<span class="line-modified">225                 params.putInteger(this.g);</span>
<span class="line-modified">226                 if (this.l != 0) {</span>
<span class="line-modified">227                     params.putInteger(this.l);</span>
<span class="line-modified">228                 }</span>
<span class="line-modified">229                 // wrap parameters into SEQUENCE</span>
<span class="line-modified">230                 DerValue paramSequence = new DerValue(DerValue.tag_Sequence,</span>
<span class="line-modified">231                                                       params.toByteArray());</span>
<span class="line-modified">232                 // store parameter SEQUENCE in algid</span>
<span class="line-modified">233                 algid.putDerValue(paramSequence);</span>
<span class="line-modified">234                 // wrap algid into SEQUENCE</span>
<span class="line-modified">235                 tmp.write(DerValue.tag_Sequence, algid);</span>





236 
<span class="line-modified">237                 // privateKey</span>
<span class="line-modified">238                 tmp.putOctetString(this.key);</span>
239 
<span class="line-modified">240                 // make it a SEQUENCE</span>
<span class="line-modified">241                 DerOutputStream derKey = new DerOutputStream();</span>
<span class="line-modified">242                 derKey.write(DerValue.tag_Sequence, tmp);</span>
<span class="line-modified">243                 this.encodedKey = derKey.toByteArray();</span>
<span class="line-removed">244             } catch (IOException e) {</span>
<span class="line-removed">245                 return null;</span>
<span class="line-removed">246             }</span>
247         }
248         return this.encodedKey.clone();
249     }
250 
251     /**
252      * Returns the private value, &lt;code&gt;x&lt;/code&gt;.
253      *
254      * @return the private value, &lt;code&gt;x&lt;/code&gt;
255      */
256     public BigInteger getX() {
257         return this.x;
258     }
259 
260     /**
261      * Returns the key parameters.
262      *
263      * @return the key parameters
264      */
265     public DHParameterSpec getParams() {
266         if (this.l != 0) {
</pre>
</td>
<td>
<hr />
<pre>
187 
188     /**
189      * Returns the encoding format of this key: &quot;PKCS#8&quot;
190      */
191     public String getFormat() {
192         return &quot;PKCS#8&quot;;
193     }
194 
195     /**
196      * Returns the name of the algorithm associated with this key: &quot;DH&quot;
197      */
198     public String getAlgorithm() {
199         return &quot;DH&quot;;
200     }
201 
202     /**
203      * Get the encoding of the key.
204      */
205     public synchronized byte[] getEncoded() {
206         if (this.encodedKey == null) {
<span class="line-modified">207             DerOutputStream tmp = new DerOutputStream();</span>

208 
<span class="line-modified">209             //</span>
<span class="line-modified">210             // version</span>
<span class="line-modified">211             //</span>
<span class="line-modified">212             tmp.putInteger(PKCS8_VERSION);</span>





213 
<span class="line-modified">214             //</span>
<span class="line-modified">215             // privateKeyAlgorithm</span>
<span class="line-modified">216             //</span>
<span class="line-modified">217             DerOutputStream algid = new DerOutputStream();</span>
<span class="line-modified">218 </span>
<span class="line-modified">219             // store OID</span>
<span class="line-modified">220             algid.putOID(DHPublicKey.DH_OID);</span>
<span class="line-modified">221             // encode parameters</span>
<span class="line-modified">222             DerOutputStream params = new DerOutputStream();</span>
<span class="line-modified">223             params.putInteger(this.p);</span>
<span class="line-modified">224             params.putInteger(this.g);</span>
<span class="line-modified">225             if (this.l != 0) {</span>
<span class="line-modified">226                 params.putInteger(this.l);</span>
<span class="line-modified">227             }</span>
<span class="line-modified">228             // wrap parameters into SEQUENCE</span>
<span class="line-modified">229             DerValue paramSequence = new DerValue(DerValue.tag_Sequence,</span>
<span class="line-added">230                     params.toByteArray());</span>
<span class="line-added">231             // store parameter SEQUENCE in algid</span>
<span class="line-added">232             algid.putDerValue(paramSequence);</span>
<span class="line-added">233             // wrap algid into SEQUENCE</span>
<span class="line-added">234             tmp.write(DerValue.tag_Sequence, algid);</span>
235 
<span class="line-modified">236             // privateKey</span>
<span class="line-modified">237             tmp.putOctetString(this.key);</span>
238 
<span class="line-modified">239             // make it a SEQUENCE</span>
<span class="line-modified">240             DerOutputStream derKey = new DerOutputStream();</span>
<span class="line-modified">241             derKey.write(DerValue.tag_Sequence, tmp);</span>
<span class="line-modified">242             this.encodedKey = derKey.toByteArray();</span>



243         }
244         return this.encodedKey.clone();
245     }
246 
247     /**
248      * Returns the private value, &lt;code&gt;x&lt;/code&gt;.
249      *
250      * @return the private value, &lt;code&gt;x&lt;/code&gt;
251      */
252     public BigInteger getX() {
253         return this.x;
254     }
255 
256     /**
257      * Returns the key parameters.
258      *
259      * @return the key parameters
260      */
261     public DHParameterSpec getParams() {
262         if (this.l != 0) {
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DHPublicKey.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>