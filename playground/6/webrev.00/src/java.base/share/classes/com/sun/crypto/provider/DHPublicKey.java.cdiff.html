<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/com/sun/crypto/provider/DHPublicKey.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DHPrivateKey.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="EncryptedPrivateKeyInfo.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/com/sun/crypto/provider/DHPublicKey.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 199,43 ***</span>
      /**
       * Get the encoding of the key.
       */
      public synchronized byte[] getEncoded() {
          if (this.encodedKey == null) {
<span class="line-modified">!             try {</span>
<span class="line-removed">-                 DerOutputStream algid = new DerOutputStream();</span>
  
<span class="line-modified">!                 // store oid in algid</span>
<span class="line-modified">!                 algid.putOID(DH_OID);</span>
  
<span class="line-modified">!                 // encode parameters</span>
<span class="line-modified">!                 DerOutputStream params = new DerOutputStream();</span>
<span class="line-modified">!                 params.putInteger(this.p);</span>
<span class="line-modified">!                 params.putInteger(this.g);</span>
<span class="line-modified">!                 if (this.l != 0) {</span>
<span class="line-modified">!                     params.putInteger(this.l);</span>
<span class="line-modified">!                 }</span>
<span class="line-modified">!                 // wrap parameters into SEQUENCE</span>
<span class="line-modified">!                 DerValue paramSequence = new DerValue(DerValue.tag_Sequence,</span>
<span class="line-modified">!                                                       params.toByteArray());</span>
<span class="line-modified">!                 // store parameter SEQUENCE in algid</span>
<span class="line-modified">!                 algid.putDerValue(paramSequence);</span>
  
<span class="line-modified">!                 // wrap algid into SEQUENCE, and store it in key encoding</span>
<span class="line-modified">!                 DerOutputStream tmpDerKey = new DerOutputStream();</span>
<span class="line-modified">!                 tmpDerKey.write(DerValue.tag_Sequence, algid);</span>
  
<span class="line-modified">!                 // store key data</span>
<span class="line-modified">!                 tmpDerKey.putBitString(this.key);</span>
  
<span class="line-modified">!                 // wrap algid and key into SEQUENCE</span>
<span class="line-modified">!                 DerOutputStream derKey = new DerOutputStream();</span>
<span class="line-modified">!                 derKey.write(DerValue.tag_Sequence, tmpDerKey);</span>
<span class="line-modified">!                 this.encodedKey = derKey.toByteArray();</span>
<span class="line-removed">-             } catch (IOException e) {</span>
<span class="line-removed">-                 return null;</span>
<span class="line-removed">-             }</span>
          }
          return this.encodedKey.clone();
      }
  
      /**
<span class="line-new-header">--- 199,39 ---</span>
      /**
       * Get the encoding of the key.
       */
      public synchronized byte[] getEncoded() {
          if (this.encodedKey == null) {
<span class="line-modified">!             DerOutputStream algid = new DerOutputStream();</span>
  
<span class="line-modified">!             // store oid in algid</span>
<span class="line-modified">!             algid.putOID(DH_OID);</span>
  
<span class="line-modified">!             // encode parameters</span>
<span class="line-modified">!             DerOutputStream params = new DerOutputStream();</span>
<span class="line-modified">!             params.putInteger(this.p);</span>
<span class="line-modified">!             params.putInteger(this.g);</span>
<span class="line-modified">!             if (this.l != 0) {</span>
<span class="line-modified">!                 params.putInteger(this.l);</span>
<span class="line-modified">!             }</span>
<span class="line-modified">!             // wrap parameters into SEQUENCE</span>
<span class="line-modified">!             DerValue paramSequence = new DerValue(DerValue.tag_Sequence,</span>
<span class="line-modified">!                     params.toByteArray());</span>
<span class="line-modified">!             // store parameter SEQUENCE in algid</span>
<span class="line-modified">!             algid.putDerValue(paramSequence);</span>
  
<span class="line-modified">!             // wrap algid into SEQUENCE, and store it in key encoding</span>
<span class="line-modified">!             DerOutputStream tmpDerKey = new DerOutputStream();</span>
<span class="line-modified">!             tmpDerKey.write(DerValue.tag_Sequence, algid);</span>
  
<span class="line-modified">!             // store key data</span>
<span class="line-modified">!             tmpDerKey.putBitString(this.key);</span>
  
<span class="line-modified">!             // wrap algid and key into SEQUENCE</span>
<span class="line-modified">!             DerOutputStream derKey = new DerOutputStream();</span>
<span class="line-modified">!             derKey.write(DerValue.tag_Sequence, tmpDerKey);</span>
<span class="line-modified">!             this.encodedKey = derKey.toByteArray();</span>
          }
          return this.encodedKey.clone();
      }
  
      /**
</pre>
<center><a href="DHPrivateKey.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="EncryptedPrivateKeyInfo.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>