<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.base/share/classes/com/sun/crypto/provider/DHPublicKey.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DHPrivateKey.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="EncryptedPrivateKeyInfo.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/com/sun/crypto/provider/DHPublicKey.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -199,43 +199,39 @@</span>
      /**
       * Get the encoding of the key.
       */
      public synchronized byte[] getEncoded() {
          if (this.encodedKey == null) {
<span class="udiff-line-modified-removed">-             try {</span>
<span class="udiff-line-removed">-                 DerOutputStream algid = new DerOutputStream();</span>
<span class="udiff-line-modified-added">+             DerOutputStream algid = new DerOutputStream();</span>
  
<span class="udiff-line-modified-removed">-                 // store oid in algid</span>
<span class="udiff-line-modified-removed">-                 algid.putOID(DH_OID);</span>
<span class="udiff-line-modified-added">+             // store oid in algid</span>
<span class="udiff-line-modified-added">+             algid.putOID(DH_OID);</span>
  
<span class="udiff-line-modified-removed">-                 // encode parameters</span>
<span class="udiff-line-modified-removed">-                 DerOutputStream params = new DerOutputStream();</span>
<span class="udiff-line-modified-removed">-                 params.putInteger(this.p);</span>
<span class="udiff-line-modified-removed">-                 params.putInteger(this.g);</span>
<span class="udiff-line-modified-removed">-                 if (this.l != 0) {</span>
<span class="udiff-line-modified-removed">-                     params.putInteger(this.l);</span>
<span class="udiff-line-modified-removed">-                 }</span>
<span class="udiff-line-modified-removed">-                 // wrap parameters into SEQUENCE</span>
<span class="udiff-line-modified-removed">-                 DerValue paramSequence = new DerValue(DerValue.tag_Sequence,</span>
<span class="udiff-line-modified-removed">-                                                       params.toByteArray());</span>
<span class="udiff-line-modified-removed">-                 // store parameter SEQUENCE in algid</span>
<span class="udiff-line-modified-removed">-                 algid.putDerValue(paramSequence);</span>
<span class="udiff-line-modified-added">+             // encode parameters</span>
<span class="udiff-line-modified-added">+             DerOutputStream params = new DerOutputStream();</span>
<span class="udiff-line-modified-added">+             params.putInteger(this.p);</span>
<span class="udiff-line-modified-added">+             params.putInteger(this.g);</span>
<span class="udiff-line-modified-added">+             if (this.l != 0) {</span>
<span class="udiff-line-modified-added">+                 params.putInteger(this.l);</span>
<span class="udiff-line-modified-added">+             }</span>
<span class="udiff-line-modified-added">+             // wrap parameters into SEQUENCE</span>
<span class="udiff-line-modified-added">+             DerValue paramSequence = new DerValue(DerValue.tag_Sequence,</span>
<span class="udiff-line-modified-added">+                     params.toByteArray());</span>
<span class="udiff-line-modified-added">+             // store parameter SEQUENCE in algid</span>
<span class="udiff-line-modified-added">+             algid.putDerValue(paramSequence);</span>
  
<span class="udiff-line-modified-removed">-                 // wrap algid into SEQUENCE, and store it in key encoding</span>
<span class="udiff-line-modified-removed">-                 DerOutputStream tmpDerKey = new DerOutputStream();</span>
<span class="udiff-line-modified-removed">-                 tmpDerKey.write(DerValue.tag_Sequence, algid);</span>
<span class="udiff-line-modified-added">+             // wrap algid into SEQUENCE, and store it in key encoding</span>
<span class="udiff-line-modified-added">+             DerOutputStream tmpDerKey = new DerOutputStream();</span>
<span class="udiff-line-modified-added">+             tmpDerKey.write(DerValue.tag_Sequence, algid);</span>
  
<span class="udiff-line-modified-removed">-                 // store key data</span>
<span class="udiff-line-modified-removed">-                 tmpDerKey.putBitString(this.key);</span>
<span class="udiff-line-modified-added">+             // store key data</span>
<span class="udiff-line-modified-added">+             tmpDerKey.putBitString(this.key);</span>
  
<span class="udiff-line-modified-removed">-                 // wrap algid and key into SEQUENCE</span>
<span class="udiff-line-modified-removed">-                 DerOutputStream derKey = new DerOutputStream();</span>
<span class="udiff-line-modified-removed">-                 derKey.write(DerValue.tag_Sequence, tmpDerKey);</span>
<span class="udiff-line-modified-removed">-                 this.encodedKey = derKey.toByteArray();</span>
<span class="udiff-line-removed">-             } catch (IOException e) {</span>
<span class="udiff-line-removed">-                 return null;</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-modified-added">+             // wrap algid and key into SEQUENCE</span>
<span class="udiff-line-modified-added">+             DerOutputStream derKey = new DerOutputStream();</span>
<span class="udiff-line-modified-added">+             derKey.write(DerValue.tag_Sequence, tmpDerKey);</span>
<span class="udiff-line-modified-added">+             this.encodedKey = derKey.toByteArray();</span>
          }
          return this.encodedKey.clone();
      }
  
      /**
</pre>
<center><a href="DHPrivateKey.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="EncryptedPrivateKeyInfo.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>