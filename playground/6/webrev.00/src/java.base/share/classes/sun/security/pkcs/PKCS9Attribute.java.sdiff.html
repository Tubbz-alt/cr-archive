<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/sun/security/pkcs/PKCS9Attribute.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="PKCS8Key.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="PKCS9Attributes.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/pkcs/PKCS9Attribute.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
483         case 16:     // SigningCertificate attribute
484             value = new SigningCertificateInfo(elems[0].toByteArray());
485             break;
486 
487         case 17:     // SignatureTimestampToken attribute
488             value = elems[0].toByteArray();
489             break;
490         default: // can&#39;t happen
491         }
492     }
493 
494     /**
495      * Write the DER encoding of this attribute to an output stream.
496      *
497      * &lt;P&gt; N.B.: This method always encodes values of
498      * ChallengePassword and UnstructuredAddress attributes as ASN.1
499      * &lt;code&gt;PrintableString&lt;/code&gt;s, without checking whether they
500      * should be encoded as &lt;code&gt;T61String&lt;/code&gt;s.
501      */
502     @Override
<span class="line-modified">503     public void derEncode(OutputStream out) throws IOException {</span>
504         DerOutputStream temp = new DerOutputStream();
505         temp.putOID(oid);
506         switch (index) {
507         case -1:    // Unknown
508             temp.write((byte[])value);
509             break;
510         case 1:     // email address
511         case 2:     // unstructured name
512             { // open scope
513                 String[] values = (String[]) value;
514                 DerOutputStream[] temps = new
515                     DerOutputStream[values.length];
516 
517                 for (int i=0; i &lt; values.length; i++) {
518                     temps[i] = new DerOutputStream();
519                     temps[i].putIA5String( values[i]);
520                 }
521                 temp.putOrderedSetOf(DerValue.tag_Set, temps);
522             } // close scope
523             break;
</pre>
<hr />
<pre>
556                 temp2.putPrintableString((String) value);
557                 temp.write(DerValue.tag_Set, temp2.toByteArray());
558             }
559             break;
560 
561         case 8:     // unstructured address
562             { // open scope
563                 String[] values = (String[]) value;
564                 DerOutputStream[] temps = new
565                     DerOutputStream[values.length];
566 
567                 for (int i=0; i &lt; values.length; i++) {
568                     temps[i] = new DerOutputStream();
569                     temps[i].putPrintableString(values[i]);
570                 }
571                 temp.putOrderedSetOf(DerValue.tag_Set, temps);
572             } // close scope
573             break;
574 
575         case 9:     // extended-certificate attribute -- not supported
<span class="line-modified">576             throw new IOException(&quot;PKCS9 extended-certificate &quot; +</span>
577                                   &quot;attribute not supported.&quot;);
578             // break unnecessary
579         case 10:    // issuerAndserialNumber attribute -- not supported
<span class="line-modified">580             throw new IOException(&quot;PKCS9 IssuerAndSerialNumber&quot; +</span>
581                                   &quot;attribute not supported.&quot;);
582             // break unnecessary
583         case 11:    // RSA DSI proprietary
584         case 12:    // RSA DSI proprietary
<span class="line-modified">585             throw new IOException(&quot;PKCS9 RSA DSI attributes&quot; +</span>
586                                   &quot;11 and 12, not supported.&quot;);
587             // break unnecessary
588         case 13:    // S/MIME unused attribute
<span class="line-modified">589             throw new IOException(&quot;PKCS9 attribute #13 not supported.&quot;);</span>
590             // break unnecessary
591 
592         case 14:     // ExtensionRequest
593             {
594                 DerOutputStream temp2 = new DerOutputStream();
595                 CertificateExtensions exts = (CertificateExtensions)value;
596                 try {
597                     exts.encode(temp2, true);
598                 } catch (CertificateException ex) {
<span class="line-modified">599                     throw new IOException(ex.toString());</span>
600                 }
601                 temp.write(DerValue.tag_Set, temp2.toByteArray());
602             }
603             break;
604         case 15:    // SMIMECapability
<span class="line-modified">605             throw new IOException(&quot;PKCS9 attribute #15 not supported.&quot;);</span>
606             // break unnecessary
607 
608         case 16:    // SigningCertificate
<span class="line-modified">609             throw new IOException(</span>
610                 &quot;PKCS9 SigningCertificate attribute not supported.&quot;);
611             // break unnecessary
612 
613         case 17:    // SignatureTimestampToken
614             temp.write(DerValue.tag_Set, (byte[])value);
615             break;
616 
617         default: // can&#39;t happen
618         }
619 
620         DerOutputStream derOut = new DerOutputStream();
621         derOut.write(DerValue.tag_Sequence, temp.toByteArray());
622 
623         out.write(derOut.toByteArray());
624 
625     }
626 
627     /**
628      * Returns if the attribute is known. Unknown attributes can be created
629      * from DER encoding with unknown OIDs.
</pre>
</td>
<td>
<hr />
<pre>
483         case 16:     // SigningCertificate attribute
484             value = new SigningCertificateInfo(elems[0].toByteArray());
485             break;
486 
487         case 17:     // SignatureTimestampToken attribute
488             value = elems[0].toByteArray();
489             break;
490         default: // can&#39;t happen
491         }
492     }
493 
494     /**
495      * Write the DER encoding of this attribute to an output stream.
496      *
497      * &lt;P&gt; N.B.: This method always encodes values of
498      * ChallengePassword and UnstructuredAddress attributes as ASN.1
499      * &lt;code&gt;PrintableString&lt;/code&gt;s, without checking whether they
500      * should be encoded as &lt;code&gt;T61String&lt;/code&gt;s.
501      */
502     @Override
<span class="line-modified">503     public void derEncode(DerOutputStream out) {</span>
504         DerOutputStream temp = new DerOutputStream();
505         temp.putOID(oid);
506         switch (index) {
507         case -1:    // Unknown
508             temp.write((byte[])value);
509             break;
510         case 1:     // email address
511         case 2:     // unstructured name
512             { // open scope
513                 String[] values = (String[]) value;
514                 DerOutputStream[] temps = new
515                     DerOutputStream[values.length];
516 
517                 for (int i=0; i &lt; values.length; i++) {
518                     temps[i] = new DerOutputStream();
519                     temps[i].putIA5String( values[i]);
520                 }
521                 temp.putOrderedSetOf(DerValue.tag_Set, temps);
522             } // close scope
523             break;
</pre>
<hr />
<pre>
556                 temp2.putPrintableString((String) value);
557                 temp.write(DerValue.tag_Set, temp2.toByteArray());
558             }
559             break;
560 
561         case 8:     // unstructured address
562             { // open scope
563                 String[] values = (String[]) value;
564                 DerOutputStream[] temps = new
565                     DerOutputStream[values.length];
566 
567                 for (int i=0; i &lt; values.length; i++) {
568                     temps[i] = new DerOutputStream();
569                     temps[i].putPrintableString(values[i]);
570                 }
571                 temp.putOrderedSetOf(DerValue.tag_Set, temps);
572             } // close scope
573             break;
574 
575         case 9:     // extended-certificate attribute -- not supported
<span class="line-modified">576             throw new UnsupportedOperationException(&quot;PKCS9 extended-certificate &quot; +</span>
577                                   &quot;attribute not supported.&quot;);
578             // break unnecessary
579         case 10:    // issuerAndserialNumber attribute -- not supported
<span class="line-modified">580             throw new UnsupportedOperationException(&quot;PKCS9 IssuerAndSerialNumber&quot; +</span>
581                                   &quot;attribute not supported.&quot;);
582             // break unnecessary
583         case 11:    // RSA DSI proprietary
584         case 12:    // RSA DSI proprietary
<span class="line-modified">585             throw new UnsupportedOperationException(&quot;PKCS9 RSA DSI attributes&quot; +</span>
586                                   &quot;11 and 12, not supported.&quot;);
587             // break unnecessary
588         case 13:    // S/MIME unused attribute
<span class="line-modified">589             throw new UnsupportedOperationException(&quot;PKCS9 attribute #13 not supported.&quot;);</span>
590             // break unnecessary
591 
592         case 14:     // ExtensionRequest
593             {
594                 DerOutputStream temp2 = new DerOutputStream();
595                 CertificateExtensions exts = (CertificateExtensions)value;
596                 try {
597                     exts.encode(temp2, true);
598                 } catch (CertificateException ex) {
<span class="line-modified">599                     throw new IllegalArgumentException(ex.toString());</span>
600                 }
601                 temp.write(DerValue.tag_Set, temp2.toByteArray());
602             }
603             break;
604         case 15:    // SMIMECapability
<span class="line-modified">605             throw new UnsupportedOperationException(&quot;PKCS9 attribute #15 not supported.&quot;);</span>
606             // break unnecessary
607 
608         case 16:    // SigningCertificate
<span class="line-modified">609             throw new UnsupportedOperationException(</span>
610                 &quot;PKCS9 SigningCertificate attribute not supported.&quot;);
611             // break unnecessary
612 
613         case 17:    // SignatureTimestampToken
614             temp.write(DerValue.tag_Set, (byte[])value);
615             break;
616 
617         default: // can&#39;t happen
618         }
619 
620         DerOutputStream derOut = new DerOutputStream();
621         derOut.write(DerValue.tag_Sequence, temp.toByteArray());
622 
623         out.write(derOut.toByteArray());
624 
625     }
626 
627     /**
628      * Returns if the attribute is known. Unknown attributes can be created
629      * from DER encoding with unknown OIDs.
</pre>
</td>
</tr>
</table>
<center><a href="PKCS8Key.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="PKCS9Attributes.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>