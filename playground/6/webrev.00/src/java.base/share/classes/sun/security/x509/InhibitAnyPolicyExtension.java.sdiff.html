<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/sun/security/x509/InhibitAnyPolicyExtension.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="IPAddressName.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="InvalidityDateExtension.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/x509/InhibitAnyPolicyExtension.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 68      * get, set, delete methods of Certificate, x509 type.
 69      */
 70     public static final String IDENT = &quot;x509.info.extensions.InhibitAnyPolicy&quot;;
 71 
 72     /**
 73      * Object identifier for &quot;any-policy&quot;
 74      */
 75     public static ObjectIdentifier AnyPolicy_Id =
 76             ObjectIdentifier.of(KnownOIDs.CE_CERT_POLICIES_ANY);
 77 
 78     /**
 79      * Attribute names.
 80      */
 81     public static final String NAME = &quot;InhibitAnyPolicy&quot;;
 82     public static final String SKIP_CERTS = &quot;skip_certs&quot;;
 83 
 84     // Private data members
 85     private int skipCerts = Integer.MAX_VALUE;
 86 
 87     // Encode this extension value
<span class="line-modified"> 88     private void encodeThis() throws IOException {</span>
 89         DerOutputStream out = new DerOutputStream();
 90         out.putInteger(skipCerts);
 91         this.extensionValue = out.toByteArray();
 92     }
 93 
 94     /**
 95      * Default constructor for this object.
 96      *
 97      * @param skipCerts specifies the depth of the certification path.
 98      *                  Use value of -1 to request unlimited depth.
 99      */
100     public InhibitAnyPolicyExtension(int skipCerts) throws IOException {
101         if (skipCerts &lt; -1)
102             throw new IOException(&quot;Invalid value for skipCerts&quot;);
103         if (skipCerts == -1)
104             this.skipCerts = Integer.MAX_VALUE;
105         else
106             this.skipCerts = skipCerts;
107         this.extensionId = PKIXExtensions.InhibitAnyPolicy_Id;
108         critical = true;
</pre>
<hr />
<pre>
143         if (skipCertsValue == -1) {
144             this.skipCerts = Integer.MAX_VALUE;
145         } else {
146             this.skipCerts = skipCertsValue;
147         }
148     }
149 
150      /**
151       * Return user readable form of extension.
152       */
153      public String toString() {
154          String s = super.toString() + &quot;InhibitAnyPolicy: &quot; + skipCerts + &quot;\n&quot;;
155          return s;
156      }
157 
158      /**
159       * Encode this extension value to the output stream.
160       *
161       * @param out the DerOutputStream to encode the extension to.
162       */
<span class="line-modified">163      public void encode(OutputStream out) throws IOException {</span>
<span class="line-modified">164          DerOutputStream tmp = new DerOutputStream();</span>
165          if (extensionValue == null) {
166              this.extensionId = PKIXExtensions.InhibitAnyPolicy_Id;
167              critical = true;
168              encodeThis();
169          }
<span class="line-modified">170          super.encode(tmp);</span>
<span class="line-removed">171 </span>
<span class="line-removed">172          out.write(tmp.toByteArray());</span>
173      }
174 
175     /**
176      * Set the attribute value.
177      *
178      * @param name name of attribute to set. Must be SKIP_CERTS.
179      * @param obj  value to which attribute is to be set.  Must be Integer
180      *             type.
181      * @throws IOException on error
182      */
183     public void set(String name, Object obj) throws IOException {
184         if (name.equalsIgnoreCase(SKIP_CERTS)) {
185             if (!(obj instanceof Integer))
186                 throw new IOException(&quot;Attribute value should be of type Integer.&quot;);
187             int skipCertsValue = ((Integer)obj).intValue();
188             if (skipCertsValue &lt; -1)
189                 throw new IOException(&quot;Invalid value for skipCerts&quot;);
190             if (skipCertsValue == -1) {
191                 skipCerts = Integer.MAX_VALUE;
192             } else {
</pre>
</td>
<td>
<hr />
<pre>
 68      * get, set, delete methods of Certificate, x509 type.
 69      */
 70     public static final String IDENT = &quot;x509.info.extensions.InhibitAnyPolicy&quot;;
 71 
 72     /**
 73      * Object identifier for &quot;any-policy&quot;
 74      */
 75     public static ObjectIdentifier AnyPolicy_Id =
 76             ObjectIdentifier.of(KnownOIDs.CE_CERT_POLICIES_ANY);
 77 
 78     /**
 79      * Attribute names.
 80      */
 81     public static final String NAME = &quot;InhibitAnyPolicy&quot;;
 82     public static final String SKIP_CERTS = &quot;skip_certs&quot;;
 83 
 84     // Private data members
 85     private int skipCerts = Integer.MAX_VALUE;
 86 
 87     // Encode this extension value
<span class="line-modified"> 88     private void encodeThis() {</span>
 89         DerOutputStream out = new DerOutputStream();
 90         out.putInteger(skipCerts);
 91         this.extensionValue = out.toByteArray();
 92     }
 93 
 94     /**
 95      * Default constructor for this object.
 96      *
 97      * @param skipCerts specifies the depth of the certification path.
 98      *                  Use value of -1 to request unlimited depth.
 99      */
100     public InhibitAnyPolicyExtension(int skipCerts) throws IOException {
101         if (skipCerts &lt; -1)
102             throw new IOException(&quot;Invalid value for skipCerts&quot;);
103         if (skipCerts == -1)
104             this.skipCerts = Integer.MAX_VALUE;
105         else
106             this.skipCerts = skipCerts;
107         this.extensionId = PKIXExtensions.InhibitAnyPolicy_Id;
108         critical = true;
</pre>
<hr />
<pre>
143         if (skipCertsValue == -1) {
144             this.skipCerts = Integer.MAX_VALUE;
145         } else {
146             this.skipCerts = skipCertsValue;
147         }
148     }
149 
150      /**
151       * Return user readable form of extension.
152       */
153      public String toString() {
154          String s = super.toString() + &quot;InhibitAnyPolicy: &quot; + skipCerts + &quot;\n&quot;;
155          return s;
156      }
157 
158      /**
159       * Encode this extension value to the output stream.
160       *
161       * @param out the DerOutputStream to encode the extension to.
162       */
<span class="line-modified">163      @Override</span>
<span class="line-modified">164      public void encode(DerOutputStream out) {</span>
165          if (extensionValue == null) {
166              this.extensionId = PKIXExtensions.InhibitAnyPolicy_Id;
167              critical = true;
168              encodeThis();
169          }
<span class="line-modified">170          super.encode(out);</span>


171      }
172 
173     /**
174      * Set the attribute value.
175      *
176      * @param name name of attribute to set. Must be SKIP_CERTS.
177      * @param obj  value to which attribute is to be set.  Must be Integer
178      *             type.
179      * @throws IOException on error
180      */
181     public void set(String name, Object obj) throws IOException {
182         if (name.equalsIgnoreCase(SKIP_CERTS)) {
183             if (!(obj instanceof Integer))
184                 throw new IOException(&quot;Attribute value should be of type Integer.&quot;);
185             int skipCertsValue = ((Integer)obj).intValue();
186             if (skipCertsValue &lt; -1)
187                 throw new IOException(&quot;Invalid value for skipCerts&quot;);
188             if (skipCertsValue == -1) {
189                 skipCerts = Integer.MAX_VALUE;
190             } else {
</pre>
</td>
</tr>
</table>
<center><a href="IPAddressName.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="InvalidityDateExtension.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>