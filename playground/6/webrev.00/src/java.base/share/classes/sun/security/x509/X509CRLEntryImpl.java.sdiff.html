<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/sun/security/x509/X509CRLEntryImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="X500Name.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="X509CRLImpl.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/x509/X509CRLEntryImpl.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
138 
139     /**
140      * Returns true if this revoked certificate entry has
141      * extensions, otherwise false.
142      *
143      * @return true if this CRL entry has extensions, otherwise
144      * false.
145      */
146     public boolean hasExtensions() {
147         return (extensions != null);
148     }
149 
150     /**
151      * Encodes the revoked certificate to an output stream.
152      *
153      * @param outStrm an output stream to which the encoded revoked
154      * certificate is written.
155      * @exception CRLException on encoding errors.
156      */
157     public void encode(DerOutputStream outStrm) throws CRLException {
<span class="line-modified">158         try {</span>
<span class="line-modified">159             if (revokedCert == null) {</span>
<span class="line-modified">160                 DerOutputStream tmp = new DerOutputStream();</span>
<span class="line-modified">161                 // sequence { serialNumber, revocationDate, extensions }</span>
<span class="line-modified">162                 serialNumber.encode(tmp);</span>
<span class="line-modified">163 </span>
<span class="line-modified">164                 if (revocationDate.getTime() &lt; CertificateValidity.YR_2050) {</span>
<span class="line-modified">165                     tmp.putUTCTime(revocationDate);</span>
<span class="line-modified">166                 } else {</span>
<span class="line-modified">167                     tmp.putGeneralizedTime(revocationDate);</span>
<span class="line-removed">168                 }</span>
169 
<span class="line-modified">170                 if (extensions != null)</span>
<span class="line-modified">171                     extensions.encode(tmp, isExplicit);</span>
172 
<span class="line-modified">173                 DerOutputStream seq = new DerOutputStream();</span>
<span class="line-modified">174                 seq.write(DerValue.tag_Sequence, tmp);</span>
175 
<span class="line-modified">176                 revokedCert = seq.toByteArray();</span>
<span class="line-removed">177             }</span>
<span class="line-removed">178             outStrm.write(revokedCert);</span>
<span class="line-removed">179         } catch (IOException e) {</span>
<span class="line-removed">180              throw new CRLException(&quot;Encoding error: &quot; + e.toString());</span>
181         }

182     }
183 
184     /**
185      * Returns the ASN.1 DER-encoded form of this CRL Entry,
186      * which corresponds to the inner SEQUENCE.
187      *
188      * @exception CRLException if an encoding error occurs.
189      */
190     public byte[] getEncoded() throws CRLException {
191         return getEncoded0().clone();
192     }
193 
194     // Called internally to avoid clone
195     private byte[] getEncoded0() throws CRLException {
196         if (revokedCert == null)
197             this.encode(new DerOutputStream());
198         return revokedCert;
199     }
200 
201     @Override
</pre>
</td>
<td>
<hr />
<pre>
138 
139     /**
140      * Returns true if this revoked certificate entry has
141      * extensions, otherwise false.
142      *
143      * @return true if this CRL entry has extensions, otherwise
144      * false.
145      */
146     public boolean hasExtensions() {
147         return (extensions != null);
148     }
149 
150     /**
151      * Encodes the revoked certificate to an output stream.
152      *
153      * @param outStrm an output stream to which the encoded revoked
154      * certificate is written.
155      * @exception CRLException on encoding errors.
156      */
157     public void encode(DerOutputStream outStrm) throws CRLException {
<span class="line-modified">158         if (revokedCert == null) {</span>
<span class="line-modified">159             DerOutputStream tmp = new DerOutputStream();</span>
<span class="line-modified">160             // sequence { serialNumber, revocationDate, extensions }</span>
<span class="line-modified">161             serialNumber.encode(tmp);</span>
<span class="line-modified">162 </span>
<span class="line-modified">163             if (revocationDate.getTime() &lt; CertificateValidity.YR_2050) {</span>
<span class="line-modified">164                 tmp.putUTCTime(revocationDate);</span>
<span class="line-modified">165             } else {</span>
<span class="line-modified">166                 tmp.putGeneralizedTime(revocationDate);</span>
<span class="line-modified">167             }</span>

168 
<span class="line-modified">169             if (extensions != null)</span>
<span class="line-modified">170                 extensions.encode(tmp, isExplicit);</span>
171 
<span class="line-modified">172             DerOutputStream seq = new DerOutputStream();</span>
<span class="line-modified">173             seq.write(DerValue.tag_Sequence, tmp);</span>
174 
<span class="line-modified">175             revokedCert = seq.toByteArray();</span>




176         }
<span class="line-added">177         outStrm.write(revokedCert);</span>
178     }
179 
180     /**
181      * Returns the ASN.1 DER-encoded form of this CRL Entry,
182      * which corresponds to the inner SEQUENCE.
183      *
184      * @exception CRLException if an encoding error occurs.
185      */
186     public byte[] getEncoded() throws CRLException {
187         return getEncoded0().clone();
188     }
189 
190     // Called internally to avoid clone
191     private byte[] getEncoded0() throws CRLException {
192         if (revokedCert == null)
193             this.encode(new DerOutputStream());
194         return revokedCert;
195     }
196 
197     @Override
</pre>
</td>
</tr>
</table>
<center><a href="X500Name.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="X509CRLImpl.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>