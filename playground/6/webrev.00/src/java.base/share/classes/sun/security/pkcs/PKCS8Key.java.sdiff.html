<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/sun/security/pkcs/PKCS8Key.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="EncryptedPrivateKeyInfo.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="PKCS9Attribute.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/pkcs/PKCS8Key.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
191             // ignored and return null
192         }
193         return null;
194     }
195 
196     /**
197      * Returns the format for this key: &quot;PKCS#8&quot;
198      */
199     public String getFormat() {
200         return &quot;PKCS#8&quot;;
201     }
202 
203     /**
204      * DER-encodes this key as a byte array that can be retrieved
205      * by the {@link #getEncoded()} method.
206      *
207      * @exception InvalidKeyException if an encoding error occurs.
208      */
209     private void encode() throws InvalidKeyException {
210         if (encodedKey == null) {
<span class="line-modified">211             try {</span>
<span class="line-modified">212                 DerOutputStream out = new DerOutputStream ();</span>
<span class="line-modified">213                 DerOutputStream tmp = new DerOutputStream();</span>
<span class="line-modified">214                 tmp.putInteger(V1);</span>
<span class="line-modified">215                 algid.encode(tmp);</span>
<span class="line-modified">216                 tmp.putOctetString(key);</span>
<span class="line-modified">217                 out.write(DerValue.tag_Sequence, tmp);</span>
<span class="line-removed">218                 encodedKey = out.toByteArray();</span>
<span class="line-removed">219             } catch (IOException e) {</span>
<span class="line-removed">220                 throw new InvalidKeyException (&quot;IOException : &quot; +</span>
<span class="line-removed">221                                                e.getMessage());</span>
<span class="line-removed">222             }</span>
223         }
224     }
225 
226     @java.io.Serial
227     protected Object writeReplace() throws java.io.ObjectStreamException {
228         return new KeyRep(KeyRep.Type.PRIVATE,
229                         getAlgorithm(),
230                         getFormat(),
231                         getEncoded());
232     }
233 
234     /**
235      * We used to serialize a PKCS8Key as itself (instead of a KeyRep).
236      */
237     @java.io.Serial
238     private void readObject(ObjectInputStream stream) throws IOException {
239         try {
240             decode(stream);
241         } catch (InvalidKeyException e) {
242             throw new IOException(&quot;deserialized key is invalid: &quot; +
</pre>
</td>
<td>
<hr />
<pre>
191             // ignored and return null
192         }
193         return null;
194     }
195 
196     /**
197      * Returns the format for this key: &quot;PKCS#8&quot;
198      */
199     public String getFormat() {
200         return &quot;PKCS#8&quot;;
201     }
202 
203     /**
204      * DER-encodes this key as a byte array that can be retrieved
205      * by the {@link #getEncoded()} method.
206      *
207      * @exception InvalidKeyException if an encoding error occurs.
208      */
209     private void encode() throws InvalidKeyException {
210         if (encodedKey == null) {
<span class="line-modified">211             DerOutputStream out = new DerOutputStream();</span>
<span class="line-modified">212             DerOutputStream tmp = new DerOutputStream();</span>
<span class="line-modified">213             tmp.putInteger(V1);</span>
<span class="line-modified">214             algid.derEncode(tmp);</span>
<span class="line-modified">215             tmp.putOctetString(key);</span>
<span class="line-modified">216             out.write(DerValue.tag_Sequence, tmp);</span>
<span class="line-modified">217             encodedKey = out.toByteArray();</span>





218         }
219     }
220 
221     @java.io.Serial
222     protected Object writeReplace() throws java.io.ObjectStreamException {
223         return new KeyRep(KeyRep.Type.PRIVATE,
224                         getAlgorithm(),
225                         getFormat(),
226                         getEncoded());
227     }
228 
229     /**
230      * We used to serialize a PKCS8Key as itself (instead of a KeyRep).
231      */
232     @java.io.Serial
233     private void readObject(ObjectInputStream stream) throws IOException {
234         try {
235             decode(stream);
236         } catch (InvalidKeyException e) {
237             throw new IOException(&quot;deserialized key is invalid: &quot; +
</pre>
</td>
</tr>
</table>
<center><a href="EncryptedPrivateKeyInfo.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="PKCS9Attribute.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>