<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/sun/security/x509/PolicyConstraintsExtension.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="OtherName.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="PolicyInformation.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/x509/PolicyConstraintsExtension.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 58 implements CertAttrSet&lt;String&gt; {
 59     /**
 60      * Identifier for this attribute, to be used with the
 61      * get, set, delete methods of Certificate, x509 type.
 62      */
 63     public static final String IDENT = &quot;x509.info.extensions.PolicyConstraints&quot;;
 64     /**
 65      * Attribute names.
 66      */
 67     public static final String NAME = &quot;PolicyConstraints&quot;;
 68     public static final String REQUIRE = &quot;require&quot;;
 69     public static final String INHIBIT = &quot;inhibit&quot;;
 70 
 71     private static final byte TAG_REQUIRE = 0;
 72     private static final byte TAG_INHIBIT = 1;
 73 
 74     private int require = -1;
 75     private int inhibit = -1;
 76 
 77     // Encode this extension value.
<span class="line-modified"> 78     private void encodeThis() throws IOException {</span>
 79         if (require == -1 &amp;&amp; inhibit == -1) {
 80             this.extensionValue = null;
 81             return;
 82         }
 83         DerOutputStream tagged = new DerOutputStream();
 84         DerOutputStream seq = new DerOutputStream();
 85 
 86         if (require != -1) {
 87             DerOutputStream tmp = new DerOutputStream();
 88             tmp.putInteger(require);
 89             tagged.writeImplicit(DerValue.createTag(DerValue.TAG_CONTEXT,
 90                          false, TAG_REQUIRE), tmp);
 91         }
 92         if (inhibit != -1) {
 93             DerOutputStream tmp = new DerOutputStream();
 94             tmp.putInteger(inhibit);
 95             tagged.writeImplicit(DerValue.createTag(DerValue.TAG_CONTEXT,
 96                          false, TAG_INHIBIT), tmp);
 97         }
 98         seq.write(DerValue.tag_Sequence, tagged);
</pre>
<hr />
<pre>
184         } else {
185             sb.append(require)
186                 .append(&#39;;&#39;);
187         }
188         sb.append(&quot;\tInhibit: &quot;);
189         if (inhibit == -1) {
190             sb.append(&quot;unspecified&quot;);
191         } else {
192             sb.append(inhibit);
193         }
194         sb.append(&quot; ]\n&quot;);
195         return sb.toString();
196     }
197 
198     /**
199      * Write the extension to the DerOutputStream.
200      *
201      * @param out the DerOutputStream to write the extension to.
202      * @exception IOException on encoding errors.
203      */
<span class="line-modified">204     public void encode(OutputStream out) throws IOException {</span>
<span class="line-modified">205         DerOutputStream tmp = new DerOutputStream();</span>
206         if (extensionValue == null) {
207           extensionId = PKIXExtensions.PolicyConstraints_Id;
208           critical = true;
209           encodeThis();
210         }
<span class="line-modified">211         super.encode(tmp);</span>
<span class="line-removed">212         out.write(tmp.toByteArray());</span>
213     }
214 
215     /**
216      * Set the attribute value.
217      */
218     public void set(String name, Object obj) throws IOException {
219         if (!(obj instanceof Integer)) {
220             throw new IOException(&quot;Attribute value should be of type Integer.&quot;);
221         }
222         if (name.equalsIgnoreCase(REQUIRE)) {
223             require = ((Integer)obj).intValue();
224         } else if (name.equalsIgnoreCase(INHIBIT)) {
225             inhibit = ((Integer)obj).intValue();
226         } else {
227           throw new IOException(&quot;Attribute name &quot; + &quot;[&quot; + name + &quot;]&quot; +
228                                 &quot; not recognized by &quot; +
229                                 &quot;CertAttrSet:PolicyConstraints.&quot;);
230         }
231         encodeThis();
232     }
</pre>
</td>
<td>
<hr />
<pre>
 58 implements CertAttrSet&lt;String&gt; {
 59     /**
 60      * Identifier for this attribute, to be used with the
 61      * get, set, delete methods of Certificate, x509 type.
 62      */
 63     public static final String IDENT = &quot;x509.info.extensions.PolicyConstraints&quot;;
 64     /**
 65      * Attribute names.
 66      */
 67     public static final String NAME = &quot;PolicyConstraints&quot;;
 68     public static final String REQUIRE = &quot;require&quot;;
 69     public static final String INHIBIT = &quot;inhibit&quot;;
 70 
 71     private static final byte TAG_REQUIRE = 0;
 72     private static final byte TAG_INHIBIT = 1;
 73 
 74     private int require = -1;
 75     private int inhibit = -1;
 76 
 77     // Encode this extension value.
<span class="line-modified"> 78     private void encodeThis() {</span>
 79         if (require == -1 &amp;&amp; inhibit == -1) {
 80             this.extensionValue = null;
 81             return;
 82         }
 83         DerOutputStream tagged = new DerOutputStream();
 84         DerOutputStream seq = new DerOutputStream();
 85 
 86         if (require != -1) {
 87             DerOutputStream tmp = new DerOutputStream();
 88             tmp.putInteger(require);
 89             tagged.writeImplicit(DerValue.createTag(DerValue.TAG_CONTEXT,
 90                          false, TAG_REQUIRE), tmp);
 91         }
 92         if (inhibit != -1) {
 93             DerOutputStream tmp = new DerOutputStream();
 94             tmp.putInteger(inhibit);
 95             tagged.writeImplicit(DerValue.createTag(DerValue.TAG_CONTEXT,
 96                          false, TAG_INHIBIT), tmp);
 97         }
 98         seq.write(DerValue.tag_Sequence, tagged);
</pre>
<hr />
<pre>
184         } else {
185             sb.append(require)
186                 .append(&#39;;&#39;);
187         }
188         sb.append(&quot;\tInhibit: &quot;);
189         if (inhibit == -1) {
190             sb.append(&quot;unspecified&quot;);
191         } else {
192             sb.append(inhibit);
193         }
194         sb.append(&quot; ]\n&quot;);
195         return sb.toString();
196     }
197 
198     /**
199      * Write the extension to the DerOutputStream.
200      *
201      * @param out the DerOutputStream to write the extension to.
202      * @exception IOException on encoding errors.
203      */
<span class="line-modified">204     @Override</span>
<span class="line-modified">205     public void encode(DerOutputStream out) {</span>
206         if (extensionValue == null) {
207           extensionId = PKIXExtensions.PolicyConstraints_Id;
208           critical = true;
209           encodeThis();
210         }
<span class="line-modified">211         super.encode(out);</span>

212     }
213 
214     /**
215      * Set the attribute value.
216      */
217     public void set(String name, Object obj) throws IOException {
218         if (!(obj instanceof Integer)) {
219             throw new IOException(&quot;Attribute value should be of type Integer.&quot;);
220         }
221         if (name.equalsIgnoreCase(REQUIRE)) {
222             require = ((Integer)obj).intValue();
223         } else if (name.equalsIgnoreCase(INHIBIT)) {
224             inhibit = ((Integer)obj).intValue();
225         } else {
226           throw new IOException(&quot;Attribute name &quot; + &quot;[&quot; + name + &quot;]&quot; +
227                                 &quot; not recognized by &quot; +
228                                 &quot;CertAttrSet:PolicyConstraints.&quot;);
229         }
230         encodeThis();
231     }
</pre>
</td>
</tr>
</table>
<center><a href="OtherName.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="PolicyInformation.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>