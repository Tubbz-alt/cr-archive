<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/sun/security/x509/SubjectInfoAccessExtension.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="SubjectAlternativeNameExtension.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="SubjectKeyIdentifierExtension.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/x509/SubjectInfoAccessExtension.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
137     /**
138      * Return the list of AccessDescription objects.
139      */
140     public List&lt;AccessDescription&gt; getAccessDescriptions() {
141         return accessDescriptions;
142     }
143 
144     /**
145      * Return the name of this attribute.
146      */
147     public String getName() {
148         return NAME;
149     }
150 
151     /**
152      * Write the extension to the DerOutputStream.
153      *
154      * @param out the DerOutputStream to write the extension to.
155      * @exception IOException on encoding errors.
156      */
<span class="line-modified">157     public void encode(OutputStream out) throws IOException {</span>
<span class="line-modified">158         DerOutputStream tmp = new DerOutputStream();</span>
159         if (this.extensionValue == null) {
160             this.extensionId = PKIXExtensions.SubjectInfoAccess_Id;
161             this.critical = false;
162             encodeThis();
163         }
<span class="line-modified">164         super.encode(tmp);</span>
<span class="line-removed">165         out.write(tmp.toByteArray());</span>
166     }
167 
168     /**
169      * Set the attribute value.
170      */
171     @SuppressWarnings(&quot;unchecked&quot;) // Checked with instanceof
172     public void set(String name, Object obj) throws IOException {
173         if (name.equalsIgnoreCase(DESCRIPTIONS)) {
174             if (!(obj instanceof List)) {
175                 throw new IOException(&quot;Attribute value should be of type List.&quot;);
176             }
177             accessDescriptions = (List&lt;AccessDescription&gt;)obj;
178         } else {
179             throw new IOException(&quot;Attribute name [&quot; + name +
180                                 &quot;] not recognized by &quot; +
181                                 &quot;CertAttrSet:SubjectInfoAccessExtension.&quot;);
182         }
183         encodeThis();
184     }
185 
</pre>
<hr />
<pre>
205                 Collections.&lt;AccessDescription&gt;emptyList();
206         } else {
207             throw new IOException(&quot;Attribute name [&quot; + name +
208                                 &quot;] not recognized by &quot; +
209                                 &quot;CertAttrSet:SubjectInfoAccessExtension.&quot;);
210         }
211         encodeThis();
212     }
213 
214     /**
215      * Return an enumeration of names of attributes existing within this
216      * attribute.
217      */
218     public Enumeration&lt;String&gt; getElements() {
219         AttributeNameEnumeration elements = new AttributeNameEnumeration();
220         elements.addElement(DESCRIPTIONS);
221         return elements.elements();
222     }
223 
224      // Encode this extension value
<span class="line-modified">225     private void encodeThis() throws IOException {</span>
226         if (accessDescriptions.isEmpty()) {
227             this.extensionValue = null;
228         } else {
229             DerOutputStream ads = new DerOutputStream();
230             for (AccessDescription accessDescription : accessDescriptions) {
231                 accessDescription.encode(ads);
232             }
233             DerOutputStream seq = new DerOutputStream();
234             seq.write(DerValue.tag_Sequence, ads);
235             this.extensionValue = seq.toByteArray();
236         }
237     }
238 
239     /**
240      * Return the extension as user readable string.
241      */
242     public String toString() {
243         return super.toString() +
244             &quot;SubjectInfoAccess [\n  &quot; + accessDescriptions + &quot;\n]\n&quot;;
245     }
</pre>
</td>
<td>
<hr />
<pre>
137     /**
138      * Return the list of AccessDescription objects.
139      */
140     public List&lt;AccessDescription&gt; getAccessDescriptions() {
141         return accessDescriptions;
142     }
143 
144     /**
145      * Return the name of this attribute.
146      */
147     public String getName() {
148         return NAME;
149     }
150 
151     /**
152      * Write the extension to the DerOutputStream.
153      *
154      * @param out the DerOutputStream to write the extension to.
155      * @exception IOException on encoding errors.
156      */
<span class="line-modified">157     @Override</span>
<span class="line-modified">158     public void encode(DerOutputStream out) {</span>
159         if (this.extensionValue == null) {
160             this.extensionId = PKIXExtensions.SubjectInfoAccess_Id;
161             this.critical = false;
162             encodeThis();
163         }
<span class="line-modified">164         super.encode(out);</span>

165     }
166 
167     /**
168      * Set the attribute value.
169      */
170     @SuppressWarnings(&quot;unchecked&quot;) // Checked with instanceof
171     public void set(String name, Object obj) throws IOException {
172         if (name.equalsIgnoreCase(DESCRIPTIONS)) {
173             if (!(obj instanceof List)) {
174                 throw new IOException(&quot;Attribute value should be of type List.&quot;);
175             }
176             accessDescriptions = (List&lt;AccessDescription&gt;)obj;
177         } else {
178             throw new IOException(&quot;Attribute name [&quot; + name +
179                                 &quot;] not recognized by &quot; +
180                                 &quot;CertAttrSet:SubjectInfoAccessExtension.&quot;);
181         }
182         encodeThis();
183     }
184 
</pre>
<hr />
<pre>
204                 Collections.&lt;AccessDescription&gt;emptyList();
205         } else {
206             throw new IOException(&quot;Attribute name [&quot; + name +
207                                 &quot;] not recognized by &quot; +
208                                 &quot;CertAttrSet:SubjectInfoAccessExtension.&quot;);
209         }
210         encodeThis();
211     }
212 
213     /**
214      * Return an enumeration of names of attributes existing within this
215      * attribute.
216      */
217     public Enumeration&lt;String&gt; getElements() {
218         AttributeNameEnumeration elements = new AttributeNameEnumeration();
219         elements.addElement(DESCRIPTIONS);
220         return elements.elements();
221     }
222 
223      // Encode this extension value
<span class="line-modified">224     private void encodeThis() {</span>
225         if (accessDescriptions.isEmpty()) {
226             this.extensionValue = null;
227         } else {
228             DerOutputStream ads = new DerOutputStream();
229             for (AccessDescription accessDescription : accessDescriptions) {
230                 accessDescription.encode(ads);
231             }
232             DerOutputStream seq = new DerOutputStream();
233             seq.write(DerValue.tag_Sequence, ads);
234             this.extensionValue = seq.toByteArray();
235         }
236     }
237 
238     /**
239      * Return the extension as user readable string.
240      */
241     public String toString() {
242         return super.toString() +
243             &quot;SubjectInfoAccess [\n  &quot; + accessDescriptions + &quot;\n]\n&quot;;
244     }
</pre>
</td>
</tr>
</table>
<center><a href="SubjectAlternativeNameExtension.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="SubjectKeyIdentifierExtension.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>