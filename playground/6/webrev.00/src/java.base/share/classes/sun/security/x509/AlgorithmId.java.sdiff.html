<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/sun/security/x509/AlgorithmId.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="AccessDescription.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="AuthorityInfoAccessExtension.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/x509/AlgorithmId.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
127         }
128     }
129 
130     protected void decodeParams() throws IOException {
131         String algidName = getName();
132         try {
133             algParams = AlgorithmParameters.getInstance(algidName);
134         } catch (NoSuchAlgorithmException e) {
135             /*
136              * This algorithm parameter type is not supported, so we cannot
137              * parse the parameters.
138              */
139             algParams = null;
140             return;
141         }
142 
143         // Decode (parse) the parameters
144         algParams.init(params.toByteArray());
145     }
146 
<span class="line-removed">147     /**</span>
<span class="line-removed">148      * Marshal a DER-encoded &quot;AlgorithmID&quot; sequence on the DER stream.</span>
<span class="line-removed">149      */</span>
<span class="line-removed">150     public final void encode(DerOutputStream out) throws IOException {</span>
<span class="line-removed">151         derEncode(out);</span>
<span class="line-removed">152     }</span>
<span class="line-removed">153 </span>
154     /**
155      * DER encode this object onto an output stream.
156      * Implements the &lt;code&gt;DerEncoder&lt;/code&gt; interface.
157      *
158      * @param out
159      * the output stream on which to write the DER encoding.
160      *
161      * @exception IOException on encoding error.
162      */
<span class="line-modified">163     public void derEncode (OutputStream out) throws IOException {</span>

164         DerOutputStream bytes = new DerOutputStream();
165         DerOutputStream tmp = new DerOutputStream();
166 
167         bytes.putOID(algid);
168         // Setup params from algParams since no DER encoding is given
169         if (constructedFromDer == false) {
170             if (algParams != null) {
<span class="line-modified">171                 params = new DerValue(algParams.getEncoded());</span>





172             } else {
173                 params = null;
174             }
175         }
176         if (params == null) {
177             // Changes backed out for compatibility with Solaris
178 
179             // Several AlgorithmId should omit the whole parameter part when
180             // it&#39;s NULL. They are ---
181             // RFC 3370 2.1: Implementations SHOULD generate SHA-1
182             // AlgorithmIdentifiers with absent parameters.
183             // RFC 3447 C1: When id-sha1, id-sha224, id-sha256, id-sha384 and
184             // id-sha512 are used in an AlgorithmIdentifier the parameters
185             // (which are optional) SHOULD be omitted.
186             // RFC 3279 2.3.2: The id-dsa algorithm syntax includes optional
187             // domain parameters... When omitted, the parameters component
188             // MUST be omitted entirely
189             // RFC 3370 3.1: When the id-dsa-with-sha1 algorithm identifier
190             // is used, the AlgorithmIdentifier parameters field MUST be absent.
191             /*if (
</pre>
</td>
<td>
<hr />
<pre>
127         }
128     }
129 
130     protected void decodeParams() throws IOException {
131         String algidName = getName();
132         try {
133             algParams = AlgorithmParameters.getInstance(algidName);
134         } catch (NoSuchAlgorithmException e) {
135             /*
136              * This algorithm parameter type is not supported, so we cannot
137              * parse the parameters.
138              */
139             algParams = null;
140             return;
141         }
142 
143         // Decode (parse) the parameters
144         algParams.init(params.toByteArray());
145     }
146 







147     /**
148      * DER encode this object onto an output stream.
149      * Implements the &lt;code&gt;DerEncoder&lt;/code&gt; interface.
150      *
151      * @param out
152      * the output stream on which to write the DER encoding.
153      *
154      * @exception IOException on encoding error.
155      */
<span class="line-modified">156     @Override</span>
<span class="line-added">157     public void derEncode (DerOutputStream out) {</span>
158         DerOutputStream bytes = new DerOutputStream();
159         DerOutputStream tmp = new DerOutputStream();
160 
161         bytes.putOID(algid);
162         // Setup params from algParams since no DER encoding is given
163         if (constructedFromDer == false) {
164             if (algParams != null) {
<span class="line-modified">165                 // algParams should always have been initialized?</span>
<span class="line-added">166                 try {</span>
<span class="line-added">167                     params = new DerValue(algParams.getEncoded());</span>
<span class="line-added">168                 } catch (IOException e) {</span>
<span class="line-added">169                     throw new AssertionError(e);</span>
<span class="line-added">170                 }</span>
171             } else {
172                 params = null;
173             }
174         }
175         if (params == null) {
176             // Changes backed out for compatibility with Solaris
177 
178             // Several AlgorithmId should omit the whole parameter part when
179             // it&#39;s NULL. They are ---
180             // RFC 3370 2.1: Implementations SHOULD generate SHA-1
181             // AlgorithmIdentifiers with absent parameters.
182             // RFC 3447 C1: When id-sha1, id-sha224, id-sha256, id-sha384 and
183             // id-sha512 are used in an AlgorithmIdentifier the parameters
184             // (which are optional) SHOULD be omitted.
185             // RFC 3279 2.3.2: The id-dsa algorithm syntax includes optional
186             // domain parameters... When omitted, the parameters component
187             // MUST be omitted entirely
188             // RFC 3370 3.1: When the id-dsa-with-sha1 algorithm identifier
189             // is used, the AlgorithmIdentifier parameters field MUST be absent.
190             /*if (
</pre>
</td>
</tr>
</table>
<center><a href="AccessDescription.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="AuthorityInfoAccessExtension.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>