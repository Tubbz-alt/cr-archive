<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/sun/security/pkcs/PKCS9Attribute.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="PKCS8Key.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="PKCS9Attributes.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/pkcs/PKCS9Attribute.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 498,11 ***</span>
       * ChallengePassword and UnstructuredAddress attributes as ASN.1
       * &lt;code&gt;PrintableString&lt;/code&gt;s, without checking whether they
       * should be encoded as &lt;code&gt;T61String&lt;/code&gt;s.
       */
      @Override
<span class="line-modified">!     public void derEncode(OutputStream out) throws IOException {</span>
          DerOutputStream temp = new DerOutputStream();
          temp.putOID(oid);
          switch (index) {
          case -1:    // Unknown
              temp.write((byte[])value);
<span class="line-new-header">--- 498,11 ---</span>
       * ChallengePassword and UnstructuredAddress attributes as ASN.1
       * &lt;code&gt;PrintableString&lt;/code&gt;s, without checking whether they
       * should be encoded as &lt;code&gt;T61String&lt;/code&gt;s.
       */
      @Override
<span class="line-modified">!     public void derEncode(DerOutputStream out) {</span>
          DerOutputStream temp = new DerOutputStream();
          temp.putOID(oid);
          switch (index) {
          case -1:    // Unknown
              temp.write((byte[])value);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 571,44 ***</span>
                  temp.putOrderedSetOf(DerValue.tag_Set, temps);
              } // close scope
              break;
  
          case 9:     // extended-certificate attribute -- not supported
<span class="line-modified">!             throw new IOException(&quot;PKCS9 extended-certificate &quot; +</span>
                                    &quot;attribute not supported.&quot;);
              // break unnecessary
          case 10:    // issuerAndserialNumber attribute -- not supported
<span class="line-modified">!             throw new IOException(&quot;PKCS9 IssuerAndSerialNumber&quot; +</span>
                                    &quot;attribute not supported.&quot;);
              // break unnecessary
          case 11:    // RSA DSI proprietary
          case 12:    // RSA DSI proprietary
<span class="line-modified">!             throw new IOException(&quot;PKCS9 RSA DSI attributes&quot; +</span>
                                    &quot;11 and 12, not supported.&quot;);
              // break unnecessary
          case 13:    // S/MIME unused attribute
<span class="line-modified">!             throw new IOException(&quot;PKCS9 attribute #13 not supported.&quot;);</span>
              // break unnecessary
  
          case 14:     // ExtensionRequest
              {
                  DerOutputStream temp2 = new DerOutputStream();
                  CertificateExtensions exts = (CertificateExtensions)value;
                  try {
                      exts.encode(temp2, true);
                  } catch (CertificateException ex) {
<span class="line-modified">!                     throw new IOException(ex.toString());</span>
                  }
                  temp.write(DerValue.tag_Set, temp2.toByteArray());
              }
              break;
          case 15:    // SMIMECapability
<span class="line-modified">!             throw new IOException(&quot;PKCS9 attribute #15 not supported.&quot;);</span>
              // break unnecessary
  
          case 16:    // SigningCertificate
<span class="line-modified">!             throw new IOException(</span>
                  &quot;PKCS9 SigningCertificate attribute not supported.&quot;);
              // break unnecessary
  
          case 17:    // SignatureTimestampToken
              temp.write(DerValue.tag_Set, (byte[])value);
<span class="line-new-header">--- 571,44 ---</span>
                  temp.putOrderedSetOf(DerValue.tag_Set, temps);
              } // close scope
              break;
  
          case 9:     // extended-certificate attribute -- not supported
<span class="line-modified">!             throw new UnsupportedOperationException(&quot;PKCS9 extended-certificate &quot; +</span>
                                    &quot;attribute not supported.&quot;);
              // break unnecessary
          case 10:    // issuerAndserialNumber attribute -- not supported
<span class="line-modified">!             throw new UnsupportedOperationException(&quot;PKCS9 IssuerAndSerialNumber&quot; +</span>
                                    &quot;attribute not supported.&quot;);
              // break unnecessary
          case 11:    // RSA DSI proprietary
          case 12:    // RSA DSI proprietary
<span class="line-modified">!             throw new UnsupportedOperationException(&quot;PKCS9 RSA DSI attributes&quot; +</span>
                                    &quot;11 and 12, not supported.&quot;);
              // break unnecessary
          case 13:    // S/MIME unused attribute
<span class="line-modified">!             throw new UnsupportedOperationException(&quot;PKCS9 attribute #13 not supported.&quot;);</span>
              // break unnecessary
  
          case 14:     // ExtensionRequest
              {
                  DerOutputStream temp2 = new DerOutputStream();
                  CertificateExtensions exts = (CertificateExtensions)value;
                  try {
                      exts.encode(temp2, true);
                  } catch (CertificateException ex) {
<span class="line-modified">!                     throw new IllegalArgumentException(ex.toString());</span>
                  }
                  temp.write(DerValue.tag_Set, temp2.toByteArray());
              }
              break;
          case 15:    // SMIMECapability
<span class="line-modified">!             throw new UnsupportedOperationException(&quot;PKCS9 attribute #15 not supported.&quot;);</span>
              // break unnecessary
  
          case 16:    // SigningCertificate
<span class="line-modified">!             throw new UnsupportedOperationException(</span>
                  &quot;PKCS9 SigningCertificate attribute not supported.&quot;);
              // break unnecessary
  
          case 17:    // SignatureTimestampToken
              temp.write(DerValue.tag_Set, (byte[])value);
</pre>
<center><a href="PKCS8Key.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="PKCS9Attributes.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>