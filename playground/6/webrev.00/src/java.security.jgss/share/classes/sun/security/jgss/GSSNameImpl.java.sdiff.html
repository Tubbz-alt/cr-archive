<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.security.jgss/share/classes/sun/security/jgss/GSSNameImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="GSSHeader.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="spnego/NegTokenInit.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.security.jgss/share/classes/sun/security/jgss/GSSNameImpl.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
393      */
394     public byte[] export() throws GSSException {
395 
396         if (mechElement == null) {
397             /* Use default mech */
398             mechElement = getElement(ProviderList.DEFAULT_MECH_OID);
399         }
400 
401         byte[] mechPortion = mechElement.export();
402         byte[] oidBytes = null;
403         ObjectIdentifier oid = null;
404 
405         try {
406             oid = ObjectIdentifier.of
407                 (mechElement.getMechanism().toString());
408         } catch (IOException e) {
409             throw new GSSExceptionImpl(GSSException.FAILURE,
410                                        &quot;Invalid OID String &quot;);
411         }
412         DerOutputStream dout = new DerOutputStream();
<span class="line-modified">413         try {</span>
<span class="line-removed">414             dout.putOID(oid);</span>
<span class="line-removed">415         } catch (IOException e) {</span>
<span class="line-removed">416             throw new GSSExceptionImpl(GSSException.FAILURE,</span>
<span class="line-removed">417                                    &quot;Could not ASN.1 Encode &quot;</span>
<span class="line-removed">418                                    + oid.toString());</span>
<span class="line-removed">419         }</span>
420         oidBytes = dout.toByteArray();
421 
422         byte[] retVal = new byte[2
423                                 + 2 + oidBytes.length
424                                 + 4 + mechPortion.length];
425         int pos = 0;
426         retVal[pos++] = 0x04;
427         retVal[pos++] = 0x01;
428         retVal[pos++] = (byte) (oidBytes.length&gt;&gt;&gt;8);
429         retVal[pos++] = (byte) oidBytes.length;
430         System.arraycopy(oidBytes, 0, retVal, pos, oidBytes.length);
431         pos += oidBytes.length;
432         retVal[pos++] = (byte) (mechPortion.length&gt;&gt;&gt;24);
433         retVal[pos++] = (byte) (mechPortion.length&gt;&gt;&gt;16);
434         retVal[pos++] = (byte) (mechPortion.length&gt;&gt;&gt;8);
435         retVal[pos++] = (byte)  mechPortion.length;
436         System.arraycopy(mechPortion, 0, retVal, pos, mechPortion.length);
437         return retVal;
438     }
439 
</pre>
</td>
<td>
<hr />
<pre>
393      */
394     public byte[] export() throws GSSException {
395 
396         if (mechElement == null) {
397             /* Use default mech */
398             mechElement = getElement(ProviderList.DEFAULT_MECH_OID);
399         }
400 
401         byte[] mechPortion = mechElement.export();
402         byte[] oidBytes = null;
403         ObjectIdentifier oid = null;
404 
405         try {
406             oid = ObjectIdentifier.of
407                 (mechElement.getMechanism().toString());
408         } catch (IOException e) {
409             throw new GSSExceptionImpl(GSSException.FAILURE,
410                                        &quot;Invalid OID String &quot;);
411         }
412         DerOutputStream dout = new DerOutputStream();
<span class="line-modified">413         dout.putOID(oid);</span>






414         oidBytes = dout.toByteArray();
415 
416         byte[] retVal = new byte[2
417                                 + 2 + oidBytes.length
418                                 + 4 + mechPortion.length];
419         int pos = 0;
420         retVal[pos++] = 0x04;
421         retVal[pos++] = 0x01;
422         retVal[pos++] = (byte) (oidBytes.length&gt;&gt;&gt;8);
423         retVal[pos++] = (byte) oidBytes.length;
424         System.arraycopy(oidBytes, 0, retVal, pos, oidBytes.length);
425         pos += oidBytes.length;
426         retVal[pos++] = (byte) (mechPortion.length&gt;&gt;&gt;24);
427         retVal[pos++] = (byte) (mechPortion.length&gt;&gt;&gt;16);
428         retVal[pos++] = (byte) (mechPortion.length&gt;&gt;&gt;8);
429         retVal[pos++] = (byte)  mechPortion.length;
430         System.arraycopy(mechPortion, 0, retVal, pos, mechPortion.length);
431         return retVal;
432     }
433 
</pre>
</td>
</tr>
</table>
<center><a href="GSSHeader.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="spnego/NegTokenInit.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>