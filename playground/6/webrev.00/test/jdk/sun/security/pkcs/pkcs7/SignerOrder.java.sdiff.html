<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/sun/security/pkcs/pkcs7/SignerOrder.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../java/security/cert/X509CertSelectorTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../pkcs9/UnknownAttribute.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/sun/security/pkcs/pkcs7/SignerOrder.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 98         DerOutputStream out = new DerOutputStream();
 99         pkcs71.encodeSignedData(out);
100 
101         PKCS7 pkcs72 = new PKCS7(out.toByteArray());
102         System.out.println(&quot;\nSignerInfos read back in:&quot;);
103         printSignerInfos(pkcs72.getSignerInfos());
104 
105         System.out.println(&quot;Verified signers of original:&quot;);
106         SignerInfo[] verifs1 = pkcs71.verify();
107 
108         System.out.println(&quot;Verified signers of after read-in:&quot;);
109         SignerInfo[] verifs2 = pkcs72.verify();
110 
111         if (verifs1.length != verifs2.length) {
112             throw new RuntimeException(&quot;Length or Original vs read-in &quot;
113                     + &quot;should be same&quot;);
114         }
115     }
116 
117     static void printSignerInfos(SignerInfo signerInfo) throws IOException {
<span class="line-modified">118         ByteArrayOutputStream strm = new ByteArrayOutputStream();</span>
119         signerInfo.derEncode(strm);
120         System.out.println(&quot;SignerInfo, length: &quot;
121                 + strm.toByteArray().length);
122         HexPrinter.simple().format(strm.toByteArray());
123         System.out.println(&quot;\n&quot;);
124         strm.reset();
125     }
126 
127     static void printSignerInfos(SignerInfo[] signerInfos) throws IOException {
<span class="line-modified">128         ByteArrayOutputStream strm = new ByteArrayOutputStream();</span>
129         for (int i = 0; i &lt; signerInfos.length; i++) {
130             signerInfos[i].derEncode(strm);
131             System.out.println(&quot;SignerInfo[&quot; + i + &quot;], length: &quot;
132                     + strm.toByteArray().length);
133             HexPrinter.simple().format(strm.toByteArray());
134             System.out.println(&quot;\n&quot;);
135             strm.reset();
136         }
137     }
138 
139 }
140 
141 /**
142  * A simple extension of sun.security.x509.X500Signer that adds a no-fuss
143  * signing algorithm.
144  */
145 class SimpleSigner {
146 
147     private final Signature sig;
148     private final X500Name agent;
</pre>
</td>
<td>
<hr />
<pre>
 98         DerOutputStream out = new DerOutputStream();
 99         pkcs71.encodeSignedData(out);
100 
101         PKCS7 pkcs72 = new PKCS7(out.toByteArray());
102         System.out.println(&quot;\nSignerInfos read back in:&quot;);
103         printSignerInfos(pkcs72.getSignerInfos());
104 
105         System.out.println(&quot;Verified signers of original:&quot;);
106         SignerInfo[] verifs1 = pkcs71.verify();
107 
108         System.out.println(&quot;Verified signers of after read-in:&quot;);
109         SignerInfo[] verifs2 = pkcs72.verify();
110 
111         if (verifs1.length != verifs2.length) {
112             throw new RuntimeException(&quot;Length or Original vs read-in &quot;
113                     + &quot;should be same&quot;);
114         }
115     }
116 
117     static void printSignerInfos(SignerInfo signerInfo) throws IOException {
<span class="line-modified">118         DerOutputStream strm = new DerOutputStream();</span>
119         signerInfo.derEncode(strm);
120         System.out.println(&quot;SignerInfo, length: &quot;
121                 + strm.toByteArray().length);
122         HexPrinter.simple().format(strm.toByteArray());
123         System.out.println(&quot;\n&quot;);
124         strm.reset();
125     }
126 
127     static void printSignerInfos(SignerInfo[] signerInfos) throws IOException {
<span class="line-modified">128         DerOutputStream strm = new DerOutputStream();</span>
129         for (int i = 0; i &lt; signerInfos.length; i++) {
130             signerInfos[i].derEncode(strm);
131             System.out.println(&quot;SignerInfo[&quot; + i + &quot;], length: &quot;
132                     + strm.toByteArray().length);
133             HexPrinter.simple().format(strm.toByteArray());
134             System.out.println(&quot;\n&quot;);
135             strm.reset();
136         }
137     }
138 
139 }
140 
141 /**
142  * A simple extension of sun.security.x509.X500Signer that adds a no-fuss
143  * signing algorithm.
144  */
145 class SimpleSigner {
146 
147     private final Signature sig;
148     private final X500Name agent;
</pre>
</td>
</tr>
</table>
<center><a href="../../../../java/security/cert/X509CertSelectorTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../pkcs9/UnknownAttribute.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>