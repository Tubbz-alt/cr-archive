<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLGraphicsConfig.m</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLGraphicsConfig.m</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 75,13 ***</span>
      (JNIEnv *env, jclass cglgc)
  {
      J2dRlsTraceLn(J2D_TRACE_INFO, &quot;MTLGraphicsConfig_initMTL&quot;);
  
      FILE *f = popen(&quot;system_profiler SPDisplaysDataType&quot;, &quot;r&quot;);
<span class="line-removed">-     int ch = getc(f);</span>
      bool metalSupport = FALSE;
<span class="line-modified">!     while (ch != EOF)</span>
      {
          char str[60];
  
          if (fgets(str, 60, f) != NULL) {
              // Check for string
<span class="line-new-header">--- 75,12 ---</span>
      (JNIEnv *env, jclass cglgc)
  {
      J2dRlsTraceLn(J2D_TRACE_INFO, &quot;MTLGraphicsConfig_initMTL&quot;);
  
      FILE *f = popen(&quot;system_profiler SPDisplaysDataType&quot;, &quot;r&quot;);
      bool metalSupport = FALSE;
<span class="line-modified">!     while (getc(f) != EOF)</span>
      {
          char str[60];
  
          if (fgets(str, 60, f) != NULL) {
              // Check for string
</pre>
<hr />
<pre>
<span class="line-old-header">*** 93,14 ***</span>
              }
          }
      }
      pclose(f);
      if (!metalSupport) {
<span class="line-modified">!         fprintf(stderr, &quot;Metal support not present&quot;);</span>
          return JNI_FALSE;
      } else {
<span class="line-modified">!         fprintf(stderr, &quot;Metal support is present&quot;);</span>
      }
  
      if (!MTLFuncs_OpenLibrary()) {
          return JNI_FALSE;
      }
<span class="line-new-header">--- 92,14 ---</span>
              }
          }
      }
      pclose(f);
      if (!metalSupport) {
<span class="line-modified">!         fprintf(stderr, &quot;Metal support not present\n&quot;);</span>
          return JNI_FALSE;
      } else {
<span class="line-modified">!         fprintf(stderr, &quot;Metal support is present\n&quot;);</span>
      }
  
      if (!MTLFuncs_OpenLibrary()) {
          return JNI_FALSE;
      }
</pre>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>