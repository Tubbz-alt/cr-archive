<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLBlitLoops.m</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="MTLClip.m.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLBlitLoops.m</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -754,11 +754,11 @@</span>
              // NOTE: using of separate blitCommandBuffer can produce errors (draw into surface (with general cmd-buf)
              // can be unfinished when reading raster from blit cmd-buf).
              // Consider to use [mtlc.encoderManager createBlitEncoder] and [mtlc commitCommandBuffer:JNI_TRUE];
              J2dTraceLn1(J2D_TRACE_VERBOSE, &quot;MTLBlitLoops_SurfaceToSwBlit: source texture %p&quot;, srcOps-&gt;pTexture);
  
<span class="udiff-line-modified-removed">-             id&lt;MTLCommandBuffer&gt; cb = [mtlc createBlitCommandBuffer];</span>
<span class="udiff-line-modified-added">+             id&lt;MTLCommandBuffer&gt; cb = [mtlc createCommandBuffer];</span>
              id&lt;MTLBlitCommandEncoder&gt; blitEncoder = [cb blitCommandEncoder];
              [blitEncoder synchronizeTexture:srcOps-&gt;pTexture slice:0 level:0];
              [blitEncoder copyFromTexture:srcOps-&gt;pTexture
                              sourceSlice:0
                              sourceLevel:0
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -817,11 +817,11 @@</span>
      J2dTraceImpl(J2D_TRACE_VERBOSE, JNI_TRUE, &quot;MTLBlitLoops_CopyArea: bdst=%p [tex=%p] %dx%d | src (%d, %d), %dx%d -&gt; dst (%d, %d)&quot;,
              dstOps, dstOps-&gt;pTexture, ((id&lt;MTLTexture&gt;)dstOps-&gt;pTexture).width, ((id&lt;MTLTexture&gt;)dstOps-&gt;pTexture).height, x, y, width, height, dx, dy);
  #endif //DEBUG
  
      @autoreleasepool {
<span class="udiff-line-modified-removed">-     id&lt;MTLCommandBuffer&gt; cb = [mtlc createBlitCommandBuffer];</span>
<span class="udiff-line-modified-added">+     id&lt;MTLCommandBuffer&gt; cb = [mtlc createCommandBuffer];</span>
      id&lt;MTLBlitCommandEncoder&gt; blitEncoder = [cb blitCommandEncoder];
  
      // Create an intrermediate buffer
      int totalBuffsize = width * height * 4;
      id &lt;MTLBuffer&gt; buff = [mtlc.device newBufferWithLength:totalBuffsize options:MTLResourceStorageModePrivate];
</pre>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="MTLClip.m.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>