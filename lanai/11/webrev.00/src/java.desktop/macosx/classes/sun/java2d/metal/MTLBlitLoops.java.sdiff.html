<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/macosx/classes/sun/java2d/metal/MTLBlitLoops.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/java.desktop/macosx/classes/sun/java2d/metal/MTLBlitLoops.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 68                 // render-to-texture surface-&gt;surface ops
 69                 new MTLRTTSurfaceToSurfaceBlit(),
 70                 new MTLRTTSurfaceToSurfaceScale(),
 71                 new MTLRTTSurfaceToSurfaceTransform(),
 72 
 73                 // surface-&gt;sw ops
 74                 new MTLSurfaceToSwBlit(SurfaceType.IntArgb,
 75                         MTLSurfaceData.PF_INT_ARGB),
 76                 blitSurfaceToIntArgbPre,
 77 
 78                 // sw-&gt;surface ops
 79                 blitIntArgbPreToSurface,
 80                 new MTLSwToSurfaceBlit(SurfaceType.IntRgb,
 81                         MTLSurfaceData.PF_INT_RGB),
 82                 new MTLSwToSurfaceBlit(SurfaceType.IntRgbx,
 83                         MTLSurfaceData.PF_INT_RGBX),
 84                 new MTLSwToSurfaceBlit(SurfaceType.IntBgr,
 85                         MTLSurfaceData.PF_INT_BGR),
 86                 new MTLSwToSurfaceBlit(SurfaceType.IntBgrx,
 87                         MTLSurfaceData.PF_INT_BGRX),
<span class="line-modified"> 88                 new MTLSwToSurfaceBlit(SurfaceType.ThreeByteBgr,</span>
<span class="line-modified"> 89                         MTLSurfaceData.PF_3BYTE_BGR),</span>
<span class="line-modified"> 90                 new MTLSwToSurfaceBlit(SurfaceType.Ushort565Rgb,</span>
<span class="line-modified"> 91                         MTLSurfaceData.PF_USHORT_565_RGB),</span>
<span class="line-modified"> 92                 new MTLSwToSurfaceBlit(SurfaceType.Ushort555Rgb,</span>
<span class="line-modified"> 93                         MTLSurfaceData.PF_USHORT_555_RGB),</span>
<span class="line-modified"> 94                 new MTLSwToSurfaceBlit(SurfaceType.Ushort555Rgbx,</span>
<span class="line-modified"> 95                         MTLSurfaceData.PF_USHORT_555_RGBX),</span>
<span class="line-modified"> 96                 new MTLSwToSurfaceBlit(SurfaceType.ByteGray,</span>
<span class="line-modified"> 97                         MTLSurfaceData.PF_BYTE_GRAY),</span>
<span class="line-modified"> 98                 new MTLSwToSurfaceBlit(SurfaceType.UshortGray,</span>
<span class="line-modified"> 99                         MTLSurfaceData.PF_USHORT_GRAY),</span>



100                 new MTLGeneralBlit(MTLSurfaceData.MTLSurface,
101                         CompositeType.AnyAlpha,
102                         blitIntArgbPreToSurface),
103 
104                 new MTLAnyCompositeBlit(MTLSurfaceData.MTLSurface,
105                         blitSurfaceToIntArgbPre,
106                         blitSurfaceToIntArgbPre,
107                         blitIntArgbPreToSurface),
108                 new MTLAnyCompositeBlit(SurfaceType.Any,
109                         null,
110                         blitSurfaceToIntArgbPre,
111                         blitIntArgbPreToSurface),
112 
113                 new MTLSwToSurfaceScale(SurfaceType.IntRgb,
114                         MTLSurfaceData.PF_INT_RGB),
115                 new MTLSwToSurfaceScale(SurfaceType.IntRgbx,
116                         MTLSurfaceData.PF_INT_RGBX),
117                 new MTLSwToSurfaceScale(SurfaceType.IntBgr,
118                         MTLSurfaceData.PF_INT_BGR),
119                 new MTLSwToSurfaceScale(SurfaceType.IntBgrx,
120                         MTLSurfaceData.PF_INT_BGRX),
<span class="line-modified">121                 new MTLSwToSurfaceScale(SurfaceType.ThreeByteBgr,</span>
<span class="line-modified">122                         MTLSurfaceData.PF_3BYTE_BGR),</span>
<span class="line-modified">123                 new MTLSwToSurfaceScale(SurfaceType.Ushort565Rgb,</span>
<span class="line-modified">124                         MTLSurfaceData.PF_USHORT_565_RGB),</span>
<span class="line-modified">125                 new MTLSwToSurfaceScale(SurfaceType.Ushort555Rgb,</span>
<span class="line-modified">126                         MTLSurfaceData.PF_USHORT_555_RGB),</span>
<span class="line-modified">127                 new MTLSwToSurfaceScale(SurfaceType.Ushort555Rgbx,</span>
<span class="line-modified">128                         MTLSurfaceData.PF_USHORT_555_RGBX),</span>
<span class="line-modified">129                 new MTLSwToSurfaceScale(SurfaceType.ByteGray,</span>
<span class="line-modified">130                         MTLSurfaceData.PF_BYTE_GRAY),</span>
<span class="line-modified">131                 new MTLSwToSurfaceScale(SurfaceType.UshortGray,</span>
<span class="line-modified">132                         MTLSurfaceData.PF_USHORT_GRAY),</span>

133                 new MTLSwToSurfaceScale(SurfaceType.IntArgbPre,
134                         MTLSurfaceData.PF_INT_ARGB_PRE),
135 
136                 new MTLSwToSurfaceTransform(SurfaceType.IntRgb,
137                         MTLSurfaceData.PF_INT_RGB),
138                 new MTLSwToSurfaceTransform(SurfaceType.IntRgbx,
139                         MTLSurfaceData.PF_INT_RGBX),
140                 new MTLSwToSurfaceTransform(SurfaceType.IntBgr,
141                         MTLSurfaceData.PF_INT_BGR),
142                 new MTLSwToSurfaceTransform(SurfaceType.IntBgrx,
143                         MTLSurfaceData.PF_INT_BGRX),
<span class="line-modified">144                 new MTLSwToSurfaceTransform(SurfaceType.ThreeByteBgr,</span>
<span class="line-modified">145                         MTLSurfaceData.PF_3BYTE_BGR),</span>
<span class="line-modified">146                 new MTLSwToSurfaceTransform(SurfaceType.Ushort565Rgb,</span>
<span class="line-modified">147                         MTLSurfaceData.PF_USHORT_565_RGB),</span>
<span class="line-modified">148                 new MTLSwToSurfaceTransform(SurfaceType.Ushort555Rgb,</span>
<span class="line-modified">149                         MTLSurfaceData.PF_USHORT_555_RGB),</span>
<span class="line-modified">150                 new MTLSwToSurfaceTransform(SurfaceType.Ushort555Rgbx,</span>
<span class="line-modified">151                         MTLSurfaceData.PF_USHORT_555_RGBX),</span>
<span class="line-modified">152                 new MTLSwToSurfaceTransform(SurfaceType.ByteGray,</span>
<span class="line-modified">153                         MTLSurfaceData.PF_BYTE_GRAY),</span>
<span class="line-modified">154                 new MTLSwToSurfaceTransform(SurfaceType.UshortGray,</span>
<span class="line-modified">155                         MTLSurfaceData.PF_USHORT_GRAY),</span>

156                 transformBlitIntArgbPreToSurface,
157 
158                 new MTLGeneralTransformedBlit(transformBlitIntArgbPreToSurface),
159 
160                 // texture-&gt;surface ops
161                 new MTLTextureToSurfaceBlit(),
162                 new MTLTextureToSurfaceScale(),
163                 new MTLTextureToSurfaceTransform(),
164 
165                 // sw-&gt;texture ops
166                 blitIntArgbPreToTexture,
167                 new MTLSwToTextureBlit(SurfaceType.IntRgb,
168                         MTLSurfaceData.PF_INT_RGB),
169                 new MTLSwToTextureBlit(SurfaceType.IntRgbx,
170                         MTLSurfaceData.PF_INT_RGBX),
171                 new MTLSwToTextureBlit(SurfaceType.IntBgr,
172                         MTLSurfaceData.PF_INT_BGR),
173                 new MTLSwToTextureBlit(SurfaceType.IntBgrx,
174                         MTLSurfaceData.PF_INT_BGRX),
<span class="line-modified">175                 new MTLSwToTextureBlit(SurfaceType.ThreeByteBgr,</span>
<span class="line-modified">176                         MTLSurfaceData.PF_3BYTE_BGR),</span>
<span class="line-modified">177                 new MTLSwToTextureBlit(SurfaceType.Ushort565Rgb,</span>
<span class="line-modified">178                         MTLSurfaceData.PF_USHORT_565_RGB),</span>
<span class="line-modified">179                 new MTLSwToTextureBlit(SurfaceType.Ushort555Rgb,</span>
<span class="line-modified">180                         MTLSurfaceData.PF_USHORT_555_RGB),</span>
<span class="line-modified">181                 new MTLSwToTextureBlit(SurfaceType.Ushort555Rgbx,</span>
<span class="line-modified">182                         MTLSurfaceData.PF_USHORT_555_RGBX),</span>
<span class="line-modified">183                 new MTLSwToTextureBlit(SurfaceType.ByteGray,</span>
<span class="line-modified">184                         MTLSurfaceData.PF_BYTE_GRAY),</span>
<span class="line-modified">185                 new MTLSwToTextureBlit(SurfaceType.UshortGray,</span>
<span class="line-modified">186                         MTLSurfaceData.PF_USHORT_GRAY),</span>

187                 new MTLGeneralBlit(MTLSurfaceData.MTLTexture,
188                         CompositeType.SrcNoEa,
189                         blitIntArgbPreToTexture),
190         };
191         GraphicsPrimitiveMgr.register(primitives);
192     }
193 
194     /**
195      * The following offsets are used to pack the parameters in
196      * createPackedParams().  (They are also used at the native level when
197      * unpacking the params.)
198      */
199     @Native private static final int OFFSET_SRCTYPE = 16;
200     @Native private static final int OFFSET_HINT    =  8;
201     @Native private static final int OFFSET_TEXTURE =  3;
202     @Native private static final int OFFSET_RTT     =  2;
203     @Native private static final int OFFSET_XFORM   =  1;
204     @Native private static final int OFFSET_ISOBLIT =  0;
205 
206     /**
</pre>
</td>
<td>
<hr />
<pre>
 68                 // render-to-texture surface-&gt;surface ops
 69                 new MTLRTTSurfaceToSurfaceBlit(),
 70                 new MTLRTTSurfaceToSurfaceScale(),
 71                 new MTLRTTSurfaceToSurfaceTransform(),
 72 
 73                 // surface-&gt;sw ops
 74                 new MTLSurfaceToSwBlit(SurfaceType.IntArgb,
 75                         MTLSurfaceData.PF_INT_ARGB),
 76                 blitSurfaceToIntArgbPre,
 77 
 78                 // sw-&gt;surface ops
 79                 blitIntArgbPreToSurface,
 80                 new MTLSwToSurfaceBlit(SurfaceType.IntRgb,
 81                         MTLSurfaceData.PF_INT_RGB),
 82                 new MTLSwToSurfaceBlit(SurfaceType.IntRgbx,
 83                         MTLSurfaceData.PF_INT_RGBX),
 84                 new MTLSwToSurfaceBlit(SurfaceType.IntBgr,
 85                         MTLSurfaceData.PF_INT_BGR),
 86                 new MTLSwToSurfaceBlit(SurfaceType.IntBgrx,
 87                         MTLSurfaceData.PF_INT_BGRX),
<span class="line-modified"> 88 // TODO: Provide native implementation</span>
<span class="line-modified"> 89 // It may not be effective/possible. For example, there is no direct</span>
<span class="line-modified"> 90 // support in Metal for SurfaceType.ThreeByteBgr</span>
<span class="line-modified"> 91 //                new MTLSwToSurfaceBlit(SurfaceType.ThreeByteBgr,</span>
<span class="line-modified"> 92 //                        MTLSurfaceData.PF_3BYTE_BGR),</span>
<span class="line-modified"> 93 //                new MTLSwToSurfaceBlit(SurfaceType.Ushort565Rgb,</span>
<span class="line-modified"> 94 //                        MTLSurfaceData.PF_USHORT_565_RGB),</span>
<span class="line-modified"> 95 //                new MTLSwToSurfaceBlit(SurfaceType.Ushort555Rgb,</span>
<span class="line-modified"> 96 //                        MTLSurfaceData.PF_USHORT_555_RGB),</span>
<span class="line-modified"> 97 //                new MTLSwToSurfaceBlit(SurfaceType.Ushort555Rgbx,</span>
<span class="line-modified"> 98 //                        MTLSurfaceData.PF_USHORT_555_RGBX),</span>
<span class="line-modified"> 99 //                 new MTLSwToSurfaceBlit(SurfaceType.ByteGray,</span>
<span class="line-added">100 //                         MTLSurfaceData.PF_BYTE_GRAY),</span>
<span class="line-added">101 //                 new MTLSwToSurfaceBlit(SurfaceType.UshortGray,</span>
<span class="line-added">102 //                         MTLSurfaceData.PF_USHORT_GRAY),</span>
103                 new MTLGeneralBlit(MTLSurfaceData.MTLSurface,
104                         CompositeType.AnyAlpha,
105                         blitIntArgbPreToSurface),
106 
107                 new MTLAnyCompositeBlit(MTLSurfaceData.MTLSurface,
108                         blitSurfaceToIntArgbPre,
109                         blitSurfaceToIntArgbPre,
110                         blitIntArgbPreToSurface),
111                 new MTLAnyCompositeBlit(SurfaceType.Any,
112                         null,
113                         blitSurfaceToIntArgbPre,
114                         blitIntArgbPreToSurface),
115 
116                 new MTLSwToSurfaceScale(SurfaceType.IntRgb,
117                         MTLSurfaceData.PF_INT_RGB),
118                 new MTLSwToSurfaceScale(SurfaceType.IntRgbx,
119                         MTLSurfaceData.PF_INT_RGBX),
120                 new MTLSwToSurfaceScale(SurfaceType.IntBgr,
121                         MTLSurfaceData.PF_INT_BGR),
122                 new MTLSwToSurfaceScale(SurfaceType.IntBgrx,
123                         MTLSurfaceData.PF_INT_BGRX),
<span class="line-modified">124 // TODO: Provide native implementation</span>
<span class="line-modified">125 //                new MTLSwToSurfaceScale(SurfaceType.ThreeByteBgr,</span>
<span class="line-modified">126 //                        MTLSurfaceData.PF_3BYTE_BGR),</span>
<span class="line-modified">127 //                new MTLSwToSurfaceScale(SurfaceType.Ushort565Rgb,</span>
<span class="line-modified">128 //                        MTLSurfaceData.PF_USHORT_565_RGB),</span>
<span class="line-modified">129 //                new MTLSwToSurfaceScale(SurfaceType.Ushort555Rgb,</span>
<span class="line-modified">130 //                        MTLSurfaceData.PF_USHORT_555_RGB),</span>
<span class="line-modified">131 //                new MTLSwToSurfaceScale(SurfaceType.Ushort555Rgbx,</span>
<span class="line-modified">132 //                        MTLSurfaceData.PF_USHORT_555_RGBX),</span>
<span class="line-modified">133 //                 new MTLSwToSurfaceScale(SurfaceType.ByteGray,</span>
<span class="line-modified">134 //                         MTLSurfaceData.PF_BYTE_GRAY),</span>
<span class="line-modified">135 //                 new MTLSwToSurfaceScale(SurfaceType.UshortGray,</span>
<span class="line-added">136 //                         MTLSurfaceData.PF_USHORT_GRAY),</span>
137                 new MTLSwToSurfaceScale(SurfaceType.IntArgbPre,
138                         MTLSurfaceData.PF_INT_ARGB_PRE),
139 
140                 new MTLSwToSurfaceTransform(SurfaceType.IntRgb,
141                         MTLSurfaceData.PF_INT_RGB),
142                 new MTLSwToSurfaceTransform(SurfaceType.IntRgbx,
143                         MTLSurfaceData.PF_INT_RGBX),
144                 new MTLSwToSurfaceTransform(SurfaceType.IntBgr,
145                         MTLSurfaceData.PF_INT_BGR),
146                 new MTLSwToSurfaceTransform(SurfaceType.IntBgrx,
147                         MTLSurfaceData.PF_INT_BGRX),
<span class="line-modified">148 // TODO: Provide native implementation</span>
<span class="line-modified">149 //                new MTLSwToSurfaceTransform(SurfaceType.ThreeByteBgr,</span>
<span class="line-modified">150 //                        MTLSurfaceData.PF_3BYTE_BGR),</span>
<span class="line-modified">151 //                new MTLSwToSurfaceTransform(SurfaceType.Ushort565Rgb,</span>
<span class="line-modified">152 //                        MTLSurfaceData.PF_USHORT_565_RGB),</span>
<span class="line-modified">153 //                new MTLSwToSurfaceTransform(SurfaceType.Ushort555Rgb,</span>
<span class="line-modified">154 //                        MTLSurfaceData.PF_USHORT_555_RGB),</span>
<span class="line-modified">155 //                new MTLSwToSurfaceTransform(SurfaceType.Ushort555Rgbx,</span>
<span class="line-modified">156 //                        MTLSurfaceData.PF_USHORT_555_RGBX),</span>
<span class="line-modified">157 //                 new MTLSwToSurfaceTransform(SurfaceType.ByteGray,</span>
<span class="line-modified">158 //                         MTLSurfaceData.PF_BYTE_GRAY),</span>
<span class="line-modified">159 //                 new MTLSwToSurfaceTransform(SurfaceType.UshortGray,</span>
<span class="line-added">160 //                         MTLSurfaceData.PF_USHORT_GRAY),</span>
161                 transformBlitIntArgbPreToSurface,
162 
163                 new MTLGeneralTransformedBlit(transformBlitIntArgbPreToSurface),
164 
165                 // texture-&gt;surface ops
166                 new MTLTextureToSurfaceBlit(),
167                 new MTLTextureToSurfaceScale(),
168                 new MTLTextureToSurfaceTransform(),
169 
170                 // sw-&gt;texture ops
171                 blitIntArgbPreToTexture,
172                 new MTLSwToTextureBlit(SurfaceType.IntRgb,
173                         MTLSurfaceData.PF_INT_RGB),
174                 new MTLSwToTextureBlit(SurfaceType.IntRgbx,
175                         MTLSurfaceData.PF_INT_RGBX),
176                 new MTLSwToTextureBlit(SurfaceType.IntBgr,
177                         MTLSurfaceData.PF_INT_BGR),
178                 new MTLSwToTextureBlit(SurfaceType.IntBgrx,
179                         MTLSurfaceData.PF_INT_BGRX),
<span class="line-modified">180 // TODO: Provide native implementation</span>
<span class="line-modified">181 //                new MTLSwToTextureBlit(SurfaceType.ThreeByteBgr,</span>
<span class="line-modified">182 //                        MTLSurfaceData.PF_3BYTE_BGR),</span>
<span class="line-modified">183 //                new MTLSwToTextureBlit(SurfaceType.Ushort565Rgb,</span>
<span class="line-modified">184 //                        MTLSurfaceData.PF_USHORT_565_RGB),</span>
<span class="line-modified">185 //                new MTLSwToTextureBlit(SurfaceType.Ushort555Rgb,</span>
<span class="line-modified">186 //                        MTLSurfaceData.PF_USHORT_555_RGB),</span>
<span class="line-modified">187 //                new MTLSwToTextureBlit(SurfaceType.Ushort555Rgbx,</span>
<span class="line-modified">188 //                        MTLSurfaceData.PF_USHORT_555_RGBX),</span>
<span class="line-modified">189 //                 new MTLSwToTextureBlit(SurfaceType.ByteGray,</span>
<span class="line-modified">190 //                         MTLSurfaceData.PF_BYTE_GRAY),</span>
<span class="line-modified">191 //                 new MTLSwToTextureBlit(SurfaceType.UshortGray,</span>
<span class="line-added">192 //                         MTLSurfaceData.PF_USHORT_GRAY),</span>
193                 new MTLGeneralBlit(MTLSurfaceData.MTLTexture,
194                         CompositeType.SrcNoEa,
195                         blitIntArgbPreToTexture),
196         };
197         GraphicsPrimitiveMgr.register(primitives);
198     }
199 
200     /**
201      * The following offsets are used to pack the parameters in
202      * createPackedParams().  (They are also used at the native level when
203      * unpacking the params.)
204      */
205     @Native private static final int OFFSET_SRCTYPE = 16;
206     @Native private static final int OFFSET_HINT    =  8;
207     @Native private static final int OFFSET_TEXTURE =  3;
208     @Native private static final int OFFSET_RTT     =  2;
209     @Native private static final int OFFSET_XFORM   =  1;
210     @Native private static final int OFFSET_ISOBLIT =  0;
211 
212     /**
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>