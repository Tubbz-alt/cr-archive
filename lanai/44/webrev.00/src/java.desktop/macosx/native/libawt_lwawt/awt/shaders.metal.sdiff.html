<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/macosx/native/libawt_lwawt/awt/shaders.metal</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../index.html" target="_top">index</a> <a href="../java2d/metal/EncoderManager.m.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/macosx/native/libawt_lwawt/awt/shaders.metal</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
170                          constant GradFrameUniforms&amp; uniforms [[buffer(0)]],
171                          texture2d&lt;float, access::sample&gt; renderTexture [[texture(0)]])
172 {
173     constexpr sampler textureSampler (address::repeat, mag_filter::nearest,
174                                       min_filter::nearest);
175 
176     float4 renderColor = renderTexture.sample(textureSampler, in.texCoords);
177 
178     float3 v = float3(in.position.x, in.position.y, 1);
179     float  a = (dot(v,uniforms.params)-0.25)*2.0;
180     float4 c = mix(uniforms.color1, uniforms.color2, a);
181     return half4(c.r*renderColor.a,
182                  c.g*renderColor.a,
183                  c.b*renderColor.a,
184                  renderColor.a);
185 }
186 
187 fragment half4 aa_frag_txt(
188         TxtShaderInOut vert [[stage_in]],
189         texture2d&lt;float, access::sample&gt; renderTexture [[texture(0)]],

190         constant TxtFrameUniforms&amp; uniforms [[buffer(1)]],
191         sampler textureSampler [[sampler(0)]]
192 ) {
193     float4 pixelColor = renderTexture.sample(textureSampler, vert.texCoords);






194     return half4(pixelColor.r, pixelColor.g, pixelColor.b, pixelColor.a);
195 }
196 
197 fragment half4 frag_grad(GradShaderInOut in [[stage_in]],
198                          constant GradFrameUniforms&amp; uniforms [[buffer(0)]]) {
199     float3 v = float3(in.position.x, in.position.y, 1);
200     float  a = (dot(v,uniforms.params)-0.25)*2.0;
201     float4 c = mix(uniforms.color1, uniforms.color2, a);
202     return half4(c);
203 }
204 
205 
206 vertex TxtShaderInOut vert_tp(VertexInput in [[stage_in]],
207        constant AnchorData&amp; anchorData [[buffer(FrameUniformBuffer)]],
208        constant TransformMatrix&amp; transform [[buffer(MatrixBuffer)]])
209 {
210     TxtShaderInOut out;
211     float4 pos4 = float4(in.position, 0.0, 1.0);
212     out.position = transform.transformMatrix * pos4;
213 
</pre>
</td>
<td>
<hr />
<pre>
170                          constant GradFrameUniforms&amp; uniforms [[buffer(0)]],
171                          texture2d&lt;float, access::sample&gt; renderTexture [[texture(0)]])
172 {
173     constexpr sampler textureSampler (address::repeat, mag_filter::nearest,
174                                       min_filter::nearest);
175 
176     float4 renderColor = renderTexture.sample(textureSampler, in.texCoords);
177 
178     float3 v = float3(in.position.x, in.position.y, 1);
179     float  a = (dot(v,uniforms.params)-0.25)*2.0;
180     float4 c = mix(uniforms.color1, uniforms.color2, a);
181     return half4(c.r*renderColor.a,
182                  c.g*renderColor.a,
183                  c.b*renderColor.a,
184                  renderColor.a);
185 }
186 
187 fragment half4 aa_frag_txt(
188         TxtShaderInOut vert [[stage_in]],
189         texture2d&lt;float, access::sample&gt; renderTexture [[texture(0)]],
<span class="line-added">190         texture2d&lt;float, access::sample&gt; stencilTexture [[texture(1)]],</span>
191         constant TxtFrameUniforms&amp; uniforms [[buffer(1)]],
192         sampler textureSampler [[sampler(0)]]
193 ) {
194     float4 pixelColor = renderTexture.sample(textureSampler, vert.texCoords);
<span class="line-added">195     if (!is_null_texture(stencilTexture)) {</span>
<span class="line-added">196         float4 stencil = stencilTexture.sample(textureSampler, vert.texCoords);</span>
<span class="line-added">197         if (stencil.r ==  0.0) {</span>
<span class="line-added">198             discard_fragment();</span>
<span class="line-added">199         }</span>
<span class="line-added">200     }</span>
201     return half4(pixelColor.r, pixelColor.g, pixelColor.b, pixelColor.a);
202 }
203 
204 fragment half4 frag_grad(GradShaderInOut in [[stage_in]],
205                          constant GradFrameUniforms&amp; uniforms [[buffer(0)]]) {
206     float3 v = float3(in.position.x, in.position.y, 1);
207     float  a = (dot(v,uniforms.params)-0.25)*2.0;
208     float4 c = mix(uniforms.color1, uniforms.color2, a);
209     return half4(c);
210 }
211 
212 
213 vertex TxtShaderInOut vert_tp(VertexInput in [[stage_in]],
214        constant AnchorData&amp; anchorData [[buffer(FrameUniformBuffer)]],
215        constant TransformMatrix&amp; transform [[buffer(MatrixBuffer)]])
216 {
217     TxtShaderInOut out;
218     float4 pos4 = float4(in.position, 0.0, 1.0);
219     out.position = transform.transformMatrix * pos4;
220 
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../index.html" target="_top">index</a> <a href="../java2d/metal/EncoderManager.m.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>