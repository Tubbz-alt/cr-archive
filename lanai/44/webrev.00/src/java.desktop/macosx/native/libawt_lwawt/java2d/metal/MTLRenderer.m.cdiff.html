<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLRenderer.m</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="MTLClip.m.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MTLSurfaceData.m.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLRenderer.m</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 281,11 ***</span>
      // NOTE : Due to nature of *spans data - it is not possible to use triangle strip.
      // We use triangle list to draw spans
  
      // Destination texture to which render commands are encoded
      id&lt;MTLTexture&gt; dest = dstOps-&gt;pTexture;
<span class="line-modified">!     bool isDestOpaque = dstOps-&gt;isOpaque;</span>
      if (mtlc.clip.stencilMaskGenerationInProgress == JNI_TRUE) {
          dest = dstOps-&gt;pStencilData;
          isDestOpaque = NO;
      }
      id&lt;MTLRenderCommandEncoder&gt; mtlEncoder = [mtlc.encoderManager getRenderEncoder:dest isDstOpaque:isDestOpaque];
<span class="line-new-header">--- 281,12 ---</span>
      // NOTE : Due to nature of *spans data - it is not possible to use triangle strip.
      // We use triangle list to draw spans
  
      // Destination texture to which render commands are encoded
      id&lt;MTLTexture&gt; dest = dstOps-&gt;pTexture;
<span class="line-modified">!     id&lt;MTLTexture&gt; destAA = nil;</span>
<span class="line-added">+     BOOL isDestOpaque = dstOps-&gt;isOpaque;</span>
      if (mtlc.clip.stencilMaskGenerationInProgress == JNI_TRUE) {
          dest = dstOps-&gt;pStencilData;
          isDestOpaque = NO;
      }
      id&lt;MTLRenderCommandEncoder&gt; mtlEncoder = [mtlc.encoderManager getRenderEncoder:dest isDstOpaque:isDestOpaque];
</pre>
<hr />
<pre>
<span class="line-old-header">*** 297,11 ***</span>
      // This is the max no of vertices (of struct Vertex - 8 bytes) we can accomodate in 4KB
      const int TOTAL_VERTICES_IN_BLOCK = 510;
      struct Vertex vertexList[TOTAL_VERTICES_IN_BLOCK]; // a total of 170 triangles ==&gt; 85 spans
  
      int counter = 0;
<span class="line-modified">! </span>
      for (int i = 0; i &lt; spanCount; i++) {
          jfloat x1 = *(spans++);
          jfloat y1 = *(spans++);
          jfloat x2 = *(spans++);
          jfloat y2 = *(spans++);
<span class="line-new-header">--- 298,11 ---</span>
      // This is the max no of vertices (of struct Vertex - 8 bytes) we can accomodate in 4KB
      const int TOTAL_VERTICES_IN_BLOCK = 510;
      struct Vertex vertexList[TOTAL_VERTICES_IN_BLOCK]; // a total of 170 triangles ==&gt; 85 spans
  
      int counter = 0;
<span class="line-modified">!     jint *aaspans = spans;</span>
      for (int i = 0; i &lt; spanCount; i++) {
          jfloat x1 = *(spans++);
          jfloat y1 = *(spans++);
          jfloat x2 = *(spans++);
          jfloat y2 = *(spans++);
</pre>
<center><a href="MTLClip.m.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MTLSurfaceData.m.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>