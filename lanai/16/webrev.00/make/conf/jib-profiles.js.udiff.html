<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/conf/jib-profiles.js</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="../common/SetupJavaCompilers.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../data/charsetmapping/MS950.map.udiff.html" target="_top">next &gt;</a></center>    <h2>make/conf/jib-profiles.js</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2015, 2019, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2015, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -249,11 +249,11 @@</span>
          dependencies: [&quot;boot_jdk&quot;, &quot;gnumake&quot;, &quot;jtreg&quot;, &quot;jib&quot;, &quot;autoconf&quot;, &quot;jmh&quot;, &quot;jcov&quot;],
          default_make_targets: [&quot;product-bundles&quot;, &quot;test-bundles&quot;, &quot;static-libs-bundles&quot;],
          configure_args: concat([&quot;--enable-jtreg-failure-handler&quot;],
              &quot;--with-exclude-translations=de,es,fr,it,ko,pt_BR,sv,ca,tr,cs,sk,ja_JP_A,ja_JP_HA,ja_JP_HI,ja_JP_I,zh_TW,zh_HK&quot;,
              &quot;--disable-manpages&quot;,
<span class="udiff-line-modified-removed">-             &quot;--with-jvm-features=-shenandoahgc&quot;,</span>
<span class="udiff-line-modified-added">+             &quot;--disable-jvm-feature-shenandoahgc&quot;,</span>
              versionArgs(input, common))
      };
      // Extra settings for debug profiles
      common.debug_suffix = &quot;-debug&quot;;
      common.debug_profile_base = {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -464,12 +464,11 @@</span>
              target_os: &quot;linux&quot;,
              target_cpu: &quot;aarch64&quot;,
              build_cpu: &quot;x64&quot;,
              dependencies: [&quot;devkit&quot;, &quot;build_devkit&quot;, &quot;cups&quot;],
              configure_args: [
<span class="udiff-line-modified-removed">-                 &quot;--openjdk-target=aarch64-linux-gnu&quot;, &quot;--with-freetype=bundled&quot;,</span>
<span class="udiff-line-removed">-                 &quot;--disable-warnings-as-errors&quot;</span>
<span class="udiff-line-modified-added">+                 &quot;--openjdk-target=aarch64-linux-gnu&quot;,</span>
              ],
          },
  
          &quot;linux-arm32&quot;: {
              target_os: &quot;linux&quot;,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -537,11 +536,11 @@</span>
              profiles[maketestName] = concatObjects(profiles[name], testmakeBase);
              profiles[maketestName].default_make_targets = [ &quot;test-make&quot; ];
          });
  
      // Generate -gcov profiles
<span class="udiff-line-modified-removed">-     [ &quot;linux-x64&quot;, &quot;macosx-x64&quot; ].forEach(function (name) {</span>
<span class="udiff-line-modified-added">+     [ &quot;linux-aarch64&quot;, &quot;linux-x64&quot;, &quot;macosx-x64&quot; ].forEach(function (name) {</span>
          var gcovName = name + &quot;-gcov&quot;;
          profiles[gcovName] = clone(profiles[name]);
          profiles[gcovName].default_make_targets = [&quot;product-bundles&quot;, &quot;test-bundles&quot;];
          profiles[gcovName].configure_args = concat(profiles[gcovName].configure_args,
              [&quot;--enable-native-coverage&quot;, &quot;--disable-warnings-as-errors&quot;]);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -624,11 +623,11 @@</span>
              delete profiles[bootcyclePrebuiltName].dependencies[bootJdkIndex];
              profiles[bootcyclePrebuiltName].default_make_targets = [ &quot;product-images&quot; ];
          });
  
      // JCov profiles build JCov-instrumented JDK image based on images provided through dependencies.
<span class="udiff-line-modified-removed">-     [ &quot;linux-x64&quot;, &quot;macosx-x64&quot;, &quot;solaris-sparcv9&quot;, &quot;windows-x64&quot;]</span>
<span class="udiff-line-modified-added">+     [ &quot;linux-aarch64&quot;, &quot;linux-x64&quot;, &quot;macosx-x64&quot;, &quot;solaris-sparcv9&quot;, &quot;windows-x64&quot;]</span>
          .forEach(function (name) {
              var jcovName = name + &quot;-jcov&quot;;
              profiles[jcovName] = clone(common.main_profile_base);
              profiles[jcovName].target_os = profiles[name].target_os
              profiles[jcovName].target_cpu = profiles[name].target_cpu
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -781,11 +780,11 @@</span>
              delete profiles[cmpBaselineName].artifacts;
          });
      });
  
      // Artifacts of JCov profiles
<span class="udiff-line-modified-removed">-     [ &quot;linux-x64&quot;, &quot;macosx-x64&quot;, &quot;solaris-sparcv9&quot;, &quot;windows-x64&quot;]</span>
<span class="udiff-line-modified-added">+     [ &quot;linux-aarch64&quot;, &quot;linux-x64&quot;, &quot;macosx-x64&quot;, &quot;solaris-sparcv9&quot;, &quot;windows-x64&quot;]</span>
          .forEach(function (name) {
              var o = artifactData[name]
              var jdk_subdir = (o.jdk_subdir != null ? o.jdk_subdir : &quot;jdk-&quot; + data.version);
              var jdk_suffix = (o.jdk_suffix != null ? o.jdk_suffix : &quot;tar.gz&quot;);
              var pf = o.platform
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -801,11 +800,11 @@</span>
                  }
              };
          });
  
      // Artifacts of gcov (native-code-coverage) profiles
<span class="udiff-line-modified-removed">-     [ &quot;linux-x64&quot;, &quot;macosx-x64&quot; ].forEach(function (name) {</span>
<span class="udiff-line-modified-added">+     [ &quot;linux-aarch64&quot;, &quot;linux-x64&quot;, &quot;macosx-x64&quot; ].forEach(function (name) {</span>
          var o = artifactData[name]
          var pf = o.platform
          var jdk_subdir = (o.jdk_subdir != null ? o.jdk_subdir : &quot;jdk-&quot; + data.version);
          var jdk_suffix = (o.jdk_suffix != null ? o.jdk_suffix : &quot;tar.gz&quot;);
          var gcovName = name + &quot;-gcov&quot;;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -864,11 +863,11 @@</span>
          testImageProfile = testedProfile.substring(0, testedProfile.length - &quot;-jcov&quot;.length);
      } else {
          testImageProfile = testedProfile;
      }
      var testedProfileTest = testImageProfile + &quot;.test&quot;
<span class="udiff-line-modified-removed">-     var testOnlyMake = [ &quot;run-test-prebuilt&quot;, &quot;LOG_CMDLINES=true&quot;, &quot;JTREG_VERBOSE=fail,error,time&quot; ];</span>
<span class="udiff-line-modified-added">+     var testOnlyMake = [ &quot;test-prebuilt&quot;, &quot;LOG_CMDLINES=true&quot;, &quot;JTREG_VERBOSE=fail,error,time&quot; ];</span>
      if (testedProfile.endsWith(&quot;-gcov&quot;)) {
          testOnlyMake = concat(testOnlyMake, &quot;GCOV_ENABLED=true&quot;)
      }
      var testOnlyProfilesPrebuilt = {
          &quot;run-test-prebuilt&quot;: {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -972,11 +971,11 @@</span>
          linux_x64: &quot;gcc8.3.0-OL6.4+1.0&quot;,
          macosx_x64: &quot;Xcode10.1-MacOSX10.14+1.0&quot;,
          solaris_x64: &quot;SS12u4-Solaris11u1+1.0&quot;,
          solaris_sparcv9: &quot;SS12u6-Solaris11u3+1.0&quot;,
          windows_x64: &quot;VS2017-15.9.16+1.0&quot;,
<span class="udiff-line-modified-removed">-         linux_aarch64: &quot;gcc8.2.0-Fedora27+1.0&quot;,</span>
<span class="udiff-line-modified-added">+         linux_aarch64: &quot;gcc8.3.0-OL7.6+1.0&quot;,</span>
          linux_arm: &quot;gcc8.2.0-Fedora27+1.0&quot;,
          linux_ppc64le: &quot;gcc8.2.0-Fedora27+1.0&quot;,
          linux_s390x: &quot;gcc8.2.0-Fedora27+1.0&quot;
      };
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1002,22 +1001,34 @@</span>
  
      var makeBinDir = (input.build_os == &quot;windows&quot;
          ? input.get(&quot;gnumake&quot;, &quot;install_path&quot;) + &quot;/cygwin/bin&quot;
          : input.get(&quot;gnumake&quot;, &quot;install_path&quot;) + &quot;/bin&quot;);
  
<span class="udiff-line-modified-removed">-     var dependencies = {</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-         boot_jdk: {</span>
<span class="udiff-line-modified-added">+     if (input.build_cpu == &#39;aarch64&#39;) {</span>
<span class="udiff-line-modified-added">+ 	boot_jdk = {</span>
<span class="udiff-line-modified-added">+             organization: common.organization,</span>
<span class="udiff-line-added">+             ext: &quot;tar.gz&quot;,</span>
<span class="udiff-line-added">+             module: &quot;jdk-linux_aarch64&quot;,</span>
<span class="udiff-line-added">+             revision: &quot;13+1.0&quot;,</span>
<span class="udiff-line-added">+             configure_args: &quot;--with-boot-jdk=&quot; + common.boot_jdk_home,</span>
<span class="udiff-line-added">+             environment_path: common.boot_jdk_home + &quot;/bin&quot;</span>
<span class="udiff-line-added">+ 	}</span>
<span class="udiff-line-added">+     } else {</span>
<span class="udiff-line-added">+ 	boot_jdk = {</span>
              server: &quot;jpg&quot;,
              product: &quot;jdk&quot;,
              version: common.boot_jdk_version,
              build_number: common.boot_jdk_build_number,
              file: &quot;bundles/&quot; + boot_jdk_platform + &quot;/jdk-&quot; + common.boot_jdk_version + &quot;_&quot;
                  + boot_jdk_platform + &quot;_bin&quot; + boot_jdk_ext,
              configure_args: &quot;--with-boot-jdk=&quot; + common.boot_jdk_home,
              environment_path: common.boot_jdk_home + &quot;/bin&quot;
<span class="udiff-line-modified-removed">-         },</span>
<span class="udiff-line-modified-added">+ 	}</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     var dependencies = {</span>
<span class="udiff-line-added">+         boot_jdk: boot_jdk,</span>
  
          devkit: {
              organization: common.organization,
              ext: &quot;tar.gz&quot;,
              module: &quot;devkit-&quot; + devkit_cross_prefix + devkit_platform,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1039,15 +1050,16 @@</span>
              ext: &quot;tar.gz&quot;,
              revision: &quot;1.0118+1.0&quot;
          },
  
          jtreg: {
<span class="udiff-line-modified-removed">-             server: &quot;javare&quot;,</span>
<span class="udiff-line-modified-removed">-             revision: &quot;4.2&quot;,</span>
<span class="udiff-line-modified-removed">-             build_number: &quot;b16&quot;,</span>
<span class="udiff-line-modified-added">+             server: &quot;jpg&quot;,</span>
<span class="udiff-line-modified-added">+             product: &quot;jtreg&quot;,</span>
<span class="udiff-line-modified-added">+             version: &quot;5.0&quot;,</span>
<span class="udiff-line-added">+             build_number: &quot;b01&quot;,</span>
              checksum_file: &quot;MD5_VALUES&quot;,
<span class="udiff-line-modified-removed">-             file: &quot;jtreg_bin-4.2.zip&quot;,</span>
<span class="udiff-line-modified-added">+             file: &quot;bundles/jtreg_bin-5.0.zip&quot;,</span>
              environment_name: &quot;JT_HOME&quot;,
              environment_path: input.get(&quot;jtreg&quot;, &quot;install_path&quot;) + &quot;/jtreg/bin&quot;
          },
  
          jmh: {
</pre>
<center><a href="../common/SetupJavaCompilers.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../data/charsetmapping/MS950.map.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>