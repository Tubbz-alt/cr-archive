<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/autoconf/spec.gmk.in</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="source-dirs.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="toolchain.m4.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/spec.gmk.in</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
286 JVM_FEATURES_custom := @JVM_FEATURES_custom@
287 
288 # Used for make-time verifications
289 VALID_JVM_FEATURES := @VALID_JVM_FEATURES@
290 VALID_JVM_VARIANTS := @VALID_JVM_VARIANTS@
291 
292 # Control whether Hotspot builds gtest tests
293 BUILD_GTEST := @BUILD_GTEST@
294 
295 # Allow overriding the default hotspot library path
296 HOTSPOT_OVERRIDE_LIBPATH := @HOTSPOT_OVERRIDE_LIBPATH@
297 
298 # Control use of precompiled header in hotspot libjvm build
299 USE_PRECOMPILED_HEADER := @USE_PRECOMPILED_HEADER@
300 
301 # Only build headless support or not
302 ENABLE_HEADLESS_ONLY := @ENABLE_HEADLESS_ONLY@
303 
304 ENABLE_LINKTIME_GC := @ENABLE_LINKTIME_GC@
305 



306 ENABLE_FULL_DOCS := @ENABLE_FULL_DOCS@
307 
308 # JDK_OUTPUTDIR specifies where a working jvm is built.
309 # You can run $(JDK_OUTPUTDIR)/bin/java
310 
311 OUTPUTDIR := @OUTPUTDIR@
312 # Colon left out to be able to override IMAGES_OUTPUTDIR for bootcycle-images
313 SUPPORT_OUTPUTDIR=$(OUTPUTDIR)/support
314 BUILDTOOLS_OUTPUTDIR=$(OUTPUTDIR)/buildtools
315 
316 HOTSPOT_OUTPUTDIR=$(OUTPUTDIR)/hotspot
317 JDK_OUTPUTDIR=$(OUTPUTDIR)/jdk
318 IMAGES_OUTPUTDIR=$(OUTPUTDIR)/images
319 BUNDLES_OUTPUTDIR=$(OUTPUTDIR)/bundles
320 TESTMAKE_OUTPUTDIR=$(OUTPUTDIR)/test-make
321 MAKESUPPORT_OUTPUTDIR=$(OUTPUTDIR)/make-support
322 
323 # This does not get overridden in a bootcycle build
324 CONFIGURESUPPORT_OUTPUTDIR:=@CONFIGURESUPPORT_OUTPUTDIR@
325 BUILDJDK_OUTPUTDIR=$(OUTPUTDIR)/buildjdk
</pre>
<hr />
<pre>
636 JAVAC=@FIXPATH@ $(JAVAC_CMD)
637 JAVADOC=@FIXPATH@ $(JAVADOC_CMD)
638 JAR=@FIXPATH@ $(JAR_CMD)
639 JLINK = @FIXPATH@ $(JLINK_CMD) $(JAVA_TOOL_FLAGS_SMALL)
640 JMOD = @FIXPATH@ $(JMOD_CMD) $(JAVA_TOOL_FLAGS_SMALL)
641 JARSIGNER=@FIXPATH@ $(JARSIGNER_CMD)
642 # A specific java binary with specific options can be used to run
643 # the long running background sjavac servers and other long running tasks.
644 SJAVAC_SERVER_JAVA=@FIXPATH@ @FIXPATH_DETACH_FLAG@ $(SJAVAC_SERVER_JAVA_CMD) \
645     $(SJAVAC_SERVER_JAVA_FLAGS)
646 
647 # Hotspot sets this variable before reading the SPEC when compiling sa-jdi.jar. Avoid
648 # overriding that value by using ?=.
649 JAVAC_FLAGS?=@JAVAC_FLAGS@
650 
651 
652 BUILD_JAVA_FLAGS := @BOOTCYCLE_JVM_ARGS_BIG@
653 BUILD_JAVA=@FIXPATH@ $(BUILD_JDK)/bin/java $(BUILD_JAVA_FLAGS)
654 BUILD_JAR=@FIXPATH@ $(BUILD_JDK)/bin/jar
655 
<span class="line-modified">656 # Interim langtools and rmic modules and arguments</span>
657 INTERIM_LANGTOOLS_BASE_MODULES := java.compiler jdk.compiler jdk.javadoc
658 INTERIM_LANGTOOLS_MODULES := $(addsuffix .interim, $(INTERIM_LANGTOOLS_BASE_MODULES))
659 INTERIM_LANGTOOLS_ADD_EXPORTS := \
660     --add-exports java.base/sun.reflect.annotation=jdk.compiler.interim \
661     --add-exports java.base/jdk.internal.jmod=jdk.compiler.interim \
662     --add-exports java.base/jdk.internal.misc=jdk.compiler.interim \
663     #
664 INTERIM_LANGTOOLS_MODULES_COMMA := $(strip $(subst $(SPACE),$(COMMA),$(strip \
665     $(INTERIM_LANGTOOLS_MODULES))))
666 INTERIM_LANGTOOLS_ARGS := \
667     --limit-modules java.base,jdk.zipfs,$(INTERIM_LANGTOOLS_MODULES_COMMA) \
668     --add-modules $(INTERIM_LANGTOOLS_MODULES_COMMA) \
669     --module-path $(BUILDTOOLS_OUTPUTDIR)/interim_langtools_modules \
670     $(INTERIM_LANGTOOLS_ADD_EXPORTS) \
671     #
672 JAVAC_MAIN_CLASS = -m jdk.compiler.interim/com.sun.tools.javac.Main
673 JAVADOC_MAIN_CLASS = -m jdk.javadoc.interim/jdk.javadoc.internal.tool.Main
674 
<span class="line-removed">675 INTERIM_RMIC_BASE_MODULES := jdk.rmic</span>
<span class="line-removed">676 INTERIM_RMIC_MODULES := $(addsuffix .interim, $(INTERIM_RMIC_BASE_MODULES))</span>
<span class="line-removed">677     #</span>
<span class="line-removed">678 # Use = to delay expansion of PathList since it&#39;s not available in this file.</span>
<span class="line-removed">679 INTERIM_RMIC_ARGS = --limit-modules java.base,jdk.compiler,jdk.javadoc \</span>
<span class="line-removed">680     --module-path $(call PathList, $(BUILDTOOLS_OUTPUTDIR)/interim_rmic_modules \</span>
<span class="line-removed">681         $(BUILDTOOLS_OUTPUTDIR)/interim_langtools_modules) \</span>
<span class="line-removed">682     #</span>
<span class="line-removed">683 </span>
684 # You run the new javac using the boot jdk with $(BOOT_JDK)/bin/java $(NEW_JAVAC) ...
685 # Use = assignment to be able to override in bootcycle-spec.gmk
686 NEW_JAVAC   = $(INTERIM_LANGTOOLS_ARGS) $(JAVAC_MAIN_CLASS)
687 NEW_JAVADOC = $(INTERIM_LANGTOOLS_ARGS) $(JAVADOC_MAIN_CLASS)
688 
689 JLINK_KEEP_PACKAGED_MODULES:=@JLINK_KEEP_PACKAGED_MODULES@
690 
691 # Base flags for RC
692 # Guarding this against resetting value. Legacy make files include spec multiple
693 # times.
694 ifndef RC_FLAGS
695   RC_FLAGS:=@RC_FLAGS@
696 endif
697 
698 # Tools adhering to a minimal and common standard of posix compliance.
699 AWK:=@AWK@
700 BASENAME:=@BASENAME@
701 CAT:=@CAT@
702 CCACHE:=@CCACHE@
703 # CD is going away, but remains to cater for legacy makefiles.
</pre>
<hr />
<pre>
894 INTERIM_JMODS_DIR := $(SUPPORT_OUTPUTDIR)/interim-jmods
895 INTERIM_IMAGE_DIR := $(SUPPORT_OUTPUTDIR)/interim-image
896 
897 # Docs image
898 DOCS_IMAGE_SUBDIR := docs
899 DOCS_IMAGE_DIR = $(IMAGES_OUTPUTDIR)/$(DOCS_IMAGE_SUBDIR)
900 # Output docs directly into image
901 DOCS_OUTPUTDIR := $(DOCS_IMAGE_DIR)
902 
903 # Static libs image
904 STATIC_LIBS_IMAGE_SUBDIR := static-libs
905 STATIC_LIBS_IMAGE_DIR := $(IMAGES_OUTPUTDIR)/$(STATIC_LIBS_IMAGE_SUBDIR)
906 
907 # Graal builder image
908 GRAAL_BUILDER_IMAGE_SUBDIR := graal-builder-jdk
909 GRAAL_BUILDER_IMAGE_DIR := $(IMAGES_OUTPUTDIR)/$(GRAAL_BUILDER_IMAGE_SUBDIR)
910 
911 # Macosx bundles directory definitions
912 JDK_MACOSX_BUNDLE_SUBDIR=jdk-bundle
913 JRE_MACOSX_BUNDLE_SUBDIR=jre-bundle


914 JDK_MACOSX_BUNDLE_DIR=$(IMAGES_OUTPUTDIR)/$(JDK_MACOSX_BUNDLE_SUBDIR)
915 JRE_MACOSX_BUNDLE_DIR=$(IMAGES_OUTPUTDIR)/$(JRE_MACOSX_BUNDLE_SUBDIR)
<span class="line-modified">916 JDK_MACOSX_CONTENTS_SUBDIR=jdk-$(VERSION_NUMBER).jdk/Contents</span>
<span class="line-modified">917 JRE_MACOSX_CONTENTS_SUBDIR=jre-$(VERSION_NUMBER).jre/Contents</span>




918 JDK_MACOSX_CONTENTS_DIR=$(JDK_MACOSX_BUNDLE_DIR)/$(JDK_MACOSX_CONTENTS_SUBDIR)
919 JRE_MACOSX_CONTENTS_DIR=$(JRE_MACOSX_BUNDLE_DIR)/$(JRE_MACOSX_CONTENTS_SUBDIR)
920 
921 # Bundle names
922 BASE_NAME := $(VERSION_SHORT)+$(VERSION_BUILD)_$(OPENJDK_TARGET_BUNDLE_PLATFORM)
923 ifeq ($(DEBUG_LEVEL), fastdebug)
924   DEBUG_PART := -debug
925 else ifneq ($(DEBUG_LEVEL), release)
926   DEBUG_PART := -$(DEBUG_LEVEL)
927 endif
928 ifeq ($(OPENJDK_TARGET_OS), windows)
929   JDK_BUNDLE_EXTENSION := zip
930 else
931   JDK_BUNDLE_EXTENSION := tar.gz
932 endif
933 JDK_BUNDLE_NAME := jdk-$(BASE_NAME)_bin$(DEBUG_PART).$(JDK_BUNDLE_EXTENSION)
934 JRE_BUNDLE_NAME := jre-$(BASE_NAME)_bin$(DEBUG_PART).$(JDK_BUNDLE_EXTENSION)
935 JDK_SYMBOLS_BUNDLE_NAME := jdk-$(BASE_NAME)_bin$(DEBUG_PART)-symbols.tar.gz
936 TEST_DEMOS_BUNDLE_NAME := jdk-$(BASE_NAME)_bin-tests-demos$(DEBUG_PART).tar.gz
937 TEST_BUNDLE_NAME := jdk-$(BASE_NAME)_bin-tests$(DEBUG_PART).tar.gz
</pre>
</td>
<td>
<hr />
<pre>
286 JVM_FEATURES_custom := @JVM_FEATURES_custom@
287 
288 # Used for make-time verifications
289 VALID_JVM_FEATURES := @VALID_JVM_FEATURES@
290 VALID_JVM_VARIANTS := @VALID_JVM_VARIANTS@
291 
292 # Control whether Hotspot builds gtest tests
293 BUILD_GTEST := @BUILD_GTEST@
294 
295 # Allow overriding the default hotspot library path
296 HOTSPOT_OVERRIDE_LIBPATH := @HOTSPOT_OVERRIDE_LIBPATH@
297 
298 # Control use of precompiled header in hotspot libjvm build
299 USE_PRECOMPILED_HEADER := @USE_PRECOMPILED_HEADER@
300 
301 # Only build headless support or not
302 ENABLE_HEADLESS_ONLY := @ENABLE_HEADLESS_ONLY@
303 
304 ENABLE_LINKTIME_GC := @ENABLE_LINKTIME_GC@
305 
<span class="line-added">306 # Ship debug symbols (e.g. pdbs on Windows)</span>
<span class="line-added">307 SHIP_DEBUG_SYMBOLS := @SHIP_DEBUG_SYMBOLS@</span>
<span class="line-added">308 </span>
309 ENABLE_FULL_DOCS := @ENABLE_FULL_DOCS@
310 
311 # JDK_OUTPUTDIR specifies where a working jvm is built.
312 # You can run $(JDK_OUTPUTDIR)/bin/java
313 
314 OUTPUTDIR := @OUTPUTDIR@
315 # Colon left out to be able to override IMAGES_OUTPUTDIR for bootcycle-images
316 SUPPORT_OUTPUTDIR=$(OUTPUTDIR)/support
317 BUILDTOOLS_OUTPUTDIR=$(OUTPUTDIR)/buildtools
318 
319 HOTSPOT_OUTPUTDIR=$(OUTPUTDIR)/hotspot
320 JDK_OUTPUTDIR=$(OUTPUTDIR)/jdk
321 IMAGES_OUTPUTDIR=$(OUTPUTDIR)/images
322 BUNDLES_OUTPUTDIR=$(OUTPUTDIR)/bundles
323 TESTMAKE_OUTPUTDIR=$(OUTPUTDIR)/test-make
324 MAKESUPPORT_OUTPUTDIR=$(OUTPUTDIR)/make-support
325 
326 # This does not get overridden in a bootcycle build
327 CONFIGURESUPPORT_OUTPUTDIR:=@CONFIGURESUPPORT_OUTPUTDIR@
328 BUILDJDK_OUTPUTDIR=$(OUTPUTDIR)/buildjdk
</pre>
<hr />
<pre>
639 JAVAC=@FIXPATH@ $(JAVAC_CMD)
640 JAVADOC=@FIXPATH@ $(JAVADOC_CMD)
641 JAR=@FIXPATH@ $(JAR_CMD)
642 JLINK = @FIXPATH@ $(JLINK_CMD) $(JAVA_TOOL_FLAGS_SMALL)
643 JMOD = @FIXPATH@ $(JMOD_CMD) $(JAVA_TOOL_FLAGS_SMALL)
644 JARSIGNER=@FIXPATH@ $(JARSIGNER_CMD)
645 # A specific java binary with specific options can be used to run
646 # the long running background sjavac servers and other long running tasks.
647 SJAVAC_SERVER_JAVA=@FIXPATH@ @FIXPATH_DETACH_FLAG@ $(SJAVAC_SERVER_JAVA_CMD) \
648     $(SJAVAC_SERVER_JAVA_FLAGS)
649 
650 # Hotspot sets this variable before reading the SPEC when compiling sa-jdi.jar. Avoid
651 # overriding that value by using ?=.
652 JAVAC_FLAGS?=@JAVAC_FLAGS@
653 
654 
655 BUILD_JAVA_FLAGS := @BOOTCYCLE_JVM_ARGS_BIG@
656 BUILD_JAVA=@FIXPATH@ $(BUILD_JDK)/bin/java $(BUILD_JAVA_FLAGS)
657 BUILD_JAR=@FIXPATH@ $(BUILD_JDK)/bin/jar
658 
<span class="line-modified">659 # Interim langtools modules and arguments</span>
660 INTERIM_LANGTOOLS_BASE_MODULES := java.compiler jdk.compiler jdk.javadoc
661 INTERIM_LANGTOOLS_MODULES := $(addsuffix .interim, $(INTERIM_LANGTOOLS_BASE_MODULES))
662 INTERIM_LANGTOOLS_ADD_EXPORTS := \
663     --add-exports java.base/sun.reflect.annotation=jdk.compiler.interim \
664     --add-exports java.base/jdk.internal.jmod=jdk.compiler.interim \
665     --add-exports java.base/jdk.internal.misc=jdk.compiler.interim \
666     #
667 INTERIM_LANGTOOLS_MODULES_COMMA := $(strip $(subst $(SPACE),$(COMMA),$(strip \
668     $(INTERIM_LANGTOOLS_MODULES))))
669 INTERIM_LANGTOOLS_ARGS := \
670     --limit-modules java.base,jdk.zipfs,$(INTERIM_LANGTOOLS_MODULES_COMMA) \
671     --add-modules $(INTERIM_LANGTOOLS_MODULES_COMMA) \
672     --module-path $(BUILDTOOLS_OUTPUTDIR)/interim_langtools_modules \
673     $(INTERIM_LANGTOOLS_ADD_EXPORTS) \
674     #
675 JAVAC_MAIN_CLASS = -m jdk.compiler.interim/com.sun.tools.javac.Main
676 JAVADOC_MAIN_CLASS = -m jdk.javadoc.interim/jdk.javadoc.internal.tool.Main
677 









678 # You run the new javac using the boot jdk with $(BOOT_JDK)/bin/java $(NEW_JAVAC) ...
679 # Use = assignment to be able to override in bootcycle-spec.gmk
680 NEW_JAVAC   = $(INTERIM_LANGTOOLS_ARGS) $(JAVAC_MAIN_CLASS)
681 NEW_JAVADOC = $(INTERIM_LANGTOOLS_ARGS) $(JAVADOC_MAIN_CLASS)
682 
683 JLINK_KEEP_PACKAGED_MODULES:=@JLINK_KEEP_PACKAGED_MODULES@
684 
685 # Base flags for RC
686 # Guarding this against resetting value. Legacy make files include spec multiple
687 # times.
688 ifndef RC_FLAGS
689   RC_FLAGS:=@RC_FLAGS@
690 endif
691 
692 # Tools adhering to a minimal and common standard of posix compliance.
693 AWK:=@AWK@
694 BASENAME:=@BASENAME@
695 CAT:=@CAT@
696 CCACHE:=@CCACHE@
697 # CD is going away, but remains to cater for legacy makefiles.
</pre>
<hr />
<pre>
888 INTERIM_JMODS_DIR := $(SUPPORT_OUTPUTDIR)/interim-jmods
889 INTERIM_IMAGE_DIR := $(SUPPORT_OUTPUTDIR)/interim-image
890 
891 # Docs image
892 DOCS_IMAGE_SUBDIR := docs
893 DOCS_IMAGE_DIR = $(IMAGES_OUTPUTDIR)/$(DOCS_IMAGE_SUBDIR)
894 # Output docs directly into image
895 DOCS_OUTPUTDIR := $(DOCS_IMAGE_DIR)
896 
897 # Static libs image
898 STATIC_LIBS_IMAGE_SUBDIR := static-libs
899 STATIC_LIBS_IMAGE_DIR := $(IMAGES_OUTPUTDIR)/$(STATIC_LIBS_IMAGE_SUBDIR)
900 
901 # Graal builder image
902 GRAAL_BUILDER_IMAGE_SUBDIR := graal-builder-jdk
903 GRAAL_BUILDER_IMAGE_DIR := $(IMAGES_OUTPUTDIR)/$(GRAAL_BUILDER_IMAGE_SUBDIR)
904 
905 # Macosx bundles directory definitions
906 JDK_MACOSX_BUNDLE_SUBDIR=jdk-bundle
907 JRE_MACOSX_BUNDLE_SUBDIR=jre-bundle
<span class="line-added">908 JDK_MACOSX_BUNDLE_SUBDIR_SIGNED=jdk-bundle-signed</span>
<span class="line-added">909 JRE_MACOSX_BUNDLE_SUBDIR_SIGNED=jre-bundle-signed</span>
910 JDK_MACOSX_BUNDLE_DIR=$(IMAGES_OUTPUTDIR)/$(JDK_MACOSX_BUNDLE_SUBDIR)
911 JRE_MACOSX_BUNDLE_DIR=$(IMAGES_OUTPUTDIR)/$(JRE_MACOSX_BUNDLE_SUBDIR)
<span class="line-modified">912 JDK_MACOSX_BUNDLE_DIR_SIGNED=$(IMAGES_OUTPUTDIR)/$(JDK_MACOSX_BUNDLE_SUBDIR_SIGNED)</span>
<span class="line-modified">913 JRE_MACOSX_BUNDLE_DIR_SIGNED=$(IMAGES_OUTPUTDIR)/$(JRE_MACOSX_BUNDLE_SUBDIR_SIGNED)</span>
<span class="line-added">914 JDK_MACOSX_BUNDLE_TOP_DIR=jdk-$(VERSION_NUMBER).jdk</span>
<span class="line-added">915 JRE_MACOSX_BUNDLE_TOP_DIR=jre-$(VERSION_NUMBER).jre</span>
<span class="line-added">916 JDK_MACOSX_CONTENTS_SUBDIR=$(JDK_MACOSX_BUNDLE_TOP_DIR)/Contents</span>
<span class="line-added">917 JRE_MACOSX_CONTENTS_SUBDIR=$(JRE_MACOSX_BUNDLE_TOP_DIR)/Contents</span>
918 JDK_MACOSX_CONTENTS_DIR=$(JDK_MACOSX_BUNDLE_DIR)/$(JDK_MACOSX_CONTENTS_SUBDIR)
919 JRE_MACOSX_CONTENTS_DIR=$(JRE_MACOSX_BUNDLE_DIR)/$(JRE_MACOSX_CONTENTS_SUBDIR)
920 
921 # Bundle names
922 BASE_NAME := $(VERSION_SHORT)+$(VERSION_BUILD)_$(OPENJDK_TARGET_BUNDLE_PLATFORM)
923 ifeq ($(DEBUG_LEVEL), fastdebug)
924   DEBUG_PART := -debug
925 else ifneq ($(DEBUG_LEVEL), release)
926   DEBUG_PART := -$(DEBUG_LEVEL)
927 endif
928 ifeq ($(OPENJDK_TARGET_OS), windows)
929   JDK_BUNDLE_EXTENSION := zip
930 else
931   JDK_BUNDLE_EXTENSION := tar.gz
932 endif
933 JDK_BUNDLE_NAME := jdk-$(BASE_NAME)_bin$(DEBUG_PART).$(JDK_BUNDLE_EXTENSION)
934 JRE_BUNDLE_NAME := jre-$(BASE_NAME)_bin$(DEBUG_PART).$(JDK_BUNDLE_EXTENSION)
935 JDK_SYMBOLS_BUNDLE_NAME := jdk-$(BASE_NAME)_bin$(DEBUG_PART)-symbols.tar.gz
936 TEST_DEMOS_BUNDLE_NAME := jdk-$(BASE_NAME)_bin-tests-demos$(DEBUG_PART).tar.gz
937 TEST_BUNDLE_NAME := jdk-$(BASE_NAME)_bin-tests$(DEBUG_PART).tar.gz
</pre>
</td>
</tr>
</table>
<center><a href="source-dirs.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="toolchain.m4.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>