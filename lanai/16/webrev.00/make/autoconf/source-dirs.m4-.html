<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old make/autoconf/source-dirs.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
  <body>
    <pre>
 1 #
 2 # Copyright (c) 2011, 2017, Oracle and/or its affiliates. All rights reserved.
 3 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 4 #
 5 # This code is free software; you can redistribute it and/or modify it
 6 # under the terms of the GNU General Public License version 2 only, as
 7 # published by the Free Software Foundation.  Oracle designates this
 8 # particular file as subject to the &quot;Classpath&quot; exception as provided
 9 # by Oracle in the LICENSE file that accompanied this code.
10 #
11 # This code is distributed in the hope that it will be useful, but WITHOUT
12 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
13 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
14 # version 2 for more details (a copy is included in the LICENSE file that
15 # accompanied this code).
16 #
17 # You should have received a copy of the GNU General Public License version
18 # 2 along with this work; if not, write to the Free Software Foundation,
19 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
20 #
21 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
22 # or visit www.oracle.com if you need additional information or have any
23 # questions.
24 #
25 
26 AC_DEFUN_ONCE([SRCDIRS_SETUP_DIRS],
27 [
28   OUTPUTDIR=&quot;$OUTPUTDIR&quot;
29   AC_SUBST(OUTPUTDIR)
30   JDK_OUTPUTDIR=&quot;$OUTPUTDIR/jdk&quot;
31 
32   # Where are the sources.
33   AC_SUBST(TOPDIR)
34 ])
35 
36 ################################################################################
37 # Define a mechanism for importing extra prebuilt modules
38 #
39 
40 AC_DEFUN_ONCE([SRCDIRS_SETUP_IMPORT_MODULES],
41 [
42   AC_ARG_WITH(import-modules, [AS_HELP_STRING([--with-import-modules],
43       [import a set of prebuilt modules either as a zip file or an exploded directory])])
44 
45   if test &quot;x$with_import_modules&quot; != x \
46       &amp;&amp; test &quot;x$with_import_modules&quot; != &quot;xno&quot;; then
47     if test -d &quot;$with_import_modules&quot;; then
48       IMPORT_MODULES_TOPDIR=&quot;$with_import_modules&quot;
49       BASIC_FIXUP_PATH([IMPORT_MODULES_TOPDIR])
50     elif test -e &quot;$with_import_modules&quot;; then
51       IMPORT_MODULES_TOPDIR=&quot;$CONFIGURESUPPORT_OUTPUTDIR/import-modules&quot;
52       $RM -rf &quot;$IMPORT_MODULES_TOPDIR&quot;
53       $MKDIR -p &quot;$IMPORT_MODULES_TOPDIR&quot;
54       if ! $UNZIP -q &quot;$with_import_modules&quot; -d &quot;$IMPORT_MODULES_TOPDIR&quot;; then
55         AC_MSG_ERROR([--with-import-modules=&quot;$with_import_modules&quot; must point to a dir or a zip file])
56       fi
57     else
58       AC_MSG_ERROR([--with-import-modules=&quot;$with_import_modules&quot; must point to a dir or a zip file])
59     fi
60   fi
61 
62   if test -d &quot;$IMPORT_MODULES_TOPDIR/modules&quot;; then
63     IMPORT_MODULES_CLASSES=&quot;$IMPORT_MODULES_TOPDIR/modules&quot;
64   fi
65   if test -d &quot;$IMPORT_MODULES_TOPDIR/modules_cmds&quot;; then
66     IMPORT_MODULES_CMDS=&quot;$IMPORT_MODULES_TOPDIR/modules_cmds&quot;
67   fi
68   if test -d &quot;$IMPORT_MODULES_TOPDIR/modules_libs&quot;; then
69     IMPORT_MODULES_LIBS=&quot;$IMPORT_MODULES_TOPDIR/modules_libs&quot;
70   fi
71   if test -d &quot;$IMPORT_MODULES_TOPDIR/modules_conf&quot;; then
72     IMPORT_MODULES_CONF=&quot;$IMPORT_MODULES_TOPDIR/modules_conf&quot;
73   fi
74   if test -d &quot;$IMPORT_MODULES_TOPDIR/modules_legal&quot;; then
75     IMPORT_MODULES_LEGAL=&quot;$IMPORT_MODULES_TOPDIR/modules_legal&quot;
76   fi
77   if test -d &quot;$IMPORT_MODULES_TOPDIR/modules_man&quot;; then
78     IMPORT_MODULES_MAN=&quot;$IMPORT_MODULES_TOPDIR/modules_man&quot;
79   fi
80   if test -d &quot;$IMPORT_MODULES_TOPDIR/modules_src&quot;; then
81     IMPORT_MODULES_SRC=&quot;$IMPORT_MODULES_TOPDIR/modules_src&quot;
82   fi
83   if test -d &quot;$IMPORT_MODULES_TOPDIR/make&quot;; then
84     IMPORT_MODULES_MAKE=&quot;$IMPORT_MODULES_TOPDIR/make&quot;
85   fi
86 
87   AC_SUBST(IMPORT_MODULES_CLASSES)
88   AC_SUBST(IMPORT_MODULES_CMDS)
89   AC_SUBST(IMPORT_MODULES_LIBS)
90   AC_SUBST(IMPORT_MODULES_CONF)
91   AC_SUBST(IMPORT_MODULES_LEGAL)
92   AC_SUBST(IMPORT_MODULES_MAN)
93   AC_SUBST(IMPORT_MODULES_SRC)
94   AC_SUBST(IMPORT_MODULES_MAKE)
95 ])
    </pre>
  </body>
</html>