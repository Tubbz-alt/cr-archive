<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/gc/shenandoah/shenandoahMarkingContext.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="shenandoahMarkCompact.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="shenandoahMarkingContext.inline.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shenandoah/shenandoahMarkingContext.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
39 
40   HeapWord** const _top_bitmaps;
41   HeapWord** const _top_at_mark_starts_base;
42   HeapWord** const _top_at_mark_starts;
43 
44   ShenandoahSharedFlag _is_complete;
45 
46 public:
47   ShenandoahMarkingContext(MemRegion heap_region, MemRegion bitmap_region, size_t num_regions);
48 
49   /*
50    * Marks the object. Returns true if the object has not been marked before and has
51    * been marked by this thread. Returns false if the object has already been marked,
52    * or if a competing thread succeeded in marking this object.
53    */
54   inline bool mark(oop obj);
55 
56   inline bool is_marked(oop obj) const;
57 
58   inline bool allocated_after_mark_start(oop obj) const;

59 
60   inline MarkBitMap* mark_bit_map();
61 
62   HeapWord* top_at_mark_start(ShenandoahHeapRegion* r) const;
63   void capture_top_at_mark_start(ShenandoahHeapRegion* r);
64   void reset_top_at_mark_start(ShenandoahHeapRegion* r);
65   void initialize_top_at_mark_start(ShenandoahHeapRegion* r);
66 
67   void reset_top_bitmap(ShenandoahHeapRegion *r);
68   void clear_bitmap(ShenandoahHeapRegion *r);
69 
70   bool is_bitmap_clear() const;
71   bool is_bitmap_clear_range(HeapWord* start, HeapWord* end) const;
72 
73   bool is_complete();
74   void mark_complete();
75   void mark_incomplete();
76 
77 };
78 
</pre>
</td>
<td>
<hr />
<pre>
39 
40   HeapWord** const _top_bitmaps;
41   HeapWord** const _top_at_mark_starts_base;
42   HeapWord** const _top_at_mark_starts;
43 
44   ShenandoahSharedFlag _is_complete;
45 
46 public:
47   ShenandoahMarkingContext(MemRegion heap_region, MemRegion bitmap_region, size_t num_regions);
48 
49   /*
50    * Marks the object. Returns true if the object has not been marked before and has
51    * been marked by this thread. Returns false if the object has already been marked,
52    * or if a competing thread succeeded in marking this object.
53    */
54   inline bool mark(oop obj);
55 
56   inline bool is_marked(oop obj) const;
57 
58   inline bool allocated_after_mark_start(oop obj) const;
<span class="line-added">59   inline bool allocated_after_mark_start(HeapWord* addr) const;</span>
60 
61   inline MarkBitMap* mark_bit_map();
62 
63   HeapWord* top_at_mark_start(ShenandoahHeapRegion* r) const;
64   void capture_top_at_mark_start(ShenandoahHeapRegion* r);
65   void reset_top_at_mark_start(ShenandoahHeapRegion* r);
66   void initialize_top_at_mark_start(ShenandoahHeapRegion* r);
67 
68   void reset_top_bitmap(ShenandoahHeapRegion *r);
69   void clear_bitmap(ShenandoahHeapRegion *r);
70 
71   bool is_bitmap_clear() const;
72   bool is_bitmap_clear_range(HeapWord* start, HeapWord* end) const;
73 
74   bool is_complete();
75   void mark_complete();
76   void mark_incomplete();
77 
78 };
79 
</pre>
</td>
</tr>
</table>
<center><a href="shenandoahMarkCompact.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="shenandoahMarkingContext.inline.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>