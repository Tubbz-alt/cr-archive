<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.crypto.cryptoki/unix/native/libj2pkcs11/p11_md.c</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../../../share/legal/pkcs11cryptotoken.md.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../../../jdk.crypto.ec/share/classes/sun/security/ec/ECDSAOperations.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.crypto.cryptoki/unix/native/libj2pkcs11/p11_md.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2003, 2014, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2003, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   */
  
  /* Copyright  (c) 2002 Graz University of Technology. All rights reserved.
   *
   * Redistribution and use in  source and binary forms, with or without
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -91,11 +91,10 @@</span>
      if (libraryNameStr == NULL) {
          return;
      }
      TRACE1(&quot;DEBUG: connect to PKCS#11 module: %s ... &quot;, libraryNameStr);
  
<span class="udiff-line-removed">- </span>
      /*
       * Load the PKCS #11 DLL
       */
      dlerror(); /* clear any old error message not fetched */
  #ifdef DEBUG
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -117,10 +116,11 @@</span>
          throwIOException(env, exceptionMessage);
          (*env)-&gt;ReleaseStringUTFChars(env, jPkcs11ModulePath, libraryNameStr);
          free(exceptionMessage);
          return;
      }
<span class="udiff-line-added">+     (*env)-&gt;ReleaseStringUTFChars(env, jPkcs11ModulePath, libraryNameStr);</span>
  
      /*
       * Get function pointer to C_GetFunctionList
       */
      dlerror(); /* clear any old error message not fetched */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -154,11 +154,10 @@</span>
      moduleData-&gt;applicationMutexHandler = NULL;
      rv = (C_GetFunctionList)(&amp;(moduleData-&gt;ckFunctionListPtr));
      globalPKCS11ImplementationReference = (*env)-&gt;NewGlobalRef(env, obj);
      putModuleEntry(env, globalPKCS11ImplementationReference, moduleData);
  
<span class="udiff-line-removed">-     (*env)-&gt;ReleaseStringUTFChars(env, jPkcs11ModulePath, libraryNameStr);</span>
      TRACE0(&quot;FINISHED\n&quot;);
  
      if(ckAssertReturnValueOK(env, rv) != CK_ASSERT_OK) { return; }
  }
  
</pre>
<center><a href="../../../share/legal/pkcs11cryptotoken.md.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../../../jdk.crypto.ec/share/classes/sun/security/ec/ECDSAOperations.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>