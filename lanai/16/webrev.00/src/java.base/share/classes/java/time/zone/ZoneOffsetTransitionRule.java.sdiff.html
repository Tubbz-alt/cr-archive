<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/time/zone/ZoneOffsetTransitionRule.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../temporal/ValueRange.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ZoneRules.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/time/zone/ZoneOffsetTransitionRule.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2012, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
143      */
144     private final ZoneOffset offsetBefore;
145     /**
146      * The offset after the cutover.
147      */
148     private final ZoneOffset offsetAfter;
149 
150     /**
151      * Obtains an instance defining the yearly rule to create transitions between two offsets.
152      * &lt;p&gt;
153      * Applications should normally obtain an instance from {@link ZoneRules}.
154      * This factory is only intended for use when creating {@link ZoneRules}.
155      *
156      * @param month  the month of the month-day of the first day of the cutover week, not null
157      * @param dayOfMonthIndicator  the day of the month-day of the cutover week, positive if the week is that
158      *  day or later, negative if the week is that day or earlier, counting from the last day of the month,
159      *  from -28 to 31 excluding 0
160      * @param dayOfWeek  the required day-of-week, null if the month-day should not be changed
161      * @param time  the cutover time in the &#39;before&#39; offset, not null
162      * @param timeEndOfDay  whether the time is midnight at the end of day
<span class="line-modified">163      * @param timeDefnition  how to interpret the cutover</span>
164      * @param standardOffset  the standard offset in force at the cutover, not null
165      * @param offsetBefore  the offset before the cutover, not null
166      * @param offsetAfter  the offset after the cutover, not null
167      * @return the rule, not null
168      * @throws IllegalArgumentException if the day of month indicator is invalid
169      * @throws IllegalArgumentException if the end of day flag is true when the time is not midnight
170      * @throws IllegalArgumentException if {@code time.getNano()} returns non-zero value
171      */
172     public static ZoneOffsetTransitionRule of(
173             Month month,
174             int dayOfMonthIndicator,
175             DayOfWeek dayOfWeek,
176             LocalTime time,
177             boolean timeEndOfDay,
<span class="line-modified">178             TimeDefinition timeDefnition,</span>
179             ZoneOffset standardOffset,
180             ZoneOffset offsetBefore,
181             ZoneOffset offsetAfter) {
182         Objects.requireNonNull(month, &quot;month&quot;);
183         Objects.requireNonNull(time, &quot;time&quot;);
<span class="line-modified">184         Objects.requireNonNull(timeDefnition, &quot;timeDefnition&quot;);</span>
185         Objects.requireNonNull(standardOffset, &quot;standardOffset&quot;);
186         Objects.requireNonNull(offsetBefore, &quot;offsetBefore&quot;);
187         Objects.requireNonNull(offsetAfter, &quot;offsetAfter&quot;);
188         if (dayOfMonthIndicator &lt; -28 || dayOfMonthIndicator &gt; 31 || dayOfMonthIndicator == 0) {
189             throw new IllegalArgumentException(&quot;Day of month indicator must be between -28 and 31 inclusive excluding zero&quot;);
190         }
191         if (timeEndOfDay &amp;&amp; time.equals(LocalTime.MIDNIGHT) == false) {
192             throw new IllegalArgumentException(&quot;Time must be midnight when end of day flag is true&quot;);
193         }
194         if (time.getNano() != 0) {
195             throw new IllegalArgumentException(&quot;Time&#39;s nano-of-second must be zero&quot;);
196         }
<span class="line-modified">197         return new ZoneOffsetTransitionRule(month, dayOfMonthIndicator, dayOfWeek, time, timeEndOfDay, timeDefnition, standardOffset, offsetBefore, offsetAfter);</span>
198     }
199 
200     /**
201      * Creates an instance defining the yearly rule to create transitions between two offsets.
202      *
203      * @param month  the month of the month-day of the first day of the cutover week, not null
204      * @param dayOfMonthIndicator  the day of the month-day of the cutover week, positive if the week is that
205      *  day or later, negative if the week is that day or earlier, counting from the last day of the month,
206      *  from -28 to 31 excluding 0
207      * @param dayOfWeek  the required day-of-week, null if the month-day should not be changed
208      * @param time  the cutover time in the &#39;before&#39; offset, not null
209      * @param timeEndOfDay  whether the time is midnight at the end of day
<span class="line-modified">210      * @param timeDefnition  how to interpret the cutover</span>
211      * @param standardOffset  the standard offset in force at the cutover, not null
212      * @param offsetBefore  the offset before the cutover, not null
213      * @param offsetAfter  the offset after the cutover, not null
214      * @throws IllegalArgumentException if the day of month indicator is invalid
215      * @throws IllegalArgumentException if the end of day flag is true when the time is not midnight
216      */
217     ZoneOffsetTransitionRule(
218             Month month,
219             int dayOfMonthIndicator,
220             DayOfWeek dayOfWeek,
221             LocalTime time,
222             boolean timeEndOfDay,
<span class="line-modified">223             TimeDefinition timeDefnition,</span>
224             ZoneOffset standardOffset,
225             ZoneOffset offsetBefore,
226             ZoneOffset offsetAfter) {
227         assert time.getNano() == 0;
228         this.month = month;
229         this.dom = (byte) dayOfMonthIndicator;
230         this.dow = dayOfWeek;
231         this.time = time;
232         this.timeEndOfDay = timeEndOfDay;
<span class="line-modified">233         this.timeDefinition = timeDefnition;</span>
234         this.standardOffset = standardOffset;
235         this.offsetBefore = offsetBefore;
236         this.offsetAfter = offsetAfter;
237     }
238 
239     //-----------------------------------------------------------------------
240     /**
241      * Defend against malicious streams.
242      *
243      * @param s the stream to read
244      * @throws InvalidObjectException always
245      */
246     private void readObject(ObjectInputStream s) throws InvalidObjectException {
247         throw new InvalidObjectException(&quot;Deserialization via serialization delegate&quot;);
248     }
249 
250     /**
251      * Writes the object using a
252      * &lt;a href=&quot;{@docRoot}/serialized-form.html#java.time.zone.Ser&quot;&gt;dedicated serialized form&lt;/a&gt;.
253      * @serialData
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2012, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
143      */
144     private final ZoneOffset offsetBefore;
145     /**
146      * The offset after the cutover.
147      */
148     private final ZoneOffset offsetAfter;
149 
150     /**
151      * Obtains an instance defining the yearly rule to create transitions between two offsets.
152      * &lt;p&gt;
153      * Applications should normally obtain an instance from {@link ZoneRules}.
154      * This factory is only intended for use when creating {@link ZoneRules}.
155      *
156      * @param month  the month of the month-day of the first day of the cutover week, not null
157      * @param dayOfMonthIndicator  the day of the month-day of the cutover week, positive if the week is that
158      *  day or later, negative if the week is that day or earlier, counting from the last day of the month,
159      *  from -28 to 31 excluding 0
160      * @param dayOfWeek  the required day-of-week, null if the month-day should not be changed
161      * @param time  the cutover time in the &#39;before&#39; offset, not null
162      * @param timeEndOfDay  whether the time is midnight at the end of day
<span class="line-modified">163      * @param timeDefinition  how to interpret the cutover</span>
164      * @param standardOffset  the standard offset in force at the cutover, not null
165      * @param offsetBefore  the offset before the cutover, not null
166      * @param offsetAfter  the offset after the cutover, not null
167      * @return the rule, not null
168      * @throws IllegalArgumentException if the day of month indicator is invalid
169      * @throws IllegalArgumentException if the end of day flag is true when the time is not midnight
170      * @throws IllegalArgumentException if {@code time.getNano()} returns non-zero value
171      */
172     public static ZoneOffsetTransitionRule of(
173             Month month,
174             int dayOfMonthIndicator,
175             DayOfWeek dayOfWeek,
176             LocalTime time,
177             boolean timeEndOfDay,
<span class="line-modified">178             TimeDefinition timeDefinition,</span>
179             ZoneOffset standardOffset,
180             ZoneOffset offsetBefore,
181             ZoneOffset offsetAfter) {
182         Objects.requireNonNull(month, &quot;month&quot;);
183         Objects.requireNonNull(time, &quot;time&quot;);
<span class="line-modified">184         Objects.requireNonNull(timeDefinition, &quot;timeDefinition&quot;);</span>
185         Objects.requireNonNull(standardOffset, &quot;standardOffset&quot;);
186         Objects.requireNonNull(offsetBefore, &quot;offsetBefore&quot;);
187         Objects.requireNonNull(offsetAfter, &quot;offsetAfter&quot;);
188         if (dayOfMonthIndicator &lt; -28 || dayOfMonthIndicator &gt; 31 || dayOfMonthIndicator == 0) {
189             throw new IllegalArgumentException(&quot;Day of month indicator must be between -28 and 31 inclusive excluding zero&quot;);
190         }
191         if (timeEndOfDay &amp;&amp; time.equals(LocalTime.MIDNIGHT) == false) {
192             throw new IllegalArgumentException(&quot;Time must be midnight when end of day flag is true&quot;);
193         }
194         if (time.getNano() != 0) {
195             throw new IllegalArgumentException(&quot;Time&#39;s nano-of-second must be zero&quot;);
196         }
<span class="line-modified">197         return new ZoneOffsetTransitionRule(month, dayOfMonthIndicator, dayOfWeek, time, timeEndOfDay, timeDefinition, standardOffset, offsetBefore, offsetAfter);</span>
198     }
199 
200     /**
201      * Creates an instance defining the yearly rule to create transitions between two offsets.
202      *
203      * @param month  the month of the month-day of the first day of the cutover week, not null
204      * @param dayOfMonthIndicator  the day of the month-day of the cutover week, positive if the week is that
205      *  day or later, negative if the week is that day or earlier, counting from the last day of the month,
206      *  from -28 to 31 excluding 0
207      * @param dayOfWeek  the required day-of-week, null if the month-day should not be changed
208      * @param time  the cutover time in the &#39;before&#39; offset, not null
209      * @param timeEndOfDay  whether the time is midnight at the end of day
<span class="line-modified">210      * @param timeDefinition  how to interpret the cutover</span>
211      * @param standardOffset  the standard offset in force at the cutover, not null
212      * @param offsetBefore  the offset before the cutover, not null
213      * @param offsetAfter  the offset after the cutover, not null
214      * @throws IllegalArgumentException if the day of month indicator is invalid
215      * @throws IllegalArgumentException if the end of day flag is true when the time is not midnight
216      */
217     ZoneOffsetTransitionRule(
218             Month month,
219             int dayOfMonthIndicator,
220             DayOfWeek dayOfWeek,
221             LocalTime time,
222             boolean timeEndOfDay,
<span class="line-modified">223             TimeDefinition timeDefinition,</span>
224             ZoneOffset standardOffset,
225             ZoneOffset offsetBefore,
226             ZoneOffset offsetAfter) {
227         assert time.getNano() == 0;
228         this.month = month;
229         this.dom = (byte) dayOfMonthIndicator;
230         this.dow = dayOfWeek;
231         this.time = time;
232         this.timeEndOfDay = timeEndOfDay;
<span class="line-modified">233         this.timeDefinition = timeDefinition;</span>
234         this.standardOffset = standardOffset;
235         this.offsetBefore = offsetBefore;
236         this.offsetAfter = offsetAfter;
237     }
238 
239     //-----------------------------------------------------------------------
240     /**
241      * Defend against malicious streams.
242      *
243      * @param s the stream to read
244      * @throws InvalidObjectException always
245      */
246     private void readObject(ObjectInputStream s) throws InvalidObjectException {
247         throw new InvalidObjectException(&quot;Deserialization via serialization delegate&quot;);
248     }
249 
250     /**
251      * Writes the object using a
252      * &lt;a href=&quot;{@docRoot}/serialized-form.html#java.time.zone.Ser&quot;&gt;dedicated serialized form&lt;/a&gt;.
253      * @serialData
</pre>
</td>
</tr>
</table>
<center><a href="../temporal/ValueRange.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ZoneRules.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>