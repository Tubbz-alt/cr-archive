<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/jdk/sun/nio/cs/TestIBMBugs.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../../management/jmxremote/bootstrap/CustomLauncherTest.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../security/lib/cacerts/VerifyCACerts.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/sun/nio/cs/TestIBMBugs.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2008, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2008, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 20,11 ***</span>
   * or visit www.oracle.com if you need additional information or have any
   * questions.
   */
  
  /* @test
<span class="line-modified">!  * @bug 6371437 6371422 6371416 6371619 5058184 6371431 6639450 6569191 6577466 8212794 8220281</span>
   * @summary Check if the problems reported in above bugs have been fixed
   * @modules jdk.charsets
   */
  
  import java.io.*;
<span class="line-new-header">--- 20,12 ---</span>
   * or visit www.oracle.com if you need additional information or have any
   * questions.
   */
  
  /* @test
<span class="line-modified">!  * @bug 6371437 6371422 6371416 6371619 5058184 6371431 6639450 6569191 6577466</span>
<span class="line-added">+  *      8212794 8220281 8235834</span>
   * @summary Check if the problems reported in above bugs have been fixed
   * @modules jdk.charsets
   */
  
  import java.io.*;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 321,10 ***</span>
<span class="line-new-header">--- 322,68 ---</span>
                  }
              }
          }
      }
  
<span class="line-added">+     // Following test data is for 8235834</span>
<span class="line-added">+     private static final byte[] byteIBM943c2b = new byte[] {</span>
<span class="line-added">+         (byte)0x81, (byte)0x5C, (byte)0x81, (byte)0x60,</span>
<span class="line-added">+         (byte)0x81, (byte)0x61, (byte)0x81, (byte)0x7C,</span>
<span class="line-added">+         (byte)0x88, (byte)0xA0, (byte)0x89, (byte)0x8B,</span>
<span class="line-added">+         (byte)0x89, (byte)0xA8, (byte)0x8A, (byte)0x9A,</span>
<span class="line-added">+         (byte)0x8B, (byte)0xA0, (byte)0x8B, (byte)0xEB,</span>
<span class="line-added">+         (byte)0x8C, (byte)0x71, (byte)0x8C, (byte)0x74,</span>
<span class="line-added">+         (byte)0x8C, (byte)0xB2, (byte)0x8D, (byte)0x8D,</span>
<span class="line-added">+         (byte)0x8D, (byte)0xF2, (byte)0x8E, (byte)0xC6,</span>
<span class="line-added">+         (byte)0x8F, (byte)0x4A, (byte)0x8F, (byte)0xD3,</span>
<span class="line-added">+         (byte)0x8F, (byte)0xDD, (byte)0x90, (byte)0xE4,</span>
<span class="line-added">+         (byte)0x91, (byte)0x7E, (byte)0x91, (byte)0x89,</span>
<span class="line-added">+         (byte)0x91, (byte)0xCB, (byte)0x92, (byte)0x5C,</span>
<span class="line-added">+         (byte)0x92, (byte)0xCD, (byte)0x93, (byte)0x55,</span>
<span class="line-added">+         (byte)0x93, (byte)0x5E, (byte)0x93, (byte)0x98,</span>
<span class="line-added">+         (byte)0x93, (byte)0xC0, (byte)0x94, (byte)0x58,</span>
<span class="line-added">+         (byte)0x94, (byte)0x8D, (byte)0x94, (byte)0xAC,</span>
<span class="line-added">+         (byte)0x94, (byte)0xAE, (byte)0x96, (byte)0x6A,</span>
<span class="line-added">+         (byte)0x96, (byte)0xCB, (byte)0x97, (byte)0x89,</span>
<span class="line-added">+         (byte)0x98, (byte)0x58, (byte)0x9B, (byte)0xA0,</span>
<span class="line-added">+         (byte)0x9D, (byte)0xB7, (byte)0x9E, (byte)0x94,</span>
<span class="line-added">+         (byte)0xE3, (byte)0x79, (byte)0xE4, (byte)0x45,</span>
<span class="line-added">+         (byte)0xE8, (byte)0xF6, (byte)0xFA, (byte)0x55,</span>
<span class="line-added">+         (byte)0xFA, (byte)0x59,</span>
<span class="line-added">+     };</span>
<span class="line-added">+ </span>
<span class="line-added">+     private static final String strIBM943c2b1 =</span>
<span class="line-added">+         &quot;\u2015\uFF5E\u2225\uFF0D\u555E\u7130\u9DD7\u5699&quot; +</span>
<span class="line-added">+         &quot;\u4FE0\u8EC0\u7E6B\u8346\u9E7C\u9EB4\u6805\u5C62&quot; +</span>
<span class="line-added">+         &quot;\u7E61\u8523\u91AC\u87EC\u6414\u7626\u9A52\u7C1E&quot; +</span>
<span class="line-added">+         &quot;\u6451\u5861\u985A\u79B1\u7006\u56CA\u525D\u6F51&quot; +</span>
<span class="line-added">+         &quot;\u91B1\u9830\u9EB5\u840A\u881F\u5C5B\u6522\u688E&quot; +</span>
<span class="line-added">+         &quot;\u7E48\u8141\u9839\uFFE4\uF86F&quot;;</span>
<span class="line-added">+ </span>
<span class="line-added">+     private static final String strIBM943c2b2 =</span>
<span class="line-added">+         &quot;\u2014\u301C\u2016\u2212\u5516\u7114\u9D0E\u565B&quot; +</span>
<span class="line-added">+         &quot;\u4FA0\u8EAF\u7E4B\u834A\u9E78\u9EB9\u67F5\u5C61&quot; +</span>
<span class="line-added">+         &quot;\u7E4D\u848B\u91A4\u8749\u63BB\u75E9\u9A28\u7BAA&quot; +</span>
<span class="line-added">+         &quot;\u63B4\u586B\u985B\u7977\u6D9C\u56A2\u5265\u6E8C&quot; +</span>
<span class="line-added">+         &quot;\u9197\u982C\u9EBA\u83B1\u874B\u5C4F\u6505\u688D&quot; +</span>
<span class="line-added">+         &quot;\u7E66\u80FC\u983D\u00A6\u2116&quot;;</span>
<span class="line-added">+ </span>
<span class="line-added">+     private static void bug8235834 () throws Exception {</span>
<span class="line-added">+         // 8235834 affects IBM-943 and IBM-943C encoder.</span>
<span class="line-added">+         // The decoded results of the corresponding characters of IBM-943</span>
<span class="line-added">+         // and IBM-943C is the same.</span>
<span class="line-added">+         for (String csName : new String[] {&quot;x-IBM943&quot;, &quot;x-IBM943C&quot;}) {</span>
<span class="line-added">+             Charset cs = Charset.forName(csName);</span>
<span class="line-added">+             if (!Arrays.equals(byteIBM943c2b, strIBM943c2b1.getBytes(cs))) {</span>
<span class="line-added">+                 throw new Exception(csName+&quot; failed to encode&quot;);</span>
<span class="line-added">+             }</span>
<span class="line-added">+             if (!strIBM943c2b2.equals(new String(byteIBM943c2b, cs))) {</span>
<span class="line-added">+                 throw new Exception(csName+&quot; failed to round-trip conversion&quot;);</span>
<span class="line-added">+             }</span>
<span class="line-added">+         }</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      public static void main (String[] args) throws Exception {
          bug6577466();
          // need to be tested before any other IBM949C test case
          bug6639450();
          bug6371437();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 335,7 ***</span>
<span class="line-new-header">--- 394,8 ---</span>
          bug6569191();
          bug8202329();
          bug8212794();
          bug8213618();
          bug8220281();
<span class="line-added">+         bug8235834();</span>
      }
  }
</pre>
<center><a href="../../management/jmxremote/bootstrap/CustomLauncherTest.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../security/lib/cacerts/VerifyCACerts.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>