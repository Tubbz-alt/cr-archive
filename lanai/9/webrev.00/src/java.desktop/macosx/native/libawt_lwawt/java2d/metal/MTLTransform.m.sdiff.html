<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLTransform.m</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="MTLTransform.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLTransform.m</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
39 }
40 
41 - (void)setTransformM00:(jdouble) m00 M10:(jdouble) m10
42                     M01:(jdouble) m01 M11:(jdouble) m11
43                     M02:(jdouble) m02 M12:(jdouble) m12 {
44     memset(&amp;(_transform4x4), 0, sizeof(_transform4x4));
45     _transform4x4.columns[0][0] = m00;
46     _transform4x4.columns[0][1] = m10;
47     _transform4x4.columns[1][0] = m01;
48     _transform4x4.columns[1][1] = m11;
49     _transform4x4.columns[3][0] = m02;
50     _transform4x4.columns[3][1] = m12;
51     _transform4x4.columns[3][3] = 1.0;
52     _useTransform = JNI_TRUE;
53 }
54 
55 - (void)resetTransform {
56     _useTransform = JNI_FALSE;
57 }
58 
<span class="line-modified">59 - (void)setVertexMatrix:(id &lt;MTLRenderCommandEncoder&gt;)encoder destWidth:(jint)dw destHeight:(jint)dh {</span>


60     // update matrix for vertex shader
61     _normalize4x4.columns[0][0] = 2/(double)dw;
62     _normalize4x4.columns[1][1] = -2/(double)dh;
63 
64     if (_useTransform) {
65         simd_float4x4 vertexMatrix = simd_mul(_normalize4x4, _transform4x4);
66         [encoder setVertexBytes:&amp;(vertexMatrix) length:sizeof(vertexMatrix) atIndex:MatrixBuffer];
67     } else {
68         [encoder setVertexBytes:&amp;(_normalize4x4) length:sizeof(_normalize4x4) atIndex:MatrixBuffer];
69     }
70 }
71 
72 @end
73 
74 
</pre>
</td>
<td>
<hr />
<pre>
39 }
40 
41 - (void)setTransformM00:(jdouble) m00 M10:(jdouble) m10
42                     M01:(jdouble) m01 M11:(jdouble) m11
43                     M02:(jdouble) m02 M12:(jdouble) m12 {
44     memset(&amp;(_transform4x4), 0, sizeof(_transform4x4));
45     _transform4x4.columns[0][0] = m00;
46     _transform4x4.columns[0][1] = m10;
47     _transform4x4.columns[1][0] = m01;
48     _transform4x4.columns[1][1] = m11;
49     _transform4x4.columns[3][0] = m02;
50     _transform4x4.columns[3][1] = m12;
51     _transform4x4.columns[3][3] = 1.0;
52     _useTransform = JNI_TRUE;
53 }
54 
55 - (void)resetTransform {
56     _useTransform = JNI_FALSE;
57 }
58 
<span class="line-modified">59 - (void)setVertexMatrix:(id&lt;MTLRenderCommandEncoder&gt;)encoder</span>
<span class="line-added">60               destWidth:(NSUInteger)dw</span>
<span class="line-added">61              destHeight:(NSUInteger)dh {</span>
62     // update matrix for vertex shader
63     _normalize4x4.columns[0][0] = 2/(double)dw;
64     _normalize4x4.columns[1][1] = -2/(double)dh;
65 
66     if (_useTransform) {
67         simd_float4x4 vertexMatrix = simd_mul(_normalize4x4, _transform4x4);
68         [encoder setVertexBytes:&amp;(vertexMatrix) length:sizeof(vertexMatrix) atIndex:MatrixBuffer];
69     } else {
70         [encoder setVertexBytes:&amp;(_normalize4x4) length:sizeof(_normalize4x4) atIndex:MatrixBuffer];
71     }
72 }
73 
74 @end
75 
76 
</pre>
</td>
</tr>
</table>
<center><a href="MTLTransform.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>