<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLVertexCache.m</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLVertexCache.m</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -91,14 +91,13 @@</span>
      if (vertexCacheIndex &gt; 0) {
          [encoder setVertexBytes: vertexCache length:vertexCacheIndex * sizeof(J2DVertex)
                                                  atIndex:MeshVertexBuffer];
  
          [encoder setFragmentTexture:maskCacheTex.texture atIndex: 0];
<span class="udiff-line-modified-removed">-         for (int i = 0; i &lt; maskCacheIndex; i++) {</span>
<span class="udiff-line-modified-removed">-             J2dTraceLn1(J2D_TRACE_INFO, &quot;MTLVertexCache_FlushVertexCache : draw texture at index %d&quot;, i);</span>
<span class="udiff-line-modified-removed">-             [encoder drawPrimitives:MTLPrimitiveTypeTriangle vertexStart:i*6 vertexCount:6];</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-modified-added">+         J2dTraceLn1(J2D_TRACE_INFO,</span>
<span class="udiff-line-modified-added">+             &quot;MTLVertexCache_FlushVertexCache : encode %d characters&quot;, (vertexCacheIndex / 6));</span>
<span class="udiff-line-modified-added">+         [encoder drawPrimitives:MTLPrimitiveTypeTriangle vertexStart:0 vertexCount:vertexCacheIndex];</span>
      }
      vertexCacheIndex = 0;
      maskCacheIndex = 0;
  
      if (maskCacheTex != nil) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -116,14 +115,13 @@</span>
      if (vertexCacheIndex &gt; 0) {
          [encoder setVertexBytes: vertexCache length:vertexCacheIndex * sizeof(J2DVertex)
                                                  atIndex:MeshVertexBuffer];
          id&lt;MTLTexture&gt; glyphCacheTex = MTLTR_GetGlyphCacheTexture();
          [encoder setFragmentTexture:glyphCacheTex atIndex: 0];
<span class="udiff-line-modified-removed">-         for (int i = 0; i &lt; vertexCacheIndex; i = i + 6) {</span>
<span class="udiff-line-modified-removed">-             J2dTraceLn1(J2D_TRACE_INFO, &quot;MTLVertexCache_FlushGlyphVertexCache : draw texture at index %d&quot;, (int)(i + 1)/6);</span>
<span class="udiff-line-modified-removed">-             [encoder drawPrimitives:MTLPrimitiveTypeTriangle vertexStart:i vertexCount:6];</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-modified-added">+         J2dTraceLn1(J2D_TRACE_INFO,</span>
<span class="udiff-line-modified-added">+             &quot;MTLVertexCache_FlushGlyphVertexCache : encode %d characters&quot;, (vertexCacheIndex / 6));</span>
<span class="udiff-line-modified-added">+         [encoder drawPrimitives:MTLPrimitiveTypeTriangle vertexStart:0 vertexCount:vertexCacheIndex];</span>
      }
      vertexCacheIndex = 0;
  }
  
  void MTLVertexCache_FreeVertexCache()
</pre>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>