<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLBlitLoops.m</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="MTLComposite.m.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLBlitLoops.m</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
470         J2dTraceImpl(J2D_TRACE_VERBOSE, JNI_TRUE,&quot; [via blitEncoder]&quot;);
471 #endif //TRACE_ISOBLIT
472 
473         id &lt;MTLBlitCommandEncoder&gt; blitEncoder = [mtlc.encoderManager createBlitEncoder];
474         [blitEncoder copyFromTexture:srcTex
475                          sourceSlice:0
476                          sourceLevel:0
477                         sourceOrigin:MTLOriginMake(sx1, sy1, 0)
478                           sourceSize:MTLSizeMake(sx2 - sx1, sy2 - sy1, 1)
479                            toTexture:dstTex
480                     destinationSlice:0
481                     destinationLevel:0
482                    destinationOrigin:MTLOriginMake(dx1, dy1, 0)];
483         [blitEncoder endEncoding];
484         return;
485     }
486 
487 #ifdef TRACE_ISOBLIT
488     J2dTraceImpl(J2D_TRACE_VERBOSE, JNI_TRUE,&quot; [via sampling]&quot;);
489 #endif //TRACE_ISOBLIT
<span class="line-modified">490     drawTex2Tex(mtlc, srcTex, dstTex, srcOps-&gt;isOpaque, dstOps-&gt;isOpaque, hint, sx1, sy1, sx2, sy2, dx1, dy1, dx2, dy2);</span>


491 }
492 
493 /**
494  * General blit method for copying a system memory (&quot;Sw&quot;) surface to a native MTL surface.
495  * Parameter texture == true only in SwToTextureBlit (straight copy from sw to texture), dest coordinates will always be integers.
496  * Parameter xform == true only when AffineTransform is used (invoked only from TransformBlit, dest coordinates will always be integers).
497  */
498 void
499 MTLBlitLoops_Blit(JNIEnv *env,
500                   MTLContext *mtlc, jlong pSrcOps, jlong pDstOps,
501                   jboolean xform, jint hint,
502                   jint srctype, jboolean texture,
503                   jint sx1, jint sy1, jint sx2, jint sy2,
504                   jdouble dx1, jdouble dy1, jdouble dx2, jdouble dy2)
505 {
506     SurfaceDataOps *srcOps = (SurfaceDataOps *)jlong_to_ptr(pSrcOps);
507     BMTLSDOps *dstOps = (BMTLSDOps *)jlong_to_ptr(pDstOps);
508 
509     RETURN_IF_NULL(mtlc);
510     RETURN_IF_NULL(srcOps);
</pre>
</td>
<td>
<hr />
<pre>
470         J2dTraceImpl(J2D_TRACE_VERBOSE, JNI_TRUE,&quot; [via blitEncoder]&quot;);
471 #endif //TRACE_ISOBLIT
472 
473         id &lt;MTLBlitCommandEncoder&gt; blitEncoder = [mtlc.encoderManager createBlitEncoder];
474         [blitEncoder copyFromTexture:srcTex
475                          sourceSlice:0
476                          sourceLevel:0
477                         sourceOrigin:MTLOriginMake(sx1, sy1, 0)
478                           sourceSize:MTLSizeMake(sx2 - sx1, sy2 - sy1, 1)
479                            toTexture:dstTex
480                     destinationSlice:0
481                     destinationLevel:0
482                    destinationOrigin:MTLOriginMake(dx1, dy1, 0)];
483         [blitEncoder endEncoding];
484         return;
485     }
486 
487 #ifdef TRACE_ISOBLIT
488     J2dTraceImpl(J2D_TRACE_VERBOSE, JNI_TRUE,&quot; [via sampling]&quot;);
489 #endif //TRACE_ISOBLIT
<span class="line-modified">490     drawTex2Tex(mtlc, srcTex, dstTex,</span>
<span class="line-added">491             [mtlc isBlendingDisabled:srcOps-&gt;isOpaque],</span>
<span class="line-added">492             dstOps-&gt;isOpaque, hint, sx1, sy1, sx2, sy2, dx1, dy1, dx2, dy2);</span>
493 }
494 
495 /**
496  * General blit method for copying a system memory (&quot;Sw&quot;) surface to a native MTL surface.
497  * Parameter texture == true only in SwToTextureBlit (straight copy from sw to texture), dest coordinates will always be integers.
498  * Parameter xform == true only when AffineTransform is used (invoked only from TransformBlit, dest coordinates will always be integers).
499  */
500 void
501 MTLBlitLoops_Blit(JNIEnv *env,
502                   MTLContext *mtlc, jlong pSrcOps, jlong pDstOps,
503                   jboolean xform, jint hint,
504                   jint srctype, jboolean texture,
505                   jint sx1, jint sy1, jint sx2, jint sy2,
506                   jdouble dx1, jdouble dy1, jdouble dx2, jdouble dy2)
507 {
508     SurfaceDataOps *srcOps = (SurfaceDataOps *)jlong_to_ptr(pSrcOps);
509     BMTLSDOps *dstOps = (BMTLSDOps *)jlong_to_ptr(pDstOps);
510 
511     RETURN_IF_NULL(mtlc);
512     RETURN_IF_NULL(srcOps);
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="MTLComposite.m.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>