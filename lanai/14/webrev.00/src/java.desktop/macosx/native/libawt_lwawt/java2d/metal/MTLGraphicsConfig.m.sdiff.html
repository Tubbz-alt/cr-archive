<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLGraphicsConfig.m</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLGraphicsConfig.m</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
201         free(mtlc);
202         [argValue addObject: [NSNumber numberWithLong: 0L]];
203         return;
204     }
205     memset(mtlinfo, 0, sizeof(MTLGraphicsConfigInfo));
206     mtlinfo-&gt;screen = displayID;
207     mtlinfo-&gt;context = mtlc;
208 
209     [argValue addObject: [NSNumber numberWithLong:ptr_to_jlong(mtlinfo)]];
210     [pool drain];
211 }
212 @end //GraphicsConfigUtil
213 
214 
215 JNIEXPORT jint JNICALL
216 Java_sun_java2d_metal_MTLGraphicsConfig_nativeGetMaxTextureSize
217     (JNIEnv *env, jclass mtlgc)
218 {
219     J2dTraceLn(J2D_TRACE_INFO, &quot;MTLGraphicsConfig_nativeGetMaxTextureSize&quot;);
220 
<span class="line-modified">221     __block int max = 0;</span>
<span class="line-modified">222 </span>
<span class="line-modified">223 //    [ThreadUtilities performOnMainThreadWaiting:YES block:^(){</span>
<span class="line-modified">224 //    }];</span>

225 
226     return (jint)max;
227 }
</pre>
</td>
<td>
<hr />
<pre>
201         free(mtlc);
202         [argValue addObject: [NSNumber numberWithLong: 0L]];
203         return;
204     }
205     memset(mtlinfo, 0, sizeof(MTLGraphicsConfigInfo));
206     mtlinfo-&gt;screen = displayID;
207     mtlinfo-&gt;context = mtlc;
208 
209     [argValue addObject: [NSNumber numberWithLong:ptr_to_jlong(mtlinfo)]];
210     [pool drain];
211 }
212 @end //GraphicsConfigUtil
213 
214 
215 JNIEXPORT jint JNICALL
216 Java_sun_java2d_metal_MTLGraphicsConfig_nativeGetMaxTextureSize
217     (JNIEnv *env, jclass mtlgc)
218 {
219     J2dTraceLn(J2D_TRACE_INFO, &quot;MTLGraphicsConfig_nativeGetMaxTextureSize&quot;);
220 
<span class="line-modified">221     // From &quot;Metal Feature Set Tables&quot;</span>
<span class="line-modified">222     // There are 2 GPU families for mac - MTLGPUFamilyMac1 and MTLGPUFamilyMac2</span>
<span class="line-modified">223     // Both of them support &quot;Maximum 2D texture width and height&quot; of 16384 pixels</span>
<span class="line-modified">224     // Note : there is no API to get this value, hence hardcoding by reading from the table</span>
<span class="line-added">225     __block int max = 16384;</span>
226 
227     return (jint)max;
228 }
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>