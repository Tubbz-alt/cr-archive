<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLPaints.m</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../awt/shaders.metal.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/java.desktop/macosx/native/libawt_lwawt/java2d/metal/MTLPaints.m</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
301     id&lt;MTLRenderPipelineState&gt; pipelineState = nil;
302     if (isTexture) {
303 
304       if (_paintState == sun_java2d_SunGraphics2D_PAINT_TEXTURE) {
305         pipelineState = [pipelineStateStorage getPipelineState:templateTexturePipelineDesc
306                                                 vertexShaderId:@&quot;vert_txt_tp&quot;
307                                               fragmentShaderId:@&quot;frag_txt_tp&quot;
308                                                  compositeRule:[composite getRule]
309                                                           isAA:JNI_FALSE
310                                                       srcFlags:srcFlags
311                                                       dstFlags:dstFlags
312                                                  stencilNeeded:stencil];
313         [encoder setVertexBytes:&amp;_anchor length:sizeof(_anchor) atIndex:FrameUniformBuffer];
314         [encoder setFragmentTexture:_paintTexture atIndex: 1];
315 
316         struct TxtFrameUniforms uf = {RGBA_TO_V4(0), 0, srcFlags-&gt;isOpaque,
317                                       dstFlags-&gt;isOpaque};
318         [encoder setFragmentBytes:&amp;uf length:sizeof(uf)
319                           atIndex:FrameUniformBuffer];
320 















321       } else {
322         if (isAA) {
323           pipelineState = [pipelineStateStorage
324               getPipelineState:templateAATexturePipelineDesc
325                 vertexShaderId:@&quot;vert_txt&quot;
326               fragmentShaderId:@&quot;aa_frag_txt&quot;
327                  compositeRule:[composite getRule]
328                           isAA:JNI_FALSE
329                       srcFlags:srcFlags
330                       dstFlags:dstFlags
331                  stencilNeeded:stencil];
332 
333         } else {
334           pipelineState =
335               [pipelineStateStorage getPipelineState:templateTexturePipelineDesc
336                                       vertexShaderId:@&quot;vert_txt&quot;
337                                     fragmentShaderId:@&quot;frag_txt&quot;
338                                        compositeRule:[composite getRule]
339                                                 isAA:JNI_FALSE
340                                             srcFlags:srcFlags
</pre>
</td>
<td>
<hr />
<pre>
301     id&lt;MTLRenderPipelineState&gt; pipelineState = nil;
302     if (isTexture) {
303 
304       if (_paintState == sun_java2d_SunGraphics2D_PAINT_TEXTURE) {
305         pipelineState = [pipelineStateStorage getPipelineState:templateTexturePipelineDesc
306                                                 vertexShaderId:@&quot;vert_txt_tp&quot;
307                                               fragmentShaderId:@&quot;frag_txt_tp&quot;
308                                                  compositeRule:[composite getRule]
309                                                           isAA:JNI_FALSE
310                                                       srcFlags:srcFlags
311                                                       dstFlags:dstFlags
312                                                  stencilNeeded:stencil];
313         [encoder setVertexBytes:&amp;_anchor length:sizeof(_anchor) atIndex:FrameUniformBuffer];
314         [encoder setFragmentTexture:_paintTexture atIndex: 1];
315 
316         struct TxtFrameUniforms uf = {RGBA_TO_V4(0), 0, srcFlags-&gt;isOpaque,
317                                       dstFlags-&gt;isOpaque};
318         [encoder setFragmentBytes:&amp;uf length:sizeof(uf)
319                           atIndex:FrameUniformBuffer];
320 
<span class="line-added">321       } else if (_paintState == sun_java2d_SunGraphics2D_PAINT_GRADIENT) {</span>
<span class="line-added">322         pipelineState = [pipelineStateStorage getPipelineState:templateTexturePipelineDesc</span>
<span class="line-added">323                                                 vertexShaderId:@&quot;vert_txt_grad&quot;</span>
<span class="line-added">324                                               fragmentShaderId:@&quot;frag_txt_grad&quot;</span>
<span class="line-added">325                                                  compositeRule:[composite getRule]</span>
<span class="line-added">326                                                           isAA:JNI_FALSE</span>
<span class="line-added">327                                                       srcFlags:srcFlags</span>
<span class="line-added">328                                                       dstFlags:dstFlags</span>
<span class="line-added">329                                                  stencilNeeded:stencil];</span>
<span class="line-added">330         struct GradFrameUniforms uf = {</span>
<span class="line-added">331             {_p0, _p1, _p3},</span>
<span class="line-added">332             RGBA_TO_V4(_pixel1),</span>
<span class="line-added">333             RGBA_TO_V4(_pixel2)};</span>
<span class="line-added">334         [encoder setFragmentBytes: &amp;uf length:sizeof(uf) atIndex:0];</span>
<span class="line-added">335 </span>
336       } else {
337         if (isAA) {
338           pipelineState = [pipelineStateStorage
339               getPipelineState:templateAATexturePipelineDesc
340                 vertexShaderId:@&quot;vert_txt&quot;
341               fragmentShaderId:@&quot;aa_frag_txt&quot;
342                  compositeRule:[composite getRule]
343                           isAA:JNI_FALSE
344                       srcFlags:srcFlags
345                       dstFlags:dstFlags
346                  stencilNeeded:stencil];
347 
348         } else {
349           pipelineState =
350               [pipelineStateStorage getPipelineState:templateTexturePipelineDesc
351                                       vertexShaderId:@&quot;vert_txt&quot;
352                                     fragmentShaderId:@&quot;frag_txt&quot;
353                                        compositeRule:[composite getRule]
354                                                 isAA:JNI_FALSE
355                                             srcFlags:srcFlags
</pre>
</td>
</tr>
</table>
<center><a href="../../awt/shaders.metal.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>