<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.lir.amd64/src/org/graalvm/compiler/lir/amd64/AMD64MathPowOp.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AMD64MathLogOp.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="AMD64MathSinOp.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.lir.amd64/src/org/graalvm/compiler/lir/amd64/AMD64MathPowOp.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2018, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * Copyright (c) 2016, Intel Corporation. All rights reserved.
   * Intel Math Library (LIBM) Source Code
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2018, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * Copyright (c) 2016, Intel Corporation. All rights reserved.
   * Intel Math Library (LIBM) Source Code
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
</pre>
<hr />
<pre>
<span class="line-old-header">*** 46,10 ***</span>
<span class="line-new-header">--- 46,11 ---</span>
  import static org.graalvm.compiler.lir.amd64.AMD64HotSpotHelper.recordExternalAddress;
  
  import org.graalvm.compiler.asm.Label;
  import org.graalvm.compiler.asm.amd64.AMD64Address;
  import org.graalvm.compiler.asm.amd64.AMD64Assembler;
<span class="line-added">+ import org.graalvm.compiler.asm.amd64.AMD64Assembler.ConditionFlag;</span>
  import org.graalvm.compiler.asm.amd64.AMD64MacroAssembler;
  import org.graalvm.compiler.lir.LIRInstructionClass;
  import org.graalvm.compiler.lir.asm.ArrayDataPointerConstant;
  import org.graalvm.compiler.lir.asm.CompilationResultBuilder;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 905,10 ***</span>
<span class="line-new-header">--- 906,11 ---</span>
          masm.movsd(new AMD64Address(rsp, 8), xmm0);
          masm.movsd(new AMD64Address(rsp, 16), xmm1);
  
          // Special case: pow(x, 2.0) =&gt; x * x
          masm.movdq(tmp1, xmm1);
<span class="line-added">+         // TODO (yz) adjust recorded address before jcc mitigation</span>
          masm.cmpq(tmp1, recordExternalAddress(crb, double2));
          masm.jccb(AMD64Assembler.ConditionFlag.NotEqual, block57);
          masm.mulsd(xmm0, xmm0);
          masm.jmp(block56);
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 943,12 ***</span>
          masm.psllq(xmm3, 12);
          masm.movl(tmp4, 8192);
          masm.movdq(xmm4, tmp4);
          masm.psrlq(xmm3, 12);
          masm.subl(rax, 16);
<span class="line-modified">!         masm.cmpl(rax, 32736);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.AboveEqual, block0);</span>
          masm.movl(tmp1, 0);
  
          masm.bind(block1);
          masm.mulss(xmm0, xmm7);
          masm.movl(rdx, -1);
<span class="line-new-header">--- 945,11 ---</span>
          masm.psllq(xmm3, 12);
          masm.movl(tmp4, 8192);
          masm.movdq(xmm4, tmp4);
          masm.psrlq(xmm3, 12);
          masm.subl(rax, 16);
<span class="line-modified">!         masm.cmplAndJcc(rax, 32736, ConditionFlag.AboveEqual, block0, false);</span>
          masm.movl(tmp1, 0);
  
          masm.bind(block1);
          masm.mulss(xmm0, xmm7);
          masm.movl(rdx, -1);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 956,12 ***</span>
          masm.shll(rdx);
          masm.shlq(rdx, 32);
          masm.movdq(xmm5, rdx);
          masm.por(xmm3, xmm1);
          masm.subl(rax, 16351);
<span class="line-modified">!         masm.cmpl(rax, 1);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.BelowEqual, block2);</span>
          masm.paddd(xmm0, xmm4);
          masm.pand(xmm5, xmm3);
          masm.movdl(rdx, xmm0);
          masm.psllq(xmm0, 29);
  
<span class="line-new-header">--- 957,11 ---</span>
          masm.shll(rdx);
          masm.shlq(rdx, 32);
          masm.movdq(xmm5, rdx);
          masm.por(xmm3, xmm1);
          masm.subl(rax, 16351);
<span class="line-modified">!         masm.cmplAndJcc(rax, 1, ConditionFlag.BelowEqual, block2, false);</span>
          masm.paddd(xmm0, xmm4);
          masm.pand(xmm5, xmm3);
          masm.movdl(rdx, xmm0);
          masm.psllq(xmm0, 29);
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1016,12 ***</span>
          masm.shll(rax, 4);
          masm.subl(rax, 15872);
          masm.andl(rcx, 32752);
          masm.addl(rax, rcx);
          masm.mulpd(xmm3, xmm6);
<span class="line-modified">!         masm.cmpl(rax, 624);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.AboveEqual, block5);</span>
          masm.xorpd(xmm6, xmm6);
          masm.movl(rdx, 17080);
          masm.pinsrw(xmm6, rdx, 3);
          masm.movdqu(xmm2, xmm1);
          masm.pand(xmm4, xmm1);
<span class="line-new-header">--- 1016,11 ---</span>
          masm.shll(rax, 4);
          masm.subl(rax, 15872);
          masm.andl(rcx, 32752);
          masm.addl(rax, rcx);
          masm.mulpd(xmm3, xmm6);
<span class="line-modified">!         masm.cmplAndJcc(rax, 624, ConditionFlag.AboveEqual, block5, false);</span>
          masm.xorpd(xmm6, xmm6);
          masm.movl(rdx, 17080);
          masm.pinsrw(xmm6, rdx, 3);
          masm.movdqu(xmm2, xmm1);
          masm.pand(xmm4, xmm1);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1078,24 ***</span>
  
          masm.bind(block0);
          masm.addl(rax, 16);
          masm.movl(rdx, 32752);
          masm.andl(rdx, rax);
<span class="line-modified">!         masm.cmpl(rdx, 32752);</span>
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block6);</span>
<span class="line-removed">-         masm.testl(rax, 32768);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block7);</span>
  
          masm.bind(block8);
          masm.movq(xmm0, new AMD64Address(rsp, 8));
          masm.movq(xmm3, new AMD64Address(rsp, 8));
          masm.movdl(rdx, xmm3);
          masm.psrlq(xmm3, 32);
          masm.movdl(rcx, xmm3);
          masm.orl(rdx, rcx);
<span class="line-modified">!         masm.cmpl(rdx, 0);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block9);</span>
          masm.xorpd(xmm3, xmm3);
          masm.movl(rax, 18416);
          masm.pinsrw(xmm3, rax, 3);
          masm.mulsd(xmm0, xmm3);
          masm.xorpd(xmm2, xmm2);
<span class="line-new-header">--- 1077,21 ---</span>
  
          masm.bind(block0);
          masm.addl(rax, 16);
          masm.movl(rdx, 32752);
          masm.andl(rdx, rax);
<span class="line-modified">!         masm.cmplAndJcc(rdx, 32752, ConditionFlag.Equal, block6, false);</span>
<span class="line-modified">!         masm.testlAndJcc(rax, 32768, ConditionFlag.NotEqual, block7, false);</span>
  
          masm.bind(block8);
          masm.movq(xmm0, new AMD64Address(rsp, 8));
          masm.movq(xmm3, new AMD64Address(rsp, 8));
          masm.movdl(rdx, xmm3);
          masm.psrlq(xmm3, 32);
          masm.movdl(rcx, xmm3);
          masm.orl(rdx, rcx);
<span class="line-modified">!         masm.cmplAndJcc(rdx, 0, ConditionFlag.Equal, block9, false);</span>
          masm.xorpd(xmm3, xmm3);
          masm.movl(rax, 18416);
          masm.pinsrw(xmm3, rax, 3);
          masm.mulsd(xmm0, xmm3);
          masm.xorpd(xmm2, xmm2);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1138,12 ***</span>
          masm.movq(xmm3, new AMD64Address(rsp, 8));
          masm.movdl(rdx, xmm3);
          masm.psrlq(xmm3, 32);
          masm.movdl(rcx, xmm3);
          masm.orl(rdx, rcx);
<span class="line-modified">!         masm.cmpl(rdx, 0);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block9);</span>
          masm.xorpd(xmm3, xmm3);
          masm.movl(rax, 18416);
          masm.pinsrw(xmm3, rax, 3);
          masm.mulsd(xmm0, xmm3);
          masm.xorpd(xmm2, xmm2);
<span class="line-new-header">--- 1134,11 ---</span>
          masm.movq(xmm3, new AMD64Address(rsp, 8));
          masm.movdl(rdx, xmm3);
          masm.psrlq(xmm3, 32);
          masm.movdl(rcx, xmm3);
          masm.orl(rdx, rcx);
<span class="line-modified">!         masm.cmplAndJcc(rdx, 0, ConditionFlag.Equal, block9, false);</span>
          masm.xorpd(xmm3, xmm3);
          masm.movl(rax, 18416);
          masm.pinsrw(xmm3, rax, 3);
          masm.mulsd(xmm0, xmm3);
          masm.xorpd(xmm2, xmm2);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1180,14 ***</span>
          masm.cvtsi2sdl(xmm7, rax);
          masm.mulpd(xmm5, xmm0);
          masm.jmp(block4);
  
          masm.bind(block5);
<span class="line-modified">!         masm.cmpl(rax, 0);</span>
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Less, block11);</span>
<span class="line-removed">-         masm.cmpl(rax, 752);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.AboveEqual, block12);</span>
          masm.addsd(xmm0, xmm7);
          masm.movq(xmm2, recordExternalAddress(crb, halfmask));         // 0xf8000000, 0xffffffff,
                                                                         // 0xf8000000, 0xffffffff
          masm.addpd(xmm3, xmm0);
          masm.xorpd(xmm6, xmm6);
<span class="line-new-header">--- 1175,12 ---</span>
          masm.cvtsi2sdl(xmm7, rax);
          masm.mulpd(xmm5, xmm0);
          masm.jmp(block4);
  
          masm.bind(block5);
<span class="line-modified">!         masm.cmplAndJcc(rax, 0, ConditionFlag.Less, block11, false);</span>
<span class="line-modified">!         masm.cmplAndJcc(rax, 752, ConditionFlag.AboveEqual, block12, false);</span>
          masm.addsd(xmm0, xmm7);
          masm.movq(xmm2, recordExternalAddress(crb, halfmask));         // 0xf8000000, 0xffffffff,
                                                                         // 0xf8000000, 0xffffffff
          masm.addpd(xmm3, xmm0);
          masm.xorpd(xmm6, xmm6);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1235,12 ***</span>
          masm.xorl(rcx, tmp1);
          masm.movdl(xmm6, rcx);
          masm.movq(xmm1, recordExternalAddress(crb, eCoeff32));         // 0xfefa39ef, 0x3fe62e42,
                                                                         // 0x00000000, 0x00000000
          masm.andl(rdx, 32767);
<span class="line-modified">!         masm.cmpl(rdx, 16529);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Above, block12);</span>
          masm.pshufd(xmm0, xmm2, 68);
          masm.pshufd(xmm4, xmm2, 68);
          masm.mulpd(xmm0, xmm0);
          masm.mulpd(xmm7, xmm4);
          masm.pshufd(xmm6, xmm6, 17);
<span class="line-new-header">--- 1228,11 ---</span>
          masm.xorl(rcx, tmp1);
          masm.movdl(xmm6, rcx);
          masm.movq(xmm1, recordExternalAddress(crb, eCoeff32));         // 0xfefa39ef, 0x3fe62e42,
                                                                         // 0x00000000, 0x00000000
          masm.andl(rdx, 32767);
<span class="line-modified">!         masm.cmplAndJcc(rdx, 16529, ConditionFlag.Above, block12, false);</span>
          masm.pshufd(xmm0, xmm2, 68);
          masm.pshufd(xmm4, xmm2, 68);
          masm.mulpd(xmm0, xmm0);
          masm.mulpd(xmm7, xmm4);
          masm.pshufd(xmm6, xmm6, 17);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1263,32 ***</span>
          masm.addsd(xmm0, xmm3);
          masm.movdqu(xmm1, xmm0);
          masm.addsd(xmm0, xmm5);
          masm.mulsd(xmm0, xmm4);
          masm.pextrw(rax, xmm0, 3);
<span class="line-modified">!         masm.andl(rax, 32752);</span>
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block13);</span>
<span class="line-removed">-         masm.cmpl(rax, 32752);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block14);</span>
          masm.jmp(block56);
  
          masm.bind(block6);
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.movq(xmm0, new AMD64Address(rsp, 8));
          masm.movdqu(xmm2, xmm0);
          masm.movdl(rax, xmm2);
          masm.psrlq(xmm2, 20);
          masm.movdl(rdx, xmm2);
          masm.orl(rax, rdx);
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block15);</span>
          masm.movdl(rax, xmm1);
          masm.psrlq(xmm1, 32);
          masm.movdl(rdx, xmm1);
          masm.movl(rcx, rdx);
          masm.addl(rdx, rdx);
          masm.orl(rax, rdx);
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block16);</span>
          masm.addsd(xmm0, xmm0);
          masm.jmp(block56);
  
          masm.bind(block16);
          masm.xorpd(xmm0, xmm0);
<span class="line-new-header">--- 1255,30 ---</span>
          masm.addsd(xmm0, xmm3);
          masm.movdqu(xmm1, xmm0);
          masm.addsd(xmm0, xmm5);
          masm.mulsd(xmm0, xmm4);
          masm.pextrw(rax, xmm0, 3);
<span class="line-modified">!         masm.andlAndJcc(rax, 32752, ConditionFlag.Equal, block13, false);</span>
<span class="line-modified">!         masm.cmplAndJcc(rax, 32752, ConditionFlag.Equal, block14, false);</span>
          masm.jmp(block56);
  
          masm.bind(block6);
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.movq(xmm0, new AMD64Address(rsp, 8));
          masm.movdqu(xmm2, xmm0);
          masm.movdl(rax, xmm2);
          masm.psrlq(xmm2, 20);
          masm.movdl(rdx, xmm2);
          masm.orl(rax, rdx);
<span class="line-modified">!         masm.jcc(ConditionFlag.Equal, block15);</span>
          masm.movdl(rax, xmm1);
          masm.psrlq(xmm1, 32);
          masm.movdl(rdx, xmm1);
          masm.movl(rcx, rdx);
          masm.addl(rdx, rdx);
          masm.orl(rax, rdx);
<span class="line-modified">!         masm.jcc(ConditionFlag.Equal, block16);</span>
          masm.addsd(xmm0, xmm0);
          masm.jmp(block56);
  
          masm.bind(block16);
          masm.xorpd(xmm0, xmm0);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1308,68 ***</span>
          masm.psrlq(xmm1, 32);
          masm.movdl(rdx, xmm1);
          masm.movl(rcx, rdx);
          masm.addl(rdx, rdx);
          masm.orl(rax, rdx);
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block19);</span>
          masm.pextrw(rax, xmm2, 3);
          masm.andl(rax, 32752);
<span class="line-modified">!         masm.cmpl(rax, 32752);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block20);</span>
          masm.movdl(rax, xmm2);
          masm.psrlq(xmm2, 20);
          masm.movdl(rdx, xmm2);
          masm.orl(rax, rdx);
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block18);</span>
  
          masm.bind(block20);
          masm.pextrw(rax, xmm0, 3);
<span class="line-modified">!         masm.testl(rax, 32768);</span>
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block21);</span>
<span class="line-removed">-         masm.testl(rcx, Integer.MIN_VALUE);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block22);</span>
          masm.jmp(block56);
  
          masm.bind(block23);
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.movdl(rax, xmm1);
<span class="line-modified">!         masm.testl(rax, 1);</span>
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block24);</span>
<span class="line-removed">-         masm.testl(rax, 2);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block25);</span>
          masm.jmp(block24);
  
          masm.bind(block21);
          masm.shrl(rcx, 20);
          masm.andl(rcx, 2047);
<span class="line-modified">!         masm.cmpl(rcx, 1075);</span>
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Above, block24);</span>
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block26);</span>
<span class="line-modified">!         masm.cmpl(rcx, 1074);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Above, block23);</span>
<span class="line-removed">-         masm.cmpl(rcx, 1023);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Below, block24);</span>
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.movl(rax, 17208);
          masm.xorpd(xmm3, xmm3);
          masm.pinsrw(xmm3, rax, 3);
          masm.movdqu(xmm4, xmm3);
          masm.addsd(xmm3, xmm1);
          masm.subsd(xmm4, xmm3);
          masm.addsd(xmm1, xmm4);
          masm.pextrw(rax, xmm1, 3);
<span class="line-modified">!         masm.andl(rax, 32752);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block24);</span>
          masm.movdl(rax, xmm3);
<span class="line-modified">!         masm.andl(rax, 1);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block24);</span>
  
          masm.bind(block25);
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.pextrw(rax, xmm1, 3);
<span class="line-modified">!         masm.andl(rax, 32768);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block27);</span>
          masm.jmp(block56);
  
          masm.bind(block27);
          masm.xorpd(xmm0, xmm0);
          masm.movl(rax, 32768);
<span class="line-new-header">--- 1298,57 ---</span>
          masm.psrlq(xmm1, 32);
          masm.movdl(rdx, xmm1);
          masm.movl(rcx, rdx);
          masm.addl(rdx, rdx);
          masm.orl(rax, rdx);
<span class="line-modified">!         masm.jcc(ConditionFlag.Equal, block19);</span>
          masm.pextrw(rax, xmm2, 3);
          masm.andl(rax, 32752);
<span class="line-modified">!         masm.cmplAndJcc(rax, 32752, ConditionFlag.NotEqual, block20, false);</span>
          masm.movdl(rax, xmm2);
          masm.psrlq(xmm2, 20);
          masm.movdl(rdx, xmm2);
          masm.orl(rax, rdx);
<span class="line-modified">!         masm.jcc(ConditionFlag.NotEqual, block18);</span>
  
          masm.bind(block20);
          masm.pextrw(rax, xmm0, 3);
<span class="line-modified">!         masm.testlAndJcc(rax, 32768, ConditionFlag.NotEqual, block21, false);</span>
<span class="line-modified">!         masm.testlAndJcc(rcx, Integer.MIN_VALUE, ConditionFlag.NotEqual, block22, false);</span>
          masm.jmp(block56);
  
          masm.bind(block23);
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.movdl(rax, xmm1);
<span class="line-modified">!         masm.testlAndJcc(rax, 1, ConditionFlag.NotEqual, block24, false);</span>
<span class="line-modified">!         masm.testlAndJcc(rax, 2, ConditionFlag.NotEqual, block25, false);</span>
          masm.jmp(block24);
  
          masm.bind(block21);
          masm.shrl(rcx, 20);
          masm.andl(rcx, 2047);
<span class="line-modified">!         masm.cmplAndJcc(rcx, 1075, ConditionFlag.Above, block24, false);</span>
<span class="line-modified">!         masm.jcc(ConditionFlag.Equal, block26);</span>
<span class="line-modified">!         masm.cmplAndJcc(rcx, 1074, ConditionFlag.Above, block23, false);</span>
<span class="line-modified">!         masm.cmplAndJcc(rcx, 1023, ConditionFlag.Below, block24, false);</span>
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.movl(rax, 17208);
          masm.xorpd(xmm3, xmm3);
          masm.pinsrw(xmm3, rax, 3);
          masm.movdqu(xmm4, xmm3);
          masm.addsd(xmm3, xmm1);
          masm.subsd(xmm4, xmm3);
          masm.addsd(xmm1, xmm4);
          masm.pextrw(rax, xmm1, 3);
<span class="line-modified">!         masm.andlAndJcc(rax, 32752, ConditionFlag.NotEqual, block24, false);</span>
          masm.movdl(rax, xmm3);
<span class="line-modified">!         masm.andlAndJcc(rax, 1, ConditionFlag.Equal, block24, false);</span>
  
          masm.bind(block25);
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.pextrw(rax, xmm1, 3);
<span class="line-modified">!         masm.andlAndJcc(rax, 32768, ConditionFlag.NotEqual, block27, false);</span>
          masm.jmp(block56);
  
          masm.bind(block27);
          masm.xorpd(xmm0, xmm0);
          masm.movl(rax, 32768);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1377,44 ***</span>
          masm.jmp(block56);
  
          masm.bind(block24);
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.pextrw(rax, xmm1, 3);
<span class="line-modified">!         masm.andl(rax, 32768);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block22);</span>
          masm.xorpd(xmm0, xmm0);
          masm.movl(rax, 32752);
          masm.pinsrw(xmm0, rax, 3);
          masm.jmp(block56);
  
          masm.bind(block26);
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.movdl(rax, xmm1);
<span class="line-modified">!         masm.andl(rax, 1);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block24);</span>
          masm.jmp(block25);
  
          masm.bind(block28);
          masm.movdl(rax, xmm1);
          masm.psrlq(xmm1, 20);
          masm.movdl(rdx, xmm1);
          masm.orl(rax, rdx);
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block29);</span>
          masm.movq(xmm0, new AMD64Address(rsp, 16));
          masm.addsd(xmm0, xmm0);
          masm.jmp(block56);
  
          masm.bind(block29);
          masm.movq(xmm0, new AMD64Address(rsp, 8));
          masm.pextrw(rax, xmm0, 3);
<span class="line-modified">!         masm.cmpl(rax, 49136);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block30);</span>
          masm.movdl(rcx, xmm0);
          masm.psrlq(xmm0, 20);
          masm.movdl(rdx, xmm0);
          masm.orl(rcx, rdx);
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block30);</span>
          masm.xorpd(xmm0, xmm0);
          masm.movl(rax, 32760);
          masm.pinsrw(xmm0, rax, 3);
          masm.jmp(block56);
  
<span class="line-new-header">--- 1356,41 ---</span>
          masm.jmp(block56);
  
          masm.bind(block24);
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.pextrw(rax, xmm1, 3);
<span class="line-modified">!         masm.andlAndJcc(rax, 32768, ConditionFlag.NotEqual, block22, false);</span>
          masm.xorpd(xmm0, xmm0);
          masm.movl(rax, 32752);
          masm.pinsrw(xmm0, rax, 3);
          masm.jmp(block56);
  
          masm.bind(block26);
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.movdl(rax, xmm1);
<span class="line-modified">!         masm.andlAndJcc(rax, 1, ConditionFlag.Equal, block24, false);</span>
          masm.jmp(block25);
  
          masm.bind(block28);
          masm.movdl(rax, xmm1);
          masm.psrlq(xmm1, 20);
          masm.movdl(rdx, xmm1);
          masm.orl(rax, rdx);
<span class="line-modified">!         masm.jcc(ConditionFlag.Equal, block29);</span>
          masm.movq(xmm0, new AMD64Address(rsp, 16));
          masm.addsd(xmm0, xmm0);
          masm.jmp(block56);
  
          masm.bind(block29);
          masm.movq(xmm0, new AMD64Address(rsp, 8));
          masm.pextrw(rax, xmm0, 3);
<span class="line-modified">!         masm.cmplAndJcc(rax, 49136, ConditionFlag.NotEqual, block30, false);</span>
          masm.movdl(rcx, xmm0);
          masm.psrlq(xmm0, 20);
          masm.movdl(rdx, xmm0);
          masm.orl(rcx, rdx);
<span class="line-modified">!         masm.jcc(ConditionFlag.NotEqual, block30);</span>
          masm.xorpd(xmm0, xmm0);
          masm.movl(rax, 32760);
          masm.pinsrw(xmm0, rax, 3);
          masm.jmp(block56);
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1423,72 ***</span>
          masm.andl(rax, 32752);
          masm.subl(rax, 16368);
          masm.pextrw(rdx, xmm1, 3);
          masm.xorpd(xmm0, xmm0);
          masm.xorl(rax, rdx);
<span class="line-modified">!         masm.andl(rax, 32768);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block31);</span>
          masm.jmp(block56);
  
          masm.bind(block31);
          masm.movl(rcx, 32752);
          masm.pinsrw(xmm0, rcx, 3);
          masm.jmp(block56);
  
          masm.bind(block32);
          masm.movdl(rax, xmm1);
<span class="line-modified">!         masm.cmpl(rdx, 17184);</span>
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Above, block33);</span>
<span class="line-modified">!         masm.testl(rax, 1);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block34);</span>
<span class="line-removed">-         masm.testl(rax, 2);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block35);</span>
          masm.jmp(block36);
  
          masm.bind(block33);
<span class="line-modified">!         masm.testl(rax, 1);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block35);</span>
          masm.jmp(block36);
  
          masm.bind(block7);
          masm.movq(xmm2, new AMD64Address(rsp, 8));
          masm.movdl(rax, xmm2);
          masm.psrlq(xmm2, 31);
          masm.movdl(rcx, xmm2);
          masm.orl(rax, rcx);
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block9);</span>
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.pextrw(rdx, xmm1, 3);
          masm.movdl(rax, xmm1);
          masm.movdqu(xmm2, xmm1);
          masm.psrlq(xmm2, 32);
          masm.movdl(rcx, xmm2);
          masm.addl(rcx, rcx);
          masm.orl(rcx, rax);
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block37);</span>
          masm.andl(rdx, 32752);
<span class="line-modified">!         masm.cmpl(rdx, 32752);</span>
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block28);</span>
<span class="line-modified">!         masm.cmpl(rdx, 17200);</span>
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Above, block35);</span>
<span class="line-removed">-         masm.cmpl(rdx, 17184);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.AboveEqual, block32);</span>
<span class="line-removed">-         masm.cmpl(rdx, 16368);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Below, block34);</span>
          masm.movl(rax, 17208);
          masm.xorpd(xmm2, xmm2);
          masm.pinsrw(xmm2, rax, 3);
          masm.movdqu(xmm4, xmm2);
          masm.addsd(xmm2, xmm1);
          masm.subsd(xmm4, xmm2);
          masm.addsd(xmm1, xmm4);
          masm.pextrw(rax, xmm1, 3);
<span class="line-modified">!         masm.andl(rax, 32767);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block34);</span>
          masm.movdl(rax, xmm2);
<span class="line-modified">!         masm.andl(rax, 1);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block35);</span>
  
          masm.bind(block36);
          masm.xorpd(xmm1, xmm1);
          masm.movl(rdx, 30704);
          masm.pinsrw(xmm1, rdx, 3);
<span class="line-new-header">--- 1399,61 ---</span>
          masm.andl(rax, 32752);
          masm.subl(rax, 16368);
          masm.pextrw(rdx, xmm1, 3);
          masm.xorpd(xmm0, xmm0);
          masm.xorl(rax, rdx);
<span class="line-modified">!         masm.andlAndJcc(rax, 32768, ConditionFlag.Equal, block31, false);</span>
          masm.jmp(block56);
  
          masm.bind(block31);
          masm.movl(rcx, 32752);
          masm.pinsrw(xmm0, rcx, 3);
          masm.jmp(block56);
  
          masm.bind(block32);
          masm.movdl(rax, xmm1);
<span class="line-modified">!         masm.cmplAndJcc(rdx, 17184, ConditionFlag.Above, block33, false);</span>
<span class="line-modified">!         masm.testlAndJcc(rax, 1, ConditionFlag.NotEqual, block34, false);</span>
<span class="line-modified">!         masm.testlAndJcc(rax, 2, ConditionFlag.Equal, block35, false);</span>
          masm.jmp(block36);
  
          masm.bind(block33);
<span class="line-modified">!         masm.testlAndJcc(rax, 1, ConditionFlag.Equal, block35, false);</span>
          masm.jmp(block36);
  
          masm.bind(block7);
          masm.movq(xmm2, new AMD64Address(rsp, 8));
          masm.movdl(rax, xmm2);
          masm.psrlq(xmm2, 31);
          masm.movdl(rcx, xmm2);
          masm.orl(rax, rcx);
<span class="line-modified">!         masm.jcc(ConditionFlag.Equal, block9);</span>
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.pextrw(rdx, xmm1, 3);
          masm.movdl(rax, xmm1);
          masm.movdqu(xmm2, xmm1);
          masm.psrlq(xmm2, 32);
          masm.movdl(rcx, xmm2);
          masm.addl(rcx, rcx);
          masm.orl(rcx, rax);
<span class="line-modified">!         masm.jcc(ConditionFlag.Equal, block37);</span>
          masm.andl(rdx, 32752);
<span class="line-modified">!         masm.cmplAndJcc(rdx, 32752, ConditionFlag.Equal, block28, false);</span>
<span class="line-modified">!         masm.cmplAndJcc(rdx, 17200, ConditionFlag.Above, block35, false);</span>
<span class="line-modified">!         masm.cmplAndJcc(rdx, 17184, ConditionFlag.AboveEqual, block32, false);</span>
<span class="line-modified">!         masm.cmplAndJcc(rdx, 16368, ConditionFlag.Below, block34, false);</span>
          masm.movl(rax, 17208);
          masm.xorpd(xmm2, xmm2);
          masm.pinsrw(xmm2, rax, 3);
          masm.movdqu(xmm4, xmm2);
          masm.addsd(xmm2, xmm1);
          masm.subsd(xmm4, xmm2);
          masm.addsd(xmm1, xmm4);
          masm.pextrw(rax, xmm1, 3);
<span class="line-modified">!         masm.andlAndJcc(rax, 32767, ConditionFlag.NotEqual, block34, false);</span>
          masm.movdl(rax, xmm2);
<span class="line-modified">!         masm.andlAndJcc(rax, 1, ConditionFlag.Equal, block35, false);</span>
  
          masm.bind(block36);
          masm.xorpd(xmm1, xmm1);
          masm.movl(rdx, 30704);
          masm.pinsrw(xmm1, rdx, 3);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1497,12 ***</span>
          masm.movq(xmm4, new AMD64Address(rsp, 8));
          masm.pextrw(rax, xmm4, 3);
          masm.movl(rdx, 8192);
          masm.movdl(xmm4, rdx);
          masm.andl(rax, 32767);
<span class="line-modified">!         masm.subl(rax, 16);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Less, block10);</span>
          masm.movl(rdx, rax);
          masm.andl(rdx, 32752);
          masm.subl(rdx, 16368);
          masm.movl(rcx, rdx);
          masm.sarl(rdx, 31);
<span class="line-new-header">--- 1462,11 ---</span>
          masm.movq(xmm4, new AMD64Address(rsp, 8));
          masm.pextrw(rax, xmm4, 3);
          masm.movl(rdx, 8192);
          masm.movdl(xmm4, rdx);
          masm.andl(rax, 32767);
<span class="line-modified">!         masm.sublAndJcc(rax, 16, ConditionFlag.Less, block10, false);</span>
          masm.movl(rdx, rax);
          masm.andl(rdx, 32752);
          masm.subl(rdx, 16368);
          masm.movl(rcx, rdx);
          masm.sarl(rdx, 31);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1531,12 ***</span>
          masm.movq(xmm4, new AMD64Address(rsp, 8));
          masm.pextrw(rax, xmm4, 3);
          masm.movl(rdx, 8192);
          masm.movdl(xmm4, rdx);
          masm.andl(rax, 32767);
<span class="line-modified">!         masm.subl(rax, 16);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Less, block8);</span>
          masm.movl(rdx, rax);
          masm.andl(rdx, 32752);
          masm.subl(rdx, 16368);
          masm.movl(rcx, rdx);
          masm.sarl(rdx, 31);
<span class="line-new-header">--- 1495,11 ---</span>
          masm.movq(xmm4, new AMD64Address(rsp, 8));
          masm.pextrw(rax, xmm4, 3);
          masm.movl(rdx, 8192);
          masm.movdl(xmm4, rdx);
          masm.andl(rax, 32767);
<span class="line-modified">!         masm.sublAndJcc(rax, 16, ConditionFlag.Less, block8, false);</span>
          masm.movl(rdx, rax);
          masm.andl(rdx, 32752);
          masm.subl(rdx, 16368);
          masm.movl(rcx, rdx);
          masm.sarl(rdx, 31);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1557,12 ***</span>
          masm.xorpd(xmm0, xmm0);
          masm.jmp(block56);
  
          masm.bind(block11);
          masm.addl(rax, 384);
<span class="line-modified">!         masm.cmpl(rax, 0);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Less, block38);</span>
          masm.mulsd(xmm5, xmm1);
          masm.addsd(xmm0, xmm7);
          masm.shrl(tmp1, 31);
          masm.addpd(xmm3, xmm0);
          masm.pshufd(xmm0, xmm3, 238);
<span class="line-new-header">--- 1520,11 ---</span>
          masm.xorpd(xmm0, xmm0);
          masm.jmp(block56);
  
          masm.bind(block11);
          masm.addl(rax, 384);
<span class="line-modified">!         masm.cmplAndJcc(rax, 0, ConditionFlag.Less, block38, false);</span>
          masm.mulsd(xmm5, xmm1);
          masm.addsd(xmm0, xmm7);
          masm.shrl(tmp1, 31);
          masm.addpd(xmm3, xmm0);
          masm.pshufd(xmm0, xmm3, 238);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1599,62 ***</span>
          masm.bind(block9);
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.movdqu(xmm2, xmm1);
          masm.pextrw(rax, xmm1, 3);
          masm.andl(rax, 32752);
<span class="line-modified">!         masm.cmpl(rax, 32752);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block40);</span>
          masm.movdl(rax, xmm2);
          masm.psrlq(xmm2, 20);
          masm.movdl(rdx, xmm2);
          masm.orl(rax, rdx);
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block18);</span>
  
          masm.bind(block40);
          masm.movdl(rax, xmm1);
          masm.psrlq(xmm1, 32);
          masm.movdl(rdx, xmm1);
          masm.movl(rcx, rdx);
          masm.addl(rdx, rdx);
          masm.orl(rax, rdx);
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block39);</span>
          masm.shrl(rdx, 21);
<span class="line-modified">!         masm.cmpl(rdx, 1075);</span>
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Above, block41);</span>
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block42);</span>
<span class="line-removed">-         masm.cmpl(rdx, 1023);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Below, block41);</span>
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.movl(rax, 17208);
          masm.xorpd(xmm3, xmm3);
          masm.pinsrw(xmm3, rax, 3);
          masm.movdqu(xmm4, xmm3);
          masm.addsd(xmm3, xmm1);
          masm.subsd(xmm4, xmm3);
          masm.addsd(xmm1, xmm4);
          masm.pextrw(rax, xmm1, 3);
<span class="line-modified">!         masm.andl(rax, 32752);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block41);</span>
          masm.movdl(rax, xmm3);
<span class="line-modified">!         masm.andl(rax, 1);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block41);</span>
  
          masm.bind(block43);
          masm.movq(xmm0, new AMD64Address(rsp, 8));
<span class="line-modified">!         masm.testl(rcx, Integer.MIN_VALUE);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block44);</span>
          masm.jmp(block56);
  
          masm.bind(block42);
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.movdl(rax, xmm1);
<span class="line-modified">!         masm.testl(rax, 1);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block43);</span>
  
          masm.bind(block41);
<span class="line-modified">!         masm.testl(rcx, Integer.MIN_VALUE);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block22);</span>
          masm.xorpd(xmm0, xmm0);
  
          masm.bind(block44);
          masm.movl(rax, 16368);
          masm.xorpd(xmm1, xmm1);
<span class="line-new-header">--- 1561,54 ---</span>
          masm.bind(block9);
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.movdqu(xmm2, xmm1);
          masm.pextrw(rax, xmm1, 3);
          masm.andl(rax, 32752);
<span class="line-modified">!         masm.cmplAndJcc(rax, 32752, ConditionFlag.NotEqual, block40, false);</span>
          masm.movdl(rax, xmm2);
          masm.psrlq(xmm2, 20);
          masm.movdl(rdx, xmm2);
          masm.orl(rax, rdx);
<span class="line-modified">!         masm.jcc(ConditionFlag.NotEqual, block18);</span>
  
          masm.bind(block40);
          masm.movdl(rax, xmm1);
          masm.psrlq(xmm1, 32);
          masm.movdl(rdx, xmm1);
          masm.movl(rcx, rdx);
          masm.addl(rdx, rdx);
          masm.orl(rax, rdx);
<span class="line-modified">!         masm.jcc(ConditionFlag.Equal, block39);</span>
          masm.shrl(rdx, 21);
<span class="line-modified">!         masm.cmplAndJcc(rdx, 1075, ConditionFlag.Above, block41, false);</span>
<span class="line-modified">!         masm.jcc(ConditionFlag.Equal, block42);</span>
<span class="line-modified">!         masm.cmplAndJcc(rdx, 1023, ConditionFlag.Below, block41, false);</span>
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.movl(rax, 17208);
          masm.xorpd(xmm3, xmm3);
          masm.pinsrw(xmm3, rax, 3);
          masm.movdqu(xmm4, xmm3);
          masm.addsd(xmm3, xmm1);
          masm.subsd(xmm4, xmm3);
          masm.addsd(xmm1, xmm4);
          masm.pextrw(rax, xmm1, 3);
<span class="line-modified">!         masm.andlAndJcc(rax, 32752, ConditionFlag.NotEqual, block41, false);</span>
          masm.movdl(rax, xmm3);
<span class="line-modified">!         masm.andlAndJcc(rax, 1, ConditionFlag.Equal, block41, false);</span>
  
          masm.bind(block43);
          masm.movq(xmm0, new AMD64Address(rsp, 8));
<span class="line-modified">!         masm.testlAndJcc(rcx, Integer.MIN_VALUE, ConditionFlag.NotEqual, block44, false);</span>
          masm.jmp(block56);
  
          masm.bind(block42);
          masm.movq(xmm1, new AMD64Address(rsp, 16));
          masm.movdl(rax, xmm1);
<span class="line-modified">!         masm.testlAndJcc(rax, 1, ConditionFlag.NotEqual, block43, false);</span>
  
          masm.bind(block41);
<span class="line-modified">!         masm.testlAndJcc(rcx, Integer.MIN_VALUE, ConditionFlag.Equal, block22, false);</span>
          masm.xorpd(xmm0, xmm0);
  
          masm.bind(block44);
          masm.movl(rax, 16368);
          masm.xorpd(xmm1, xmm1);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1669,17 ***</span>
          masm.movq(xmm6, new AMD64Address(rsp, 16));
          masm.pextrw(rax, xmm2, 3);
          masm.pextrw(rdx, xmm6, 3);
          masm.movl(rcx, 32752);
          masm.andl(rcx, rdx);
<span class="line-modified">!         masm.cmpl(rcx, 32752);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block45);</span>
          masm.andl(rax, 32752);
          masm.subl(rax, 16368);
          masm.xorl(rdx, rax);
<span class="line-modified">!         masm.testl(rdx, 32768);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block46);</span>
  
          masm.bind(block47);
          masm.movl(rax, 32736);
          masm.pinsrw(xmm0, rax, 3);
          masm.shrl(tmp1, 16);
<span class="line-new-header">--- 1623,15 ---</span>
          masm.movq(xmm6, new AMD64Address(rsp, 16));
          masm.pextrw(rax, xmm2, 3);
          masm.pextrw(rdx, xmm6, 3);
          masm.movl(rcx, 32752);
          masm.andl(rcx, rdx);
<span class="line-modified">!         masm.cmplAndJcc(rcx, 32752, ConditionFlag.Equal, block45, false);</span>
          masm.andl(rax, 32752);
          masm.subl(rax, 16368);
          masm.xorl(rdx, rax);
<span class="line-modified">!         masm.testlAndJcc(rdx, 32768, ConditionFlag.NotEqual, block46, false);</span>
  
          masm.bind(block47);
          masm.movl(rax, 32736);
          masm.pinsrw(xmm0, rax, 3);
          masm.shrl(tmp1, 16);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1693,12 ***</span>
  
          masm.bind(block46);
          masm.movl(rax, 16);
          masm.pinsrw(xmm0, rax, 3);
          masm.mulsd(xmm0, xmm0);
<span class="line-modified">!         masm.testl(tmp1, Integer.MIN_VALUE);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block48);</span>
          masm.movq(tmp2, 0x8000000000000000L);
          masm.movdq(xmm2, tmp2);
          masm.xorpd(xmm0, xmm2);
  
          masm.bind(block48);
<span class="line-new-header">--- 1645,11 ---</span>
  
          masm.bind(block46);
          masm.movl(rax, 16);
          masm.pinsrw(xmm0, rax, 3);
          masm.mulsd(xmm0, xmm0);
<span class="line-modified">!         masm.testlAndJcc(tmp1, Integer.MIN_VALUE, ConditionFlag.Equal, block48, false);</span>
          masm.movq(tmp2, 0x8000000000000000L);
          masm.movdq(xmm2, tmp2);
          masm.xorpd(xmm0, xmm2);
  
          masm.bind(block48);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1713,14 ***</span>
          masm.subl(rcx, 16368);
          masm.andl(rdx, 32752);
          masm.addl(rdx, rcx);
          masm.movl(rcx, -31);
          masm.sarl(rdx, 4);
<span class="line-modified">!         masm.subl(rcx, rdx);</span>
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.LessEqual, block49);</span>
<span class="line-removed">-         masm.cmpl(rcx, 20);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Above, block50);</span>
          masm.shll(rax);
  
          masm.bind(block49);
          masm.movdl(xmm0, rax);
          masm.psllq(xmm0, 32);
<span class="line-new-header">--- 1664,12 ---</span>
          masm.subl(rcx, 16368);
          masm.andl(rdx, 32752);
          masm.addl(rdx, rcx);
          masm.movl(rcx, -31);
          masm.sarl(rdx, 4);
<span class="line-modified">!         masm.sublAndJcc(rcx, rdx, ConditionFlag.LessEqual, block49, false);</span>
<span class="line-modified">!         masm.cmplAndJcc(rcx, 20, ConditionFlag.Above, block50, false);</span>
          masm.shll(rax);
  
          masm.bind(block49);
          masm.movdl(xmm0, rax);
          masm.psllq(xmm0, 32);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1743,12 ***</span>
          masm.movdl(rdx, xmm0);
          masm.psllq(xmm0, 29);
          masm.paddq(xmm1, xmm3);
          masm.pand(xmm5, xmm1);
          masm.andl(rcx, 32752);
<span class="line-modified">!         masm.cmpl(rcx, 16560);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Less, block3);</span>
          masm.pand(xmm0, xmm6);
          masm.subsd(xmm3, xmm5);
          masm.addl(rax, 16351);
          masm.shrl(rax, 4);
          masm.subl(rax, 1022);
<span class="line-new-header">--- 1692,11 ---</span>
          masm.movdl(rdx, xmm0);
          masm.psllq(xmm0, 29);
          masm.paddq(xmm1, xmm3);
          masm.pand(xmm5, xmm1);
          masm.andl(rcx, 32752);
<span class="line-modified">!         masm.cmplAndJcc(rcx, 16560, ConditionFlag.Less, block3, false);</span>
          masm.pand(xmm0, xmm6);
          masm.subsd(xmm3, xmm5);
          masm.addl(rax, 16351);
          masm.shrl(rax, 4);
          masm.subl(rax, 1022);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1836,15 ***</span>
          masm.subsd(xmm7, xmm2);
          masm.addpd(xmm5, xmm0);
          masm.andl(rax, 32752);
          masm.subl(rax, 16368);
          masm.andl(rcx, 32752);
<span class="line-modified">!         masm.cmpl(rcx, 32752);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block45);</span>
          masm.addl(rcx, rax);
<span class="line-modified">!         masm.cmpl(rcx, 16576);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.AboveEqual, block51);</span>
          masm.pshufd(xmm0, xmm5, 238);
          masm.pand(xmm4, xmm1);
          masm.movdqu(xmm3, xmm1);
          masm.addsd(xmm5, xmm0);
          masm.subsd(xmm1, xmm4);
<span class="line-new-header">--- 1784,13 ---</span>
          masm.subsd(xmm7, xmm2);
          masm.addpd(xmm5, xmm0);
          masm.andl(rax, 32752);
          masm.subl(rax, 16368);
          masm.andl(rcx, 32752);
<span class="line-modified">!         masm.cmplAndJcc(rcx, 32752, ConditionFlag.Equal, block45, false);</span>
          masm.addl(rcx, rax);
<span class="line-modified">!         masm.cmplAndJcc(rcx, 16576, ConditionFlag.AboveEqual, block51, false);</span>
          masm.pshufd(xmm0, xmm5, 238);
          masm.pand(xmm4, xmm1);
          masm.movdqu(xmm3, xmm1);
          masm.addsd(xmm5, xmm0);
          masm.subsd(xmm1, xmm4);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1885,12 ***</span>
          masm.mulpd(xmm0, xmm0);
          masm.mulpd(xmm7, xmm1);
          masm.pshufd(xmm6, xmm6, 17);
          masm.mulsd(xmm2, xmm4);
          masm.andl(rdx, 32767);
<span class="line-modified">!         masm.cmpl(rdx, 16529);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Above, block12);</span>
          masm.mulsd(xmm0, xmm0);
          masm.paddd(xmm5, xmm6);
          masm.addpd(xmm3, xmm7);
          masm.mulsd(xmm2, xmm5);
          masm.pshufd(xmm6, xmm5, 238);
<span class="line-new-header">--- 1831,11 ---</span>
          masm.mulpd(xmm0, xmm0);
          masm.mulpd(xmm7, xmm1);
          masm.pshufd(xmm6, xmm6, 17);
          masm.mulsd(xmm2, xmm4);
          masm.andl(rdx, 32767);
<span class="line-modified">!         masm.cmplAndJcc(rdx, 16529, ConditionFlag.Above, block12, false);</span>
          masm.mulsd(xmm0, xmm0);
          masm.paddd(xmm5, xmm6);
          masm.addpd(xmm3, xmm7);
          masm.mulsd(xmm2, xmm5);
          masm.pshufd(xmm6, xmm5, 238);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1908,14 ***</span>
          masm.addsd(xmm0, xmm3);
          masm.movdqu(xmm1, xmm0);
          masm.addsd(xmm0, xmm5);
          masm.mulsd(xmm0, xmm4);
          masm.pextrw(rax, xmm0, 3);
<span class="line-modified">!         masm.andl(rax, 32752);</span>
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block13);</span>
<span class="line-removed">-         masm.cmpl(rax, 32752);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block14);</span>
  
          masm.bind(block52);
          masm.jmp(block56);
  
          masm.bind(block45);
<span class="line-new-header">--- 1853,12 ---</span>
          masm.addsd(xmm0, xmm3);
          masm.movdqu(xmm1, xmm0);
          masm.addsd(xmm0, xmm5);
          masm.mulsd(xmm0, xmm4);
          masm.pextrw(rax, xmm0, 3);
<span class="line-modified">!         masm.andlAndJcc(rax, 32752, ConditionFlag.Equal, block13, false);</span>
<span class="line-modified">!         masm.cmplAndJcc(rax, 32752, ConditionFlag.Equal, block14, false);</span>
  
          masm.bind(block52);
          masm.jmp(block56);
  
          masm.bind(block45);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1923,12 ***</span>
          masm.xorpd(xmm2, xmm2);
          masm.movl(rax, 49136);
          masm.pinsrw(xmm2, rax, 3);
          masm.addsd(xmm2, xmm0);
          masm.pextrw(rax, xmm2, 3);
<span class="line-modified">!         masm.cmpl(rax, 0);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.NotEqual, block53);</span>
          masm.xorpd(xmm0, xmm0);
          masm.movl(rax, 32760);
          masm.pinsrw(xmm0, rax, 3);
          masm.jmp(block56);
  
<span class="line-new-header">--- 1866,11 ---</span>
          masm.xorpd(xmm2, xmm2);
          masm.movl(rax, 49136);
          masm.pinsrw(xmm2, rax, 3);
          masm.addsd(xmm2, xmm0);
          masm.pextrw(rax, xmm2, 3);
<span class="line-modified">!         masm.cmplAndJcc(rax, 0, ConditionFlag.NotEqual, block53, false);</span>
          masm.xorpd(xmm0, xmm0);
          masm.movl(rax, 32760);
          masm.pinsrw(xmm0, rax, 3);
          masm.jmp(block56);
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1937,32 ***</span>
          masm.movdl(rdx, xmm1);
          masm.movdqu(xmm3, xmm1);
          masm.psrlq(xmm3, 20);
          masm.movdl(rcx, xmm3);
          masm.orl(rcx, rdx);
<span class="line-modified">!         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block54);</span>
          masm.addsd(xmm1, xmm1);
          masm.movdqu(xmm0, xmm1);
          masm.jmp(block56);
  
          masm.bind(block51);
          masm.pextrw(rax, xmm1, 3);
          masm.pextrw(rcx, xmm2, 3);
          masm.xorl(rax, rcx);
<span class="line-modified">!         masm.testl(rax, 32768);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block47);</span>
          masm.jmp(block46);
  
          masm.bind(block54);
          masm.pextrw(rax, xmm0, 3);
          masm.andl(rax, 32752);
          masm.pextrw(rdx, xmm1, 3);
          masm.xorpd(xmm0, xmm0);
          masm.subl(rax, 16368);
          masm.xorl(rax, rdx);
<span class="line-modified">!         masm.testl(rax, 32768);</span>
<span class="line-removed">-         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block55);</span>
          masm.jmp(block56);
  
          masm.bind(block55);
          masm.movl(rdx, 32752);
          masm.pinsrw(xmm0, rdx, 3);
<span class="line-new-header">--- 1879,30 ---</span>
          masm.movdl(rdx, xmm1);
          masm.movdqu(xmm3, xmm1);
          masm.psrlq(xmm3, 20);
          masm.movdl(rcx, xmm3);
          masm.orl(rcx, rdx);
<span class="line-modified">!         masm.jcc(ConditionFlag.Equal, block54);</span>
          masm.addsd(xmm1, xmm1);
          masm.movdqu(xmm0, xmm1);
          masm.jmp(block56);
  
          masm.bind(block51);
          masm.pextrw(rax, xmm1, 3);
          masm.pextrw(rcx, xmm2, 3);
          masm.xorl(rax, rcx);
<span class="line-modified">!         masm.testlAndJcc(rax, 32768, ConditionFlag.Equal, block47, false);</span>
          masm.jmp(block46);
  
          masm.bind(block54);
          masm.pextrw(rax, xmm0, 3);
          masm.andl(rax, 32752);
          masm.pextrw(rdx, xmm1, 3);
          masm.xorpd(xmm0, xmm0);
          masm.subl(rax, 16368);
          masm.xorl(rax, rdx);
<span class="line-modified">!         masm.testlAndJcc(rax, 32768, ConditionFlag.Equal, block55, false);</span>
          masm.jmp(block56);
  
          masm.bind(block55);
          masm.movl(rdx, 32752);
          masm.pinsrw(xmm0, rdx, 3);
</pre>
<center><a href="AMD64MathLogOp.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="AMD64MathSinOp.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>