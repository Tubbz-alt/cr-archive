<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/autoconf/spec.gmk.in</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="source-dirs.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="toolchain.m4.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/spec.gmk.in</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
286 JVM_FEATURES_custom := @JVM_FEATURES_custom@
287 
288 # Used for make-time verifications
289 VALID_JVM_FEATURES := @VALID_JVM_FEATURES@
290 VALID_JVM_VARIANTS := @VALID_JVM_VARIANTS@
291 
292 # Control whether Hotspot builds gtest tests
293 BUILD_GTEST := @BUILD_GTEST@
294 
295 # Allow overriding the default hotspot library path
296 HOTSPOT_OVERRIDE_LIBPATH := @HOTSPOT_OVERRIDE_LIBPATH@
297 
298 # Control use of precompiled header in hotspot libjvm build
299 USE_PRECOMPILED_HEADER := @USE_PRECOMPILED_HEADER@
300 
301 # Only build headless support or not
302 ENABLE_HEADLESS_ONLY := @ENABLE_HEADLESS_ONLY@
303 
304 ENABLE_LINKTIME_GC := @ENABLE_LINKTIME_GC@
305 



306 ENABLE_FULL_DOCS := @ENABLE_FULL_DOCS@
307 
308 # JDK_OUTPUTDIR specifies where a working jvm is built.
309 # You can run $(JDK_OUTPUTDIR)/bin/java
310 
311 OUTPUTDIR := @OUTPUTDIR@
312 # Colon left out to be able to override IMAGES_OUTPUTDIR for bootcycle-images
313 SUPPORT_OUTPUTDIR=$(OUTPUTDIR)/support
314 BUILDTOOLS_OUTPUTDIR=$(OUTPUTDIR)/buildtools
315 
316 HOTSPOT_OUTPUTDIR=$(OUTPUTDIR)/hotspot
317 JDK_OUTPUTDIR=$(OUTPUTDIR)/jdk
318 IMAGES_OUTPUTDIR=$(OUTPUTDIR)/images
319 BUNDLES_OUTPUTDIR=$(OUTPUTDIR)/bundles
320 TESTMAKE_OUTPUTDIR=$(OUTPUTDIR)/test-make
321 MAKESUPPORT_OUTPUTDIR=$(OUTPUTDIR)/make-support
322 
323 # This does not get overridden in a bootcycle build
324 CONFIGURESUPPORT_OUTPUTDIR:=@CONFIGURESUPPORT_OUTPUTDIR@
325 BUILDJDK_OUTPUTDIR=$(OUTPUTDIR)/buildjdk
</pre>
<hr />
<pre>
638 JAVAC=@FIXPATH@ $(JAVAC_CMD)
639 JAVADOC=@FIXPATH@ $(JAVADOC_CMD)
640 JAR=@FIXPATH@ $(JAR_CMD)
641 JLINK = @FIXPATH@ $(JLINK_CMD) $(JAVA_TOOL_FLAGS_SMALL)
642 JMOD = @FIXPATH@ $(JMOD_CMD) $(JAVA_TOOL_FLAGS_SMALL)
643 JARSIGNER=@FIXPATH@ $(JARSIGNER_CMD)
644 # A specific java binary with specific options can be used to run
645 # the long running background sjavac servers and other long running tasks.
646 SJAVAC_SERVER_JAVA=@FIXPATH@ @FIXPATH_DETACH_FLAG@ $(SJAVAC_SERVER_JAVA_CMD) \
647     $(SJAVAC_SERVER_JAVA_FLAGS)
648 
649 # Hotspot sets this variable before reading the SPEC when compiling sa-jdi.jar. Avoid
650 # overriding that value by using ?=.
651 JAVAC_FLAGS?=@JAVAC_FLAGS@
652 
653 
654 BUILD_JAVA_FLAGS := @BOOTCYCLE_JVM_ARGS_BIG@
655 BUILD_JAVA=@FIXPATH@ $(BUILD_JDK)/bin/java $(BUILD_JAVA_FLAGS)
656 BUILD_JAR=@FIXPATH@ $(BUILD_JDK)/bin/jar
657 
<span class="line-modified">658 # Interim langtools and rmic modules and arguments</span>
659 INTERIM_LANGTOOLS_BASE_MODULES := java.compiler jdk.compiler jdk.javadoc
660 INTERIM_LANGTOOLS_MODULES := $(addsuffix .interim, $(INTERIM_LANGTOOLS_BASE_MODULES))
661 INTERIM_LANGTOOLS_ADD_EXPORTS := \
662     --add-exports java.base/sun.reflect.annotation=jdk.compiler.interim \
663     --add-exports java.base/jdk.internal.jmod=jdk.compiler.interim \
664     --add-exports java.base/jdk.internal.misc=jdk.compiler.interim \
665     #
666 INTERIM_LANGTOOLS_MODULES_COMMA := $(strip $(subst $(SPACE),$(COMMA),$(strip \
667     $(INTERIM_LANGTOOLS_MODULES))))
668 INTERIM_LANGTOOLS_ARGS := \
669     --limit-modules java.base,jdk.zipfs,$(INTERIM_LANGTOOLS_MODULES_COMMA) \
670     --add-modules $(INTERIM_LANGTOOLS_MODULES_COMMA) \
671     --module-path $(BUILDTOOLS_OUTPUTDIR)/interim_langtools_modules \
672     $(INTERIM_LANGTOOLS_ADD_EXPORTS) \
673     #
674 JAVAC_MAIN_CLASS = -m jdk.compiler.interim/com.sun.tools.javac.Main
675 JAVADOC_MAIN_CLASS = -m jdk.javadoc.interim/jdk.javadoc.internal.tool.Main
676 
<span class="line-removed">677 INTERIM_RMIC_BASE_MODULES := jdk.rmic</span>
<span class="line-removed">678 INTERIM_RMIC_MODULES := $(addsuffix .interim, $(INTERIM_RMIC_BASE_MODULES))</span>
<span class="line-removed">679     #</span>
<span class="line-removed">680 # Use = to delay expansion of PathList since it&#39;s not available in this file.</span>
<span class="line-removed">681 INTERIM_RMIC_ARGS = --limit-modules java.base,jdk.compiler,jdk.javadoc \</span>
<span class="line-removed">682     --module-path $(call PathList, $(BUILDTOOLS_OUTPUTDIR)/interim_rmic_modules \</span>
<span class="line-removed">683         $(BUILDTOOLS_OUTPUTDIR)/interim_langtools_modules) \</span>
<span class="line-removed">684     #</span>
<span class="line-removed">685 </span>
686 # You run the new javac using the boot jdk with $(BOOT_JDK)/bin/java $(NEW_JAVAC) ...
687 # Use = assignment to be able to override in bootcycle-spec.gmk
688 NEW_JAVAC   = $(INTERIM_LANGTOOLS_ARGS) $(JAVAC_MAIN_CLASS)
689 NEW_JAVADOC = $(INTERIM_LANGTOOLS_ARGS) $(JAVADOC_MAIN_CLASS)
690 
691 JLINK_KEEP_PACKAGED_MODULES:=@JLINK_KEEP_PACKAGED_MODULES@
692 
693 # Base flags for RC
694 # Guarding this against resetting value. Legacy make files include spec multiple
695 # times.
696 ifndef RC_FLAGS
697   RC_FLAGS:=@RC_FLAGS@
698 endif
699 
700 # Tools adhering to a minimal and common standard of posix compliance.
701 AWK:=@AWK@
702 BASENAME:=@BASENAME@
703 CAT:=@CAT@
704 CCACHE:=@CCACHE@
705 # CD is going away, but remains to cater for legacy makefiles.
</pre>
<hr />
<pre>
896 INTERIM_JMODS_DIR := $(SUPPORT_OUTPUTDIR)/interim-jmods
897 INTERIM_IMAGE_DIR := $(SUPPORT_OUTPUTDIR)/interim-image
898 
899 # Docs image
900 DOCS_IMAGE_SUBDIR := docs
901 DOCS_IMAGE_DIR = $(IMAGES_OUTPUTDIR)/$(DOCS_IMAGE_SUBDIR)
902 # Output docs directly into image
903 DOCS_OUTPUTDIR := $(DOCS_IMAGE_DIR)
904 
905 # Static libs image
906 STATIC_LIBS_IMAGE_SUBDIR := static-libs
907 STATIC_LIBS_IMAGE_DIR := $(IMAGES_OUTPUTDIR)/$(STATIC_LIBS_IMAGE_SUBDIR)
908 
909 # Graal builder image
910 GRAAL_BUILDER_IMAGE_SUBDIR := graal-builder-jdk
911 GRAAL_BUILDER_IMAGE_DIR := $(IMAGES_OUTPUTDIR)/$(GRAAL_BUILDER_IMAGE_SUBDIR)
912 
913 # Macosx bundles directory definitions
914 JDK_MACOSX_BUNDLE_SUBDIR=jdk-bundle
915 JRE_MACOSX_BUNDLE_SUBDIR=jre-bundle


916 JDK_MACOSX_BUNDLE_DIR=$(IMAGES_OUTPUTDIR)/$(JDK_MACOSX_BUNDLE_SUBDIR)
917 JRE_MACOSX_BUNDLE_DIR=$(IMAGES_OUTPUTDIR)/$(JRE_MACOSX_BUNDLE_SUBDIR)
<span class="line-modified">918 JDK_MACOSX_CONTENTS_SUBDIR=jdk-$(VERSION_NUMBER).jdk/Contents</span>
<span class="line-modified">919 JRE_MACOSX_CONTENTS_SUBDIR=jre-$(VERSION_NUMBER).jre/Contents</span>




920 JDK_MACOSX_CONTENTS_DIR=$(JDK_MACOSX_BUNDLE_DIR)/$(JDK_MACOSX_CONTENTS_SUBDIR)
921 JRE_MACOSX_CONTENTS_DIR=$(JRE_MACOSX_BUNDLE_DIR)/$(JRE_MACOSX_CONTENTS_SUBDIR)
922 
923 # Bundle names
924 BASE_NAME := $(VERSION_SHORT)+$(VERSION_BUILD)_$(OPENJDK_TARGET_BUNDLE_PLATFORM)
925 ifeq ($(DEBUG_LEVEL), fastdebug)
926   DEBUG_PART := -debug
927 else ifneq ($(DEBUG_LEVEL), release)
928   DEBUG_PART := -$(DEBUG_LEVEL)
929 endif
930 ifeq ($(OPENJDK_TARGET_OS), windows)
931   JDK_BUNDLE_EXTENSION := zip
932 else
933   JDK_BUNDLE_EXTENSION := tar.gz
934 endif
935 JDK_BUNDLE_NAME := jdk-$(BASE_NAME)_bin$(DEBUG_PART).$(JDK_BUNDLE_EXTENSION)
936 JRE_BUNDLE_NAME := jre-$(BASE_NAME)_bin$(DEBUG_PART).$(JDK_BUNDLE_EXTENSION)
937 JDK_SYMBOLS_BUNDLE_NAME := jdk-$(BASE_NAME)_bin$(DEBUG_PART)-symbols.tar.gz
938 TEST_DEMOS_BUNDLE_NAME := jdk-$(BASE_NAME)_bin-tests-demos$(DEBUG_PART).tar.gz
939 TEST_BUNDLE_NAME := jdk-$(BASE_NAME)_bin-tests$(DEBUG_PART).tar.gz
</pre>
</td>
<td>
<hr />
<pre>
286 JVM_FEATURES_custom := @JVM_FEATURES_custom@
287 
288 # Used for make-time verifications
289 VALID_JVM_FEATURES := @VALID_JVM_FEATURES@
290 VALID_JVM_VARIANTS := @VALID_JVM_VARIANTS@
291 
292 # Control whether Hotspot builds gtest tests
293 BUILD_GTEST := @BUILD_GTEST@
294 
295 # Allow overriding the default hotspot library path
296 HOTSPOT_OVERRIDE_LIBPATH := @HOTSPOT_OVERRIDE_LIBPATH@
297 
298 # Control use of precompiled header in hotspot libjvm build
299 USE_PRECOMPILED_HEADER := @USE_PRECOMPILED_HEADER@
300 
301 # Only build headless support or not
302 ENABLE_HEADLESS_ONLY := @ENABLE_HEADLESS_ONLY@
303 
304 ENABLE_LINKTIME_GC := @ENABLE_LINKTIME_GC@
305 
<span class="line-added">306 # Ship debug symbols (e.g. pdbs on Windows)</span>
<span class="line-added">307 SHIP_DEBUG_SYMBOLS := @SHIP_DEBUG_SYMBOLS@</span>
<span class="line-added">308 </span>
309 ENABLE_FULL_DOCS := @ENABLE_FULL_DOCS@
310 
311 # JDK_OUTPUTDIR specifies where a working jvm is built.
312 # You can run $(JDK_OUTPUTDIR)/bin/java
313 
314 OUTPUTDIR := @OUTPUTDIR@
315 # Colon left out to be able to override IMAGES_OUTPUTDIR for bootcycle-images
316 SUPPORT_OUTPUTDIR=$(OUTPUTDIR)/support
317 BUILDTOOLS_OUTPUTDIR=$(OUTPUTDIR)/buildtools
318 
319 HOTSPOT_OUTPUTDIR=$(OUTPUTDIR)/hotspot
320 JDK_OUTPUTDIR=$(OUTPUTDIR)/jdk
321 IMAGES_OUTPUTDIR=$(OUTPUTDIR)/images
322 BUNDLES_OUTPUTDIR=$(OUTPUTDIR)/bundles
323 TESTMAKE_OUTPUTDIR=$(OUTPUTDIR)/test-make
324 MAKESUPPORT_OUTPUTDIR=$(OUTPUTDIR)/make-support
325 
326 # This does not get overridden in a bootcycle build
327 CONFIGURESUPPORT_OUTPUTDIR:=@CONFIGURESUPPORT_OUTPUTDIR@
328 BUILDJDK_OUTPUTDIR=$(OUTPUTDIR)/buildjdk
</pre>
<hr />
<pre>
641 JAVAC=@FIXPATH@ $(JAVAC_CMD)
642 JAVADOC=@FIXPATH@ $(JAVADOC_CMD)
643 JAR=@FIXPATH@ $(JAR_CMD)
644 JLINK = @FIXPATH@ $(JLINK_CMD) $(JAVA_TOOL_FLAGS_SMALL)
645 JMOD = @FIXPATH@ $(JMOD_CMD) $(JAVA_TOOL_FLAGS_SMALL)
646 JARSIGNER=@FIXPATH@ $(JARSIGNER_CMD)
647 # A specific java binary with specific options can be used to run
648 # the long running background sjavac servers and other long running tasks.
649 SJAVAC_SERVER_JAVA=@FIXPATH@ @FIXPATH_DETACH_FLAG@ $(SJAVAC_SERVER_JAVA_CMD) \
650     $(SJAVAC_SERVER_JAVA_FLAGS)
651 
652 # Hotspot sets this variable before reading the SPEC when compiling sa-jdi.jar. Avoid
653 # overriding that value by using ?=.
654 JAVAC_FLAGS?=@JAVAC_FLAGS@
655 
656 
657 BUILD_JAVA_FLAGS := @BOOTCYCLE_JVM_ARGS_BIG@
658 BUILD_JAVA=@FIXPATH@ $(BUILD_JDK)/bin/java $(BUILD_JAVA_FLAGS)
659 BUILD_JAR=@FIXPATH@ $(BUILD_JDK)/bin/jar
660 
<span class="line-modified">661 # Interim langtools modules and arguments</span>
662 INTERIM_LANGTOOLS_BASE_MODULES := java.compiler jdk.compiler jdk.javadoc
663 INTERIM_LANGTOOLS_MODULES := $(addsuffix .interim, $(INTERIM_LANGTOOLS_BASE_MODULES))
664 INTERIM_LANGTOOLS_ADD_EXPORTS := \
665     --add-exports java.base/sun.reflect.annotation=jdk.compiler.interim \
666     --add-exports java.base/jdk.internal.jmod=jdk.compiler.interim \
667     --add-exports java.base/jdk.internal.misc=jdk.compiler.interim \
668     #
669 INTERIM_LANGTOOLS_MODULES_COMMA := $(strip $(subst $(SPACE),$(COMMA),$(strip \
670     $(INTERIM_LANGTOOLS_MODULES))))
671 INTERIM_LANGTOOLS_ARGS := \
672     --limit-modules java.base,jdk.zipfs,$(INTERIM_LANGTOOLS_MODULES_COMMA) \
673     --add-modules $(INTERIM_LANGTOOLS_MODULES_COMMA) \
674     --module-path $(BUILDTOOLS_OUTPUTDIR)/interim_langtools_modules \
675     $(INTERIM_LANGTOOLS_ADD_EXPORTS) \
676     #
677 JAVAC_MAIN_CLASS = -m jdk.compiler.interim/com.sun.tools.javac.Main
678 JAVADOC_MAIN_CLASS = -m jdk.javadoc.interim/jdk.javadoc.internal.tool.Main
679 









680 # You run the new javac using the boot jdk with $(BOOT_JDK)/bin/java $(NEW_JAVAC) ...
681 # Use = assignment to be able to override in bootcycle-spec.gmk
682 NEW_JAVAC   = $(INTERIM_LANGTOOLS_ARGS) $(JAVAC_MAIN_CLASS)
683 NEW_JAVADOC = $(INTERIM_LANGTOOLS_ARGS) $(JAVADOC_MAIN_CLASS)
684 
685 JLINK_KEEP_PACKAGED_MODULES:=@JLINK_KEEP_PACKAGED_MODULES@
686 
687 # Base flags for RC
688 # Guarding this against resetting value. Legacy make files include spec multiple
689 # times.
690 ifndef RC_FLAGS
691   RC_FLAGS:=@RC_FLAGS@
692 endif
693 
694 # Tools adhering to a minimal and common standard of posix compliance.
695 AWK:=@AWK@
696 BASENAME:=@BASENAME@
697 CAT:=@CAT@
698 CCACHE:=@CCACHE@
699 # CD is going away, but remains to cater for legacy makefiles.
</pre>
<hr />
<pre>
890 INTERIM_JMODS_DIR := $(SUPPORT_OUTPUTDIR)/interim-jmods
891 INTERIM_IMAGE_DIR := $(SUPPORT_OUTPUTDIR)/interim-image
892 
893 # Docs image
894 DOCS_IMAGE_SUBDIR := docs
895 DOCS_IMAGE_DIR = $(IMAGES_OUTPUTDIR)/$(DOCS_IMAGE_SUBDIR)
896 # Output docs directly into image
897 DOCS_OUTPUTDIR := $(DOCS_IMAGE_DIR)
898 
899 # Static libs image
900 STATIC_LIBS_IMAGE_SUBDIR := static-libs
901 STATIC_LIBS_IMAGE_DIR := $(IMAGES_OUTPUTDIR)/$(STATIC_LIBS_IMAGE_SUBDIR)
902 
903 # Graal builder image
904 GRAAL_BUILDER_IMAGE_SUBDIR := graal-builder-jdk
905 GRAAL_BUILDER_IMAGE_DIR := $(IMAGES_OUTPUTDIR)/$(GRAAL_BUILDER_IMAGE_SUBDIR)
906 
907 # Macosx bundles directory definitions
908 JDK_MACOSX_BUNDLE_SUBDIR=jdk-bundle
909 JRE_MACOSX_BUNDLE_SUBDIR=jre-bundle
<span class="line-added">910 JDK_MACOSX_BUNDLE_SUBDIR_SIGNED=jdk-bundle-signed</span>
<span class="line-added">911 JRE_MACOSX_BUNDLE_SUBDIR_SIGNED=jre-bundle-signed</span>
912 JDK_MACOSX_BUNDLE_DIR=$(IMAGES_OUTPUTDIR)/$(JDK_MACOSX_BUNDLE_SUBDIR)
913 JRE_MACOSX_BUNDLE_DIR=$(IMAGES_OUTPUTDIR)/$(JRE_MACOSX_BUNDLE_SUBDIR)
<span class="line-modified">914 JDK_MACOSX_BUNDLE_DIR_SIGNED=$(IMAGES_OUTPUTDIR)/$(JDK_MACOSX_BUNDLE_SUBDIR_SIGNED)</span>
<span class="line-modified">915 JRE_MACOSX_BUNDLE_DIR_SIGNED=$(IMAGES_OUTPUTDIR)/$(JRE_MACOSX_BUNDLE_SUBDIR_SIGNED)</span>
<span class="line-added">916 JDK_MACOSX_BUNDLE_TOP_DIR=jdk-$(VERSION_NUMBER).jdk</span>
<span class="line-added">917 JRE_MACOSX_BUNDLE_TOP_DIR=jre-$(VERSION_NUMBER).jre</span>
<span class="line-added">918 JDK_MACOSX_CONTENTS_SUBDIR=$(JDK_MACOSX_BUNDLE_TOP_DIR)/Contents</span>
<span class="line-added">919 JRE_MACOSX_CONTENTS_SUBDIR=$(JRE_MACOSX_BUNDLE_TOP_DIR)/Contents</span>
920 JDK_MACOSX_CONTENTS_DIR=$(JDK_MACOSX_BUNDLE_DIR)/$(JDK_MACOSX_CONTENTS_SUBDIR)
921 JRE_MACOSX_CONTENTS_DIR=$(JRE_MACOSX_BUNDLE_DIR)/$(JRE_MACOSX_CONTENTS_SUBDIR)
922 
923 # Bundle names
924 BASE_NAME := $(VERSION_SHORT)+$(VERSION_BUILD)_$(OPENJDK_TARGET_BUNDLE_PLATFORM)
925 ifeq ($(DEBUG_LEVEL), fastdebug)
926   DEBUG_PART := -debug
927 else ifneq ($(DEBUG_LEVEL), release)
928   DEBUG_PART := -$(DEBUG_LEVEL)
929 endif
930 ifeq ($(OPENJDK_TARGET_OS), windows)
931   JDK_BUNDLE_EXTENSION := zip
932 else
933   JDK_BUNDLE_EXTENSION := tar.gz
934 endif
935 JDK_BUNDLE_NAME := jdk-$(BASE_NAME)_bin$(DEBUG_PART).$(JDK_BUNDLE_EXTENSION)
936 JRE_BUNDLE_NAME := jre-$(BASE_NAME)_bin$(DEBUG_PART).$(JDK_BUNDLE_EXTENSION)
937 JDK_SYMBOLS_BUNDLE_NAME := jdk-$(BASE_NAME)_bin$(DEBUG_PART)-symbols.tar.gz
938 TEST_DEMOS_BUNDLE_NAME := jdk-$(BASE_NAME)_bin-tests-demos$(DEBUG_PART).tar.gz
939 TEST_BUNDLE_NAME := jdk-$(BASE_NAME)_bin-tests$(DEBUG_PART).tar.gz
</pre>
</td>
</tr>
</table>
<center><a href="source-dirs.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="toolchain.m4.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>