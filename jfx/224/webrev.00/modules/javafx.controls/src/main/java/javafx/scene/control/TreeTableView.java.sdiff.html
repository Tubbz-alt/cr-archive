<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/main/java/javafx/scene/control/TreeTableView.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../test/java/test/javafx/scene/control/TreeTableViewTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.controls/src/main/java/javafx/scene/control/TreeTableView.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
2541                         startRow++;
2542                     } else if (e.wasPermutated()) {
2543                         // General approach:
2544                         //   -- detected a sort has happened
2545                         //   -- Create a permutation lookup map (1)
2546                         //   -- dump all the selected indices into a list (2)
2547                         //   -- create a list containing the new indices (3)
2548                         //   -- for each previously-selected index (4)
2549                         //     -- if index is in the permutation lookup map
2550                         //       -- add the new index to the new indices list
2551                         //   -- Perform batch selection (5)
2552 
2553                         startAtomic();
2554 
2555                         final int offset = startRow + 1;
2556 
2557                         // (1)
2558                         int length = e.getTo() - e.getFrom();
2559                         HashMap&lt;Integer, Integer&gt; pMap = new HashMap&lt;&gt; (length);
2560                         for (int i = e.getFrom(); i &lt; e.getTo(); i++) {
<span class="line-modified">2561                             pMap.put(i, e.getChange().getPermutation(i));</span>


2562                         }
<span class="line-removed">2563 </span>
2564                         // (2)
2565                         List&lt;TreeTablePosition&lt;S,?&gt;&gt; selectedIndices = new ArrayList&lt;&gt;(getSelectedCells());
2566 
2567                         // (3)
2568                         List&lt;TreeTablePosition&lt;S,?&gt;&gt; newIndices = new ArrayList&lt;&gt;(selectedIndices.size());
2569 
2570                         // (4)
2571                         boolean selectionIndicesChanged = false;
2572                         for (int i = 0; i &lt; selectedIndices.size(); i++) {
2573                             final TreeTablePosition&lt;S,?&gt; oldIndex = selectedIndices.get(i);
2574                             final int oldRow = oldIndex.getRow() - offset;
2575 
2576                             if (pMap.containsKey(oldRow)) {
2577                                 int newIndex = pMap.get(oldRow) + offset;
2578 
2579                                 selectionIndicesChanged = selectionIndicesChanged || newIndex != oldRow;
2580 
2581                                 newIndices.add(new TreeTablePosition&lt;&gt;(oldIndex.getTreeTableView(), newIndex, oldIndex.getTableColumn()));
2582                             }
2583 
</pre>
</td>
<td>
<hr />
<pre>
2541                         startRow++;
2542                     } else if (e.wasPermutated()) {
2543                         // General approach:
2544                         //   -- detected a sort has happened
2545                         //   -- Create a permutation lookup map (1)
2546                         //   -- dump all the selected indices into a list (2)
2547                         //   -- create a list containing the new indices (3)
2548                         //   -- for each previously-selected index (4)
2549                         //     -- if index is in the permutation lookup map
2550                         //       -- add the new index to the new indices list
2551                         //   -- Perform batch selection (5)
2552 
2553                         startAtomic();
2554 
2555                         final int offset = startRow + 1;
2556 
2557                         // (1)
2558                         int length = e.getTo() - e.getFrom();
2559                         HashMap&lt;Integer, Integer&gt; pMap = new HashMap&lt;&gt; (length);
2560                         for (int i = e.getFrom(); i &lt; e.getTo(); i++) {
<span class="line-modified">2561                             if (e.getChange().wasPermutated()) {</span>
<span class="line-added">2562                                 pMap.put(i, e.getChange().getPermutation(i));</span>
<span class="line-added">2563                             }</span>
2564                         }

2565                         // (2)
2566                         List&lt;TreeTablePosition&lt;S,?&gt;&gt; selectedIndices = new ArrayList&lt;&gt;(getSelectedCells());
2567 
2568                         // (3)
2569                         List&lt;TreeTablePosition&lt;S,?&gt;&gt; newIndices = new ArrayList&lt;&gt;(selectedIndices.size());
2570 
2571                         // (4)
2572                         boolean selectionIndicesChanged = false;
2573                         for (int i = 0; i &lt; selectedIndices.size(); i++) {
2574                             final TreeTablePosition&lt;S,?&gt; oldIndex = selectedIndices.get(i);
2575                             final int oldRow = oldIndex.getRow() - offset;
2576 
2577                             if (pMap.containsKey(oldRow)) {
2578                                 int newIndex = pMap.get(oldRow) + offset;
2579 
2580                                 selectionIndicesChanged = selectionIndicesChanged || newIndex != oldRow;
2581 
2582                                 newIndices.add(new TreeTablePosition&lt;&gt;(oldIndex.getTreeTableView(), newIndex, oldIndex.getTableColumn()));
2583                             }
2584 
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../test/java/test/javafx/scene/control/TreeTableViewTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>