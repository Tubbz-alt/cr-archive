<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/sqlite/sqlite3.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="sqlite3.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="sqlite3ext.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/sqlite/sqlite3.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  106 ** The SQLITE_VERSION_NUMBER for any given release of SQLite will also
  107 ** be larger than the release from which it is derived.  Either Y will
  108 ** be held constant and Z will be incremented or else Y will be incremented
  109 ** and Z will be reset to zero.
  110 **
  111 ** Since [version 3.6.18] ([dateof:3.6.18]),
  112 ** SQLite source code has been stored in the
  113 ** &lt;a href=&quot;http://www.fossil-scm.org/&quot;&gt;Fossil configuration management
  114 ** system&lt;/a&gt;.  ^The SQLITE_SOURCE_ID macro evaluates to
  115 ** a string which identifies a particular check-in of SQLite
  116 ** within its configuration management system.  ^The SQLITE_SOURCE_ID
  117 ** string contains the date and time of the check-in (UTC) and a SHA1
  118 ** or SHA3-256 hash of the entire source tree.  If the source code has
  119 ** been edited in any way since it was last checked in, then the last
  120 ** four hexadecimal digits of the hash may be modified.
  121 **
  122 ** See also: [sqlite3_libversion()],
  123 ** [sqlite3_libversion_number()], [sqlite3_sourceid()],
  124 ** [sqlite_version()] and [sqlite_source_id()].
  125 */
<span class="line-modified">  126 #define SQLITE_VERSION        &quot;3.31.1&quot;</span>
<span class="line-modified">  127 #define SQLITE_VERSION_NUMBER 3031001</span>
<span class="line-modified">  128 #define SQLITE_SOURCE_ID      &quot;2020-01-27 19:55:54 3bfa9cc97da10598521b342961df8f5f68c7388fa117345eeb516eaa837bb4d6&quot;</span>
  129 
  130 /*
  131 ** CAPI3REF: Run-Time Library Version Numbers
  132 ** KEYWORDS: sqlite3_version sqlite3_sourceid
  133 **
  134 ** These interfaces provide the same information as the [SQLITE_VERSION],
  135 ** [SQLITE_VERSION_NUMBER], and [SQLITE_SOURCE_ID] C preprocessor macros
  136 ** but are associated with the library instead of the header file.  ^(Cautious
  137 ** programmers might include assert() statements in their application to
  138 ** verify that values returned by these interfaces match the macros in
  139 ** the header, and thus ensure that the application is
  140 ** compiled with matching library and header files.
  141 **
  142 ** &lt;blockquote&gt;&lt;pre&gt;
  143 ** assert( sqlite3_libversion_number()==SQLITE_VERSION_NUMBER );
  144 ** assert( strncmp(sqlite3_sourceid(),SQLITE_SOURCE_ID,80)==0 );
  145 ** assert( strcmp(sqlite3_libversion(),SQLITE_VERSION)==0 );
  146 ** &lt;/pre&gt;&lt;/blockquote&gt;)^
  147 **
  148 ** ^The sqlite3_version[] string constant contains the text of [SQLITE_VERSION]
</pre>
<hr />
<pre>
  282 typedef sqlite_uint64 sqlite3_uint64;
  283 
  284 /*
  285 ** If compiling for a processor that lacks floating point support,
  286 ** substitute integer for floating-point.
  287 */
  288 #ifdef SQLITE_OMIT_FLOATING_POINT
  289 # define double sqlite3_int64
  290 #endif
  291 
  292 /*
  293 ** CAPI3REF: Closing A Database Connection
  294 ** DESTRUCTOR: sqlite3
  295 **
  296 ** ^The sqlite3_close() and sqlite3_close_v2() routines are destructors
  297 ** for the [sqlite3] object.
  298 ** ^Calls to sqlite3_close() and sqlite3_close_v2() return [SQLITE_OK] if
  299 ** the [sqlite3] object is successfully destroyed and all associated
  300 ** resources are deallocated.
  301 **
<span class="line-modified">  302 ** ^If the database connection is associated with unfinalized prepared</span>
<span class="line-modified">  303 ** statements or unfinished sqlite3_backup objects then sqlite3_close()</span>
<span class="line-removed">  304 ** will leave the database connection open and return [SQLITE_BUSY].</span>
<span class="line-removed">  305 ** ^If sqlite3_close_v2() is called with unfinalized prepared statements</span>
<span class="line-removed">  306 ** and/or unfinished sqlite3_backups, then the database connection becomes</span>
<span class="line-removed">  307 ** an unusable &quot;zombie&quot; which will automatically be deallocated when the</span>
<span class="line-removed">  308 ** last prepared statement is finalized or the last sqlite3_backup is</span>
<span class="line-removed">  309 ** finished.  The sqlite3_close_v2() interface is intended for use with</span>
<span class="line-removed">  310 ** host languages that are garbage collected, and where the order in which</span>
<span class="line-removed">  311 ** destructors are called is arbitrary.</span>
<span class="line-removed">  312 **</span>
<span class="line-removed">  313 ** Applications should [sqlite3_finalize | finalize] all [prepared statements],</span>
<span class="line-removed">  314 ** [sqlite3_blob_close | close] all [BLOB handles], and</span>
  315 ** [sqlite3_backup_finish | finish] all [sqlite3_backup] objects associated
<span class="line-modified">  316 ** with the [sqlite3] object prior to attempting to close the object.  ^If</span>
<span class="line-modified">  317 ** sqlite3_close_v2() is called on a [database connection] that still has</span>
<span class="line-modified">  318 ** outstanding [prepared statements], [BLOB handles], and/or</span>
<span class="line-modified">  319 ** [sqlite3_backup] objects then it returns [SQLITE_OK] and the deallocation</span>
<span class="line-modified">  320 ** of resources is deferred until all [prepared statements], [BLOB handles],</span>
<span class="line-modified">  321 ** and [sqlite3_backup] objects are also destroyed.</span>







  322 **
  323 ** ^If an [sqlite3] object is destroyed while a transaction is open,
  324 ** the transaction is automatically rolled back.
  325 **
  326 ** The C parameter to [sqlite3_close(C)] and [sqlite3_close_v2(C)]
  327 ** must be either a NULL
  328 ** pointer or an [sqlite3] object pointer obtained
  329 ** from [sqlite3_open()], [sqlite3_open16()], or
  330 ** [sqlite3_open_v2()], and not previously closed.
  331 ** ^Calling sqlite3_close() or sqlite3_close_v2() with a NULL pointer
  332 ** argument is a harmless no-op.
  333 */
  334 SQLITE_API int sqlite3_close(sqlite3*);
  335 SQLITE_API int sqlite3_close_v2(sqlite3*);
  336 
  337 /*
  338 ** The type for a callback function.
  339 ** This is legacy and deprecated.  It is included for historical
  340 ** compatibility and is not documented.
  341 */
</pre>
<hr />
<pre>
  490 #define SQLITE_IOERR_NOMEM             (SQLITE_IOERR | (12&lt;&lt;8))
  491 #define SQLITE_IOERR_ACCESS            (SQLITE_IOERR | (13&lt;&lt;8))
  492 #define SQLITE_IOERR_CHECKRESERVEDLOCK (SQLITE_IOERR | (14&lt;&lt;8))
  493 #define SQLITE_IOERR_LOCK              (SQLITE_IOERR | (15&lt;&lt;8))
  494 #define SQLITE_IOERR_CLOSE             (SQLITE_IOERR | (16&lt;&lt;8))
  495 #define SQLITE_IOERR_DIR_CLOSE         (SQLITE_IOERR | (17&lt;&lt;8))
  496 #define SQLITE_IOERR_SHMOPEN           (SQLITE_IOERR | (18&lt;&lt;8))
  497 #define SQLITE_IOERR_SHMSIZE           (SQLITE_IOERR | (19&lt;&lt;8))
  498 #define SQLITE_IOERR_SHMLOCK           (SQLITE_IOERR | (20&lt;&lt;8))
  499 #define SQLITE_IOERR_SHMMAP            (SQLITE_IOERR | (21&lt;&lt;8))
  500 #define SQLITE_IOERR_SEEK              (SQLITE_IOERR | (22&lt;&lt;8))
  501 #define SQLITE_IOERR_DELETE_NOENT      (SQLITE_IOERR | (23&lt;&lt;8))
  502 #define SQLITE_IOERR_MMAP              (SQLITE_IOERR | (24&lt;&lt;8))
  503 #define SQLITE_IOERR_GETTEMPPATH       (SQLITE_IOERR | (25&lt;&lt;8))
  504 #define SQLITE_IOERR_CONVPATH          (SQLITE_IOERR | (26&lt;&lt;8))
  505 #define SQLITE_IOERR_VNODE             (SQLITE_IOERR | (27&lt;&lt;8))
  506 #define SQLITE_IOERR_AUTH              (SQLITE_IOERR | (28&lt;&lt;8))
  507 #define SQLITE_IOERR_BEGIN_ATOMIC      (SQLITE_IOERR | (29&lt;&lt;8))
  508 #define SQLITE_IOERR_COMMIT_ATOMIC     (SQLITE_IOERR | (30&lt;&lt;8))
  509 #define SQLITE_IOERR_ROLLBACK_ATOMIC   (SQLITE_IOERR | (31&lt;&lt;8))

  510 #define SQLITE_LOCKED_SHAREDCACHE      (SQLITE_LOCKED |  (1&lt;&lt;8))
  511 #define SQLITE_LOCKED_VTAB             (SQLITE_LOCKED |  (2&lt;&lt;8))
  512 #define SQLITE_BUSY_RECOVERY           (SQLITE_BUSY   |  (1&lt;&lt;8))
  513 #define SQLITE_BUSY_SNAPSHOT           (SQLITE_BUSY   |  (2&lt;&lt;8))

  514 #define SQLITE_CANTOPEN_NOTEMPDIR      (SQLITE_CANTOPEN | (1&lt;&lt;8))
  515 #define SQLITE_CANTOPEN_ISDIR          (SQLITE_CANTOPEN | (2&lt;&lt;8))
  516 #define SQLITE_CANTOPEN_FULLPATH       (SQLITE_CANTOPEN | (3&lt;&lt;8))
  517 #define SQLITE_CANTOPEN_CONVPATH       (SQLITE_CANTOPEN | (4&lt;&lt;8))
  518 #define SQLITE_CANTOPEN_DIRTYWAL       (SQLITE_CANTOPEN | (5&lt;&lt;8)) /* Not Used */
  519 #define SQLITE_CANTOPEN_SYMLINK        (SQLITE_CANTOPEN | (6&lt;&lt;8))
  520 #define SQLITE_CORRUPT_VTAB            (SQLITE_CORRUPT | (1&lt;&lt;8))
  521 #define SQLITE_CORRUPT_SEQUENCE        (SQLITE_CORRUPT | (2&lt;&lt;8))

  522 #define SQLITE_READONLY_RECOVERY       (SQLITE_READONLY | (1&lt;&lt;8))
  523 #define SQLITE_READONLY_CANTLOCK       (SQLITE_READONLY | (2&lt;&lt;8))
  524 #define SQLITE_READONLY_ROLLBACK       (SQLITE_READONLY | (3&lt;&lt;8))
  525 #define SQLITE_READONLY_DBMOVED        (SQLITE_READONLY | (4&lt;&lt;8))
  526 #define SQLITE_READONLY_CANTINIT       (SQLITE_READONLY | (5&lt;&lt;8))
  527 #define SQLITE_READONLY_DIRECTORY      (SQLITE_READONLY | (6&lt;&lt;8))
  528 #define SQLITE_ABORT_ROLLBACK          (SQLITE_ABORT | (2&lt;&lt;8))
  529 #define SQLITE_CONSTRAINT_CHECK        (SQLITE_CONSTRAINT | (1&lt;&lt;8))
  530 #define SQLITE_CONSTRAINT_COMMITHOOK   (SQLITE_CONSTRAINT | (2&lt;&lt;8))
  531 #define SQLITE_CONSTRAINT_FOREIGNKEY   (SQLITE_CONSTRAINT | (3&lt;&lt;8))
  532 #define SQLITE_CONSTRAINT_FUNCTION     (SQLITE_CONSTRAINT | (4&lt;&lt;8))
  533 #define SQLITE_CONSTRAINT_NOTNULL      (SQLITE_CONSTRAINT | (5&lt;&lt;8))
  534 #define SQLITE_CONSTRAINT_PRIMARYKEY   (SQLITE_CONSTRAINT | (6&lt;&lt;8))
  535 #define SQLITE_CONSTRAINT_TRIGGER      (SQLITE_CONSTRAINT | (7&lt;&lt;8))
  536 #define SQLITE_CONSTRAINT_UNIQUE       (SQLITE_CONSTRAINT | (8&lt;&lt;8))
  537 #define SQLITE_CONSTRAINT_VTAB         (SQLITE_CONSTRAINT | (9&lt;&lt;8))
  538 #define SQLITE_CONSTRAINT_ROWID        (SQLITE_CONSTRAINT |(10&lt;&lt;8))
  539 #define SQLITE_CONSTRAINT_PINNED       (SQLITE_CONSTRAINT |(11&lt;&lt;8))
  540 #define SQLITE_NOTICE_RECOVER_WAL      (SQLITE_NOTICE | (1&lt;&lt;8))
  541 #define SQLITE_NOTICE_RECOVER_ROLLBACK (SQLITE_NOTICE | (2&lt;&lt;8))
</pre>
<hr />
<pre>
 1070 ** operations since the previous successful call to
 1071 ** [SQLITE_FCNTL_BEGIN_ATOMIC_WRITE] to be performed atomically.
 1072 ** This file control returns [SQLITE_OK] if and only if the writes were
 1073 ** all performed successfully and have been committed to persistent storage.
 1074 ** ^Regardless of whether or not it is successful, this file control takes
 1075 ** the file descriptor out of batch write mode so that all subsequent
 1076 ** write operations are independent.
 1077 ** ^SQLite will never invoke SQLITE_FCNTL_COMMIT_ATOMIC_WRITE without
 1078 ** a prior successful call to [SQLITE_FCNTL_BEGIN_ATOMIC_WRITE].
 1079 **
 1080 ** &lt;li&gt;[[SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE]]
 1081 ** The [SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE] opcode causes all write
 1082 ** operations since the previous successful call to
 1083 ** [SQLITE_FCNTL_BEGIN_ATOMIC_WRITE] to be rolled back.
 1084 ** ^This file control takes the file descriptor out of batch write mode
 1085 ** so that all subsequent write operations are independent.
 1086 ** ^SQLite will never invoke SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE without
 1087 ** a prior successful call to [SQLITE_FCNTL_BEGIN_ATOMIC_WRITE].
 1088 **
 1089 ** &lt;li&gt;[[SQLITE_FCNTL_LOCK_TIMEOUT]]
<span class="line-modified"> 1090 ** The [SQLITE_FCNTL_LOCK_TIMEOUT] opcode causes attempts to obtain</span>
<span class="line-modified"> 1091 ** a file lock using the xLock or xShmLock methods of the VFS to wait</span>
<span class="line-modified"> 1092 ** for up to M milliseconds before failing, where M is the single</span>
<span class="line-modified"> 1093 ** unsigned integer parameter.</span>


 1094 **
 1095 ** &lt;li&gt;[[SQLITE_FCNTL_DATA_VERSION]]
 1096 ** The [SQLITE_FCNTL_DATA_VERSION] opcode is used to detect changes to
 1097 ** a database file.  The argument is a pointer to a 32-bit unsigned integer.
 1098 ** The &quot;data version&quot; for the pager is written into the pointer.  The
 1099 ** &quot;data version&quot; changes whenever any change occurs to the corresponding
 1100 ** database file, either through SQL statements on the same database
 1101 ** connection or through transactions committed by separate database
 1102 ** connections possibly in other processes. The [sqlite3_total_changes()]
 1103 ** interface can be used to find if any database on the connection has changed,
 1104 ** but that interface responds to changes on TEMP as well as MAIN and does
 1105 ** not provide a mechanism to detect changes to MAIN only.  Also, the
 1106 ** [sqlite3_total_changes()] interface responds to internal changes only and
 1107 ** omits changes made by other database connections.  The
 1108 ** [PRAGMA data_version] command provides a mechanism to detect changes to
 1109 ** a single attached database that occur due to other database connections,
 1110 ** but omits changes implemented by the database connection on which it is
 1111 ** called.  This file control is the only mechanism to detect changes that
 1112 ** happen either internally or externally and that are associated with
 1113 ** a particular attached database.
 1114 **





 1115 ** &lt;li&gt;[[SQLITE_FCNTL_CKPT_DONE]]
 1116 ** The [SQLITE_FCNTL_CKPT_DONE] opcode is invoked from within a checkpoint
 1117 ** in wal mode after the client has finished copying pages from the wal
 1118 ** file to the database file, but before the *-shm file is updated to
 1119 ** record the fact that the pages have been checkpointed.
 1120 ** &lt;/ul&gt;
 1121 */
 1122 #define SQLITE_FCNTL_LOCKSTATE               1
 1123 #define SQLITE_FCNTL_GET_LOCKPROXYFILE       2
 1124 #define SQLITE_FCNTL_SET_LOCKPROXYFILE       3
 1125 #define SQLITE_FCNTL_LAST_ERRNO              4
 1126 #define SQLITE_FCNTL_SIZE_HINT               5
 1127 #define SQLITE_FCNTL_CHUNK_SIZE              6
 1128 #define SQLITE_FCNTL_FILE_POINTER            7
 1129 #define SQLITE_FCNTL_SYNC_OMITTED            8
 1130 #define SQLITE_FCNTL_WIN32_AV_RETRY          9
 1131 #define SQLITE_FCNTL_PERSIST_WAL            10
 1132 #define SQLITE_FCNTL_OVERWRITE              11
 1133 #define SQLITE_FCNTL_VFSNAME                12
 1134 #define SQLITE_FCNTL_POWERSAFE_OVERWRITE    13
</pre>
<hr />
<pre>
 1138 #define SQLITE_FCNTL_MMAP_SIZE              18
 1139 #define SQLITE_FCNTL_TRACE                  19
 1140 #define SQLITE_FCNTL_HAS_MOVED              20
 1141 #define SQLITE_FCNTL_SYNC                   21
 1142 #define SQLITE_FCNTL_COMMIT_PHASETWO        22
 1143 #define SQLITE_FCNTL_WIN32_SET_HANDLE       23
 1144 #define SQLITE_FCNTL_WAL_BLOCK              24
 1145 #define SQLITE_FCNTL_ZIPVFS                 25
 1146 #define SQLITE_FCNTL_RBU                    26
 1147 #define SQLITE_FCNTL_VFS_POINTER            27
 1148 #define SQLITE_FCNTL_JOURNAL_POINTER        28
 1149 #define SQLITE_FCNTL_WIN32_GET_HANDLE       29
 1150 #define SQLITE_FCNTL_PDB                    30
 1151 #define SQLITE_FCNTL_BEGIN_ATOMIC_WRITE     31
 1152 #define SQLITE_FCNTL_COMMIT_ATOMIC_WRITE    32
 1153 #define SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE  33
 1154 #define SQLITE_FCNTL_LOCK_TIMEOUT           34
 1155 #define SQLITE_FCNTL_DATA_VERSION           35
 1156 #define SQLITE_FCNTL_SIZE_LIMIT             36
 1157 #define SQLITE_FCNTL_CKPT_DONE              37


 1158 
 1159 /* deprecated names */
 1160 #define SQLITE_GET_LOCKPROXYFILE      SQLITE_FCNTL_GET_LOCKPROXYFILE
 1161 #define SQLITE_SET_LOCKPROXYFILE      SQLITE_FCNTL_SET_LOCKPROXYFILE
 1162 #define SQLITE_LAST_ERRNO             SQLITE_FCNTL_LAST_ERRNO
 1163 
 1164 
 1165 /*
 1166 ** CAPI3REF: Mutex Handle
 1167 **
 1168 ** The mutex module within SQLite defines [sqlite3_mutex] to be an
 1169 ** abstract type for a mutex object.  The SQLite core never looks
 1170 ** at the internal representation of an [sqlite3_mutex].  It only
 1171 ** deals with pointers to the [sqlite3_mutex] object.
 1172 **
 1173 ** Mutexes are created using [sqlite3_mutex_alloc()].
 1174 */
 1175 typedef struct sqlite3_mutex sqlite3_mutex;
 1176 
 1177 /*
</pre>
<hr />
<pre>
 3516   sqlite3 **ppDb          /* OUT: SQLite db handle */
 3517 );
 3518 SQLITE_API int sqlite3_open16(
 3519   const void *filename,   /* Database filename (UTF-16) */
 3520   sqlite3 **ppDb          /* OUT: SQLite db handle */
 3521 );
 3522 SQLITE_API int sqlite3_open_v2(
 3523   const char *filename,   /* Database filename (UTF-8) */
 3524   sqlite3 **ppDb,         /* OUT: SQLite db handle */
 3525   int flags,              /* Flags */
 3526   const char *zVfs        /* Name of VFS module to use */
 3527 );
 3528 
 3529 /*
 3530 ** CAPI3REF: Obtain Values For URI Parameters
 3531 **
 3532 ** These are utility routines, useful to [VFS|custom VFS implementations],
 3533 ** that check if a database file was a URI that contained a specific query
 3534 ** parameter, and if so obtains the value of that query parameter.
 3535 **
<span class="line-modified"> 3536 ** If F is the database filename pointer passed into the xOpen() method of</span>
<span class="line-modified"> 3537 ** a VFS implementation or it is the return value of [sqlite3_db_filename()]</span>











 3538 ** and if P is the name of the query parameter, then
 3539 ** sqlite3_uri_parameter(F,P) returns the value of the P
 3540 ** parameter if it exists or a NULL pointer if P does not appear as a
 3541 ** query parameter on F.  If P is a query parameter of F and it
 3542 ** has no explicit value, then sqlite3_uri_parameter(F,P) returns
 3543 ** a pointer to an empty string.
 3544 **
 3545 ** The sqlite3_uri_boolean(F,P,B) routine assumes that P is a boolean
 3546 ** parameter and returns true (1) or false (0) according to the value
 3547 ** of P.  The sqlite3_uri_boolean(F,P,B) routine returns true (1) if the
 3548 ** value of query parameter P is one of &quot;yes&quot;, &quot;true&quot;, or &quot;on&quot; in any
 3549 ** case or if the value begins with a non-zero number.  The
 3550 ** sqlite3_uri_boolean(F,P,B) routines returns false (0) if the value of
 3551 ** query parameter P is one of &quot;no&quot;, &quot;false&quot;, or &quot;off&quot; in any case or
 3552 ** if the value begins with a numeric zero.  If P is not a query
 3553 ** parameter on F or if the value of P does not match any of the
 3554 ** above, then sqlite3_uri_boolean(F,P,B) returns (B!=0).
 3555 **
 3556 ** The sqlite3_uri_int64(F,P,D) routine converts the value of P into a
 3557 ** 64-bit signed integer and returns that integer, or D if P does not
</pre>
<hr />
<pre>
 3600 ** If F is the name of an sqlite database file, journal file, or WAL file
 3601 ** passed by the SQLite core into the VFS, or if F is a database filename
 3602 ** obtained from [sqlite3_db_filename()], then sqlite3_filename_journal(F)
 3603 ** returns the name of the corresponding rollback journal file.
 3604 **
 3605 ** If F is the name of an sqlite database file, journal file, or WAL file
 3606 ** that was passed by the SQLite core into the VFS, or if F is a database
 3607 ** filename obtained from [sqlite3_db_filename()], then
 3608 ** sqlite3_filename_wal(F) returns the name of the corresponding
 3609 ** WAL file.
 3610 **
 3611 ** In all of the above, if F is not the name of a database, journal or WAL
 3612 ** filename passed into the VFS from the SQLite core and F is not the
 3613 ** return value from [sqlite3_db_filename()], then the result is
 3614 ** undefined and is likely a memory access violation.
 3615 */
 3616 SQLITE_API const char *sqlite3_filename_database(const char*);
 3617 SQLITE_API const char *sqlite3_filename_journal(const char*);
 3618 SQLITE_API const char *sqlite3_filename_wal(const char*);
 3619 








































































 3620 
 3621 /*
 3622 ** CAPI3REF: Error Codes And Messages
 3623 ** METHOD: sqlite3
 3624 **
 3625 ** ^If the most recent sqlite3_* API call associated with
 3626 ** [database connection] D failed, then the sqlite3_errcode(D) interface
 3627 ** returns the numeric [result code] or [extended result code] for that
 3628 ** API call.
 3629 ** ^The sqlite3_extended_errcode()
 3630 ** interface is the same except that it always returns the
 3631 ** [extended result code] even when extended result codes are
 3632 ** disabled.
 3633 **
 3634 ** The values returned by sqlite3_errcode() and/or
 3635 ** sqlite3_extended_errcode() might change with each API call.
 3636 ** Except, there are some interfaces that are guaranteed to never
 3637 ** change the value of the error code.  The error-code preserving
 3638 ** interfaces are:
 3639 **
</pre>
<hr />
<pre>
 4182 ** &lt;li&gt;  $VVV
 4183 ** &lt;/ul&gt;
 4184 **
 4185 ** In the templates above, NNN represents an integer literal,
 4186 ** and VVV represents an alphanumeric identifier.)^  ^The values of these
 4187 ** parameters (also called &quot;host parameter names&quot; or &quot;SQL parameters&quot;)
 4188 ** can be set using the sqlite3_bind_*() routines defined here.
 4189 **
 4190 ** ^The first argument to the sqlite3_bind_*() routines is always
 4191 ** a pointer to the [sqlite3_stmt] object returned from
 4192 ** [sqlite3_prepare_v2()] or its variants.
 4193 **
 4194 ** ^The second argument is the index of the SQL parameter to be set.
 4195 ** ^The leftmost SQL parameter has an index of 1.  ^When the same named
 4196 ** SQL parameter is used more than once, second and subsequent
 4197 ** occurrences have the same index as the first occurrence.
 4198 ** ^The index for named parameters can be looked up using the
 4199 ** [sqlite3_bind_parameter_index()] API if desired.  ^The index
 4200 ** for &quot;?NNN&quot; parameters is the value of NNN.
 4201 ** ^The NNN value must be between 1 and the [sqlite3_limit()]
<span class="line-modified"> 4202 ** parameter [SQLITE_LIMIT_VARIABLE_NUMBER] (default value: 999).</span>
 4203 **
 4204 ** ^The third argument is the value to bind to the parameter.
 4205 ** ^If the third parameter to sqlite3_bind_text() or sqlite3_bind_text16()
 4206 ** or sqlite3_bind_blob() is a NULL pointer then the fourth parameter
 4207 ** is ignored and the end result is the same as sqlite3_bind_null().


















 4208 **
 4209 ** ^(In those routines that have a fourth argument, its value is the
 4210 ** number of bytes in the parameter.  To be clear: the value is the
 4211 ** number of &lt;u&gt;bytes&lt;/u&gt; in the value, not the number of characters.)^
 4212 ** ^If the fourth parameter to sqlite3_bind_text() or sqlite3_bind_text16()
 4213 ** is negative, then the length of the string is
 4214 ** the number of bytes up to the first zero terminator.
 4215 ** If the fourth parameter to sqlite3_bind_blob() is negative, then
 4216 ** the behavior is undefined.
 4217 ** If a non-negative fourth parameter is provided to sqlite3_bind_text()
 4218 ** or sqlite3_bind_text16() or sqlite3_bind_text64() then
 4219 ** that parameter must be the byte offset
 4220 ** where the NUL terminator would occur assuming the string were NUL
<span class="line-modified"> 4221 ** terminated.  If any NUL characters occur at byte offsets less than</span>
 4222 ** the value of the fourth parameter then the resulting string value will
 4223 ** contain embedded NULs.  The result of expressions involving strings
 4224 ** with embedded NULs is undefined.
 4225 **
 4226 ** ^The fifth argument to the BLOB and string binding interfaces
 4227 ** is a destructor used to dispose of the BLOB or
 4228 ** string after SQLite has finished with it.  ^The destructor is called
 4229 ** to dispose of the BLOB or string even if the call to the bind API fails,
 4230 ** except the destructor is not called if the third parameter is a NULL
 4231 ** pointer or the fourth parameter is negative.
 4232 ** ^If the fifth argument is
 4233 ** the special value [SQLITE_STATIC], then SQLite assumes that the
 4234 ** information is in static, unmanaged space and does not need to be freed.
 4235 ** ^If the fifth argument has the value [SQLITE_TRANSIENT], then
 4236 ** SQLite makes its own private copy of the data immediately, before
 4237 ** the sqlite3_bind_*() routine returns.
 4238 **
 4239 ** ^The sixth argument to sqlite3_bind_text64() must be one of
 4240 ** [SQLITE_UTF8], [SQLITE_UTF16], [SQLITE_UTF16BE], or [SQLITE_UTF16LE]
 4241 ** to specify the encoding of the text in the third parameter.  If
</pre>
<hr />
<pre>
 5369 **
 5370 ** ^The first time the sqlite3_aggregate_context(C,N) routine is called
 5371 ** for a particular aggregate function, SQLite allocates
 5372 ** N bytes of memory, zeroes out that memory, and returns a pointer
 5373 ** to the new memory. ^On second and subsequent calls to
 5374 ** sqlite3_aggregate_context() for the same aggregate function instance,
 5375 ** the same buffer is returned.  Sqlite3_aggregate_context() is normally
 5376 ** called once for each invocation of the xStep callback and then one
 5377 ** last time when the xFinal callback is invoked.  ^(When no rows match
 5378 ** an aggregate query, the xStep() callback of the aggregate function
 5379 ** implementation is never called and xFinal() is called exactly once.
 5380 ** In those cases, sqlite3_aggregate_context() might be called for the
 5381 ** first time from within xFinal().)^
 5382 **
 5383 ** ^The sqlite3_aggregate_context(C,N) routine returns a NULL pointer
 5384 ** when first called if N is less than or equal to zero or if a memory
 5385 ** allocate error occurs.
 5386 **
 5387 ** ^(The amount of space allocated by sqlite3_aggregate_context(C,N) is
 5388 ** determined by the N parameter on first successful call.  Changing the
<span class="line-modified"> 5389 ** value of N in any subsequents call to sqlite3_aggregate_context() within</span>
 5390 ** the same aggregate function instance will not resize the memory
 5391 ** allocation.)^  Within the xFinal callback, it is customary to set
 5392 ** N=0 in calls to sqlite3_aggregate_context(C,N) so that no
 5393 ** pointless memory allocations occur.
 5394 **
 5395 ** ^SQLite automatically frees the memory allocated by
 5396 ** sqlite3_aggregate_context() when the aggregate query concludes.
 5397 **
 5398 ** The first parameter must be a copy of the
 5399 ** [sqlite3_context | SQL function context] that is the first parameter
 5400 ** to the xStep or xFinal callback routine that implements the aggregate
 5401 ** function.
 5402 **
 5403 ** This routine must be called from the same thread in which
 5404 ** the aggregate SQL function is running.
 5405 */
 5406 SQLITE_API void *sqlite3_aggregate_context(sqlite3_context*, int nBytes);
 5407 
 5408 /*
 5409 ** CAPI3REF: User Data For Functions
</pre>
<hr />
<pre>
 5526 **
 5527 ** ^The sqlite3_result_blob() interface sets the result from
 5528 ** an application-defined function to be the BLOB whose content is pointed
 5529 ** to by the second parameter and which is N bytes long where N is the
 5530 ** third parameter.
 5531 **
 5532 ** ^The sqlite3_result_zeroblob(C,N) and sqlite3_result_zeroblob64(C,N)
 5533 ** interfaces set the result of the application-defined function to be
 5534 ** a BLOB containing all zero bytes and N bytes in size.
 5535 **
 5536 ** ^The sqlite3_result_double() interface sets the result from
 5537 ** an application-defined function to be a floating point value specified
 5538 ** by its 2nd argument.
 5539 **
 5540 ** ^The sqlite3_result_error() and sqlite3_result_error16() functions
 5541 ** cause the implemented SQL function to throw an exception.
 5542 ** ^SQLite uses the string pointed to by the
 5543 ** 2nd parameter of sqlite3_result_error() or sqlite3_result_error16()
 5544 ** as the text of an error message.  ^SQLite interprets the error
 5545 ** message string from sqlite3_result_error() as UTF-8. ^SQLite
<span class="line-modified"> 5546 ** interprets the string from sqlite3_result_error16() as UTF-16 in native</span>
<span class="line-modified"> 5547 ** byte order.  ^If the third parameter to sqlite3_result_error()</span>

 5548 ** or sqlite3_result_error16() is negative then SQLite takes as the error
 5549 ** message all text up through the first zero character.
 5550 ** ^If the third parameter to sqlite3_result_error() or
 5551 ** sqlite3_result_error16() is non-negative then SQLite takes that many
 5552 ** bytes (not characters) from the 2nd parameter as the error message.
 5553 ** ^The sqlite3_result_error() and sqlite3_result_error16()
 5554 ** routines make a private copy of the error message text before
 5555 ** they return.  Hence, the calling function can deallocate or
 5556 ** modify the text after they return without harm.
 5557 ** ^The sqlite3_result_error_code() function changes the error code
 5558 ** returned by SQLite as a result of an error in a function.  ^By default,
 5559 ** the error code is SQLITE_ERROR.  ^A subsequent call to sqlite3_result_error()
 5560 ** or sqlite3_result_error16() resets the error code to SQLITE_ERROR.
 5561 **
 5562 ** ^The sqlite3_result_error_toobig() interface causes SQLite to throw an
 5563 ** error indicating that a string or BLOB is too long to represent.
 5564 **
 5565 ** ^The sqlite3_result_error_nomem() interface causes SQLite to throw an
 5566 ** error indicating that a memory allocation failed.
 5567 **
</pre>
<hr />
<pre>
 5595 ** function result.  If the 3rd parameter is non-negative, then it
 5596 ** must be the byte offset into the string where the NUL terminator would
 5597 ** appear if the string where NUL terminated.  If any NUL characters occur
 5598 ** in the string at a byte offset that is less than the value of the 3rd
 5599 ** parameter, then the resulting string will contain embedded NULs and the
 5600 ** result of expressions operating on strings with embedded NULs is undefined.
 5601 ** ^If the 4th parameter to the sqlite3_result_text* interfaces
 5602 ** or sqlite3_result_blob is a non-NULL pointer, then SQLite calls that
 5603 ** function as the destructor on the text or BLOB result when it has
 5604 ** finished using that result.
 5605 ** ^If the 4th parameter to the sqlite3_result_text* interfaces or to
 5606 ** sqlite3_result_blob is the special constant SQLITE_STATIC, then SQLite
 5607 ** assumes that the text or BLOB result is in constant space and does not
 5608 ** copy the content of the parameter nor call a destructor on the content
 5609 ** when it has finished using that result.
 5610 ** ^If the 4th parameter to the sqlite3_result_text* interfaces
 5611 ** or sqlite3_result_blob is the special constant SQLITE_TRANSIENT
 5612 ** then SQLite makes a copy of the result into space obtained
 5613 ** from [sqlite3_malloc()] before it returns.
 5614 **



















 5615 ** ^The sqlite3_result_value() interface sets the result of
 5616 ** the application-defined function to be a copy of the
 5617 ** [unprotected sqlite3_value] object specified by the 2nd parameter.  ^The
 5618 ** sqlite3_result_value() interface makes a copy of the [sqlite3_value]
 5619 ** so that the [sqlite3_value] specified in the parameter may change or
 5620 ** be deallocated after sqlite3_result_value() returns without harm.
 5621 ** ^A [protected sqlite3_value] object may always be used where an
 5622 ** [unprotected sqlite3_value] object is required, so either
 5623 ** kind of [sqlite3_value] object can be used with this interface.
 5624 **
 5625 ** ^The sqlite3_result_pointer(C,P,T,D) interface sets the result to an
 5626 ** SQL NULL value, just like [sqlite3_result_null(C)], except that it
 5627 ** also associates the host-language pointer P or type T with that
 5628 ** NULL value such that the pointer can be retrieved within an
 5629 ** [application-defined SQL function] using [sqlite3_value_pointer()].
 5630 ** ^If the D parameter is not NULL, then it is a pointer to a destructor
 5631 ** for the P parameter.  ^SQLite invokes D with P as its only argument
 5632 ** when SQLite is finished with P.  The T parameter should be a static
 5633 ** string and preferably a string literal. The sqlite3_result_pointer()
 5634 ** routine is part of the [pointer passing interface] added for SQLite 3.20.0.
</pre>
<hr />
<pre>
 5800 ** connection.  The third argument is one of [SQLITE_UTF8], [SQLITE_UTF16BE],
 5801 ** or [SQLITE_UTF16LE], indicating the most desirable form of the collation
 5802 ** sequence function required.  The fourth parameter is the name of the
 5803 ** required collation sequence.)^
 5804 **
 5805 ** The callback function should register the desired collation using
 5806 ** [sqlite3_create_collation()], [sqlite3_create_collation16()], or
 5807 ** [sqlite3_create_collation_v2()].
 5808 */
 5809 SQLITE_API int sqlite3_collation_needed(
 5810   sqlite3*,
 5811   void*,
 5812   void(*)(void*,sqlite3*,int eTextRep,const char*)
 5813 );
 5814 SQLITE_API int sqlite3_collation_needed16(
 5815   sqlite3*,
 5816   void*,
 5817   void(*)(void*,sqlite3*,int eTextRep,const void*)
 5818 );
 5819 
<span class="line-removed"> 5820 #ifdef SQLITE_HAS_CODEC</span>
<span class="line-removed"> 5821 /*</span>
<span class="line-removed"> 5822 ** Specify the key for an encrypted database.  This routine should be</span>
<span class="line-removed"> 5823 ** called right after sqlite3_open().</span>
<span class="line-removed"> 5824 **</span>
<span class="line-removed"> 5825 ** The code to implement this API is not available in the public release</span>
<span class="line-removed"> 5826 ** of SQLite.</span>
<span class="line-removed"> 5827 */</span>
<span class="line-removed"> 5828 SQLITE_API int sqlite3_key(</span>
<span class="line-removed"> 5829   sqlite3 *db,                   /* Database to be rekeyed */</span>
<span class="line-removed"> 5830   const void *pKey, int nKey     /* The key */</span>
<span class="line-removed"> 5831 );</span>
<span class="line-removed"> 5832 SQLITE_API int sqlite3_key_v2(</span>
<span class="line-removed"> 5833   sqlite3 *db,                   /* Database to be rekeyed */</span>
<span class="line-removed"> 5834   const char *zDbName,           /* Name of the database */</span>
<span class="line-removed"> 5835   const void *pKey, int nKey     /* The key */</span>
<span class="line-removed"> 5836 );</span>
<span class="line-removed"> 5837 </span>
<span class="line-removed"> 5838 /*</span>
<span class="line-removed"> 5839 ** Change the key on an open database.  If the current database is not</span>
<span class="line-removed"> 5840 ** encrypted, this routine will encrypt it.  If pNew==0 or nNew==0, the</span>
<span class="line-removed"> 5841 ** database is decrypted.</span>
<span class="line-removed"> 5842 **</span>
<span class="line-removed"> 5843 ** The code to implement this API is not available in the public release</span>
<span class="line-removed"> 5844 ** of SQLite.</span>
<span class="line-removed"> 5845 */</span>
<span class="line-removed"> 5846 SQLITE_API int sqlite3_rekey(</span>
<span class="line-removed"> 5847   sqlite3 *db,                   /* Database to be rekeyed */</span>
<span class="line-removed"> 5848   const void *pKey, int nKey     /* The new key */</span>
<span class="line-removed"> 5849 );</span>
<span class="line-removed"> 5850 SQLITE_API int sqlite3_rekey_v2(</span>
<span class="line-removed"> 5851   sqlite3 *db,                   /* Database to be rekeyed */</span>
<span class="line-removed"> 5852   const char *zDbName,           /* Name of the database */</span>
<span class="line-removed"> 5853   const void *pKey, int nKey     /* The new key */</span>
<span class="line-removed"> 5854 );</span>
<span class="line-removed"> 5855 </span>
<span class="line-removed"> 5856 /*</span>
<span class="line-removed"> 5857 ** Specify the activation key for a SEE database.  Unless</span>
<span class="line-removed"> 5858 ** activated, none of the SEE routines will work.</span>
<span class="line-removed"> 5859 */</span>
<span class="line-removed"> 5860 SQLITE_API void sqlite3_activate_see(</span>
<span class="line-removed"> 5861   const char *zPassPhrase        /* Activation phrase */</span>
<span class="line-removed"> 5862 );</span>
<span class="line-removed"> 5863 #endif</span>
<span class="line-removed"> 5864 </span>
 5865 #ifdef SQLITE_ENABLE_CEROD
 5866 /*
 5867 ** Specify the activation key for a CEROD database.  Unless
 5868 ** activated, none of the CEROD routines will work.
 5869 */
 5870 SQLITE_API void sqlite3_activate_cerod(
 5871   const char *zPassPhrase        /* Activation phrase */
 5872 );
 5873 #endif
 5874 
 5875 /*
 5876 ** CAPI3REF: Suspend Execution For A Short Time
 5877 **
 5878 ** The sqlite3_sleep() function causes the current thread to suspend execution
 5879 ** for at least a number of milliseconds specified in its parameter.
 5880 **
 5881 ** If the operating system does not support sleep requests with
 5882 ** millisecond time resolution, then the time will be rounded up to
 5883 ** the nearest second. The number of milliseconds of sleep actually
 5884 ** requested from the operating system is returned.
</pre>
<hr />
<pre>
 7587 ** CAPI3REF: Testing Interface Operation Codes
 7588 **
 7589 ** These constants are the valid operation code parameters used
 7590 ** as the first argument to [sqlite3_test_control()].
 7591 **
 7592 ** These parameters and their meanings are subject to change
 7593 ** without notice.  These values are for testing purposes only.
 7594 ** Applications should not use any of these parameters or the
 7595 ** [sqlite3_test_control()] interface.
 7596 */
 7597 #define SQLITE_TESTCTRL_FIRST                    5
 7598 #define SQLITE_TESTCTRL_PRNG_SAVE                5
 7599 #define SQLITE_TESTCTRL_PRNG_RESTORE             6
 7600 #define SQLITE_TESTCTRL_PRNG_RESET               7  /* NOT USED */
 7601 #define SQLITE_TESTCTRL_BITVEC_TEST              8
 7602 #define SQLITE_TESTCTRL_FAULT_INSTALL            9
 7603 #define SQLITE_TESTCTRL_BENIGN_MALLOC_HOOKS     10
 7604 #define SQLITE_TESTCTRL_PENDING_BYTE            11
 7605 #define SQLITE_TESTCTRL_ASSERT                  12
 7606 #define SQLITE_TESTCTRL_ALWAYS                  13
<span class="line-modified"> 7607 #define SQLITE_TESTCTRL_RESERVE                 14</span>
 7608 #define SQLITE_TESTCTRL_OPTIMIZATIONS           15
 7609 #define SQLITE_TESTCTRL_ISKEYWORD               16  /* NOT USED */
 7610 #define SQLITE_TESTCTRL_SCRATCHMALLOC           17  /* NOT USED */
 7611 #define SQLITE_TESTCTRL_INTERNAL_FUNCTIONS      17
 7612 #define SQLITE_TESTCTRL_LOCALTIME_FAULT         18
 7613 #define SQLITE_TESTCTRL_EXPLAIN_STMT            19  /* NOT USED */
 7614 #define SQLITE_TESTCTRL_ONCE_RESET_THRESHOLD    19
 7615 #define SQLITE_TESTCTRL_NEVER_CORRUPT           20
 7616 #define SQLITE_TESTCTRL_VDBE_COVERAGE           21
 7617 #define SQLITE_TESTCTRL_BYTEORDER               22
 7618 #define SQLITE_TESTCTRL_ISINIT                  23
 7619 #define SQLITE_TESTCTRL_SORTER_MMAP             24
 7620 #define SQLITE_TESTCTRL_IMPOSTER                25
 7621 #define SQLITE_TESTCTRL_PARSER_COVERAGE         26
 7622 #define SQLITE_TESTCTRL_RESULT_INTREAL          27
 7623 #define SQLITE_TESTCTRL_PRNG_SEED               28
 7624 #define SQLITE_TESTCTRL_EXTRA_SCHEMA_CHECKS     29
 7625 #define SQLITE_TESTCTRL_LAST                    29  /* Largest TESTCTRL */
 7626 
 7627 /*
</pre>
</td>
<td>
<hr />
<pre>
  106 ** The SQLITE_VERSION_NUMBER for any given release of SQLite will also
  107 ** be larger than the release from which it is derived.  Either Y will
  108 ** be held constant and Z will be incremented or else Y will be incremented
  109 ** and Z will be reset to zero.
  110 **
  111 ** Since [version 3.6.18] ([dateof:3.6.18]),
  112 ** SQLite source code has been stored in the
  113 ** &lt;a href=&quot;http://www.fossil-scm.org/&quot;&gt;Fossil configuration management
  114 ** system&lt;/a&gt;.  ^The SQLITE_SOURCE_ID macro evaluates to
  115 ** a string which identifies a particular check-in of SQLite
  116 ** within its configuration management system.  ^The SQLITE_SOURCE_ID
  117 ** string contains the date and time of the check-in (UTC) and a SHA1
  118 ** or SHA3-256 hash of the entire source tree.  If the source code has
  119 ** been edited in any way since it was last checked in, then the last
  120 ** four hexadecimal digits of the hash may be modified.
  121 **
  122 ** See also: [sqlite3_libversion()],
  123 ** [sqlite3_libversion_number()], [sqlite3_sourceid()],
  124 ** [sqlite_version()] and [sqlite_source_id()].
  125 */
<span class="line-modified">  126 #define SQLITE_VERSION        &quot;3.32.3&quot;</span>
<span class="line-modified">  127 #define SQLITE_VERSION_NUMBER 3032003</span>
<span class="line-modified">  128 #define SQLITE_SOURCE_ID      &quot;2020-06-18 14:00:33 7ebdfa80be8e8e73324b8d66b3460222eb74c7e9dfd655b48d6ca7e1933cc8fd&quot;</span>
  129 
  130 /*
  131 ** CAPI3REF: Run-Time Library Version Numbers
  132 ** KEYWORDS: sqlite3_version sqlite3_sourceid
  133 **
  134 ** These interfaces provide the same information as the [SQLITE_VERSION],
  135 ** [SQLITE_VERSION_NUMBER], and [SQLITE_SOURCE_ID] C preprocessor macros
  136 ** but are associated with the library instead of the header file.  ^(Cautious
  137 ** programmers might include assert() statements in their application to
  138 ** verify that values returned by these interfaces match the macros in
  139 ** the header, and thus ensure that the application is
  140 ** compiled with matching library and header files.
  141 **
  142 ** &lt;blockquote&gt;&lt;pre&gt;
  143 ** assert( sqlite3_libversion_number()==SQLITE_VERSION_NUMBER );
  144 ** assert( strncmp(sqlite3_sourceid(),SQLITE_SOURCE_ID,80)==0 );
  145 ** assert( strcmp(sqlite3_libversion(),SQLITE_VERSION)==0 );
  146 ** &lt;/pre&gt;&lt;/blockquote&gt;)^
  147 **
  148 ** ^The sqlite3_version[] string constant contains the text of [SQLITE_VERSION]
</pre>
<hr />
<pre>
  282 typedef sqlite_uint64 sqlite3_uint64;
  283 
  284 /*
  285 ** If compiling for a processor that lacks floating point support,
  286 ** substitute integer for floating-point.
  287 */
  288 #ifdef SQLITE_OMIT_FLOATING_POINT
  289 # define double sqlite3_int64
  290 #endif
  291 
  292 /*
  293 ** CAPI3REF: Closing A Database Connection
  294 ** DESTRUCTOR: sqlite3
  295 **
  296 ** ^The sqlite3_close() and sqlite3_close_v2() routines are destructors
  297 ** for the [sqlite3] object.
  298 ** ^Calls to sqlite3_close() and sqlite3_close_v2() return [SQLITE_OK] if
  299 ** the [sqlite3] object is successfully destroyed and all associated
  300 ** resources are deallocated.
  301 **
<span class="line-modified">  302 ** Ideally, applications should [sqlite3_finalize | finalize] all</span>
<span class="line-modified">  303 ** [prepared statements], [sqlite3_blob_close | close] all [BLOB handles], and</span>











  304 ** [sqlite3_backup_finish | finish] all [sqlite3_backup] objects associated
<span class="line-modified">  305 ** with the [sqlite3] object prior to attempting to close the object.</span>
<span class="line-modified">  306 ** ^If the database connection is associated with unfinalized prepared</span>
<span class="line-modified">  307 ** statements, BLOB handlers, and/or unfinished sqlite3_backup objects then</span>
<span class="line-modified">  308 ** sqlite3_close() will leave the database connection open and return</span>
<span class="line-modified">  309 ** [SQLITE_BUSY]. ^If sqlite3_close_v2() is called with unfinalized prepared</span>
<span class="line-modified">  310 ** statements, unclosed BLOB handlers, and/or unfinished sqlite3_backups,</span>
<span class="line-added">  311 ** it returns [SQLITE_OK] regardless, but instead of deallocating the database</span>
<span class="line-added">  312 ** connection immediately, it marks the database connection as an unusable</span>
<span class="line-added">  313 ** &quot;zombie&quot; and makes arrangements to automatically deallocate the database</span>
<span class="line-added">  314 ** connection after all prepared statements are finalized, all BLOB handles</span>
<span class="line-added">  315 ** are closed, and all backups have finished. The sqlite3_close_v2() interface</span>
<span class="line-added">  316 ** is intended for use with host languages that are garbage collected, and</span>
<span class="line-added">  317 ** where the order in which destructors are called is arbitrary.</span>
  318 **
  319 ** ^If an [sqlite3] object is destroyed while a transaction is open,
  320 ** the transaction is automatically rolled back.
  321 **
  322 ** The C parameter to [sqlite3_close(C)] and [sqlite3_close_v2(C)]
  323 ** must be either a NULL
  324 ** pointer or an [sqlite3] object pointer obtained
  325 ** from [sqlite3_open()], [sqlite3_open16()], or
  326 ** [sqlite3_open_v2()], and not previously closed.
  327 ** ^Calling sqlite3_close() or sqlite3_close_v2() with a NULL pointer
  328 ** argument is a harmless no-op.
  329 */
  330 SQLITE_API int sqlite3_close(sqlite3*);
  331 SQLITE_API int sqlite3_close_v2(sqlite3*);
  332 
  333 /*
  334 ** The type for a callback function.
  335 ** This is legacy and deprecated.  It is included for historical
  336 ** compatibility and is not documented.
  337 */
</pre>
<hr />
<pre>
  486 #define SQLITE_IOERR_NOMEM             (SQLITE_IOERR | (12&lt;&lt;8))
  487 #define SQLITE_IOERR_ACCESS            (SQLITE_IOERR | (13&lt;&lt;8))
  488 #define SQLITE_IOERR_CHECKRESERVEDLOCK (SQLITE_IOERR | (14&lt;&lt;8))
  489 #define SQLITE_IOERR_LOCK              (SQLITE_IOERR | (15&lt;&lt;8))
  490 #define SQLITE_IOERR_CLOSE             (SQLITE_IOERR | (16&lt;&lt;8))
  491 #define SQLITE_IOERR_DIR_CLOSE         (SQLITE_IOERR | (17&lt;&lt;8))
  492 #define SQLITE_IOERR_SHMOPEN           (SQLITE_IOERR | (18&lt;&lt;8))
  493 #define SQLITE_IOERR_SHMSIZE           (SQLITE_IOERR | (19&lt;&lt;8))
  494 #define SQLITE_IOERR_SHMLOCK           (SQLITE_IOERR | (20&lt;&lt;8))
  495 #define SQLITE_IOERR_SHMMAP            (SQLITE_IOERR | (21&lt;&lt;8))
  496 #define SQLITE_IOERR_SEEK              (SQLITE_IOERR | (22&lt;&lt;8))
  497 #define SQLITE_IOERR_DELETE_NOENT      (SQLITE_IOERR | (23&lt;&lt;8))
  498 #define SQLITE_IOERR_MMAP              (SQLITE_IOERR | (24&lt;&lt;8))
  499 #define SQLITE_IOERR_GETTEMPPATH       (SQLITE_IOERR | (25&lt;&lt;8))
  500 #define SQLITE_IOERR_CONVPATH          (SQLITE_IOERR | (26&lt;&lt;8))
  501 #define SQLITE_IOERR_VNODE             (SQLITE_IOERR | (27&lt;&lt;8))
  502 #define SQLITE_IOERR_AUTH              (SQLITE_IOERR | (28&lt;&lt;8))
  503 #define SQLITE_IOERR_BEGIN_ATOMIC      (SQLITE_IOERR | (29&lt;&lt;8))
  504 #define SQLITE_IOERR_COMMIT_ATOMIC     (SQLITE_IOERR | (30&lt;&lt;8))
  505 #define SQLITE_IOERR_ROLLBACK_ATOMIC   (SQLITE_IOERR | (31&lt;&lt;8))
<span class="line-added">  506 #define SQLITE_IOERR_DATA              (SQLITE_IOERR | (32&lt;&lt;8))</span>
  507 #define SQLITE_LOCKED_SHAREDCACHE      (SQLITE_LOCKED |  (1&lt;&lt;8))
  508 #define SQLITE_LOCKED_VTAB             (SQLITE_LOCKED |  (2&lt;&lt;8))
  509 #define SQLITE_BUSY_RECOVERY           (SQLITE_BUSY   |  (1&lt;&lt;8))
  510 #define SQLITE_BUSY_SNAPSHOT           (SQLITE_BUSY   |  (2&lt;&lt;8))
<span class="line-added">  511 #define SQLITE_BUSY_TIMEOUT            (SQLITE_BUSY   |  (3&lt;&lt;8))</span>
  512 #define SQLITE_CANTOPEN_NOTEMPDIR      (SQLITE_CANTOPEN | (1&lt;&lt;8))
  513 #define SQLITE_CANTOPEN_ISDIR          (SQLITE_CANTOPEN | (2&lt;&lt;8))
  514 #define SQLITE_CANTOPEN_FULLPATH       (SQLITE_CANTOPEN | (3&lt;&lt;8))
  515 #define SQLITE_CANTOPEN_CONVPATH       (SQLITE_CANTOPEN | (4&lt;&lt;8))
  516 #define SQLITE_CANTOPEN_DIRTYWAL       (SQLITE_CANTOPEN | (5&lt;&lt;8)) /* Not Used */
  517 #define SQLITE_CANTOPEN_SYMLINK        (SQLITE_CANTOPEN | (6&lt;&lt;8))
  518 #define SQLITE_CORRUPT_VTAB            (SQLITE_CORRUPT | (1&lt;&lt;8))
  519 #define SQLITE_CORRUPT_SEQUENCE        (SQLITE_CORRUPT | (2&lt;&lt;8))
<span class="line-added">  520 #define SQLITE_CORRUPT_INDEX           (SQLITE_CORRUPT | (3&lt;&lt;8))</span>
  521 #define SQLITE_READONLY_RECOVERY       (SQLITE_READONLY | (1&lt;&lt;8))
  522 #define SQLITE_READONLY_CANTLOCK       (SQLITE_READONLY | (2&lt;&lt;8))
  523 #define SQLITE_READONLY_ROLLBACK       (SQLITE_READONLY | (3&lt;&lt;8))
  524 #define SQLITE_READONLY_DBMOVED        (SQLITE_READONLY | (4&lt;&lt;8))
  525 #define SQLITE_READONLY_CANTINIT       (SQLITE_READONLY | (5&lt;&lt;8))
  526 #define SQLITE_READONLY_DIRECTORY      (SQLITE_READONLY | (6&lt;&lt;8))
  527 #define SQLITE_ABORT_ROLLBACK          (SQLITE_ABORT | (2&lt;&lt;8))
  528 #define SQLITE_CONSTRAINT_CHECK        (SQLITE_CONSTRAINT | (1&lt;&lt;8))
  529 #define SQLITE_CONSTRAINT_COMMITHOOK   (SQLITE_CONSTRAINT | (2&lt;&lt;8))
  530 #define SQLITE_CONSTRAINT_FOREIGNKEY   (SQLITE_CONSTRAINT | (3&lt;&lt;8))
  531 #define SQLITE_CONSTRAINT_FUNCTION     (SQLITE_CONSTRAINT | (4&lt;&lt;8))
  532 #define SQLITE_CONSTRAINT_NOTNULL      (SQLITE_CONSTRAINT | (5&lt;&lt;8))
  533 #define SQLITE_CONSTRAINT_PRIMARYKEY   (SQLITE_CONSTRAINT | (6&lt;&lt;8))
  534 #define SQLITE_CONSTRAINT_TRIGGER      (SQLITE_CONSTRAINT | (7&lt;&lt;8))
  535 #define SQLITE_CONSTRAINT_UNIQUE       (SQLITE_CONSTRAINT | (8&lt;&lt;8))
  536 #define SQLITE_CONSTRAINT_VTAB         (SQLITE_CONSTRAINT | (9&lt;&lt;8))
  537 #define SQLITE_CONSTRAINT_ROWID        (SQLITE_CONSTRAINT |(10&lt;&lt;8))
  538 #define SQLITE_CONSTRAINT_PINNED       (SQLITE_CONSTRAINT |(11&lt;&lt;8))
  539 #define SQLITE_NOTICE_RECOVER_WAL      (SQLITE_NOTICE | (1&lt;&lt;8))
  540 #define SQLITE_NOTICE_RECOVER_ROLLBACK (SQLITE_NOTICE | (2&lt;&lt;8))
</pre>
<hr />
<pre>
 1069 ** operations since the previous successful call to
 1070 ** [SQLITE_FCNTL_BEGIN_ATOMIC_WRITE] to be performed atomically.
 1071 ** This file control returns [SQLITE_OK] if and only if the writes were
 1072 ** all performed successfully and have been committed to persistent storage.
 1073 ** ^Regardless of whether or not it is successful, this file control takes
 1074 ** the file descriptor out of batch write mode so that all subsequent
 1075 ** write operations are independent.
 1076 ** ^SQLite will never invoke SQLITE_FCNTL_COMMIT_ATOMIC_WRITE without
 1077 ** a prior successful call to [SQLITE_FCNTL_BEGIN_ATOMIC_WRITE].
 1078 **
 1079 ** &lt;li&gt;[[SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE]]
 1080 ** The [SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE] opcode causes all write
 1081 ** operations since the previous successful call to
 1082 ** [SQLITE_FCNTL_BEGIN_ATOMIC_WRITE] to be rolled back.
 1083 ** ^This file control takes the file descriptor out of batch write mode
 1084 ** so that all subsequent write operations are independent.
 1085 ** ^SQLite will never invoke SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE without
 1086 ** a prior successful call to [SQLITE_FCNTL_BEGIN_ATOMIC_WRITE].
 1087 **
 1088 ** &lt;li&gt;[[SQLITE_FCNTL_LOCK_TIMEOUT]]
<span class="line-modified"> 1089 ** The [SQLITE_FCNTL_LOCK_TIMEOUT] opcode is used to configure a VFS</span>
<span class="line-modified"> 1090 ** to block for up to M milliseconds before failing when attempting to</span>
<span class="line-modified"> 1091 ** obtain a file lock using the xLock or xShmLock methods of the VFS.</span>
<span class="line-modified"> 1092 ** The parameter is a pointer to a 32-bit signed integer that contains</span>
<span class="line-added"> 1093 ** the value that M is to be set to. Before returning, the 32-bit signed</span>
<span class="line-added"> 1094 ** integer is overwritten with the previous value of M.</span>
 1095 **
 1096 ** &lt;li&gt;[[SQLITE_FCNTL_DATA_VERSION]]
 1097 ** The [SQLITE_FCNTL_DATA_VERSION] opcode is used to detect changes to
 1098 ** a database file.  The argument is a pointer to a 32-bit unsigned integer.
 1099 ** The &quot;data version&quot; for the pager is written into the pointer.  The
 1100 ** &quot;data version&quot; changes whenever any change occurs to the corresponding
 1101 ** database file, either through SQL statements on the same database
 1102 ** connection or through transactions committed by separate database
 1103 ** connections possibly in other processes. The [sqlite3_total_changes()]
 1104 ** interface can be used to find if any database on the connection has changed,
 1105 ** but that interface responds to changes on TEMP as well as MAIN and does
 1106 ** not provide a mechanism to detect changes to MAIN only.  Also, the
 1107 ** [sqlite3_total_changes()] interface responds to internal changes only and
 1108 ** omits changes made by other database connections.  The
 1109 ** [PRAGMA data_version] command provides a mechanism to detect changes to
 1110 ** a single attached database that occur due to other database connections,
 1111 ** but omits changes implemented by the database connection on which it is
 1112 ** called.  This file control is the only mechanism to detect changes that
 1113 ** happen either internally or externally and that are associated with
 1114 ** a particular attached database.
 1115 **
<span class="line-added"> 1116 ** &lt;li&gt;[[SQLITE_FCNTL_CKPT_START]]</span>
<span class="line-added"> 1117 ** The [SQLITE_FCNTL_CKPT_START] opcode is invoked from within a checkpoint</span>
<span class="line-added"> 1118 ** in wal mode before the client starts to copy pages from the wal</span>
<span class="line-added"> 1119 ** file to the database file.</span>
<span class="line-added"> 1120 **</span>
 1121 ** &lt;li&gt;[[SQLITE_FCNTL_CKPT_DONE]]
 1122 ** The [SQLITE_FCNTL_CKPT_DONE] opcode is invoked from within a checkpoint
 1123 ** in wal mode after the client has finished copying pages from the wal
 1124 ** file to the database file, but before the *-shm file is updated to
 1125 ** record the fact that the pages have been checkpointed.
 1126 ** &lt;/ul&gt;
 1127 */
 1128 #define SQLITE_FCNTL_LOCKSTATE               1
 1129 #define SQLITE_FCNTL_GET_LOCKPROXYFILE       2
 1130 #define SQLITE_FCNTL_SET_LOCKPROXYFILE       3
 1131 #define SQLITE_FCNTL_LAST_ERRNO              4
 1132 #define SQLITE_FCNTL_SIZE_HINT               5
 1133 #define SQLITE_FCNTL_CHUNK_SIZE              6
 1134 #define SQLITE_FCNTL_FILE_POINTER            7
 1135 #define SQLITE_FCNTL_SYNC_OMITTED            8
 1136 #define SQLITE_FCNTL_WIN32_AV_RETRY          9
 1137 #define SQLITE_FCNTL_PERSIST_WAL            10
 1138 #define SQLITE_FCNTL_OVERWRITE              11
 1139 #define SQLITE_FCNTL_VFSNAME                12
 1140 #define SQLITE_FCNTL_POWERSAFE_OVERWRITE    13
</pre>
<hr />
<pre>
 1144 #define SQLITE_FCNTL_MMAP_SIZE              18
 1145 #define SQLITE_FCNTL_TRACE                  19
 1146 #define SQLITE_FCNTL_HAS_MOVED              20
 1147 #define SQLITE_FCNTL_SYNC                   21
 1148 #define SQLITE_FCNTL_COMMIT_PHASETWO        22
 1149 #define SQLITE_FCNTL_WIN32_SET_HANDLE       23
 1150 #define SQLITE_FCNTL_WAL_BLOCK              24
 1151 #define SQLITE_FCNTL_ZIPVFS                 25
 1152 #define SQLITE_FCNTL_RBU                    26
 1153 #define SQLITE_FCNTL_VFS_POINTER            27
 1154 #define SQLITE_FCNTL_JOURNAL_POINTER        28
 1155 #define SQLITE_FCNTL_WIN32_GET_HANDLE       29
 1156 #define SQLITE_FCNTL_PDB                    30
 1157 #define SQLITE_FCNTL_BEGIN_ATOMIC_WRITE     31
 1158 #define SQLITE_FCNTL_COMMIT_ATOMIC_WRITE    32
 1159 #define SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE  33
 1160 #define SQLITE_FCNTL_LOCK_TIMEOUT           34
 1161 #define SQLITE_FCNTL_DATA_VERSION           35
 1162 #define SQLITE_FCNTL_SIZE_LIMIT             36
 1163 #define SQLITE_FCNTL_CKPT_DONE              37
<span class="line-added"> 1164 #define SQLITE_FCNTL_RESERVE_BYTES          38</span>
<span class="line-added"> 1165 #define SQLITE_FCNTL_CKPT_START             39</span>
 1166 
 1167 /* deprecated names */
 1168 #define SQLITE_GET_LOCKPROXYFILE      SQLITE_FCNTL_GET_LOCKPROXYFILE
 1169 #define SQLITE_SET_LOCKPROXYFILE      SQLITE_FCNTL_SET_LOCKPROXYFILE
 1170 #define SQLITE_LAST_ERRNO             SQLITE_FCNTL_LAST_ERRNO
 1171 
 1172 
 1173 /*
 1174 ** CAPI3REF: Mutex Handle
 1175 **
 1176 ** The mutex module within SQLite defines [sqlite3_mutex] to be an
 1177 ** abstract type for a mutex object.  The SQLite core never looks
 1178 ** at the internal representation of an [sqlite3_mutex].  It only
 1179 ** deals with pointers to the [sqlite3_mutex] object.
 1180 **
 1181 ** Mutexes are created using [sqlite3_mutex_alloc()].
 1182 */
 1183 typedef struct sqlite3_mutex sqlite3_mutex;
 1184 
 1185 /*
</pre>
<hr />
<pre>
 3524   sqlite3 **ppDb          /* OUT: SQLite db handle */
 3525 );
 3526 SQLITE_API int sqlite3_open16(
 3527   const void *filename,   /* Database filename (UTF-16) */
 3528   sqlite3 **ppDb          /* OUT: SQLite db handle */
 3529 );
 3530 SQLITE_API int sqlite3_open_v2(
 3531   const char *filename,   /* Database filename (UTF-8) */
 3532   sqlite3 **ppDb,         /* OUT: SQLite db handle */
 3533   int flags,              /* Flags */
 3534   const char *zVfs        /* Name of VFS module to use */
 3535 );
 3536 
 3537 /*
 3538 ** CAPI3REF: Obtain Values For URI Parameters
 3539 **
 3540 ** These are utility routines, useful to [VFS|custom VFS implementations],
 3541 ** that check if a database file was a URI that contained a specific query
 3542 ** parameter, and if so obtains the value of that query parameter.
 3543 **
<span class="line-modified"> 3544 ** The first parameter to these interfaces (hereafter referred to</span>
<span class="line-modified"> 3545 ** as F) must be one of:</span>
<span class="line-added"> 3546 ** &lt;ul&gt;</span>
<span class="line-added"> 3547 ** &lt;li&gt; A database filename pointer created by the SQLite core and</span>
<span class="line-added"> 3548 ** passed into the xOpen() method of a VFS implemention, or</span>
<span class="line-added"> 3549 ** &lt;li&gt; A filename obtained from [sqlite3_db_filename()], or</span>
<span class="line-added"> 3550 ** &lt;li&gt; A new filename constructed using [sqlite3_create_filename()].</span>
<span class="line-added"> 3551 ** &lt;/ul&gt;</span>
<span class="line-added"> 3552 ** If the F parameter is not one of the above, then the behavior is</span>
<span class="line-added"> 3553 ** undefined and probably undesirable.  Older versions of SQLite were</span>
<span class="line-added"> 3554 ** more tolerant of invalid F parameters than newer versions.</span>
<span class="line-added"> 3555 **</span>
<span class="line-added"> 3556 ** If F is a suitable filename (as described in the previous paragraph)</span>
 3557 ** and if P is the name of the query parameter, then
 3558 ** sqlite3_uri_parameter(F,P) returns the value of the P
 3559 ** parameter if it exists or a NULL pointer if P does not appear as a
 3560 ** query parameter on F.  If P is a query parameter of F and it
 3561 ** has no explicit value, then sqlite3_uri_parameter(F,P) returns
 3562 ** a pointer to an empty string.
 3563 **
 3564 ** The sqlite3_uri_boolean(F,P,B) routine assumes that P is a boolean
 3565 ** parameter and returns true (1) or false (0) according to the value
 3566 ** of P.  The sqlite3_uri_boolean(F,P,B) routine returns true (1) if the
 3567 ** value of query parameter P is one of &quot;yes&quot;, &quot;true&quot;, or &quot;on&quot; in any
 3568 ** case or if the value begins with a non-zero number.  The
 3569 ** sqlite3_uri_boolean(F,P,B) routines returns false (0) if the value of
 3570 ** query parameter P is one of &quot;no&quot;, &quot;false&quot;, or &quot;off&quot; in any case or
 3571 ** if the value begins with a numeric zero.  If P is not a query
 3572 ** parameter on F or if the value of P does not match any of the
 3573 ** above, then sqlite3_uri_boolean(F,P,B) returns (B!=0).
 3574 **
 3575 ** The sqlite3_uri_int64(F,P,D) routine converts the value of P into a
 3576 ** 64-bit signed integer and returns that integer, or D if P does not
</pre>
<hr />
<pre>
 3619 ** If F is the name of an sqlite database file, journal file, or WAL file
 3620 ** passed by the SQLite core into the VFS, or if F is a database filename
 3621 ** obtained from [sqlite3_db_filename()], then sqlite3_filename_journal(F)
 3622 ** returns the name of the corresponding rollback journal file.
 3623 **
 3624 ** If F is the name of an sqlite database file, journal file, or WAL file
 3625 ** that was passed by the SQLite core into the VFS, or if F is a database
 3626 ** filename obtained from [sqlite3_db_filename()], then
 3627 ** sqlite3_filename_wal(F) returns the name of the corresponding
 3628 ** WAL file.
 3629 **
 3630 ** In all of the above, if F is not the name of a database, journal or WAL
 3631 ** filename passed into the VFS from the SQLite core and F is not the
 3632 ** return value from [sqlite3_db_filename()], then the result is
 3633 ** undefined and is likely a memory access violation.
 3634 */
 3635 SQLITE_API const char *sqlite3_filename_database(const char*);
 3636 SQLITE_API const char *sqlite3_filename_journal(const char*);
 3637 SQLITE_API const char *sqlite3_filename_wal(const char*);
 3638 
<span class="line-added"> 3639 /*</span>
<span class="line-added"> 3640 ** CAPI3REF:  Database File Corresponding To A Journal</span>
<span class="line-added"> 3641 **</span>
<span class="line-added"> 3642 ** ^If X is the name of a rollback or WAL-mode journal file that is</span>
<span class="line-added"> 3643 ** passed into the xOpen method of [sqlite3_vfs], then</span>
<span class="line-added"> 3644 ** sqlite3_database_file_object(X) returns a pointer to the [sqlite3_file]</span>
<span class="line-added"> 3645 ** object that represents the main database file.</span>
<span class="line-added"> 3646 **</span>
<span class="line-added"> 3647 ** This routine is intended for use in custom [VFS] implementations</span>
<span class="line-added"> 3648 ** only.  It is not a general-purpose interface.</span>
<span class="line-added"> 3649 ** The argument sqlite3_file_object(X) must be a filename pointer that</span>
<span class="line-added"> 3650 ** has been passed into [sqlite3_vfs].xOpen method where the</span>
<span class="line-added"> 3651 ** flags parameter to xOpen contains one of the bits</span>
<span class="line-added"> 3652 ** [SQLITE_OPEN_MAIN_JOURNAL] or [SQLITE_OPEN_WAL].  Any other use</span>
<span class="line-added"> 3653 ** of this routine results in undefined and probably undesirable</span>
<span class="line-added"> 3654 ** behavior.</span>
<span class="line-added"> 3655 */</span>
<span class="line-added"> 3656 SQLITE_API sqlite3_file *sqlite3_database_file_object(const char*);</span>
<span class="line-added"> 3657 </span>
<span class="line-added"> 3658 /*</span>
<span class="line-added"> 3659 ** CAPI3REF: Create and Destroy VFS Filenames</span>
<span class="line-added"> 3660 **</span>
<span class="line-added"> 3661 ** These interfces are provided for use by [VFS shim] implementations and</span>
<span class="line-added"> 3662 ** are not useful outside of that context.</span>
<span class="line-added"> 3663 **</span>
<span class="line-added"> 3664 ** The sqlite3_create_filename(D,J,W,N,P) allocates memory to hold a version of</span>
<span class="line-added"> 3665 ** database filename D with corresponding journal file J and WAL file W and</span>
<span class="line-added"> 3666 ** with N URI parameters key/values pairs in the array P.  The result from</span>
<span class="line-added"> 3667 ** sqlite3_create_filename(D,J,W,N,P) is a pointer to a database filename that</span>
<span class="line-added"> 3668 ** is safe to pass to routines like:</span>
<span class="line-added"> 3669 ** &lt;ul&gt;</span>
<span class="line-added"> 3670 ** &lt;li&gt; [sqlite3_uri_parameter()],</span>
<span class="line-added"> 3671 ** &lt;li&gt; [sqlite3_uri_boolean()],</span>
<span class="line-added"> 3672 ** &lt;li&gt; [sqlite3_uri_int64()],</span>
<span class="line-added"> 3673 ** &lt;li&gt; [sqlite3_uri_key()],</span>
<span class="line-added"> 3674 ** &lt;li&gt; [sqlite3_filename_database()],</span>
<span class="line-added"> 3675 ** &lt;li&gt; [sqlite3_filename_journal()], or</span>
<span class="line-added"> 3676 ** &lt;li&gt; [sqlite3_filename_wal()].</span>
<span class="line-added"> 3677 ** &lt;/ul&gt;</span>
<span class="line-added"> 3678 ** If a memory allocation error occurs, sqlite3_create_filename() might</span>
<span class="line-added"> 3679 ** return a NULL pointer.  The memory obtained from sqlite3_create_filename(X)</span>
<span class="line-added"> 3680 ** must be released by a corresponding call to sqlite3_free_filename(Y).</span>
<span class="line-added"> 3681 **</span>
<span class="line-added"> 3682 ** The P parameter in sqlite3_create_filename(D,J,W,N,P) should be an array</span>
<span class="line-added"> 3683 ** of 2*N pointers to strings.  Each pair of pointers in this array corresponds</span>
<span class="line-added"> 3684 ** to a key and value for a query parameter.  The P parameter may be a NULL</span>
<span class="line-added"> 3685 ** pointer if N is zero.  None of the 2*N pointers in the P array may be</span>
<span class="line-added"> 3686 ** NULL pointers and key pointers should not be empty strings.</span>
<span class="line-added"> 3687 ** None of the D, J, or W parameters to sqlite3_create_filename(D,J,W,N,P) may</span>
<span class="line-added"> 3688 ** be NULL pointers, though they can be empty strings.</span>
<span class="line-added"> 3689 **</span>
<span class="line-added"> 3690 ** The sqlite3_free_filename(Y) routine releases a memory allocation</span>
<span class="line-added"> 3691 ** previously obtained from sqlite3_create_filename().  Invoking</span>
<span class="line-added"> 3692 ** sqlite3_free_filename(Y) where Y is a NULL pointer is a harmless no-op.</span>
<span class="line-added"> 3693 **</span>
<span class="line-added"> 3694 ** If the Y parameter to sqlite3_free_filename(Y) is anything other</span>
<span class="line-added"> 3695 ** than a NULL pointer or a pointer previously acquired from</span>
<span class="line-added"> 3696 ** sqlite3_create_filename(), then bad things such as heap</span>
<span class="line-added"> 3697 ** corruption or segfaults may occur. The value Y should be</span>
<span class="line-added"> 3698 ** used again after sqlite3_free_filename(Y) has been called.  This means</span>
<span class="line-added"> 3699 ** that if the [sqlite3_vfs.xOpen()] method of a VFS has been called using Y,</span>
<span class="line-added"> 3700 ** then the corresponding [sqlite3_module.xClose() method should also be</span>
<span class="line-added"> 3701 ** invoked prior to calling sqlite3_free_filename(Y).</span>
<span class="line-added"> 3702 */</span>
<span class="line-added"> 3703 SQLITE_API char *sqlite3_create_filename(</span>
<span class="line-added"> 3704   const char *zDatabase,</span>
<span class="line-added"> 3705   const char *zJournal,</span>
<span class="line-added"> 3706   const char *zWal,</span>
<span class="line-added"> 3707   int nParam,</span>
<span class="line-added"> 3708   const char **azParam</span>
<span class="line-added"> 3709 );</span>
<span class="line-added"> 3710 SQLITE_API void sqlite3_free_filename(char*);</span>
 3711 
 3712 /*
 3713 ** CAPI3REF: Error Codes And Messages
 3714 ** METHOD: sqlite3
 3715 **
 3716 ** ^If the most recent sqlite3_* API call associated with
 3717 ** [database connection] D failed, then the sqlite3_errcode(D) interface
 3718 ** returns the numeric [result code] or [extended result code] for that
 3719 ** API call.
 3720 ** ^The sqlite3_extended_errcode()
 3721 ** interface is the same except that it always returns the
 3722 ** [extended result code] even when extended result codes are
 3723 ** disabled.
 3724 **
 3725 ** The values returned by sqlite3_errcode() and/or
 3726 ** sqlite3_extended_errcode() might change with each API call.
 3727 ** Except, there are some interfaces that are guaranteed to never
 3728 ** change the value of the error code.  The error-code preserving
 3729 ** interfaces are:
 3730 **
</pre>
<hr />
<pre>
 4273 ** &lt;li&gt;  $VVV
 4274 ** &lt;/ul&gt;
 4275 **
 4276 ** In the templates above, NNN represents an integer literal,
 4277 ** and VVV represents an alphanumeric identifier.)^  ^The values of these
 4278 ** parameters (also called &quot;host parameter names&quot; or &quot;SQL parameters&quot;)
 4279 ** can be set using the sqlite3_bind_*() routines defined here.
 4280 **
 4281 ** ^The first argument to the sqlite3_bind_*() routines is always
 4282 ** a pointer to the [sqlite3_stmt] object returned from
 4283 ** [sqlite3_prepare_v2()] or its variants.
 4284 **
 4285 ** ^The second argument is the index of the SQL parameter to be set.
 4286 ** ^The leftmost SQL parameter has an index of 1.  ^When the same named
 4287 ** SQL parameter is used more than once, second and subsequent
 4288 ** occurrences have the same index as the first occurrence.
 4289 ** ^The index for named parameters can be looked up using the
 4290 ** [sqlite3_bind_parameter_index()] API if desired.  ^The index
 4291 ** for &quot;?NNN&quot; parameters is the value of NNN.
 4292 ** ^The NNN value must be between 1 and the [sqlite3_limit()]
<span class="line-modified"> 4293 ** parameter [SQLITE_LIMIT_VARIABLE_NUMBER] (default value: 32766).</span>
 4294 **
 4295 ** ^The third argument is the value to bind to the parameter.
 4296 ** ^If the third parameter to sqlite3_bind_text() or sqlite3_bind_text16()
 4297 ** or sqlite3_bind_blob() is a NULL pointer then the fourth parameter
 4298 ** is ignored and the end result is the same as sqlite3_bind_null().
<span class="line-added"> 4299 ** ^If the third parameter to sqlite3_bind_text() is not NULL, then</span>
<span class="line-added"> 4300 ** it should be a pointer to well-formed UTF8 text.</span>
<span class="line-added"> 4301 ** ^If the third parameter to sqlite3_bind_text16() is not NULL, then</span>
<span class="line-added"> 4302 ** it should be a pointer to well-formed UTF16 text.</span>
<span class="line-added"> 4303 ** ^If the third parameter to sqlite3_bind_text64() is not NULL, then</span>
<span class="line-added"> 4304 ** it should be a pointer to a well-formed unicode string that is</span>
<span class="line-added"> 4305 ** either UTF8 if the sixth parameter is SQLITE_UTF8, or UTF16</span>
<span class="line-added"> 4306 ** otherwise.</span>
<span class="line-added"> 4307 **</span>
<span class="line-added"> 4308 ** [[byte-order determination rules]] ^The byte-order of</span>
<span class="line-added"> 4309 ** UTF16 input text is determined by the byte-order mark (BOM, U+FEFF)</span>
<span class="line-added"> 4310 ** found in first character, which is removed, or in the absence of a BOM</span>
<span class="line-added"> 4311 ** the byte order is the native byte order of the host</span>
<span class="line-added"> 4312 ** machine for sqlite3_bind_text16() or the byte order specified in</span>
<span class="line-added"> 4313 ** the 6th parameter for sqlite3_bind_text64().)^</span>
<span class="line-added"> 4314 ** ^If UTF16 input text contains invalid unicode</span>
<span class="line-added"> 4315 ** characters, then SQLite might change those invalid characters</span>
<span class="line-added"> 4316 ** into the unicode replacement character: U+FFFD.</span>
 4317 **
 4318 ** ^(In those routines that have a fourth argument, its value is the
 4319 ** number of bytes in the parameter.  To be clear: the value is the
 4320 ** number of &lt;u&gt;bytes&lt;/u&gt; in the value, not the number of characters.)^
 4321 ** ^If the fourth parameter to sqlite3_bind_text() or sqlite3_bind_text16()
 4322 ** is negative, then the length of the string is
 4323 ** the number of bytes up to the first zero terminator.
 4324 ** If the fourth parameter to sqlite3_bind_blob() is negative, then
 4325 ** the behavior is undefined.
 4326 ** If a non-negative fourth parameter is provided to sqlite3_bind_text()
 4327 ** or sqlite3_bind_text16() or sqlite3_bind_text64() then
 4328 ** that parameter must be the byte offset
 4329 ** where the NUL terminator would occur assuming the string were NUL
<span class="line-modified"> 4330 ** terminated.  If any NUL characters occurs at byte offsets less than</span>
 4331 ** the value of the fourth parameter then the resulting string value will
 4332 ** contain embedded NULs.  The result of expressions involving strings
 4333 ** with embedded NULs is undefined.
 4334 **
 4335 ** ^The fifth argument to the BLOB and string binding interfaces
 4336 ** is a destructor used to dispose of the BLOB or
 4337 ** string after SQLite has finished with it.  ^The destructor is called
 4338 ** to dispose of the BLOB or string even if the call to the bind API fails,
 4339 ** except the destructor is not called if the third parameter is a NULL
 4340 ** pointer or the fourth parameter is negative.
 4341 ** ^If the fifth argument is
 4342 ** the special value [SQLITE_STATIC], then SQLite assumes that the
 4343 ** information is in static, unmanaged space and does not need to be freed.
 4344 ** ^If the fifth argument has the value [SQLITE_TRANSIENT], then
 4345 ** SQLite makes its own private copy of the data immediately, before
 4346 ** the sqlite3_bind_*() routine returns.
 4347 **
 4348 ** ^The sixth argument to sqlite3_bind_text64() must be one of
 4349 ** [SQLITE_UTF8], [SQLITE_UTF16], [SQLITE_UTF16BE], or [SQLITE_UTF16LE]
 4350 ** to specify the encoding of the text in the third parameter.  If
</pre>
<hr />
<pre>
 5478 **
 5479 ** ^The first time the sqlite3_aggregate_context(C,N) routine is called
 5480 ** for a particular aggregate function, SQLite allocates
 5481 ** N bytes of memory, zeroes out that memory, and returns a pointer
 5482 ** to the new memory. ^On second and subsequent calls to
 5483 ** sqlite3_aggregate_context() for the same aggregate function instance,
 5484 ** the same buffer is returned.  Sqlite3_aggregate_context() is normally
 5485 ** called once for each invocation of the xStep callback and then one
 5486 ** last time when the xFinal callback is invoked.  ^(When no rows match
 5487 ** an aggregate query, the xStep() callback of the aggregate function
 5488 ** implementation is never called and xFinal() is called exactly once.
 5489 ** In those cases, sqlite3_aggregate_context() might be called for the
 5490 ** first time from within xFinal().)^
 5491 **
 5492 ** ^The sqlite3_aggregate_context(C,N) routine returns a NULL pointer
 5493 ** when first called if N is less than or equal to zero or if a memory
 5494 ** allocate error occurs.
 5495 **
 5496 ** ^(The amount of space allocated by sqlite3_aggregate_context(C,N) is
 5497 ** determined by the N parameter on first successful call.  Changing the
<span class="line-modified"> 5498 ** value of N in any subsequent call to sqlite3_aggregate_context() within</span>
 5499 ** the same aggregate function instance will not resize the memory
 5500 ** allocation.)^  Within the xFinal callback, it is customary to set
 5501 ** N=0 in calls to sqlite3_aggregate_context(C,N) so that no
 5502 ** pointless memory allocations occur.
 5503 **
 5504 ** ^SQLite automatically frees the memory allocated by
 5505 ** sqlite3_aggregate_context() when the aggregate query concludes.
 5506 **
 5507 ** The first parameter must be a copy of the
 5508 ** [sqlite3_context | SQL function context] that is the first parameter
 5509 ** to the xStep or xFinal callback routine that implements the aggregate
 5510 ** function.
 5511 **
 5512 ** This routine must be called from the same thread in which
 5513 ** the aggregate SQL function is running.
 5514 */
 5515 SQLITE_API void *sqlite3_aggregate_context(sqlite3_context*, int nBytes);
 5516 
 5517 /*
 5518 ** CAPI3REF: User Data For Functions
</pre>
<hr />
<pre>
 5635 **
 5636 ** ^The sqlite3_result_blob() interface sets the result from
 5637 ** an application-defined function to be the BLOB whose content is pointed
 5638 ** to by the second parameter and which is N bytes long where N is the
 5639 ** third parameter.
 5640 **
 5641 ** ^The sqlite3_result_zeroblob(C,N) and sqlite3_result_zeroblob64(C,N)
 5642 ** interfaces set the result of the application-defined function to be
 5643 ** a BLOB containing all zero bytes and N bytes in size.
 5644 **
 5645 ** ^The sqlite3_result_double() interface sets the result from
 5646 ** an application-defined function to be a floating point value specified
 5647 ** by its 2nd argument.
 5648 **
 5649 ** ^The sqlite3_result_error() and sqlite3_result_error16() functions
 5650 ** cause the implemented SQL function to throw an exception.
 5651 ** ^SQLite uses the string pointed to by the
 5652 ** 2nd parameter of sqlite3_result_error() or sqlite3_result_error16()
 5653 ** as the text of an error message.  ^SQLite interprets the error
 5654 ** message string from sqlite3_result_error() as UTF-8. ^SQLite
<span class="line-modified"> 5655 ** interprets the string from sqlite3_result_error16() as UTF-16 using</span>
<span class="line-modified"> 5656 ** the same [byte-order determination rules] as [sqlite3_bind_text16()].</span>
<span class="line-added"> 5657 ** ^If the third parameter to sqlite3_result_error()</span>
 5658 ** or sqlite3_result_error16() is negative then SQLite takes as the error
 5659 ** message all text up through the first zero character.
 5660 ** ^If the third parameter to sqlite3_result_error() or
 5661 ** sqlite3_result_error16() is non-negative then SQLite takes that many
 5662 ** bytes (not characters) from the 2nd parameter as the error message.
 5663 ** ^The sqlite3_result_error() and sqlite3_result_error16()
 5664 ** routines make a private copy of the error message text before
 5665 ** they return.  Hence, the calling function can deallocate or
 5666 ** modify the text after they return without harm.
 5667 ** ^The sqlite3_result_error_code() function changes the error code
 5668 ** returned by SQLite as a result of an error in a function.  ^By default,
 5669 ** the error code is SQLITE_ERROR.  ^A subsequent call to sqlite3_result_error()
 5670 ** or sqlite3_result_error16() resets the error code to SQLITE_ERROR.
 5671 **
 5672 ** ^The sqlite3_result_error_toobig() interface causes SQLite to throw an
 5673 ** error indicating that a string or BLOB is too long to represent.
 5674 **
 5675 ** ^The sqlite3_result_error_nomem() interface causes SQLite to throw an
 5676 ** error indicating that a memory allocation failed.
 5677 **
</pre>
<hr />
<pre>
 5705 ** function result.  If the 3rd parameter is non-negative, then it
 5706 ** must be the byte offset into the string where the NUL terminator would
 5707 ** appear if the string where NUL terminated.  If any NUL characters occur
 5708 ** in the string at a byte offset that is less than the value of the 3rd
 5709 ** parameter, then the resulting string will contain embedded NULs and the
 5710 ** result of expressions operating on strings with embedded NULs is undefined.
 5711 ** ^If the 4th parameter to the sqlite3_result_text* interfaces
 5712 ** or sqlite3_result_blob is a non-NULL pointer, then SQLite calls that
 5713 ** function as the destructor on the text or BLOB result when it has
 5714 ** finished using that result.
 5715 ** ^If the 4th parameter to the sqlite3_result_text* interfaces or to
 5716 ** sqlite3_result_blob is the special constant SQLITE_STATIC, then SQLite
 5717 ** assumes that the text or BLOB result is in constant space and does not
 5718 ** copy the content of the parameter nor call a destructor on the content
 5719 ** when it has finished using that result.
 5720 ** ^If the 4th parameter to the sqlite3_result_text* interfaces
 5721 ** or sqlite3_result_blob is the special constant SQLITE_TRANSIENT
 5722 ** then SQLite makes a copy of the result into space obtained
 5723 ** from [sqlite3_malloc()] before it returns.
 5724 **
<span class="line-added"> 5725 ** ^For the sqlite3_result_text16(), sqlite3_result_text16le(), and</span>
<span class="line-added"> 5726 ** sqlite3_result_text16be() routines, and for sqlite3_result_text64()</span>
<span class="line-added"> 5727 ** when the encoding is not UTF8, if the input UTF16 begins with a</span>
<span class="line-added"> 5728 ** byte-order mark (BOM, U+FEFF) then the BOM is removed from the</span>
<span class="line-added"> 5729 ** string and the rest of the string is interpreted according to the</span>
<span class="line-added"> 5730 ** byte-order specified by the BOM.  ^The byte-order specified by</span>
<span class="line-added"> 5731 ** the BOM at the beginning of the text overrides the byte-order</span>
<span class="line-added"> 5732 ** specified by the interface procedure.  ^So, for example, if</span>
<span class="line-added"> 5733 ** sqlite3_result_text16le() is invoked with text that begins</span>
<span class="line-added"> 5734 ** with bytes 0xfe, 0xff (a big-endian byte-order mark) then the</span>
<span class="line-added"> 5735 ** first two bytes of input are skipped and the remaining input</span>
<span class="line-added"> 5736 ** is interpreted as UTF16BE text.</span>
<span class="line-added"> 5737 **</span>
<span class="line-added"> 5738 ** ^For UTF16 input text to the sqlite3_result_text16(),</span>
<span class="line-added"> 5739 ** sqlite3_result_text16be(), sqlite3_result_text16le(), and</span>
<span class="line-added"> 5740 ** sqlite3_result_text64() routines, if the text contains invalid</span>
<span class="line-added"> 5741 ** UTF16 characters, the invalid characters might be converted</span>
<span class="line-added"> 5742 ** into the unicode replacement character, U+FFFD.</span>
<span class="line-added"> 5743 **</span>
 5744 ** ^The sqlite3_result_value() interface sets the result of
 5745 ** the application-defined function to be a copy of the
 5746 ** [unprotected sqlite3_value] object specified by the 2nd parameter.  ^The
 5747 ** sqlite3_result_value() interface makes a copy of the [sqlite3_value]
 5748 ** so that the [sqlite3_value] specified in the parameter may change or
 5749 ** be deallocated after sqlite3_result_value() returns without harm.
 5750 ** ^A [protected sqlite3_value] object may always be used where an
 5751 ** [unprotected sqlite3_value] object is required, so either
 5752 ** kind of [sqlite3_value] object can be used with this interface.
 5753 **
 5754 ** ^The sqlite3_result_pointer(C,P,T,D) interface sets the result to an
 5755 ** SQL NULL value, just like [sqlite3_result_null(C)], except that it
 5756 ** also associates the host-language pointer P or type T with that
 5757 ** NULL value such that the pointer can be retrieved within an
 5758 ** [application-defined SQL function] using [sqlite3_value_pointer()].
 5759 ** ^If the D parameter is not NULL, then it is a pointer to a destructor
 5760 ** for the P parameter.  ^SQLite invokes D with P as its only argument
 5761 ** when SQLite is finished with P.  The T parameter should be a static
 5762 ** string and preferably a string literal. The sqlite3_result_pointer()
 5763 ** routine is part of the [pointer passing interface] added for SQLite 3.20.0.
</pre>
<hr />
<pre>
 5929 ** connection.  The third argument is one of [SQLITE_UTF8], [SQLITE_UTF16BE],
 5930 ** or [SQLITE_UTF16LE], indicating the most desirable form of the collation
 5931 ** sequence function required.  The fourth parameter is the name of the
 5932 ** required collation sequence.)^
 5933 **
 5934 ** The callback function should register the desired collation using
 5935 ** [sqlite3_create_collation()], [sqlite3_create_collation16()], or
 5936 ** [sqlite3_create_collation_v2()].
 5937 */
 5938 SQLITE_API int sqlite3_collation_needed(
 5939   sqlite3*,
 5940   void*,
 5941   void(*)(void*,sqlite3*,int eTextRep,const char*)
 5942 );
 5943 SQLITE_API int sqlite3_collation_needed16(
 5944   sqlite3*,
 5945   void*,
 5946   void(*)(void*,sqlite3*,int eTextRep,const void*)
 5947 );
 5948 













































 5949 #ifdef SQLITE_ENABLE_CEROD
 5950 /*
 5951 ** Specify the activation key for a CEROD database.  Unless
 5952 ** activated, none of the CEROD routines will work.
 5953 */
 5954 SQLITE_API void sqlite3_activate_cerod(
 5955   const char *zPassPhrase        /* Activation phrase */
 5956 );
 5957 #endif
 5958 
 5959 /*
 5960 ** CAPI3REF: Suspend Execution For A Short Time
 5961 **
 5962 ** The sqlite3_sleep() function causes the current thread to suspend execution
 5963 ** for at least a number of milliseconds specified in its parameter.
 5964 **
 5965 ** If the operating system does not support sleep requests with
 5966 ** millisecond time resolution, then the time will be rounded up to
 5967 ** the nearest second. The number of milliseconds of sleep actually
 5968 ** requested from the operating system is returned.
</pre>
<hr />
<pre>
 7671 ** CAPI3REF: Testing Interface Operation Codes
 7672 **
 7673 ** These constants are the valid operation code parameters used
 7674 ** as the first argument to [sqlite3_test_control()].
 7675 **
 7676 ** These parameters and their meanings are subject to change
 7677 ** without notice.  These values are for testing purposes only.
 7678 ** Applications should not use any of these parameters or the
 7679 ** [sqlite3_test_control()] interface.
 7680 */
 7681 #define SQLITE_TESTCTRL_FIRST                    5
 7682 #define SQLITE_TESTCTRL_PRNG_SAVE                5
 7683 #define SQLITE_TESTCTRL_PRNG_RESTORE             6
 7684 #define SQLITE_TESTCTRL_PRNG_RESET               7  /* NOT USED */
 7685 #define SQLITE_TESTCTRL_BITVEC_TEST              8
 7686 #define SQLITE_TESTCTRL_FAULT_INSTALL            9
 7687 #define SQLITE_TESTCTRL_BENIGN_MALLOC_HOOKS     10
 7688 #define SQLITE_TESTCTRL_PENDING_BYTE            11
 7689 #define SQLITE_TESTCTRL_ASSERT                  12
 7690 #define SQLITE_TESTCTRL_ALWAYS                  13
<span class="line-modified"> 7691 #define SQLITE_TESTCTRL_RESERVE                 14  /* NOT USED */</span>
 7692 #define SQLITE_TESTCTRL_OPTIMIZATIONS           15
 7693 #define SQLITE_TESTCTRL_ISKEYWORD               16  /* NOT USED */
 7694 #define SQLITE_TESTCTRL_SCRATCHMALLOC           17  /* NOT USED */
 7695 #define SQLITE_TESTCTRL_INTERNAL_FUNCTIONS      17
 7696 #define SQLITE_TESTCTRL_LOCALTIME_FAULT         18
 7697 #define SQLITE_TESTCTRL_EXPLAIN_STMT            19  /* NOT USED */
 7698 #define SQLITE_TESTCTRL_ONCE_RESET_THRESHOLD    19
 7699 #define SQLITE_TESTCTRL_NEVER_CORRUPT           20
 7700 #define SQLITE_TESTCTRL_VDBE_COVERAGE           21
 7701 #define SQLITE_TESTCTRL_BYTEORDER               22
 7702 #define SQLITE_TESTCTRL_ISINIT                  23
 7703 #define SQLITE_TESTCTRL_SORTER_MMAP             24
 7704 #define SQLITE_TESTCTRL_IMPOSTER                25
 7705 #define SQLITE_TESTCTRL_PARSER_COVERAGE         26
 7706 #define SQLITE_TESTCTRL_RESULT_INTREAL          27
 7707 #define SQLITE_TESTCTRL_PRNG_SEED               28
 7708 #define SQLITE_TESTCTRL_EXTRA_SCHEMA_CHECKS     29
 7709 #define SQLITE_TESTCTRL_LAST                    29  /* Largest TESTCTRL */
 7710 
 7711 /*
</pre>
</td>
</tr>
</table>
<center><a href="sqlite3.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="sqlite3ext.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>