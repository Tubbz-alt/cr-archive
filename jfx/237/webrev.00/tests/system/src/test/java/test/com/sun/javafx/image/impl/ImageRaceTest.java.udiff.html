<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff tests/system/src/test/java/test/com/sun/javafx/image/impl/ImageRaceTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../javafx/scene/control/AccordionTitlePaneLeakTest.java.udiff.html" target="_top">next &gt;</a></center>    <h2>tests/system/src/test/java/test/com/sun/javafx/image/impl/ImageRaceTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2014, 2016, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2014, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -36,17 +36,14 @@</span>
  import com.sun.javafx.image.impl.ByteRgba;
  import com.sun.javafx.image.impl.IntArgb;
  import com.sun.javafx.image.impl.IntArgbPre;
  import java.util.ArrayList;
  import java.util.List;
<span class="udiff-line-removed">- import javafx.application.Application;</span>
<span class="udiff-line-removed">- import javafx.application.Platform;</span>
<span class="udiff-line-removed">- import javafx.stage.Stage;</span>
  import org.junit.Test;
  import static test.util.Util.TIMEOUT;
  
<span class="udiff-line-modified-removed">- public class ImageRaceTest extends Application {</span>
<span class="udiff-line-modified-added">+ public class ImageRaceTest {</span>
      static boolean verbose;
      static List&lt;Initializer&gt; initalizers = new ArrayList&lt;&gt;();
      static volatile boolean ready = false;
  
      static interface InitProc {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -72,17 +69,10 @@</span>
              init.get();
              if (verbose) System.err.println(getName()+&quot; done&quot;);
          }
      }
  
<span class="udiff-line-removed">-     @Override</span>
<span class="udiff-line-removed">-     public void start(Stage stage) {</span>
<span class="udiff-line-removed">-         forkAndJoinInitializers();</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         Platform.exit();</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
      void forkAndJoinInitializers() {
          long limit = System.currentTimeMillis() + TIMEOUT;
          for (Initializer i : initalizers) {
              i.start();
              while (!i.isRunning() &amp;&amp; System.currentTimeMillis() &lt; limit) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -111,15 +101,10 @@</span>
                  }
              }
          } catch (InterruptedException ex) {}
      }
  
<span class="udiff-line-removed">-     public static void main(String[] args) {</span>
<span class="udiff-line-removed">-         init(args);</span>
<span class="udiff-line-removed">-         Application.launch(args);</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
      static void init(String[] args) {
          boolean getters, setters, converters;
          if (args.length == 0) {
              getters = setters = converters = true;
          } else {
</pre>
<center>&lt; prev <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../javafx/scene/control/AccordionTitlePaneLeakTest.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>