<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/main/java/javafx/scene/control/skin/TabPaneSkin.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../test/java/test/javafx/scene/control/TabPaneTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.controls/src/main/java/javafx/scene/control/skin/TabPaneSkin.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
2031         });
2032     }
2033 
2034     private void handleHeaderMousePressed(MouseEvent event) {
2035         if (event.getButton().equals(MouseButton.PRIMARY)) {
2036             ((StackPane) event.getSource()).setMouseTransparent(true);
2037             startDrag(event);
2038         }
2039     }
2040 
2041     private void handleHeaderMouseReleased(MouseEvent event) {
2042         if (event.getButton().equals(MouseButton.PRIMARY)) {
2043             ((StackPane) event.getSource()).setMouseTransparent(false);
2044             stopDrag();
2045             event.consume();
2046         }
2047     }
2048 
2049     private void handleHeaderDragged(MouseEvent event) {
2050         if (event.getButton().equals(MouseButton.PRIMARY)) {
<span class="line-modified">2051             perfromDrag(event);</span>
2052         }
2053     }
2054 
2055     private double getDragDelta(double curr, double prev) {
2056         if (getSkinnable().getSide().equals(Side.TOP) ||
2057                 getSkinnable().getSide().equals(Side.RIGHT)) {
2058             return curr - prev;
2059         } else {
2060             return prev - curr;
2061         }
2062     }
2063 
2064     private int deriveTabHeaderLayoutXDirection() {
2065         if (getSkinnable().getSide().equals(Side.TOP) ||
2066                 getSkinnable().getSide().equals(Side.RIGHT)) {
2067             // TabHeaderSkin are laid out in left to right direction inside headersRegion
2068             return MIN_TO_MAX;
2069         }
2070         // TabHeaderSkin are laid out in right to left direction inside headersRegion
2071         return MAX_TO_MIN;
2072     }
2073 
<span class="line-modified">2074     private void perfromDrag(MouseEvent event) {</span>



2075         int dragDirection;
2076         double dragHeaderNewLayoutX;
2077         Bounds dragHeaderBounds;
2078         Bounds dropHeaderBounds;
2079         double draggedDist;
2080         double mouseCurrentLoc = getHeaderRegionLocalX(event);
2081         double dragDelta = getDragDelta(mouseCurrentLoc, dragEventPrevLoc);
2082 
2083         if (dragDelta &gt; 0) {
2084             // Dragging the tab header towards higher indexed tab headers inside headersRegion.
2085             dragDirection = MIN_TO_MAX;
2086         } else {
2087             // Dragging the tab header towards lower indexed tab headers inside headersRegion.
2088             dragDirection = MAX_TO_MIN;
2089         }
2090         // Stop dropHeaderAnim if direction of drag is changed
2091         if (prevDragDirection != dragDirection) {
2092             stopAnim(dropHeaderAnim);
2093             prevDragDirection = dragDirection;
2094         }
</pre>
</td>
<td>
<hr />
<pre>
2031         });
2032     }
2033 
2034     private void handleHeaderMousePressed(MouseEvent event) {
2035         if (event.getButton().equals(MouseButton.PRIMARY)) {
2036             ((StackPane) event.getSource()).setMouseTransparent(true);
2037             startDrag(event);
2038         }
2039     }
2040 
2041     private void handleHeaderMouseReleased(MouseEvent event) {
2042         if (event.getButton().equals(MouseButton.PRIMARY)) {
2043             ((StackPane) event.getSource()).setMouseTransparent(false);
2044             stopDrag();
2045             event.consume();
2046         }
2047     }
2048 
2049     private void handleHeaderDragged(MouseEvent event) {
2050         if (event.getButton().equals(MouseButton.PRIMARY)) {
<span class="line-modified">2051             performDrag(event);</span>
2052         }
2053     }
2054 
2055     private double getDragDelta(double curr, double prev) {
2056         if (getSkinnable().getSide().equals(Side.TOP) ||
2057                 getSkinnable().getSide().equals(Side.RIGHT)) {
2058             return curr - prev;
2059         } else {
2060             return prev - curr;
2061         }
2062     }
2063 
2064     private int deriveTabHeaderLayoutXDirection() {
2065         if (getSkinnable().getSide().equals(Side.TOP) ||
2066                 getSkinnable().getSide().equals(Side.RIGHT)) {
2067             // TabHeaderSkin are laid out in left to right direction inside headersRegion
2068             return MIN_TO_MAX;
2069         }
2070         // TabHeaderSkin are laid out in right to left direction inside headersRegion
2071         return MAX_TO_MIN;
2072     }
2073 
<span class="line-modified">2074     private void performDrag(MouseEvent event) {</span>
<span class="line-added">2075         if (dragState == DragState.NONE) {</span>
<span class="line-added">2076             return;</span>
<span class="line-added">2077         }</span>
2078         int dragDirection;
2079         double dragHeaderNewLayoutX;
2080         Bounds dragHeaderBounds;
2081         Bounds dropHeaderBounds;
2082         double draggedDist;
2083         double mouseCurrentLoc = getHeaderRegionLocalX(event);
2084         double dragDelta = getDragDelta(mouseCurrentLoc, dragEventPrevLoc);
2085 
2086         if (dragDelta &gt; 0) {
2087             // Dragging the tab header towards higher indexed tab headers inside headersRegion.
2088             dragDirection = MIN_TO_MAX;
2089         } else {
2090             // Dragging the tab header towards lower indexed tab headers inside headersRegion.
2091             dragDirection = MAX_TO_MIN;
2092         }
2093         // Stop dropHeaderAnim if direction of drag is changed
2094         if (prevDragDirection != dragDirection) {
2095             stopAnim(dropHeaderAnim);
2096             prevDragDirection = dragDirection;
2097         }
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../test/java/test/javafx/scene/control/TabPaneTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>