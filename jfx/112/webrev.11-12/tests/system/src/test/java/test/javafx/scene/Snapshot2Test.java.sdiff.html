<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff tests/system/src/test/java/test/javafx/scene/Snapshot2Test.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>tests/system/src/test/java/test/javafx/scene/Snapshot2Test.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package test.javafx.scene;
 27 
 28 import java.util.ArrayList;
 29 import java.util.Collection;
 30 import java.util.concurrent.ThreadLocalRandom;
 31 import java.util.stream.IntStream;


 32 import javafx.geometry.Rectangle2D;
 33 import javafx.scene.Group;
 34 import javafx.scene.Node;
 35 import javafx.scene.Scene;
 36 import javafx.scene.SnapshotParameters;
 37 import javafx.scene.SnapshotResult;
 38 import javafx.scene.image.Image;
 39 import javafx.scene.image.ImageView;
 40 import javafx.scene.image.WritableImage;
 41 import javafx.scene.paint.Color;
 42 import javafx.scene.shape.Rectangle;
 43 import javafx.scene.transform.Transform;
 44 import javafx.util.Callback;
 45 import org.junit.After;
 46 import org.junit.AfterClass;
 47 import org.junit.Before;
 48 import org.junit.BeforeClass;
 49 import org.junit.Test;
 50 import org.junit.runner.RunWith;
 51 import org.junit.runners.Parameterized;
</pre>
<hr />
<pre>
234 
235     private void setupSimpleScene() {
236         Util.runAndWait(() -&gt; {
237             tmpNode = new Rectangle(10, 5, NODE_W, NODE_H);
238             Group root = new Group();
239             tmpScene = new Scene(root, SCENE_W, SCENE_H);
240             root.getChildren().add(tmpNode);
241             if (live) {
242                 tmpStage = new TestStage(tmpScene);
243                 assertNotNull(tmpScene.getWindow());
244                 tmpStage.show();
245             } else {
246                 assertNull(tmpScene.getWindow());
247             }
248         });
249     }
250 
251     private void setupImageScene(int width, int height) {
252         Util.runAndWait(() -&gt; {
253             WritableImage image = new WritableImage(width, height);
<span class="line-modified">254             // Initialize image with noise</span>
255             var pixWriter = image.getPixelWriter();
256             assertNotNull(pixWriter);




257             for (int x = 0; x &lt; width; x++) {
258                 for (int y = 0; y &lt; height; y++) {
<span class="line-modified">259                     pixWriter.setColor(x, y, Color.rgb(</span>
<span class="line-modified">260                             ThreadLocalRandom.current().nextInt(0, 256),</span>
<span class="line-modified">261                             ThreadLocalRandom.current().nextInt(0, 256),</span>
<span class="line-modified">262                             ThreadLocalRandom.current().nextInt(0, 256)));</span>


263                 }



264             }
265             tmpNode = new ImageView(image);
266             Group root = new Group();
267             tmpScene = new Scene(root, width, height);
268             root.getChildren().add(tmpNode);
269             if (live) {
270                 tmpStage = new TestStage(tmpScene);
271                 assertNotNull(tmpScene.getWindow());
272                 tmpStage.show();
273             }
274             else {
275                 assertNull(tmpScene.getWindow());
276             }
277         });
278     }
279 
280     // Test snapshot of a simple scene
281 
282     @Test
283     public void testSnapshotSimpleSceneImm() {
</pre>
</td>
<td>
<hr />
<pre>
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package test.javafx.scene;
 27 
 28 import java.util.ArrayList;
 29 import java.util.Collection;
 30 import java.util.concurrent.ThreadLocalRandom;
 31 import java.util.stream.IntStream;
<span class="line-added"> 32 </span>
<span class="line-added"> 33 import javafx.animation.Interpolator;</span>
 34 import javafx.geometry.Rectangle2D;
 35 import javafx.scene.Group;
 36 import javafx.scene.Node;
 37 import javafx.scene.Scene;
 38 import javafx.scene.SnapshotParameters;
 39 import javafx.scene.SnapshotResult;
 40 import javafx.scene.image.Image;
 41 import javafx.scene.image.ImageView;
 42 import javafx.scene.image.WritableImage;
 43 import javafx.scene.paint.Color;
 44 import javafx.scene.shape.Rectangle;
 45 import javafx.scene.transform.Transform;
 46 import javafx.util.Callback;
 47 import org.junit.After;
 48 import org.junit.AfterClass;
 49 import org.junit.Before;
 50 import org.junit.BeforeClass;
 51 import org.junit.Test;
 52 import org.junit.runner.RunWith;
 53 import org.junit.runners.Parameterized;
</pre>
<hr />
<pre>
236 
237     private void setupSimpleScene() {
238         Util.runAndWait(() -&gt; {
239             tmpNode = new Rectangle(10, 5, NODE_W, NODE_H);
240             Group root = new Group();
241             tmpScene = new Scene(root, SCENE_W, SCENE_H);
242             root.getChildren().add(tmpNode);
243             if (live) {
244                 tmpStage = new TestStage(tmpScene);
245                 assertNotNull(tmpScene.getWindow());
246                 tmpStage.show();
247             } else {
248                 assertNull(tmpScene.getWindow());
249             }
250         });
251     }
252 
253     private void setupImageScene(int width, int height) {
254         Util.runAndWait(() -&gt; {
255             WritableImage image = new WritableImage(width, height);
<span class="line-modified">256             // Initialize image with a bilinear gradient</span>
257             var pixWriter = image.getPixelWriter();
258             assertNotNull(pixWriter);
<span class="line-added">259             double stepX = 1.0 / (width - 1);</span>
<span class="line-added">260             double stepY = 1.0 / (height - 1);</span>
<span class="line-added">261             double tX = 0;</span>
<span class="line-added">262             double tY = 0;</span>
263             for (int x = 0; x &lt; width; x++) {
264                 for (int y = 0; y &lt; height; y++) {
<span class="line-modified">265                     pixWriter.setColor(x, y, (Color) Interpolator.LINEAR.interpolate(</span>
<span class="line-modified">266                             Interpolator.LINEAR.interpolate(Color.CYAN, Color.YELLOW, tX),</span>
<span class="line-modified">267                             Interpolator.LINEAR.interpolate(Color.MAGENTA, Color.WHITE, tX),</span>
<span class="line-modified">268                             tY));</span>
<span class="line-added">269                     tX += stepX;</span>
<span class="line-added">270                     tX = tX &gt; 1 ? 1 : tX;</span>
271                 }
<span class="line-added">272                 tY += stepY;</span>
<span class="line-added">273                 tY = tY &gt; 1 ? 1 : tY;</span>
<span class="line-added">274                 tX = 0;</span>
275             }
276             tmpNode = new ImageView(image);
277             Group root = new Group();
278             tmpScene = new Scene(root, width, height);
279             root.getChildren().add(tmpNode);
280             if (live) {
281                 tmpStage = new TestStage(tmpScene);
282                 assertNotNull(tmpScene.getWindow());
283                 tmpStage.show();
284             }
285             else {
286                 assertNull(tmpScene.getWindow());
287             }
288         });
289     }
290 
291     // Test snapshot of a simple scene
292 
293     @Test
294     public void testSnapshotSimpleSceneImm() {
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>