<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.graphics/src/main/java/javafx/scene/Scene.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.graphics/src/main/java/javafx/scene/Scene.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
1273                 peer.releaseSynchronization(false);
1274             }
1275         } else {
1276             scenePulseListener.synchronizeSceneNodes();
1277         }
1278 
1279     }
1280 
1281     // Shared method for Scene.snapshot and Node.snapshot. It is static because
1282     // we might be doing a Node snapshot with a null scene
1283     static WritableImage doSnapshot(Scene scene,
1284             double x, double y, double w, double h,
1285             Node root, BaseTransform transform, boolean depthBuffer,
1286             Paint fill, Camera camera, WritableImage wimg) {
1287 
1288         Toolkit tk = Toolkit.getToolkit();
1289         Toolkit.ImageRenderingContext context = new Toolkit.ImageRenderingContext();
1290 
1291         int xMin = (int)Math.floor(x);
1292         int yMin = (int)Math.floor(y);
<span class="line-modified">1293         int xMax = (int)Math.ceil(x + w);</span>
<span class="line-modified">1294         int yMax = (int)Math.ceil(y + h);</span>
<span class="line-removed">1295         int width = Math.max(xMax - xMin, 1);</span>
<span class="line-removed">1296         int height = Math.max(yMax - yMin, 1);</span>
1297         if (wimg == null) {




1298             wimg = new WritableImage(width, height);
1299         } else {
1300             width = (int)wimg.getWidth();
1301             height = (int)wimg.getHeight();
1302         }
1303 
1304         setAllowPGAccess(true);
1305         context.x = xMin;
1306         context.y = yMin;
1307         context.width = width;
1308         context.height = height;
1309         context.transform = transform;
1310         context.depthBuffer = depthBuffer;
1311         context.root = root.getPeer();
1312         context.platformPaint = fill == null ? null : tk.getPaint(fill);
1313         double cameraViewWidth = 1.0;
1314         double cameraViewHeight = 1.0;
1315         if (camera != null) {
1316             // temporarily adjust camera viewport to the snapshot size
1317             cameraViewWidth = camera.getViewWidth();
</pre>
</td>
<td>
<hr />
<pre>
1273                 peer.releaseSynchronization(false);
1274             }
1275         } else {
1276             scenePulseListener.synchronizeSceneNodes();
1277         }
1278 
1279     }
1280 
1281     // Shared method for Scene.snapshot and Node.snapshot. It is static because
1282     // we might be doing a Node snapshot with a null scene
1283     static WritableImage doSnapshot(Scene scene,
1284             double x, double y, double w, double h,
1285             Node root, BaseTransform transform, boolean depthBuffer,
1286             Paint fill, Camera camera, WritableImage wimg) {
1287 
1288         Toolkit tk = Toolkit.getToolkit();
1289         Toolkit.ImageRenderingContext context = new Toolkit.ImageRenderingContext();
1290 
1291         int xMin = (int)Math.floor(x);
1292         int yMin = (int)Math.floor(y);
<span class="line-modified">1293         int width;</span>
<span class="line-modified">1294         int height;</span>


1295         if (wimg == null) {
<span class="line-added">1296             int xMax = (int)Math.ceil(x + w);</span>
<span class="line-added">1297             int yMax = (int)Math.ceil(y + h);</span>
<span class="line-added">1298             width = Math.max(xMax - xMin, 1);</span>
<span class="line-added">1299             height = Math.max(yMax - yMin, 1);</span>
1300             wimg = new WritableImage(width, height);
1301         } else {
1302             width = (int)wimg.getWidth();
1303             height = (int)wimg.getHeight();
1304         }
1305 
1306         setAllowPGAccess(true);
1307         context.x = xMin;
1308         context.y = yMin;
1309         context.width = width;
1310         context.height = height;
1311         context.transform = transform;
1312         context.depthBuffer = depthBuffer;
1313         context.root = root.getPeer();
1314         context.platformPaint = fill == null ? null : tk.getPaint(fill);
1315         double cameraViewWidth = 1.0;
1316         double cameraViewHeight = 1.0;
1317         if (camera != null) {
1318             // temporarily adjust camera viewport to the snapshot size
1319             cameraViewWidth = camera.getViewWidth();
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>