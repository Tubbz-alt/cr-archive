<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff tests/system/src/test/java/test/javafx/scene/Snapshot2Test.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>tests/system/src/test/java/test/javafx/scene/Snapshot2Test.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
397             return false;
398         }
399         int height = (int)imageA.getHeight();
400         if (height != (int)imageB.getHeight()) {
401             return false;
402         }
403         var pixRdrA = imageA.getPixelReader();
404         var pixRdrB = imageB.getPixelReader();
405         return IntStream.range(0, width).parallel()
406                 .allMatch(x -&gt; IntStream.range(0, height).parallel()
407                         .allMatch(y -&gt; pixRdrA.getArgb(x, y) == pixRdrB.getArgb(x, y)));
408     }
409 
410     @Test
411     public void testSnapshot2x1TilesSameSizeImm() {
412         doTestTiledSnapshotImm(4100, 10);
413     }
414 
415     @Test
416     public void testSnapshot2x1TilesDifferentSizeImm() {
<span class="line-modified">417         doTestTiledSnapshotImm(4101, 10);</span>
418     }
419 
420     @Test
421     public void testSnapshot1x2TilesSameSizeImm() {
422         doTestTiledSnapshotImm(10, 4100);
423     }
424 
425     @Test
426     public void testSnapshot1x2TilesDifferentSizeImm() {
<span class="line-modified">427         doTestTiledSnapshotImm(10, 4101);</span>
428     }
429 
430     @Test
431     public void testSnapshot2x2TilesSameSizeImm() {
432         doTestTiledSnapshotImm(4100, 4100);
433     }
434 
435     @Test
436     public void testSnapshot2x2TilesDifferentSizeImm() {
<span class="line-modified">437         doTestTiledSnapshotImm(4101, 4101);</span>
438     }
439 
440     @Test
441     public void testSnapshot2x2TilesSameHeightImm() {
<span class="line-modified">442         doTestTiledSnapshotImm(4101, 4100);</span>
443     }
444 
445     @Test
446     public void testSnapshot2x2TilesSameWidthImm() {
<span class="line-modified">447         doTestTiledSnapshotImm(4100, 4101);</span>
448     }
449 
450     @Test
451     public void testSnapshot2x1TilesSameSizeDefer() {
452         doTestTiledSnapshotDefer(4100, 10);
453     }
454 
455     @Test
456     public void testSnapshot2x1TilesDifferentSizeDefer() {
<span class="line-modified">457         doTestTiledSnapshotDefer(4101, 10);</span>
458     }
459 
460     @Test
461     public void testSnapshot1x2TilesSameSizeDefer() {
462         doTestTiledSnapshotDefer(10, 4100);
463     }
464 
465     @Test
466     public void testSnapshot1x2TilesDifferentSizeDefer() {
<span class="line-modified">467         doTestTiledSnapshotDefer(10, 4101);</span>
468     }
469 
470     @Test
471     public void testSnapshot2x2TilesSameSizeDefer() {
472         doTestTiledSnapshotDefer(4100, 4100);
473     }
474 
475     @Test
476     public void testSnapshot2x2TilesDifferentSizeDefer() {
<span class="line-modified">477         doTestTiledSnapshotDefer(4101, 4101);</span>
478     }
479 
480     @Test
481     public void testSnapshot2x2TilesSameHeightDefer() {
<span class="line-modified">482         doTestTiledSnapshotDefer(4101, 4100);</span>
483     }
484 
485     @Test
486     public void testSnapshot2x2TilesSameWidthDefer() {
<span class="line-modified">487         doTestTiledSnapshotDefer(4100, 4101);</span>
488     }
489 
490     // Test node snapshot with a scale transform
491 
492     private void doTestSnapshotScaleNodeImm(int xScale, int yScale) {
493         setupSimpleScene();
494         final SnapshotParameters snapshotParams = new SnapshotParameters();
495         snapshotParams.setTransform(Transform.scale(xScale, yScale));
496         final int WIDTH = NODE_W * xScale;
497         final int HEIGHT = NODE_H * yScale;
498         final WritableImage img = useImage ? new WritableImage(WIDTH, HEIGHT) : null;
499         Util.runAndWait(() -&gt; {
500             WritableImage wimg = tmpScene.getRoot().snapshot(snapshotParams, img);
501             assertNotNull(wimg);
502             if (img != null) {
503                 assertSame(img, wimg);
504             }
505 
506             assertEquals(WIDTH, (int)wimg.getWidth());
507             assertEquals(HEIGHT, (int)wimg.getHeight());
</pre>
</td>
<td>
<hr />
<pre>
397             return false;
398         }
399         int height = (int)imageA.getHeight();
400         if (height != (int)imageB.getHeight()) {
401             return false;
402         }
403         var pixRdrA = imageA.getPixelReader();
404         var pixRdrB = imageB.getPixelReader();
405         return IntStream.range(0, width).parallel()
406                 .allMatch(x -&gt; IntStream.range(0, height).parallel()
407                         .allMatch(y -&gt; pixRdrA.getArgb(x, y) == pixRdrB.getArgb(x, y)));
408     }
409 
410     @Test
411     public void testSnapshot2x1TilesSameSizeImm() {
412         doTestTiledSnapshotImm(4100, 10);
413     }
414 
415     @Test
416     public void testSnapshot2x1TilesDifferentSizeImm() {
<span class="line-modified">417         doTestTiledSnapshotImm(4099, 10);</span>
418     }
419 
420     @Test
421     public void testSnapshot1x2TilesSameSizeImm() {
422         doTestTiledSnapshotImm(10, 4100);
423     }
424 
425     @Test
426     public void testSnapshot1x2TilesDifferentSizeImm() {
<span class="line-modified">427         doTestTiledSnapshotImm(10, 4099);</span>
428     }
429 
430     @Test
431     public void testSnapshot2x2TilesSameSizeImm() {
432         doTestTiledSnapshotImm(4100, 4100);
433     }
434 
435     @Test
436     public void testSnapshot2x2TilesDifferentSizeImm() {
<span class="line-modified">437         doTestTiledSnapshotImm(4099, 4099);</span>
438     }
439 
440     @Test
441     public void testSnapshot2x2TilesSameHeightImm() {
<span class="line-modified">442         doTestTiledSnapshotImm(4099, 4100);</span>
443     }
444 
445     @Test
446     public void testSnapshot2x2TilesSameWidthImm() {
<span class="line-modified">447         doTestTiledSnapshotImm(4100, 4099);</span>
448     }
449 
450     @Test
451     public void testSnapshot2x1TilesSameSizeDefer() {
452         doTestTiledSnapshotDefer(4100, 10);
453     }
454 
455     @Test
456     public void testSnapshot2x1TilesDifferentSizeDefer() {
<span class="line-modified">457         doTestTiledSnapshotDefer(4099, 10);</span>
458     }
459 
460     @Test
461     public void testSnapshot1x2TilesSameSizeDefer() {
462         doTestTiledSnapshotDefer(10, 4100);
463     }
464 
465     @Test
466     public void testSnapshot1x2TilesDifferentSizeDefer() {
<span class="line-modified">467         doTestTiledSnapshotDefer(10, 4099);</span>
468     }
469 
470     @Test
471     public void testSnapshot2x2TilesSameSizeDefer() {
472         doTestTiledSnapshotDefer(4100, 4100);
473     }
474 
475     @Test
476     public void testSnapshot2x2TilesDifferentSizeDefer() {
<span class="line-modified">477         doTestTiledSnapshotDefer(4099, 4099);</span>
478     }
479 
480     @Test
481     public void testSnapshot2x2TilesSameHeightDefer() {
<span class="line-modified">482         doTestTiledSnapshotDefer(4099, 4100);</span>
483     }
484 
485     @Test
486     public void testSnapshot2x2TilesSameWidthDefer() {
<span class="line-modified">487         doTestTiledSnapshotDefer(4100, 4099);</span>
488     }
489 
490     // Test node snapshot with a scale transform
491 
492     private void doTestSnapshotScaleNodeImm(int xScale, int yScale) {
493         setupSimpleScene();
494         final SnapshotParameters snapshotParams = new SnapshotParameters();
495         snapshotParams.setTransform(Transform.scale(xScale, yScale));
496         final int WIDTH = NODE_W * xScale;
497         final int HEIGHT = NODE_H * yScale;
498         final WritableImage img = useImage ? new WritableImage(WIDTH, HEIGHT) : null;
499         Util.runAndWait(() -&gt; {
500             WritableImage wimg = tmpScene.getRoot().snapshot(snapshotParams, img);
501             assertNotNull(wimg);
502             if (img != null) {
503                 assertSame(img, wimg);
504             }
505 
506             assertEquals(WIDTH, (int)wimg.getWidth());
507             assertEquals(HEIGHT, (int)wimg.getHeight());
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>