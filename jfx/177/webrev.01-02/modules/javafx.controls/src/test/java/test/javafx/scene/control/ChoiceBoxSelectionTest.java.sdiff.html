<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/test/java/test/javafx/scene/control/ChoiceBoxSelectionTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../main/java/javafx/scene/control/skin/ChoiceBoxSkin.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.controls/src/test/java/test/javafx/scene/control/ChoiceBoxSelectionTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 82         int selectedIndex = box.getItems().size() - 1;
 83         sm.select(selectedIndex);
 84         showChoiceBox();
 85         box.show();
 86         assertToggleSelected(selectedIndex);
 87     }
 88 
 89     /**
 90      * selected index taken by toggle
 91      */
 92     @Test
 93     public void testBaseToggleInitialSelect() {
 94         SingleSelectionModel&lt;String&gt; sm = box.getSelectionModel();
 95         int selectedIndex = box.getItems().size() - 1;
 96         sm.select(selectedIndex);
 97         showChoiceBox();
 98         assertToggleSelected(selectedIndex);
 99     }
100 
101     /**
<span class="line-modified">102      * toggle must be unselected if separator is selected</span>
103      */
104     @SuppressWarnings({ &quot;rawtypes&quot;, &quot;unchecked&quot; })
105     @Test
106     public void testBaseToggleSeparator() {
107         ChoiceBox box = new ChoiceBox(FXCollections.observableArrayList(
108                 &quot;Apple&quot;, &quot;Banana&quot;, new Separator(), &quot;Orange&quot;));
109         int separatorIndex = 2;
110         showControl(box);
111         SingleSelectionModel&lt;?&gt; sm = box.getSelectionModel();
112         int selectedIndex = 1;
113         sm.select(selectedIndex);
114         sm.select(separatorIndex);


115         assertToggleSelected(box, -1);
116     }
117 
118     /**
119      * Not quite https://bugs.openjdk.java.net/browse/JDK-8089398
120      * (the issue there is setting value while selectionModel == null)
121      *
122      * This here throws NPE if selectionModel is null when the skin is attached.
123      * Base reason is JDK-8242489.
124      *
125      * @see ChoiceBoxTest#selectionModelCanBeNull()
126      */
127     @Test
128     public void testNullSelectionModel() {
129         box.setSelectionModel(null);
130         showChoiceBox();
131     }
132 
133 
134 //------------ toggle follows selection change: select -&gt; show -&gt; empty
</pre>
</td>
<td>
<hr />
<pre>
 82         int selectedIndex = box.getItems().size() - 1;
 83         sm.select(selectedIndex);
 84         showChoiceBox();
 85         box.show();
 86         assertToggleSelected(selectedIndex);
 87     }
 88 
 89     /**
 90      * selected index taken by toggle
 91      */
 92     @Test
 93     public void testBaseToggleInitialSelect() {
 94         SingleSelectionModel&lt;String&gt; sm = box.getSelectionModel();
 95         int selectedIndex = box.getItems().size() - 1;
 96         sm.select(selectedIndex);
 97         showChoiceBox();
 98         assertToggleSelected(selectedIndex);
 99     }
100 
101     /**
<span class="line-modified">102      * Toggle must be unselected if separator is selected</span>
103      */
104     @SuppressWarnings({ &quot;rawtypes&quot;, &quot;unchecked&quot; })
105     @Test
106     public void testBaseToggleSeparator() {
107         ChoiceBox box = new ChoiceBox(FXCollections.observableArrayList(
108                 &quot;Apple&quot;, &quot;Banana&quot;, new Separator(), &quot;Orange&quot;));
109         int separatorIndex = 2;
110         showControl(box);
111         SingleSelectionModel&lt;?&gt; sm = box.getSelectionModel();
112         int selectedIndex = 1;
113         sm.select(selectedIndex);
114         sm.select(separatorIndex);
<span class="line-added">115         // implementation detail of current sm (openjfx14): it allows a Separator</span>
<span class="line-added">116         // to be selected - skin must unselect its toggles</span>
117         assertToggleSelected(box, -1);
118     }
119 
120     /**
121      * Not quite https://bugs.openjdk.java.net/browse/JDK-8089398
122      * (the issue there is setting value while selectionModel == null)
123      *
124      * This here throws NPE if selectionModel is null when the skin is attached.
125      * Base reason is JDK-8242489.
126      *
127      * @see ChoiceBoxTest#selectionModelCanBeNull()
128      */
129     @Test
130     public void testNullSelectionModel() {
131         box.setSelectionModel(null);
132         showChoiceBox();
133     }
134 
135 
136 //------------ toggle follows selection change: select -&gt; show -&gt; empty
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../main/java/javafx/scene/control/skin/ChoiceBoxSkin.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>