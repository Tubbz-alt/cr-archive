<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/main/java/javafx/scene/control/ChoiceBox.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="skin/ChoiceBoxSkin.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.controls/src/main/java/javafx/scene/control/ChoiceBox.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
165      **************************************************************************/
166 
167     /**
168      * The selection model for the ChoiceBox. Only a single choice can be made,
169      * hence, the ChoiceBox supports only a SingleSelectionModel. Generally, the
170      * main interaction with the selection model is to explicitly set which item
171      * in the items list should be selected, or to listen to changes in the
172      * selection to know which item has been chosen.
173      */
174     private ObjectProperty&lt;SingleSelectionModel&lt;T&gt;&gt; selectionModel =
175             new SimpleObjectProperty&lt;SingleSelectionModel&lt;T&gt;&gt;(this, &quot;selectionModel&quot;) {
176          private SelectionModel&lt;T&gt; oldSM = null;
177         @Override protected void invalidated() {
178             if (oldSM != null) {
179                 oldSM.selectedItemProperty().removeListener(selectedItemListener);
180             }
181             SelectionModel&lt;T&gt; sm = get();
182             oldSM = sm;
183             if (sm != null) {
184                 sm.selectedItemProperty().addListener(selectedItemListener);

185                 if (sm.getSelectedItem() != null &amp;&amp; ! valueProperty().isBound()) {
186                     ChoiceBox.this.setValue(sm.getSelectedItem());
187                 }
188             }
189         }
190     };
191 
192     private ChangeListener&lt;T&gt; selectedItemListener = (ov, t, t1) -&gt; {
193         if (! valueProperty().isBound()) {
194             setValue(t1);
195         }
196     };
197 
198 
199     public final void setSelectionModel(SingleSelectionModel&lt;T&gt; value) { selectionModel.set(value); }
200     public final SingleSelectionModel&lt;T&gt; getSelectionModel() { return selectionModel.get(); }
201     public final ObjectProperty&lt;SingleSelectionModel&lt;T&gt;&gt; selectionModelProperty() { return selectionModel; }
202 
203 
204     /**
</pre>
</td>
<td>
<hr />
<pre>
165      **************************************************************************/
166 
167     /**
168      * The selection model for the ChoiceBox. Only a single choice can be made,
169      * hence, the ChoiceBox supports only a SingleSelectionModel. Generally, the
170      * main interaction with the selection model is to explicitly set which item
171      * in the items list should be selected, or to listen to changes in the
172      * selection to know which item has been chosen.
173      */
174     private ObjectProperty&lt;SingleSelectionModel&lt;T&gt;&gt; selectionModel =
175             new SimpleObjectProperty&lt;SingleSelectionModel&lt;T&gt;&gt;(this, &quot;selectionModel&quot;) {
176          private SelectionModel&lt;T&gt; oldSM = null;
177         @Override protected void invalidated() {
178             if (oldSM != null) {
179                 oldSM.selectedItemProperty().removeListener(selectedItemListener);
180             }
181             SelectionModel&lt;T&gt; sm = get();
182             oldSM = sm;
183             if (sm != null) {
184                 sm.selectedItemProperty().addListener(selectedItemListener);
<span class="line-added">185                 // unfixed part of JDK-8090015 - why exclude null?</span>
186                 if (sm.getSelectedItem() != null &amp;&amp; ! valueProperty().isBound()) {
187                     ChoiceBox.this.setValue(sm.getSelectedItem());
188                 }
189             }
190         }
191     };
192 
193     private ChangeListener&lt;T&gt; selectedItemListener = (ov, t, t1) -&gt; {
194         if (! valueProperty().isBound()) {
195             setValue(t1);
196         }
197     };
198 
199 
200     public final void setSelectionModel(SingleSelectionModel&lt;T&gt; value) { selectionModel.set(value); }
201     public final SingleSelectionModel&lt;T&gt; getSelectionModel() { return selectionModel.get(); }
202     public final ObjectProperty&lt;SingleSelectionModel&lt;T&gt;&gt; selectionModelProperty() { return selectionModel; }
203 
204 
205     /**
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="skin/ChoiceBoxSkin.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>