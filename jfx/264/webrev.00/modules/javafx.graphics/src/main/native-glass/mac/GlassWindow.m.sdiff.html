<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.graphics/src/main/native-glass/mac/GlassWindow.m</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.graphics/src/main/native-glass/mac/GlassWindow.m</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2011, 2017, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
1388 
1389     return JNI_TRUE; // gnote: remove this return value if unused
1390 }
1391 
1392 /*
1393  * Class:     com_sun_glass_ui_mac_MacWindow
1394  * Method:    _minimize
1395  * Signature: (Z)V
1396  */
1397 JNIEXPORT jboolean JNICALL Java_com_sun_glass_ui_mac_MacWindow__1minimize
1398 (JNIEnv *env, jobject jWindow, jlong jPtr, jboolean jMiniaturize)
1399 {
1400     LOG(&quot;Java_com_sun_glass_ui_mac_MacWindow__1minimize&quot;);
1401     if (!jPtr) return JNI_FALSE;
1402 
1403     GLASS_ASSERT_MAIN_JAVA_THREAD(env);
1404     GLASS_POOL_ENTER;
1405     {
1406         GlassWindow *window = getGlassWindow(env, jPtr);
1407 










1408         if (jMiniaturize == JNI_TRUE)
1409         {
1410             [window-&gt;nsWindow miniaturize:nil];
1411         }
1412         else
1413         {
1414             [window-&gt;nsWindow deminiaturize:nil];
1415         }






1416     }
1417     GLASS_POOL_EXIT;
1418     GLASS_CHECK_EXCEPTION(env);
1419 
1420     return JNI_TRUE; // gnote: remove this return value if unused
1421 }
1422 
1423 /*
1424  * Class:     com_sun_glass_ui_mac_MacWindow
1425  * Method:    _setIcon
1426  * Signature: (JLjava/nio/ByteBuffer;II)V
1427  */
1428 JNIEXPORT void JNICALL Java_com_sun_glass_ui_mac_MacWindow__1setIcon
1429 (JNIEnv *env, jobject jWindow, jlong jPtr, jobject iconBuffer, jint jWidth, jint jHeight)
1430 {
1431     LOG(&quot;Java_com_sun_glass_ui_mac_MacWindow__1setIcon&quot;);
1432     if (!jPtr) return;
1433 
1434     GLASS_ASSERT_MAIN_JAVA_THREAD(env);
1435     GLASS_POOL_ENTER;
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
1388 
1389     return JNI_TRUE; // gnote: remove this return value if unused
1390 }
1391 
1392 /*
1393  * Class:     com_sun_glass_ui_mac_MacWindow
1394  * Method:    _minimize
1395  * Signature: (Z)V
1396  */
1397 JNIEXPORT jboolean JNICALL Java_com_sun_glass_ui_mac_MacWindow__1minimize
1398 (JNIEnv *env, jobject jWindow, jlong jPtr, jboolean jMiniaturize)
1399 {
1400     LOG(&quot;Java_com_sun_glass_ui_mac_MacWindow__1minimize&quot;);
1401     if (!jPtr) return JNI_FALSE;
1402 
1403     GLASS_ASSERT_MAIN_JAVA_THREAD(env);
1404     GLASS_POOL_ENTER;
1405     {
1406         GlassWindow *window = getGlassWindow(env, jPtr);
1407 
<span class="line-added">1408         NSUInteger styleMask = [window-&gt;nsWindow styleMask];</span>
<span class="line-added">1409         BOOL isMiniaturizable = (styleMask &amp; NSMiniaturizableWindowMask) != 0;</span>
<span class="line-added">1410 </span>
<span class="line-added">1411         // if the window does not have NSMiniaturizableWindowMask set</span>
<span class="line-added">1412         // we need to temporarily set it to allow the window to</span>
<span class="line-added">1413         // be programmatically minimized or restored.</span>
<span class="line-added">1414         if (!isMiniaturizable) {</span>
<span class="line-added">1415             [window-&gt;nsWindow setStyleMask: styleMask | NSMiniaturizableWindowMask];</span>
<span class="line-added">1416         }</span>
<span class="line-added">1417 </span>
1418         if (jMiniaturize == JNI_TRUE)
1419         {
1420             [window-&gt;nsWindow miniaturize:nil];
1421         }
1422         else
1423         {
1424             [window-&gt;nsWindow deminiaturize:nil];
1425         }
<span class="line-added">1426 </span>
<span class="line-added">1427         // Restore the state of NSMiniaturizableWindowMask</span>
<span class="line-added">1428         if (!isMiniaturizable) {</span>
<span class="line-added">1429             [window-&gt;nsWindow setStyleMask: styleMask];</span>
<span class="line-added">1430         }</span>
<span class="line-added">1431 </span>
1432     }
1433     GLASS_POOL_EXIT;
1434     GLASS_CHECK_EXCEPTION(env);
1435 
1436     return JNI_TRUE; // gnote: remove this return value if unused
1437 }
1438 
1439 /*
1440  * Class:     com_sun_glass_ui_mac_MacWindow
1441  * Method:    _setIcon
1442  * Signature: (JLjava/nio/ByteBuffer;II)V
1443  */
1444 JNIEXPORT void JNICALL Java_com_sun_glass_ui_mac_MacWindow__1setIcon
1445 (JNIEnv *env, jobject jWindow, jlong jPtr, jobject iconBuffer, jint jWidth, jint jHeight)
1446 {
1447     LOG(&quot;Java_com_sun_glass_ui_mac_MacWindow__1setIcon&quot;);
1448     if (!jPtr) return;
1449 
1450     GLASS_ASSERT_MAIN_JAVA_THREAD(env);
1451     GLASS_POOL_ENTER;
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>