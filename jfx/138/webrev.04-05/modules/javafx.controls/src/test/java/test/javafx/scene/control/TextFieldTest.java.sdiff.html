<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/test/java/test/javafx/scene/control/TextFieldTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="TextAreaTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="TextInputControlTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.controls/src/test/java/test/javafx/scene/control/TextFieldTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
464         assertEquals(&quot;actionHandler must be notified&quot;, 1, actions.size());
465         assertTrue(&quot;action must be consumed &quot;, actions.get(0).isConsumed());
466     }
467 
468     @Test public void replaceSelectionWithFilteredCharacters() {
469         txtField.setText(&quot;x xxxyyy&quot;);
470         txtField.selectRange(2, 5);
471         txtField.setTextFormatter(new TextFormatter&lt;&gt;(this::noDigits));
472         txtField.replaceSelection(&quot;a1234a&quot;);
473         assertEquals(&quot;x aayyy&quot;, txtField.getText());
474         assertEquals(4, txtField.getSelection().getStart());
475         assertEquals(4, txtField.getSelection().getStart());
476     }
477 
478     private Change noDigits(Change change) {
479         Change filtered = change.clone();
480         filtered.setText(change.getText().replaceAll(&quot;[0-9]&quot;,&quot;\n&quot;));
481         return filtered;
482     }
483 
<span class="line-removed">484     @Test public void replaceSelectionAtEndWithListener() {</span>
<span class="line-removed">485         StringBuilder selectedTextLog = new StringBuilder();</span>
<span class="line-removed">486         StringBuilder selectionLog = new StringBuilder();</span>
<span class="line-removed">487         txtField.setText(&quot;x xxx&quot;);</span>
<span class="line-removed">488         txtField.selectRange(2, 5);</span>
<span class="line-removed">489         txtField.selectedTextProperty().addListener((__, ___, selection) -&gt; selectedTextLog.append(&quot;|&quot; + selection));</span>
<span class="line-removed">490         txtField.selectionProperty().addListener((__, ___, selection) -&gt; selectionLog.append(&quot;|&quot; + selection.getStart() + &quot;,&quot; + selection.getEnd()));</span>
<span class="line-removed">491         txtField.replaceSelection(&quot;a&quot;);</span>
<span class="line-removed">492         assertEquals(&quot;|&quot;, selectedTextLog.toString());</span>
<span class="line-removed">493         assertEquals(&quot;|3,3&quot;, selectionLog.toString());</span>
<span class="line-removed">494         assertEquals(&quot;x a&quot;, txtField.getText());</span>
<span class="line-removed">495     }</span>
<span class="line-removed">496 </span>
<span class="line-removed">497 </span>
498     /**
499      * Helper method to init the stage only if really needed.
500      */
501     private void initStage() {
502         //This step is not needed (Just to make sure StubToolkit is loaded into VM)
503         Toolkit tk = Toolkit.getToolkit();
504         root = new StackPane();
505         scene = new Scene(root);
506         stage = new Stage();
507         stage.setScene(scene);
508     }
509 
510     @After
511     public void cleanup() {
512         if (stage != null) {
513             stage.hide();
514         }
515         removeUncaughtExceptionHandler();
516     }
517 }
</pre>
</td>
<td>
<hr />
<pre>
464         assertEquals(&quot;actionHandler must be notified&quot;, 1, actions.size());
465         assertTrue(&quot;action must be consumed &quot;, actions.get(0).isConsumed());
466     }
467 
468     @Test public void replaceSelectionWithFilteredCharacters() {
469         txtField.setText(&quot;x xxxyyy&quot;);
470         txtField.selectRange(2, 5);
471         txtField.setTextFormatter(new TextFormatter&lt;&gt;(this::noDigits));
472         txtField.replaceSelection(&quot;a1234a&quot;);
473         assertEquals(&quot;x aayyy&quot;, txtField.getText());
474         assertEquals(4, txtField.getSelection().getStart());
475         assertEquals(4, txtField.getSelection().getStart());
476     }
477 
478     private Change noDigits(Change change) {
479         Change filtered = change.clone();
480         filtered.setText(change.getText().replaceAll(&quot;[0-9]&quot;,&quot;\n&quot;));
481         return filtered;
482     }
483 














484     /**
485      * Helper method to init the stage only if really needed.
486      */
487     private void initStage() {
488         //This step is not needed (Just to make sure StubToolkit is loaded into VM)
489         Toolkit tk = Toolkit.getToolkit();
490         root = new StackPane();
491         scene = new Scene(root);
492         stage = new Stage();
493         stage.setScene(scene);
494     }
495 
496     @After
497     public void cleanup() {
498         if (stage != null) {
499             stage.hide();
500         }
501         removeUncaughtExceptionHandler();
502     }
503 }
</pre>
</td>
</tr>
</table>
<center><a href="TextAreaTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="TextInputControlTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>