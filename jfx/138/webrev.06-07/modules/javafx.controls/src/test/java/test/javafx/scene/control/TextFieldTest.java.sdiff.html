<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/test/java/test/javafx/scene/control/TextFieldTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="TextInputControlTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.controls/src/test/java/test/javafx/scene/control/TextFieldTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
455         root.getChildren().add(txtField);
456         List&lt;ActionEvent&gt; actions = new ArrayList&lt;&gt;();
457         txtField.addEventHandler(ActionEvent.ACTION, e -&gt; {
458             e.consume();
459             actions.add(e);
460         });
461         stage.show();
462         KeyEventFirer keyboard = new KeyEventFirer(txtField);
463         keyboard.doKeyPress(ENTER);
464         assertEquals(&quot;actionHandler must be notified&quot;, 1, actions.size());
465         assertTrue(&quot;action must be consumed &quot;, actions.get(0).isConsumed());
466     }
467 
468     @Test public void replaceSelectionWithFilteredCharacters() {
469         txtField.setText(&quot;x xxxyyy&quot;);
470         txtField.selectRange(2, 5);
471         txtField.setTextFormatter(new TextFormatter&lt;&gt;(this::noDigits));
472         txtField.replaceSelection(&quot;a1234a&quot;);
473         assertEquals(&quot;x aayyy&quot;, txtField.getText());
474         assertEquals(4, txtField.getSelection().getStart());
<span class="line-modified">475         assertEquals(4, txtField.getSelection().getStart());</span>
476     }
477 
478     private Change noDigits(Change change) {
479         Change filtered = change.clone();
480         filtered.setText(change.getText().replaceAll(&quot;[0-9]&quot;,&quot;\n&quot;));
481         return filtered;
482     }
483 
484     /**
485      * Helper method to init the stage only if really needed.
486      */
487     private void initStage() {
488         //This step is not needed (Just to make sure StubToolkit is loaded into VM)
489         Toolkit tk = Toolkit.getToolkit();
490         root = new StackPane();
491         scene = new Scene(root);
492         stage = new Stage();
493         stage.setScene(scene);
494     }
495 
</pre>
</td>
<td>
<hr />
<pre>
455         root.getChildren().add(txtField);
456         List&lt;ActionEvent&gt; actions = new ArrayList&lt;&gt;();
457         txtField.addEventHandler(ActionEvent.ACTION, e -&gt; {
458             e.consume();
459             actions.add(e);
460         });
461         stage.show();
462         KeyEventFirer keyboard = new KeyEventFirer(txtField);
463         keyboard.doKeyPress(ENTER);
464         assertEquals(&quot;actionHandler must be notified&quot;, 1, actions.size());
465         assertTrue(&quot;action must be consumed &quot;, actions.get(0).isConsumed());
466     }
467 
468     @Test public void replaceSelectionWithFilteredCharacters() {
469         txtField.setText(&quot;x xxxyyy&quot;);
470         txtField.selectRange(2, 5);
471         txtField.setTextFormatter(new TextFormatter&lt;&gt;(this::noDigits));
472         txtField.replaceSelection(&quot;a1234a&quot;);
473         assertEquals(&quot;x aayyy&quot;, txtField.getText());
474         assertEquals(4, txtField.getSelection().getStart());
<span class="line-modified">475         assertEquals(4, txtField.getSelection().getEnd());</span>
476     }
477 
478     private Change noDigits(Change change) {
479         Change filtered = change.clone();
480         filtered.setText(change.getText().replaceAll(&quot;[0-9]&quot;,&quot;\n&quot;));
481         return filtered;
482     }
483 
484     /**
485      * Helper method to init the stage only if really needed.
486      */
487     private void initStage() {
488         //This step is not needed (Just to make sure StubToolkit is loaded into VM)
489         Toolkit tk = Toolkit.getToolkit();
490         root = new StackPane();
491         scene = new Scene(root);
492         stage = new Stage();
493         stage.setScene(scene);
494     }
495 
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="TextInputControlTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>