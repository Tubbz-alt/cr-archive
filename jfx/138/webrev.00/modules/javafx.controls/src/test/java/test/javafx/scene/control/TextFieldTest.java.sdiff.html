<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/test/java/test/javafx/scene/control/TextFieldTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="TextAreaTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.controls/src/test/java/test/javafx/scene/control/TextFieldTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
431 
432     /**
433      * sanity: pressing enter actually triggers a consuming actionHandler.
434      */
435     @Test
436     public void testEnterWithConsumingActionHandler() {
437         initStage();
438         root.getChildren().add(txtField);
439         List&lt;ActionEvent&gt; actions = new ArrayList&lt;&gt;();
440         txtField.addEventHandler(ActionEvent.ACTION, e -&gt; {
441             e.consume();
442             actions.add(e);
443         });
444         stage.show();
445         KeyEventFirer keyboard = new KeyEventFirer(txtField);
446         keyboard.doKeyPress(ENTER);
447         assertEquals(&quot;actionHandler must be notified&quot;, 1, actions.size());
448         assertTrue(&quot;action must be consumed &quot;, actions.get(0).isConsumed());
449     }
450 










451     /**
452      * Helper method to init the stage only if really needed.
453      */
454     private void initStage() {
455         //This step is not needed (Just to make sure StubToolkit is loaded into VM)
456         Toolkit tk = (StubToolkit)Toolkit.getToolkit();
457         root = new StackPane();
458         scene = new Scene(root);
459         stage = new Stage();
460         stage.setScene(scene);
461     }
462 
463     @After
464     public void cleanup() {
465         if (stage != null) {
466             stage.hide();
467         }
468     }
469 }
</pre>
</td>
<td>
<hr />
<pre>
431 
432     /**
433      * sanity: pressing enter actually triggers a consuming actionHandler.
434      */
435     @Test
436     public void testEnterWithConsumingActionHandler() {
437         initStage();
438         root.getChildren().add(txtField);
439         List&lt;ActionEvent&gt; actions = new ArrayList&lt;&gt;();
440         txtField.addEventHandler(ActionEvent.ACTION, e -&gt; {
441             e.consume();
442             actions.add(e);
443         });
444         stage.show();
445         KeyEventFirer keyboard = new KeyEventFirer(txtField);
446         keyboard.doKeyPress(ENTER);
447         assertEquals(&quot;actionHandler must be notified&quot;, 1, actions.size());
448         assertTrue(&quot;action must be consumed &quot;, actions.get(0).isConsumed());
449     }
450 
<span class="line-added">451     @Test public void replaceSelectionAtEndWithListener() {</span>
<span class="line-added">452         StringBuilder log = new StringBuilder();</span>
<span class="line-added">453         txtField.setText(&quot;x xxx&quot;);</span>
<span class="line-added">454         txtField.selectedTextProperty().addListener((__, ___, selection) -&gt; log.append(&quot;.&quot;));</span>
<span class="line-added">455         txtField.selectRange(2, 5);</span>
<span class="line-added">456         txtField.replaceSelection(&quot;a&quot;);</span>
<span class="line-added">457         assertFalse(log.toString().isEmpty());</span>
<span class="line-added">458     }</span>
<span class="line-added">459 </span>
<span class="line-added">460 </span>
461     /**
462      * Helper method to init the stage only if really needed.
463      */
464     private void initStage() {
465         //This step is not needed (Just to make sure StubToolkit is loaded into VM)
466         Toolkit tk = (StubToolkit)Toolkit.getToolkit();
467         root = new StackPane();
468         scene = new Scene(root);
469         stage = new Stage();
470         stage.setScene(scene);
471     }
472 
473     @After
474     public void cleanup() {
475         if (stage != null) {
476             stage.hide();
477         }
478     }
479 }
</pre>
</td>
</tr>
</table>
<center><a href="TextAreaTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>