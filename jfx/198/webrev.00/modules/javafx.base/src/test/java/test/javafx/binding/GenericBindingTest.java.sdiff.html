<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.base/src/test/java/test/javafx/binding/GenericBindingTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../main/java/javafx/beans/binding/StringBinding.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.base/src/test/java/test/javafx/binding/GenericBindingTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package test.javafx.binding;
 27 
 28 import test.javafx.beans.InvalidationListenerMock;
 29 import javafx.beans.Observable;
 30 import javafx.beans.binding.*;
 31 import test.javafx.beans.value.ChangeListenerMock;
 32 import javafx.beans.value.ObservableValueBase;
 33 import javafx.collections.FXCollections;
 34 import javafx.collections.ObservableList;
 35 import org.junit.After;
 36 import org.junit.Before;
 37 import org.junit.Test;
 38 import org.junit.runner.RunWith;
 39 import org.junit.runners.Parameterized;
 40 

 41 import java.util.Arrays;
 42 import java.util.Collection;
 43 
 44 import static org.junit.Assert.assertEquals;


 45 import static org.junit.Assert.fail;
 46 
 47 @RunWith(Parameterized.class)
 48 public class GenericBindingTest&lt;T&gt; {
 49 
 50     private static final Object UNDEFINED = null;
 51 
<span class="line-modified"> 52     private final ObservableStub dependency1;</span>
<span class="line-modified"> 53     private final ObservableStub dependency2;</span>
<span class="line-removed"> 54     private final BindingMock&lt;T&gt; binding0;</span>
<span class="line-removed"> 55     private final BindingMock&lt;T&gt; binding1;</span>
<span class="line-removed"> 56     private final BindingMock&lt;T&gt; binding2;</span>
 57     private final T value1;
 58     private final T value2;





 59     private InvalidationListenerMock invalidationListener;
 60     private ChangeListenerMock&lt;Object&gt; changeListener;
 61 
 62     public GenericBindingTest(
 63             T value1, T value2,
<span class="line-modified"> 64             ObservableStub dependency1,</span>
<span class="line-removed"> 65             ObservableStub dependency2,</span>
<span class="line-removed"> 66             BindingMock&lt;T&gt; binding0, BindingMock&lt;T&gt; binding1, BindingMock&lt;T&gt; binding2) {</span>
 67         this.value1 = value1;
 68         this.value2 = value2;
<span class="line-modified"> 69         this.dependency1 = dependency1;</span>
<span class="line-removed"> 70         this.dependency2 = dependency2;</span>
<span class="line-removed"> 71         this.binding0 = binding0;</span>
<span class="line-removed"> 72         this.binding1 = binding1;</span>
<span class="line-removed"> 73         this.binding2 = binding2;</span>
 74     }
 75 
 76     @Before
<span class="line-modified"> 77     public void setUp() {</span>





 78         invalidationListener = new InvalidationListenerMock();
 79         changeListener = new ChangeListenerMock&lt;Object&gt;(UNDEFINED);
 80         binding0.setValue(value2);
 81         binding1.setValue(value2);
 82         binding2.setValue(value2);
 83     }
 84 
 85     @After
 86     public void tearDown() {
 87         binding0.removeListener(invalidationListener);
 88         binding0.removeListener(changeListener);
 89         binding1.removeListener(invalidationListener);
 90         binding1.removeListener(changeListener);
 91         binding2.removeListener(invalidationListener);
 92         binding2.removeListener(changeListener);
 93     }
 94 
 95     @Test
 96     public void testNoDependencyLazy() {
 97         binding0.getValue();
</pre>
<hr />
<pre>
275 
276         binding2.getValue();
277         assertEquals(1, binding2.getComputeValueCounter());
278         invalidationListener.check(null, 0);
279         assertEquals(true, binding2.isValid());
280 
281         // fire change events on each dependency
282         binding2.reset();
283         dependency1.fireValueChangedEvent();
284         dependency2.fireValueChangedEvent();
285         assertEquals(0, binding2.getComputeValueCounter());
286         invalidationListener.check(binding2, 1);
287         assertEquals(false, binding2.isValid());
288 
289         binding2.getValue();
290         assertEquals(1, binding2.getComputeValueCounter());
291         invalidationListener.check(null, 0);
292         assertEquals(true, binding2.isValid());
293     }
294 













































295     @Parameterized.Parameters
296     public static Collection&lt;Object[]&gt; parameters() {
<span class="line-removed">297         final ObservableStub dependency1 = new ObservableStub();</span>
<span class="line-removed">298         final ObservableStub dependency2 = new ObservableStub();</span>
299         return Arrays.asList(new Object[][] {
300             {
301                 Float.MIN_VALUE, Float.MAX_VALUE,
<span class="line-modified">302                 dependency1, dependency2,</span>
<span class="line-removed">303                 new FloatBindingImpl(),</span>
<span class="line-removed">304                 new FloatBindingImpl(dependency1),</span>
<span class="line-removed">305                 new FloatBindingImpl(dependency1, dependency2),</span>
306             },
307             {
308                 Double.MIN_VALUE, Double.MAX_VALUE,
<span class="line-modified">309                 dependency1, dependency2,</span>
<span class="line-removed">310                 new DoubleBindingImpl(),</span>
<span class="line-removed">311                 new DoubleBindingImpl(dependency1),</span>
<span class="line-removed">312                 new DoubleBindingImpl(dependency1, dependency2),</span>
313             },
314             {
315                 Long.MIN_VALUE, Long.MAX_VALUE,
<span class="line-modified">316                 dependency1, dependency2,</span>
<span class="line-removed">317                 new LongBindingImpl(),</span>
<span class="line-removed">318                 new LongBindingImpl(dependency1),</span>
<span class="line-removed">319                 new LongBindingImpl(dependency1, dependency2),</span>
320             },
321             {
322                 Integer.MIN_VALUE, Integer.MAX_VALUE,
<span class="line-modified">323                 dependency1, dependency2,</span>
<span class="line-removed">324                 new IntegerBindingImpl(),</span>
<span class="line-removed">325                 new IntegerBindingImpl(dependency1),</span>
<span class="line-removed">326                 new IntegerBindingImpl(dependency1, dependency2),</span>
327             },
328             {
329                 true, false,
<span class="line-modified">330                 dependency1, dependency2,</span>
<span class="line-removed">331                 new BooleanBindingImpl(),</span>
<span class="line-removed">332                 new BooleanBindingImpl(dependency1),</span>
<span class="line-removed">333                 new BooleanBindingImpl(dependency1, dependency2),</span>
334             },
335             {
336                 &quot;Hello World&quot;, &quot;Goodbye&quot;,
<span class="line-modified">337                 dependency1, dependency2,</span>
<span class="line-removed">338                 new StringBindingImpl(),</span>
<span class="line-removed">339                 new StringBindingImpl(dependency1),</span>
<span class="line-removed">340                 new StringBindingImpl(dependency1, dependency2),</span>
341             },
342             {
<span class="line-modified">343                     new Object(), new Object(),</span>
<span class="line-modified">344                     dependency1, dependency2,</span>
<span class="line-removed">345                     new ObjectBindingImpl(),</span>
<span class="line-removed">346                     new ObjectBindingImpl(dependency1),</span>
<span class="line-removed">347                     new ObjectBindingImpl(dependency1, dependency2),</span>
348             },
349             {
<span class="line-modified">350                     FXCollections.observableArrayList(), FXCollections.observableArrayList(),</span>
<span class="line-modified">351                     dependency1, dependency2,</span>
<span class="line-modified">352                     new ListBindingImpl(),</span>
<span class="line-removed">353                     new ListBindingImpl(dependency1),</span>
<span class="line-removed">354                     new ListBindingImpl(dependency1, dependency2),</span>
<span class="line-removed">355             },</span>
356         });
357     }
358 
359     public static class ObservableStub extends ObservableValueBase&lt;Object&gt; {
360         @Override public void fireValueChangedEvent() {super.fireValueChangedEvent();}
361 
362         @Override
363         public Object getValue() {
364             return null;
365         }
366     }
367 
368     public static interface BindingMock&lt;T&gt; extends Binding&lt;T&gt; {
369         int getComputeValueCounter();
370         void reset();
371         void setValue(T value);

372     }
373 
374     private static class DoubleBindingImpl extends DoubleBinding implements BindingMock&lt;Number&gt; {
375 
376         private int computeValueCounter = 0;
377         private double value;
378 
379         @Override
380         public void setValue(Number value) {this.value = value.doubleValue();}
381 
382         public DoubleBindingImpl(Observable... dep) {
383             super.bind(dep);
384         }
385 
386         @Override public int getComputeValueCounter() {
387             final int result = computeValueCounter;
388             reset();
389             return result;
390         }
391 
392         @Override public void reset() {computeValueCounter = 0;}
393 
394         @Override
395         public double computeValue() {
396             computeValueCounter++;
397             return value;
398         }
399 
400         public ObservableList&lt;?&gt; getDependencies() {
401             fail(&quot;Should not reach here&quot;);
402             return null;
403         }




404     }
405 
406     private static class FloatBindingImpl extends FloatBinding implements BindingMock&lt;Number&gt; {
407 
408         private int computeValueCounter = 0;
409         private float value;
410 
411         @Override
412         public void setValue(Number value) {this.value = value.floatValue();}
413 
414         public FloatBindingImpl(Observable... dep) {
415             super.bind(dep);
416         }
417 
418         @Override public int getComputeValueCounter() {
419             final int result = computeValueCounter;
420             reset();
421             return result;
422         }
423 
424         @Override public void reset() {computeValueCounter = 0;}
425 
426         @Override
427         public float computeValue() {
428             computeValueCounter++;
429             return value;
430         }
431 
432         public ObservableList&lt;?&gt; getDependencies() {
433             fail(&quot;Should not reach here&quot;);
434             return null;
435         }




436     }
437 
438     private static class LongBindingImpl extends LongBinding implements BindingMock&lt;Number&gt; {
439 
440         private int computeValueCounter = 0;
441         private long value;
442 
443         @Override
444         public void setValue(Number value) {this.value = value.longValue();}
445 
446         public LongBindingImpl(Observable... dep) {
447             super.bind(dep);
448         }
449 
450         @Override public int getComputeValueCounter() {
451             final int result = computeValueCounter;
452             reset();
453             return result;
454         }
455 
456         @Override public void reset() {computeValueCounter = 0;}
457 
458         @Override
459         public long computeValue() {
460             computeValueCounter++;
461             return value;
462         }
463 
464         public ObservableList&lt;?&gt; getDependencies() {
465             fail(&quot;Should not reach here&quot;);
466             return null;
467         }




468     }
469 
470     private static class IntegerBindingImpl extends IntegerBinding implements BindingMock&lt;Number&gt; {
471 
472         private int computeValueCounter = 0;
473         private int value;
474 
475         @Override
476         public void setValue(Number value) {this.value = value.intValue();}
477 
478         public IntegerBindingImpl(Observable... dep) {
479             super.bind(dep);
480         }
481 
482         @Override public int getComputeValueCounter() {
483             final int result = computeValueCounter;
484             reset();
485             return result;
486         }
487 
488         @Override public void reset() {computeValueCounter = 0;}
489 
490         @Override
491         public int computeValue() {
492             computeValueCounter++;
493             return value;
494         }
495 
496         public ObservableList&lt;?&gt; getDependencies() {
497             fail(&quot;Should not reach here&quot;);
498             return null;
499         }




500     }
501 
502     private static class BooleanBindingImpl extends BooleanBinding implements BindingMock&lt;Boolean&gt; {
503 
504         private int computeValueCounter = 0;
505         private boolean value;
506 
507         @Override
508         public void setValue(Boolean value) {this.value = value;}
509 
510         public BooleanBindingImpl(Observable... dep) {
511             super.bind(dep);
512         }
513 
514         @Override public int getComputeValueCounter() {
515             final int result = computeValueCounter;
516             reset();
517             return result;
518         }
519 
520         @Override public void reset() {computeValueCounter = 0;}
521 
522         @Override
523         public boolean computeValue() {
524             computeValueCounter++;
525             return value;
526         }
527 
528         public ObservableList&lt;?&gt; getDependencies() {
529             fail(&quot;Should not reach here&quot;);
530             return null;
531         }




532     }
533 
534     private static class ObjectBindingImpl extends ObjectBinding&lt;Object&gt; implements BindingMock&lt;Object&gt; {
535 
536         private int computeValueCounter = 0;
537         private Object value;
538 
539         @Override
540         public void setValue(Object value) {this.value = value;}
541 
542         public ObjectBindingImpl(Observable... dep) {
543             super.bind(dep);
544         }
545 
546         @Override public int getComputeValueCounter() {
547             final int result = computeValueCounter;
548             reset();
549             return result;
550         }
551 
552         @Override public void reset() {computeValueCounter = 0;}
553 
554         @Override
555         public Object computeValue() {
556             computeValueCounter++;
557             return value;
558         }
559 
560         public ObservableList&lt;?&gt; getDependencies() {
561             fail(&quot;Should not reach here&quot;);
562             return null;
563         }




564     }
565 
566     private static class StringBindingImpl extends StringBinding implements BindingMock&lt;String&gt; {
567 
568         private int computeValueCounter = 0;
569         private String value;
570 
571         @Override
572         public void setValue(String value) {this.value = value;}
573 
574         public StringBindingImpl(Observable... dep) {
575             super.bind(dep);
576         }
577 
578         @Override public int getComputeValueCounter() {
579             final int result = computeValueCounter;
580             reset();
581             return result;
582         }
583 
584         @Override public void reset() {computeValueCounter = 0;}
585 
586         @Override
587         public String computeValue() {
588             computeValueCounter++;
589             return value;
590         }
591 
592         public ObservableList&lt;?&gt; getDependencies() {
593             fail(&quot;Should not reach here&quot;);
594             return null;
595         }




596     }
597 
598     private static class ListBindingImpl extends ListBinding&lt;Object&gt; implements BindingMock&lt;ObservableList&lt;Object&gt;&gt; {
599 
600         private int computeValueCounter = 0;
601         private ObservableList&lt;Object&gt; value;
602 
603         @Override
604         public void setValue(ObservableList&lt;Object&gt; value) {this.value = value;}
605 
606         public ListBindingImpl(Observable... dep) {
607             super.bind(dep);
608         }
609 
610         @Override public int getComputeValueCounter() {
611             final int result = computeValueCounter;
612             reset();
613             return result;
614         }
615 
616         @Override public void reset() {computeValueCounter = 0;}
617 
618         @Override
619         public ObservableList&lt;Object&gt; computeValue() {
620             computeValueCounter++;
621             return value;
622         }
623 
624         public ObservableList&lt;?&gt; getDependencies() {
625             fail(&quot;Should not reach here&quot;);
626             return null;
627         }




628     }
629 
630 
631 }
</pre>
</td>
<td>
<hr />
<pre>
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package test.javafx.binding;
 27 
 28 import test.javafx.beans.InvalidationListenerMock;
 29 import javafx.beans.Observable;
 30 import javafx.beans.binding.*;
 31 import test.javafx.beans.value.ChangeListenerMock;
 32 import javafx.beans.value.ObservableValueBase;
 33 import javafx.collections.FXCollections;
 34 import javafx.collections.ObservableList;
 35 import org.junit.After;
 36 import org.junit.Before;
 37 import org.junit.Test;
 38 import org.junit.runner.RunWith;
 39 import org.junit.runners.Parameterized;
 40 
<span class="line-added"> 41 import java.lang.reflect.Constructor;</span>
 42 import java.util.Arrays;
 43 import java.util.Collection;
 44 
 45 import static org.junit.Assert.assertEquals;
<span class="line-added"> 46 import static org.junit.Assert.assertFalse;</span>
<span class="line-added"> 47 import static org.junit.Assert.assertTrue;</span>
 48 import static org.junit.Assert.fail;
 49 
 50 @RunWith(Parameterized.class)
 51 public class GenericBindingTest&lt;T&gt; {
 52 
 53     private static final Object UNDEFINED = null;
 54 
<span class="line-modified"> 55     private final ObservableStub dependency1 = new ObservableStub();</span>
<span class="line-modified"> 56     private final ObservableStub dependency2 = new ObservableStub();</span>



 57     private final T value1;
 58     private final T value2;
<span class="line-added"> 59     private final Constructor&lt;BindingMock&lt;T&gt;&gt; bindingMockClassConstructor;</span>
<span class="line-added"> 60 </span>
<span class="line-added"> 61     private BindingMock&lt;T&gt; binding0;</span>
<span class="line-added"> 62     private BindingMock&lt;T&gt; binding1;</span>
<span class="line-added"> 63     private BindingMock&lt;T&gt; binding2;</span>
 64     private InvalidationListenerMock invalidationListener;
 65     private ChangeListenerMock&lt;Object&gt; changeListener;
 66 
 67     public GenericBindingTest(
 68             T value1, T value2,
<span class="line-modified"> 69             Class&lt;BindingMock&lt;T&gt;&gt; bindingMockClass) throws Exception {</span>


 70         this.value1 = value1;
 71         this.value2 = value2;
<span class="line-modified"> 72         this.bindingMockClassConstructor = bindingMockClass.getConstructor(Observable[].class);</span>




 73     }
 74 
 75     @Before
<span class="line-modified"> 76     public void setUp() throws Exception {</span>
<span class="line-added"> 77         // Recreate bindings as they may have been altered by one of the tests</span>
<span class="line-added"> 78         binding0 = bindingMockClassConstructor.newInstance((Object)new Observable[] {});</span>
<span class="line-added"> 79         binding1 = bindingMockClassConstructor.newInstance((Object)new Observable[] {dependency1});</span>
<span class="line-added"> 80         binding2 = bindingMockClassConstructor.newInstance((Object)new Observable[] {dependency1, dependency2});</span>
<span class="line-added"> 81 </span>
 82         invalidationListener = new InvalidationListenerMock();
 83         changeListener = new ChangeListenerMock&lt;Object&gt;(UNDEFINED);
 84         binding0.setValue(value2);
 85         binding1.setValue(value2);
 86         binding2.setValue(value2);
 87     }
 88 
 89     @After
 90     public void tearDown() {
 91         binding0.removeListener(invalidationListener);
 92         binding0.removeListener(changeListener);
 93         binding1.removeListener(invalidationListener);
 94         binding1.removeListener(changeListener);
 95         binding2.removeListener(invalidationListener);
 96         binding2.removeListener(changeListener);
 97     }
 98 
 99     @Test
100     public void testNoDependencyLazy() {
101         binding0.getValue();
</pre>
<hr />
<pre>
279 
280         binding2.getValue();
281         assertEquals(1, binding2.getComputeValueCounter());
282         invalidationListener.check(null, 0);
283         assertEquals(true, binding2.isValid());
284 
285         // fire change events on each dependency
286         binding2.reset();
287         dependency1.fireValueChangedEvent();
288         dependency2.fireValueChangedEvent();
289         assertEquals(0, binding2.getComputeValueCounter());
290         invalidationListener.check(binding2, 1);
291         assertEquals(false, binding2.isValid());
292 
293         binding2.getValue();
294         assertEquals(1, binding2.getComputeValueCounter());
295         invalidationListener.check(null, 0);
296         assertEquals(true, binding2.isValid());
297     }
298 
<span class="line-added">299     @Test</span>
<span class="line-added">300     public void testUnbindDependencies() {</span>
<span class="line-added">301         // Start by making binding valid:</span>
<span class="line-added">302         binding2.getValue();</span>
<span class="line-added">303         assertTrue(binding2.isValid());</span>
<span class="line-added">304 </span>
<span class="line-added">305         // Changing dependency1 should cause binding to become invalid:</span>
<span class="line-added">306         dependency1.fireValueChangedEvent();</span>
<span class="line-added">307         assertFalse(binding2.isValid());</span>
<span class="line-added">308 </span>
<span class="line-added">309         // Make valid again:</span>
<span class="line-added">310         binding2.getValue();</span>
<span class="line-added">311         assertTrue(binding2.isValid());</span>
<span class="line-added">312 </span>
<span class="line-added">313         // Changing dependency2 should cause binding to become invalid:</span>
<span class="line-added">314         dependency2.fireValueChangedEvent();</span>
<span class="line-added">315         assertFalse(binding2.isValid());</span>
<span class="line-added">316 </span>
<span class="line-added">317         // Make valid again:</span>
<span class="line-added">318         binding2.getValue();</span>
<span class="line-added">319         assertTrue(binding2.isValid());</span>
<span class="line-added">320 </span>
<span class="line-added">321         // Remove dependency1:</span>
<span class="line-added">322         binding2.publicUnbind(dependency1);</span>
<span class="line-added">323 </span>
<span class="line-added">324         // Check that binding2 is no longer affected by changes in dependency1:</span>
<span class="line-added">325         dependency1.fireValueChangedEvent();</span>
<span class="line-added">326         assertTrue(binding2.isValid());</span>
<span class="line-added">327 </span>
<span class="line-added">328         // But still affected by changes in dependency2:</span>
<span class="line-added">329         dependency2.fireValueChangedEvent();</span>
<span class="line-added">330         assertFalse(binding2.isValid());</span>
<span class="line-added">331 </span>
<span class="line-added">332         // Make valid again:</span>
<span class="line-added">333         binding2.getValue();</span>
<span class="line-added">334         assertTrue(binding2.isValid());</span>
<span class="line-added">335 </span>
<span class="line-added">336         // Remove dependency2:</span>
<span class="line-added">337         binding2.publicUnbind(dependency2);</span>
<span class="line-added">338 </span>
<span class="line-added">339         // Check that binding2 is no longer affected by changes in dependency2:</span>
<span class="line-added">340         dependency2.fireValueChangedEvent();</span>
<span class="line-added">341         assertTrue(binding2.isValid());   // Fixed by 8243115</span>
<span class="line-added">342     }</span>
<span class="line-added">343 </span>
344     @Parameterized.Parameters
345     public static Collection&lt;Object[]&gt; parameters() {


346         return Arrays.asList(new Object[][] {
347             {
348                 Float.MIN_VALUE, Float.MAX_VALUE,
<span class="line-modified">349                 FloatBindingImpl.class</span>



350             },
351             {
352                 Double.MIN_VALUE, Double.MAX_VALUE,
<span class="line-modified">353                 DoubleBindingImpl.class</span>



354             },
355             {
356                 Long.MIN_VALUE, Long.MAX_VALUE,
<span class="line-modified">357                 LongBindingImpl.class</span>



358             },
359             {
360                 Integer.MIN_VALUE, Integer.MAX_VALUE,
<span class="line-modified">361                 IntegerBindingImpl.class</span>



362             },
363             {
364                 true, false,
<span class="line-modified">365                 BooleanBindingImpl.class</span>



366             },
367             {
368                 &quot;Hello World&quot;, &quot;Goodbye&quot;,
<span class="line-modified">369                 StringBindingImpl.class</span>



370             },
371             {
<span class="line-modified">372                 new Object(), new Object(),</span>
<span class="line-modified">373                 ObjectBindingImpl.class</span>



374             },
375             {
<span class="line-modified">376                 FXCollections.observableArrayList(), FXCollections.observableArrayList(),</span>
<span class="line-modified">377                 ListBindingImpl.class</span>
<span class="line-modified">378             }</span>



379         });
380     }
381 
382     public static class ObservableStub extends ObservableValueBase&lt;Object&gt; {
383         @Override public void fireValueChangedEvent() {super.fireValueChangedEvent();}
384 
385         @Override
386         public Object getValue() {
387             return null;
388         }
389     }
390 
391     public static interface BindingMock&lt;T&gt; extends Binding&lt;T&gt; {
392         int getComputeValueCounter();
393         void reset();
394         void setValue(T value);
<span class="line-added">395         void publicUnbind(Observable... observables);</span>
396     }
397 
398     private static class DoubleBindingImpl extends DoubleBinding implements BindingMock&lt;Number&gt; {
399 
400         private int computeValueCounter = 0;
401         private double value;
402 
403         @Override
404         public void setValue(Number value) {this.value = value.doubleValue();}
405 
406         public DoubleBindingImpl(Observable... dep) {
407             super.bind(dep);
408         }
409 
410         @Override public int getComputeValueCounter() {
411             final int result = computeValueCounter;
412             reset();
413             return result;
414         }
415 
416         @Override public void reset() {computeValueCounter = 0;}
417 
418         @Override
419         public double computeValue() {
420             computeValueCounter++;
421             return value;
422         }
423 
424         public ObservableList&lt;?&gt; getDependencies() {
425             fail(&quot;Should not reach here&quot;);
426             return null;
427         }
<span class="line-added">428 </span>
<span class="line-added">429         public void publicUnbind(Observable... observables) {</span>
<span class="line-added">430             super.unbind(observables);</span>
<span class="line-added">431         }</span>
432     }
433 
434     private static class FloatBindingImpl extends FloatBinding implements BindingMock&lt;Number&gt; {
435 
436         private int computeValueCounter = 0;
437         private float value;
438 
439         @Override
440         public void setValue(Number value) {this.value = value.floatValue();}
441 
442         public FloatBindingImpl(Observable... dep) {
443             super.bind(dep);
444         }
445 
446         @Override public int getComputeValueCounter() {
447             final int result = computeValueCounter;
448             reset();
449             return result;
450         }
451 
452         @Override public void reset() {computeValueCounter = 0;}
453 
454         @Override
455         public float computeValue() {
456             computeValueCounter++;
457             return value;
458         }
459 
460         public ObservableList&lt;?&gt; getDependencies() {
461             fail(&quot;Should not reach here&quot;);
462             return null;
463         }
<span class="line-added">464 </span>
<span class="line-added">465         public void publicUnbind(Observable... observables) {</span>
<span class="line-added">466             super.unbind(observables);</span>
<span class="line-added">467         }</span>
468     }
469 
470     private static class LongBindingImpl extends LongBinding implements BindingMock&lt;Number&gt; {
471 
472         private int computeValueCounter = 0;
473         private long value;
474 
475         @Override
476         public void setValue(Number value) {this.value = value.longValue();}
477 
478         public LongBindingImpl(Observable... dep) {
479             super.bind(dep);
480         }
481 
482         @Override public int getComputeValueCounter() {
483             final int result = computeValueCounter;
484             reset();
485             return result;
486         }
487 
488         @Override public void reset() {computeValueCounter = 0;}
489 
490         @Override
491         public long computeValue() {
492             computeValueCounter++;
493             return value;
494         }
495 
496         public ObservableList&lt;?&gt; getDependencies() {
497             fail(&quot;Should not reach here&quot;);
498             return null;
499         }
<span class="line-added">500 </span>
<span class="line-added">501         public void publicUnbind(Observable... observables) {</span>
<span class="line-added">502             super.unbind(observables);</span>
<span class="line-added">503         }</span>
504     }
505 
506     private static class IntegerBindingImpl extends IntegerBinding implements BindingMock&lt;Number&gt; {
507 
508         private int computeValueCounter = 0;
509         private int value;
510 
511         @Override
512         public void setValue(Number value) {this.value = value.intValue();}
513 
514         public IntegerBindingImpl(Observable... dep) {
515             super.bind(dep);
516         }
517 
518         @Override public int getComputeValueCounter() {
519             final int result = computeValueCounter;
520             reset();
521             return result;
522         }
523 
524         @Override public void reset() {computeValueCounter = 0;}
525 
526         @Override
527         public int computeValue() {
528             computeValueCounter++;
529             return value;
530         }
531 
532         public ObservableList&lt;?&gt; getDependencies() {
533             fail(&quot;Should not reach here&quot;);
534             return null;
535         }
<span class="line-added">536 </span>
<span class="line-added">537         public void publicUnbind(Observable... observables) {</span>
<span class="line-added">538             super.unbind(observables);</span>
<span class="line-added">539         }</span>
540     }
541 
542     private static class BooleanBindingImpl extends BooleanBinding implements BindingMock&lt;Boolean&gt; {
543 
544         private int computeValueCounter = 0;
545         private boolean value;
546 
547         @Override
548         public void setValue(Boolean value) {this.value = value;}
549 
550         public BooleanBindingImpl(Observable... dep) {
551             super.bind(dep);
552         }
553 
554         @Override public int getComputeValueCounter() {
555             final int result = computeValueCounter;
556             reset();
557             return result;
558         }
559 
560         @Override public void reset() {computeValueCounter = 0;}
561 
562         @Override
563         public boolean computeValue() {
564             computeValueCounter++;
565             return value;
566         }
567 
568         public ObservableList&lt;?&gt; getDependencies() {
569             fail(&quot;Should not reach here&quot;);
570             return null;
571         }
<span class="line-added">572 </span>
<span class="line-added">573         public void publicUnbind(Observable... observables) {</span>
<span class="line-added">574             super.unbind(observables);</span>
<span class="line-added">575         }</span>
576     }
577 
578     private static class ObjectBindingImpl extends ObjectBinding&lt;Object&gt; implements BindingMock&lt;Object&gt; {
579 
580         private int computeValueCounter = 0;
581         private Object value;
582 
583         @Override
584         public void setValue(Object value) {this.value = value;}
585 
586         public ObjectBindingImpl(Observable... dep) {
587             super.bind(dep);
588         }
589 
590         @Override public int getComputeValueCounter() {
591             final int result = computeValueCounter;
592             reset();
593             return result;
594         }
595 
596         @Override public void reset() {computeValueCounter = 0;}
597 
598         @Override
599         public Object computeValue() {
600             computeValueCounter++;
601             return value;
602         }
603 
604         public ObservableList&lt;?&gt; getDependencies() {
605             fail(&quot;Should not reach here&quot;);
606             return null;
607         }
<span class="line-added">608 </span>
<span class="line-added">609         public void publicUnbind(Observable... observables) {</span>
<span class="line-added">610             super.unbind(observables);</span>
<span class="line-added">611         }</span>
612     }
613 
614     private static class StringBindingImpl extends StringBinding implements BindingMock&lt;String&gt; {
615 
616         private int computeValueCounter = 0;
617         private String value;
618 
619         @Override
620         public void setValue(String value) {this.value = value;}
621 
622         public StringBindingImpl(Observable... dep) {
623             super.bind(dep);
624         }
625 
626         @Override public int getComputeValueCounter() {
627             final int result = computeValueCounter;
628             reset();
629             return result;
630         }
631 
632         @Override public void reset() {computeValueCounter = 0;}
633 
634         @Override
635         public String computeValue() {
636             computeValueCounter++;
637             return value;
638         }
639 
640         public ObservableList&lt;?&gt; getDependencies() {
641             fail(&quot;Should not reach here&quot;);
642             return null;
643         }
<span class="line-added">644 </span>
<span class="line-added">645         public void publicUnbind(Observable... observables) {</span>
<span class="line-added">646             super.unbind(observables);</span>
<span class="line-added">647         }</span>
648     }
649 
650     private static class ListBindingImpl extends ListBinding&lt;Object&gt; implements BindingMock&lt;ObservableList&lt;Object&gt;&gt; {
651 
652         private int computeValueCounter = 0;
653         private ObservableList&lt;Object&gt; value;
654 
655         @Override
656         public void setValue(ObservableList&lt;Object&gt; value) {this.value = value;}
657 
658         public ListBindingImpl(Observable... dep) {
659             super.bind(dep);
660         }
661 
662         @Override public int getComputeValueCounter() {
663             final int result = computeValueCounter;
664             reset();
665             return result;
666         }
667 
668         @Override public void reset() {computeValueCounter = 0;}
669 
670         @Override
671         public ObservableList&lt;Object&gt; computeValue() {
672             computeValueCounter++;
673             return value;
674         }
675 
676         public ObservableList&lt;?&gt; getDependencies() {
677             fail(&quot;Should not reach here&quot;);
678             return null;
679         }
<span class="line-added">680 </span>
<span class="line-added">681         public void publicUnbind(Observable... observables) {</span>
<span class="line-added">682             super.unbind(observables);</span>
<span class="line-added">683         }</span>
684     }
685 
686 
687 }
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../main/java/javafx/beans/binding/StringBinding.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>