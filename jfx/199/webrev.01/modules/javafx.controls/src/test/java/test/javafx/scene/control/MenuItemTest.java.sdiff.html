<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/test/java/test/javafx/scene/control/MenuItemTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../main/java/javafx/scene/control/skin/MenuButtonSkinBase.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.controls/src/test/java/test/javafx/scene/control/MenuItemTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2010, 2015, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package test.javafx.scene.control;
 27 



 28 import javafx.beans.property.ObjectProperty;
 29 import javafx.beans.property.SimpleBooleanProperty;
 30 import javafx.beans.property.SimpleObjectProperty;
 31 import javafx.beans.property.SimpleStringProperty;
 32 import javafx.event.ActionEvent;
 33 import javafx.event.Event;
 34 import javafx.event.EventHandler;
 35 import javafx.event.EventType;

 36 import javafx.scene.Node;

 37 import javafx.scene.control.Menu;

 38 import javafx.scene.control.MenuItem;
 39 import javafx.scene.input.KeyCharacterCombination;

 40 import javafx.scene.input.KeyCodeCombination;
 41 import javafx.scene.input.KeyCombination;
 42 import javafx.scene.input.KeyCombination.Modifier;
 43 import static org.junit.Assert.assertEquals;
 44 import static org.junit.Assert.assertNull;
 45 import static org.junit.Assert.assertSame;
 46 import static org.junit.Assert.assertTrue;
 47 import static org.junit.Assert.assertFalse;
 48 import static org.junit.Assert.assertNotNull;
 49 import javafx.scene.shape.Rectangle;
 50 
 51 
 52 import org.junit.Before;
 53 import org.junit.BeforeClass;
 54 import org.junit.Ignore;
 55 import org.junit.Test;
 56 
 57 
 58 /**
 59  *
</pre>
<hr />
<pre>
564     }
565 
566     @Test public void getSpecifiedUserData2() {
567         String str = &quot;Hello&quot;;
568         menuItem.setUserData(str);
569         assertEquals(str, menuItem.getUserData());
570     }
571 
572     @Test public void notNullGetProperties() {
573         assertNotNull(menuItem.getProperties());
574     }
575 
576     @Test public void zeroSizeGetProperties() {
577         assertTrue(menuItem.getProperties().size() == 0);
578     }
579 
580     @Test public void addableGetProperties() {
581         menuItem.getProperties().put(null, null);
582         assertTrue(menuItem.getProperties().size() &gt; 0);
583     }

































584 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2010, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package test.javafx.scene.control;
 27 
<span class="line-added"> 28 import test.com.sun.javafx.scene.control.infrastructure.KeyEventFirer;</span>
<span class="line-added"> 29 import test.com.sun.javafx.scene.control.infrastructure.KeyModifier;</span>
<span class="line-added"> 30 import test.com.sun.javafx.scene.control.infrastructure.StageLoader;</span>
 31 import javafx.beans.property.ObjectProperty;
 32 import javafx.beans.property.SimpleBooleanProperty;
 33 import javafx.beans.property.SimpleObjectProperty;
 34 import javafx.beans.property.SimpleStringProperty;
 35 import javafx.event.ActionEvent;
 36 import javafx.event.Event;
 37 import javafx.event.EventHandler;
 38 import javafx.event.EventType;
<span class="line-added"> 39 import javafx.scene.Group;</span>
 40 import javafx.scene.Node;
<span class="line-added"> 41 import javafx.scene.Scene;</span>
 42 import javafx.scene.control.Menu;
<span class="line-added"> 43 import javafx.scene.control.MenuButton;</span>
 44 import javafx.scene.control.MenuItem;
 45 import javafx.scene.input.KeyCharacterCombination;
<span class="line-added"> 46 import javafx.scene.input.KeyCode;</span>
 47 import javafx.scene.input.KeyCodeCombination;
 48 import javafx.scene.input.KeyCombination;
 49 import javafx.scene.input.KeyCombination.Modifier;
 50 import static org.junit.Assert.assertEquals;
 51 import static org.junit.Assert.assertNull;
 52 import static org.junit.Assert.assertSame;
 53 import static org.junit.Assert.assertTrue;
 54 import static org.junit.Assert.assertFalse;
 55 import static org.junit.Assert.assertNotNull;
 56 import javafx.scene.shape.Rectangle;
 57 
 58 
 59 import org.junit.Before;
 60 import org.junit.BeforeClass;
 61 import org.junit.Ignore;
 62 import org.junit.Test;
 63 
 64 
 65 /**
 66  *
</pre>
<hr />
<pre>
571     }
572 
573     @Test public void getSpecifiedUserData2() {
574         String str = &quot;Hello&quot;;
575         menuItem.setUserData(str);
576         assertEquals(str, menuItem.getUserData());
577     }
578 
579     @Test public void notNullGetProperties() {
580         assertNotNull(menuItem.getProperties());
581     }
582 
583     @Test public void zeroSizeGetProperties() {
584         assertTrue(menuItem.getProperties().size() == 0);
585     }
586 
587     @Test public void addableGetProperties() {
588         menuItem.getProperties().put(null, null);
589         assertTrue(menuItem.getProperties().size() &gt; 0);
590     }
<span class="line-added">591 </span>
<span class="line-added">592     private int eventCounter = 0;</span>
<span class="line-added">593     @Test public void testAcceleratorIsNotFiredWhenMenuItemRemovedFromScene() {</span>
<span class="line-added">594         MenuItem item = new MenuItem(&quot;Item 1&quot;);</span>
<span class="line-added">595         item.setOnAction(e -&gt; eventCounter++);</span>
<span class="line-added">596         item.setAccelerator(KeyCombination.valueOf(&quot;alt+1&quot;));</span>
<span class="line-added">597 </span>
<span class="line-added">598         MenuButton menuButton = new MenuButton();</span>
<span class="line-added">599         menuButton.getItems().add(item);</span>
<span class="line-added">600 </span>
<span class="line-added">601         StageLoader s = new StageLoader(menuButton);</span>
<span class="line-added">602         Scene scene = s.getStage().getScene();</span>
<span class="line-added">603         KeyEventFirer keyboard = new KeyEventFirer(item, scene);</span>
<span class="line-added">604 </span>
<span class="line-added">605         // Invoke MenuItem&#39;s action listener twice by using accelerator KeyCombination</span>
<span class="line-added">606         keyboard.doKeyPress(KeyCode.DIGIT1, KeyModifier.ALT);</span>
<span class="line-added">607         assertEquals(1, eventCounter);</span>
<span class="line-added">608 </span>
<span class="line-added">609         keyboard.doKeyPress(KeyCode.DIGIT1, KeyModifier.ALT);</span>
<span class="line-added">610         assertEquals(2, eventCounter);</span>
<span class="line-added">611 </span>
<span class="line-added">612         // Remove all children from the scene</span>
<span class="line-added">613         Group root = (Group)scene.getRoot();</span>
<span class="line-added">614         root.getChildren().clear();</span>
<span class="line-added">615 </span>
<span class="line-added">616         // Assert that the MenuItem&#39;s action listener is not invoked</span>
<span class="line-added">617         // after MenuItem has been removed from the scene</span>
<span class="line-added">618         keyboard.doKeyPress(KeyCode.DIGIT1, KeyModifier.ALT);</span>
<span class="line-added">619         assertEquals(2, eventCounter);</span>
<span class="line-added">620 </span>
<span class="line-added">621         // Assert that key combination does not remain in the scene&#39;s list of accelerators</span>
<span class="line-added">622         assertFalse(scene.getAccelerators().containsKey(KeyCombination.keyCombination(&quot;alt+1&quot;)));</span>
<span class="line-added">623     }</span>
624 }
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../main/java/javafx/scene/control/skin/MenuButtonSkinBase.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>