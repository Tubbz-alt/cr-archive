<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.controls/src/test/java/test/javafx/scene/control/SpinnerTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>   1 /*
<a name="1" id="anc1"></a><span class="line-modified">   2  * Copyright (c) 2014, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
  23  * questions.
  24  */
  25 package test.javafx.scene.control;
  26 
  27 import static junit.framework.Assert.*;
  28 
  29 import javafx.collections.FXCollections;
  30 import javafx.collections.ObservableList;
  31 import org.junit.Before;
  32 import org.junit.Ignore;
  33 import org.junit.Test;
  34 
  35 import java.time.LocalDate;
  36 import java.time.LocalTime;
  37 import java.time.temporal.ChronoUnit;
  38 import javafx.scene.control.Button;
  39 import javafx.scene.control.skin.SpinnerSkin;
  40 import javafx.scene.control.Spinner;
  41 import javafx.scene.control.SpinnerShim;
  42 import javafx.scene.control.SpinnerValueFactory;
  43 import javafx.scene.control.SpinnerValueFactoryShim;
  44 import javafx.scene.input.KeyCode;
  45 import javafx.scene.layout.FlowPane;
  46 import javafx.scene.layout.VBox;
  47 import javafx.scene.Scene;
  48 import javafx.stage.Stage;
  49 import javafx.util.Duration;
  50 
  51 import test.com.sun.javafx.pgstub.StubToolkit;
  52 import test.com.sun.javafx.scene.control.infrastructure.KeyEventFirer;
  53 import com.sun.javafx.tk.Toolkit;
  54 
  55 import static javafx.scene.control.SpinnerValueFactoryShim.*;
  56 
  57 public class SpinnerTest {
  58 
  59     private Spinner&lt;?&gt; spinner;
  60 
  61     // --- int spinner
  62     private Spinner&lt;Integer&gt; intSpinner;
  63     private IntegerSpinnerValueFactory intValueFactory;
  64 
  65     // --- double spinner
  66     private Spinner&lt;Double&gt; dblSpinner;
  67     private DoubleSpinnerValueFactory dblValueFactory;
  68 
  69     // --- list spinner
  70     private ObservableList&lt;String&gt; strings;
  71     private Spinner&lt;String&gt; listSpinner;
  72     private ListSpinnerValueFactory listValueFactory;
  73 
  74     // --- LocalDate spinner
  75     private Spinner&lt;LocalDate&gt; localDateSpinner;
  76     private SpinnerValueFactory&lt;LocalDate&gt; localDateValueFactory;
  77 
  78     // --- LocalTime spinner
  79     private Spinner&lt;LocalTime&gt; localTimeSpinner;
  80     private SpinnerValueFactory&lt;LocalTime&gt;localTimeValueFactory;
  81 
  82     // used in tests for counting events, reset to zero in setup()
  83     private int eventCount;
  84 
  85 
  86     @Before public void setup() {
  87         eventCount = 0;
  88         spinner = new Spinner();
  89 
  90         intSpinner = new Spinner&lt;&gt;(0, 10, 5, 1);
  91         intValueFactory = (IntegerSpinnerValueFactory) intSpinner.getValueFactory();
<a name="2" id="anc2"></a><span class="line-added">  92         intValueFactory.setWrapAround(false);</span>
  93 
  94         dblSpinner = new Spinner&lt;&gt;(0.0, 1.0, 0.5, 0.05);
  95         dblValueFactory = (DoubleSpinnerValueFactory) dblSpinner.getValueFactory();
  96 
  97         strings = FXCollections.observableArrayList(&quot;string1&quot;, &quot;string2&quot;, &quot;string3&quot;);
  98         listSpinner = new Spinner&lt;&gt;(strings);
  99         listValueFactory = (ListSpinnerValueFactory&lt;String&gt;) listSpinner.getValueFactory();
 100 
 101         // minimum is today minus 10 days, maximum is today plus 10 days
 102         localDateSpinner = SpinnerShim.getSpinnerLocalDate(
 103                 nowPlusDays(-10), nowPlusDays(10),
 104                 LocalDate.now(), 1, ChronoUnit.DAYS);
 105         localDateValueFactory = localDateSpinner.getValueFactory();
 106 
 107         localTimeSpinner = SpinnerShim.getSpinnerLocalTime(
 108                 LocalTime.MIN, LocalTime.MAX,
 109                 LocalTime.now(), 1, ChronoUnit.HOURS);
 110         localTimeValueFactory = localTimeSpinner.getValueFactory();
 111     }
 112 
 113 
 114     /***************************************************************************
 115      *                                                                         *
 116      * Basic tests                                                             *
 117      *                                                                         *
 118      **************************************************************************/
 119 
 120     @Test public void createDefaultSpinner_hasSpinnerStyleClass() {
 121         assertEquals(1, spinner.getStyleClass().size());
 122         assertTrue(spinner.getStyleClass().contains(&quot;spinner&quot;));
 123     }
 124 
 125     @Test public void createDefaultSpinner_editorIsNotNull() {
 126         assertNotNull(spinner.getEditor());
 127     }
 128 
 129     @Test public void createDefaultSpinner_valueFactoryIsNull() {
 130         assertNull(spinner.getValueFactory());
 131     }
 132 
 133     @Test public void createDefaultSpinner_valueIsNull() {
 134         assertNull(spinner.getValue());
 135     }
 136 
 137     @Test public void createDefaultSpinner_editableIsFalse() {
 138         assertFalse(spinner.isEditable());
 139     }
 140 
 141     @Ignore(&quot;Waiting for StageLoader&quot;)
 142     @Test public void createDefaultSpinner_defaultSkinIsInstalled() {
 143         assertTrue(spinner.getSkin() instanceof SpinnerSkin);
 144     }
 145 
 146 
 147     /***************************************************************************
 148      *                                                                         *
 149      * Alternative constructor tests                                           *
 150      *                                                                         *
 151      **************************************************************************/
 152 
 153     @Test public void createIntSpinner_createValidValueFactory() {
 154         Spinner&lt;Integer&gt; intSpinner = new Spinner&lt;Integer&gt;(0, 10, 5, 1);
 155         assertTrue(intSpinner.getValueFactory() instanceof IntegerSpinnerValueFactory);
 156         IntegerSpinnerValueFactory valueFactory = (IntegerSpinnerValueFactory) intSpinner.getValueFactory();
 157         assertEquals(5, (int) valueFactory.getValue());
 158     }
 159 
 160     @Test public void createIntSpinner_setInitialValueOutsideMaxBounds() {
 161         Spinner&lt;Integer&gt; intSpinner = new Spinner&lt;Integer&gt;(0, 10, 100, 1);
 162         assertTrue(intSpinner.getValueFactory() instanceof IntegerSpinnerValueFactory);
 163         IntegerSpinnerValueFactory valueFactory = (IntegerSpinnerValueFactory) intSpinner.getValueFactory();
 164         assertEquals(0, (int) valueFactory.getValue());
 165     }
 166 
 167     @Test public void createIntSpinner_setInitialValueOutsideMinBounds() {
 168         Spinner&lt;Integer&gt; intSpinner = new Spinner&lt;Integer&gt;(0, 10, -100, 1);
 169         assertTrue(intSpinner.getValueFactory() instanceof IntegerSpinnerValueFactory);
 170         IntegerSpinnerValueFactory valueFactory = (IntegerSpinnerValueFactory) intSpinner.getValueFactory();
 171         assertEquals(0, (int) valueFactory.getValue());
 172     }
 173 
 174     @Test public void createListSpinner_createValidValueFactory() {
 175         Spinner&lt;String&gt; stringSpinner = new Spinner&lt;&gt;(FXCollections.observableArrayList(&quot;item 1&quot;, &quot;item 2&quot;));
 176         assertTrue(stringSpinner.getValueFactory() instanceof ListSpinnerValueFactory);
 177         ListSpinnerValueFactory valueFactory = (ListSpinnerValueFactory) stringSpinner.getValueFactory();
 178         assertEquals(&quot;item 1&quot;, valueFactory.getValue());
 179     }
 180 
 181     @Test public void createListSpinner_emptyListResultsInNullValue() {
 182         Spinner&lt;String&gt; stringSpinner = new Spinner&lt;String&gt;(FXCollections.observableArrayList());
 183         assertTrue(stringSpinner.getValueFactory() instanceof ListSpinnerValueFactory);
 184         ListSpinnerValueFactory valueFactory = (ListSpinnerValueFactory) stringSpinner.getValueFactory();
 185         assertNull(valueFactory.getValue());
 186     }
 187 
 188     @Test public void createListSpinner_nullListResultsInNullValue() {
 189         Spinner&lt;String&gt; stringSpinner = new Spinner&lt;&gt;((ObservableList&lt;String&gt;)null);
 190         assertTrue(stringSpinner.getValueFactory() instanceof ListSpinnerValueFactory);
 191         ListSpinnerValueFactory valueFactory = (ListSpinnerValueFactory) stringSpinner.getValueFactory();
 192         assertNull(valueFactory.getValue());
 193     }
 194 
 195     @Test public void createSpinner_customSpinnerValueFactory() {
 196         SpinnerValueFactory&lt;String&gt; valueFactory = new ListSpinnerValueFactory&lt;&gt;(FXCollections.observableArrayList(&quot;item 1&quot;, &quot;item 2&quot;));
 197         Spinner&lt;String&gt; stringSpinner = new Spinner&lt;&gt;(valueFactory);
 198         assertEquals(valueFactory, stringSpinner.getValueFactory());
 199         ListSpinnerValueFactory valueFactory1 = (ListSpinnerValueFactory) stringSpinner.getValueFactory();
 200         assertEquals(&quot;item 1&quot;, valueFactory.getValue());
 201         assertEquals(&quot;item 1&quot;, valueFactory1.getValue());
 202     }
 203 
 204 
 205 
 206     /***************************************************************************
 207      *                                                                         *
 208      * increment / decrement tests                                             *
 209      * (we test the actual inc / dec in the value factory impl tests)          *
 210      *                                                                         *
 211      **************************************************************************/
 212 
 213     @Test(expected = IllegalStateException.class)
 214     public void expectExceptionWhenNoArgsIncrementCalled_noValueFactory() {
 215         spinner.increment();
 216     }
 217 
 218     @Test(expected = IllegalStateException.class)
 219     public void expectExceptionWhenOneArgsIncrementCalled_noValueFactory() {
 220         spinner.increment(2);
 221     }
 222 
 223     @Test(expected = IllegalStateException.class)
 224     public void expectExceptionWhenNoArgsDecrementCalled_noValueFactory() {
 225         spinner.decrement();
 226     }
 227 
 228     @Test(expected = IllegalStateException.class)
 229     public void expectExceptionWhenOneArgsDecrementCalled_noValueFactory() {
 230         spinner.decrement(2);
 231     }
 232 
 233 
 234     /***************************************************************************
 235      *                                                                         *
 236      * changing value factory tests                                            *
 237      *                                                                         *
 238      **************************************************************************/
 239 
 240     @Test public void valueFactory_valueIsNulledWhenValueFactoryisNull() {
 241         assertEquals(5, (int) intSpinner.getValue());
 242         intSpinner.setValueFactory(null);
 243         assertNull(spinner.getValue());
 244     }
 245 
 246     @Test public void valueFactory_valueIsUpdatedWhenValueFactoryChanged() {
 247         assertEquals(5, (int) intSpinner.getValue());
 248         intSpinner.setValueFactory(new IntegerSpinnerValueFactory(0, 10, 8));
 249         assertEquals(8, (int) intSpinner.getValue());
 250     }
 251 
 252 //    @Test public void valueFactory_spinnerPropertyIsNullWhenRemovedFromSpinner() {
 253 //        SpinnerValueFactory initialValueFactory = intSpinner.getValueFactory();
 254 //        assertEquals(intSpinner, initialValueFactory.getSpinner());
 255 //
 256 //        intSpinner.setValueFactory(null);
 257 //        assertNull(intSpinner.getValueFactory());
 258 //    }
 259 //
 260 //    @Test public void valueFactory_spinnerPropertyIsSetOnNewSpinner() {
 261 //        SpinnerValueFactory initialValueFactory = intSpinner.getValueFactory();
 262 //        assertEquals(intSpinner, initialValueFactory.getSpinner());
 263 //
 264 //        SpinnerValueFactory newValueFactory = new IntSpinnerValueFactory(0, 10, 8);
 265 //        intSpinner.setValueFactory(newValueFactory);
 266 //
 267 //        assertNull(initialValueFactory.getSpinner());
 268 //        assertEquals(intSpinner, newValueFactory.getSpinner());
 269 //    }
 270 
 271 
 272     /***************************************************************************
 273      *                                                                         *
 274      * value property events                                                   *
 275      *                                                                         *                                                                         *
 276      **************************************************************************/
 277 
 278     @Test public void value_notifyWhenChanged_validValue() {
 279         assertEquals(5, (int) intSpinner.getValue());
 280         intSpinner.valueProperty().addListener(o -&gt; eventCount++);
 281         intSpinner.getValueFactory().setValue(3);
 282         assertEquals(1, eventCount);
 283     }
 284 
 285     @Test public void value_notifyWhenChanged_invalidValue() {
 286         assertEquals(5, (int) intSpinner.getValue());
 287         intSpinner.valueProperty().addListener(o -&gt; eventCount++);
 288         intSpinner.getValueFactory().setValue(1000);
 289 
 290         // we expect two events: firstly, one for the invalid value, and another
 291         // for the valid value
 292         assertEquals(2, eventCount);
 293     }
 294 
 295     @Test public void value_notifyWhenChanged_existingValue() {
 296         assertEquals(5, (int) intSpinner.getValue());
 297         intSpinner.valueProperty().addListener(o -&gt; eventCount++);
 298         intSpinner.getValueFactory().setValue(5);
 299         assertEquals(0, eventCount);
 300     }
 301 
 302 
 303     /***************************************************************************
 304      *                                                                         *
 305      * editing tests                                                           *
 306      *                                                                         *
 307      **************************************************************************/
 308 
 309     @Ignore(&quot;Need KeyboardEventFirer&quot;)
 310     @Test public void editing_commitValidInput() {
 311         intSpinner.valueProperty().addListener(o -&gt; eventCount++);
 312         intSpinner.getEditor().setText(&quot;3&quot;);
 313         // TODO press enter
 314 
 315         assertEquals(1, eventCount);
 316         assertEquals(3, (int) intSpinner.getValue());
 317         assertEquals(&quot;3&quot;, intSpinner.getEditor().getText());
 318     }
 319 
 320     @Ignore(&quot;Need KeyboardEventFirer&quot;)
 321     @Test public void editing_commitInvalidInput() {
 322         intSpinner.valueProperty().addListener(o -&gt; eventCount++);
 323         intSpinner.getEditor().setText(&quot;300&quot;);
 324         // TODO press enter
 325 
 326         assertEquals(2, eventCount);
 327         assertEquals(5, (int) intSpinner.getValue());
 328         assertEquals(&quot;5&quot;, intSpinner.getEditor().getText());
 329     }
 330 
 331 
 332     /***************************************************************************
 333      *                                                                         *
 334      * IntegerSpinnerValueFactory tests                                        *
 335      *                                                                         *
 336      **************************************************************************/
 337 
 338     @Test public void intSpinner_testIncrement_oneStep() {
 339         intValueFactory.increment(1);
 340         assertEquals(6, (int) intValueFactory.getValue());
 341     }
 342 
 343     @Test public void intSpinner_testIncrement_twoSteps() {
 344         intValueFactory.increment(2);
 345         assertEquals(7, (int) intValueFactory.getValue());
 346     }
 347 
 348     @Test public void intSpinner_testIncrement_manyCalls() {
 349         for (int i = 0; i &lt; 100; i++) {
 350             intValueFactory.increment(1);
 351         }
 352         assertEquals(10, (int) intValueFactory.getValue());
 353     }
 354 
 355     @Test public void intSpinner_testIncrement_bigStepPastMaximum() {
 356         intValueFactory.increment(1000);
 357         assertEquals(10, (int) intValueFactory.getValue());
 358     }
 359 
 360     @Test public void intSpinner_testDecrement_oneStep() {
 361         intValueFactory.decrement(1);
 362         assertEquals(4, (int) intValueFactory.getValue());
 363     }
 364 
 365     @Test public void intSpinner_testDecrement_twoSteps() {
 366         intValueFactory.decrement(2);
 367         assertEquals(3, (int) intValueFactory.getValue());
 368     }
 369 
 370     @Test public void intSpinner_testDecrement_manyCalls() {
 371         for (int i = 0; i &lt; 100; i++) {
 372             intValueFactory.decrement(1);
 373         }
 374         assertEquals(0, (int) intValueFactory.getValue());
 375     }
 376 
 377     @Test public void intSpinner_testDecrement_bigStepPastMinimum() {
 378         intValueFactory.decrement(1000);
 379         assertEquals(0, (int) intValueFactory.getValue());
 380     }
 381 
 382     @Test public void intSpinner_testWrapAround_increment_oneStep() {
 383         intValueFactory.setWrapAround(true);
 384         intValueFactory.increment(1); // 6
 385         intValueFactory.increment(1); // 7
 386         intValueFactory.increment(1); // 8
 387         intValueFactory.increment(1); // 9
 388         intValueFactory.increment(1); // 10
 389         intValueFactory.increment(1); // 0
 390         intValueFactory.increment(1); // 1
 391         assertEquals(1, (int) intValueFactory.getValue());
 392     }
 393 
<a name="3" id="anc3"></a><span class="line-added"> 394     // TODO : This should wrap around and select a value between min and max</span>
<span class="line-added"> 395     @Test public void intSpinner_testWrapAround_increment_LargeStep() {</span>
<span class="line-added"> 396         intValueFactory.setWrapAround(true);</span>
<span class="line-added"> 397         intValueFactory.increment(1000);</span>
<span class="line-added"> 398         intValueFactory.increment(1000);</span>
<span class="line-added"> 399         assertEquals(10, (int) intValueFactory.getValue());</span>
<span class="line-added"> 400     }</span>
<span class="line-added"> 401 </span>
<span class="line-added"> 402     @Test public void intSpinner_testWrapAround_increment_general() {</span>
<span class="line-added"> 403         IntegerSpinnerValueFactory factory = new IntegerSpinnerValueFactory(4, 10, 4, 1);</span>
<span class="line-added"> 404         factory.setWrapAround(true);</span>
<span class="line-added"> 405         factory.increment(1); // 5</span>
<span class="line-added"> 406         factory.increment(1); // 6</span>
<span class="line-added"> 407         factory.increment(1); // 7</span>
<span class="line-added"> 408         factory.increment(1); // 8</span>
<span class="line-added"> 409         factory.increment(1); // 9</span>
<span class="line-added"> 410         factory.increment(1); // 10</span>
<span class="line-added"> 411         factory.increment(1); // 4 -- wrapped around</span>
<span class="line-added"> 412         factory.increment(1); // 5</span>
<span class="line-added"> 413         assertEquals(5, (int) factory.getValue());</span>
<span class="line-added"> 414 </span>
<span class="line-added"> 415         factory.setValue(4);</span>
<span class="line-added"> 416         factory.setAmountToStepBy(2);</span>
<span class="line-added"> 417         factory.increment(1); // 6</span>
<span class="line-added"> 418         factory.increment(1); // 8</span>
<span class="line-added"> 419         factory.increment(1); // 10</span>
<span class="line-added"> 420         factory.increment(1); // 5</span>
<span class="line-added"> 421         factory.increment(1); // 7</span>
<span class="line-added"> 422         factory.increment(1); // 9</span>
<span class="line-added"> 423         factory.increment(1); // 4 -- wrapped around</span>
<span class="line-added"> 424         factory.increment(1); // 6</span>
<span class="line-added"> 425         assertEquals(6, (int) factory.getValue());</span>
<span class="line-added"> 426 </span>
<span class="line-added"> 427         factory.setValue(4);</span>
<span class="line-added"> 428         factory.setAmountToStepBy(3);</span>
<span class="line-added"> 429         factory.increment(1); // 7</span>
<span class="line-added"> 430         factory.increment(1); // 10</span>
<span class="line-added"> 431         factory.increment(1); // 6 -- wrapped around</span>
<span class="line-added"> 432         factory.increment(1); // 9</span>
<span class="line-added"> 433         factory.increment(1); // 5 -- wrapped around</span>
<span class="line-added"> 434         factory.increment(1); // 8</span>
<span class="line-added"> 435         factory.increment(1); // 4 -- wrapped around</span>
<span class="line-added"> 436         factory.increment(1); // 7</span>
<span class="line-added"> 437         assertEquals(7, (int) factory.getValue());</span>
<span class="line-added"> 438 </span>
<span class="line-added"> 439         factory.setValue(4);</span>
<span class="line-added"> 440         factory.setAmountToStepBy(4);</span>
<span class="line-added"> 441         factory.increment(1); // 8</span>
<span class="line-added"> 442         factory.increment(1); // 5 -- wrapped around</span>
<span class="line-added"> 443         factory.increment(1); // 9</span>
<span class="line-added"> 444         factory.increment(1); // 6 -- wrapped around</span>
<span class="line-added"> 445         factory.increment(1); // 10</span>
<span class="line-added"> 446         factory.increment(1); // 7 -- wrapped around</span>
<span class="line-added"> 447         factory.increment(1); // 4 -- wrapped around</span>
<span class="line-added"> 448         factory.increment(1); // 8</span>
<span class="line-added"> 449         assertEquals(8, (int) factory.getValue());</span>
<span class="line-added"> 450 </span>
<span class="line-added"> 451         factory.setValue(4);</span>
<span class="line-added"> 452         factory.setAmountToStepBy(5);</span>
<span class="line-added"> 453         factory.increment(1); // 9</span>
<span class="line-added"> 454         factory.increment(1); // 7 -- wrapped around</span>
<span class="line-added"> 455         factory.increment(1); // 5 -- wrapped around</span>
<span class="line-added"> 456         factory.increment(1); // 10</span>
<span class="line-added"> 457         factory.increment(1); // 8 -- wrapped around</span>
<span class="line-added"> 458         factory.increment(1); // 6 -- wrapped around</span>
<span class="line-added"> 459         factory.increment(1); // 4 -- wrapped around</span>
<span class="line-added"> 460         factory.increment(1); // 9</span>
<span class="line-added"> 461         assertEquals(9, (int) factory.getValue());</span>
<span class="line-added"> 462 </span>
<span class="line-added"> 463         factory.setValue(4);</span>
<span class="line-added"> 464         factory.setAmountToStepBy(6);</span>
<span class="line-added"> 465         factory.increment(1); // 10</span>
<span class="line-added"> 466         factory.increment(1); // 9 -- wrapped around</span>
<span class="line-added"> 467         factory.increment(1); // 8 -- wrapped around</span>
<span class="line-added"> 468         factory.increment(1); // 7 -- wrapped around</span>
<span class="line-added"> 469         factory.increment(1); // 6 -- wrapped around</span>
<span class="line-added"> 470         factory.increment(1); // 5 -- wrapped around</span>
<span class="line-added"> 471         factory.increment(1); // 4 -- wrapped around</span>
<span class="line-added"> 472         factory.increment(1); // 10</span>
<span class="line-added"> 473         assertEquals(10, (int) factory.getValue());</span>
<span class="line-added"> 474 </span>
<span class="line-added"> 475 </span>
<span class="line-added"> 476         // TODO: Set amount to step-by greater than the total numbers between max and min</span>
<span class="line-added"> 477         // Wrap around should wrap and select a value.</span>
<span class="line-added"> 478         factory.setValue(7);</span>
<span class="line-added"> 479         factory.setAmountToStepBy(10);</span>
<span class="line-added"> 480         factory.increment(1);</span>
<span class="line-added"> 481         factory.increment(1);</span>
<span class="line-added"> 482         factory.increment(1);</span>
<span class="line-added"> 483         factory.increment(1);</span>
<span class="line-added"> 484         assertEquals(10, (int) factory.getValue());</span>
<span class="line-added"> 485     }</span>
<span class="line-added"> 486 </span>
<span class="line-added"> 487     @Test public void intSpinner_testWrapAround_decrement_general() {</span>
<span class="line-added"> 488         IntegerSpinnerValueFactory factory = new IntegerSpinnerValueFactory(4, 10, 8, 1);</span>
<span class="line-added"> 489         factory.setWrapAround(true);</span>
<span class="line-added"> 490         factory.decrement(1); // 7</span>
<span class="line-added"> 491         factory.decrement(1); // 6</span>
<span class="line-added"> 492         factory.decrement(1); // 5</span>
<span class="line-added"> 493         factory.decrement(1); // 4</span>
<span class="line-added"> 494         factory.decrement(1); // 10 -- wrapped around</span>
<span class="line-added"> 495         factory.decrement(1); // 9</span>
<span class="line-added"> 496         factory.decrement(1); // 8</span>
<span class="line-added"> 497         factory.decrement(1); // 7</span>
<span class="line-added"> 498         assertEquals(7, (int) factory.getValue());</span>
<span class="line-added"> 499 </span>
<span class="line-added"> 500         factory.setValue(8);</span>
<span class="line-added"> 501         factory.setAmountToStepBy(2);</span>
<span class="line-added"> 502         factory.decrement(1); // 6</span>
<span class="line-added"> 503         factory.decrement(1); // 4</span>
<span class="line-added"> 504         factory.decrement(1); // 9  -- wrapped around</span>
<span class="line-added"> 505         factory.decrement(1); // 7</span>
<span class="line-added"> 506         factory.decrement(1); // 5</span>
<span class="line-added"> 507         factory.decrement(1); // 10  -- wrapped around</span>
<span class="line-added"> 508         factory.decrement(1); // 8</span>
<span class="line-added"> 509         factory.decrement(1); // 6</span>
<span class="line-added"> 510         factory.setValue(6);</span>
<span class="line-added"> 511         factory.setAmountToStepBy(3);</span>
<span class="line-added"> 512         factory.decrement(1); // 10  -- wrapped around</span>
<span class="line-added"> 513         factory.decrement(1); // 7</span>
<span class="line-added"> 514         assertEquals(7, (int) factory.getValue());</span>
<span class="line-added"> 515 </span>
<span class="line-added"> 516         factory.decrement(1); // 4</span>
<span class="line-added"> 517         factory.decrement(1); // 8  -- wrapped around</span>
<span class="line-added"> 518         factory.decrement(1); // 5</span>
<span class="line-added"> 519         factory.decrement(1); // 9  -- wrapped around</span>
<span class="line-added"> 520         factory.decrement(1); // 6</span>
<span class="line-added"> 521         factory.decrement(1); // 10 -- wrapped around</span>
<span class="line-added"> 522         assertEquals(10, (int) factory.getValue());</span>
<span class="line-added"> 523 </span>
<span class="line-added"> 524         factory.setValue(4);</span>
<span class="line-added"> 525         factory.setAmountToStepBy(4);</span>
<span class="line-added"> 526         factory.decrement(1); // 7</span>
<span class="line-added"> 527         factory.decrement(1); // 10 -- wrapped around</span>
<span class="line-added"> 528         factory.decrement(1); // 6</span>
<span class="line-added"> 529         factory.decrement(1); // 9 -- wrapped around</span>
<span class="line-added"> 530         factory.decrement(1); // 5</span>
<span class="line-added"> 531         factory.decrement(1); // 8 -- wrapped around</span>
<span class="line-added"> 532         factory.decrement(1); // 4</span>
<span class="line-added"> 533         factory.decrement(1); // 7 -- wrapped around</span>
<span class="line-added"> 534         assertEquals(7, (int) factory.getValue());</span>
<span class="line-added"> 535 </span>
<span class="line-added"> 536         factory.setValue(10);</span>
<span class="line-added"> 537         factory.setAmountToStepBy(5);</span>
<span class="line-added"> 538         factory.decrement(1); // 5</span>
<span class="line-added"> 539         factory.decrement(1); // 7 -- wrapped around</span>
<span class="line-added"> 540         factory.decrement(1); // 9 -- wrapped around</span>
<span class="line-added"> 541         factory.decrement(1); // 4</span>
<span class="line-added"> 542         factory.decrement(1); // 6 -- wrapped around</span>
<span class="line-added"> 543         factory.decrement(1); // 8 -- wrapped around</span>
<span class="line-added"> 544         factory.decrement(1); // 10 -- wrapped around</span>
<span class="line-added"> 545         factory.decrement(1); // 5</span>
<span class="line-added"> 546         assertEquals(5, (int) factory.getValue());</span>
<span class="line-added"> 547 </span>
<span class="line-added"> 548         factory.setValue(10);</span>
<span class="line-added"> 549         factory.setAmountToStepBy(6);</span>
<span class="line-added"> 550         factory.decrement(1); // 4</span>
<span class="line-added"> 551         factory.decrement(1); // 5 -- wrapped around</span>
<span class="line-added"> 552         factory.decrement(1); // 6 -- wrapped around</span>
<span class="line-added"> 553         factory.decrement(1); // 7 -- wrapped around</span>
<span class="line-added"> 554         factory.decrement(1); // 8 -- wrapped around</span>
<span class="line-added"> 555         factory.decrement(1); // 9 -- wrapped around</span>
<span class="line-added"> 556         factory.decrement(1); // 10 -- wrapped around</span>
<span class="line-added"> 557         factory.decrement(1); // 4</span>
<span class="line-added"> 558         assertEquals(4, (int) factory.getValue());</span>
<span class="line-added"> 559 </span>
<span class="line-added"> 560 </span>
<span class="line-added"> 561         // TODO: Set amount to step-by greater than the total numbers between max and min</span>
<span class="line-added"> 562         // Wrap around should wrap and select a value.</span>
<span class="line-added"> 563         factory.setValue(7);</span>
<span class="line-added"> 564         factory.setAmountToStepBy(10);</span>
<span class="line-added"> 565         factory.decrement(1);</span>
<span class="line-added"> 566         factory.decrement(1);</span>
<span class="line-added"> 567         factory.decrement(1);</span>
<span class="line-added"> 568         factory.decrement(1);</span>
<span class="line-added"> 569         assertEquals(4, (int) factory.getValue());</span>
<span class="line-added"> 570     }</span>
<span class="line-added"> 571 </span>
 572     @Test public void intSpinner_testWrapAround_increment_twoSteps() {
 573         intValueFactory.setWrapAround(true);
 574         intValueFactory.increment(2); // 7
 575         intValueFactory.increment(2); // 9
 576         intValueFactory.increment(2); // 0
 577         intValueFactory.increment(2); // 2
 578         assertEquals(2, (int) intValueFactory.getValue());
 579     }
 580 
 581     @Test public void intSpinner_testWrapAround_decrement_oneStep() {
 582         intValueFactory.setWrapAround(true);
 583         intValueFactory.decrement(1); // 4
 584         intValueFactory.decrement(1); // 3
 585         intValueFactory.decrement(1); // 2
 586         intValueFactory.decrement(1); // 1
 587         intValueFactory.decrement(1); // 0
 588         intValueFactory.decrement(1); // 10
 589         intValueFactory.decrement(1); // 9
 590         assertEquals(9, (int) intValueFactory.getValue());
 591     }
 592 
 593     @Test public void intSpinner_testWrapAround_decrement_twoSteps() {
 594         intValueFactory.setWrapAround(true);
 595         intValueFactory.decrement(2); // 3
 596         intValueFactory.decrement(2); // 1
 597         intValueFactory.decrement(2); // 10
 598         intValueFactory.decrement(2); // 8
 599         assertEquals(8, (int) intValueFactory.getValue());
 600     }
 601 
 602     @Test public void intSpinner_assertDefaultConverterIsNonNull() {
 603         assertNotNull(intValueFactory.getConverter());
 604     }
 605 
 606     @Test public void intSpinner_testToString_valueInRange() {
 607         assertEquals(&quot;3&quot;, intValueFactory.getConverter().toString(3));
 608     }
 609 
 610     @Test public void intSpinner_testToString_valueOutOfRange() {
 611         assertEquals(&quot;300&quot;, intValueFactory.getConverter().toString(300));
 612     }
 613 
 614     @Test public void intSpinner_testFromString_valueInRange() {
 615         assertEquals(3, (int) intValueFactory.getConverter().fromString(&quot;3&quot;));
 616     }
 617 
 618     @Test public void intSpinner_testFromString_valueOutOfRange() {
 619         assertEquals(300, (int) intValueFactory.getConverter().fromString(&quot;300&quot;));
 620     }
 621 
 622     @Test public void intSpinner_testSetMin_doesNotChangeSpinnerValueWhenMinIsLessThanCurrentValue() {
 623         intValueFactory.setValue(5);
 624         assertEquals(5, (int) intSpinner.getValue());
 625         intValueFactory.setMin(3);
 626         assertEquals(5, (int) intSpinner.getValue());
 627     }
 628 
 629     @Test public void intSpinner_testSetMin_changesSpinnerValueWhenMinIsGreaterThanCurrentValue() {
 630         intValueFactory.setValue(0);
 631         assertEquals(0, (int) intSpinner.getValue());
 632         intValueFactory.setMin(5);
 633         assertEquals(5, (int) intSpinner.getValue());
 634     }
 635 
 636     @Test public void intSpinner_testSetMin_ensureThatMinCanNotExceedMax() {
 637         assertEquals(0, intValueFactory.getMin());
 638         assertEquals(10, intValueFactory.getMax());
 639         intValueFactory.setMin(20);
 640         assertEquals(10, intValueFactory.getMin());
 641     }
 642 
 643     @Test public void intSpinner_testSetMin_ensureThatMinCanEqualMax() {
 644         assertEquals(0, intValueFactory.getMin());
 645         assertEquals(10, intValueFactory.getMax());
 646         intValueFactory.setMin(10);
 647         assertEquals(10, intValueFactory.getMin());
 648     }
 649 
 650     @Test public void intSpinner_testSetMax_doesNotChangeSpinnerValueWhenMaxIsGreaterThanCurrentValue() {
 651         intValueFactory.setValue(5);
 652         assertEquals(5, (int) intSpinner.getValue());
 653         intValueFactory.setMax(8);
 654         assertEquals(5, (int) intSpinner.getValue());
 655     }
 656 
 657     @Test public void intSpinner_testSetMax_changesSpinnerValueWhenMaxIsGreaterThanCurrentValue() {
 658         intValueFactory.setValue(5);
 659         assertEquals(5, (int) intSpinner.getValue());
 660         intValueFactory.setMax(3);
 661         assertEquals(3, (int) intSpinner.getValue());
 662     }
 663 
 664     @Test public void intSpinner_testSetMax_ensureThatMaxCanNotGoLessThanMin() {
 665         intValueFactory.setMin(5);
 666         assertEquals(5, intValueFactory.getMin());
 667         assertEquals(10, intValueFactory.getMax());
 668         intValueFactory.setMax(3);
 669         assertEquals(5, intValueFactory.getMin());
 670     }
 671 
 672     @Test public void intSpinner_testSetMax_ensureThatMaxCanEqualMin() {
 673         intValueFactory.setMin(5);
 674         assertEquals(5, intValueFactory.getMin());
 675         assertEquals(10, intValueFactory.getMax());
 676         intValueFactory.setMax(5);
 677         assertEquals(5, intValueFactory.getMin());
 678     }
 679 
 680     @Test public void intSpinner_testSetValue_canNotExceedMax() {
 681         assertEquals(0, intValueFactory.getMin());
 682         assertEquals(10, intValueFactory.getMax());
 683         intValueFactory.setValue(50);
 684         assertEquals(10, (int) intSpinner.getValue());
 685     }
 686 
 687     @Test public void intSpinner_testSetValue_canNotExceedMin() {
 688         assertEquals(0, intValueFactory.getMin());
 689         assertEquals(10, intValueFactory.getMax());
 690         intValueFactory.setValue(-50);
 691         assertEquals(0, (int) intSpinner.getValue());
 692     }
 693 
 694 
 695 
 696     /***************************************************************************
 697      *                                                                         *
 698      * DoubleSpinnerValueFactory tests                                         *
 699      *                                                                         *                                                                         *
 700      **************************************************************************/
 701 
 702     @Test public void dblSpinner_testIncrement_oneStep() {
 703         dblValueFactory.increment(1);
 704         assertEquals(0.55, dblValueFactory.getValue(), 0);
 705     }
 706 
 707     @Test public void dblSpinner_testIncrement_twoSteps() {
 708         dblValueFactory.increment(2);
 709         assertEquals(0.6, dblValueFactory.getValue(), 0);
 710     }
 711 
 712     @Test public void dblSpinner_testIncrement_manyCalls() {
 713         for (int i = 0; i &lt; 100; i++) {
 714             dblValueFactory.increment(1);
 715         }
 716         assertEquals(1.0, dblValueFactory.getValue(), 0);
 717     }
 718 
 719     @Test public void dblSpinner_testIncrement_bigStepPastMaximum() {
 720         dblValueFactory.increment(1000);
 721         assertEquals(1.0, dblValueFactory.getValue(), 0);
 722     }
 723 
 724     @Test public void dblSpinner_testDecrement_oneStep() {
 725         dblValueFactory.decrement(1);
 726         assertEquals(0.45, dblValueFactory.getValue());
 727     }
 728 
 729     @Test public void dblSpinner_testDecrement_twoSteps() {
 730         dblValueFactory.decrement(2);
 731         assertEquals(0.4, dblValueFactory.getValue());
 732     }
 733 
 734     @Test public void dblSpinner_testDecrement_manyCalls() {
 735         for (int i = 0; i &lt; 100; i++) {
 736             dblValueFactory.decrement(1);
 737         }
 738         assertEquals(0, dblValueFactory.getValue(), 0);
 739     }
 740 
 741     @Test public void dblSpinner_testDecrement_bigStepPastMinimum() {
 742         dblValueFactory.decrement(1000);
 743         assertEquals(0, dblValueFactory.getValue(), 0);
 744     }
 745 
 746     @Test public void dblSpinner_testWrapAround_increment_oneStep() {
 747         dblValueFactory.setWrapAround(true);
 748         dblValueFactory.setValue(0.80);
 749         dblValueFactory.increment(1); // 0.85
 750         dblValueFactory.increment(1); // 0.90
 751         dblValueFactory.increment(1); // 0.95
 752         dblValueFactory.increment(1); // 1.00
 753         dblValueFactory.increment(1); // 0.00
 754         dblValueFactory.increment(1); // 0.05
 755         dblValueFactory.increment(1); // 0.10
 756         assertEquals(0.10, dblValueFactory.getValue(), 0);
 757     }
 758 
 759     @Test public void dblSpinner_testWrapAround_increment_twoSteps() {
 760         dblValueFactory.setWrapAround(true);
 761         dblValueFactory.setValue(0.80);
 762         dblValueFactory.increment(2); // 0.90
 763         dblValueFactory.increment(2); // 1.00
 764         dblValueFactory.increment(2); // 0.00
 765         dblValueFactory.increment(2); // 0.10
 766         assertEquals(0.10, dblValueFactory.getValue(), 0);
 767     }
 768 
 769     @Test public void dblSpinner_testWrapAround_decrement_oneStep() {
 770         dblValueFactory.setWrapAround(true);
 771         dblValueFactory.setValue(0.20);
 772         dblValueFactory.decrement(1); // 0.15
 773         dblValueFactory.decrement(1); // 0.10
 774         dblValueFactory.decrement(1); // 0.05
 775         dblValueFactory.decrement(1); // 0.00
 776         dblValueFactory.decrement(1); // 1.00
 777         dblValueFactory.decrement(1); // 0.95
 778         dblValueFactory.decrement(1); // 0.90
 779         assertEquals(0.90, dblValueFactory.getValue(), 0);
 780     }
 781 
 782     @Test public void dblSpinner_testWrapAround_decrement_twoSteps() {
 783         dblValueFactory.setWrapAround(true);
 784         dblValueFactory.setValue(0.20);
 785         dblValueFactory.decrement(2); // 0.10
 786         dblValueFactory.decrement(2); // 0.00
 787         dblValueFactory.decrement(2); // 1.00
 788         dblValueFactory.decrement(2); // 0.90
 789         assertEquals(0.90, dblValueFactory.getValue());
 790     }
 791 
 792     @Test public void dblSpinner_assertDefaultConverterIsNonNull() {
 793         assertNotNull(dblValueFactory.getConverter());
 794     }
 795 
 796     @Test public void dblSpinner_testToString_valueInRange() {
 797         assertEquals(&quot;0.3&quot;, dblValueFactory.getConverter().toString(0.3));
 798     }
 799 
 800     @Test public void dblSpinner_testToString_valueOutOfRange() {
 801         assertEquals(&quot;300&quot;, dblValueFactory.getConverter().toString(300D));
 802     }
 803 
 804     @Test public void dblSpinner_testFromString_valueInRange() {
 805         assertEquals(0.3, dblValueFactory.getConverter().fromString(&quot;0.3&quot;));
 806     }
 807 
 808     @Test public void dblSpinner_testFromString_valueOutOfRange() {
 809         assertEquals(300.0, dblValueFactory.getConverter().fromString(&quot;300&quot;), 0);
 810     }
 811 
 812     @Test public void dblSpinner_testSetMin_doesNotChangeSpinnerValueWhenMinIsLessThanCurrentValue() {
 813         dblValueFactory.setValue(0.5);
 814         assertEquals(0.5, dblSpinner.getValue());
 815         dblValueFactory.setMin(0.3);
 816         assertEquals(0.5, dblSpinner.getValue());
 817     }
 818 
 819     @Test public void dblSpinner_testSetMin_changesSpinnerValueWhenMinIsGreaterThanCurrentValue() {
 820         dblValueFactory.setValue(0.0);
 821         assertEquals(0.0, dblSpinner.getValue());
 822         dblValueFactory.setMin(0.5);
 823         assertEquals(0.5, dblSpinner.getValue());
 824     }
 825 
 826     @Test public void dblSpinner_testSetMin_ensureThatMinCanNotExceedMax() {
 827         assertEquals(0, dblValueFactory.getMin(), 0);
 828         assertEquals(1.0, dblValueFactory.getMax());
 829         dblValueFactory.setMin(20);
 830         assertEquals(1.0, dblValueFactory.getMin());
 831     }
 832 
 833     @Test public void dblSpinner_testSetMin_ensureThatMinCanEqualMax() {
 834         assertEquals(0, dblValueFactory.getMin(), 0);
 835         assertEquals(1.0, dblValueFactory.getMax());
 836         dblValueFactory.setMin(1.0);
 837         assertEquals(1.0, dblValueFactory.getMin());
 838     }
 839 
 840     @Test public void dblSpinner_testSetMax_doesNotChangeSpinnerValueWhenMaxIsGreaterThanCurrentValue() {
 841         dblValueFactory.setValue(0.5);
 842         assertEquals(0.5, dblSpinner.getValue());
 843         dblValueFactory.setMax(0.8);
 844         assertEquals(0.5, dblSpinner.getValue());
 845     }
 846 
 847     @Test public void dblSpinner_testSetMax_changesSpinnerValueWhenMaxIsGreaterThanCurrentValue() {
 848         dblValueFactory.setValue(0.5);
 849         assertEquals(0.5, dblSpinner.getValue());
 850         dblValueFactory.setMax(0.3);
 851         assertEquals(0.3, dblSpinner.getValue());
 852     }
 853 
 854     @Test public void dblSpinner_testSetMax_ensureThatMaxCanNotGoLessThanMin() {
 855         dblValueFactory.setMin(0.5);
 856         assertEquals(0.5, dblValueFactory.getMin());
 857         assertEquals(1.0, dblValueFactory.getMax());
 858         dblValueFactory.setMax(0.3);
 859         assertEquals(0.5, dblValueFactory.getMin());
 860     }
 861 
 862     @Test public void dblSpinner_testSetMax_ensureThatMaxCanEqualMin() {
 863         dblValueFactory.setMin(0.5);
 864         assertEquals(0.5, dblValueFactory.getMin());
 865         assertEquals(1.0, dblValueFactory.getMax());
 866         dblValueFactory.setMax(0.5);
 867         assertEquals(0.5, dblValueFactory.getMin());
 868     }
 869 
 870     @Test public void dblSpinner_testSetValue_canNotExceedMax() {
 871         assertEquals(0, dblValueFactory.getMin(), 0);
 872         assertEquals(1.0, dblValueFactory.getMax());
 873         dblValueFactory.setValue(5.0);
 874         assertEquals(1.0, dblSpinner.getValue());
 875     }
 876 
 877     @Test public void dblSpinner_testSetValue_canNotExceedMin() {
 878         assertEquals(0, dblValueFactory.getMin(), 0);
 879         assertEquals(1.0, dblValueFactory.getMax(), 0);
 880         dblValueFactory.setValue(-5.0);
 881         assertEquals(0, dblSpinner.getValue(), 0);
 882     }
 883 
 884 
 885     /***************************************************************************
 886      *                                                                         *
 887      * ListSpinnerValueFactory tests                                           *
 888      *                                                                         *
 889      **************************************************************************/
 890 
 891     @Test public void listSpinner_testIncrement_oneStep() {
 892         listValueFactory.increment(1);
 893         assertEquals(&quot;string2&quot;, listValueFactory.getValue());
 894     }
 895 
 896     @Test public void listSpinner_testIncrement_twoSteps() {
 897         listValueFactory.increment(2);
 898         assertEquals(&quot;string3&quot;, listValueFactory.getValue());
 899     }
 900 
 901     @Test public void listSpinner_testIncrement_manyCalls() {
 902         for (int i = 0; i &lt; 100; i++) {
 903             listValueFactory.increment(1);
 904         }
 905         assertEquals(&quot;string3&quot;, listValueFactory.getValue());
 906     }
 907 
 908     @Test public void listSpinner_testIncrement_bigStepPastMaximum() {
 909         listValueFactory.increment(1000);
 910         assertEquals(&quot;string3&quot;, listValueFactory.getValue());
 911     }
 912 
 913     @Test public void listSpinner_testDecrement_oneStep() {
 914         listValueFactory.decrement(1);
 915         assertEquals(&quot;string1&quot;, listValueFactory.getValue());
 916     }
 917 
 918     @Test public void listSpinner_testDecrement_twoSteps() {
 919         listValueFactory.decrement(2);
 920         assertEquals(&quot;string1&quot;, listValueFactory.getValue());
 921     }
 922 
 923     @Test public void listSpinner_testDecrement_manyCalls() {
 924         for (int i = 0; i &lt; 100; i++) {
 925             listValueFactory.decrement(1);
 926         }
 927         assertEquals(&quot;string1&quot;, listValueFactory.getValue());
 928     }
 929 
 930     @Test public void listSpinner_testDecrement_bigStepPastMinimum() {
 931         listValueFactory.decrement(1000);
 932         assertEquals(&quot;string1&quot;, listValueFactory.getValue());
 933     }
 934 
 935     @Test public void listSpinner_testWrapAround_increment_oneStep() {
 936         listValueFactory.setWrapAround(true);
 937         listValueFactory.increment(1); // string2
 938         listValueFactory.increment(1); // string3
 939         listValueFactory.increment(1); // string1
 940         listValueFactory.increment(1); // string2
 941         listValueFactory.increment(1); // string3
 942         listValueFactory.increment(1); // string1
 943         listValueFactory.increment(1); // string2
 944         assertEquals(&quot;string2&quot;, listValueFactory.getValue());
 945     }
 946 
 947     @Test public void listSpinner_testWrapAround_increment_twoSteps() {
 948         listValueFactory.setWrapAround(true);
 949         listValueFactory.increment(2); // string1 -&gt; string3
 950         listValueFactory.increment(2); // string3 -&gt; string2
 951         listValueFactory.increment(2); // string2 -&gt; string1
 952         listValueFactory.increment(2); // string1 -&gt; string3
 953         assertEquals(&quot;string3&quot;, listValueFactory.getValue());
 954     }
 955 
 956     @Test public void listSpinner_testWrapAround_decrement_oneStep() {
 957         listValueFactory.setWrapAround(true);
 958         listValueFactory.decrement(1); // string3
 959         listValueFactory.decrement(1); // string2
 960         listValueFactory.decrement(1); // string1
 961         listValueFactory.decrement(1); // string3
 962         listValueFactory.decrement(1); // string2
 963         listValueFactory.decrement(1); // string1
 964         listValueFactory.decrement(1); // string3
 965         assertEquals(&quot;string3&quot;, listValueFactory.getValue());
 966     }
 967 
 968     @Test public void listSpinner_testWrapAround_decrement_twoSteps() {
 969         listValueFactory.setWrapAround(true);
 970         listValueFactory.decrement(2); // string1 -&gt; string2
 971         listValueFactory.decrement(2); // string2 -&gt; string3
 972         listValueFactory.decrement(2); // string3 -&gt; string1
 973         listValueFactory.decrement(2); // string1 -&gt; string2
 974         assertEquals(&quot;string2&quot;, listValueFactory.getValue());
 975     }
 976 
 977     @Test public void listSpinner_assertDefaultConverterIsNonNull() {
 978         assertNotNull(listValueFactory.getConverter());
 979     }
 980 
 981     @Test public void listSpinner_testToString_valueInRange() {
 982         assertEquals(&quot;string2&quot;, listValueFactory.getConverter().toString(&quot;string2&quot;));
 983     }
 984 
 985     @Test public void listSpinner_testToString_valueOutOfRange() {
 986         assertEquals(&quot;string300&quot;, listValueFactory.getConverter().toString(&quot;string300&quot;));
 987     }
 988 
 989     @Test public void listSpinner_testFromString_valueInRange() {
 990         assertEquals(&quot;string3&quot;, listValueFactory.getConverter().fromString(&quot;string3&quot;));
 991     }
 992 
 993     @Test public void listSpinner_testFromString_valueOutOfRange() {
 994         assertEquals(&quot;string300&quot;, listValueFactory.getConverter().fromString(&quot;string300&quot;));
 995     }
 996 
 997     @Test public void listSpinner_testListChange_changeNonSelectedItem() {
 998         assertEquals(&quot;string1&quot;, listSpinner.getValue());
 999 
1000         strings.set(1, &quot;string200&quot;); // change &#39;string2&#39; to &#39;string200&#39;
1001 
1002         // there should be no change
1003         assertEquals(&quot;string1&quot;, listSpinner.getValue());
1004     }
1005 
1006     @Test public void listSpinner_testListChange_changeSelectedItem() {
1007         assertEquals(&quot;string1&quot;, listSpinner.getValue());
1008 
1009         strings.set(0, &quot;string100&quot;); // change &#39;string1&#39; to &#39;string100&#39;
1010 
1011         // the selected value should change
1012         assertEquals(&quot;string100&quot;, listSpinner.getValue());
1013     }
1014 
1015     @Test public void listSpinner_testListChange_changeEntireList_directly() {
1016         assertEquals(&quot;string1&quot;, listSpinner.getValue());
1017 
1018         listValueFactory.getItems().setAll(&quot;newString1&quot;, &quot;newString2&quot;, &quot;newString3&quot;);
1019 
1020         // the selected value should change
1021         assertEquals(&quot;newString1&quot;, listSpinner.getValue());
1022     }
1023 
1024     @Test public void listSpinner_testListChange_changeEntireList_usingSetter() {
1025         assertEquals(&quot;string1&quot;, listSpinner.getValue());
1026 
1027         listValueFactory.setItems(FXCollections.observableArrayList(&quot;newString1&quot;, &quot;newString2&quot;, &quot;newString3&quot;));
1028         assertEquals(&quot;newString1&quot;, listSpinner.getValue());
1029     }
1030 
1031     @Test public void listSpinner_testListChange_setItemsToNull() {
1032         assertEquals(&quot;string1&quot;, listSpinner.getValue());
1033         listValueFactory.setItems(null);
1034         assertNull(listSpinner.getValue());
1035     }
1036 
1037     @Test public void listSpinner_testListChange_setItemsToNonNull() {
1038         assertEquals(&quot;string1&quot;, listSpinner.getValue());
1039         listValueFactory.setItems(null);
1040         assertNull(listSpinner.getValue());
1041 
1042         listValueFactory.setItems(FXCollections.observableArrayList(&quot;newString1&quot;, &quot;newString2&quot;, &quot;newString3&quot;));
1043         assertEquals(&quot;newString1&quot;, listSpinner.getValue());
1044     }
1045 
1046     @Test public void listSpinner_testListChange_setNewEmptyListOverOldEmptyList() {
1047         // this tests the issue where we replace an empty list with another. As
1048         // both empty lists are equal, we are ensuring that the listeners update
1049         // to the new list.
1050         ObservableList&lt;String&gt; firstEmptyList = FXCollections.observableArrayList();
1051         ObservableList&lt;String&gt; newEmptyList = FXCollections.observableArrayList();
1052 
1053         ListSpinnerValueFactory valueFactory = new ListSpinnerValueFactory(firstEmptyList);
1054         Spinner listSpinner = new Spinner(valueFactory);
1055 
1056         valueFactory.setItems(newEmptyList);
1057         assertNull(listSpinner.getValue());
1058 
1059         newEmptyList.addAll(&quot;newString1&quot;, &quot;newString2&quot;, &quot;newString3&quot;);
1060         assertEquals(&quot;newString1&quot;, listSpinner.getValue());
1061     }
1062 
1063 
1064 
1065     /***************************************************************************
1066      *                                                                         *
1067      * LocalDateSpinnerValueFactory tests                                      *
1068      *                                                                         *
1069      **************************************************************************/
1070 
1071     private LocalDate nowPlusDays(int days) {
1072         return LocalDate.now().plus(days, ChronoUnit.DAYS);
1073     }
1074 
1075     @Test public void localDateSpinner_testIncrement_oneStep() {
1076         localDateValueFactory.increment(1);
1077         assertEquals(nowPlusDays(1), localDateValueFactory.getValue());
1078     }
1079 
1080     @Test public void localDateSpinner_testIncrement_twoSteps() {
1081         localDateValueFactory.increment(2);
1082         assertEquals(nowPlusDays(2), localDateValueFactory.getValue());
1083     }
1084 
1085     @Test public void localDateSpinner_testIncrement_manyCalls() {
1086         for (int i = 0; i &lt; 100; i++) {
1087             localDateValueFactory.increment(1);
1088         }
1089         assertEquals(nowPlusDays(10), localDateValueFactory.getValue());
1090     }
1091 
1092     @Test public void localDateSpinner_testIncrement_bigStepPastMaximum() {
1093         localDateValueFactory.increment(1000);
1094         assertEquals(nowPlusDays(10), localDateValueFactory.getValue());
1095     }
1096 
1097     @Test public void localDateSpinner_testDecrement_oneStep() {
1098         localDateValueFactory.decrement(1);
1099         assertEquals(nowPlusDays(-1), localDateValueFactory.getValue());
1100     }
1101 
1102     @Test public void localDateSpinner_testDecrement_twoSteps() {
1103         localDateValueFactory.decrement(2);
1104         assertEquals(nowPlusDays(-2), localDateValueFactory.getValue());
1105     }
1106 
1107     @Test public void localDateSpinner_testDecrement_manyCalls() {
1108         for (int i = 0; i &lt; 100; i++) {
1109             localDateValueFactory.decrement(1);
1110         }
1111         assertEquals(nowPlusDays(-10), localDateValueFactory.getValue());
1112     }
1113 
1114     @Test public void localDateSpinner_testDecrement_bigStepPastMinimum() {
1115         localDateValueFactory.decrement(1000);
1116         assertEquals(nowPlusDays(-10), localDateValueFactory.getValue());
1117     }
1118 
1119     @Test public void localDateSpinner_testWrapAround_increment_oneStep() {
1120         localDateValueFactory.setWrapAround(true);
1121         localDateValueFactory.setValue(nowPlusDays(7));
1122         localDateValueFactory.increment(1); // nowPlusDays(8)
1123         localDateValueFactory.increment(1); // nowPlusDays(9)
1124         localDateValueFactory.increment(1); // nowPlusDays(10)
1125         localDateValueFactory.increment(1); // nowPlusDays(-10)
1126         localDateValueFactory.increment(1); // nowPlusDays(-9)
1127         localDateValueFactory.increment(1); // nowPlusDays(-8)
1128         localDateValueFactory.increment(1); // nowPlusDays(-7)
1129         assertEquals(nowPlusDays(-7), localDateValueFactory.getValue());
1130     }
1131 
1132     @Test public void localDateSpinner_testWrapAround_increment_twoSteps() {
1133         localDateValueFactory.setWrapAround(true);
1134         localDateValueFactory.setValue(nowPlusDays(7));
1135         localDateValueFactory.increment(2); // nowPlusDays(9)
1136         localDateValueFactory.increment(2); // nowPlusDays(-10)
1137         localDateValueFactory.increment(2); // nowPlusDays(-8)
1138         localDateValueFactory.increment(2); // nowPlusDays(-6)
1139         assertEquals(nowPlusDays(-6), localDateValueFactory.getValue());
1140     }
1141 
1142     @Test public void localDateSpinner_testWrapAround_decrement_oneStep() {
1143         localDateValueFactory.setWrapAround(true);
1144         localDateValueFactory.setValue(nowPlusDays(-8));
1145         localDateValueFactory.decrement(1); // nowPlusDays(-9)
1146         localDateValueFactory.decrement(1); // nowPlusDays(-10)
1147         localDateValueFactory.decrement(1); // nowPlusDays(10)
1148         localDateValueFactory.decrement(1); // nowPlusDays(9)
1149         localDateValueFactory.decrement(1); // nowPlusDays(8)
1150         localDateValueFactory.decrement(1); // nowPlusDays(7)
1151         localDateValueFactory.decrement(1); // nowPlusDays(6)
1152         assertEquals(nowPlusDays(6), localDateValueFactory.getValue());
1153     }
1154 
1155     @Test public void localDateSpinner_testWrapAround_decrement_twoSteps() {
1156         localDateValueFactory.setWrapAround(true);
1157         localDateValueFactory.setValue(nowPlusDays(-8));
1158         localDateValueFactory.decrement(2); // nowPlusDays(-10)
1159         localDateValueFactory.decrement(2); // nowPlusDays(9)
1160         localDateValueFactory.decrement(2); // nowPlusDays(7)
1161         localDateValueFactory.decrement(2); // nowPlusDays(6)
1162         assertEquals(nowPlusDays(6), localDateValueFactory.getValue());
1163     }
1164 
1165     @Test public void localDateSpinner_assertDefaultConverterIsNonNull() {
1166         assertNotNull(localDateValueFactory.getConverter());
1167     }
1168 
1169     @Test public void localDateSpinner_testToString_valueInRange() {
1170         assertEquals(&quot;2014-06-27&quot;, localDateValueFactory.getConverter().toString(LocalDate.of(2014, 6, 27)));
1171     }
1172 
1173     @Test public void localDateSpinner_testToString_valueOutOfRange() {
1174         assertEquals(&quot;2024-06-27&quot;, localDateValueFactory.getConverter().toString(LocalDate.of(2024, 6, 27)));
1175     }
1176 
1177     @Test public void localDateSpinner_testFromString_valueInRange() {
1178         assertEquals(LocalDate.of(2014, 6, 27), localDateValueFactory.getConverter().fromString(&quot;2014-06-27&quot;));
1179     }
1180 
1181     @Test public void localDateSpinner_testFromString_valueOutOfRange() {
1182         assertEquals(LocalDate.of(2024, 6, 27), localDateValueFactory.getConverter().fromString(&quot;2024-06-27&quot;));
1183     }
1184 
1185     @Test public void localDateSpinner_testSetMin_doesNotChangeSpinnerValueWhenMinIsLessThanCurrentValue() {
1186         LocalDate newValue = LocalDate.now();
1187         localDateValueFactory.setValue(newValue);
1188         assertEquals(newValue, localDateSpinner.getValue());
1189         SpinnerValueFactoryShim.LocalDate_setMin(localDateValueFactory, nowPlusDays(-3));
1190         assertEquals(newValue, localDateSpinner.getValue());
1191     }
1192 
1193     @Test public void localDateSpinner_testSetMin_changesSpinnerValueWhenMinIsGreaterThanCurrentValue() {
1194         LocalDate newValue = LocalDate.now();
1195         localDateValueFactory.setValue(newValue);
1196         assertEquals(newValue, localDateSpinner.getValue());
1197 
1198         LocalDate twoDaysFromNow = nowPlusDays(2);
1199         SpinnerValueFactoryShim.LocalDate_setMin(localDateValueFactory, twoDaysFromNow);
1200         assertEquals(twoDaysFromNow, localDateSpinner.getValue());
1201     }
1202 
1203     @Test public void localDateSpinner_testSetMin_ensureThatMinCanNotExceedMax() {
1204         assertEquals(nowPlusDays(-10), SpinnerValueFactoryShim.LocalDate_getMin(localDateValueFactory));
1205         assertEquals(nowPlusDays(10), SpinnerValueFactoryShim.LocalDate_getMax(localDateValueFactory));
1206         SpinnerValueFactoryShim.LocalDate_setMin(localDateValueFactory, nowPlusDays(20));
1207         assertEquals(nowPlusDays(10), SpinnerValueFactoryShim.LocalDate_getMax(localDateValueFactory));
1208     }
1209 
1210     @Test public void localDateSpinner_testSetMin_ensureThatMinCanEqualMax() {
1211         assertEquals(nowPlusDays(-10), SpinnerValueFactoryShim.LocalDate_getMin(localDateValueFactory));
1212         assertEquals(nowPlusDays(10), SpinnerValueFactoryShim.LocalDate_getMax(localDateValueFactory));
1213         SpinnerValueFactoryShim.LocalDate_setMin(localDateValueFactory, nowPlusDays(10));
1214         assertEquals(nowPlusDays(10), SpinnerValueFactoryShim.LocalDate_getMax(localDateValueFactory));
1215     }
1216 
1217     @Test public void localDateSpinner_testSetMax_doesNotChangeSpinnerValueWhenMaxIsGreaterThanCurrentValue() {
1218         LocalDate newValue = LocalDate.now();
1219         localDateValueFactory.setValue(newValue);
1220         assertEquals(newValue, localDateSpinner.getValue());
1221         SpinnerValueFactoryShim.LocalDate_setMax(localDateValueFactory, nowPlusDays(2));
1222         assertEquals(newValue, localDateSpinner.getValue());
1223     }
1224 
1225     @Test public void localDateSpinner_testSetMax_changesSpinnerValueWhenMaxIsLessThanCurrentValue() {
1226         LocalDate newValue = nowPlusDays(4);
1227         localDateValueFactory.setValue(newValue);
1228         assertEquals(newValue, localDateSpinner.getValue());
1229 
1230         LocalDate twoDays = nowPlusDays(2);
1231         SpinnerValueFactoryShim.LocalDate_setMax(localDateValueFactory, twoDays);
1232         assertEquals(twoDays, localDateSpinner.getValue());
1233     }
1234 
1235     @Test public void localDateSpinner_testSetMax_ensureThatMaxCanNotGoLessThanMin() {
1236         SpinnerValueFactoryShim.LocalDate_setMin(localDateValueFactory, nowPlusDays(5));
1237         assertEquals(nowPlusDays(5), SpinnerValueFactoryShim.LocalDate_getMin(localDateValueFactory));
1238         assertEquals(nowPlusDays(10), SpinnerValueFactoryShim.LocalDate_getMax(localDateValueFactory));
1239         SpinnerValueFactoryShim.LocalDate_setMax(localDateValueFactory, nowPlusDays(2));
1240         assertEquals(nowPlusDays(5), SpinnerValueFactoryShim.LocalDate_getMax(localDateValueFactory));
1241     }
1242 
1243     @Test public void localDateSpinner_testSetMax_ensureThatMaxCanEqualMin() {
1244         LocalDate twoDays = nowPlusDays(2);
1245         SpinnerValueFactoryShim.LocalDate_setMin(localDateValueFactory, twoDays);
1246         assertEquals(twoDays, SpinnerValueFactoryShim.LocalDate_getMin(localDateValueFactory));
1247         assertEquals(nowPlusDays(10), SpinnerValueFactoryShim.LocalDate_getMax(localDateValueFactory));
1248         SpinnerValueFactoryShim.LocalDate_setMax(localDateValueFactory, twoDays);
1249         assertEquals(twoDays, SpinnerValueFactoryShim.LocalDate_getMax(localDateValueFactory));
1250     }
1251 
1252     @Test public void localDateSpinner_testSetValue_canNotExceedMax() {
1253         assertEquals(nowPlusDays(-10), SpinnerValueFactoryShim.LocalDate_getMin(localDateValueFactory));
1254         assertEquals(nowPlusDays(10), SpinnerValueFactoryShim.LocalDate_getMax(localDateValueFactory));
1255         localDateValueFactory.setValue(nowPlusDays(50));
1256         assertEquals(nowPlusDays(10), localDateSpinner.getValue());
1257     }
1258 
1259     @Test public void localDateSpinner_testSetValue_canNotExceedMin() {
1260         assertEquals(nowPlusDays(-10), SpinnerValueFactoryShim.LocalDate_getMin(localDateValueFactory));
1261         assertEquals(nowPlusDays(10), SpinnerValueFactoryShim.LocalDate_getMax(localDateValueFactory));
1262         localDateValueFactory.setValue(nowPlusDays(-50));
1263         assertEquals(nowPlusDays(-10), localDateSpinner.getValue());
1264     }
1265 
1266 
1267 
1268     /***************************************************************************
1269      *                                                                         *
1270      * LocalTimeSpinnerValueFactory tests                                      *
1271      *                                                                         *
1272      **************************************************************************/
1273 
1274     private LocalTime nowPlusHours(int hours) {
1275         return LocalTime.now().plus(hours, ChronoUnit.HOURS);
1276     }
1277 
1278     private void assertTimeEquals(LocalTime expected, LocalTime actual) {
1279         // just compare hours, minutes and seconds
1280         assertEquals(expected.truncatedTo(ChronoUnit.MINUTES), actual.truncatedTo(ChronoUnit.MINUTES));
1281     }
1282 
1283     @Ignore
1284     @Test public void localTimeSpinner_testIncrement_oneStep() {
1285         localTimeValueFactory.increment(1);
1286         assertTimeEquals(nowPlusHours(1), localTimeValueFactory.getValue());
1287     }
1288 
1289     @Ignore
1290     @Test public void localTimeSpinner_testIncrement_twoSteps() {
1291         localTimeValueFactory.increment(2);
1292         assertTimeEquals(nowPlusHours(2), localTimeValueFactory.getValue());
1293     }
1294 
1295     @Ignore
1296     @Test public void localTimeSpinner_testIncrement_manyCalls() {
1297         for (int i = 0; i &lt; 100; i++) {
1298             localTimeValueFactory.increment(1);
1299         }
1300         assertTimeEquals(LocalTime.MAX, localTimeValueFactory.getValue());
1301     }
1302 
1303     @Ignore
1304     @Test public void localTimeSpinner_testIncrement_bigStepPastMaximum() {
1305         localTimeValueFactory.increment(100000);
1306         assertTimeEquals(LocalTime.MAX, localTimeValueFactory.getValue());
1307     }
1308 
1309     @Ignore
1310     @Test public void localTimeSpinner_testDecrement_oneStep() {
1311         localTimeValueFactory.decrement(1);
1312         assertTimeEquals(nowPlusHours(-1), localTimeValueFactory.getValue());
1313     }
1314 
1315     @Ignore
1316     @Test public void localTimeSpinner_testDecrement_twoSteps() {
1317         localTimeValueFactory.decrement(2);
1318         assertTimeEquals(nowPlusHours(-2), localTimeValueFactory.getValue());
1319     }
1320 
1321     @Ignore
1322     @Test public void localTimeSpinner_testDecrement_manyCalls() {
1323         for (int i = 0; i &lt; 100; i++) {
1324             localTimeValueFactory.decrement(1);
1325         }
1326         assertTimeEquals(LocalTime.MIN, localTimeValueFactory.getValue());
1327     }
1328 
1329     @Ignore
1330     @Test public void localTimeSpinner_testDecrement_bigStepPastMinimum() {
1331         localTimeValueFactory.decrement(100000);
1332         assertTimeEquals(LocalTime.MIN, localTimeValueFactory.getValue());
1333     }
1334 
1335     @Ignore
1336     @Test public void localTimeSpinner_testWrapAround_increment_oneStep() {
1337         localTimeValueFactory.setWrapAround(true);
1338 
1339         LocalTime six_pm = LocalTime.of(18,32);
1340         localTimeValueFactory.setValue(six_pm);
1341         localTimeValueFactory.increment(1); // 19:32
1342         localTimeValueFactory.increment(1); // 20:32
1343         localTimeValueFactory.increment(1); // 21:32
1344         localTimeValueFactory.increment(1); // 22:32
1345         localTimeValueFactory.increment(1); // 23:32
1346         localTimeValueFactory.increment(1); // 00:32
1347         localTimeValueFactory.increment(1); // 01:32
1348         assertTimeEquals(LocalTime.of(01,32), localTimeValueFactory.getValue());
1349     }
1350 
1351     @Ignore
1352     @Test public void localTimeSpinner_testWrapAround_increment_twoSteps() {
1353         localTimeValueFactory.setWrapAround(true);
1354 
1355         LocalTime six_pm = LocalTime.of(18,32);
1356         localTimeValueFactory.setValue(six_pm);
1357         localTimeValueFactory.increment(2); // 20:32
1358         localTimeValueFactory.increment(2); // 22:32
1359         localTimeValueFactory.increment(2); // 00:32
1360         localTimeValueFactory.increment(2); // 02:32
1361         assertTimeEquals(LocalTime.of(02,32), localTimeValueFactory.getValue());
1362     }
1363 
1364     @Test public void localTimeSpinner_testWrapAround_decrement_oneStep() {
1365         localTimeValueFactory.setWrapAround(true);
1366 
1367         LocalTime six_am = LocalTime.of(06,32);
1368         localTimeValueFactory.setValue(six_am);
1369         localTimeValueFactory.decrement(1); // 05:32
1370         localTimeValueFactory.decrement(1); // 04:32
1371         localTimeValueFactory.decrement(1); // 03:32
1372         localTimeValueFactory.decrement(1); // 02:32
1373         localTimeValueFactory.decrement(1); // 01:32
1374         localTimeValueFactory.decrement(1); // 00:32
1375         localTimeValueFactory.decrement(1); // 23:32
1376         assertTimeEquals(LocalTime.of(23,32), localTimeValueFactory.getValue());
1377     }
1378 
1379     @Ignore
1380     @Test public void localTimeSpinner_testWrapAround_decrement_twoSteps() {
1381         localTimeValueFactory.setWrapAround(true);
1382 
1383         LocalTime six_am = LocalTime.of(06,32);
1384         localTimeValueFactory.setValue(six_am);
1385         localTimeValueFactory.decrement(2); // 04:32
1386         localTimeValueFactory.decrement(2); // 02:32
1387         localTimeValueFactory.decrement(2); // 00:32
1388         localTimeValueFactory.decrement(2); // 22:32
1389         assertTimeEquals(LocalTime.of(22,32), localTimeValueFactory.getValue());
1390     }
1391 
1392     @Ignore
1393     @Test public void localTimeSpinner_assertDefaultConverterIsNonNull() {
1394         assertNotNull(localTimeValueFactory.getConverter());
1395     }
1396 
1397     @Ignore(&quot;Not safe when run early in the morning - needs refining when time permits&quot;)
1398     @Test public void localTimeSpinner_testSetMin_doesNotChangeSpinnerValueWhenMinIsLessThanCurrentValue() {
1399         LocalTime newValue = LocalTime.now();
1400         localTimeValueFactory.setValue(newValue);
1401         assertTimeEquals(newValue, localTimeSpinner.getValue());
1402         SpinnerValueFactoryShim.LocalTime_setMin(localTimeValueFactory, nowPlusHours(-3));
1403         assertTimeEquals(newValue, localTimeSpinner.getValue());
1404     }
1405 
1406     @Ignore(&quot;Not safe when late at night - needs refining when time permits&quot;)
1407     @Test public void localTimeSpinner_testSetMin_changesSpinnerValueWhenMinIsGreaterThanCurrentValue() {
1408         LocalTime newValue = LocalTime.now();
1409         localTimeValueFactory.setValue(newValue);
1410         assertTimeEquals(newValue, localTimeSpinner.getValue());
1411 
1412         LocalTime twoDaysFromNow = nowPlusHours(2);
1413         SpinnerValueFactoryShim.LocalTime_setMin(localTimeValueFactory, twoDaysFromNow);
1414         assertTimeEquals(twoDaysFromNow, localTimeSpinner.getValue());
1415     }
1416 
1417     @Test public void localTimeSpinner_testSetMin_ensureThatMinCanEqualMax() {
1418         assertTimeEquals(LocalTime.MIN, SpinnerValueFactoryShim.LocalTime_getMin(localTimeValueFactory));
1419         assertTimeEquals(LocalTime.MAX, SpinnerValueFactoryShim.LocalTime_getMax(localTimeValueFactory));
1420         SpinnerValueFactoryShim.LocalTime_setMin(localTimeValueFactory, LocalTime.MAX);
1421         assertTimeEquals(LocalTime.MAX, SpinnerValueFactoryShim.LocalTime_getMax(localTimeValueFactory));
1422     }
1423 
1424     @Ignore
1425     @Test public void localTimeSpinner_testSetMax_doesNotChangeSpinnerValueWhenMaxIsGreaterThanCurrentValue() {
1426         LocalTime newValue = LocalTime.now();
1427         localTimeValueFactory.setValue(newValue);
1428         assertTimeEquals(newValue, localTimeSpinner.getValue());
1429         SpinnerValueFactoryShim.LocalTime_setMax(localTimeValueFactory, nowPlusHours(2));
1430         assertTimeEquals(newValue, localTimeSpinner.getValue());
1431     }
1432 
1433     @Ignore
1434     @Test public void localTimeSpinner_testSetMax_changesSpinnerValueWhenMaxIsLessThanCurrentValue() {
1435         LocalTime newValue = nowPlusHours(4);
1436         localTimeValueFactory.setValue(newValue);
1437         assertTimeEquals(newValue, localTimeSpinner.getValue());
1438 
1439         LocalTime twoDays = nowPlusHours(2);
1440         SpinnerValueFactoryShim.LocalTime_setMax(localTimeValueFactory, twoDays);
1441         assertTimeEquals(twoDays, localTimeSpinner.getValue());
1442     }
1443 
1444     @Ignore
1445     @Test public void localTimeSpinner_testSetMax_ensureThatMaxCanNotGoLessThanMin() {
1446         SpinnerValueFactoryShim.LocalTime_setMin(localTimeValueFactory, nowPlusHours(5));
1447         assertTimeEquals(nowPlusHours(5), SpinnerValueFactoryShim.LocalTime_getMax(localTimeValueFactory));
1448         assertTimeEquals(LocalTime.MAX, SpinnerValueFactoryShim.LocalTime_getMax(localTimeValueFactory));
1449         SpinnerValueFactoryShim.LocalTime_setMax(localTimeValueFactory, nowPlusHours(2));
1450         assertTimeEquals(nowPlusHours(5), SpinnerValueFactoryShim.LocalTime_getMax(localTimeValueFactory));
1451     }
1452 
1453     @Ignore
1454     @Test public void localTimeSpinner_testSetMax_ensureThatMaxCanEqualMin() {
1455         LocalTime twoDays = nowPlusHours(2);
1456         SpinnerValueFactoryShim.LocalTime_setMin(localTimeValueFactory, twoDays);
1457         assertTimeEquals(twoDays, SpinnerValueFactoryShim.LocalTime_getMax(localTimeValueFactory));
1458         assertTimeEquals(LocalTime.MAX, SpinnerValueFactoryShim.LocalTime_getMax(localTimeValueFactory));
1459         SpinnerValueFactoryShim.LocalTime_setMax(localTimeValueFactory, twoDays);
1460         assertTimeEquals(twoDays, SpinnerValueFactoryShim.LocalTime_getMax(localTimeValueFactory));
1461     }
1462 
1463 
1464     /***************************************************************************
1465      *                                                                         *
1466      * Tests for bugs                                                          *
1467      *                                                                         *
1468      **************************************************************************/
1469 
1470     @Test public void test_rt_39655_decrement() {
1471         assertEquals(5, (int) intSpinner.getValue());
1472         intSpinner.setEditable(true);
1473         intSpinner.getEditor().setText(&quot;7&quot;);
1474         intSpinner.decrement();
1475         assertEquals(6, (int) intSpinner.getValue());
1476     }
1477 
1478     @Test public void test_rt_39655_increment() {
1479         assertEquals(5, (int) intSpinner.getValue());
1480         intSpinner.setEditable(true);
1481         intSpinner.getEditor().setText(&quot;7&quot;);
1482         intSpinner.increment();
1483         assertEquals(8, (int) intSpinner.getValue());
1484     }
1485 
1486     @Test public void test_jdk_8150962() {
1487         Spinner&lt;Double&gt; spinner = new Spinner&lt;&gt;(-100, 100, 0, 0.5);
1488         spinner.getValueFactory().setValue(null);
1489         assertNull(spinner.getValue());
1490     }
1491 
1492     @Test public void test_jdk_8150946_testCommit_valid() {
1493         Spinner&lt;Double&gt; spinner = new Spinner&lt;&gt;(-100, 100, 0, 0.5);
1494         spinner.setEditable(true);
1495         assertEquals(0.0, spinner.getValue());
1496         spinner.getEditor().setText(&quot;2.5&quot;);
1497         spinner.commitValue();
1498         assertEquals(2.5, spinner.getValue());
1499     }
1500 
1501     @Test public void test_jdk_8150946_testCommit_invalid_outOfRange() {
1502         Spinner&lt;Double&gt; spinner = new Spinner&lt;&gt;(-100, 100, 0, 0.5);
1503         spinner.setEditable(true);
1504         assertEquals(0.0, spinner.getValue());
1505         spinner.getEditor().setText(&quot;2500&quot;);
1506         spinner.commitValue();
1507         assertEquals(100.0, spinner.getValue());
1508     }
1509 
1510     @Test(expected = RuntimeException.class)
1511     public void test_jdk_8150946_testCommit_invalid_wrongType() {
1512         Spinner&lt;Double&gt; spinner = new Spinner&lt;&gt;(-100, 100, 0, 0.5);
1513         spinner.setEditable(true);
1514         assertEquals(0.0, spinner.getValue());
1515         spinner.getEditor().setText(&quot;Hello, World!&quot;);
1516         spinner.commitValue();
1517         assertEquals(0.0, spinner.getValue());
1518     }
1519 
1520     @Test public void test_jdk_8150946_testCancel() {
1521         Spinner&lt;Double&gt; spinner = new Spinner&lt;&gt;(-100, 100, 2.5, 0.5);
1522         spinner.setEditable(true);
1523         assertEquals(2.5, spinner.getValue());
1524         assertEquals(&quot;2.5&quot;, spinner.getEditor().getText());
1525         spinner.getEditor().setText(&quot;3.5&quot;);
1526         assertEquals(2.5, spinner.getValue());
1527         spinner.cancelEdit();
1528         assertEquals(2.5, spinner.getValue());
1529         assertEquals(&quot;2.5&quot;, spinner.getEditor().getText());
1530     }
1531 
1532     // Test for JDK-8193311
1533     boolean enterDefaultPass = false;
1534     boolean escapeCancelPass = false;
1535     @Test public void testEnterEscapeKeysWithDefaultCancelButtons() {
1536         Toolkit tk = (StubToolkit)Toolkit.getToolkit();
1537         VBox root = new VBox();
1538         Scene scene = new Scene(root);
1539         Stage stage = new Stage();
1540         stage.setScene(scene);
1541         stage.setWidth(200);
1542         stage.setHeight(200);
1543 
1544         intSpinner.setEditable(true);
1545 
1546         Button defaultButton = new Button(&quot;OK&quot;);
1547         defaultButton.setOnAction(arg0 -&gt; { enterDefaultPass = true; });
1548         defaultButton.setDefaultButton(true);
1549 
1550         Button cancelButton = new Button(&quot;Cancel&quot;);
1551         cancelButton.setOnAction(arg0 -&gt; { escapeCancelPass = true; });
1552         cancelButton.setCancelButton(true);
1553 
1554         root.getChildren().addAll(intSpinner, defaultButton, cancelButton);
1555         stage.show();
1556         intSpinner.requestFocus();
1557         tk.firePulse();
1558 
1559         KeyEventFirer keyboard = new KeyEventFirer(intSpinner);
1560         keyboard.doKeyPress(KeyCode.ENTER);
1561         keyboard.doKeyPress(KeyCode.ESCAPE);
1562         tk.firePulse();
1563 
1564         if (!enterDefaultPass || !escapeCancelPass) {
1565             stage.hide();
1566         }
1567 
1568         String defMsg = &quot;OnAction EventHandler of the default &#39;OK&#39; &quot; +
1569             &quot;button should get invoked on ENTER key press.&quot;;
1570         String canMsg = &quot;OnAction EventHandler of the cancel &#39;Cancel&#39; &quot; +
1571             &quot;button should get invoked on ESCAPE key press.&quot;;
1572 
1573         assertTrue(defMsg, enterDefaultPass);
1574         assertTrue(canMsg, escapeCancelPass);
1575 
1576         // Same test with non editable spinner.
1577         intSpinner.setEditable(false);
1578         enterDefaultPass = false;
1579         escapeCancelPass = false;
1580         keyboard.doKeyPress(KeyCode.ENTER);
1581         keyboard.doKeyPress(KeyCode.ESCAPE);
1582         tk.firePulse();
1583         stage.hide();
1584 
1585         assertTrue(defMsg, enterDefaultPass);
1586         assertTrue(canMsg, escapeCancelPass);
1587     }
1588 
1589     @Test public void spinnerDelayTest() {
1590         Spinner&lt;Double&gt; spinner = new Spinner&lt;&gt;(-100, 100, 2.5, 0.5);
1591 
1592         spinner.setInitialDelay(null);
1593         assertEquals(300.0, spinner.getInitialDelay().toMillis(), 0.001);
1594         spinner.setInitialDelay(new Duration(500));
1595         assertEquals(500.0, spinner.getInitialDelay().toMillis(), 0.001);
1596 
1597         spinner.setRepeatDelay(null);
1598         assertEquals(60.0, spinner.getRepeatDelay().toMillis(), 0.001);
1599         spinner.setRepeatDelay(new Duration(200));
1600         assertEquals(200.0, spinner.getRepeatDelay().toMillis(), 0.001);
1601 
1602         spinner.setStyle(&quot;-fx-initial-delay: 400ms; -fx-repeat-delay: 100ms&quot;);
1603         FlowPane root = new FlowPane();
1604         root.getChildren().addAll(spinner);
1605         Scene scene = new Scene(root, 150, 150);
1606         scene.getRoot().applyCss();
1607 
1608         assertEquals(400.0, spinner.getInitialDelay().toMillis(), 0.001);
1609         assertEquals(100.0, spinner.getRepeatDelay().toMillis(), 0.001);
1610     }
1611 
1612     // Test for JDK-8185937
1613     @Test public void testIncDecKeys() {
1614         Toolkit tk = (StubToolkit)Toolkit.getToolkit();
1615         VBox root = new VBox();
1616         Scene scene = new Scene(root);
1617         Stage stage = new Stage();
1618         stage.setScene(scene);
1619         stage.setWidth(200);
1620         stage.setHeight(200);
1621 
1622         Spinner&lt;Integer&gt; spinner = new Spinner&lt;&gt;(-100, 100, 0);
1623         spinner.setEditable(true);
1624         assertEquals(0, spinner.getValue().intValue());
1625 
1626         try {
1627             root.getChildren().addAll(spinner);
1628             stage.show();
1629             spinner.requestFocus();
1630             tk.firePulse();
1631 
1632             KeyEventFirer keyboard = new KeyEventFirer(spinner.getEditor());
1633             keyboard.doKeyPress(KeyCode.UP);
1634             tk.firePulse();
1635 
1636             assertEquals(1, spinner.getValue().intValue());
1637 
1638             keyboard.doKeyPress(KeyCode.DOWN);
1639             tk.firePulse();
1640 
1641             assertEquals(0, spinner.getValue().intValue());
1642         } finally {
1643             stage.hide();
1644         }
1645     }
1646 }
<a name="4" id="anc4"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="4" type="hidden" />
</body>
</html>