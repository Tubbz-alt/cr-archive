<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.media/src/main/native/jfxmedia/platform/osx/avf/AVFAudioSpectrumUnit.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AVFAudioSpectrumUnit.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="AVFMediaPlayer.mm.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/jfxmedia/platform/osx/avf/AVFAudioSpectrumUnit.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 64 
 65     // Parameter accessors
 66     virtual bool IsEnabled();
 67     virtual void SetEnabled(bool isEnabled);
 68 
 69     virtual void SetBands(int bands, CBandsHolder* holder);
 70     virtual size_t GetBands();
 71 
 72     virtual double GetInterval();
 73     virtual void SetInterval(double interval);
 74 
 75     virtual int GetThreshold();
 76     virtual void SetThreshold(int threshold);
 77 
 78     virtual void UpdateBands(int size, const float* magnitudes, const float* phases);
 79 
 80     void SetSampleRate(UInt32 rate);
 81     void SetChannels(UInt32 count);
 82     void SetMaxFrames(UInt32 maxFrames);
 83     void SetSpectrumCallbackProc(AVFSpectrumUnitCallbackProc proc, void *context);
<span class="line-removed"> 84     void SetFirstBufferDelivered(bool isFirstBufferDelivered);</span>
 85 
 86 private:
 87     AVFSpectrumUnitCallbackProc mSpectrumCallbackProc;
 88     void *mSpectrumCallbackContext;
 89     bool mEnabled;
 90 
 91     pthread_mutex_t mBandLock;      // prevent bands from disappearing while we&#39;re processing
 92     int mBandCount;
 93     CBandsHolder *mBands;
 94     double mUpdateInterval;
 95     Float32 mThreshold;
 96 
 97     AudioBufferList mMixBuffer;
 98     int mMixBufferFrameCapacity;    // number of frames that can currently be stored in mix buffer
 99 
100     // Audio parameters
101     UInt32 mSampleRate;
102     UInt32 mChannels;
103     UInt32 mMaxFrames;
104     UInt32 mSamplesPerInterval;
105 
106     bool mRebuildCrunch;
<span class="line-removed">107     bool mFirstBufferDelivered;</span>
108 
109     // GStreamer
110     GstElement *mSpectrumElement;
111     GstSpectrum *mSpectrum;
112 
113     void lockBands() {
114         pthread_mutex_lock(&amp;mBandLock);
115     }
116 
117     void unlockBands() {
118         pthread_mutex_unlock(&amp;mBandLock);
119     }
120 
121     void SetupSpectralProcessor();
122     void ReleaseSpectralProcessor();
123 };
124 
125 typedef std::shared_ptr&lt;AVFAudioSpectrumUnit&gt; AVFAudioSpectrumUnitPtr;
126 
127 #endif /* defined(__JFXMedia__AVFAudioSpectrumUnit__) */
</pre>
</td>
<td>
<hr />
<pre>
 64 
 65     // Parameter accessors
 66     virtual bool IsEnabled();
 67     virtual void SetEnabled(bool isEnabled);
 68 
 69     virtual void SetBands(int bands, CBandsHolder* holder);
 70     virtual size_t GetBands();
 71 
 72     virtual double GetInterval();
 73     virtual void SetInterval(double interval);
 74 
 75     virtual int GetThreshold();
 76     virtual void SetThreshold(int threshold);
 77 
 78     virtual void UpdateBands(int size, const float* magnitudes, const float* phases);
 79 
 80     void SetSampleRate(UInt32 rate);
 81     void SetChannels(UInt32 count);
 82     void SetMaxFrames(UInt32 maxFrames);
 83     void SetSpectrumCallbackProc(AVFSpectrumUnitCallbackProc proc, void *context);

 84 
 85 private:
 86     AVFSpectrumUnitCallbackProc mSpectrumCallbackProc;
 87     void *mSpectrumCallbackContext;
 88     bool mEnabled;
 89 
 90     pthread_mutex_t mBandLock;      // prevent bands from disappearing while we&#39;re processing
 91     int mBandCount;
 92     CBandsHolder *mBands;
 93     double mUpdateInterval;
 94     Float32 mThreshold;
 95 
 96     AudioBufferList mMixBuffer;
 97     int mMixBufferFrameCapacity;    // number of frames that can currently be stored in mix buffer
 98 
 99     // Audio parameters
100     UInt32 mSampleRate;
101     UInt32 mChannels;
102     UInt32 mMaxFrames;
103     UInt32 mSamplesPerInterval;
104 
105     bool mRebuildCrunch;

106 
107     // GStreamer
108     GstElement *mSpectrumElement;
109     GstSpectrum *mSpectrum;
110 
111     void lockBands() {
112         pthread_mutex_lock(&amp;mBandLock);
113     }
114 
115     void unlockBands() {
116         pthread_mutex_unlock(&amp;mBandLock);
117     }
118 
119     void SetupSpectralProcessor();
120     void ReleaseSpectralProcessor();
121 };
122 
123 typedef std::shared_ptr&lt;AVFAudioSpectrumUnit&gt; AVFAudioSpectrumUnitPtr;
124 
125 #endif /* defined(__JFXMedia__AVFAudioSpectrumUnit__) */
</pre>
</td>
</tr>
</table>
<center><a href="AVFAudioSpectrumUnit.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="AVFMediaPlayer.mm.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>