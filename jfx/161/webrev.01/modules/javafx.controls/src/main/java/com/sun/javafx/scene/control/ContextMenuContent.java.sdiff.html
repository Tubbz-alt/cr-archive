<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/main/java/com/sun/javafx/scene/control/ContextMenuContent.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/test/javafx/scene/control/ContextMenuTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.controls/src/main/java/com/sun/javafx/scene/control/ContextMenuContent.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2011, 2017, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 633                     final Menu menu = (Menu) item;
 634                     if (menu.isDisable()) return;
 635                     selectedBackground = ((MenuItemContainer)n);
 636 
 637                     // RT-15103
 638                     // if submenu for this menu is already showing then do nothing
 639                     // Menubar will process the right key and move to the next menu
 640                     if (openSubmenu == menu &amp;&amp; submenu != null &amp;&amp; submenu.isShowing()) {
 641                         return;
 642                     }
 643 
 644                     showMenu(menu);
 645                     ke.consume();
 646                 }
 647             }
 648         });
 649     }
 650 
 651     private void showMenu(Menu menu) {
 652         menu.show();





 653         // request focus on the first item of the submenu after it is shown
 654         ContextMenuContent cmContent = (ContextMenuContent)submenu.getSkin().getNode();
 655         if (cmContent != null) {
 656            if (cmContent.itemsContainer.getChildren().size() &gt; 0) {
 657                cmContent.itemsContainer.getChildren().get(0).requestFocus();
 658                cmContent.currentFocusedIndex = 0;
 659            } else {
 660                cmContent.requestFocus();
 661            }
 662         }
 663     }
 664 
 665     private void selectMenuItem() {
 666         getFocusedNode().ifPresent(n -&gt; {
 667             if (n instanceof MenuItemContainer) {
 668                 MenuItem item = ((MenuItemContainer)n).item;
 669                 if (item instanceof Menu) {
 670                     final Menu menu = (Menu) item;
 671                     if (openSubmenu != null) {
 672                         hideSubmenu();
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 633                     final Menu menu = (Menu) item;
 634                     if (menu.isDisable()) return;
 635                     selectedBackground = ((MenuItemContainer)n);
 636 
 637                     // RT-15103
 638                     // if submenu for this menu is already showing then do nothing
 639                     // Menubar will process the right key and move to the next menu
 640                     if (openSubmenu == menu &amp;&amp; submenu != null &amp;&amp; submenu.isShowing()) {
 641                         return;
 642                     }
 643 
 644                     showMenu(menu);
 645                     ke.consume();
 646                 }
 647             }
 648         });
 649     }
 650 
 651     private void showMenu(Menu menu) {
 652         menu.show();
<span class="line-added"> 653 </span>
<span class="line-added"> 654         if (submenu == null) {</span>
<span class="line-added"> 655             return;</span>
<span class="line-added"> 656         }</span>
<span class="line-added"> 657 </span>
 658         // request focus on the first item of the submenu after it is shown
 659         ContextMenuContent cmContent = (ContextMenuContent)submenu.getSkin().getNode();
 660         if (cmContent != null) {
 661            if (cmContent.itemsContainer.getChildren().size() &gt; 0) {
 662                cmContent.itemsContainer.getChildren().get(0).requestFocus();
 663                cmContent.currentFocusedIndex = 0;
 664            } else {
 665                cmContent.requestFocus();
 666            }
 667         }
 668     }
 669 
 670     private void selectMenuItem() {
 671         getFocusedNode().ifPresent(n -&gt; {
 672             if (n instanceof MenuItemContainer) {
 673                 MenuItem item = ((MenuItemContainer)n).item;
 674                 if (item instanceof Menu) {
 675                     final Menu menu = (Menu) item;
 676                     if (openSubmenu != null) {
 677                         hideSubmenu();
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/test/javafx/scene/control/ContextMenuTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>