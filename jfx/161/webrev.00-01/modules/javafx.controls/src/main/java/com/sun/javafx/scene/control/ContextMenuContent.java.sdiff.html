<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/main/java/com/sun/javafx/scene/control/ContextMenuContent.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/test/javafx/scene/control/ContextMenuTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.controls/src/main/java/com/sun/javafx/scene/control/ContextMenuContent.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2011, 2017, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 634                     if (menu.isDisable()) return;
 635                     selectedBackground = ((MenuItemContainer)n);
 636 
 637                     // RT-15103
 638                     // if submenu for this menu is already showing then do nothing
 639                     // Menubar will process the right key and move to the next menu
 640                     if (openSubmenu == menu &amp;&amp; submenu != null &amp;&amp; submenu.isShowing()) {
 641                         return;
 642                     }
 643 
 644                     showMenu(menu);
 645                     ke.consume();
 646                 }
 647             }
 648         });
 649     }
 650 
 651     private void showMenu(Menu menu) {
 652         menu.show();
 653 
<span class="line-modified"> 654         // if there is a submenu</span>
<span class="line-modified"> 655         if (submenu != null) {</span>
<span class="line-modified"> 656             // request focus on the first item of the submenu after it is shown</span>
<span class="line-modified"> 657             ContextMenuContent cmContent = (ContextMenuContent)submenu.getSkin().getNode();</span>
<span class="line-modified"> 658             if (cmContent != null) {</span>
<span class="line-modified"> 659                if (cmContent.itemsContainer.getChildren().size() &gt; 0) {</span>
<span class="line-modified"> 660                    cmContent.itemsContainer.getChildren().get(0).requestFocus();</span>
<span class="line-modified"> 661                    cmContent.currentFocusedIndex = 0;</span>
<span class="line-modified"> 662                } else {</span>
<span class="line-modified"> 663                    cmContent.requestFocus();</span>
<span class="line-modified"> 664                }</span>
<span class="line-modified"> 665             }</span>

 666         }
 667     }
 668 
 669     private void selectMenuItem() {
 670         getFocusedNode().ifPresent(n -&gt; {
 671             if (n instanceof MenuItemContainer) {
 672                 MenuItem item = ((MenuItemContainer)n).item;
 673                 if (item instanceof Menu) {
 674                     final Menu menu = (Menu) item;
 675                     if (openSubmenu != null) {
 676                         hideSubmenu();
 677                     }
 678                     if (menu.isDisable()) return;
 679                     selectedBackground = ((MenuItemContainer)n);
 680                     menu.show();
 681                 } else {
 682                     ((MenuItemContainer)n).doSelect();
 683                 }
 684             }
 685         });
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 634                     if (menu.isDisable()) return;
 635                     selectedBackground = ((MenuItemContainer)n);
 636 
 637                     // RT-15103
 638                     // if submenu for this menu is already showing then do nothing
 639                     // Menubar will process the right key and move to the next menu
 640                     if (openSubmenu == menu &amp;&amp; submenu != null &amp;&amp; submenu.isShowing()) {
 641                         return;
 642                     }
 643 
 644                     showMenu(menu);
 645                     ke.consume();
 646                 }
 647             }
 648         });
 649     }
 650 
 651     private void showMenu(Menu menu) {
 652         menu.show();
 653 
<span class="line-modified"> 654         if (submenu == null) {</span>
<span class="line-modified"> 655             return;</span>
<span class="line-modified"> 656         }</span>
<span class="line-modified"> 657 </span>
<span class="line-modified"> 658         // request focus on the first item of the submenu after it is shown</span>
<span class="line-modified"> 659         ContextMenuContent cmContent = (ContextMenuContent)submenu.getSkin().getNode();</span>
<span class="line-modified"> 660         if (cmContent != null) {</span>
<span class="line-modified"> 661            if (cmContent.itemsContainer.getChildren().size() &gt; 0) {</span>
<span class="line-modified"> 662                cmContent.itemsContainer.getChildren().get(0).requestFocus();</span>
<span class="line-modified"> 663                cmContent.currentFocusedIndex = 0;</span>
<span class="line-modified"> 664            } else {</span>
<span class="line-modified"> 665                cmContent.requestFocus();</span>
<span class="line-added"> 666            }</span>
 667         }
 668     }
 669 
 670     private void selectMenuItem() {
 671         getFocusedNode().ifPresent(n -&gt; {
 672             if (n instanceof MenuItemContainer) {
 673                 MenuItem item = ((MenuItemContainer)n).item;
 674                 if (item instanceof Menu) {
 675                     final Menu menu = (Menu) item;
 676                     if (openSubmenu != null) {
 677                         hideSubmenu();
 678                     }
 679                     if (menu.isDisable()) return;
 680                     selectedBackground = ((MenuItemContainer)n);
 681                     menu.show();
 682                 } else {
 683                     ((MenuItemContainer)n).doSelect();
 684                 }
 685             }
 686         });
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/test/javafx/scene/control/ContextMenuTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>