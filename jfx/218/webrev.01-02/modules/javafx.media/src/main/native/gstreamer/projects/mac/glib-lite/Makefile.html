<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.media/src/main/native/gstreamer/projects/mac/glib-lite/Makefile</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 #
  2 # MacOS glib-lite Makefile
  3 #
  4 
  5 BUILD_DIR = $(OUTPUT_DIR)/$(BUILD_TYPE)
  6 TARGET_DIRS = $(BUILD_DIR)
  7 
  8 SRCBASE_DIR = ../../../3rd_party/glib/
  9 LIBFFI_DIR = ../../../3rd_party/libffi
 10 OBJBASE_DIR = $(BUILD_DIR)/obj/glib-lite
 11 
 12 DIRLIST = glib \
 13 	  glib/libcharset/ \
 14 	  glib/gnulib/ \
 15 	  gobject/ \
 16 	  gthread/ \
 17 	  gmodule/
 18 
 19 TARGET_NAME = lib$(BASE_NAME).dylib
 20 TARGET = $(BUILD_DIR)/$(TARGET_NAME)
 21 
 22 CFLAGS += -fPIC \
 23          -Werror=implicit-function-declaration \
 24          -DG_DISABLE_CAST_CHECKS \
 25          -DGLIB_COMPILATION \
 26          -DGOBJECT_COMPILATION \
 27          -DLIBDIR=\&quot;/irrelevant/lib\&quot; \
 28          -DG_LOG_DOMAIN=\&quot;GLib\&quot; \
 29          -DGSTREAMER_LITE \
 30          -DG_DISABLE_DEPRECATED \
 31          -DG_DISABLE_ASSERT \
 32          -DLINK_SIZE=2 \
 33          -DMAX_NAME_SIZE=32 \
 34          -DMAX_NAME_COUNT=10000 \
 35          -DNEWLINE=-1 \
 36          -DPOSIX_MALLOC_THRESHOLD=10 \
 37          -DMATCH_LIMIT=10000000 \
 38          -DMATCH_LIMIT_RECURSION=10000000
 39 
 40 ifeq ($(BUILD_TYPE), Release)
 41     CFLAGS += -Os
 42 else
 43     CFLAGS += -O0 -g -Wall
 44 endif
 45 
 46 INCLUDES = -I$(SRCBASE_DIR) \
 47 	   -I$(SRCBASE_DIR)/glib \
 48 	   -I$(SRCBASE_DIR)/build/osx \
 49 	   -I$(LIBFFI_DIR)/include \
 50 	   -I$(LIBFFI_DIR)/include/mac/x64
 51 
 52 LDFLAGS += -Wl,-install_name,@rpath/$(TARGET_NAME) \
 53            -Wl,-framework \
 54            -Wl,CoreServices \
 55            -liconv \
 56            -L$(BUILD_DIR) -lffi
 57 
 58 C_SOURCES = glib/garray.c \
 59             glib/gasyncqueue.c \
 60             glib/gatomic.c \
 61             glib/gbacktrace.c \
 62             glib/gbase64.c \
 63             glib/gbytes.c \
 64             glib/gbookmarkfile.c \
 65             glib/gbitlock.c \
 66             glib/gcharset.c \
 67             glib/gchecksum.c \
 68             glib/gconvert.c \
 69             glib/gdataset.c \
 70             glib/gdate.c \
 71             glib/gdatetime.c \
 72             glib/gdir.c \
 73             glib/gerror.c \
 74             glib/genviron.c \
 75             glib/ghmac.c \
 76             glib/gfileutils.c \
 77             glib/ghash.c \
 78             glib/ghook.c \
 79             glib/giochannel.c \
 80             glib/giounix.c \
 81             glib/gkeyfile.c \
 82             glib/glib-init.c \
 83             glib/glib-private.c \
 84             glib/glist.c \
 85             glib/gmain.c \
 86             glib/gmappedfile.c \
 87             glib/gmarkup.c \
 88             glib/gmem.c \
 89             glib/gmessages.c \
 90             glib/ggettext.c \
 91             glib/gnode.c \
 92             glib/goption.c \
 93             glib/gpattern.c \
 94             glib/gpoll.c \
 95             glib/gprimes.c \
 96             glib/gprintf.c \
 97             glib/gqsort.c \
 98             glib/gquark.c \
 99             glib/gqueue.c \
100             glib/grand.c \
101             glib/grcbox.c \
102             glib/grefcount.c \
103             glib/gscanner.c \
104             glib/gsequence.c \
105             glib/gspawn.c \
106             glib/gshell.c \
107             glib/gslice.c \
108             glib/gslist.c \
109             glib/gstdio.c \
110             glib/gstrfuncs.c \
111             glib/gstring.c \
112             glib/gstringchunk.c \
113             glib/gtestutils.c \
114             glib/gthread.c \
115             glib/gthread-posix.c \
116             glib/gthreadpool.c \
117             glib/gtimer.c \
118             glib/gtimezone.c \
119             glib/gtrashstack.c \
120 	    glib/gtranslit.c \
121             glib/gtree.c \
122             glib/gunibreak.c \
123             glib/gunidecomp.c \
124             glib/guniprop.c \
125             glib/gurifuncs.c \
126             glib/gutf8.c \
127             glib/gutils.c \
128             glib/ghostutils.c \
129             glib/gvarianttype.c \
130             glib/gvariant.c \
131             glib/gvariant-core.c \
132             glib/gvariant-serialiser.c \
133             glib/gvarianttypeinfo.c \
134             glib/gwakeup.c \
135             glib/glib-unix.c \
136             glib/libcharset/localcharset.c \
137             glib/gnulib/asnprintf.c \
138             glib/gnulib/printf-args.c \
139             glib/gnulib/printf-parse.c \
140             glib/gnulib/printf.c \
141             glib/gnulib/vasnprintf.c \
142             gobject/gatomicarray.c \
143             gobject/gbinding.c \
144             gobject/gboxed.c \
145             gobject/gclosure.c \
146             gobject/genums.c \
147             gobject/gobject.c \
148             gobject/gparam.c \
149             gobject/gparamspecs.c \
150             gobject/gsignal.c \
151             gobject/gsourceclosure.c \
152             gobject/gtype.c \
153             gobject/gtypemodule.c \
154             gobject/gtypeplugin.c \
155             gobject/gvalue.c \
156             gobject/gvaluearray.c \
157             gobject/gvaluetransform.c \
158             gobject/gvaluetypes.c \
159             gobject/gmarshal.c \
160             gthread/gthread-impl.c \
161             gmodule/gmodule.c
162 
163 OBJ_DIRS = $(addprefix $(OBJBASE_DIR)/,$(DIRLIST))
164 OBJECTS  = $(patsubst %.c,$(OBJBASE_DIR)/%.o,$(C_SOURCES))
165 
166 .PHONY: default
167 
168 default: $(TARGET)
169 
170 $(OBJBASE_DIR)/%.o: $(SRCBASE_DIR)/%.c
171 	$(CC) $(CFLAGS) $(INCLUDES) -c $&lt; -o $@
172 
173 $(OBJECTS): | $(OBJ_DIRS) $(TARGET_DIRS)
174 
175 $(OBJ_DIRS):
176 	mkdir -p $(OBJ_DIRS)
177 
178 $(TARGET_DIRS):
179 	mkdir -p $(TARGET_DIRS)
180 
181 $(TARGET): $(OBJECTS)
182 	$(LINKER) -dynamiclib $(OBJECTS) $(LDFLAGS) -o $@
    </pre>
  </body>
</html>