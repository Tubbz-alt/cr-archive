<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/html/HTMLSummaryElement.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="HTMLStyleElement.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="HTMLSummaryElement.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/html/HTMLSummaryElement.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 85         return downcast&lt;HTMLDetailsElement&gt;(host);
 86     return nullptr;
 87 }
 88 
 89 bool HTMLSummaryElement::isActiveSummary() const
 90 {
 91     RefPtr&lt;HTMLDetailsElement&gt; details = detailsElement();
 92     if (!details)
 93         return false;
 94     return details-&gt;isActiveSummary(*this);
 95 }
 96 
 97 static bool isClickableControl(EventTarget* target)
 98 {
 99     if (!is&lt;Element&gt;(target))
100         return false;
101     auto&amp; element = downcast&lt;Element&gt;(*target);
102     return is&lt;HTMLFormControlElement&gt;(element) || is&lt;HTMLFormControlElement&gt;(element.shadowHost());
103 }
104 





105 bool HTMLSummaryElement::supportsFocus() const
106 {
107     return isActiveSummary();
108 }
109 
110 void HTMLSummaryElement::defaultEventHandler(Event&amp; event)
111 {
112     if (isActiveSummary() &amp;&amp; renderer()) {
113         if (event.type() == eventNames().DOMActivateEvent &amp;&amp; !isClickableControl(event.target())) {
114             if (RefPtr&lt;HTMLDetailsElement&gt; details = detailsElement())
115                 details-&gt;toggleOpen();
116             event.setDefaultHandled();
117             return;
118         }
119 
120         if (is&lt;KeyboardEvent&gt;(event)) {
121             KeyboardEvent&amp; keyboardEvent = downcast&lt;KeyboardEvent&gt;(event);
122             if (keyboardEvent.type() == eventNames().keydownEvent &amp;&amp; keyboardEvent.keyIdentifier() == &quot;U+0020&quot;) {
123                 setActive(true, true);
124                 // No setDefaultHandled() - IE dispatches a keypress in this case.
</pre>
</td>
<td>
<hr />
<pre>
 85         return downcast&lt;HTMLDetailsElement&gt;(host);
 86     return nullptr;
 87 }
 88 
 89 bool HTMLSummaryElement::isActiveSummary() const
 90 {
 91     RefPtr&lt;HTMLDetailsElement&gt; details = detailsElement();
 92     if (!details)
 93         return false;
 94     return details-&gt;isActiveSummary(*this);
 95 }
 96 
 97 static bool isClickableControl(EventTarget* target)
 98 {
 99     if (!is&lt;Element&gt;(target))
100         return false;
101     auto&amp; element = downcast&lt;Element&gt;(*target);
102     return is&lt;HTMLFormControlElement&gt;(element) || is&lt;HTMLFormControlElement&gt;(element.shadowHost());
103 }
104 
<span class="line-added">105 int HTMLSummaryElement::defaultTabIndex() const</span>
<span class="line-added">106 {</span>
<span class="line-added">107     return isActiveSummary() ? 0 : -1;</span>
<span class="line-added">108 }</span>
<span class="line-added">109 </span>
110 bool HTMLSummaryElement::supportsFocus() const
111 {
112     return isActiveSummary();
113 }
114 
115 void HTMLSummaryElement::defaultEventHandler(Event&amp; event)
116 {
117     if (isActiveSummary() &amp;&amp; renderer()) {
118         if (event.type() == eventNames().DOMActivateEvent &amp;&amp; !isClickableControl(event.target())) {
119             if (RefPtr&lt;HTMLDetailsElement&gt; details = detailsElement())
120                 details-&gt;toggleOpen();
121             event.setDefaultHandled();
122             return;
123         }
124 
125         if (is&lt;KeyboardEvent&gt;(event)) {
126             KeyboardEvent&amp; keyboardEvent = downcast&lt;KeyboardEvent&gt;(event);
127             if (keyboardEvent.type() == eventNames().keydownEvent &amp;&amp; keyboardEvent.keyIdentifier() == &quot;U+0020&quot;) {
128                 setActive(true, true);
129                 // No setDefaultHandled() - IE dispatches a keypress in this case.
</pre>
</td>
</tr>
</table>
<center><a href="HTMLStyleElement.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="HTMLSummaryElement.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>