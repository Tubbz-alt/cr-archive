<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/bindings/js/ScheduledAction.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ReadableStreamDefaultController.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="ScriptController.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/bindings/js/ScheduledAction.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 98,31 ***</span>
      CallData callData;
      CallType callType = getCallData(vm, m_function.get(), callData);
      if (callType == CallType::None)
          return;
  
<span class="line-modified">!     ExecState* exec = globalObject-&gt;globalExec();</span>
  
      MarkedArgumentBuffer arguments;
      for (auto&amp; argument : m_arguments)
          arguments.append(argument.get());
      if (UNLIKELY(arguments.hasOverflowed())) {
<span class="line-modified">!         throwOutOfMemoryError(exec, scope);</span>
          NakedPtr&lt;JSC::Exception&gt; exception = scope.exception();
<span class="line-modified">!         reportException(exec, exception);</span>
          return;
      }
  
<span class="line-modified">!     InspectorInstrumentationCookie cookie = JSExecState::instrumentFunctionCall(&amp;context, callType, callData);</span>
  
      NakedPtr&lt;JSC::Exception&gt; exception;
<span class="line-modified">!     JSExecState::profiledCall(exec, JSC::ProfilingReason::Other, m_function.get(), callType, callData, thisValue, arguments, exception);</span>
  
<span class="line-modified">!     InspectorInstrumentation::didCallFunction(cookie, &amp;context);</span>
  
      if (exception)
<span class="line-modified">!         reportException(exec, exception);</span>
  }
  
  void ScheduledAction::execute(Document&amp; document)
  {
      JSDOMWindow* window = toJSDOMWindow(document.frame(), m_isolatedWorld);
<span class="line-new-header">--- 98,31 ---</span>
      CallData callData;
      CallType callType = getCallData(vm, m_function.get(), callData);
      if (callType == CallType::None)
          return;
  
<span class="line-modified">!     JSGlobalObject* lexicalGlobalObject = globalObject;</span>
  
      MarkedArgumentBuffer arguments;
      for (auto&amp; argument : m_arguments)
          arguments.append(argument.get());
      if (UNLIKELY(arguments.hasOverflowed())) {
<span class="line-modified">!         throwOutOfMemoryError(lexicalGlobalObject, scope);</span>
          NakedPtr&lt;JSC::Exception&gt; exception = scope.exception();
<span class="line-modified">!         reportException(lexicalGlobalObject, exception);</span>
          return;
      }
  
<span class="line-modified">!     JSExecState::instrumentFunctionCall(&amp;context, callType, callData);</span>
  
      NakedPtr&lt;JSC::Exception&gt; exception;
<span class="line-modified">!     JSExecState::profiledCall(lexicalGlobalObject, JSC::ProfilingReason::Other, m_function.get(), callType, callData, thisValue, arguments, exception);</span>
  
<span class="line-modified">!     InspectorInstrumentation::didCallFunction(&amp;context);</span>
  
      if (exception)
<span class="line-modified">!         reportException(lexicalGlobalObject, exception);</span>
  }
  
  void ScheduledAction::execute(Document&amp; document)
  {
      JSDOMWindow* window = toJSDOMWindow(document.frame(), m_isolatedWorld);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 134,11 ***</span>
          return;
  
      if (m_function)
          executeFunctionInContext(window, window-&gt;proxy(), document);
      else
<span class="line-modified">!         frame-&gt;script().executeScriptInWorld(m_isolatedWorld, m_code);</span>
  }
  
  void ScheduledAction::execute(WorkerGlobalScope&amp; workerGlobalScope)
  {
      // In a Worker, the execution should always happen on a worker thread.
<span class="line-new-header">--- 134,11 ---</span>
          return;
  
      if (m_function)
          executeFunctionInContext(window, window-&gt;proxy(), document);
      else
<span class="line-modified">!         frame-&gt;script().executeScriptInWorldIgnoringException(m_isolatedWorld, m_code);</span>
  }
  
  void ScheduledAction::execute(WorkerGlobalScope&amp; workerGlobalScope)
  {
      // In a Worker, the execution should always happen on a worker thread.
</pre>
<center><a href="ReadableStreamDefaultController.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="ScriptController.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>