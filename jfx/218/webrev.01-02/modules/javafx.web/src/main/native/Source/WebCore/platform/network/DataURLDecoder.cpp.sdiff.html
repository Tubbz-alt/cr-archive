<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/network/DataURLDecoder.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="CookieRequestHeaderFieldProxy.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FormData.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/network/DataURLDecoder.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 26 #include &quot;config.h&quot;
 27 #include &quot;DataURLDecoder.h&quot;
 28 
 29 #include &quot;DecodeEscapeSequences.h&quot;
 30 #include &quot;HTTPParsers.h&quot;
 31 #include &quot;ParsedContentType.h&quot;
 32 #include &quot;SharedBuffer.h&quot;
 33 #include &quot;TextEncoding.h&quot;
 34 #include &lt;wtf/MainThread.h&gt;
 35 #include &lt;wtf/Optional.h&gt;
 36 #include &lt;wtf/RunLoop.h&gt;
 37 #include &lt;wtf/URL.h&gt;
 38 #include &lt;wtf/WorkQueue.h&gt;
 39 #include &lt;wtf/text/Base64.h&gt;
 40 
 41 namespace WebCore {
 42 namespace DataURLDecoder {
 43 
 44 static WorkQueue&amp; decodeQueue()
 45 {
<span class="line-modified"> 46     static auto&amp; queue = WorkQueue::create(&quot;org.webkit.DataURLDecoder&quot;).leakRef();</span>
 47     return queue;
 48 }
 49 
 50 static Result parseMediaType(const String&amp; mediaType)
 51 {
 52     if (Optional&lt;ParsedContentType&gt; parsedContentType = ParsedContentType::create(mediaType))
 53         return { parsedContentType-&gt;mimeType(), parsedContentType-&gt;charset(), parsedContentType-&gt;serialize(), nullptr };
 54     return { &quot;text/plain&quot;_s, &quot;US-ASCII&quot;_s, &quot;text/plain;charset=US-ASCII&quot;_s, nullptr };
 55 }
 56 
 57 struct DecodeTask {
 58     WTF_MAKE_FAST_ALLOCATED;
 59 public:
 60     DecodeTask(const String&amp; urlString, const ScheduleContext&amp; scheduleContext, DecodeCompletionHandler&amp;&amp; completionHandler)
 61         : urlString(urlString.isolatedCopy())
 62         , scheduleContext(scheduleContext)
 63         , completionHandler(WTFMove(completionHandler))
 64     {
 65     }
 66 
</pre>
</td>
<td>
<hr />
<pre>
 26 #include &quot;config.h&quot;
 27 #include &quot;DataURLDecoder.h&quot;
 28 
 29 #include &quot;DecodeEscapeSequences.h&quot;
 30 #include &quot;HTTPParsers.h&quot;
 31 #include &quot;ParsedContentType.h&quot;
 32 #include &quot;SharedBuffer.h&quot;
 33 #include &quot;TextEncoding.h&quot;
 34 #include &lt;wtf/MainThread.h&gt;
 35 #include &lt;wtf/Optional.h&gt;
 36 #include &lt;wtf/RunLoop.h&gt;
 37 #include &lt;wtf/URL.h&gt;
 38 #include &lt;wtf/WorkQueue.h&gt;
 39 #include &lt;wtf/text/Base64.h&gt;
 40 
 41 namespace WebCore {
 42 namespace DataURLDecoder {
 43 
 44 static WorkQueue&amp; decodeQueue()
 45 {
<span class="line-modified"> 46     static auto&amp; queue = WorkQueue::create(&quot;org.webkit.DataURLDecoder&quot;, WorkQueue::Type::Serial, WorkQueue::QOS::UserInitiated).leakRef();</span>
 47     return queue;
 48 }
 49 
 50 static Result parseMediaType(const String&amp; mediaType)
 51 {
 52     if (Optional&lt;ParsedContentType&gt; parsedContentType = ParsedContentType::create(mediaType))
 53         return { parsedContentType-&gt;mimeType(), parsedContentType-&gt;charset(), parsedContentType-&gt;serialize(), nullptr };
 54     return { &quot;text/plain&quot;_s, &quot;US-ASCII&quot;_s, &quot;text/plain;charset=US-ASCII&quot;_s, nullptr };
 55 }
 56 
 57 struct DecodeTask {
 58     WTF_MAKE_FAST_ALLOCATED;
 59 public:
 60     DecodeTask(const String&amp; urlString, const ScheduleContext&amp; scheduleContext, DecodeCompletionHandler&amp;&amp; completionHandler)
 61         : urlString(urlString.isolatedCopy())
 62         , scheduleContext(scheduleContext)
 63         , completionHandler(WTFMove(completionHandler))
 64     {
 65     }
 66 
</pre>
</td>
</tr>
</table>
<center><a href="CookieRequestHeaderFieldProxy.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FormData.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>