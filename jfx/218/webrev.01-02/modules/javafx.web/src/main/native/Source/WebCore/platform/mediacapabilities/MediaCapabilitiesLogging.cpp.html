<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WebCore/platform/mediacapabilities/MediaCapabilitiesLogging.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (C) 2019 Apple Inc. All rights reserved.
  3  *
  4  * Redistribution and use in source and binary forms, with or without
  5  * modification, are permitted provided that the following conditions
  6  * are met:
  7  * 1. Redistributions of source code must retain the above copyright
  8  *    notice, this list of conditions and the following disclaimer.
  9  * 2. Redistributions in binary form must reproduce the above copyright
 10  *    notice, this list of conditions and the following disclaimer in the
 11  *    documentation and/or other materials provided with the distribution.
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS&#39;&#39;
 14  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 15  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS
 17  * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 18  * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 19  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 20  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 21  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 22  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
 23  * THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #include &quot;config.h&quot;
 27 #include &quot;MediaCapabilitiesLogging.h&quot;
 28 
 29 #include &quot;AudioConfiguration.h&quot;
 30 #include &quot;JSColorGamut.h&quot;
 31 #include &quot;JSHdrMetadataType.h&quot;
 32 #include &quot;JSMediaDecodingType.h&quot;
 33 #include &quot;JSMediaEncodingType.h&quot;
 34 #include &quot;JSTransferFunction.h&quot;
 35 #include &quot;MediaCapabilitiesDecodingInfo.h&quot;
 36 #include &quot;MediaCapabilitiesEncodingInfo.h&quot;
 37 #include &quot;MediaDecodingConfiguration.h&quot;
 38 #include &quot;MediaDecodingType.h&quot;
 39 #include &quot;MediaEncodingConfiguration.h&quot;
 40 #include &quot;MediaEncodingType.h&quot;
 41 #include &quot;VideoConfiguration.h&quot;
 42 #include &lt;wtf/JSONValues.h&gt;
 43 
 44 namespace WebCore {
 45 
 46 static Ref&lt;JSON::Object&gt; toJSONObject(const VideoConfiguration&amp; configuration)
 47 {
 48     auto object = JSON::Object::create();
 49     object-&gt;setString(&quot;contentType&quot;_s, configuration.contentType);
 50     object-&gt;setInteger(&quot;width&quot;_s, configuration.width);
 51     object-&gt;setInteger(&quot;height&quot;_s, configuration.height);
 52     object-&gt;setInteger(&quot;bitrate&quot;_s, static_cast&lt;int&gt;(configuration.bitrate));
 53     object-&gt;setDouble(&quot;framerate&quot;_s, configuration.framerate);
 54     if (configuration.alphaChannel)
 55         object-&gt;setBoolean(&quot;alphaChannel&quot;_s, configuration.alphaChannel.value());
 56     if (configuration.colorGamut)
 57         object-&gt;setString(&quot;colorGamut&quot;_s, convertEnumerationToString(configuration.colorGamut.value()));
 58     if (configuration.hdrMetadataType)
 59         object-&gt;setString(&quot;hdrMetadataType&quot;_s, convertEnumerationToString(configuration.hdrMetadataType.value()));
 60     if (configuration.transferFunction)
 61         object-&gt;setString(&quot;transferFunction&quot;_s, convertEnumerationToString(configuration.transferFunction.value()));
 62     return object;
 63 }
 64 
 65 static Ref&lt;JSON::Object&gt; toJSONObject(const AudioConfiguration&amp; configuration)
 66 {
 67     auto object = JSON::Object::create();
 68     object-&gt;setString(&quot;contentType&quot;_s, configuration.contentType);
 69     object-&gt;setString(&quot;channels&quot;_s, configuration.channels);
 70     object-&gt;setInteger(&quot;bitrate&quot;_s, static_cast&lt;int&gt;(configuration.bitrate));
 71     object-&gt;setDouble(&quot;samplerate&quot;_s, configuration.samplerate);
 72     return object;
 73 }
 74 
 75 static Ref&lt;JSON::Object&gt; toJSONObject(const MediaConfiguration&amp; configuration)
 76 {
 77     auto object = JSON::Object::create();
 78     if (configuration.video)
 79         object-&gt;setValue(&quot;video&quot;_s, toJSONObject(configuration.video.value()));
 80     if (configuration.audio)
 81         object-&gt;setValue(&quot;audio&quot;_s, toJSONObject(configuration.audio.value()));
 82     return object;
 83 }
 84 
 85 static Ref&lt;JSON::Object&gt; toJSONObject(const MediaDecodingConfiguration&amp; configuration)
 86 {
 87     auto object = toJSONObject(static_cast&lt;const MediaConfiguration&amp;&gt;(configuration));
 88     object-&gt;setString(&quot;type&quot;_s, convertEnumerationToString(configuration.type));
 89     return object;
 90 }
 91 
 92 static Ref&lt;JSON::Object&gt; toJSONObject(const MediaEncodingConfiguration&amp; configuration)
 93 {
 94     auto object = toJSONObject(static_cast&lt;const MediaConfiguration&amp;&gt;(configuration));
 95     object-&gt;setString(&quot;type&quot;_s, convertEnumerationToString(configuration.type));
 96     return object;
 97 }
 98 
 99 static Ref&lt;JSON::Object&gt; toJSONObject(const MediaCapabilitiesInfo&amp; info)
100 {
101     auto object = JSON::Object::create();
102     object-&gt;setBoolean(&quot;supported&quot;_s, info.supported);
103     object-&gt;setBoolean(&quot;smooth&quot;_s, info.smooth);
104     object-&gt;setBoolean(&quot;powerEfficient&quot;_s, info.powerEfficient);
105     return object;
106 }
107 
108 static Ref&lt;JSON::Object&gt; toJSONObject(const MediaCapabilitiesDecodingInfo&amp; info)
109 {
110     auto object = toJSONObject(static_cast&lt;const MediaCapabilitiesInfo&amp;&gt;(info));
111     object-&gt;setValue(&quot;supportedConfiguration&quot;_s, toJSONObject(info.supportedConfiguration));
112     return object;
113 }
114 
115 static Ref&lt;JSON::Object&gt; toJSONObject(const MediaCapabilitiesEncodingInfo&amp; info)
116 {
117     auto object = toJSONObject(static_cast&lt;const MediaCapabilitiesInfo&amp;&gt;(info));
118     object-&gt;setValue(&quot;supportedConfiguration&quot;_s, toJSONObject(info.supportedConfiguration));
119     return object;
120 }
121 
122 static String toJSONString(const VideoConfiguration&amp; configuration)
123 {
124     return toJSONObject(configuration)-&gt;toJSONString();
125 }
126 
127 static String toJSONString(const AudioConfiguration&amp; configuration)
128 {
129     return toJSONObject(configuration)-&gt;toJSONString();
130 }
131 
132 static String toJSONString(const MediaConfiguration&amp; configuration)
133 {
134     return toJSONObject(configuration)-&gt;toJSONString();
135 }
136 
137 static String toJSONString(const MediaDecodingConfiguration&amp; configuration)
138 {
139     return toJSONObject(configuration)-&gt;toJSONString();
140 }
141 
142 static String toJSONString(const MediaEncodingConfiguration&amp; configuration)
143 {
144     return toJSONObject(configuration)-&gt;toJSONString();
145 }
146 
147 static String toJSONString(const MediaCapabilitiesInfo&amp; info)
148 {
149     return toJSONObject(info)-&gt;toJSONString();
150 }
151 
152 static String toJSONString(const MediaCapabilitiesDecodingInfo&amp; info)
153 {
154     return toJSONObject(info)-&gt;toJSONString();
155 }
156 
157 static String toJSONString(const MediaCapabilitiesEncodingInfo&amp; info)
158 {
159     return toJSONObject(info)-&gt;toJSONString();
160 }
161 
162 }
163 
164 namespace WTF {
165 
166 String LogArgument&lt;WebCore::VideoConfiguration&gt;::toString(const WebCore::VideoConfiguration&amp; configuration)
167 {
168     return toJSONString(configuration);
169 }
170 
171 String LogArgument&lt;WebCore::AudioConfiguration&gt;::toString(const WebCore::AudioConfiguration&amp; configuration)
172 {
173     return toJSONString(configuration);
174 }
175 
176 String LogArgument&lt;WebCore::MediaConfiguration&gt;::toString(const WebCore::MediaConfiguration&amp; configuration)
177 {
178     return toJSONString(configuration);
179 }
180 
181 String LogArgument&lt;WebCore::MediaDecodingConfiguration&gt;::toString(const WebCore::MediaDecodingConfiguration&amp; configuration)
182 {
183     return toJSONString(configuration);
184 }
185 
186 String LogArgument&lt;WebCore::MediaEncodingConfiguration&gt;::toString(const WebCore::MediaEncodingConfiguration&amp; configuration)
187 {
188     return toJSONString(configuration);
189 }
190 
191 String LogArgument&lt;WebCore::MediaCapabilitiesInfo&gt;::toString(const WebCore::MediaCapabilitiesInfo&amp; info)
192 {
193     return toJSONString(info);
194 }
195 
196 String LogArgument&lt;WebCore::MediaCapabilitiesDecodingInfo&gt;::toString(const WebCore::MediaCapabilitiesDecodingInfo&amp; info)
197 {
198     return toJSONString(info);
199 }
200 
201 String LogArgument&lt;WebCore::MediaCapabilitiesEncodingInfo&gt;::toString(const WebCore::MediaCapabilitiesEncodingInfo&amp; info)
202 {
203     return toJSONString(info);
204 }
205 
206 String LogArgument&lt;WebCore::ColorGamut&gt;::toString(const WebCore::ColorGamut&amp; type)
207 {
208     return convertEnumerationToString(type);
209 }
210 
211 String LogArgument&lt;WebCore::HdrMetadataType&gt;::toString(const WebCore::HdrMetadataType&amp; type)
212 {
213     return convertEnumerationToString(type);
214 }
215 
216 String LogArgument&lt;WebCore::TransferFunction&gt;::toString(const WebCore::TransferFunction&amp; type)
217 {
218     return convertEnumerationToString(type);
219 }
220 
221 String LogArgument&lt;WebCore::MediaDecodingType&gt;::toString(const WebCore::MediaDecodingType&amp; type)
222 {
223     return convertEnumerationToString(type);
224 }
225 
226 String LogArgument&lt;WebCore::MediaEncodingType&gt;::toString(const WebCore::MediaEncodingType&amp; type)
227 {
228     return convertEnumerationToString(type);
229 }
230 
231 }
    </pre>
  </body>
</html>