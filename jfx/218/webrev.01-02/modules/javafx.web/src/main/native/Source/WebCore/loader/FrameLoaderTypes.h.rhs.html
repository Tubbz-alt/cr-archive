<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/WebCore/loader/FrameLoaderTypes.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (C) 2006-2016 Apple Inc. All rights reserved.
  3  *
  4  * Redistribution and use in source and binary forms, with or without
  5  * modification, are permitted provided that the following conditions
  6  * are met:
  7  *
  8  * 1.  Redistributions of source code must retain the above copyright
  9  *     notice, this list of conditions and the following disclaimer.
 10  * 2.  Redistributions in binary form must reproduce the above copyright
 11  *     notice, this list of conditions and the following disclaimer in the
 12  *     documentation and/or other materials provided with the distribution.
 13  * 3.  Neither the name of Apple Inc. (&quot;Apple&quot;) nor the names of
 14  *     its contributors may be used to endorse or promote products derived
 15  *     from this software without specific prior written permission.
 16  *
 17  * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS &quot;AS IS&quot; AND ANY
 18  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 19  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 20  * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 21  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 22  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 23  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 24  * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 25  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 26  * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 27  */
 28 
 29 #pragma once
 30 
<a name="1" id="anc1"></a><span class="line-added"> 31 #include &quot;ElementContext.h&quot;</span>
 32 #include &quot;IntRect.h&quot;
 33 #include &quot;ProcessIdentifier.h&quot;
 34 
 35 namespace WebCore {
 36 
 37 enum FrameState {
 38     FrameStateProvisional,
 39     // This state indicates we are ready to commit to a page,
 40     // which means the view will transition to use the new data source.
 41     FrameStateCommittedPage,
 42     FrameStateComplete
 43 };
 44 
 45 enum class PolicyAction : uint8_t {
 46     Use,
 47     Download,
 48     Ignore,
 49     StopAllLoads
 50 };
 51 
 52 enum class ReloadOption : uint8_t {
 53     ExpiredOnly = 1 &lt;&lt; 0,
 54     FromOrigin  = 1 &lt;&lt; 1,
 55     DisableContentBlockers = 1 &lt;&lt; 2,
 56 };
 57 
 58 enum class FrameLoadType : uint8_t {
 59     Standard,
 60     Back,
 61     Forward,
 62     IndexedBackForward, // a multi-item hop in the backforward list
 63     Reload,
 64     Same, // user loads same URL again (but not reload button)
 65     RedirectWithLockedBackForwardList, // FIXME: Merge &quot;lockBackForwardList&quot;, &quot;lockHistory&quot;, &quot;quickRedirect&quot; and &quot;clientRedirect&quot; into a single concept of redirect.
 66     Replace,
 67     ReloadFromOrigin,
 68     ReloadExpiredOnly
 69 };
 70 
 71 enum class WillContinueLoading : bool { No, Yes };
 72 
 73 class PolicyCheckIdentifier {
 74 public:
 75     PolicyCheckIdentifier() = default;
 76 
 77     static PolicyCheckIdentifier create();
 78 
 79     bool isValidFor(PolicyCheckIdentifier);
 80     bool operator==(const PolicyCheckIdentifier&amp; other) const { return m_process == other.m_process &amp;&amp; m_policyCheck == other.m_policyCheck; }
 81 
 82     template&lt;class Encoder&gt; void encode(Encoder&amp;) const;
 83     template&lt;class Decoder&gt; static Optional&lt;PolicyCheckIdentifier&gt; decode(Decoder&amp;);
 84 
 85 private:
 86     PolicyCheckIdentifier(ProcessIdentifier process, uint64_t policyCheck)
 87         : m_process(process)
 88         , m_policyCheck(policyCheck)
 89     { }
 90 
 91     ProcessIdentifier m_process;
 92     uint64_t m_policyCheck { 0 };
 93 };
 94 
 95 template&lt;class Encoder&gt;
 96 void PolicyCheckIdentifier::encode(Encoder&amp; encoder) const
 97 {
 98     encoder &lt;&lt; m_process &lt;&lt; m_policyCheck;
 99 }
100 
101 template&lt;class Decoder&gt;
102 Optional&lt;PolicyCheckIdentifier&gt; PolicyCheckIdentifier::decode(Decoder&amp; decoder)
103 {
104     auto process = ProcessIdentifier::decode(decoder);
105     if (!process)
106         return WTF::nullopt;
107 
108     uint64_t policyCheck;
109     if (!decoder.decode(policyCheck))
110         return WTF::nullopt;
111 
112     return PolicyCheckIdentifier { *process, policyCheck };
113 }
114 
115 enum class NewFrameOpenerPolicy : uint8_t {
116     Suppress,
117     Allow
118 };
119 
120 enum class NavigationType : uint8_t {
121     LinkClicked,
122     FormSubmitted,
123     BackForward,
124     Reload,
125     FormResubmitted,
126     Other
127 };
128 
129 enum class ShouldOpenExternalURLsPolicy : uint8_t {
130     ShouldNotAllow,
131     ShouldAllowExternalSchemes,
132     ShouldAllow,
133 };
134 
135 enum class InitiatedByMainFrame : uint8_t {
136     Yes,
137     Unknown,
138 };
139 
140 enum ClearProvisionalItemPolicy {
141     ShouldClearProvisionalItem,
142     ShouldNotClearProvisionalItem
143 };
144 
145 enum class StopLoadingPolicy {
146     PreventDuringUnloadEvents,
147     AlwaysStopLoading
148 };
149 
150 enum class ObjectContentType : uint8_t {
151     None,
152     Image,
153     Frame,
154     PlugIn,
155 };
156 
157 enum UnloadEventPolicy {
158     UnloadEventPolicyNone,
159     UnloadEventPolicyUnloadOnly,
160     UnloadEventPolicyUnloadAndPageHide
161 };
162 
163 enum ShouldSendReferrer {
164     MaybeSendReferrer,
165     NeverSendReferrer
166 };
167 
168 // Passed to FrameLoader::urlSelected() and ScriptController::executeIfJavaScriptURL()
169 // to control whether, in the case of a JavaScript URL, executeIfJavaScriptURL() should
170 // replace the document. It is a FIXME to eliminate this extra parameter from
171 // executeIfJavaScriptURL(), in which case this enum can go away.
172 enum ShouldReplaceDocumentIfJavaScriptURL {
173     ReplaceDocumentIfJavaScriptURL,
174     DoNotReplaceDocumentIfJavaScriptURL
175 };
176 
177 enum WebGLLoadPolicy {
178     WebGLBlockCreation,
179     WebGLAllowCreation,
180     WebGLPendingCreation
181 };
182 
183 enum class LockHistory : bool { No, Yes };
184 enum class LockBackForwardList : bool { No, Yes };
185 enum class AllowNavigationToInvalidURL : bool { No, Yes };
186 enum class HasInsecureContent : bool { No, Yes };
187 
188 struct SystemPreviewInfo {
<a name="2" id="anc2"></a><span class="line-modified">189     ElementContext element;</span>
<span class="line-modified">190 </span>
<span class="line-added">191     IntRect previewRect;</span>
<span class="line-added">192     bool isPreview { false };</span>
<span class="line-added">193 </span>
<span class="line-added">194     template&lt;class Encoder&gt; void encode(Encoder&amp;) const;</span>
<span class="line-added">195     template&lt;class Decoder&gt; static Optional&lt;SystemPreviewInfo&gt; decode(Decoder&amp;);</span>
196 };
197 
<a name="3" id="anc3"></a><span class="line-added">198 template&lt;class Encoder&gt;</span>
<span class="line-added">199 void SystemPreviewInfo::encode(Encoder&amp; encoder) const</span>
<span class="line-added">200 {</span>
<span class="line-added">201     encoder &lt;&lt; element &lt;&lt; previewRect &lt;&lt; isPreview;</span>
<span class="line-added">202 }</span>
<span class="line-added">203 </span>
<span class="line-added">204 template&lt;class Decoder&gt;</span>
<span class="line-added">205 Optional&lt;SystemPreviewInfo&gt; SystemPreviewInfo::decode(Decoder&amp; decoder)</span>
<span class="line-added">206 {</span>
<span class="line-added">207     Optional&lt;ElementContext&gt; element;</span>
<span class="line-added">208     decoder &gt;&gt; element;</span>
<span class="line-added">209     if (!element)</span>
<span class="line-added">210         return WTF::nullopt;</span>
<span class="line-added">211 </span>
<span class="line-added">212     Optional&lt;IntRect&gt; previewRect;</span>
<span class="line-added">213     decoder &gt;&gt; previewRect;</span>
<span class="line-added">214     if (!previewRect)</span>
<span class="line-added">215         return WTF::nullopt;</span>
<span class="line-added">216 </span>
<span class="line-added">217     Optional&lt;bool&gt; isPreview;</span>
<span class="line-added">218     decoder &gt;&gt; isPreview;</span>
<span class="line-added">219     if (!isPreview)</span>
<span class="line-added">220         return WTF::nullopt;</span>
<span class="line-added">221 </span>
<span class="line-added">222     return { { WTFMove(*element), WTFMove(*previewRect), WTFMove(*isPreview) } };</span>
<span class="line-added">223 }</span>
<span class="line-added">224 </span>
225 enum class LoadCompletionType : uint8_t {
226     Finish,
227     Cancel
228 };
229 
230 } // namespace WebCore
231 
232 namespace WTF {
233 
234 template&lt;&gt; struct EnumTraits&lt;WebCore::PolicyAction&gt; {
235     using values = EnumValues&lt;
236         WebCore::PolicyAction,
237         WebCore::PolicyAction::Use,
238         WebCore::PolicyAction::Download,
239         WebCore::PolicyAction::Ignore,
240         WebCore::PolicyAction::StopAllLoads
241     &gt;;
242 };
243 
244 template&lt;&gt; struct EnumTraits&lt;WebCore::FrameLoadType&gt; {
245     using values = EnumValues&lt;
246         WebCore::FrameLoadType,
247         WebCore::FrameLoadType::Standard,
248         WebCore::FrameLoadType::Back,
249         WebCore::FrameLoadType::Forward,
250         WebCore::FrameLoadType::IndexedBackForward,
251         WebCore::FrameLoadType::Reload,
252         WebCore::FrameLoadType::Same,
253         WebCore::FrameLoadType::RedirectWithLockedBackForwardList,
254         WebCore::FrameLoadType::Replace,
255         WebCore::FrameLoadType::ReloadFromOrigin,
256         WebCore::FrameLoadType::ReloadExpiredOnly
257     &gt;;
258 };
259 
260 template&lt;&gt; struct EnumTraits&lt;WebCore::ShouldOpenExternalURLsPolicy&gt; {
261     using values = EnumValues&lt;
262         WebCore::ShouldOpenExternalURLsPolicy,
263         WebCore::ShouldOpenExternalURLsPolicy::ShouldNotAllow,
264         WebCore::ShouldOpenExternalURLsPolicy::ShouldAllowExternalSchemes,
265         WebCore::ShouldOpenExternalURLsPolicy::ShouldAllow
266     &gt;;
267 };
268 
269 } // namespace WTF
<a name="4" id="anc4"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="4" type="hidden" />
</body>
</html>