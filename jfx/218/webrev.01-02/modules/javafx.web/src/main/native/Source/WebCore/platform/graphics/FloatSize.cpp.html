<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/FloatSize.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 /*
 2  * Copyright (C) 2003, 2006 Apple Inc.  All rights reserved.
 3  * Copyright (C) 2005 Nokia.  All rights reserved.
 4  *
 5  * Redistribution and use in source and binary forms, with or without
 6  * modification, are permitted provided that the following conditions
 7  * are met:
 8  * 1. Redistributions of source code must retain the above copyright
 9  *    notice, this list of conditions and the following disclaimer.
10  * 2. Redistributions in binary form must reproduce the above copyright
11  *    notice, this list of conditions and the following disclaimer in the
12  *    documentation and/or other materials provided with the distribution.
13  *
14  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
15  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
16  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
17  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
18  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
19  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
20  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
21  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
22  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
23  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
24  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
25  */
26 
27 #include &quot;config.h&quot;
28 #include &quot;FloatSize.h&quot;
29 
30 #include &quot;FloatConversion.h&quot;
31 #include &quot;IntSize.h&quot;
32 #include &lt;limits&gt;
33 #include &lt;math.h&gt;
34 #include &lt;wtf/JSONValues.h&gt;
35 #include &lt;wtf/text/TextStream.h&gt;
36 
37 namespace WebCore {
38 
39 FloatSize::FloatSize(const IntSize&amp; size)
40     : m_width(size.width())
41     , m_height(size.height())
42 {
43 }
44 
45 FloatSize FloatSize::constrainedBetween(const FloatSize&amp; min, const FloatSize&amp; max) const
46 {
47     return {
48         std::max(min.width(), std::min(max.width(), m_width)),
49         std::max(min.height(), std::min(max.height(), m_height))
50     };
51 }
52 
53 bool FloatSize::isZero() const
54 {
55     return fabs(m_width) &lt; std::numeric_limits&lt;float&gt;::epsilon() &amp;&amp; fabs(m_height) &lt; std::numeric_limits&lt;float&gt;::epsilon();
56 }
57 
58 bool FloatSize::isExpressibleAsIntSize() const
59 {
60     return isWithinIntRange(m_width) &amp;&amp; isWithinIntRange(m_height);
61 }
62 
63 FloatSize FloatSize::narrowPrecision(double width, double height)
64 {
65     return FloatSize(narrowPrecisionToFloat(width), narrowPrecisionToFloat(height));
66 }
67 
68 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, const FloatSize&amp; size)
69 {
70     return ts &lt;&lt; &quot;width=&quot; &lt;&lt; TextStream::FormatNumberRespectingIntegers(size.width())
71         &lt;&lt; &quot; height=&quot; &lt;&lt; TextStream::FormatNumberRespectingIntegers(size.height());
72 }
73 
74 Ref&lt;JSON::Object&gt; FloatSize::toJSONObject() const
75 {
76     auto object = JSON::Object::create();
77 
78     object-&gt;setDouble(&quot;width&quot;_s, m_width);
79     object-&gt;setDouble(&quot;height&quot;_s, m_height);
80 
81     return object;
82 }
83 
84 String FloatSize::toJSONString() const
85 {
86     return toJSONObject()-&gt;toJSONString();
87 }
88 
89 }
    </pre>
  </body>
</html>