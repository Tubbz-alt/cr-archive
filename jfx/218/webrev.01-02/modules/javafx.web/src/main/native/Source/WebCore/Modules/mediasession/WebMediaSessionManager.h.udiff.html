<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/Modules/mediasession/WebMediaSessionManager.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="WebMediaSessionManager.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="WebMediaSessionManagerClient.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/mediasession/WebMediaSessionManager.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -37,27 +37,31 @@</span>
  
  namespace WebCore {
  
  struct ClientState;
  class IntRect;
<span class="udiff-line-added">+ class WebMediaSessionLogger;</span>
  class WebMediaSessionManagerClient;
  
  class WebMediaSessionManager : public MediaPlaybackTargetPicker::Client {
      WTF_MAKE_NONCOPYABLE(WebMediaSessionManager);
  public:
  
      WEBCORE_EXPORT static WebMediaSessionManager&amp; shared();
  
      WEBCORE_EXPORT void setMockMediaPlaybackTargetPickerEnabled(bool);
      WEBCORE_EXPORT void setMockMediaPlaybackTargetPickerState(const String&amp;, MediaPlaybackTargetContext::State);
<span class="udiff-line-added">+     WEBCORE_EXPORT void mockMediaPlaybackTargetPickerDismissPopup();</span>
  
      WEBCORE_EXPORT uint64_t addPlaybackTargetPickerClient(WebMediaSessionManagerClient&amp;, uint64_t);
      WEBCORE_EXPORT void removePlaybackTargetPickerClient(WebMediaSessionManagerClient&amp;, uint64_t);
      WEBCORE_EXPORT void removeAllPlaybackTargetPickerClients(WebMediaSessionManagerClient&amp;);
      WEBCORE_EXPORT void showPlaybackTargetPicker(WebMediaSessionManagerClient&amp;, uint64_t, const IntRect&amp;, bool, bool);
      WEBCORE_EXPORT void clientStateDidChange(WebMediaSessionManagerClient&amp;, uint64_t, WebCore::MediaProducer::MediaStateFlags);
  
<span class="udiff-line-added">+     bool alwaysOnLoggingAllowed() const;</span>
<span class="udiff-line-added">+ </span>
  protected:
      WebMediaSessionManager();
      virtual ~WebMediaSessionManager();
  
      virtual WebCore::MediaPlaybackTargetPicker&amp; platformPicker() = 0;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -69,10 +73,11 @@</span>
      WebCore::MediaPlaybackTargetPickerMock&amp; mockPicker();
  
      // MediaPlaybackTargetPicker::Client
      void setPlaybackTarget(Ref&lt;WebCore::MediaPlaybackTarget&gt;&amp;&amp;) override;
      void externalOutputDeviceAvailableDidChange(bool) override;
<span class="udiff-line-added">+     void playbackTargetPickerWasDismissed() override;</span>
  
      size_t find(WebMediaSessionManagerClient*, uint64_t);
  
      void configurePlaybackTargetClients();
      void configureNewClients();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -92,21 +97,37 @@</span>
      void scheduleDelayedTask(ConfigurationTasks);
      void taskTimerFired();
  
      void watchdogTimerFired();
  
<span class="udiff-line-added">+     WebMediaSessionLogger&amp; logger();</span>
<span class="udiff-line-added">+ </span>
      RunLoop::Timer&lt;WebMediaSessionManager&gt; m_taskTimer;
      RunLoop::Timer&lt;WebMediaSessionManager&gt; m_watchdogTimer;
  
      Vector&lt;std::unique_ptr&lt;ClientState&gt;&gt; m_clientState;
      RefPtr&lt;MediaPlaybackTarget&gt; m_playbackTarget;
      std::unique_ptr&lt;WebCore::MediaPlaybackTargetPickerMock&gt; m_pickerOverride;
      ConfigurationTasks m_taskFlags { NoTask };
<span class="udiff-line-added">+     std::unique_ptr&lt;WebMediaSessionLogger&gt; m_logger;</span>
      Seconds m_currentWatchdogInterval;
      bool m_externalOutputDeviceAvailable { false };
      bool m_targetChanged { false };
<span class="udiff-line-added">+     bool m_playbackTargetPickerDismissed { false };</span>
      bool m_mockPickerEnabled { false };
  };
  
<span class="udiff-line-added">+ String mediaProducerStateString(WebCore::MediaProducer::MediaStateFlags);</span>
<span class="udiff-line-added">+ </span>
  } // namespace WebCore
  
<span class="udiff-line-added">+ namespace WTF {</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ template&lt;typename&gt; struct LogArgument;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ template&lt;&gt; struct LogArgument&lt;WebCore::MediaProducer::MediaStateFlags&gt; {</span>
<span class="udiff-line-added">+     static String toString(WebCore::MediaProducer::MediaStateFlags flags) { return WebCore::mediaProducerStateString(flags); }</span>
<span class="udiff-line-added">+ };</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ } // namespace WTF</span>
<span class="udiff-line-added">+ </span>
  #endif // ENABLE(WIRELESS_PLAYBACK_TARGET) &amp;&amp; !PLATFORM(IOS_FAMILY)
</pre>
<center><a href="WebMediaSessionManager.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="WebMediaSessionManagerClient.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>