<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WTF/wtf/VectorTraits.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Vector.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="WTFAssertions.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WTF/wtf/VectorTraits.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (C) 2006, 2007, 2008, 2016 Apple Inc. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (C) 2006-2019 Apple Inc. All rights reserved.</span>
   *
   * This library is free software; you can redistribute it and/or
   * modify it under the terms of the GNU Library General Public
   * License as published by the Free Software Foundation; either
   * version 2 of the License, or (at your option) any later version.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -34,37 +34,37 @@</span>
      struct VectorTraitsBase;
  
      template&lt;typename T&gt;
      struct VectorTraitsBase&lt;false, T&gt;
      {
<span class="udiff-line-modified-removed">-         static const bool needsInitialization = true;</span>
<span class="udiff-line-modified-removed">-         static const bool canInitializeWithMemset = false;</span>
<span class="udiff-line-modified-removed">-         static const bool canMoveWithMemcpy = false;</span>
<span class="udiff-line-modified-removed">-         static const bool canCopyWithMemcpy = false;</span>
<span class="udiff-line-modified-removed">-         static const bool canFillWithMemset = false;</span>
<span class="udiff-line-modified-removed">-         static const bool canCompareWithMemcmp = false;</span>
<span class="udiff-line-modified-added">+         static constexpr bool needsInitialization = true;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canInitializeWithMemset = false;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canMoveWithMemcpy = false;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canCopyWithMemcpy = false;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canFillWithMemset = false;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canCompareWithMemcmp = false;</span>
      };
  
      template&lt;typename T&gt;
      struct VectorTraitsBase&lt;true, T&gt;
      {
<span class="udiff-line-modified-removed">-         static const bool needsInitialization = false;</span>
<span class="udiff-line-modified-removed">-         static const bool canInitializeWithMemset = true;</span>
<span class="udiff-line-modified-removed">-         static const bool canMoveWithMemcpy = true;</span>
<span class="udiff-line-modified-removed">-         static const bool canCopyWithMemcpy = true;</span>
<span class="udiff-line-modified-removed">-         static const bool canFillWithMemset = sizeof(T) == sizeof(char) &amp;&amp; std::is_integral&lt;T&gt;::value;</span>
<span class="udiff-line-modified-removed">-         static const bool canCompareWithMemcmp = true;</span>
<span class="udiff-line-modified-added">+         static constexpr bool needsInitialization = false;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canInitializeWithMemset = true;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canMoveWithMemcpy = true;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canCopyWithMemcpy = true;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canFillWithMemset = sizeof(T) == sizeof(char) &amp;&amp; std::is_integral&lt;T&gt;::value;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canCompareWithMemcmp = true;</span>
      };
  
      template&lt;typename T&gt;
      struct VectorTraits : VectorTraitsBase&lt;std::is_pod&lt;T&gt;::value, T&gt; { };
  
      struct SimpleClassVectorTraits : VectorTraitsBase&lt;false, void&gt;
      {
<span class="udiff-line-modified-removed">-         static const bool canInitializeWithMemset = true;</span>
<span class="udiff-line-modified-removed">-         static const bool canMoveWithMemcpy = true;</span>
<span class="udiff-line-modified-removed">-         static const bool canCompareWithMemcmp = true;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canInitializeWithMemset = true;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canMoveWithMemcpy = true;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canCompareWithMemcmp = true;</span>
      };
  
      // We know smart pointers are simple enough that initializing to 0 and moving with memcpy
      // (and then not destructing the original) will work.
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -77,16 +77,16 @@</span>
      struct VectorTraits&lt;std::pair&lt;First, Second&gt;&gt;
      {
          typedef VectorTraits&lt;First&gt; FirstTraits;
          typedef VectorTraits&lt;Second&gt; SecondTraits;
  
<span class="udiff-line-modified-removed">-         static const bool needsInitialization = FirstTraits::needsInitialization || SecondTraits::needsInitialization;</span>
<span class="udiff-line-modified-removed">-         static const bool canInitializeWithMemset = FirstTraits::canInitializeWithMemset &amp;&amp; SecondTraits::canInitializeWithMemset;</span>
<span class="udiff-line-modified-removed">-         static const bool canMoveWithMemcpy = FirstTraits::canMoveWithMemcpy &amp;&amp; SecondTraits::canMoveWithMemcpy;</span>
<span class="udiff-line-modified-removed">-         static const bool canCopyWithMemcpy = FirstTraits::canCopyWithMemcpy &amp;&amp; SecondTraits::canCopyWithMemcpy;</span>
<span class="udiff-line-modified-removed">-         static const bool canFillWithMemset = false;</span>
<span class="udiff-line-modified-removed">-         static const bool canCompareWithMemcmp = FirstTraits::canCompareWithMemcmp &amp;&amp; SecondTraits::canCompareWithMemcmp;</span>
<span class="udiff-line-modified-added">+         static constexpr bool needsInitialization = FirstTraits::needsInitialization || SecondTraits::needsInitialization;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canInitializeWithMemset = FirstTraits::canInitializeWithMemset &amp;&amp; SecondTraits::canInitializeWithMemset;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canMoveWithMemcpy = FirstTraits::canMoveWithMemcpy &amp;&amp; SecondTraits::canMoveWithMemcpy;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canCopyWithMemcpy = FirstTraits::canCopyWithMemcpy &amp;&amp; SecondTraits::canCopyWithMemcpy;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canFillWithMemset = false;</span>
<span class="udiff-line-modified-added">+         static constexpr bool canCompareWithMemcmp = FirstTraits::canCompareWithMemcmp &amp;&amp; SecondTraits::canCompareWithMemcmp;</span>
      };
  
  } // namespace WTF
  
  using WTF::VectorTraits;
</pre>
<center><a href="Vector.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="WTFAssertions.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>