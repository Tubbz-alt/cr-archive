<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/animation/AnimationEffect.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AnimationEffect.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="AnimationPlaybackEvent.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/animation/AnimationEffect.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 30 #include &quot;BasicEffectTiming.h&quot;
 31 #include &quot;ComputedEffectTiming.h&quot;
 32 #include &quot;ExceptionOr.h&quot;
 33 #include &quot;FillMode.h&quot;
 34 #include &quot;KeyframeEffectOptions.h&quot;
 35 #include &quot;OptionalEffectTiming.h&quot;
 36 #include &quot;PlaybackDirection.h&quot;
 37 #include &quot;TimingFunction.h&quot;
 38 #include &quot;WebAnimation.h&quot;
 39 #include &quot;WebAnimationUtilities.h&quot;
 40 #include &lt;wtf/Forward.h&gt;
 41 #include &lt;wtf/Ref.h&gt;
 42 #include &lt;wtf/RefCounted.h&gt;
 43 #include &lt;wtf/RefPtr.h&gt;
 44 #include &lt;wtf/Seconds.h&gt;
 45 #include &lt;wtf/Variant.h&gt;
 46 #include &lt;wtf/WeakPtr.h&gt;
 47 
 48 namespace WebCore {
 49 
<span class="line-modified"> 50 class AnimationEffect : public RefCounted&lt;AnimationEffect&gt; {</span>
 51 public:
 52     virtual ~AnimationEffect();
 53 
 54     virtual bool isKeyframeEffect() const { return false; }
 55 
 56     EffectTiming getTiming() const;
 57     BasicEffectTiming getBasicTiming() const;
 58     ComputedEffectTiming getComputedTiming() const;
 59     ExceptionOr&lt;void&gt; updateTiming(Optional&lt;OptionalEffectTiming&gt;);
 60 
 61     virtual void apply(RenderStyle&amp;) = 0;
 62     virtual void invalidate() = 0;


 63     virtual void animationDidSeek() = 0;

 64     virtual void animationSuspensionStateDidChange(bool) = 0;

 65 
 66     WebAnimation* animation() const { return m_animation.get(); }
<span class="line-modified"> 67     void setAnimation(WebAnimation* animation) { m_animation = makeWeakPtr(animation); }</span>
 68 
 69     Seconds delay() const { return m_delay; }
 70     void setDelay(const Seconds&amp;);
 71 
 72     Seconds endDelay() const { return m_endDelay; }
 73     void setEndDelay(const Seconds&amp;);
 74 
 75     FillMode fill() const { return m_fill; }
 76     void setFill(FillMode);
 77 
 78     double iterationStart() const { return m_iterationStart; }
 79     ExceptionOr&lt;void&gt; setIterationStart(double);
 80 
 81     double iterations() const { return m_iterations; }
 82     ExceptionOr&lt;void&gt; setIterations(double);
 83 
 84     Seconds iterationDuration() const { return m_iterationDuration; }
 85     void setIterationDuration(const Seconds&amp;);
 86 
 87     PlaybackDirection direction() const { return m_direction; }
 88     void setDirection(PlaybackDirection);
 89 
 90     TimingFunction* timingFunction() const { return m_timingFunction.get(); }
 91     void setTimingFunction(const RefPtr&lt;TimingFunction&gt;&amp;);
 92 





 93 protected:
 94     explicit AnimationEffect();
 95 
 96 private:
 97     enum class ComputedDirection : uint8_t { Forwards, Reverse };
 98 
 99     FillMode m_fill { FillMode::Auto };
100     PlaybackDirection m_direction { PlaybackDirection::Normal };
101 
102     WeakPtr&lt;WebAnimation&gt; m_animation;
103     RefPtr&lt;TimingFunction&gt; m_timingFunction;
104 
105     double m_iterationStart { 0 };
106     double m_iterations { 1 };
107 
108     Seconds m_delay { 0_s };
109     Seconds m_endDelay { 0_s };
110     Seconds m_iterationDuration { 0_s };


111 };
112 
113 } // namespace WebCore
114 
115 #define SPECIALIZE_TYPE_TRAITS_ANIMATION_EFFECT(ToValueTypeName, predicate) \
116 SPECIALIZE_TYPE_TRAITS_BEGIN(WebCore::ToValueTypeName) \
117 static bool isType(const WebCore::AnimationEffect&amp; value) { return value.predicate; } \
118 SPECIALIZE_TYPE_TRAITS_END()
</pre>
</td>
<td>
<hr />
<pre>
 30 #include &quot;BasicEffectTiming.h&quot;
 31 #include &quot;ComputedEffectTiming.h&quot;
 32 #include &quot;ExceptionOr.h&quot;
 33 #include &quot;FillMode.h&quot;
 34 #include &quot;KeyframeEffectOptions.h&quot;
 35 #include &quot;OptionalEffectTiming.h&quot;
 36 #include &quot;PlaybackDirection.h&quot;
 37 #include &quot;TimingFunction.h&quot;
 38 #include &quot;WebAnimation.h&quot;
 39 #include &quot;WebAnimationUtilities.h&quot;
 40 #include &lt;wtf/Forward.h&gt;
 41 #include &lt;wtf/Ref.h&gt;
 42 #include &lt;wtf/RefCounted.h&gt;
 43 #include &lt;wtf/RefPtr.h&gt;
 44 #include &lt;wtf/Seconds.h&gt;
 45 #include &lt;wtf/Variant.h&gt;
 46 #include &lt;wtf/WeakPtr.h&gt;
 47 
 48 namespace WebCore {
 49 
<span class="line-modified"> 50 class AnimationEffect : public RefCounted&lt;AnimationEffect&gt;, public CanMakeWeakPtr&lt;AnimationEffect&gt; {</span>
 51 public:
 52     virtual ~AnimationEffect();
 53 
 54     virtual bool isKeyframeEffect() const { return false; }
 55 
 56     EffectTiming getTiming() const;
 57     BasicEffectTiming getBasicTiming() const;
 58     ComputedEffectTiming getComputedTiming() const;
 59     ExceptionOr&lt;void&gt; updateTiming(Optional&lt;OptionalEffectTiming&gt;);
 60 
 61     virtual void apply(RenderStyle&amp;) = 0;
 62     virtual void invalidate() = 0;
<span class="line-added"> 63     virtual void animationDidTick() = 0;</span>
<span class="line-added"> 64     virtual void animationDidPlay() = 0;</span>
 65     virtual void animationDidSeek() = 0;
<span class="line-added"> 66     virtual void animationWasCanceled() = 0;</span>
 67     virtual void animationSuspensionStateDidChange(bool) = 0;
<span class="line-added"> 68     virtual void animationTimelineDidChange(AnimationTimeline*) = 0;</span>
 69 
 70     WebAnimation* animation() const { return m_animation.get(); }
<span class="line-modified"> 71     virtual void setAnimation(WebAnimation* animation) { m_animation = makeWeakPtr(animation); }</span>
 72 
 73     Seconds delay() const { return m_delay; }
 74     void setDelay(const Seconds&amp;);
 75 
 76     Seconds endDelay() const { return m_endDelay; }
 77     void setEndDelay(const Seconds&amp;);
 78 
 79     FillMode fill() const { return m_fill; }
 80     void setFill(FillMode);
 81 
 82     double iterationStart() const { return m_iterationStart; }
 83     ExceptionOr&lt;void&gt; setIterationStart(double);
 84 
 85     double iterations() const { return m_iterations; }
 86     ExceptionOr&lt;void&gt; setIterations(double);
 87 
 88     Seconds iterationDuration() const { return m_iterationDuration; }
 89     void setIterationDuration(const Seconds&amp;);
 90 
 91     PlaybackDirection direction() const { return m_direction; }
 92     void setDirection(PlaybackDirection);
 93 
 94     TimingFunction* timingFunction() const { return m_timingFunction.get(); }
 95     void setTimingFunction(const RefPtr&lt;TimingFunction&gt;&amp;);
 96 
<span class="line-added"> 97     Seconds activeDuration() const { return m_activeDuration; }</span>
<span class="line-added"> 98     Seconds endTime() const { return m_endTime; }</span>
<span class="line-added"> 99 </span>
<span class="line-added">100     void updateStaticTimingProperties();</span>
<span class="line-added">101 </span>
102 protected:
103     explicit AnimationEffect();
104 
105 private:
106     enum class ComputedDirection : uint8_t { Forwards, Reverse };
107 
108     FillMode m_fill { FillMode::Auto };
109     PlaybackDirection m_direction { PlaybackDirection::Normal };
110 
111     WeakPtr&lt;WebAnimation&gt; m_animation;
112     RefPtr&lt;TimingFunction&gt; m_timingFunction;
113 
114     double m_iterationStart { 0 };
115     double m_iterations { 1 };
116 
117     Seconds m_delay { 0_s };
118     Seconds m_endDelay { 0_s };
119     Seconds m_iterationDuration { 0_s };
<span class="line-added">120     Seconds m_activeDuration { 0_s };</span>
<span class="line-added">121     Seconds m_endTime { 0_s };</span>
122 };
123 
124 } // namespace WebCore
125 
126 #define SPECIALIZE_TYPE_TRAITS_ANIMATION_EFFECT(ToValueTypeName, predicate) \
127 SPECIALIZE_TYPE_TRAITS_BEGIN(WebCore::ToValueTypeName) \
128 static bool isType(const WebCore::AnimationEffect&amp; value) { return value.predicate; } \
129 SPECIALIZE_TYPE_TRAITS_END()
</pre>
</td>
</tr>
</table>
<center><a href="AnimationEffect.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="AnimationPlaybackEvent.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>