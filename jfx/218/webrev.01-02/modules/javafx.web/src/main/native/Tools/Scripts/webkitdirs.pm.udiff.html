<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Tools/Scripts/webkitdirs.pm</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="set-webkit-configuration.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="webkitperl/FeatureList.pm.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Tools/Scripts/webkitdirs.pm</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,6 +1,6 @@</span>
<span class="udiff-line-modified-removed">- # Copyright (C) 2005-2007, 2010-2016 Apple Inc. All rights reserved.</span>
<span class="udiff-line-modified-added">+ # Copyright (C) 2005-2019 Apple Inc. All rights reserved.</span>
  # Copyright (C) 2009 Google Inc. All rights reserved.
  # Copyright (C) 2011 Research In Motion Limited. All rights reserved.
  # Copyright (C) 2013 Nokia Corporation and/or its subsidiary(-ies).
  #
  # Redistribution and use in source and binary forms, with or without
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -103,10 +103,11 @@</span>
  }
  
  # Ports
  use constant {
      AppleWin    =&gt; &quot;AppleWin&quot;,
<span class="udiff-line-added">+     FTW         =&gt; &quot;FTW&quot;,</span>
      GTK         =&gt; &quot;GTK&quot;,
      iOS         =&gt; &quot;iOS&quot;,
      tvOS        =&gt; &quot;tvOS&quot;,
      watchOS     =&gt; &quot;watchOS&quot;,
      Mac         =&gt; &quot;Mac&quot;,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -130,10 +131,12 @@</span>
  
  our @EXPORT_OK;
  
  my $architecture;
  my $asanIsEnabled;
<span class="udiff-line-added">+ my $forceOptimizationLevel;</span>
<span class="udiff-line-added">+ my $coverageIsEnabled;</span>
  my $ltoMode;
  my $numberOfCPUs;
  my $maxCPULoad;
  my $baseProductDir;
  my @baseProductDirOption;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -423,10 +426,34 @@</span>
          chomp $asanConfigurationValue;
          $asanIsEnabled = 1 if $asanConfigurationValue eq &quot;YES&quot;;
      }
  }
  
<span class="udiff-line-added">+ sub determineForceOptimizationLevel</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     return if defined $forceOptimizationLevel;</span>
<span class="udiff-line-added">+     determineBaseProductDir();</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (open ForceOptimizationLevel, &quot;$baseProductDir/ForceOptimizationLevel&quot;) {</span>
<span class="udiff-line-added">+         $forceOptimizationLevel = &lt;ForceOptimizationLevel&gt;;</span>
<span class="udiff-line-added">+         close ForceOptimizationLevel;</span>
<span class="udiff-line-added">+         chomp $forceOptimizationLevel;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ sub determineCoverageIsEnabled</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     return if defined $coverageIsEnabled;</span>
<span class="udiff-line-added">+     determineBaseProductDir();</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (open Coverage, &quot;$baseProductDir/Coverage&quot;) {</span>
<span class="udiff-line-added">+         $coverageIsEnabled = &lt;Coverage&gt;;</span>
<span class="udiff-line-added">+         close Coverage;</span>
<span class="udiff-line-added">+         chomp $coverageIsEnabled;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
  sub determineLTOMode
  {
      return if defined $ltoMode;
      determineBaseProductDir();
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -476,11 +503,11 @@</span>
          $jscName .= &quot;.elf&quot;;
      } elsif (isAnyWindows()) {
          $jscName .= &quot;.exe&quot;;
      }
      return &quot;$productDir/$jscName&quot; if -e &quot;$productDir/$jscName&quot;;
<span class="udiff-line-modified-removed">-     return &quot;$productDir/JavaScriptCore.framework/Resources/$jscName&quot;;</span>
<span class="udiff-line-modified-added">+     return &quot;$productDir/JavaScriptCore.framework/Helpers/$jscName&quot;;</span>
  }
  
  sub argumentsForConfiguration()
  {
      determineConfiguration();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -495,10 +522,11 @@</span>
      push(@args, &#39;--ios-device&#39;) if (defined $xcodeSDK &amp;&amp; $xcodeSDK =~ /^iphoneos/);
      push(@args, &#39;--ios-simulator&#39;) if (defined $xcodeSDK &amp;&amp; $xcodeSDK =~ /^iphonesimulator/);
      push(@args, &#39;--maccatalyst&#39;) if (defined $xcodeSDK &amp;&amp; $xcodeSDK =~ /^maccatalyst/);
      push(@args, &#39;--32-bit&#39;) if ($architecture eq &quot;x86&quot; and !isWin64());
      push(@args, &#39;--64-bit&#39;) if (isWin64());
<span class="udiff-line-added">+     push(@args, &#39;--ftw&#39;) if isFTW();</span>
      push(@args, &#39;--gtk&#39;) if isGtk();
      push(@args, &#39;--java&#39;) if isJava();
      push(@args, &#39;--wpe&#39;) if isWPE();
      push(@args, &#39;--jsc-only&#39;) if isJSCOnly();
      push(@args, &#39;--wincairo&#39;) if isWinCairo();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -507,11 +535,11 @@</span>
  }
  
  sub extractNonMacOSHostConfiguration
  {
      my @args = ();
<span class="udiff-line-modified-removed">-     my @extract = (&#39;--device&#39;, &#39;--gtk&#39;, &#39;--ios&#39;, &#39;--platform&#39;, &#39;--sdk&#39;, &#39;--simulator&#39;, &#39;--wincairo&#39;, &#39;SDKROOT&#39;, &#39;ARCHS&#39;);</span>
<span class="udiff-line-modified-added">+     my @extract = (&#39;--device&#39;, &#39;--gtk&#39;, &#39;--ios&#39;, &#39;--platform&#39;, &#39;--sdk&#39;, &#39;--simulator&#39;, &#39;--wincairo&#39;, &#39;--ftw&#39;, &#39;SDKROOT&#39;, &#39;ARCHS&#39;);</span>
      foreach (@{$_[0]}) {
          my $line = $_;
          my $flag = 0;
          foreach (@extract) {
              if (length($line) &gt;= length($_) &amp;&amp; substr($line, 0, length($_)) eq $_
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -714,19 +742,19 @@</span>
  {
      # [Gtk] We don&#39;t have Release/Debug configurations in straight
      # autotool builds (non build-webkit). In this case and if
      # WEBKIT_OUTPUTDIR exist, use that as our configuration dir. This will
      # allows us to run run-webkit-tests without using build-webkit.
<span class="udiff-line-modified-removed">-     return ($ENV{&quot;WEBKIT_OUTPUTDIR&quot;} &amp;&amp; isGtk()) || isAppleWinWebKit() || isJava();</span>
<span class="udiff-line-modified-added">+     return ($ENV{&quot;WEBKIT_OUTPUTDIR&quot;} &amp;&amp; isGtk()) || isAppleWinWebKit() || isFTW() || isJava();</span>
  }
  
  sub determineConfigurationProductDir
  {
      return if defined $configurationProductDir;
      determineBaseProductDir();
      determineConfiguration();
<span class="udiff-line-modified-removed">-     if (isAppleWinWebKit() || isWinCairo() || isPlayStation()) {</span>
<span class="udiff-line-modified-added">+     if (isAppleWinWebKit() || isWinCairo() || isPlayStation() || isFTW()) {</span>
          $configurationProductDir = File::Spec-&gt;catdir($baseProductDir, $configuration);
      } else {
          if (usesPerConfigurationBuildDirectory()) {
              $configurationProductDir = &quot;$baseProductDir&quot;;
          } else {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -807,10 +835,16 @@</span>
  {
      determineASanIsEnabled();
      return $asanIsEnabled;
  }
  
<span class="udiff-line-added">+ sub forceOptimizationLevel()</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     determineForceOptimizationLevel();</span>
<span class="udiff-line-added">+     return $forceOptimizationLevel;</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
  sub ltoMode()
  {
      determineLTOMode();
      return $ltoMode;
  }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -855,23 +889,35 @@</span>
  {
      determineBaseProductDir();
      determineConfiguration();
      determineArchitecture();
      determineASanIsEnabled();
<span class="udiff-line-added">+     determineForceOptimizationLevel();</span>
<span class="udiff-line-added">+     determineCoverageIsEnabled();</span>
      determineLTOMode();
      determineXcodeSDK();
  
      my @options;
      push @options, &quot;-UseSanitizedBuildSystemEnvironment=YES&quot;;
      push @options, &quot;-ShowBuildOperationDuration=YES&quot;;
      push @options, (&quot;-configuration&quot;, $configuration);
      push @options, (&quot;-xcconfig&quot;, sourceDir() . &quot;/Tools/asan/asan.xcconfig&quot;, &quot;ASAN_IGNORE=&quot; . sourceDir() . &quot;/Tools/asan/webkit-asan-ignore.txt&quot;) if $asanIsEnabled;
<span class="udiff-line-added">+     push @options, (&quot;-xcconfig&quot;, sourceDir() . &quot;/Tools/coverage/coverage.xcconfig&quot;) if $coverageIsEnabled;</span>
<span class="udiff-line-added">+     push @options, (&quot;GCC_OPTIMIZATION_LEVEL=$forceOptimizationLevel&quot;) if $forceOptimizationLevel;</span>
      push @options, &quot;WK_LTO_MODE=$ltoMode&quot; if $ltoMode;
      push @options, @baseProductDirOption;
      push @options, &quot;ARCHS=$architecture&quot; if $architecture;
      push @options, &quot;SDKROOT=$xcodeSDK&quot; if $xcodeSDK;
<span class="udiff-line-modified-removed">-     if (willUseIOSDeviceSDK()) {</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-added">+     # When this environment variable is set Tools/Scripts/check-for-weak-vtables-and-externals</span>
<span class="udiff-line-added">+     # treats errors as non-fatal when it encounters missing symbols related to coverage.</span>
<span class="udiff-line-added">+     appendToEnvironmentVariableList(&quot;WEBKIT_COVERAGE_BUILD&quot;, &quot;1&quot;) if $coverageIsEnabled;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     die &quot;cannot enable both ASAN and Coverage at this time\n&quot; if $coverageIsEnabled &amp;&amp; $asanIsEnabled;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (willUseIOSDeviceSDK() || willUseWatchDeviceSDK() || willUseAppleTVDeviceSDK()) {</span>
<span class="udiff-line-added">+         push @options, &quot;-IDEProvisioningProfileSupportRelaxed=YES&quot;;</span>
          push @options, &quot;ENABLE_BITCODE=NO&quot;;
          if (hasIOSDevelopmentCertificate()) {
              # FIXME: May match more than one installed development certificate.
              push @options, &quot;CODE_SIGN_IDENTITY=&quot; . IOS_DEVELOPMENT_CERTIFICATE_NAME_PREFIX;
          } else {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -927,10 +973,14 @@</span>
          $passedConfiguration = &quot;Debug&quot;;
      } elsif(checkForArgumentAndRemoveFromARGV(&quot;--release&quot;)) {
          $passedConfiguration = &quot;Release&quot;;
      } elsif (checkForArgumentAndRemoveFromARGV(&quot;--profile&quot;) || checkForArgumentAndRemoveFromARGV(&quot;--profiling&quot;)) {
          $passedConfiguration = &quot;Profiling&quot;;
<span class="udiff-line-added">+     } elsif(checkForArgumentAndRemoveFromARGV(&quot;--testing&quot;)) {</span>
<span class="udiff-line-added">+         $passedConfiguration = &quot;Testing&quot;;</span>
<span class="udiff-line-added">+     } elsif(checkForArgumentAndRemoveFromARGV(&quot;--release-and-assert&quot;) || checkForArgumentAndRemoveFromARGV(&quot;--ra&quot;)) {</span>
<span class="udiff-line-added">+         $passedConfiguration = &quot;Release+Assert&quot;;</span>
      }
  }
  
  sub passedConfiguration
  {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1048,11 +1098,11 @@</span>
          return &quot;$configurationProductDir/$libraryName.framework/$libraryName&quot;;
      }
      if (isAppleCocoaWebKit()) {
          return &quot;$configurationProductDir/$libraryName.framework/Versions/A/$libraryName&quot;;
      }
<span class="udiff-line-modified-removed">-     if (isAppleWinWebKit()) {</span>
<span class="udiff-line-modified-added">+     if (isAppleWinWebKit() || isFTW()) {</span>
          if ($libraryName eq &quot;JavaScriptCore&quot;) {
              return &quot;$baseProductDir/lib/$libraryName.lib&quot;;
          } else {
              return &quot;$baseProductDir/$libraryName.intermediate/$configuration/$libraryName.intermediate/$libraryName.lib&quot;;
          }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1174,10 +1224,11 @@</span>
  sub determinePortName()
  {
      return if defined $portName;
  
      my %argToPortName = (
<span class="udiff-line-added">+         ftw =&gt; FTW,</span>
          gtk =&gt; GTK,
          &#39;jsc-only&#39; =&gt; JSCOnly,
          playstation =&gt; PlayStation,
          wincairo =&gt; WinCairo,
          java =&gt; Java,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1275,10 +1326,15 @@</span>
  sub isFedoraBased()
  {
      return -e &quot;/etc/fedora-release&quot;;
  }
  
<span class="udiff-line-added">+ sub isFTW()</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     return portName() eq FTW;</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
  sub isWinCairo()
  {
      return portName() eq WinCairo;
  }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1301,11 +1357,11 @@</span>
  }
  
  sub determineIsWin64()
  {
      return if defined($isWin64);
<span class="udiff-line-modified-removed">-     $isWin64 = checkForArgumentAndRemoveFromARGV(&quot;--64-bit&quot;) || ((isWinCairo() || isJSCOnly()) &amp;&amp; !shouldBuild32Bit());</span>
<span class="udiff-line-modified-added">+     $isWin64 = checkForArgumentAndRemoveFromARGV(&quot;--64-bit&quot;) || ((isAnyWindows() || isJSCOnly()) &amp;&amp; !shouldBuild32Bit());</span>
  }
  
  sub determineIsWin64FromArchitecture($)
  {
      my $arch = shift;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1399,11 +1455,16 @@</span>
      $compiler = $ENV{&#39;CC&#39;} if (defined($ENV{&#39;CC&#39;}));
      if ($compiler =~ /gcc/) {
          my $compilerOptions = `$compiler -v 2&gt;&amp;1`;
          my @host = $compilerOptions =~ m/--host=(.*?)\s/;
          my @target = $compilerOptions =~ m/--target=(.*?)\s/;
<span class="udiff-line-modified-removed">-         if ($target[0] ne &quot;&quot; &amp;&amp; $host[0] ne &quot;&quot;) {</span>
<span class="udiff-line-modified-added">+         if (!@target || !@host) {</span>
<span class="udiff-line-added">+             # Sometimes a compiler does not report the host of target it was compiled for,</span>
<span class="udiff-line-added">+             # in which case, lacking better information we assume we are not cross-compiling.</span>
<span class="udiff-line-added">+             return 0;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+         elsif ($target[0] ne &quot;&quot; &amp;&amp; $host[0] ne &quot;&quot;) {</span>
                  return ($host[0] ne $target[0]);
          } else {
                  # $tempDir gets automatically deleted when goes out of scope
                  my $tempDir = File::Temp-&gt;newdir();
                  my $testProgramSourcePath = File::Spec-&gt;catfile($tempDir, &quot;testcross.c&quot;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1567,14 +1628,14 @@</span>
  sub splitVersionString
  {
      my $versionString = shift;
      my @splitVersion = split(/\./, $versionString);
      @splitVersion &gt;= 2 or die &quot;Invalid version $versionString&quot;;
<span class="udiff-line-modified-removed">-     $osXVersion = {</span>
<span class="udiff-line-modified-removed">-             &quot;major&quot; =&gt; $splitVersion[0],</span>
<span class="udiff-line-modified-removed">-             &quot;minor&quot; =&gt; $splitVersion[1],</span>
<span class="udiff-line-modified-removed">-             &quot;subminor&quot; =&gt; (defined($splitVersion[2]) ? $splitVersion[2] : 0),</span>
<span class="udiff-line-modified-added">+     return {</span>
<span class="udiff-line-modified-added">+         &quot;major&quot; =&gt; $splitVersion[0],</span>
<span class="udiff-line-modified-added">+         &quot;minor&quot; =&gt; $splitVersion[1],</span>
<span class="udiff-line-modified-added">+         &quot;subminor&quot; =&gt; (defined($splitVersion[2]) ? $splitVersion[2] : 0),</span>
      };
  }
  
  sub determineOSXVersion()
  {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1583,11 +1644,11 @@</span>
      if (!isDarwin()) {
          $osXVersion = -1;
          return;
      }
  
<span class="udiff-line-modified-removed">-     my $versionString = `sw_vers -productVersion`;</span>
<span class="udiff-line-modified-added">+     chomp(my $versionString = `sw_vers -productVersion`);</span>
      $osXVersion = splitVersionString($versionString);
  }
  
  sub osXVersion()
  {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1711,11 +1772,11 @@</span>
  {
      if (isGtk() || isWPE()) {
          return &quot;MiniBrowser&quot;;
      } elsif (isAppleMacWebKit()) {
          return &quot;Safari&quot;;
<span class="udiff-line-modified-removed">-     } elsif (isAppleWinWebKit()) {</span>
<span class="udiff-line-modified-added">+     } elsif (isAppleWinWebKit() || isFTW()) {</span>
          return &quot;MiniBrowser&quot;;
      }
  }
  
  sub checkRequiredSystemConfig
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1814,11 +1875,11 @@</span>
      print &quot;Installed tools are correct for the WebKit build.\n&quot;;
  }
  
  sub setupAppleWinEnv()
  {
<span class="udiff-line-modified-removed">-     return unless isAppleWinWebKit();</span>
<span class="udiff-line-modified-added">+     return unless isAppleWinWebKit() || isFTW();</span>
  
      checkInstalledTools();
  
      if (isWindowsNT()) {
          my $restartNeeded = 0;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1911,10 +1972,22 @@</span>
          push(@extraOptions, &quot;-alltargets&quot;);
          push(@extraOptions, &quot;clean&quot;);
      }
  
      chomp($ENV{DSYMUTIL_NUM_THREADS} = `sysctl -n hw.activecpu`);
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     # lldbWebKitTester won&#39;t work with the wrong CLANG_DEBUG_INFORMATION_LEVEL, so always use the default for that project</span>
<span class="udiff-line-added">+     if ($project eq &quot;lldbWebKitTester&quot;) {</span>
<span class="udiff-line-added">+         my $index = 0;</span>
<span class="udiff-line-added">+         while ($index &lt; scalar(@extraOptions)) {</span>
<span class="udiff-line-added">+             if ($extraOptions[$index] =~ /CLANG_DEBUG_INFORMATION_LEVEL=/) {</span>
<span class="udiff-line-added">+                 splice @extraOptions, $index, 1;</span>
<span class="udiff-line-added">+             } else {</span>
<span class="udiff-line-added">+                 $index += 1;</span>
<span class="udiff-line-added">+             }</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+     }</span>
      return system &quot;xcodebuild&quot;, &quot;-project&quot;, &quot;$project.xcodeproj&quot;, @extraOptions;
  }
  
  sub getVisualStudioToolset()
  {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2229,10 +2302,11 @@</span>
      } elsif (isAnyWindows()) {
          return File::Spec-&gt;catfile(baseProductDir(), configuration(), &quot;WebKit.sln&quot;)
      } else {
          return File::Spec-&gt;catfile(baseProductDir(), configuration(), &quot;Makefile&quot;)
      }
<span class="udiff-line-added">+     return 0;</span>
  }
  
  sub generateBuildSystemFromCMakeProject
  {
      my ($prefixPath, @cmakeArgs) = @_;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2293,11 +2367,11 @@</span>
  
      # Do not show progress of generating bindings in interactive Ninja build not to leave noisy lines on tty
      push @args, &#39;-DSHOW_BINDINGS_GENERATION_PROGRESS=1&#39; unless ($willUseNinja &amp;&amp; -t STDOUT);
  
      # Some ports have production mode, but build-webkit should always use developer mode.
<span class="udiff-line-modified-removed">-     push @args, &quot;-DDEVELOPER_MODE=ON&quot; if isGtk() || isJSCOnly() || isWPE() || isWinCairo();</span>
<span class="udiff-line-modified-added">+     push @args, &quot;-DDEVELOPER_MODE=ON&quot; if isGtk() || isJSCOnly() || isWPE() || isWin64();</span>
  
      if (architecture() eq &quot;x86_64&quot; &amp;&amp; shouldBuild32Bit() &amp;&amp; !(isJava() &amp;&amp; isCygwin())) {
          # CMAKE_LIBRARY_ARCHITECTURE is needed to get the right .pc
          # files in Debian-based systems, for the others
          # CMAKE_PREFIX_PATH will get us /usr/lib, which should be the
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2333,10 +2407,12 @@</span>
      if ($ENV{VERBOSE} &amp;&amp; canUseNinja()) {
          push @makeArgs, &quot;-v&quot;;
          push @makeArgs, &quot;-d keeprsp&quot; if (version-&gt;parse(determineNinjaVersion()) &gt;= version-&gt;parse(&quot;1.4.0&quot;));
      }
  
<span class="udiff-line-added">+     chomp($buildPath = `cygpath -m &#39;$buildPath&#39;`) if isCygwin();</span>
<span class="udiff-line-added">+ </span>
      my $command = &quot;cmake&quot;;
      my @args = (&quot;--build&quot;, $buildPath, &quot;--config&quot;, $config);
      push @args, (&quot;--&quot;, @makeArgs) if @makeArgs;
  
      # GTK and JSCOnly can use a build script to preserve colors and pretty-printing.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2460,11 +2536,11 @@</span>
  {
      my ($env) = @_;
  
      if (isAnyWindows()) {
          my $productBinaryDir = executableProductDir();
<span class="udiff-line-modified-removed">-         if (isAppleWinWebKit()) {</span>
<span class="udiff-line-modified-added">+         if (isAppleWinWebKit() || isFTW()) {</span>
              $env-&gt;{PATH} = join(&#39;:&#39;, $productBinaryDir, appleApplicationSupportPath(), $env-&gt;{PATH} || &quot;&quot;);
          } elsif (isWinCairo()) {
              my $winCairoBin = sourceDir() . &quot;/WebKitLibraries/win/&quot; . (isWin64() ? &quot;bin64/&quot; : &quot;bin32/&quot;);
              my $gstreamerBin = isWin64() ? $ENV{&quot;GSTREAMER_1_0_ROOT_X86_64&quot;} . &quot;bin&quot; : $ENV{&quot;GSTREAMER_1_0_ROOT_X86&quot;} . &quot;bin&quot;;
              $env-&gt;{PATH} = join(&#39;:&#39;, $productBinaryDir, $winCairoBin, $gstreamerBin, $env-&gt;{PATH} || &quot;&quot;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2494,12 +2570,10 @@</span>
  sub argumentsForRunAndDebugMacWebKitApp()
  {
      my @args = ();
      if (checkForArgumentAndRemoveFromARGV(&quot;--no-saved-state&quot;)) {
          push @args, (&quot;-ApplePersistenceIgnoreStateQuietly&quot;, &quot;YES&quot;);
<span class="udiff-line-removed">-         # FIXME: Don&#39;t set ApplePersistenceIgnoreState once all supported OS versions respect ApplePersistenceIgnoreStateQuietly (rdar://15032886).</span>
<span class="udiff-line-removed">-         push @args, (&quot;-ApplePersistenceIgnoreState&quot;, &quot;YES&quot;);</span>
      }
  
      my $lang;
      if (checkForArgumentAndRemoveFromARGVGettingValue(&quot;--lang&quot;, \$lang)) {
          push @args, (&quot;-AppleLanguages&quot;, &quot;(&quot; . $lang . &quot;)&quot;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2550,11 +2624,11 @@</span>
  }
  
  sub iosSimulatorApplicationsPath()
  {
      # FIXME: We should ask simctl for this information, instead of guessing from available runtimes.
<span class="udiff-line-modified-removed">-     my $runtimePath = File::Spec-&gt;catdir(sdkPlatformDirectory(&quot;iphoneos&quot;), &quot;Developer&quot;, &quot;Library&quot;, &quot;CoreSimulator&quot;, &quot;Profiles&quot;, &quot;Runtimes&quot;);</span>
<span class="udiff-line-modified-added">+     my $runtimePath = File::Spec-&gt;catdir(sdkPlatformDirectory(&quot;iphoneos&quot;), &quot;Library&quot;, &quot;Developer&quot;, &quot;CoreSimulator&quot;, &quot;Profiles&quot;, &quot;Runtimes&quot;);</span>
      opendir(RUNTIMES, $runtimePath);
      my @runtimes = grep {/.*\.simruntime/} readdir(RUNTIMES);
      close(RUNTIMES);
      my $sult = File::Spec-&gt;catdir($runtimePath, @runtimes ? $runtimes[0] : &quot;iOS.simruntime&quot;, &quot;Contents&quot;, &quot;Resources&quot;, &quot;RuntimeRoot&quot;, &quot;Applications&quot;);
      return $sult;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2917,11 +2991,11 @@</span>
  
      if (isAppleMacWebKit()) {
          return runMacWebKitApp(safariPath());
      }
  
<span class="udiff-line-modified-removed">-     if (isAppleWinWebKit()) {</span>
<span class="udiff-line-modified-added">+     if (isAppleWinWebKit() || isFTW()) {</span>
          my $result;
          my $webKitLauncherPath = File::Spec-&gt;catfile(executableProductDir(), &quot;MiniBrowser.exe&quot;);
          return system { $webKitLauncherPath } $webKitLauncherPath, @ARGV;
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2931,11 +3005,11 @@</span>
  sub runMiniBrowser
  {
      if (isAppleMacWebKit()) {
          return runMacWebKitApp(File::Spec-&gt;catfile(productDir(), &quot;MiniBrowser.app&quot;, &quot;Contents&quot;, &quot;MacOS&quot;, &quot;MiniBrowser&quot;));
      }
<span class="udiff-line-modified-removed">-     if (isAppleWinWebKit()) {</span>
<span class="udiff-line-modified-added">+     if (isAppleWinWebKit() || isFTW()) {</span>
          my $webKitLauncherPath = File::Spec-&gt;catfile(executableProductDir(), &quot;MiniBrowser.exe&quot;);
          return system { $webKitLauncherPath } $webKitLauncherPath, @ARGV;
      }
      return 1;
  }
</pre>
<center><a href="set-webkit-configuration.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="webkitperl/FeatureList.pm.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>