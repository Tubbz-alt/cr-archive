<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/inspector/agents/InspectorIndexedDBAgent.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="InspectorDatabaseAgent.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="InspectorIndexedDBAgent.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/inspector/agents/InspectorIndexedDBAgent.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 220,11 ***</span>
      static Ref&lt;DatabaseLoader&gt; create(ScriptExecutionContext* context, Ref&lt;RequestDatabaseCallback&gt;&amp;&amp; requestCallback)
      {
          return adoptRef(*new DatabaseLoader(context, WTFMove(requestCallback)));
      }
  
<span class="line-modified">!     virtual ~DatabaseLoader() = default;</span>
  
      void execute(IDBDatabase&amp; database) override
      {
          if (!requestCallback().isActive())
              return;
<span class="line-new-header">--- 220,11 ---</span>
      static Ref&lt;DatabaseLoader&gt; create(ScriptExecutionContext* context, Ref&lt;RequestDatabaseCallback&gt;&amp;&amp; requestCallback)
      {
          return adoptRef(*new DatabaseLoader(context, WTFMove(requestCallback)));
      }
  
<span class="line-modified">!     ~DatabaseLoader() override = default;</span>
  
      void execute(IDBDatabase&amp; database) override
      {
          if (!requestCallback().isActive())
              return;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 354,11 ***</span>
      static Ref&lt;OpenCursorCallback&gt; create(InjectedScript injectedScript, Ref&lt;RequestDataCallback&gt;&amp;&amp; requestCallback, int skipCount, unsigned pageSize)
      {
          return adoptRef(*new OpenCursorCallback(injectedScript, WTFMove(requestCallback), skipCount, pageSize));
      }
  
<span class="line-modified">!     virtual ~OpenCursorCallback() = default;</span>
  
      bool operator==(const EventListener&amp; other) const override
      {
          return this == &amp;other;
      }
<span class="line-new-header">--- 354,11 ---</span>
      static Ref&lt;OpenCursorCallback&gt; create(InjectedScript injectedScript, Ref&lt;RequestDataCallback&gt;&amp;&amp; requestCallback, int skipCount, unsigned pageSize)
      {
          return adoptRef(*new OpenCursorCallback(injectedScript, WTFMove(requestCallback), skipCount, pageSize));
      }
  
<span class="line-modified">!     ~OpenCursorCallback() override = default;</span>
  
      bool operator==(const EventListener&amp; other) const override
      {
          return this == &amp;other;
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 402,14 ***</span>
          if (cursor-&gt;continueFunction(nullptr).hasException()) {
              m_requestCallback-&gt;sendFailure(&quot;Could not continue cursor.&quot;);
              return;
          }
  
<span class="line-modified">!         auto* state = context.execState();</span>
<span class="line-modified">!         auto key =  toJS(*state, *state-&gt;lexicalGlobalObject(), cursor-&gt;key());</span>
<span class="line-modified">!         auto primaryKey = toJS(*state, *state-&gt;lexicalGlobalObject(), cursor-&gt;primaryKey());</span>
<span class="line-modified">!         auto value = deserializeIDBValueToJSValue(*state, cursor-&gt;value());</span>
          auto dataEntry = DataEntry::create()
              .setKey(m_injectedScript.wrapObject(key, String(), true))
              .setPrimaryKey(m_injectedScript.wrapObject(primaryKey, String(), true))
              .setValue(m_injectedScript.wrapObject(value, String(), true))
              .release();
<span class="line-new-header">--- 402,14 ---</span>
          if (cursor-&gt;continueFunction(nullptr).hasException()) {
              m_requestCallback-&gt;sendFailure(&quot;Could not continue cursor.&quot;);
              return;
          }
  
<span class="line-modified">!         auto* lexicalGlobalObject = context.execState();</span>
<span class="line-modified">!         auto key =  toJS(*lexicalGlobalObject, *lexicalGlobalObject, cursor-&gt;key());</span>
<span class="line-modified">!         auto primaryKey = toJS(*lexicalGlobalObject, *lexicalGlobalObject, cursor-&gt;primaryKey());</span>
<span class="line-modified">!         auto value = deserializeIDBValueToJSValue(*lexicalGlobalObject, cursor-&gt;value());</span>
          auto dataEntry = DataEntry::create()
              .setKey(m_injectedScript.wrapObject(key, String(), true))
              .setPrimaryKey(m_injectedScript.wrapObject(primaryKey, String(), true))
              .setValue(m_injectedScript.wrapObject(value, String(), true))
              .release();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 445,11 ***</span>
      static Ref&lt;DataLoader&gt; create(ScriptExecutionContext* context, Ref&lt;RequestDataCallback&gt;&amp;&amp; requestCallback, const InjectedScript&amp; injectedScript, const String&amp; objectStoreName, const String&amp; indexName, RefPtr&lt;IDBKeyRange&gt;&amp;&amp; idbKeyRange, int skipCount, unsigned pageSize)
      {
          return adoptRef(*new DataLoader(context, WTFMove(requestCallback), injectedScript, objectStoreName, indexName, WTFMove(idbKeyRange), skipCount, pageSize));
      }
  
<span class="line-modified">!     virtual ~DataLoader() = default;</span>
  
      void execute(IDBDatabase&amp; database) override
      {
          if (!requestCallback().isActive())
              return;
<span class="line-new-header">--- 445,11 ---</span>
      static Ref&lt;DataLoader&gt; create(ScriptExecutionContext* context, Ref&lt;RequestDataCallback&gt;&amp;&amp; requestCallback, const InjectedScript&amp; injectedScript, const String&amp; objectStoreName, const String&amp; indexName, RefPtr&lt;IDBKeyRange&gt;&amp;&amp; idbKeyRange, int skipCount, unsigned pageSize)
      {
          return adoptRef(*new DataLoader(context, WTFMove(requestCallback), injectedScript, objectStoreName, indexName, WTFMove(idbKeyRange), skipCount, pageSize));
      }
  
<span class="line-modified">!     ~DataLoader() override = default;</span>
  
      void execute(IDBDatabase&amp; database) override
      {
          if (!requestCallback().isActive())
              return;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 649,11 ***</span>
      static Ref&lt;ClearObjectStoreListener&gt; create(Ref&lt;ClearObjectStoreCallback&gt; requestCallback)
      {
          return adoptRef(*new ClearObjectStoreListener(WTFMove(requestCallback)));
      }
  
<span class="line-modified">!     virtual ~ClearObjectStoreListener() = default;</span>
  
      bool operator==(const EventListener&amp; other) const override
      {
          return this == &amp;other;
      }
<span class="line-new-header">--- 649,11 ---</span>
      static Ref&lt;ClearObjectStoreListener&gt; create(Ref&lt;ClearObjectStoreCallback&gt; requestCallback)
      {
          return adoptRef(*new ClearObjectStoreListener(WTFMove(requestCallback)));
      }
  
<span class="line-modified">!     ~ClearObjectStoreListener() override = default;</span>
  
      bool operator==(const EventListener&amp; other) const override
      {
          return this == &amp;other;
      }
</pre>
<center><a href="InspectorDatabaseAgent.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="InspectorIndexedDBAgent.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>