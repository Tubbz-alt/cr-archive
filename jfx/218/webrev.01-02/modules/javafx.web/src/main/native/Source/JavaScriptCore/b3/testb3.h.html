<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/JavaScriptCore/b3/testb3.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
   1 /*
   2  * Copyright (C) 2019-2020 Apple Inc. All rights reserved.
   3  *
   4  * Redistribution and use in source and binary forms, with or without
   5  * modification, are permitted provided that the following conditions
   6  * are met:
   7  * 1. Redistributions of source code must retain the above copyright
   8  *    notice, this list of conditions and the following disclaimer.
   9  * 2. Redistributions in binary form must reproduce the above copyright
  10  *    notice, this list of conditions and the following disclaimer in the
  11  *    documentation and/or other materials provided with the distribution.
  12  *
  13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
  14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
  17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
  21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  24  */
  25 
  26 #pragma once
  27 
  28 #include &quot;AirCode.h&quot;
  29 #include &quot;AirInstInlines.h&quot;
  30 #include &quot;AirValidate.h&quot;
  31 #include &quot;AllowMacroScratchRegisterUsage.h&quot;
  32 #include &quot;B3ArgumentRegValue.h&quot;
  33 #include &quot;B3AtomicValue.h&quot;
  34 #include &quot;B3BasicBlockInlines.h&quot;
  35 #include &quot;B3BreakCriticalEdges.h&quot;
  36 #include &quot;B3CCallValue.h&quot;
  37 #include &quot;B3Compilation.h&quot;
  38 #include &quot;B3Compile.h&quot;
  39 #include &quot;B3ComputeDivisionMagic.h&quot;
  40 #include &quot;B3Const32Value.h&quot;
  41 #include &quot;B3Const64Value.h&quot;
  42 #include &quot;B3ConstPtrValue.h&quot;
  43 #include &quot;B3Effects.h&quot;
  44 #include &quot;B3FenceValue.h&quot;
  45 #include &quot;B3FixSSA.h&quot;
  46 #include &quot;B3Generate.h&quot;
  47 #include &quot;B3LowerToAir.h&quot;
  48 #include &quot;B3MathExtras.h&quot;
  49 #include &quot;B3MemoryValue.h&quot;
  50 #include &quot;B3MoveConstants.h&quot;
  51 #include &quot;B3NativeTraits.h&quot;
  52 #include &quot;B3Procedure.h&quot;
  53 #include &quot;B3ReduceLoopStrength.h&quot;
  54 #include &quot;B3ReduceStrength.h&quot;
  55 #include &quot;B3SlotBaseValue.h&quot;
  56 #include &quot;B3StackSlot.h&quot;
  57 #include &quot;B3StackmapGenerationParams.h&quot;
  58 #include &quot;B3SwitchValue.h&quot;
  59 #include &quot;B3UpsilonValue.h&quot;
  60 #include &quot;B3UseCounts.h&quot;
  61 #include &quot;B3Validate.h&quot;
  62 #include &quot;B3ValueInlines.h&quot;
  63 #include &quot;B3VariableValue.h&quot;
  64 #include &quot;B3WasmAddressValue.h&quot;
  65 #include &quot;B3WasmBoundsCheckValue.h&quot;
  66 #include &quot;CCallHelpers.h&quot;
  67 #include &quot;FPRInfo.h&quot;
  68 #include &quot;GPRInfo.h&quot;
  69 #include &quot;InitializeThreading.h&quot;
  70 #include &quot;JSCInlines.h&quot;
  71 #include &quot;LinkBuffer.h&quot;
  72 #include &quot;PureNaN.h&quot;
  73 #include &lt;cmath&gt;
  74 #include &lt;string&gt;
  75 #include &lt;wtf/FastTLS.h&gt;
  76 #include &lt;wtf/IndexSet.h&gt;
  77 #include &lt;wtf/ListDump.h&gt;
  78 #include &lt;wtf/Lock.h&gt;
  79 #include &lt;wtf/NumberOfCores.h&gt;
  80 #include &lt;wtf/StdList.h&gt;
  81 #include &lt;wtf/Threading.h&gt;
  82 #include &lt;wtf/text/StringCommon.h&gt;
  83 
  84 // We don&#39;t have a NO_RETURN_DUE_TO_EXIT, nor should we. That&#39;s ridiculous.
  85 inline bool hiddenTruthBecauseNoReturnIsStupid() { return true; }
  86 
  87 inline void usage()
  88 {
  89     dataLog(&quot;Usage: testb3 [&lt;filter&gt;]\n&quot;);
  90     if (hiddenTruthBecauseNoReturnIsStupid())
  91         exit(1);
  92 }
  93 
  94 #if ENABLE(B3_JIT)
  95 
  96 using namespace JSC;
  97 using namespace JSC::B3;
  98 
  99 inline bool shouldBeVerbose()
 100 {
 101     return shouldDumpIR(B3Mode);
 102 }
 103 
 104 extern Lock crashLock;
 105 
 106 // Nothing fancy for now; we just use the existing WTF assertion machinery.
 107 #define CHECK(x) do {                                                   \
 108     if (!!(x))                                                      \
 109         break;                                                      \
 110     crashLock.lock();                                               \
 111     WTFReportAssertionFailure(__FILE__, __LINE__, WTF_PRETTY_FUNCTION, #x); \
 112     CRASH();                                                        \
 113 } while (false)
 114 
 115 #define CHECK_EQ(x, y) do { \
 116     auto __x = (x); \
 117     auto __y = (y); \
 118     if (__x == __y) \
 119         break; \
 120     crashLock.lock(); \
 121     WTFReportAssertionFailure(__FILE__, __LINE__, WTF_PRETTY_FUNCTION, toCString(#x &quot; == &quot; #y, &quot; (&quot; #x &quot; == &quot;, __x, &quot;, &quot; #y &quot; == &quot;, __y, &quot;)&quot;).data()); \
 122     CRASH(); \
 123 } while (false)
 124 
 125 #define PREFIX &quot;O&quot;, Options::defaultB3OptLevel(), &quot;: &quot;
 126 
 127 #define RUN(test) do {                             \
 128     if (!shouldRun(filter, #test))                 \
 129         break;                                     \
 130     tasks.append(                                  \
 131         createSharedTask&lt;void()&gt;(                  \
 132             [&amp;] () {                               \
 133                 dataLog(PREFIX #test &quot;...\n&quot;);     \
 134                 test;                              \
 135                 dataLog(PREFIX #test &quot;: OK!\n&quot;);   \
 136             }));                                   \
 137     } while (false);
 138 
 139 #define RUN_UNARY(test, values) \
 140     for (auto a : values) {                             \
 141         CString testStr = toCString(PREFIX #test, &quot;(&quot;, a.name, &quot;)&quot;); \
 142         if (!shouldRun(filter, testStr.data()))         \
 143             continue;                                   \
 144         tasks.append(createSharedTask&lt;void()&gt;(          \
 145             [=] () {                                    \
 146                 dataLog(toCString(testStr, &quot;...\n&quot;));   \
 147                 test(a.value);                          \
 148                 dataLog(toCString(testStr, &quot;: OK!\n&quot;)); \
 149             }));                                        \
 150     }
 151 
 152 #define RUN_NOW(test) do {                      \
 153         if (!shouldRun(filter, #test))          \
 154             break;                              \
 155         dataLog(PREFIX #test &quot;...\n&quot;);          \
 156         test;                                   \
 157         dataLog(PREFIX #test &quot;: OK!\n&quot;);        \
 158     } while (false)
 159 
 160 #define RUN_BINARY(test, valuesA, valuesB) \
 161     for (auto a : valuesA) {                                \
 162         for (auto b : valuesB) {                            \
 163             CString testStr = toCString(PREFIX #test, &quot;(&quot;, a.name, &quot;, &quot;, b.name, &quot;)&quot;); \
 164             if (!shouldRun(filter, testStr.data()))         \
 165                 continue;                                   \
 166             tasks.append(createSharedTask&lt;void()&gt;(          \
 167                 [=] () {                                    \
 168                     dataLog(toCString(testStr, &quot;...\n&quot;));   \
 169                     test(a.value, b.value);                 \
 170                     dataLog(toCString(testStr, &quot;: OK!\n&quot;)); \
 171                 }));                                        \
 172         }                                                   \
 173     }
 174 #define RUN_TERNARY(test, valuesA, valuesB, valuesC) \
 175     for (auto a : valuesA) {                                    \
 176         for (auto b : valuesB) {                                \
 177             for (auto c : valuesC) {                            \
 178                 CString testStr = toCString(#test, &quot;(&quot;, a.name, &quot;, &quot;, b.name, &quot;,&quot;, c.name, &quot;)&quot;); \
 179                 if (!shouldRun(filter, testStr.data()))         \
 180                     continue;                                   \
 181                 tasks.append(createSharedTask&lt;void()&gt;(          \
 182                     [=] () {                                    \
 183                         dataLog(toCString(testStr, &quot;...\n&quot;));   \
 184                         test(a.value, b.value, c.value);        \
 185                         dataLog(toCString(testStr, &quot;: OK!\n&quot;)); \
 186                     }));                                        \
 187             }                                                   \
 188         }                                                       \
 189     }
 190 
 191 
 192 inline std::unique_ptr&lt;Compilation&gt; compileProc(Procedure&amp; procedure, unsigned optLevel = Options::defaultB3OptLevel())
 193 {
 194     procedure.setOptLevel(optLevel);
 195     return makeUnique&lt;Compilation&gt;(B3::compile(procedure));
 196 }
 197 
 198 template&lt;typename T, typename... Arguments&gt;
 199 T invoke(MacroAssemblerCodePtr&lt;B3CompilationPtrTag&gt; ptr, Arguments... arguments)
 200 {
 201     void* executableAddress = untagCFunctionPtr&lt;B3CompilationPtrTag&gt;(ptr.executableAddress());
 202     T (*function)(Arguments...) = bitwise_cast&lt;T(*)(Arguments...)&gt;(executableAddress);
 203     return function(arguments...);
 204 }
 205 
 206 template&lt;typename T, typename... Arguments&gt;
 207 T invoke(const Compilation&amp; code, Arguments... arguments)
 208 {
 209     return invoke&lt;T&gt;(code.code(), arguments...);
 210 }
 211 
 212 template&lt;typename T, typename... Arguments&gt;
 213 T compileAndRun(Procedure&amp; procedure, Arguments... arguments)
 214 {
 215     return invoke&lt;T&gt;(*compileProc(procedure), arguments...);
 216 }
 217 
 218 inline void lowerToAirForTesting(Procedure&amp; proc)
 219 {
 220     proc.resetReachability();
 221 
 222     if (shouldBeVerbose())
 223         dataLog(&quot;B3 before lowering:\n&quot;, proc);
 224 
 225     validate(proc);
 226     lowerToAir(proc);
 227 
 228     if (shouldBeVerbose())
 229         dataLog(&quot;Air after lowering:\n&quot;, proc.code());
 230 
 231     Air::validate(proc.code());
 232 }
 233 
 234 template&lt;typename Func&gt;
 235 void checkDisassembly(Compilation&amp; compilation, const Func&amp; func, const CString&amp; failText)
 236 {
 237     CString disassembly = compilation.disassembly();
 238     if (func(disassembly.data()))
 239         return;
 240 
 241     crashLock.lock();
 242     dataLog(&quot;Bad lowering!  &quot;, failText, &quot;\n&quot;);
 243     dataLog(disassembly);
 244     CRASH();
 245 }
 246 
 247 inline void checkUsesInstruction(Compilation&amp; compilation, const char* text)
 248 {
 249     checkDisassembly(
 250         compilation,
 251         [&amp;] (const char* disassembly) -&gt; bool {
 252             return strstr(disassembly, text);
 253         },
 254         toCString(&quot;Expected to find &quot;, text, &quot; but didnt!&quot;));
 255 }
 256 
 257 inline void checkDoesNotUseInstruction(Compilation&amp; compilation, const char* text)
 258 {
 259     checkDisassembly(
 260         compilation,
 261         [&amp;] (const char* disassembly) -&gt; bool {
 262             return !strstr(disassembly, text);
 263         },
 264         toCString(&quot;Did not expected to find &quot;, text, &quot; but it&#39;s there!&quot;));
 265 }
 266 
 267 template&lt;typename Type&gt;
 268 struct B3Operand {
 269     const char* name;
 270     Type value;
 271 };
 272 
 273 typedef B3Operand&lt;int64_t&gt; Int64Operand;
 274 typedef B3Operand&lt;int32_t&gt; Int32Operand;
 275 typedef B3Operand&lt;int16_t&gt; Int16Operand;
 276 typedef B3Operand&lt;int8_t&gt; Int8Operand;
 277 
 278 #define MAKE_OPERAND(value) B3Operand&lt;decltype(value)&gt; { #value, value }
 279 
 280 template&lt;typename FloatType&gt;
 281 void populateWithInterestingValues(Vector&lt;B3Operand&lt;FloatType&gt;&gt;&amp; operands)
 282 {
 283     operands.append({ &quot;0.&quot;, static_cast&lt;FloatType&gt;(0.) });
 284     operands.append({ &quot;-0.&quot;, static_cast&lt;FloatType&gt;(-0.) });
 285     operands.append({ &quot;0.4&quot;, static_cast&lt;FloatType&gt;(0.5) });
 286     operands.append({ &quot;-0.4&quot;, static_cast&lt;FloatType&gt;(-0.5) });
 287     operands.append({ &quot;0.5&quot;, static_cast&lt;FloatType&gt;(0.5) });
 288     operands.append({ &quot;-0.5&quot;, static_cast&lt;FloatType&gt;(-0.5) });
 289     operands.append({ &quot;0.6&quot;, static_cast&lt;FloatType&gt;(0.6) });
 290     operands.append({ &quot;-0.6&quot;, static_cast&lt;FloatType&gt;(-0.6) });
 291     operands.append({ &quot;1.&quot;, static_cast&lt;FloatType&gt;(1.) });
 292     operands.append({ &quot;-1.&quot;, static_cast&lt;FloatType&gt;(-1.) });
 293     operands.append({ &quot;2.&quot;, static_cast&lt;FloatType&gt;(2.) });
 294     operands.append({ &quot;-2.&quot;, static_cast&lt;FloatType&gt;(-2.) });
 295     operands.append({ &quot;M_PI&quot;, static_cast&lt;FloatType&gt;(M_PI) });
 296     operands.append({ &quot;-M_PI&quot;, static_cast&lt;FloatType&gt;(-M_PI) });
 297     operands.append({ &quot;min&quot;, std::numeric_limits&lt;FloatType&gt;::min() });
 298     operands.append({ &quot;max&quot;, std::numeric_limits&lt;FloatType&gt;::max() });
 299     operands.append({ &quot;lowest&quot;, std::numeric_limits&lt;FloatType&gt;::lowest() });
 300     operands.append({ &quot;epsilon&quot;, std::numeric_limits&lt;FloatType&gt;::epsilon() });
 301     operands.append({ &quot;infiniti&quot;, std::numeric_limits&lt;FloatType&gt;::infinity() });
 302     operands.append({ &quot;-infiniti&quot;, - std::numeric_limits&lt;FloatType&gt;::infinity() });
 303     operands.append({ &quot;PNaN&quot;, static_cast&lt;FloatType&gt;(PNaN) });
 304 }
 305 
 306 template&lt;typename FloatType&gt;
 307 Vector&lt;B3Operand&lt;FloatType&gt;&gt; floatingPointOperands()
 308 {
 309     Vector&lt;B3Operand&lt;FloatType&gt;&gt; operands;
 310     populateWithInterestingValues(operands);
 311     return operands;
 312 };
 313 
 314 inline Vector&lt;Int64Operand&gt; int64Operands()
 315 {
 316     Vector&lt;Int64Operand&gt; operands;
 317     operands.append({ &quot;0&quot;, 0 });
 318     operands.append({ &quot;1&quot;, 1 });
 319     operands.append({ &quot;-1&quot;, -1 });
 320     operands.append({ &quot;42&quot;, 42 });
 321     operands.append({ &quot;-42&quot;, -42 });
 322     operands.append({ &quot;int64-max&quot;, std::numeric_limits&lt;int64_t&gt;::max() });
 323     operands.append({ &quot;int64-min&quot;, std::numeric_limits&lt;int64_t&gt;::min() });
 324     operands.append({ &quot;int32-max&quot;, std::numeric_limits&lt;int32_t&gt;::max() });
 325     operands.append({ &quot;int32-min&quot;, std::numeric_limits&lt;int32_t&gt;::min() });
 326     operands.append({ &quot;uint64-max&quot;, static_cast&lt;int64_t&gt;(std::numeric_limits&lt;uint64_t&gt;::max()) });
 327     operands.append({ &quot;uint64-min&quot;, static_cast&lt;int64_t&gt;(std::numeric_limits&lt;uint64_t&gt;::min()) });
 328     operands.append({ &quot;uint32-max&quot;, static_cast&lt;int64_t&gt;(std::numeric_limits&lt;uint32_t&gt;::max()) });
 329     operands.append({ &quot;uint32-min&quot;, static_cast&lt;int64_t&gt;(std::numeric_limits&lt;uint32_t&gt;::min()) });
 330 
 331     return operands;
 332 }
 333 
 334 inline Vector&lt;Int32Operand&gt; int32Operands()
 335 {
 336     Vector&lt;Int32Operand&gt; operands({
 337         { &quot;0&quot;, 0 },
 338         { &quot;1&quot;, 1 },
 339         { &quot;-1&quot;, -1 },
 340         { &quot;42&quot;, 42 },
 341         { &quot;-42&quot;, -42 },
 342         { &quot;int32-max&quot;, std::numeric_limits&lt;int32_t&gt;::max() },
 343         { &quot;int32-min&quot;, std::numeric_limits&lt;int32_t&gt;::min() },
 344         { &quot;uint32-max&quot;, static_cast&lt;int32_t&gt;(std::numeric_limits&lt;uint32_t&gt;::max()) },
 345         { &quot;uint32-min&quot;, static_cast&lt;int32_t&gt;(std::numeric_limits&lt;uint32_t&gt;::min()) }
 346     });
 347     return operands;
 348 }
 349 
 350 inline Vector&lt;Int16Operand&gt; int16Operands()
 351 {
 352     Vector&lt;Int16Operand&gt; operands({
 353         { &quot;0&quot;, 0 },
 354         { &quot;1&quot;, 1 },
 355         { &quot;-1&quot;, -1 },
 356         { &quot;42&quot;, 42 },
 357         { &quot;-42&quot;, -42 },
 358         { &quot;int16-max&quot;, std::numeric_limits&lt;int16_t&gt;::max() },
 359         { &quot;int16-min&quot;, std::numeric_limits&lt;int16_t&gt;::min() },
 360         { &quot;uint16-max&quot;, static_cast&lt;int16_t&gt;(std::numeric_limits&lt;uint16_t&gt;::max()) },
 361         { &quot;uint16-min&quot;, static_cast&lt;int16_t&gt;(std::numeric_limits&lt;uint16_t&gt;::min()) }
 362     });
 363     return operands;
 364 }
 365 
 366 inline Vector&lt;Int8Operand&gt; int8Operands()
 367 {
 368     Vector&lt;Int8Operand&gt; operands({
 369         { &quot;0&quot;, 0 },
 370         { &quot;1&quot;, 1 },
 371         { &quot;-1&quot;, -1 },
 372         { &quot;42&quot;, 42 },
 373         { &quot;-42&quot;, -42 },
 374         { &quot;int8-max&quot;, std::numeric_limits&lt;int8_t&gt;::max() },
 375         { &quot;int8-min&quot;, std::numeric_limits&lt;int8_t&gt;::min() },
 376         { &quot;uint8-max&quot;, static_cast&lt;int8_t&gt;(std::numeric_limits&lt;uint8_t&gt;::max()) },
 377         { &quot;uint8-min&quot;, static_cast&lt;int8_t&gt;(std::numeric_limits&lt;uint8_t&gt;::min()) }
 378     });
 379     return operands;
 380 }
 381 
 382 inline void add32(CCallHelpers&amp; jit, GPRReg src1, GPRReg src2, GPRReg dest)
 383 {
 384     if (src2 == dest)
 385         jit.add32(src1, dest);
 386     else {
 387         jit.move(src1, dest);
 388         jit.add32(src2, dest);
 389     }
 390 }
 391 
 392 template&lt;typename LoadedType, typename EffectiveType&gt;
 393 EffectiveType modelLoad(EffectiveType value);
 394 
 395 template&lt;typename LoadedType, typename EffectiveType&gt;
 396 EffectiveType modelLoad(EffectiveType value)
 397 {
 398     union {
 399         EffectiveType original;
 400         LoadedType loaded;
 401     } u;
 402 
 403     u.original = value;
 404     if (std::is_signed&lt;LoadedType&gt;::value)
 405         return static_cast&lt;EffectiveType&gt;(u.loaded);
 406     return static_cast&lt;EffectiveType&gt;(static_cast&lt;typename std::make_unsigned&lt;EffectiveType&gt;::type&gt;(u.loaded));
 407 }
 408 
 409 template&lt;&gt;
 410 inline float modelLoad&lt;float, float&gt;(float value) { return value; }
 411 
 412 template&lt;&gt;
 413 inline double modelLoad&lt;double, double&gt;(double value) { return value; }
 414 
 415 void run(const char* filter);
 416 void testBitAndSExt32(int32_t value, int64_t mask);
 417 void testBasicSelect();
 418 void testSelectTest();
 419 void testSelectCompareDouble();
 420 void testSelectCompareFloat(float, float);
 421 void testSelectCompareFloatToDouble(float, float);
 422 void testSelectDouble();
 423 void testSelectDoubleTest();
 424 void testSelectDoubleCompareDouble();
 425 void testSelectDoubleCompareFloat(float, float);
 426 void testSelectFloatCompareFloat(float, float);
 427 void testSelectDoubleCompareDoubleWithAliasing();
 428 void testSelectFloatCompareFloatWithAliasing();
 429 void testSelectFold(intptr_t value);
 430 void testSelectInvert();
 431 void testCheckSelect();
 432 void testCheckSelectCheckSelect();
 433 void testCheckSelectAndCSE();
 434 void testPowDoubleByIntegerLoop(double xOperand, int32_t yOperand);
 435 double b3Pow(double x, int y);
 436 void testTruncOrHigh();
 437 void testTruncOrLow();
 438 void testBitAndOrHigh();
 439 void testBitAndOrLow();
 440 void testBranch64Equal(int64_t left, int64_t right);
 441 void testBranch64EqualImm(int64_t left, int64_t right);
 442 void testBranch64EqualMem(int64_t left, int64_t right);
 443 void testBranch64EqualMemImm(int64_t left, int64_t right);
 444 void testStore8Load8Z(int32_t value);
 445 void testStore16Load16Z(int32_t value);
 446 void testTrivialInfiniteLoop();
 447 void testFoldPathEqual();
 448 void testLShiftSelf32();
 449 void testRShiftSelf32();
 450 void testURShiftSelf32();
 451 void testLShiftSelf64();
 452 void testRShiftSelf64();
 453 void testURShiftSelf64();
 454 void testPatchpointDoubleRegs();
 455 void testSpillDefSmallerThanUse();
 456 void testSpillUseLargerThanDef();
 457 void testLateRegister();
 458 void interpreterPrint(Vector&lt;intptr_t&gt;* stream, intptr_t value);
 459 void testInterpreter();
 460 void testReduceStrengthCheckBottomUseInAnotherBlock();
 461 void testResetReachabilityDanglingReference();
 462 void testEntrySwitchSimple();
 463 void testEntrySwitchNoEntrySwitch();
 464 void testEntrySwitchWithCommonPaths();
 465 void testEntrySwitchWithCommonPathsAndNonTrivialEntrypoint();
 466 void testEntrySwitchLoop();
 467 void testSomeEarlyRegister();
 468 void testBranchBitAndImmFusion(B3::Opcode valueModifier, Type valueType, int64_t constant, Air::Opcode expectedOpcode, Air::Arg::Kind firstKind);
 469 void testTerminalPatchpointThatNeedsToBeSpilled();
 470 void testTerminalPatchpointThatNeedsToBeSpilled2();
 471 void testPatchpointTerminalReturnValue(bool successIsRare);
 472 void testMemoryFence();
 473 void testStoreFence();
 474 void testLoadFence();
 475 void testTrappingLoad();
 476 void testTrappingStore();
 477 void testTrappingLoadAddStore();
 478 void testTrappingLoadDCE();
 479 void testTrappingStoreElimination();
 480 void testMoveConstants();
 481 void testPCOriginMapDoesntInsertNops();
 482 void testBitOrBitOrArgImmImm32(int, int, int c);
 483 void testBitOrImmBitOrArgImm32(int, int, int c);
 484 double bitOrDouble(double, double);
 485 void testBitOrArgDouble(double);
 486 void testBitOrArgsDouble(double, double);
 487 void testBitOrArgImmDouble(double, double);
 488 void testBitOrImmsDouble(double, double);
 489 float bitOrFloat(float, float);
 490 void testBitOrArgFloat(float);
 491 void testBitOrArgsFloat(float, float);
 492 void testBitOrArgImmFloat(float, float);
 493 void testBitOrImmsFloat(float, float);
 494 void testBitOrArgsFloatWithUselessDoubleConversion(float, float);
 495 void testBitXorArgs(int64_t, int64_t);
 496 void testBitXorSameArg(int64_t);
 497 void testBitXorAndAndArgs(int64_t, int64_t, int64_t c);
 498 void testBitXorAndAndArgs32(int32_t, int32_t, int32_t c);
 499 void testBitXorAndSameArgs(int64_t, int64_t);
 500 void testBitXorAndSameArgs32(int32_t, int32_t);
 501 void testBitXorImms(int64_t, int64_t);
 502 void testBitXorArgImm(int64_t, int64_t);
 503 void testBitXorImmArg(int64_t, int64_t);
 504 void testBitXorBitXorArgImmImm(int64_t, int64_t, int64_t c);
 505 void testBitXorImmBitXorArgImm(int64_t, int64_t, int64_t c);
 506 void testBitXorArgs32(int, int);
 507 void testBitXorSameArg32(int);
 508 void testBitXorImms32(int, int);
 509 void testBitXorArgImm32(int, int);
 510 void testBitXorImmArg32(int, int);
 511 void testBitXorBitXorArgImmImm32(int, int, int c);
 512 void testBitXorImmBitXorArgImm32(int, int, int c);
 513 void testBitNotArg(int64_t);
 514 void testBitNotImm(int64_t);
 515 void testBitNotMem(int64_t);
 516 void testBitNotArg32(int32_t);
 517 void testBitNotImm32(int32_t);
 518 void testBitNotMem32(int32_t);
 519 void testNotOnBooleanAndBranch32(int64_t, int64_t);
 520 void testBitNotOnBooleanAndBranch32(int64_t, int64_t);
 521 void testShlArgs(int64_t, int64_t);
 522 void testShlImms(int64_t, int64_t);
 523 void testShlArgImm(int64_t, int64_t);
 524 void testShlSShrArgImm(int64_t, int64_t);
 525 void testShlArg32(int32_t);
 526 void testShlArgs32(int32_t, int32_t);
 527 void testShlImms32(int32_t, int32_t);
 528 void testShlArgImm32(int32_t, int32_t);
 529 void testShlZShrArgImm32(int32_t, int32_t);
 530 void testClzArg64(int64_t);
 531 void testClzMem64(int64_t);
 532 void testClzArg32(int32_t);
 533 void testClzMem32(int32_t);
 534 void testAbsArg(double);
 535 void testAbsImm(double);
 536 void testAbsMem(double);
 537 void testAbsAbsArg(double);
 538 void testAbsNegArg(double);
 539 void testAbsBitwiseCastArg(double);
 540 void testBitwiseCastAbsBitwiseCastArg(double);
 541 void testAbsArg(float);
 542 void testAbsImm(float);
 543 void testAbsMem(float);
 544 void testAbsAbsArg(float);
 545 void testAbsNegArg(float);
 546 void testAbsBitwiseCastArg(float);
 547 void testBitwiseCastAbsBitwiseCastArg(float);
 548 void testAbsArgWithUselessDoubleConversion(float);
 549 void testAbsArgWithEffectfulDoubleConversion(float);
 550 void testCeilArg(double);
 551 void testCeilImm(double);
 552 void testCeilMem(double);
 553 void testCeilCeilArg(double);
 554 void testFloorCeilArg(double);
 555 void testCeilIToD64(int64_t);
 556 void testCeilIToD32(int64_t);
 557 void testCeilArg(float);
 558 void testCeilImm(float);
 559 void testCeilMem(float);
 560 void testCeilCeilArg(float);
 561 void testFloorCeilArg(float);
 562 void testCeilArgWithUselessDoubleConversion(float);
 563 void testCeilArgWithEffectfulDoubleConversion(float);
 564 void testFloorArg(double);
 565 void testFloorImm(double);
 566 void testFloorMem(double);
 567 void testFloorFloorArg(double);
 568 void testCeilFloorArg(double);
 569 void testFloorIToD64(int64_t);
 570 void testFloorIToD32(int64_t);
 571 void testFloorArg(float);
 572 void testFloorImm(float);
 573 void testFloorMem(float);
 574 void testFloorFloorArg(float);
 575 void testCeilFloorArg(float);
 576 void testFloorArgWithUselessDoubleConversion(float);
 577 void testFloorArgWithEffectfulDoubleConversion(float);
 578 double correctSqrt(double value);
 579 void testSqrtArg(double);
 580 void testSqrtImm(double);
 581 void testSqrtMem(double);
 582 void testSqrtArg(float);
 583 void testSqrtImm(float);
 584 void testSqrtMem(float);
 585 void testSqrtArgWithUselessDoubleConversion(float);
 586 void testSqrtArgWithEffectfulDoubleConversion(float);
 587 void testCompareTwoFloatToDouble(float, float);
 588 void testCompareOneFloatToDouble(float, double);
 589 void testCompareFloatToDoubleThroughPhi(float, float);
 590 void testDoubleToFloatThroughPhi(float value);
 591 void testReduceFloatToDoubleValidates();
 592 void testDoubleProducerPhiToFloatConversion(float value);
 593 void testDoubleProducerPhiToFloatConversionWithDoubleConsumer(float value);
 594 void testDoubleProducerPhiWithNonFloatConst(float value, double constValue);
 595 void testDoubleArgToInt64BitwiseCast(double value);
 596 void testDoubleImmToInt64BitwiseCast(double value);
 597 void testTwoBitwiseCastOnDouble(double value);
 598 void testBitwiseCastOnDoubleInMemory(double value);
 599 void testBitwiseCastOnDoubleInMemoryIndexed(double value);
 600 void testInt64BArgToDoubleBitwiseCast(int64_t value);
 601 void testInt64BImmToDoubleBitwiseCast(int64_t value);
 602 void testTwoBitwiseCastOnInt64(int64_t value);
 603 void testBitwiseCastOnInt64InMemory(int64_t value);
 604 void testBitwiseCastOnInt64InMemoryIndexed(int64_t value);
 605 void testFloatImmToInt32BitwiseCast(float value);
 606 void testBitwiseCastOnFloatInMemory(float value);
 607 void testInt32BArgToFloatBitwiseCast(int32_t value);
 608 void testInt32BImmToFloatBitwiseCast(int32_t value);
 609 void testTwoBitwiseCastOnInt32(int32_t value);
 610 void testBitwiseCastOnInt32InMemory(int32_t value);
 611 void testConvertDoubleToFloatArg(double value);
 612 void testConvertDoubleToFloatImm(double value);
 613 void testConvertDoubleToFloatMem(double value);
 614 void testConvertFloatToDoubleArg(float value);
 615 void testConvertFloatToDoubleImm(float value);
 616 void testConvertFloatToDoubleMem(float value);
 617 void testConvertDoubleToFloatToDoubleToFloat(double value);
 618 void testLoadFloatConvertDoubleConvertFloatStoreFloat(float value);
 619 void testFroundArg(double value);
 620 void testFroundMem(double value);
 621 void testIToD64Arg();
 622 void testIToF64Arg();
 623 void testIToD32Arg();
 624 void testIToF32Arg();
 625 void testIToD64Mem();
 626 void testIToF64Mem();
 627 void testIToD32Mem();
 628 void testIToF32Mem();
 629 void testIToD64Imm(int64_t value);
 630 void testIToF64Imm(int64_t value);
 631 void testIToD32Imm(int32_t value);
 632 void testIToF32Imm(int32_t value);
 633 void testIToDReducedToIToF64Arg();
 634 void testIToDReducedToIToF32Arg();
 635 void testStore32(int value);
 636 void testStoreConstant(int value);
 637 void testStoreConstantPtr(intptr_t value);
 638 void testStore8Arg();
 639 void testStore8Imm();
 640 void testStorePartial8BitRegisterOnX86();
 641 void testStore16Arg();
 642 void testStore16Imm();
 643 void testTrunc(int64_t value);
 644 void testAdd1(int value);
 645 void testAdd1Ptr(intptr_t value);
 646 void testNeg32(int32_t value);
 647 void testNegPtr(intptr_t value);
 648 void testStoreAddLoad32(int amount);
 649 void testStoreRelAddLoadAcq32(int amount);
 650 void testStoreAddLoadImm32(int amount);
 651 void testStoreAddLoad8(int amount, B3::Opcode loadOpcode);
 652 void testStoreRelAddLoadAcq8(int amount, B3::Opcode loadOpcode);
 653 void testStoreRelAddFenceLoadAcq8(int amount, B3::Opcode loadOpcode);
 654 void testStoreAddLoadImm8(int amount, B3::Opcode loadOpcode);
 655 void testStoreAddLoad16(int amount, B3::Opcode loadOpcode);
 656 void testStoreRelAddLoadAcq16(int amount, B3::Opcode loadOpcode);
 657 void testStoreAddLoadImm16(int amount, B3::Opcode loadOpcode);
 658 void testStoreAddLoad64(int amount);
 659 void testStoreRelAddLoadAcq64(int amount);
 660 void testStoreAddLoadImm64(int64_t amount);
 661 void testStoreAddLoad32Index(int amount);
 662 void testStoreAddLoadImm32Index(int amount);
 663 void testStoreAddLoad8Index(int amount, B3::Opcode loadOpcode);
 664 void testStoreAddLoadImm8Index(int amount, B3::Opcode loadOpcode);
 665 void testStoreAddLoad16Index(int amount, B3::Opcode loadOpcode);
 666 void testStoreAddLoadImm16Index(int amount, B3::Opcode loadOpcode);
 667 void testStoreAddLoad64Index(int amount);
 668 void testStoreAddLoadImm64Index(int64_t amount);
 669 void testStoreSubLoad(int amount);
 670 void testStoreAddLoadInterference(int amount);
 671 void testStoreAddAndLoad(int amount, int mask);
 672 void testStoreNegLoad32(int32_t value);
 673 void testStoreNegLoadPtr(intptr_t value);
 674 void testAdd1Uncommuted(int value);
 675 void testLoadOffset();
 676 void testLoadOffsetNotConstant();
 677 void testLoadOffsetUsingAdd();
 678 void testLoadOffsetUsingAddInterference();
 679 void testLoadOffsetUsingAddNotConstant();
 680 void testLoadAddrShift(unsigned shift);
 681 void testFramePointer();
 682 void testOverrideFramePointer();
 683 void testStackSlot();
 684 void testLoadFromFramePointer();
 685 void testStoreLoadStackSlot(int value);
 686 void testStoreFloat(double input);
 687 void testStoreDoubleConstantAsFloat(double input);
 688 void testSpillGP();
 689 void testSpillFP();
 690 void testInt32ToDoublePartialRegisterStall();
 691 void testInt32ToDoublePartialRegisterWithoutStall();
 692 void testBranch();
 693 void testBranchPtr();
 694 void testDiamond();
 695 void testBranchNotEqual();
 696 void testBranchNotEqualCommute();
 697 void testBranchNotEqualNotEqual();
 698 void testBranchEqual();
 699 void testBranchEqualEqual();
 700 void testBranchEqualCommute();
 701 void testBranchEqualEqual1();
 702 void testBranchEqualOrUnorderedArgs(double, double);
 703 void testBranchEqualOrUnorderedArgs(float, float);
 704 void testBranchNotEqualAndOrderedArgs(double, double);
 705 void testBranchNotEqualAndOrderedArgs(float, float);
 706 void testBranchEqualOrUnorderedDoubleArgImm(double, double);
 707 void testBranchEqualOrUnorderedFloatArgImm(float, float);
 708 void testBranchEqualOrUnorderedDoubleImms(double, double);
 709 void testBranchEqualOrUnorderedFloatImms(float, float);
 710 void testBranchEqualOrUnorderedFloatWithUselessDoubleConversion(float, float);
 711 void testBranchFold(int value);
 712 void testDiamondFold(int value);
 713 void testBranchNotEqualFoldPtr(intptr_t value);
 714 void testBranchEqualFoldPtr(intptr_t value);
 715 void testBranchLoadPtr();
 716 void testBranchLoad32();
 717 void testBranchLoad8S();
 718 void testBranchLoad8Z();
 719 void testBranchLoad16S();
 720 void testBranchLoad16Z();
 721 void testBranch8WithLoad8ZIndex();
 722 void testComplex(unsigned numVars, unsigned numConstructs);
 723 void testBranchBitTest32TmpImm(uint32_t value, uint32_t imm);
 724 void testBranchBitTest32AddrImm(uint32_t value, uint32_t imm);
 725 void testBranchBitTest32TmpTmp(uint32_t value, uint32_t value2);
 726 void testBranchBitTest64TmpTmp(uint64_t value, uint64_t value2);
 727 void testBranchBitTest64AddrTmp(uint64_t value, uint64_t value2);
 728 void testBranchBitTestNegation(uint64_t value, uint64_t value2);
 729 void testBranchBitTestNegation2(uint64_t value, uint64_t value2);
 730 void testSimplePatchpoint();
 731 void testSimplePatchpointWithoutOuputClobbersGPArgs();
 732 void testSimplePatchpointWithOuputClobbersGPArgs();
 733 void testSimplePatchpointWithoutOuputClobbersFPArgs();
 734 void testSimplePatchpointWithOuputClobbersFPArgs();
 735 void testPatchpointWithEarlyClobber();
 736 void testPatchpointCallArg();
 737 void testPatchpointFixedRegister();
 738 void testPatchpointAny(ValueRep rep);
 739 void testPatchpointGPScratch();
 740 void testPatchpointFPScratch();
 741 void testPatchpointLotsOfLateAnys();
 742 void testPatchpointAnyImm(ValueRep rep);
 743 void testPatchpointManyWarmAnyImms();
 744 void testPatchpointManyColdAnyImms();
 745 void testPatchpointWithRegisterResult();
 746 void testPatchpointWithStackArgumentResult();
 747 void testPatchpointWithAnyResult();
 748 void testSimpleCheck();
 749 void testCheckFalse();
 750 void testCheckTrue();
 751 void testCheckLessThan();
 752 void testCheckMegaCombo();
 753 void testCheckTrickyMegaCombo();
 754 void testCheckTwoMegaCombos();
 755 void testCheckTwoNonRedundantMegaCombos();
 756 void testCheckAddImm();
 757 void testCheckAddImmCommute();
 758 void testCheckAddImmSomeRegister();
 759 void testCheckAdd();
 760 void testCheckAdd64();
 761 void testCheckAddFold(int, int);
 762 void testCheckAddFoldFail(int, int);
 763 void test42();
 764 void testLoad42();
 765 void testLoadAcq42();
 766 void testLoadWithOffsetImpl(int32_t offset64, int32_t offset32);
 767 void testLoadOffsetImm9Max();
 768 void testLoadOffsetImm9MaxPlusOne();
 769 void testLoadOffsetImm9MaxPlusTwo();
 770 void testLoadOffsetImm9Min();
 771 void testLoadOffsetImm9MinMinusOne();
 772 void testLoadOffsetScaledUnsignedImm12Max();
 773 void testLoadOffsetScaledUnsignedOverImm12Max();
 774 void testAddTreeArg32(int32_t);
 775 void testMulTreeArg32(int32_t);
 776 void testArg(int argument);
 777 void testReturnConst64(int64_t value);
 778 void testReturnVoid();
 779 void testAddArg(int);
 780 void testAddArgs(int, int);
 781 void testAddArgImm(int, int);
 782 void testAddImmArg(int, int);
 783 void testAddArgMem(int64_t, int64_t);
 784 void testAddMemArg(int64_t, int64_t);
 785 void testAddImmMem(int64_t, int64_t);
 786 void testAddArg32(int);
 787 void testAddArgs32(int, int);
 788 void testAddArgMem32(int32_t, int32_t);
 789 void testAddMemArg32(int32_t, int32_t);
 790 void testAddImmMem32(int32_t, int32_t);
 791 void testAddNeg1(int, int);
 792 void testAddNeg2(int, int);
 793 void testAddArgZeroImmZDef();
 794 void testAddLoadTwice();
 795 void testAddArgDouble(double);
 796 void testCheckAddArgumentAliasing64();
 797 void testCheckAddArgumentAliasing32();
 798 void testCheckAddSelfOverflow64();
 799 void testCheckAddSelfOverflow32();
 800 void testCheckAddRemoveCheckWithSExt8(int8_t);
 801 void testCheckAddRemoveCheckWithSExt16(int16_t);
 802 void testCheckAddRemoveCheckWithSExt32(int32_t);
 803 void testCheckAddRemoveCheckWithZExt32(int32_t);
 804 void testCheckSubImm();
 805 void testCheckSubBadImm();
 806 void testCheckSub();
 807 double doubleSub(double, double);
 808 void testCheckSub64();
 809 void testCheckSubFold(int, int);
 810 void testCheckSubFoldFail(int, int);
 811 void testCheckNeg();
 812 void testCheckNeg64();
 813 void testCheckMul();
 814 void testCheckMulMemory();
 815 void testCheckMul2();
 816 void testCheckMul64();
 817 void testCheckMulFold(int, int);
 818 void testCheckMulFoldFail(int, int);
 819 void testAddArgsDouble(double, double);
 820 void testAddArgImmDouble(double, double);
 821 void testAddImmArgDouble(double, double);
 822 void testAddImmsDouble(double, double);
 823 void testAddArgFloat(float);
 824 void testAddArgsFloat(float, float);
 825 void testAddFPRArgsFloat(float, float);
 826 void testAddArgImmFloat(float, float);
 827 void testAddImmArgFloat(float, float);
 828 void testAddImmsFloat(float, float);
 829 void testAddArgFloatWithUselessDoubleConversion(float);
 830 void testAddArgsFloatWithUselessDoubleConversion(float, float);
 831 void testAddArgsFloatWithEffectfulDoubleConversion(float, float);
 832 void testAddMulMulArgs(int64_t, int64_t, int64_t c);
 833 void testMulArg(int);
 834 void testMulArgStore(int);
 835 void testMulAddArg(int);
 836 void testMulArgs(int, int);
 837 void testMulArgNegArg(int, int);
 838 void testCheckMulArgumentAliasing64();
 839 void testCheckMulArgumentAliasing32();
 840 void testCheckMul64SShr();
 841 void testCompareImpl(B3::Opcode opcode, int64_t left, int64_t right);
 842 void testCompare(B3::Opcode opcode, int64_t left, int64_t right);
 843 void testEqualDouble(double left, double right, bool result);
 844 void testCallSimple(int, int);
 845 void testCallRare(int, int);
 846 void testCallRareLive(int, int, int c);
 847 void testCallSimplePure(int, int);
 848 void testCallFunctionWithHellaArguments();
 849 void testCallFunctionWithHellaArguments2();
 850 void testCallFunctionWithHellaArguments3();
 851 void testReturnDouble(double value);
 852 void testReturnFloat(float value);
 853 void testMulNegArgArg(int, int);
 854 void testMulArgImm(int64_t, int64_t);
 855 void testMulImmArg(int, int);
 856 void testMulArgs32(int, int);
 857 void testMulArgs32SignExtend(int, int);
 858 void testMulImm32SignExtend(const int, int);
 859 void testMulLoadTwice();
 860 void testMulAddArgsLeft();
 861 void testMulAddArgsRight();
 862 void testMulAddArgsLeft32();
 863 void testMulAddArgsRight32();
 864 void testMulSubArgsLeft();
 865 void testMulSubArgsRight();
 866 void testMulSubArgsLeft32();
 867 void testMulSubArgsRight32();
 868 void testMulNegArgs();
 869 void testMulNegArgs32();
 870 void testMulArgDouble(double);
 871 void testMulArgsDouble(double, double);
 872 void testCallSimpleDouble(double, double);
 873 void testCallSimpleFloat(float, float);
 874 void testCallFunctionWithHellaDoubleArguments();
 875 void testCallFunctionWithHellaFloatArguments();
 876 void testLinearScanWithCalleeOnStack();
 877 void testChillDiv(int num, int den, int res);
 878 void testChillDivTwice(int num1, int den1, int num2, int den2, int res);
 879 void testChillDiv64(int64_t num, int64_t den, int64_t res);
 880 void testModArg(int64_t value);
 881 void testModArgs(int64_t numerator, int64_t denominator);
 882 void testModImms(int64_t numerator, int64_t denominator);
 883 void testMulArgImmDouble(double, double);
 884 void testMulImmArgDouble(double, double);
 885 void testMulImmsDouble(double, double);
 886 void testMulArgFloat(float);
 887 void testMulArgsFloat(float, float);
 888 void testMulArgImmFloat(float, float);
 889 void testMulImmArgFloat(float, float);
 890 void testMulImmsFloat(float, float);
 891 void testMulArgFloatWithUselessDoubleConversion(float);
 892 void testMulArgsFloatWithUselessDoubleConversion(float, float);
 893 void testMulArgsFloatWithEffectfulDoubleConversion(float, float);
 894 void testDivArgDouble(double);
 895 void testDivArgsDouble(double, double);
 896 void testDivArgImmDouble(double, double);
 897 void testDivImmArgDouble(double, double);
 898 void testDivImmsDouble(double, double);
 899 void testDivArgFloat(float);
 900 void testDivArgsFloat(float, float);
 901 void testDivArgImmFloat(float, float);
 902 void testModArg32(int32_t value);
 903 void testModArgs32(int32_t numerator, int32_t denominator);
 904 void testModImms32(int32_t numerator, int32_t denominator);
 905 void testChillModArg(int64_t value);
 906 void testChillModArgs(int64_t numerator, int64_t denominator);
 907 void testChillModImms(int64_t numerator, int64_t denominator);
 908 void testChillModArg32(int32_t value);
 909 void testChillModArgs32(int32_t numerator, int32_t denominator);
 910 void testChillModImms32(int32_t numerator, int32_t denominator);
 911 void testLoopWithMultipleHeaderEdges();
 912 void testSwitch(unsigned degree);
 913 void testSwitch(unsigned degree, unsigned gap);
 914 void testSwitchSameCaseAsDefault();
 915 void testSwitchChillDiv(unsigned degree, unsigned gap);
 916 void testSwitchTargettingSameBlock();
 917 void testSwitchTargettingSameBlockFoldPathConstant();
 918 void testTruncFold(int64_t value);
 919 void testZExt32(int32_t value);
 920 void testZExt32Fold(int32_t value);
 921 void testSExt32(int32_t value);
 922 void testSExt32Fold(int32_t value);
 923 void testTruncZExt32(int32_t value);
 924 void testPinRegisters();
 925 void testX86LeaAddAddShlLeft();
 926 void testX86LeaAddAddShlRight();
 927 void testX86LeaAddAdd();
 928 void testX86LeaAddShlRight();
 929 void testX86LeaAddShlLeftScale1();
 930 void testX86LeaAddShlLeftScale2();
 931 void testX86LeaAddShlLeftScale4();
 932 void testX86LeaAddShlLeftScale8();
 933 void testAddShl32();
 934 void testAddShl64();
 935 void testAddShl65();
 936 void testReduceStrengthReassociation(bool flip);
 937 void testLoadBaseIndexShift2();
 938 void testLoadBaseIndexShift32();
 939 void testOptimizeMaterialization();
 940 void testLICMPure();
 941 void testLICMPureSideExits();
 942 void testTruncSExt32(int32_t value);
 943 void testSExt8(int32_t value);
 944 void testSExt8Fold(int32_t value);
 945 void testSExt8SExt8(int32_t value);
 946 void testSExt8SExt16(int32_t value);
 947 void testSExt8BitAnd(int32_t value, int32_t mask);
 948 void testBitAndSExt8(int32_t value, int32_t mask);
 949 void testSExt16(int32_t value);
 950 void testSExt16Fold(int32_t value);
 951 void testSExt16SExt16(int32_t value);
 952 void testSExt16SExt8(int32_t value);
 953 void testLICMPureWritesPinned();
 954 void testLICMPureWrites();
 955 void testLICMReadsLocalState();
 956 void testLICMReadsPinned();
 957 void testLICMReads();
 958 void testLICMPureNotBackwardsDominant();
 959 void testLICMPureFoiledByChild();
 960 void testLICMPureNotBackwardsDominantFoiledByChild();
 961 void testLICMExitsSideways();
 962 void testLICMWritesLocalState();
 963 void testLICMWrites();
 964 void testLICMFence();
 965 void testLICMWritesPinned();
 966 void testLICMControlDependent();
 967 void testLICMControlDependentNotBackwardsDominant();
 968 void testLICMControlDependentSideExits();
 969 void testLICMReadsPinnedWritesPinned();
 970 void testLICMReadsWritesDifferentHeaps();
 971 void testLICMReadsWritesOverlappingHeaps();
 972 void testLICMDefaultCall();
 973 void testDepend32();
 974 void testDepend64();
 975 void testWasmBoundsCheck(unsigned offset);
 976 void testWasmAddress();
 977 void testFastTLSLoad();
 978 void testFastTLSStore();
 979 void testDoubleLiteralComparison(double, double);
 980 void testFloatEqualOrUnorderedFolding();
 981 void testFloatEqualOrUnorderedFoldingNaN();
 982 void testFloatEqualOrUnorderedDontFold();
 983 void testSExt16BitAnd(int32_t value, int32_t mask);
 984 void testBitAndSExt16(int32_t value, int32_t mask);
 985 void testSExt32BitAnd(int32_t value, int32_t mask);
 986 void testShuffleDoesntTrashCalleeSaves();
 987 void testDemotePatchpointTerminal();
 988 void testReportUsedRegistersLateUseFollowedByEarlyDefDoesNotMarkUseAsDead();
 989 void testInfiniteLoopDoesntCauseBadHoisting();
 990 void testDivImmArgFloat(float, float);
 991 void testDivImmsFloat(float, float);
 992 void testModArgDouble(double);
 993 void testModArgsDouble(double, double);
 994 void testModArgImmDouble(double, double);
 995 void testModImmArgDouble(double, double);
 996 void testModImmsDouble(double, double);
 997 void testModArgFloat(float);
 998 void testModArgsFloat(float, float);
 999 void testModArgImmFloat(float, float);
1000 void testModImmArgFloat(float, float);
1001 void testModImmsFloat(float, float);
1002 void testDivArgFloatWithUselessDoubleConversion(float);
1003 void testDivArgsFloatWithUselessDoubleConversion(float, float);
1004 void testDivArgsFloatWithEffectfulDoubleConversion(float, float);
1005 void testUDivArgsInt32(uint32_t, uint32_t);
1006 void testUDivArgsInt64(uint64_t, uint64_t);
1007 void testUModArgsInt32(uint32_t, uint32_t);
1008 void testUModArgsInt64(uint64_t, uint64_t);
1009 void testSubArg(int);
1010 void testSubArgs(int, int);
1011 void testSubArgImm(int64_t, int64_t);
1012 void testSubNeg(int, int);
1013 void testNegSub(int, int);
1014 void testNegValueSubOne(int);
1015 void testSubSub(int, int, int c);
1016 void testSubSub2(int, int, int c);
1017 void testSubAdd(int, int, int c);
1018 void testSubFirstNeg(int, int);
1019 void testSubImmArg(int, int);
1020 void testSubArgMem(int64_t, int64_t);
1021 void testSubMemArg(int64_t, int64_t);
1022 void testSubImmMem(int64_t, int64_t);
1023 void testSubMemImm(int64_t, int64_t);
1024 void testSubArgs32(int, int);
1025 void testSubArgImm32(int, int);
1026 void testSubImmArg32(int, int);
1027 void testSubMemArg32(int32_t, int32_t);
1028 void testSubArgMem32(int32_t, int32_t);
1029 void testSubImmMem32(int32_t, int32_t);
1030 void testSubMemImm32(int32_t, int32_t);
1031 void testNegValueSubOne32(int);
1032 void testNegMulArgImm(int64_t, int64_t);
1033 void testSubMulMulArgs(int64_t, int64_t, int64_t c);
1034 void testSubArgDouble(double);
1035 void testSubArgsDouble(double, double);
1036 void testSubArgImmDouble(double, double);
1037 void testSubImmArgDouble(double, double);
1038 void testSubImmsDouble(double, double);
1039 void testSubArgFloat(float);
1040 void testSubArgsFloat(float, float);
1041 void testSubArgImmFloat(float, float);
1042 void testSubImmArgFloat(float, float);
1043 void testSubImmsFloat(float, float);
1044 void testSubArgFloatWithUselessDoubleConversion(float);
1045 void testSubArgsFloatWithUselessDoubleConversion(float, float);
1046 void testSubArgsFloatWithEffectfulDoubleConversion(float, float);
1047 void testTernarySubInstructionSelection(B3::Opcode valueModifier, Type valueType, Air::Opcode expectedOpcode);
1048 void testNegDouble(double);
1049 void testNegFloat(float);
1050 void testNegFloatWithUselessDoubleConversion(float);
1051 
1052 void addArgTests(const char* filter, Deque&lt;RefPtr&lt;SharedTask&lt;void()&gt;&gt;&gt;&amp;);
1053 void addBitTests(const char* filter, Deque&lt;RefPtr&lt;SharedTask&lt;void()&gt;&gt;&gt;&amp;);
1054 void addCallTests(const char* filter, Deque&lt;RefPtr&lt;SharedTask&lt;void()&gt;&gt;&gt;&amp;);
1055 void addSExtTests(const char* filter, Deque&lt;RefPtr&lt;SharedTask&lt;void()&gt;&gt;&gt;&amp;);
1056 void addSShrShTests(const char* filter, Deque&lt;RefPtr&lt;SharedTask&lt;void()&gt;&gt;&gt;&amp;);
1057 void addShrTests(const char* filter, Deque&lt;RefPtr&lt;SharedTask&lt;void()&gt;&gt;&gt;&amp;);
1058 void addAtomicTests(const char* filter, Deque&lt;RefPtr&lt;SharedTask&lt;void()&gt;&gt;&gt;&amp;);
1059 void addLoadTests(const char* filter, Deque&lt;RefPtr&lt;SharedTask&lt;void()&gt;&gt;&gt;&amp;);
1060 void addTupleTests(const char* filter, Deque&lt;RefPtr&lt;SharedTask&lt;void()&gt;&gt;&gt;&amp;);
1061 
1062 void testFastForwardCopy32();
1063 void testByteCopyLoop();
1064 void testByteCopyLoopStartIsLoopDependent();
1065 void testByteCopyLoopBoundIsLoopDependent();
1066 
1067 void addCopyTests(const char* filter, Deque&lt;RefPtr&lt;SharedTask&lt;void()&gt;&gt;&gt;&amp;);
1068 
1069 bool shouldRun(const char* filter, const char* testName);
1070 
1071 #endif // ENABLE(B3_JIT)
    </pre>
  </body>
</html>