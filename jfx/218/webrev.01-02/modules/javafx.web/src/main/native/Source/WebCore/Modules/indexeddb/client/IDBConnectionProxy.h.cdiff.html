<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/indexeddb/client/IDBConnectionProxy.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="IDBConnectionProxy.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="IDBConnectionToServer.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/indexeddb/client/IDBConnectionProxy.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 83,11 ***</span>
      void iterateCursor(TransactionOperation&amp;, const IDBIterateCursorData&amp;);
      void renameObjectStore(TransactionOperation&amp;, uint64_t objectStoreIdentifier, const String&amp; newName);
      void renameIndex(TransactionOperation&amp;, uint64_t objectStoreIdentifier, uint64_t indexIdentifier, const String&amp; newName);
  
      void fireVersionChangeEvent(uint64_t databaseConnectionIdentifier, const IDBResourceIdentifier&amp; requestIdentifier, uint64_t requestedVersion);
<span class="line-modified">!     void didFireVersionChangeEvent(uint64_t databaseConnectionIdentifier, const IDBResourceIdentifier&amp; requestIdentifier);</span>
  
      void notifyOpenDBRequestBlocked(const IDBResourceIdentifier&amp; requestIdentifier, uint64_t oldVersion, uint64_t newVersion);
      void openDBRequestCancelled(const IDBRequestData&amp;);
  
      void establishTransaction(IDBTransaction&amp;);
<span class="line-new-header">--- 83,11 ---</span>
      void iterateCursor(TransactionOperation&amp;, const IDBIterateCursorData&amp;);
      void renameObjectStore(TransactionOperation&amp;, uint64_t objectStoreIdentifier, const String&amp; newName);
      void renameIndex(TransactionOperation&amp;, uint64_t objectStoreIdentifier, uint64_t indexIdentifier, const String&amp; newName);
  
      void fireVersionChangeEvent(uint64_t databaseConnectionIdentifier, const IDBResourceIdentifier&amp; requestIdentifier, uint64_t requestedVersion);
<span class="line-modified">!     void didFireVersionChangeEvent(uint64_t databaseConnectionIdentifier, const IDBResourceIdentifier&amp; requestIdentifier, const IndexedDB::ConnectionClosedOnBehalfOfServer = IndexedDB::ConnectionClosedOnBehalfOfServer::No);</span>
  
      void notifyOpenDBRequestBlocked(const IDBResourceIdentifier&amp; requestIdentifier, uint64_t oldVersion, uint64_t newVersion);
      void openDBRequestCancelled(const IDBRequestData&amp;);
  
      void establishTransaction(IDBTransaction&amp;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 101,19 ***</span>
      void didFinishHandlingVersionChangeTransaction(uint64_t databaseConnectionIdentifier, IDBTransaction&amp;);
      void databaseConnectionPendingClose(IDBDatabase&amp;);
      void databaseConnectionClosed(IDBDatabase&amp;);
  
      void didCloseFromServer(uint64_t databaseConnectionIdentifier, const IDBError&amp;);
<span class="line-removed">-     void confirmDidCloseFromServer(IDBDatabase&amp;);</span>
  
      void connectionToServerLost(const IDBError&amp;);
  
      void abortOpenAndUpgradeNeeded(uint64_t databaseConnectionIdentifier, const IDBResourceIdentifier&amp; transactionIdentifier);
  
      void completeOperation(const IDBResultData&amp;);
  
<span class="line-modified">!     uint64_t serverConnectionIdentifier() const { return m_serverConnectionIdentifier; }</span>
  
      void ref();
      void deref();
  
      void getAllDatabaseNames(const SecurityOrigin&amp; mainFrameOrigin, const SecurityOrigin&amp; openingOrigin, WTF::Function&lt;void (const Vector&lt;String&gt;&amp;)&gt;&amp;&amp;);
<span class="line-new-header">--- 101,18 ---</span>
      void didFinishHandlingVersionChangeTransaction(uint64_t databaseConnectionIdentifier, IDBTransaction&amp;);
      void databaseConnectionPendingClose(IDBDatabase&amp;);
      void databaseConnectionClosed(IDBDatabase&amp;);
  
      void didCloseFromServer(uint64_t databaseConnectionIdentifier, const IDBError&amp;);
  
      void connectionToServerLost(const IDBError&amp;);
  
      void abortOpenAndUpgradeNeeded(uint64_t databaseConnectionIdentifier, const IDBResourceIdentifier&amp; transactionIdentifier);
  
      void completeOperation(const IDBResultData&amp;);
  
<span class="line-modified">!     IDBConnectionIdentifier serverConnectionIdentifier() const { return m_serverConnectionIdentifier; }</span>
  
      void ref();
      void deref();
  
      void getAllDatabaseNames(const SecurityOrigin&amp; mainFrameOrigin, const SecurityOrigin&amp; openingOrigin, WTF::Function&lt;void (const Vector&lt;String&gt;&amp;)&gt;&amp;&amp;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 122,10 ***</span>
<span class="line-new-header">--- 121,11 ---</span>
      void unregisterDatabaseConnection(IDBDatabase&amp;);
  
      void forgetActiveOperations(const Vector&lt;RefPtr&lt;TransactionOperation&gt;&gt;&amp;);
      void forgetTransaction(IDBTransaction&amp;);
      void forgetActivityForCurrentThread();
<span class="line-added">+     void setContextSuspended(ScriptExecutionContext&amp; currentContext, bool isContextSuspended);</span>
  
  private:
      void completeOpenDBRequest(const IDBResultData&amp;);
      bool hasRecordOfTransaction(const IDBTransaction&amp;) const;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 151,11 ***</span>
  
      void scheduleMainThreadTasks();
      void handleMainThreadTasks();
  
      IDBConnectionToServer&amp; m_connectionToServer;
<span class="line-modified">!     uint64_t m_serverConnectionIdentifier;</span>
  
      HashMap&lt;uint64_t, IDBDatabase*&gt; m_databaseConnectionMap;
      Lock m_databaseConnectionMapLock;
  
      HashMap&lt;IDBResourceIdentifier, RefPtr&lt;IDBOpenDBRequest&gt;&gt; m_openDBRequestMap;
<span class="line-new-header">--- 151,11 ---</span>
  
      void scheduleMainThreadTasks();
      void handleMainThreadTasks();
  
      IDBConnectionToServer&amp; m_connectionToServer;
<span class="line-modified">!     IDBConnectionIdentifier m_serverConnectionIdentifier;</span>
  
      HashMap&lt;uint64_t, IDBDatabase*&gt; m_databaseConnectionMap;
      Lock m_databaseConnectionMapLock;
  
      HashMap&lt;IDBResourceIdentifier, RefPtr&lt;IDBOpenDBRequest&gt;&gt; m_openDBRequestMap;
</pre>
<center><a href="IDBConnectionProxy.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="IDBConnectionToServer.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>