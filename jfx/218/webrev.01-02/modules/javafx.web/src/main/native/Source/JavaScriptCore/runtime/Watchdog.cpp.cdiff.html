<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/Watchdog.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="VarOffset.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Watchdog.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/Watchdog.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 30,12 ***</span>
  #include &lt;wtf/CPUTime.h&gt;
  #include &lt;wtf/MathExtras.h&gt;
  
  namespace JSC {
  
<span class="line-removed">- const Seconds Watchdog::noTimeLimit { Seconds::infinity() };</span>
<span class="line-removed">- </span>
  Watchdog::Watchdog(VM* vm)
      : m_vm(vm)
      , m_timeLimit(noTimeLimit)
      , m_cpuDeadline(noTimeLimit)
      , m_deadline(MonotonicTime::infinity())
<span class="line-new-header">--- 30,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 58,11 ***</span>
  
      if (m_hasEnteredVM &amp;&amp; hasTimeLimit())
          startTimer(m_timeLimit);
  }
  
<span class="line-modified">! bool Watchdog::shouldTerminate(ExecState* exec)</span>
  {
      ASSERT(m_vm-&gt;currentThreadIsHoldingAPILock());
      if (MonotonicTime::now() &lt; m_deadline)
          return false; // Just a stale timer firing. Nothing to do.
  
<span class="line-new-header">--- 56,11 ---</span>
  
      if (m_hasEnteredVM &amp;&amp; hasTimeLimit())
          startTimer(m_timeLimit);
  }
  
<span class="line-modified">! bool Watchdog::shouldTerminate(JSGlobalObject* globalObject)</span>
  {
      ASSERT(m_vm-&gt;currentThreadIsHoldingAPILock());
      if (MonotonicTime::now() &lt; m_deadline)
          return false; // Just a stale timer firing. Nothing to do.
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 81,11 ***</span>
      // call setTimeLimit() which will try to lock as well.
  
      // If m_callback is not set, then we terminate by default.
      // Else, we let m_callback decide if we should terminate or not.
      bool needsTermination = !m_callback
<span class="line-modified">!         || m_callback(exec, m_callbackData1, m_callbackData2);</span>
      if (needsTermination)
          return true;
  
      // If we get here, then the callback above did not want to terminate execution. As a
      // result, the callback may have done one of the following:
<span class="line-new-header">--- 79,11 ---</span>
      // call setTimeLimit() which will try to lock as well.
  
      // If m_callback is not set, then we terminate by default.
      // Else, we let m_callback decide if we should terminate or not.
      bool needsTermination = !m_callback
<span class="line-modified">!         || m_callback(globalObject, m_callbackData1, m_callbackData2);</span>
      if (needsTermination)
          return true;
  
      // If we get here, then the callback above did not want to terminate execution. As a
      // result, the callback may have done one of the following:
</pre>
<center><a href="VarOffset.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Watchdog.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>