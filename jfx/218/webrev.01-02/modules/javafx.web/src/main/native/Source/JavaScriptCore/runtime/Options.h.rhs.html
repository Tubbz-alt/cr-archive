<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/Options.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (C) 2011-2019 Apple Inc. All rights reserved.
  3  *
  4  * Redistribution and use in source and binary forms, with or without
  5  * modification, are permitted provided that the following conditions
  6  * are met:
  7  * 1. Redistributions of source code must retain the above copyright
  8  *    notice, this list of conditions and the following disclaimer.
  9  * 2. Redistributions in binary form must reproduce the above copyright
 10  *    notice, this list of conditions and the following disclaimer in the
 11  *    documentation and/or other materials provided with the distribution.
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #pragma once
 27 
<a name="1" id="anc1"></a><span class="line-modified"> 28 #include &quot;JSCConfig.h&quot;</span>
 29 #include &quot;JSExportMacros.h&quot;
 30 #include &lt;stdint.h&gt;
 31 #include &lt;stdio.h&gt;
 32 #include &lt;wtf/PrintStream.h&gt;
 33 #include &lt;wtf/StdLibExtras.h&gt;
 34 
 35 namespace WTF {
 36 class StringBuilder;
 37 }
 38 using WTF::StringBuilder;
 39 
 40 namespace JSC {
 41 
<a name="2" id="anc2"></a>










































































































































































































































































































































































































































































































































 42 class Options {
 43 public:
<a name="3" id="anc3"></a><span class="line-modified"> 44     enum class DumpLevel : uint8_t {</span>
 45         None = 0,
 46         Overridden,
 47         All,
 48         Verbose
 49     };
 50 
<a name="4" id="anc4"></a><span class="line-modified"> 51     enum class Availability : uint8_t  {</span>
 52         Normal = 0,
 53         Restricted,
 54         Configurable
 55     };
 56 
<a name="5" id="anc5"></a><span class="line-modified"> 57 #define DECLARE_OPTION_ID(type_, name_, defaultValue_, availability_, description_) \</span>
<span class="line-modified"> 58     name_##ID,</span>


 59 
<a name="6" id="anc6"></a><span class="line-modified"> 60     enum ID : uint16_t {</span>
<span class="line-modified"> 61         FOR_EACH_JSC_OPTION(DECLARE_OPTION_ID)</span>





 62     };
<a name="7" id="anc7"></a><span class="line-modified"> 63 #undef DECLARE_OPTION_ID</span>
<span class="line-modified"> 64 </span>
<span class="line-modified"> 65     enum class Type : uint8_t {</span>
<span class="line-modified"> 66         Bool,</span>
<span class="line-modified"> 67         Unsigned,</span>
<span class="line-modified"> 68         Double,</span>
<span class="line-modified"> 69         Int32,</span>
<span class="line-modified"> 70         Size,</span>
<span class="line-modified"> 71         OptionRange,</span>
<span class="line-modified"> 72         OptionString,</span>
<span class="line-added"> 73         GCLogLevel,</span>
 74     };
 75 
 76     JS_EXPORT_PRIVATE static void initialize();
 77 
 78     // Parses a string of options where each option is of the format &quot;--&lt;optionName&gt;=&lt;value&gt;&quot;
 79     // and are separated by a space. The leading &quot;--&quot; is optional and will be ignored.
 80     JS_EXPORT_PRIVATE static bool setOptions(const char* optionsList);
 81 
 82     // Parses a single command line option in the format &quot;&lt;optionName&gt;=&lt;value&gt;&quot;
 83     // (no spaces allowed) and set the specified option if appropriate.
 84     JS_EXPORT_PRIVATE static bool setOption(const char* arg);
 85 
 86     JS_EXPORT_PRIVATE static void dumpAllOptions(FILE*, DumpLevel, const char* title = nullptr);
 87     JS_EXPORT_PRIVATE static void dumpAllOptionsInALine(StringBuilder&amp;);
 88 
 89     JS_EXPORT_PRIVATE static void ensureOptionsAreCoherent();
 90 
<a name="8" id="anc8"></a><span class="line-modified"> 91 #define DECLARE_OPTION_ACCESSORS(type_, name_, defaultValue_, availability_, description_) \</span>
<span class="line-modified"> 92     ALWAYS_INLINE static OptionsStorage::type_&amp; name_() { return g_jscConfig.options.name_; }  \</span>
<span class="line-modified"> 93     ALWAYS_INLINE static OptionsStorage::type_&amp; name_##Default() { return g_jscConfig.options.name_##Default; }</span>



 94 
<a name="9" id="anc9"></a><span class="line-modified"> 95     FOR_EACH_JSC_OPTION(DECLARE_OPTION_ACCESSORS)</span>
<span class="line-modified"> 96 #undef DECLARE_OPTION_ACCESSORS</span>
 97 
 98     static bool isAvailable(ID, Availability);
 99 
100 private:
<a name="10" id="anc10"></a><span class="line-modified">101     struct ConstMetaData {</span>













102         const char* name;
103         const char* description;
104         Type type;
105         Availability availability;
<a name="11" id="anc11"></a><span class="line-added">106         uint16_t offsetOfOption;</span>
<span class="line-added">107         uint16_t offsetOfOptionDefault;</span>
108     };
109 
110     Options();
111 
112     enum DumpDefaultsOption {
113         DontDumpDefaults,
114         DumpDefaults
115     };
116     static void dumpOptionsIfNeeded();
117     static void dumpAllOptions(StringBuilder&amp;, DumpLevel, const char* title,
118         const char* separator, const char* optionHeader, const char* optionFooter, DumpDefaultsOption);
119     static void dumpOption(StringBuilder&amp;, DumpLevel, ID,
120         const char* optionHeader, const char* optionFooter, DumpDefaultsOption);
121 
122     static bool setOptionWithoutAlias(const char* arg);
123     static bool setAliasedOption(const char* arg);
124     static bool overrideAliasedOptionWithHeuristic(const char* name);
125 
<a name="12" id="anc12"></a><span class="line-modified">126     inline static void* addressOfOption(Options::ID);</span>
<span class="line-modified">127     inline static void* addressOfOptionDefault(Options::ID);</span>


















128 
<a name="13" id="anc13"></a><span class="line-modified">129     static const ConstMetaData s_constMetaData[NumberOfOptions];</span>






130 
<a name="14" id="anc14"></a><span class="line-modified">131     friend struct OptionReader;</span>

















132 };
133 
<a name="15" id="anc15"></a>
































































134 } // namespace JSC
<a name="16" id="anc16"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="16" type="hidden" />
</body>
</html>