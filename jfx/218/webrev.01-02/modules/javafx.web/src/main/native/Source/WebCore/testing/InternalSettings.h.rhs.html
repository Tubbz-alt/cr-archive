<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/WebCore/testing/InternalSettings.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (C) 2012 Google Inc. All rights reserved.
  3  * Copyright (C) 2013-2016 Apple Inc. All rights reserved.
  4  *
  5  * Redistribution and use in source and binary forms, with or without
  6  * modification, are permitted provided that the following conditions
  7  * are met:
  8  *
  9  * 1.  Redistributions of source code must retain the above copyright
 10  *     notice, this list of conditions and the following disclaimer.
 11  * 2.  Redistributions in binary form must reproduce the above copyright
 12  *     notice, this list of conditions and the following disclaimer in the
 13  *     documentation and/or other materials provided with the distribution.
 14  *
 15  * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS &quot;AS IS&quot; AND ANY
 16  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 17  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 18  * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 19  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 20  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 21  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 22  * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 23  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 24  * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 25  */
 26 
 27 #pragma once
 28 
 29 // FIXME (121927): This include should not be needed.
 30 #include &lt;wtf/text/AtomStringHash.h&gt;
 31 
 32 #include &quot;EditingBehaviorTypes.h&quot;
 33 #include &quot;ExceptionOr.h&quot;
 34 #include &quot;FontGenericFamilies.h&quot;
 35 #include &quot;IntSize.h&quot;
 36 #include &quot;InternalSettingsGenerated.h&quot;
 37 #include &quot;SecurityOrigin.h&quot;
 38 #include &quot;Settings.h&quot;
 39 #include &quot;WritingMode.h&quot;
 40 
 41 namespace WebCore {
 42 
 43 class Page;
 44 class Settings;
 45 
 46 class InternalSettings : public InternalSettingsGenerated {
 47 public:
 48     static Ref&lt;InternalSettings&gt; create(Page*);
 49     static InternalSettings* from(Page*);
 50     void hostDestroyed();
 51     void resetToConsistentState();
 52 
 53     ExceptionOr&lt;void&gt; setUsesOverlayScrollbars(bool);
 54     ExceptionOr&lt;void&gt; setTouchEventEmulationEnabled(bool);
 55     ExceptionOr&lt;void&gt; setStandardFontFamily(const String&amp; family, const String&amp; script);
 56     ExceptionOr&lt;void&gt; setSerifFontFamily(const String&amp; family, const String&amp; script);
 57     ExceptionOr&lt;void&gt; setSansSerifFontFamily(const String&amp; family, const String&amp; script);
 58     ExceptionOr&lt;void&gt; setFixedFontFamily(const String&amp; family, const String&amp; script);
 59     ExceptionOr&lt;void&gt; setCursiveFontFamily(const String&amp; family, const String&amp; script);
 60     ExceptionOr&lt;void&gt; setFantasyFontFamily(const String&amp; family, const String&amp; script);
 61     ExceptionOr&lt;void&gt; setPictographFontFamily(const String&amp; family, const String&amp; script);
 62     ExceptionOr&lt;void&gt; setTextAutosizingEnabled(bool);
 63     ExceptionOr&lt;void&gt; setTextAutosizingWindowSizeOverride(int width, int height);
 64     ExceptionOr&lt;void&gt; setTextAutosizingUsesIdempotentMode(bool);
 65     ExceptionOr&lt;void&gt; setTextAutosizingFontScaleFactor(float);
 66     ExceptionOr&lt;void&gt; setMediaTypeOverride(const String&amp;);
 67     ExceptionOr&lt;void&gt; setCanStartMedia(bool);
 68     ExceptionOr&lt;void&gt; setAllowsAirPlayForMediaPlayback(bool);
 69     ExceptionOr&lt;void&gt; setMediaCaptureRequiresSecureConnection(bool);
 70 
 71     ExceptionOr&lt;void&gt; setEditingBehavior(const String&amp;);
 72     ExceptionOr&lt;void&gt; setPreferMIMETypeForImages(bool);
 73     ExceptionOr&lt;void&gt; setPDFImageCachingPolicy(const String&amp;);
 74     ExceptionOr&lt;void&gt; setShouldDisplayTrackKind(const String&amp; kind, bool enabled);
 75     ExceptionOr&lt;bool&gt; shouldDisplayTrackKind(const String&amp; kind);
 76     ExceptionOr&lt;void&gt; setUseDarkAppearance(bool);
 77     ExceptionOr&lt;void&gt; setStorageBlockingPolicy(const String&amp;);
 78     ExceptionOr&lt;void&gt; setImagesEnabled(bool);
 79     ExceptionOr&lt;void&gt; setMinimumTimerInterval(double intervalInSeconds);
 80     ExceptionOr&lt;void&gt; setDefaultVideoPosterURL(const String&amp;);
 81     ExceptionOr&lt;void&gt; setForcePendingWebGLPolicy(bool);
 82     ExceptionOr&lt;void&gt; setTimeWithoutMouseMovementBeforeHidingControls(double);
 83     ExceptionOr&lt;void&gt; setUseLegacyBackgroundSizeShorthandBehavior(bool);
 84     ExceptionOr&lt;void&gt; setAutoscrollForDragAndDropEnabled(bool);
 85     ExceptionOr&lt;void&gt; setFontFallbackPrefersPictographs(bool);
 86     enum class FontLoadTimingOverride { Block, Swap, Failure };
 87     ExceptionOr&lt;void&gt; setFontLoadTimingOverride(const FontLoadTimingOverride&amp;);
 88     ExceptionOr&lt;void&gt; setShouldIgnoreFontLoadCompletions(bool);
 89     ExceptionOr&lt;void&gt; setQuickTimePluginReplacementEnabled(bool);
 90     ExceptionOr&lt;void&gt; setYouTubeFlashPluginReplacementEnabled(bool);
 91     ExceptionOr&lt;void&gt; setBackgroundShouldExtendBeyondPage(bool);
 92     ExceptionOr&lt;void&gt; setShouldConvertPositionStyleOnCopy(bool);
 93     ExceptionOr&lt;void&gt; setScrollingTreeIncludesFrames(bool);
 94     ExceptionOr&lt;void&gt; setAllowUnclampedScrollPosition(bool);
 95     ExceptionOr&lt;void&gt; setAllowsInlineMediaPlayback(bool);
 96     ExceptionOr&lt;void&gt; setAllowsInlineMediaPlaybackAfterFullscreen(bool);
 97     ExceptionOr&lt;void&gt; setInlineMediaPlaybackRequiresPlaysInlineAttribute(bool);
 98     ExceptionOr&lt;String&gt; userInterfaceDirectionPolicy();
 99     ExceptionOr&lt;void&gt; setUserInterfaceDirectionPolicy(const String&amp;);
100     ExceptionOr&lt;String&gt; systemLayoutDirection();
101     ExceptionOr&lt;void&gt; setSystemLayoutDirection(const String&amp;);
102     ExceptionOr&lt;void&gt; setShouldMockBoldSystemFontForAccessibility(bool);
103     ExceptionOr&lt;void&gt; setShouldManageAudioSessionCategory(bool);
104     ExceptionOr&lt;void&gt; setCustomPasteboardDataEnabled(bool);
105     ExceptionOr&lt;void&gt; setIncompleteImageBorderEnabled(bool);
106     ExceptionOr&lt;void&gt; setShouldDispatchSyntheticMouseEventsWhenModifyingSelection(bool);
107     ExceptionOr&lt;void&gt; setShouldDispatchSyntheticMouseOutAfterSyntheticClick(bool);
108     ExceptionOr&lt;void&gt; setAnimatedImageDebugCanvasDrawingEnabled(bool);
109 
110     using FrameFlatteningValue = FrameFlattening;
111     ExceptionOr&lt;void&gt; setFrameFlattening(FrameFlatteningValue);
112 
113     static void setAllowsAnySSLCertificate(bool);
114 
115     ExceptionOr&lt;bool&gt; deferredCSSParserEnabled();
116     ExceptionOr&lt;void&gt; setDeferredCSSParserEnabled(bool);
117 
118     enum class ForcedAccessibilityValue { System, On, Off };
119     ForcedAccessibilityValue forcedColorsAreInvertedAccessibilityValue() const;
120     void setForcedColorsAreInvertedAccessibilityValue(ForcedAccessibilityValue);
121     ForcedAccessibilityValue forcedDisplayIsMonochromeAccessibilityValue() const;
122     void setForcedDisplayIsMonochromeAccessibilityValue(ForcedAccessibilityValue);
123     ForcedAccessibilityValue forcedPrefersReducedMotionAccessibilityValue() const;
124     void setForcedPrefersReducedMotionAccessibilityValue(ForcedAccessibilityValue);
<a name="1" id="anc1"></a><span class="line-added">125     ForcedAccessibilityValue forcedSupportsHighDynamicRangeValue() const;</span>
<span class="line-added">126     void setForcedSupportsHighDynamicRangeValue(ForcedAccessibilityValue);</span>
127 
128     // RuntimeEnabledFeatures.
129     static void setIndexedDBWorkersEnabled(bool);
130     static void setWebGL2Enabled(bool);
131     static void setWebGPUEnabled(bool);
<a name="2" id="anc2"></a><span class="line-modified">132     static void setPictureInPictureAPIEnabled(bool);</span>
133     static void setScreenCaptureEnabled(bool);
134 
135     static bool webAnimationsCSSIntegrationEnabled();
136 
137     void setShouldDeactivateAudioSession(bool);
138 
139 private:
140     explicit InternalSettings(Page*);
141 
142     Settings&amp; settings() const;
143     static const char* supplementName();
144 
145     void setUseDarkAppearanceInternal(bool);
146 
147     class Backup {
148     public:
149         explicit Backup(Settings&amp;);
150         void restoreTo(Settings&amp;);
151 
152         EditingBehaviorType m_originalEditingBehavior;
153 
154         // Initially empty, only used if changed by a test.
155         ScriptFontFamilyMap m_standardFontFamilies;
156         ScriptFontFamilyMap m_fixedFontFamilies;
157         ScriptFontFamilyMap m_serifFontFamilies;
158         ScriptFontFamilyMap m_sansSerifFontFamilies;
159         ScriptFontFamilyMap m_cursiveFontFamilies;
160         ScriptFontFamilyMap m_fantasyFontFamilies;
161         ScriptFontFamilyMap m_pictographFontFamilies;
162 
163 #if ENABLE(TEXT_AUTOSIZING)
164         bool m_originalTextAutosizingEnabled;
165         IntSize m_originalTextAutosizingWindowSizeOverride;
166         bool m_originalTextAutosizingUsesIdempotentMode;
167 #endif
168 
169         String m_originalMediaTypeOverride;
170         bool m_originalCanvasUsesAcceleratedDrawing;
171         bool m_originalMockScrollbarsEnabled;
172         bool m_originalUsesOverlayScrollbars;
173         bool m_imagesEnabled;
174         bool m_preferMIMETypeForImages;
175         Seconds m_minimumDOMTimerInterval;
176 #if ENABLE(VIDEO_TRACK)
177         bool m_shouldDisplaySubtitles;
178         bool m_shouldDisplayCaptions;
179         bool m_shouldDisplayTextDescriptions;
180 #endif
181         String m_defaultVideoPosterURL;
182         bool m_forcePendingWebGLPolicy;
183         Seconds m_originalTimeWithoutMouseMovementBeforeHidingControls;
184         bool m_useLegacyBackgroundSizeShorthandBehavior;
185         bool m_autoscrollForDragAndDropEnabled;
186         bool m_quickTimePluginReplacementEnabled;
187         bool m_youTubeFlashPluginReplacementEnabled;
188         bool m_shouldConvertPositionStyleOnCopy;
189         bool m_fontFallbackPrefersPictographs;
190         bool m_shouldIgnoreFontLoadCompletions;
191         bool m_backgroundShouldExtendBeyondPage;
192         SecurityOrigin::StorageBlockingPolicy m_storageBlockingPolicy;
193         bool m_scrollingTreeIncludesFrames;
194 #if ENABLE(TOUCH_EVENTS)
195         bool m_touchEventEmulationEnabled;
196 #endif
197 #if ENABLE(WIRELESS_PLAYBACK_TARGET)
198         bool m_allowsAirPlayForMediaPlayback;
199 #endif
200         bool m_allowsInlineMediaPlayback;
201         bool m_allowsInlineMediaPlaybackAfterFullscreen;
202         bool m_inlineMediaPlaybackRequiresPlaysInlineAttribute;
203         bool m_deferredCSSParserEnabled;
204         bool m_inputEventsEnabled;
205         bool m_incompleteImageBorderEnabled;
206         bool m_shouldDispatchSyntheticMouseEventsWhenModifyingSelection;
207         bool m_shouldDispatchSyntheticMouseOutAfterSyntheticClick { false };
208         bool m_shouldDeactivateAudioSession;
209         bool m_animatedImageDebugCanvasDrawingEnabled;
210         UserInterfaceDirectionPolicy m_userInterfaceDirectionPolicy;
211         TextDirection m_systemLayoutDirection;
212         PDFImageCachingPolicy m_pdfImageCachingPolicy;
213         Settings::ForcedAccessibilityValue m_forcedColorsAreInvertedAccessibilityValue;
214         Settings::ForcedAccessibilityValue m_forcedDisplayIsMonochromeAccessibilityValue;
215         Settings::ForcedAccessibilityValue m_forcedPrefersReducedMotionAccessibilityValue;
216         Settings::FontLoadTimingOverride m_fontLoadTimingOverride;
217         FrameFlattening m_frameFlattening;
218 
219         // Runtime enabled settings.
220         bool m_indexedDBWorkersEnabled;
221         bool m_webGL2Enabled;
<a name="3" id="anc3"></a>
222         bool m_setScreenCaptureEnabled;
223 
224         bool m_shouldMockBoldSystemFontForAccessibility;
225 #if USE(AUDIO_SESSION)
226         bool m_shouldManageAudioSessionCategory;
227 #endif
228         bool m_customPasteboardDataEnabled;
229     };
230 
231     Page* m_page;
232     Backup m_backup;
233 };
234 
235 } // namespace WebCore
<a name="4" id="anc4"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="4" type="hidden" />
</body>
</html>