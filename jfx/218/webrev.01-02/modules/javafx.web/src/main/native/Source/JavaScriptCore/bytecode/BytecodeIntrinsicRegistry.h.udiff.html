<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/JavaScriptCore/bytecode/BytecodeIntrinsicRegistry.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="BytecodeIntrinsicRegistry.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="BytecodeList.rb.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/bytecode/BytecodeIntrinsicRegistry.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -33,37 +33,56 @@</span>
  
  class CommonIdentifiers;
  class BytecodeGenerator;
  class BytecodeIntrinsicNode;
  class RegisterID;
<span class="udiff-line-added">+ enum class LinkTimeConstant : int32_t;</span>
  
  #define JSC_COMMON_BYTECODE_INTRINSIC_FUNCTIONS_EACH_NAME(macro) \
      macro(argument) \
      macro(argumentCount) \
      macro(getByIdDirect) \
      macro(getByIdDirectPrivate) \
<span class="udiff-line-added">+     macro(getPromiseInternalField) \</span>
<span class="udiff-line-added">+     macro(getGeneratorInternalField) \</span>
<span class="udiff-line-added">+     macro(getAsyncGeneratorInternalField) \</span>
<span class="udiff-line-added">+     macro(getArrayIteratorInternalField) \</span>
<span class="udiff-line-added">+     macro(getStringIteratorInternalField) \</span>
      macro(idWithProfile) \
      macro(isObject) \
      macro(isJSArray) \
      macro(isProxyObject) \
      macro(isDerivedArray) \
<span class="udiff-line-added">+     macro(isGenerator) \</span>
<span class="udiff-line-added">+     macro(isAsyncGenerator) \</span>
<span class="udiff-line-added">+     macro(isPromise) \</span>
      macro(isRegExpObject) \
      macro(isMap) \
      macro(isSet) \
<span class="udiff-line-added">+     macro(isStringIterator) \</span>
<span class="udiff-line-added">+     macro(isArrayIterator) \</span>
      macro(isUndefinedOrNull) \
      macro(tailCallForwardArguments) \
      macro(throwTypeError) \
      macro(throwRangeError) \
      macro(throwOutOfMemoryError) \
      macro(tryGetById) \
      macro(putByIdDirect) \
      macro(putByIdDirectPrivate) \
      macro(putByValDirect) \
<span class="udiff-line-added">+     macro(putPromiseInternalField) \</span>
<span class="udiff-line-added">+     macro(putGeneratorInternalField) \</span>
<span class="udiff-line-added">+     macro(putAsyncGeneratorInternalField) \</span>
<span class="udiff-line-added">+     macro(putArrayIteratorInternalField) \</span>
<span class="udiff-line-added">+     macro(putStringIteratorInternalField) \</span>
      macro(toNumber) \
      macro(toString) \
      macro(toObject) \
      macro(newArrayWithSize) \
<span class="udiff-line-added">+     macro(newPromise) \</span>
<span class="udiff-line-added">+     macro(createPromise) \</span>
<span class="udiff-line-added">+     macro(createArgumentsButterfly) \</span>
      macro(defineEnumerableWritableConfigurableDataProperty) \
  
  #define JSC_COMMON_BYTECODE_INTRINSIC_CONSTANTS_EACH_NAME(macro) \
      JSC_COMMON_BYTECODE_INTRINSIC_CONSTANTS_SIMPLE_EACH_NAME(macro) \
      JSC_COMMON_BYTECODE_INTRINSIC_CONSTANTS_CUSTOM_EACH_NAME(macro) \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -71,11 +90,11 @@</span>
  #define JSC_COMMON_BYTECODE_INTRINSIC_CONSTANTS_SIMPLE_EACH_NAME(macro) \
      macro(undefined) \
      macro(Infinity) \
      macro(iterationKindKey) \
      macro(iterationKindValue) \
<span class="udiff-line-modified-removed">-     macro(iterationKindKeyValue) \</span>
<span class="udiff-line-modified-added">+     macro(iterationKindEntries) \</span>
      macro(MAX_ARRAY_INDEX) \
      macro(MAX_STRING_LENGTH) \
      macro(MAX_SAFE_INTEGER) \
      macro(ModuleFetch) \
      macro(ModuleTranslate) \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -86,15 +105,33 @@</span>
      macro(promiseRejectionReject) \
      macro(promiseRejectionHandle) \
      macro(promiseStatePending) \
      macro(promiseStateFulfilled) \
      macro(promiseStateRejected) \
<span class="udiff-line-added">+     macro(promiseStateMask) \</span>
<span class="udiff-line-added">+     macro(promiseFlagsIsHandled) \</span>
<span class="udiff-line-added">+     macro(promiseFlagsIsFirstResolvingFunctionCalled) \</span>
<span class="udiff-line-added">+     macro(promiseFieldFlags) \</span>
<span class="udiff-line-added">+     macro(promiseFieldReactionsOrResult) \</span>
<span class="udiff-line-added">+     macro(generatorFieldState) \</span>
<span class="udiff-line-added">+     macro(generatorFieldNext) \</span>
<span class="udiff-line-added">+     macro(generatorFieldThis) \</span>
<span class="udiff-line-added">+     macro(generatorFieldFrame) \</span>
      macro(GeneratorResumeModeNormal) \
      macro(GeneratorResumeModeThrow) \
      macro(GeneratorResumeModeReturn) \
      macro(GeneratorStateCompleted) \
      macro(GeneratorStateExecuting) \
<span class="udiff-line-added">+     macro(arrayIteratorFieldIndex) \</span>
<span class="udiff-line-added">+     macro(arrayIteratorFieldIsDone) \</span>
<span class="udiff-line-added">+     macro(arrayIteratorFieldIteratedObject) \</span>
<span class="udiff-line-added">+     macro(arrayIteratorFieldKind) \</span>
<span class="udiff-line-added">+     macro(stringIteratorFieldIndex) \</span>
<span class="udiff-line-added">+     macro(stringIteratorFieldIteratedString) \</span>
<span class="udiff-line-added">+     macro(asyncGeneratorFieldSuspendReason) \</span>
<span class="udiff-line-added">+     macro(asyncGeneratorFieldQueueFirst) \</span>
<span class="udiff-line-added">+     macro(asyncGeneratorFieldQueueLast) \</span>
      macro(AsyncGeneratorStateCompleted) \
      macro(AsyncGeneratorStateExecuting) \
      macro(AsyncGeneratorStateAwaitingReturn) \
      macro(AsyncGeneratorStateSuspendedStart) \
      macro(AsyncGeneratorStateSuspendedYield) \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -112,19 +149,56 @@</span>
  public:
      explicit BytecodeIntrinsicRegistry(VM&amp;);
  
      typedef RegisterID* (BytecodeIntrinsicNode::* EmitterType)(BytecodeGenerator&amp;, RegisterID*);
  
<span class="udiff-line-modified-removed">-     EmitterType lookup(const Identifier&amp;) const;</span>
<span class="udiff-line-modified-added">+     enum class Type : uint8_t {</span>
<span class="udiff-line-added">+         Emitter = 0,</span>
<span class="udiff-line-added">+         LinkTimeConstant = 1,</span>
<span class="udiff-line-added">+     };</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     class Entry {</span>
<span class="udiff-line-added">+     public:</span>
<span class="udiff-line-added">+         Entry()</span>
<span class="udiff-line-added">+             : m_type(Type::Emitter)</span>
<span class="udiff-line-added">+         {</span>
<span class="udiff-line-added">+             m_emitter = nullptr;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         Entry(EmitterType emitter)</span>
<span class="udiff-line-added">+             : m_type(Type::Emitter)</span>
<span class="udiff-line-added">+         {</span>
<span class="udiff-line-added">+             m_emitter = emitter;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         Entry(LinkTimeConstant linkTimeConstant)</span>
<span class="udiff-line-added">+             : m_type(Type::LinkTimeConstant)</span>
<span class="udiff-line-added">+         {</span>
<span class="udiff-line-added">+             m_linkTimeConstant = linkTimeConstant;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         Type type() const { return m_type; }</span>
<span class="udiff-line-added">+         LinkTimeConstant linkTimeConstant() const { return m_linkTimeConstant; }</span>
<span class="udiff-line-added">+         EmitterType emitter() const { return m_emitter; }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     private:</span>
<span class="udiff-line-added">+         union {</span>
<span class="udiff-line-added">+             EmitterType m_emitter;</span>
<span class="udiff-line-added">+             LinkTimeConstant m_linkTimeConstant;</span>
<span class="udiff-line-added">+         };</span>
<span class="udiff-line-added">+         Type m_type;</span>
<span class="udiff-line-added">+     };</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     Optional&lt;Entry&gt; lookup(const Identifier&amp;) const;</span>
  
  #define JSC_DECLARE_BYTECODE_INTRINSIC_CONSTANT_GENERATORS(name) JSValue name##Value(BytecodeGenerator&amp;);
      JSC_COMMON_BYTECODE_INTRINSIC_CONSTANTS_EACH_NAME(JSC_DECLARE_BYTECODE_INTRINSIC_CONSTANT_GENERATORS)
  #undef JSC_DECLARE_BYTECODE_INTRINSIC_CONSTANT_GENERATORS
  
  private:
      VM&amp; m_vm;
<span class="udiff-line-modified-removed">-     HashMap&lt;RefPtr&lt;UniquedStringImpl&gt;, EmitterType, IdentifierRepHash&gt; m_bytecodeIntrinsicMap;</span>
<span class="udiff-line-modified-added">+     HashMap&lt;RefPtr&lt;UniquedStringImpl&gt;, Entry, IdentifierRepHash&gt; m_bytecodeIntrinsicMap;</span>
  
  #define JSC_DECLARE_BYTECODE_INTRINSIC_CONSTANT_GENERATORS(name) Strong&lt;Unknown&gt; m_##name;
      JSC_COMMON_BYTECODE_INTRINSIC_CONSTANTS_SIMPLE_EACH_NAME(JSC_DECLARE_BYTECODE_INTRINSIC_CONSTANT_GENERATORS)
  #undef JSC_DECLARE_BYTECODE_INTRINSIC_CONSTANT_GENERATORS
  };
</pre>
<center><a href="BytecodeIntrinsicRegistry.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="BytecodeList.rb.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>