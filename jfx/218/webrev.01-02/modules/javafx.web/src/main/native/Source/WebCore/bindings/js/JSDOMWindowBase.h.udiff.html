<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/bindings/js/JSDOMWindowBase.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="JSDOMWindowBase.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="JSDOMWindowCustom.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/bindings/js/JSDOMWindowBase.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -46,18 +46,18 @@</span>
  class JSDOMWindow;
  class JSDOMWindowBasePrivate;
  class JSWindowProxy;
  
  class WEBCORE_EXPORT JSDOMWindowBase : public JSDOMGlobalObject {
<span class="udiff-line-modified-removed">-     typedef JSDOMGlobalObject Base;</span>
<span class="udiff-line-modified-removed">- protected:</span>
<span class="udiff-line-removed">-     JSDOMWindowBase(JSC::VM&amp;, JSC::Structure*, RefPtr&lt;DOMWindow&gt;&amp;&amp;, JSWindowProxy*);</span>
<span class="udiff-line-removed">-     void finishCreation(JSC::VM&amp;, JSWindowProxy*);</span>
<span class="udiff-line-modified-added">+ public:</span>
<span class="udiff-line-modified-added">+     using Base = JSDOMGlobalObject;</span>
  
      static void destroy(JSCell*);
  
<span class="udiff-line-modified-removed">- public:</span>
<span class="udiff-line-modified-added">+     template&lt;typename, JSC::SubspaceAccess&gt;</span>
<span class="udiff-line-added">+     static void subspaceFor(JSC::VM&amp;) { RELEASE_ASSERT_NOT_REACHED(); }</span>
<span class="udiff-line-added">+ </span>
      void updateDocument();
  
      DOMWindow&amp; wrapped() const { return *m_wrapped; }
      ScriptExecutionContext* scriptExecutionContext() const;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -75,45 +75,48 @@</span>
  
      static bool supportsRichSourceInfo(const JSC::JSGlobalObject*);
      static bool shouldInterruptScript(const JSC::JSGlobalObject*);
      static bool shouldInterruptScriptBeforeTimeout(const JSC::JSGlobalObject*);
      static JSC::RuntimeFlags javaScriptRuntimeFlags(const JSC::JSGlobalObject*);
<span class="udiff-line-modified-removed">-     static void queueTaskToEventLoop(JSC::JSGlobalObject&amp;, Ref&lt;JSC::Microtask&gt;&amp;&amp;);</span>
<span class="udiff-line-modified-added">+     static void queueMicrotaskToEventLoop(JSC::JSGlobalObject&amp;, Ref&lt;JSC::Microtask&gt;&amp;&amp;);</span>
  
      void printErrorMessage(const String&amp;) const;
  
      JSWindowProxy* proxy() const;
  
      static void fireFrameClearedWatchpointsForWindow(DOMWindow*);
  
  protected:
<span class="udiff-line-added">+     JSDOMWindowBase(JSC::VM&amp;, JSC::Structure*, RefPtr&lt;DOMWindow&gt;&amp;&amp;, JSWindowProxy*);</span>
<span class="udiff-line-added">+     void finishCreation(JSC::VM&amp;, JSWindowProxy*);</span>
<span class="udiff-line-added">+ </span>
      JSC::WatchpointSet m_windowCloseWatchpoints;
  
  private:
      using ResponseCallback = WTF::Function&lt;void(const char*, size_t)&gt;;
  
<span class="udiff-line-modified-removed">-     static JSC::Identifier moduleLoaderResolve(JSC::JSGlobalObject*, JSC::ExecState*, JSC::JSModuleLoader*, JSC::JSValue, JSC::JSValue, JSC::JSValue);</span>
<span class="udiff-line-modified-removed">-     static JSC::JSInternalPromise* moduleLoaderFetch(JSC::JSGlobalObject*, JSC::ExecState*, JSC::JSModuleLoader*, JSC::JSValue, JSC::JSValue, JSC::JSValue);</span>
<span class="udiff-line-modified-removed">-     static JSC::JSValue moduleLoaderEvaluate(JSC::JSGlobalObject*, JSC::ExecState*, JSC::JSModuleLoader*, JSC::JSValue, JSC::JSValue, JSC::JSValue);</span>
<span class="udiff-line-modified-removed">-     static JSC::JSInternalPromise* moduleLoaderImportModule(JSC::JSGlobalObject*, JSC::ExecState*, JSC::JSModuleLoader*, JSC::JSString*, JSC::JSValue, const JSC::SourceOrigin&amp;);</span>
<span class="udiff-line-modified-removed">-     static JSC::JSObject* moduleLoaderCreateImportMetaProperties(JSC::JSGlobalObject*, JSC::ExecState*, JSC::JSModuleLoader*, JSC::JSValue, JSC::JSModuleRecord*, JSC::JSValue);</span>
<span class="udiff-line-modified-added">+     static JSC::Identifier moduleLoaderResolve(JSC::JSGlobalObject*, JSC::JSModuleLoader*, JSC::JSValue, JSC::JSValue, JSC::JSValue);</span>
<span class="udiff-line-modified-added">+     static JSC::JSInternalPromise* moduleLoaderFetch(JSC::JSGlobalObject*, JSC::JSModuleLoader*, JSC::JSValue, JSC::JSValue, JSC::JSValue);</span>
<span class="udiff-line-modified-added">+     static JSC::JSValue moduleLoaderEvaluate(JSC::JSGlobalObject*, JSC::JSModuleLoader*, JSC::JSValue, JSC::JSValue, JSC::JSValue);</span>
<span class="udiff-line-modified-added">+     static JSC::JSInternalPromise* moduleLoaderImportModule(JSC::JSGlobalObject*, JSC::JSModuleLoader*, JSC::JSString*, JSC::JSValue, const JSC::SourceOrigin&amp;);</span>
<span class="udiff-line-modified-added">+     static JSC::JSObject* moduleLoaderCreateImportMetaProperties(JSC::JSGlobalObject*, JSC::JSModuleLoader*, JSC::JSValue, JSC::JSModuleRecord*, JSC::JSValue);</span>
  
  #if ENABLE(WEBASSEMBLY)
<span class="udiff-line-modified-removed">-     static void compileStreaming(JSC::JSGlobalObject*, JSC::ExecState*, JSC::JSPromiseDeferred*, JSC::JSValue);</span>
<span class="udiff-line-modified-removed">-     static void instantiateStreaming(JSC::JSGlobalObject*, JSC::ExecState*, JSC::JSPromiseDeferred*, JSC::JSValue, JSC::JSObject*);</span>
<span class="udiff-line-modified-added">+     static void compileStreaming(JSC::JSGlobalObject*, JSC::JSPromise*, JSC::JSValue);</span>
<span class="udiff-line-modified-added">+     static void instantiateStreaming(JSC::JSGlobalObject*, JSC::JSPromise*, JSC::JSValue, JSC::JSObject*);</span>
  #endif
  
      RefPtr&lt;DOMWindow&gt; m_wrapped;
      JSWindowProxy* m_proxy;
  };
  
<span class="udiff-line-modified-removed">- WEBCORE_EXPORT JSC::JSValue toJS(JSC::ExecState*, DOMWindow&amp;);</span>
<span class="udiff-line-modified-added">+ WEBCORE_EXPORT JSC::JSValue toJS(JSC::JSGlobalObject*, DOMWindow&amp;);</span>
  // The following return a JSWindowProxy or jsNull()
  // JSDOMGlobalObject* is ignored, accessing a window in any context will use that DOMWindow&#39;s prototype chain.
<span class="udiff-line-modified-removed">- inline JSC::JSValue toJS(JSC::ExecState* state, JSDOMGlobalObject*, DOMWindow&amp; window) { return toJS(state, window); }</span>
<span class="udiff-line-modified-removed">- inline JSC::JSValue toJS(JSC::ExecState* state, JSDOMGlobalObject* globalObject, DOMWindow* window) { return window ? toJS(state, globalObject, *window) : JSC::jsNull(); }</span>
<span class="udiff-line-modified-removed">- inline JSC::JSValue toJS(JSC::ExecState* state, DOMWindow* window) { return window ? toJS(state, *window) : JSC::jsNull(); }</span>
<span class="udiff-line-modified-added">+ inline JSC::JSValue toJS(JSC::JSGlobalObject* lexicalGlobalObject, JSDOMGlobalObject*, DOMWindow&amp; window) { return toJS(lexicalGlobalObject, window); }</span>
<span class="udiff-line-modified-added">+ inline JSC::JSValue toJS(JSC::JSGlobalObject* lexicalGlobalObject, JSDOMGlobalObject* globalObject, DOMWindow* window) { return window ? toJS(lexicalGlobalObject, globalObject, *window) : JSC::jsNull(); }</span>
<span class="udiff-line-modified-added">+ inline JSC::JSValue toJS(JSC::JSGlobalObject* lexicalGlobalObject, DOMWindow* window) { return window ? toJS(lexicalGlobalObject, *window) : JSC::jsNull(); }</span>
  
  // The following return a JSDOMWindow or nullptr.
  JSDOMWindow* toJSDOMWindow(Frame&amp;, DOMWrapperWorld&amp;);
  inline JSDOMWindow* toJSDOMWindow(Frame* frame, DOMWrapperWorld&amp; world) { return frame ? toJSDOMWindow(*frame, world) : nullptr; }
  WEBCORE_EXPORT JSDOMWindow* toJSDOMWindow(JSC::VM&amp;, JSC::JSValue);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -121,18 +124,18 @@</span>
  // DOMWindow associated with global object of the &quot;most-recently-entered author function or script
  // on the stack, or the author function or script that originally scheduled the currently-running callback.&quot;
  // (&lt;https://html.spec.whatwg.org/multipage/webappapis.html#concept-incumbent-everything&gt;, 27 April 2017)
  // FIXME: Make this work for an &quot;author function or script that originally scheduled the currently-running callback.&quot;
  // See &lt;https://bugs.webkit.org/show_bug.cgi?id=163412&gt;.
<span class="udiff-line-modified-removed">- DOMWindow&amp; incumbentDOMWindow(JSC::ExecState&amp;);</span>
<span class="udiff-line-modified-added">+ DOMWindow&amp; incumbentDOMWindow(JSC::JSGlobalObject&amp;, JSC::CallFrame&amp;);</span>
  
<span class="udiff-line-modified-removed">- DOMWindow&amp; activeDOMWindow(JSC::ExecState&amp;);</span>
<span class="udiff-line-modified-removed">- DOMWindow&amp; firstDOMWindow(JSC::ExecState&amp;);</span>
<span class="udiff-line-modified-added">+ DOMWindow&amp; activeDOMWindow(JSC::JSGlobalObject&amp;);</span>
<span class="udiff-line-modified-added">+ DOMWindow&amp; firstDOMWindow(JSC::JSGlobalObject&amp;);</span>
  
  // FIXME: This should probably be removed in favor of one of the other DOMWindow accessors. It is intended
  //        to provide the document specfied as the &#39;responsible document&#39; in the algorithm for document.open()
  //        (https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#document-open-steps steps 4
  //        and 23 and https://html.spec.whatwg.org/multipage/webappapis.html#responsible-document). It is only
  //        used by JSDocument.
<span class="udiff-line-modified-removed">- Document* responsibleDocument(JSC::ExecState&amp;);</span>
<span class="udiff-line-modified-added">+ Document* responsibleDocument(JSC::VM&amp;, JSC::CallFrame&amp;);</span>
  
  } // namespace WebCore
</pre>
<center><a href="JSDOMWindowBase.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="JSDOMWindowCustom.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>