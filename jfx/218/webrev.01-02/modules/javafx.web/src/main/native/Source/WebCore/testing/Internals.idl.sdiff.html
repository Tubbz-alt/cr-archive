<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/testing/Internals.idl</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Internals.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="MockCDMFactory.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/testing/Internals.idl</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
119 ] dictionary FullscreenInsets {
120     double top;
121     double left;
122     double bottom;
123     double right;
124 };
125 
126 [
127     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
128     JSGenerateToJSObject,
129 ] dictionary HEVCParameterSet {
130     DOMString codecName;
131     unsigned short generalProfileSpace;
132     unsigned short generalProfileIDC;
133     unsigned long generalProfileCompatibilityFlags;
134     boolean generalTierFlag;
135     unsigned short generalLevelIDC;
136     sequence&lt;unsigned short&gt; constraintFlags;
137 };
138 









139 [
140     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
141     JSGenerateToJSObject,
142 ] dictionary AcceleratedAnimation {
143     DOMString property;
144     double speed;
145 };
146 
147 [
148     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
149     JSGenerateToJSObject,
150 ] dictionary CookieData {
151     DOMString name;
152     DOMString value;
153     DOMString domain;
154     double expires;
155     boolean isHttpOnly;
156     boolean isSecure;
157     boolean isSession;
158     boolean isSameSiteLax;
</pre>
<hr />
<pre>
190 
191     // Must be called on an element whose enclosingLayer() is self-painting.
192     boolean isPaintingFrequently(Element element);
193     void incrementFrequentPaintCounter(Element element);
194 
195     [MayThrowException] DOMString elementRenderTreeAsText(Element element);
196     boolean isPreloaded(DOMString url);
197     boolean isLoadingFromMemoryCache(DOMString url);
198     DOMString fetchResponseSource(FetchResponse response);
199     DOMString xhrResponseSource(XMLHttpRequest xhr);
200     boolean isSharingStyleSheetContents(HTMLLinkElement a, HTMLLinkElement b);
201     boolean isStyleSheetLoadingSubresources(HTMLLinkElement link);
202     void clearMemoryCache();
203     void pruneMemoryCacheToSize(long size);
204     void destroyDecodedDataForAllImages();
205     long memoryCacheSize();
206     void setOverrideCachePolicy(CachePolicy policy);
207     void setOverrideResourceLoadPriority(ResourceLoadPriority priority);
208     void setStrictRawResourceValidationPolicyDisabled(boolean disabled);
209 
<span class="line-modified">210     void clearPageCache();</span>
<span class="line-modified">211     unsigned long pageCacheSize();</span>

212 
213     CSSStyleDeclaration computedStyleIncludingVisitedInfo(Element element);
214 
215     Node ensureUserAgentShadowRoot(Element host);
216     Node shadowRoot(Element host);
217 
218     // CSS Deferred Parsing Testing.
219     long deferredStyleRulesCount(StyleSheet sheet);
220     long deferredGroupRulesCount(StyleSheet sheet);
221     long deferredKeyframesRulesCount(StyleSheet sheet);
222 
223     [MayThrowException] DOMString shadowRootType(Node root);
224     DOMString shadowPseudoId(Element element);
225     void setShadowPseudoId(Element element, DOMString id);
226     Node treeScopeRootNode(Node node);
227     Node parentTreeScope(Node node);
228 
229     // Spatial Navigation testing
230     [MayThrowException] unsigned long lastSpatialNavigationCandidateCount();
231 
</pre>
<hr />
<pre>
280     [MayThrowException] DOMRect visualViewportRect();
281 
282     [MayThrowException] void setViewIsTransparent(boolean trnasparent);
283 
284     [MayThrowException] DOMString viewBaseBackgroundColor();
285     [MayThrowException] void setViewBaseBackgroundColor(DOMString colorValue);
286 
287     [MayThrowException] void setPagination(DOMString mode, long gap, optional long pageLength = 0);
288     [MayThrowException] void setPaginationLineGridEnabled(boolean enabled);
289 
290     [MayThrowException] DOMString configurationForViewport(unrestricted float devicePixelRatio, long deviceWidth, long deviceHeight, long availableWidth, long availableHeight);
291 
292     [MayThrowException] boolean wasLastChangeUserEdit(Element textField);
293     boolean elementShouldAutoComplete(HTMLInputElement inputElement);
294     void setAutofilled(HTMLInputElement inputElement, boolean enabled);
295     void setAutoFilledAndViewable(HTMLInputElement inputElement, boolean enabled);
296     void setShowAutoFillButton(HTMLInputElement inputElement, AutoFillButtonType autoFillButtonType);
297     AutoFillButtonType autoFillButtonType(HTMLInputElement inputElement);
298     AutoFillButtonType lastAutoFillButtonType(HTMLInputElement inputElement);
299 


300     [MayThrowException] Range? rangeOfString(DOMString text, Range? referenceRange, sequence&lt;DOMString&gt; findOptions);
301     [MayThrowException] unsigned long countMatchesForText(DOMString text, sequence&lt;DOMString&gt; findOptions, DOMString markMatches);
302     [MayThrowException] unsigned long countFindMatches(DOMString text, sequence&lt;DOMString&gt; findOptions);
303 
304     [MayThrowException] DOMString autofillFieldName(Element formControlElement);
305 
306     [MayThrowException] void invalidateControlTints();
307 
308     [MayThrowException] void scrollElementToRect(Element element, long x, long y, long w, long h);
309 
310     Range? rangeFromLocationAndLength(Element scope, long rangeLocation, long rangeLength);
311     unsigned long locationFromRange(Element scope, Range range);
312     unsigned long lengthFromRange(Element scope, Range range);
313     DOMString rangeAsText(Range range);
314     DOMString rangeAsTextUsingBackwardsTextIterator(Range range);
315     Range subrange(Range range, long rangeLocation, long rangeLength);
316     [MayThrowException] Range? rangeForDictionaryLookupAtLocation(long x, long y);
317     Range? rangeOfStringNearLocation(Range range, DOMString text, long targetOffset);
318 
319     [MayThrowException] void setDelegatesScrolling(boolean enabled);
</pre>
<hr />
<pre>
380 
381     readonly attribute InternalSettings settings;
382     readonly attribute unsigned long workerThreadCount;
383 
384     [MayThrowException] readonly attribute boolean areSVGAnimationsPaused;
385     [MayThrowException] double svgAnimationsInterval(SVGSVGElement element);
386 
387     boolean testProcessIncomingSyncMessagesWhenWaitingForSyncReply();
388 
389     // Flags for layerTreeAsText.
390     const unsigned short LAYER_TREE_INCLUDES_VISIBLE_RECTS = 1;
391     const unsigned short LAYER_TREE_INCLUDES_TILE_CACHES = 2;
392     const unsigned short LAYER_TREE_INCLUDES_REPAINT_RECTS = 4;
393     const unsigned short LAYER_TREE_INCLUDES_PAINTING_PHASES = 8;
394     const unsigned short LAYER_TREE_INCLUDES_CONTENT_LAYERS = 16;
395     const unsigned short LAYER_TREE_INCLUDES_ACCELERATES_DRAWING = 32;
396     const unsigned short LAYER_TREE_INCLUDES_CLIPPING = 64;
397     const unsigned short LAYER_TREE_INCLUDES_BACKING_STORE_ATTACHED = 128;
398     const unsigned short LAYER_TREE_INCLUDES_ROOT_LAYER_PROPERTIES = 256;
399     const unsigned short LAYER_TREE_INCLUDES_EVENT_REGION = 512;

400     [MayThrowException] DOMString layerTreeAsText(Document document, optional unsigned short flags = 0);
401 
402     [MayThrowException] unsigned long long layerIDForElement(Element element);
403 
404     [MayThrowException] DOMString scrollbarOverlayStyle(optional Node? node = null);
405     [MayThrowException] boolean scrollbarUsingDarkAppearance(optional Node? node = null);
406 
407     [MayThrowException] DOMString scrollingStateTreeAsText();
408     [MayThrowException] DOMString mainThreadScrollingReasons(); // FIXME: rename to synchronousScrollingReasons().
409     [MayThrowException] DOMRectList nonFastScrollableRects();
410 
411     [MayThrowException] DOMString repaintRectsAsText();
412 
413     // These throw if the element does not have a compositing layer.
414     [MayThrowException] void setElementUsesDisplayListDrawing(Element element, boolean usesDisplayListDrawing);
415     [MayThrowException] void setElementTracksDisplayListReplay(Element element, boolean trackReplay);
416 
417     // Flags for displayListForElement.
418     const unsigned short DISPLAY_LIST_INCLUDES_PLATFORM_OPERATIONS = 1;
419     // Returns the recorded display list.
</pre>
<hr />
<pre>
518     attribute CompositingPolicy? compositingPolicyOverride;
519 
520     // |node| should be Document, HTMLIFrameElement, or unspecified.
521     // If |node| is an HTMLIFrameElement, it assumes node.contentDocument is
522     // specified without security checks. Unspecified or null means this document.
523     [MayThrowException] void updateLayoutIgnorePendingStylesheetsAndRunPostLayoutTasks(optional Node? node = null);
524 
525     readonly attribute unsigned long layoutCount;
526 
527     // Returns a string with information about the mouse cursor used at the specified client location.
528     [MayThrowException] DOMString getCurrentCursorInfo();
529 
530     DOMString markerTextForListItem(Element element);
531 
532     DOMString toolTipFromElement(Element element);
533 
534     SerializedScriptValue deserializeBuffer(ArrayBuffer buffer);
535     ArrayBuffer serializeObject(SerializedScriptValue object);
536 
537     boolean isFromCurrentWorld(any obj);

538 
539     void setUsesOverlayScrollbars(boolean enabled);
540     void setUsesMockScrollAnimator(boolean enabled);
541 
542     void forceReload(boolean endToEnd);
543     void reloadExpiredOnly();
544 
545     void enableAutoSizeMode(boolean enabled, long width, long height);
546 
547     [Conditional=VIDEO] sequence&lt;DOMString&gt; mediaResponseSources(HTMLMediaElement media);
548     [Conditional=VIDEO] sequence&lt;DOMString&gt; mediaResponseContentRanges(HTMLMediaElement media);
549     [Conditional=VIDEO] void simulateAudioInterruption(HTMLMediaElement element);
550     [Conditional=VIDEO, MayThrowException] boolean mediaElementHasCharacteristic(HTMLMediaElement element, DOMString characteristic);
551     [Conditional=VIDEO] void beginSimulatedHDCPError(HTMLMediaElement media);
552     [Conditional=VIDEO] void endSimulatedHDCPError(HTMLMediaElement media);
553 
554     [Conditional=VIDEO] boolean elementShouldBufferData(HTMLMediaElement media);
555     [Conditional=VIDEO] DOMString elementBufferingPolicy(HTMLMediaElement media);
556     [Conditional=VIDEO] double privatePlayerVolume(HTMLMediaElement media);
557 
</pre>
<hr />
<pre>
591     [Conditional=MEDIA_SOURCE] void setMaximumQueueDepthForTrackID(SourceBuffer buffer, DOMString trackID, unsigned long maxQueueDepth);
592 
593     [Conditional=VIDEO, MayThrowException] void beginMediaSessionInterruption(DOMString interruptionType);
594     [Conditional=VIDEO] void endMediaSessionInterruption(DOMString flags);
595     [Conditional=MEDIA_SESSION] void sendMediaSessionStartOfInterruptionNotification(MediaSessionInterruptingCategory category);
596     [Conditional=MEDIA_SESSION] void sendMediaSessionEndOfInterruptionNotification(MediaSessionInterruptingCategory category);
597     [Conditional=MEDIA_SESSION] DOMString mediaSessionCurrentState(MediaSession session);
598     [Conditional=MEDIA_SESSION] double mediaElementPlayerVolume(HTMLMediaElement element);
599     [Conditional=MEDIA_SESSION] void sendMediaControlEvent(MediaControlEvent event);
600     [Conditional=VIDEO] void applicationWillBecomeInactive();
601     [Conditional=VIDEO] void applicationDidBecomeActive();
602     [Conditional=VIDEO] void applicationWillEnterForeground(optional boolean suspendedUnderLock = false);
603     [Conditional=VIDEO] void applicationDidEnterBackground(optional boolean suspendedUnderLock = false);
604     [Conditional=VIDEO, MayThrowException] void setMediaSessionRestrictions(DOMString mediaType, DOMString restrictions);
605     [Conditional=VIDEO, MayThrowException] DOMString mediaSessionRestrictions(DOMString mediaType);
606     [Conditional=VIDEO] void setMediaElementRestrictions(HTMLMediaElement element, DOMString restrictions);
607     [Conditional=WEB_AUDIO] void setAudioContextRestrictions(AudioContext context, DOMString restrictions);
608     [Conditional=VIDEO, MayThrowException] void postRemoteControlCommand(DOMString command, optional unrestricted float argument = 0);
609     [Conditional=WIRELESS_PLAYBACK_TARGET] void setMockMediaPlaybackTargetPickerEnabled(boolean enabled);
610     [Conditional=WIRELESS_PLAYBACK_TARGET, MayThrowException] void setMockMediaPlaybackTargetPickerState(DOMString deviceName, DOMString deviceState);
<span class="line-modified">611     [Conditional=MEDIA_STREAM] void setMockMediaCaptureDevicesEnabled(boolean enabled);</span>
612     [Conditional=MEDIA_STREAM] void setCustomPrivateRecorderCreator();
613 


614     [Conditional=WEB_RTC] void emulateRTCPeerConnectionPlatformEvent(RTCPeerConnection connection, DOMString action);
615     [Conditional=WEB_RTC] void useMockRTCPeerConnectionFactory(DOMString testCase);
616     [Conditional=WEB_RTC] void setICECandidateFiltering(boolean enabled);
617     [Conditional=WEB_RTC] void setEnumeratingAllNetworkInterfacesEnabled(boolean enabled);
618     [Conditional=WEB_RTC] void stopPeerConnection(RTCPeerConnection connection);
619     [Conditional=WEB_RTC] void clearPeerConnectionFactory();
620     [Conditional=WEB_RTC] void setEnableWebRTCEncryption(boolean enabled);


621 
622     [Conditional=VIDEO] void simulateSystemSleep();
623     [Conditional=VIDEO] void simulateSystemWake();
624     [Conditional=VIDEO] boolean elementIsBlockingDisplaySleep(HTMLMediaElement element);
625 
626     [MayThrowException] MockPageOverlay installMockPageOverlay(PageOverlayType type);
627     [MayThrowException] DOMString pageOverlayLayerTreeAsText(optional unsigned short flags = 0);
628 
629     void setPageMuted(DOMString mutedState);
630     DOMString pageMediaState();
631 
632     void setPageDefersLoading(boolean defersLoading);
633     [MayThrowException] boolean pageDefersLoading();
634 
635     File? createFile(DOMString url);
636     void queueMicroTask(long testNumber);
637     boolean testPreloaderSettingViewport();
638 
639     [Conditional=CONTENT_FILTERING] readonly attribute MockContentFilterSettings mockContentFilterSettings;
640 
641     [Conditional=CSS_SCROLL_SNAP, MayThrowException] DOMString scrollSnapOffsets(Element element);
642     [Conditional=CSS_SCROLL_SNAP] void setPlatformMomentumScrollingPredictionEnabled(boolean enabled);
643 
644     [MayThrowException] DOMString pathStringWithShrinkWrappedRects(sequence&lt;double&gt; rectComponents, double radius);
645 
646     [Conditional=VIDEO] DOMString getCurrentMediaControlsStatusForElement(HTMLMediaElement element);
647 
648     DOMString userVisibleString(DOMURL url);
649 
650     void setShowAllPlugins(boolean showAll);
651 
<span class="line-modified">652     [Conditional=STREAMS_API, CallWith=ExecState] any cloneArrayBuffer(any buffer, any srcByteOffset, any byteLength);</span>
<span class="line-modified">653     [Conditional=STREAMS_API, CallWith=ExecState] boolean isReadableStreamDisturbed(any stream);</span>
654 
655     DOMString resourceLoadStatisticsForURL(DOMURL url);
656     void setResourceLoadStatisticsEnabled(boolean enable);
657 
658     [MayThrowException] void setCanShowModalDialogOverride(boolean allow);
659 
660     DOMString composedTreeAsText(Node parent);
661 
662     boolean isProcessingUserGesture();
663     double lastHandledUserGestureTimestamp();
664 
665     void withUserGesture(VoidCallback callback);
666 
667     boolean userIsInteracting();
668 
669     GCObservation? observeGC(any observed);
670 
671     void setUserInterfaceLayoutDirection(UserInterfaceLayoutDirection userInterfaceLayoutDirection);
672     void setBaseWritingDirection(BaseWritingDirection direction);
673 
</pre>
<hr />
<pre>
694 
695     void setPageVisibility(boolean isVisible);
696     void setPageIsFocusedAndActive(boolean isFocused);
697 
698     [Conditional=WEB_RTC] void setH264HardwareEncoderAllowed(boolean allowed);
699     [Conditional=WEB_RTC] void applyRotationForOutgoingVideoSources(RTCPeerConnection connection);
700 
701     [Conditional=MEDIA_STREAM] void setMockAudioTrackChannelNumber(MediaStreamTrack track, unsigned short count);
702     [Conditional=MEDIA_STREAM] void setShouldInterruptAudioOnPageVisibilityChange(boolean shouldInterrupt);
703     [Conditional=MEDIA_STREAM] void setCameraMediaStreamTrackOrientation(MediaStreamTrack track, short orientation);
704     [Conditional=MEDIA_STREAM] void observeMediaStreamTrack(MediaStreamTrack track);
705     [Conditional=MEDIA_STREAM] Promise&lt;ImageData&gt; grabNextMediaStreamTrackFrame();
706     [Conditional=MEDIA_STREAM] readonly attribute unsigned long trackAudioSampleCount;
707     [Conditional=MEDIA_STREAM] readonly attribute unsigned long trackVideoSampleCount;
708     [Conditional=MEDIA_STREAM] void delayMediaStreamTrackSamples(MediaStreamTrack track, float delay);
709     [Conditional=MEDIA_STREAM] void setMediaStreamTrackMuted(MediaStreamTrack track, boolean muted);
710     [Conditional=MEDIA_STREAM] void removeMediaStreamTrack(MediaStream stream, MediaStreamTrack track);
711     [Conditional=MEDIA_STREAM] void simulateMediaStreamTrackCaptureSourceFailure(MediaStreamTrack track);
712     [Conditional=MEDIA_STREAM] void setMediaStreamTrackIdentifier(MediaStreamTrack track, DOMString identifier);
713     [Conditional=MEDIA_STREAM] void setMediaStreamSourceInterrupted(MediaStreamTrack track, boolean interrupted);
<span class="line-modified">714     [Conditional=MEDIA_STREAM] void setDisableGetDisplayMediaUserGestureConstraint(boolean value);</span>
715 
716     unsigned long long documentIdentifier(Document document);
717     boolean isDocumentAlive(unsigned long long documentIdentifier);
718 






719     boolean isAnyWorkletGlobalScopeAlive();
720 

721     DOMString serviceWorkerClientIdentifier(Document document);
722     Promise&lt;void&gt; storeRegistrationsOnDisk();
723 
724     Promise&lt;void&gt; clearCacheStorageMemoryRepresentation();
725     Promise&lt;DOMString&gt; cacheStorageEngineRepresentation();
726     void setResponseSizeWithPadding(FetchResponse response, unsigned long long size);
727     unsigned long long responseSizeWithPadding(FetchResponse response);
728 
729     void updateQuotaBasedOnSpaceUsage();
730 
731     void setConsoleMessageListener(StringCallback callback);
732 

733     DOMString audioSessionCategory();
734     double preferredAudioBufferSize();
735     boolean audioSessionActive();
736 
737     [Conditional=SERVICE_WORKER] Promise&lt;boolean&gt; hasServiceWorkerRegistration(DOMString scopeURL);
738     [Conditional=SERVICE_WORKER] void terminateServiceWorker(ServiceWorker worker);
<span class="line-modified">739     [Conditional=SERVICE_WORKER] boolean hasServiceWorkerConnection();</span>
740 
741     [CallWith=Document, Conditional=APPLE_PAY] readonly attribute MockPaymentCoordinator mockPaymentCoordinator;
742 
743     boolean isSystemPreviewLink(Element element);
744     boolean isSystemPreviewImage(Element element);
745 
746     boolean usingAppleInternalSDK();
747 
748     void postTask(VoidCallback callback);






749     void markContextAsInsecure();
750 


751     [Conditional=VIDEO, MayThrowException] readonly attribute NowPlayingState nowPlayingState;
752 
753     [Conditional=VIDEO] HTMLMediaElement bestMediaElementForShowingPlaybackControlsManager(PlaybackControlsPurpose purpose);
754     [Conditional=VIDEO] MediaSessionState mediaSessionState(HTMLMediaElement element);
755 
756     DOMString ongoingLoadsDescriptions();
757     void setCaptureExtraNetworkLoadMetricsEnabled(boolean value);
758 
759     void reloadWithoutContentExtensions();
760 
761     void setUseSystemAppearance(boolean value);
762 
763     unsigned long pluginCount();
764 
765     void notifyResourceLoadObserver();
766 
767     unsigned long primaryScreenDisplayID();
768 
769     boolean capsLockIsOn();
770 
771     boolean supportsVCPEncoder();
772 
773     HEVCParameterSet? parseHEVCCodecParameters(DOMString codecParameters);

774 
775     sequence&lt;CookieData&gt; getCookies();
776 
777     void setAlwaysAllowLocalWebarchive(boolean alwaysAllowLocalWebarchive);
778 
779     void processWillSuspend();
780     void processDidResume();
781 
782     void testDictionaryLogging();
783 
784     void setXHRMaximumIntervalForUserGestureForwarding(XMLHttpRequest xhr, double interval);

785 
786     void setIsPlayingToAutomotiveHeadUnit(boolean value);
787 
788     TextIndicatorInfo textIndicatorForRange(Range range, TextIndicatorOptions options);
789 
790     void addPrefetchLoadEventListener(HTMLLinkElement link, EventListener? callback);



















791 };
</pre>
</td>
<td>
<hr />
<pre>
119 ] dictionary FullscreenInsets {
120     double top;
121     double left;
122     double bottom;
123     double right;
124 };
125 
126 [
127     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
128     JSGenerateToJSObject,
129 ] dictionary HEVCParameterSet {
130     DOMString codecName;
131     unsigned short generalProfileSpace;
132     unsigned short generalProfileIDC;
133     unsigned long generalProfileCompatibilityFlags;
134     boolean generalTierFlag;
135     unsigned short generalLevelIDC;
136     sequence&lt;unsigned short&gt; constraintFlags;
137 };
138 
<span class="line-added">139 [</span>
<span class="line-added">140     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,</span>
<span class="line-added">141     JSGenerateToJSObject,</span>
<span class="line-added">142 ] dictionary DoViParameterSet {</span>
<span class="line-added">143     DOMString codecName;</span>
<span class="line-added">144     unsigned short bitstreamProfileID;</span>
<span class="line-added">145     unsigned short bitstreamLevelID;</span>
<span class="line-added">146 };</span>
<span class="line-added">147 </span>
148 [
149     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
150     JSGenerateToJSObject,
151 ] dictionary AcceleratedAnimation {
152     DOMString property;
153     double speed;
154 };
155 
156 [
157     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
158     JSGenerateToJSObject,
159 ] dictionary CookieData {
160     DOMString name;
161     DOMString value;
162     DOMString domain;
163     double expires;
164     boolean isHttpOnly;
165     boolean isSecure;
166     boolean isSession;
167     boolean isSameSiteLax;
</pre>
<hr />
<pre>
199 
200     // Must be called on an element whose enclosingLayer() is self-painting.
201     boolean isPaintingFrequently(Element element);
202     void incrementFrequentPaintCounter(Element element);
203 
204     [MayThrowException] DOMString elementRenderTreeAsText(Element element);
205     boolean isPreloaded(DOMString url);
206     boolean isLoadingFromMemoryCache(DOMString url);
207     DOMString fetchResponseSource(FetchResponse response);
208     DOMString xhrResponseSource(XMLHttpRequest xhr);
209     boolean isSharingStyleSheetContents(HTMLLinkElement a, HTMLLinkElement b);
210     boolean isStyleSheetLoadingSubresources(HTMLLinkElement link);
211     void clearMemoryCache();
212     void pruneMemoryCacheToSize(long size);
213     void destroyDecodedDataForAllImages();
214     long memoryCacheSize();
215     void setOverrideCachePolicy(CachePolicy policy);
216     void setOverrideResourceLoadPriority(ResourceLoadPriority priority);
217     void setStrictRawResourceValidationPolicyDisabled(boolean disabled);
218 
<span class="line-modified">219     void clearBackForwardCache();</span>
<span class="line-modified">220     unsigned long backForwardCacheSize();</span>
<span class="line-added">221     void preventDocumentFromEnteringBackForwardCache();</span>
222 
223     CSSStyleDeclaration computedStyleIncludingVisitedInfo(Element element);
224 
225     Node ensureUserAgentShadowRoot(Element host);
226     Node shadowRoot(Element host);
227 
228     // CSS Deferred Parsing Testing.
229     long deferredStyleRulesCount(StyleSheet sheet);
230     long deferredGroupRulesCount(StyleSheet sheet);
231     long deferredKeyframesRulesCount(StyleSheet sheet);
232 
233     [MayThrowException] DOMString shadowRootType(Node root);
234     DOMString shadowPseudoId(Element element);
235     void setShadowPseudoId(Element element, DOMString id);
236     Node treeScopeRootNode(Node node);
237     Node parentTreeScope(Node node);
238 
239     // Spatial Navigation testing
240     [MayThrowException] unsigned long lastSpatialNavigationCandidateCount();
241 
</pre>
<hr />
<pre>
290     [MayThrowException] DOMRect visualViewportRect();
291 
292     [MayThrowException] void setViewIsTransparent(boolean trnasparent);
293 
294     [MayThrowException] DOMString viewBaseBackgroundColor();
295     [MayThrowException] void setViewBaseBackgroundColor(DOMString colorValue);
296 
297     [MayThrowException] void setPagination(DOMString mode, long gap, optional long pageLength = 0);
298     [MayThrowException] void setPaginationLineGridEnabled(boolean enabled);
299 
300     [MayThrowException] DOMString configurationForViewport(unrestricted float devicePixelRatio, long deviceWidth, long deviceHeight, long availableWidth, long availableHeight);
301 
302     [MayThrowException] boolean wasLastChangeUserEdit(Element textField);
303     boolean elementShouldAutoComplete(HTMLInputElement inputElement);
304     void setAutofilled(HTMLInputElement inputElement, boolean enabled);
305     void setAutoFilledAndViewable(HTMLInputElement inputElement, boolean enabled);
306     void setShowAutoFillButton(HTMLInputElement inputElement, AutoFillButtonType autoFillButtonType);
307     AutoFillButtonType autoFillButtonType(HTMLInputElement inputElement);
308     AutoFillButtonType lastAutoFillButtonType(HTMLInputElement inputElement);
309 
<span class="line-added">310     void setCanShowPlaceholder(Element element, boolean canShowPlaceholder);</span>
<span class="line-added">311 </span>
312     [MayThrowException] Range? rangeOfString(DOMString text, Range? referenceRange, sequence&lt;DOMString&gt; findOptions);
313     [MayThrowException] unsigned long countMatchesForText(DOMString text, sequence&lt;DOMString&gt; findOptions, DOMString markMatches);
314     [MayThrowException] unsigned long countFindMatches(DOMString text, sequence&lt;DOMString&gt; findOptions);
315 
316     [MayThrowException] DOMString autofillFieldName(Element formControlElement);
317 
318     [MayThrowException] void invalidateControlTints();
319 
320     [MayThrowException] void scrollElementToRect(Element element, long x, long y, long w, long h);
321 
322     Range? rangeFromLocationAndLength(Element scope, long rangeLocation, long rangeLength);
323     unsigned long locationFromRange(Element scope, Range range);
324     unsigned long lengthFromRange(Element scope, Range range);
325     DOMString rangeAsText(Range range);
326     DOMString rangeAsTextUsingBackwardsTextIterator(Range range);
327     Range subrange(Range range, long rangeLocation, long rangeLength);
328     [MayThrowException] Range? rangeForDictionaryLookupAtLocation(long x, long y);
329     Range? rangeOfStringNearLocation(Range range, DOMString text, long targetOffset);
330 
331     [MayThrowException] void setDelegatesScrolling(boolean enabled);
</pre>
<hr />
<pre>
392 
393     readonly attribute InternalSettings settings;
394     readonly attribute unsigned long workerThreadCount;
395 
396     [MayThrowException] readonly attribute boolean areSVGAnimationsPaused;
397     [MayThrowException] double svgAnimationsInterval(SVGSVGElement element);
398 
399     boolean testProcessIncomingSyncMessagesWhenWaitingForSyncReply();
400 
401     // Flags for layerTreeAsText.
402     const unsigned short LAYER_TREE_INCLUDES_VISIBLE_RECTS = 1;
403     const unsigned short LAYER_TREE_INCLUDES_TILE_CACHES = 2;
404     const unsigned short LAYER_TREE_INCLUDES_REPAINT_RECTS = 4;
405     const unsigned short LAYER_TREE_INCLUDES_PAINTING_PHASES = 8;
406     const unsigned short LAYER_TREE_INCLUDES_CONTENT_LAYERS = 16;
407     const unsigned short LAYER_TREE_INCLUDES_ACCELERATES_DRAWING = 32;
408     const unsigned short LAYER_TREE_INCLUDES_CLIPPING = 64;
409     const unsigned short LAYER_TREE_INCLUDES_BACKING_STORE_ATTACHED = 128;
410     const unsigned short LAYER_TREE_INCLUDES_ROOT_LAYER_PROPERTIES = 256;
411     const unsigned short LAYER_TREE_INCLUDES_EVENT_REGION = 512;
<span class="line-added">412     const unsigned short LAYER_TREE_INCLUDES_DEEP_COLOR = 1024;</span>
413     [MayThrowException] DOMString layerTreeAsText(Document document, optional unsigned short flags = 0);
414 
415     [MayThrowException] unsigned long long layerIDForElement(Element element);
416 
417     [MayThrowException] DOMString scrollbarOverlayStyle(optional Node? node = null);
418     [MayThrowException] boolean scrollbarUsingDarkAppearance(optional Node? node = null);
419 
420     [MayThrowException] DOMString scrollingStateTreeAsText();
421     [MayThrowException] DOMString mainThreadScrollingReasons(); // FIXME: rename to synchronousScrollingReasons().
422     [MayThrowException] DOMRectList nonFastScrollableRects();
423 
424     [MayThrowException] DOMString repaintRectsAsText();
425 
426     // These throw if the element does not have a compositing layer.
427     [MayThrowException] void setElementUsesDisplayListDrawing(Element element, boolean usesDisplayListDrawing);
428     [MayThrowException] void setElementTracksDisplayListReplay(Element element, boolean trackReplay);
429 
430     // Flags for displayListForElement.
431     const unsigned short DISPLAY_LIST_INCLUDES_PLATFORM_OPERATIONS = 1;
432     // Returns the recorded display list.
</pre>
<hr />
<pre>
531     attribute CompositingPolicy? compositingPolicyOverride;
532 
533     // |node| should be Document, HTMLIFrameElement, or unspecified.
534     // If |node| is an HTMLIFrameElement, it assumes node.contentDocument is
535     // specified without security checks. Unspecified or null means this document.
536     [MayThrowException] void updateLayoutIgnorePendingStylesheetsAndRunPostLayoutTasks(optional Node? node = null);
537 
538     readonly attribute unsigned long layoutCount;
539 
540     // Returns a string with information about the mouse cursor used at the specified client location.
541     [MayThrowException] DOMString getCurrentCursorInfo();
542 
543     DOMString markerTextForListItem(Element element);
544 
545     DOMString toolTipFromElement(Element element);
546 
547     SerializedScriptValue deserializeBuffer(ArrayBuffer buffer);
548     ArrayBuffer serializeObject(SerializedScriptValue object);
549 
550     boolean isFromCurrentWorld(any obj);
<span class="line-added">551     any evaluateInWorldIgnoringException(DOMString name, DOMString source);</span>
552 
553     void setUsesOverlayScrollbars(boolean enabled);
554     void setUsesMockScrollAnimator(boolean enabled);
555 
556     void forceReload(boolean endToEnd);
557     void reloadExpiredOnly();
558 
559     void enableAutoSizeMode(boolean enabled, long width, long height);
560 
561     [Conditional=VIDEO] sequence&lt;DOMString&gt; mediaResponseSources(HTMLMediaElement media);
562     [Conditional=VIDEO] sequence&lt;DOMString&gt; mediaResponseContentRanges(HTMLMediaElement media);
563     [Conditional=VIDEO] void simulateAudioInterruption(HTMLMediaElement element);
564     [Conditional=VIDEO, MayThrowException] boolean mediaElementHasCharacteristic(HTMLMediaElement element, DOMString characteristic);
565     [Conditional=VIDEO] void beginSimulatedHDCPError(HTMLMediaElement media);
566     [Conditional=VIDEO] void endSimulatedHDCPError(HTMLMediaElement media);
567 
568     [Conditional=VIDEO] boolean elementShouldBufferData(HTMLMediaElement media);
569     [Conditional=VIDEO] DOMString elementBufferingPolicy(HTMLMediaElement media);
570     [Conditional=VIDEO] double privatePlayerVolume(HTMLMediaElement media);
571 
</pre>
<hr />
<pre>
605     [Conditional=MEDIA_SOURCE] void setMaximumQueueDepthForTrackID(SourceBuffer buffer, DOMString trackID, unsigned long maxQueueDepth);
606 
607     [Conditional=VIDEO, MayThrowException] void beginMediaSessionInterruption(DOMString interruptionType);
608     [Conditional=VIDEO] void endMediaSessionInterruption(DOMString flags);
609     [Conditional=MEDIA_SESSION] void sendMediaSessionStartOfInterruptionNotification(MediaSessionInterruptingCategory category);
610     [Conditional=MEDIA_SESSION] void sendMediaSessionEndOfInterruptionNotification(MediaSessionInterruptingCategory category);
611     [Conditional=MEDIA_SESSION] DOMString mediaSessionCurrentState(MediaSession session);
612     [Conditional=MEDIA_SESSION] double mediaElementPlayerVolume(HTMLMediaElement element);
613     [Conditional=MEDIA_SESSION] void sendMediaControlEvent(MediaControlEvent event);
614     [Conditional=VIDEO] void applicationWillBecomeInactive();
615     [Conditional=VIDEO] void applicationDidBecomeActive();
616     [Conditional=VIDEO] void applicationWillEnterForeground(optional boolean suspendedUnderLock = false);
617     [Conditional=VIDEO] void applicationDidEnterBackground(optional boolean suspendedUnderLock = false);
618     [Conditional=VIDEO, MayThrowException] void setMediaSessionRestrictions(DOMString mediaType, DOMString restrictions);
619     [Conditional=VIDEO, MayThrowException] DOMString mediaSessionRestrictions(DOMString mediaType);
620     [Conditional=VIDEO] void setMediaElementRestrictions(HTMLMediaElement element, DOMString restrictions);
621     [Conditional=WEB_AUDIO] void setAudioContextRestrictions(AudioContext context, DOMString restrictions);
622     [Conditional=VIDEO, MayThrowException] void postRemoteControlCommand(DOMString command, optional unrestricted float argument = 0);
623     [Conditional=WIRELESS_PLAYBACK_TARGET] void setMockMediaPlaybackTargetPickerEnabled(boolean enabled);
624     [Conditional=WIRELESS_PLAYBACK_TARGET, MayThrowException] void setMockMediaPlaybackTargetPickerState(DOMString deviceName, DOMString deviceState);
<span class="line-modified">625     [Conditional=WIRELESS_PLAYBACK_TARGET] void mockMediaPlaybackTargetPickerDismissPopup();</span>
626     [Conditional=MEDIA_STREAM] void setCustomPrivateRecorderCreator();
627 
<span class="line-added">628     [Conditional=WEB_AUDIO] void useMockAudioDestinationCocoa();</span>
<span class="line-added">629 </span>
630     [Conditional=WEB_RTC] void emulateRTCPeerConnectionPlatformEvent(RTCPeerConnection connection, DOMString action);
631     [Conditional=WEB_RTC] void useMockRTCPeerConnectionFactory(DOMString testCase);
632     [Conditional=WEB_RTC] void setICECandidateFiltering(boolean enabled);
633     [Conditional=WEB_RTC] void setEnumeratingAllNetworkInterfacesEnabled(boolean enabled);
634     [Conditional=WEB_RTC] void stopPeerConnection(RTCPeerConnection connection);
635     [Conditional=WEB_RTC] void clearPeerConnectionFactory();
636     [Conditional=WEB_RTC] void setEnableWebRTCEncryption(boolean enabled);
<span class="line-added">637     [Conditional=WEB_RTC] void setUseDTLS10(boolean use);</span>
<span class="line-added">638     [Conditional=WEB_RTC] void setUseGPUProcessForWebRTC(boolean use);</span>
639 
640     [Conditional=VIDEO] void simulateSystemSleep();
641     [Conditional=VIDEO] void simulateSystemWake();
642     [Conditional=VIDEO] boolean elementIsBlockingDisplaySleep(HTMLMediaElement element);
643 
644     [MayThrowException] MockPageOverlay installMockPageOverlay(PageOverlayType type);
645     [MayThrowException] DOMString pageOverlayLayerTreeAsText(optional unsigned short flags = 0);
646 
647     void setPageMuted(DOMString mutedState);
648     DOMString pageMediaState();
649 
650     void setPageDefersLoading(boolean defersLoading);
651     [MayThrowException] boolean pageDefersLoading();
652 
653     File? createFile(DOMString url);
654     void queueMicroTask(long testNumber);
655     boolean testPreloaderSettingViewport();
656 
657     [Conditional=CONTENT_FILTERING] readonly attribute MockContentFilterSettings mockContentFilterSettings;
658 
659     [Conditional=CSS_SCROLL_SNAP, MayThrowException] DOMString scrollSnapOffsets(Element element);
660     [Conditional=CSS_SCROLL_SNAP] void setPlatformMomentumScrollingPredictionEnabled(boolean enabled);
661 
662     [MayThrowException] DOMString pathStringWithShrinkWrappedRects(sequence&lt;double&gt; rectComponents, double radius);
663 
664     [Conditional=VIDEO] DOMString getCurrentMediaControlsStatusForElement(HTMLMediaElement element);
665 
666     DOMString userVisibleString(DOMURL url);
667 
668     void setShowAllPlugins(boolean showAll);
669 
<span class="line-modified">670     [Conditional=STREAMS_API, CallWith=GlobalObject] any cloneArrayBuffer(any buffer, any srcByteOffset, any byteLength);</span>
<span class="line-modified">671     [Conditional=STREAMS_API, CallWith=GlobalObject] boolean isReadableStreamDisturbed(any stream);</span>
672 
673     DOMString resourceLoadStatisticsForURL(DOMURL url);
674     void setResourceLoadStatisticsEnabled(boolean enable);
675 
676     [MayThrowException] void setCanShowModalDialogOverride(boolean allow);
677 
678     DOMString composedTreeAsText(Node parent);
679 
680     boolean isProcessingUserGesture();
681     double lastHandledUserGestureTimestamp();
682 
683     void withUserGesture(VoidCallback callback);
684 
685     boolean userIsInteracting();
686 
687     GCObservation? observeGC(any observed);
688 
689     void setUserInterfaceLayoutDirection(UserInterfaceLayoutDirection userInterfaceLayoutDirection);
690     void setBaseWritingDirection(BaseWritingDirection direction);
691 
</pre>
<hr />
<pre>
712 
713     void setPageVisibility(boolean isVisible);
714     void setPageIsFocusedAndActive(boolean isFocused);
715 
716     [Conditional=WEB_RTC] void setH264HardwareEncoderAllowed(boolean allowed);
717     [Conditional=WEB_RTC] void applyRotationForOutgoingVideoSources(RTCPeerConnection connection);
718 
719     [Conditional=MEDIA_STREAM] void setMockAudioTrackChannelNumber(MediaStreamTrack track, unsigned short count);
720     [Conditional=MEDIA_STREAM] void setShouldInterruptAudioOnPageVisibilityChange(boolean shouldInterrupt);
721     [Conditional=MEDIA_STREAM] void setCameraMediaStreamTrackOrientation(MediaStreamTrack track, short orientation);
722     [Conditional=MEDIA_STREAM] void observeMediaStreamTrack(MediaStreamTrack track);
723     [Conditional=MEDIA_STREAM] Promise&lt;ImageData&gt; grabNextMediaStreamTrackFrame();
724     [Conditional=MEDIA_STREAM] readonly attribute unsigned long trackAudioSampleCount;
725     [Conditional=MEDIA_STREAM] readonly attribute unsigned long trackVideoSampleCount;
726     [Conditional=MEDIA_STREAM] void delayMediaStreamTrackSamples(MediaStreamTrack track, float delay);
727     [Conditional=MEDIA_STREAM] void setMediaStreamTrackMuted(MediaStreamTrack track, boolean muted);
728     [Conditional=MEDIA_STREAM] void removeMediaStreamTrack(MediaStream stream, MediaStreamTrack track);
729     [Conditional=MEDIA_STREAM] void simulateMediaStreamTrackCaptureSourceFailure(MediaStreamTrack track);
730     [Conditional=MEDIA_STREAM] void setMediaStreamTrackIdentifier(MediaStreamTrack track, DOMString identifier);
731     [Conditional=MEDIA_STREAM] void setMediaStreamSourceInterrupted(MediaStreamTrack track, boolean interrupted);
<span class="line-modified">732     [Conditional=MEDIA_STREAM] boolean isMockRealtimeMediaSourceCenterEnabled();</span>
733 
734     unsigned long long documentIdentifier(Document document);
735     boolean isDocumentAlive(unsigned long long documentIdentifier);
736 
<span class="line-added">737     readonly attribute unsigned long long storageAreaMapCount;</span>
<span class="line-added">738 </span>
<span class="line-added">739     unsigned long long elementIdentifier(Element element);</span>
<span class="line-added">740     unsigned long long frameIdentifier(Document document);</span>
<span class="line-added">741     unsigned long long pageIdentifier(Document document);</span>
<span class="line-added">742 </span>
743     boolean isAnyWorkletGlobalScopeAlive();
744 
<span class="line-added">745     readonly attribute long processIdentifier;</span>
746     DOMString serviceWorkerClientIdentifier(Document document);
747     Promise&lt;void&gt; storeRegistrationsOnDisk();
748 
749     Promise&lt;void&gt; clearCacheStorageMemoryRepresentation();
750     Promise&lt;DOMString&gt; cacheStorageEngineRepresentation();
751     void setResponseSizeWithPadding(FetchResponse response, unsigned long long size);
752     unsigned long long responseSizeWithPadding(FetchResponse response);
753 
754     void updateQuotaBasedOnSpaceUsage();
755 
756     void setConsoleMessageListener(StringCallback callback);
757 
<span class="line-added">758     readonly attribute boolean supportsAudioSession;</span>
759     DOMString audioSessionCategory();
760     double preferredAudioBufferSize();
761     boolean audioSessionActive();
762 
763     [Conditional=SERVICE_WORKER] Promise&lt;boolean&gt; hasServiceWorkerRegistration(DOMString scopeURL);
764     [Conditional=SERVICE_WORKER] void terminateServiceWorker(ServiceWorker worker);
<span class="line-modified">765     [Conditional=SERVICE_WORKER] Promise&lt;boolean&gt; isServiceWorkerRunning(ServiceWorker worker);</span>
766 
767     [CallWith=Document, Conditional=APPLE_PAY] readonly attribute MockPaymentCoordinator mockPaymentCoordinator;
768 
769     boolean isSystemPreviewLink(Element element);
770     boolean isSystemPreviewImage(Element element);
771 
772     boolean usingAppleInternalSDK();
773 
774     void postTask(VoidCallback callback);
<span class="line-added">775     [CallWith=ScriptExecutionContext, MayThrowException] void queueTask(DOMString source, VoidCallback callback);</span>
<span class="line-added">776     [CallWith=Document] void queueTaskToQueueMicrotask(DOMString source, VoidCallback callback);</span>
<span class="line-added">777     [MayThrowException] boolean hasSameEventLoopAs(WindowProxy windowProxy);</span>
<span class="line-added">778 </span>
<span class="line-added">779     DOMString windowLocationHost(DOMWindow window);</span>
<span class="line-added">780 </span>
781     void markContextAsInsecure();
782 
<span class="line-added">783     void setMaxCanvasPixelMemory(unsigned long size);</span>
<span class="line-added">784 </span>
785     [Conditional=VIDEO, MayThrowException] readonly attribute NowPlayingState nowPlayingState;
786 
787     [Conditional=VIDEO] HTMLMediaElement bestMediaElementForShowingPlaybackControlsManager(PlaybackControlsPurpose purpose);
788     [Conditional=VIDEO] MediaSessionState mediaSessionState(HTMLMediaElement element);
789 
790     DOMString ongoingLoadsDescriptions();
791     void setCaptureExtraNetworkLoadMetricsEnabled(boolean value);
792 
793     void reloadWithoutContentExtensions();
794 
795     void setUseSystemAppearance(boolean value);
796 
797     unsigned long pluginCount();
798 
799     void notifyResourceLoadObserver();
800 
801     unsigned long primaryScreenDisplayID();
802 
803     boolean capsLockIsOn();
804 
805     boolean supportsVCPEncoder();
806 
807     HEVCParameterSet? parseHEVCCodecParameters(DOMString codecParameters);
<span class="line-added">808     DoViParameterSet? parseDoViCodecParameters(DOMString codecParameters);</span>
809 
810     sequence&lt;CookieData&gt; getCookies();
811 
812     void setAlwaysAllowLocalWebarchive(boolean alwaysAllowLocalWebarchive);
813 
814     void processWillSuspend();
815     void processDidResume();
816 
817     void testDictionaryLogging();
818 
819     void setXHRMaximumIntervalForUserGestureForwarding(XMLHttpRequest xhr, double interval);
<span class="line-added">820     void setTransientActivationDuration(double seconds);</span>
821 
822     void setIsPlayingToAutomotiveHeadUnit(boolean value);
823 
824     TextIndicatorInfo textIndicatorForRange(Range range, TextIndicatorOptions options);
825 
826     void addPrefetchLoadEventListener(HTMLLinkElement link, EventListener? callback);
<span class="line-added">827 </span>
<span class="line-added">828     [Conditional=WEB_AUTHN] void setMockWebAuthenticationConfiguration(MockWebAuthenticationConfiguration configuration);</span>
<span class="line-added">829 </span>
<span class="line-added">830     [Conditional=PICTURE_IN_PICTURE_API] void setPictureInPictureAPITestEnabled(HTMLVideoElement videoElement, boolean enabled);</span>
<span class="line-added">831 </span>
<span class="line-added">832     InternalsMapLike createInternalsMapLike();</span>
<span class="line-added">833     InternalsSetLike createInternalsSetLike();</span>
<span class="line-added">834 </span>
<span class="line-added">835     DOMString highlightPseudoElementColor(DOMString highlightName, Element element);</span>
<span class="line-added">836 </span>
<span class="line-added">837     boolean hasSandboxMachLookupAccessToGlobalName(DOMString process, DOMString service);</span>
<span class="line-added">838     boolean hasSandboxMachLookupAccessToXPCServiceName(DOMString process, DOMString service);</span>
<span class="line-added">839 </span>
<span class="line-added">840     DOMString systemColorForCSSValue(DOMString cssValue, boolean useDarkModeAppearance, boolean useElevatedUserInterfaceLevel);</span>
<span class="line-added">841     DOMString focusRingColor();</span>
<span class="line-added">842 </span>
<span class="line-added">843     boolean systemHasBattery();</span>
<span class="line-added">844 </span>
<span class="line-added">845     DOMString mediaMIMETypeForExtension(DOMString extension);</span>
846 };
</pre>
</td>
</tr>
</table>
<center><a href="Internals.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="MockCDMFactory.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>