<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/JavaScriptCore/builtins/StringPrototype.js</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="StringIteratorPrototype.js.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="TypedArrayConstructor.js.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/builtins/StringPrototype.js</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -36,12 +36,12 @@</span>
          var matcher = regexp.@matchSymbol;
          if (matcher != @undefined)
              return matcher.@call(regexp, this);
      }
  
<span class="udiff-line-modified-removed">-     let thisString = @toString(this);</span>
<span class="udiff-line-modified-removed">-     let createdRegExp = @regExpCreate(regexp, @undefined);</span>
<span class="udiff-line-modified-added">+     var thisString = @toString(this);</span>
<span class="udiff-line-modified-added">+     var createdRegExp = @regExpCreate(regexp, @undefined);</span>
      return createdRegExp.@matchSymbol(thisString);
  }
  
  function matchAll(arg)
  {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -49,17 +49,20 @@</span>
  
      if (@isUndefinedOrNull(this))
          @throwTypeError(&quot;String.prototype.matchAll requires |this| not to be null nor undefined&quot;);
  
      if (!@isUndefinedOrNull(arg)) {
<span class="udiff-line-modified-removed">-         let matcher = arg.@matchAllSymbol;</span>
<span class="udiff-line-modified-added">+         if (@isRegExp(arg) &amp;&amp; !@stringIncludesInternal.@call(@toString(arg.flags), &quot;g&quot;))</span>
<span class="udiff-line-added">+             @throwTypeError(&quot;String.prototype.matchAll argument must not be a non-global regular expression&quot;);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         var matcher = arg.@matchAllSymbol;</span>
          if (!@isUndefinedOrNull(matcher))
              return matcher.@call(arg, this);
      }
  
<span class="udiff-line-modified-removed">-     let string = @toString(this);</span>
<span class="udiff-line-modified-removed">-     let regExp = @regExpCreate(arg, &quot;g&quot;);</span>
<span class="udiff-line-modified-added">+     var string = @toString(this);</span>
<span class="udiff-line-modified-added">+     var regExp = @regExpCreate(arg, &quot;g&quot;);</span>
      return regExp.@matchAllSymbol(string);
  }
  
  @globalPrivate
  function repeatSlowPath(string, count)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -217,19 +220,19 @@</span>
          return true;
  
      if (replacer !== @regExpPrototypeSymbolReplace)
          return true;
      
<span class="udiff-line-modified-removed">-     let regexpExec = @tryGetById(regexp, &quot;exec&quot;);</span>
<span class="udiff-line-modified-added">+     var regexpExec = @tryGetById(regexp, &quot;exec&quot;);</span>
      if (regexpExec !== @regExpBuiltinExec)
          return true;
  
<span class="udiff-line-modified-removed">-     let regexpGlobal = @tryGetById(regexp, &quot;global&quot;);</span>
<span class="udiff-line-modified-added">+     var regexpGlobal = @tryGetById(regexp, &quot;global&quot;);</span>
      if (regexpGlobal !== @regExpProtoGlobalGetter)
          return true;
  
<span class="udiff-line-modified-removed">-     let regexpUnicode = @tryGetById(regexp, &quot;unicode&quot;);</span>
<span class="udiff-line-modified-added">+     var regexpUnicode = @tryGetById(regexp, &quot;unicode&quot;);</span>
      if (regexpUnicode !== @regExpProtoUnicodeGetter)
          return true;
  
      return typeof regexp.lastIndex !== &quot;number&quot;;
  }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -241,23 +244,47 @@</span>
  
      if (@isUndefinedOrNull(this))
          @throwTypeError(&quot;String.prototype.replace requires that |this| not be null or undefined&quot;);
  
      if (search != null) {
<span class="udiff-line-modified-removed">-         let replacer = search.@replaceSymbol;</span>
<span class="udiff-line-modified-added">+         var replacer = search.@replaceSymbol;</span>
          if (replacer !== @undefined) {
              if (!@hasObservableSideEffectsForStringReplace(search, replacer))
                  return @toString(this).@replaceUsingRegExp(search, replace);
              return replacer.@call(search, this, replace);
          }
      }
  
<span class="udiff-line-modified-removed">-     let thisString = @toString(this);</span>
<span class="udiff-line-modified-removed">-     let searchString = @toString(search);</span>
<span class="udiff-line-modified-added">+     var thisString = @toString(this);</span>
<span class="udiff-line-modified-added">+     var searchString = @toString(search);</span>
      return thisString.@replaceUsingStringSearch(searchString, replace);
  }
  
<span class="udiff-line-added">+ function replaceAll(search, replace)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     &quot;use strict&quot;;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (@isUndefinedOrNull(this))</span>
<span class="udiff-line-added">+         @throwTypeError(&quot;String.prototype.replaceAll requires |this| not to be null nor undefined&quot;);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (search != null) {</span>
<span class="udiff-line-added">+         if (@isRegExp(search) &amp;&amp; !@stringIncludesInternal.@call(@toString(search.flags), &quot;g&quot;))</span>
<span class="udiff-line-added">+             @throwTypeError(&quot;String.prototype.replaceAll argument must not be a non-global regular expression&quot;);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         var replacer = search.@replaceSymbol;</span>
<span class="udiff-line-added">+         if (replacer !== @undefined) {</span>
<span class="udiff-line-added">+             if (!@hasObservableSideEffectsForStringReplace(search, replacer))</span>
<span class="udiff-line-added">+                 return @toString(this).@replaceUsingRegExp(search, replace);</span>
<span class="udiff-line-added">+             return replacer.@call(search, this, replace);</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     var thisString = @toString(this);</span>
<span class="udiff-line-added">+     var searchString = @toString(search);</span>
<span class="udiff-line-added">+     return thisString.@replaceAllUsingStringSearch(searchString, replace);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
  function search(regexp)
  {
      &quot;use strict&quot;;
  
      if (@isUndefinedOrNull(this))
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -317,20 +344,20 @@</span>
  function createHTML(func, string, tag, attribute, value)
  {
      &quot;use strict&quot;;
      if (@isUndefinedOrNull(string))
          @throwTypeError(`${func} requires that |this| not be null or undefined`);
<span class="udiff-line-modified-removed">-     let S = @toString(string);</span>
<span class="udiff-line-modified-removed">-     let p1 = &quot;&lt;&quot; + tag;</span>
<span class="udiff-line-modified-added">+     var S = @toString(string);</span>
<span class="udiff-line-modified-added">+     var p1 = &quot;&lt;&quot; + tag;</span>
      if (attribute) {
<span class="udiff-line-modified-removed">-         let V = @toString(value);</span>
<span class="udiff-line-modified-removed">-         let escapedV = V.@replaceUsingRegExp(/&quot;/g, &#39;&amp;quot;&#39;);</span>
<span class="udiff-line-modified-added">+         var V = @toString(value);</span>
<span class="udiff-line-modified-added">+         var escapedV = V.@replaceUsingRegExp(/&quot;/g, &#39;&amp;quot;&#39;);</span>
          p1 = p1 + &quot; &quot; + @toString(attribute) + &#39;=&quot;&#39; + escapedV + &#39;&quot;&#39;
      }
<span class="udiff-line-modified-removed">-     let p2 = p1 + &quot;&gt;&quot;</span>
<span class="udiff-line-modified-removed">-     let p3 = p2 + S;</span>
<span class="udiff-line-modified-removed">-     let p4 = p3 + &quot;&lt;/&quot; + tag + &quot;&gt;&quot;;</span>
<span class="udiff-line-modified-added">+     var p2 = p1 + &quot;&gt;&quot;</span>
<span class="udiff-line-modified-added">+     var p3 = p2 + S;</span>
<span class="udiff-line-modified-added">+     var p4 = p3 + &quot;&lt;/&quot; + tag + &quot;&gt;&quot;;</span>
      return p4;
  }
  
  function anchor(url)
  {
</pre>
<center><a href="StringIteratorPrototype.js.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="TypedArrayConstructor.js.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>