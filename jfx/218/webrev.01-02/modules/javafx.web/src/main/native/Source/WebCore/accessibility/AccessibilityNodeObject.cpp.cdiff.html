<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/accessibility/AccessibilityNodeObject.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AccessibilityMenuListPopup.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="AccessibilityNodeObject.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/accessibility/AccessibilityNodeObject.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 104,14 ***</span>
  Ref&lt;AccessibilityNodeObject&gt; AccessibilityNodeObject::create(Node* node)
  {
      return adoptRef(*new AccessibilityNodeObject(node));
  }
  
<span class="line-modified">! void AccessibilityNodeObject::detach(AccessibilityDetachmentType detachmentType, AXObjectCache* cache)</span>
  {
      // AccessibilityObject calls clearChildren.
<span class="line-modified">!     AccessibilityObject::detach(detachmentType, cache);</span>
      m_node = nullptr;
  }
  
  void AccessibilityNodeObject::childrenChanged()
  {
<span class="line-new-header">--- 104,14 ---</span>
  Ref&lt;AccessibilityNodeObject&gt; AccessibilityNodeObject::create(Node* node)
  {
      return adoptRef(*new AccessibilityNodeObject(node));
  }
  
<span class="line-modified">! void AccessibilityNodeObject::detachRemoteParts(AccessibilityDetachmentType detachmentType)</span>
  {
      // AccessibilityObject calls clearChildren.
<span class="line-modified">!     AccessibilityObject::detachRemoteParts(detachmentType);</span>
      m_node = nullptr;
  }
  
  void AccessibilityNodeObject::childrenChanged()
  {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 910,11 ***</span>
  {
      AccessibilityRole role = roleValue();
      return role == AccessibilityRole::Group || role == AccessibilityRole::TextGroup || role == AccessibilityRole::ApplicationGroup || role == AccessibilityRole::ApplicationTextGroup;
  }
  
<span class="line-modified">! AccessibilityObject* AccessibilityNodeObject::selectedRadioButton()</span>
  {
      if (!isRadioGroup())
          return nullptr;
  
      // Find the child radio button that is selected (ie. the intValue == 1).
<span class="line-new-header">--- 910,11 ---</span>
  {
      AccessibilityRole role = roleValue();
      return role == AccessibilityRole::Group || role == AccessibilityRole::TextGroup || role == AccessibilityRole::ApplicationGroup || role == AccessibilityRole::ApplicationTextGroup;
  }
  
<span class="line-modified">! AXCoreObject* AccessibilityNodeObject::selectedRadioButton()</span>
  {
      if (!isRadioGroup())
          return nullptr;
  
      // Find the child radio button that is selected (ie. the intValue == 1).
</pre>
<hr />
<pre>
<span class="line-old-header">*** 923,18 ***</span>
              return child.get();
      }
      return nullptr;
  }
  
<span class="line-modified">! AccessibilityObject* AccessibilityNodeObject::selectedTabItem()</span>
  {
      if (!isTabList())
          return nullptr;
  
      // FIXME: Is this valid? ARIA tab items support aria-selected; not aria-checked.
      // Find the child tab item that is selected (ie. the intValue == 1).
<span class="line-modified">!     AccessibilityObject::AccessibilityChildrenVector tabs;</span>
      tabChildren(tabs);
  
      for (const auto&amp; child : children()) {
          if (child-&gt;isTabItem() &amp;&amp; (child-&gt;isChecked() || child-&gt;isSelected()))
              return child.get();
<span class="line-new-header">--- 923,18 ---</span>
              return child.get();
      }
      return nullptr;
  }
  
<span class="line-modified">! AXCoreObject* AccessibilityNodeObject::selectedTabItem()</span>
  {
      if (!isTabList())
          return nullptr;
  
      // FIXME: Is this valid? ARIA tab items support aria-selected; not aria-checked.
      // Find the child tab item that is selected (ie. the intValue == 1).
<span class="line-modified">!     AXCoreObject::AccessibilityChildrenVector tabs;</span>
      tabChildren(tabs);
  
      for (const auto&amp; child : children()) {
          if (child-&gt;isTabItem() &amp;&amp; (child-&gt;isChecked() || child-&gt;isSelected()))
              return child.get();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1102,11 ***</span>
      float step = stepValueForRange();
      float value = valueForRange();
  
      value += increase ? step : -step;
  
<span class="line-modified">!     setValue(String::numberToStringFixedPrecision(value));</span>
  
      auto objectCache = axObjectCache();
      if (objectCache)
          objectCache-&gt;postNotification(node(), AXObjectCache::AXValueChanged);
  }
<span class="line-new-header">--- 1102,11 ---</span>
      float step = stepValueForRange();
      float value = valueForRange();
  
      value += increase ? step : -step;
  
<span class="line-modified">!     setValue(String::number(value));</span>
  
      auto objectCache = axObjectCache();
      if (objectCache)
          objectCache-&gt;postNotification(node(), AXObjectCache::AXValueChanged);
  }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1120,11 ***</span>
      // Make sure the specified percent will cause a change of one integer step or larger.
      if (std::abs(step) &lt; 1)
          step = std::abs(percentChange) * (1 / percentChange);
  
      value += step;
<span class="line-modified">!     setValue(String::numberToStringFixedPrecision(value));</span>
  
      auto objectCache = axObjectCache();
      if (objectCache)
          objectCache-&gt;postNotification(node(), AXObjectCache::AXValueChanged);
  }
<span class="line-new-header">--- 1120,11 ---</span>
      // Make sure the specified percent will cause a change of one integer step or larger.
      if (std::abs(step) &lt; 1)
          step = std::abs(percentChange) * (1 / percentChange);
  
      value += step;
<span class="line-modified">!     setValue(String::number(value));</span>
  
      auto objectCache = axObjectCache();
      if (objectCache)
          objectCache-&gt;postNotification(node(), AXObjectCache::AXValueChanged);
  }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1465,11 ***</span>
      else if (isControl()) {
          // For controls, use their fieldset parent&#39;s described-by text if available.
          auto matchFunc = [] (const AccessibilityObject&amp; object) {
              return object.isFieldset() &amp;&amp; !object.ariaDescribedByAttribute().isEmpty();
          };
<span class="line-modified">!         if (const auto* parent = AccessibilityObject::matchedParent(*this, false, WTFMove(matchFunc)))</span>
              textOrder.append(AccessibilityText(parent-&gt;ariaDescribedByAttribute(), AccessibilityTextSource::Summary));
      }
  
      // Summary attribute used as help text on tables.
      const AtomString&amp; summary = getAttribute(summaryAttr);
<span class="line-new-header">--- 1465,11 ---</span>
      else if (isControl()) {
          // For controls, use their fieldset parent&#39;s described-by text if available.
          auto matchFunc = [] (const AccessibilityObject&amp; object) {
              return object.isFieldset() &amp;&amp; !object.ariaDescribedByAttribute().isEmpty();
          };
<span class="line-modified">!         if (const auto* parent = Accessibility::findAncestor&lt;AccessibilityObject&gt;(*this, false, WTFMove(matchFunc)))</span>
              textOrder.append(AccessibilityText(parent-&gt;ariaDescribedByAttribute(), AccessibilityTextSource::Summary));
      }
  
      // Summary attribute used as help text on tables.
      const AtomString&amp; summary = getAttribute(summaryAttr);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1511,15 ***</span>
              return;
  
          Vector&lt;Element*&gt; elements;
          ariaLabeledByElements(elements);
  
<span class="line-modified">!         Vector&lt;RefPtr&lt;AccessibilityObject&gt;&gt; axElements;</span>
          for (const auto&amp; element : elements)
              axElements.append(objectCache-&gt;getOrCreate(element));
  
<span class="line-modified">!         textOrder.append(AccessibilityText(ariaLabeledBy, AccessibilityTextSource::Alternative, WTFMove(axElements)));</span>
      }
  }
  
  String AccessibilityNodeObject::alternativeTextForWebArea() const
  {
<span class="line-new-header">--- 1511,15 ---</span>
              return;
  
          Vector&lt;Element*&gt; elements;
          ariaLabeledByElements(elements);
  
<span class="line-modified">!         Vector&lt;AXCoreObject*&gt; axElements;</span>
          for (const auto&amp; element : elements)
              axElements.append(objectCache-&gt;getOrCreate(element));
  
<span class="line-modified">!         textOrder.append(AccessibilityText(ariaLabeledBy, AccessibilityTextSource::Alternative, axElements));</span>
      }
  }
  
  String AccessibilityNodeObject::alternativeTextForWebArea() const
  {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1768,11 ***</span>
  {
      Node* node = this-&gt;node();
      if (is&lt;Text&gt;(node))
          return downcast&lt;Text&gt;(*node).wholeText();
  
<span class="line-modified">!     bool isAriaVisible = AccessibilityObject::matchedParent(*this, true, [] (const AccessibilityObject&amp; object) {</span>
          return equalLettersIgnoringASCIICase(object.getAttribute(aria_hiddenAttr), &quot;false&quot;);
      }) != nullptr;
  
      // The Accname specification states that if the current node is hidden, and not directly
      // referenced by aria-labelledby or aria-describedby, and is not a host language text
<span class="line-new-header">--- 1768,11 ---</span>
  {
      Node* node = this-&gt;node();
      if (is&lt;Text&gt;(node))
          return downcast&lt;Text&gt;(*node).wholeText();
  
<span class="line-modified">!     bool isAriaVisible = Accessibility::findAncestor&lt;AccessibilityObject&gt;(*this, true, [] (const AccessibilityObject&amp; object) {</span>
          return equalLettersIgnoringASCIICase(object.getAttribute(aria_hiddenAttr), &quot;false&quot;);
      }) != nullptr;
  
      // The Accname specification states that if the current node is hidden, and not directly
      // referenced by aria-labelledby or aria-describedby, and is not a host language text
</pre>
<center><a href="AccessibilityMenuListPopup.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="AccessibilityNodeObject.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>