<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/bindings/scripts/preprocess-idls.pl</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="generate-bindings.pl.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../bridge/NP_jsobject.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/bindings/scripts/preprocess-idls.pl</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -72,20 +72,16 @@</span>
  $workerGlobalScopeConstructorsFile = CygwinPathIfNeeded($workerGlobalScopeConstructorsFile);
  $dedicatedWorkerGlobalScopeConstructorsFile = CygwinPathIfNeeded($dedicatedWorkerGlobalScopeConstructorsFile);
  $serviceWorkerGlobalScopeConstructorsFile = CygwinPathIfNeeded($serviceWorkerGlobalScopeConstructorsFile);
  $workletGlobalScopeConstructorsFile = CygwinPathIfNeeded($workletGlobalScopeConstructorsFile);
  $paintWorkletGlobalScopeConstructorsFile = CygwinPathIfNeeded($paintWorkletGlobalScopeConstructorsFile);
<span class="udiff-line-modified-removed">- $supplementalMakefileDeps = CygwinPathIfNeeded($supplementalMakefileDeps);</span>
<span class="udiff-line-modified-added">+ $supplementalMakefileDeps = CygwinPathIfNeeded($supplementalMakefileDeps) if defined($supplementalMakefileDeps);</span>
  
<span class="udiff-line-modified-removed">- open FH, &quot;&lt; $idlFilesList&quot; or die &quot;Cannot open $idlFilesList\n&quot;;</span>
<span class="udiff-line-modified-removed">- my @idlFilesIn = &lt;FH&gt;;</span>
<span class="udiff-line-modified-removed">- chomp(@idlFilesIn);</span>
<span class="udiff-line-modified-removed">- my @idlFiles = ();</span>
<span class="udiff-line-removed">- foreach (@idlFilesIn) {</span>
<span class="udiff-line-removed">-     push @idlFiles, CygwinPathIfNeeded($_);</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-removed">- close FH;</span>
<span class="udiff-line-modified-added">+ my @idlFiles;</span>
<span class="udiff-line-modified-added">+ open(my $fh, &#39;&lt;&#39;, $idlFilesList) or die &quot;Cannot open $idlFilesList&quot;;</span>
<span class="udiff-line-modified-added">+ @idlFiles = map { CygwinPathIfNeeded(s/\r?\n?$//r) } &lt;$fh&gt;;</span>
<span class="udiff-line-modified-added">+ close($fh) or die;</span>
  
  my %interfaceNameToIdlFile;
  my %idlFileToInterfaceName;
  my %supplementalDependencies;
  my %supplementals;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -100,18 +96,20 @@</span>
  # Get rid of duplicates in idlFiles array.
  my %idlFileHash = map { $_, 1 } @idlFiles;
  
  # Populate $idlFileToInterfaceName and $interfaceNameToIdlFile.
  foreach my $idlFile (sort keys %idlFileHash) {
<span class="udiff-line-added">+     $idlFile =~ s/\s*$//g;</span>
      my $fullPath = Cwd::realpath($idlFile);
      my $interfaceName = fileparse(basename($idlFile), &quot;.idl&quot;);
      $idlFileToInterfaceName{$fullPath} = $interfaceName;
      $interfaceNameToIdlFile{$interfaceName} = $fullPath;
  }
  
  # Parse all IDL files.
  foreach my $idlFile (sort keys %idlFileHash) {
<span class="udiff-line-added">+     $idlFile =~ s/\s*$//g;</span>
      my $fullPath = Cwd::realpath($idlFile);
      my $idlFileContents = getFileContents($fullPath);
      # Handle partial names.
      my $partialNames = getPartialNamesFromIDL($idlFileContents);
      if (@{$partialNames}) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -226,22 +224,14 @@</span>
      }
  
      WriteFileIfChanged($supplementalMakefileDeps, $makefileDeps);
  }
  
<span class="udiff-line-removed">- my $cygwinPathAdded;</span>
  sub CygwinPathIfNeeded
  {
      my $path = shift;
<span class="udiff-line-modified-removed">-     if ($path &amp;&amp; $Config{osname} eq &quot;cygwin&quot;) {</span>
<span class="udiff-line-removed">-         if (not $cygwinPathAdded) {</span>
<span class="udiff-line-removed">-             $ENV{PATH} = &quot;$ENV{PATH}:/cygdrive/c/cygwin/bin&quot;;</span>
<span class="udiff-line-removed">-             $cygwinPathAdded = 1; </span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-removed">-         chomp($path = `cygpath -u &#39;$path&#39;`);</span>
<span class="udiff-line-removed">-         $path =~ s/[\r\n]//;</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-modified-added">+     return Cygwin::win_to_posix_path($path) if ($^O eq &#39;cygwin&#39;);</span>
      return $path;
  }
  
  sub WriteFileIfChanged
  {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -281,11 +271,12 @@</span>
      my $code = &quot;    &quot;;
      my @extendedAttributesList;
      foreach my $attributeName (sort keys %{$extendedAttributes}) {
        next unless ($attributeName eq &quot;Conditional&quot; || $attributeName eq &quot;EnabledAtRuntime&quot; || $attributeName eq &quot;EnabledForWorld&quot;
          || $attributeName eq &quot;EnabledBySetting&quot; || $attributeName eq &quot;SecureContext&quot; || $attributeName eq &quot;PrivateIdentifier&quot;
<span class="udiff-line-modified-removed">-         || $attributeName eq &quot;PublicIdentifier&quot; || $attributeName eq &quot;DisabledByQuirk&quot; || $attributeName eq &quot;EnabledByQuirk&quot; || $attributeName eq &quot;EnabledForContext&quot; || $attributeName eq &quot;CustomEnabled&quot;);</span>
<span class="udiff-line-modified-added">+         || $attributeName eq &quot;PublicIdentifier&quot; || $attributeName eq &quot;DisabledByQuirk&quot; || $attributeName eq &quot;EnabledByQuirk&quot;</span>
<span class="udiff-line-added">+         || $attributeName eq &quot;EnabledForContext&quot; || $attributeName eq &quot;CustomEnabled&quot;) || $attributeName eq &quot;ConstructorEnabledBySetting&quot;;</span>
        my $extendedAttribute = $attributeName;
        $extendedAttribute .= &quot;=&quot; . $extendedAttributes-&gt;{$attributeName} unless $extendedAttributes-&gt;{$attributeName} eq &quot;VALUE_IS_MISSING&quot;;
        push(@extendedAttributesList, $extendedAttribute);
      }
      $code .= &quot;[&quot; . join(&#39;, &#39;, @extendedAttributesList) . &quot;] &quot; if @extendedAttributesList;
</pre>
<center><a href="generate-bindings.pl.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../bridge/NP_jsobject.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>