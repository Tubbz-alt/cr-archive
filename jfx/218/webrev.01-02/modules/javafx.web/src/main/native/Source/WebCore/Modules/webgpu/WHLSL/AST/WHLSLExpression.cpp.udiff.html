<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/Modules/webgpu/WHLSL/AST/WHLSLExpression.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="WHLSLDotExpression.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="WHLSLExpression.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/webgpu/WHLSL/AST/WHLSLExpression.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -70,13 +70,10 @@</span>
          delete &amp;downcast&lt;MakeArrayReferenceExpression&gt;(expression);
          break;
      case Expression::Kind::MakePointer:
          delete &amp;downcast&lt;MakePointerExpression&gt;(expression);
          break;
<span class="udiff-line-removed">-     case Expression::Kind::NullLiteral:</span>
<span class="udiff-line-removed">-         delete &amp;downcast&lt;NullLiteral&gt;(expression);</span>
<span class="udiff-line-removed">-         break;</span>
      case Expression::Kind::Dot:
          delete &amp;downcast&lt;DotExpression&gt;(expression);
          break;
      case Expression::Kind::GlobalVariableReference:
          delete &amp;downcast&lt;GlobalVariableReference&gt;(expression);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -136,13 +133,10 @@</span>
          downcast&lt;MakeArrayReferenceExpression&gt;(expression).~MakeArrayReferenceExpression();
          break;
      case Expression::Kind::MakePointer:
          downcast&lt;MakePointerExpression&gt;(expression).~MakePointerExpression();
          break;
<span class="udiff-line-removed">-     case Expression::Kind::NullLiteral:</span>
<span class="udiff-line-removed">-         downcast&lt;NullLiteral&gt;(expression).~NullLiteral();</span>
<span class="udiff-line-removed">-         break;</span>
      case Expression::Kind::Dot:
          downcast&lt;DotExpression&gt;(expression).~DotExpression();
          break;
      case Expression::Kind::GlobalVariableReference:
          downcast&lt;GlobalVariableReference&gt;(expression).~GlobalVariableReference();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -166,35 +160,50 @@</span>
          downcast&lt;VariableReference&gt;(expression).~VariableReference();
          break;
      }
  }
  
<span class="udiff-line-modified-removed">- String PropertyAccessExpression::getterFunctionName() const</span>
<span class="udiff-line-modified-added">+ bool Expression::mayBeEffectful() const</span>
  {
<span class="udiff-line-modified-removed">-     if (is&lt;DotExpression&gt;(*this))</span>
<span class="udiff-line-removed">-         return downcast&lt;DotExpression&gt;(*this).getterFunctionName();</span>
<span class="udiff-line-removed">-     if (is&lt;IndexExpression&gt;(*this))</span>
<span class="udiff-line-removed">-         return downcast&lt;IndexExpression&gt;(*this).getterFunctionName();</span>
<span class="udiff-line-removed">-     RELEASE_ASSERT_NOT_REACHED();</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-modified-added">+     auto&amp; expression = const_cast&lt;Expression&amp;&gt;(*this);</span>
  
<span class="udiff-line-modified-removed">- String PropertyAccessExpression::setterFunctionName() const</span>
<span class="udiff-line-modified-removed">- {</span>
<span class="udiff-line-modified-removed">-     if (is&lt;DotExpression&gt;(*this))</span>
<span class="udiff-line-modified-removed">-         return downcast&lt;DotExpression&gt;(*this).setterFunctionName();</span>
<span class="udiff-line-modified-removed">-     if (is&lt;IndexExpression&gt;(*this))</span>
<span class="udiff-line-modified-removed">-         return downcast&lt;IndexExpression&gt;(*this).setterFunctionName();</span>
<span class="udiff-line-modified-removed">-     RELEASE_ASSERT_NOT_REACHED();</span>
<span class="udiff-line-modified-removed">- }</span>
<span class="udiff-line-modified-added">+     switch (expression.kind()) {</span>
<span class="udiff-line-modified-added">+     case Expression::Kind::BooleanLiteral:</span>
<span class="udiff-line-modified-added">+     case Expression::Kind::FloatLiteral:</span>
<span class="udiff-line-modified-added">+     case Expression::Kind::IntegerLiteral:</span>
<span class="udiff-line-modified-added">+     case Expression::Kind::UnsignedIntegerLiteral:</span>
<span class="udiff-line-modified-added">+     case Expression::Kind::EnumerationMemberLiteral:</span>
<span class="udiff-line-modified-added">+     case Expression::Kind::GlobalVariableReference:</span>
<span class="udiff-line-modified-added">+     case Expression::Kind::VariableReference:</span>
<span class="udiff-line-added">+         return false;</span>
  
<span class="udiff-line-modified-removed">- String PropertyAccessExpression::anderFunctionName() const</span>
<span class="udiff-line-modified-removed">- {</span>
<span class="udiff-line-modified-removed">-     if (is&lt;DotExpression&gt;(*this))</span>
<span class="udiff-line-modified-removed">-         return downcast&lt;DotExpression&gt;(*this).anderFunctionName();</span>
<span class="udiff-line-modified-removed">-     if (is&lt;IndexExpression&gt;(*this))</span>
<span class="udiff-line-modified-removed">-         return downcast&lt;IndexExpression&gt;(*this).anderFunctionName();</span>
<span class="udiff-line-modified-removed">-     RELEASE_ASSERT_NOT_REACHED();</span>
<span class="udiff-line-modified-added">+     case Expression::Kind::Dereference:</span>
<span class="udiff-line-modified-added">+         return downcast&lt;DereferenceExpression&gt;(expression).pointer().mayBeEffectful();</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     case Expression::Kind::Logical:</span>
<span class="udiff-line-modified-added">+         return downcast&lt;LogicalExpression&gt;(expression).left().mayBeEffectful() || downcast&lt;LogicalExpression&gt;(expression).right().mayBeEffectful();</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     case Expression::Kind::LogicalNot:</span>
<span class="udiff-line-added">+         return downcast&lt;LogicalNotExpression&gt;(expression).operand().mayBeEffectful();</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     case Expression::Kind::MakeArrayReference:</span>
<span class="udiff-line-added">+         return downcast&lt;MakeArrayReferenceExpression&gt;(expression).leftValue().mayBeEffectful();</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     case Expression::Kind::MakePointer:</span>
<span class="udiff-line-added">+         return downcast&lt;MakePointerExpression&gt;(expression).leftValue().mayBeEffectful();</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     case Expression::Kind::Dot:</span>
<span class="udiff-line-added">+         return downcast&lt;DotExpression&gt;(expression).base().mayBeEffectful();</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     case Expression::Kind::Index:</span>
<span class="udiff-line-added">+         return downcast&lt;IndexExpression&gt;(expression).base().mayBeEffectful() || downcast&lt;IndexExpression&gt;(expression).indexExpression().mayBeEffectful();</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     default:</span>
<span class="udiff-line-added">+         break;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     return true;</span>
  }
  
  } // namespace AST
  
  } // namespace WHLSL
</pre>
<center><a href="WHLSLDotExpression.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="WHLSLExpression.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>