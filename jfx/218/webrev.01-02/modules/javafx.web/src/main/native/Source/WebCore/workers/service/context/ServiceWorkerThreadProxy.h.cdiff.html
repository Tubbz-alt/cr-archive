<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/workers/service/context/ServiceWorkerThreadProxy.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ServiceWorkerThreadProxy.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../server/RegistrationDatabase.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/workers/service/context/ServiceWorkerThreadProxy.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 53,11 ***</span>
  public:
      template&lt;typename... Args&gt; static Ref&lt;ServiceWorkerThreadProxy&gt; create(Args&amp;&amp;... args)
      {
          return adoptRef(*new ServiceWorkerThreadProxy(std::forward&lt;Args&gt;(args)...));
      }
<span class="line-modified">!     ~ServiceWorkerThreadProxy();</span>
  
      ServiceWorkerIdentifier identifier() const { return m_serviceWorkerThread-&gt;identifier(); }
      ServiceWorkerThread&amp; thread() { return m_serviceWorkerThread.get(); }
      ServiceWorkerInspectorProxy&amp; inspectorProxy() { return m_inspectorProxy; }
  
<span class="line-new-header">--- 53,11 ---</span>
  public:
      template&lt;typename... Args&gt; static Ref&lt;ServiceWorkerThreadProxy&gt; create(Args&amp;&amp;... args)
      {
          return adoptRef(*new ServiceWorkerThreadProxy(std::forward&lt;Args&gt;(args)...));
      }
<span class="line-modified">!     WEBCORE_EXPORT ~ServiceWorkerThreadProxy();</span>
  
      ServiceWorkerIdentifier identifier() const { return m_serviceWorkerThread-&gt;identifier(); }
      ServiceWorkerThread&amp; thread() { return m_serviceWorkerThread.get(); }
      ServiceWorkerInspectorProxy&amp; inspectorProxy() { return m_inspectorProxy; }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 66,38 ***</span>
  
      WEBCORE_EXPORT std::unique_ptr&lt;FetchLoader&gt; createBlobLoader(FetchLoaderClient&amp;, const URL&amp;);
  
      const URL&amp; scriptURL() const { return m_document-&gt;url(); }
  
<span class="line-modified">!     // Public only for testing purposes.</span>
<span class="line-removed">-     WEBCORE_TESTSUPPORT_EXPORT void notifyNetworkStateChange(bool isOnline);</span>
  
      WEBCORE_EXPORT void startFetch(SWServerConnectionIdentifier, FetchIdentifier, Ref&lt;ServiceWorkerFetch::Client&gt;&amp;&amp;, Optional&lt;ServiceWorkerClientIdentifier&gt;&amp;&amp;, ResourceRequest&amp;&amp;, String&amp;&amp; referrer, FetchOptions&amp;&amp;);
      WEBCORE_EXPORT void cancelFetch(SWServerConnectionIdentifier, FetchIdentifier);
      WEBCORE_EXPORT void continueDidReceiveFetchResponse(SWServerConnectionIdentifier, FetchIdentifier);
      WEBCORE_EXPORT void removeFetch(SWServerConnectionIdentifier, FetchIdentifier);
  
  private:
<span class="line-modified">!     WEBCORE_EXPORT ServiceWorkerThreadProxy(PageConfiguration&amp;&amp;, const ServiceWorkerContextData&amp;, PAL::SessionID, String&amp;&amp; userAgent, CacheStorageProvider&amp;, SecurityOrigin::StorageBlockingPolicy);</span>
  
      WEBCORE_EXPORT static void networkStateChanged(bool isOnLine);
  
      // WorkerLoaderProxy
      bool postTaskForModeToWorkerGlobalScope(ScriptExecutionContext::Task&amp;&amp;, const String&amp; mode) final;
      void postTaskToLoader(ScriptExecutionContext::Task&amp;&amp;) final;
      Ref&lt;CacheStorageConnection&gt; createCacheStorageConnection() final;
  
      // WorkerDebuggerProxy
      void postMessageToDebugger(const String&amp;) final;
<span class="line-modified">!     void setResourceCachingDisabled(bool) final;</span>
  
      UniqueRef&lt;Page&gt; m_page;
      Ref&lt;Document&gt; m_document;
      Ref&lt;ServiceWorkerThread&gt; m_serviceWorkerThread;
      CacheStorageProvider&amp; m_cacheStorageProvider;
      RefPtr&lt;CacheStorageConnection&gt; m_cacheStorageConnection;
<span class="line-removed">-     PAL::SessionID m_sessionID;</span>
      bool m_isTerminatingOrTerminated { false };
  
      ServiceWorkerInspectorProxy m_inspectorProxy;
  #if ENABLE(REMOTE_INSPECTOR)
      std::unique_ptr&lt;ServiceWorkerDebuggable&gt; m_remoteDebuggable;
<span class="line-new-header">--- 66,40 ---</span>
  
      WEBCORE_EXPORT std::unique_ptr&lt;FetchLoader&gt; createBlobLoader(FetchLoaderClient&amp;, const URL&amp;);
  
      const URL&amp; scriptURL() const { return m_document-&gt;url(); }
  
<span class="line-modified">!     WEBCORE_EXPORT void notifyNetworkStateChange(bool isOnline);</span>
  
      WEBCORE_EXPORT void startFetch(SWServerConnectionIdentifier, FetchIdentifier, Ref&lt;ServiceWorkerFetch::Client&gt;&amp;&amp;, Optional&lt;ServiceWorkerClientIdentifier&gt;&amp;&amp;, ResourceRequest&amp;&amp;, String&amp;&amp; referrer, FetchOptions&amp;&amp;);
      WEBCORE_EXPORT void cancelFetch(SWServerConnectionIdentifier, FetchIdentifier);
      WEBCORE_EXPORT void continueDidReceiveFetchResponse(SWServerConnectionIdentifier, FetchIdentifier);
      WEBCORE_EXPORT void removeFetch(SWServerConnectionIdentifier, FetchIdentifier);
  
<span class="line-added">+     void postMessageToServiceWorker(MessageWithMessagePorts&amp;&amp;, ServiceWorkerOrClientData&amp;&amp;);</span>
<span class="line-added">+     void fireInstallEvent();</span>
<span class="line-added">+     void fireActivateEvent();</span>
<span class="line-added">+ </span>
  private:
<span class="line-modified">!     WEBCORE_EXPORT ServiceWorkerThreadProxy(PageConfiguration&amp;&amp;, const ServiceWorkerContextData&amp;, String&amp;&amp; userAgent, CacheStorageProvider&amp;, SecurityOrigin::StorageBlockingPolicy);</span>
  
      WEBCORE_EXPORT static void networkStateChanged(bool isOnLine);
  
      // WorkerLoaderProxy
      bool postTaskForModeToWorkerGlobalScope(ScriptExecutionContext::Task&amp;&amp;, const String&amp; mode) final;
      void postTaskToLoader(ScriptExecutionContext::Task&amp;&amp;) final;
      Ref&lt;CacheStorageConnection&gt; createCacheStorageConnection() final;
  
      // WorkerDebuggerProxy
      void postMessageToDebugger(const String&amp;) final;
<span class="line-modified">!     void setResourceCachingDisabledByWebInspector(bool) final;</span>
  
      UniqueRef&lt;Page&gt; m_page;
      Ref&lt;Document&gt; m_document;
      Ref&lt;ServiceWorkerThread&gt; m_serviceWorkerThread;
      CacheStorageProvider&amp; m_cacheStorageProvider;
      RefPtr&lt;CacheStorageConnection&gt; m_cacheStorageConnection;
      bool m_isTerminatingOrTerminated { false };
  
      ServiceWorkerInspectorProxy m_inspectorProxy;
  #if ENABLE(REMOTE_INSPECTOR)
      std::unique_ptr&lt;ServiceWorkerDebuggable&gt; m_remoteDebuggable;
</pre>
<center><a href="ServiceWorkerThreadProxy.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../server/RegistrationDatabase.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>