<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/builtins/StringPrototype.js</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="StringIteratorPrototype.js.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="TypedArrayConstructor.js.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/builtins/StringPrototype.js</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 36,12 ***</span>
          var matcher = regexp.@matchSymbol;
          if (matcher != @undefined)
              return matcher.@call(regexp, this);
      }
  
<span class="line-modified">!     let thisString = @toString(this);</span>
<span class="line-modified">!     let createdRegExp = @regExpCreate(regexp, @undefined);</span>
      return createdRegExp.@matchSymbol(thisString);
  }
  
  function matchAll(arg)
  {
<span class="line-new-header">--- 36,12 ---</span>
          var matcher = regexp.@matchSymbol;
          if (matcher != @undefined)
              return matcher.@call(regexp, this);
      }
  
<span class="line-modified">!     var thisString = @toString(this);</span>
<span class="line-modified">!     var createdRegExp = @regExpCreate(regexp, @undefined);</span>
      return createdRegExp.@matchSymbol(thisString);
  }
  
  function matchAll(arg)
  {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 49,17 ***</span>
  
      if (@isUndefinedOrNull(this))
          @throwTypeError(&quot;String.prototype.matchAll requires |this| not to be null nor undefined&quot;);
  
      if (!@isUndefinedOrNull(arg)) {
<span class="line-modified">!         let matcher = arg.@matchAllSymbol;</span>
          if (!@isUndefinedOrNull(matcher))
              return matcher.@call(arg, this);
      }
  
<span class="line-modified">!     let string = @toString(this);</span>
<span class="line-modified">!     let regExp = @regExpCreate(arg, &quot;g&quot;);</span>
      return regExp.@matchAllSymbol(string);
  }
  
  @globalPrivate
  function repeatSlowPath(string, count)
<span class="line-new-header">--- 49,20 ---</span>
  
      if (@isUndefinedOrNull(this))
          @throwTypeError(&quot;String.prototype.matchAll requires |this| not to be null nor undefined&quot;);
  
      if (!@isUndefinedOrNull(arg)) {
<span class="line-modified">!         if (@isRegExp(arg) &amp;&amp; !@stringIncludesInternal.@call(@toString(arg.flags), &quot;g&quot;))</span>
<span class="line-added">+             @throwTypeError(&quot;String.prototype.matchAll argument must not be a non-global regular expression&quot;);</span>
<span class="line-added">+ </span>
<span class="line-added">+         var matcher = arg.@matchAllSymbol;</span>
          if (!@isUndefinedOrNull(matcher))
              return matcher.@call(arg, this);
      }
  
<span class="line-modified">!     var string = @toString(this);</span>
<span class="line-modified">!     var regExp = @regExpCreate(arg, &quot;g&quot;);</span>
      return regExp.@matchAllSymbol(string);
  }
  
  @globalPrivate
  function repeatSlowPath(string, count)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 217,19 ***</span>
          return true;
  
      if (replacer !== @regExpPrototypeSymbolReplace)
          return true;
      
<span class="line-modified">!     let regexpExec = @tryGetById(regexp, &quot;exec&quot;);</span>
      if (regexpExec !== @regExpBuiltinExec)
          return true;
  
<span class="line-modified">!     let regexpGlobal = @tryGetById(regexp, &quot;global&quot;);</span>
      if (regexpGlobal !== @regExpProtoGlobalGetter)
          return true;
  
<span class="line-modified">!     let regexpUnicode = @tryGetById(regexp, &quot;unicode&quot;);</span>
      if (regexpUnicode !== @regExpProtoUnicodeGetter)
          return true;
  
      return typeof regexp.lastIndex !== &quot;number&quot;;
  }
<span class="line-new-header">--- 220,19 ---</span>
          return true;
  
      if (replacer !== @regExpPrototypeSymbolReplace)
          return true;
      
<span class="line-modified">!     var regexpExec = @tryGetById(regexp, &quot;exec&quot;);</span>
      if (regexpExec !== @regExpBuiltinExec)
          return true;
  
<span class="line-modified">!     var regexpGlobal = @tryGetById(regexp, &quot;global&quot;);</span>
      if (regexpGlobal !== @regExpProtoGlobalGetter)
          return true;
  
<span class="line-modified">!     var regexpUnicode = @tryGetById(regexp, &quot;unicode&quot;);</span>
      if (regexpUnicode !== @regExpProtoUnicodeGetter)
          return true;
  
      return typeof regexp.lastIndex !== &quot;number&quot;;
  }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 241,23 ***</span>
  
      if (@isUndefinedOrNull(this))
          @throwTypeError(&quot;String.prototype.replace requires that |this| not be null or undefined&quot;);
  
      if (search != null) {
<span class="line-modified">!         let replacer = search.@replaceSymbol;</span>
          if (replacer !== @undefined) {
              if (!@hasObservableSideEffectsForStringReplace(search, replacer))
                  return @toString(this).@replaceUsingRegExp(search, replace);
              return replacer.@call(search, this, replace);
          }
      }
  
<span class="line-modified">!     let thisString = @toString(this);</span>
<span class="line-modified">!     let searchString = @toString(search);</span>
      return thisString.@replaceUsingStringSearch(searchString, replace);
  }
  
  function search(regexp)
  {
      &quot;use strict&quot;;
  
      if (@isUndefinedOrNull(this))
<span class="line-new-header">--- 244,47 ---</span>
  
      if (@isUndefinedOrNull(this))
          @throwTypeError(&quot;String.prototype.replace requires that |this| not be null or undefined&quot;);
  
      if (search != null) {
<span class="line-modified">!         var replacer = search.@replaceSymbol;</span>
          if (replacer !== @undefined) {
              if (!@hasObservableSideEffectsForStringReplace(search, replacer))
                  return @toString(this).@replaceUsingRegExp(search, replace);
              return replacer.@call(search, this, replace);
          }
      }
  
<span class="line-modified">!     var thisString = @toString(this);</span>
<span class="line-modified">!     var searchString = @toString(search);</span>
      return thisString.@replaceUsingStringSearch(searchString, replace);
  }
  
<span class="line-added">+ function replaceAll(search, replace)</span>
<span class="line-added">+ {</span>
<span class="line-added">+     &quot;use strict&quot;;</span>
<span class="line-added">+ </span>
<span class="line-added">+     if (@isUndefinedOrNull(this))</span>
<span class="line-added">+         @throwTypeError(&quot;String.prototype.replaceAll requires |this| not to be null nor undefined&quot;);</span>
<span class="line-added">+ </span>
<span class="line-added">+     if (search != null) {</span>
<span class="line-added">+         if (@isRegExp(search) &amp;&amp; !@stringIncludesInternal.@call(@toString(search.flags), &quot;g&quot;))</span>
<span class="line-added">+             @throwTypeError(&quot;String.prototype.replaceAll argument must not be a non-global regular expression&quot;);</span>
<span class="line-added">+ </span>
<span class="line-added">+         var replacer = search.@replaceSymbol;</span>
<span class="line-added">+         if (replacer !== @undefined) {</span>
<span class="line-added">+             if (!@hasObservableSideEffectsForStringReplace(search, replacer))</span>
<span class="line-added">+                 return @toString(this).@replaceUsingRegExp(search, replace);</span>
<span class="line-added">+             return replacer.@call(search, this, replace);</span>
<span class="line-added">+         }</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     var thisString = @toString(this);</span>
<span class="line-added">+     var searchString = @toString(search);</span>
<span class="line-added">+     return thisString.@replaceAllUsingStringSearch(searchString, replace);</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
  function search(regexp)
  {
      &quot;use strict&quot;;
  
      if (@isUndefinedOrNull(this))
</pre>
<hr />
<pre>
<span class="line-old-header">*** 317,20 ***</span>
  function createHTML(func, string, tag, attribute, value)
  {
      &quot;use strict&quot;;
      if (@isUndefinedOrNull(string))
          @throwTypeError(`${func} requires that |this| not be null or undefined`);
<span class="line-modified">!     let S = @toString(string);</span>
<span class="line-modified">!     let p1 = &quot;&lt;&quot; + tag;</span>
      if (attribute) {
<span class="line-modified">!         let V = @toString(value);</span>
<span class="line-modified">!         let escapedV = V.@replaceUsingRegExp(/&quot;/g, &#39;&amp;quot;&#39;);</span>
          p1 = p1 + &quot; &quot; + @toString(attribute) + &#39;=&quot;&#39; + escapedV + &#39;&quot;&#39;
      }
<span class="line-modified">!     let p2 = p1 + &quot;&gt;&quot;</span>
<span class="line-modified">!     let p3 = p2 + S;</span>
<span class="line-modified">!     let p4 = p3 + &quot;&lt;/&quot; + tag + &quot;&gt;&quot;;</span>
      return p4;
  }
  
  function anchor(url)
  {
<span class="line-new-header">--- 344,20 ---</span>
  function createHTML(func, string, tag, attribute, value)
  {
      &quot;use strict&quot;;
      if (@isUndefinedOrNull(string))
          @throwTypeError(`${func} requires that |this| not be null or undefined`);
<span class="line-modified">!     var S = @toString(string);</span>
<span class="line-modified">!     var p1 = &quot;&lt;&quot; + tag;</span>
      if (attribute) {
<span class="line-modified">!         var V = @toString(value);</span>
<span class="line-modified">!         var escapedV = V.@replaceUsingRegExp(/&quot;/g, &#39;&amp;quot;&#39;);</span>
          p1 = p1 + &quot; &quot; + @toString(attribute) + &#39;=&quot;&#39; + escapedV + &#39;&quot;&#39;
      }
<span class="line-modified">!     var p2 = p1 + &quot;&gt;&quot;</span>
<span class="line-modified">!     var p3 = p2 + S;</span>
<span class="line-modified">!     var p4 = p3 + &quot;&lt;/&quot; + tag + &quot;&gt;&quot;;</span>
      return p4;
  }
  
  function anchor(url)
  {
</pre>
<center><a href="StringIteratorPrototype.js.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="TypedArrayConstructor.js.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>