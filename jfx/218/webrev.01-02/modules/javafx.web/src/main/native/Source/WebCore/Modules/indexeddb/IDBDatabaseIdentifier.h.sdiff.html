<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/indexeddb/IDBDatabaseIdentifier.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="IDBDatabaseIdentifier.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="IDBFactory.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/indexeddb/IDBDatabaseIdentifier.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #pragma once
 27 
 28 #if ENABLE(INDEXED_DATABASE)
 29 
 30 #include &quot;ClientOrigin.h&quot;
 31 #include &quot;SecurityOriginData.h&quot;
<span class="line-removed"> 32 #include &lt;pal/SessionID.h&gt;</span>
 33 #include &lt;wtf/text/StringHash.h&gt;
 34 #include &lt;wtf/text/WTFString.h&gt;
 35 
 36 namespace WebCore {
 37 
 38 class SecurityOrigin;
 39 
 40 class IDBDatabaseIdentifier {
 41 public:
 42     IDBDatabaseIdentifier() { }
 43     IDBDatabaseIdentifier(WTF::HashTableDeletedValueType)
 44         : m_databaseName(WTF::HashTableDeletedValue)
 45     {
 46     }
 47 
 48     WEBCORE_EXPORT IDBDatabaseIdentifier(const String&amp; databaseName, SecurityOriginData&amp;&amp; openingOrigin, SecurityOriginData&amp;&amp; mainFrameOrigin);
 49 
 50     IDBDatabaseIdentifier isolatedCopy() const;
 51 
 52     bool isHashTableDeletedValue() const
</pre>
<hr />
<pre>
 72     bool isEmpty() const
 73     {
 74         return m_databaseName.isNull();
 75     }
 76 
 77     bool operator==(const IDBDatabaseIdentifier&amp; other) const
 78     {
 79         return other.m_databaseName == m_databaseName &amp;&amp; other.m_origin == m_origin;
 80     }
 81 
 82     const String&amp; databaseName() const { return m_databaseName; }
 83     const ClientOrigin&amp; origin() const { return m_origin; }
 84 
 85     String databaseDirectoryRelativeToRoot(const String&amp; rootDirectory, const String&amp; versionString=&quot;v1&quot;) const;
 86     static String databaseDirectoryRelativeToRoot(const SecurityOriginData&amp; topLevelOrigin, const SecurityOriginData&amp; openingOrigin, const String&amp; rootDirectory, const String&amp; versionString);
 87 
 88     template&lt;class Encoder&gt; void encode(Encoder&amp;) const;
 89     template&lt;class Decoder&gt; static Optional&lt;IDBDatabaseIdentifier&gt; decode(Decoder&amp;);
 90 
 91 #if !LOG_DISABLED
<span class="line-modified"> 92     String debugString() const;</span>
 93 #endif
 94 
 95     bool isRelatedToOrigin(const SecurityOriginData&amp; other) const { return m_origin.isRelated(other); }
 96 
 97 private:
 98     String m_databaseName;
 99     ClientOrigin m_origin;
100 };
101 
102 struct IDBDatabaseIdentifierHash {
103     static unsigned hash(const IDBDatabaseIdentifier&amp; a) { return a.hash(); }
104     static bool equal(const IDBDatabaseIdentifier&amp; a, const IDBDatabaseIdentifier&amp; b) { return a == b; }
105     static const bool safeToCompareToEmptyOrDeleted = false;
106 };
107 
108 struct IDBDatabaseIdentifierHashTraits : WTF::SimpleClassHashTraits&lt;IDBDatabaseIdentifier&gt; {
109     static const bool hasIsEmptyValueFunction = true;
110     static const bool emptyValueIsZero = false;
111     static bool isEmptyValue(const IDBDatabaseIdentifier&amp; info) { return info.isEmpty(); }
112 };
</pre>
</td>
<td>
<hr />
<pre>
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #pragma once
 27 
 28 #if ENABLE(INDEXED_DATABASE)
 29 
 30 #include &quot;ClientOrigin.h&quot;
 31 #include &quot;SecurityOriginData.h&quot;

 32 #include &lt;wtf/text/StringHash.h&gt;
 33 #include &lt;wtf/text/WTFString.h&gt;
 34 
 35 namespace WebCore {
 36 
 37 class SecurityOrigin;
 38 
 39 class IDBDatabaseIdentifier {
 40 public:
 41     IDBDatabaseIdentifier() { }
 42     IDBDatabaseIdentifier(WTF::HashTableDeletedValueType)
 43         : m_databaseName(WTF::HashTableDeletedValue)
 44     {
 45     }
 46 
 47     WEBCORE_EXPORT IDBDatabaseIdentifier(const String&amp; databaseName, SecurityOriginData&amp;&amp; openingOrigin, SecurityOriginData&amp;&amp; mainFrameOrigin);
 48 
 49     IDBDatabaseIdentifier isolatedCopy() const;
 50 
 51     bool isHashTableDeletedValue() const
</pre>
<hr />
<pre>
 71     bool isEmpty() const
 72     {
 73         return m_databaseName.isNull();
 74     }
 75 
 76     bool operator==(const IDBDatabaseIdentifier&amp; other) const
 77     {
 78         return other.m_databaseName == m_databaseName &amp;&amp; other.m_origin == m_origin;
 79     }
 80 
 81     const String&amp; databaseName() const { return m_databaseName; }
 82     const ClientOrigin&amp; origin() const { return m_origin; }
 83 
 84     String databaseDirectoryRelativeToRoot(const String&amp; rootDirectory, const String&amp; versionString=&quot;v1&quot;) const;
 85     static String databaseDirectoryRelativeToRoot(const SecurityOriginData&amp; topLevelOrigin, const SecurityOriginData&amp; openingOrigin, const String&amp; rootDirectory, const String&amp; versionString);
 86 
 87     template&lt;class Encoder&gt; void encode(Encoder&amp;) const;
 88     template&lt;class Decoder&gt; static Optional&lt;IDBDatabaseIdentifier&gt; decode(Decoder&amp;);
 89 
 90 #if !LOG_DISABLED
<span class="line-modified"> 91     String loggingString() const;</span>
 92 #endif
 93 
 94     bool isRelatedToOrigin(const SecurityOriginData&amp; other) const { return m_origin.isRelated(other); }
 95 
 96 private:
 97     String m_databaseName;
 98     ClientOrigin m_origin;
 99 };
100 
101 struct IDBDatabaseIdentifierHash {
102     static unsigned hash(const IDBDatabaseIdentifier&amp; a) { return a.hash(); }
103     static bool equal(const IDBDatabaseIdentifier&amp; a, const IDBDatabaseIdentifier&amp; b) { return a == b; }
104     static const bool safeToCompareToEmptyOrDeleted = false;
105 };
106 
107 struct IDBDatabaseIdentifierHashTraits : WTF::SimpleClassHashTraits&lt;IDBDatabaseIdentifier&gt; {
108     static const bool hasIsEmptyValueFunction = true;
109     static const bool emptyValueIsZero = false;
110     static bool isEmptyValue(const IDBDatabaseIdentifier&amp; info) { return info.isEmpty(); }
111 };
</pre>
</td>
</tr>
</table>
<center><a href="IDBDatabaseIdentifier.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="IDBFactory.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>