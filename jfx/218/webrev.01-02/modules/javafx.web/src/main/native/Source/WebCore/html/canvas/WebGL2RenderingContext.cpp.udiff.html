<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/html/canvas/WebGL2RenderingContext.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="OffscreenCanvasRenderingContext2D.idl.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="WebGL2RenderingContext.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/html/canvas/WebGL2RenderingContext.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -28,11 +28,12 @@</span>
  
  #if ENABLE(WEBGL2)
  
  #include &quot;CachedImage.h&quot;
  #include &quot;EXTTextureFilterAnisotropic.h&quot;
<span class="udiff-line-modified-removed">- #include &quot;Extensions3D.h&quot;</span>
<span class="udiff-line-modified-added">+ #include &quot;EventLoop.h&quot;</span>
<span class="udiff-line-added">+ #include &quot;ExtensionsGL.h&quot;</span>
  #include &quot;HTMLCanvasElement.h&quot;
  #include &quot;HTMLImageElement.h&quot;
  #include &quot;HTMLVideoElement.h&quot;
  #include &quot;ImageData.h&quot;
  #include &quot;InspectorInstrumentation.h&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -43,10 +44,12 @@</span>
  #include &quot;OESTextureHalfFloatLinear.h&quot;
  #include &quot;RenderBox.h&quot;
  #include &quot;WebGLActiveInfo.h&quot;
  #include &quot;WebGLCompressedTextureASTC.h&quot;
  #include &quot;WebGLCompressedTextureATC.h&quot;
<span class="udiff-line-added">+ #include &quot;WebGLCompressedTextureETC.h&quot;</span>
<span class="udiff-line-added">+ #include &quot;WebGLCompressedTextureETC1.h&quot;</span>
  #include &quot;WebGLCompressedTexturePVRTC.h&quot;
  #include &quot;WebGLCompressedTextureS3TC.h&quot;
  #include &quot;WebGLDebugRendererInfo.h&quot;
  #include &quot;WebGLDebugShaders.h&quot;
  #include &quot;WebGLDepthTexture.h&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -57,44 +60,56 @@</span>
  #include &quot;WebGLTransformFeedback.h&quot;
  #include &quot;WebGLVertexArrayObject.h&quot;
  #include &lt;JavaScriptCore/GenericTypedArrayViewInlines.h&gt;
  #include &lt;JavaScriptCore/HeapInlines.h&gt;
  #include &lt;JavaScriptCore/JSGenericTypedArrayViewInlines.h&gt;
<span class="udiff-line-added">+ #include &lt;JavaScriptCore/TypedArrayType.h&gt;</span>
  #include &lt;wtf/IsoMallocInlines.h&gt;
  
  namespace WebCore {
  
  WTF_MAKE_ISO_ALLOCATED_IMPL(WebGL2RenderingContext);
  
<span class="udiff-line-modified-removed">- std::unique_ptr&lt;WebGL2RenderingContext&gt; WebGL2RenderingContext::create(CanvasBase&amp; canvas, GraphicsContext3DAttributes attributes)</span>
<span class="udiff-line-modified-added">+ std::unique_ptr&lt;WebGL2RenderingContext&gt; WebGL2RenderingContext::create(CanvasBase&amp; canvas, GraphicsContextGLAttributes attributes)</span>
  {
      auto renderingContext = std::unique_ptr&lt;WebGL2RenderingContext&gt;(new WebGL2RenderingContext(canvas, attributes));
  
      InspectorInstrumentation::didCreateCanvasRenderingContext(*renderingContext);
  
      return renderingContext;
  }
  
<span class="udiff-line-modified-removed">- std::unique_ptr&lt;WebGL2RenderingContext&gt; WebGL2RenderingContext::create(CanvasBase&amp; canvas, Ref&lt;GraphicsContext3D&gt;&amp;&amp; context, GraphicsContext3DAttributes attributes)</span>
<span class="udiff-line-modified-added">+ std::unique_ptr&lt;WebGL2RenderingContext&gt; WebGL2RenderingContext::create(CanvasBase&amp; canvas, Ref&lt;GraphicsContextGLOpenGL&gt;&amp;&amp; context, GraphicsContextGLAttributes attributes)</span>
  {
      auto renderingContext = std::unique_ptr&lt;WebGL2RenderingContext&gt;(new WebGL2RenderingContext(canvas, WTFMove(context), attributes));
  
      InspectorInstrumentation::didCreateCanvasRenderingContext(*renderingContext);
  
      return renderingContext;
  }
  
<span class="udiff-line-modified-removed">- WebGL2RenderingContext::WebGL2RenderingContext(CanvasBase&amp; canvas, GraphicsContext3DAttributes attributes)</span>
<span class="udiff-line-modified-added">+ WebGL2RenderingContext::WebGL2RenderingContext(CanvasBase&amp; canvas, GraphicsContextGLAttributes attributes)</span>
      : WebGLRenderingContextBase(canvas, attributes)
  {
  }
  
<span class="udiff-line-modified-removed">- WebGL2RenderingContext::WebGL2RenderingContext(CanvasBase&amp; canvas, Ref&lt;GraphicsContext3D&gt;&amp;&amp; context, GraphicsContext3DAttributes attributes)</span>
<span class="udiff-line-modified-added">+ WebGL2RenderingContext::WebGL2RenderingContext(CanvasBase&amp; canvas, Ref&lt;GraphicsContextGLOpenGL&gt;&amp;&amp; context, GraphicsContextGLAttributes attributes)</span>
      : WebGLRenderingContextBase(canvas, WTFMove(context), attributes)
  {
      initializeShaderExtensions();
      initializeVertexArrayObjects();
<span class="udiff-line-added">+     initializeTransformFeedbackBufferCache();</span>
<span class="udiff-line-added">+     initializeSamplerCache();</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ WebGL2RenderingContext::~WebGL2RenderingContext()</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     // Remove all references to WebGLObjects so if they are the last reference</span>
<span class="udiff-line-added">+     // they will be freed before the last context is removed from the context group.</span>
<span class="udiff-line-added">+     m_boundTransformFeedback = nullptr;</span>
<span class="udiff-line-added">+     m_boundTransformFeedbackBuffers.clear();</span>
<span class="udiff-line-added">+     m_activeQueries.clear();</span>
  }
  
  void WebGL2RenderingContext::initializeVertexArrayObjects()
  {
      m_defaultVertexArrayObject = WebGLVertexArrayObject::create(*this, WebGLVertexArrayObject::Type::Default);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -114,123 +129,118 @@</span>
      m_context-&gt;getExtensions().ensureEnabled(&quot;GL_EXT_draw_buffers&quot;);
      m_context-&gt;getExtensions().ensureEnabled(&quot;GL_EXT_shader_texture_lod&quot;);
      m_context-&gt;getExtensions().ensureEnabled(&quot;GL_EXT_frag_depth&quot;);
  }
  
<span class="udiff-line-modified-removed">- inline static Optional&lt;unsigned&gt; arrayBufferViewElementSize(const ArrayBufferView&amp; data)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::initializeTransformFeedbackBufferCache()</span>
  {
<span class="udiff-line-modified-removed">-     switch (data.getType()) {</span>
<span class="udiff-line-modified-removed">-     case JSC::NotTypedArray:</span>
<span class="udiff-line-modified-removed">-     case JSC::TypeDataView:</span>
<span class="udiff-line-modified-removed">-         return WTF::nullopt;</span>
<span class="udiff-line-removed">-     case JSC::TypeInt8:</span>
<span class="udiff-line-removed">-     case JSC::TypeUint8:</span>
<span class="udiff-line-removed">-     case JSC::TypeUint8Clamped:</span>
<span class="udiff-line-removed">-     case JSC::TypeInt16:</span>
<span class="udiff-line-removed">-     case JSC::TypeUint16:</span>
<span class="udiff-line-removed">-     case JSC::TypeInt32:</span>
<span class="udiff-line-removed">-     case JSC::TypeUint32:</span>
<span class="udiff-line-removed">-     case JSC::TypeFloat32:</span>
<span class="udiff-line-removed">-     case JSC::TypeFloat64:</span>
<span class="udiff-line-removed">-         return elementSize(data.getType());</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">-     RELEASE_ASSERT_NOT_REACHED();</span>
<span class="udiff-line-modified-added">+     int maxTransformFeedbackAttribs = getIntParameter(GraphicsContextGL::MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS);</span>
<span class="udiff-line-modified-added">+     ASSERT(maxTransformFeedbackAttribs &gt;= 4);</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     m_boundTransformFeedbackBuffers.resize(maxTransformFeedbackAttribs);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::bufferData(GC3Denum target, const ArrayBufferView&amp; data, GC3Denum usage, GC3Duint srcOffset, GC3Duint length)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::initializeSamplerCache()</span>
  {
<span class="udiff-line-modified-removed">-     auto optionalElementSize = arrayBufferViewElementSize(data);</span>
<span class="udiff-line-modified-removed">-     if (!optionalElementSize) {</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;bufferData&quot;, &quot;Invalid type of Array Buffer View&quot;);</span>
<span class="udiff-line-removed">-         return;</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">-     auto elementSize = optionalElementSize.value();</span>
<span class="udiff-line-removed">-     Checked&lt;GC3Duint, RecordOverflow&gt; checkedElementSize(elementSize);</span>
<span class="udiff-line-modified-added">+     ASSERT(m_textureUnits.size() &gt;= 8);</span>
<span class="udiff-line-modified-added">+     m_boundSamplers.resize(m_textureUnits.size());</span>
<span class="udiff-line-modified-added">+ }</span>
  
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Duint, RecordOverflow&gt; checkedSrcOffset(srcOffset);</span>
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Duint, RecordOverflow&gt; checkedByteSrcOffset = checkedSrcOffset * checkedElementSize;</span>
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Duint, RecordOverflow&gt; checkedlength(length);</span>
<span class="udiff-line-removed">-     Checked&lt;GC3Duint, RecordOverflow&gt; checkedByteLength = checkedlength * checkedElementSize;</span>
<span class="udiff-line-modified-added">+ RefPtr&lt;ArrayBufferView&gt; WebGL2RenderingContext::arrayBufferViewSliceFactory(const char* const functionName, const ArrayBufferView&amp; data, unsigned startByte,  unsigned numElements)</span>
<span class="udiff-line-modified-added">+ {</span>
<span class="udiff-line-modified-added">+     RefPtr&lt;ArrayBufferView&gt; slice;</span>
  
<span class="udiff-line-modified-removed">-     if (checkedByteSrcOffset.hasOverflowed()</span>
<span class="udiff-line-modified-removed">-         || checkedByteLength.hasOverflowed()</span>
<span class="udiff-line-modified-removed">-         || checkedByteSrcOffset.unsafeGet() &gt; data.byteLength()</span>
<span class="udiff-line-modified-removed">-         || checkedByteLength.unsafeGet() &gt; data.byteLength() - checkedByteSrcOffset.unsafeGet()) {</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;bufferData&quot;, &quot;srcOffset or length is out of bounds&quot;);</span>
<span class="udiff-line-removed">-         return;</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-modified-added">+     switch (data.getType()) {</span>
<span class="udiff-line-modified-added">+ #define FACTORY_CASE(type) \</span>
<span class="udiff-line-modified-added">+     case JSC::Type##type: \</span>
<span class="udiff-line-modified-added">+         slice = JSC::type##Array::tryCreate(data.possiblySharedBuffer(), startByte, numElements); \</span>
<span class="udiff-line-modified-added">+         break;</span>
  
<span class="udiff-line-modified-removed">-     auto slice = Uint8Array::tryCreate(data.possiblySharedBuffer(), data.byteOffset() + checkedByteSrcOffset.unsafeGet(), checkedByteLength.unsafeGet());</span>
<span class="udiff-line-modified-removed">-     if (!slice) {</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::OUT_OF_MEMORY, &quot;bufferData&quot;, &quot;Could not create intermediate ArrayBufferView&quot;);</span>
<span class="udiff-line-modified-removed">-         return;</span>
<span class="udiff-line-modified-added">+     FOR_EACH_TYPED_ARRAY_TYPE_EXCLUDING_DATA_VIEW(FACTORY_CASE);</span>
<span class="udiff-line-modified-added">+ #undef FACTORY_CASE</span>
<span class="udiff-line-modified-added">+     case JSC::TypeDataView:</span>
<span class="udiff-line-modified-added">+         slice = Uint8Array::tryCreate(data.possiblySharedBuffer(), startByte, numElements);</span>
<span class="udiff-line-added">+         break;</span>
<span class="udiff-line-added">+     default:</span>
<span class="udiff-line-added">+         ASSERT_NOT_REACHED();</span>
<span class="udiff-line-added">+         return nullptr;</span>
      }
<span class="udiff-line-modified-removed">-     WebGLRenderingContextBase::bufferData(target, BufferDataSource(slice.get()), usage);</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-added">+     if (!slice)</span>
<span class="udiff-line-added">+         synthesizeGLError(GraphicsContextGL::OUT_OF_MEMORY, functionName, &quot;Could not create intermediate ArrayBufferView&quot;);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     return slice;</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::bufferSubData(GC3Denum target, long long offset, const ArrayBufferView&amp; data, GC3Duint srcOffset, GC3Duint length)</span>
<span class="udiff-line-modified-added">+ RefPtr&lt;ArrayBufferView&gt; WebGL2RenderingContext::sliceArrayBufferView(const char* const functionName, const ArrayBufferView&amp; data, GCGLuint srcOffset, GCGLuint length)</span>
  {
<span class="udiff-line-modified-removed">-     auto optionalElementSize = arrayBufferViewElementSize(data);</span>
<span class="udiff-line-modified-removed">-     if (!optionalElementSize) {</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;bufferSubData&quot;, &quot;Invalid type of Array Buffer View&quot;);</span>
<span class="udiff-line-removed">-         return;</span>
<span class="udiff-line-modified-added">+     if (data.getType() == JSC::NotTypedArray) {</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, functionName, &quot;Invalid type of Array Buffer View&quot;);</span>
<span class="udiff-line-modified-added">+         return nullptr;</span>
      }
<span class="udiff-line-removed">-     auto elementSize = optionalElementSize.value();</span>
<span class="udiff-line-removed">-     Checked&lt;GC3Duint, RecordOverflow&gt; checkedElementSize(elementSize);</span>
  
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Duint, RecordOverflow&gt; checkedSrcOffset(srcOffset);</span>
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Duint, RecordOverflow&gt; checkedByteSrcOffset = checkedSrcOffset * checkedElementSize;</span>
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Duint, RecordOverflow&gt; checkedlength(length);</span>
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Duint, RecordOverflow&gt; checkedByteLength = checkedlength * checkedElementSize;</span>
<span class="udiff-line-modified-added">+     auto elementSize = JSC::elementSize(data.getType());</span>
<span class="udiff-line-modified-added">+     Checked&lt;GCGLuint, RecordOverflow&gt; checkedElementSize(elementSize);</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     Checked&lt;GCGLuint, RecordOverflow&gt; checkedSrcOffset(srcOffset);</span>
<span class="udiff-line-added">+     Checked&lt;GCGLuint, RecordOverflow&gt; checkedByteSrcOffset = checkedSrcOffset * checkedElementSize;</span>
<span class="udiff-line-added">+     Checked&lt;GCGLuint, RecordOverflow&gt; checkedLength(length);</span>
<span class="udiff-line-added">+     Checked&lt;GCGLuint, RecordOverflow&gt; checkedByteLength = checkedLength * checkedElementSize;</span>
  
      if (checkedByteSrcOffset.hasOverflowed()
          || checkedByteLength.hasOverflowed()
          || checkedByteSrcOffset.unsafeGet() &gt; data.byteLength()
          || checkedByteLength.unsafeGet() &gt; data.byteLength() - checkedByteSrcOffset.unsafeGet()) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;bufferSubData&quot;, &quot;srcOffset or length is out of bounds&quot;);</span>
<span class="udiff-line-modified-removed">-         return;</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_VALUE, functionName, &quot;srcOffset or length is out of bounds&quot;);</span>
<span class="udiff-line-modified-added">+         return nullptr;</span>
      }
  
<span class="udiff-line-modified-removed">-     auto slice = Uint8Array::tryCreate(data.possiblySharedBuffer(), data.byteOffset() + checkedByteSrcOffset.unsafeGet(), checkedByteLength.unsafeGet());</span>
<span class="udiff-line-modified-removed">-     if (!slice) {</span>
<span class="udiff-line-removed">-         synthesizeGLError(GraphicsContext3D::OUT_OF_MEMORY, &quot;bufferSubData&quot;, &quot;Could not create intermediate ArrayBufferView&quot;);</span>
<span class="udiff-line-removed">-         return;</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-modified-added">+     return arrayBufferViewSliceFactory(functionName, data, data.byteOffset() + checkedByteSrcOffset.unsafeGet(), length);</span>
<span class="udiff-line-modified-added">+ }</span>
  
<span class="udiff-line-modified-removed">-     WebGLRenderingContextBase::bufferSubData(target, offset, BufferDataSource(slice.get()));</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::bufferData(GCGLenum target, const ArrayBufferView&amp; data, GCGLenum usage, GCGLuint srcOffset, GCGLuint length)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     if (auto slice = sliceArrayBufferView(&quot;bufferData&quot;, data, srcOffset, length))</span>
<span class="udiff-line-added">+         WebGLRenderingContextBase::bufferData(target, BufferDataSource(slice.get()), usage);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::copyBufferSubData(GC3Denum readTarget, GC3Denum writeTarget, GC3Dint64 readOffset, GC3Dint64 writeOffset, GC3Dint64 size)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::bufferSubData(GCGLenum target, long long offset, const ArrayBufferView&amp; data, GCGLuint srcOffset, GCGLuint length)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     if (auto slice = sliceArrayBufferView(&quot;bufferSubData&quot;, data, srcOffset, length))</span>
<span class="udiff-line-added">+         WebGLRenderingContextBase::bufferSubData(target, offset, BufferDataSource(slice.get()));</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::copyBufferSubData(GCGLenum readTarget, GCGLenum writeTarget, GCGLint64 readOffset, GCGLint64 writeOffset, GCGLint64 size)</span>
  {
      if (isContextLostOrPending())
          return;
<span class="udiff-line-modified-removed">-     if ((readTarget == GraphicsContext3D::ELEMENT_ARRAY_BUFFER &amp;&amp; writeTarget != GraphicsContext3D::ELEMENT_ARRAY_BUFFER)</span>
<span class="udiff-line-modified-removed">-         || (writeTarget == GraphicsContext3D::ELEMENT_ARRAY_BUFFER &amp;&amp; readTarget != GraphicsContext3D::ELEMENT_ARRAY_BUFFER)) {</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;copyBufferSubData&quot;, &quot;Either both targets need to be ELEMENT_ARRAY_BUFFER or neither should be ELEMENT_ARRAY_BUFFER.&quot;);</span>
<span class="udiff-line-modified-added">+     if ((readTarget == GraphicsContextGL::ELEMENT_ARRAY_BUFFER &amp;&amp; writeTarget != GraphicsContextGL::ELEMENT_ARRAY_BUFFER)</span>
<span class="udiff-line-modified-added">+         || (writeTarget == GraphicsContextGL::ELEMENT_ARRAY_BUFFER &amp;&amp; readTarget != GraphicsContextGL::ELEMENT_ARRAY_BUFFER)) {</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;copyBufferSubData&quot;, &quot;Either both targets need to be ELEMENT_ARRAY_BUFFER or neither should be ELEMENT_ARRAY_BUFFER.&quot;);</span>
          return;
      }
      if (readOffset &lt; 0 || writeOffset &lt; 0 || size &lt; 0) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;copyBufferSubData&quot;, &quot;offset &lt; 0&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;copyBufferSubData&quot;, &quot;offset &lt; 0&quot;);</span>
          return;
      }
<span class="udiff-line-modified-removed">-     RefPtr&lt;WebGLBuffer&gt; readBuffer = validateBufferDataParameters(&quot;copyBufferSubData&quot;, readTarget, GraphicsContext3D::STATIC_DRAW);</span>
<span class="udiff-line-modified-removed">-     RefPtr&lt;WebGLBuffer&gt; writeBuffer = validateBufferDataParameters(&quot;copyBufferSubData&quot;, writeTarget, GraphicsContext3D::STATIC_DRAW);</span>
<span class="udiff-line-modified-added">+     RefPtr&lt;WebGLBuffer&gt; readBuffer = validateBufferDataParameters(&quot;copyBufferSubData&quot;, readTarget, GraphicsContextGL::STATIC_DRAW);</span>
<span class="udiff-line-modified-added">+     RefPtr&lt;WebGLBuffer&gt; writeBuffer = validateBufferDataParameters(&quot;copyBufferSubData&quot;, writeTarget, GraphicsContextGL::STATIC_DRAW);</span>
      if (!readBuffer || !writeBuffer) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;copyBufferSubData&quot;, &quot;Invalid readTarget or writeTarget&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;copyBufferSubData&quot;, &quot;Invalid readTarget or writeTarget&quot;);</span>
          return;
      }
  
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Dintptr, RecordOverflow&gt; checkedReadOffset(readOffset);</span>
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Dintptr, RecordOverflow&gt; checkedWriteOffset(writeOffset);</span>
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Dsizeiptr, RecordOverflow&gt; checkedSize(size);</span>
<span class="udiff-line-modified-added">+     Checked&lt;GCGLintptr, RecordOverflow&gt; checkedReadOffset(readOffset);</span>
<span class="udiff-line-modified-added">+     Checked&lt;GCGLintptr, RecordOverflow&gt; checkedWriteOffset(writeOffset);</span>
<span class="udiff-line-modified-added">+     Checked&lt;GCGLsizeiptr, RecordOverflow&gt; checkedSize(size);</span>
      if (checkedReadOffset.hasOverflowed() || checkedWriteOffset.hasOverflowed() || checkedSize.hasOverflowed()) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;copyBufferSubData&quot;, &quot;Offset or size is too big&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;copyBufferSubData&quot;, &quot;Offset or size is too big&quot;);</span>
          return;
      }
  
      if (!writeBuffer-&gt;associateCopyBufferSubData(*readBuffer, checkedReadOffset.unsafeGet(), checkedWriteOffset.unsafeGet(), checkedSize.unsafeGet())) {
<span class="udiff-line-modified-removed">-         this-&gt;synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;copyBufferSubData&quot;, &quot;offset out of range&quot;);</span>
<span class="udiff-line-modified-added">+         this-&gt;synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;copyBufferSubData&quot;, &quot;offset out of range&quot;);</span>
          return;
      }
  
      m_context-&gt;moveErrorsToSyntheticErrorList();
  #if PLATFORM(COCOA)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -240,362 +250,364 @@</span>
          // The bufferSubData function failed. Tell the buffer it doesn&#39;t have the data it thinks it does.
          writeBuffer-&gt;disassociateBufferData();
      }
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::getBufferSubData(GC3Denum target, long long srcByteOffset, RefPtr&lt;ArrayBufferView&gt;&amp;&amp; dstData, GC3Duint dstOffset, GC3Duint length)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::getBufferSubData(GCGLenum target, long long srcByteOffset, RefPtr&lt;ArrayBufferView&gt;&amp;&amp; dstData, GCGLuint dstOffset, GCGLuint length)</span>
  {
      if (isContextLostOrPending())
          return;
<span class="udiff-line-modified-removed">-     RefPtr&lt;WebGLBuffer&gt; buffer = validateBufferDataParameters(&quot;bufferSubData&quot;, target, GraphicsContext3D::STATIC_DRAW);</span>
<span class="udiff-line-modified-added">+     RefPtr&lt;WebGLBuffer&gt; buffer = validateBufferDataParameters(&quot;bufferSubData&quot;, target, GraphicsContextGL::STATIC_DRAW);</span>
      if (!buffer) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;No WebGLBuffer is bound to target&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;No WebGLBuffer is bound to target&quot;);</span>
          return;
      }
  
      // FIXME: Implement &quot;If target is TRANSFORM_FEEDBACK_BUFFER, and any transform feedback object is currently active, an INVALID_OPERATION error is generated.&quot;
  
      if (!dstData) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;Null dstData&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;Null dstData&quot;);</span>
          return;
      }
  
<span class="udiff-line-modified-removed">-     auto optionalElementSize = arrayBufferViewElementSize(*dstData);</span>
<span class="udiff-line-modified-removed">-     if (!optionalElementSize) {</span>
<span class="udiff-line-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;Invalid type of Array Buffer View&quot;);</span>
<span class="udiff-line-modified-added">+     if (dstData-&gt;getType() == JSC::NotTypedArray) {</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;Invalid type of Array Buffer View&quot;);</span>
          return;
      }
<span class="udiff-line-modified-removed">-     auto elementSize = optionalElementSize.value();</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-added">+     auto elementSize = JSC::elementSize(dstData-&gt;getType());</span>
      auto dstDataLength = dstData-&gt;byteLength() / elementSize;
  
      if (dstOffset &gt; dstDataLength) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;dstOffset is larger than the length of the destination buffer.&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;dstOffset is larger than the length of the destination buffer.&quot;);</span>
          return;
      }
  
<span class="udiff-line-modified-removed">-     GC3Duint copyLength = length ? length : dstDataLength - dstOffset;</span>
<span class="udiff-line-modified-added">+     GCGLuint copyLength = length ? length : dstDataLength - dstOffset;</span>
  
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Duint, RecordOverflow&gt; checkedDstOffset(dstOffset);</span>
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Duint, RecordOverflow&gt; checkedCopyLength(copyLength);</span>
<span class="udiff-line-modified-added">+     Checked&lt;GCGLuint, RecordOverflow&gt; checkedDstOffset(dstOffset);</span>
<span class="udiff-line-modified-added">+     Checked&lt;GCGLuint, RecordOverflow&gt; checkedCopyLength(copyLength);</span>
      auto checkedDestinationEnd = checkedDstOffset + checkedCopyLength;
      if (checkedDestinationEnd.hasOverflowed()) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;dstOffset + copyLength is too high&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;dstOffset + copyLength is too high&quot;);</span>
          return;
      }
  
      if (checkedDestinationEnd.unsafeGet() &gt; dstDataLength) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;end of written destination is past the end of the buffer&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;end of written destination is past the end of the buffer&quot;);</span>
          return;
      }
  
      if (srcByteOffset &lt; 0) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;srcByteOffset is less than 0&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;srcByteOffset is less than 0&quot;);</span>
          return;
      }
  
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Dintptr, RecordOverflow&gt; checkedSrcByteOffset(srcByteOffset);</span>
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Dintptr, RecordOverflow&gt; checkedCopyLengthPtr(copyLength);</span>
<span class="udiff-line-modified-removed">-     Checked&lt;GC3Dintptr, RecordOverflow&gt; checkedElementSize(elementSize);</span>
<span class="udiff-line-modified-added">+     Checked&lt;GCGLintptr, RecordOverflow&gt; checkedSrcByteOffset(srcByteOffset);</span>
<span class="udiff-line-modified-added">+     Checked&lt;GCGLintptr, RecordOverflow&gt; checkedCopyLengthPtr(copyLength);</span>
<span class="udiff-line-modified-added">+     Checked&lt;GCGLintptr, RecordOverflow&gt; checkedElementSize(elementSize);</span>
      auto checkedSourceEnd = checkedSrcByteOffset + checkedCopyLengthPtr * checkedElementSize;
      if (checkedSourceEnd.hasOverflowed() || checkedSourceEnd.unsafeGet() &gt; buffer-&gt;byteLength()) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;Parameters would read outside the bounds of the source buffer&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;Parameters would read outside the bounds of the source buffer&quot;);</span>
          return;
      }
  
      m_context-&gt;moveErrorsToSyntheticErrorList();
  #if PLATFORM(COCOA)
      // FIXME: Coalesce multiple getBufferSubData() calls to use a single map() call
<span class="udiff-line-modified-removed">-     void* ptr = m_context-&gt;mapBufferRange(target, checkedSrcByteOffset.unsafeGet(), static_cast&lt;GC3Dsizeiptr&gt;(checkedCopyLengthPtr.unsafeGet() * checkedElementSize.unsafeGet()), GraphicsContext3D::MAP_READ_BIT);</span>
<span class="udiff-line-modified-removed">-     memcpy(static_cast&lt;char*&gt;(dstData-&gt;baseAddress()) + dstData-&gt;byteOffset() + dstOffset * elementSize, ptr, copyLength * elementSize);</span>
<span class="udiff-line-modified-removed">-     bool success = m_context-&gt;unmapBuffer(target);</span>
<span class="udiff-line-modified-removed">-     ASSERT_UNUSED(success, success);</span>
<span class="udiff-line-modified-added">+     void* ptr = m_context-&gt;mapBufferRange(target, checkedSrcByteOffset.unsafeGet(), static_cast&lt;GCGLsizeiptr&gt;(checkedCopyLengthPtr.unsafeGet() * checkedElementSize.unsafeGet()), GraphicsContextGL::MAP_READ_BIT);</span>
<span class="udiff-line-modified-added">+     if (ptr)</span>
<span class="udiff-line-modified-added">+         memcpy(static_cast&lt;char*&gt;(dstData-&gt;baseAddress()) + dstData-&gt;byteOffset() + dstOffset * elementSize, ptr, copyLength * elementSize);</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-added">+     if (!m_context-&gt;unmapBuffer(target))</span>
<span class="udiff-line-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;getBufferSubData&quot;, &quot;Failed while unmapping buffer&quot;);</span>
  #endif
      m_context-&gt;moveErrorsToSyntheticErrorList();
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::blitFramebuffer(GC3Dint, GC3Dint, GC3Dint, GC3Dint, GC3Dint, GC3Dint, GC3Dint, GC3Dint, GC3Dbitfield, GC3Denum)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::blitFramebuffer(GCGLint, GCGLint, GCGLint, GCGLint, GCGLint, GCGLint, GCGLint, GCGLint, GCGLbitfield, GCGLenum)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] blitFramebuffer()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::framebufferTextureLayer(GC3Denum, GC3Denum, WebGLTexture*, GC3Dint, GC3Dint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::framebufferTextureLayer(GCGLenum, GCGLenum, WebGLTexture*, GCGLint, GCGLint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] framebufferTextureLayer()&quot;);
  }
  
  #if !USE(OPENGL_ES)
<span class="udiff-line-modified-removed">- static bool isRenderableInternalformat(GC3Denum internalformat)</span>
<span class="udiff-line-modified-added">+ static bool isRenderableInternalformat(GCGLenum internalformat)</span>
  {
      // OpenGL ES 3: internalformat must be a color-renderable, depth-renderable, or stencil-renderable format, as shown in Table 1 below.
      switch (internalformat) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R32UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG32UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB565:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SRGB8_ALPHA8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB5_A1:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA4:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB10_A2:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB10_A2UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA32UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT16:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT24:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT32F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH24_STENCIL8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH32F_STENCIL8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_INDEX8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R32UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG32UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB565:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SRGB8_ALPHA8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB5_A1:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA4:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB10_A2:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB10_A2UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA32UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT16:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT24:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT32F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH24_STENCIL8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH32F_STENCIL8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_INDEX8:</span>
          return true;
      }
      return false;
  }
  #endif
  
<span class="udiff-line-modified-removed">- WebGLAny WebGL2RenderingContext::getInternalformatParameter(GC3Denum target, GC3Denum internalformat, GC3Denum pname)</span>
<span class="udiff-line-modified-added">+ WebGLAny WebGL2RenderingContext::getInternalformatParameter(GCGLenum target, GCGLenum internalformat, GCGLenum pname)</span>
  {
      if (isContextLostOrPending())
          return nullptr;
  
<span class="udiff-line-modified-removed">-     if (pname != GraphicsContext3D::SAMPLES) {</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;getInternalformatParameter&quot;, &quot;invalid parameter name&quot;);</span>
<span class="udiff-line-modified-added">+     if (pname != GraphicsContextGL::SAMPLES) {</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;getInternalformatParameter&quot;, &quot;invalid parameter name&quot;);</span>
          return nullptr;
      }
  
      int numValues = 0;
  #if USE(OPENGL_ES)
<span class="udiff-line-modified-removed">-     m_context-&gt;getInternalformativ(target, internalformat, GraphicsContext3D::NUM_SAMPLE_COUNTS, 1, &amp;numValues);</span>
<span class="udiff-line-modified-added">+     m_context-&gt;getInternalformativ(target, internalformat, GraphicsContextGL::NUM_SAMPLE_COUNTS, 1, &amp;numValues);</span>
  
<span class="udiff-line-modified-removed">-     GC3Dint params[numValues];</span>
<span class="udiff-line-modified-added">+     GCGLint params[numValues];</span>
      m_context-&gt;getInternalformativ(target, internalformat, pname, numValues, params);
  #else
      // On desktop OpenGL 4.1 or below we must emulate glGetInternalformativ.
  
      // GL_INVALID_ENUM is generated if target is not GL_RENDERBUFFER.
<span class="udiff-line-modified-removed">-     if (target != GraphicsContext3D::RENDERBUFFER) {</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;getInternalformatParameter&quot;, &quot;invalid target&quot;);</span>
<span class="udiff-line-modified-added">+     if (target != GraphicsContextGL::RENDERBUFFER) {</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;getInternalformatParameter&quot;, &quot;invalid target&quot;);</span>
          return nullptr;
      }
  
      // GL_INVALID_ENUM is generated if internalformat is not color-, depth-, or stencil-renderable.
      if (!isRenderableInternalformat(internalformat)) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;getInternalformatParameter&quot;, &quot;invalid internal format&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;getInternalformatParameter&quot;, &quot;invalid internal format&quot;);</span>
          return nullptr;
      }
  
<span class="udiff-line-modified-removed">-     Vector&lt;GC3Dint&gt; samples;</span>
<span class="udiff-line-modified-added">+     Vector&lt;GCGLint&gt; samples;</span>
      // The way I understand this is that this will return a MINIMUM numSamples for all accepeted internalformats.
      // However, the true value of this on supported GL versions is gleaned via a getInternalformativ call that depends on internalformat.
<span class="udiff-line-modified-removed">-     int numSamplesMask = getIntParameter(GraphicsContext3D::MAX_SAMPLES);</span>
<span class="udiff-line-modified-added">+     int numSamplesMask = getIntParameter(GraphicsContextGL::MAX_SAMPLES);</span>
  
      while (numSamplesMask &gt; 0) {
          samples.append(numSamplesMask);
          numSamplesMask = numSamplesMask &gt;&gt; 1;
      }
  
      // Since multisampling is not supported for signed and unsigned integer internal formats,
      // the value of GL_NUM_SAMPLE_COUNTS will be zero for such formats.
      numValues = isIntegerFormat(internalformat) ? 0 : samples.size();
<span class="udiff-line-modified-removed">-     GC3Dint params[numValues];</span>
<span class="udiff-line-modified-added">+     GCGLint params[numValues];</span>
      for (size_t i = 0; i &lt; samples.size(); ++i)
          params[i] = samples[i];
  #endif
  
      return Int32Array::tryCreate(params, numValues);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::invalidateFramebuffer(GC3Denum, const Vector&lt;GC3Denum&gt;&amp;)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::invalidateFramebuffer(GCGLenum, const Vector&lt;GCGLenum&gt;&amp;)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] invalidateFramebuffer()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::invalidateSubFramebuffer(GC3Denum, const Vector&lt;GC3Denum&gt;&amp;, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::invalidateSubFramebuffer(GCGLenum, const Vector&lt;GCGLenum&gt;&amp;, GCGLint, GCGLint, GCGLsizei, GCGLsizei)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] invalidateSubFramebuffer()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::readBuffer(GC3Denum)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::readBuffer(GCGLenum)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] readBuffer()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::renderbufferStorageMultisample(GC3Denum target, GC3Dsizei samples, GC3Denum internalformat, GC3Dsizei width, GC3Dsizei height)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::renderbufferStorageMultisample(GCGLenum target, GCGLsizei samples, GCGLenum internalformat, GCGLsizei width, GCGLsizei height)</span>
  {
      // To be backward compatible with WebGL 1, also accepts internal format DEPTH_STENCIL,
      // which should be mapped to DEPTH24_STENCIL8 by implementations.
<span class="udiff-line-modified-removed">-     if (internalformat == GraphicsContext3D::DEPTH_STENCIL)</span>
<span class="udiff-line-modified-removed">-         internalformat = GraphicsContext3D::DEPTH24_STENCIL8;</span>
<span class="udiff-line-modified-added">+     if (internalformat == GraphicsContextGL::DEPTH_STENCIL)</span>
<span class="udiff-line-modified-added">+         internalformat = GraphicsContextGL::DEPTH24_STENCIL8;</span>
  
      // ES 3: GL_INVALID_OPERATION is generated if internalformat is a signed or unsigned integer format and samples is greater than 0.
      if (isIntegerFormat(internalformat) &amp;&amp; samples &gt; 0) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;renderbufferStorageMultisample&quot;, &quot;multisampling not supported for this format&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;renderbufferStorageMultisample&quot;, &quot;multisampling not supported for this format&quot;);</span>
          return;
      }
  
      switch (internalformat) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT16:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT32F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT24:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA32UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB10_A2:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB10_A2UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA4:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG32UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R32UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB5_A1:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB565:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_INDEX8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SRGB8_ALPHA8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT16:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT32F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT24:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA32UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB10_A2:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB10_A2UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA4:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG32UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R32UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB5_A1:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB565:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_INDEX8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SRGB8_ALPHA8:</span>
          m_context-&gt;renderbufferStorageMultisample(target, samples, internalformat, width, height);
          m_renderbufferBinding-&gt;setInternalFormat(internalformat);
          m_renderbufferBinding-&gt;setIsValid(true);
          m_renderbufferBinding-&gt;setSize(width, height);
          break;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH32F_STENCIL8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH24_STENCIL8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH32F_STENCIL8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH24_STENCIL8:</span>
          if (!isDepthStencilSupported()) {
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;renderbufferStorage&quot;, &quot;invalid internalformat&quot;);</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;renderbufferStorage&quot;, &quot;invalid internalformat&quot;);</span>
              return;
          }
          m_context-&gt;renderbufferStorageMultisample(target, samples, internalformat, width, height);
          m_renderbufferBinding-&gt;setSize(width, height);
          m_renderbufferBinding-&gt;setIsValid(isDepthStencilSupported());
          m_renderbufferBinding-&gt;setInternalFormat(internalformat);
          break;
      default:
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;renderbufferStorage&quot;, &quot;invalid internalformat&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;renderbufferStorage&quot;, &quot;invalid internalformat&quot;);</span>
          return;
      }
      applyStencilTest();
  }
  
<span class="udiff-line-modified-removed">- bool WebGL2RenderingContext::validateTexStorageFuncParameters(GC3Denum target, GC3Dsizei levels, GC3Denum internalFormat, GC3Dsizei width, GC3Dsizei height, const char* functionName)</span>
<span class="udiff-line-modified-added">+ bool WebGL2RenderingContext::validateTexStorageFuncParameters(GCGLenum target, GCGLsizei levels, GCGLenum internalFormat, GCGLsizei width, GCGLsizei height, const char* functionName)</span>
  {
      if (width &lt; 0 || height &lt; 0) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_VALUE, functionName, &quot;width or height &lt; 0&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_VALUE, functionName, &quot;width or height &lt; 0&quot;);</span>
          return false;
      }
  
      if (width &gt; m_maxTextureSize || height &gt; m_maxTextureSize) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, functionName, &quot;texture dimensions are larger than the maximum texture size&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, functionName, &quot;texture dimensions are larger than the maximum texture size&quot;);</span>
          return false;
      }
  
<span class="udiff-line-modified-removed">-     if (target == GraphicsContext3D::TEXTURE_CUBE_MAP) {</span>
<span class="udiff-line-modified-added">+     if (target == GraphicsContextGL::TEXTURE_CUBE_MAP) {</span>
          if (width != height) {
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_VALUE, functionName, &quot;width != height for cube map&quot;);</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_VALUE, functionName, &quot;width != height for cube map&quot;);</span>
              return false;
          }
<span class="udiff-line-modified-removed">-     } else if (target != GraphicsContext3D::TEXTURE_2D) {</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, functionName, &quot;invalid target&quot;);</span>
<span class="udiff-line-modified-added">+     } else if (target != GraphicsContextGL::TEXTURE_2D) {</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, functionName, &quot;invalid target&quot;);</span>
          return false;
      }
  
      if (levels &lt; 0 || levels &gt; m_maxTextureLevel) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, functionName, &quot;number of levels is out of bounds&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, functionName, &quot;number of levels is out of bounds&quot;);</span>
          return false;
      }
  
      switch (internalFormat) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8_SNORM:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R16F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R32F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R32UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8_SNORM:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG16F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG32F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG32UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SRGB8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB565:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB8_SNORM:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R11F_G11F_B10F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB9_E5:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB16F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB32F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB32UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SRGB8_ALPHA8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8_SNORM:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB5_A1:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA4:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB10_A2:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA16F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA32F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB10_A2UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA32UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT16:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT24:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT32F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH24_STENCIL8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH32F_STENCIL8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8_SNORM:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R16F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R32F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R32UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8_SNORM:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG16F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG32F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG32UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SRGB8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB565:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB8_SNORM:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R11F_G11F_B10F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB9_E5:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB16F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB32F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB32UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SRGB8_ALPHA8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8_SNORM:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB5_A1:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA4:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB10_A2:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA16F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA32F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB10_A2UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA32UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT16:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT24:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT32F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH24_STENCIL8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH32F_STENCIL8:</span>
          break;
      default:
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, functionName, &quot;Unknown internalFormat&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, functionName, &quot;Unknown internalFormat&quot;);</span>
          return false;
      }
  
      return true;
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texStorage2D(GC3Denum target, GC3Dsizei levels, GC3Denum internalFormat, GC3Dsizei width, GC3Dsizei height)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::texStorage2D(GCGLenum target, GCGLsizei levels, GCGLenum internalFormat, GCGLsizei width, GCGLsizei height)</span>
  {
      if (isContextLostOrPending())
          return;
  
      auto texture = validateTextureBinding(&quot;texStorage2D&quot;, target, false);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -607,601 +619,780 @@</span>
  
      if (!validateNPOTTextureLevel(width, height, levels, &quot;texStorage2D&quot;))
          return;
  
      if (texture-&gt;immutable()) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;texStorage2D&quot;, &quot;texStorage2D already called on this texture&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;texStorage2D&quot;, &quot;texStorage2D already called on this texture&quot;);</span>
          return;
      }
      texture-&gt;setImmutable();
  
      m_context-&gt;texStorage2D(target, levels, internalFormat, width, height);
  
      {
<span class="udiff-line-modified-removed">-         GC3Denum format;</span>
<span class="udiff-line-modified-removed">-         GC3Denum type;</span>
<span class="udiff-line-modified-removed">-         if (!GraphicsContext3D::possibleFormatAndTypeForInternalFormat(internalFormat, format, type)) {</span>
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;texStorage2D&quot;, &quot;Texture has unknown internal format&quot;);</span>
<span class="udiff-line-modified-added">+         GCGLenum format;</span>
<span class="udiff-line-modified-added">+         GCGLenum type;</span>
<span class="udiff-line-modified-added">+         if (!GraphicsContextGLOpenGL::possibleFormatAndTypeForInternalFormat(internalFormat, format, type)) {</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;texStorage2D&quot;, &quot;Texture has unknown internal format&quot;);</span>
              return;
          }
  
<span class="udiff-line-modified-removed">-         GC3Dsizei levelWidth = width;</span>
<span class="udiff-line-modified-removed">-         GC3Dsizei levelHeight = height;</span>
<span class="udiff-line-modified-added">+         GCGLsizei levelWidth = width;</span>
<span class="udiff-line-modified-added">+         GCGLsizei levelHeight = height;</span>
  
          unsigned size;
<span class="udiff-line-modified-removed">-         GC3Denum error = m_context-&gt;computeImageSizeInBytes(format, type, width, height, m_unpackAlignment, &amp;size, nullptr);</span>
<span class="udiff-line-modified-removed">-         if (error != GraphicsContext3D::NO_ERROR) {</span>
<span class="udiff-line-modified-added">+         GCGLenum error = m_context-&gt;computeImageSizeInBytes(format, type, width, height, m_unpackAlignment, &amp;size, nullptr);</span>
<span class="udiff-line-modified-added">+         if (error != GraphicsContextGL::NO_ERROR) {</span>
              synthesizeGLError(error, &quot;texStorage2D&quot;, &quot;bad dimensions&quot;);
              return;
          }
  
          Vector&lt;char&gt; data(size);
          memset(data.data(), 0, size);
  
<span class="udiff-line-modified-removed">-         for (GC3Dsizei level = 0; level &lt; levels; ++level) {</span>
<span class="udiff-line-modified-removed">-             if (target == GraphicsContext3D::TEXTURE_CUBE_MAP) {</span>
<span class="udiff-line-modified-removed">-                 m_context-&gt;texSubImage2D(GraphicsContext3D::TEXTURE_CUBE_MAP_POSITIVE_X, level, 0, 0, levelWidth, levelHeight, format, type, data.data());</span>
<span class="udiff-line-modified-removed">-                 m_context-&gt;texSubImage2D(GraphicsContext3D::TEXTURE_CUBE_MAP_NEGATIVE_X, level, 0, 0, levelWidth, levelHeight, format, type, data.data());</span>
<span class="udiff-line-modified-removed">-                 m_context-&gt;texSubImage2D(GraphicsContext3D::TEXTURE_CUBE_MAP_POSITIVE_Y, level, 0, 0, levelWidth, levelHeight, format, type, data.data());</span>
<span class="udiff-line-modified-removed">-                 m_context-&gt;texSubImage2D(GraphicsContext3D::TEXTURE_CUBE_MAP_NEGATIVE_Y, level, 0, 0, levelWidth, levelHeight, format, type, data.data());</span>
<span class="udiff-line-modified-removed">-                 m_context-&gt;texSubImage2D(GraphicsContext3D::TEXTURE_CUBE_MAP_POSITIVE_Z, level, 0, 0, levelWidth, levelHeight, format, type, data.data());</span>
<span class="udiff-line-modified-removed">-                 m_context-&gt;texSubImage2D(GraphicsContext3D::TEXTURE_CUBE_MAP_NEGATIVE_Z, level, 0, 0, levelWidth, levelHeight, format, type, data.data());</span>
<span class="udiff-line-modified-added">+         for (GCGLsizei level = 0; level &lt; levels; ++level) {</span>
<span class="udiff-line-modified-added">+             if (target == GraphicsContextGL::TEXTURE_CUBE_MAP) {</span>
<span class="udiff-line-modified-added">+                 m_context-&gt;texSubImage2D(GraphicsContextGL::TEXTURE_CUBE_MAP_POSITIVE_X, level, 0, 0, levelWidth, levelHeight, format, type, data.data());</span>
<span class="udiff-line-modified-added">+                 m_context-&gt;texSubImage2D(GraphicsContextGL::TEXTURE_CUBE_MAP_NEGATIVE_X, level, 0, 0, levelWidth, levelHeight, format, type, data.data());</span>
<span class="udiff-line-modified-added">+                 m_context-&gt;texSubImage2D(GraphicsContextGL::TEXTURE_CUBE_MAP_POSITIVE_Y, level, 0, 0, levelWidth, levelHeight, format, type, data.data());</span>
<span class="udiff-line-modified-added">+                 m_context-&gt;texSubImage2D(GraphicsContextGL::TEXTURE_CUBE_MAP_NEGATIVE_Y, level, 0, 0, levelWidth, levelHeight, format, type, data.data());</span>
<span class="udiff-line-modified-added">+                 m_context-&gt;texSubImage2D(GraphicsContextGL::TEXTURE_CUBE_MAP_POSITIVE_Z, level, 0, 0, levelWidth, levelHeight, format, type, data.data());</span>
<span class="udiff-line-modified-added">+                 m_context-&gt;texSubImage2D(GraphicsContextGL::TEXTURE_CUBE_MAP_NEGATIVE_Z, level, 0, 0, levelWidth, levelHeight, format, type, data.data());</span>
              } else
                  m_context-&gt;texSubImage2D(target, level, 0, 0, levelWidth, levelHeight, format, type, data.data());
              levelWidth = std::max(1, levelWidth / 2);
              levelHeight = std::max(1, levelHeight / 2);
          }
      }
  
<span class="udiff-line-modified-removed">-     for (GC3Dsizei level = 0; level &lt; levels; ++level) {</span>
<span class="udiff-line-modified-removed">-         if (target == GraphicsContext3D::TEXTURE_CUBE_MAP) {</span>
<span class="udiff-line-modified-removed">-             texture-&gt;setLevelInfo(GraphicsContext3D::TEXTURE_CUBE_MAP_POSITIVE_X, level, internalFormat, width, height, GraphicsContext3D::UNSIGNED_BYTE);</span>
<span class="udiff-line-modified-removed">-             texture-&gt;setLevelInfo(GraphicsContext3D::TEXTURE_CUBE_MAP_NEGATIVE_X, level, internalFormat, width, height, GraphicsContext3D::UNSIGNED_BYTE);</span>
<span class="udiff-line-modified-removed">-             texture-&gt;setLevelInfo(GraphicsContext3D::TEXTURE_CUBE_MAP_POSITIVE_Y, level, internalFormat, width, height, GraphicsContext3D::UNSIGNED_BYTE);</span>
<span class="udiff-line-modified-removed">-             texture-&gt;setLevelInfo(GraphicsContext3D::TEXTURE_CUBE_MAP_NEGATIVE_Y, level, internalFormat, width, height, GraphicsContext3D::UNSIGNED_BYTE);</span>
<span class="udiff-line-modified-removed">-             texture-&gt;setLevelInfo(GraphicsContext3D::TEXTURE_CUBE_MAP_POSITIVE_Z, level, internalFormat, width, height, GraphicsContext3D::UNSIGNED_BYTE);</span>
<span class="udiff-line-modified-removed">-             texture-&gt;setLevelInfo(GraphicsContext3D::TEXTURE_CUBE_MAP_NEGATIVE_Z, level, internalFormat, width, height, GraphicsContext3D::UNSIGNED_BYTE);</span>
<span class="udiff-line-modified-added">+     for (GCGLsizei level = 0; level &lt; levels; ++level) {</span>
<span class="udiff-line-modified-added">+         if (target == GraphicsContextGL::TEXTURE_CUBE_MAP) {</span>
<span class="udiff-line-modified-added">+             texture-&gt;setLevelInfo(GraphicsContextGL::TEXTURE_CUBE_MAP_POSITIVE_X, level, internalFormat, width, height, GraphicsContextGL::UNSIGNED_BYTE);</span>
<span class="udiff-line-modified-added">+             texture-&gt;setLevelInfo(GraphicsContextGL::TEXTURE_CUBE_MAP_NEGATIVE_X, level, internalFormat, width, height, GraphicsContextGL::UNSIGNED_BYTE);</span>
<span class="udiff-line-modified-added">+             texture-&gt;setLevelInfo(GraphicsContextGL::TEXTURE_CUBE_MAP_POSITIVE_Y, level, internalFormat, width, height, GraphicsContextGL::UNSIGNED_BYTE);</span>
<span class="udiff-line-modified-added">+             texture-&gt;setLevelInfo(GraphicsContextGL::TEXTURE_CUBE_MAP_NEGATIVE_Y, level, internalFormat, width, height, GraphicsContextGL::UNSIGNED_BYTE);</span>
<span class="udiff-line-modified-added">+             texture-&gt;setLevelInfo(GraphicsContextGL::TEXTURE_CUBE_MAP_POSITIVE_Z, level, internalFormat, width, height, GraphicsContextGL::UNSIGNED_BYTE);</span>
<span class="udiff-line-modified-added">+             texture-&gt;setLevelInfo(GraphicsContextGL::TEXTURE_CUBE_MAP_NEGATIVE_Z, level, internalFormat, width, height, GraphicsContextGL::UNSIGNED_BYTE);</span>
          } else
<span class="udiff-line-modified-removed">-             texture-&gt;setLevelInfo(target, level, internalFormat, width, height, GraphicsContext3D::UNSIGNED_BYTE);</span>
<span class="udiff-line-modified-added">+             texture-&gt;setLevelInfo(target, level, internalFormat, width, height, GraphicsContextGL::UNSIGNED_BYTE);</span>
      }
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texStorage3D(GC3Denum, GC3Dsizei, GC3Denum, GC3Dsizei, GC3Dsizei, GC3Dsizei)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::texStorage3D(GCGLenum, GCGLsizei, GCGLenum, GCGLsizei, GCGLsizei, GCGLsizei)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texStorage3D()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texImage2D(GC3Denum, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Dint, GC3Denum, GC3Denum, GC3Dint64)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::texImage2D(GCGLenum, GCGLint, GCGLint, GCGLsizei, GCGLsizei, GCGLint, GCGLenum, GCGLenum, GCGLintptr)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texImage2D()&quot;);</span>
<span class="udiff-line-modified-added">+     // Covered by textures/misc/tex-unpack-params.html.</span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texImage2D(PIXEL_UNPACK_BUFFER)&quot;);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texImage2D(GC3Denum, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Dint, GC3Denum, GC3Denum, TexImageSource&amp;&amp;)</span>
<span class="udiff-line-modified-added">+ ExceptionOr&lt;void&gt; WebGL2RenderingContext::texImage2D(GCGLenum, GCGLint, GCGLint, GCGLsizei, GCGLsizei, GCGLint, GCGLenum, GCGLenum, TexImageSource&amp;&amp;)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texImage2D()&quot;);</span>
<span class="udiff-line-modified-added">+     // Covered by textures/misc/origin-clean-conformance-offscreencanvas.html?</span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texImage2D(TexImageSource)&quot;);</span>
<span class="udiff-line-added">+     return { };</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texImage2D(GC3Denum, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Dint, GC3Denum, GC3Denum, RefPtr&lt;ArrayBufferView&gt;&amp;&amp;, GC3Duint)</span>
<span class="udiff-line-modified-added">+ RefPtr&lt;ArrayBufferView&gt; WebGL2RenderingContext::sliceTypedArrayBufferView(const char* const functionName, RefPtr&lt;ArrayBufferView&gt;&amp; srcData, GCGLuint srcOffset)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texImage2D()&quot;);</span>
<span class="udiff-line-modified-removed">- }</span>
<span class="udiff-line-modified-added">+     if (!srcData)</span>
<span class="udiff-line-modified-added">+         return nullptr;</span>
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texImage3D(GC3Denum, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Dsizei, GC3Dint, GC3Denum, GC3Denum, GC3Dint64)</span>
<span class="udiff-line-modified-removed">- {</span>
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texImage3D()&quot;);</span>
<span class="udiff-line-modified-added">+     if (!isTypedView(srcData-&gt;getType())) {</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, functionName, &quot;Invalid type of ArrayBufferView&quot;);</span>
<span class="udiff-line-modified-added">+         return nullptr;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     auto elementSize = JSC::elementSize(srcData-&gt;getType());</span>
<span class="udiff-line-added">+     auto startingByte = WTF::checkedProduct&lt;unsigned&gt;(elementSize, srcOffset);</span>
<span class="udiff-line-added">+     if (startingByte.hasOverflowed() || startingByte &gt;= srcData-&gt;byteLength()) {</span>
<span class="udiff-line-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, functionName, &quot;Invalid element offset!&quot;);</span>
<span class="udiff-line-added">+         return nullptr;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     auto numElements = (srcData-&gt;byteLength() - startingByte.unsafeGet()) / elementSize;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     return arrayBufferViewSliceFactory(functionName, *srcData, startingByte.unsafeGet(), numElements);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texImage3D(GC3Denum, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Dsizei, GC3Dint, GC3Denum, GC3Denum, TexImageSource&amp;&amp;)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::texImage2D(GCGLenum target, GCGLint level, GCGLint internalFormat, GCGLsizei width, GCGLsizei height, GCGLint border, GCGLenum format, GCGLenum type, RefPtr&lt;ArrayBufferView&gt;&amp;&amp; srcData, GCGLuint srcOffset)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texImage3D()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     auto slicedData = sliceTypedArrayBufferView(&quot;texImage2D&quot;, srcData, srcOffset);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     WebGLRenderingContextBase::texImage2D(target, level, internalFormat, width, height, border, format, type, WTFMove(slicedData));</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texImage3D(GC3Denum, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Dsizei, GC3Dint, GC3Denum, GC3Denum, RefPtr&lt;ArrayBufferView&gt;&amp;&amp;)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::texImage3D(GCGLenum, GCGLint, GCGLint, GCGLsizei, GCGLsizei, GCGLsizei, GCGLint, GCGLenum, GCGLenum, GCGLint64)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texImage3D()&quot;);</span>
<span class="udiff-line-modified-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texImage3D(PIXEL_UNPACK_BUFFER)&quot;);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texImage3D(GC3Denum, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Dsizei, GC3Dint, GC3Denum, GC3Denum, RefPtr&lt;ArrayBufferView&gt;&amp;&amp;, GC3Duint)</span>
<span class="udiff-line-modified-added">+ ExceptionOr&lt;void&gt; WebGL2RenderingContext::texImage3D(GCGLenum, GCGLint, GCGLint, GCGLsizei, GCGLsizei, GCGLsizei, GCGLint, GCGLenum, GCGLenum, TexImageSource&amp;&amp;)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texImage3D()&quot;);</span>
<span class="udiff-line-modified-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texImage3D(TexImageSource)&quot;);</span>
<span class="udiff-line-added">+     return { };</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texSubImage2D(GC3Denum, GC3Dint, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Denum, GC3Denum, GC3Dint64)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::texImage3D(GCGLenum, GCGLint, GCGLint, GCGLsizei, GCGLsizei, GCGLsizei, GCGLint, GCGLenum, GCGLenum, RefPtr&lt;ArrayBufferView&gt;&amp;&amp;)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texSubImage2D()&quot;);</span>
<span class="udiff-line-modified-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texImage3D(ArrayBufferView?)&quot;);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texSubImage2D(GC3Denum, GC3Dint, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Denum, GC3Denum, TexImageSource&amp;&amp;)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::texImage3D(GCGLenum, GCGLint, GCGLint, GCGLsizei, GCGLsizei, GCGLsizei, GCGLint, GCGLenum, GCGLenum, RefPtr&lt;ArrayBufferView&gt;&amp;&amp;, GCGLuint)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texSubImage2D()&quot;);</span>
<span class="udiff-line-modified-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texImage3D(ArrayBufferView, srcOffset)&quot;);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texSubImage2D(GC3Denum, GC3Dint, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Denum, GC3Denum, RefPtr&lt;ArrayBufferView&gt;&amp;&amp;, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::texSubImage2D(GCGLenum, GCGLint, GCGLint, GCGLint, GCGLsizei, GCGLsizei, GCGLenum, GCGLenum, GCGLintptr)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texSubImage2D()&quot;);</span>
<span class="udiff-line-modified-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texSubImage2D(PIXEL_UNPACK_BUFFER)&quot;);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texSubImage3D(GC3Denum, GC3Dint, GC3Dint, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Dsizei, GC3Denum, GC3Denum, GC3Dint64)</span>
<span class="udiff-line-modified-added">+ ExceptionOr&lt;void&gt; WebGL2RenderingContext::texSubImage2D(GCGLenum, GCGLint, GCGLint, GCGLint, GCGLsizei, GCGLsizei, GCGLenum, GCGLenum, TexImageSource&amp;&amp;)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texSubImage3D()&quot;);</span>
<span class="udiff-line-modified-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texSubImage2D(TexImageSource)&quot;);</span>
<span class="udiff-line-added">+     return { };</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texSubImage3D(GC3Denum, GC3Dint, GC3Dint, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Dsizei, GC3Denum, GC3Denum, RefPtr&lt;ArrayBufferView&gt;&amp;&amp;, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::texSubImage2D(GCGLenum target, GCGLint level, GCGLint xoffset, GCGLint yoffset, GCGLsizei width, GCGLsizei height, GCGLenum format, GCGLenum type, RefPtr&lt;ArrayBufferView&gt;&amp;&amp; srcData, GCGLuint srcOffset)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texSubImage3D()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     auto slicedData = sliceTypedArrayBufferView(&quot;texSubImage2D&quot;, srcData, srcOffset);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     WebGLRenderingContextBase::texSubImage2D(target, level, xoffset, yoffset, width, height, format, type, WTFMove(slicedData));</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::texSubImage3D(GC3Denum, GC3Dint, GC3Dint, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Dsizei, GC3Denum, GC3Denum, TexImageSource&amp;&amp;)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::texSubImage3D(GCGLenum, GCGLint, GCGLint, GCGLint, GCGLint, GCGLsizei, GCGLsizei, GCGLsizei, GCGLenum, GCGLenum, GCGLint64)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texSubImage3D()&quot;);</span>
<span class="udiff-line-modified-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texSubImage3D(PIXEL_UNPACK_BUFFER)&quot;);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::copyTexSubImage3D(GC3Denum, GC3Dint, GC3Dint, GC3Dint, GC3Dint, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::texSubImage3D(GCGLenum, GCGLint, GCGLint, GCGLint, GCGLint, GCGLsizei, GCGLsizei, GCGLsizei, GCGLenum, GCGLenum, RefPtr&lt;ArrayBufferView&gt;&amp;&amp;, GCGLuint)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] copyTexSubImage3D()&quot;);</span>
<span class="udiff-line-modified-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texSubImage3D(ArrayBufferView, srcOffset)&quot;);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::compressedTexImage2D(GC3Denum, GC3Dint, GC3Denum, GC3Dsizei, GC3Dsizei, GC3Dint, GC3Dsizei, GC3Dint64)</span>
<span class="udiff-line-modified-added">+ ExceptionOr&lt;void&gt; WebGL2RenderingContext::texSubImage3D(GCGLenum, GCGLint, GCGLint, GCGLint, GCGLint, GCGLsizei, GCGLsizei, GCGLsizei, GCGLenum, GCGLenum, TexImageSource&amp;&amp;)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] compressedTexImage2D()&quot;);</span>
<span class="udiff-line-modified-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] texSubImage3D(TexImageSource)&quot;);</span>
<span class="udiff-line-added">+     return { };</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::compressedTexImage2D(GC3Denum, GC3Dint, GC3Denum, GC3Dsizei, GC3Dsizei, GC3Dint, ArrayBufferView&amp;, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::copyTexSubImage3D(GCGLenum, GCGLint, GCGLint, GCGLint, GCGLint, GCGLint, GCGLint, GCGLsizei, GCGLsizei)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] compressedTexImage2D()&quot;);</span>
<span class="udiff-line-modified-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] copyTexSubImage3D()&quot;);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::compressedTexImage3D(GC3Denum, GC3Dint, GC3Denum, GC3Dsizei, GC3Dsizei, GC3Dsizei, GC3Dint, GC3Dsizei, GC3Dint64)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::compressedTexImage3D(GCGLenum, GCGLint, GCGLenum, GCGLsizei, GCGLsizei, GCGLsizei, GCGLint, GCGLsizei, GCGLint64)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] compressedTexImage3D()&quot;);</span>
<span class="udiff-line-modified-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] compressedTexImage3D(PIXEL_UNPACK_BUFFER)&quot;);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::compressedTexImage3D(GC3Denum, GC3Dint, GC3Denum, GC3Dsizei, GC3Dsizei, GC3Dsizei, GC3Dint, ArrayBufferView&amp;, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::compressedTexImage3D(GCGLenum, GCGLint, GCGLenum, GCGLsizei, GCGLsizei, GCGLsizei, GCGLint, ArrayBufferView&amp;, GCGLuint, GCGLuint)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] compressedTexImage3D()&quot;);</span>
<span class="udiff-line-modified-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] compressedTexImage3D(ArrayBufferView)&quot;);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::compressedTexSubImage3D(GC3Denum, GC3Dint, GC3Dint, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Dsizei, GC3Denum, GC3Dsizei, GC3Dint64)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::compressedTexSubImage3D(GCGLenum, GCGLint, GCGLint, GCGLint, GCGLint, GCGLsizei, GCGLsizei, GCGLsizei, GCGLenum, GCGLsizei, GCGLint64)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] compressedTexSubImage3D()&quot;);</span>
<span class="udiff-line-modified-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] compressedTexSubImage3D(PIXEL_UNPACK_BUFFER)&quot;);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::compressedTexSubImage3D(GC3Denum, GC3Dint, GC3Dint, GC3Dint, GC3Dint, GC3Dsizei, GC3Dsizei, GC3Dsizei, GC3Denum, ArrayBufferView&amp;, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::compressedTexSubImage3D(GCGLenum, GCGLint, GCGLint, GCGLint, GCGLint, GCGLsizei, GCGLsizei, GCGLsizei, GCGLenum, ArrayBufferView&amp;, GCGLuint, GCGLuint)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] compressedTexSubImage3D()&quot;);</span>
<span class="udiff-line-modified-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] compressedTexSubImage3D(ArrayBufferView)&quot;);</span>
  }
  
<span class="udiff-line-modified-removed">- GC3Dint WebGL2RenderingContext::getFragDataLocation(WebGLProgram&amp;, const String&amp;)</span>
<span class="udiff-line-modified-added">+ GCGLint WebGL2RenderingContext::getFragDataLocation(WebGLProgram&amp;, const String&amp;)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] getFragDataLocation()&quot;);
      return 0;
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniform1ui(WebGLUniformLocation*, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniform1ui(WebGLUniformLocation*, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform1ui()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniform2ui(WebGLUniformLocation*, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniform2ui(WebGLUniformLocation*, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform2ui()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniform3ui(WebGLUniformLocation*, GC3Duint, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniform3ui(WebGLUniformLocation*, GCGLuint, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform3ui()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniform4ui(WebGLUniformLocation*, GC3Duint, GC3Duint, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniform4ui(WebGLUniformLocation*, GCGLuint, GCGLuint, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform4ui()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniform1uiv(WebGLUniformLocation*, Uint32List&amp;&amp;, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniform1uiv(WebGLUniformLocation*, Uint32List&amp;&amp;, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform1uiv()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniform2uiv(WebGLUniformLocation*, Uint32List&amp;&amp;, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniform2uiv(WebGLUniformLocation*, Uint32List&amp;&amp;, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform2uiv()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniform3uiv(WebGLUniformLocation*, Uint32List&amp;&amp;, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniform3uiv(WebGLUniformLocation*, Uint32List&amp;&amp;, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform3uiv()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniform4uiv(WebGLUniformLocation*, Uint32List&amp;&amp;, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniform4uiv(WebGLUniformLocation*, Uint32List&amp;&amp;, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform4uiv()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniformMatrix2x3fv(WebGLUniformLocation*, GC3Dboolean, Float32List&amp;&amp;, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniformMatrix2x3fv(WebGLUniformLocation*, GCGLboolean, Float32List&amp;&amp;, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniformMatrix2x3fv()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniformMatrix3x2fv(WebGLUniformLocation*, GC3Dboolean, Float32List&amp;&amp;, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniformMatrix3x2fv(WebGLUniformLocation*, GCGLboolean, Float32List&amp;&amp;, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniformMatrix3x2fv()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniformMatrix2x4fv(WebGLUniformLocation*, GC3Dboolean, Float32List&amp;&amp;, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniformMatrix2x4fv(WebGLUniformLocation*, GCGLboolean, Float32List&amp;&amp;, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniformMatrix2x4fv()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniformMatrix4x2fv(WebGLUniformLocation*, GC3Dboolean, Float32List&amp;&amp;, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniformMatrix4x2fv(WebGLUniformLocation*, GCGLboolean, Float32List&amp;&amp;, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniformMatrix4x2fv()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniformMatrix3x4fv(WebGLUniformLocation*, GC3Dboolean, Float32List&amp;&amp;, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniformMatrix3x4fv(WebGLUniformLocation*, GCGLboolean, Float32List&amp;&amp;, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniformMatrix3x4fv()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniformMatrix4x3fv(WebGLUniformLocation*, GC3Dboolean, Float32List&amp;&amp;, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniformMatrix4x3fv(WebGLUniformLocation*, GCGLboolean, Float32List&amp;&amp;, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniformMatrix4x3fv()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::vertexAttribI4i(GC3Duint, GC3Dint, GC3Dint, GC3Dint, GC3Dint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::vertexAttribI4i(GCGLuint, GCGLint, GCGLint, GCGLint, GCGLint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] vertexAttribI4i()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::vertexAttribI4iv(GC3Duint, Int32List&amp;&amp;)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::vertexAttribI4iv(GCGLuint, Int32List&amp;&amp;)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] vertexAttribI4iv()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::vertexAttribI4ui(GC3Duint, GC3Duint, GC3Duint, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::vertexAttribI4ui(GCGLuint, GCGLuint, GCGLuint, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] vertexAttribI4ui()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::vertexAttribI4uiv(GC3Duint, Uint32List&amp;&amp;)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::vertexAttribI4uiv(GCGLuint, Uint32List&amp;&amp;)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] vertexAttribI4uiv()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::vertexAttribIPointer(GC3Duint, GC3Dint, GC3Denum, GC3Dsizei, GC3Dint64)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::vertexAttribIPointer(GCGLuint index, GCGLint size, GCGLenum type, GCGLsizei stride, GCGLint64 offset)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] vertexAttribIPointer()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     m_context-&gt;vertexAttribIPointer(index, size, type, stride, offset);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::clear(GC3Dbitfield mask)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::clear(GCGLbitfield mask)</span>
  {
      if (isContextLostOrPending())
          return;
<span class="udiff-line-modified-removed">-     if (mask &amp; ~(GraphicsContext3D::COLOR_BUFFER_BIT | GraphicsContext3D::DEPTH_BUFFER_BIT | GraphicsContext3D::STENCIL_BUFFER_BIT)) {</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;clear&quot;, &quot;invalid mask&quot;);</span>
<span class="udiff-line-modified-added">+     if (mask &amp; ~(GraphicsContextGL::COLOR_BUFFER_BIT | GraphicsContextGL::DEPTH_BUFFER_BIT | GraphicsContextGL::STENCIL_BUFFER_BIT)) {</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;clear&quot;, &quot;invalid mask&quot;);</span>
          return;
      }
<span class="udiff-line-modified-removed">-     if (m_framebufferBinding &amp;&amp; (mask &amp; GraphicsContext3D::COLOR_BUFFER_BIT) &amp;&amp; isIntegerFormat(m_framebufferBinding-&gt;getColorBufferFormat())) {</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;clear&quot;, &quot;cannot clear an integer buffer&quot;);</span>
<span class="udiff-line-modified-added">+     const char* reason = &quot;framebuffer incomplete&quot;;</span>
<span class="udiff-line-modified-added">+     if (m_framebufferBinding &amp;&amp; !m_framebufferBinding-&gt;onAccess(graphicsContextGL(), &amp;reason)) {</span>
<span class="udiff-line-added">+         synthesizeGLError(GraphicsContextGL::INVALID_FRAMEBUFFER_OPERATION, &quot;clear&quot;, reason);</span>
          return;
      }
<span class="udiff-line-modified-removed">-     const char* reason = &quot;framebuffer incomplete&quot;;</span>
<span class="udiff-line-modified-removed">-     if (m_framebufferBinding &amp;&amp; !m_framebufferBinding-&gt;onAccess(graphicsContext3D(), &amp;reason)) {</span>
<span class="udiff-line-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_FRAMEBUFFER_OPERATION, &quot;clear&quot;, reason);</span>
<span class="udiff-line-modified-added">+     if (m_framebufferBinding &amp;&amp; (mask &amp; GraphicsContextGL::COLOR_BUFFER_BIT) &amp;&amp; isIntegerFormat(m_framebufferBinding-&gt;getColorBufferFormat())) {</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;clear&quot;, &quot;cannot clear an integer buffer&quot;);</span>
          return;
      }
      if (!clearIfComposited(mask))
          m_context-&gt;clear(mask);
      markContextChangedAndNotifyCanvasObserver();
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::vertexAttribDivisor(GC3Duint index, GC3Duint divisor)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::vertexAttribDivisor(GCGLuint index, GCGLuint divisor)</span>
  {
      if (isContextLostOrPending())
          return;
  
      WebGLRenderingContextBase::vertexAttribDivisor(index, divisor);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::drawArraysInstanced(GC3Denum mode, GC3Dint first, GC3Dsizei count, GC3Dsizei instanceCount)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::drawArraysInstanced(GCGLenum mode, GCGLint first, GCGLsizei count, GCGLsizei instanceCount)</span>
  {
      if (isContextLostOrPending())
          return;
  
      WebGLRenderingContextBase::drawArraysInstanced(mode, first, count, instanceCount);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::drawElementsInstanced(GC3Denum mode, GC3Dsizei count, GC3Denum type, GC3Dint64 offset, GC3Dsizei instanceCount)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::drawElementsInstanced(GCGLenum mode, GCGLsizei count, GCGLenum type, GCGLint64 offset, GCGLsizei instanceCount)</span>
  {
      if (isContextLostOrPending())
          return;
  
      WebGLRenderingContextBase::drawElementsInstanced(mode, count, type, offset, instanceCount);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::drawRangeElements(GC3Denum, GC3Duint, GC3Duint, GC3Dsizei, GC3Denum, GC3Dint64)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::drawRangeElements(GCGLenum, GCGLuint, GCGLuint, GCGLsizei, GCGLenum, GCGLint64)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] drawRangeElements()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::drawBuffers(const Vector&lt;GC3Denum&gt;&amp; buffers)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::drawBuffers(const Vector&lt;GCGLenum&gt;&amp; buffers)</span>
  {
      if (isContextLost())
          return;
<span class="udiff-line-modified-removed">-     GC3Dsizei n = buffers.size();</span>
<span class="udiff-line-modified-removed">-     const GC3Denum* bufs = buffers.data();</span>
<span class="udiff-line-modified-added">+     GCGLsizei n = buffers.size();</span>
<span class="udiff-line-modified-added">+     const GCGLenum* bufs = buffers.data();</span>
      if (!m_framebufferBinding) {
          if (n != 1) {
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;drawBuffers&quot;, &quot;more than one buffer&quot;);</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;drawBuffers&quot;, &quot;more than one buffer&quot;);</span>
              return;
          }
<span class="udiff-line-modified-removed">-         if (bufs[0] != GraphicsContext3D::BACK &amp;&amp; bufs[0] != GraphicsContext3D::NONE) {</span>
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;drawBuffers&quot;, &quot;BACK or NONE&quot;);</span>
<span class="udiff-line-modified-added">+         if (bufs[0] != GraphicsContextGL::BACK &amp;&amp; bufs[0] != GraphicsContextGL::NONE) {</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;drawBuffers&quot;, &quot;BACK or NONE&quot;);</span>
              return;
          }
          // Because the backbuffer is simulated on all current WebKit ports, we need to change BACK to COLOR_ATTACHMENT0.
<span class="udiff-line-modified-removed">-         GC3Denum value = (bufs[0] == GraphicsContext3D::BACK) ? GraphicsContext3D::COLOR_ATTACHMENT0 : GraphicsContext3D::NONE;</span>
<span class="udiff-line-modified-removed">-         graphicsContext3D()-&gt;getExtensions().drawBuffersEXT(1, &amp;value);</span>
<span class="udiff-line-modified-added">+         GCGLenum value = (bufs[0] == GraphicsContextGL::BACK) ? GraphicsContextGL::COLOR_ATTACHMENT0 : GraphicsContextGL::NONE;</span>
<span class="udiff-line-modified-added">+         graphicsContextGL()-&gt;getExtensions().drawBuffersEXT(1, &amp;value);</span>
          setBackDrawBuffer(bufs[0]);
      } else {
          if (n &gt; getMaxDrawBuffers()) {
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;drawBuffers&quot;, &quot;more than max draw buffers&quot;);</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;drawBuffers&quot;, &quot;more than max draw buffers&quot;);</span>
              return;
          }
<span class="udiff-line-modified-removed">-         for (GC3Dsizei i = 0; i &lt; n; ++i) {</span>
<span class="udiff-line-modified-removed">-             if (bufs[i] != GraphicsContext3D::NONE &amp;&amp; bufs[i] != static_cast&lt;GC3Denum&gt;(GraphicsContext3D::COLOR_ATTACHMENT0 + i)) {</span>
<span class="udiff-line-modified-removed">-                 synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;drawBuffers&quot;, &quot;COLOR_ATTACHMENTi or NONE&quot;);</span>
<span class="udiff-line-modified-added">+         for (GCGLsizei i = 0; i &lt; n; ++i) {</span>
<span class="udiff-line-modified-added">+             if (bufs[i] != GraphicsContextGL::NONE &amp;&amp; bufs[i] != static_cast&lt;GCGLenum&gt;(GraphicsContextGL::COLOR_ATTACHMENT0 + i)) {</span>
<span class="udiff-line-modified-added">+                 synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;drawBuffers&quot;, &quot;COLOR_ATTACHMENTi or NONE&quot;);</span>
                  return;
              }
          }
          m_framebufferBinding-&gt;drawBuffers(buffers);
      }
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::clearBufferiv(GC3Denum buffer, GC3Dint drawbuffer, Int32List&amp;&amp;, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::clearBufferiv(GCGLenum buffer, GCGLint drawbuffer, Int32List&amp;&amp;, GCGLuint)</span>
  {
      switch (buffer) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COLOR:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COLOR:</span>
          if (drawbuffer &lt; 0 || drawbuffer &gt;= getMaxDrawBuffers()) {
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;clearBufferiv&quot;, &quot;buffer index out of range&quot;);</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;clearBufferiv&quot;, &quot;buffer index out of range&quot;);</span>
              return;
          }
          // TODO: Call clearBufferiv, requires gl3.h and ES3/gl.h
          break;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL:</span>
          if (drawbuffer) {
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;clearBufferiv&quot;, &quot;buffer index must be 0&quot;);</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;clearBufferiv&quot;, &quot;buffer index must be 0&quot;);</span>
              return;
          }
          // TODO: Call clearBufferiv, requires gl3.h and ES3/gl.h
          break;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_STENCIL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_STENCIL:</span>
      default:
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;clearBufferiv&quot;, &quot;buffer argument must be COLOR or STENCIL&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;clearBufferiv&quot;, &quot;buffer argument must be COLOR or STENCIL&quot;);</span>
          break;
      }
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::clearBufferuiv(GC3Denum buffer, GC3Dint drawbuffer, Uint32List&amp;&amp;, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::clearBufferuiv(GCGLenum buffer, GCGLint drawbuffer, Uint32List&amp;&amp;, GCGLuint)</span>
  {
      switch (buffer) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COLOR:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COLOR:</span>
          if (drawbuffer &lt; 0 || drawbuffer &gt;= getMaxDrawBuffers()) {
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;clearBufferuiv&quot;, &quot;buffer index out of range&quot;);</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;clearBufferuiv&quot;, &quot;buffer index out of range&quot;);</span>
              return;
          }
          // TODO: Call clearBufferuiv, requires gl3.h and ES3/gl.h
          break;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_STENCIL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_STENCIL:</span>
      default:
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;clearBufferuiv&quot;, &quot;buffer argument must be COLOR&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;clearBufferuiv&quot;, &quot;buffer argument must be COLOR&quot;);</span>
          break;
      }
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::clearBufferfv(GC3Denum buffer, GC3Dint drawbuffer, Float32List&amp;&amp;, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::clearBufferfv(GCGLenum buffer, GCGLint drawbuffer, Float32List&amp;&amp;, GCGLuint)</span>
  {
      switch (buffer) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COLOR:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COLOR:</span>
          if (drawbuffer &lt; 0 || drawbuffer &gt;= getMaxDrawBuffers()) {
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;clearBufferfv&quot;, &quot;buffer index out of range&quot;);</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;clearBufferfv&quot;, &quot;buffer index out of range&quot;);</span>
              return;
          }
          // TODO: Call clearBufferfv, requires gl3.h and ES3/gl.h
          break;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH:</span>
          if (drawbuffer) {
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;clearBufferfv&quot;, &quot;buffer index must be 0&quot;);</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;clearBufferfv&quot;, &quot;buffer index must be 0&quot;);</span>
              return;
          }
          // TODO: Call clearBufferfv, requires gl3.h and ES3/gl.h
          break;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_STENCIL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_STENCIL:</span>
      default:
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;clearBufferfv&quot;, &quot;buffer argument must be COLOR OR DEPTH&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;clearBufferfv&quot;, &quot;buffer argument must be COLOR OR DEPTH&quot;);</span>
          break;
      }
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::clearBufferfi(GC3Denum buffer, GC3Dint drawbuffer, GC3Dfloat, GC3Dint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::clearBufferfi(GCGLenum buffer, GCGLint drawbuffer, GCGLfloat, GCGLint)</span>
  {
      switch (buffer) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_STENCIL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_STENCIL:</span>
          if (drawbuffer) {
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_VALUE, &quot;clearBufferfv&quot;, &quot;buffer index must be 0&quot;);</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;clearBufferfv&quot;, &quot;buffer index must be 0&quot;);</span>
              return;
          }
          // TODO: Call clearBufferfi, requires gl3.h and ES3/gl.h
          break;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COLOR:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COLOR:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL:</span>
      default:
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;clearBufferfv&quot;, &quot;buffer argument must be DEPTH_STENCIL&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;clearBufferfv&quot;, &quot;buffer argument must be DEPTH_STENCIL&quot;);</span>
          break;
      }
  }
  
  RefPtr&lt;WebGLQuery&gt; WebGL2RenderingContext::createQuery()
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] createQuery()&quot;);</span>
<span class="udiff-line-modified-removed">-     return nullptr;</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-modified-added">+         return nullptr;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     auto query = WebGLQuery::create(*this);</span>
<span class="udiff-line-added">+     addSharedObject(query.get());</span>
<span class="udiff-line-added">+     return query;</span>
  }
  
  void WebGL2RenderingContext::deleteQuery(WebGLQuery*)
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] deleteQuery()&quot;);
  }
  
<span class="udiff-line-modified-removed">- GC3Dboolean WebGL2RenderingContext::isQuery(WebGLQuery*)</span>
<span class="udiff-line-modified-added">+ GCGLboolean WebGL2RenderingContext::isQuery(WebGLQuery*)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] isQuery()&quot;);
      return false;
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::beginQuery(GC3Denum, WebGLQuery&amp;)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::beginQuery(GCGLenum target, WebGLQuery&amp; query)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] beginQuery()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     // FIXME: Add validation to prevent bad caching.</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     // Only one query object can be active per target.</span>
<span class="udiff-line-added">+     auto targetKey = (target == GraphicsContextGL::ANY_SAMPLES_PASSED_CONSERVATIVE) ? GraphicsContextGL::ANY_SAMPLES_PASSED : target;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     auto addResult = m_activeQueries.add(targetKey, makeRefPtr(&amp;query));</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (!addResult.isNewEntry) {</span>
<span class="udiff-line-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;beginQuery&quot;, &quot;Query object of target is already active&quot;);</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     m_context-&gt;beginQuery(target, query.object());</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::endQuery(GC3Denum)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::endQuery(GCGLenum target)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] endQuery()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending() || !scriptExecutionContext())</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     auto targetKey = (target == GraphicsContextGL::ANY_SAMPLES_PASSED_CONSERVATIVE) ? GraphicsContextGL::ANY_SAMPLES_PASSED : target;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     auto query = m_activeQueries.take(targetKey);</span>
<span class="udiff-line-added">+     if (!query) {</span>
<span class="udiff-line-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;endQuery&quot;, &quot;Query object of target is not active&quot;);</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     m_context-&gt;endQuery(target);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     // A query&#39;s result must not be made available until control has returned to the user agent&#39;s main loop.</span>
<span class="udiff-line-added">+     scriptExecutionContext()-&gt;eventLoop().queueMicrotask([query] {</span>
<span class="udiff-line-added">+         query-&gt;makeResultAvailable();</span>
<span class="udiff-line-added">+     });</span>
  }
  
<span class="udiff-line-modified-removed">- RefPtr&lt;WebGLQuery&gt; WebGL2RenderingContext::getQuery(GC3Denum, GC3Denum)</span>
<span class="udiff-line-modified-added">+ RefPtr&lt;WebGLQuery&gt; WebGL2RenderingContext::getQuery(GCGLenum, GCGLenum)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] getquery()&quot;);
      return nullptr;
  }
  
<span class="udiff-line-modified-removed">- WebGLAny WebGL2RenderingContext::getQueryParameter(WebGLQuery&amp;, GC3Denum)</span>
<span class="udiff-line-modified-added">+ WebGLAny WebGL2RenderingContext::getQueryParameter(WebGLQuery&amp; query, GCGLenum pname)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] getQueryParameter)&quot;);</span>
<span class="udiff-line-modified-removed">-     return nullptr;</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-modified-added">+         return nullptr;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     switch (pname) {</span>
<span class="udiff-line-added">+     case GraphicsContextGL::QUERY_RESULT:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::QUERY_RESULT_AVAILABLE:</span>
<span class="udiff-line-added">+         if (!query.isResultAvailable())</span>
<span class="udiff-line-added">+             return 0;</span>
<span class="udiff-line-added">+         break;</span>
<span class="udiff-line-added">+     default:</span>
<span class="udiff-line-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;getQueryParameter&quot;, &quot;Invalid pname&quot;);</span>
<span class="udiff-line-added">+         return nullptr;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     unsigned result = 0;</span>
<span class="udiff-line-added">+     m_context-&gt;getQueryObjectuiv(query.object(), pname, &amp;result);</span>
<span class="udiff-line-added">+     return result;</span>
  }
  
  RefPtr&lt;WebGLSampler&gt; WebGL2RenderingContext::createSampler()
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] createSampler()&quot;);</span>
<span class="udiff-line-modified-removed">-     return nullptr;</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-modified-added">+         return nullptr;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     auto sampler = WebGLSampler::create(*this);</span>
<span class="udiff-line-added">+     addSharedObject(sampler.get());</span>
<span class="udiff-line-added">+     return sampler;</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::deleteSampler(WebGLSampler*)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::deleteSampler(WebGLSampler* sampler)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] deleteSampler()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     // One sampler can be bound to multiple texture units.</span>
<span class="udiff-line-added">+     if (sampler) {</span>
<span class="udiff-line-added">+         for (auto&amp; samplerSlot : m_boundSamplers) {</span>
<span class="udiff-line-added">+             if (samplerSlot == sampler)</span>
<span class="udiff-line-added">+                 samplerSlot = nullptr;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     deleteObject(sampler);</span>
  }
  
<span class="udiff-line-modified-removed">- GC3Dboolean WebGL2RenderingContext::isSampler(WebGLSampler*)</span>
<span class="udiff-line-modified-added">+ GCGLboolean WebGL2RenderingContext::isSampler(WebGLSampler* sampler)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] isSampler()&quot;);</span>
<span class="udiff-line-modified-removed">-     return false;</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending() || !sampler || sampler-&gt;isDeleted() || !validateWebGLObject(&quot;isSampler&quot;, sampler))</span>
<span class="udiff-line-modified-added">+         return false;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     return m_context-&gt;isSampler(sampler-&gt;object());</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::bindSampler(GC3Duint, WebGLSampler*)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::bindSampler(GCGLuint unit, WebGLSampler* sampler)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] bindSampler()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending() || m_boundSamplers[unit] == sampler)</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (sampler &amp;&amp; sampler-&gt;isDeleted()) {</span>
<span class="udiff-line-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;bindSampler&quot;, &quot;cannot bind a deleted Sampler object&quot;);</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     m_context-&gt;bindSampler(unit, objectOrZero(sampler));</span>
<span class="udiff-line-added">+     m_boundSamplers[unit] = sampler;</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::samplerParameteri(WebGLSampler&amp;, GC3Denum, GC3Dint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::samplerParameteri(WebGLSampler&amp; sampler, GCGLenum pname, GCGLint value)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] samplerParameteri()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     m_context-&gt;samplerParameteri(sampler.object(), pname, value);</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::samplerParameterf(WebGLSampler&amp;, GC3Denum, GC3Dfloat)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::samplerParameterf(WebGLSampler&amp; sampler, GCGLenum pname, GCGLfloat value)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] samplerParameterf()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     m_context-&gt;samplerParameterf(sampler.object(), pname, value);</span>
  }
  
<span class="udiff-line-modified-removed">- WebGLAny WebGL2RenderingContext::getSamplerParameter(WebGLSampler&amp;, GC3Denum)</span>
<span class="udiff-line-modified-added">+ WebGLAny WebGL2RenderingContext::getSamplerParameter(WebGLSampler&amp; sampler, GCGLenum pname)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] getSamplerParameter()&quot;);</span>
<span class="udiff-line-modified-removed">-     return nullptr;</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-modified-added">+         return nullptr;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     switch (pname) {</span>
<span class="udiff-line-added">+     case GraphicsContextGL::TEXTURE_COMPARE_FUNC:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::TEXTURE_COMPARE_MODE:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::TEXTURE_MAG_FILTER:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::TEXTURE_MIN_FILTER:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::TEXTURE_WRAP_R:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::TEXTURE_WRAP_S:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::TEXTURE_WRAP_T: {</span>
<span class="udiff-line-added">+         int value = 0;</span>
<span class="udiff-line-added">+         m_context-&gt;getSamplerParameteriv(sampler.object(), pname, &amp;value);</span>
<span class="udiff-line-added">+         return value;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+     case GraphicsContextGL::TEXTURE_MAX_LOD:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::TEXTURE_MIN_LOD: {</span>
<span class="udiff-line-added">+         float value = 0;</span>
<span class="udiff-line-added">+         m_context-&gt;getSamplerParameterfv(sampler.object(), pname, &amp;value);</span>
<span class="udiff-line-added">+         return value;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+     default:</span>
<span class="udiff-line-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;getSamplerParameter&quot;, &quot;Invalid pname&quot;);</span>
<span class="udiff-line-added">+         return nullptr;</span>
<span class="udiff-line-added">+     }</span>
  }
  
<span class="udiff-line-modified-removed">- RefPtr&lt;WebGLSync&gt; WebGL2RenderingContext::fenceSync(GC3Denum, GC3Dbitfield)</span>
<span class="udiff-line-modified-added">+ RefPtr&lt;WebGLSync&gt; WebGL2RenderingContext::fenceSync(GCGLenum, GCGLbitfield)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] fenceSync()&quot;);
      return nullptr;
  }
  
<span class="udiff-line-modified-removed">- GC3Dboolean WebGL2RenderingContext::isSync(WebGLSync*)</span>
<span class="udiff-line-modified-added">+ GCGLboolean WebGL2RenderingContext::isSync(WebGLSync*)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] isSync()&quot;);
      return false;
  }
  
  void WebGL2RenderingContext::deleteSync(WebGLSync*)
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] deleteSync()&quot;);
  }
  
<span class="udiff-line-modified-removed">- GC3Denum WebGL2RenderingContext::clientWaitSync(WebGLSync&amp;, GC3Dbitfield, GC3Duint64)</span>
<span class="udiff-line-modified-added">+ GCGLenum WebGL2RenderingContext::clientWaitSync(WebGLSync&amp;, GCGLbitfield, GCGLuint64)</span>
  {
      // Note: Do not implement this function without consulting webkit-dev and WebGL
      // reviewers beforehand. Apple folks, see &lt;rdar://problem/36666458&gt;.
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] clientWaitSync()&quot;);
      return 0;
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::waitSync(WebGLSync&amp;, GC3Dbitfield, GC3Dint64)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::waitSync(WebGLSync&amp;, GCGLbitfield, GCGLint64)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] waitSync()&quot;);
  }
  
<span class="udiff-line-modified-removed">- WebGLAny WebGL2RenderingContext::getSyncParameter(WebGLSync&amp;, GC3Denum)</span>
<span class="udiff-line-modified-added">+ WebGLAny WebGL2RenderingContext::getSyncParameter(WebGLSync&amp;, GCGLenum)</span>
  {
      // Note: Do not implement this function without consulting webkit-dev and WebGL
      // reviewers beforehand. Apple folks, see &lt;rdar://problem/36666458&gt;.
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] getSyncParameter()&quot;);
      return nullptr;
  }
  
  RefPtr&lt;WebGLTransformFeedback&gt; WebGL2RenderingContext::createTransformFeedback()
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] createTransformFeedback()&quot;);</span>
<span class="udiff-line-modified-removed">-     return nullptr;</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-modified-added">+         return nullptr;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     auto transformFeedback = WebGLTransformFeedback::create(*this);</span>
<span class="udiff-line-added">+     addSharedObject(transformFeedback.get());</span>
<span class="udiff-line-added">+     return transformFeedback;</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::deleteTransformFeedback(WebGLTransformFeedback*)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::deleteTransformFeedback(WebGLTransformFeedback* feedbackObject)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] deleteTransformFeedback()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (m_boundTransformFeedback == feedbackObject)</span>
<span class="udiff-line-added">+         m_boundTransformFeedback = nullptr;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     deleteObject(feedbackObject);</span>
  }
  
<span class="udiff-line-modified-removed">- GC3Dboolean WebGL2RenderingContext::isTransformFeedback(WebGLTransformFeedback*)</span>
<span class="udiff-line-modified-added">+ GCGLboolean WebGL2RenderingContext::isTransformFeedback(WebGLTransformFeedback* feedbackObject)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] isTransformFeedback()&quot;);</span>
<span class="udiff-line-modified-removed">-     return false;</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending() || !feedbackObject || feedbackObject-&gt;isDeleted() || !validateWebGLObject(&quot;isTransformFeedback&quot;, feedbackObject))</span>
<span class="udiff-line-modified-added">+         return false;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     return m_context-&gt;isTransformFeedback(feedbackObject-&gt;object());</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::bindTransformFeedback(GC3Denum, WebGLTransformFeedback*)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::bindTransformFeedback(GCGLenum target, WebGLTransformFeedback* feedbackObject)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] bindTransformFeedback()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (feedbackObject) {</span>
<span class="udiff-line-added">+         if (feedbackObject-&gt;isDeleted()) {</span>
<span class="udiff-line-added">+             synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;bindTransformFeedback&quot;, &quot;cannot bind a deleted Transform Feedback object&quot;);</span>
<span class="udiff-line-added">+             return;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         if (!validateWebGLObject(&quot;bindTransformFeedback&quot;, feedbackObject))</span>
<span class="udiff-line-added">+             return;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     m_context-&gt;bindTransformFeedback(target, objectOrZero(feedbackObject));</span>
<span class="udiff-line-added">+     m_boundTransformFeedback = feedbackObject;</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::beginTransformFeedback(GC3Denum)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::beginTransformFeedback(GCGLenum primitiveMode)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] beginTransformFeedback()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     m_context-&gt;beginTransformFeedback(primitiveMode);</span>
  }
  
  void WebGL2RenderingContext::endTransformFeedback()
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] endTransformFeedback()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     m_context-&gt;endTransformFeedback();</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::transformFeedbackVaryings(WebGLProgram&amp;, const Vector&lt;String&gt;&amp;, GC3Denum)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::transformFeedbackVaryings(WebGLProgram&amp; program, const Vector&lt;String&gt;&amp; varyings, GCGLenum bufferMode)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] transformFeedbackVaryings()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending() || varyings.isEmpty() || !validateWebGLObject(&quot;transformFeedbackVaryings&quot;, &amp;program))</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     m_context-&gt;transformFeedbackVaryings(program.object(), varyings, bufferMode);</span>
  }
  
<span class="udiff-line-modified-removed">- RefPtr&lt;WebGLActiveInfo&gt; WebGL2RenderingContext::getTransformFeedbackVarying(WebGLProgram&amp;, GC3Duint)</span>
<span class="udiff-line-modified-added">+ RefPtr&lt;WebGLActiveInfo&gt; WebGL2RenderingContext::getTransformFeedbackVarying(WebGLProgram&amp; program, GCGLuint index)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] getTransformFeedbackVarying()&quot;);</span>
<span class="udiff-line-modified-removed">-     return nullptr;</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending() || !validateWebGLObject(&quot;getTransformFeedbackVarying&quot;, &amp;program))</span>
<span class="udiff-line-modified-added">+         return nullptr;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     GraphicsContextGL::ActiveInfo info;</span>
<span class="udiff-line-added">+     m_context-&gt;getTransformFeedbackVarying(program.object(), index, info);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (!info.name || !info.type || !info.size)</span>
<span class="udiff-line-added">+         return nullptr;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     return WebGLActiveInfo::create(info.name, info.type, info.size);</span>
  }
  
  void WebGL2RenderingContext::pauseTransformFeedback()
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] pauseTransformFeedback()&quot;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1210,86 +1401,115 @@</span>
  void WebGL2RenderingContext::resumeTransformFeedback()
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] resumeTransformFeedback()&quot;);
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::bindBufferBase(GC3Denum, GC3Duint, WebGLBuffer*)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::bindBufferBase(GCGLenum target, GCGLuint index, WebGLBuffer* buffer)</span>
  {
<span class="udiff-line-modified-removed">-     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] bindBufferBase()&quot;);</span>
<span class="udiff-line-modified-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     switch (target) {</span>
<span class="udiff-line-added">+     case GraphicsContextGL::TRANSFORM_FEEDBACK_BUFFER:</span>
<span class="udiff-line-added">+         if (index &gt;= m_boundTransformFeedbackBuffers.size()) {</span>
<span class="udiff-line-added">+             synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;bindBufferBase&quot;, &quot;index out of range&quot;);</span>
<span class="udiff-line-added">+             return;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+         break;</span>
<span class="udiff-line-added">+     case GraphicsContextGL::UNIFORM_BUFFER:</span>
<span class="udiff-line-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;bindBufferBase&quot;, &quot;target not yet supported&quot;);</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+     default:</span>
<span class="udiff-line-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;bindBufferBase&quot;, &quot;invalid target&quot;);</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (!validateAndCacheBufferBinding(&quot;bindBufferBase&quot;, target, buffer))</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     m_context-&gt;bindBufferBase(target, index, objectOrZero(buffer));</span>
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::bindBufferRange(GC3Denum, GC3Duint, WebGLBuffer*, GC3Dint64, GC3Dint64)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::bindBufferRange(GCGLenum, GCGLuint, WebGLBuffer*, GCGLint64, GCGLint64)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] bindBufferRange()&quot;);
  }
  
<span class="udiff-line-modified-removed">- WebGLAny WebGL2RenderingContext::getIndexedParameter(GC3Denum target, GC3Duint)</span>
<span class="udiff-line-modified-added">+ WebGLAny WebGL2RenderingContext::getIndexedParameter(GCGLenum target, GCGLuint index)</span>
  {
<span class="udiff-line-added">+     if (isContextLostOrPending())</span>
<span class="udiff-line-added">+         return nullptr;</span>
<span class="udiff-line-added">+ </span>
      switch (target) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::TRANSFORM_FEEDBACK_BUFFER_BINDING:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::TRANSFORM_FEEDBACK_BUFFER_SIZE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::TRANSFORM_FEEDBACK_BUFFER_START:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNIFORM_BUFFER_BINDING:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNIFORM_BUFFER_SIZE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNIFORM_BUFFER_START:</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;getIndexedParameter&quot;, &quot;parameter name not yet supported&quot;);</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::TRANSFORM_FEEDBACK_BUFFER_BINDING:</span>
<span class="udiff-line-modified-added">+         if (index &gt;= m_boundTransformFeedbackBuffers.size()) {</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_VALUE, &quot;getIndexedParameter&quot;, &quot;index out of range&quot;);</span>
<span class="udiff-line-modified-added">+             return nullptr;</span>
<span class="udiff-line-modified-added">+         }</span>
<span class="udiff-line-modified-added">+         return m_boundTransformFeedbackBuffers[index];</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::TRANSFORM_FEEDBACK_BUFFER_SIZE:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::TRANSFORM_FEEDBACK_BUFFER_START:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::UNIFORM_BUFFER_BINDING:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::UNIFORM_BUFFER_SIZE:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::UNIFORM_BUFFER_START:</span>
<span class="udiff-line-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;getIndexedParameter&quot;, &quot;parameter name not yet supported&quot;);</span>
          return nullptr;
      default:
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;getIndexedParameter&quot;, &quot;invalid parameter name&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;getIndexedParameter&quot;, &quot;invalid parameter name&quot;);</span>
          return nullptr;
      }
  }
  
<span class="udiff-line-modified-removed">- Optional&lt;Vector&lt;GC3Duint&gt;&gt; WebGL2RenderingContext::getUniformIndices(WebGLProgram&amp;, const Vector&lt;String&gt;&amp;)</span>
<span class="udiff-line-modified-added">+ Optional&lt;Vector&lt;GCGLuint&gt;&gt; WebGL2RenderingContext::getUniformIndices(WebGLProgram&amp;, const Vector&lt;String&gt;&amp;)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] getUniformIndices()&quot;);
      return WTF::nullopt;
  }
  
<span class="udiff-line-modified-removed">- WebGLAny WebGL2RenderingContext::getActiveUniforms(WebGLProgram&amp; program, const Vector&lt;GC3Duint&gt;&amp; uniformIndices, GC3Denum pname)</span>
<span class="udiff-line-modified-added">+ WebGLAny WebGL2RenderingContext::getActiveUniforms(WebGLProgram&amp; program, const Vector&lt;GCGLuint&gt;&amp; uniformIndices, GCGLenum pname)</span>
  {
      if (isContextLostOrPending() || !validateWebGLObject(&quot;getActiveUniforms&quot;, &amp;program))
          return nullptr;
  
      switch (pname) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNIFORM_TYPE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNIFORM_SIZE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNIFORM_BLOCK_INDEX:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNIFORM_OFFSET:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNIFORM_ARRAY_STRIDE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNIFORM_MATRIX_STRIDE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNIFORM_IS_ROW_MAJOR:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNIFORM_TYPE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNIFORM_SIZE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNIFORM_BLOCK_INDEX:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNIFORM_OFFSET:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNIFORM_ARRAY_STRIDE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNIFORM_MATRIX_STRIDE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNIFORM_IS_ROW_MAJOR:</span>
          {
<span class="udiff-line-modified-removed">-             Vector&lt;GC3Dint&gt; params(uniformIndices.size(), 0);</span>
<span class="udiff-line-modified-added">+             Vector&lt;GCGLint&gt; params(uniformIndices.size(), 0);</span>
              m_context-&gt;getActiveUniforms(program.object(), uniformIndices, pname, params);
              return WTFMove(params);
          }
      default:
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;getActiveUniforms&quot;, &quot;invalid parameter name&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;getActiveUniforms&quot;, &quot;invalid parameter name&quot;);</span>
          return nullptr;
      }
  }
  
<span class="udiff-line-modified-removed">- GC3Duint WebGL2RenderingContext::getUniformBlockIndex(WebGLProgram&amp;, const String&amp;)</span>
<span class="udiff-line-modified-added">+ GCGLuint WebGL2RenderingContext::getUniformBlockIndex(WebGLProgram&amp;, const String&amp;)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] getUniformBlockIndex()&quot;);
      return 0;
  }
  
<span class="udiff-line-modified-removed">- WebGLAny WebGL2RenderingContext::getActiveUniformBlockParameter(WebGLProgram&amp;, GC3Duint, GC3Denum)</span>
<span class="udiff-line-modified-added">+ WebGLAny WebGL2RenderingContext::getActiveUniformBlockParameter(WebGLProgram&amp;, GCGLuint, GCGLenum)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] getActiveUniformBlockParameter()&quot;);
      return nullptr;
  }
  
<span class="udiff-line-modified-removed">- WebGLAny WebGL2RenderingContext::getActiveUniformBlockName(WebGLProgram&amp;, GC3Duint)</span>
<span class="udiff-line-modified-added">+ WebGLAny WebGL2RenderingContext::getActiveUniformBlockName(WebGLProgram&amp;, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] getActiveUniformBlockName()&quot;);
      return nullptr;
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::uniformBlockBinding(WebGLProgram&amp;, GC3Duint, GC3Duint)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::uniformBlockBinding(WebGLProgram&amp;, GCGLuint, GCGLuint)</span>
  {
      LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniformBlockBinding()&quot;);
  }
  
  RefPtr&lt;WebGLVertexArrayObject&gt; WebGL2RenderingContext::createVertexArray()
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1315,14 +1535,14 @@</span>
          setBoundVertexArrayObject(nullptr);
  #else
          bindVertexArray(nullptr); // The default VAO was removed in OpenGL 3.3 but not from WebGL 2; bind the default for WebGL to use.
  #endif
  
<span class="udiff-line-modified-removed">-     arrayObject-&gt;deleteObject(graphicsContext3D());</span>
<span class="udiff-line-modified-added">+     arrayObject-&gt;deleteObject(graphicsContextGL());</span>
  }
  
<span class="udiff-line-modified-removed">- GC3Dboolean WebGL2RenderingContext::isVertexArray(WebGLVertexArrayObject* arrayObject)</span>
<span class="udiff-line-modified-added">+ GCGLboolean WebGL2RenderingContext::isVertexArray(WebGLVertexArrayObject* arrayObject)</span>
  {
      if (!arrayObject || isContextLost())
          return false;
  
      if (!arrayObject-&gt;hasEverBeenBound() || !arrayObject-&gt;validate(0, *this))
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1335,11 +1555,11 @@</span>
  {
      if (isContextLost())
          return;
  
      if (arrayObject &amp;&amp; (arrayObject-&gt;isDeleted() || !arrayObject-&gt;validate(0, *this) || !m_contextObjects.contains(arrayObject))) {
<span class="udiff-line-modified-removed">-         m_context-&gt;synthesizeGLError(GraphicsContext3D::INVALID_OPERATION);</span>
<span class="udiff-line-modified-added">+         m_context-&gt;synthesizeGLError(GraphicsContextGL::INVALID_OPERATION);</span>
          return;
      }
      if (arrayObject &amp;&amp; !arrayObject-&gt;isDefaultObject() &amp;&amp; arrayObject-&gt;object()) {
          m_context-&gt;bindVertexArray(arrayObject-&gt;object());
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1365,21 +1585,22 @@</span>
          } \
          return variable.get(); \
      }
  
      ENABLE_IF_REQUESTED(EXTTextureFilterAnisotropic, m_extTextureFilterAnisotropic, &quot;EXT_texture_filter_anisotropic&quot;, enableSupportedExtension(&quot;GL_EXT_texture_filter_anisotropic&quot;_s));
<span class="udiff-line-removed">-     ENABLE_IF_REQUESTED(EXTTextureFilterAnisotropic, m_extTextureFilterAnisotropic, &quot;WEBKIT_EXT_texture_filter_anisotropic&quot;, enableSupportedExtension(&quot;GL_OES_texture_float&quot;_s));</span>
      ENABLE_IF_REQUESTED(OESTextureFloat, m_oesTextureFloat, &quot;OES_texture_float&quot;, enableSupportedExtension(&quot;GL_OES_texture_float&quot;_s));
      ENABLE_IF_REQUESTED(OESTextureFloatLinear, m_oesTextureFloatLinear, &quot;OES_texture_float_linear&quot;, enableSupportedExtension(&quot;GL_OES_texture_float_linear&quot;_s));
      ENABLE_IF_REQUESTED(OESTextureHalfFloat, m_oesTextureHalfFloat, &quot;OES_texture_half_float&quot;, enableSupportedExtension(&quot;GL_OES_texture_half_float&quot;_s));
      ENABLE_IF_REQUESTED(OESTextureHalfFloatLinear, m_oesTextureHalfFloatLinear, &quot;OES_texture_half_float_linear&quot;, enableSupportedExtension(&quot;GL_OES_texture_half_float_linear&quot;_s));
      ENABLE_IF_REQUESTED(WebGLLoseContext, m_webglLoseContext, &quot;WEBGL_lose_context&quot;, true);
<span class="udiff-line-added">+     ENABLE_IF_REQUESTED(WebGLCompressedTextureASTC, m_webglCompressedTextureASTC, &quot;WEBGL_compressed_texture_astc&quot;, WebGLCompressedTextureASTC::supported(*this));</span>
      ENABLE_IF_REQUESTED(WebGLCompressedTextureATC, m_webglCompressedTextureATC, &quot;WEBKIT_WEBGL_compressed_texture_atc&quot;, WebGLCompressedTextureATC::supported(*this));
<span class="udiff-line-added">+     ENABLE_IF_REQUESTED(WebGLCompressedTextureETC, m_webglCompressedTextureETC, &quot;WEBGL_compressed_texture_etc&quot;, WebGLCompressedTextureETC::supported(*this));</span>
<span class="udiff-line-added">+     ENABLE_IF_REQUESTED(WebGLCompressedTextureETC1, m_webglCompressedTextureETC1, &quot;WEBGL_compressed_texture_etc1&quot;, WebGLCompressedTextureETC1::supported(*this));</span>
      ENABLE_IF_REQUESTED(WebGLCompressedTexturePVRTC, m_webglCompressedTexturePVRTC, &quot;WEBKIT_WEBGL_compressed_texture_pvrtc&quot;, WebGLCompressedTexturePVRTC::supported(*this));
      ENABLE_IF_REQUESTED(WebGLCompressedTextureS3TC, m_webglCompressedTextureS3TC, &quot;WEBGL_compressed_texture_s3tc&quot;, WebGLCompressedTextureS3TC::supported(*this));
<span class="udiff-line-modified-removed">-     ENABLE_IF_REQUESTED(WebGLCompressedTextureASTC, m_webglCompressedTextureASTC, &quot;WEBGL_compressed_texture_astc&quot;, WebGLCompressedTextureASTC::supported(*this));</span>
<span class="udiff-line-removed">-     ENABLE_IF_REQUESTED(WebGLDepthTexture, m_webglDepthTexture, &quot;WEBGL_depth_texture&quot;, WebGLDepthTexture::supported(*graphicsContext3D()));</span>
<span class="udiff-line-modified-added">+     ENABLE_IF_REQUESTED(WebGLDepthTexture, m_webglDepthTexture, &quot;WEBGL_depth_texture&quot;, WebGLDepthTexture::supported(*graphicsContextGL()));</span>
      ENABLE_IF_REQUESTED(WebGLDebugRendererInfo, m_webglDebugRendererInfo, &quot;WEBGL_debug_renderer_info&quot;, true);
      ENABLE_IF_REQUESTED(WebGLDebugShaders, m_webglDebugShaders, &quot;WEBGL_debug_shaders&quot;, m_context-&gt;getExtensions().supports(&quot;GL_ANGLE_translated_shader_source&quot;_s));
      return nullptr;
  }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1401,699 +1622,707 @@</span>
      if (extensions.supports(&quot;GL_OES_texture_half_float&quot;_s))
          result.append(&quot;OES_texture_half_float&quot;_s);
      if (extensions.supports(&quot;GL_OES_texture_half_float_linear&quot;_s))
          result.append(&quot;OES_texture_half_float_linear&quot;_s);
      if (extensions.supports(&quot;GL_EXT_texture_filter_anisotropic&quot;_s))
<span class="udiff-line-modified-removed">-         result.append(&quot;WEBKIT_EXT_texture_filter_anisotropic&quot;_s);</span>
<span class="udiff-line-modified-added">+         result.append(&quot;EXT_texture_filter_anisotropic&quot;_s);</span>
<span class="udiff-line-added">+     if (WebGLCompressedTextureASTC::supported(*this))</span>
<span class="udiff-line-added">+         result.append(&quot;WEBGL_compressed_texture_astc&quot;_s);</span>
      if (WebGLCompressedTextureATC::supported(*this))
          result.append(&quot;WEBKIT_WEBGL_compressed_texture_atc&quot;_s);
<span class="udiff-line-added">+     if (WebGLCompressedTextureETC::supported(*this))</span>
<span class="udiff-line-added">+         result.append(&quot;WEBGL_compressed_texture_etc&quot;_s);</span>
<span class="udiff-line-added">+     if (WebGLCompressedTextureETC1::supported(*this))</span>
<span class="udiff-line-added">+         result.append(&quot;WEBGL_compressed_texture_etc1&quot;_s);</span>
      if (WebGLCompressedTexturePVRTC::supported(*this))
          result.append(&quot;WEBKIT_WEBGL_compressed_texture_pvrtc&quot;_s);
      if (WebGLCompressedTextureS3TC::supported(*this))
          result.append(&quot;WEBGL_compressed_texture_s3tc&quot;_s);
<span class="udiff-line-modified-removed">-     if (WebGLCompressedTextureASTC::supported(*this))</span>
<span class="udiff-line-removed">-         result.append(&quot;WEBGL_compressed_texture_astc&quot;_s);</span>
<span class="udiff-line-removed">-     if (WebGLDepthTexture::supported(*graphicsContext3D()))</span>
<span class="udiff-line-modified-added">+     if (WebGLDepthTexture::supported(*graphicsContextGL()))</span>
          result.append(&quot;WEBGL_depth_texture&quot;_s);
      result.append(&quot;WEBGL_lose_context&quot;_s);
      if (extensions.supports(&quot;GL_ANGLE_translated_shader_source&quot;_s))
          result.append(&quot;WEBGL_debug_shaders&quot;_s);
      result.append(&quot;WEBGL_debug_renderer_info&quot;_s);
  
      return result;
  }
  
<span class="udiff-line-modified-removed">- static bool validateDefaultFramebufferAttachment(GC3Denum&amp; attachment)</span>
<span class="udiff-line-modified-added">+ static bool validateDefaultFramebufferAttachment(GCGLenum&amp; attachment)</span>
  {
      switch (attachment) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::BACK:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::BACK:</span>
          // Because the backbuffer is simulated on all current WebKit ports, we need to change BACK to COLOR_ATTACHMENT0.
<span class="udiff-line-modified-removed">-         attachment = GraphicsContext3D::COLOR_ATTACHMENT0;</span>
<span class="udiff-line-modified-added">+         attachment = GraphicsContextGL::COLOR_ATTACHMENT0;</span>
          return true;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL:</span>
          return true;
      }
  
      return false;
  }
  
<span class="udiff-line-modified-removed">- WebGLAny WebGL2RenderingContext::getFramebufferAttachmentParameter(GC3Denum target, GC3Denum attachment, GC3Denum pname)</span>
<span class="udiff-line-modified-added">+ WebGLAny WebGL2RenderingContext::getFramebufferAttachmentParameter(GCGLenum target, GCGLenum attachment, GCGLenum pname)</span>
  {
      const char* functionName = &quot;getFramebufferAttachmentParameter&quot;;
      if (isContextLostOrPending() || !validateFramebufferTarget(functionName, target))
          return nullptr;
  
<span class="udiff-line-modified-removed">-     auto targetFramebuffer = (target == GraphicsContext3D::READ_FRAMEBUFFER) ? m_readFramebufferBinding : m_framebufferBinding;</span>
<span class="udiff-line-modified-added">+     auto targetFramebuffer = (target == GraphicsContextGL::READ_FRAMEBUFFER) ? m_readFramebufferBinding : m_framebufferBinding;</span>
  
      if (!targetFramebuffer) {
          // OpenGL ES 3: Default framebuffer is bound.
          if (!validateDefaultFramebufferAttachment(attachment)) {
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_ENUM, functionName, &quot;invalid attachment&quot;);</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_ENUM, functionName, &quot;invalid attachment&quot;);</span>
              return nullptr;
          }
<span class="udiff-line-modified-removed">-         GC3Dint value = 0;</span>
<span class="udiff-line-modified-added">+         GCGLint value = 0;</span>
          m_context-&gt;getFramebufferAttachmentParameteriv(target, attachment, pname, &amp;value);
          return value;
      }
      if (!validateNonDefaultFramebufferAttachment(functionName, attachment))
          return nullptr;
  
      auto object = makeRefPtr(targetFramebuffer-&gt;getAttachmentObject(attachment));
      if (!object) {
<span class="udiff-line-modified-removed">-         if (pname == GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE)</span>
<span class="udiff-line-modified-removed">-             return static_cast&lt;unsigned&gt;(GraphicsContext3D::NONE);</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, functionName, &quot;invalid parameter name&quot;);</span>
<span class="udiff-line-modified-added">+         if (pname == GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE)</span>
<span class="udiff-line-modified-added">+             return static_cast&lt;unsigned&gt;(GraphicsContextGL::NONE);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, functionName, &quot;invalid parameter name&quot;);</span>
          return nullptr;
      }
  
      switch (pname) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_RED_SIZE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE: {</span>
<span class="udiff-line-modified-removed">-         GC3Dint value = 0;</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_RED_SIZE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE: {</span>
<span class="udiff-line-modified-added">+         GCGLint value = 0;</span>
          m_context-&gt;getFramebufferAttachmentParameteriv(target, attachment, pname, &amp;value);
          return value;
      }
      }
  
      if (object-&gt;isTexture()) {
          switch (pname) {
<span class="udiff-line-modified-removed">-         case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:</span>
<span class="udiff-line-modified-removed">-             return static_cast&lt;unsigned&gt;(GraphicsContext3D::TEXTURE);</span>
<span class="udiff-line-modified-removed">-         case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:</span>
<span class="udiff-line-modified-added">+         case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:</span>
<span class="udiff-line-modified-added">+             return static_cast&lt;unsigned&gt;(GraphicsContextGL::TEXTURE);</span>
<span class="udiff-line-modified-added">+         case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:</span>
              return makeRefPtr(reinterpret_cast&lt;WebGLTexture&amp;&gt;(*object));
<span class="udiff-line-modified-removed">-         case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:</span>
<span class="udiff-line-modified-removed">-         case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:</span>
<span class="udiff-line-modified-removed">-         case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING: {</span>
<span class="udiff-line-modified-removed">-             GC3Dint value = 0;</span>
<span class="udiff-line-modified-added">+         case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:</span>
<span class="udiff-line-modified-added">+         case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:</span>
<span class="udiff-line-modified-added">+         case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING: {</span>
<span class="udiff-line-modified-added">+             GCGLint value = 0;</span>
              m_context-&gt;getFramebufferAttachmentParameteriv(target, attachment, pname, &amp;value);
              return value;
          }
          default:
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_ENUM, functionName, &quot;invalid parameter name for texture attachment&quot;);</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_ENUM, functionName, &quot;invalid parameter name for texture attachment&quot;);</span>
              return nullptr;
          }
      } else {
          ASSERT(object-&gt;isRenderbuffer());
          switch (pname) {
<span class="udiff-line-modified-removed">-         case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:</span>
<span class="udiff-line-modified-removed">-             return static_cast&lt;unsigned&gt;(GraphicsContext3D::RENDERBUFFER);</span>
<span class="udiff-line-modified-removed">-         case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:</span>
<span class="udiff-line-modified-added">+         case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:</span>
<span class="udiff-line-modified-added">+             return static_cast&lt;unsigned&gt;(GraphicsContextGL::RENDERBUFFER);</span>
<span class="udiff-line-modified-added">+         case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:</span>
              return makeRefPtr(reinterpret_cast&lt;WebGLRenderbuffer&amp;&gt;(*object));
<span class="udiff-line-modified-removed">-         case GraphicsContext3D::FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING : {</span>
<span class="udiff-line-modified-added">+         case GraphicsContextGL::FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING : {</span>
              auto&amp; renderBuffer = reinterpret_cast&lt;WebGLRenderbuffer&amp;&gt;(*object);
              auto format = renderBuffer.getInternalFormat();
<span class="udiff-line-modified-removed">-             if (format == GraphicsContext3D::SRGB8_ALPHA8</span>
<span class="udiff-line-modified-removed">-                 || format == GraphicsContext3D::COMPRESSED_SRGB8_ETC2</span>
<span class="udiff-line-modified-removed">-                 || format == GraphicsContext3D::COMPRESSED_SRGB8_ALPHA8_ETC2_EAC</span>
<span class="udiff-line-modified-removed">-                 || format == GraphicsContext3D::COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2) {</span>
<span class="udiff-line-modified-removed">-                 return static_cast&lt;unsigned&gt;(GraphicsContext3D::SRGB);</span>
<span class="udiff-line-modified-added">+             if (format == GraphicsContextGL::SRGB8_ALPHA8</span>
<span class="udiff-line-modified-added">+                 || format == GraphicsContextGL::COMPRESSED_SRGB8_ETC2</span>
<span class="udiff-line-modified-added">+                 || format == GraphicsContextGL::COMPRESSED_SRGB8_ALPHA8_ETC2_EAC</span>
<span class="udiff-line-modified-added">+                 || format == GraphicsContextGL::COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2) {</span>
<span class="udiff-line-modified-added">+                 return static_cast&lt;unsigned&gt;(GraphicsContextGL::SRGB);</span>
              }
<span class="udiff-line-modified-removed">-             return static_cast&lt;unsigned&gt;(GraphicsContext3D::LINEAR);</span>
<span class="udiff-line-modified-added">+             return static_cast&lt;unsigned&gt;(GraphicsContextGL::LINEAR);</span>
          }
          default:
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_ENUM, functionName, &quot;invalid parameter name for renderbuffer attachment&quot;);</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_ENUM, functionName, &quot;invalid parameter name for renderbuffer attachment&quot;);</span>
              return nullptr;
          }
      }
  }
  
<span class="udiff-line-modified-removed">- bool WebGL2RenderingContext::validateFramebufferFuncParameters(const char* functionName, GC3Denum target, GC3Denum attachment)</span>
<span class="udiff-line-modified-added">+ bool WebGL2RenderingContext::validateFramebufferFuncParameters(const char* functionName, GCGLenum target, GCGLenum attachment)</span>
  {
      return validateFramebufferTarget(functionName, target) &amp;&amp; validateNonDefaultFramebufferAttachment(functionName, attachment);
  }
  
<span class="udiff-line-modified-removed">- bool WebGL2RenderingContext::validateFramebufferTarget(const char* functionName, GC3Denum target)</span>
<span class="udiff-line-modified-added">+ bool WebGL2RenderingContext::validateFramebufferTarget(const char* functionName, GCGLenum target)</span>
  {
      switch (target) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FRAMEBUFFER:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_FRAMEBUFFER:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::READ_FRAMEBUFFER:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FRAMEBUFFER:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_FRAMEBUFFER:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::READ_FRAMEBUFFER:</span>
          return true;
      }
  
<span class="udiff-line-modified-removed">-     synthesizeGLError(GraphicsContext3D::INVALID_ENUM, functionName, &quot;invalid target&quot;);</span>
<span class="udiff-line-modified-added">+     synthesizeGLError(GraphicsContextGL::INVALID_ENUM, functionName, &quot;invalid target&quot;);</span>
      return false;
  }
  
<span class="udiff-line-modified-removed">- bool WebGL2RenderingContext::validateNonDefaultFramebufferAttachment(const char* functionName, GC3Denum attachment)</span>
<span class="udiff-line-modified-added">+ bool WebGL2RenderingContext::validateNonDefaultFramebufferAttachment(const char* functionName, GCGLenum attachment)</span>
  {
      switch (attachment) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_ATTACHMENT:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_ATTACHMENT:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_STENCIL_ATTACHMENT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_ATTACHMENT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_ATTACHMENT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_STENCIL_ATTACHMENT:</span>
          return true;
      default:
<span class="udiff-line-modified-removed">-         if (attachment &gt;= GraphicsContext3D::COLOR_ATTACHMENT0 &amp;&amp; attachment &lt; static_cast&lt;GC3Denum&gt;(GraphicsContext3D::COLOR_ATTACHMENT0 + getMaxColorAttachments()))</span>
<span class="udiff-line-modified-added">+         if (attachment &gt;= GraphicsContextGL::COLOR_ATTACHMENT0 &amp;&amp; attachment &lt; static_cast&lt;GCGLenum&gt;(GraphicsContextGL::COLOR_ATTACHMENT0 + getMaxColorAttachments()))</span>
              return true;
      }
  
<span class="udiff-line-modified-removed">-     synthesizeGLError(GraphicsContext3D::INVALID_ENUM, functionName, &quot;invalid attachment&quot;);</span>
<span class="udiff-line-modified-added">+     synthesizeGLError(GraphicsContextGL::INVALID_ENUM, functionName, &quot;invalid attachment&quot;);</span>
      return false;
  }
  
<span class="udiff-line-modified-removed">- GC3Dint WebGL2RenderingContext::getMaxDrawBuffers()</span>
<span class="udiff-line-modified-added">+ GCGLint WebGL2RenderingContext::getMaxDrawBuffers()</span>
  {
      if (!m_maxDrawBuffers)
<span class="udiff-line-modified-removed">-         m_context-&gt;getIntegerv(GraphicsContext3D::MAX_DRAW_BUFFERS, &amp;m_maxDrawBuffers);</span>
<span class="udiff-line-modified-added">+         m_context-&gt;getIntegerv(GraphicsContextGL::MAX_DRAW_BUFFERS, &amp;m_maxDrawBuffers);</span>
      return m_maxDrawBuffers;
  }
  
<span class="udiff-line-modified-removed">- GC3Dint WebGL2RenderingContext::getMaxColorAttachments()</span>
<span class="udiff-line-modified-added">+ GCGLint WebGL2RenderingContext::getMaxColorAttachments()</span>
  {
      // DrawBuffers requires MAX_COLOR_ATTACHMENTS == MAX_DRAW_BUFFERS
      if (!m_maxColorAttachments)
<span class="udiff-line-modified-removed">-         m_context-&gt;getIntegerv(GraphicsContext3D::MAX_DRAW_BUFFERS, &amp;m_maxColorAttachments);</span>
<span class="udiff-line-modified-added">+         m_context-&gt;getIntegerv(GraphicsContextGL::MAX_DRAW_BUFFERS, &amp;m_maxColorAttachments);</span>
      return m_maxColorAttachments;
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::renderbufferStorage(GC3Denum target, GC3Denum internalformat, GC3Dsizei width, GC3Dsizei height)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::renderbufferStorage(GCGLenum target, GCGLenum internalformat, GCGLsizei width, GCGLsizei height)</span>
  {
      if (isContextLostOrPending())
          return;
<span class="udiff-line-modified-removed">-     if (target != GraphicsContext3D::RENDERBUFFER) {</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;renderbufferStorage&quot;, &quot;invalid target&quot;);</span>
<span class="udiff-line-modified-added">+     if (target != GraphicsContextGL::RENDERBUFFER) {</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;renderbufferStorage&quot;, &quot;invalid target&quot;);</span>
          return;
      }
      if (!m_renderbufferBinding || !m_renderbufferBinding-&gt;object()) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_OPERATION, &quot;renderbufferStorage&quot;, &quot;no bound renderbuffer&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_OPERATION, &quot;renderbufferStorage&quot;, &quot;no bound renderbuffer&quot;);</span>
          return;
      }
      if (!validateSize(&quot;renderbufferStorage&quot;, width, height))
          return;
      switch (internalformat) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT16:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT32F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT24:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA32UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB10_A2:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB10_A2UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA4:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG32UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R32UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB5_A1:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB565:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_INDEX8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SRGB8_ALPHA8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT16:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT32F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT24:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA32UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB10_A2:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB10_A2UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA4:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG32UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R32UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB5_A1:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB565:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_INDEX8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SRGB8_ALPHA8:</span>
          m_context-&gt;renderbufferStorage(target, internalformat, width, height);
          m_renderbufferBinding-&gt;setInternalFormat(internalformat);
          m_renderbufferBinding-&gt;setIsValid(true);
          m_renderbufferBinding-&gt;setSize(width, height);
          break;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH32F_STENCIL8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH24_STENCIL8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH32F_STENCIL8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH24_STENCIL8:</span>
          if (!isDepthStencilSupported()) {
<span class="udiff-line-modified-removed">-             synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;renderbufferStorage&quot;, &quot;invalid internalformat&quot;);</span>
<span class="udiff-line-modified-added">+             synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;renderbufferStorage&quot;, &quot;invalid internalformat&quot;);</span>
              return;
          }
          m_context-&gt;renderbufferStorage(target, internalformat, width, height);
          m_renderbufferBinding-&gt;setSize(width, height);
          m_renderbufferBinding-&gt;setIsValid(isDepthStencilSupported());
          m_renderbufferBinding-&gt;setInternalFormat(internalformat);
          break;
      default:
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;renderbufferStorage&quot;, &quot;invalid internalformat&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;renderbufferStorage&quot;, &quot;invalid internalformat&quot;);</span>
          return;
      }
      applyStencilTest();
  }
  
<span class="udiff-line-modified-removed">- void WebGL2RenderingContext::hint(GC3Denum target, GC3Denum mode)</span>
<span class="udiff-line-modified-added">+ void WebGL2RenderingContext::hint(GCGLenum target, GCGLenum mode)</span>
  {
      if (isContextLostOrPending())
          return;
      bool isValid = false;
      switch (target) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::GENERATE_MIPMAP_HINT:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FRAGMENT_SHADER_DERIVATIVE_HINT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::GENERATE_MIPMAP_HINT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FRAGMENT_SHADER_DERIVATIVE_HINT:</span>
          isValid = true;
          break;
      }
      if (!isValid) {
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;hint&quot;, &quot;invalid target&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;hint&quot;, &quot;invalid target&quot;);</span>
          return;
      }
      m_context-&gt;hint(target, mode);
  }
  
<span class="udiff-line-modified-removed">- GC3Denum WebGL2RenderingContext::baseInternalFormatFromInternalFormat(GC3Denum internalformat)</span>
<span class="udiff-line-modified-added">+ GCGLenum WebGL2RenderingContext::baseInternalFormatFromInternalFormat(GCGLenum internalformat)</span>
  {
      // Handles sized, unsized, and compressed internal formats.
      switch (internalformat) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8_SNORM:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R16F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R32F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COMPRESSED_R11_EAC:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COMPRESSED_SIGNED_R11_EAC:</span>
<span class="udiff-line-modified-removed">-         return GraphicsContext3D::RED;</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::R32UI:</span>
<span class="udiff-line-modified-removed">-         return GraphicsContext3D::RED_INTEGER;</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8_SNORM:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG16F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG32F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COMPRESSED_RG11_EAC:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COMPRESSED_SIGNED_RG11_EAC:</span>
<span class="udiff-line-modified-removed">-         return GraphicsContext3D::RG;</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG32UI:</span>
<span class="udiff-line-modified-removed">-         return GraphicsContext3D::RG_INTEGER;</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB8_SNORM:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB565:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SRGB8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB16F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB32F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COMPRESSED_RGB8_ETC2:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COMPRESSED_SRGB8_ETC2:</span>
<span class="udiff-line-modified-removed">-         return GraphicsContext3D::RGB;</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB32UI:</span>
<span class="udiff-line-modified-removed">-         return GraphicsContext3D::RGB_INTEGER;</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA4:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB5_A1:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8_SNORM:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB10_A2:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SRGB8_ALPHA8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA16F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA32F:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COMPRESSED_RGBA8_ETC2_EAC:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:</span>
<span class="udiff-line-modified-removed">-         return GraphicsContext3D::RGBA;</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA8UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB10_A2UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA16I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA16UI:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA32I:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA32UI:</span>
<span class="udiff-line-modified-removed">-         return GraphicsContext3D::RGBA_INTEGER;</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT16:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT24:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_COMPONENT32F:</span>
<span class="udiff-line-modified-removed">-         return GraphicsContext3D::DEPTH_COMPONENT;</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH24_STENCIL8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH32F_STENCIL8:</span>
<span class="udiff-line-modified-removed">-         return GraphicsContext3D::DEPTH_STENCIL;</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::LUMINANCE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::LUMINANCE_ALPHA:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::ALPHA:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8_SNORM:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R16F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R32F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COMPRESSED_R11_EAC:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COMPRESSED_SIGNED_R11_EAC:</span>
<span class="udiff-line-modified-added">+         return GraphicsContextGL::RED;</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::R32UI:</span>
<span class="udiff-line-modified-added">+         return GraphicsContextGL::RED_INTEGER;</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8_SNORM:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG16F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG32F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COMPRESSED_RG11_EAC:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COMPRESSED_SIGNED_RG11_EAC:</span>
<span class="udiff-line-modified-added">+         return GraphicsContextGL::RG;</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG32UI:</span>
<span class="udiff-line-modified-added">+         return GraphicsContextGL::RG_INTEGER;</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB8_SNORM:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB565:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SRGB8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB16F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB32F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COMPRESSED_RGB8_ETC2:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COMPRESSED_SRGB8_ETC2:</span>
<span class="udiff-line-modified-added">+         return GraphicsContextGL::RGB;</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB32UI:</span>
<span class="udiff-line-modified-added">+         return GraphicsContextGL::RGB_INTEGER;</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA4:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB5_A1:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8_SNORM:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB10_A2:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SRGB8_ALPHA8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA16F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA32F:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COMPRESSED_RGBA8_ETC2_EAC:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:</span>
<span class="udiff-line-modified-added">+         return GraphicsContextGL::RGBA;</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA8UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB10_A2UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA16I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA16UI:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA32I:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA32UI:</span>
<span class="udiff-line-modified-added">+         return GraphicsContextGL::RGBA_INTEGER;</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT16:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT24:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_COMPONENT32F:</span>
<span class="udiff-line-modified-added">+         return GraphicsContextGL::DEPTH_COMPONENT;</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH24_STENCIL8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH32F_STENCIL8:</span>
<span class="udiff-line-modified-added">+         return GraphicsContextGL::DEPTH_STENCIL;</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::LUMINANCE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::LUMINANCE_ALPHA:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::ALPHA:</span>
          return internalformat;
      default:
          ASSERT_NOT_REACHED();
<span class="udiff-line-modified-removed">-         return GraphicsContext3D::NONE;</span>
<span class="udiff-line-modified-added">+         return GraphicsContextGL::NONE;</span>
      }
  }
  
<span class="udiff-line-modified-removed">- bool WebGL2RenderingContext::isIntegerFormat(GC3Denum internalformat)</span>
<span class="udiff-line-modified-added">+ bool WebGL2RenderingContext::isIntegerFormat(GCGLenum internalformat)</span>
  {
      switch (baseInternalFormatFromInternalFormat(internalformat)) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RED_INTEGER:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RG_INTEGER:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGB_INTEGER:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RGBA_INTEGER:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RED_INTEGER:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RG_INTEGER:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGB_INTEGER:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RGBA_INTEGER:</span>
          return true;
      }
      return false;
  }
  
<span class="udiff-line-modified-removed">- WebGLAny WebGL2RenderingContext::getParameter(GC3Denum pname)</span>
<span class="udiff-line-modified-added">+ WebGLAny WebGL2RenderingContext::getParameter(GCGLenum pname)</span>
  {
      if (isContextLostOrPending())
          return nullptr;
      switch (pname) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::ACTIVE_TEXTURE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::ACTIVE_TEXTURE:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::ALIASED_LINE_WIDTH_RANGE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::ALIASED_LINE_WIDTH_RANGE:</span>
          return getWebGLFloatArrayParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::ALIASED_POINT_SIZE_RANGE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::ALIASED_POINT_SIZE_RANGE:</span>
          return getWebGLFloatArrayParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::ALPHA_BITS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::ALPHA_BITS:</span>
          if (!m_framebufferBinding &amp;&amp; !m_attributes.alpha)
              return 0;
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::ARRAY_BUFFER_BINDING:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::ARRAY_BUFFER_BINDING:</span>
          return m_boundArrayBuffer;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::BLEND:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::BLEND:</span>
          return getBooleanParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::BLEND_COLOR:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::BLEND_COLOR:</span>
          return getWebGLFloatArrayParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::BLEND_DST_ALPHA:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::BLEND_DST_ALPHA:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::BLEND_DST_RGB:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::BLEND_DST_RGB:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::BLEND_EQUATION_ALPHA:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::BLEND_EQUATION_ALPHA:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::BLEND_EQUATION_RGB:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::BLEND_EQUATION_RGB:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::BLEND_SRC_ALPHA:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::BLEND_SRC_ALPHA:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::BLEND_SRC_RGB:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::BLEND_SRC_RGB:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::BLUE_BITS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::BLUE_BITS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COLOR_CLEAR_VALUE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COLOR_CLEAR_VALUE:</span>
          return getWebGLFloatArrayParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COLOR_WRITEMASK:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COLOR_WRITEMASK:</span>
          return getBooleanArrayParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COMPRESSED_TEXTURE_FORMATS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COMPRESSED_TEXTURE_FORMATS:</span>
          return Uint32Array::tryCreate(m_compressedTextureFormats.data(), m_compressedTextureFormats.size());
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::CULL_FACE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::CULL_FACE:</span>
          return getBooleanParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::CULL_FACE_MODE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::CULL_FACE_MODE:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::CURRENT_PROGRAM:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::CURRENT_PROGRAM:</span>
          return m_currentProgram;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_BITS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_BITS:</span>
          if (!m_framebufferBinding &amp;&amp; !m_attributes.depth)
              return 0;
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_CLEAR_VALUE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_CLEAR_VALUE:</span>
          return getFloatParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_FUNC:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_FUNC:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_RANGE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_RANGE:</span>
          return getWebGLFloatArrayParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_TEST:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_TEST:</span>
          return getBooleanParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_WRITEMASK:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_WRITEMASK:</span>
          return getBooleanParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DITHER:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DITHER:</span>
          return getBooleanParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::ELEMENT_ARRAY_BUFFER_BINDING:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::ELEMENT_ARRAY_BUFFER_BINDING:</span>
          return makeRefPtr(m_boundVertexArrayObject-&gt;getElementArrayBuffer());
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FRAMEBUFFER_BINDING:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FRAMEBUFFER_BINDING:</span>
          return m_framebufferBinding;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FRONT_FACE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FRONT_FACE:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::GENERATE_MIPMAP_HINT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::GENERATE_MIPMAP_HINT:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::GREEN_BITS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::GREEN_BITS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::IMPLEMENTATION_COLOR_READ_FORMAT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::IMPLEMENTATION_COLOR_READ_FORMAT:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::IMPLEMENTATION_COLOR_READ_TYPE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::IMPLEMENTATION_COLOR_READ_TYPE:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::LINE_WIDTH:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::LINE_WIDTH:</span>
          return getFloatParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_COMBINED_TEXTURE_IMAGE_UNITS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_COMBINED_TEXTURE_IMAGE_UNITS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_CUBE_MAP_TEXTURE_SIZE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_CUBE_MAP_TEXTURE_SIZE:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_FRAGMENT_UNIFORM_VECTORS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_FRAGMENT_UNIFORM_VECTORS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_RENDERBUFFER_SIZE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_RENDERBUFFER_SIZE:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_TEXTURE_IMAGE_UNITS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_TEXTURE_IMAGE_UNITS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_TEXTURE_SIZE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_TEXTURE_SIZE:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_VARYING_VECTORS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_VARYING_VECTORS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_VERTEX_ATTRIBS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_VERTEX_ATTRIBS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_VERTEX_TEXTURE_IMAGE_UNITS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_VERTEX_TEXTURE_IMAGE_UNITS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_VERTEX_UNIFORM_VECTORS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_VERTEX_UNIFORM_VECTORS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_VIEWPORT_DIMS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_VIEWPORT_DIMS:</span>
          return getWebGLIntArrayParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::NUM_SHADER_BINARY_FORMATS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::NUM_SHADER_BINARY_FORMATS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::PACK_ALIGNMENT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::PACK_ALIGNMENT:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::POLYGON_OFFSET_FACTOR:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::POLYGON_OFFSET_FACTOR:</span>
          return getFloatParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::POLYGON_OFFSET_FILL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::POLYGON_OFFSET_FILL:</span>
          return getBooleanParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::POLYGON_OFFSET_UNITS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::POLYGON_OFFSET_UNITS:</span>
          return getFloatParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RED_BITS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RED_BITS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RENDERBUFFER_BINDING:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RENDERBUFFER_BINDING:</span>
          return m_renderbufferBinding;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RENDERER:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RENDERER:</span>
          return &quot;WebKit WebGL&quot;_str;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SAMPLE_BUFFERS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SAMPLE_BUFFERS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SAMPLE_COVERAGE_INVERT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SAMPLE_COVERAGE_INVERT:</span>
          return getBooleanParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SAMPLE_COVERAGE_VALUE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SAMPLE_COVERAGE_VALUE:</span>
          return getFloatParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SAMPLES:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SAMPLES:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SCISSOR_BOX:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SCISSOR_BOX:</span>
          return getWebGLIntArrayParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SCISSOR_TEST:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SCISSOR_TEST:</span>
          return getBooleanParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SHADING_LANGUAGE_VERSION:</span>
<span class="udiff-line-modified-removed">-         return &quot;WebGL GLSL ES 1.0 (&quot; + m_context-&gt;getString(GraphicsContext3D::SHADING_LANGUAGE_VERSION) + &quot;)&quot;;</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_BACK_FAIL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SHADING_LANGUAGE_VERSION:</span>
<span class="udiff-line-modified-added">+         return &quot;WebGL GLSL ES 1.0 (&quot; + m_context-&gt;getString(GraphicsContextGL::SHADING_LANGUAGE_VERSION) + &quot;)&quot;;</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_BACK_FAIL:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_BACK_FUNC:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_BACK_FUNC:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_BACK_PASS_DEPTH_FAIL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_BACK_PASS_DEPTH_FAIL:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_BACK_PASS_DEPTH_PASS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_BACK_PASS_DEPTH_PASS:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_BACK_REF:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_BACK_REF:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_BACK_VALUE_MASK:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_BACK_VALUE_MASK:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_BACK_WRITEMASK:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_BACK_WRITEMASK:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_BITS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_BITS:</span>
          if (!m_framebufferBinding &amp;&amp; !m_attributes.stencil)
              return 0;
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_CLEAR_VALUE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_CLEAR_VALUE:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_FAIL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_FAIL:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_FUNC:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_FUNC:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_PASS_DEPTH_FAIL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_PASS_DEPTH_FAIL:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_PASS_DEPTH_PASS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_PASS_DEPTH_PASS:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_REF:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_REF:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_TEST:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_TEST:</span>
          return getBooleanParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_VALUE_MASK:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_VALUE_MASK:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_WRITEMASK:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_WRITEMASK:</span>
          return getUnsignedIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SUBPIXEL_BITS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SUBPIXEL_BITS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::TEXTURE_BINDING_2D:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::TEXTURE_BINDING_2D:</span>
          return m_textureUnits[m_activeTextureUnit].texture2DBinding;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::TEXTURE_BINDING_CUBE_MAP:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::TEXTURE_BINDING_CUBE_MAP:</span>
          return m_textureUnits[m_activeTextureUnit].textureCubeMapBinding;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNPACK_ALIGNMENT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNPACK_ALIGNMENT:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNPACK_FLIP_Y_WEBGL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNPACK_FLIP_Y_WEBGL:</span>
          return m_unpackFlipY;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNPACK_PREMULTIPLY_ALPHA_WEBGL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNPACK_PREMULTIPLY_ALPHA_WEBGL:</span>
          return m_unpackPremultiplyAlpha;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNPACK_COLORSPACE_CONVERSION_WEBGL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNPACK_COLORSPACE_CONVERSION_WEBGL:</span>
          return m_unpackColorspaceConversion;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::VENDOR:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::VENDOR:</span>
          return &quot;WebKit&quot;_str;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::VERSION:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::VERSION:</span>
          return &quot;WebGL 2.0&quot;_str;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::VIEWPORT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::VIEWPORT:</span>
          return getWebGLIntArrayParameter(pname);
      case WebGLDebugRendererInfo::UNMASKED_RENDERER_WEBGL:
          if (m_webglDebugRendererInfo) {
  #if PLATFORM(IOS_FAMILY)
              return &quot;Apple GPU&quot;_str;
  #else
<span class="udiff-line-modified-removed">-             return m_context-&gt;getString(GraphicsContext3D::RENDERER);</span>
<span class="udiff-line-modified-added">+             return m_context-&gt;getString(GraphicsContextGL::RENDERER);</span>
  #endif
          }
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;getParameter&quot;, &quot;invalid parameter name, WEBGL_debug_renderer_info not enabled&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;getParameter&quot;, &quot;invalid parameter name, WEBGL_debug_renderer_info not enabled&quot;);</span>
          return nullptr;
      case WebGLDebugRendererInfo::UNMASKED_VENDOR_WEBGL:
          if (m_webglDebugRendererInfo)
<span class="udiff-line-modified-removed">-             return m_context-&gt;getString(GraphicsContext3D::VENDOR);</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;getParameter&quot;, &quot;invalid parameter name, WEBGL_debug_renderer_info not enabled&quot;);</span>
<span class="udiff-line-modified-added">+             return m_context-&gt;getString(GraphicsContextGL::VENDOR);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;getParameter&quot;, &quot;invalid parameter name, WEBGL_debug_renderer_info not enabled&quot;);</span>
          return nullptr;
<span class="udiff-line-modified-removed">-     case Extensions3D::MAX_TEXTURE_MAX_ANISOTROPY_EXT: // EXT_texture_filter_anisotropic</span>
<span class="udiff-line-modified-added">+     case ExtensionsGL::MAX_TEXTURE_MAX_ANISOTROPY_EXT: // EXT_texture_filter_anisotropic</span>
          if (m_extTextureFilterAnisotropic)
<span class="udiff-line-modified-removed">-             return getUnsignedIntParameter(Extensions3D::MAX_TEXTURE_MAX_ANISOTROPY_EXT);</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;getParameter&quot;, &quot;invalid parameter name, EXT_texture_filter_anisotropic not enabled&quot;);</span>
<span class="udiff-line-modified-added">+             return getFloatParameter(ExtensionsGL::MAX_TEXTURE_MAX_ANISOTROPY_EXT);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;getParameter&quot;, &quot;invalid parameter name, EXT_texture_filter_anisotropic not enabled&quot;);</span>
          return nullptr;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FRAGMENT_SHADER_DERIVATIVE_HINT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FRAGMENT_SHADER_DERIVATIVE_HINT:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_3D_TEXTURE_SIZE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_3D_TEXTURE_SIZE:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_ARRAY_TEXTURE_LAYERS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_ARRAY_TEXTURE_LAYERS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_COLOR_ATTACHMENTS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_COLOR_ATTACHMENTS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:</span>
          return getInt64Parameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_COMBINED_UNIFORM_BLOCKS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_COMBINED_UNIFORM_BLOCKS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:</span>
          return getInt64Parameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_DRAW_BUFFERS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_DRAW_BUFFERS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_ELEMENT_INDEX:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_ELEMENT_INDEX:</span>
          return getInt64Parameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_ELEMENTS_INDICES:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_ELEMENTS_INDICES:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_ELEMENTS_VERTICES:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_ELEMENTS_VERTICES:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_FRAGMENT_UNIFORM_COMPONENTS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_FRAGMENT_UNIFORM_COMPONENTS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_FRAGMENT_UNIFORM_BLOCKS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_FRAGMENT_UNIFORM_BLOCKS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_PROGRAM_TEXEL_OFFSET:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_PROGRAM_TEXEL_OFFSET:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_SAMPLES:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_SAMPLES:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_SERVER_WAIT_TIMEOUT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_SERVER_WAIT_TIMEOUT:</span>
          return getInt64Parameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_TEXTURE_LOD_BIAS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_TEXTURE_LOD_BIAS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_UNIFORM_BLOCK_SIZE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_UNIFORM_BLOCK_SIZE:</span>
          return getInt64Parameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_UNIFORM_BUFFER_BINDINGS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_UNIFORM_BUFFER_BINDINGS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_VARYING_COMPONENTS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_VARYING_COMPONENTS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_VERTEX_OUTPUT_COMPONENTS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_VERTEX_OUTPUT_COMPONENTS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_VERTEX_UNIFORM_BLOCKS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_VERTEX_UNIFORM_BLOCKS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX_VERTEX_UNIFORM_COMPONENTS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX_VERTEX_UNIFORM_COMPONENTS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MIN_PROGRAM_TEXEL_OFFSET:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MIN_PROGRAM_TEXEL_OFFSET:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::PACK_ROW_LENGTH:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::PACK_ROW_LENGTH:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::PACK_SKIP_PIXELS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::PACK_SKIP_PIXELS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::PACK_SKIP_ROWS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::PACK_SKIP_ROWS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNPACK_IMAGE_HEIGHT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNPACK_IMAGE_HEIGHT:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNPACK_ROW_LENGTH:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNPACK_ROW_LENGTH:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNPACK_SKIP_IMAGES:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNPACK_SKIP_IMAGES:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNPACK_SKIP_PIXELS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNPACK_SKIP_PIXELS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNPACK_SKIP_ROWS:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNPACK_SKIP_ROWS:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RASTERIZER_DISCARD:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RASTERIZER_DISCARD:</span>
          return getBooleanParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SAMPLE_ALPHA_TO_COVERAGE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SAMPLE_ALPHA_TO_COVERAGE:</span>
          return getBooleanParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SAMPLE_COVERAGE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SAMPLE_COVERAGE:</span>
          return getBooleanParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::TRANSFORM_FEEDBACK_ACTIVE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::TRANSFORM_FEEDBACK_ACTIVE:</span>
          return getBooleanParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::TRANSFORM_FEEDBACK_PAUSED:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::TRANSFORM_FEEDBACK_PAUSED:</span>
          return getBooleanParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNIFORM_BUFFER_OFFSET_ALIGNMENT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::UNIFORM_BUFFER_OFFSET_ALIGNMENT:</span>
          return getIntParameter(pname);
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::VERTEX_ARRAY_BINDING:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::VERTEX_ARRAY_BINDING:</span>
          if (m_boundVertexArrayObject-&gt;isDefaultObject())
              return nullptr;
          return makeRefPtr(static_cast&lt;WebGLVertexArrayObject&amp;&gt;(*m_boundVertexArrayObject));
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER0:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER1:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER2:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER3:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER4:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER5:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER6:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER7:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER8:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER9:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER10:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER11:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER12:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER13:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER14:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DRAW_BUFFER15:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER0:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER1:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER2:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER3:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER4:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER5:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER6:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER7:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER8:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER9:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER10:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER11:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER12:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER13:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER14:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DRAW_BUFFER15:</span>
          if (m_framebufferBinding)
              return m_framebufferBinding-&gt;getDrawBuffer(pname);
          return m_backDrawBuffer; // emulated backbuffer
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::READ_FRAMEBUFFER_BINDING:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::READ_FRAMEBUFFER_BINDING:</span>
          return m_readFramebufferBinding;
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COPY_READ_BUFFER:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::COPY_WRITE_BUFFER:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::PIXEL_PACK_BUFFER_BINDING:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::PIXEL_UNPACK_BUFFER_BINDING:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::READ_BUFFER:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SAMPLER_BINDING:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::TEXTURE_BINDING_2D_ARRAY:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::TEXTURE_BINDING_3D:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::TRANSFORM_FEEDBACK_BUFFER_BINDING:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::UNIFORM_BUFFER_BINDING:</span>
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;getParameter&quot;, &quot;parameter name not yet supported&quot;);</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::TRANSFORM_FEEDBACK_BINDING:</span>
<span class="udiff-line-modified-added">+         return m_boundTransformFeedback;</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::TRANSFORM_FEEDBACK_BUFFER_BINDING:</span>
<span class="udiff-line-modified-added">+         return m_boundTransformFeedbackBuffer;</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SAMPLER_BINDING:</span>
<span class="udiff-line-modified-added">+         return m_boundSamplers[m_activeTextureUnit];</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COPY_READ_BUFFER:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::COPY_WRITE_BUFFER:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::PIXEL_PACK_BUFFER_BINDING:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::PIXEL_UNPACK_BUFFER_BINDING:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::READ_BUFFER:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::TEXTURE_BINDING_2D_ARRAY:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::TEXTURE_BINDING_3D:</span>
<span class="udiff-line-added">+     case GraphicsContextGL::UNIFORM_BUFFER_BINDING:</span>
<span class="udiff-line-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;getParameter&quot;, &quot;parameter name not yet supported&quot;);</span>
          return nullptr;
      default:
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, &quot;getParameter&quot;, &quot;invalid parameter name&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, &quot;getParameter&quot;, &quot;invalid parameter name&quot;);</span>
          return nullptr;
      }
  }
  
<span class="udiff-line-modified-removed">- bool WebGL2RenderingContext::validateIndexArrayConservative(GC3Denum type, unsigned&amp; numElementsRequired)</span>
<span class="udiff-line-modified-added">+ bool WebGL2RenderingContext::validateIndexArrayConservative(GCGLenum type, unsigned&amp; numElementsRequired)</span>
  {
      // Performs conservative validation by caching a maximum index of
      // the given type per element array buffer. If all of the bound
      // array buffers have enough elements to satisfy that maximum
      // index, skips the expensive per-draw-call iteration in
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2102,29 +2331,29 @@</span>
      RefPtr&lt;WebGLBuffer&gt; elementArrayBuffer = m_boundVertexArrayObject-&gt;getElementArrayBuffer();
  
      if (!elementArrayBuffer)
          return false;
  
<span class="udiff-line-modified-removed">-     GC3Dsizeiptr numElements = elementArrayBuffer-&gt;byteLength();</span>
<span class="udiff-line-modified-added">+     GCGLsizeiptr numElements = elementArrayBuffer-&gt;byteLength();</span>
      // The case count==0 is already dealt with in drawElements before validateIndexArrayConservative.
      if (!numElements)
          return false;
      auto buffer = elementArrayBuffer-&gt;elementArrayBuffer();
      ASSERT(buffer);
  
      Optional&lt;unsigned&gt; maxIndex = elementArrayBuffer-&gt;getCachedMaxIndex(type);
      if (!maxIndex) {
          // Compute the maximum index in the entire buffer for the given type of index.
          switch (type) {
<span class="udiff-line-modified-removed">-         case GraphicsContext3D::UNSIGNED_BYTE:</span>
<span class="udiff-line-modified-removed">-             maxIndex = getMaxIndex&lt;GC3Dubyte&gt;(buffer, 0, numElements);</span>
<span class="udiff-line-modified-added">+         case GraphicsContextGL::UNSIGNED_BYTE:</span>
<span class="udiff-line-modified-added">+             maxIndex = getMaxIndex&lt;GCGLubyte&gt;(buffer, 0, numElements);</span>
              break;
<span class="udiff-line-modified-removed">-         case GraphicsContext3D::UNSIGNED_SHORT:</span>
<span class="udiff-line-modified-removed">-             maxIndex = getMaxIndex&lt;GC3Dushort&gt;(buffer, 0, numElements / sizeof(GC3Dushort));</span>
<span class="udiff-line-modified-added">+         case GraphicsContextGL::UNSIGNED_SHORT:</span>
<span class="udiff-line-modified-added">+             maxIndex = getMaxIndex&lt;GCGLushort&gt;(buffer, 0, numElements / sizeof(GCGLushort));</span>
              break;
<span class="udiff-line-modified-removed">-         case GraphicsContext3D::UNSIGNED_INT:</span>
<span class="udiff-line-modified-removed">-             maxIndex = getMaxIndex&lt;GC3Duint&gt;(buffer, 0, numElements / sizeof(GC3Duint));</span>
<span class="udiff-line-modified-added">+         case GraphicsContextGL::UNSIGNED_INT:</span>
<span class="udiff-line-modified-added">+             maxIndex = getMaxIndex&lt;GCGLuint&gt;(buffer, 0, numElements / sizeof(GCGLuint));</span>
              break;
          default:
              return false;
          }
          if (maxIndex)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2142,43 +2371,255 @@</span>
      numElementsRequired = checkedNumElementsRequired.value();
  
      return true;
  }
  
<span class="udiff-line-modified-removed">- bool WebGL2RenderingContext::validateBlendEquation(const char* functionName, GC3Denum mode)</span>
<span class="udiff-line-modified-added">+ bool WebGL2RenderingContext::validateBlendEquation(const char* functionName, GCGLenum mode)</span>
  {
      switch (mode) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FUNC_ADD:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FUNC_SUBTRACT:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::FUNC_REVERSE_SUBTRACT:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MIN:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::MAX:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FUNC_ADD:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FUNC_SUBTRACT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::FUNC_REVERSE_SUBTRACT:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MIN:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::MAX:</span>
          return true;
      default:
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, functionName, &quot;invalid mode&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, functionName, &quot;invalid mode&quot;);</span>
          return false;
      }
  }
  
<span class="udiff-line-modified-removed">- bool WebGL2RenderingContext::validateCapability(const char* functionName, GC3Denum cap)</span>
<span class="udiff-line-modified-added">+ bool WebGL2RenderingContext::validateCapability(const char* functionName, GCGLenum cap)</span>
  {
      switch (cap) {
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::BLEND:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::CULL_FACE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DEPTH_TEST:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::DITHER:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::POLYGON_OFFSET_FILL:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SAMPLE_ALPHA_TO_COVERAGE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SAMPLE_COVERAGE:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::SCISSOR_TEST:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::STENCIL_TEST:</span>
<span class="udiff-line-modified-removed">-     case GraphicsContext3D::RASTERIZER_DISCARD:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::BLEND:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::CULL_FACE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DEPTH_TEST:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::DITHER:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::POLYGON_OFFSET_FILL:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SAMPLE_ALPHA_TO_COVERAGE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SAMPLE_COVERAGE:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::SCISSOR_TEST:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::STENCIL_TEST:</span>
<span class="udiff-line-modified-added">+     case GraphicsContextGL::RASTERIZER_DISCARD:</span>
          return true;
      default:
<span class="udiff-line-modified-removed">-         synthesizeGLError(GraphicsContext3D::INVALID_ENUM, functionName, &quot;invalid capability&quot;);</span>
<span class="udiff-line-modified-added">+         synthesizeGLError(GraphicsContextGL::INVALID_ENUM, functionName, &quot;invalid capability&quot;);</span>
          return false;
      }
  }
  
<span class="udiff-line-added">+ void WebGL2RenderingContext::compressedTexImage2D(GCGLenum target, GCGLint level, GCGLenum internalformat, GCGLsizei width, GCGLsizei height, GCGLint border, GCGLsizei imageSize, GCGLint64 offset)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(target);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(level);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(internalformat);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(width);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(height);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(border);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(imageSize);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(offset);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] compressedTexImage2D(PIXEL_UNPACK_BUFFER)&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::compressedTexImage2D(GCGLenum target, GCGLint level, GCGLenum internalformat, GCGLsizei width, GCGLsizei height, GCGLint border, ArrayBufferView&amp; srcData, GCGLuint srcOffset, GCGLuint srcLengthOverride)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(target);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(level);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(internalformat);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(width);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(height);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(border);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcData);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcOffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcLengthOverride);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] compressedTexImage2D(ArrayBufferView)&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::compressedTexSubImage2D(GLenum target, GLint level, GLint xoffset, GLint yoffset, GLsizei width, GLsizei height, GLenum format, GLsizei imageSize, GLintptr offset)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(target);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(level);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(xoffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(yoffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(width);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(height);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(format);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(imageSize);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(offset);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] compressedTexSubImage2D(PIXEL_UNPACK_BUFFER)&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::compressedTexSubImage2D(GLenum target, GLint level, GLint xoffset, GLint yoffset, GLsizei width, GLsizei height, GLenum format, ArrayBufferView&amp; srcData, GLuint srcOffset, GLuint srcLengthOverride)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(target);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(level);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(xoffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(yoffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(width);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(height);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(format);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcData);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcOffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcLengthOverride);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] compressedTexSubImage2D(ArrayBufferView)&quot;);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::uniform1fv(WebGLUniformLocation* location, Float32List data, GLuint srcOffset, GLuint srcLength)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(location);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(data);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcOffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcLength);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform1fv()&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::uniform2fv(WebGLUniformLocation* location, Float32List data, GLuint srcOffset, GLuint srcLength)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(location);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(data);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcOffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcLength);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform2fv()&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::uniform3fv(WebGLUniformLocation* location, Float32List data, GLuint srcOffset, GLuint srcLength)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(location);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(data);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcOffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcLength);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform3fv()&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::uniform4fv(WebGLUniformLocation* location, Float32List data, GLuint srcOffset, GLuint srcLength)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(location);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(data);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcOffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcLength);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform4fv()&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::uniform1iv(WebGLUniformLocation* location, Int32List data, GLuint srcOffset, GLuint srcLength)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(location);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(data);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcOffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcLength);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform1iv()&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::uniform2iv(WebGLUniformLocation* location, Int32List data, GLuint srcOffset, GLuint srcLength)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(location);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(data);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcOffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcLength);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform2iv()&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::uniform3iv(WebGLUniformLocation* location, Int32List data, GLuint srcOffset, GLuint srcLength)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(location);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(data);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcOffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcLength);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform3iv()&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::uniform4iv(WebGLUniformLocation* location, Int32List data, GLuint srcOffset, GLuint srcLength)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(location);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(data);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcOffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcLength);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniform4iv()&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::uniformMatrix2fv(WebGLUniformLocation* location, GLboolean transpose, Float32List data, GLuint srcOffset, GLuint srcLength)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(location);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(transpose);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(data);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcOffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcLength);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniformMatrix2fv()&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::uniformMatrix3fv(WebGLUniformLocation* location, GLboolean transpose, Float32List data, GLuint srcOffset, GLuint srcLength)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(location);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(transpose);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(data);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcOffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcLength);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniformMatrix3fv()&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::uniformMatrix4fv(WebGLUniformLocation* location, GLboolean transpose, Float32List data, GLuint srcOffset, GLuint srcLength)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(location);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(transpose);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(data);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcOffset);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(srcLength);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] uniformMatrix4fv()&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::readPixels(GLint x, GLint y, GLsizei width, GLsizei height, GLenum format, GLenum type, GLintptr offset)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(x);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(y);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(width);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(height);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(format);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(type);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(offset);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] readPixels()&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::readPixels(GLint x, GLint y, GLsizei width, GLsizei height, GLenum format, GLenum type, ArrayBufferView&amp; dstData, GLuint dstOffset)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     UNUSED_PARAM(x);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(y);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(width);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(height);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(format);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(type);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(dstData);</span>
<span class="udiff-line-added">+     UNUSED_PARAM(dstOffset);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LOG(WebGL, &quot;[[ NOT IMPLEMENTED ]] readPixels(ArrayBufferView)&quot;);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void WebGL2RenderingContext::uncacheDeletedBuffer(WebGLBuffer* buffer)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     ASSERT(buffer);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     WebGLRenderingContextBase::uncacheDeletedBuffer(buffer);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     size_t index = m_boundTransformFeedbackBuffers.find(buffer);</span>
<span class="udiff-line-added">+     if (index &lt; m_boundTransformFeedbackBuffers.size())</span>
<span class="udiff-line-added">+         m_boundTransformFeedbackBuffers[index] = nullptr;</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
  } // namespace WebCore
  
  #endif // ENABLE(WEBGL)
</pre>
<center><a href="OffscreenCanvasRenderingContext2D.idl.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="WebGL2RenderingContext.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>