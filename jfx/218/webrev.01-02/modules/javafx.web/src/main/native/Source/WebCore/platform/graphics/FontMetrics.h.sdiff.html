<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/FontMetrics.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FontDescription.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FontPlatformData.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/FontMetrics.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 18  */
 19 
 20 #ifndef FontMetrics_h
 21 #define FontMetrics_h
 22 
 23 #include &quot;FontBaseline.h&quot;
 24 #include &lt;wtf/MathExtras.h&gt;
 25 
 26 namespace WebCore {
 27 
 28 class FontMetrics {
 29 public:
 30     static const unsigned defaultUnitsPerEm = 1000;
 31 
 32     unsigned unitsPerEm() const { return m_unitsPerEm; }
 33     void setUnitsPerEm(unsigned unitsPerEm) { m_unitsPerEm = unitsPerEm; }
 34 
 35     float floatAscent(FontBaseline baselineType = AlphabeticBaseline) const
 36     {
 37         if (baselineType == AlphabeticBaseline)
<span class="line-modified"> 38             return m_ascent;</span>
 39         return floatHeight() / 2;
 40     }
 41 
<span class="line-modified"> 42     void setAscent(float ascent) { m_ascent = ascent; }</span>




 43 
 44     float floatDescent(FontBaseline baselineType = AlphabeticBaseline) const
 45     {
 46         if (baselineType == AlphabeticBaseline)
<span class="line-modified"> 47             return m_descent;</span>
 48         return floatHeight() / 2;
 49     }
 50 
<span class="line-modified"> 51     void setDescent(float descent) { m_descent = descent; }</span>




 52 
 53     float floatHeight(FontBaseline baselineType = AlphabeticBaseline) const
 54     {
 55         return floatAscent(baselineType) + floatDescent(baselineType);
 56     }
 57 
<span class="line-modified"> 58     float floatLineGap() const { return m_lineGap; }</span>
<span class="line-modified"> 59     void setLineGap(float lineGap) { m_lineGap = lineGap; }</span>




 60 
<span class="line-modified"> 61     float floatLineSpacing() const { return m_lineSpacing; }</span>
<span class="line-modified"> 62     void setLineSpacing(float lineSpacing) { m_lineSpacing = lineSpacing; }</span>




 63 
 64     float xHeight() const { return m_xHeight; }
 65     void setXHeight(float xHeight) { m_xHeight = xHeight; }
 66     bool hasXHeight() const { return m_xHeight &gt; 0; }
 67 
<span class="line-modified"> 68     bool hasCapHeight() const { return m_capHeight &gt; 0; }</span>
<span class="line-modified"> 69     float floatCapHeight() const { return m_capHeight; }</span>
<span class="line-modified"> 70     void setCapHeight(float capHeight) { m_capHeight = capHeight; }</span>




 71 
 72     // Integer variants of certain metrics, used for HTML rendering.
 73     int ascent(FontBaseline baselineType = AlphabeticBaseline) const
 74     {
 75         if (baselineType == AlphabeticBaseline)
<span class="line-modified"> 76             return lroundf(m_ascent);</span>
 77         return height() - height() / 2;
 78     }
 79 
 80     int descent(FontBaseline baselineType = AlphabeticBaseline) const
 81     {
 82         if (baselineType == AlphabeticBaseline)
<span class="line-modified"> 83             return lroundf(m_descent);</span>
 84         return height() / 2;
 85     }
 86 
 87     int height(FontBaseline baselineType = AlphabeticBaseline) const
 88     {
 89         return ascent(baselineType) + descent(baselineType);
 90     }
 91 
<span class="line-modified"> 92     int lineGap() const { return lroundf(m_lineGap); }</span>
<span class="line-modified"> 93     int lineSpacing() const { return lroundf(m_lineSpacing); }</span>
 94 
<span class="line-modified"> 95     int capHeight() const { return lroundf(m_capHeight); }</span>
 96 
 97     bool hasIdenticalAscentDescentAndLineGap(const FontMetrics&amp; other) const
 98     {
 99         return ascent() == other.ascent() &amp;&amp; descent() == other.descent() &amp;&amp; lineGap() == other.lineGap();
100     }
101 
102     float zeroWidth() const { return m_zeroWidth; }
103     void setZeroWidth(float zeroWidth) { m_zeroWidth = zeroWidth; }
104 
105     float underlinePosition() const { return m_underlinePosition; }
106     void setUnderlinePosition(float underlinePosition) { m_underlinePosition = underlinePosition; }
107 
108     float underlineThickness() const { return m_underlineThickness; }
109     void setUnderlineThickness(float underlineThickness) { m_underlineThickness = underlineThickness; }
110 
111 private:
112     friend class Font;
113 
114     void reset()
115     {
116         m_unitsPerEm = defaultUnitsPerEm;
<span class="line-modified">117         m_ascent = 0;</span>
<span class="line-modified">118         m_descent = 0;</span>
<span class="line-modified">119         m_lineGap = 0;</span>
<span class="line-modified">120         m_lineSpacing = 0;</span>






121         m_xHeight = 0;
<span class="line-removed">122         m_capHeight = 0;</span>
123         m_zeroWidth = 0;


124     }
125 
126     unsigned m_unitsPerEm { defaultUnitsPerEm };
<span class="line-modified">127     float m_ascent { 0 };</span>
<span class="line-modified">128     float m_descent { 0 };</span>
<span class="line-modified">129     float m_lineGap { 0 };</span>
<span class="line-modified">130     float m_lineSpacing { 0 };</span>










131     float m_zeroWidth { 0 };
132     float m_xHeight { 0 };
<span class="line-removed">133     float m_capHeight { 0 };</span>
134     float m_underlinePosition { 0 };
135     float m_underlineThickness { 0 };
136 };
137 
138 static inline float scaleEmToUnits(float x, unsigned unitsPerEm)
139 {
140     return unitsPerEm ? x / unitsPerEm : x;
141 }
142 
143 } // namespace WebCore
144 
145 #endif // FontMetrics_h
</pre>
</td>
<td>
<hr />
<pre>
 18  */
 19 
 20 #ifndef FontMetrics_h
 21 #define FontMetrics_h
 22 
 23 #include &quot;FontBaseline.h&quot;
 24 #include &lt;wtf/MathExtras.h&gt;
 25 
 26 namespace WebCore {
 27 
 28 class FontMetrics {
 29 public:
 30     static const unsigned defaultUnitsPerEm = 1000;
 31 
 32     unsigned unitsPerEm() const { return m_unitsPerEm; }
 33     void setUnitsPerEm(unsigned unitsPerEm) { m_unitsPerEm = unitsPerEm; }
 34 
 35     float floatAscent(FontBaseline baselineType = AlphabeticBaseline) const
 36     {
 37         if (baselineType == AlphabeticBaseline)
<span class="line-modified"> 38             return m_floatAscent;</span>
 39         return floatHeight() / 2;
 40     }
 41 
<span class="line-modified"> 42     void setAscent(float ascent)</span>
<span class="line-added"> 43     {</span>
<span class="line-added"> 44         m_floatAscent = ascent;</span>
<span class="line-added"> 45         m_intAscent = lroundf(ascent);</span>
<span class="line-added"> 46     }</span>
 47 
 48     float floatDescent(FontBaseline baselineType = AlphabeticBaseline) const
 49     {
 50         if (baselineType == AlphabeticBaseline)
<span class="line-modified"> 51             return m_floatDescent;</span>
 52         return floatHeight() / 2;
 53     }
 54 
<span class="line-modified"> 55     void setDescent(float descent)</span>
<span class="line-added"> 56     {</span>
<span class="line-added"> 57         m_floatDescent = descent;</span>
<span class="line-added"> 58         m_intDescent = lroundf(descent);</span>
<span class="line-added"> 59     }</span>
 60 
 61     float floatHeight(FontBaseline baselineType = AlphabeticBaseline) const
 62     {
 63         return floatAscent(baselineType) + floatDescent(baselineType);
 64     }
 65 
<span class="line-modified"> 66     float floatLineGap() const { return m_floatLineGap; }</span>
<span class="line-modified"> 67     void setLineGap(float lineGap)</span>
<span class="line-added"> 68     {</span>
<span class="line-added"> 69         m_floatLineGap = lineGap;</span>
<span class="line-added"> 70         m_intLineGap = lroundf(lineGap);</span>
<span class="line-added"> 71     }</span>
 72 
<span class="line-modified"> 73     float floatLineSpacing() const { return m_floatLineSpacing; }</span>
<span class="line-modified"> 74     void setLineSpacing(float lineSpacing)</span>
<span class="line-added"> 75     {</span>
<span class="line-added"> 76         m_floatLineSpacing = lineSpacing;</span>
<span class="line-added"> 77         m_intLineSpacing = lroundf(lineSpacing);</span>
<span class="line-added"> 78     }</span>
 79 
 80     float xHeight() const { return m_xHeight; }
 81     void setXHeight(float xHeight) { m_xHeight = xHeight; }
 82     bool hasXHeight() const { return m_xHeight &gt; 0; }
 83 
<span class="line-modified"> 84     bool hasCapHeight() const { return m_floatCapHeight &gt; 0; }</span>
<span class="line-modified"> 85     float floatCapHeight() const { return m_floatCapHeight; }</span>
<span class="line-modified"> 86     void setCapHeight(float capHeight)</span>
<span class="line-added"> 87     {</span>
<span class="line-added"> 88         m_floatCapHeight = capHeight;</span>
<span class="line-added"> 89         m_intCapHeight = lroundf(capHeight);</span>
<span class="line-added"> 90     }</span>
 91 
 92     // Integer variants of certain metrics, used for HTML rendering.
 93     int ascent(FontBaseline baselineType = AlphabeticBaseline) const
 94     {
 95         if (baselineType == AlphabeticBaseline)
<span class="line-modified"> 96             return m_intAscent;</span>
 97         return height() - height() / 2;
 98     }
 99 
100     int descent(FontBaseline baselineType = AlphabeticBaseline) const
101     {
102         if (baselineType == AlphabeticBaseline)
<span class="line-modified">103             return m_intDescent;</span>
104         return height() / 2;
105     }
106 
107     int height(FontBaseline baselineType = AlphabeticBaseline) const
108     {
109         return ascent(baselineType) + descent(baselineType);
110     }
111 
<span class="line-modified">112     int lineGap() const { return m_intLineGap; }</span>
<span class="line-modified">113     int lineSpacing() const { return m_intLineSpacing; }</span>
114 
<span class="line-modified">115     int capHeight() const { return m_intCapHeight; }</span>
116 
117     bool hasIdenticalAscentDescentAndLineGap(const FontMetrics&amp; other) const
118     {
119         return ascent() == other.ascent() &amp;&amp; descent() == other.descent() &amp;&amp; lineGap() == other.lineGap();
120     }
121 
122     float zeroWidth() const { return m_zeroWidth; }
123     void setZeroWidth(float zeroWidth) { m_zeroWidth = zeroWidth; }
124 
125     float underlinePosition() const { return m_underlinePosition; }
126     void setUnderlinePosition(float underlinePosition) { m_underlinePosition = underlinePosition; }
127 
128     float underlineThickness() const { return m_underlineThickness; }
129     void setUnderlineThickness(float underlineThickness) { m_underlineThickness = underlineThickness; }
130 
131 private:
132     friend class Font;
133 
134     void reset()
135     {
136         m_unitsPerEm = defaultUnitsPerEm;
<span class="line-modified">137         m_floatAscent = 0;</span>
<span class="line-modified">138         m_floatDescent = 0;</span>
<span class="line-modified">139         m_floatLineGap = 0;</span>
<span class="line-modified">140         m_floatLineSpacing = 0;</span>
<span class="line-added">141         m_floatCapHeight = 0;</span>
<span class="line-added">142         m_intAscent = 0;</span>
<span class="line-added">143         m_intDescent = 0;</span>
<span class="line-added">144         m_intLineGap = 0;</span>
<span class="line-added">145         m_intLineSpacing = 0;</span>
<span class="line-added">146         m_intCapHeight = 0;</span>
147         m_xHeight = 0;

148         m_zeroWidth = 0;
<span class="line-added">149         m_underlinePosition = 0;</span>
<span class="line-added">150         m_underlineThickness = 0;</span>
151     }
152 
153     unsigned m_unitsPerEm { defaultUnitsPerEm };
<span class="line-modified">154 </span>
<span class="line-modified">155     float m_floatAscent { 0 };</span>
<span class="line-modified">156     float m_floatDescent { 0 };</span>
<span class="line-modified">157     float m_floatLineGap { 0 };</span>
<span class="line-added">158     float m_floatLineSpacing { 0 };</span>
<span class="line-added">159     float m_floatCapHeight { 0 };</span>
<span class="line-added">160 </span>
<span class="line-added">161     // Also cached as integers for performance.</span>
<span class="line-added">162     int m_intAscent { 0 };</span>
<span class="line-added">163     int m_intDescent { 0 };</span>
<span class="line-added">164     int m_intLineGap { 0 };</span>
<span class="line-added">165     int m_intLineSpacing { 0 };</span>
<span class="line-added">166     int m_intCapHeight { 0 };</span>
<span class="line-added">167 </span>
168     float m_zeroWidth { 0 };
169     float m_xHeight { 0 };

170     float m_underlinePosition { 0 };
171     float m_underlineThickness { 0 };
172 };
173 
174 static inline float scaleEmToUnits(float x, unsigned unitsPerEm)
175 {
176     return unitsPerEm ? x / unitsPerEm : x;
177 }
178 
179 } // namespace WebCore
180 
181 #endif // FontMetrics_h
</pre>
</td>
</tr>
</table>
<center><a href="FontDescription.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FontPlatformData.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>