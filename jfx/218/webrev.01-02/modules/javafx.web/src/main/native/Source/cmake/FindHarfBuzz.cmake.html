<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/cmake/FindHarfBuzz.cmake</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 # Copyright (c) 2012, Intel Corporation
  2 # Copyright (c) 2019 Sony Interactive Entertainment Inc.
  3 #
  4 # Redistribution and use in source and binary forms, with or without
  5 # modification, are permitted provided that the following conditions are met:
  6 #
  7 # * Redistributions of source code must retain the above copyright notice, this
  8 #   list of conditions and the following disclaimer.
  9 # * Redistributions in binary form must reproduce the above copyright notice,
 10 #   this list of conditions and the following disclaimer in the documentation
 11 #   and/or other materials provided with the distribution.
 12 # * Neither the name of Intel Corporation nor the names of its contributors may
 13 #   be used to endorse or promote products derived from this software without
 14 #   specific prior written permission.
 15 #
 16 # THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;
 17 # AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 18 # IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 19 # ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 20 # LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 21 # CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 22 # SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 23 # INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 24 # CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 25 # ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 26 # POSSIBILITY OF SUCH DAMAGE.
 27 #
 28 # Try to find Harfbuzz include and library directories.
 29 #
 30 # After successful discovery, this will set for inclusion where needed:
 31 # HarfBuzz_INCLUDE_DIRS - containg the HarfBuzz headers
 32 # HarfBuzz_LIBRARIES - containg the HarfBuzz library
 33 
 34 #[=======================================================================[.rst:
 35 FindHarfBuzz
 36 --------------
 37 
 38 Find HarfBuzz headers and libraries.
 39 
 40 Imported Targets
 41 ^^^^^^^^^^^^^^^^
 42 
 43 ``HarfBuzz::HarfBuzz``
 44   The HarfBuzz library, if found.
 45 
 46 ``HarfBuzz::ICU``
 47   The HarfBuzz ICU library, if found.
 48 
 49 Result Variables
 50 ^^^^^^^^^^^^^^^^
 51 
 52 This will define the following variables in your project:
 53 
 54 ``HarfBuzz_FOUND``
 55   true if (the requested version of) HarfBuzz is available.
 56 ``HarfBuzz_VERSION``
 57   the version of HarfBuzz.
 58 ``HarfBuzz_LIBRARIES``
 59   the libraries to link against to use HarfBuzz.
 60 ``HarfBuzz_INCLUDE_DIRS``
 61   where to find the HarfBuzz headers.
 62 ``HarfBuzz_COMPILE_OPTIONS``
 63   this should be passed to target_compile_options(), if the
 64   target is not used for linking
 65 
 66 #]=======================================================================]
 67 
 68 include(FindPkgConfig)
 69 pkg_check_modules(PC_HARFBUZZ QUIET harfbuzz)
 70 set(HarfBuzz_COMPILE_OPTIONS ${PC_HARFBUZZ_CFLAGS_OTHER})
 71 set(HarfBuzz_VERSION ${PC_HARFBUZZ_CFLAGS_VERSION})
 72 
 73 find_path(HarfBuzz_INCLUDE_DIR
 74     NAMES hb.h
 75     HINTS ${PC_HARFBUZZ_INCLUDEDIR} ${PC_HARFBUZZ_INCLUDE_DIRS}
 76     PATH_SUFFIXES harfbuzz
 77 )
 78 
 79 find_library(HarfBuzz_LIBRARY
 80     NAMES ${HarfBuzz_NAMES} harfbuzz
 81     HINTS ${PC_HARFBUZZ_LIBDIR} ${PC_HARFBUZZ_LIBRARY_DIRS}
 82 )
 83 
 84 if (HarfBuzz_INCLUDE_DIR AND NOT HarfBuzz_VERSION)
 85     if (EXISTS &quot;${HarfBuzz_INCLUDE_DIR}/hb-version.h&quot;)
 86         file(READ &quot;${HarfBuzz_INCLUDE_DIR}/hb-version.h&quot; _harfbuzz_version_content)
 87 
 88         string(REGEX MATCH &quot;#define +HB_VERSION_STRING +\&quot;([0-9]+\.[0-9]+\.[0-9]+)\&quot;&quot; _dummy &quot;${_harfbuzz_version_content}&quot;)
 89         set(HarfBuzz_VERSION &quot;${CMAKE_MATCH_1}&quot;)
 90     endif ()
 91 endif ()
 92 
 93 if (&quot;${HarfBuzz_FIND_VERSION}&quot; VERSION_GREATER &quot;${HarfBuzz_VERSION}&quot;)
 94     message(FATAL_ERROR &quot;Required version (&quot; ${HarfBuzz_FIND_VERSION} &quot;) is higher than found version (&quot; ${HarfBuzz_VERSION} &quot;)&quot;)
 95 endif ()
 96 
 97 # Find components
 98 if (HarfBuzz_INCLUDE_DIR AND HarfBuzz_LIBRARY)
 99     set(_HarfBuzz_REQUIRED_LIBS_FOUND ON)
100     set(HarfBuzz_LIBS_FOUND &quot;HarfBuzz (required): ${HarfBuzz_LIBRARY}&quot;)
101 else ()
102     set(_HarfBuzz_REQUIRED_LIBS_FOUND OFF)
103     set(HarfBuzz_LIBS_NOT_FOUND &quot;HarfBuzz (required)&quot;)
104 endif ()
105 
106 if (&quot;ICU&quot; IN_LIST HarfBuzz_FIND_COMPONENTS)
107     pkg_check_modules(PC_HARFBUZZ_ICU QUIET harfbuzz-icu)
108     set(HarfBuzz_ICU_COMPILE_OPTIONS ${PC_HARFBUZZ_ICU_CFLAGS_OTHER})
109 
110     find_library(HarfBuzz_ICU_LIBRARY
111         NAMES ${HarfBuzz_ICU_NAMES} harfbuzz-icu
112         HINTS ${PC_HARFBUZZ_ICU_LIBDIR} ${PC_HARFBUZZ_ICU_LIBRARY_DIRS}
113     )
114 
115     if (HarfBuzz_ICU_LIBRARY)
116         if (HarfBuzz_FIND_REQUIRED_ICU)
117             list(APPEND HarfBuzz_LIBS_FOUND &quot;ICU (required): ${HarfBuzz_ICU_LIBRARY}&quot;)
118         else ()
119            list(APPEND HarfBuzz_LIBS_FOUND &quot;ICU (optional): ${HarfBuzz_ICU_LIBRARY}&quot;)
120         endif ()
121     else ()
122         if (HarfBuzz_FIND_REQUIRED_ICU)
123            set(_HarfBuzz_REQUIRED_LIBS_FOUND OFF)
124            list(APPEND HarfBuzz_LIBS_NOT_FOUND &quot;ICU (required)&quot;)
125         else ()
126            list(APPEND HarfBuzz_LIBS_NOT_FOUND &quot;ICU (optional)&quot;)
127         endif ()
128     endif ()
129 endif ()
130 
131 if (NOT HarfBuzz_FIND_QUIETLY)
132     if (HarfBuzz_LIBS_FOUND)
133         message(STATUS &quot;Found the following HarfBuzz libraries:&quot;)
134         foreach (found ${HarfBuzz_LIBS_FOUND})
135             message(STATUS &quot; ${found}&quot;)
136         endforeach ()
137     endif ()
138     if (HarfBuzz_LIBS_NOT_FOUND)
139         message(STATUS &quot;The following HarfBuzz libraries were not found:&quot;)
140         foreach (found ${HarfBuzz_LIBS_NOT_FOUND})
141             message(STATUS &quot; ${found}&quot;)
142         endforeach ()
143     endif ()
144 endif ()
145 
146 include(FindPackageHandleStandardArgs)
147 find_package_handle_standard_args(HarfBuzz
148     FOUND_VAR HarfBuzz_FOUND
149     REQUIRED_VARS HarfBuzz_INCLUDE_DIR HarfBuzz_LIBRARY _HarfBuzz_REQUIRED_LIBS_FOUND
150     VERSION_VAR HarfBuzz_VERSION
151 )
152 
153 if (HarfBuzz_LIBRARY AND NOT TARGET HarfBuzz::HarfBuzz)
154     add_library(HarfBuzz::HarfBuzz UNKNOWN IMPORTED GLOBAL)
155     set_target_properties(HarfBuzz::HarfBuzz PROPERTIES
156         IMPORTED_LOCATION &quot;${HarfBuzz_LIBRARY}&quot;
157         INTERFACE_COMPILE_OPTIONS &quot;${HarfBuzz_COMPILE_OPTIONS}&quot;
158         INTERFACE_INCLUDE_DIRECTORIES &quot;${HarfBuzz_INCLUDE_DIR}&quot;
159     )
160 endif ()
161 
162 if (HarfBuzz_ICU_LIBRARY AND NOT TARGET HarfBuzz::ICU)
163     add_library(HarfBuzz::ICU UNKNOWN IMPORTED GLOBAL)
164     set_target_properties(HarfBuzz::ICU PROPERTIES
165         IMPORTED_LOCATION &quot;${HarfBuzz_ICU_LIBRARY}&quot;
166         INTERFACE_COMPILE_OPTIONS &quot;${HarfBuzz_ICU_COMPILE_OPTIONS}&quot;
167         INTERFACE_INCLUDE_DIRECTORIES &quot;${HarfBuzz_INCLUDE_DIR}&quot;
168     )
169 endif ()
170 
171 mark_as_advanced(
172     HarfBuzz_INCLUDE_DIR
173     HarfBuzz_LIBRARY
174     HarfBuzz_ICU_LIBRARY
175 )
176 
177 if (HarfBuzz_FOUND)
178    set(HarfBuzz_LIBRARIES ${HarfBuzz_LIBRARY} ${HarfBuzz_ICU_LIBRARY})
179    set(HarfBuzz_INCLUDE_DIRS ${HarfBuzz_INCLUDE_DIR})
180 endif ()
    </pre>
  </body>
</html>