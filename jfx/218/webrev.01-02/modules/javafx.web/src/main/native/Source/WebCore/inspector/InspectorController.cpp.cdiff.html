<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/inspector/InspectorController.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="InspectorCanvas.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="InspectorController.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/inspector/InspectorController.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 36,17 ***</span>
  #include &quot;CommonVM.h&quot;
  #include &quot;DOMWindow.h&quot;
  #include &quot;DOMWrapperWorld.h&quot;
  #include &quot;Frame.h&quot;
  #include &quot;GraphicsContext.h&quot;
  #include &quot;InspectorApplicationCacheAgent.h&quot;
  #include &quot;InspectorCPUProfilerAgent.h&quot;
  #include &quot;InspectorCSSAgent.h&quot;
  #include &quot;InspectorCanvasAgent.h&quot;
  #include &quot;InspectorClient.h&quot;
  #include &quot;InspectorDOMAgent.h&quot;
<span class="line-removed">- #include &quot;InspectorDOMDebuggerAgent.h&quot;</span>
  #include &quot;InspectorDOMStorageAgent.h&quot;
  #include &quot;InspectorDatabaseAgent.h&quot;
  #include &quot;InspectorDatabaseResource.h&quot;
  #include &quot;InspectorFrontendClient.h&quot;
  #include &quot;InspectorIndexedDBAgent.h&quot;
<span class="line-new-header">--- 36,17 ---</span>
  #include &quot;CommonVM.h&quot;
  #include &quot;DOMWindow.h&quot;
  #include &quot;DOMWrapperWorld.h&quot;
  #include &quot;Frame.h&quot;
  #include &quot;GraphicsContext.h&quot;
<span class="line-added">+ #include &quot;InspectorAnimationAgent.h&quot;</span>
  #include &quot;InspectorApplicationCacheAgent.h&quot;
  #include &quot;InspectorCPUProfilerAgent.h&quot;
  #include &quot;InspectorCSSAgent.h&quot;
  #include &quot;InspectorCanvasAgent.h&quot;
  #include &quot;InspectorClient.h&quot;
  #include &quot;InspectorDOMAgent.h&quot;
  #include &quot;InspectorDOMStorageAgent.h&quot;
  #include &quot;InspectorDatabaseAgent.h&quot;
  #include &quot;InspectorDatabaseResource.h&quot;
  #include &quot;InspectorFrontendClient.h&quot;
  #include &quot;InspectorIndexedDBAgent.h&quot;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 62,16 ***</span>
<span class="line-new-header">--- 62,18 ---</span>
  #include &quot;JSDOMWindowCustom.h&quot;
  #include &quot;JSExecState.h&quot;
  #include &quot;Page.h&quot;
  #include &quot;PageAuditAgent.h&quot;
  #include &quot;PageConsoleAgent.h&quot;
<span class="line-added">+ #include &quot;PageDOMDebuggerAgent.h&quot;</span>
  #include &quot;PageDebuggerAgent.h&quot;
  #include &quot;PageHeapAgent.h&quot;
  #include &quot;PageNetworkAgent.h&quot;
  #include &quot;PageRuntimeAgent.h&quot;
  #include &quot;PageScriptDebugServer.h&quot;
  #include &quot;Settings.h&quot;
<span class="line-added">+ #include &quot;SharedBuffer.h&quot;</span>
  #include &quot;WebInjectedScriptHost.h&quot;
  #include &quot;WebInjectedScriptManager.h&quot;
  #include &lt;JavaScriptCore/IdentifiersFactory.h&gt;
  #include &lt;JavaScriptCore/InspectorAgent.h&gt;
  #include &lt;JavaScriptCore/InspectorBackendDispatcher.h&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 160,11 ***</span>
      m_agents.append(WTFMove(debuggerAgent));
  
      m_agents.append(makeUnique&lt;PageNetworkAgent&gt;(pageContext));
      m_agents.append(makeUnique&lt;InspectorCSSAgent&gt;(pageContext));
      ensureDOMAgent();
<span class="line-modified">!     m_agents.append(makeUnique&lt;InspectorDOMDebuggerAgent&gt;(pageContext, debuggerAgentPtr));</span>
      m_agents.append(makeUnique&lt;InspectorApplicationCacheAgent&gt;(pageContext));
      m_agents.append(makeUnique&lt;InspectorLayerTreeAgent&gt;(pageContext));
      m_agents.append(makeUnique&lt;InspectorWorkerAgent&gt;(pageContext));
      m_agents.append(makeUnique&lt;InspectorDOMStorageAgent&gt;(pageContext));
      m_agents.append(makeUnique&lt;InspectorDatabaseAgent&gt;(pageContext));
<span class="line-new-header">--- 162,11 ---</span>
      m_agents.append(WTFMove(debuggerAgent));
  
      m_agents.append(makeUnique&lt;PageNetworkAgent&gt;(pageContext));
      m_agents.append(makeUnique&lt;InspectorCSSAgent&gt;(pageContext));
      ensureDOMAgent();
<span class="line-modified">!     m_agents.append(makeUnique&lt;PageDOMDebuggerAgent&gt;(pageContext, debuggerAgentPtr));</span>
      m_agents.append(makeUnique&lt;InspectorApplicationCacheAgent&gt;(pageContext));
      m_agents.append(makeUnique&lt;InspectorLayerTreeAgent&gt;(pageContext));
      m_agents.append(makeUnique&lt;InspectorWorkerAgent&gt;(pageContext));
      m_agents.append(makeUnique&lt;InspectorDOMStorageAgent&gt;(pageContext));
      m_agents.append(makeUnique&lt;InspectorDatabaseAgent&gt;(pageContext));
</pre>
<hr />
<pre>
<span class="line-old-header">*** 182,10 ***</span>
<span class="line-new-header">--- 184,11 ---</span>
  #endif
      m_agents.append(makeUnique&lt;PageHeapAgent&gt;(pageContext));
      m_agents.append(makeUnique&lt;PageAuditAgent&gt;(pageContext));
      m_agents.append(makeUnique&lt;InspectorCanvasAgent&gt;(pageContext));
      m_agents.append(makeUnique&lt;InspectorTimelineAgent&gt;(pageContext));
<span class="line-added">+     m_agents.append(makeUnique&lt;InspectorAnimationAgent&gt;(pageContext));</span>
  
      if (auto&amp; commandLineAPIHost = m_injectedScriptManager-&gt;commandLineAPIHost())
          commandLineAPIHost-&gt;init(m_instrumentingAgents.copyRef());
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 341,21 ***</span>
          m_inspectorClient-&gt;bringFrontendToFront();
      else if (Inspector::FrontendChannel* frontendChannel = m_inspectorClient-&gt;openLocalFrontend(this))
          connectFrontend(*frontendChannel);
  }
  
<span class="line-removed">- void InspectorController::setIsUnderTest(bool value)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     if (value == m_isUnderTest)</span>
<span class="line-removed">-         return;</span>
<span class="line-removed">- </span>
<span class="line-removed">-     m_isUnderTest = value;</span>
<span class="line-removed">- </span>
<span class="line-removed">-     // &lt;rdar://problem/26768628&gt; Try to catch suspicious scenarios where we may have a dangling frontend while running tests.</span>
<span class="line-removed">-     RELEASE_ASSERT(!m_isUnderTest || !m_frontendRouter-&gt;hasFrontends());</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  void InspectorController::evaluateForTestInFrontend(const String&amp; script)
  {
      ensureInspectorAgent().evaluateForTestInFrontend(script);
  }
  
<span class="line-new-header">--- 344,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 454,19 ***</span>
  bool InspectorController::developerExtrasEnabled() const
  {
      return m_page.settings().developerExtrasEnabled();
  }
  
<span class="line-modified">! bool InspectorController::canAccessInspectedScriptState(JSC::ExecState* scriptState) const</span>
  {
<span class="line-modified">!     JSLockHolder lock(scriptState);</span>
  
<span class="line-modified">!     JSDOMWindow* inspectedWindow = toJSDOMWindow(scriptState-&gt;vm(), scriptState-&gt;lexicalGlobalObject());</span>
      if (!inspectedWindow)
          return false;
  
<span class="line-modified">!     return BindingSecurity::shouldAllowAccessToDOMWindow(scriptState, inspectedWindow-&gt;wrapped(), DoNotReportSecurityError);</span>
  }
  
  InspectorFunctionCallHandler InspectorController::functionCallHandler() const
  {
      return WebCore::functionCallHandlerFromAnyThread;
<span class="line-new-header">--- 446,19 ---</span>
  bool InspectorController::developerExtrasEnabled() const
  {
      return m_page.settings().developerExtrasEnabled();
  }
  
<span class="line-modified">! bool InspectorController::canAccessInspectedScriptState(JSC::JSGlobalObject* lexicalGlobalObject) const</span>
  {
<span class="line-modified">!     JSLockHolder lock(lexicalGlobalObject);</span>
  
<span class="line-modified">!     JSDOMWindow* inspectedWindow = toJSDOMWindow(lexicalGlobalObject-&gt;vm(), lexicalGlobalObject);</span>
      if (!inspectedWindow)
          return false;
  
<span class="line-modified">!     return BindingSecurity::shouldAllowAccessToDOMWindow(lexicalGlobalObject, inspectedWindow-&gt;wrapped(), DoNotReportSecurityError);</span>
  }
  
  InspectorFunctionCallHandler InspectorController::functionCallHandler() const
  {
      return WebCore::functionCallHandlerFromAnyThread;
</pre>
<center><a href="InspectorCanvas.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="InspectorController.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>