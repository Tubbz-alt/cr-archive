<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/JavaScriptCore/interpreter/ProtoCallFrame.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="InterpreterInlines.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Register.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/interpreter/ProtoCallFrame.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (C) 2013-2018 Apple Inc. All Rights Reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (C) 2013-2019 Apple Inc. All Rights Reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   * 1. Redistributions of source code must retain the above copyright
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -43,18 +43,23 @@</span>
      Register argCountAndCodeOriginValue;
      Register thisArg;
      uint32_t paddedArgCount;
      bool hasArityMismatch;
      JSValue *args;
<span class="udiff-line-added">+     JSGlobalObject* globalObject;</span>
  
<span class="udiff-line-modified-removed">-     void init(CodeBlock*, JSObject*, JSValue, int, JSValue* otherArgs = 0);</span>
<span class="udiff-line-modified-added">+     inline void init(CodeBlock*, JSGlobalObject*, JSObject*, JSValue, int, JSValue* otherArgs = 0);</span>
  
<span class="udiff-line-modified-removed">-     CodeBlock* codeBlock() const { return codeBlockValue.Register::codeBlock(); }</span>
<span class="udiff-line-modified-removed">-     void setCodeBlock(CodeBlock* codeBlock) { codeBlockValue = codeBlock; }</span>
<span class="udiff-line-modified-added">+     inline CodeBlock* codeBlock() const;</span>
<span class="udiff-line-modified-added">+     inline void setCodeBlock(CodeBlock*);</span>
  
<span class="udiff-line-modified-removed">-     JSObject* callee() const { return calleeValue.Register::object(); }</span>
<span class="udiff-line-modified-removed">-     void setCallee(JSObject* callee) { calleeValue = callee; }</span>
<span class="udiff-line-modified-added">+     inline JSObject* callee() const;</span>
<span class="udiff-line-modified-added">+     inline void setCallee(JSObject*);</span>
<span class="udiff-line-added">+     void setGlobalObject(JSGlobalObject* object)</span>
<span class="udiff-line-added">+     {</span>
<span class="udiff-line-added">+         globalObject = object;</span>
<span class="udiff-line-added">+     }</span>
  
      int argumentCountIncludingThis() const { return argCountAndCodeOriginValue.payload(); }
      int argumentCount() const { return argumentCountIncludingThis() - 1; }
      void setArgumentCountIncludingThis(int count) { argCountAndCodeOriginValue.payload() = count; }
      void setPaddedArgCount(uint32_t argCount) { paddedArgCount = argCount; }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -76,24 +81,6 @@</span>
          ASSERT(static_cast&lt;int&gt;(argumentIndex) &lt; argumentCount());
          args[argumentIndex] = value;
      }
  };
  
<span class="udiff-line-removed">- inline void ProtoCallFrame::init(CodeBlock* codeBlock, JSObject* callee, JSValue thisValue, int argCountIncludingThis, JSValue* otherArgs)</span>
<span class="udiff-line-removed">- {</span>
<span class="udiff-line-removed">-     this-&gt;args = otherArgs;</span>
<span class="udiff-line-removed">-     this-&gt;setCodeBlock(codeBlock);</span>
<span class="udiff-line-removed">-     this-&gt;setCallee(callee);</span>
<span class="udiff-line-removed">-     this-&gt;setArgumentCountIncludingThis(argCountIncludingThis);</span>
<span class="udiff-line-removed">-     if (codeBlock &amp;&amp; argCountIncludingThis &lt; codeBlock-&gt;numParameters())</span>
<span class="udiff-line-removed">-         this-&gt;hasArityMismatch = true;</span>
<span class="udiff-line-removed">-     else</span>
<span class="udiff-line-removed">-         this-&gt;hasArityMismatch = false;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     // Round up argCountIncludingThis to keep the stack frame size aligned.</span>
<span class="udiff-line-removed">-     size_t paddedArgsCount = roundArgumentCountToAlignFrame(argCountIncludingThis);</span>
<span class="udiff-line-removed">-     this-&gt;setPaddedArgCount(paddedArgsCount);</span>
<span class="udiff-line-removed">-     this-&gt;clearCurrentVPC();</span>
<span class="udiff-line-removed">-     this-&gt;setThisValue(thisValue);</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-removed">- </span>
  } // namespace JSC
</pre>
<center><a href="InterpreterInlines.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Register.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>