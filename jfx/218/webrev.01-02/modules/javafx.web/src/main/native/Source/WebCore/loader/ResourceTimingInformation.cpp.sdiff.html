<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/loader/ResourceTimingInformation.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ResourceLoaderOptions.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SinkDocument.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/loader/ResourceTimingInformation.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 28 
 29 #include &quot;CachedResource.h&quot;
 30 #include &quot;DOMWindow.h&quot;
 31 #include &quot;Document.h&quot;
 32 #include &quot;Frame.h&quot;
 33 #include &quot;FrameLoader.h&quot;
 34 #include &quot;HTMLFrameOwnerElement.h&quot;
 35 #include &quot;LoadTiming.h&quot;
 36 #include &quot;Performance.h&quot;
 37 #include &quot;ResourceTiming.h&quot;
 38 #include &quot;RuntimeEnabledFeatures.h&quot;
 39 
 40 namespace WebCore {
 41 
 42 bool ResourceTimingInformation::shouldAddResourceTiming(CachedResource&amp; resource)
 43 {
 44     // FIXME: We can be less restrictive here.
 45     // &lt;https://github.com/w3c/resource-timing/issues/100&gt;
 46     if (!resource.resourceRequest().url().protocolIsInHTTPFamily())
 47         return false;
<span class="line-removed"> 48     if (resource.response().httpStatusCode() &gt;= 400)</span>
<span class="line-removed"> 49         return false;</span>
 50     if (resource.errorOccurred())
 51         return false;
 52     if (resource.wasCanceled())
 53         return false;
 54 
 55     if (resource.options().loadedFromOpaqueSource == LoadedFromOpaqueSource::Yes)
 56         return false;
 57 
 58     return true;
 59 }
 60 
 61 void ResourceTimingInformation::addResourceTiming(CachedResource&amp; resource, Document&amp; document, ResourceTiming&amp;&amp; resourceTiming)
 62 {
 63     ASSERT(RuntimeEnabledFeatures::sharedFeatures().resourceTimingEnabled());
 64     if (!ResourceTimingInformation::shouldAddResourceTiming(resource))
 65         return;
 66 
 67     auto iterator = m_initiatorMap.find(&amp;resource);
 68     if (iterator == m_initiatorMap.end())
 69         return;
</pre>
</td>
<td>
<hr />
<pre>
 28 
 29 #include &quot;CachedResource.h&quot;
 30 #include &quot;DOMWindow.h&quot;
 31 #include &quot;Document.h&quot;
 32 #include &quot;Frame.h&quot;
 33 #include &quot;FrameLoader.h&quot;
 34 #include &quot;HTMLFrameOwnerElement.h&quot;
 35 #include &quot;LoadTiming.h&quot;
 36 #include &quot;Performance.h&quot;
 37 #include &quot;ResourceTiming.h&quot;
 38 #include &quot;RuntimeEnabledFeatures.h&quot;
 39 
 40 namespace WebCore {
 41 
 42 bool ResourceTimingInformation::shouldAddResourceTiming(CachedResource&amp; resource)
 43 {
 44     // FIXME: We can be less restrictive here.
 45     // &lt;https://github.com/w3c/resource-timing/issues/100&gt;
 46     if (!resource.resourceRequest().url().protocolIsInHTTPFamily())
 47         return false;


 48     if (resource.errorOccurred())
 49         return false;
 50     if (resource.wasCanceled())
 51         return false;
 52 
 53     if (resource.options().loadedFromOpaqueSource == LoadedFromOpaqueSource::Yes)
 54         return false;
 55 
 56     return true;
 57 }
 58 
 59 void ResourceTimingInformation::addResourceTiming(CachedResource&amp; resource, Document&amp; document, ResourceTiming&amp;&amp; resourceTiming)
 60 {
 61     ASSERT(RuntimeEnabledFeatures::sharedFeatures().resourceTimingEnabled());
 62     if (!ResourceTimingInformation::shouldAddResourceTiming(resource))
 63         return;
 64 
 65     auto iterator = m_initiatorMap.find(&amp;resource);
 66     if (iterator == m_initiatorMap.end())
 67         return;
</pre>
</td>
</tr>
</table>
<center><a href="ResourceLoaderOptions.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SinkDocument.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>