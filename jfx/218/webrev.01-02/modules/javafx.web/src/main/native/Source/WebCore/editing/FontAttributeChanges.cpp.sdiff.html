<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/editing/FontAttributeChanges.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="EditorCommand.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="FrameSelection.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/editing/FontAttributeChanges.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 54 
 55 Ref&lt;MutableStyleProperties&gt; FontChanges::createStyleProperties() const
 56 {
 57     String familyNameForCSS;
 58     if (!!m_fontFamily)
 59         familyNameForCSS = platformFontFamilyNameForCSS();
 60 
 61     auto style = MutableStyleProperties::create();
 62     auto&amp; cssValuePool = CSSValuePool::singleton();
 63 
 64     if (!!familyNameForCSS)
 65         style-&gt;setProperty(CSSPropertyFontFamily, cssValuePool.createFontFamilyValue(familyNameForCSS));
 66 
 67     if (m_italic)
 68         style-&gt;setProperty(CSSPropertyFontStyle, *m_italic ? CSSValueItalic : CSSValueNormal);
 69 
 70     if (m_bold)
 71         style-&gt;setProperty(CSSPropertyFontWeight, *m_bold ? CSSValueBold : CSSValueNormal);
 72 
 73     if (m_fontSize)
<span class="line-modified"> 74         style-&gt;setProperty(CSSPropertyFontSize, cssValuePool.createValue(*m_fontSize, CSSPrimitiveValue::CSS_PX));</span>
 75 
 76     if (m_fontSizeDelta)
<span class="line-modified"> 77         style-&gt;setProperty(CSSPropertyWebkitFontSizeDelta, cssValuePool.createValue(*m_fontSizeDelta, CSSPrimitiveValue::CSS_PX));</span>
 78 
 79     return style;
 80 }
 81 
 82 static RefPtr&lt;CSSValueList&gt; cssValueListForShadow(const FontShadow&amp; shadow)
 83 {
 84     if (shadow.offset.isZero() &amp;&amp; !shadow.blurRadius)
 85         return nullptr;
 86 
 87     auto list = CSSValueList::createCommaSeparated();
 88     auto&amp; cssValuePool = CSSValuePool::singleton();
<span class="line-modified"> 89     auto width = cssValuePool.createValue(shadow.offset.width(), CSSPrimitiveValue::CSS_PX);</span>
<span class="line-modified"> 90     auto height = cssValuePool.createValue(shadow.offset.height(), CSSPrimitiveValue::CSS_PX);</span>
<span class="line-modified"> 91     auto blurRadius = cssValuePool.createValue(shadow.blurRadius, CSSPrimitiveValue::CSS_PX);</span>
 92     auto color = cssValuePool.createValue(shadow.color);
 93     list-&gt;prepend(CSSShadowValue::create(WTFMove(width), WTFMove(height), WTFMove(blurRadius), { }, { }, WTFMove(color)));
 94     return list.ptr();
 95 }
 96 
 97 EditAction FontAttributeChanges::editAction() const
 98 {
 99     if (!m_verticalAlign &amp;&amp; !m_backgroundColor &amp;&amp; !m_shadow &amp;&amp; !m_strikeThrough &amp;&amp; !m_underline) {
100         if (m_foregroundColor &amp;&amp; m_fontChanges.isEmpty())
101             return EditAction::SetColor;
102 
103         if (!m_foregroundColor &amp;&amp; !m_fontChanges.isEmpty())
104             return EditAction::SetFont;
105     }
106     return EditAction::ChangeAttributes;
107 }
108 
109 Ref&lt;EditingStyle&gt; FontAttributeChanges::createEditingStyle() const
110 {
111     auto style = m_fontChanges.createStyleProperties();
</pre>
</td>
<td>
<hr />
<pre>
 54 
 55 Ref&lt;MutableStyleProperties&gt; FontChanges::createStyleProperties() const
 56 {
 57     String familyNameForCSS;
 58     if (!!m_fontFamily)
 59         familyNameForCSS = platformFontFamilyNameForCSS();
 60 
 61     auto style = MutableStyleProperties::create();
 62     auto&amp; cssValuePool = CSSValuePool::singleton();
 63 
 64     if (!!familyNameForCSS)
 65         style-&gt;setProperty(CSSPropertyFontFamily, cssValuePool.createFontFamilyValue(familyNameForCSS));
 66 
 67     if (m_italic)
 68         style-&gt;setProperty(CSSPropertyFontStyle, *m_italic ? CSSValueItalic : CSSValueNormal);
 69 
 70     if (m_bold)
 71         style-&gt;setProperty(CSSPropertyFontWeight, *m_bold ? CSSValueBold : CSSValueNormal);
 72 
 73     if (m_fontSize)
<span class="line-modified"> 74         style-&gt;setProperty(CSSPropertyFontSize, cssValuePool.createValue(*m_fontSize, CSSUnitType::CSS_PX));</span>
 75 
 76     if (m_fontSizeDelta)
<span class="line-modified"> 77         style-&gt;setProperty(CSSPropertyWebkitFontSizeDelta, cssValuePool.createValue(*m_fontSizeDelta, CSSUnitType::CSS_PX));</span>
 78 
 79     return style;
 80 }
 81 
 82 static RefPtr&lt;CSSValueList&gt; cssValueListForShadow(const FontShadow&amp; shadow)
 83 {
 84     if (shadow.offset.isZero() &amp;&amp; !shadow.blurRadius)
 85         return nullptr;
 86 
 87     auto list = CSSValueList::createCommaSeparated();
 88     auto&amp; cssValuePool = CSSValuePool::singleton();
<span class="line-modified"> 89     auto width = cssValuePool.createValue(shadow.offset.width(), CSSUnitType::CSS_PX);</span>
<span class="line-modified"> 90     auto height = cssValuePool.createValue(shadow.offset.height(), CSSUnitType::CSS_PX);</span>
<span class="line-modified"> 91     auto blurRadius = cssValuePool.createValue(shadow.blurRadius, CSSUnitType::CSS_PX);</span>
 92     auto color = cssValuePool.createValue(shadow.color);
 93     list-&gt;prepend(CSSShadowValue::create(WTFMove(width), WTFMove(height), WTFMove(blurRadius), { }, { }, WTFMove(color)));
 94     return list.ptr();
 95 }
 96 
 97 EditAction FontAttributeChanges::editAction() const
 98 {
 99     if (!m_verticalAlign &amp;&amp; !m_backgroundColor &amp;&amp; !m_shadow &amp;&amp; !m_strikeThrough &amp;&amp; !m_underline) {
100         if (m_foregroundColor &amp;&amp; m_fontChanges.isEmpty())
101             return EditAction::SetColor;
102 
103         if (!m_foregroundColor &amp;&amp; !m_fontChanges.isEmpty())
104             return EditAction::SetFont;
105     }
106     return EditAction::ChangeAttributes;
107 }
108 
109 Ref&lt;EditingStyle&gt; FontAttributeChanges::createEditingStyle() const
110 {
111     auto style = m_fontChanges.createStyleProperties();
</pre>
</td>
</tr>
</table>
<center><a href="EditorCommand.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="FrameSelection.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>