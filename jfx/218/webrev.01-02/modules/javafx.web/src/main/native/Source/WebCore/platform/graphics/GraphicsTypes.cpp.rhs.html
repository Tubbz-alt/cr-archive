<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/GraphicsTypes.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (C) 2006 Apple Inc.  All rights reserved.
  3  * Copyright (C) 2012 Rik Cabanier (cabanier@adobe.com)
  4  * Copyright (C) 2014 Adobe Systems Incorporated. All rights reserved.
  5  *
  6  * Redistribution and use in source and binary forms, with or without
  7  * modification, are permitted provided that the following conditions
  8  * are met:
  9  * 1. Redistributions of source code must retain the above copyright
 10  *    notice, this list of conditions and the following disclaimer.
 11  * 2. Redistributions in binary form must reproduce the above copyright
 12  *    notice, this list of conditions and the following disclaimer in the
 13  *    documentation and/or other materials provided with the distribution.
 14  *
 15  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 16  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 17  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 18  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 19  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 20  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 21  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 22  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 23  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 24  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 25  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 26  */
 27 
 28 #include &quot;config.h&quot;
 29 #include &quot;GraphicsTypes.h&quot;
 30 
<a name="1" id="anc1"></a><span class="line-added"> 31 #include &quot;AlphaPremultiplication.h&quot;</span>
 32 #include &lt;wtf/Assertions.h&gt;
 33 #include &lt;wtf/text/TextStream.h&gt;
 34 #include &lt;wtf/text/WTFString.h&gt;
 35 
 36 namespace WebCore {
 37 
 38 static const char* const compositeOperatorNames[] = {
 39     &quot;clear&quot;,
 40     &quot;copy&quot;,
 41     &quot;source-over&quot;,
 42     &quot;source-in&quot;,
 43     &quot;source-out&quot;,
 44     &quot;source-atop&quot;,
 45     &quot;destination-over&quot;,
 46     &quot;destination-in&quot;,
 47     &quot;destination-out&quot;,
 48     &quot;destination-atop&quot;,
 49     &quot;xor&quot;,
 50     &quot;darker&quot;,
 51     &quot;lighter&quot;,
 52     &quot;difference&quot;
 53 };
 54 
 55 static const char* const blendOperatorNames[] = {
 56     &quot;normal&quot;,
 57     &quot;multiply&quot;,
 58     &quot;screen&quot;,
 59     &quot;darken&quot;,
 60     &quot;lighten&quot;,
 61     &quot;overlay&quot;,
 62     &quot;color-dodge&quot;,
 63     &quot;color-burn&quot;,
 64     &quot;hard-light&quot;,
 65     &quot;soft-light&quot;,
 66     &quot;difference&quot;,
 67     &quot;exclusion&quot;,
 68     &quot;hue&quot;,
 69     &quot;saturation&quot;,
 70     &quot;color&quot;,
 71     &quot;luminosity&quot;,
 72     &quot;plus-darker&quot;,
 73     &quot;plus-lighter&quot;
 74 };
<a name="2" id="anc2"></a><span class="line-modified"> 75 const uint8_t numCompositeOperatorNames = WTF_ARRAY_LENGTH(compositeOperatorNames);</span>
<span class="line-modified"> 76 const uint8_t numBlendOperatorNames = WTF_ARRAY_LENGTH(blendOperatorNames);</span>
 77 
 78 bool parseBlendMode(const String&amp; s, BlendMode&amp; blendMode)
 79 {
 80     for (unsigned i = 0; i &lt; numBlendOperatorNames; i++) {
 81         if (s == blendOperatorNames[i]) {
 82             blendMode = static_cast&lt;BlendMode&gt;(i + static_cast&lt;unsigned&gt;(BlendMode::Normal));
 83             return true;
 84         }
 85     }
 86 
 87     return false;
 88 }
 89 
 90 bool parseCompositeAndBlendOperator(const String&amp; s, CompositeOperator&amp; op, BlendMode&amp; blendOp)
 91 {
 92     for (int i = 0; i &lt; numCompositeOperatorNames; i++) {
 93         if (s == compositeOperatorNames[i]) {
 94             op = static_cast&lt;CompositeOperator&gt;(i);
 95             blendOp = BlendMode::Normal;
 96             return true;
 97         }
 98     }
 99 
100     if (parseBlendMode(s, blendOp)) {
101         // For now, blending will always assume source-over. This will be fixed in the future
<a name="3" id="anc3"></a><span class="line-modified">102         op = CompositeOperator::SourceOver;</span>
103         return true;
104     }
105 
106     return false;
107 }
108 
109 // FIXME: when we support blend modes in combination with compositing other than source-over
110 // this routine needs to be updated.
111 String compositeOperatorName(CompositeOperator op, BlendMode blendOp)
112 {
<a name="4" id="anc4"></a><span class="line-modified">113     ASSERT(op &gt;= CompositeOperator::Clear);</span>
<span class="line-modified">114     ASSERT(static_cast&lt;uint8_t&gt;(op) &lt; numCompositeOperatorNames);</span>
115     ASSERT(blendOp &gt;= BlendMode::Normal);
<a name="5" id="anc5"></a><span class="line-modified">116     ASSERT(static_cast&lt;uint8_t&gt;(blendOp) &lt;= numBlendOperatorNames);</span>
117     if (blendOp &gt; BlendMode::Normal)
118         return blendOperatorNames[static_cast&lt;unsigned&gt;(blendOp) - static_cast&lt;unsigned&gt;(BlendMode::Normal)];
<a name="6" id="anc6"></a><span class="line-modified">119     return compositeOperatorNames[static_cast&lt;unsigned&gt;(op)];</span>
120 }
121 
122 String blendModeName(BlendMode blendOp)
123 {
124     ASSERT(blendOp &gt;= BlendMode::Normal);
125     ASSERT(blendOp &lt;= BlendMode::PlusLighter);
126     return blendOperatorNames[static_cast&lt;unsigned&gt;(blendOp) - static_cast&lt;unsigned&gt;(BlendMode::Normal)];
127 }
128 
129 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, CompositeOperator op)
130 {
131     return ts &lt;&lt; compositeOperatorName(op, BlendMode::Normal);
132 }
133 
134 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, BlendMode blendMode)
135 {
136     return ts &lt;&lt; blendModeName(blendMode);
137 }
138 
139 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, WindRule rule)
140 {
141     switch (rule) {
142     case WindRule::NonZero:
143         ts &lt;&lt; &quot;NON-ZERO&quot;;
144         break;
145     case WindRule::EvenOdd:
146         ts &lt;&lt; &quot;EVEN-ODD&quot;;
147         break;
148     }
149 
150     return ts;
151 }
152 
153 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, LineCap capStyle)
154 {
155     switch (capStyle) {
156     case ButtCap:
157         ts &lt;&lt; &quot;BUTT&quot;;
158         break;
159     case RoundCap:
160         ts &lt;&lt; &quot;ROUND&quot;;
161         break;
162     case SquareCap:
163         ts &lt;&lt; &quot;SQUARE&quot;;
164         break;
165     }
166     return ts;
167 }
168 
169 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, LineJoin joinStyle)
170 {
171     switch (joinStyle) {
172     case MiterJoin:
173         ts &lt;&lt; &quot;MITER&quot;;
174         break;
175     case RoundJoin:
176         ts &lt;&lt; &quot;ROUND&quot;;
177         break;
178     case BevelJoin:
179         ts &lt;&lt; &quot;BEVEL&quot;;
180         break;
181     }
182     return ts;
183 }
184 
185 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, AlphaPremultiplication premultiplication)
186 {
187     switch (premultiplication) {
188     case AlphaPremultiplication::Premultiplied:
189         ts &lt;&lt; &quot;premultiplied&quot;;
190         break;
191     case AlphaPremultiplication::Unpremultiplied:
192         ts &lt;&lt; &quot;unpremultiplied&quot;;
193         break;
194     }
195     return ts;
196 }
197 
198 } // namespace WebCore
<a name="7" id="anc7"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="7" type="hidden" />
</body>
</html>