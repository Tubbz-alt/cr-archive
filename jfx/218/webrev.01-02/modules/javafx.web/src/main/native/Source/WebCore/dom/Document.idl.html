<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WebCore/dom/Document.idl</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (C) 2006, 2007, 2011, 2015 Apple Inc. All rights reserved.
  3  * Copyright (C) 2006, 2007 Samuel Weinig &lt;sam@webkit.org&gt;
  4  *
  5  * This library is free software; you can redistribute it and/or
  6  * modify it under the terms of the GNU Library General Public
  7  * License as published by the Free Software Foundation; either
  8  * version 2 of the License, or (at your option) any later version.
  9  *
 10  * This library is distributed in the hope that it will be useful,
 11  * but WITHOUT ANY WARRANTY; without even the implied warranty of
 12  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 13  * Library General Public License for more details.
 14  *
 15  * You should have received a copy of the GNU Library General Public License
 16  * along with this library; see the file COPYING.LIB.  If not, write to
 17  * the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 18  * Boston, MA 02110-1301, USA.
 19  */
 20 
 21 typedef (
 22 #if defined(ENABLE_WEBGL) &amp;&amp; ENABLE_WEBGL
 23     WebGLRenderingContext or
 24 #endif
 25 #if defined(ENABLE_WEBGL2) &amp;&amp; ENABLE_WEBGL2
 26     WebGL2RenderingContext or
 27 #endif
 28 #if defined(ENABLE_WEBGPU) &amp;&amp; ENABLE_WEBGPU
 29     GPUCanvasContext or
 30 #endif
 31     ImageBitmapRenderingContext or 
 32     CanvasRenderingContext2D) RenderingContext;
 33 
 34 [
 35     Constructor,
 36     ConstructorCallWith=Document,
 37     CustomToJSObject,
 38     CustomHeapSnapshot,
 39     DOMJIT,
 40     ExportMacro=WEBCORE_EXPORT,
 41     JSCustomHeader,
 42     JSCustomMarkFunction,
 43     JSGenerateToNativeObject,
 44 ] interface Document : Node {
 45     readonly attribute DOMImplementation implementation; // FIXME: Should be [SameObject].
 46     [ImplementedAs=urlForBindings] readonly attribute USVString URL;
 47     [ImplementedAs=urlForBindings] readonly attribute USVString documentURI;
 48     readonly attribute DOMString compatMode;
 49     [ImplementedAs=characterSetWithUTF8Fallback] readonly attribute DOMString characterSet;
 50     [ImplementedAs=characterSetWithUTF8Fallback] readonly attribute DOMString charset; // Historical alias of .characterSet,
 51     [ImplementedAs=characterSetWithUTF8Fallback] readonly attribute DOMString inputEncoding; // Historical alias of .characterSet.
 52     readonly attribute DOMString contentType;
 53 
 54     readonly attribute DocumentType? doctype;
 55     [DOMJIT=Getter] readonly attribute Element? documentElement;
 56 
 57     HTMLCollection getElementsByTagName(DOMString qualifiedName);
 58     HTMLCollection getElementsByTagNameNS(DOMString? namespaceURI, DOMString localName);
 59     HTMLCollection getElementsByClassName(DOMString classNames);
 60 
 61     [NewObject, MayThrowException, ImplementedAs=createElementForBindings] Element createElement(DOMString localName); // FIXME: missing options parameter.
 62     [NewObject, MayThrowException] Element createElementNS(DOMString? namespaceURI, DOMString qualifiedName); // FIXME: missing options parameter.
 63     [NewObject] DocumentFragment createDocumentFragment();
 64     [NewObject] Text createTextNode(DOMString data);
 65     [NewObject, MayThrowException] CDATASection createCDATASection(DOMString data);
 66     [NewObject] Comment createComment(DOMString data);
 67     [NewObject, MayThrowException] ProcessingInstruction createProcessingInstruction(DOMString target, DOMString data);
 68 
 69     [CEReactions, MayThrowException, NewObject] Node importNode(Node node, optional boolean deep = false);
 70     [CEReactions, MayThrowException] Node adoptNode(Node node);
 71 
 72     [NewObject, MayThrowException] Attr createAttribute(DOMString localName);
 73     [NewObject, MayThrowException] Attr createAttributeNS(DOMString? namespaceURI, DOMString qualifiedName);
 74 
 75     [MayThrowException, NewObject] Event createEvent(DOMString type);
 76 
 77     [NewObject] Range createRange();
 78 
 79     // NodeFilter.SHOW_ALL = 0xFFFFFFFF.
 80     [NewObject] NodeIterator createNodeIterator(Node root, optional unsigned long whatToShow = 0xFFFFFFFF, optional NodeFilter? filter = null);
 81     [NewObject] TreeWalker createTreeWalker(Node root, optional unsigned long whatToShow = 0xFFFFFFFF, optional NodeFilter? filter = null);
 82 
 83     // Extensions from HTML specification (https://html.spec.whatwg.org/#the-document-object).
 84     [PutForwards=href, Unforgeable] readonly attribute Location? location;
 85     attribute USVString domain;
 86     readonly attribute USVString referrer;
 87     attribute USVString cookie;
 88     readonly attribute DOMString lastModified;
 89     readonly attribute DocumentReadyState readyState;
 90 
 91     // DOM tree accessors.
 92     [CEReactions] attribute DOMString title;
 93     [CEReactions] attribute DOMString dir;
 94     [CEReactions, DOMJIT=Getter, ImplementedAs=bodyOrFrameset] attribute HTMLElement? body;
 95     readonly attribute HTMLHeadElement? head;
 96     readonly attribute HTMLCollection images; // Should be [SameObject].
 97     readonly attribute HTMLCollection embeds; // Should be [SameObject].
 98     readonly attribute HTMLCollection plugins; // Should be [SameObject].
 99     readonly attribute HTMLCollection links; // Should be [SameObject].
100     readonly attribute HTMLCollection forms; // Should be [SameObject].
101     readonly attribute HTMLCollection scripts; // Should be [SameObject].
102     NodeList getElementsByName([AtomString] DOMString elementName);
103     readonly attribute HTMLScriptElement? currentScript; // FIXME: Should return a HTMLOrSVGScriptElement.
104 
105     // dynamic markup insertion
106     // FIXME: The HTML spec says this should consult the &quot;responsible document&quot;. We should ensure
107     // that the caller document matches those semantics. It is possible we should replace it with
108     // the existing &#39;incumbent document&#39; concept.
109     [CEReactions, CallWith=ResponsibleDocument, ImplementedAs=openForBindings, MayThrowException] Document open(optional DOMString unused1, optional DOMString unused2); // both arguments are ignored.
110     [CallWith=ActiveWindow&amp;FirstWindow, ImplementedAs=openForBindings, MayThrowException] WindowProxy open(USVString url, DOMString name, DOMString features);
111     [CEReactions, ImplementedAs=closeForBindings, MayThrowException] void close();
112     [CEReactions, CallWith=ResponsibleDocument, MayThrowException] void write(DOMString... text);
113     [CEReactions, CallWith=ResponsibleDocument, MayThrowException] void writeln(DOMString... text);
114 
115     // User interaction.
116     [ImplementedAs=windowProxy] readonly attribute WindowProxy? defaultView;
117     boolean hasFocus();
118     [CEReactions] attribute DOMString designMode;
119     [CEReactions] boolean execCommand(DOMString commandId, optional boolean showUI = false, optional DOMString? value = null); // FIXME: value should not be nullable.
120     boolean queryCommandEnabled(DOMString commandId);
121     boolean queryCommandIndeterm(DOMString commandId);
122     boolean queryCommandState(DOMString commandId);
123     boolean queryCommandSupported(DOMString commandId);
124     DOMString queryCommandValue(DOMString commandId);
125     [EnabledAtRuntime=UndoManagerAPI] readonly attribute UndoManager undoManager;
126 
127     // Special event handler IDL attributes that only apply to Document objects.
128     [LenientThis] attribute EventHandler onreadystatechange;
129 
130     // Extensions from the CSSOM-View specification (https://drafts.csswg.org/cssom-view/#extensions-to-the-document-interface).
131     [ImplementedAs=scrollingElementForAPI] readonly attribute Element? scrollingElement;
132 
133     // Extensions from Selection API (https://www.w3.org/TR/selection-api/#extensions-to-document-interface).
134     // FIXME: Should likely be moved to DocumentOrShadowRoot.
135     DOMSelection? getSelection();
136 
137     // XPath extensions (https://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator).
138     [MayThrowException] XPathExpression createExpression(DOMString expression, optional XPathNSResolver? resolver);
139     XPathNSResolver createNSResolver(Node nodeResolver);
140     [MayThrowException] XPathResult evaluate(DOMString expression, Node contextNode, optional XPathNSResolver? resolver, optional unsigned short type = 0, optional XPathResult? inResult);
141 
142     // Extensions from Pointer Lock API (https://www.w3.org/TR/pointerlock/#extensions-to-the-document-interface).
143     [NotEnumerable, Conditional=POINTER_LOCK] attribute EventHandler onpointerlockchange; // FIXME: Should be enumerable.
144     [NotEnumerable, Conditional=POINTER_LOCK] attribute EventHandler onpointerlockerror; // FIXME: Should be enumerable.
145     [Conditional=POINTER_LOCK] void exitPointerLock();
146 
147     // Extensions from CSS Font Loading API (https://drafts.csswg.org/css-font-loading/#font-face-source).
148     // FIXME: Should be in a separate FontFaceSource interface.
149     readonly attribute FontFaceSet fonts;
150 
151     // Extensions from Page visibility API (https://www.w3.org/TR/page-visibility/#sec-document-interface).
152     readonly attribute boolean hidden;
153     readonly attribute VisibilityState visibilityState;
154     attribute EventHandler onvisibilitychange;
155 
156     // FIXME: Those have been dropped from the DOM specification.
157     readonly attribute DOMString? xmlEncoding;
158     attribute DOMString? xmlVersion;
159     attribute boolean xmlStandalone;
160 
161     // FIXME: Blink has already dropped this (https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/s3ezjTuC8ig).
162     // And it&#39;s just a stub that always returns null, so we can probably remove it some time soon.
163     CSSStyleDeclaration? getOverrideStyle(optional Element? element = null, optional DOMString pseudoElement = &quot;undefined&quot;);
164 
165     // FIXME: Should be moved to GlobalEventHandlers (http://w3c.github.io/selection-api/#extensions-to-globaleventhandlers).
166     [NotEnumerable] attribute EventHandler onselectstart; // FIXME: Should be enumerable.
167     [NotEnumerable] attribute EventHandler onselectionchange; // FIXME: Should be enumerable.
168 
169     // Non standard: It has been superseeded by caretPositionFromPoint which we do not implement yet.
170     Range caretRangeFromPoint(optional long x = 0, optional long y = 0);
171 
172     // FIXME: This is not standard and has been dropped from Blink already.
173     RenderingContext? getCSSCanvasContext(DOMString contextId, DOMString name, long width, long height);
174 
175     // Obsolete features from https://html.spec.whatwg.org/multipage/obsolete.html
176 
177     [CEReactions] attribute [TreatNullAs=EmptyString] DOMString fgColor;
178     [CEReactions, ImplementedAs=linkColorForBindings] attribute [TreatNullAs=EmptyString] DOMString linkColor;
179     [CEReactions] attribute [TreatNullAs=EmptyString] DOMString vlinkColor;
180     [CEReactions] attribute [TreatNullAs=EmptyString] DOMString alinkColor;
181     [CEReactions] attribute [TreatNullAs=EmptyString] DOMString bgColor;
182 
183     readonly attribute HTMLCollection anchors; /* [SameObject] */
184     readonly attribute HTMLCollection applets; /* [SameObject] */
185 
186     void clear();
187     void captureEvents();
188     void releaseEvents();
189 
190     [Replaceable] readonly attribute HTMLAllCollection all; /* [SameObject] */
191 
192     [EnabledAtRuntime=WebAnimations] readonly attribute DocumentTimeline timeline;
193     [EnabledAtRuntime=WebAnimations] sequence&lt;WebAnimation&gt; getAnimations();
194 };
195 
196 enum DocumentReadyState { &quot;loading&quot;, &quot;interactive&quot;, &quot;complete&quot; };
197 
198 Document implements DocumentAndElementEventHandlers;
199 Document implements ParentNode;
200 Document implements NonElementParentNode;
201 Document implements DocumentOrShadowRoot;
202 Document implements GlobalEventHandlers;
    </pre>
  </body>
</html>