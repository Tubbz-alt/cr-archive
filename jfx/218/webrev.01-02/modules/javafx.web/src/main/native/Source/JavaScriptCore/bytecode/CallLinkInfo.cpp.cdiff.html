<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/bytecode/CallLinkInfo.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="BytecodeUseDef.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CallLinkInfo.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/bytecode/CallLinkInfo.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 164,17 ***</span>
  {
      RELEASE_ASSERT(!isDirect());
      m_lastSeenCalleeOrExecutable.clear();
  }
  
<span class="line-modified">! JSObject* CallLinkInfo::lastSeenCallee()</span>
  {
      RELEASE_ASSERT(!isDirect());
      return jsCast&lt;JSObject*&gt;(m_lastSeenCalleeOrExecutable.get());
  }
  
<span class="line-modified">! bool CallLinkInfo::haveLastSeenCallee()</span>
  {
      RELEASE_ASSERT(!isDirect());
      return !!m_lastSeenCalleeOrExecutable;
  }
  
<span class="line-new-header">--- 164,17 ---</span>
  {
      RELEASE_ASSERT(!isDirect());
      m_lastSeenCalleeOrExecutable.clear();
  }
  
<span class="line-modified">! JSObject* CallLinkInfo::lastSeenCallee() const</span>
  {
      RELEASE_ASSERT(!isDirect());
      return jsCast&lt;JSObject*&gt;(m_lastSeenCalleeOrExecutable.get());
  }
  
<span class="line-modified">! bool CallLinkInfo::haveLastSeenCallee() const</span>
  {
      RELEASE_ASSERT(!isDirect());
      return !!m_lastSeenCalleeOrExecutable;
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 188,15 ***</span>
  {
      RELEASE_ASSERT(isDirect());
      return jsCast&lt;ExecutableBase*&gt;(m_lastSeenCalleeOrExecutable.get());
  }
  
<span class="line-modified">! void CallLinkInfo::setMaxNumArguments(unsigned value)</span>
  {
      RELEASE_ASSERT(isDirect());
      RELEASE_ASSERT(value);
<span class="line-modified">!     m_maxNumArguments = value;</span>
  }
  
  void CallLinkInfo::visitWeak(VM&amp; vm)
  {
      auto handleSpecificCallee = [&amp;] (JSFunction* callee) {
<span class="line-new-header">--- 188,15 ---</span>
  {
      RELEASE_ASSERT(isDirect());
      return jsCast&lt;ExecutableBase*&gt;(m_lastSeenCalleeOrExecutable.get());
  }
  
<span class="line-modified">! void CallLinkInfo::setMaxArgumentCountIncludingThis(unsigned value)</span>
  {
      RELEASE_ASSERT(isDirect());
      RELEASE_ASSERT(value);
<span class="line-modified">!     m_maxArgumentCountIncludingThis = value;</span>
  }
  
  void CallLinkInfo::visitWeak(VM&amp; vm)
  {
      auto handleSpecificCallee = [&amp;] (JSFunction* callee) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 207,45 ***</span>
      };
  
      if (isLinked()) {
          if (stub()) {
              if (!stub()-&gt;visitWeak(vm)) {
<span class="line-modified">!                 if (Options::verboseOSR()) {</span>
                      dataLog(
                          &quot;At &quot;, m_codeOrigin, &quot;, &quot;, RawPointer(this), &quot;: clearing call stub to &quot;,
                          listDump(stub()-&gt;variants()), &quot;, stub routine &quot;, RawPointer(stub()),
                          &quot;.\n&quot;);
                  }
                  unlink(vm);
                  m_clearedByGC = true;
              }
          } else if (!vm.heap.isMarked(m_calleeOrCodeBlock.get())) {
              if (isDirect()) {
<span class="line-modified">!                 if (Options::verboseOSR()) {</span>
                      dataLog(
                          &quot;Clearing call to &quot;, RawPointer(codeBlock()), &quot; (&quot;,
                          pointerDump(codeBlock()), &quot;).\n&quot;);
                  }
              } else {
                  if (callee()-&gt;type() == JSFunctionType) {
<span class="line-modified">!                     if (Options::verboseOSR()) {</span>
                          dataLog(
                              &quot;Clearing call to &quot;,
                              RawPointer(callee()), &quot; (&quot;,
                              static_cast&lt;JSFunction*&gt;(callee())-&gt;executable()-&gt;hashFor(specializationKind()),
                              &quot;).\n&quot;);
                      }
                      handleSpecificCallee(static_cast&lt;JSFunction*&gt;(callee()));
                  } else {
<span class="line-modified">!                     if (Options::verboseOSR())</span>
                          dataLog(&quot;Clearing call to &quot;, RawPointer(callee()), &quot;.\n&quot;);
                      m_clearedByGC = true;
                  }
              }
              unlink(vm);
          } else if (isDirect() &amp;&amp; !vm.heap.isMarked(m_lastSeenCalleeOrExecutable.get())) {
<span class="line-modified">!             if (Options::verboseOSR()) {</span>
                  dataLog(
                      &quot;Clearing call to &quot;, RawPointer(executable()),
                      &quot; because the executable is dead.\n&quot;);
              }
              unlink(vm);
<span class="line-new-header">--- 207,45 ---</span>
      };
  
      if (isLinked()) {
          if (stub()) {
              if (!stub()-&gt;visitWeak(vm)) {
<span class="line-modified">!                 if (UNLIKELY(Options::verboseOSR())) {</span>
                      dataLog(
                          &quot;At &quot;, m_codeOrigin, &quot;, &quot;, RawPointer(this), &quot;: clearing call stub to &quot;,
                          listDump(stub()-&gt;variants()), &quot;, stub routine &quot;, RawPointer(stub()),
                          &quot;.\n&quot;);
                  }
                  unlink(vm);
                  m_clearedByGC = true;
              }
          } else if (!vm.heap.isMarked(m_calleeOrCodeBlock.get())) {
              if (isDirect()) {
<span class="line-modified">!                 if (UNLIKELY(Options::verboseOSR())) {</span>
                      dataLog(
                          &quot;Clearing call to &quot;, RawPointer(codeBlock()), &quot; (&quot;,
                          pointerDump(codeBlock()), &quot;).\n&quot;);
                  }
              } else {
                  if (callee()-&gt;type() == JSFunctionType) {
<span class="line-modified">!                     if (UNLIKELY(Options::verboseOSR())) {</span>
                          dataLog(
                              &quot;Clearing call to &quot;,
                              RawPointer(callee()), &quot; (&quot;,
                              static_cast&lt;JSFunction*&gt;(callee())-&gt;executable()-&gt;hashFor(specializationKind()),
                              &quot;).\n&quot;);
                      }
                      handleSpecificCallee(static_cast&lt;JSFunction*&gt;(callee()));
                  } else {
<span class="line-modified">!                     if (UNLIKELY(Options::verboseOSR()))</span>
                          dataLog(&quot;Clearing call to &quot;, RawPointer(callee()), &quot;.\n&quot;);
                      m_clearedByGC = true;
                  }
              }
              unlink(vm);
          } else if (isDirect() &amp;&amp; !vm.heap.isMarked(m_lastSeenCalleeOrExecutable.get())) {
<span class="line-modified">!             if (UNLIKELY(Options::verboseOSR())) {</span>
                  dataLog(
                      &quot;Clearing call to &quot;, RawPointer(executable()),
                      &quot; because the executable is dead.\n&quot;);
              }
              unlink(vm);
</pre>
<center><a href="BytecodeUseDef.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CallLinkInfo.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>