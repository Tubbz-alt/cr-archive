<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/bindings/js/JSDOMConvertStrings.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="JSDOMConvertStrings.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="JSDOMConvertUnion.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/bindings/js/JSDOMConvertStrings.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -29,14 +29,14 @@</span>
  #include &quot;JSDOMConvertBase.h&quot;
  #include &quot;StringAdaptors.h&quot;
  
  namespace WebCore {
  
<span class="udiff-line-modified-removed">- WEBCORE_EXPORT String identifierToByteString(JSC::ExecState&amp;, const JSC::Identifier&amp;);</span>
<span class="udiff-line-modified-removed">- WEBCORE_EXPORT String valueToByteString(JSC::ExecState&amp;, JSC::JSValue);</span>
<span class="udiff-line-modified-removed">- WEBCORE_EXPORT String identifierToUSVString(JSC::ExecState&amp;, const JSC::Identifier&amp;);</span>
<span class="udiff-line-modified-removed">- WEBCORE_EXPORT String valueToUSVString(JSC::ExecState&amp;, JSC::JSValue);</span>
<span class="udiff-line-modified-added">+ WEBCORE_EXPORT String identifierToByteString(JSC::JSGlobalObject&amp;, const JSC::Identifier&amp;);</span>
<span class="udiff-line-modified-added">+ WEBCORE_EXPORT String valueToByteString(JSC::JSGlobalObject&amp;, JSC::JSValue);</span>
<span class="udiff-line-modified-added">+ WEBCORE_EXPORT String identifierToUSVString(JSC::JSGlobalObject&amp;, const JSC::Identifier&amp;);</span>
<span class="udiff-line-modified-added">+ WEBCORE_EXPORT String valueToUSVString(JSC::JSGlobalObject&amp;, JSC::JSValue);</span>
  
  inline String propertyNameToString(JSC::PropertyName propertyName)
  {
      ASSERT(!propertyName.isSymbol());
      return propertyName.uid() ? propertyName.uid() : propertyName.publicName();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -49,151 +49,151 @@</span>
  
  // MARK: -
  // MARK: String types
  
  template&lt;&gt; struct Converter&lt;IDLDOMString&gt; : DefaultConverter&lt;IDLDOMString&gt; {
<span class="udiff-line-modified-removed">-     static String convert(JSC::ExecState&amp; state, JSC::JSValue value)</span>
<span class="udiff-line-modified-added">+     static String convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, JSC::JSValue value)</span>
      {
<span class="udiff-line-modified-removed">-         return value.toWTFString(&amp;state);</span>
<span class="udiff-line-modified-added">+         return value.toWTFString(&amp;lexicalGlobalObject);</span>
      }
  };
  
  template&lt;&gt; struct JSConverter&lt;IDLDOMString&gt; {
      static constexpr bool needsState = true;
      static constexpr bool needsGlobalObject = false;
  
<span class="udiff-line-modified-removed">-     static JSC::JSValue convert(JSC::ExecState&amp; state, const String&amp; value)</span>
<span class="udiff-line-modified-added">+     static JSC::JSValue convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, const String&amp; value)</span>
      {
<span class="udiff-line-modified-removed">-         return JSC::jsStringWithCache(&amp;state, value);</span>
<span class="udiff-line-modified-added">+         return JSC::jsStringWithCache(&amp;lexicalGlobalObject, value);</span>
      }
  
<span class="udiff-line-modified-removed">-     static JSC::JSValue convert(JSC::ExecState&amp; state, const UncachedString&amp; value)</span>
<span class="udiff-line-modified-added">+     static JSC::JSValue convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, const UncachedString&amp; value)</span>
      {
<span class="udiff-line-modified-removed">-         return JSC::jsString(state.vm(), value.string);</span>
<span class="udiff-line-modified-added">+         return JSC::jsString(JSC::getVM(&amp;lexicalGlobalObject), value.string);</span>
      }
  
<span class="udiff-line-modified-removed">-     static JSC::JSValue convert(JSC::ExecState&amp; state, const OwnedString&amp; value)</span>
<span class="udiff-line-modified-added">+     static JSC::JSValue convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, const OwnedString&amp; value)</span>
      {
<span class="udiff-line-modified-removed">-         return JSC::jsOwnedString(state.vm(), value.string);</span>
<span class="udiff-line-modified-added">+         return JSC::jsOwnedString(JSC::getVM(&amp;lexicalGlobalObject), value.string);</span>
      }
  };
  
  template&lt;&gt; struct Converter&lt;IDLByteString&gt; : DefaultConverter&lt;IDLByteString&gt; {
<span class="udiff-line-modified-removed">-     static String convert(JSC::ExecState&amp; state, JSC::JSValue value)</span>
<span class="udiff-line-modified-added">+     static String convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, JSC::JSValue value)</span>
      {
<span class="udiff-line-modified-removed">-         return valueToByteString(state, value);</span>
<span class="udiff-line-modified-added">+         return valueToByteString(lexicalGlobalObject, value);</span>
      }
  };
  
  template&lt;&gt; struct JSConverter&lt;IDLByteString&gt; {
      static constexpr bool needsState = true;
      static constexpr bool needsGlobalObject = false;
  
<span class="udiff-line-modified-removed">-     static JSC::JSValue convert(JSC::ExecState&amp; state, const String&amp; value)</span>
<span class="udiff-line-modified-added">+     static JSC::JSValue convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, const String&amp; value)</span>
      {
<span class="udiff-line-modified-removed">-         return JSC::jsStringWithCache(&amp;state, value);</span>
<span class="udiff-line-modified-added">+         return JSC::jsStringWithCache(&amp;lexicalGlobalObject, value);</span>
      }
  
<span class="udiff-line-modified-removed">-     static JSC::JSValue convert(JSC::ExecState&amp; state, const UncachedString&amp; value)</span>
<span class="udiff-line-modified-added">+     static JSC::JSValue convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, const UncachedString&amp; value)</span>
      {
<span class="udiff-line-modified-removed">-         return JSC::jsString(state.vm(), value.string);</span>
<span class="udiff-line-modified-added">+         return JSC::jsString(JSC::getVM(&amp;lexicalGlobalObject), value.string);</span>
      }
  
<span class="udiff-line-modified-removed">-     static JSC::JSValue convert(JSC::ExecState&amp; state, const OwnedString&amp; value)</span>
<span class="udiff-line-modified-added">+     static JSC::JSValue convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, const OwnedString&amp; value)</span>
      {
<span class="udiff-line-modified-removed">-         return JSC::jsOwnedString(state.vm(), value.string);</span>
<span class="udiff-line-modified-added">+         return JSC::jsOwnedString(JSC::getVM(&amp;lexicalGlobalObject), value.string);</span>
      }
  };
  
  template&lt;&gt; struct Converter&lt;IDLUSVString&gt; : DefaultConverter&lt;IDLUSVString&gt; {
<span class="udiff-line-modified-removed">-     static String convert(JSC::ExecState&amp; state, JSC::JSValue value)</span>
<span class="udiff-line-modified-added">+     static String convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, JSC::JSValue value)</span>
      {
<span class="udiff-line-modified-removed">-         return valueToUSVString(state, value);</span>
<span class="udiff-line-modified-added">+         return valueToUSVString(lexicalGlobalObject, value);</span>
      }
  };
  
  template&lt;&gt; struct JSConverter&lt;IDLUSVString&gt; {
      static constexpr bool needsState = true;
      static constexpr bool needsGlobalObject = false;
  
<span class="udiff-line-modified-removed">-     static JSC::JSValue convert(JSC::ExecState&amp; state, const String&amp; value)</span>
<span class="udiff-line-modified-added">+     static JSC::JSValue convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, const String&amp; value)</span>
      {
<span class="udiff-line-modified-removed">-         return JSC::jsStringWithCache(&amp;state, value);</span>
<span class="udiff-line-modified-added">+         return JSC::jsStringWithCache(&amp;lexicalGlobalObject, value);</span>
      }
  
<span class="udiff-line-modified-removed">-     static JSC::JSValue convert(JSC::ExecState&amp; state, const UncachedString&amp; value)</span>
<span class="udiff-line-modified-added">+     static JSC::JSValue convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, const UncachedString&amp; value)</span>
      {
<span class="udiff-line-modified-removed">-         return JSC::jsString(state.vm(), value.string);</span>
<span class="udiff-line-modified-added">+         return JSC::jsString(JSC::getVM(&amp;lexicalGlobalObject), value.string);</span>
      }
  
<span class="udiff-line-modified-removed">-     static JSC::JSValue convert(JSC::ExecState&amp; state, const OwnedString&amp; value)</span>
<span class="udiff-line-modified-added">+     static JSC::JSValue convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, const OwnedString&amp; value)</span>
      {
<span class="udiff-line-modified-removed">-         return JSC::jsOwnedString(state.vm(), value.string);</span>
<span class="udiff-line-modified-added">+         return JSC::jsOwnedString(JSC::getVM(&amp;lexicalGlobalObject), value.string);</span>
      }
  };
  
  // MARK: -
  // MARK: String type adaptors
  
  template&lt;typename T&gt; struct Converter&lt;IDLTreatNullAsEmptyAdaptor&lt;T&gt;&gt; : DefaultConverter&lt;IDLTreatNullAsEmptyAdaptor&lt;T&gt;&gt; {
<span class="udiff-line-modified-removed">-     static String convert(JSC::ExecState&amp; state, JSC::JSValue value)</span>
<span class="udiff-line-modified-added">+     static String convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, JSC::JSValue value)</span>
      {
          if (value.isNull())
              return emptyString();
<span class="udiff-line-modified-removed">-         return Converter&lt;T&gt;::convert(state, value);</span>
<span class="udiff-line-modified-added">+         return Converter&lt;T&gt;::convert(lexicalGlobalObject, value);</span>
      }
  };
  
  template&lt;typename T&gt;  struct JSConverter&lt;IDLTreatNullAsEmptyAdaptor&lt;T&gt;&gt; {
      static constexpr bool needsState = true;
      static constexpr bool needsGlobalObject = false;
  
<span class="udiff-line-modified-removed">-     static JSC::JSValue convert(JSC::ExecState&amp; state, const String&amp; value)</span>
<span class="udiff-line-modified-added">+     static JSC::JSValue convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, const String&amp; value)</span>
      {
<span class="udiff-line-modified-removed">-         return JSConverter&lt;T&gt;::convert(state, value);</span>
<span class="udiff-line-modified-added">+         return JSConverter&lt;T&gt;::convert(lexicalGlobalObject, value);</span>
      }
  };
  
  template&lt;typename T&gt; struct Converter&lt;IDLAtomStringAdaptor&lt;T&gt;&gt; : DefaultConverter&lt;IDLAtomStringAdaptor&lt;T&gt;&gt; {
<span class="udiff-line-modified-removed">-     static AtomString convert(JSC::ExecState&amp; state, JSC::JSValue value)</span>
<span class="udiff-line-modified-added">+     static AtomString convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, JSC::JSValue value)</span>
      {
          static_assert(std::is_same&lt;T, IDLDOMString&gt;::value, &quot;This adaptor is only supported for IDLDOMString at the moment.&quot;);
  
<span class="udiff-line-modified-removed">-         return value.toString(&amp;state)-&gt;toAtomString(&amp;state);</span>
<span class="udiff-line-modified-added">+         return value.toString(&amp;lexicalGlobalObject)-&gt;toAtomString(&amp;lexicalGlobalObject);</span>
      }
  };
  
  template&lt;typename T&gt;  struct JSConverter&lt;IDLAtomStringAdaptor&lt;T&gt;&gt; {
      static constexpr bool needsState = true;
      static constexpr bool needsGlobalObject = false;
  
<span class="udiff-line-modified-removed">-     static JSC::JSValue convert(JSC::ExecState&amp; state, const AtomString&amp; value)</span>
<span class="udiff-line-modified-added">+     static JSC::JSValue convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, const AtomString&amp; value)</span>
      {
          static_assert(std::is_same&lt;T, IDLDOMString&gt;::value, &quot;This adaptor is only supported for IDLDOMString at the moment.&quot;);
  
<span class="udiff-line-modified-removed">-         return JSConverter&lt;T&gt;::convert(state, value);</span>
<span class="udiff-line-modified-added">+         return JSConverter&lt;T&gt;::convert(lexicalGlobalObject, value);</span>
      }
  };
  
  template&lt;typename T&gt; struct Converter&lt;IDLRequiresExistingAtomStringAdaptor&lt;T&gt;&gt; : DefaultConverter&lt;IDLRequiresExistingAtomStringAdaptor&lt;T&gt;&gt; {
<span class="udiff-line-modified-removed">-     static AtomString convert(JSC::ExecState&amp; state, JSC::JSValue value)</span>
<span class="udiff-line-modified-added">+     static AtomString convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, JSC::JSValue value)</span>
      {
          static_assert(std::is_same&lt;T, IDLDOMString&gt;::value, &quot;This adaptor is only supported for IDLDOMString at the moment.&quot;);
  
<span class="udiff-line-modified-removed">-         return AtomString(value.toString(&amp;state)-&gt;toExistingAtomString(&amp;state));</span>
<span class="udiff-line-modified-added">+         return AtomString(value.toString(&amp;lexicalGlobalObject)-&gt;toExistingAtomString(&amp;lexicalGlobalObject));</span>
      }
  };
  
  template&lt;typename T&gt;  struct JSConverter&lt;IDLRequiresExistingAtomStringAdaptor&lt;T&gt;&gt; {
      static constexpr bool needsState = true;
      static constexpr bool needsGlobalObject = false;
  
<span class="udiff-line-modified-removed">-     static JSC::JSValue convert(JSC::ExecState&amp; state, const AtomString&amp; value)</span>
<span class="udiff-line-modified-added">+     static JSC::JSValue convert(JSC::JSGlobalObject&amp; lexicalGlobalObject, const AtomString&amp; value)</span>
      {
          static_assert(std::is_same&lt;T, IDLDOMString&gt;::value, &quot;This adaptor is only supported for IDLDOMString at the moment.&quot;);
  
<span class="udiff-line-modified-removed">-         return JSConverter&lt;T&gt;::convert(state, value);</span>
<span class="udiff-line-modified-added">+         return JSConverter&lt;T&gt;::convert(lexicalGlobalObject, value);</span>
      }
  };
  
  
  } // namespace WebCore
</pre>
<center><a href="JSDOMConvertStrings.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="JSDOMConvertUnion.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>