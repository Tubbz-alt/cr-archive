<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/ftl/FTLAbstractHeapRepository.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FTLAbstractHeapRepository.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="FTLCapabilities.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/ftl/FTLAbstractHeapRepository.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 30,11 ***</span>
  #include &quot;B3Value.h&quot;
  #include &quot;DFGArrayMode.h&quot;
  #include &quot;FTLAbstractHeap.h&quot;
  #include &quot;HasOwnPropertyCache.h&quot;
  #include &quot;IndexingType.h&quot;
<span class="line-removed">- #include &quot;JSFixedArray.h&quot;</span>
  #include &quot;JSGlobalObject.h&quot;
  #include &quot;JSMap.h&quot;
  #include &quot;JSSet.h&quot;
  #include &quot;JSWeakMap.h&quot;
  #include &quot;Symbol.h&quot;
<span class="line-new-header">--- 30,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 50,24 ***</span>
      macro(Butterfly_arrayBuffer, Butterfly::offsetOfArrayBuffer()) \
      macro(Butterfly_publicLength, Butterfly::offsetOfPublicLength()) \
      macro(Butterfly_vectorLength, Butterfly::offsetOfVectorLength()) \
      macro(CallFrame_callerFrame, CallFrame::callerFrameOffset()) \
      macro(ClassInfo_parentClass, ClassInfo::offsetOfParentClass()) \
      macro(DirectArguments_callee, DirectArguments::offsetOfCallee()) \
      macro(DirectArguments_length, DirectArguments::offsetOfLength()) \
      macro(DirectArguments_minCapacity, DirectArguments::offsetOfMinCapacity()) \
      macro(DirectArguments_mappedArguments, DirectArguments::offsetOfMappedArguments()) \
      macro(DirectArguments_modifiedArgumentsDescriptor, DirectArguments::offsetOfModifiedArgumentsDescriptor()) \
      macro(FunctionRareData_allocator, FunctionRareData::offsetOfObjectAllocationProfile() + ObjectAllocationProfileWithPrototype::offsetOfAllocator()) \
      macro(FunctionRareData_structure, FunctionRareData::offsetOfObjectAllocationProfile() + ObjectAllocationProfileWithPrototype::offsetOfStructure()) \
      macro(FunctionRareData_prototype, FunctionRareData::offsetOfObjectAllocationProfile() + ObjectAllocationProfileWithPrototype::offsetOfPrototype()) \
<span class="line-modified">!     macro(FunctionRareData_objectAllocationProfileWatchpoint, FunctionRareData::offsetOfObjectAllocationProfileWatchpoint()) \</span>
      macro(FunctionRareData_internalFunctionAllocationProfile_structure, FunctionRareData::offsetOfInternalFunctionAllocationProfile() + InternalFunctionAllocationProfile::offsetOfStructure()) \
      macro(FunctionRareData_boundFunctionStructure, FunctionRareData::offsetOfBoundFunctionStructure()) \
      macro(FunctionRareData_allocationProfileClearingWatchpoint, FunctionRareData::offsetOfAllocationProfileClearingWatchpoint()) \
<span class="line-removed">-     macro(FunctionRareData_hasReifiedLength, FunctionRareData::offsetOfHasReifiedLength()) \</span>
<span class="line-removed">-     macro(FunctionRareData_hasReifiedName, FunctionRareData::offsetOfHasReifiedName()) \</span>
      macro(GetterSetter_getter, GetterSetter::offsetOfGetter()) \
      macro(GetterSetter_setter, GetterSetter::offsetOfSetter()) \
      macro(JSArrayBufferView_length, JSArrayBufferView::offsetOfLength()) \
      macro(JSArrayBufferView_mode, JSArrayBufferView::offsetOfMode()) \
      macro(JSArrayBufferView_vector, JSArrayBufferView::offsetOfVector()) \
<span class="line-new-header">--- 49,43 ---</span>
      macro(Butterfly_arrayBuffer, Butterfly::offsetOfArrayBuffer()) \
      macro(Butterfly_publicLength, Butterfly::offsetOfPublicLength()) \
      macro(Butterfly_vectorLength, Butterfly::offsetOfVectorLength()) \
      macro(CallFrame_callerFrame, CallFrame::callerFrameOffset()) \
      macro(ClassInfo_parentClass, ClassInfo::offsetOfParentClass()) \
<span class="line-added">+     macro(DateInstance_internalNumber, DateInstance::offsetOfInternalNumber()) \</span>
<span class="line-added">+     macro(DateInstance_data, DateInstance::offsetOfData()) \</span>
<span class="line-added">+     macro(DateInstanceData_gregorianDateTimeCachedForMS, DateInstanceData::offsetOfGregorianDateTimeCachedForMS()) \</span>
<span class="line-added">+     macro(DateInstanceData_gregorianDateTimeUTCCachedForMS, DateInstanceData::offsetOfGregorianDateTimeUTCCachedForMS()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTime_year, DateInstanceData::offsetOfCachedGregorianDateTime() + GregorianDateTime::offsetOfYear()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTimeUTC_year, DateInstanceData::offsetOfCachedGregorianDateTimeUTC() + GregorianDateTime::offsetOfYear()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTime_month, DateInstanceData::offsetOfCachedGregorianDateTime() + GregorianDateTime::offsetOfMonth()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTimeUTC_month, DateInstanceData::offsetOfCachedGregorianDateTimeUTC() + GregorianDateTime::offsetOfMonth()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTime_monthDay, DateInstanceData::offsetOfCachedGregorianDateTime() + GregorianDateTime::offsetOfMonthDay()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTimeUTC_monthDay, DateInstanceData::offsetOfCachedGregorianDateTimeUTC() + GregorianDateTime::offsetOfMonthDay()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTime_weekDay, DateInstanceData::offsetOfCachedGregorianDateTime() + GregorianDateTime::offsetOfWeekDay()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTimeUTC_weekDay, DateInstanceData::offsetOfCachedGregorianDateTimeUTC() + GregorianDateTime::offsetOfWeekDay()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTime_hour, DateInstanceData::offsetOfCachedGregorianDateTime() + GregorianDateTime::offsetOfHour()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTimeUTC_hour, DateInstanceData::offsetOfCachedGregorianDateTimeUTC() + GregorianDateTime::offsetOfHour()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTime_minute, DateInstanceData::offsetOfCachedGregorianDateTime() + GregorianDateTime::offsetOfMinute()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTimeUTC_minute, DateInstanceData::offsetOfCachedGregorianDateTimeUTC() + GregorianDateTime::offsetOfMinute()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTime_second, DateInstanceData::offsetOfCachedGregorianDateTime() + GregorianDateTime::offsetOfSecond()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTimeUTC_second, DateInstanceData::offsetOfCachedGregorianDateTimeUTC() + GregorianDateTime::offsetOfSecond()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTime_utcOffsetInMinute, DateInstanceData::offsetOfCachedGregorianDateTime() + GregorianDateTime::offsetOfUTCOffsetInMinute()) \</span>
<span class="line-added">+     macro(DateInstanceData_cachedGregorianDateTimeUTC_utcOffsetInMinute, DateInstanceData::offsetOfCachedGregorianDateTimeUTC() + GregorianDateTime::offsetOfUTCOffsetInMinute()) \</span>
      macro(DirectArguments_callee, DirectArguments::offsetOfCallee()) \
      macro(DirectArguments_length, DirectArguments::offsetOfLength()) \
      macro(DirectArguments_minCapacity, DirectArguments::offsetOfMinCapacity()) \
      macro(DirectArguments_mappedArguments, DirectArguments::offsetOfMappedArguments()) \
      macro(DirectArguments_modifiedArgumentsDescriptor, DirectArguments::offsetOfModifiedArgumentsDescriptor()) \
      macro(FunctionRareData_allocator, FunctionRareData::offsetOfObjectAllocationProfile() + ObjectAllocationProfileWithPrototype::offsetOfAllocator()) \
      macro(FunctionRareData_structure, FunctionRareData::offsetOfObjectAllocationProfile() + ObjectAllocationProfileWithPrototype::offsetOfStructure()) \
      macro(FunctionRareData_prototype, FunctionRareData::offsetOfObjectAllocationProfile() + ObjectAllocationProfileWithPrototype::offsetOfPrototype()) \
<span class="line-modified">!     macro(FunctionRareData_allocationProfileWatchpointSet, FunctionRareData::offsetOfAllocationProfileWatchpointSet()) \</span>
<span class="line-added">+     macro(FunctionRareData_executable, FunctionRareData::offsetOfExecutable()) \</span>
      macro(FunctionRareData_internalFunctionAllocationProfile_structure, FunctionRareData::offsetOfInternalFunctionAllocationProfile() + InternalFunctionAllocationProfile::offsetOfStructure()) \
      macro(FunctionRareData_boundFunctionStructure, FunctionRareData::offsetOfBoundFunctionStructure()) \
      macro(FunctionRareData_allocationProfileClearingWatchpoint, FunctionRareData::offsetOfAllocationProfileClearingWatchpoint()) \
      macro(GetterSetter_getter, GetterSetter::offsetOfGetter()) \
      macro(GetterSetter_setter, GetterSetter::offsetOfSetter()) \
      macro(JSArrayBufferView_length, JSArrayBufferView::offsetOfLength()) \
      macro(JSArrayBufferView_mode, JSArrayBufferView::offsetOfMode()) \
      macro(JSArrayBufferView_vector, JSArrayBufferView::offsetOfVector()) \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 78,13 ***</span>
      macro(JSCell_structureID, JSCell::structureIDOffset()) \
      macro(JSCell_typeInfoFlags, JSCell::typeInfoFlagsOffset()) \
      macro(JSCell_typeInfoType, JSCell::typeInfoTypeOffset()) \
      macro(JSCell_usefulBytes, JSCell::indexingTypeAndMiscOffset()) \
      macro(JSDestructibleObject_classInfo, JSDestructibleObject::classInfoOffset()) \
<span class="line-modified">!     macro(JSFunction_executable, JSFunction::offsetOfExecutable()) \</span>
      macro(JSFunction_scope, JSFunction::offsetOfScopeChain()) \
<span class="line-removed">-     macro(JSFunction_rareData, JSFunction::offsetOfRareData()) \</span>
      macro(JSGlobalObject_regExpGlobalData_cachedResult_lastRegExp, JSGlobalObject::regExpGlobalDataOffset() + RegExpGlobalData::offsetOfCachedResult() + RegExpCachedResult::offsetOfLastRegExp()) \
      macro(JSGlobalObject_regExpGlobalData_cachedResult_lastInput, JSGlobalObject::regExpGlobalDataOffset() + RegExpGlobalData::offsetOfCachedResult() + RegExpCachedResult::offsetOfLastInput()) \
      macro(JSGlobalObject_regExpGlobalData_cachedResult_result_start, JSGlobalObject::regExpGlobalDataOffset() + RegExpGlobalData::offsetOfCachedResult() + RegExpCachedResult::offsetOfResult() + OBJECT_OFFSETOF(MatchResult, start)) \
      macro(JSGlobalObject_regExpGlobalData_cachedResult_result_end, JSGlobalObject::regExpGlobalDataOffset() + RegExpGlobalData::offsetOfCachedResult() + RegExpCachedResult::offsetOfResult() + OBJECT_OFFSETOF(MatchResult, end)) \
      macro(JSGlobalObject_regExpGlobalData_cachedResult_reified, JSGlobalObject::regExpGlobalDataOffset() + RegExpGlobalData::offsetOfCachedResult() + RegExpCachedResult::offsetOfReified()) \
<span class="line-new-header">--- 96,12 ---</span>
      macro(JSCell_structureID, JSCell::structureIDOffset()) \
      macro(JSCell_typeInfoFlags, JSCell::typeInfoFlagsOffset()) \
      macro(JSCell_typeInfoType, JSCell::typeInfoTypeOffset()) \
      macro(JSCell_usefulBytes, JSCell::indexingTypeAndMiscOffset()) \
      macro(JSDestructibleObject_classInfo, JSDestructibleObject::classInfoOffset()) \
<span class="line-modified">!     macro(JSFunction_executableOrRareData, JSFunction::offsetOfExecutableOrRareData()) \</span>
      macro(JSFunction_scope, JSFunction::offsetOfScopeChain()) \
      macro(JSGlobalObject_regExpGlobalData_cachedResult_lastRegExp, JSGlobalObject::regExpGlobalDataOffset() + RegExpGlobalData::offsetOfCachedResult() + RegExpCachedResult::offsetOfLastRegExp()) \
      macro(JSGlobalObject_regExpGlobalData_cachedResult_lastInput, JSGlobalObject::regExpGlobalDataOffset() + RegExpGlobalData::offsetOfCachedResult() + RegExpCachedResult::offsetOfLastInput()) \
      macro(JSGlobalObject_regExpGlobalData_cachedResult_result_start, JSGlobalObject::regExpGlobalDataOffset() + RegExpGlobalData::offsetOfCachedResult() + RegExpCachedResult::offsetOfResult() + OBJECT_OFFSETOF(MatchResult, start)) \
      macro(JSGlobalObject_regExpGlobalData_cachedResult_result_end, JSGlobalObject::regExpGlobalDataOffset() + RegExpGlobalData::offsetOfCachedResult() + RegExpCachedResult::offsetOfResult() + OBJECT_OFFSETOF(MatchResult, end)) \
      macro(JSGlobalObject_regExpGlobalData_cachedResult_reified, JSGlobalObject::regExpGlobalDataOffset() + RegExpGlobalData::offsetOfCachedResult() + RegExpCachedResult::offsetOfReified()) \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 110,15 ***</span>
      macro(ShadowChicken_Packet_callerFrame, OBJECT_OFFSETOF(ShadowChicken::Packet, callerFrame)) \
      macro(ShadowChicken_Packet_thisValue, OBJECT_OFFSETOF(ShadowChicken::Packet, thisValue)) \
      macro(ShadowChicken_Packet_scope, OBJECT_OFFSETOF(ShadowChicken::Packet, scope)) \
      macro(ShadowChicken_Packet_codeBlock, OBJECT_OFFSETOF(ShadowChicken::Packet, codeBlock)) \
      macro(ShadowChicken_Packet_callSiteIndex, OBJECT_OFFSETOF(ShadowChicken::Packet, callSiteIndex)) \
<span class="line-modified">!     macro(ScopedArguments_Storage_overrodeThings, ScopedArguments::offsetOfOverrodeThingsInStorage()) \</span>
<span class="line-removed">-     macro(ScopedArguments_Storage_totalLength, ScopedArguments::offsetOfTotalLengthInStorage()) \</span>
<span class="line-removed">-     macro(ScopedArguments_storage, ScopedArguments::offsetOfStorage()) \</span>
      macro(ScopedArguments_scope, ScopedArguments::offsetOfScope()) \
      macro(ScopedArguments_table, ScopedArguments::offsetOfTable()) \
      macro(ScopedArgumentsTable_arguments, ScopedArgumentsTable::offsetOfArguments()) \
      macro(ScopedArgumentsTable_length, ScopedArgumentsTable::offsetOfLength()) \
      macro(StringImpl_data, StringImpl::dataOffset()) \
      macro(StringImpl_hashAndFlags, StringImpl::flagsOffset()) \
      macro(StringImpl_length, StringImpl::lengthMemoryOffset()) \
<span class="line-new-header">--- 127,15 ---</span>
      macro(ShadowChicken_Packet_callerFrame, OBJECT_OFFSETOF(ShadowChicken::Packet, callerFrame)) \
      macro(ShadowChicken_Packet_thisValue, OBJECT_OFFSETOF(ShadowChicken::Packet, thisValue)) \
      macro(ShadowChicken_Packet_scope, OBJECT_OFFSETOF(ShadowChicken::Packet, scope)) \
      macro(ShadowChicken_Packet_codeBlock, OBJECT_OFFSETOF(ShadowChicken::Packet, codeBlock)) \
      macro(ShadowChicken_Packet_callSiteIndex, OBJECT_OFFSETOF(ShadowChicken::Packet, callSiteIndex)) \
<span class="line-modified">!     macro(ScopedArguments_overrodeThings, ScopedArguments::offsetOfOverrodeThings()) \</span>
      macro(ScopedArguments_scope, ScopedArguments::offsetOfScope()) \
<span class="line-added">+     macro(ScopedArguments_storage, ScopedArguments::offsetOfStorage()) \</span>
      macro(ScopedArguments_table, ScopedArguments::offsetOfTable()) \
<span class="line-added">+     macro(ScopedArguments_totalLength, ScopedArguments::offsetOfTotalLength()) \</span>
      macro(ScopedArgumentsTable_arguments, ScopedArgumentsTable::offsetOfArguments()) \
      macro(ScopedArgumentsTable_length, ScopedArgumentsTable::offsetOfLength()) \
      macro(StringImpl_data, StringImpl::dataOffset()) \
      macro(StringImpl_hashAndFlags, StringImpl::flagsOffset()) \
      macro(StringImpl_length, StringImpl::lengthMemoryOffset()) \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 139,18 ***</span>
      macro(WeakMapImpl_capacity, WeakMapImpl&lt;WeakMapBucket&lt;WeakMapBucketDataKey&gt;&gt;::offsetOfCapacity()) \
      macro(WeakMapImpl_buffer,  WeakMapImpl&lt;WeakMapBucket&lt;WeakMapBucketDataKey&gt;&gt;::offsetOfBuffer()) \
      macro(WeakMapBucket_value, WeakMapBucket&lt;WeakMapBucketDataKeyValue&gt;::offsetOfValue()) \
      macro(WeakMapBucket_key, WeakMapBucket&lt;WeakMapBucketDataKeyValue&gt;::offsetOfKey()) \
      macro(Symbol_symbolImpl, Symbol::offsetOfSymbolImpl()) \
<span class="line-removed">-     macro(JSFixedArray_size, JSFixedArray::offsetOfSize()) \</span>
  
  #define FOR_EACH_INDEXED_ABSTRACT_HEAP(macro) \
      macro(ArrayStorage_vector, ArrayStorage::vectorOffset(), sizeof(WriteBarrier&lt;Unknown&gt;)) \
      macro(CompleteSubspace_allocatorForSizeStep, CompleteSubspace::offsetOfAllocatorForSizeStep(), sizeof(Allocator)) \
      macro(DirectArguments_storage, DirectArguments::storageOffset(), sizeof(EncodedJSValue)) \
      macro(JSLexicalEnvironment_variables, JSLexicalEnvironment::offsetOfVariables(), sizeof(EncodedJSValue)) \
      macro(JSPropertyNameEnumerator_cachedPropertyNamesVectorContents, 0, sizeof(WriteBarrier&lt;JSString&gt;)) \
      macro(ScopedArguments_Storage_storage, 0, sizeof(EncodedJSValue)) \
      macro(WriteBarrierBuffer_bufferContents, 0, sizeof(JSCell*)) \
      macro(characters8, 0, sizeof(LChar)) \
      macro(characters16, 0, sizeof(UChar)) \
      macro(indexedInt32Properties, 0, sizeof(EncodedJSValue)) \
<span class="line-new-header">--- 156,18 ---</span>
      macro(WeakMapImpl_capacity, WeakMapImpl&lt;WeakMapBucket&lt;WeakMapBucketDataKey&gt;&gt;::offsetOfCapacity()) \
      macro(WeakMapImpl_buffer,  WeakMapImpl&lt;WeakMapBucket&lt;WeakMapBucketDataKey&gt;&gt;::offsetOfBuffer()) \
      macro(WeakMapBucket_value, WeakMapBucket&lt;WeakMapBucketDataKeyValue&gt;::offsetOfValue()) \
      macro(WeakMapBucket_key, WeakMapBucket&lt;WeakMapBucketDataKeyValue&gt;::offsetOfKey()) \
      macro(Symbol_symbolImpl, Symbol::offsetOfSymbolImpl()) \
  
  #define FOR_EACH_INDEXED_ABSTRACT_HEAP(macro) \
      macro(ArrayStorage_vector, ArrayStorage::vectorOffset(), sizeof(WriteBarrier&lt;Unknown&gt;)) \
      macro(CompleteSubspace_allocatorForSizeStep, CompleteSubspace::offsetOfAllocatorForSizeStep(), sizeof(Allocator)) \
      macro(DirectArguments_storage, DirectArguments::storageOffset(), sizeof(EncodedJSValue)) \
      macro(JSLexicalEnvironment_variables, JSLexicalEnvironment::offsetOfVariables(), sizeof(EncodedJSValue)) \
      macro(JSPropertyNameEnumerator_cachedPropertyNamesVectorContents, 0, sizeof(WriteBarrier&lt;JSString&gt;)) \
<span class="line-added">+     macro(JSInternalFieldObjectImpl_internalFields, JSInternalFieldObjectImpl&lt;&gt;::offsetOfInternalFields(), sizeof(WriteBarrier&lt;Unknown&gt;)) \</span>
      macro(ScopedArguments_Storage_storage, 0, sizeof(EncodedJSValue)) \
      macro(WriteBarrierBuffer_bufferContents, 0, sizeof(JSCell*)) \
      macro(characters8, 0, sizeof(LChar)) \
      macro(characters16, 0, sizeof(UChar)) \
      macro(indexedInt32Properties, 0, sizeof(EncodedJSValue)) \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 159,11 ***</span>
      macro(scopedArgumentsTableArguments, 0, sizeof(int32_t)) \
      macro(singleCharacterStrings, 0, sizeof(JSString*)) \
      macro(structureTable, 0, sizeof(Structure*)) \
      macro(variables, 0, sizeof(Register)) \
      macro(HasOwnPropertyCache, 0, sizeof(HasOwnPropertyCache::Entry)) \
<span class="line-removed">-     macro(JSFixedArray_buffer, JSFixedArray::offsetOfData(), sizeof(EncodedJSValue)) \</span>
  
  #define FOR_EACH_NUMBERED_ABSTRACT_HEAP(macro) \
      macro(properties)
  
  // This class is meant to be cacheable between compilations, but it doesn&#39;t have to be.
<span class="line-new-header">--- 176,10 ---</span>
</pre>
<center><a href="FTLAbstractHeapRepository.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="FTLCapabilities.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>