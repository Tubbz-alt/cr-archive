<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old modules/javafx.web/src/main/native/Source/WebCore/bindings/js/WebCoreJSClientData.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 /*
 2  *  Copyright (C) 1999-2001 Harri Porten (porten@kde.org)
 3  *  Copyright (C) 2003-2017 Apple Inc. All rights reserved.
 4  *  Copyright (C) 2007 Samuel Weinig &lt;sam@webkit.org&gt;
 5  *  Copyright (C) 2009 Google, Inc. All rights reserved.
 6  *
 7  *  This library is free software; you can redistribute it and/or
 8  *  modify it under the terms of the GNU Lesser General Public
 9  *  License as published by the Free Software Foundation; either
10  *  version 2 of the License, or (at your option) any later version.
11  *
12  *  This library is distributed in the hope that it will be useful,
13  *  but WITHOUT ANY WARRANTY; without even the implied warranty of
14  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
15  *  Lesser General Public License for more details.
16  *
17  *  You should have received a copy of the GNU Lesser General Public
18  *  License along with this library; if not, write to the Free Software
19  *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
20  */
21 
22 #pragma once
23 
24 #include &quot;DOMWrapperWorld.h&quot;
25 #include &quot;WebCoreBuiltinNames.h&quot;
26 #include &quot;WebCoreJSBuiltins.h&quot;
27 #include &lt;wtf/HashSet.h&gt;
28 #include &lt;wtf/RefPtr.h&gt;
29 
30 namespace WebCore {
31 
32 class JSVMClientData : public JSC::VM::ClientData {
33     WTF_MAKE_NONCOPYABLE(JSVMClientData); WTF_MAKE_FAST_ALLOCATED;
34     friend class VMWorldIterator;
35 
36 public:
37     explicit JSVMClientData(JSC::VM&amp;);
38 
39     virtual ~JSVMClientData();
40 
41     WEBCORE_EXPORT static void initNormalWorld(JSC::VM*);
42 
43     DOMWrapperWorld&amp; normalWorld() { return *m_normalWorld; }
44 
45     void getAllWorlds(Vector&lt;Ref&lt;DOMWrapperWorld&gt;&gt;&amp;);
46 
47     void rememberWorld(DOMWrapperWorld&amp; world)
48     {
49         ASSERT(!m_worldSet.contains(&amp;world));
50         m_worldSet.add(&amp;world);
51     }
52 
53     void forgetWorld(DOMWrapperWorld&amp; world)
54     {
55         ASSERT(m_worldSet.contains(&amp;world));
56         m_worldSet.remove(&amp;world);
57     }
58 
59     WebCoreBuiltinNames&amp; builtinNames() { return m_builtinNames; }
60     JSBuiltinFunctions&amp; builtinFunctions() { return m_builtinFunctions; }
61 
62     JSC::IsoSubspace&amp; runtimeMethodSpace() { return m_runtimeMethodSpace; }
63 
64     JSC::CompleteSubspace&amp; outputConstraintSpace() { return m_outputConstraintSpace; }
65     JSC::CompleteSubspace&amp; globalObjectOutputConstraintSpace() { return m_globalObjectOutputConstraintSpace; }
66 
67     template&lt;typename Func&gt;
68     void forEachOutputConstraintSpace(const Func&amp; func)
69     {
70         func(m_outputConstraintSpace);
71         func(m_globalObjectOutputConstraintSpace);
72     }
73 
74 private:
75     HashSet&lt;DOMWrapperWorld*&gt; m_worldSet;
76     RefPtr&lt;DOMWrapperWorld&gt; m_normalWorld;
77 
78     JSBuiltinFunctions m_builtinFunctions;
79     WebCoreBuiltinNames m_builtinNames;
80 
81     JSC::IsoSubspace m_runtimeMethodSpace;
82 
83     JSC::CompleteSubspace m_outputConstraintSpace;
84     JSC::CompleteSubspace m_globalObjectOutputConstraintSpace;
85 };
86 
87 } // namespace WebCore
    </pre>
  </body>
</html>