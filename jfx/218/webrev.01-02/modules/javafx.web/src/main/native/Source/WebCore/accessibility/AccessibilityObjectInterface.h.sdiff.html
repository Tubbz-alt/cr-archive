<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/accessibility/AccessibilityObjectInterface.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AccessibilityObject.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="AccessibilityRenderObject.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/accessibility/AccessibilityObjectInterface.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   8  *    notice, this list of conditions and the following disclaimer.
   9  * 2. Redistributions in binary form must reproduce the above copyright
  10  *    notice, this list of conditions and the following disclaimer in the
  11  *    documentation and/or other materials provided with the distribution.
  12  *
  13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS&#39;&#39;
  14  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  15  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  16  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS
  17  * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  18  * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  19  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  20  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  21  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  22  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
  23  * THE POSSIBILITY OF SUCH DAMAGE.
  24  */
  25 
  26 #pragma once
  27 

  28 #include &quot;LayoutRect.h&quot;





  29 #include &lt;wtf/RefCounted.h&gt;
  30 
  31 #if PLATFORM(WIN)
  32 #include &quot;AccessibilityObjectWrapperWin.h&quot;
  33 #include &quot;COMPtr.h&quot;
  34 #endif
  35 
  36 #if PLATFORM(COCOA)
  37 OBJC_CLASS WebAccessibilityObjectWrapper;
  38 typedef WebAccessibilityObjectWrapper AccessibilityObjectWrapper;
  39 #elif USE(ATK)
  40 typedef struct _WebKitAccessible WebKitAccessible;
  41 typedef struct _WebKitAccessible AccessibilityObjectWrapper;
  42 #else
  43 class AccessibilityObjectWrapper;
  44 #endif
  45 
  46 namespace WebCore {
  47 

















  48 typedef unsigned AXID;
  49 extern const AXID InvalidAXID;
  50 typedef unsigned AXIsolatedTreeID;
  51 
  52 enum class AccessibilityRole {
  53     Annotation = 1,
  54     Application,
  55     ApplicationAlert,
  56     ApplicationAlertDialog,
  57     ApplicationDialog,
  58     ApplicationGroup,
  59     ApplicationLog,
  60     ApplicationMarquee,
  61     ApplicationStatus,
  62     ApplicationTextGroup,
  63     ApplicationTimer,
  64     Audio,
  65     Blockquote,
  66     Browser,
  67     BusyIndicator,
</pre>
<hr />
<pre>
 186     TextArea,
 187     TextGroup,
 188     Term,
 189     Time,
 190     Tree,
 191     TreeGrid,
 192     TreeItem,
 193     TextField,
 194     ToggleButton,
 195     Toolbar,
 196     Unknown,
 197     UserInterfaceTooltip,
 198     ValueIndicator,
 199     Video,
 200     WebApplication,
 201     WebArea,
 202     WebCoreLink,
 203     Window,
 204 };
 205 
<span class="line-modified"> 206 class AccessibilityObjectInterface {</span>














































































































































































































































 207 public:
<span class="line-modified"> 208     virtual ~AccessibilityObjectInterface() = default;</span>
 209 
<span class="line-modified"> 210     virtual bool isMediaControlLabel() const = 0;</span>
<span class="line-modified"> 211     virtual AccessibilityRole roleValue() const = 0;</span>
<span class="line-modified"> 212     virtual bool isAttachment() const = 0;</span>





















 213     virtual bool isLink() const = 0;
<span class="line-removed"> 214     virtual bool isImageMapLink() const = 0;</span>
 215     virtual bool isImage() const = 0;





















 216     virtual bool isFileUploadButton() const = 0;
<span class="line-modified"> 217     virtual bool isTree() const = 0;</span>
<span class="line-modified"> 218     virtual bool isTreeItem() const = 0;</span>
<span class="line-modified"> 219     virtual bool isScrollbar() const = 0;</span>
<span class="line-modified"> 220     virtual bool accessibilityIsIgnored() const = 0;</span>























































































 221     virtual FloatRect relativeFrame() const = 0;
<span class="line-modified"> 222     virtual AccessibilityObjectInterface* parentObjectInterfaceUnignored() const = 0;</span>
<span class="line-modified"> 223     virtual AccessibilityObjectInterface* focusedUIElement() const = 0;</span>
<span class="line-modified"> 224     virtual bool isAccessibilityObject() const { return false; }</span>










































































































































































































































































































































































































































































































 225 
 226 #if PLATFORM(COCOA)



 227     virtual String speechHintAttributeValue() const = 0;
 228     virtual String descriptionAttributeValue() const = 0;
 229     virtual String helpTextAttributeValue() const = 0;
 230     virtual String titleAttributeValue() const = 0;

 231 #endif
 232 
<span class="line-modified"> 233     virtual AccessibilityObjectWrapper* wrapper() const = 0;</span>
<span class="line-modified"> 234     virtual AccessibilityObjectInterface* accessibilityHitTest(const IntPoint&amp;) const = 0;</span>
<span class="line-modified"> 235     virtual void updateChildrenIfNecessary() = 0;</span>



























 236 };
 237 
































































 238 } // namespace WebCore
</pre>
</td>
<td>
<hr />
<pre>
   8  *    notice, this list of conditions and the following disclaimer.
   9  * 2. Redistributions in binary form must reproduce the above copyright
  10  *    notice, this list of conditions and the following disclaimer in the
  11  *    documentation and/or other materials provided with the distribution.
  12  *
  13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS&#39;&#39;
  14  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  15  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  16  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS
  17  * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  18  * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  19  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  20  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  21  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  22  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
  23  * THE POSSIBILITY OF SUCH DAMAGE.
  24  */
  25 
  26 #pragma once
  27 
<span class="line-added">  28 #include &quot;HTMLTextFormControlElement.h&quot;</span>
  29 #include &quot;LayoutRect.h&quot;
<span class="line-added">  30 #include &quot;Range.h&quot;</span>
<span class="line-added">  31 #include &quot;TextIterator.h&quot;</span>
<span class="line-added">  32 #include &quot;TextIteratorBehavior.h&quot;</span>
<span class="line-added">  33 #include &quot;VisiblePosition.h&quot;</span>
<span class="line-added">  34 #include &quot;VisibleSelection.h&quot;</span>
  35 #include &lt;wtf/RefCounted.h&gt;
  36 
  37 #if PLATFORM(WIN)
  38 #include &quot;AccessibilityObjectWrapperWin.h&quot;
  39 #include &quot;COMPtr.h&quot;
  40 #endif
  41 
  42 #if PLATFORM(COCOA)
  43 OBJC_CLASS WebAccessibilityObjectWrapper;
  44 typedef WebAccessibilityObjectWrapper AccessibilityObjectWrapper;
  45 #elif USE(ATK)
  46 typedef struct _WebKitAccessible WebKitAccessible;
  47 typedef struct _WebKitAccessible AccessibilityObjectWrapper;
  48 #else
  49 class AccessibilityObjectWrapper;
  50 #endif
  51 
  52 namespace WebCore {
  53 
<span class="line-added">  54 class Node;</span>
<span class="line-added">  55 class Element;</span>
<span class="line-added">  56 class RenderObject;</span>
<span class="line-added">  57 class QualifiedName;</span>
<span class="line-added">  58 class Path;</span>
<span class="line-added">  59 class Widget;</span>
<span class="line-added">  60 class Page;</span>
<span class="line-added">  61 class Document;</span>
<span class="line-added">  62 class Frame;</span>
<span class="line-added">  63 class FrameView;</span>
<span class="line-added">  64 class ScrollView;</span>
<span class="line-added">  65 class AXObjectCache;</span>
<span class="line-added">  66 class AXCoreObject;</span>
<span class="line-added">  67 class AccessibilityScrollView;</span>
<span class="line-added">  68 struct AccessibilityText;</span>
<span class="line-added">  69 struct ScrollRectToVisibleOptions;</span>
<span class="line-added">  70 </span>
  71 typedef unsigned AXID;
  72 extern const AXID InvalidAXID;
  73 typedef unsigned AXIsolatedTreeID;
  74 
  75 enum class AccessibilityRole {
  76     Annotation = 1,
  77     Application,
  78     ApplicationAlert,
  79     ApplicationAlertDialog,
  80     ApplicationDialog,
  81     ApplicationGroup,
  82     ApplicationLog,
  83     ApplicationMarquee,
  84     ApplicationStatus,
  85     ApplicationTextGroup,
  86     ApplicationTimer,
  87     Audio,
  88     Blockquote,
  89     Browser,
  90     BusyIndicator,
</pre>
<hr />
<pre>
 209     TextArea,
 210     TextGroup,
 211     Term,
 212     Time,
 213     Tree,
 214     TreeGrid,
 215     TreeItem,
 216     TextField,
 217     ToggleButton,
 218     Toolbar,
 219     Unknown,
 220     UserInterfaceTooltip,
 221     ValueIndicator,
 222     Video,
 223     WebApplication,
 224     WebArea,
 225     WebCoreLink,
 226     Window,
 227 };
 228 
<span class="line-modified"> 229 enum class AccessibilityDetachmentType { CacheDestroyed, ElementDestroyed, ElementChange };</span>
<span class="line-added"> 230 </span>
<span class="line-added"> 231 enum class AccessibilityConversionSpace { Screen, Page };</span>
<span class="line-added"> 232 </span>
<span class="line-added"> 233 enum class AccessibilitySearchDirection {</span>
<span class="line-added"> 234     Next = 1,</span>
<span class="line-added"> 235     Previous,</span>
<span class="line-added"> 236 };</span>
<span class="line-added"> 237 </span>
<span class="line-added"> 238 enum class AccessibilityTextSource {</span>
<span class="line-added"> 239     Alternative,</span>
<span class="line-added"> 240     Children,</span>
<span class="line-added"> 241     Summary,</span>
<span class="line-added"> 242     Help,</span>
<span class="line-added"> 243     Visible,</span>
<span class="line-added"> 244     TitleTag,</span>
<span class="line-added"> 245     Placeholder,</span>
<span class="line-added"> 246     LabelByElement,</span>
<span class="line-added"> 247     Title,</span>
<span class="line-added"> 248     Subtitle,</span>
<span class="line-added"> 249     Action,</span>
<span class="line-added"> 250 };</span>
<span class="line-added"> 251 </span>
<span class="line-added"> 252 enum class AccessibilitySearchKey {</span>
<span class="line-added"> 253     AnyType = 1,</span>
<span class="line-added"> 254     Article,</span>
<span class="line-added"> 255     BlockquoteSameLevel,</span>
<span class="line-added"> 256     Blockquote,</span>
<span class="line-added"> 257     BoldFont,</span>
<span class="line-added"> 258     Button,</span>
<span class="line-added"> 259     CheckBox,</span>
<span class="line-added"> 260     Control,</span>
<span class="line-added"> 261     DifferentType,</span>
<span class="line-added"> 262     FontChange,</span>
<span class="line-added"> 263     FontColorChange,</span>
<span class="line-added"> 264     Frame,</span>
<span class="line-added"> 265     Graphic,</span>
<span class="line-added"> 266     HeadingLevel1,</span>
<span class="line-added"> 267     HeadingLevel2,</span>
<span class="line-added"> 268     HeadingLevel3,</span>
<span class="line-added"> 269     HeadingLevel4,</span>
<span class="line-added"> 270     HeadingLevel5,</span>
<span class="line-added"> 271     HeadingLevel6,</span>
<span class="line-added"> 272     HeadingSameLevel,</span>
<span class="line-added"> 273     Heading,</span>
<span class="line-added"> 274     Highlighted,</span>
<span class="line-added"> 275     ItalicFont,</span>
<span class="line-added"> 276     KeyboardFocusable,</span>
<span class="line-added"> 277     Landmark,</span>
<span class="line-added"> 278     Link,</span>
<span class="line-added"> 279     List,</span>
<span class="line-added"> 280     LiveRegion,</span>
<span class="line-added"> 281     MisspelledWord,</span>
<span class="line-added"> 282     Outline,</span>
<span class="line-added"> 283     PlainText,</span>
<span class="line-added"> 284     RadioGroup,</span>
<span class="line-added"> 285     SameType,</span>
<span class="line-added"> 286     StaticText,</span>
<span class="line-added"> 287     StyleChange,</span>
<span class="line-added"> 288     TableSameLevel,</span>
<span class="line-added"> 289     Table,</span>
<span class="line-added"> 290     TextField,</span>
<span class="line-added"> 291     Underline,</span>
<span class="line-added"> 292     UnvisitedLink,</span>
<span class="line-added"> 293     VisitedLink,</span>
<span class="line-added"> 294 };</span>
<span class="line-added"> 295 </span>
<span class="line-added"> 296 struct AccessibilitySearchCriteria {</span>
<span class="line-added"> 297     AXCoreObject* anchorObject { nullptr };</span>
<span class="line-added"> 298     AXCoreObject* startObject;</span>
<span class="line-added"> 299     AccessibilitySearchDirection searchDirection;</span>
<span class="line-added"> 300     Vector&lt;AccessibilitySearchKey&gt; searchKeys;</span>
<span class="line-added"> 301     String searchText;</span>
<span class="line-added"> 302     unsigned resultsLimit;</span>
<span class="line-added"> 303     bool visibleOnly;</span>
<span class="line-added"> 304     bool immediateDescendantsOnly;</span>
<span class="line-added"> 305 </span>
<span class="line-added"> 306     AccessibilitySearchCriteria(AXCoreObject* startObject, AccessibilitySearchDirection searchDirection, String searchText, unsigned resultsLimit, bool visibleOnly, bool immediateDescendantsOnly)</span>
<span class="line-added"> 307         : startObject(startObject)</span>
<span class="line-added"> 308         , searchDirection(searchDirection)</span>
<span class="line-added"> 309         , searchText(searchText)</span>
<span class="line-added"> 310         , resultsLimit(resultsLimit)</span>
<span class="line-added"> 311         , visibleOnly(visibleOnly)</span>
<span class="line-added"> 312         , immediateDescendantsOnly(immediateDescendantsOnly)</span>
<span class="line-added"> 313     { }</span>
<span class="line-added"> 314 };</span>
<span class="line-added"> 315 </span>
<span class="line-added"> 316 enum class AccessibilityObjectInclusion {</span>
<span class="line-added"> 317     IncludeObject,</span>
<span class="line-added"> 318     IgnoreObject,</span>
<span class="line-added"> 319     DefaultBehavior,</span>
<span class="line-added"> 320 };</span>
<span class="line-added"> 321 </span>
<span class="line-added"> 322 enum class AccessibilityCurrentState { False, True, Page, Step, Location, Date, Time };</span>
<span class="line-added"> 323 </span>
<span class="line-added"> 324 enum class AccessibilityButtonState {</span>
<span class="line-added"> 325     Off = 0,</span>
<span class="line-added"> 326     On,</span>
<span class="line-added"> 327     Mixed,</span>
<span class="line-added"> 328 };</span>
<span class="line-added"> 329 </span>
<span class="line-added"> 330 enum class AccessibilitySortDirection {</span>
<span class="line-added"> 331     None,</span>
<span class="line-added"> 332     Ascending,</span>
<span class="line-added"> 333     Descending,</span>
<span class="line-added"> 334     Other,</span>
<span class="line-added"> 335     Invalid,</span>
<span class="line-added"> 336 };</span>
<span class="line-added"> 337 </span>
<span class="line-added"> 338 enum class AccessibilitySearchTextStartFrom {</span>
<span class="line-added"> 339     Begin, // Search from the beginning of the element.</span>
<span class="line-added"> 340     Selection, // Search from the position of the current selection.</span>
<span class="line-added"> 341     End // Search from the end of the element.</span>
<span class="line-added"> 342 };</span>
<span class="line-added"> 343 </span>
<span class="line-added"> 344 enum class AccessibilitySearchTextDirection {</span>
<span class="line-added"> 345     Forward, // Occurrence after the starting range.</span>
<span class="line-added"> 346     Backward, // Occurrence before the starting range.</span>
<span class="line-added"> 347     Closest, // Closest occurrence to the starting range, whether after or before.</span>
<span class="line-added"> 348     All // All occurrences</span>
<span class="line-added"> 349 };</span>
<span class="line-added"> 350 </span>
<span class="line-added"> 351 struct AccessibilitySearchTextCriteria {</span>
<span class="line-added"> 352     Vector&lt;String&gt; searchStrings; // Text strings to search for.</span>
<span class="line-added"> 353     AccessibilitySearchTextStartFrom start;</span>
<span class="line-added"> 354     AccessibilitySearchTextDirection direction;</span>
<span class="line-added"> 355 </span>
<span class="line-added"> 356     AccessibilitySearchTextCriteria()</span>
<span class="line-added"> 357         : start(AccessibilitySearchTextStartFrom::Selection)</span>
<span class="line-added"> 358         , direction(AccessibilitySearchTextDirection::Forward)</span>
<span class="line-added"> 359     { }</span>
<span class="line-added"> 360 };</span>
<span class="line-added"> 361 </span>
<span class="line-added"> 362 enum class AccessibilityTextOperationType {</span>
<span class="line-added"> 363     Select,</span>
<span class="line-added"> 364     Replace,</span>
<span class="line-added"> 365     Capitalize,</span>
<span class="line-added"> 366     Lowercase,</span>
<span class="line-added"> 367     Uppercase</span>
<span class="line-added"> 368 };</span>
<span class="line-added"> 369 </span>
<span class="line-added"> 370 struct AccessibilityTextOperation {</span>
<span class="line-added"> 371     Vector&lt;RefPtr&lt;Range&gt;&gt; textRanges; // text on which perform the operation.</span>
<span class="line-added"> 372     AccessibilityTextOperationType type;</span>
<span class="line-added"> 373     String replacementText; // For type = replace.</span>
<span class="line-added"> 374 </span>
<span class="line-added"> 375     AccessibilityTextOperation()</span>
<span class="line-added"> 376         : type(AccessibilityTextOperationType::Select)</span>
<span class="line-added"> 377     { }</span>
<span class="line-added"> 378 };</span>
<span class="line-added"> 379 </span>
<span class="line-added"> 380 enum class AccessibilityOrientation {</span>
<span class="line-added"> 381     Vertical,</span>
<span class="line-added"> 382     Horizontal,</span>
<span class="line-added"> 383     Undefined,</span>
<span class="line-added"> 384 };</span>
<span class="line-added"> 385 </span>
<span class="line-added"> 386 struct AccessibilityTextUnderElementMode {</span>
<span class="line-added"> 387     enum ChildrenInclusion {</span>
<span class="line-added"> 388         TextUnderElementModeSkipIgnoredChildren,</span>
<span class="line-added"> 389         TextUnderElementModeIncludeAllChildren,</span>
<span class="line-added"> 390         TextUnderElementModeIncludeNameFromContentsChildren, // This corresponds to ARIA concept: nameFrom</span>
<span class="line-added"> 391     };</span>
<span class="line-added"> 392 </span>
<span class="line-added"> 393     ChildrenInclusion childrenInclusion;</span>
<span class="line-added"> 394     bool includeFocusableContent;</span>
<span class="line-added"> 395     Node* ignoredChildNode;</span>
<span class="line-added"> 396 </span>
<span class="line-added"> 397     AccessibilityTextUnderElementMode(ChildrenInclusion c = TextUnderElementModeSkipIgnoredChildren, bool i = false, Node* ignored = nullptr)</span>
<span class="line-added"> 398         : childrenInclusion(c)</span>
<span class="line-added"> 399         , includeFocusableContent(i)</span>
<span class="line-added"> 400         , ignoredChildNode(ignored)</span>
<span class="line-added"> 401     { }</span>
<span class="line-added"> 402 };</span>
<span class="line-added"> 403 </span>
<span class="line-added"> 404 #if PLATFORM(COCOA)</span>
<span class="line-added"> 405 typedef struct _NSRange NSRange;</span>
<span class="line-added"> 406 #endif</span>
<span class="line-added"> 407 </span>
<span class="line-added"> 408 struct PlainTextRange {</span>
<span class="line-added"> 409     unsigned start { 0 };</span>
<span class="line-added"> 410     unsigned length { 0 };</span>
<span class="line-added"> 411 </span>
<span class="line-added"> 412     PlainTextRange() = default;</span>
<span class="line-added"> 413 </span>
<span class="line-added"> 414     PlainTextRange(unsigned s, unsigned l)</span>
<span class="line-added"> 415         : start(s)</span>
<span class="line-added"> 416         , length(l)</span>
<span class="line-added"> 417     { }</span>
<span class="line-added"> 418 </span>
<span class="line-added"> 419 #if PLATFORM(COCOA)</span>
<span class="line-added"> 420     PlainTextRange(NSRange);</span>
<span class="line-added"> 421 #endif</span>
<span class="line-added"> 422 </span>
<span class="line-added"> 423     bool isNull() const { return !start &amp;&amp; !length; }</span>
<span class="line-added"> 424 };</span>
<span class="line-added"> 425 </span>
<span class="line-added"> 426 enum class AccessibilityVisiblePositionForBounds {</span>
<span class="line-added"> 427     First,</span>
<span class="line-added"> 428     Last,</span>
<span class="line-added"> 429 };</span>
<span class="line-added"> 430 </span>
<span class="line-added"> 431 struct VisiblePositionRange {</span>
<span class="line-added"> 432     VisiblePosition start;</span>
<span class="line-added"> 433     VisiblePosition end;</span>
<span class="line-added"> 434 </span>
<span class="line-added"> 435     VisiblePositionRange() = default;</span>
<span class="line-added"> 436     VisiblePositionRange(const VisiblePosition&amp; s, const VisiblePosition&amp; e)</span>
<span class="line-added"> 437         : start(s)</span>
<span class="line-added"> 438         , end(e)</span>
<span class="line-added"> 439     { }</span>
<span class="line-added"> 440 </span>
<span class="line-added"> 441     VisiblePositionRange(const VisibleSelection&amp; selection)</span>
<span class="line-added"> 442         : start(selection.start())</span>
<span class="line-added"> 443         , end(selection.end())</span>
<span class="line-added"> 444     { }</span>
<span class="line-added"> 445 </span>
<span class="line-added"> 446     bool isNull() const { return start.isNull() || end.isNull(); }</span>
<span class="line-added"> 447 };</span>
<span class="line-added"> 448 </span>
<span class="line-added"> 449 enum class AccessibilityMathScriptObjectType { Subscript, Superscript };</span>
<span class="line-added"> 450 enum class AccessibilityMathMultiscriptObjectType { PreSubscript, PreSuperscript, PostSubscript, PostSuperscript };</span>
<span class="line-added"> 451 </span>
<span class="line-added"> 452 // Use this struct to store the isIgnored data that depends on the parents, so that in addChildren()</span>
<span class="line-added"> 453 // we avoid going up the parent chain for each element while traversing the tree with useful information already.</span>
<span class="line-added"> 454 struct AccessibilityIsIgnoredFromParentData {</span>
<span class="line-added"> 455     AXCoreObject* parent { nullptr };</span>
<span class="line-added"> 456     bool isAXHidden { false };</span>
<span class="line-added"> 457     bool isPresentationalChildOfAriaRole { false };</span>
<span class="line-added"> 458     bool isDescendantOfBarrenParent { false };</span>
<span class="line-added"> 459 </span>
<span class="line-added"> 460     AccessibilityIsIgnoredFromParentData(AXCoreObject* parent = nullptr)</span>
<span class="line-added"> 461         : parent(parent)</span>
<span class="line-added"> 462     { }</span>
<span class="line-added"> 463 </span>
<span class="line-added"> 464     bool isNull() const { return !parent; }</span>
<span class="line-added"> 465 };</span>
<span class="line-added"> 466 </span>
<span class="line-added"> 467 class AXCoreObject : public ThreadSafeRefCounted&lt;AXCoreObject&gt; {</span>
 468 public:
<span class="line-modified"> 469     virtual ~AXCoreObject() = default;</span>
 470 
<span class="line-modified"> 471     // After constructing an accessible object, it must be given a</span>
<span class="line-modified"> 472     // unique ID, then added to AXObjectCache, and finally init() must</span>
<span class="line-modified"> 473     // be called last.</span>
<span class="line-added"> 474     virtual void setObjectID(AXID) = 0;</span>
<span class="line-added"> 475     virtual AXID objectID() const = 0;</span>
<span class="line-added"> 476     virtual void init() = 0;</span>
<span class="line-added"> 477 </span>
<span class="line-added"> 478     // When the corresponding WebCore object that this accessible object</span>
<span class="line-added"> 479     // represents is deleted, it must be detached.</span>
<span class="line-added"> 480     void detach(AccessibilityDetachmentType);</span>
<span class="line-added"> 481     virtual bool isDetached() const = 0;</span>
<span class="line-added"> 482 </span>
<span class="line-added"> 483     typedef Vector&lt;RefPtr&lt;AXCoreObject&gt;&gt; AccessibilityChildrenVector;</span>
<span class="line-added"> 484 </span>
<span class="line-added"> 485     virtual bool isAccessibilityObject() const = 0;</span>
<span class="line-added"> 486     virtual bool isAccessibilityNodeObject() const = 0;</span>
<span class="line-added"> 487     virtual bool isAccessibilityRenderObject() const = 0;</span>
<span class="line-added"> 488     virtual bool isAccessibilityScrollbar() const = 0;</span>
<span class="line-added"> 489     virtual bool isAccessibilityScrollView() const = 0;</span>
<span class="line-added"> 490     virtual bool isAccessibilitySVGRoot() const = 0;</span>
<span class="line-added"> 491     virtual bool isAccessibilitySVGElement() const = 0;</span>
<span class="line-added"> 492 </span>
<span class="line-added"> 493     virtual bool isAttachmentElement() const = 0;</span>
<span class="line-added"> 494     virtual bool isHeading() const = 0;</span>
 495     virtual bool isLink() const = 0;

 496     virtual bool isImage() const = 0;
<span class="line-added"> 497     bool isImageMap() const { return roleValue() == AccessibilityRole::ImageMap; }</span>
<span class="line-added"> 498     virtual bool isNativeImage() const = 0;</span>
<span class="line-added"> 499     virtual bool isImageButton() const = 0;</span>
<span class="line-added"> 500     virtual bool isPasswordField() const = 0;</span>
<span class="line-added"> 501     virtual bool isContainedByPasswordField() const = 0;</span>
<span class="line-added"> 502     virtual AXCoreObject* passwordFieldOrContainingPasswordField() = 0;</span>
<span class="line-added"> 503     virtual bool isNativeTextControl() const = 0;</span>
<span class="line-added"> 504     virtual bool isSearchField() const = 0;</span>
<span class="line-added"> 505     bool isWebArea() const { return roleValue() == AccessibilityRole::WebArea; }</span>
<span class="line-added"> 506     bool isCheckbox() const { return roleValue() == AccessibilityRole::CheckBox; }</span>
<span class="line-added"> 507     bool isRadioButton() const { return roleValue() == AccessibilityRole::RadioButton; }</span>
<span class="line-added"> 508     bool isListBox() const { return roleValue() == AccessibilityRole::ListBox; }</span>
<span class="line-added"> 509     virtual bool isNativeListBox() const = 0;</span>
<span class="line-added"> 510     virtual bool isListBoxOption() const = 0;</span>
<span class="line-added"> 511     virtual bool isAttachment() const = 0;</span>
<span class="line-added"> 512     virtual bool isMediaTimeline() const = 0;</span>
<span class="line-added"> 513     virtual bool isMenuRelated() const = 0;</span>
<span class="line-added"> 514     virtual bool isMenu() const = 0;</span>
<span class="line-added"> 515     virtual bool isMenuBar() const = 0;</span>
<span class="line-added"> 516     virtual bool isMenuButton() const = 0;</span>
<span class="line-added"> 517     virtual bool isMenuItem() const = 0;</span>
 518     virtual bool isFileUploadButton() const = 0;
<span class="line-modified"> 519     virtual bool isInputImage() const = 0;</span>
<span class="line-modified"> 520     virtual bool isProgressIndicator() const = 0;</span>
<span class="line-modified"> 521     virtual bool isSlider() const = 0;</span>
<span class="line-modified"> 522     virtual bool isSliderThumb() const = 0;</span>
<span class="line-added"> 523     virtual bool isInputSlider() const = 0;</span>
<span class="line-added"> 524     virtual bool isControl() const = 0;</span>
<span class="line-added"> 525     virtual bool isLabel() const = 0;</span>
<span class="line-added"> 526     // lists support (l, ul, ol, dl)</span>
<span class="line-added"> 527     virtual bool isList() const = 0;</span>
<span class="line-added"> 528     virtual bool isUnorderedList() const = 0;</span>
<span class="line-added"> 529     virtual bool isOrderedList() const = 0;</span>
<span class="line-added"> 530     virtual bool isDescriptionList() const = 0;</span>
<span class="line-added"> 531 </span>
<span class="line-added"> 532     virtual bool isTable() const = 0;</span>
<span class="line-added"> 533     virtual bool isDataTable() const = 0;</span>
<span class="line-added"> 534     virtual bool isTableRow() const = 0;</span>
<span class="line-added"> 535     virtual bool isTableColumn() const = 0;</span>
<span class="line-added"> 536     virtual bool isTableCell() const = 0;</span>
<span class="line-added"> 537     virtual bool isFieldset() const = 0;</span>
<span class="line-added"> 538     virtual bool isGroup() const = 0;</span>
<span class="line-added"> 539     virtual bool isARIATreeGridRow() const = 0;</span>
<span class="line-added"> 540     virtual bool isImageMapLink() const = 0;</span>
<span class="line-added"> 541     virtual bool isMenuList() const = 0;</span>
<span class="line-added"> 542     virtual bool isMenuListPopup() const = 0;</span>
<span class="line-added"> 543     virtual bool isMenuListOption() const = 0;</span>
<span class="line-added"> 544 </span>
<span class="line-added"> 545     // Native spin buttons.</span>
<span class="line-added"> 546     bool isSpinButton() const { return roleValue() == AccessibilityRole::SpinButton; }</span>
<span class="line-added"> 547     virtual bool isNativeSpinButton() const = 0;</span>
<span class="line-added"> 548     virtual AXCoreObject* incrementButton() = 0;</span>
<span class="line-added"> 549     virtual AXCoreObject* decrementButton() = 0;</span>
<span class="line-added"> 550     virtual bool isSpinButtonPart() const = 0;</span>
<span class="line-added"> 551     virtual bool isIncrementor() const = 0;</span>
<span class="line-added"> 552 </span>
<span class="line-added"> 553     virtual bool isMockObject() const = 0;</span>
<span class="line-added"> 554     virtual bool isMediaObject() const = 0;</span>
<span class="line-added"> 555     bool isSwitch() const { return roleValue() == AccessibilityRole::Switch; }</span>
<span class="line-added"> 556     bool isToggleButton() const { return roleValue() == AccessibilityRole::ToggleButton; }</span>
<span class="line-added"> 557     virtual bool isTextControl() const = 0;</span>
<span class="line-added"> 558     virtual bool isARIATextControl() const = 0;</span>
<span class="line-added"> 559     virtual bool isNonNativeTextControl() const = 0;</span>
<span class="line-added"> 560     bool isTabList() const { return roleValue() == AccessibilityRole::TabList; }</span>
<span class="line-added"> 561     bool isTabItem() const { return roleValue() == AccessibilityRole::Tab; }</span>
<span class="line-added"> 562     bool isRadioGroup() const { return roleValue() == AccessibilityRole::RadioGroup; }</span>
<span class="line-added"> 563     bool isComboBox() const { return roleValue() == AccessibilityRole::ComboBox; }</span>
<span class="line-added"> 564     bool isTree() const { return roleValue() == AccessibilityRole::Tree; }</span>
<span class="line-added"> 565     bool isTreeGrid() const { return roleValue() == AccessibilityRole::TreeGrid; }</span>
<span class="line-added"> 566     bool isTreeItem() const { return roleValue() == AccessibilityRole::TreeItem; }</span>
<span class="line-added"> 567     bool isScrollbar() const { return roleValue() == AccessibilityRole::ScrollBar; }</span>
<span class="line-added"> 568     virtual bool isButton() const = 0;</span>
<span class="line-added"> 569 </span>
<span class="line-added"> 570     bool isListItem() const { return roleValue() == AccessibilityRole::ListItem; }</span>
<span class="line-added"> 571     bool isCheckboxOrRadio() const { return isCheckbox() || isRadioButton(); }</span>
<span class="line-added"> 572     bool isScrollView() const { return roleValue() == AccessibilityRole::ScrollArea; }</span>
<span class="line-added"> 573     bool isCanvas() const { return roleValue() == AccessibilityRole::Canvas; }</span>
<span class="line-added"> 574     bool isPopUpButton() const { return roleValue() == AccessibilityRole::PopUpButton; }</span>
<span class="line-added"> 575     bool isColorWell() const { return roleValue() == AccessibilityRole::ColorWell; }</span>
<span class="line-added"> 576     bool isSplitter() const { return roleValue() == AccessibilityRole::Splitter; }</span>
<span class="line-added"> 577     bool isToolbar() const { return roleValue() == AccessibilityRole::Toolbar; }</span>
<span class="line-added"> 578     bool isSummary() const { return roleValue() == AccessibilityRole::Summary; }</span>
<span class="line-added"> 579 </span>
<span class="line-added"> 580     virtual bool isBlockquote() const = 0;</span>
<span class="line-added"> 581     virtual bool isLandmark() const = 0;</span>
<span class="line-added"> 582     virtual bool isRangeControl() const = 0;</span>
<span class="line-added"> 583     virtual bool isMeter() const = 0;</span>
<span class="line-added"> 584     virtual bool isStyleFormatGroup() const = 0;</span>
<span class="line-added"> 585     virtual bool isFigureElement() const = 0;</span>
<span class="line-added"> 586     virtual bool isKeyboardFocusable() const = 0;</span>
<span class="line-added"> 587     virtual bool isOutput() const = 0;</span>
<span class="line-added"> 588 </span>
<span class="line-added"> 589     virtual bool isChecked() const = 0;</span>
<span class="line-added"> 590     virtual bool isEnabled() const = 0;</span>
<span class="line-added"> 591     virtual bool isSelected() const = 0;</span>
<span class="line-added"> 592     virtual bool isFocused() const = 0;</span>
<span class="line-added"> 593     virtual bool isHovered() const = 0;</span>
<span class="line-added"> 594     virtual bool isIndeterminate() const = 0;</span>
<span class="line-added"> 595     virtual bool isLoaded() const = 0;</span>
<span class="line-added"> 596     virtual bool isMultiSelectable() const = 0;</span>
<span class="line-added"> 597     // FIXME should need just one since onscreen should be !offscreen.</span>
<span class="line-added"> 598     virtual bool isOnScreen() const = 0;</span>
<span class="line-added"> 599     virtual bool isOffScreen() const = 0;</span>
<span class="line-added"> 600     virtual bool isPressed() const = 0;</span>
<span class="line-added"> 601     virtual bool isUnvisited() const = 0;</span>
<span class="line-added"> 602     virtual bool isVisited() const = 0;</span>
<span class="line-added"> 603     virtual bool isRequired() const = 0;</span>
<span class="line-added"> 604     virtual bool supportsRequiredAttribute() const = 0;</span>
<span class="line-added"> 605     virtual bool isLinked() const = 0;</span>
<span class="line-added"> 606     virtual bool isExpanded() const = 0;</span>
<span class="line-added"> 607     virtual bool isVisible() const = 0;</span>
<span class="line-added"> 608     virtual bool isCollapsed() const = 0;</span>
<span class="line-added"> 609     virtual void setIsExpanded(bool) = 0;</span>
 610     virtual FloatRect relativeFrame() const = 0;
<span class="line-modified"> 611     virtual FloatRect convertFrameToSpace(const FloatRect&amp;, AccessibilityConversionSpace) const = 0;</span>
<span class="line-modified"> 612 </span>
<span class="line-modified"> 613     // In a multi-select list, many items can be selected but only one is active at a time.</span>
<span class="line-added"> 614     virtual bool isSelectedOptionActive() const = 0;</span>
<span class="line-added"> 615 </span>
<span class="line-added"> 616     virtual bool hasBoldFont() const = 0;</span>
<span class="line-added"> 617     virtual bool hasItalicFont() const = 0;</span>
<span class="line-added"> 618     virtual bool hasMisspelling() const = 0;</span>
<span class="line-added"> 619     virtual RefPtr&lt;Range&gt; getMisspellingRange(RefPtr&lt;Range&gt; const&amp; start, AccessibilitySearchDirection) const = 0;</span>
<span class="line-added"> 620     virtual bool hasPlainText() const = 0;</span>
<span class="line-added"> 621     virtual bool hasSameFont(RenderObject*) const = 0;</span>
<span class="line-added"> 622     virtual bool hasSameFontColor(RenderObject*) const = 0;</span>
<span class="line-added"> 623     virtual bool hasSameStyle(RenderObject*) const = 0;</span>
<span class="line-added"> 624     bool isStaticText() const { return roleValue() == AccessibilityRole::StaticText; }</span>
<span class="line-added"> 625     virtual bool hasUnderline() const = 0;</span>
<span class="line-added"> 626     virtual bool hasHighlighting() const = 0;</span>
<span class="line-added"> 627 </span>
<span class="line-added"> 628     virtual bool supportsDatetimeAttribute() const = 0;</span>
<span class="line-added"> 629     virtual String datetimeAttributeValue() const = 0;</span>
<span class="line-added"> 630 </span>
<span class="line-added"> 631     virtual bool canSetFocusAttribute() const = 0;</span>
<span class="line-added"> 632     virtual bool canSetTextRangeAttributes() const = 0;</span>
<span class="line-added"> 633     virtual bool canSetValueAttribute() const = 0;</span>
<span class="line-added"> 634     virtual bool canSetNumericValue() const = 0;</span>
<span class="line-added"> 635     virtual bool canSetSelectedAttribute() const = 0;</span>
<span class="line-added"> 636     virtual bool canSetSelectedChildrenAttribute() const = 0;</span>
<span class="line-added"> 637     virtual bool canSetExpandedAttribute() const = 0;</span>
<span class="line-added"> 638 </span>
<span class="line-added"> 639     virtual Element* element() const = 0;</span>
<span class="line-added"> 640     virtual Node* node() const = 0;</span>
<span class="line-added"> 641     virtual RenderObject* renderer() const = 0;</span>
<span class="line-added"> 642 </span>
<span class="line-added"> 643     virtual bool accessibilityIsIgnored() const = 0;</span>
<span class="line-added"> 644     virtual AccessibilityObjectInclusion defaultObjectInclusion() const = 0;</span>
<span class="line-added"> 645     virtual bool accessibilityIsIgnoredByDefault() const = 0;</span>
<span class="line-added"> 646 </span>
<span class="line-added"> 647     virtual bool isShowingValidationMessage() const = 0;</span>
<span class="line-added"> 648     virtual String validationMessage() const = 0;</span>
<span class="line-added"> 649 </span>
<span class="line-added"> 650     virtual unsigned blockquoteLevel() const = 0;</span>
<span class="line-added"> 651     virtual int headingLevel() const = 0;</span>
<span class="line-added"> 652     virtual int tableLevel() const = 0;</span>
<span class="line-added"> 653     virtual AccessibilityButtonState checkboxOrRadioValue() const = 0;</span>
<span class="line-added"> 654     virtual String valueDescription() const = 0;</span>
<span class="line-added"> 655     virtual float valueForRange() const = 0;</span>
<span class="line-added"> 656     virtual float maxValueForRange() const = 0;</span>
<span class="line-added"> 657     virtual float minValueForRange() const = 0;</span>
<span class="line-added"> 658     virtual float stepValueForRange() const = 0;</span>
<span class="line-added"> 659     virtual AXCoreObject* selectedRadioButton() = 0;</span>
<span class="line-added"> 660     virtual AXCoreObject* selectedTabItem() = 0;</span>
<span class="line-added"> 661     virtual AXCoreObject* selectedListItem() = 0;</span>
<span class="line-added"> 662     virtual int layoutCount() const = 0;</span>
<span class="line-added"> 663     virtual double estimatedLoadingProgress() const = 0;</span>
<span class="line-added"> 664 </span>
<span class="line-added"> 665     virtual bool supportsARIAOwns() const = 0;</span>
<span class="line-added"> 666     virtual bool isActiveDescendantOfFocusedContainer() const = 0;</span>
<span class="line-added"> 667     virtual void ariaActiveDescendantReferencingElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 668     virtual void ariaControlsElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 669     virtual void ariaControlsReferencingElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 670     virtual void ariaDescribedByElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 671     virtual void ariaDescribedByReferencingElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 672     virtual void ariaDetailsElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 673     virtual void ariaDetailsReferencingElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 674     virtual void ariaErrorMessageElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 675     virtual void ariaErrorMessageReferencingElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 676     virtual void ariaFlowToElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 677     virtual void ariaFlowToReferencingElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 678     virtual void ariaLabelledByElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 679     virtual void ariaLabelledByReferencingElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 680     virtual void ariaOwnsElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 681     virtual void ariaOwnsReferencingElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 682 </span>
<span class="line-added"> 683     virtual bool hasPopup() const = 0;</span>
<span class="line-added"> 684     virtual String popupValue() const = 0;</span>
<span class="line-added"> 685     virtual bool hasDatalist() const = 0;</span>
<span class="line-added"> 686     virtual bool supportsHasPopup() const = 0;</span>
<span class="line-added"> 687     virtual bool pressedIsPresent() const = 0;</span>
<span class="line-added"> 688     virtual bool ariaIsMultiline() const = 0;</span>
<span class="line-added"> 689     virtual String invalidStatus() const = 0;</span>
<span class="line-added"> 690     virtual bool supportsPressed() const = 0;</span>
<span class="line-added"> 691     virtual bool supportsExpanded() const = 0;</span>
<span class="line-added"> 692     virtual bool supportsChecked() const = 0;</span>
<span class="line-added"> 693     virtual AccessibilitySortDirection sortDirection() const = 0;</span>
<span class="line-added"> 694     virtual bool canvasHasFallbackContent() const = 0;</span>
<span class="line-added"> 695     virtual bool supportsRangeValue() const = 0;</span>
<span class="line-added"> 696     virtual String identifierAttribute() const = 0;</span>
<span class="line-added"> 697     virtual String linkRelValue() const = 0;</span>
<span class="line-added"> 698     virtual void classList(Vector&lt;String&gt;&amp;) const = 0;</span>
<span class="line-added"> 699     virtual AccessibilityCurrentState currentState() const = 0;</span>
<span class="line-added"> 700     virtual String currentValue() const = 0;</span>
<span class="line-added"> 701     virtual bool supportsCurrent() const = 0;</span>
<span class="line-added"> 702     virtual const String keyShortcutsValue() const = 0;</span>
<span class="line-added"> 703 </span>
<span class="line-added"> 704     // This function checks if the object should be ignored when there&#39;s a modal dialog displayed.</span>
<span class="line-added"> 705     virtual bool ignoredFromModalPresence() const = 0;</span>
<span class="line-added"> 706     virtual bool isModalDescendant(Node*) const = 0;</span>
<span class="line-added"> 707     virtual bool isModalNode() const = 0;</span>
<span class="line-added"> 708 </span>
<span class="line-added"> 709     virtual bool supportsSetSize() const = 0;</span>
<span class="line-added"> 710     virtual bool supportsPosInSet() const = 0;</span>
<span class="line-added"> 711     virtual int setSize() const = 0;</span>
<span class="line-added"> 712     virtual int posInSet() const = 0;</span>
<span class="line-added"> 713 </span>
<span class="line-added"> 714     // ARIA drag and drop</span>
<span class="line-added"> 715     virtual bool supportsARIADropping() const = 0;</span>
<span class="line-added"> 716     virtual bool supportsARIADragging() const = 0;</span>
<span class="line-added"> 717     virtual bool isARIAGrabbed() = 0;</span>
<span class="line-added"> 718     virtual void setARIAGrabbed(bool) = 0;</span>
<span class="line-added"> 719     virtual Vector&lt;String&gt; determineARIADropEffects() = 0;</span>
<span class="line-added"> 720 </span>
<span class="line-added"> 721     // Called on the root AX object to return the deepest available element.</span>
<span class="line-added"> 722     virtual AXCoreObject* accessibilityHitTest(const IntPoint&amp;) const = 0;</span>
<span class="line-added"> 723     // Called on the AX object after the render tree determines which is the right AccessibilityRenderObject.</span>
<span class="line-added"> 724     virtual AXCoreObject* elementAccessibilityHitTest(const IntPoint&amp;) const = 0;</span>
<span class="line-added"> 725 </span>
<span class="line-added"> 726     virtual AXCoreObject* focusedUIElement() const = 0;</span>
<span class="line-added"> 727 </span>
<span class="line-added"> 728     virtual AXCoreObject* firstChild() const = 0;</span>
<span class="line-added"> 729     virtual AXCoreObject* lastChild() const = 0;</span>
<span class="line-added"> 730     virtual AXCoreObject* previousSibling() const = 0;</span>
<span class="line-added"> 731     virtual AXCoreObject* nextSibling() const = 0;</span>
<span class="line-added"> 732     virtual AXCoreObject* nextSiblingUnignored(int limit) const = 0;</span>
<span class="line-added"> 733     virtual AXCoreObject* previousSiblingUnignored(int limit) const = 0;</span>
<span class="line-added"> 734     virtual AXCoreObject* parentObject() const = 0;</span>
<span class="line-added"> 735     virtual AXCoreObject* parentObjectUnignored() const = 0;</span>
<span class="line-added"> 736     virtual AXCoreObject* parentObjectIfExists() const = 0;</span>
<span class="line-added"> 737     virtual void findMatchingObjects(AccessibilitySearchCriteria*, AccessibilityChildrenVector&amp;) = 0;</span>
<span class="line-added"> 738     virtual bool isDescendantOfBarrenParent() const = 0;</span>
<span class="line-added"> 739     virtual bool isDescendantOfRole(AccessibilityRole) const = 0;</span>
<span class="line-added"> 740 </span>
<span class="line-added"> 741     // Text selection</span>
<span class="line-added"> 742     virtual Vector&lt;RefPtr&lt;Range&gt;&gt; findTextRanges(AccessibilitySearchTextCriteria const&amp;) const = 0;</span>
<span class="line-added"> 743     virtual Vector&lt;String&gt; performTextOperation(AccessibilityTextOperation const&amp;) = 0;</span>
<span class="line-added"> 744 </span>
<span class="line-added"> 745     virtual AXCoreObject* observableObject() const = 0;</span>
<span class="line-added"> 746     virtual void linkedUIElements(AccessibilityChildrenVector&amp;) const = 0;</span>
<span class="line-added"> 747     virtual AXCoreObject* titleUIElement() const = 0;</span>
<span class="line-added"> 748     virtual bool exposesTitleUIElement() const = 0;</span>
<span class="line-added"> 749     virtual AXCoreObject* correspondingLabelForControlElement() const = 0;</span>
<span class="line-added"> 750     virtual AXCoreObject* correspondingControlForLabelElement() const = 0;</span>
<span class="line-added"> 751     virtual AXCoreObject* scrollBar(AccessibilityOrientation) = 0;</span>
<span class="line-added"> 752 </span>
<span class="line-added"> 753     virtual AccessibilityRole ariaRoleAttribute() const = 0;</span>
<span class="line-added"> 754     virtual bool isPresentationalChildOfAriaRole() const = 0;</span>
<span class="line-added"> 755     virtual bool ariaRoleHasPresentationalChildren() const = 0;</span>
<span class="line-added"> 756     virtual bool inheritsPresentationalRole() const = 0;</span>
<span class="line-added"> 757 </span>
<span class="line-added"> 758     // Accessibility Text</span>
<span class="line-added"> 759     virtual void accessibilityText(Vector&lt;AccessibilityText&gt;&amp;) const = 0;</span>
<span class="line-added"> 760     // A single method for getting a computed label for an AXObject. It condenses the nuances of accessibilityText. Used by Inspector.</span>
<span class="line-added"> 761     virtual String computedLabel() = 0;</span>
<span class="line-added"> 762 </span>
<span class="line-added"> 763     // A programmatic way to set a name on an AccessibleObject.</span>
<span class="line-added"> 764     virtual void setAccessibleName(const AtomString&amp;) = 0;</span>
<span class="line-added"> 765     virtual bool hasAttributesRequiredForInclusion() const = 0;</span>
<span class="line-added"> 766 </span>
<span class="line-added"> 767     // Accessibility Text - (To be deprecated).</span>
<span class="line-added"> 768     virtual String accessibilityDescription() const = 0;</span>
<span class="line-added"> 769     virtual String title() const = 0;</span>
<span class="line-added"> 770     virtual String helpText() const = 0;</span>
<span class="line-added"> 771     bool containsText(String const&amp; text) const</span>
<span class="line-added"> 772     {</span>
<span class="line-added"> 773         // If text is empty we return true.</span>
<span class="line-added"> 774         return text.isEmpty()</span>
<span class="line-added"> 775             || findPlainText(title(), text, CaseInsensitive)</span>
<span class="line-added"> 776             || findPlainText(accessibilityDescription(), text, CaseInsensitive)</span>
<span class="line-added"> 777             || findPlainText(stringValue(), text, CaseInsensitive);</span>
<span class="line-added"> 778     }</span>
<span class="line-added"> 779 </span>
<span class="line-added"> 780     // Methods for determining accessibility text.</span>
<span class="line-added"> 781     virtual bool isARIAStaticText() const = 0;</span>
<span class="line-added"> 782     virtual String stringValue() const = 0;</span>
<span class="line-added"> 783     virtual String textUnderElement(AccessibilityTextUnderElementMode = AccessibilityTextUnderElementMode()) const = 0;</span>
<span class="line-added"> 784     virtual String text() const = 0;</span>
<span class="line-added"> 785     virtual int textLength() const = 0;</span>
<span class="line-added"> 786     virtual String ariaLabeledByAttribute() const = 0;</span>
<span class="line-added"> 787     virtual String ariaDescribedByAttribute() const = 0;</span>
<span class="line-added"> 788     virtual const String placeholderValue() const = 0;</span>
<span class="line-added"> 789     virtual bool accessibleNameDerivesFromContent() const = 0;</span>
<span class="line-added"> 790 </span>
<span class="line-added"> 791     // Abbreviations</span>
<span class="line-added"> 792     virtual String expandedTextValue() const = 0;</span>
<span class="line-added"> 793     virtual bool supportsExpandedTextValue() const = 0;</span>
<span class="line-added"> 794 </span>
<span class="line-added"> 795     virtual void elementsFromAttribute(Vector&lt;Element*&gt;&amp;, const QualifiedName&amp;) const = 0;</span>
<span class="line-added"> 796 </span>
<span class="line-added"> 797     // Only if isColorWell()</span>
<span class="line-added"> 798     virtual void colorValue(int&amp; r, int&amp; g, int&amp; b) const = 0;</span>
<span class="line-added"> 799 </span>
<span class="line-added"> 800     virtual AccessibilityRole roleValue() const = 0;</span>
<span class="line-added"> 801     // Non-localized string associated with the object role.</span>
<span class="line-added"> 802     virtual String rolePlatformString() const = 0;</span>
<span class="line-added"> 803     // Localized string that describes the object&#39;s role.</span>
<span class="line-added"> 804     virtual String roleDescription() const = 0;</span>
<span class="line-added"> 805     // Localized string that describes ARIA landmark roles.</span>
<span class="line-added"> 806     virtual String ariaLandmarkRoleDescription() const = 0;</span>
<span class="line-added"> 807 </span>
<span class="line-added"> 808     virtual AXObjectCache* axObjectCache() const = 0;</span>
<span class="line-added"> 809 </span>
<span class="line-added"> 810     virtual Element* anchorElement() const = 0;</span>
<span class="line-added"> 811     virtual bool supportsPressAction() const = 0;</span>
<span class="line-added"> 812     virtual Element* actionElement() const = 0;</span>
<span class="line-added"> 813     virtual LayoutRect boundingBoxRect() const = 0;</span>
<span class="line-added"> 814     IntRect pixelSnappedBoundingBoxRect() const { return snappedIntRect(boundingBoxRect()); }</span>
<span class="line-added"> 815     virtual LayoutRect elementRect() const = 0;</span>
<span class="line-added"> 816     LayoutSize size() const { return elementRect().size(); }</span>
<span class="line-added"> 817     virtual IntPoint clickPoint() = 0;</span>
<span class="line-added"> 818     virtual Path elementPath() const = 0;</span>
<span class="line-added"> 819     virtual bool supportsPath() const = 0;</span>
<span class="line-added"> 820 </span>
<span class="line-added"> 821     virtual TextIteratorBehavior textIteratorBehaviorForTextRange() const = 0;</span>
<span class="line-added"> 822     virtual PlainTextRange selectedTextRange() const = 0;</span>
<span class="line-added"> 823     virtual unsigned selectionStart() const = 0;</span>
<span class="line-added"> 824     virtual unsigned selectionEnd() const = 0;</span>
<span class="line-added"> 825 </span>
<span class="line-added"> 826     virtual URL url() const = 0;</span>
<span class="line-added"> 827     virtual VisibleSelection selection() const = 0;</span>
<span class="line-added"> 828     virtual String selectedText() const = 0;</span>
<span class="line-added"> 829     virtual String accessKey() const = 0;</span>
<span class="line-added"> 830     virtual String actionVerb() const = 0;</span>
<span class="line-added"> 831     virtual Widget* widget() const = 0;</span>
<span class="line-added"> 832     virtual Widget* widgetForAttachmentView() const = 0;</span>
<span class="line-added"> 833     virtual Page* page() const = 0;</span>
<span class="line-added"> 834     virtual Document* document() const = 0;</span>
<span class="line-added"> 835     virtual FrameView* documentFrameView() const = 0;</span>
<span class="line-added"> 836     virtual Frame* frame() const = 0;</span>
<span class="line-added"> 837     virtual Frame* mainFrame() const = 0;</span>
<span class="line-added"> 838     virtual Document* topDocument() const = 0;</span>
<span class="line-added"> 839     virtual ScrollView* scrollViewAncestor() const = 0;</span>
<span class="line-added"> 840     virtual String language() const = 0;</span>
<span class="line-added"> 841     // 1-based, to match the aria-level spec.</span>
<span class="line-added"> 842     virtual unsigned hierarchicalLevel() const = 0;</span>
<span class="line-added"> 843     virtual bool isInlineText() const = 0;</span>
<span class="line-added"> 844 </span>
<span class="line-added"> 845     virtual void setFocused(bool) = 0;</span>
<span class="line-added"> 846     virtual void setSelectedText(const String&amp;) = 0;</span>
<span class="line-added"> 847     virtual void setSelectedTextRange(const PlainTextRange&amp;) = 0;</span>
<span class="line-added"> 848     virtual void setValue(const String&amp;) = 0;</span>
<span class="line-added"> 849     virtual bool replaceTextInRange(const String&amp;, const PlainTextRange&amp;) = 0;</span>
<span class="line-added"> 850     virtual bool insertText(const String&amp;) = 0;</span>
<span class="line-added"> 851 </span>
<span class="line-added"> 852     virtual void setValue(float) = 0;</span>
<span class="line-added"> 853     virtual void setSelected(bool) = 0;</span>
<span class="line-added"> 854     virtual void setSelectedRows(AccessibilityChildrenVector&amp;) = 0;</span>
<span class="line-added"> 855 </span>
<span class="line-added"> 856     virtual void makeRangeVisible(const PlainTextRange&amp;) = 0;</span>
<span class="line-added"> 857     virtual bool press() = 0;</span>
<span class="line-added"> 858     virtual bool performDefaultAction() = 0;</span>
<span class="line-added"> 859 </span>
<span class="line-added"> 860     virtual AccessibilityOrientation orientation() const = 0;</span>
<span class="line-added"> 861     virtual void increment() = 0;</span>
<span class="line-added"> 862     virtual void decrement() = 0;</span>
<span class="line-added"> 863 </span>
<span class="line-added"> 864     virtual void childrenChanged() = 0;</span>
<span class="line-added"> 865     virtual void textChanged() = 0;</span>
<span class="line-added"> 866     virtual void updateAccessibilityRole() = 0;</span>
<span class="line-added"> 867     virtual const AccessibilityChildrenVector&amp; children(bool updateChildrenIfNeeded = true) = 0;</span>
<span class="line-added"> 868     virtual void addChildren() = 0;</span>
<span class="line-added"> 869     virtual void addChild(AXCoreObject*) = 0;</span>
<span class="line-added"> 870     virtual void insertChild(AXCoreObject*, unsigned) = 0;</span>
<span class="line-added"> 871 </span>
<span class="line-added"> 872     virtual bool shouldIgnoreAttributeRole() const = 0;</span>
<span class="line-added"> 873 </span>
<span class="line-added"> 874     virtual bool canHaveChildren() const = 0;</span>
<span class="line-added"> 875     virtual bool hasChildren() const = 0;</span>
<span class="line-added"> 876     virtual void updateChildrenIfNecessary() = 0;</span>
<span class="line-added"> 877     virtual void setNeedsToUpdateChildren() = 0;</span>
<span class="line-added"> 878     virtual void setNeedsToUpdateSubtree() = 0;</span>
<span class="line-added"> 879     virtual void clearChildren() = 0;</span>
<span class="line-added"> 880     virtual bool needsToUpdateChildren() const = 0;</span>
<span class="line-added"> 881     virtual void detachFromParent() = 0;</span>
<span class="line-added"> 882     virtual bool isDetachedFromParent() = 0;</span>
<span class="line-added"> 883 </span>
<span class="line-added"> 884     virtual bool canHaveSelectedChildren() const = 0;</span>
<span class="line-added"> 885     virtual void selectedChildren(AccessibilityChildrenVector&amp;) = 0;</span>
<span class="line-added"> 886     virtual void visibleChildren(AccessibilityChildrenVector&amp;) = 0;</span>
<span class="line-added"> 887     virtual void tabChildren(AccessibilityChildrenVector&amp;) = 0;</span>
<span class="line-added"> 888     virtual bool shouldFocusActiveDescendant() const = 0;</span>
<span class="line-added"> 889     virtual AXCoreObject* activeDescendant() const = 0;</span>
<span class="line-added"> 890     virtual void handleActiveDescendantChanged() = 0;</span>
<span class="line-added"> 891     virtual void handleAriaExpandedChanged() = 0;</span>
<span class="line-added"> 892     virtual bool isDescendantOfObject(const AXCoreObject*) const = 0;</span>
<span class="line-added"> 893     virtual bool isAncestorOfObject(const AXCoreObject*) const = 0;</span>
<span class="line-added"> 894     virtual AXCoreObject* firstAnonymousBlockChild() const = 0;</span>
<span class="line-added"> 895 </span>
<span class="line-added"> 896     virtual bool hasAttribute(const QualifiedName&amp;) const = 0;</span>
<span class="line-added"> 897     virtual const AtomString&amp; getAttribute(const QualifiedName&amp;) const = 0;</span>
<span class="line-added"> 898     virtual bool hasTagName(const QualifiedName&amp;) const = 0;</span>
<span class="line-added"> 899     virtual String tagName() const = 0;</span>
<span class="line-added"> 900 </span>
<span class="line-added"> 901     virtual VisiblePositionRange visiblePositionRange() const = 0;</span>
<span class="line-added"> 902     virtual VisiblePositionRange visiblePositionRangeForLine(unsigned) const = 0;</span>
<span class="line-added"> 903     virtual RefPtr&lt;Range&gt; elementRange() const = 0;</span>
<span class="line-added"> 904     virtual VisiblePositionRange visiblePositionRangeForUnorderedPositions(const VisiblePosition&amp;, const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 905     virtual VisiblePositionRange positionOfLeftWord(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 906     virtual VisiblePositionRange positionOfRightWord(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 907     virtual VisiblePositionRange leftLineVisiblePositionRange(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 908     virtual VisiblePositionRange rightLineVisiblePositionRange(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 909     virtual VisiblePositionRange sentenceForPosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 910     virtual VisiblePositionRange paragraphForPosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 911     virtual VisiblePositionRange styleRangeForPosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 912     virtual VisiblePositionRange visiblePositionRangeForRange(const PlainTextRange&amp;) const = 0;</span>
<span class="line-added"> 913     virtual VisiblePositionRange lineRangeForPosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 914 </span>
<span class="line-added"> 915     virtual RefPtr&lt;Range&gt; rangeForPlainTextRange(const PlainTextRange&amp;) const = 0;</span>
<span class="line-added"> 916 </span>
<span class="line-added"> 917     virtual String stringForRange(RefPtr&lt;Range&gt;) const = 0;</span>
<span class="line-added"> 918     virtual IntRect boundsForVisiblePositionRange(const VisiblePositionRange&amp;) const = 0;</span>
<span class="line-added"> 919     virtual IntRect boundsForRange(const RefPtr&lt;Range&gt;) const = 0;</span>
<span class="line-added"> 920     virtual int lengthForVisiblePositionRange(const VisiblePositionRange&amp;) const = 0;</span>
<span class="line-added"> 921     virtual void setSelectedVisiblePositionRange(const VisiblePositionRange&amp;) const = 0;</span>
<span class="line-added"> 922 </span>
<span class="line-added"> 923     virtual VisiblePosition visiblePositionForBounds(const IntRect&amp;, AccessibilityVisiblePositionForBounds) const = 0;</span>
<span class="line-added"> 924     virtual VisiblePosition visiblePositionForPoint(const IntPoint&amp;) const = 0;</span>
<span class="line-added"> 925     virtual VisiblePosition nextVisiblePosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 926     virtual VisiblePosition previousVisiblePosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 927     virtual VisiblePosition nextWordEnd(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 928     virtual VisiblePosition previousWordStart(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 929     virtual VisiblePosition nextLineEndPosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 930     virtual VisiblePosition previousLineStartPosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 931     virtual VisiblePosition nextSentenceEndPosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 932     virtual VisiblePosition previousSentenceStartPosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 933     virtual VisiblePosition nextParagraphEndPosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 934     virtual VisiblePosition previousParagraphStartPosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 935     virtual VisiblePosition visiblePositionForIndex(unsigned, bool /*lastIndexOK */) const = 0;</span>
<span class="line-added"> 936 </span>
<span class="line-added"> 937     virtual VisiblePosition visiblePositionForIndex(int) const = 0;</span>
<span class="line-added"> 938     virtual int indexForVisiblePosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 939 </span>
<span class="line-added"> 940     virtual AXCoreObject* accessibilityObjectForPosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 941     virtual int lineForPosition(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 942     virtual PlainTextRange plainTextRangeForVisiblePositionRange(const VisiblePositionRange&amp;) const = 0;</span>
<span class="line-added"> 943     virtual int index(const VisiblePosition&amp;) const = 0;</span>
<span class="line-added"> 944 </span>
<span class="line-added"> 945     virtual void lineBreaks(Vector&lt;int&gt;&amp;) const = 0;</span>
<span class="line-added"> 946     virtual PlainTextRange doAXRangeForLine(unsigned) const = 0;</span>
<span class="line-added"> 947     virtual PlainTextRange doAXRangeForPosition(const IntPoint&amp;) const = 0;</span>
<span class="line-added"> 948     virtual PlainTextRange doAXRangeForIndex(unsigned) const = 0;</span>
<span class="line-added"> 949     virtual PlainTextRange doAXStyleRangeForIndex(unsigned) const = 0;</span>
<span class="line-added"> 950 </span>
<span class="line-added"> 951     virtual String doAXStringForRange(const PlainTextRange&amp;) const = 0;</span>
<span class="line-added"> 952     virtual IntRect doAXBoundsForRange(const PlainTextRange&amp;) const = 0;</span>
<span class="line-added"> 953     virtual IntRect doAXBoundsForRangeUsingCharacterOffset(const PlainTextRange&amp;) const = 0;</span>
<span class="line-added"> 954 </span>
<span class="line-added"> 955     virtual unsigned doAXLineForIndex(unsigned) = 0;</span>
<span class="line-added"> 956 </span>
<span class="line-added"> 957     virtual String computedRoleString() const = 0;</span>
<span class="line-added"> 958 </span>
<span class="line-added"> 959     // MSAA</span>
<span class="line-added"> 960     virtual String stringValueForMSAA() const = 0;</span>
<span class="line-added"> 961     virtual String stringRoleForMSAA() const = 0;</span>
<span class="line-added"> 962     virtual String nameForMSAA() const = 0;</span>
<span class="line-added"> 963     virtual String descriptionForMSAA() const = 0;</span>
<span class="line-added"> 964     virtual AccessibilityRole roleValueForMSAA() const = 0;</span>
<span class="line-added"> 965 </span>
<span class="line-added"> 966     virtual String passwordFieldValue() const = 0;</span>
<span class="line-added"> 967     virtual bool isValueAutofilled() const = 0;</span>
<span class="line-added"> 968     virtual bool isValueAutofillAvailable() const = 0;</span>
<span class="line-added"> 969     virtual AutoFillButtonType valueAutofillButtonType() const = 0;</span>
<span class="line-added"> 970     virtual bool hasARIAValueNow() const = 0;</span>
<span class="line-added"> 971 </span>
<span class="line-added"> 972     // Used by an ARIA tree to get all its rows.</span>
<span class="line-added"> 973     virtual void ariaTreeRows(AccessibilityChildrenVector&amp;) = 0;</span>
<span class="line-added"> 974     // Used by an ARIA tree item to get all of its direct rows that it can disclose.</span>
<span class="line-added"> 975     virtual void ariaTreeItemDisclosedRows(AccessibilityChildrenVector&amp;) = 0;</span>
<span class="line-added"> 976     // Used by an ARIA tree item to get only its content, and not its child tree items and groups.</span>
<span class="line-added"> 977     virtual void ariaTreeItemContent(AccessibilityChildrenVector&amp;) = 0;</span>
<span class="line-added"> 978 </span>
<span class="line-added"> 979     // ARIA live-region features.</span>
<span class="line-added"> 980     virtual bool supportsLiveRegion(bool excludeIfOff = true) const = 0;</span>
<span class="line-added"> 981     virtual bool isInsideLiveRegion(bool excludeIfOff = true) const = 0;</span>
<span class="line-added"> 982     virtual AXCoreObject* liveRegionAncestor(bool excludeIfOff = true) const = 0;</span>
<span class="line-added"> 983     virtual const String liveRegionStatus() const = 0;</span>
<span class="line-added"> 984     virtual const String liveRegionRelevant() const = 0;</span>
<span class="line-added"> 985     virtual bool liveRegionAtomic() const = 0;</span>
<span class="line-added"> 986     virtual bool isBusy() const = 0;</span>
<span class="line-added"> 987 </span>
<span class="line-added"> 988     virtual bool hasContentEditableAttributeSet() const = 0;</span>
<span class="line-added"> 989 </span>
<span class="line-added"> 990     virtual bool supportsReadOnly() const = 0;</span>
<span class="line-added"> 991     virtual String readOnlyValue() const = 0;</span>
<span class="line-added"> 992 </span>
<span class="line-added"> 993     virtual bool supportsAutoComplete() const = 0;</span>
<span class="line-added"> 994     virtual String autoCompleteValue() const = 0;</span>
<span class="line-added"> 995 </span>
<span class="line-added"> 996     virtual bool supportsARIAAttributes() const = 0;</span>
<span class="line-added"> 997 </span>
<span class="line-added"> 998     // CSS3 Speech properties.</span>
<span class="line-added"> 999     virtual OptionSet&lt;SpeakAs&gt; speakAsProperty() const = 0;</span>
<span class="line-added">1000 </span>
<span class="line-added">1001     // Make this object visible by scrolling as many nested scrollable views as needed.</span>
<span class="line-added">1002     virtual void scrollToMakeVisible() const = 0;</span>
<span class="line-added">1003     // Same, but if the whole object can&#39;t be made visible, try for this subrect, in local coordinates.</span>
<span class="line-added">1004     virtual void scrollToMakeVisibleWithSubFocus(const IntRect&amp;) const = 0;</span>
<span class="line-added">1005     // Scroll this object to a given point in global coordinates of the top-level window.</span>
<span class="line-added">1006     virtual void scrollToGlobalPoint(const IntPoint&amp;) const = 0;</span>
<span class="line-added">1007 </span>
<span class="line-added">1008     enum class ScrollByPageDirection { Up, Down, Left, Right };</span>
<span class="line-added">1009     virtual bool scrollByPage(ScrollByPageDirection) const = 0;</span>
<span class="line-added">1010     virtual IntPoint scrollPosition() const = 0;</span>
<span class="line-added">1011     virtual IntSize scrollContentsSize() const = 0;</span>
<span class="line-added">1012     virtual IntRect scrollVisibleContentRect() const = 0;</span>
<span class="line-added">1013     virtual void scrollToMakeVisible(const ScrollRectToVisibleOptions&amp;) const = 0;</span>
<span class="line-added">1014 </span>
<span class="line-added">1015     virtual bool lastKnownIsIgnoredValue() = 0;</span>
<span class="line-added">1016     virtual void setLastKnownIsIgnoredValue(bool) = 0;</span>
<span class="line-added">1017 </span>
<span class="line-added">1018     // Fires a children changed notification on the parent if the isIgnored value changed.</span>
<span class="line-added">1019     virtual void notifyIfIgnoredValueChanged() = 0;</span>
<span class="line-added">1020 </span>
<span class="line-added">1021     // All math elements return true for isMathElement().</span>
<span class="line-added">1022     virtual bool isMathElement() const = 0;</span>
<span class="line-added">1023     virtual bool isMathFraction() const = 0;</span>
<span class="line-added">1024     virtual bool isMathFenced() const = 0;</span>
<span class="line-added">1025     virtual bool isMathSubscriptSuperscript() const = 0;</span>
<span class="line-added">1026     virtual bool isMathRow() const = 0;</span>
<span class="line-added">1027     virtual bool isMathUnderOver() const = 0;</span>
<span class="line-added">1028     virtual bool isMathRoot() const = 0;</span>
<span class="line-added">1029     virtual bool isMathSquareRoot() const = 0;</span>
<span class="line-added">1030     virtual bool isMathText() const = 0;</span>
<span class="line-added">1031     virtual bool isMathNumber() const = 0;</span>
<span class="line-added">1032     virtual bool isMathOperator() const = 0;</span>
<span class="line-added">1033     virtual bool isMathFenceOperator() const = 0;</span>
<span class="line-added">1034     virtual bool isMathSeparatorOperator() const = 0;</span>
<span class="line-added">1035     virtual bool isMathIdentifier() const = 0;</span>
<span class="line-added">1036     virtual bool isMathTable() const = 0;</span>
<span class="line-added">1037     virtual bool isMathTableRow() const = 0;</span>
<span class="line-added">1038     virtual bool isMathTableCell() const = 0;</span>
<span class="line-added">1039     virtual bool isMathMultiscript() const = 0;</span>
<span class="line-added">1040     virtual bool isMathToken() const = 0;</span>
<span class="line-added">1041     virtual bool isMathScriptObject(AccessibilityMathScriptObjectType) const = 0;</span>
<span class="line-added">1042     virtual bool isMathMultiscriptObject(AccessibilityMathMultiscriptObjectType) const = 0;</span>
<span class="line-added">1043 </span>
<span class="line-added">1044     // Root components.</span>
<span class="line-added">1045     virtual AXCoreObject* mathRadicandObject() = 0;</span>
<span class="line-added">1046     virtual AXCoreObject* mathRootIndexObject() = 0;</span>
<span class="line-added">1047 </span>
<span class="line-added">1048     // Under over components.</span>
<span class="line-added">1049     virtual AXCoreObject* mathUnderObject() = 0;</span>
<span class="line-added">1050     virtual AXCoreObject* mathOverObject() = 0;</span>
<span class="line-added">1051 </span>
<span class="line-added">1052     // Fraction components.</span>
<span class="line-added">1053     virtual AXCoreObject* mathNumeratorObject() = 0;</span>
<span class="line-added">1054     virtual AXCoreObject* mathDenominatorObject() = 0;</span>
<span class="line-added">1055 </span>
<span class="line-added">1056     // Subscript/superscript components.</span>
<span class="line-added">1057     virtual AXCoreObject* mathBaseObject() = 0;</span>
<span class="line-added">1058     virtual AXCoreObject* mathSubscriptObject() = 0;</span>
<span class="line-added">1059     virtual AXCoreObject* mathSuperscriptObject() = 0;</span>
<span class="line-added">1060 </span>
<span class="line-added">1061     // Fenced components.</span>
<span class="line-added">1062     virtual String mathFencedOpenString() const = 0;</span>
<span class="line-added">1063     virtual String mathFencedCloseString() const = 0;</span>
<span class="line-added">1064     virtual int mathLineThickness() const = 0;</span>
<span class="line-added">1065     virtual bool isAnonymousMathOperator() const = 0;</span>
<span class="line-added">1066 </span>
<span class="line-added">1067     // Multiscripts components.</span>
<span class="line-added">1068     typedef std::pair&lt;AXCoreObject*, AXCoreObject*&gt; AccessibilityMathMultiscriptPair;</span>
<span class="line-added">1069     typedef Vector&lt;AccessibilityMathMultiscriptPair&gt; AccessibilityMathMultiscriptPairs;</span>
<span class="line-added">1070     virtual void mathPrescripts(AccessibilityMathMultiscriptPairs&amp;) = 0;</span>
<span class="line-added">1071     virtual void mathPostscripts(AccessibilityMathMultiscriptPairs&amp;) = 0;</span>
<span class="line-added">1072 </span>
<span class="line-added">1073     // Visibility.</span>
<span class="line-added">1074     virtual bool isAXHidden() const = 0;</span>
<span class="line-added">1075     virtual bool isDOMHidden() const = 0;</span>
<span class="line-added">1076     virtual bool isHidden() const = 0;</span>
<span class="line-added">1077 </span>
<span class="line-added">1078 #if ENABLE(ACCESSIBILITY)</span>
<span class="line-added">1079     AccessibilityObjectWrapper* wrapper() const { return m_wrapper.get(); }</span>
<span class="line-added">1080     void setWrapper(AccessibilityObjectWrapper* wrapper) { m_wrapper = wrapper; }</span>
<span class="line-added">1081     void detachWrapper(AccessibilityDetachmentType);</span>
<span class="line-added">1082 #else</span>
<span class="line-added">1083     AccessibilityObjectWrapper* wrapper() const { return nullptr; }</span>
<span class="line-added">1084     void setWrapper(AccessibilityObjectWrapper*) { }</span>
<span class="line-added">1085     void detachWrapper(AccessibilityDetachmentType) { }</span>
<span class="line-added">1086 #endif</span>
<span class="line-added">1087 </span>
<span class="line-added">1088     virtual void overrideAttachmentParent(AXCoreObject* parent) = 0;</span>
<span class="line-added">1089 </span>
<span class="line-added">1090     // a platform-specific method for determining if an attachment is ignored</span>
<span class="line-added">1091     virtual bool accessibilityIgnoreAttachment() const = 0;</span>
<span class="line-added">1092     // gives platforms the opportunity to indicate if and how an object should be included</span>
<span class="line-added">1093     virtual AccessibilityObjectInclusion accessibilityPlatformIncludesObject() const = 0;</span>
<span class="line-added">1094 </span>
<span class="line-added">1095 #if PLATFORM(IOS_FAMILY)</span>
<span class="line-added">1096     virtual int accessibilityPasswordFieldLength() = 0;</span>
<span class="line-added">1097     virtual bool hasTouchEventListener() const = 0;</span>
<span class="line-added">1098     virtual bool isInputTypePopupButton() const = 0;</span>
<span class="line-added">1099 #endif</span>
<span class="line-added">1100 </span>
<span class="line-added">1101     // allows for an AccessibilityObject to update its render tree or perform</span>
<span class="line-added">1102     // other operations update type operations</span>
<span class="line-added">1103     virtual void updateBackingStore() = 0;</span>
1104 
1105 #if PLATFORM(COCOA)
<span class="line-added">1106     virtual bool preventKeyboardDOMEventDispatch() const = 0;</span>
<span class="line-added">1107     virtual void setPreventKeyboardDOMEventDispatch(bool) = 0;</span>
<span class="line-added">1108     virtual bool fileUploadButtonReturnsValueInTitle() const = 0;</span>
1109     virtual String speechHintAttributeValue() const = 0;
1110     virtual String descriptionAttributeValue() const = 0;
1111     virtual String helpTextAttributeValue() const = 0;
1112     virtual String titleAttributeValue() const = 0;
<span class="line-added">1113     virtual bool hasApplePDFAnnotationAttribute() const = 0;</span>
1114 #endif
1115 
<span class="line-modified">1116 #if PLATFORM(COCOA) &amp;&amp; !PLATFORM(IOS_FAMILY)</span>
<span class="line-modified">1117     virtual bool caretBrowsingEnabled() const = 0;</span>
<span class="line-modified">1118     virtual void setCaretBrowsingEnabled(bool) = 0;</span>
<span class="line-added">1119 #endif</span>
<span class="line-added">1120 </span>
<span class="line-added">1121     virtual AXCoreObject* focusableAncestor() = 0;</span>
<span class="line-added">1122     virtual AXCoreObject* editableAncestor() = 0;</span>
<span class="line-added">1123     virtual AXCoreObject* highestEditableAncestor() = 0;</span>
<span class="line-added">1124 </span>
<span class="line-added">1125     virtual const AccessibilityScrollView* ancestorAccessibilityScrollView(bool includeSelf) const = 0;</span>
<span class="line-added">1126 </span>
<span class="line-added">1127     virtual void setIsIgnoredFromParentData(AccessibilityIsIgnoredFromParentData&amp;) = 0;</span>
<span class="line-added">1128     virtual void clearIsIgnoredFromParentData() = 0;</span>
<span class="line-added">1129     virtual void setIsIgnoredFromParentDataForChild(AXCoreObject*) = 0;</span>
<span class="line-added">1130 </span>
<span class="line-added">1131     virtual uint64_t sessionID() const = 0;</span>
<span class="line-added">1132     virtual String documentURI() const = 0;</span>
<span class="line-added">1133     virtual String documentEncoding() const = 0;</span>
<span class="line-added">1134 private:</span>
<span class="line-added">1135     // Detaches this object from the objects it references and it is referenced by.</span>
<span class="line-added">1136     virtual void detachRemoteParts(AccessibilityDetachmentType) = 0;</span>
<span class="line-added">1137 </span>
<span class="line-added">1138 #if PLATFORM(COCOA)</span>
<span class="line-added">1139     RetainPtr&lt;WebAccessibilityObjectWrapper&gt; m_wrapper;</span>
<span class="line-added">1140 #elif PLATFORM(WIN)</span>
<span class="line-added">1141     COMPtr&lt;AccessibilityObjectWrapper&gt; m_wrapper;</span>
<span class="line-added">1142 #elif USE(ATK)</span>
<span class="line-added">1143     GRefPtr&lt;WebKitAccessible&gt; m_wrapper;</span>
<span class="line-added">1144 #endif</span>
<span class="line-added">1145     virtual void detachPlatformWrapper(AccessibilityDetachmentType) = 0;</span>
1146 };
1147 
<span class="line-added">1148 inline void AXCoreObject::detach(AccessibilityDetachmentType detachmentType)</span>
<span class="line-added">1149 {</span>
<span class="line-added">1150     detachWrapper(detachmentType);</span>
<span class="line-added">1151     detachRemoteParts(detachmentType);</span>
<span class="line-added">1152     setObjectID(InvalidAXID);</span>
<span class="line-added">1153 }</span>
<span class="line-added">1154 </span>
<span class="line-added">1155 #if ENABLE(ACCESSIBILITY)</span>
<span class="line-added">1156 inline void AXCoreObject::detachWrapper(AccessibilityDetachmentType detachmentType)</span>
<span class="line-added">1157 {</span>
<span class="line-added">1158     detachPlatformWrapper(detachmentType);</span>
<span class="line-added">1159     m_wrapper = nullptr;</span>
<span class="line-added">1160 }</span>
<span class="line-added">1161 #endif</span>
<span class="line-added">1162 </span>
<span class="line-added">1163 namespace Accessibility {</span>
<span class="line-added">1164 </span>
<span class="line-added">1165 template&lt;typename T, typename F&gt;</span>
<span class="line-added">1166 T* findAncestor(const T&amp; object, bool includeSelf, const F&amp; matches)</span>
<span class="line-added">1167 {</span>
<span class="line-added">1168     T* parent;</span>
<span class="line-added">1169     if (includeSelf)</span>
<span class="line-added">1170         parent = const_cast&lt;T*&gt;(&amp;object);</span>
<span class="line-added">1171     else {</span>
<span class="line-added">1172         auto* parentPtr = object.parentObject();</span>
<span class="line-added">1173         if (!is&lt;T&gt;(parentPtr))</span>
<span class="line-added">1174             return nullptr;</span>
<span class="line-added">1175         parent = parentPtr;</span>
<span class="line-added">1176     }</span>
<span class="line-added">1177 </span>
<span class="line-added">1178     for (; parent; parent = parent-&gt;parentObject()) {</span>
<span class="line-added">1179         if (matches(*parent))</span>
<span class="line-added">1180             return parent;</span>
<span class="line-added">1181     }</span>
<span class="line-added">1182 </span>
<span class="line-added">1183     return nullptr;</span>
<span class="line-added">1184 }</span>
<span class="line-added">1185 </span>
<span class="line-added">1186 void findMatchingObjects(AccessibilitySearchCriteria const&amp;, AXCoreObject::AccessibilityChildrenVector&amp;);</span>
<span class="line-added">1187 </span>
<span class="line-added">1188 template&lt;typename U&gt; inline void performFunctionOnMainThread(U&amp;&amp; lambda)</span>
<span class="line-added">1189 {</span>
<span class="line-added">1190     if (isMainThread())</span>
<span class="line-added">1191         return lambda();</span>
<span class="line-added">1192 </span>
<span class="line-added">1193     callOnMainThread([&amp;lambda] {</span>
<span class="line-added">1194         lambda();</span>
<span class="line-added">1195     });</span>
<span class="line-added">1196 }</span>
<span class="line-added">1197 </span>
<span class="line-added">1198 template&lt;typename T, typename U&gt; inline T retrieveValueFromMainThread(U&amp;&amp; lambda)</span>
<span class="line-added">1199 {</span>
<span class="line-added">1200     if (isMainThread())</span>
<span class="line-added">1201         return lambda();</span>
<span class="line-added">1202 </span>
<span class="line-added">1203     T value;</span>
<span class="line-added">1204     callOnMainThreadAndWait([&amp;value, &amp;lambda] {</span>
<span class="line-added">1205         value = lambda();</span>
<span class="line-added">1206     });</span>
<span class="line-added">1207     return value;</span>
<span class="line-added">1208 }</span>
<span class="line-added">1209 </span>
<span class="line-added">1210 } // namespace Accessibility</span>
<span class="line-added">1211 </span>
1212 } // namespace WebCore
</pre>
</td>
</tr>
</table>
<center><a href="AccessibilityObject.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="AccessibilityRenderObject.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>