<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/Modules/modern-media-controls/controls/slider.js</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="auto-hide-controller.js.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../gesture-recognizers/gesture-recognizer.js.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/modern-media-controls/controls/slider.js</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -36,11 +36,11 @@</span>
          this._secondaryFill = new LayoutNode(`&lt;div class=&quot;secondary fill&quot;&gt;&lt;/div&gt;`);
          this._knob = new LayoutNode(`&lt;div class=&quot;knob&quot;&gt;&lt;/div&gt;`);
          this._container.children = [this._track, this._primaryFill, this._secondaryFill, this._knob];
  
          this._input = new LayoutNode(`&lt;input type=&quot;range&quot; min=&quot;0&quot; max=&quot;1&quot; step=&quot;0.001&quot; /&gt;`);
<span class="udiff-line-modified-removed">-         this._input.element.addEventListener(GestureRecognizer.SupportsTouches ? &quot;touchstart&quot; : &quot;mousedown&quot;, this);</span>
<span class="udiff-line-modified-added">+         this._input.element.addEventListener(&quot;pointerdown&quot;, this);</span>
          this._input.element.addEventListener(&quot;input&quot;, this);
          this._input.element.addEventListener(&quot;change&quot;, this);
  
          this.value = 0;
          this.height = 16;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -107,21 +107,15 @@</span>
      // Protected
  
      handleEvent(event)
      {
          switch (event.type) {
<span class="udiff-line-modified-removed">-         case &quot;mousedown&quot;:</span>
<span class="udiff-line-modified-removed">-             this._handleMousedownEvent();</span>
<span class="udiff-line-modified-added">+         case &quot;pointerdown&quot;:</span>
<span class="udiff-line-modified-added">+             this._handlePointerdownEvent();</span>
              break;
<span class="udiff-line-modified-removed">-         case &quot;touchstart&quot;:</span>
<span class="udiff-line-modified-removed">-             this._handleTouchstartEvent(event);</span>
<span class="udiff-line-removed">-             break;</span>
<span class="udiff-line-removed">-         case &quot;mouseup&quot;:</span>
<span class="udiff-line-removed">-             this._handleMouseupEvent();</span>
<span class="udiff-line-removed">-             break;</span>
<span class="udiff-line-removed">-         case &quot;touchend&quot;:</span>
<span class="udiff-line-removed">-             this._handleTouchendEvent(event);</span>
<span class="udiff-line-modified-added">+         case &quot;pointerup&quot;:</span>
<span class="udiff-line-modified-added">+             this._handlePointerupEvent();</span>
              break;
          case &quot;change&quot;:
          case &quot;input&quot;:
              this._valueDidChange();
              break;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -156,38 +150,24 @@</span>
          this._knob.element.style.left = `${scrubberCenterX}px`;
      }
  
      // Private
  
<span class="udiff-line-modified-removed">-     _handleMousedownEvent()</span>
<span class="udiff-line-modified-added">+     _handlePointerdownEvent()</span>
      {
<span class="udiff-line-modified-removed">-         this._mouseupTarget = this._interactionEndTarget();</span>
<span class="udiff-line-modified-removed">-         this._mouseupTarget.addEventListener(&quot;mouseup&quot;, this, true);</span>
<span class="udiff-line-modified-added">+         this._pointerupTarget = this._interactionEndTarget();</span>
<span class="udiff-line-modified-added">+         this._pointerupTarget.addEventListener(&quot;pointerup&quot;, this, true);</span>
  
          this._valueWillStartChanging();
      }
  
      _interactionEndTarget()
      {
          const mediaControls = this.parentOfType(MediaControls);
          return (!mediaControls || mediaControls instanceof MacOSInlineMediaControls) ? window : mediaControls.element;
      }
  
<span class="udiff-line-removed">-     _handleTouchstartEvent(event)</span>
<span class="udiff-line-removed">-     {</span>
<span class="udiff-line-removed">-         // We&#39;re only interested in the very first touch on the &lt;input&gt;.</span>
<span class="udiff-line-removed">-         if (event.touches.length !== 1)</span>
<span class="udiff-line-removed">-             return;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         this._initialTouchIdentifier = event.touches[0].identifier;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         this._touchendTarget = this._interactionEndTarget();</span>
<span class="udiff-line-removed">-         this._touchendTarget.addEventListener(&quot;touchend&quot;, this, true);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         this._valueWillStartChanging();</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
      _valueWillStartChanging()
      {
          // We should no longer cache the value since we&#39;ll be interacting with the &lt;input&gt;
          // so the value should be read back from it dynamically.
          delete this._value;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -213,26 +193,13 @@</span>
              this.uiDelegate.controlValueDidStopChanging(this);
  
          this.needsLayout = true;
      }
  
<span class="udiff-line-modified-removed">-     _handleMouseupEvent()</span>
<span class="udiff-line-modified-added">+     _handlePointerupEvent()</span>
      {
<span class="udiff-line-modified-removed">-         this._mouseupTarget.removeEventListener(&quot;mouseup&quot;, this, true);</span>
<span class="udiff-line-modified-removed">-         delete this._mouseupTarget;</span>
<span class="udiff-line-modified-added">+         this._pointerupTarget.removeEventListener(&quot;pointerup&quot;, this, true);</span>
<span class="udiff-line-modified-added">+         delete this._pointerupTarget;</span>
  
          this._valueDidStopChanging();
      }
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     _handleTouchendEvent(event)</span>
<span class="udiff-line-removed">-     {</span>
<span class="udiff-line-removed">-         if (!Array.from(event.changedTouches).find(touch =&gt; touch.identifier === this._initialTouchIdentifier))</span>
<span class="udiff-line-removed">-             return;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         this._touchendTarget.removeEventListener(&quot;touchend&quot;, this, true);</span>
<span class="udiff-line-removed">-         delete this._touchendTarget;</span>
<span class="udiff-line-removed">-         delete this._initialTouchIdentifier;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         this._valueDidStopChanging();</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
  }
</pre>
<center><a href="auto-hide-controller.js.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../gesture-recognizers/gesture-recognizer.js.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>