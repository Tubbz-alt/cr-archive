<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/css/DeprecatedCSSOMPrimitiveValue.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DOMCSSRegisterCustomProperty.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DeprecatedCSSOMPrimitiveValue.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/css/DeprecatedCSSOMPrimitiveValue.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (C) 2016 Apple Inc. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (C) 2016-2020 Apple Inc. All rights reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   * 1. Redistributions of source code must retain the above copyright
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -34,56 +34,54 @@</span>
  
  // FIXME: For now these still call into CSSPrimitiveValue, but as we refactor into subclasses
  // such as StyleCounterValue, StyleRectValue, and StyleColorValue, these methods will get
  // more complicated.
  
<span class="udiff-line-removed">- </span>
  unsigned short DeprecatedCSSOMPrimitiveValue::primitiveType() const
  {
<span class="udiff-line-modified-removed">-     return m_value-&gt;primitiveType();</span>
<span class="udiff-line-modified-added">+     return static_cast&lt;unsigned short&gt;(m_value-&gt;primitiveType());</span>
  }
  
  ExceptionOr&lt;void&gt; DeprecatedCSSOMPrimitiveValue::setFloatValue(unsigned short unitType, double floatValue)
  {
<span class="udiff-line-modified-removed">-     return m_value-&gt;setFloatValue(unitType, floatValue);</span>
<span class="udiff-line-modified-added">+     return m_value-&gt;setFloatValue(static_cast&lt;CSSUnitType&gt;(unitType), floatValue);</span>
  }
  
  ExceptionOr&lt;float&gt; DeprecatedCSSOMPrimitiveValue::getFloatValue(unsigned short unitType) const
  {
<span class="udiff-line-modified-removed">-     return m_value-&gt;getFloatValue(unitType);</span>
<span class="udiff-line-modified-added">+     return m_value-&gt;getFloatValue(static_cast&lt;CSSUnitType&gt;(unitType));</span>
  }
  
  ExceptionOr&lt;void&gt; DeprecatedCSSOMPrimitiveValue::setStringValue(unsigned short stringType, const String&amp; stringValue)
  {
<span class="udiff-line-modified-removed">-     return m_value-&gt;setStringValue(stringType, stringValue);</span>
<span class="udiff-line-modified-added">+     return m_value-&gt;setStringValue(static_cast&lt;CSSUnitType&gt;(stringType), stringValue);</span>
  }
  
  ExceptionOr&lt;String&gt; DeprecatedCSSOMPrimitiveValue::getStringValue() const
  {
      return m_value-&gt;getStringValue();
  }
  
  ExceptionOr&lt;Ref&lt;DeprecatedCSSOMCounter&gt;&gt; DeprecatedCSSOMPrimitiveValue::getCounterValue() const
  {
<span class="udiff-line-modified-removed">-     ExceptionOr&lt;Counter&amp;&gt; counter = m_value-&gt;getCounterValue();</span>
<span class="udiff-line-modified-removed">-     if (counter.hasException())</span>
<span class="udiff-line-modified-added">+     auto* value = m_value-&gt;counterValue();</span>
<span class="udiff-line-modified-added">+     if (!value)</span>
          return Exception { InvalidAccessError };
<span class="udiff-line-modified-removed">-     return DeprecatedCSSOMCounter::create(counter.releaseReturnValue(), m_owner.get());</span>
<span class="udiff-line-modified-added">+     return DeprecatedCSSOMCounter::create(*value, m_owner);</span>
  }
  
  ExceptionOr&lt;Ref&lt;DeprecatedCSSOMRect&gt;&gt; DeprecatedCSSOMPrimitiveValue::getRectValue() const
  {
<span class="udiff-line-modified-removed">-     ExceptionOr&lt;Rect&amp;&gt; rect = m_value-&gt;getRectValue();</span>
<span class="udiff-line-modified-removed">-     if (rect.hasException())</span>
<span class="udiff-line-modified-added">+     auto* value = m_value-&gt;rectValue();</span>
<span class="udiff-line-modified-added">+     if (!value)</span>
          return Exception { InvalidAccessError };
<span class="udiff-line-modified-removed">-     return DeprecatedCSSOMRect::create(rect.releaseReturnValue(), m_owner.get());</span>
<span class="udiff-line-modified-added">+     return DeprecatedCSSOMRect::create(*value, m_owner);</span>
  }
  
  ExceptionOr&lt;Ref&lt;DeprecatedCSSOMRGBColor&gt;&gt; DeprecatedCSSOMPrimitiveValue::getRGBColorValue() const
  {
<span class="udiff-line-modified-removed">-     ExceptionOr&lt;Ref&lt;RGBColor&gt;&gt; color = m_value-&gt;getRGBColorValue();</span>
<span class="udiff-line-removed">-     if (color.hasException())</span>
<span class="udiff-line-modified-added">+     if (!m_value-&gt;isRGBColor())</span>
          return Exception { InvalidAccessError };
<span class="udiff-line-modified-removed">-     return DeprecatedCSSOMRGBColor::create(color.releaseReturnValue(), m_owner.get());</span>
<span class="udiff-line-modified-added">+     return DeprecatedCSSOMRGBColor::create(m_owner, m_value-&gt;color());</span>
  }
  
  }
</pre>
<center><a href="DOMCSSRegisterCustomProperty.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DeprecatedCSSOMPrimitiveValue.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>