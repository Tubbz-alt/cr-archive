<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WTF/wtf/ParkingLot.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="PageBlock.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Platform.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WTF/wtf/ParkingLot.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 353,11 ***</span>
      Vector&lt;Bucket*&gt; bucketsToUnlock = lockHashtable();
  
      // Check again, since the hashtable could have rehashed while we were locking it. Also,
      // lockHashtable() creates an initial hashtable for us.
      oldHashtable = hashtable.load();
<span class="line-modified">!     if (oldHashtable &amp;&amp; static_cast&lt;double&gt;(oldHashtable-&gt;size) / static_cast&lt;double&gt;(numThreads) &gt;= maxLoadFactor) {</span>
          if (verbose)
              dataLog(toString(Thread::current(), &quot;: after locking, no need to rehash because &quot;, oldHashtable-&gt;size, &quot; / &quot;, numThreads, &quot; &gt;= &quot;, maxLoadFactor, &quot;\n&quot;));
          unlockHashtable(bucketsToUnlock);
          return;
      }
<span class="line-new-header">--- 353,12 ---</span>
      Vector&lt;Bucket*&gt; bucketsToUnlock = lockHashtable();
  
      // Check again, since the hashtable could have rehashed while we were locking it. Also,
      // lockHashtable() creates an initial hashtable for us.
      oldHashtable = hashtable.load();
<span class="line-modified">!     RELEASE_ASSERT(oldHashtable);</span>
<span class="line-added">+     if (static_cast&lt;double&gt;(oldHashtable-&gt;size) / static_cast&lt;double&gt;(numThreads) &gt;= maxLoadFactor) {</span>
          if (verbose)
              dataLog(toString(Thread::current(), &quot;: after locking, no need to rehash because &quot;, oldHashtable-&gt;size, &quot; / &quot;, numThreads, &quot; &gt;= &quot;, maxLoadFactor, &quot;\n&quot;));
          unlockHashtable(bucketsToUnlock);
          return;
      }
</pre>
<center><a href="PageBlock.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Platform.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>