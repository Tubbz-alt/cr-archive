<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/bytecode/CodeBlockHash.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="CodeBlock.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CodeOrigin.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/bytecode/CodeBlockHash.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
41     : m_hash(0)
42 {
43     SHA1 sha1;
44     sha1.addBytes(sourceCode.toUTF8());
45     SHA1::Digest digest;
46     sha1.computeHash(digest);
47     m_hash = digest[0] | (digest[1] &lt;&lt; 8) | (digest[2] &lt;&lt; 16) | (digest[3] &lt;&lt; 24);
48 
49     if (m_hash == 0 || m_hash == 1)
50         m_hash += 0x2d5a93d0; // Ensures a non-zero hash, and gets us #Azero0 for CodeForCall and #Azero1 for CodeForConstruct.
51     static_assert(static_cast&lt;unsigned&gt;(CodeForCall) == 0, &quot;&quot;);
52     static_assert(static_cast&lt;unsigned&gt;(CodeForConstruct) == 1, &quot;&quot;);
53     m_hash ^= static_cast&lt;unsigned&gt;(kind);
54     ASSERT(m_hash);
55 }
56 
57 void CodeBlockHash::dump(PrintStream&amp; out) const
58 {
59     std::array&lt;char, 7&gt; buffer = integerToSixCharacterHashString(m_hash);
60 
<span class="line-modified">61 #if !ASSERT_DISABLED</span>
62     CodeBlockHash recompute(buffer.data());
63     ASSERT(recompute == *this);
<span class="line-modified">64 #endif // !ASSERT_DISABLED</span>
65 
66     out.print(buffer.data());
67 }
68 
69 } // namespace JSC
70 
</pre>
</td>
<td>
<hr />
<pre>
41     : m_hash(0)
42 {
43     SHA1 sha1;
44     sha1.addBytes(sourceCode.toUTF8());
45     SHA1::Digest digest;
46     sha1.computeHash(digest);
47     m_hash = digest[0] | (digest[1] &lt;&lt; 8) | (digest[2] &lt;&lt; 16) | (digest[3] &lt;&lt; 24);
48 
49     if (m_hash == 0 || m_hash == 1)
50         m_hash += 0x2d5a93d0; // Ensures a non-zero hash, and gets us #Azero0 for CodeForCall and #Azero1 for CodeForConstruct.
51     static_assert(static_cast&lt;unsigned&gt;(CodeForCall) == 0, &quot;&quot;);
52     static_assert(static_cast&lt;unsigned&gt;(CodeForConstruct) == 1, &quot;&quot;);
53     m_hash ^= static_cast&lt;unsigned&gt;(kind);
54     ASSERT(m_hash);
55 }
56 
57 void CodeBlockHash::dump(PrintStream&amp; out) const
58 {
59     std::array&lt;char, 7&gt; buffer = integerToSixCharacterHashString(m_hash);
60 
<span class="line-modified">61 #if ASSERT_ENABLED</span>
62     CodeBlockHash recompute(buffer.data());
63     ASSERT(recompute == *this);
<span class="line-modified">64 #endif // ASSERT_ENABLED</span>
65 
66     out.print(buffer.data());
67 }
68 
69 } // namespace JSC
70 
</pre>
</td>
</tr>
</table>
<center><a href="CodeBlock.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CodeOrigin.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>