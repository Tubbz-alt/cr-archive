<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/FontDescription.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FontDescription.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FontMetrics.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/FontDescription.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 78     {
 79         return { variantCommonLigatures(),
 80             variantDiscretionaryLigatures(),
 81             variantHistoricalLigatures(),
 82             variantContextualAlternates(),
 83             variantPosition(),
 84             variantCaps(),
 85             variantNumericFigure(),
 86             variantNumericSpacing(),
 87             variantNumericFraction(),
 88             variantNumericOrdinal(),
 89             variantNumericSlashedZero(),
 90             variantAlternates(),
 91             variantEastAsianVariant(),
 92             variantEastAsianWidth(),
 93             variantEastAsianRuby() };
 94     }
 95     FontOpticalSizing opticalSizing() const { return static_cast&lt;FontOpticalSizing&gt;(m_opticalSizing); }
 96     FontStyleAxis fontStyleAxis() const { return m_fontStyleAxis ? FontStyleAxis::ital : FontStyleAxis::slnt; }
 97     AllowUserInstalledFonts shouldAllowUserInstalledFonts() const { return static_cast&lt;AllowUserInstalledFonts&gt;(m_shouldAllowUserInstalledFonts); }
<span class="line-removed"> 98     bool shouldAllowDesignSystemUIFonts() const { return m_shouldAllowDesignSystemUIFonts; }</span>
 99 
100     void setComputedSize(float s) { m_computedSize = clampToFloat(s); }
101     void setItalic(Optional&lt;FontSelectionValue&gt; italic) { m_fontSelectionRequest.slope = italic; }
102     void setStretch(FontSelectionValue stretch) { m_fontSelectionRequest.width = stretch; }
103     void setIsItalic(bool isItalic) { setItalic(isItalic ? Optional&lt;FontSelectionValue&gt; { italicValue() } : Optional&lt;FontSelectionValue&gt; { }); }
104     void setWeight(FontSelectionValue weight) { m_fontSelectionRequest.weight = weight; }
105     void setRenderingMode(FontRenderingMode mode) { m_renderingMode = static_cast&lt;unsigned&gt;(mode); }
106     void setTextRenderingMode(TextRenderingMode rendering) { m_textRendering = static_cast&lt;unsigned&gt;(rendering); }
107     void setOrientation(FontOrientation orientation) { m_orientation = static_cast&lt;unsigned&gt;(orientation); }
108     void setNonCJKGlyphOrientation(NonCJKGlyphOrientation orientation) { m_nonCJKGlyphOrientation = static_cast&lt;unsigned&gt;(orientation); }
109     void setWidthVariant(FontWidthVariant widthVariant) { m_widthVariant = static_cast&lt;unsigned&gt;(widthVariant); } // Make sure new callers of this sync with FontPlatformData::isForTextCombine()!
<span class="line-modified">110     void setLocale(const AtomString&amp;);</span>
111     void setFeatureSettings(FontFeatureSettings&amp;&amp; settings) { m_featureSettings = WTFMove(settings); }
112 #if ENABLE(VARIATION_FONTS)
113     void setVariationSettings(FontVariationSettings&amp;&amp; settings) { m_variationSettings = WTFMove(settings); }
114 #endif
115     void setFontSynthesis(FontSynthesis fontSynthesis) { m_fontSynthesis = fontSynthesis; }
116     void setVariantCommonLigatures(FontVariantLigatures variant) { m_variantCommonLigatures = static_cast&lt;unsigned&gt;(variant); }
117     void setVariantDiscretionaryLigatures(FontVariantLigatures variant) { m_variantDiscretionaryLigatures = static_cast&lt;unsigned&gt;(variant); }
118     void setVariantHistoricalLigatures(FontVariantLigatures variant) { m_variantHistoricalLigatures = static_cast&lt;unsigned&gt;(variant); }
119     void setVariantContextualAlternates(FontVariantLigatures variant) { m_variantContextualAlternates = static_cast&lt;unsigned&gt;(variant); }
120     void setVariantPosition(FontVariantPosition variant) { m_variantPosition = static_cast&lt;unsigned&gt;(variant); }
121     void setVariantCaps(FontVariantCaps variant) { m_variantCaps = static_cast&lt;unsigned&gt;(variant); }
122     void setVariantNumericFigure(FontVariantNumericFigure variant) { m_variantNumericFigure = static_cast&lt;unsigned&gt;(variant); }
123     void setVariantNumericSpacing(FontVariantNumericSpacing variant) { m_variantNumericSpacing = static_cast&lt;unsigned&gt;(variant); }
124     void setVariantNumericFraction(FontVariantNumericFraction variant) { m_variantNumericFraction = static_cast&lt;unsigned&gt;(variant); }
125     void setVariantNumericOrdinal(FontVariantNumericOrdinal variant) { m_variantNumericOrdinal = static_cast&lt;unsigned&gt;(variant); }
126     void setVariantNumericSlashedZero(FontVariantNumericSlashedZero variant) { m_variantNumericSlashedZero = static_cast&lt;unsigned&gt;(variant); }
127     void setVariantAlternates(FontVariantAlternates variant) { m_variantAlternates = static_cast&lt;unsigned&gt;(variant); }
128     void setVariantEastAsianVariant(FontVariantEastAsianVariant variant) { m_variantEastAsianVariant = static_cast&lt;unsigned&gt;(variant); }
129     void setVariantEastAsianWidth(FontVariantEastAsianWidth variant) { m_variantEastAsianWidth = static_cast&lt;unsigned&gt;(variant); }
130     void setVariantEastAsianRuby(FontVariantEastAsianRuby variant) { m_variantEastAsianRuby = static_cast&lt;unsigned&gt;(variant); }
131     void setOpticalSizing(FontOpticalSizing sizing) { m_opticalSizing = static_cast&lt;unsigned&gt;(sizing); }
132     void setFontStyleAxis(FontStyleAxis axis) { m_fontStyleAxis = axis == FontStyleAxis::ital; }
133     void setShouldAllowUserInstalledFonts(AllowUserInstalledFonts shouldAllowUserInstalledFonts) { m_shouldAllowUserInstalledFonts = static_cast&lt;unsigned&gt;(shouldAllowUserInstalledFonts); }
<span class="line-removed">134     void setShouldAllowDesignSystemUIFonts(bool allow) { m_shouldAllowDesignSystemUIFonts = allow; }</span>
135 
136     static AtomString platformResolveGenericFamily(UScriptCode, const AtomString&amp; locale, const AtomString&amp; familyName);
137 






138 private:
139     // FIXME: Investigate moving these into their own object on the heap (to save memory).
140     FontFeatureSettings m_featureSettings;
141     FontVariationSettings m_variationSettings;
142     AtomString m_locale;
143 
144     FontSelectionRequest m_fontSelectionRequest;
145     float m_computedSize { 0 }; // Computed size adjusted for the minimum font size and the zoom factor.
146     unsigned m_orientation : 1; // FontOrientation - Whether the font is rendering on a horizontal line or a vertical line.
147     unsigned m_nonCJKGlyphOrientation : 1; // NonCJKGlyphOrientation - Only used by vertical text. Determines the default orientation for non-ideograph glyphs.
148     unsigned m_widthVariant : 2; // FontWidthVariant
149     unsigned m_renderingMode : 1; // Used to switch between CG and GDI text on Windows.
150     unsigned m_textRendering : 2; // TextRenderingMode
151     unsigned m_script : 7; // Used to help choose an appropriate font for generic font families.
152     unsigned m_fontSynthesis : 3; // FontSynthesis type
153     unsigned m_variantCommonLigatures : 2; // FontVariantLigatures
154     unsigned m_variantDiscretionaryLigatures : 2; // FontVariantLigatures
155     unsigned m_variantHistoricalLigatures : 2; // FontVariantLigatures
156     unsigned m_variantContextualAlternates : 2; // FontVariantLigatures
157     unsigned m_variantPosition : 2; // FontVariantPosition
158     unsigned m_variantCaps : 3; // FontVariantCaps
159     unsigned m_variantNumericFigure : 2; // FontVariantNumericFigure
160     unsigned m_variantNumericSpacing : 2; // FontVariantNumericSpacing
161     unsigned m_variantNumericFraction : 2; // FontVariantNumericFraction
162     unsigned m_variantNumericOrdinal : 1; // FontVariantNumericOrdinal
163     unsigned m_variantNumericSlashedZero : 1; // FontVariantNumericSlashedZero
164     unsigned m_variantAlternates : 1; // FontVariantAlternates
165     unsigned m_variantEastAsianVariant : 3; // FontVariantEastAsianVariant
166     unsigned m_variantEastAsianWidth : 2; // FontVariantEastAsianWidth
167     unsigned m_variantEastAsianRuby : 1; // FontVariantEastAsianRuby
168     unsigned m_opticalSizing : 1; // FontOpticalSizing
169     unsigned m_fontStyleAxis : 1; // Whether &quot;font-style: italic&quot; or &quot;font-style: oblique 20deg&quot; was specified
170     unsigned m_shouldAllowUserInstalledFonts : 1; // AllowUserInstalledFonts: If this description is allowed to match a user-installed font
<span class="line-removed">171     unsigned m_shouldAllowDesignSystemUIFonts : 1; // Whether -apple-system-ui-serif, -apple-system-ui-monospaced, and -apple-system-ui-rounded are supported</span>
172 };
173 
174 inline bool FontDescription::operator==(const FontDescription&amp; other) const
175 {
176     return m_computedSize == other.m_computedSize
177         &amp;&amp; m_fontSelectionRequest == other.m_fontSelectionRequest
178         &amp;&amp; m_renderingMode == other.m_renderingMode
179         &amp;&amp; m_textRendering == other.m_textRendering
180         &amp;&amp; m_orientation == other.m_orientation
181         &amp;&amp; m_nonCJKGlyphOrientation == other.m_nonCJKGlyphOrientation
182         &amp;&amp; m_widthVariant == other.m_widthVariant
183         &amp;&amp; m_locale == other.m_locale
184         &amp;&amp; m_featureSettings == other.m_featureSettings
185 #if ENABLE(VARIATION_FONTS)
186         &amp;&amp; m_variationSettings == other.m_variationSettings
187 #endif
188         &amp;&amp; m_fontSynthesis == other.m_fontSynthesis
189         &amp;&amp; m_variantCommonLigatures == other.m_variantCommonLigatures
190         &amp;&amp; m_variantDiscretionaryLigatures == other.m_variantDiscretionaryLigatures
191         &amp;&amp; m_variantHistoricalLigatures == other.m_variantHistoricalLigatures
192         &amp;&amp; m_variantContextualAlternates == other.m_variantContextualAlternates
193         &amp;&amp; m_variantPosition == other.m_variantPosition
194         &amp;&amp; m_variantCaps == other.m_variantCaps
195         &amp;&amp; m_variantNumericFigure == other.m_variantNumericFigure
196         &amp;&amp; m_variantNumericSpacing == other.m_variantNumericSpacing
197         &amp;&amp; m_variantNumericFraction == other.m_variantNumericFraction
198         &amp;&amp; m_variantNumericOrdinal == other.m_variantNumericOrdinal
199         &amp;&amp; m_variantNumericSlashedZero == other.m_variantNumericSlashedZero
200         &amp;&amp; m_variantAlternates == other.m_variantAlternates
201         &amp;&amp; m_variantEastAsianVariant == other.m_variantEastAsianVariant
202         &amp;&amp; m_variantEastAsianWidth == other.m_variantEastAsianWidth
203         &amp;&amp; m_variantEastAsianRuby == other.m_variantEastAsianRuby
204         &amp;&amp; m_opticalSizing == other.m_opticalSizing
205         &amp;&amp; m_fontStyleAxis == other.m_fontStyleAxis
<span class="line-modified">206         &amp;&amp; m_shouldAllowUserInstalledFonts == other.m_shouldAllowUserInstalledFonts</span>
<span class="line-modified">207         &amp;&amp; m_shouldAllowDesignSystemUIFonts == other.m_shouldAllowDesignSystemUIFonts;</span>











































































































































































































































208 }
209 
210 }
</pre>
</td>
<td>
<hr />
<pre>
 78     {
 79         return { variantCommonLigatures(),
 80             variantDiscretionaryLigatures(),
 81             variantHistoricalLigatures(),
 82             variantContextualAlternates(),
 83             variantPosition(),
 84             variantCaps(),
 85             variantNumericFigure(),
 86             variantNumericSpacing(),
 87             variantNumericFraction(),
 88             variantNumericOrdinal(),
 89             variantNumericSlashedZero(),
 90             variantAlternates(),
 91             variantEastAsianVariant(),
 92             variantEastAsianWidth(),
 93             variantEastAsianRuby() };
 94     }
 95     FontOpticalSizing opticalSizing() const { return static_cast&lt;FontOpticalSizing&gt;(m_opticalSizing); }
 96     FontStyleAxis fontStyleAxis() const { return m_fontStyleAxis ? FontStyleAxis::ital : FontStyleAxis::slnt; }
 97     AllowUserInstalledFonts shouldAllowUserInstalledFonts() const { return static_cast&lt;AllowUserInstalledFonts&gt;(m_shouldAllowUserInstalledFonts); }

 98 
 99     void setComputedSize(float s) { m_computedSize = clampToFloat(s); }
100     void setItalic(Optional&lt;FontSelectionValue&gt; italic) { m_fontSelectionRequest.slope = italic; }
101     void setStretch(FontSelectionValue stretch) { m_fontSelectionRequest.width = stretch; }
102     void setIsItalic(bool isItalic) { setItalic(isItalic ? Optional&lt;FontSelectionValue&gt; { italicValue() } : Optional&lt;FontSelectionValue&gt; { }); }
103     void setWeight(FontSelectionValue weight) { m_fontSelectionRequest.weight = weight; }
104     void setRenderingMode(FontRenderingMode mode) { m_renderingMode = static_cast&lt;unsigned&gt;(mode); }
105     void setTextRenderingMode(TextRenderingMode rendering) { m_textRendering = static_cast&lt;unsigned&gt;(rendering); }
106     void setOrientation(FontOrientation orientation) { m_orientation = static_cast&lt;unsigned&gt;(orientation); }
107     void setNonCJKGlyphOrientation(NonCJKGlyphOrientation orientation) { m_nonCJKGlyphOrientation = static_cast&lt;unsigned&gt;(orientation); }
108     void setWidthVariant(FontWidthVariant widthVariant) { m_widthVariant = static_cast&lt;unsigned&gt;(widthVariant); } // Make sure new callers of this sync with FontPlatformData::isForTextCombine()!
<span class="line-modified">109     WEBCORE_EXPORT void setLocale(const AtomString&amp;);</span>
110     void setFeatureSettings(FontFeatureSettings&amp;&amp; settings) { m_featureSettings = WTFMove(settings); }
111 #if ENABLE(VARIATION_FONTS)
112     void setVariationSettings(FontVariationSettings&amp;&amp; settings) { m_variationSettings = WTFMove(settings); }
113 #endif
114     void setFontSynthesis(FontSynthesis fontSynthesis) { m_fontSynthesis = fontSynthesis; }
115     void setVariantCommonLigatures(FontVariantLigatures variant) { m_variantCommonLigatures = static_cast&lt;unsigned&gt;(variant); }
116     void setVariantDiscretionaryLigatures(FontVariantLigatures variant) { m_variantDiscretionaryLigatures = static_cast&lt;unsigned&gt;(variant); }
117     void setVariantHistoricalLigatures(FontVariantLigatures variant) { m_variantHistoricalLigatures = static_cast&lt;unsigned&gt;(variant); }
118     void setVariantContextualAlternates(FontVariantLigatures variant) { m_variantContextualAlternates = static_cast&lt;unsigned&gt;(variant); }
119     void setVariantPosition(FontVariantPosition variant) { m_variantPosition = static_cast&lt;unsigned&gt;(variant); }
120     void setVariantCaps(FontVariantCaps variant) { m_variantCaps = static_cast&lt;unsigned&gt;(variant); }
121     void setVariantNumericFigure(FontVariantNumericFigure variant) { m_variantNumericFigure = static_cast&lt;unsigned&gt;(variant); }
122     void setVariantNumericSpacing(FontVariantNumericSpacing variant) { m_variantNumericSpacing = static_cast&lt;unsigned&gt;(variant); }
123     void setVariantNumericFraction(FontVariantNumericFraction variant) { m_variantNumericFraction = static_cast&lt;unsigned&gt;(variant); }
124     void setVariantNumericOrdinal(FontVariantNumericOrdinal variant) { m_variantNumericOrdinal = static_cast&lt;unsigned&gt;(variant); }
125     void setVariantNumericSlashedZero(FontVariantNumericSlashedZero variant) { m_variantNumericSlashedZero = static_cast&lt;unsigned&gt;(variant); }
126     void setVariantAlternates(FontVariantAlternates variant) { m_variantAlternates = static_cast&lt;unsigned&gt;(variant); }
127     void setVariantEastAsianVariant(FontVariantEastAsianVariant variant) { m_variantEastAsianVariant = static_cast&lt;unsigned&gt;(variant); }
128     void setVariantEastAsianWidth(FontVariantEastAsianWidth variant) { m_variantEastAsianWidth = static_cast&lt;unsigned&gt;(variant); }
129     void setVariantEastAsianRuby(FontVariantEastAsianRuby variant) { m_variantEastAsianRuby = static_cast&lt;unsigned&gt;(variant); }
130     void setOpticalSizing(FontOpticalSizing sizing) { m_opticalSizing = static_cast&lt;unsigned&gt;(sizing); }
131     void setFontStyleAxis(FontStyleAxis axis) { m_fontStyleAxis = axis == FontStyleAxis::ital; }
132     void setShouldAllowUserInstalledFonts(AllowUserInstalledFonts shouldAllowUserInstalledFonts) { m_shouldAllowUserInstalledFonts = static_cast&lt;unsigned&gt;(shouldAllowUserInstalledFonts); }

133 
134     static AtomString platformResolveGenericFamily(UScriptCode, const AtomString&amp; locale, const AtomString&amp; familyName);
135 
<span class="line-added">136     template&lt;class Encoder&gt;</span>
<span class="line-added">137     void encode(Encoder&amp;) const;</span>
<span class="line-added">138 </span>
<span class="line-added">139     template&lt;class Decoder&gt;</span>
<span class="line-added">140     static Optional&lt;FontDescription&gt; decode(Decoder&amp;);</span>
<span class="line-added">141 </span>
142 private:
143     // FIXME: Investigate moving these into their own object on the heap (to save memory).
144     FontFeatureSettings m_featureSettings;
145     FontVariationSettings m_variationSettings;
146     AtomString m_locale;
147 
148     FontSelectionRequest m_fontSelectionRequest;
149     float m_computedSize { 0 }; // Computed size adjusted for the minimum font size and the zoom factor.
150     unsigned m_orientation : 1; // FontOrientation - Whether the font is rendering on a horizontal line or a vertical line.
151     unsigned m_nonCJKGlyphOrientation : 1; // NonCJKGlyphOrientation - Only used by vertical text. Determines the default orientation for non-ideograph glyphs.
152     unsigned m_widthVariant : 2; // FontWidthVariant
153     unsigned m_renderingMode : 1; // Used to switch between CG and GDI text on Windows.
154     unsigned m_textRendering : 2; // TextRenderingMode
155     unsigned m_script : 7; // Used to help choose an appropriate font for generic font families.
156     unsigned m_fontSynthesis : 3; // FontSynthesis type
157     unsigned m_variantCommonLigatures : 2; // FontVariantLigatures
158     unsigned m_variantDiscretionaryLigatures : 2; // FontVariantLigatures
159     unsigned m_variantHistoricalLigatures : 2; // FontVariantLigatures
160     unsigned m_variantContextualAlternates : 2; // FontVariantLigatures
161     unsigned m_variantPosition : 2; // FontVariantPosition
162     unsigned m_variantCaps : 3; // FontVariantCaps
163     unsigned m_variantNumericFigure : 2; // FontVariantNumericFigure
164     unsigned m_variantNumericSpacing : 2; // FontVariantNumericSpacing
165     unsigned m_variantNumericFraction : 2; // FontVariantNumericFraction
166     unsigned m_variantNumericOrdinal : 1; // FontVariantNumericOrdinal
167     unsigned m_variantNumericSlashedZero : 1; // FontVariantNumericSlashedZero
168     unsigned m_variantAlternates : 1; // FontVariantAlternates
169     unsigned m_variantEastAsianVariant : 3; // FontVariantEastAsianVariant
170     unsigned m_variantEastAsianWidth : 2; // FontVariantEastAsianWidth
171     unsigned m_variantEastAsianRuby : 1; // FontVariantEastAsianRuby
172     unsigned m_opticalSizing : 1; // FontOpticalSizing
173     unsigned m_fontStyleAxis : 1; // Whether &quot;font-style: italic&quot; or &quot;font-style: oblique 20deg&quot; was specified
174     unsigned m_shouldAllowUserInstalledFonts : 1; // AllowUserInstalledFonts: If this description is allowed to match a user-installed font

175 };
176 
177 inline bool FontDescription::operator==(const FontDescription&amp; other) const
178 {
179     return m_computedSize == other.m_computedSize
180         &amp;&amp; m_fontSelectionRequest == other.m_fontSelectionRequest
181         &amp;&amp; m_renderingMode == other.m_renderingMode
182         &amp;&amp; m_textRendering == other.m_textRendering
183         &amp;&amp; m_orientation == other.m_orientation
184         &amp;&amp; m_nonCJKGlyphOrientation == other.m_nonCJKGlyphOrientation
185         &amp;&amp; m_widthVariant == other.m_widthVariant
186         &amp;&amp; m_locale == other.m_locale
187         &amp;&amp; m_featureSettings == other.m_featureSettings
188 #if ENABLE(VARIATION_FONTS)
189         &amp;&amp; m_variationSettings == other.m_variationSettings
190 #endif
191         &amp;&amp; m_fontSynthesis == other.m_fontSynthesis
192         &amp;&amp; m_variantCommonLigatures == other.m_variantCommonLigatures
193         &amp;&amp; m_variantDiscretionaryLigatures == other.m_variantDiscretionaryLigatures
194         &amp;&amp; m_variantHistoricalLigatures == other.m_variantHistoricalLigatures
195         &amp;&amp; m_variantContextualAlternates == other.m_variantContextualAlternates
196         &amp;&amp; m_variantPosition == other.m_variantPosition
197         &amp;&amp; m_variantCaps == other.m_variantCaps
198         &amp;&amp; m_variantNumericFigure == other.m_variantNumericFigure
199         &amp;&amp; m_variantNumericSpacing == other.m_variantNumericSpacing
200         &amp;&amp; m_variantNumericFraction == other.m_variantNumericFraction
201         &amp;&amp; m_variantNumericOrdinal == other.m_variantNumericOrdinal
202         &amp;&amp; m_variantNumericSlashedZero == other.m_variantNumericSlashedZero
203         &amp;&amp; m_variantAlternates == other.m_variantAlternates
204         &amp;&amp; m_variantEastAsianVariant == other.m_variantEastAsianVariant
205         &amp;&amp; m_variantEastAsianWidth == other.m_variantEastAsianWidth
206         &amp;&amp; m_variantEastAsianRuby == other.m_variantEastAsianRuby
207         &amp;&amp; m_opticalSizing == other.m_opticalSizing
208         &amp;&amp; m_fontStyleAxis == other.m_fontStyleAxis
<span class="line-modified">209         &amp;&amp; m_shouldAllowUserInstalledFonts == other.m_shouldAllowUserInstalledFonts;</span>
<span class="line-modified">210 }</span>
<span class="line-added">211 </span>
<span class="line-added">212 template&lt;class Encoder&gt;</span>
<span class="line-added">213 void FontDescription::encode(Encoder&amp; encoder) const</span>
<span class="line-added">214 {</span>
<span class="line-added">215     encoder &lt;&lt; featureSettings();</span>
<span class="line-added">216 #if ENABLE(VARIATION_FONTS)</span>
<span class="line-added">217     encoder &lt;&lt; variationSettings();</span>
<span class="line-added">218 #endif</span>
<span class="line-added">219     encoder &lt;&lt; locale();</span>
<span class="line-added">220     encoder &lt;&lt; italic();</span>
<span class="line-added">221     encoder &lt;&lt; stretch();</span>
<span class="line-added">222     encoder &lt;&lt; weight();</span>
<span class="line-added">223     encoder &lt;&lt; m_computedSize;</span>
<span class="line-added">224     encoder &lt;&lt; orientation();</span>
<span class="line-added">225     encoder &lt;&lt; nonCJKGlyphOrientation();</span>
<span class="line-added">226     encoder &lt;&lt; widthVariant();</span>
<span class="line-added">227     encoder &lt;&lt; renderingMode();</span>
<span class="line-added">228     encoder &lt;&lt; textRenderingMode();</span>
<span class="line-added">229     encoder &lt;&lt; fontSynthesis();</span>
<span class="line-added">230     encoder &lt;&lt; variantCommonLigatures();</span>
<span class="line-added">231     encoder &lt;&lt; variantDiscretionaryLigatures();</span>
<span class="line-added">232     encoder &lt;&lt; variantHistoricalLigatures();</span>
<span class="line-added">233     encoder &lt;&lt; variantContextualAlternates();</span>
<span class="line-added">234     encoder &lt;&lt; variantPosition();</span>
<span class="line-added">235     encoder &lt;&lt; variantCaps();</span>
<span class="line-added">236     encoder &lt;&lt; variantNumericFigure();</span>
<span class="line-added">237     encoder &lt;&lt; variantNumericSpacing();</span>
<span class="line-added">238     encoder &lt;&lt; variantNumericFraction();</span>
<span class="line-added">239     encoder &lt;&lt; variantNumericOrdinal();</span>
<span class="line-added">240     encoder &lt;&lt; variantNumericSlashedZero();</span>
<span class="line-added">241     encoder &lt;&lt; variantAlternates();</span>
<span class="line-added">242     encoder &lt;&lt; variantEastAsianVariant();</span>
<span class="line-added">243     encoder &lt;&lt; variantEastAsianWidth();</span>
<span class="line-added">244     encoder &lt;&lt; variantEastAsianRuby();</span>
<span class="line-added">245     encoder &lt;&lt; opticalSizing();</span>
<span class="line-added">246     encoder &lt;&lt; fontStyleAxis();</span>
<span class="line-added">247     encoder &lt;&lt; shouldAllowUserInstalledFonts();</span>
<span class="line-added">248 }</span>
<span class="line-added">249 </span>
<span class="line-added">250 template&lt;class Decoder&gt;</span>
<span class="line-added">251 Optional&lt;FontDescription&gt; FontDescription::decode(Decoder&amp; decoder)</span>
<span class="line-added">252 {</span>
<span class="line-added">253     FontDescription fontDescription;</span>
<span class="line-added">254     Optional&lt;FontFeatureSettings&gt; featureSettings;</span>
<span class="line-added">255     decoder &gt;&gt; featureSettings;</span>
<span class="line-added">256     if (!featureSettings)</span>
<span class="line-added">257         return WTF::nullopt;</span>
<span class="line-added">258 </span>
<span class="line-added">259 #if ENABLE(VARIATION_FONTS)</span>
<span class="line-added">260     Optional&lt;FontVariationSettings&gt; variationSettings;</span>
<span class="line-added">261     decoder &gt;&gt; variationSettings;</span>
<span class="line-added">262     if (!variationSettings)</span>
<span class="line-added">263         return WTF::nullopt;</span>
<span class="line-added">264 #endif</span>
<span class="line-added">265 </span>
<span class="line-added">266     Optional&lt;AtomString&gt; locale;</span>
<span class="line-added">267     decoder &gt;&gt; locale;</span>
<span class="line-added">268     if (!locale)</span>
<span class="line-added">269         return WTF::nullopt;</span>
<span class="line-added">270 </span>
<span class="line-added">271     Optional&lt;Optional&lt;FontSelectionValue&gt;&gt; italic;</span>
<span class="line-added">272     decoder &gt;&gt; italic;</span>
<span class="line-added">273     if (!italic)</span>
<span class="line-added">274         return WTF::nullopt;</span>
<span class="line-added">275 </span>
<span class="line-added">276     Optional&lt;FontSelectionValue&gt; stretch;</span>
<span class="line-added">277     decoder &gt;&gt; stretch;</span>
<span class="line-added">278     if (!stretch)</span>
<span class="line-added">279         return WTF::nullopt;</span>
<span class="line-added">280 </span>
<span class="line-added">281     Optional&lt;FontSelectionValue&gt; weight;</span>
<span class="line-added">282     decoder &gt;&gt; weight;</span>
<span class="line-added">283     if (!weight)</span>
<span class="line-added">284         return WTF::nullopt;</span>
<span class="line-added">285 </span>
<span class="line-added">286     Optional&lt;float&gt; computedSize;</span>
<span class="line-added">287     decoder &gt;&gt; computedSize;</span>
<span class="line-added">288     if (!computedSize)</span>
<span class="line-added">289         return WTF::nullopt;</span>
<span class="line-added">290 </span>
<span class="line-added">291     Optional&lt;FontOrientation&gt; orientation;</span>
<span class="line-added">292     decoder &gt;&gt; orientation;</span>
<span class="line-added">293     if (!orientation)</span>
<span class="line-added">294         return WTF::nullopt;</span>
<span class="line-added">295 </span>
<span class="line-added">296     Optional&lt;NonCJKGlyphOrientation&gt; nonCJKGlyphOrientation;</span>
<span class="line-added">297     decoder &gt;&gt; nonCJKGlyphOrientation;</span>
<span class="line-added">298     if (!nonCJKGlyphOrientation)</span>
<span class="line-added">299         return WTF::nullopt;</span>
<span class="line-added">300 </span>
<span class="line-added">301     Optional&lt;FontWidthVariant&gt; widthVariant;</span>
<span class="line-added">302     decoder &gt;&gt; widthVariant;</span>
<span class="line-added">303     if (!widthVariant)</span>
<span class="line-added">304         return WTF::nullopt;</span>
<span class="line-added">305 </span>
<span class="line-added">306     Optional&lt;FontRenderingMode&gt; renderingMode;</span>
<span class="line-added">307     decoder &gt;&gt; renderingMode;</span>
<span class="line-added">308     if (!renderingMode)</span>
<span class="line-added">309         return WTF::nullopt;</span>
<span class="line-added">310 </span>
<span class="line-added">311     Optional&lt;TextRenderingMode&gt; textRenderingMode;</span>
<span class="line-added">312     decoder &gt;&gt; textRenderingMode;</span>
<span class="line-added">313     if (!textRenderingMode)</span>
<span class="line-added">314         return WTF::nullopt;</span>
<span class="line-added">315 </span>
<span class="line-added">316     Optional&lt;FontSynthesis&gt; fontSynthesis;</span>
<span class="line-added">317     decoder &gt;&gt; fontSynthesis;</span>
<span class="line-added">318     if (!fontSynthesis)</span>
<span class="line-added">319         return WTF::nullopt;</span>
<span class="line-added">320 </span>
<span class="line-added">321     Optional&lt;FontVariantLigatures&gt; variantCommonLigatures;</span>
<span class="line-added">322     decoder &gt;&gt; variantCommonLigatures;</span>
<span class="line-added">323     if (!variantCommonLigatures)</span>
<span class="line-added">324         return WTF::nullopt;</span>
<span class="line-added">325 </span>
<span class="line-added">326     Optional&lt;FontVariantLigatures&gt; variantDiscretionaryLigatures;</span>
<span class="line-added">327     decoder &gt;&gt; variantDiscretionaryLigatures;</span>
<span class="line-added">328     if (!variantDiscretionaryLigatures)</span>
<span class="line-added">329         return WTF::nullopt;</span>
<span class="line-added">330 </span>
<span class="line-added">331     Optional&lt;FontVariantLigatures&gt; variantHistoricalLigatures;</span>
<span class="line-added">332     decoder &gt;&gt; variantHistoricalLigatures;</span>
<span class="line-added">333     if (!variantHistoricalLigatures)</span>
<span class="line-added">334         return WTF::nullopt;</span>
<span class="line-added">335 </span>
<span class="line-added">336     Optional&lt;FontVariantLigatures&gt; variantContextualAlternates;</span>
<span class="line-added">337     decoder &gt;&gt; variantContextualAlternates;</span>
<span class="line-added">338     if (!variantContextualAlternates)</span>
<span class="line-added">339         return WTF::nullopt;</span>
<span class="line-added">340 </span>
<span class="line-added">341     Optional&lt;FontVariantPosition&gt; variantPosition;</span>
<span class="line-added">342     decoder &gt;&gt; variantPosition;</span>
<span class="line-added">343     if (!variantPosition)</span>
<span class="line-added">344         return WTF::nullopt;</span>
<span class="line-added">345 </span>
<span class="line-added">346     Optional&lt;FontVariantCaps&gt; variantCaps;</span>
<span class="line-added">347     decoder &gt;&gt; variantCaps;</span>
<span class="line-added">348     if (!variantCaps)</span>
<span class="line-added">349         return WTF::nullopt;</span>
<span class="line-added">350 </span>
<span class="line-added">351     Optional&lt;FontVariantNumericFigure&gt; variantNumericFigure;</span>
<span class="line-added">352     decoder &gt;&gt; variantNumericFigure;</span>
<span class="line-added">353     if (!variantNumericFigure)</span>
<span class="line-added">354         return WTF::nullopt;</span>
<span class="line-added">355 </span>
<span class="line-added">356     Optional&lt;FontVariantNumericSpacing&gt; variantNumericSpacing;</span>
<span class="line-added">357     decoder &gt;&gt; variantNumericSpacing;</span>
<span class="line-added">358     if (!variantNumericSpacing)</span>
<span class="line-added">359         return WTF::nullopt;</span>
<span class="line-added">360 </span>
<span class="line-added">361     Optional&lt;FontVariantNumericFraction&gt; variantNumericFraction;</span>
<span class="line-added">362     decoder &gt;&gt; variantNumericFraction;</span>
<span class="line-added">363     if (!variantNumericFraction)</span>
<span class="line-added">364         return WTF::nullopt;</span>
<span class="line-added">365 </span>
<span class="line-added">366     Optional&lt;FontVariantNumericOrdinal&gt; variantNumericOrdinal;</span>
<span class="line-added">367     decoder &gt;&gt; variantNumericOrdinal;</span>
<span class="line-added">368     if (!variantNumericOrdinal)</span>
<span class="line-added">369         return WTF::nullopt;</span>
<span class="line-added">370 </span>
<span class="line-added">371     Optional&lt;FontVariantNumericSlashedZero&gt; variantNumericSlashedZero;</span>
<span class="line-added">372     decoder &gt;&gt; variantNumericSlashedZero;</span>
<span class="line-added">373     if (!variantNumericSlashedZero)</span>
<span class="line-added">374         return WTF::nullopt;</span>
<span class="line-added">375 </span>
<span class="line-added">376     Optional&lt;FontVariantAlternates&gt; variantAlternates;</span>
<span class="line-added">377     decoder &gt;&gt; variantAlternates;</span>
<span class="line-added">378     if (!variantAlternates)</span>
<span class="line-added">379         return WTF::nullopt;</span>
<span class="line-added">380 </span>
<span class="line-added">381     Optional&lt;FontVariantEastAsianVariant&gt; variantEastAsianVariant;</span>
<span class="line-added">382     decoder &gt;&gt; variantEastAsianVariant;</span>
<span class="line-added">383     if (!variantEastAsianVariant)</span>
<span class="line-added">384         return WTF::nullopt;</span>
<span class="line-added">385 </span>
<span class="line-added">386     Optional&lt;FontVariantEastAsianWidth&gt; variantEastAsianWidth;</span>
<span class="line-added">387     decoder &gt;&gt; variantEastAsianWidth;</span>
<span class="line-added">388     if (!variantEastAsianWidth)</span>
<span class="line-added">389         return WTF::nullopt;</span>
<span class="line-added">390 </span>
<span class="line-added">391     Optional&lt;FontVariantEastAsianRuby&gt; variantEastAsianRuby;</span>
<span class="line-added">392     decoder &gt;&gt; variantEastAsianRuby;</span>
<span class="line-added">393     if (!variantEastAsianRuby)</span>
<span class="line-added">394         return WTF::nullopt;</span>
<span class="line-added">395 </span>
<span class="line-added">396     Optional&lt;FontOpticalSizing&gt; opticalSizing;</span>
<span class="line-added">397     decoder &gt;&gt; opticalSizing;</span>
<span class="line-added">398     if (!opticalSizing)</span>
<span class="line-added">399         return WTF::nullopt;</span>
<span class="line-added">400 </span>
<span class="line-added">401     Optional&lt;FontStyleAxis&gt; fontStyleAxis;</span>
<span class="line-added">402     decoder &gt;&gt; fontStyleAxis;</span>
<span class="line-added">403     if (!fontStyleAxis)</span>
<span class="line-added">404         return WTF::nullopt;</span>
<span class="line-added">405 </span>
<span class="line-added">406     Optional&lt;AllowUserInstalledFonts&gt; shouldAllowUserInstalledFonts;</span>
<span class="line-added">407     decoder &gt;&gt; shouldAllowUserInstalledFonts;</span>
<span class="line-added">408     if (!shouldAllowUserInstalledFonts)</span>
<span class="line-added">409         return WTF::nullopt;</span>
<span class="line-added">410 </span>
<span class="line-added">411     fontDescription.setFeatureSettings(WTFMove(*featureSettings));</span>
<span class="line-added">412 #if ENABLE(VARIATION_FONTS)</span>
<span class="line-added">413     fontDescription.setVariationSettings(WTFMove(*variationSettings));</span>
<span class="line-added">414 #endif</span>
<span class="line-added">415     fontDescription.setLocale(*locale);</span>
<span class="line-added">416     fontDescription.setItalic(*italic);</span>
<span class="line-added">417     fontDescription.setStretch(*stretch);</span>
<span class="line-added">418     fontDescription.setWeight(*weight);</span>
<span class="line-added">419     fontDescription.setComputedSize(*computedSize);</span>
<span class="line-added">420     fontDescription.setOrientation(*orientation);</span>
<span class="line-added">421     fontDescription.setNonCJKGlyphOrientation(*nonCJKGlyphOrientation);</span>
<span class="line-added">422     fontDescription.setWidthVariant(*widthVariant);</span>
<span class="line-added">423     fontDescription.setRenderingMode(*renderingMode);</span>
<span class="line-added">424     fontDescription.setTextRenderingMode(*textRenderingMode);</span>
<span class="line-added">425     fontDescription.setFontSynthesis(*fontSynthesis);</span>
<span class="line-added">426     fontDescription.setVariantCommonLigatures(*variantCommonLigatures);</span>
<span class="line-added">427     fontDescription.setVariantDiscretionaryLigatures(*variantDiscretionaryLigatures);</span>
<span class="line-added">428     fontDescription.setVariantHistoricalLigatures(*variantHistoricalLigatures);</span>
<span class="line-added">429     fontDescription.setVariantContextualAlternates(*variantContextualAlternates);</span>
<span class="line-added">430     fontDescription.setVariantPosition(*variantPosition);</span>
<span class="line-added">431     fontDescription.setVariantCaps(*variantCaps);</span>
<span class="line-added">432     fontDescription.setVariantNumericFigure(*variantNumericFigure);</span>
<span class="line-added">433     fontDescription.setVariantNumericSpacing(*variantNumericSpacing);</span>
<span class="line-added">434     fontDescription.setVariantNumericFraction(*variantNumericFraction);</span>
<span class="line-added">435     fontDescription.setVariantNumericOrdinal(*variantNumericOrdinal);</span>
<span class="line-added">436     fontDescription.setVariantNumericSlashedZero(*variantNumericSlashedZero);</span>
<span class="line-added">437     fontDescription.setVariantAlternates(*variantAlternates);</span>
<span class="line-added">438     fontDescription.setVariantEastAsianVariant(*variantEastAsianVariant);</span>
<span class="line-added">439     fontDescription.setVariantEastAsianWidth(*variantEastAsianWidth);</span>
<span class="line-added">440     fontDescription.setVariantEastAsianRuby(*variantEastAsianRuby);</span>
<span class="line-added">441     fontDescription.setOpticalSizing(*opticalSizing);</span>
<span class="line-added">442     fontDescription.setFontStyleAxis(*fontStyleAxis);</span>
<span class="line-added">443     fontDescription.setShouldAllowUserInstalledFonts(*shouldAllowUserInstalledFonts);</span>
<span class="line-added">444 </span>
<span class="line-added">445     return fontDescription;</span>
446 }
447 
448 }
</pre>
</td>
</tr>
</table>
<center><a href="FontDescription.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FontMetrics.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>