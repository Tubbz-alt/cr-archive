<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/css/CSSImageGeneratorValue.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="CSSGradientValue.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CSSImageSetValue.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/css/CSSImageGeneratorValue.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
121 
122 inline CSSImageGeneratorValue::CachedGeneratedImage::CachedGeneratedImage(CSSImageGeneratorValue&amp; owner, FloatSize size, GeneratedImage&amp; image)
123     : m_owner(owner)
124     , m_size(size)
125     , m_image(image)
126     , m_evictionTimer(*this, &amp;CSSImageGeneratorValue::CachedGeneratedImage::evictionTimerFired, timeToKeepCachedGeneratedImages)
127 {
128     m_evictionTimer.restart();
129 }
130 
131 void CSSImageGeneratorValue::CachedGeneratedImage::evictionTimerFired()
132 {
133     // NOTE: This is essentially a &quot;delete this&quot;, the object is no longer valid after this line.
134     m_owner.evictCachedGeneratedImage(m_size);
135 }
136 
137 RefPtr&lt;Image&gt; CSSImageGeneratorValue::image(RenderElement&amp; renderer, const FloatSize&amp; size)
138 {
139     switch (classType()) {
140     case CanvasClass:
<span class="line-modified">141         return downcast&lt;CSSCanvasValue&gt;(*this).image(&amp;renderer, size);</span>
142     case NamedImageClass:
<span class="line-modified">143         return downcast&lt;CSSNamedImageValue&gt;(*this).image(&amp;renderer, size);</span>
144     case CrossfadeClass:
145         return downcast&lt;CSSCrossfadeValue&gt;(*this).image(renderer, size);
146     case FilterImageClass:
<span class="line-modified">147         return downcast&lt;CSSFilterImageValue&gt;(*this).image(&amp;renderer, size);</span>
148     case LinearGradientClass:
149         return downcast&lt;CSSLinearGradientValue&gt;(*this).image(renderer, size);
150     case RadialGradientClass:
151         return downcast&lt;CSSRadialGradientValue&gt;(*this).image(renderer, size);
152     case ConicGradientClass:
153         return downcast&lt;CSSConicGradientValue&gt;(*this).image(renderer, size);
154 #if ENABLE(CSS_PAINTING_API)
155     case PaintImageClass:
156         return downcast&lt;CSSPaintImageValue&gt;(*this).image(renderer, size);
157 #endif
158     default:
159         ASSERT_NOT_REACHED();
160     }
161     return nullptr;
162 }
163 
164 bool CSSImageGeneratorValue::isFixedSize() const
165 {
166     switch (classType()) {
167     case CanvasClass:
</pre>
<hr />
<pre>
175     case LinearGradientClass:
176         return downcast&lt;CSSLinearGradientValue&gt;(*this).isFixedSize();
177     case RadialGradientClass:
178         return downcast&lt;CSSRadialGradientValue&gt;(*this).isFixedSize();
179     case ConicGradientClass:
180         return downcast&lt;CSSConicGradientValue&gt;(*this).isFixedSize();
181 #if ENABLE(CSS_PAINTING_API)
182     case PaintImageClass:
183         return downcast&lt;CSSPaintImageValue&gt;(*this).isFixedSize();
184 #endif
185     default:
186         ASSERT_NOT_REACHED();
187     }
188     return false;
189 }
190 
191 FloatSize CSSImageGeneratorValue::fixedSize(const RenderElement&amp; renderer)
192 {
193     switch (classType()) {
194     case CanvasClass:
<span class="line-modified">195         return downcast&lt;CSSCanvasValue&gt;(*this).fixedSize(&amp;renderer);</span>
196     case CrossfadeClass:
197         return downcast&lt;CSSCrossfadeValue&gt;(*this).fixedSize(renderer);
198     case FilterImageClass:
<span class="line-modified">199         return downcast&lt;CSSFilterImageValue&gt;(*this).fixedSize(&amp;renderer);</span>
200     case LinearGradientClass:
201         return downcast&lt;CSSLinearGradientValue&gt;(*this).fixedSize(renderer);
202     case RadialGradientClass:
203         return downcast&lt;CSSRadialGradientValue&gt;(*this).fixedSize(renderer);
204     case ConicGradientClass:
205         return downcast&lt;CSSConicGradientValue&gt;(*this).fixedSize(renderer);
206 #if ENABLE(CSS_PAINTING_API)
207     case PaintImageClass:
208         return downcast&lt;CSSPaintImageValue&gt;(*this).fixedSize(renderer);
209 #endif
210     default:
211         ASSERT_NOT_REACHED();
212     }
213     return FloatSize();
214 }
215 
216 bool CSSImageGeneratorValue::isPending() const
217 {
218     switch (classType()) {
219     case CrossfadeClass:
</pre>
</td>
<td>
<hr />
<pre>
121 
122 inline CSSImageGeneratorValue::CachedGeneratedImage::CachedGeneratedImage(CSSImageGeneratorValue&amp; owner, FloatSize size, GeneratedImage&amp; image)
123     : m_owner(owner)
124     , m_size(size)
125     , m_image(image)
126     , m_evictionTimer(*this, &amp;CSSImageGeneratorValue::CachedGeneratedImage::evictionTimerFired, timeToKeepCachedGeneratedImages)
127 {
128     m_evictionTimer.restart();
129 }
130 
131 void CSSImageGeneratorValue::CachedGeneratedImage::evictionTimerFired()
132 {
133     // NOTE: This is essentially a &quot;delete this&quot;, the object is no longer valid after this line.
134     m_owner.evictCachedGeneratedImage(m_size);
135 }
136 
137 RefPtr&lt;Image&gt; CSSImageGeneratorValue::image(RenderElement&amp; renderer, const FloatSize&amp; size)
138 {
139     switch (classType()) {
140     case CanvasClass:
<span class="line-modified">141         return downcast&lt;CSSCanvasValue&gt;(*this).image(renderer, size);</span>
142     case NamedImageClass:
<span class="line-modified">143         return downcast&lt;CSSNamedImageValue&gt;(*this).image(renderer, size);</span>
144     case CrossfadeClass:
145         return downcast&lt;CSSCrossfadeValue&gt;(*this).image(renderer, size);
146     case FilterImageClass:
<span class="line-modified">147         return downcast&lt;CSSFilterImageValue&gt;(*this).image(renderer, size);</span>
148     case LinearGradientClass:
149         return downcast&lt;CSSLinearGradientValue&gt;(*this).image(renderer, size);
150     case RadialGradientClass:
151         return downcast&lt;CSSRadialGradientValue&gt;(*this).image(renderer, size);
152     case ConicGradientClass:
153         return downcast&lt;CSSConicGradientValue&gt;(*this).image(renderer, size);
154 #if ENABLE(CSS_PAINTING_API)
155     case PaintImageClass:
156         return downcast&lt;CSSPaintImageValue&gt;(*this).image(renderer, size);
157 #endif
158     default:
159         ASSERT_NOT_REACHED();
160     }
161     return nullptr;
162 }
163 
164 bool CSSImageGeneratorValue::isFixedSize() const
165 {
166     switch (classType()) {
167     case CanvasClass:
</pre>
<hr />
<pre>
175     case LinearGradientClass:
176         return downcast&lt;CSSLinearGradientValue&gt;(*this).isFixedSize();
177     case RadialGradientClass:
178         return downcast&lt;CSSRadialGradientValue&gt;(*this).isFixedSize();
179     case ConicGradientClass:
180         return downcast&lt;CSSConicGradientValue&gt;(*this).isFixedSize();
181 #if ENABLE(CSS_PAINTING_API)
182     case PaintImageClass:
183         return downcast&lt;CSSPaintImageValue&gt;(*this).isFixedSize();
184 #endif
185     default:
186         ASSERT_NOT_REACHED();
187     }
188     return false;
189 }
190 
191 FloatSize CSSImageGeneratorValue::fixedSize(const RenderElement&amp; renderer)
192 {
193     switch (classType()) {
194     case CanvasClass:
<span class="line-modified">195         return downcast&lt;CSSCanvasValue&gt;(*this).fixedSize(renderer);</span>
196     case CrossfadeClass:
197         return downcast&lt;CSSCrossfadeValue&gt;(*this).fixedSize(renderer);
198     case FilterImageClass:
<span class="line-modified">199         return downcast&lt;CSSFilterImageValue&gt;(*this).fixedSize(renderer);</span>
200     case LinearGradientClass:
201         return downcast&lt;CSSLinearGradientValue&gt;(*this).fixedSize(renderer);
202     case RadialGradientClass:
203         return downcast&lt;CSSRadialGradientValue&gt;(*this).fixedSize(renderer);
204     case ConicGradientClass:
205         return downcast&lt;CSSConicGradientValue&gt;(*this).fixedSize(renderer);
206 #if ENABLE(CSS_PAINTING_API)
207     case PaintImageClass:
208         return downcast&lt;CSSPaintImageValue&gt;(*this).fixedSize(renderer);
209 #endif
210     default:
211         ASSERT_NOT_REACHED();
212     }
213     return FloatSize();
214 }
215 
216 bool CSSImageGeneratorValue::isPending() const
217 {
218     switch (classType()) {
219     case CrossfadeClass:
</pre>
</td>
</tr>
</table>
<center><a href="CSSGradientValue.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CSSImageSetValue.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>