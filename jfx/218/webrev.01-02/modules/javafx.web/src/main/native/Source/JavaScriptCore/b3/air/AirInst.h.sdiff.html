<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/b3/air/AirInst.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AirHandleCalleeSaves.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="AirLiveness.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/b3/air/AirInst.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #pragma once
 27 
 28 #if ENABLE(B3_JIT)
 29 
 30 #include &quot;AirArg.h&quot;
 31 #include &quot;AirKind.h&quot;
<span class="line-modified"> 32 #include &quot;CCallHelpers.h&quot;</span>

 33 
 34 namespace JSC {
 35 
 36 class CCallHelpers;
 37 class RegisterSet;
 38 
 39 namespace B3 {
 40 
 41 class Value;
 42 
 43 namespace Air {
 44 
 45 struct GenerationContext;
 46 
 47 struct Inst {
 48     typedef Vector&lt;Arg, 3&gt; ArgList;
 49 
 50     Inst()
 51         : origin(nullptr)
 52     {
</pre>
<hr />
<pre>
174     // Defined by opcode_generator.rb.
175     bool isTerminal();
176 
177     // Returns true if this instruction can have any effects other than control flow or arguments.
178     bool hasNonArgNonControlEffects();
179 
180     // Returns true if this instruction can have any effects other than what is implied by arguments.
181     // For example, &quot;Move $42, (%rax)&quot; will return false because the effect of storing to (%rax) is
182     // implied by the second argument.
183     bool hasNonArgEffects();
184 
185     // Tells you if this operation has arg effects.
186     bool hasArgEffects();
187 
188     // Tells you if this operation has non-control effects.
189     bool hasNonControlEffects() { return hasNonArgNonControlEffects() || hasArgEffects(); }
190 
191     // Generate some code for this instruction. This is, like, literally our backend. If this is the
192     // terminal, it returns the jump that needs to be linked for the &quot;then&quot; case, with the &quot;else&quot;
193     // case being fall-through. This function is auto-generated by opcode_generator.rb.
<span class="line-modified">194     CCallHelpers::Jump generate(CCallHelpers&amp;, GenerationContext&amp;);</span>
195 
196     // If source arguments benefits from being aliased to a destination argument,
197     // this return the index of the destination argument.
198     // The source are assumed to be at (index - 1) and (index - 2)
199     // For example,
200     //     Add Tmp1, Tmp2, Tmp3
201     // returns 2 if 0 and 1 benefit from aliasing to Tmp3.
202     Optional&lt;unsigned&gt; shouldTryAliasingDef();
203 
204     // This computes a hash for comparing this to JSAir&#39;s Inst.
205     unsigned jsHash() const;
206 
207     void dump(PrintStream&amp;) const;
208 
209     ArgList args;
210     Value* origin; // The B3::Value that this originated from.
211     Kind kind;
212 
213 private:
214     template&lt;typename Func&gt;
</pre>
</td>
<td>
<hr />
<pre>
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #pragma once
 27 
 28 #if ENABLE(B3_JIT)
 29 
 30 #include &quot;AirArg.h&quot;
 31 #include &quot;AirKind.h&quot;
<span class="line-modified"> 32 #include &quot;MacroAssembler.h&quot;</span>
<span class="line-added"> 33 #include &lt;wtf/ScopedLambda.h&gt;</span>
 34 
 35 namespace JSC {
 36 
 37 class CCallHelpers;
 38 class RegisterSet;
 39 
 40 namespace B3 {
 41 
 42 class Value;
 43 
 44 namespace Air {
 45 
 46 struct GenerationContext;
 47 
 48 struct Inst {
 49     typedef Vector&lt;Arg, 3&gt; ArgList;
 50 
 51     Inst()
 52         : origin(nullptr)
 53     {
</pre>
<hr />
<pre>
175     // Defined by opcode_generator.rb.
176     bool isTerminal();
177 
178     // Returns true if this instruction can have any effects other than control flow or arguments.
179     bool hasNonArgNonControlEffects();
180 
181     // Returns true if this instruction can have any effects other than what is implied by arguments.
182     // For example, &quot;Move $42, (%rax)&quot; will return false because the effect of storing to (%rax) is
183     // implied by the second argument.
184     bool hasNonArgEffects();
185 
186     // Tells you if this operation has arg effects.
187     bool hasArgEffects();
188 
189     // Tells you if this operation has non-control effects.
190     bool hasNonControlEffects() { return hasNonArgNonControlEffects() || hasArgEffects(); }
191 
192     // Generate some code for this instruction. This is, like, literally our backend. If this is the
193     // terminal, it returns the jump that needs to be linked for the &quot;then&quot; case, with the &quot;else&quot;
194     // case being fall-through. This function is auto-generated by opcode_generator.rb.
<span class="line-modified">195     MacroAssembler::Jump generate(CCallHelpers&amp;, GenerationContext&amp;);</span>
196 
197     // If source arguments benefits from being aliased to a destination argument,
198     // this return the index of the destination argument.
199     // The source are assumed to be at (index - 1) and (index - 2)
200     // For example,
201     //     Add Tmp1, Tmp2, Tmp3
202     // returns 2 if 0 and 1 benefit from aliasing to Tmp3.
203     Optional&lt;unsigned&gt; shouldTryAliasingDef();
204 
205     // This computes a hash for comparing this to JSAir&#39;s Inst.
206     unsigned jsHash() const;
207 
208     void dump(PrintStream&amp;) const;
209 
210     ArgList args;
211     Value* origin; // The B3::Value that this originated from.
212     Kind kind;
213 
214 private:
215     template&lt;typename Func&gt;
</pre>
</td>
</tr>
</table>
<center><a href="AirHandleCalleeSaves.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="AirLiveness.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>