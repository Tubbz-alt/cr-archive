<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/rendering/svg/SVGSubpathData.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SVGRootInlineBox.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="SVGTextLayoutEngine.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/rendering/svg/SVGSubpathData.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
17  * Boston, MA 02110-1301, USA.
18  */
19 
20 #pragma once
21 
22 #include &quot;Path.h&quot;
23 #include &lt;wtf/Forward.h&gt;
24 
25 namespace WebCore {
26 
27 class SVGSubpathData {
28 public:
29     SVGSubpathData(Vector&lt;FloatPoint&gt;&amp; zeroLengthSubpathLocations)
30         : m_zeroLengthSubpathLocations(zeroLengthSubpathLocations)
31     {
32     }
33 
34     static void updateFromPathElement(SVGSubpathData&amp; subpathFinder, const PathElement&amp; element)
35     {
36         switch (element.type) {
<span class="line-modified">37         case PathElementMoveToPoint:</span>
38             if (subpathFinder.m_pathIsZeroLength &amp;&amp; !subpathFinder.m_haveSeenMoveOnly)
39                 subpathFinder.m_zeroLengthSubpathLocations.append(subpathFinder.m_lastPoint);
40             subpathFinder.m_lastPoint = subpathFinder.m_movePoint = element.points[0];
41             subpathFinder.m_haveSeenMoveOnly = true;
42             subpathFinder.m_pathIsZeroLength = true;
43             break;
<span class="line-modified">44         case PathElementAddLineToPoint:</span>
45             if (subpathFinder.m_lastPoint != element.points[0]) {
46                 subpathFinder.m_pathIsZeroLength = false;
47                 subpathFinder.m_lastPoint = element.points[0];
48             }
49             subpathFinder.m_haveSeenMoveOnly = false;
50             break;
<span class="line-modified">51         case PathElementAddQuadCurveToPoint:</span>
52             if (subpathFinder.m_lastPoint != element.points[0] || element.points[0] != element.points[1]) {
53                 subpathFinder.m_pathIsZeroLength = false;
54                 subpathFinder.m_lastPoint = element.points[1];
55             }
56             subpathFinder.m_haveSeenMoveOnly = false;
57             break;
<span class="line-modified">58         case PathElementAddCurveToPoint:</span>
59             if (subpathFinder.m_lastPoint != element.points[0] || element.points[0] != element.points[1] || element.points[1] != element.points[2]) {
60                 subpathFinder.m_pathIsZeroLength = false;
61                 subpathFinder.m_lastPoint = element.points[2];
62             }
63             subpathFinder.m_haveSeenMoveOnly = false;
64             break;
<span class="line-modified">65         case PathElementCloseSubpath:</span>
66             if (subpathFinder.m_pathIsZeroLength)
67                 subpathFinder.m_zeroLengthSubpathLocations.append(subpathFinder.m_lastPoint);
68             subpathFinder.m_haveSeenMoveOnly = true; // This is an implicit move for the next element
69             subpathFinder.m_pathIsZeroLength = true; // A new sub-path also starts here
70             subpathFinder.m_lastPoint = subpathFinder.m_movePoint;
71             break;
72         }
73     }
74 
75     void pathIsDone()
76     {
77         if (m_pathIsZeroLength &amp;&amp; !m_haveSeenMoveOnly)
78             m_zeroLengthSubpathLocations.append(m_lastPoint);
79     }
80 
81 private:
82     Vector&lt;FloatPoint&gt;&amp; m_zeroLengthSubpathLocations;
83     FloatPoint m_lastPoint;
84     FloatPoint m_movePoint;
85     bool m_haveSeenMoveOnly { false };
</pre>
</td>
<td>
<hr />
<pre>
17  * Boston, MA 02110-1301, USA.
18  */
19 
20 #pragma once
21 
22 #include &quot;Path.h&quot;
23 #include &lt;wtf/Forward.h&gt;
24 
25 namespace WebCore {
26 
27 class SVGSubpathData {
28 public:
29     SVGSubpathData(Vector&lt;FloatPoint&gt;&amp; zeroLengthSubpathLocations)
30         : m_zeroLengthSubpathLocations(zeroLengthSubpathLocations)
31     {
32     }
33 
34     static void updateFromPathElement(SVGSubpathData&amp; subpathFinder, const PathElement&amp; element)
35     {
36         switch (element.type) {
<span class="line-modified">37         case PathElement::Type::MoveToPoint:</span>
38             if (subpathFinder.m_pathIsZeroLength &amp;&amp; !subpathFinder.m_haveSeenMoveOnly)
39                 subpathFinder.m_zeroLengthSubpathLocations.append(subpathFinder.m_lastPoint);
40             subpathFinder.m_lastPoint = subpathFinder.m_movePoint = element.points[0];
41             subpathFinder.m_haveSeenMoveOnly = true;
42             subpathFinder.m_pathIsZeroLength = true;
43             break;
<span class="line-modified">44         case PathElement::Type::AddLineToPoint:</span>
45             if (subpathFinder.m_lastPoint != element.points[0]) {
46                 subpathFinder.m_pathIsZeroLength = false;
47                 subpathFinder.m_lastPoint = element.points[0];
48             }
49             subpathFinder.m_haveSeenMoveOnly = false;
50             break;
<span class="line-modified">51         case PathElement::Type::AddQuadCurveToPoint:</span>
52             if (subpathFinder.m_lastPoint != element.points[0] || element.points[0] != element.points[1]) {
53                 subpathFinder.m_pathIsZeroLength = false;
54                 subpathFinder.m_lastPoint = element.points[1];
55             }
56             subpathFinder.m_haveSeenMoveOnly = false;
57             break;
<span class="line-modified">58         case PathElement::Type::AddCurveToPoint:</span>
59             if (subpathFinder.m_lastPoint != element.points[0] || element.points[0] != element.points[1] || element.points[1] != element.points[2]) {
60                 subpathFinder.m_pathIsZeroLength = false;
61                 subpathFinder.m_lastPoint = element.points[2];
62             }
63             subpathFinder.m_haveSeenMoveOnly = false;
64             break;
<span class="line-modified">65         case PathElement::Type::CloseSubpath:</span>
66             if (subpathFinder.m_pathIsZeroLength)
67                 subpathFinder.m_zeroLengthSubpathLocations.append(subpathFinder.m_lastPoint);
68             subpathFinder.m_haveSeenMoveOnly = true; // This is an implicit move for the next element
69             subpathFinder.m_pathIsZeroLength = true; // A new sub-path also starts here
70             subpathFinder.m_lastPoint = subpathFinder.m_movePoint;
71             break;
72         }
73     }
74 
75     void pathIsDone()
76     {
77         if (m_pathIsZeroLength &amp;&amp; !m_haveSeenMoveOnly)
78             m_zeroLengthSubpathLocations.append(m_lastPoint);
79     }
80 
81 private:
82     Vector&lt;FloatPoint&gt;&amp; m_zeroLengthSubpathLocations;
83     FloatPoint m_lastPoint;
84     FloatPoint m_movePoint;
85     bool m_haveSeenMoveOnly { false };
</pre>
</td>
</tr>
</table>
<center><a href="SVGRootInlineBox.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="SVGTextLayoutEngine.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>