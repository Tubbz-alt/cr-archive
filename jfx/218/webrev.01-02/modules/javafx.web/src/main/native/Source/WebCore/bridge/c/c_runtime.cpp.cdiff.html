<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/bridge/c/c_runtime.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="c_instance.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="c_runtime.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/bridge/c/c_runtime.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 36,46 ***</span>
  #include &lt;JavaScriptCore/JSObject.h&gt;
  
  namespace JSC {
  namespace Bindings {
  
<span class="line-modified">! JSValue CField::valueFromInstance(ExecState* exec, const Instance* inst) const</span>
  {
      const CInstance* instance = static_cast&lt;const CInstance*&gt;(inst);
      NPObject* obj = instance-&gt;getObject();
      if (obj-&gt;_class-&gt;getProperty) {
          NPVariant property;
          VOID_TO_NPVARIANT(property);
  
          bool result;
          {
<span class="line-modified">!             JSLock::DropAllLocks dropAllLocks(exec);</span>
              result = obj-&gt;_class-&gt;getProperty(obj, _fieldIdentifier, &amp;property);
<span class="line-modified">!             CInstance::moveGlobalExceptionToExecState(exec);</span>
          }
          if (result) {
<span class="line-modified">!             JSValue result = convertNPVariantToValue(exec, &amp;property, instance-&gt;rootObject());</span>
              _NPN_ReleaseVariantValue(&amp;property);
              return result;
          }
      }
      return jsUndefined();
  }
  
<span class="line-modified">! bool CField::setValueToInstance(ExecState *exec, const Instance *inst, JSValue aValue) const</span>
  {
      const CInstance* instance = static_cast&lt;const CInstance*&gt;(inst);
      NPObject* obj = instance-&gt;getObject();
      if (obj-&gt;_class-&gt;setProperty) {
          NPVariant variant;
<span class="line-modified">!         convertValueToNPVariant(exec, aValue, &amp;variant);</span>
  
          bool result = false;
          {
<span class="line-modified">!             JSLock::DropAllLocks dropAllLocks(exec);</span>
              result = obj-&gt;_class-&gt;setProperty(obj, _fieldIdentifier, &amp;variant);
<span class="line-modified">!             CInstance::moveGlobalExceptionToExecState(exec);</span>
          }
  
          _NPN_ReleaseVariantValue(&amp;variant);
          return result;
      }
<span class="line-new-header">--- 36,46 ---</span>
  #include &lt;JavaScriptCore/JSObject.h&gt;
  
  namespace JSC {
  namespace Bindings {
  
<span class="line-modified">! JSValue CField::valueFromInstance(JSGlobalObject* lexicalGlobalObject, const Instance* inst) const</span>
  {
      const CInstance* instance = static_cast&lt;const CInstance*&gt;(inst);
      NPObject* obj = instance-&gt;getObject();
      if (obj-&gt;_class-&gt;getProperty) {
          NPVariant property;
          VOID_TO_NPVARIANT(property);
  
          bool result;
          {
<span class="line-modified">!             JSLock::DropAllLocks dropAllLocks(lexicalGlobalObject);</span>
              result = obj-&gt;_class-&gt;getProperty(obj, _fieldIdentifier, &amp;property);
<span class="line-modified">!             CInstance::moveGlobalExceptionToExecState(lexicalGlobalObject);</span>
          }
          if (result) {
<span class="line-modified">!             JSValue result = convertNPVariantToValue(lexicalGlobalObject, &amp;property, instance-&gt;rootObject());</span>
              _NPN_ReleaseVariantValue(&amp;property);
              return result;
          }
      }
      return jsUndefined();
  }
  
<span class="line-modified">! bool CField::setValueToInstance(JSGlobalObject* lexicalGlobalObject, const Instance *inst, JSValue aValue) const</span>
  {
      const CInstance* instance = static_cast&lt;const CInstance*&gt;(inst);
      NPObject* obj = instance-&gt;getObject();
      if (obj-&gt;_class-&gt;setProperty) {
          NPVariant variant;
<span class="line-modified">!         convertValueToNPVariant(lexicalGlobalObject, aValue, &amp;variant);</span>
  
          bool result = false;
          {
<span class="line-modified">!             JSLock::DropAllLocks dropAllLocks(lexicalGlobalObject);</span>
              result = obj-&gt;_class-&gt;setProperty(obj, _fieldIdentifier, &amp;variant);
<span class="line-modified">!             CInstance::moveGlobalExceptionToExecState(lexicalGlobalObject);</span>
          }
  
          _NPN_ReleaseVariantValue(&amp;variant);
          return result;
      }
</pre>
<center><a href="c_instance.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="c_runtime.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>