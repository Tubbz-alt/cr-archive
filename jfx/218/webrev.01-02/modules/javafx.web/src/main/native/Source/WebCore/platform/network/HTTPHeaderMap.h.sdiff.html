<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/network/HTTPHeaderMap.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="HTTPHeaderMap.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="HTTPHeaderNames.in.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/network/HTTPHeaderMap.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
141     bool isEmpty() const { return m_commonHeaders.isEmpty() &amp;&amp; m_uncommonHeaders.isEmpty(); }
142     int size() const { return m_commonHeaders.size() + m_uncommonHeaders.size(); }
143 
144     void clear()
145     {
146         m_commonHeaders.clear();
147         m_uncommonHeaders.clear();
148     }
149 
150     void shrinkToFit()
151     {
152         m_commonHeaders.shrinkToFit();
153         m_uncommonHeaders.shrinkToFit();
154     }
155 
156     WEBCORE_EXPORT String get(const String&amp; name) const;
157     WEBCORE_EXPORT void set(const String&amp; name, const String&amp; value);
158     WEBCORE_EXPORT void add(const String&amp; name, const String&amp; value);
159     WEBCORE_EXPORT void append(const String&amp; name, const String&amp; value);
160     WEBCORE_EXPORT bool contains(const String&amp;) const;
<span class="line-modified">161     bool remove(const String&amp;);</span>
162 
163 #if USE(CF)
164     void set(CFStringRef name, const String&amp; value);
165 #ifdef __OBJC__
166     void set(NSString *name, const String&amp; value) { set((__bridge CFStringRef)name, value); }
167 #endif
168 #endif
169 
170     WEBCORE_EXPORT String get(HTTPHeaderName) const;
171     void set(HTTPHeaderName, const String&amp; value);
172     void add(HTTPHeaderName, const String&amp; value);
173     bool addIfNotPresent(HTTPHeaderName, const String&amp;);
174     WEBCORE_EXPORT bool contains(HTTPHeaderName) const;
175     WEBCORE_EXPORT bool remove(HTTPHeaderName);
176 
177     // Instead of passing a string literal to any of these functions, just use a HTTPHeaderName instead.
178     template&lt;size_t length&gt; String get(const char (&amp;)[length]) const = delete;
179     template&lt;size_t length&gt; void set(const char (&amp;)[length], const String&amp;) = delete;
180     template&lt;size_t length&gt; bool contains(const char (&amp;)[length]) = delete;
181     template&lt;size_t length&gt; bool remove(const char (&amp;)[length]) = delete;
182 
183     const CommonHeadersVector&amp; commonHeaders() const { return m_commonHeaders; }
184     const UncommonHeadersVector&amp; uncommonHeaders() const { return m_uncommonHeaders; }
185     CommonHeadersVector&amp; commonHeaders() { return m_commonHeaders; }
186     UncommonHeadersVector&amp; uncommonHeaders() { return m_uncommonHeaders; }
187 
188     const_iterator begin() const { return const_iterator(*this, m_commonHeaders.begin(), m_uncommonHeaders.begin()); }
189     const_iterator end() const { return const_iterator(*this, m_commonHeaders.end(), m_uncommonHeaders.end()); }
190 
191     friend bool operator==(const HTTPHeaderMap&amp; a, const HTTPHeaderMap&amp; b)
192     {
<span class="line-modified">193         return a.m_commonHeaders == b.m_commonHeaders &amp;&amp; a.m_uncommonHeaders == b.m_uncommonHeaders;</span>










194     }
195 
196     friend bool operator!=(const HTTPHeaderMap&amp; a, const HTTPHeaderMap&amp; b)
197     {
198         return !(a == b);
199     }
200 
201     template &lt;class Encoder&gt; void encode(Encoder&amp;) const;
202     template &lt;class Decoder&gt; static bool decode(Decoder&amp;, HTTPHeaderMap&amp;);
203 
204 private:
205     void setUncommonHeader(const String&amp; name, const String&amp; value);

206 
207     CommonHeadersVector m_commonHeaders;
208     UncommonHeadersVector m_uncommonHeaders;
209 };
210 
211 template &lt;class Encoder&gt;
212 void HTTPHeaderMap::CommonHeader::encode(Encoder&amp; encoder) const
213 {
214     encoder.encodeEnum(key);
215     encoder &lt;&lt; value;
216 }
217 
218 template &lt;class Decoder&gt;
219 auto HTTPHeaderMap::CommonHeader::decode(Decoder&amp; decoder) -&gt; Optional&lt;CommonHeader&gt;
220 {
221     HTTPHeaderName name;
222     if (!decoder.decodeEnum(name))
223         return WTF::nullopt;
224     String value;
225     if (!decoder.decode(value))
</pre>
</td>
<td>
<hr />
<pre>
141     bool isEmpty() const { return m_commonHeaders.isEmpty() &amp;&amp; m_uncommonHeaders.isEmpty(); }
142     int size() const { return m_commonHeaders.size() + m_uncommonHeaders.size(); }
143 
144     void clear()
145     {
146         m_commonHeaders.clear();
147         m_uncommonHeaders.clear();
148     }
149 
150     void shrinkToFit()
151     {
152         m_commonHeaders.shrinkToFit();
153         m_uncommonHeaders.shrinkToFit();
154     }
155 
156     WEBCORE_EXPORT String get(const String&amp; name) const;
157     WEBCORE_EXPORT void set(const String&amp; name, const String&amp; value);
158     WEBCORE_EXPORT void add(const String&amp; name, const String&amp; value);
159     WEBCORE_EXPORT void append(const String&amp; name, const String&amp; value);
160     WEBCORE_EXPORT bool contains(const String&amp;) const;
<span class="line-modified">161     WEBCORE_EXPORT bool remove(const String&amp;);</span>
162 
163 #if USE(CF)
164     void set(CFStringRef name, const String&amp; value);
165 #ifdef __OBJC__
166     void set(NSString *name, const String&amp; value) { set((__bridge CFStringRef)name, value); }
167 #endif
168 #endif
169 
170     WEBCORE_EXPORT String get(HTTPHeaderName) const;
171     void set(HTTPHeaderName, const String&amp; value);
172     void add(HTTPHeaderName, const String&amp; value);
173     bool addIfNotPresent(HTTPHeaderName, const String&amp;);
174     WEBCORE_EXPORT bool contains(HTTPHeaderName) const;
175     WEBCORE_EXPORT bool remove(HTTPHeaderName);
176 
177     // Instead of passing a string literal to any of these functions, just use a HTTPHeaderName instead.
178     template&lt;size_t length&gt; String get(const char (&amp;)[length]) const = delete;
179     template&lt;size_t length&gt; void set(const char (&amp;)[length], const String&amp;) = delete;
180     template&lt;size_t length&gt; bool contains(const char (&amp;)[length]) = delete;
181     template&lt;size_t length&gt; bool remove(const char (&amp;)[length]) = delete;
182 
183     const CommonHeadersVector&amp; commonHeaders() const { return m_commonHeaders; }
184     const UncommonHeadersVector&amp; uncommonHeaders() const { return m_uncommonHeaders; }
185     CommonHeadersVector&amp; commonHeaders() { return m_commonHeaders; }
186     UncommonHeadersVector&amp; uncommonHeaders() { return m_uncommonHeaders; }
187 
188     const_iterator begin() const { return const_iterator(*this, m_commonHeaders.begin(), m_uncommonHeaders.begin()); }
189     const_iterator end() const { return const_iterator(*this, m_commonHeaders.end(), m_uncommonHeaders.end()); }
190 
191     friend bool operator==(const HTTPHeaderMap&amp; a, const HTTPHeaderMap&amp; b)
192     {
<span class="line-modified">193         if (a.m_commonHeaders.size() != b.m_commonHeaders.size() || a.m_uncommonHeaders.size() != b.m_uncommonHeaders.size())</span>
<span class="line-added">194             return false;</span>
<span class="line-added">195         for (auto&amp; commonHeader : a.m_commonHeaders) {</span>
<span class="line-added">196             if (b.get(commonHeader.key) != commonHeader.value)</span>
<span class="line-added">197                 return false;</span>
<span class="line-added">198         }</span>
<span class="line-added">199         for (auto&amp; uncommonHeader : a.m_uncommonHeaders) {</span>
<span class="line-added">200             if (b.getUncommonHeader(uncommonHeader.key) != uncommonHeader.value)</span>
<span class="line-added">201                 return false;</span>
<span class="line-added">202         }</span>
<span class="line-added">203         return true;</span>
204     }
205 
206     friend bool operator!=(const HTTPHeaderMap&amp; a, const HTTPHeaderMap&amp; b)
207     {
208         return !(a == b);
209     }
210 
211     template &lt;class Encoder&gt; void encode(Encoder&amp;) const;
212     template &lt;class Decoder&gt; static bool decode(Decoder&amp;, HTTPHeaderMap&amp;);
213 
214 private:
215     void setUncommonHeader(const String&amp; name, const String&amp; value);
<span class="line-added">216     WEBCORE_EXPORT String getUncommonHeader(const String&amp; name) const;</span>
217 
218     CommonHeadersVector m_commonHeaders;
219     UncommonHeadersVector m_uncommonHeaders;
220 };
221 
222 template &lt;class Encoder&gt;
223 void HTTPHeaderMap::CommonHeader::encode(Encoder&amp; encoder) const
224 {
225     encoder.encodeEnum(key);
226     encoder &lt;&lt; value;
227 }
228 
229 template &lt;class Decoder&gt;
230 auto HTTPHeaderMap::CommonHeader::decode(Decoder&amp; decoder) -&gt; Optional&lt;CommonHeader&gt;
231 {
232     HTTPHeaderName name;
233     if (!decoder.decodeEnum(name))
234         return WTF::nullopt;
235     String value;
236     if (!decoder.decode(value))
</pre>
</td>
</tr>
</table>
<center><a href="HTTPHeaderMap.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="HTTPHeaderNames.in.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>