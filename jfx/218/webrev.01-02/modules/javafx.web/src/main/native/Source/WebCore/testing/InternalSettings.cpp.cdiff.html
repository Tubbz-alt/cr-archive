<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/testing/InternalSettings.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../svg/properties/SVGValuePropertyListAnimatorImpl.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="InternalSettings.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/testing/InternalSettings.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 96,11 ***</span>
<span class="line-new-header">--- 96,13 ---</span>
      , m_deferredCSSParserEnabled(settings.deferredCSSParserEnabled())
      , m_inputEventsEnabled(settings.inputEventsEnabled())
      , m_incompleteImageBorderEnabled(settings.incompleteImageBorderEnabled())
      , m_shouldDispatchSyntheticMouseEventsWhenModifyingSelection(settings.shouldDispatchSyntheticMouseEventsWhenModifyingSelection())
      , m_shouldDispatchSyntheticMouseOutAfterSyntheticClick(settings.shouldDispatchSyntheticMouseOutAfterSyntheticClick())
<span class="line-added">+ #if ENABLE(VIDEO) || ENABLE(WEB_AUDIO)</span>
      , m_shouldDeactivateAudioSession(PlatformMediaSessionManager::shouldDeactivateAudioSession())
<span class="line-added">+ #endif</span>
      , m_animatedImageDebugCanvasDrawingEnabled(settings.animatedImageDebugCanvasDrawingEnabled())
      , m_userInterfaceDirectionPolicy(settings.userInterfaceDirectionPolicy())
      , m_systemLayoutDirection(settings.systemLayoutDirection())
      , m_pdfImageCachingPolicy(settings.pdfImageCachingPolicy())
      , m_forcedColorsAreInvertedAccessibilityValue(settings.forcedColorsAreInvertedAccessibilityValue())
</pre>
<hr />
<pre>
<span class="line-old-header">*** 112,11 ***</span>
      , m_indexedDBWorkersEnabled(RuntimeEnabledFeatures::sharedFeatures().indexedDBWorkersEnabled())
  #endif
  #if ENABLE(WEBGL2)
      , m_webGL2Enabled(RuntimeEnabledFeatures::sharedFeatures().webGL2Enabled())
  #endif
<span class="line-removed">-     , m_webVREnabled(RuntimeEnabledFeatures::sharedFeatures().webVREnabled())</span>
  #if ENABLE(MEDIA_STREAM)
      , m_setScreenCaptureEnabled(RuntimeEnabledFeatures::sharedFeatures().screenCaptureEnabled())
  #endif
      , m_shouldMockBoldSystemFontForAccessibility(RenderTheme::singleton().shouldMockBoldSystemFontForAccessibility())
  #if USE(AUDIO_SESSION)
<span class="line-new-header">--- 114,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 199,27 ***</span>
      settings.setPdfImageCachingPolicy(m_pdfImageCachingPolicy);
      settings.setForcedColorsAreInvertedAccessibilityValue(m_forcedColorsAreInvertedAccessibilityValue);
      settings.setForcedDisplayIsMonochromeAccessibilityValue(m_forcedDisplayIsMonochromeAccessibilityValue);
      settings.setForcedPrefersReducedMotionAccessibilityValue(m_forcedPrefersReducedMotionAccessibilityValue);
      settings.setFontLoadTimingOverride(m_fontLoadTimingOverride);
<span class="line-removed">-     DeprecatedGlobalSettings::setAllowsAnySSLCertificate(false);</span>
      RenderTheme::singleton().setShouldMockBoldSystemFontForAccessibility(m_shouldMockBoldSystemFontForAccessibility);
      FontCache::singleton().setShouldMockBoldSystemFontForAccessibility(m_shouldMockBoldSystemFontForAccessibility);
      settings.setFrameFlattening(m_frameFlattening);
      settings.setIncompleteImageBorderEnabled(m_incompleteImageBorderEnabled);
      settings.setShouldDispatchSyntheticMouseEventsWhenModifyingSelection(m_shouldDispatchSyntheticMouseEventsWhenModifyingSelection);
      settings.setShouldDispatchSyntheticMouseOutAfterSyntheticClick(m_shouldDispatchSyntheticMouseOutAfterSyntheticClick);
      PlatformMediaSessionManager::setShouldDeactivateAudioSession(m_shouldDeactivateAudioSession);
      settings.setAnimatedImageDebugCanvasDrawingEnabled(m_animatedImageDebugCanvasDrawingEnabled);
  
  #if ENABLE(INDEXED_DATABASE_IN_WORKERS)
      RuntimeEnabledFeatures::sharedFeatures().setIndexedDBWorkersEnabled(m_indexedDBWorkersEnabled);
  #endif
  #if ENABLE(WEBGL2)
      RuntimeEnabledFeatures::sharedFeatures().setWebGL2Enabled(m_webGL2Enabled);
  #endif
<span class="line-removed">-     RuntimeEnabledFeatures::sharedFeatures().setWebVREnabled(m_webVREnabled);</span>
  #if ENABLE(MEDIA_STREAM)
      RuntimeEnabledFeatures::sharedFeatures().setScreenCaptureEnabled(m_setScreenCaptureEnabled);
  #endif
      RuntimeEnabledFeatures::sharedFeatures().setCustomPasteboardDataEnabled(m_customPasteboardDataEnabled);
  
<span class="line-new-header">--- 200,27 ---</span>
      settings.setPdfImageCachingPolicy(m_pdfImageCachingPolicy);
      settings.setForcedColorsAreInvertedAccessibilityValue(m_forcedColorsAreInvertedAccessibilityValue);
      settings.setForcedDisplayIsMonochromeAccessibilityValue(m_forcedDisplayIsMonochromeAccessibilityValue);
      settings.setForcedPrefersReducedMotionAccessibilityValue(m_forcedPrefersReducedMotionAccessibilityValue);
      settings.setFontLoadTimingOverride(m_fontLoadTimingOverride);
      RenderTheme::singleton().setShouldMockBoldSystemFontForAccessibility(m_shouldMockBoldSystemFontForAccessibility);
      FontCache::singleton().setShouldMockBoldSystemFontForAccessibility(m_shouldMockBoldSystemFontForAccessibility);
      settings.setFrameFlattening(m_frameFlattening);
      settings.setIncompleteImageBorderEnabled(m_incompleteImageBorderEnabled);
      settings.setShouldDispatchSyntheticMouseEventsWhenModifyingSelection(m_shouldDispatchSyntheticMouseEventsWhenModifyingSelection);
      settings.setShouldDispatchSyntheticMouseOutAfterSyntheticClick(m_shouldDispatchSyntheticMouseOutAfterSyntheticClick);
<span class="line-added">+ #if ENABLE(VIDEO) || ENABLE(WEB_AUDIO)</span>
      PlatformMediaSessionManager::setShouldDeactivateAudioSession(m_shouldDeactivateAudioSession);
<span class="line-added">+ #endif</span>
      settings.setAnimatedImageDebugCanvasDrawingEnabled(m_animatedImageDebugCanvasDrawingEnabled);
  
  #if ENABLE(INDEXED_DATABASE_IN_WORKERS)
      RuntimeEnabledFeatures::sharedFeatures().setIndexedDBWorkersEnabled(m_indexedDBWorkersEnabled);
  #endif
  #if ENABLE(WEBGL2)
      RuntimeEnabledFeatures::sharedFeatures().setWebGL2Enabled(m_webGL2Enabled);
  #endif
  #if ENABLE(MEDIA_STREAM)
      RuntimeEnabledFeatures::sharedFeatures().setScreenCaptureEnabled(m_setScreenCaptureEnabled);
  #endif
      RuntimeEnabledFeatures::sharedFeatures().setCustomPasteboardDataEnabled(m_customPasteboardDataEnabled);
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 232,11 ***</span>
      WTF_MAKE_FAST_ALLOCATED;
  public:
      explicit InternalSettingsWrapper(Page* page)
          : m_internalSettings(InternalSettings::create(page)) { }
      virtual ~InternalSettingsWrapper() { m_internalSettings-&gt;hostDestroyed(); }
<span class="line-modified">! #if !ASSERT_DISABLED</span>
      bool isRefCountedWrapper() const override { return true; }
  #endif
      InternalSettings* internalSettings() const { return m_internalSettings.get(); }
  
  private:
<span class="line-new-header">--- 233,11 ---</span>
      WTF_MAKE_FAST_ALLOCATED;
  public:
      explicit InternalSettingsWrapper(Page* page)
          : m_internalSettings(InternalSettings::create(page)) { }
      virtual ~InternalSettingsWrapper() { m_internalSettings-&gt;hostDestroyed(); }
<span class="line-modified">! #if ASSERT_ENABLED</span>
      bool isRefCountedWrapper() const override { return true; }
  #endif
      InternalSettings* internalSettings() const { return m_internalSettings.get(); }
  
  private:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 797,15 ***</span>
  #else
      UNUSED_PARAM(enabled);
  #endif
  }
  
<span class="line-removed">- void InternalSettings::setWebVREnabled(bool enabled)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     RuntimeEnabledFeatures::sharedFeatures().setWebVREnabled(enabled);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  void InternalSettings::setScreenCaptureEnabled(bool enabled)
  {
  #if ENABLE(MEDIA_STREAM)
      RuntimeEnabledFeatures::sharedFeatures().setScreenCaptureEnabled(enabled);
  #else
<span class="line-new-header">--- 798,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1001,18 ***</span>
<span class="line-new-header">--- 997,30 ---</span>
  void InternalSettings::setForcedPrefersReducedMotionAccessibilityValue(InternalSettings::ForcedAccessibilityValue value)
  {
      settings().setForcedPrefersReducedMotionAccessibilityValue(internalSettingsToSettingsValue(value));
  }
  
<span class="line-added">+ InternalSettings::ForcedAccessibilityValue InternalSettings::forcedSupportsHighDynamicRangeValue() const</span>
<span class="line-added">+ {</span>
<span class="line-added">+     return settingsToInternalSettingsValue(settings().forcedSupportsHighDynamicRangeValue());</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ void InternalSettings::setForcedSupportsHighDynamicRangeValue(InternalSettings::ForcedAccessibilityValue value)</span>
<span class="line-added">+ {</span>
<span class="line-added">+     settings().setForcedSupportsHighDynamicRangeValue(internalSettingsToSettingsValue(value));</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
  bool InternalSettings::webAnimationsCSSIntegrationEnabled()
  {
      return RuntimeEnabledFeatures::sharedFeatures().webAnimationsCSSIntegrationEnabled();
  }
  
  void InternalSettings::setShouldDeactivateAudioSession(bool should)
  {
<span class="line-added">+ #if ENABLE(VIDEO) || ENABLE(WEB_AUDIO)</span>
      PlatformMediaSessionManager::setShouldDeactivateAudioSession(should);
<span class="line-added">+ #endif</span>
  }
  
  // If you add to this class, make sure that you update the Backup class for test reproducability!
  
  }
</pre>
<center><a href="../svg/properties/SVGValuePropertyListAnimatorImpl.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="InternalSettings.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>