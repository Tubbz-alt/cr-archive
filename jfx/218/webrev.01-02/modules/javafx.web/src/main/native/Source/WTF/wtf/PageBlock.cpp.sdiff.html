<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WTF/wtf/PageBlock.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Packed.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="PageBlock.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WTF/wtf/PageBlock.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
27 #include &lt;wtf/PageBlock.h&gt;
28 
29 #if OS(UNIX)
30 #include &lt;unistd.h&gt;
31 #endif
32 
33 #if OS(WINDOWS)
34 #include &lt;malloc.h&gt;
35 #include &lt;windows.h&gt;
36 #endif
37 
38 namespace WTF {
39 
40 static size_t s_pageSize;
41 static size_t s_pageMask;
42 
43 #if OS(UNIX)
44 
45 inline size_t systemPageSize()
46 {
<span class="line-modified">47     return getpagesize();</span>
48 }
49 
50 #elif OS(WINDOWS)
51 
52 inline size_t systemPageSize()
53 {
54     static size_t size = 0;
55     SYSTEM_INFO system_info;
56     GetSystemInfo(&amp;system_info);
57     size = system_info.dwPageSize;
58     return size;
59 }
60 
61 #endif
62 
63 size_t pageSize()
64 {
<span class="line-modified">65     if (!s_pageSize)</span>
66         s_pageSize = systemPageSize();
<span class="line-modified">67     ASSERT(isPowerOfTwo(s_pageSize));</span>


68     return s_pageSize;
69 }
70 
71 size_t pageMask()
72 {
73     if (!s_pageMask)
74         s_pageMask = ~(pageSize() - 1);
75     return s_pageMask;
76 }
77 
78 } // namespace WTF
</pre>
</td>
<td>
<hr />
<pre>
27 #include &lt;wtf/PageBlock.h&gt;
28 
29 #if OS(UNIX)
30 #include &lt;unistd.h&gt;
31 #endif
32 
33 #if OS(WINDOWS)
34 #include &lt;malloc.h&gt;
35 #include &lt;windows.h&gt;
36 #endif
37 
38 namespace WTF {
39 
40 static size_t s_pageSize;
41 static size_t s_pageMask;
42 
43 #if OS(UNIX)
44 
45 inline size_t systemPageSize()
46 {
<span class="line-modified">47     return sysconf(_SC_PAGESIZE);</span>
48 }
49 
50 #elif OS(WINDOWS)
51 
52 inline size_t systemPageSize()
53 {
54     static size_t size = 0;
55     SYSTEM_INFO system_info;
56     GetSystemInfo(&amp;system_info);
57     size = system_info.dwPageSize;
58     return size;
59 }
60 
61 #endif
62 
63 size_t pageSize()
64 {
<span class="line-modified">65     if (!s_pageSize) {</span>
66         s_pageSize = systemPageSize();
<span class="line-modified">67         RELEASE_ASSERT(isPowerOfTwo(s_pageSize));</span>
<span class="line-added">68         RELEASE_ASSERT_WITH_MESSAGE(s_pageSize &lt;= CeilingOnPageSize, &quot;CeilingOnPageSize is too low, raise it in PageBlock.h!&quot;);</span>
<span class="line-added">69     }</span>
70     return s_pageSize;
71 }
72 
73 size_t pageMask()
74 {
75     if (!s_pageMask)
76         s_pageMask = ~(pageSize() - 1);
77     return s_pageMask;
78 }
79 
80 } // namespace WTF
</pre>
</td>
</tr>
</table>
<center><a href="Packed.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="PageBlock.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>