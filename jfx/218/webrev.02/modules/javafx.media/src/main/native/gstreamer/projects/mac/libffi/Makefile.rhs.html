<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.media/src/main/native/gstreamer/projects/mac/libffi/Makefile</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre> 1 #
 2 # MacOS libffi Makefile
 3 #
 4 
 5 BUILD_DIR = $(OUTPUT_DIR)/$(BUILD_TYPE)
 6 TARGET_DIRS = $(BUILD_DIR)
 7 
 8 SRCBASE_DIR = ../../../3rd_party/libffi
 9 OBJBASE_DIR = $(BUILD_DIR)/obj/libffi
10 
11 DIRLIST = src src/x86
12 
13 TARGET_NAME = lib$(BASE_NAME).a
14 TARGET = $(BUILD_DIR)/$(TARGET_NAME)
15 
16 CFLAGS += -c \
17          -Werror=implicit-function-declaration \
18          -fPIC \
<a name="1" id="anc1"></a><span class="line-modified">19          -DGSTREAMER_LITE \</span>
<span class="line-added">20          -DX86_64</span>
21 
22 ifeq ($(BUILD_TYPE), Release)
23     CFLAGS += -Os
24 else
25     CFLAGS += -O0 -g -Wall
26 endif
27 
<a name="2" id="anc2"></a><span class="line-modified">28 INCLUDES = -I$(SRCBASE_DIR)/include -I$(SRCBASE_DIR)/include/mac/x64</span>
29 
30 C_SOURCES = src/closures.c \
<a name="3" id="anc3"></a><span class="line-modified">31 	   src/java_raw_api.c \</span>
<span class="line-modified">32 	   src/prep_cif.c \</span>
<span class="line-modified">33 	   src/raw_api.c \</span>
<span class="line-modified">34 	   src/types.c \</span>
<span class="line-modified">35 	   src/x86/ffi64.c \</span>
<span class="line-modified">36             src/x86/ffiw64.c</span>
<span class="line-modified">37 </span>
<span class="line-added">38 ASM_SOURCES = src/x86/unix64.S \</span>
<span class="line-added">39               src/x86/win64.S</span>
40 
41 OBJ_DIRS = $(addprefix $(OBJBASE_DIR)/,$(DIRLIST))
42 OBJECTS  = $(patsubst %.c,$(OBJBASE_DIR)/%.o,$(C_SOURCES))\
43 	   $(patsubst %.S,$(OBJBASE_DIR)/%.o,$(ASM_SOURCES))
44 
45 .PHONY: default list
46 
47 default: $(TARGET)
48 
49 $(OBJBASE_DIR)/%.o: $(SRCBASE_DIR)/%.c
50 	$(CC) $(CFLAGS) $(INCLUDES) -c $&lt; -o $@
51 
52 $(OBJBASE_DIR)/%.o: $(SRCBASE_DIR)/%.S
53 	$(CC) $(CFLAGS) $(INCLUDES) -c $&lt; -o $@
54 
55 $(OBJECTS): | $(OBJ_DIRS) $(TARGET_DIRS)
56 
57 $(OBJ_DIRS):
58 	mkdir -p $(OBJ_DIRS)
59 
60 $(TARGET_DIRS):
61 	mkdir -p $(TARGET_DIRS)
62 
63 $(TARGET): $(OBJECTS)
64 	$(AR) -static $(OBJECTS) -arch_only x86_64 -o $@
<a name="4" id="anc4"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="4" type="hidden" />
</body>
</html>