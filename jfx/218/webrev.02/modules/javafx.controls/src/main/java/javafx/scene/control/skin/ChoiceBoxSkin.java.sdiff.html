<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/main/java/javafx/scene/control/skin/ChoiceBoxSkin.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ButtonSkin.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="ListViewSkin.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.controls/src/main/java/javafx/scene/control/skin/ChoiceBoxSkin.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
189         registerChangeListener(control.converterProperty(), e -&gt; {
190             updateChoiceBoxItems();
191             updatePopupItems();
192             updateLabelText();
193         });
194         registerChangeListener(control.valueProperty(), e -&gt; {
195             updateLabelText();
196         });
197     }
198 
199 
200 
201     /***************************************************************************
202      *                                                                         *
203      * Public API                                                              *
204      *                                                                         *
205      **************************************************************************/
206 
207     /** {@inheritDoc} */
208     @Override public void dispose() {











209         super.dispose();
210 
211         if (behavior != null) {
212             behavior.dispose();
213         }
214     }
215 
216     /** {@inheritDoc} */
217     @Override protected void layoutChildren(final double x, final double y,
218                                             final double w, final double h) {
219         // open button width/height
220         double obw = openButton.prefWidth(-1);
221 
222         label.resizeRelocate(x, y, w, h);
223         openButton.resize(obw, openButton.prefHeight(-1));
224         positionInArea(openButton, (x+w) - obw,
225                 y, obw, h, /*baseline ignored*/0, HPos.CENTER, VPos.CENTER);
226     }
227 
228     /** {@inheritDoc} */
</pre>
</td>
<td>
<hr />
<pre>
189         registerChangeListener(control.converterProperty(), e -&gt; {
190             updateChoiceBoxItems();
191             updatePopupItems();
192             updateLabelText();
193         });
194         registerChangeListener(control.valueProperty(), e -&gt; {
195             updateLabelText();
196         });
197     }
198 
199 
200 
201     /***************************************************************************
202      *                                                                         *
203      * Public API                                                              *
204      *                                                                         *
205      **************************************************************************/
206 
207     /** {@inheritDoc} */
208     @Override public void dispose() {
<span class="line-added">209          // removing the content listener fixes NPE from listener</span>
<span class="line-added">210         if (choiceBoxItems != null) {</span>
<span class="line-added">211             choiceBoxItems.removeListener(weakChoiceBoxItemsListener);</span>
<span class="line-added">212             choiceBoxItems = null;</span>
<span class="line-added">213         }</span>
<span class="line-added">214         // removing the path listener fixes the memory leak on replacing skin</span>
<span class="line-added">215         if (selectionModel != null) {</span>
<span class="line-added">216             selectionModel.selectedIndexProperty().removeListener(selectionChangeListener);</span>
<span class="line-added">217             selectionModel = null;</span>
<span class="line-added">218         }</span>
<span class="line-added">219 </span>
220         super.dispose();
221 
222         if (behavior != null) {
223             behavior.dispose();
224         }
225     }
226 
227     /** {@inheritDoc} */
228     @Override protected void layoutChildren(final double x, final double y,
229                                             final double w, final double h) {
230         // open button width/height
231         double obw = openButton.prefWidth(-1);
232 
233         label.resizeRelocate(x, y, w, h);
234         openButton.resize(obw, openButton.prefHeight(-1));
235         positionInArea(openButton, (x+w) - obw,
236                 y, obw, h, /*baseline ignored*/0, HPos.CENTER, VPos.CENTER);
237     }
238 
239     /** {@inheritDoc} */
</pre>
</td>
</tr>
</table>
<center><a href="ButtonSkin.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="ListViewSkin.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>