<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/java/com/sun/javafx/webkit/drt/UIClientImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DumpRenderTree.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../webkit/WebPage.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/java/com/sun/javafx/webkit/drt/UIClientImpl.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 62     {
 63         UIClientImpl client = new UIClientImpl();
 64         final WebPage page = new WebPage(null, client, null, null, new DumpRenderTree.ThemeClientImplStub(), false);
 65         client.setWebPage(page);
 66 
 67         page.setBounds(0, 0, 800, 600);
 68 //        webPage.setUsePageCache(true);
 69 
 70         page.addLoadListenerClient(new LoadListenerClient() {
 71             @Override
 72             public void dispatchLoadEvent(long frame, int state, String url, String contentType, double progress, int errorCode) {
 73                 if (state == DOCUMENT_AVAILABLE) {
 74                     DumpRenderTree.drt.dumpUnloadListeners(page, frame);
 75                 }
 76             }
 77             @Override
 78             public void dispatchResourceLoadEvent(long frame, int state, String url, String contentType, double progress, int errorCode) {
 79             }
 80         });
 81 


 82         // This call is needed to add the main frame to WebPage.frames list.
 83         // TODO: investigate why it&#39;s not added automatically (via WebPage.fwkFrameCreated) and fix.
 84         page.getMainFrame();
 85 
 86         clients.add(client);
 87         return client.webPage;
 88     }
 89 
 90     /**
 91      * {@inheritDoc}
 92      */
 93     @Override
 94     public void closePage() {
 95         Iterator&lt;UIClient&gt; it = clients.iterator();
 96         while (it.hasNext()) {
 97             it.next().closePage();
 98             it.remove();
 99         }
100         if (webPage.getMainFrame() != 0) {
101             webPage.dispose();
</pre>
</td>
<td>
<hr />
<pre>
 62     {
 63         UIClientImpl client = new UIClientImpl();
 64         final WebPage page = new WebPage(null, client, null, null, new DumpRenderTree.ThemeClientImplStub(), false);
 65         client.setWebPage(page);
 66 
 67         page.setBounds(0, 0, 800, 600);
 68 //        webPage.setUsePageCache(true);
 69 
 70         page.addLoadListenerClient(new LoadListenerClient() {
 71             @Override
 72             public void dispatchLoadEvent(long frame, int state, String url, String contentType, double progress, int errorCode) {
 73                 if (state == DOCUMENT_AVAILABLE) {
 74                     DumpRenderTree.drt.dumpUnloadListeners(page, frame);
 75                 }
 76             }
 77             @Override
 78             public void dispatchResourceLoadEvent(long frame, int state, String url, String contentType, double progress, int errorCode) {
 79             }
 80         });
 81 
<span class="line-added"> 82         page.resetToConsistentStateBeforeTesting();</span>
<span class="line-added"> 83 </span>
 84         // This call is needed to add the main frame to WebPage.frames list.
 85         // TODO: investigate why it&#39;s not added automatically (via WebPage.fwkFrameCreated) and fix.
 86         page.getMainFrame();
 87 
 88         clients.add(client);
 89         return client.webPage;
 90     }
 91 
 92     /**
 93      * {@inheritDoc}
 94      */
 95     @Override
 96     public void closePage() {
 97         Iterator&lt;UIClient&gt; it = clients.iterator();
 98         while (it.hasNext()) {
 99             it.next().closePage();
100             it.remove();
101         }
102         if (webPage.getMainFrame() != 0) {
103             webPage.dispose();
</pre>
</td>
</tr>
</table>
<center><a href="DumpRenderTree.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../webkit/WebPage.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>