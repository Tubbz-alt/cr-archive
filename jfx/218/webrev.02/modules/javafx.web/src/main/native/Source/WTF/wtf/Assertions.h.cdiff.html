<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WTF/wtf/Assertions.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Assertions.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="AutomaticThread.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WTF/wtf/Assertions.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 62,43 ***</span>
  #endif
  #include &lt;intrin.h&gt;
  #endif
  #endif
  
<span class="line-modified">! #ifdef NDEBUG</span>
<span class="line-removed">- /* Disable ASSERT* macros in release mode. */</span>
<span class="line-removed">- #define ASSERTIONS_DISABLED_DEFAULT 1</span>
<span class="line-removed">- #else</span>
<span class="line-removed">- #define ASSERTIONS_DISABLED_DEFAULT 0</span>
<span class="line-removed">- #endif</span>
  
  #ifndef BACKTRACE_DISABLED
<span class="line-modified">! #define BACKTRACE_DISABLED ASSERTIONS_DISABLED_DEFAULT</span>
<span class="line-removed">- #endif</span>
<span class="line-removed">- </span>
<span class="line-removed">- #ifndef ASSERT_DISABLED</span>
<span class="line-removed">- #define ASSERT_DISABLED ASSERTIONS_DISABLED_DEFAULT</span>
  #endif
  
  #ifndef ASSERT_MSG_DISABLED
<span class="line-modified">! #define ASSERT_MSG_DISABLED ASSERTIONS_DISABLED_DEFAULT</span>
  #endif
  
  #ifndef ASSERT_ARG_DISABLED
<span class="line-modified">! #define ASSERT_ARG_DISABLED ASSERTIONS_DISABLED_DEFAULT</span>
  #endif
  
  #ifndef FATAL_DISABLED
<span class="line-modified">! #define FATAL_DISABLED ASSERTIONS_DISABLED_DEFAULT</span>
  #endif
  
  #ifndef ERROR_DISABLED
<span class="line-modified">! #define ERROR_DISABLED ASSERTIONS_DISABLED_DEFAULT</span>
  #endif
  
  #ifndef LOG_DISABLED
<span class="line-modified">! #define LOG_DISABLED ASSERTIONS_DISABLED_DEFAULT</span>
  #endif
  
  #ifndef RELEASE_LOG_DISABLED
  #define RELEASE_LOG_DISABLED !(USE(OS_LOG))
  #endif
<span class="line-new-header">--- 62,34 ---</span>
  #endif
  #include &lt;intrin.h&gt;
  #endif
  #endif
  
<span class="line-modified">! /* ASSERT_ENABLED is defined in Platform.h. */</span>
  
  #ifndef BACKTRACE_DISABLED
<span class="line-modified">! #define BACKTRACE_DISABLED !ASSERT_ENABLED</span>
  #endif
  
  #ifndef ASSERT_MSG_DISABLED
<span class="line-modified">! #define ASSERT_MSG_DISABLED !ASSERT_ENABLED</span>
  #endif
  
  #ifndef ASSERT_ARG_DISABLED
<span class="line-modified">! #define ASSERT_ARG_DISABLED !ASSERT_ENABLED</span>
  #endif
  
  #ifndef FATAL_DISABLED
<span class="line-modified">! #define FATAL_DISABLED !ASSERT_ENABLED</span>
  #endif
  
  #ifndef ERROR_DISABLED
<span class="line-modified">! #define ERROR_DISABLED !ASSERT_ENABLED</span>
  #endif
  
  #ifndef LOG_DISABLED
<span class="line-modified">! #define LOG_DISABLED !ASSERT_ENABLED</span>
  #endif
  
  #ifndef RELEASE_LOG_DISABLED
  #define RELEASE_LOG_DISABLED !(USE(OS_LOG))
  #endif
</pre>
<hr />
<pre>
<span class="line-old-header">*** 300,11 ***</span>
  #if OS(WINDOWS)
  /* FIXME: Change to use something other than ASSERT to avoid this conflict with the underlying platform */
  #undef ASSERT
  #endif
  
<span class="line-modified">! #if ASSERT_DISABLED</span>
  
  #define ASSERT(assertion, ...) ((void)0)
  #define ASSERT_UNDER_CONSTEXPR_CONTEXT(assertion) ((void)0)
  #define ASSERT_AT(assertion, file, line, function) ((void)0)
  #define ASSERT_NOT_REACHED(...) ((void)0)
<span class="line-new-header">--- 291,11 ---</span>
  #if OS(WINDOWS)
  /* FIXME: Change to use something other than ASSERT to avoid this conflict with the underlying platform */
  #undef ASSERT
  #endif
  
<span class="line-modified">! #if !ASSERT_ENABLED</span>
  
  #define ASSERT(assertion, ...) ((void)0)
  #define ASSERT_UNDER_CONSTEXPR_CONTEXT(assertion) ((void)0)
  #define ASSERT_AT(assertion, file, line, function) ((void)0)
  #define ASSERT_NOT_REACHED(...) ((void)0)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 320,16 ***</span>
          (WTFReportAssertionFailure(__FILE__, __LINE__, WTF_PRETTY_FUNCTION, #assertion), \
           CRASH_WITH_SECURITY_IMPLICATION()) : \
          (void)0)
  
  #define ASSERT_WITH_SECURITY_IMPLICATION_DISABLED 0
<span class="line-modified">! #else</span>
  #define ASSERT_WITH_SECURITY_IMPLICATION(assertion) ((void)0)
  #define ASSERT_WITH_SECURITY_IMPLICATION_DISABLED 1
<span class="line-modified">! #endif</span>
  
<span class="line-modified">! #else</span>
  
  #define ASSERT(assertion, ...) do { \
      if (!(assertion)) { \
          WTFReportAssertionFailure(__FILE__, __LINE__, WTF_PRETTY_FUNCTION, #assertion); \
          CRASH_WITH_INFO(__VA_ARGS__); \
<span class="line-new-header">--- 311,16 ---</span>
          (WTFReportAssertionFailure(__FILE__, __LINE__, WTF_PRETTY_FUNCTION, #assertion), \
           CRASH_WITH_SECURITY_IMPLICATION()) : \
          (void)0)
  
  #define ASSERT_WITH_SECURITY_IMPLICATION_DISABLED 0
<span class="line-modified">! #else /* not ENABLE(SECURITY_ASSERTIONS) */</span>
  #define ASSERT_WITH_SECURITY_IMPLICATION(assertion) ((void)0)
  #define ASSERT_WITH_SECURITY_IMPLICATION_DISABLED 1
<span class="line-modified">! #endif /* ENABLE(SECURITY_ASSERTIONS) */</span>
  
<span class="line-modified">! #else /* ASSERT_ENABLED */</span>
  
  #define ASSERT(assertion, ...) do { \
      if (!(assertion)) { \
          WTFReportAssertionFailure(__FILE__, __LINE__, WTF_PRETTY_FUNCTION, #assertion); \
          CRASH_WITH_INFO(__VA_ARGS__); \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 383,11 ***</span>
      (!(assertion) ? \
          (WTFReportAssertionFailure(__FILE__, __LINE__, WTF_PRETTY_FUNCTION, #assertion), \
           CRASH_WITH_SECURITY_IMPLICATION()) : \
          (void)0)
  #define ASSERT_WITH_SECURITY_IMPLICATION_DISABLED 0
<span class="line-modified">! #endif</span>
  
  /* ASSERT_WITH_MESSAGE */
  
  #if ASSERT_MSG_DISABLED
  #define ASSERT_WITH_MESSAGE(assertion, ...) ((void)0)
<span class="line-new-header">--- 374,12 ---</span>
      (!(assertion) ? \
          (WTFReportAssertionFailure(__FILE__, __LINE__, WTF_PRETTY_FUNCTION, #assertion), \
           CRASH_WITH_SECURITY_IMPLICATION()) : \
          (void)0)
  #define ASSERT_WITH_SECURITY_IMPLICATION_DISABLED 0
<span class="line-modified">! </span>
<span class="line-added">+ #endif /* ASSERT_ENABLED */</span>
  
  /* ASSERT_WITH_MESSAGE */
  
  #if ASSERT_MSG_DISABLED
  #define ASSERT_WITH_MESSAGE(assertion, ...) ((void)0)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 398,10 ***</span>
<span class="line-new-header">--- 390,15 ---</span>
          CRASH(); \
      } \
  } while (0)
  #endif
  
<span class="line-added">+ #ifdef __cplusplus</span>
<span class="line-added">+ constexpr bool assertionFailureDueToUnreachableCode = false;</span>
<span class="line-added">+ #define ASSERT_NOT_REACHED_WITH_MESSAGE(...) ASSERT_WITH_MESSAGE(assertionFailureDueToUnreachableCode, __VA_ARGS__)</span>
<span class="line-added">+ #endif</span>
<span class="line-added">+ </span>
  /* ASSERT_WITH_MESSAGE_UNUSED */
  
  #if ASSERT_MSG_DISABLED
  #define ASSERT_WITH_MESSAGE_UNUSED(variable, assertion, ...) ((void)variable)
  #else
</pre>
<hr />
<pre>
<span class="line-old-header">*** 524,11 ***</span>
  #endif
  
  
  /* RELEASE_ASSERT */
  
<span class="line-modified">! #if ASSERT_DISABLED</span>
  #define RELEASE_ASSERT(assertion, ...) do { \
      if (UNLIKELY(!(assertion))) \
          CRASH_WITH_INFO(__VA_ARGS__); \
  } while (0)
  #define RELEASE_ASSERT_WITH_MESSAGE(assertion, ...) RELEASE_ASSERT(assertion)
<span class="line-new-header">--- 521,12 ---</span>
  #endif
  
  
  /* RELEASE_ASSERT */
  
<span class="line-modified">! #if !ASSERT_ENABLED</span>
<span class="line-added">+ </span>
  #define RELEASE_ASSERT(assertion, ...) do { \
      if (UNLIKELY(!(assertion))) \
          CRASH_WITH_INFO(__VA_ARGS__); \
  } while (0)
  #define RELEASE_ASSERT_WITH_MESSAGE(assertion, ...) RELEASE_ASSERT(assertion)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 537,19 ***</span>
  #define RELEASE_ASSERT_UNDER_CONSTEXPR_CONTEXT(assertion) do { \
      if (UNLIKELY(!(assertion))) { \
          CRASH_UNDER_CONSTEXPR_CONTEXT(); \
      } \
  } while (0)
<span class="line-modified">! #else</span>
  #define RELEASE_ASSERT(assertion, ...) ASSERT(assertion, __VA_ARGS__)
  #define RELEASE_ASSERT_WITH_MESSAGE(assertion, ...) ASSERT_WITH_MESSAGE(assertion, __VA_ARGS__)
  #define RELEASE_ASSERT_WITH_SECURITY_IMPLICATION(assertion) ASSERT_WITH_SECURITY_IMPLICATION(assertion)
  #define RELEASE_ASSERT_NOT_REACHED() ASSERT_NOT_REACHED()
  #define RELEASE_ASSERT_UNDER_CONSTEXPR_CONTEXT(assertion) ASSERT_UNDER_CONSTEXPR_CONTEXT(assertion)
<span class="line-modified">! #endif</span>
  
  #ifdef __cplusplus
  
  // The combination of line, file, function, and counter should be a unique number per call to this crash. This tricks the compiler into not coalescing calls to WTFCrashWithInfo.
  // The easiest way to fill these values per translation unit is to pass __LINE__, __FILE__, WTF_PRETTY_FUNCTION, and __COUNTER__.
  WTF_EXPORT_PRIVATE NO_RETURN_DUE_TO_CRASH NOT_TAIL_CALLED void WTFCrashWithInfoImpl(int line, const char* file, const char* function, int counter, uint64_t reason, uint64_t misc1, uint64_t misc2, uint64_t misc3, uint64_t misc4, uint64_t misc5, uint64_t misc6);
  WTF_EXPORT_PRIVATE NO_RETURN_DUE_TO_CRASH NOT_TAIL_CALLED void WTFCrashWithInfoImpl(int line, const char* file, const char* function, int counter, uint64_t reason, uint64_t misc1, uint64_t misc2, uint64_t misc3, uint64_t misc4, uint64_t misc5);
<span class="line-new-header">--- 535,23 ---</span>
  #define RELEASE_ASSERT_UNDER_CONSTEXPR_CONTEXT(assertion) do { \
      if (UNLIKELY(!(assertion))) { \
          CRASH_UNDER_CONSTEXPR_CONTEXT(); \
      } \
  } while (0)
<span class="line-modified">! </span>
<span class="line-added">+ #else /* ASSERT_ENABLED */</span>
<span class="line-added">+ </span>
  #define RELEASE_ASSERT(assertion, ...) ASSERT(assertion, __VA_ARGS__)
  #define RELEASE_ASSERT_WITH_MESSAGE(assertion, ...) ASSERT_WITH_MESSAGE(assertion, __VA_ARGS__)
  #define RELEASE_ASSERT_WITH_SECURITY_IMPLICATION(assertion) ASSERT_WITH_SECURITY_IMPLICATION(assertion)
  #define RELEASE_ASSERT_NOT_REACHED() ASSERT_NOT_REACHED()
  #define RELEASE_ASSERT_UNDER_CONSTEXPR_CONTEXT(assertion) ASSERT_UNDER_CONSTEXPR_CONTEXT(assertion)
<span class="line-modified">! </span>
<span class="line-added">+ #endif /* ASSERT_ENABLED */</span>
  
  #ifdef __cplusplus
<span class="line-added">+ #define RELEASE_ASSERT_NOT_REACHED_WITH_MESSAGE(...) RELEASE_ASSERT_WITH_MESSAGE(assertionFailureDueToUnreachableCode, __VA_ARGS__)</span>
  
  // The combination of line, file, function, and counter should be a unique number per call to this crash. This tricks the compiler into not coalescing calls to WTFCrashWithInfo.
  // The easiest way to fill these values per translation unit is to pass __LINE__, __FILE__, WTF_PRETTY_FUNCTION, and __COUNTER__.
  WTF_EXPORT_PRIVATE NO_RETURN_DUE_TO_CRASH NOT_TAIL_CALLED void WTFCrashWithInfoImpl(int line, const char* file, const char* function, int counter, uint64_t reason, uint64_t misc1, uint64_t misc2, uint64_t misc3, uint64_t misc4, uint64_t misc5, uint64_t misc6);
  WTF_EXPORT_PRIVATE NO_RETURN_DUE_TO_CRASH NOT_TAIL_CALLED void WTFCrashWithInfoImpl(int line, const char* file, const char* function, int counter, uint64_t reason, uint64_t misc1, uint64_t misc2, uint64_t misc3, uint64_t misc4, uint64_t misc5);
</pre>
<center><a href="Assertions.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="AutomaticThread.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>