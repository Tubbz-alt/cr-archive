<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/WebCore/inspector/InspectorInstrumentation.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>   1 /*
   2 * Copyright (C) 2010 Google Inc. All rights reserved.
   3 * Copyright (C) 2014-2016 Apple Inc. All rights reserved.
   4 *
   5 * Redistribution and use in source and binary forms, with or without
   6 * modification, are permitted provided that the following conditions are
   7 * met:
   8 *
   9 *     * Redistributions of source code must retain the above copyright
  10 * notice, this list of conditions and the following disclaimer.
  11 *     * Redistributions in binary form must reproduce the above
  12 * copyright notice, this list of conditions and the following disclaimer
  13 * in the documentation and/or other materials provided with the
  14 * distribution.
  15 *     * Neither the name of Google Inc. nor the names of its
  16 * contributors may be used to endorse or promote products derived from
  17 * this software without specific prior written permission.
  18 *
  19 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  20 * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
  21 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
  22 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
  23 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
  24 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  25 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  26 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
  27 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  28 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  29 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  30 */
  31 
  32 #pragma once
  33 
  34 #include &quot;CSSSelector.h&quot;
  35 #include &quot;CallTracerTypes.h&quot;
  36 #include &quot;CanvasBase.h&quot;
  37 #include &quot;CanvasRenderingContext.h&quot;
  38 #include &quot;Database.h&quot;
<a name="1" id="anc1"></a><span class="line-added">  39 #include &quot;DeclarativeAnimation.h&quot;</span>
  40 #include &quot;DocumentThreadableLoader.h&quot;
  41 #include &quot;Element.h&quot;
  42 #include &quot;EventTarget.h&quot;
  43 #include &quot;FormData.h&quot;
  44 #include &quot;Frame.h&quot;
  45 #include &quot;HitTestResult.h&quot;
<a name="2" id="anc2"></a><span class="line-modified">  46 #include &quot;InspectorInstrumentationPublic.h&quot;</span>


  47 #include &quot;Page.h&quot;
  48 #include &quot;StorageArea.h&quot;
<a name="3" id="anc3"></a><span class="line-modified">  49 #include &quot;WebAnimation.h&quot;</span>
<span class="line-modified">  50 #include &lt;JavaScriptCore/ConsoleMessage.h&gt;</span>

  51 #include &lt;initializer_list&gt;
<a name="4" id="anc4"></a><span class="line-added">  52 #include &lt;wtf/CompletionHandler.h&gt;</span>
  53 #include &lt;wtf/MemoryPressureHandler.h&gt;
  54 #include &lt;wtf/RefPtr.h&gt;
  55 
  56 #if ENABLE(WEBGL)
  57 #include &quot;WebGLRenderingContextBase.h&quot;
  58 #endif
  59 
<a name="5" id="anc5"></a><span class="line-added">  60 #if ENABLE(WEBGPU)</span>
<span class="line-added">  61 #include &quot;GPUCanvasContext.h&quot;</span>
<span class="line-added">  62 #include &quot;WebGPUPipeline.h&quot;</span>
<span class="line-added">  63 #endif</span>
<span class="line-added">  64 </span>
  65 namespace Inspector {
  66 class ConsoleMessage;
  67 class ScriptArguments;
  68 class ScriptCallStack;
  69 }
  70 
  71 namespace WebCore {
  72 
  73 class CachedResource;
  74 class CharacterData;
  75 class DOMWindow;
  76 class DOMWrapperWorld;
  77 class Document;
  78 class DocumentLoader;
  79 class EventListener;
  80 class HTTPHeaderMap;
  81 class InspectorTimelineAgent;
  82 class InstrumentingAgents;
<a name="6" id="anc6"></a><span class="line-added">  83 class KeyframeEffect;</span>
  84 class NetworkLoadMetrics;
  85 class Node;
  86 class PseudoElement;
  87 class RegisteredEventListener;
  88 class RenderLayer;
  89 class RenderObject;
  90 class ResourceLoader;
  91 class ResourceRequest;
  92 class ResourceResponse;
  93 class ScriptExecutionContext;
  94 class SecurityOrigin;
  95 class ShadowRoot;
<a name="7" id="anc7"></a><span class="line-added">  96 class SharedBuffer;</span>
  97 class TimerBase;
<a name="8" id="anc8"></a><span class="line-added">  98 class WebKitNamedFlow;</span>
<span class="line-added">  99 class WorkerGlobalScope;</span>
<span class="line-added"> 100 class WorkerInspectorProxy;</span>
<span class="line-added"> 101 </span>
 102 #if ENABLE(WEBGL)
 103 class WebGLProgram;
 104 #endif
<a name="9" id="anc9"></a>

 105 
<a name="10" id="anc10"></a><span class="line-modified"> 106 #if ENABLE(WEBGPU)</span>
<span class="line-added"> 107 class WebGPUDevice;</span>
<span class="line-added"> 108 class WebGPUSwapChain;</span>
<span class="line-added"> 109 #endif</span>
 110 
<a name="11" id="anc11"></a><span class="line-modified"> 111 enum class StorageType : uint8_t;</span>
 112 
<a name="12" id="anc12"></a><span class="line-modified"> 113 struct ComputedEffectTiming;</span>
<span class="line-added"> 114 struct WebSocketFrame;</span>
 115 
 116 class InspectorInstrumentation {
 117 public:
 118     static void didClearWindowObjectInWorld(Frame&amp;, DOMWrapperWorld&amp;);
 119     static bool isDebuggerPaused(Frame*);
 120 
 121     static int identifierForNode(Node&amp;);
 122     static void addEventListenersToNode(Node&amp;);
 123     static void willInsertDOMNode(Document&amp;, Node&amp; parent);
 124     static void didInsertDOMNode(Document&amp;, Node&amp;);
 125     static void willRemoveDOMNode(Document&amp;, Node&amp;);
 126     static void didRemoveDOMNode(Document&amp;, Node&amp;);
 127     static void willModifyDOMAttr(Document&amp;, Element&amp;, const AtomString&amp; oldValue, const AtomString&amp; newValue);
 128     static void didModifyDOMAttr(Document&amp;, Element&amp;, const AtomString&amp; name, const AtomString&amp; value);
 129     static void didRemoveDOMAttr(Document&amp;, Element&amp;, const AtomString&amp; name);
 130     static void characterDataModified(Document&amp;, CharacterData&amp;);
 131     static void willInvalidateStyleAttr(Element&amp;);
 132     static void didInvalidateStyleAttr(Element&amp;);
 133     static void documentDetached(Document&amp;);
 134     static void frameWindowDiscarded(Frame&amp;, DOMWindow*);
 135     static void mediaQueryResultChanged(Document&amp;);
 136     static void activeStyleSheetsUpdated(Document&amp;);
 137     static void didPushShadowRoot(Element&amp; host, ShadowRoot&amp;);
 138     static void willPopShadowRoot(Element&amp; host, ShadowRoot&amp;);
 139     static void didChangeCustomElementState(Element&amp;);
 140     static void pseudoElementCreated(Page*, PseudoElement&amp;);
 141     static void pseudoElementDestroyed(Page*, PseudoElement&amp;);
 142     static void didCreateNamedFlow(Document*, WebKitNamedFlow&amp;);
 143     static void willRemoveNamedFlow(Document*, WebKitNamedFlow&amp;);
 144     static void didChangeRegionOverset(Document&amp;, WebKitNamedFlow&amp;);
 145     static void didRegisterNamedFlowContentElement(Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement, Node* nextContentElement = nullptr);
 146     static void didUnregisterNamedFlowContentElement(Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement);
 147 
 148     static void mouseDidMoveOverElement(Page&amp;, const HitTestResult&amp;, unsigned modifierFlags);
 149     static bool handleMousePress(Frame&amp;);
 150     static bool handleTouchEvent(Frame&amp;, Node&amp;);
 151     static bool forcePseudoState(const Element&amp;, CSSSelector::PseudoClassType);
 152 
 153     static void willSendXMLHttpRequest(ScriptExecutionContext*, const String&amp; url);
 154     static void willFetch(ScriptExecutionContext&amp;, const String&amp; url);
 155     static void didInstallTimer(ScriptExecutionContext&amp;, int timerId, Seconds timeout, bool singleShot);
 156     static void didRemoveTimer(ScriptExecutionContext&amp;, int timerId);
 157 
<a name="13" id="anc13"></a><span class="line-modified"> 158     static void didPostMessage(Frame&amp;, TimerBase&amp;, JSC::JSGlobalObject&amp;);</span>
 159     static void didFailPostMessage(Frame&amp;, TimerBase&amp;);
 160     static void willDispatchPostMessage(Frame&amp;, TimerBase&amp;);
 161     static void didDispatchPostMessage(Frame&amp;, TimerBase&amp;);
 162 
<a name="14" id="anc14"></a><span class="line-modified"> 163     static void willCallFunction(ScriptExecutionContext*, const String&amp; scriptName, int scriptLine, int scriptColumn);</span>
<span class="line-modified"> 164     static void didCallFunction(ScriptExecutionContext*);</span>
 165     static void didAddEventListener(EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 166     static void willRemoveEventListener(EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 167     static bool isEventListenerDisabled(EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
<a name="15" id="anc15"></a><span class="line-modified"> 168     static void willDispatchEvent(Document&amp;, const Event&amp;);</span>
<span class="line-modified"> 169     static void didDispatchEvent(Document&amp;, const Event&amp;);</span>
 170     static void willHandleEvent(ScriptExecutionContext&amp;, Event&amp;, const RegisteredEventListener&amp;);
 171     static void didHandleEvent(ScriptExecutionContext&amp;);
<a name="16" id="anc16"></a><span class="line-modified"> 172     static void willDispatchEventOnWindow(Frame*, const Event&amp;, DOMWindow&amp;);</span>
<span class="line-modified"> 173     static void didDispatchEventOnWindow(Frame*, const Event&amp;);</span>
 174     static void eventDidResetAfterDispatch(const Event&amp;);
<a name="17" id="anc17"></a><span class="line-modified"> 175     static void willEvaluateScript(Frame&amp;, const String&amp; url, int lineNumber, int columnNumber);</span>
<span class="line-modified"> 176     static void didEvaluateScript(Frame&amp;);</span>
<span class="line-modified"> 177     static void willFireTimer(ScriptExecutionContext&amp;, int timerId, bool oneShot);</span>
<span class="line-modified"> 178     static void didFireTimer(ScriptExecutionContext&amp;);</span>
 179     static void didInvalidateLayout(Frame&amp;);
<a name="18" id="anc18"></a><span class="line-modified"> 180     static void willLayout(Frame&amp;);</span>
<span class="line-modified"> 181     static void didLayout(Frame&amp;, RenderObject&amp;);</span>
 182     static void didScroll(Page&amp;);
 183     static void willComposite(Frame&amp;);
 184     static void didComposite(Frame&amp;);
 185     static void willPaint(RenderObject&amp;);
 186     static void didPaint(RenderObject&amp;, const LayoutRect&amp;);
<a name="19" id="anc19"></a><span class="line-modified"> 187     static void willRecalculateStyle(Document&amp;);</span>
<span class="line-modified"> 188     static void didRecalculateStyle(Document&amp;);</span>
 189     static void didScheduleStyleRecalculation(Document&amp;);
 190     static void applyUserAgentOverride(Frame&amp;, String&amp;);
 191     static void applyEmulatedMedia(Frame&amp;, String&amp;);
 192 
 193     static void willSendRequest(Frame*, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, const ResourceResponse&amp; redirectResponse);
 194     static void didLoadResourceFromMemoryCache(Page&amp;, DocumentLoader*, CachedResource*);
 195     static void didReceiveResourceResponse(Frame&amp;, unsigned long identifier, DocumentLoader*, const ResourceResponse&amp;, ResourceLoader*);
 196     static void didReceiveThreadableLoaderResponse(DocumentThreadableLoader&amp;, unsigned long identifier);
 197     static void didReceiveData(Frame*, unsigned long identifier, const char* data, int dataLength, int encodedDataLength);
 198     static void didFinishLoading(Frame*, DocumentLoader*, unsigned long identifier, const NetworkLoadMetrics&amp;, ResourceLoader*);
 199     static void didFailLoading(Frame*, DocumentLoader*, unsigned long identifier, const ResourceError&amp;);
 200 
 201     static void willSendRequest(WorkerGlobalScope&amp;, unsigned long identifier, ResourceRequest&amp;);
 202     static void didReceiveResourceResponse(WorkerGlobalScope&amp;, unsigned long identifier, const ResourceResponse&amp;);
 203     static void didReceiveData(WorkerGlobalScope&amp;, unsigned long identifier, const char* data, int dataLength);
 204     static void didFinishLoading(WorkerGlobalScope&amp;, unsigned long identifier, const NetworkLoadMetrics&amp;);
 205     static void didFailLoading(WorkerGlobalScope&amp;, unsigned long identifier, const ResourceError&amp;);
 206 
 207     // Some network requests do not go through the normal network loading path.
 208     // These network requests have to issue their own willSendRequest / didReceiveResponse / didFinishLoading / didFailLoading
 209     // instrumentation calls. Some of these loads are for resources that lack a CachedResource::Type.
 210     enum class LoadType { Ping, Beacon };
 211     static void willSendRequestOfType(Frame*, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, LoadType);
 212 
 213     static void continueAfterXFrameOptionsDenied(Frame&amp;, unsigned long identifier, DocumentLoader&amp;, const ResourceResponse&amp;);
 214     static void continueWithPolicyDownload(Frame&amp;, unsigned long identifier, DocumentLoader&amp;, const ResourceResponse&amp;);
 215     static void continueWithPolicyIgnore(Frame&amp;, unsigned long identifier, DocumentLoader&amp;, const ResourceResponse&amp;);
 216     static void willLoadXHRSynchronously(ScriptExecutionContext*);
 217     static void didLoadXHRSynchronously(ScriptExecutionContext*);
 218     static void scriptImported(ScriptExecutionContext&amp;, unsigned long identifier, const String&amp; sourceString);
 219     static void scriptExecutionBlockedByCSP(ScriptExecutionContext*, const String&amp; directiveText);
 220     static void didReceiveScriptResponse(ScriptExecutionContext*, unsigned long identifier);
 221     static void domContentLoadedEventFired(Frame&amp;);
 222     static void loadEventFired(Frame*);
 223     static void frameDetachedFromParent(Frame&amp;);
 224     static void didCommitLoad(Frame&amp;, DocumentLoader*);
 225     static void frameDocumentUpdated(Frame&amp;);
 226     static void loaderDetachedFromFrame(Frame&amp;, DocumentLoader&amp;);
 227     static void frameStartedLoading(Frame&amp;);
 228     static void frameStoppedLoading(Frame&amp;);
 229     static void frameScheduledNavigation(Frame&amp;, Seconds delay);
 230     static void frameClearedScheduledNavigation(Frame&amp;);
 231     static void defaultAppearanceDidChange(Page&amp;, bool useDarkAppearance);
 232     static void willDestroyCachedResource(CachedResource&amp;);
 233 
<a name="20" id="anc20"></a><span class="line-added"> 234     static bool willInterceptRequest(const Frame*, const ResourceRequest&amp;);</span>
<span class="line-added"> 235     static bool shouldInterceptResponse(const Frame&amp;, const ResourceResponse&amp;);</span>
<span class="line-added"> 236     static void interceptResponse(const Frame&amp;, const ResourceResponse&amp;, unsigned long identifier, CompletionHandler&lt;void(const ResourceResponse&amp;, RefPtr&lt;SharedBuffer&gt;)&gt;&amp;&amp;);</span>
<span class="line-added"> 237 </span>
 238     static void addMessageToConsole(Page&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 239     static void addMessageToConsole(WorkerGlobalScope&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 240 
<a name="21" id="anc21"></a><span class="line-modified"> 241     static void consoleCount(Page&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 242     static void consoleCount(WorkerGlobalScope&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 243     static void consoleCountReset(Page&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 244     static void consoleCountReset(WorkerGlobalScope&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
 245 
 246     static void takeHeapSnapshot(Frame&amp;, const String&amp; title);
<a name="22" id="anc22"></a><span class="line-modified"> 247     static void startConsoleTiming(Frame&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 248     static void startConsoleTiming(WorkerGlobalScope&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 249     static void logConsoleTiming(Frame&amp;, JSC::JSGlobalObject*, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);</span>
<span class="line-modified"> 250     static void logConsoleTiming(WorkerGlobalScope&amp;, JSC::JSGlobalObject*, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);</span>
<span class="line-modified"> 251     static void stopConsoleTiming(Frame&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 252     static void stopConsoleTiming(WorkerGlobalScope&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
 253     static void consoleTimeStamp(Frame&amp;, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
<a name="23" id="anc23"></a><span class="line-modified"> 254     static void startProfiling(Page&amp;, JSC::JSGlobalObject*, const String&amp; title);</span>
<span class="line-modified"> 255     static void stopProfiling(Page&amp;, JSC::JSGlobalObject*, const String&amp; title);</span>
<span class="line-modified"> 256     static void consoleStartRecordingCanvas(CanvasRenderingContext&amp;, JSC::JSGlobalObject&amp;, JSC::JSObject* options);</span>
<span class="line-added"> 257     static void consoleStopRecordingCanvas(CanvasRenderingContext&amp;);</span>
 258 
 259     static void didRequestAnimationFrame(Document&amp;, int callbackId);
 260     static void didCancelAnimationFrame(Document&amp;, int callbackId);
<a name="24" id="anc24"></a><span class="line-modified"> 261     static void willFireAnimationFrame(Document&amp;, int callbackId);</span>
<span class="line-modified"> 262     static void didFireAnimationFrame(Document&amp;);</span>
 263 
<a name="25" id="anc25"></a><span class="line-modified"> 264     static void willFireObserverCallback(ScriptExecutionContext&amp;, const String&amp; callbackType);</span>
<span class="line-modified"> 265     static void didFireObserverCallback(ScriptExecutionContext&amp;);</span>
 266 
 267     static void didOpenDatabase(Database&amp;);
 268 
 269     static void didDispatchDOMStorageEvent(Page&amp;, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType, SecurityOrigin*);
 270 
 271     static bool shouldWaitForDebuggerOnStart(ScriptExecutionContext&amp;);
 272     static void workerStarted(ScriptExecutionContext&amp;, WorkerInspectorProxy*, const URL&amp;);
 273     static void workerTerminated(ScriptExecutionContext&amp;, WorkerInspectorProxy*);
 274 
 275     static void didCreateWebSocket(Document*, unsigned long identifier, const URL&amp; requestURL);
 276     static void willSendWebSocketHandshakeRequest(Document*, unsigned long identifier, const ResourceRequest&amp;);
 277     static void didReceiveWebSocketHandshakeResponse(Document*, unsigned long identifier, const ResourceResponse&amp;);
 278     static void didCloseWebSocket(Document*, unsigned long identifier);
 279     static void didReceiveWebSocketFrame(Document*, unsigned long identifier, const WebSocketFrame&amp;);
 280     static void didSendWebSocketFrame(Document*, unsigned long identifier, const WebSocketFrame&amp;);
 281     static void didReceiveWebSocketFrameError(Document*, unsigned long identifier, const String&amp; errorMessage);
 282 
 283 #if ENABLE(RESOURCE_USAGE)
 284     static void didHandleMemoryPressure(Page&amp;, Critical);
 285 #endif
 286 
 287     static void didChangeCSSCanvasClientNodes(CanvasBase&amp;);
 288     static void didCreateCanvasRenderingContext(CanvasRenderingContext&amp;);
 289     static void didChangeCanvasMemory(CanvasRenderingContext&amp;);
 290     static void recordCanvasAction(CanvasRenderingContext&amp;, const String&amp;, std::initializer_list&lt;RecordCanvasActionVariant&gt;&amp;&amp; = { });
 291     static void didFinishRecordingCanvasFrame(CanvasRenderingContext&amp;, bool forceDispatch = false);
 292 #if ENABLE(WEBGL)
 293     static void didEnableExtension(WebGLRenderingContextBase&amp;, const String&amp;);
<a name="26" id="anc26"></a><span class="line-modified"> 294     static void didCreateWebGLProgram(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 295     static void willDestroyWebGLProgram(WebGLProgram&amp;);</span>
<span class="line-modified"> 296     static bool isWebGLProgramDisabled(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 297     static bool isWebGLProgramHighlighted(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);</span>
<span class="line-added"> 298 #endif</span>
<span class="line-added"> 299 #if ENABLE(WEBGPU)</span>
<span class="line-added"> 300     static void didCreateWebGPUDevice(WebGPUDevice&amp;);</span>
<span class="line-added"> 301     static void willDestroyWebGPUDevice(WebGPUDevice&amp;);</span>
<span class="line-added"> 302     static void willConfigureSwapChain(GPUCanvasContext&amp;, WebGPUSwapChain&amp;);</span>
<span class="line-added"> 303     static void didCreateWebGPUPipeline(WebGPUDevice&amp;, WebGPUPipeline&amp;);</span>
<span class="line-added"> 304     static void willDestroyWebGPUPipeline(WebGPUPipeline&amp;);</span>
 305 #endif
 306 
<a name="27" id="anc27"></a><span class="line-added"> 307     static void willApplyKeyframeEffect(Element&amp;, KeyframeEffect&amp;, ComputedEffectTiming);</span>
<span class="line-added"> 308     static void didSetWebAnimationEffect(WebAnimation&amp;);</span>
<span class="line-added"> 309     static void didChangeWebAnimationEffectTiming(WebAnimation&amp;);</span>
<span class="line-added"> 310     static void didChangeWebAnimationEffectTarget(WebAnimation&amp;);</span>
<span class="line-added"> 311     static void didCreateWebAnimation(WebAnimation&amp;);</span>
<span class="line-added"> 312     static void willDestroyWebAnimation(WebAnimation&amp;);</span>
<span class="line-added"> 313 </span>
 314     static void networkStateChanged(Page&amp;);
 315     static void updateApplicationCacheStatus(Frame*);
 316 
 317     static void layerTreeDidChange(Page*);
 318     static void renderLayerDestroyed(Page*, const RenderLayer&amp;);
 319 
 320     static void frontendCreated();
 321     static void frontendDeleted();
<a name="28" id="anc28"></a><span class="line-modified"> 322     static bool hasFrontends() { return InspectorInstrumentationPublic::hasFrontends(); }</span>
 323 
 324     static void firstFrontendCreated();
 325     static void lastFrontendDeleted();
 326 
 327     static bool consoleAgentEnabled(ScriptExecutionContext*);
 328     static bool timelineAgentTracking(ScriptExecutionContext*);
 329 
 330     static InstrumentingAgents* instrumentingAgentsForPage(Page*);
 331 
 332     static void registerInstrumentingAgents(InstrumentingAgents&amp;);
 333     static void unregisterInstrumentingAgents(InstrumentingAgents&amp;);
 334 
 335 private:
 336     static void didClearWindowObjectInWorldImpl(InstrumentingAgents&amp;, Frame&amp;, DOMWrapperWorld&amp;);
 337     static bool isDebuggerPausedImpl(InstrumentingAgents&amp;);
 338 
 339     static int identifierForNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 340     static void addEventListenersToNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 341     static void willInsertDOMNodeImpl(InstrumentingAgents&amp;, Node&amp; parent);
 342     static void didInsertDOMNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 343     static void willRemoveDOMNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 344     static void didRemoveDOMNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 345     static void willModifyDOMAttrImpl(InstrumentingAgents&amp;, Element&amp;, const AtomString&amp; oldValue, const AtomString&amp; newValue);
 346     static void didModifyDOMAttrImpl(InstrumentingAgents&amp;, Element&amp;, const AtomString&amp; name, const AtomString&amp; value);
 347     static void didRemoveDOMAttrImpl(InstrumentingAgents&amp;, Element&amp;, const AtomString&amp; name);
 348     static void characterDataModifiedImpl(InstrumentingAgents&amp;, CharacterData&amp;);
 349     static void willInvalidateStyleAttrImpl(InstrumentingAgents&amp;, Element&amp;);
 350     static void didInvalidateStyleAttrImpl(InstrumentingAgents&amp;, Element&amp;);
 351     static void documentDetachedImpl(InstrumentingAgents&amp;, Document&amp;);
 352     static void frameWindowDiscardedImpl(InstrumentingAgents&amp;, DOMWindow*);
 353     static void mediaQueryResultChangedImpl(InstrumentingAgents&amp;);
 354     static void activeStyleSheetsUpdatedImpl(InstrumentingAgents&amp;, Document&amp;);
 355     static void didPushShadowRootImpl(InstrumentingAgents&amp;, Element&amp; host, ShadowRoot&amp;);
 356     static void willPopShadowRootImpl(InstrumentingAgents&amp;, Element&amp; host, ShadowRoot&amp;);
 357     static void didChangeCustomElementStateImpl(InstrumentingAgents&amp;, Element&amp;);
 358     static void pseudoElementCreatedImpl(InstrumentingAgents&amp;, PseudoElement&amp;);
 359     static void pseudoElementDestroyedImpl(InstrumentingAgents&amp;, PseudoElement&amp;);
 360     static void didCreateNamedFlowImpl(InstrumentingAgents&amp;, Document*, WebKitNamedFlow&amp;);
 361     static void willRemoveNamedFlowImpl(InstrumentingAgents&amp;, Document*, WebKitNamedFlow&amp;);
 362     static void didChangeRegionOversetImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;);
 363     static void didRegisterNamedFlowContentElementImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement, Node* nextContentElement = nullptr);
 364     static void didUnregisterNamedFlowContentElementImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement);
 365 
 366     static void mouseDidMoveOverElementImpl(InstrumentingAgents&amp;, const HitTestResult&amp;, unsigned modifierFlags);
 367     static bool handleMousePressImpl(InstrumentingAgents&amp;);
 368     static bool handleTouchEventImpl(InstrumentingAgents&amp;, Node&amp;);
 369     static bool forcePseudoStateImpl(InstrumentingAgents&amp;, const Element&amp;, CSSSelector::PseudoClassType);
 370 
 371     static void willSendXMLHttpRequestImpl(InstrumentingAgents&amp;, const String&amp; url);
 372     static void willFetchImpl(InstrumentingAgents&amp;, const String&amp; url);
 373     static void didInstallTimerImpl(InstrumentingAgents&amp;, int timerId, Seconds timeout, bool singleShot, ScriptExecutionContext&amp;);
 374     static void didRemoveTimerImpl(InstrumentingAgents&amp;, int timerId, ScriptExecutionContext&amp;);
 375 
<a name="29" id="anc29"></a><span class="line-modified"> 376     static void didPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;, JSC::JSGlobalObject&amp;);</span>
 377     static void didFailPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 378     static void willDispatchPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 379     static void didDispatchPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 380 
<a name="30" id="anc30"></a><span class="line-modified"> 381     static void willCallFunctionImpl(InstrumentingAgents&amp;, const String&amp; scriptName, int scriptLine, int scriptColumn, ScriptExecutionContext*);</span>
<span class="line-modified"> 382     static void didCallFunctionImpl(InstrumentingAgents&amp;, ScriptExecutionContext*);</span>
 383     static void didAddEventListenerImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 384     static void willRemoveEventListenerImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 385     static bool isEventListenerDisabledImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
<a name="31" id="anc31"></a><span class="line-modified"> 386     static void willDispatchEventImpl(InstrumentingAgents&amp;, Document&amp;, const Event&amp;);</span>
 387     static void willHandleEventImpl(InstrumentingAgents&amp;, Event&amp;, const RegisteredEventListener&amp;);
 388     static void didHandleEventImpl(InstrumentingAgents&amp;);
<a name="32" id="anc32"></a><span class="line-modified"> 389     static void didDispatchEventImpl(InstrumentingAgents&amp;, const Event&amp;);</span>
<span class="line-modified"> 390     static void willDispatchEventOnWindowImpl(InstrumentingAgents&amp;, const Event&amp;, DOMWindow&amp;);</span>
<span class="line-modified"> 391     static void didDispatchEventOnWindowImpl(InstrumentingAgents&amp;, const Event&amp;);</span>
 392     static void eventDidResetAfterDispatchImpl(InstrumentingAgents&amp;, const Event&amp;);
<a name="33" id="anc33"></a><span class="line-modified"> 393     static void willEvaluateScriptImpl(InstrumentingAgents&amp;, Frame&amp;, const String&amp; url, int lineNumber, int columnNumber);</span>
<span class="line-modified"> 394     static void didEvaluateScriptImpl(InstrumentingAgents&amp;, Frame&amp;);</span>
<span class="line-modified"> 395     static void willFireTimerImpl(InstrumentingAgents&amp;, int timerId, bool oneShot, ScriptExecutionContext&amp;);</span>
<span class="line-modified"> 396     static void didFireTimerImpl(InstrumentingAgents&amp;);</span>
 397     static void didInvalidateLayoutImpl(InstrumentingAgents&amp;, Frame&amp;);
<a name="34" id="anc34"></a><span class="line-modified"> 398     static void willLayoutImpl(InstrumentingAgents&amp;, Frame&amp;);</span>
<span class="line-modified"> 399     static void didLayoutImpl(InstrumentingAgents&amp;, RenderObject&amp;);</span>
 400     static void didScrollImpl(InstrumentingAgents&amp;);
 401     static void willCompositeImpl(InstrumentingAgents&amp;, Frame&amp;);
 402     static void didCompositeImpl(InstrumentingAgents&amp;);
 403     static void willPaintImpl(InstrumentingAgents&amp;, RenderObject&amp;);
 404     static void didPaintImpl(InstrumentingAgents&amp;, RenderObject&amp;, const LayoutRect&amp;);
<a name="35" id="anc35"></a><span class="line-modified"> 405     static void willRecalculateStyleImpl(InstrumentingAgents&amp;, Document&amp;);</span>
<span class="line-modified"> 406     static void didRecalculateStyleImpl(InstrumentingAgents&amp;);</span>
 407     static void didScheduleStyleRecalculationImpl(InstrumentingAgents&amp;, Document&amp;);
 408     static void applyUserAgentOverrideImpl(InstrumentingAgents&amp;, String&amp;);
 409     static void applyEmulatedMediaImpl(InstrumentingAgents&amp;, String&amp;);
 410 
 411     static void willSendRequestImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, const ResourceResponse&amp; redirectResponse);
 412     static void willSendRequestOfTypeImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, LoadType);
 413     static void markResourceAsCachedImpl(InstrumentingAgents&amp;, unsigned long identifier);
 414     static void didLoadResourceFromMemoryCacheImpl(InstrumentingAgents&amp;, DocumentLoader*, CachedResource*);
 415     static void didReceiveResourceResponseImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const ResourceResponse&amp;, ResourceLoader*);
 416     static void didReceiveThreadableLoaderResponseImpl(InstrumentingAgents&amp;, DocumentThreadableLoader&amp;, unsigned long identifier);
 417     static void didReceiveDataImpl(InstrumentingAgents&amp;, unsigned long identifier, const char* data, int dataLength, int encodedDataLength);
 418     static void didFinishLoadingImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const NetworkLoadMetrics&amp;, ResourceLoader*);
 419     static void didFailLoadingImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const ResourceError&amp;);
 420     static void willLoadXHRSynchronouslyImpl(InstrumentingAgents&amp;);
 421     static void didLoadXHRSynchronouslyImpl(InstrumentingAgents&amp;);
 422     static void scriptImportedImpl(InstrumentingAgents&amp;, unsigned long identifier, const String&amp; sourceString);
 423     static void scriptExecutionBlockedByCSPImpl(InstrumentingAgents&amp;, const String&amp; directiveText);
 424     static void didReceiveScriptResponseImpl(InstrumentingAgents&amp;, unsigned long identifier);
 425     static void domContentLoadedEventFiredImpl(InstrumentingAgents&amp;, Frame&amp;);
 426     static void loadEventFiredImpl(InstrumentingAgents&amp;, Frame*);
 427     static void frameDetachedFromParentImpl(InstrumentingAgents&amp;, Frame&amp;);
 428     static void didCommitLoadImpl(InstrumentingAgents&amp;, Frame&amp;, DocumentLoader*);
 429     static void frameDocumentUpdatedImpl(InstrumentingAgents&amp;, Frame&amp;);
 430     static void loaderDetachedFromFrameImpl(InstrumentingAgents&amp;, DocumentLoader&amp;);
 431     static void frameStartedLoadingImpl(InstrumentingAgents&amp;, Frame&amp;);
 432     static void frameStoppedLoadingImpl(InstrumentingAgents&amp;, Frame&amp;);
 433     static void frameScheduledNavigationImpl(InstrumentingAgents&amp;, Frame&amp;, Seconds delay);
 434     static void frameClearedScheduledNavigationImpl(InstrumentingAgents&amp;, Frame&amp;);
 435     static void defaultAppearanceDidChangeImpl(InstrumentingAgents&amp;, bool useDarkAppearance);
 436     static void willDestroyCachedResourceImpl(CachedResource&amp;);
 437 
<a name="36" id="anc36"></a><span class="line-added"> 438     static bool willInterceptRequestImpl(InstrumentingAgents&amp;, const ResourceRequest&amp;);</span>
<span class="line-added"> 439     static bool shouldInterceptResponseImpl(InstrumentingAgents&amp;, const ResourceResponse&amp;);</span>
<span class="line-added"> 440     static void interceptResponseImpl(InstrumentingAgents&amp;, const ResourceResponse&amp;, unsigned long identifier, CompletionHandler&lt;void(const ResourceResponse&amp;, RefPtr&lt;SharedBuffer&gt;)&gt;&amp;&amp;);</span>
<span class="line-added"> 441 </span>
 442     static void addMessageToConsoleImpl(InstrumentingAgents&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 443 
<a name="37" id="anc37"></a><span class="line-modified"> 444     static void consoleCountImpl(InstrumentingAgents&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 445     static void consoleCountResetImpl(InstrumentingAgents&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
 446     static void takeHeapSnapshotImpl(InstrumentingAgents&amp;, const String&amp; title);
<a name="38" id="anc38"></a><span class="line-modified"> 447     static void startConsoleTimingImpl(InstrumentingAgents&amp;, Frame&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 448     static void startConsoleTimingImpl(InstrumentingAgents&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 449     static void logConsoleTimingImpl(InstrumentingAgents&amp;, JSC::JSGlobalObject*, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);</span>
<span class="line-modified"> 450     static void stopConsoleTimingImpl(InstrumentingAgents&amp;, Frame&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 451     static void stopConsoleTimingImpl(InstrumentingAgents&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
 452     static void consoleTimeStampImpl(InstrumentingAgents&amp;, Frame&amp;, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
<a name="39" id="anc39"></a><span class="line-modified"> 453     static void startProfilingImpl(InstrumentingAgents&amp;, JSC::JSGlobalObject*, const String&amp; title);</span>
<span class="line-modified"> 454     static void stopProfilingImpl(InstrumentingAgents&amp;, JSC::JSGlobalObject*, const String&amp; title);</span>
<span class="line-modified"> 455     static void consoleStartRecordingCanvasImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, JSC::JSGlobalObject&amp;, JSC::JSObject* options);</span>
<span class="line-added"> 456     static void consoleStopRecordingCanvasImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;);</span>
 457 
 458     static void didRequestAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);
 459     static void didCancelAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);
<a name="40" id="anc40"></a><span class="line-modified"> 460     static void willFireAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);</span>
<span class="line-modified"> 461     static void didFireAnimationFrameImpl(InstrumentingAgents&amp;);</span>
 462 
<a name="41" id="anc41"></a><span class="line-modified"> 463     static void willFireObserverCallbackImpl(InstrumentingAgents&amp;, const String&amp;, ScriptExecutionContext&amp;);</span>
<span class="line-modified"> 464     static void didFireObserverCallbackImpl(InstrumentingAgents&amp;);</span>
 465 
 466     static void didOpenDatabaseImpl(InstrumentingAgents&amp;, Database&amp;);
 467 
 468     static void didDispatchDOMStorageEventImpl(InstrumentingAgents&amp;, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType, SecurityOrigin*);
 469 
 470     static bool shouldWaitForDebuggerOnStartImpl(InstrumentingAgents&amp;);
 471     static void workerStartedImpl(InstrumentingAgents&amp;, WorkerInspectorProxy*, const URL&amp;);
 472     static void workerTerminatedImpl(InstrumentingAgents&amp;, WorkerInspectorProxy*);
 473 
 474     static void didCreateWebSocketImpl(InstrumentingAgents&amp;, unsigned long identifier, const URL&amp; requestURL);
 475     static void willSendWebSocketHandshakeRequestImpl(InstrumentingAgents&amp;, unsigned long identifier, const ResourceRequest&amp;);
 476     static void didReceiveWebSocketHandshakeResponseImpl(InstrumentingAgents&amp;, unsigned long identifier, const ResourceResponse&amp;);
 477     static void didCloseWebSocketImpl(InstrumentingAgents&amp;, unsigned long identifier);
 478     static void didReceiveWebSocketFrameImpl(InstrumentingAgents&amp;, unsigned long identifier, const WebSocketFrame&amp;);
 479     static void didSendWebSocketFrameImpl(InstrumentingAgents&amp;, unsigned long identifier, const WebSocketFrame&amp;);
 480     static void didReceiveWebSocketFrameErrorImpl(InstrumentingAgents&amp;, unsigned long identifier, const String&amp;);
 481 
 482 #if ENABLE(RESOURCE_USAGE)
 483     static void didHandleMemoryPressureImpl(InstrumentingAgents&amp;, Critical);
 484 #endif
 485 
 486     static void networkStateChangedImpl(InstrumentingAgents&amp;);
 487     static void updateApplicationCacheStatusImpl(InstrumentingAgents&amp;, Frame&amp;);
 488 
 489     static void didChangeCSSCanvasClientNodesImpl(InstrumentingAgents&amp;, CanvasBase&amp;);
 490     static void didCreateCanvasRenderingContextImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;);
 491     static void didChangeCanvasMemoryImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;);
 492     static void recordCanvasActionImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, const String&amp;, std::initializer_list&lt;RecordCanvasActionVariant&gt;&amp;&amp; = { });
 493     static void didFinishRecordingCanvasFrameImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, bool forceDispatch = false);
 494 #if ENABLE(WEBGL)
 495     static void didEnableExtensionImpl(InstrumentingAgents&amp;, WebGLRenderingContextBase&amp;, const String&amp;);
<a name="42" id="anc42"></a><span class="line-modified"> 496     static void didCreateWebGLProgramImpl(InstrumentingAgents&amp;, WebGLRenderingContextBase&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 497     static void willDestroyWebGLProgramImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 498     static bool isWebGLProgramDisabledImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 499     static bool isWebGLProgramHighlightedImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);</span>
<span class="line-added"> 500 #endif</span>
<span class="line-added"> 501 #if ENABLE(WEBGPU)</span>
<span class="line-added"> 502     static void didCreateWebGPUDeviceImpl(InstrumentingAgents&amp;, WebGPUDevice&amp;);</span>
<span class="line-added"> 503     static void willDestroyWebGPUDeviceImpl(InstrumentingAgents&amp;, WebGPUDevice&amp;);</span>
<span class="line-added"> 504     static void willConfigureSwapChainImpl(InstrumentingAgents&amp;, GPUCanvasContext&amp;, WebGPUSwapChain&amp;);</span>
<span class="line-added"> 505     static void didCreateWebGPUPipelineImpl(InstrumentingAgents&amp;, WebGPUDevice&amp;, WebGPUPipeline&amp;);</span>
<span class="line-added"> 506     static void willDestroyWebGPUPipelineImpl(InstrumentingAgents&amp;, WebGPUPipeline&amp;);</span>
<span class="line-added"> 507     static InstrumentingAgents* instrumentingAgentsForWebGPUDevice(WebGPUDevice&amp;);</span>
 508 #endif
 509 
<a name="43" id="anc43"></a><span class="line-added"> 510     static void willApplyKeyframeEffectImpl(InstrumentingAgents&amp;, Element&amp;, KeyframeEffect&amp;, ComputedEffectTiming);</span>
<span class="line-added"> 511     static void didSetWebAnimationEffectImpl(InstrumentingAgents&amp;, WebAnimation&amp;);</span>
<span class="line-added"> 512     static void didChangeWebAnimationEffectTimingImpl(InstrumentingAgents&amp;, WebAnimation&amp;);</span>
<span class="line-added"> 513     static void didChangeWebAnimationEffectTargetImpl(InstrumentingAgents&amp;, WebAnimation&amp;);</span>
<span class="line-added"> 514     static void didCreateWebAnimationImpl(InstrumentingAgents&amp;, WebAnimation&amp;);</span>
<span class="line-added"> 515     static void willDestroyWebAnimationImpl(InstrumentingAgents&amp;, WebAnimation&amp;);</span>
<span class="line-added"> 516 </span>
 517     static void layerTreeDidChangeImpl(InstrumentingAgents&amp;);
 518     static void renderLayerDestroyedImpl(InstrumentingAgents&amp;, const RenderLayer&amp;);
 519 
 520     static InstrumentingAgents&amp; instrumentingAgentsForPage(Page&amp;);
 521     static InstrumentingAgents&amp; instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope&amp;);
 522 
<a name="44" id="anc44"></a><span class="line-modified"> 523     static InstrumentingAgents* instrumentingAgentsForFrame(const Frame&amp;);</span>
<span class="line-modified"> 524     static InstrumentingAgents* instrumentingAgentsForFrame(const Frame*);</span>
 525     static InstrumentingAgents* instrumentingAgentsForContext(ScriptExecutionContext*);
 526     static InstrumentingAgents* instrumentingAgentsForContext(ScriptExecutionContext&amp;);
 527     static InstrumentingAgents* instrumentingAgentsForDocument(Document&amp;);
 528     static InstrumentingAgents* instrumentingAgentsForDocument(Document*);
 529     static InstrumentingAgents* instrumentingAgentsForRenderer(RenderObject&amp;);
 530     static InstrumentingAgents* instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope*);
<a name="45" id="anc45"></a>



 531 };
 532 
 533 inline void InspectorInstrumentation::didClearWindowObjectInWorld(Frame&amp; frame, DOMWrapperWorld&amp; world)
 534 {
 535     FAST_RETURN_IF_NO_FRONTENDS(void());
 536     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 537         didClearWindowObjectInWorldImpl(*instrumentingAgents, frame, world);
 538 }
 539 
 540 inline bool InspectorInstrumentation::isDebuggerPaused(Frame* frame)
 541 {
 542     FAST_RETURN_IF_NO_FRONTENDS(false);
 543     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 544         return isDebuggerPausedImpl(*instrumentingAgents);
 545     return false;
 546 }
 547 
 548 inline int InspectorInstrumentation::identifierForNode(Node&amp; node)
 549 {
 550     FAST_RETURN_IF_NO_FRONTENDS(0);
 551     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(node.document()))
 552         return identifierForNodeImpl(*instrumentingAgents, node);
 553     return 0;
 554 }
 555 
 556 inline void InspectorInstrumentation::addEventListenersToNode(Node&amp; node)
 557 {
 558     FAST_RETURN_IF_NO_FRONTENDS(void());
 559     if (auto* instrumentingAgents = instrumentingAgentsForDocument(node.document()))
 560         addEventListenersToNodeImpl(*instrumentingAgents, node);
 561 }
 562 
 563 inline void InspectorInstrumentation::willInsertDOMNode(Document&amp; document, Node&amp; parent)
 564 {
 565     FAST_RETURN_IF_NO_FRONTENDS(void());
 566     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 567         willInsertDOMNodeImpl(*instrumentingAgents, parent);
 568 }
 569 
 570 inline void InspectorInstrumentation::didInsertDOMNode(Document&amp; document, Node&amp; node)
 571 {
 572     FAST_RETURN_IF_NO_FRONTENDS(void());
 573     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 574         didInsertDOMNodeImpl(*instrumentingAgents, node);
 575 }
 576 
 577 inline void InspectorInstrumentation::willRemoveDOMNode(Document&amp; document, Node&amp; node)
 578 {
 579     FAST_RETURN_IF_NO_FRONTENDS(void());
 580     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 581         willRemoveDOMNodeImpl(*instrumentingAgents, node);
 582 }
 583 
 584 inline void InspectorInstrumentation::didRemoveDOMNode(Document&amp; document, Node&amp; node)
 585 {
 586     FAST_RETURN_IF_NO_FRONTENDS(void());
 587     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 588         didRemoveDOMNodeImpl(*instrumentingAgents, node);
 589 }
 590 
 591 inline void InspectorInstrumentation::willModifyDOMAttr(Document&amp; document, Element&amp; element, const AtomString&amp; oldValue, const AtomString&amp; newValue)
 592 {
 593     FAST_RETURN_IF_NO_FRONTENDS(void());
 594     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 595         willModifyDOMAttrImpl(*instrumentingAgents, element, oldValue, newValue);
 596 }
 597 
 598 inline void InspectorInstrumentation::didModifyDOMAttr(Document&amp; document, Element&amp; element, const AtomString&amp; name, const AtomString&amp; value)
 599 {
 600     FAST_RETURN_IF_NO_FRONTENDS(void());
 601     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 602         didModifyDOMAttrImpl(*instrumentingAgents, element, name, value);
 603 }
 604 
 605 inline void InspectorInstrumentation::didRemoveDOMAttr(Document&amp; document, Element&amp; element, const AtomString&amp; name)
 606 {
 607     FAST_RETURN_IF_NO_FRONTENDS(void());
 608     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 609         didRemoveDOMAttrImpl(*instrumentingAgents, element, name);
 610 }
 611 
 612 inline void InspectorInstrumentation::willInvalidateStyleAttr(Element&amp; element)
 613 {
 614     FAST_RETURN_IF_NO_FRONTENDS(void());
 615     if (auto* instrumentingAgents = instrumentingAgentsForDocument(element.document()))
 616         willInvalidateStyleAttrImpl(*instrumentingAgents, element);
 617 }
 618 
 619 inline void InspectorInstrumentation::didInvalidateStyleAttr(Element&amp; element)
 620 {
 621     FAST_RETURN_IF_NO_FRONTENDS(void());
 622     if (auto* instrumentingAgents = instrumentingAgentsForDocument(element.document()))
 623         didInvalidateStyleAttrImpl(*instrumentingAgents, element);
 624 }
 625 
 626 inline void InspectorInstrumentation::documentDetached(Document&amp; document)
 627 {
 628     FAST_RETURN_IF_NO_FRONTENDS(void());
 629     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 630         documentDetachedImpl(*instrumentingAgents, document);
 631 }
 632 
 633 inline void InspectorInstrumentation::frameWindowDiscarded(Frame&amp; frame, DOMWindow* domWindow)
 634 {
 635     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 636         frameWindowDiscardedImpl(*instrumentingAgents, domWindow);
 637 }
 638 
 639 inline void InspectorInstrumentation::mediaQueryResultChanged(Document&amp; document)
 640 {
 641     FAST_RETURN_IF_NO_FRONTENDS(void());
 642     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 643         mediaQueryResultChangedImpl(*instrumentingAgents);
 644 }
 645 
 646 inline void InspectorInstrumentation::activeStyleSheetsUpdated(Document&amp; document)
 647 {
 648     FAST_RETURN_IF_NO_FRONTENDS(void());
 649     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 650         activeStyleSheetsUpdatedImpl(*instrumentingAgents, document);
 651 }
 652 
 653 inline void InspectorInstrumentation::didPushShadowRoot(Element&amp; host, ShadowRoot&amp; root)
 654 {
 655     FAST_RETURN_IF_NO_FRONTENDS(void());
 656     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(host.document()))
 657         didPushShadowRootImpl(*instrumentingAgents, host, root);
 658 }
 659 
 660 inline void InspectorInstrumentation::willPopShadowRoot(Element&amp; host, ShadowRoot&amp; root)
 661 {
 662     FAST_RETURN_IF_NO_FRONTENDS(void());
 663     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(host.document()))
 664         willPopShadowRootImpl(*instrumentingAgents, host, root);
 665 }
 666 
 667 inline void InspectorInstrumentation::didChangeCustomElementState(Element&amp; element)
 668 {
 669     FAST_RETURN_IF_NO_FRONTENDS(void());
 670     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(element.document()))
 671         didChangeCustomElementStateImpl(*instrumentingAgents, element);
 672 }
 673 
 674 inline void InspectorInstrumentation::pseudoElementCreated(Page* page, PseudoElement&amp; pseudoElement)
 675 {
 676     FAST_RETURN_IF_NO_FRONTENDS(void());
 677     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
 678         pseudoElementCreatedImpl(*instrumentingAgents, pseudoElement);
 679 }
 680 
 681 inline void InspectorInstrumentation::pseudoElementDestroyed(Page* page, PseudoElement&amp; pseudoElement)
 682 {
 683     FAST_RETURN_IF_NO_FRONTENDS(void());
 684     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
 685         pseudoElementDestroyedImpl(*instrumentingAgents, pseudoElement);
 686 }
 687 
 688 inline void InspectorInstrumentation::didCreateNamedFlow(Document* document, WebKitNamedFlow&amp; namedFlow)
 689 {
 690     FAST_RETURN_IF_NO_FRONTENDS(void());
 691     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 692         didCreateNamedFlowImpl(*instrumentingAgents, document, namedFlow);
 693 }
 694 
 695 inline void InspectorInstrumentation::willRemoveNamedFlow(Document* document, WebKitNamedFlow&amp; namedFlow)
 696 {
 697     FAST_RETURN_IF_NO_FRONTENDS(void());
 698     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 699         willRemoveNamedFlowImpl(*instrumentingAgents, document, namedFlow);
 700 }
 701 
 702 inline void InspectorInstrumentation::didChangeRegionOverset(Document&amp; document, WebKitNamedFlow&amp; namedFlow)
 703 {
 704     FAST_RETURN_IF_NO_FRONTENDS(void());
 705     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 706         didChangeRegionOversetImpl(*instrumentingAgents, document, namedFlow);
 707 }
 708 
 709 inline void InspectorInstrumentation::didRegisterNamedFlowContentElement(Document&amp; document, WebKitNamedFlow&amp; namedFlow, Node&amp; contentElement, Node* nextContentElement)
 710 {
 711     FAST_RETURN_IF_NO_FRONTENDS(void());
 712     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 713         didRegisterNamedFlowContentElementImpl(*instrumentingAgents, document, namedFlow, contentElement, nextContentElement);
 714 }
 715 
 716 inline void InspectorInstrumentation::didUnregisterNamedFlowContentElement(Document&amp; document, WebKitNamedFlow&amp; namedFlow, Node&amp; contentElement)
 717 {
 718     FAST_RETURN_IF_NO_FRONTENDS(void());
 719     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 720         didUnregisterNamedFlowContentElementImpl(*instrumentingAgents, document, namedFlow, contentElement);
 721 }
 722 
 723 inline void InspectorInstrumentation::mouseDidMoveOverElement(Page&amp; page, const HitTestResult&amp; result, unsigned modifierFlags)
 724 {
 725     FAST_RETURN_IF_NO_FRONTENDS(void());
 726     mouseDidMoveOverElementImpl(instrumentingAgentsForPage(page), result, modifierFlags);
 727 }
 728 
 729 inline bool InspectorInstrumentation::handleTouchEvent(Frame&amp; frame, Node&amp; node)
 730 {
 731     FAST_RETURN_IF_NO_FRONTENDS(false);
 732     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 733         return handleTouchEventImpl(*instrumentingAgents, node);
 734     return false;
 735 }
 736 
 737 inline bool InspectorInstrumentation::handleMousePress(Frame&amp; frame)
 738 {
 739     FAST_RETURN_IF_NO_FRONTENDS(false);
 740     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 741         return handleMousePressImpl(*instrumentingAgents);
 742     return false;
 743 }
 744 
 745 inline bool InspectorInstrumentation::forcePseudoState(const Element&amp; element, CSSSelector::PseudoClassType pseudoState)
 746 {
 747     FAST_RETURN_IF_NO_FRONTENDS(false);
 748     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(element.document()))
 749         return forcePseudoStateImpl(*instrumentingAgents, element, pseudoState);
 750     return false;
 751 }
 752 
 753 inline void InspectorInstrumentation::characterDataModified(Document&amp; document, CharacterData&amp; characterData)
 754 {
 755     FAST_RETURN_IF_NO_FRONTENDS(void());
 756     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 757         characterDataModifiedImpl(*instrumentingAgents, characterData);
 758 }
 759 
 760 inline void InspectorInstrumentation::willSendXMLHttpRequest(ScriptExecutionContext* context, const String&amp; url)
 761 {
 762     FAST_RETURN_IF_NO_FRONTENDS(void());
 763     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 764         willSendXMLHttpRequestImpl(*instrumentingAgents, url);
 765 }
 766 
 767 inline void InspectorInstrumentation::willFetch(ScriptExecutionContext&amp; context, const String&amp; url)
 768 {
 769     FAST_RETURN_IF_NO_FRONTENDS(void());
 770     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 771         willFetchImpl(*instrumentingAgents, url);
 772 }
 773 
 774 inline void InspectorInstrumentation::didInstallTimer(ScriptExecutionContext&amp; context, int timerId, Seconds timeout, bool singleShot)
 775 {
 776     FAST_RETURN_IF_NO_FRONTENDS(void());
 777     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 778         didInstallTimerImpl(*instrumentingAgents, timerId, timeout, singleShot, context);
 779 }
 780 
 781 inline void InspectorInstrumentation::didRemoveTimer(ScriptExecutionContext&amp; context, int timerId)
 782 {
 783     FAST_RETURN_IF_NO_FRONTENDS(void());
 784     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 785         didRemoveTimerImpl(*instrumentingAgents, timerId, context);
 786 }
 787 
 788 inline void InspectorInstrumentation::didAddEventListener(EventTarget&amp; target, const AtomString&amp; eventType, EventListener&amp; listener, bool capture)
 789 {
 790     FAST_RETURN_IF_NO_FRONTENDS(void());
 791     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 792         didAddEventListenerImpl(*instrumentingAgents, target, eventType, listener, capture);
 793 }
 794 
 795 inline void InspectorInstrumentation::willRemoveEventListener(EventTarget&amp; target, const AtomString&amp; eventType, EventListener&amp; listener, bool capture)
 796 {
 797     FAST_RETURN_IF_NO_FRONTENDS(void());
 798     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 799         willRemoveEventListenerImpl(*instrumentingAgents, target, eventType, listener, capture);
 800 }
 801 
 802 inline bool InspectorInstrumentation::isEventListenerDisabled(EventTarget&amp; target, const AtomString&amp; eventType, EventListener&amp; listener, bool capture)
 803 {
 804     FAST_RETURN_IF_NO_FRONTENDS(false);
 805     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 806         return isEventListenerDisabledImpl(*instrumentingAgents, target, eventType, listener, capture);
 807     return false;
 808 }
 809 
<a name="46" id="anc46"></a><span class="line-modified"> 810 inline void InspectorInstrumentation::didPostMessage(Frame&amp; frame, TimerBase&amp; timer, JSC::JSGlobalObject&amp; state)</span>
 811 {
 812     FAST_RETURN_IF_NO_FRONTENDS(void());
 813     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 814         didPostMessageImpl(*instrumentingAgents, timer, state);
 815 }
 816 
 817 inline void InspectorInstrumentation::didFailPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 818 {
 819     FAST_RETURN_IF_NO_FRONTENDS(void());
 820     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 821         didFailPostMessageImpl(*instrumentingAgents, timer);
 822 }
 823 
 824 inline void InspectorInstrumentation::willDispatchPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 825 {
 826     FAST_RETURN_IF_NO_FRONTENDS(void());
 827     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 828         willDispatchPostMessageImpl(*instrumentingAgents, timer);
 829 }
 830 
 831 inline void InspectorInstrumentation::didDispatchPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 832 {
 833     FAST_RETURN_IF_NO_FRONTENDS(void());
 834     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 835         didDispatchPostMessageImpl(*instrumentingAgents, timer);
 836 }
 837 
<a name="47" id="anc47"></a><span class="line-modified"> 838 inline void InspectorInstrumentation::willCallFunction(ScriptExecutionContext* context, const String&amp; scriptName, int scriptLine, int scriptColumn)</span>
 839 {
<a name="48" id="anc48"></a><span class="line-modified"> 840     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified"> 841     if (auto* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified"> 842         willCallFunctionImpl(*instrumentingAgents, scriptName, scriptLine, scriptColumn, context);</span>

 843 }
 844 
<a name="49" id="anc49"></a><span class="line-modified"> 845 inline void InspectorInstrumentation::didCallFunction(ScriptExecutionContext* context)</span>
 846 {
 847     FAST_RETURN_IF_NO_FRONTENDS(void());
<a name="50" id="anc50"></a><span class="line-modified"> 848     if (auto* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified"> 849         didCallFunctionImpl(*instrumentingAgents, context);</span>
 850 }
 851 
<a name="51" id="anc51"></a><span class="line-modified"> 852 inline void InspectorInstrumentation::willDispatchEvent(Document&amp; document, const Event&amp; event)</span>
 853 {
<a name="52" id="anc52"></a><span class="line-modified"> 854     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified"> 855     if (auto* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified"> 856         willDispatchEventImpl(*instrumentingAgents, document, event);</span>

 857 }
 858 
<a name="53" id="anc53"></a><span class="line-modified"> 859 inline void InspectorInstrumentation::didDispatchEvent(Document&amp; document, const Event&amp; event)</span>
 860 {
 861     FAST_RETURN_IF_NO_FRONTENDS(void());
<a name="54" id="anc54"></a><span class="line-modified"> 862     if (auto* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified"> 863         didDispatchEventImpl(*instrumentingAgents, event);</span>
 864 }
 865 
 866 inline void InspectorInstrumentation::willHandleEvent(ScriptExecutionContext&amp; context, Event&amp; event, const RegisteredEventListener&amp; listener)
 867 {
 868     FAST_RETURN_IF_NO_FRONTENDS(void());
 869     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 870         return willHandleEventImpl(*instrumentingAgents, event, listener);
 871 }
 872 
 873 inline void InspectorInstrumentation::didHandleEvent(ScriptExecutionContext&amp; context)
 874 {
 875     FAST_RETURN_IF_NO_FRONTENDS(void());
 876     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 877         return didHandleEventImpl(*instrumentingAgents);
 878 }
 879 
<a name="55" id="anc55"></a><span class="line-modified"> 880 inline void InspectorInstrumentation::willDispatchEventOnWindow(Frame* frame, const Event&amp; event, DOMWindow&amp; window)</span>
 881 {
<a name="56" id="anc56"></a><span class="line-modified"> 882     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified"> 883     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 884         willDispatchEventOnWindowImpl(*instrumentingAgents, event, window);</span>

 885 }
 886 
<a name="57" id="anc57"></a><span class="line-modified"> 887 inline void InspectorInstrumentation::didDispatchEventOnWindow(Frame* frame, const Event&amp; event)</span>
 888 {
 889     FAST_RETURN_IF_NO_FRONTENDS(void());
<a name="58" id="anc58"></a><span class="line-modified"> 890     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 891         didDispatchEventOnWindowImpl(*instrumentingAgents, event);</span>
 892 }
 893 
 894 inline void InspectorInstrumentation::eventDidResetAfterDispatch(const Event&amp; event)
 895 {
 896     FAST_RETURN_IF_NO_FRONTENDS(void());
 897 
 898     if (!is&lt;Node&gt;(event.target()))
 899         return;
 900 
 901     auto* node = downcast&lt;Node&gt;(event.target());
 902     if (auto* instrumentingAgents = instrumentingAgentsForContext(node-&gt;scriptExecutionContext()))
 903         return eventDidResetAfterDispatchImpl(*instrumentingAgents, event);
 904 }
 905 
<a name="59" id="anc59"></a><span class="line-modified"> 906 inline void InspectorInstrumentation::willEvaluateScript(Frame&amp; frame, const String&amp; url, int lineNumber, int columnNumber)</span>
 907 {
<a name="60" id="anc60"></a><span class="line-modified"> 908     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified"> 909     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 910         willEvaluateScriptImpl(*instrumentingAgents, frame, url, lineNumber, columnNumber);</span>

 911 }
 912 
<a name="61" id="anc61"></a><span class="line-modified"> 913 inline void InspectorInstrumentation::didEvaluateScript(Frame&amp; frame)</span>
 914 {
 915     FAST_RETURN_IF_NO_FRONTENDS(void());
<a name="62" id="anc62"></a><span class="line-modified"> 916     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 917         didEvaluateScriptImpl(*instrumentingAgents, frame);</span>
 918 }
 919 
<a name="63" id="anc63"></a><span class="line-modified"> 920 inline void InspectorInstrumentation::willFireTimer(ScriptExecutionContext&amp; context, int timerId, bool oneShot)</span>
 921 {
<a name="64" id="anc64"></a><span class="line-modified"> 922     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified"> 923     if (auto* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified"> 924         willFireTimerImpl(*instrumentingAgents, timerId, oneShot, context);</span>

 925 }
 926 
<a name="65" id="anc65"></a><span class="line-modified"> 927 inline void InspectorInstrumentation::didFireTimer(ScriptExecutionContext&amp; context)</span>
 928 {
 929     FAST_RETURN_IF_NO_FRONTENDS(void());
<a name="66" id="anc66"></a><span class="line-modified"> 930     if (auto* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified"> 931         didFireTimerImpl(*instrumentingAgents);</span>
 932 }
 933 
 934 inline void InspectorInstrumentation::didInvalidateLayout(Frame&amp; frame)
 935 {
 936     FAST_RETURN_IF_NO_FRONTENDS(void());
 937     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 938         didInvalidateLayoutImpl(*instrumentingAgents, frame);
 939 }
 940 
<a name="67" id="anc67"></a><span class="line-modified"> 941 inline void InspectorInstrumentation::willLayout(Frame&amp; frame)</span>
 942 {
<a name="68" id="anc68"></a><span class="line-modified"> 943     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified"> 944     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 945         willLayoutImpl(*instrumentingAgents, frame);</span>

 946 }
 947 
<a name="69" id="anc69"></a><span class="line-modified"> 948 inline void InspectorInstrumentation::didLayout(Frame&amp; frame, RenderObject&amp; root)</span>
 949 {
 950     FAST_RETURN_IF_NO_FRONTENDS(void());
<a name="70" id="anc70"></a><span class="line-modified"> 951     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 952         didLayoutImpl(*instrumentingAgents, root);</span>
 953 }
 954 
 955 inline void InspectorInstrumentation::didScroll(Page&amp; page)
 956 {
 957     FAST_RETURN_IF_NO_FRONTENDS(void());
 958     didScrollImpl(instrumentingAgentsForPage(page));
 959 }
 960 
 961 inline void InspectorInstrumentation::willComposite(Frame&amp; frame)
 962 {
 963     FAST_RETURN_IF_NO_FRONTENDS(void());
 964     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 965         willCompositeImpl(*instrumentingAgents, frame);
 966 }
 967 
 968 inline void InspectorInstrumentation::didComposite(Frame&amp; frame)
 969 {
 970     FAST_RETURN_IF_NO_FRONTENDS(void());
 971     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 972         didCompositeImpl(*instrumentingAgents);
 973 }
 974 
 975 inline void InspectorInstrumentation::willPaint(RenderObject&amp; renderer)
 976 {
 977     FAST_RETURN_IF_NO_FRONTENDS(void());
 978     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForRenderer(renderer))
 979         return willPaintImpl(*instrumentingAgents, renderer);
 980 }
 981 
 982 inline void InspectorInstrumentation::didPaint(RenderObject&amp; renderer, const LayoutRect&amp; rect)
 983 {
 984     FAST_RETURN_IF_NO_FRONTENDS(void());
 985     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForRenderer(renderer))
 986         didPaintImpl(*instrumentingAgents, renderer, rect);
 987 }
 988 
<a name="71" id="anc71"></a><span class="line-modified"> 989 inline void InspectorInstrumentation::willRecalculateStyle(Document&amp; document)</span>
 990 {
<a name="72" id="anc72"></a><span class="line-modified"> 991     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified"> 992     if (auto* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified"> 993         willRecalculateStyleImpl(*instrumentingAgents, document);</span>

 994 }
 995 
<a name="73" id="anc73"></a><span class="line-modified"> 996 inline void InspectorInstrumentation::didRecalculateStyle(Document&amp; document)</span>
 997 {
 998     FAST_RETURN_IF_NO_FRONTENDS(void());
<a name="74" id="anc74"></a><span class="line-modified"> 999     if (auto* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified">1000         didRecalculateStyleImpl(*instrumentingAgents);</span>
1001 }
1002 
1003 inline void InspectorInstrumentation::didScheduleStyleRecalculation(Document&amp; document)
1004 {
1005     FAST_RETURN_IF_NO_FRONTENDS(void());
1006     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1007         didScheduleStyleRecalculationImpl(*instrumentingAgents, document);
1008 }
1009 
1010 inline void InspectorInstrumentation::applyUserAgentOverride(Frame&amp; frame, String&amp; userAgent)
1011 {
1012     FAST_RETURN_IF_NO_FRONTENDS(void());
1013     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1014         applyUserAgentOverrideImpl(*instrumentingAgents, userAgent);
1015 }
1016 
1017 inline void InspectorInstrumentation::applyEmulatedMedia(Frame&amp; frame, String&amp; media)
1018 {
1019     FAST_RETURN_IF_NO_FRONTENDS(void());
1020     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1021         applyEmulatedMediaImpl(*instrumentingAgents, media);
1022 }
1023 
1024 inline void InspectorInstrumentation::willSendRequest(Frame* frame, unsigned long identifier, DocumentLoader* loader, ResourceRequest&amp; request, const ResourceResponse&amp; redirectResponse)
1025 {
1026     FAST_RETURN_IF_NO_FRONTENDS(void());
1027     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1028         willSendRequestImpl(*instrumentingAgents, identifier, loader, request, redirectResponse);
1029 }
1030 
1031 inline void InspectorInstrumentation::willSendRequest(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, ResourceRequest&amp; request)
1032 {
1033     FAST_RETURN_IF_NO_FRONTENDS(void());
1034     willSendRequestImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, nullptr, request, ResourceResponse { });
1035 }
1036 
1037 inline void InspectorInstrumentation::willSendRequestOfType(Frame* frame, unsigned long identifier, DocumentLoader* loader, ResourceRequest&amp; request, LoadType loadType)
1038 {
1039     FAST_RETURN_IF_NO_FRONTENDS(void());
1040     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1041         willSendRequestOfTypeImpl(*instrumentingAgents, identifier, loader, request, loadType);
1042 }
1043 
1044 inline void InspectorInstrumentation::didLoadResourceFromMemoryCache(Page&amp; page, DocumentLoader* loader, CachedResource* resource)
1045 {
1046     FAST_RETURN_IF_NO_FRONTENDS(void());
1047     didLoadResourceFromMemoryCacheImpl(instrumentingAgentsForPage(page), loader, resource);
1048 }
1049 
1050 inline void InspectorInstrumentation::didReceiveResourceResponse(Frame&amp; frame, unsigned long identifier, DocumentLoader* loader, const ResourceResponse&amp; response, ResourceLoader* resourceLoader)
1051 {
1052     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1053         didReceiveResourceResponseImpl(*instrumentingAgents, identifier, loader, response, resourceLoader);
1054 }
1055 
1056 inline void InspectorInstrumentation::didReceiveResourceResponse(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, const ResourceResponse&amp; response)
1057 {
1058     didReceiveResourceResponseImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, nullptr, response, nullptr);
1059 }
1060 
1061 inline void InspectorInstrumentation::didReceiveThreadableLoaderResponse(DocumentThreadableLoader&amp; documentThreadableLoader, unsigned long identifier)
1062 {
1063     FAST_RETURN_IF_NO_FRONTENDS(void());
1064     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(documentThreadableLoader.document()))
1065         didReceiveThreadableLoaderResponseImpl(*instrumentingAgents, documentThreadableLoader, identifier);
1066 }
1067 
1068 inline void InspectorInstrumentation::didReceiveData(Frame* frame, unsigned long identifier, const char* data, int dataLength, int encodedDataLength)
1069 {
1070     FAST_RETURN_IF_NO_FRONTENDS(void());
1071     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1072         didReceiveDataImpl(*instrumentingAgents, identifier, data, dataLength, encodedDataLength);
1073 }
1074 
1075 inline void InspectorInstrumentation::didReceiveData(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, const char* data, int dataLength)
1076 {
1077     FAST_RETURN_IF_NO_FRONTENDS(void());
1078     didReceiveDataImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, data, dataLength, dataLength);
1079 }
1080 
1081 inline void InspectorInstrumentation::didFinishLoading(Frame* frame, DocumentLoader* loader, unsigned long identifier, const NetworkLoadMetrics&amp; networkLoadMetrics, ResourceLoader* resourceLoader)
1082 {
1083     FAST_RETURN_IF_NO_FRONTENDS(void());
1084     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1085         didFinishLoadingImpl(*instrumentingAgents, identifier, loader, networkLoadMetrics, resourceLoader);
1086 }
1087 
1088 inline void InspectorInstrumentation::didFinishLoading(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, const NetworkLoadMetrics&amp; networkLoadMetrics)
1089 {
1090     FAST_RETURN_IF_NO_FRONTENDS(void());
1091     didFinishLoadingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, nullptr, networkLoadMetrics, nullptr);
1092 }
1093 
1094 inline void InspectorInstrumentation::didFailLoading(Frame* frame, DocumentLoader* loader, unsigned long identifier, const ResourceError&amp; error)
1095 {
1096     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1097         didFailLoadingImpl(*instrumentingAgents, identifier, loader, error);
1098 }
1099 
1100 inline void InspectorInstrumentation::didFailLoading(WorkerGlobalScope&amp; workerGlobalScope, unsigned long identifier, const ResourceError&amp; error)
1101 {
1102     didFailLoadingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), identifier, nullptr, error);
1103 }
1104 
1105 inline void InspectorInstrumentation::continueAfterXFrameOptionsDenied(Frame&amp; frame, unsigned long identifier, DocumentLoader&amp; loader, const ResourceResponse&amp; response)
1106 {
1107     // Treat the same as didReceiveResponse.
1108     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1109         didReceiveResourceResponseImpl(*instrumentingAgents, identifier, &amp;loader, response, nullptr);
1110 }
1111 
1112 inline void InspectorInstrumentation::continueWithPolicyDownload(Frame&amp; frame, unsigned long identifier, DocumentLoader&amp; loader, const ResourceResponse&amp; response)
1113 {
1114     // Treat the same as didReceiveResponse.
1115     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1116         didReceiveResourceResponseImpl(*instrumentingAgents, identifier, &amp;loader, response, nullptr);
1117 }
1118 
1119 inline void InspectorInstrumentation::continueWithPolicyIgnore(Frame&amp; frame, unsigned long identifier, DocumentLoader&amp; loader, const ResourceResponse&amp; response)
1120 {
1121     // Treat the same as didReceiveResponse.
1122     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1123         didReceiveResourceResponseImpl(*instrumentingAgents, identifier, &amp;loader, response, nullptr);
1124 }
1125 
1126 inline void InspectorInstrumentation::willLoadXHRSynchronously(ScriptExecutionContext* context)
1127 {
1128     FAST_RETURN_IF_NO_FRONTENDS(void());
1129     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1130         willLoadXHRSynchronouslyImpl(*instrumentingAgents);
1131 }
1132 
1133 inline void InspectorInstrumentation::didLoadXHRSynchronously(ScriptExecutionContext* context)
1134 {
1135     FAST_RETURN_IF_NO_FRONTENDS(void());
1136     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1137         didLoadXHRSynchronouslyImpl(*instrumentingAgents);
1138 }
1139 
1140 inline void InspectorInstrumentation::scriptImported(ScriptExecutionContext&amp; context, unsigned long identifier, const String&amp; sourceString)
1141 {
1142     FAST_RETURN_IF_NO_FRONTENDS(void());
1143     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1144         scriptImportedImpl(*instrumentingAgents, identifier, sourceString);
1145 }
1146 
1147 inline void InspectorInstrumentation::scriptExecutionBlockedByCSP(ScriptExecutionContext* context, const String&amp; directiveText)
1148 {
1149     FAST_RETURN_IF_NO_FRONTENDS(void());
1150     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1151         scriptExecutionBlockedByCSPImpl(*instrumentingAgents, directiveText);
1152 }
1153 
1154 inline void InspectorInstrumentation::didReceiveScriptResponse(ScriptExecutionContext* context, unsigned long identifier)
1155 {
1156     FAST_RETURN_IF_NO_FRONTENDS(void());
1157     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1158         didReceiveScriptResponseImpl(*instrumentingAgents, identifier);
1159 }
1160 
1161 inline void InspectorInstrumentation::domContentLoadedEventFired(Frame&amp; frame)
1162 {
1163     FAST_RETURN_IF_NO_FRONTENDS(void());
1164     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1165         domContentLoadedEventFiredImpl(*instrumentingAgents, frame);
1166 }
1167 
1168 inline void InspectorInstrumentation::loadEventFired(Frame* frame)
1169 {
1170     FAST_RETURN_IF_NO_FRONTENDS(void());
1171     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1172         loadEventFiredImpl(*instrumentingAgents, frame);
1173 }
1174 
1175 inline void InspectorInstrumentation::frameDetachedFromParent(Frame&amp; frame)
1176 {
1177     FAST_RETURN_IF_NO_FRONTENDS(void());
1178     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1179         frameDetachedFromParentImpl(*instrumentingAgents, frame);
1180 }
1181 
1182 inline void InspectorInstrumentation::didCommitLoad(Frame&amp; frame, DocumentLoader* loader)
1183 {
1184     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1185         didCommitLoadImpl(*instrumentingAgents, frame, loader);
1186 }
1187 
1188 inline void InspectorInstrumentation::frameDocumentUpdated(Frame&amp; frame)
1189 {
1190     FAST_RETURN_IF_NO_FRONTENDS(void());
1191     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1192         frameDocumentUpdatedImpl(*instrumentingAgents, frame);
1193 }
1194 
1195 inline void InspectorInstrumentation::loaderDetachedFromFrame(Frame&amp; frame, DocumentLoader&amp; loader)
1196 {
1197     FAST_RETURN_IF_NO_FRONTENDS(void());
1198     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1199         loaderDetachedFromFrameImpl(*instrumentingAgents, loader);
1200 }
1201 
1202 inline void InspectorInstrumentation::frameStartedLoading(Frame&amp; frame)
1203 {
1204     FAST_RETURN_IF_NO_FRONTENDS(void());
1205     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1206         frameStartedLoadingImpl(*instrumentingAgents, frame);
1207 }
1208 
1209 inline void InspectorInstrumentation::frameStoppedLoading(Frame&amp; frame)
1210 {
1211     FAST_RETURN_IF_NO_FRONTENDS(void());
1212     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1213         frameStoppedLoadingImpl(*instrumentingAgents, frame);
1214 }
1215 
1216 inline void InspectorInstrumentation::frameScheduledNavigation(Frame&amp; frame, Seconds delay)
1217 {
1218     FAST_RETURN_IF_NO_FRONTENDS(void());
1219     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1220         frameScheduledNavigationImpl(*instrumentingAgents, frame, delay);
1221 }
1222 
1223 inline void InspectorInstrumentation::frameClearedScheduledNavigation(Frame&amp; frame)
1224 {
1225     FAST_RETURN_IF_NO_FRONTENDS(void());
1226     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1227         frameClearedScheduledNavigationImpl(*instrumentingAgents, frame);
1228 }
1229 
1230 inline void InspectorInstrumentation::defaultAppearanceDidChange(Page&amp; page, bool useDarkAppearance)
1231 {
1232     FAST_RETURN_IF_NO_FRONTENDS(void());
1233     defaultAppearanceDidChangeImpl(instrumentingAgentsForPage(page), useDarkAppearance);
1234 }
1235 
1236 inline void InspectorInstrumentation::willDestroyCachedResource(CachedResource&amp; cachedResource)
1237 {
1238     FAST_RETURN_IF_NO_FRONTENDS(void());
1239     willDestroyCachedResourceImpl(cachedResource);
1240 }
1241 
<a name="75" id="anc75"></a><span class="line-added">1242 inline bool InspectorInstrumentation::willInterceptRequest(const Frame* frame, const ResourceRequest&amp; request)</span>
<span class="line-added">1243 {</span>
<span class="line-added">1244     FAST_RETURN_IF_NO_FRONTENDS(false);</span>
<span class="line-added">1245     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-added">1246         return willInterceptRequestImpl(*instrumentingAgents, request);</span>
<span class="line-added">1247     return false;</span>
<span class="line-added">1248 }</span>
<span class="line-added">1249 </span>
<span class="line-added">1250 inline bool InspectorInstrumentation::shouldInterceptResponse(const Frame&amp; frame, const ResourceResponse&amp; response)</span>
<span class="line-added">1251 {</span>
<span class="line-added">1252     ASSERT(InspectorInstrumentationPublic::hasFrontends());</span>
<span class="line-added">1253     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-added">1254         return shouldInterceptResponseImpl(*instrumentingAgents, response);</span>
<span class="line-added">1255     return false;</span>
<span class="line-added">1256 }</span>
<span class="line-added">1257 </span>
<span class="line-added">1258 inline void InspectorInstrumentation::interceptResponse(const Frame&amp; frame, const ResourceResponse&amp; response, unsigned long identifier, CompletionHandler&lt;void(const ResourceResponse&amp;, RefPtr&lt;SharedBuffer&gt;)&gt;&amp;&amp; handler)</span>
<span class="line-added">1259 {</span>
<span class="line-added">1260     ASSERT(InspectorInstrumentation::shouldInterceptResponse(frame, response));</span>
<span class="line-added">1261     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-added">1262         interceptResponseImpl(*instrumentingAgents, response, identifier, WTFMove(handler));</span>
<span class="line-added">1263 }</span>
<span class="line-added">1264 </span>
1265 inline void InspectorInstrumentation::didOpenDatabase(Database&amp; database)
1266 {
1267     FAST_RETURN_IF_NO_FRONTENDS(void());
1268     if (auto* instrumentingAgents = instrumentingAgentsForContext(database.document()))
1269         didOpenDatabaseImpl(*instrumentingAgents, database);
1270 }
1271 
1272 inline void InspectorInstrumentation::didDispatchDOMStorageEvent(Page&amp; page, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType storageType, SecurityOrigin* securityOrigin)
1273 {
1274     FAST_RETURN_IF_NO_FRONTENDS(void());
1275     didDispatchDOMStorageEventImpl(instrumentingAgentsForPage(page), key, oldValue, newValue, storageType, securityOrigin);
1276 }
1277 
1278 inline bool InspectorInstrumentation::shouldWaitForDebuggerOnStart(ScriptExecutionContext&amp; context)
1279 {
1280     FAST_RETURN_IF_NO_FRONTENDS(false);
1281     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1282         return shouldWaitForDebuggerOnStartImpl(*instrumentingAgents);
1283     return false;
1284 }
1285 
1286 inline void InspectorInstrumentation::workerStarted(ScriptExecutionContext&amp; context, WorkerInspectorProxy* proxy, const URL&amp; url)
1287 {
1288     FAST_RETURN_IF_NO_FRONTENDS(void());
1289     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1290         workerStartedImpl(*instrumentingAgents, proxy, url);
1291 }
1292 
1293 inline void InspectorInstrumentation::workerTerminated(ScriptExecutionContext&amp; context, WorkerInspectorProxy* proxy)
1294 {
1295     FAST_RETURN_IF_NO_FRONTENDS(void());
1296     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1297         workerTerminatedImpl(*instrumentingAgents, proxy);
1298 }
1299 
1300 inline void InspectorInstrumentation::didCreateWebSocket(Document* document, unsigned long identifier, const URL&amp; requestURL)
1301 {
1302     FAST_RETURN_IF_NO_FRONTENDS(void());
1303     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1304         didCreateWebSocketImpl(*instrumentingAgents, identifier, requestURL);
1305 }
1306 
1307 inline void InspectorInstrumentation::willSendWebSocketHandshakeRequest(Document* document, unsigned long identifier, const ResourceRequest&amp; request)
1308 {
1309     FAST_RETURN_IF_NO_FRONTENDS(void());
1310     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1311         willSendWebSocketHandshakeRequestImpl(*instrumentingAgents, identifier, request);
1312 }
1313 
1314 inline void InspectorInstrumentation::didReceiveWebSocketHandshakeResponse(Document* document, unsigned long identifier, const ResourceResponse&amp; response)
1315 {
1316     FAST_RETURN_IF_NO_FRONTENDS(void());
1317     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1318         didReceiveWebSocketHandshakeResponseImpl(*instrumentingAgents, identifier, response);
1319 }
1320 
1321 inline void InspectorInstrumentation::didCloseWebSocket(Document* document, unsigned long identifier)
1322 {
1323     FAST_RETURN_IF_NO_FRONTENDS(void());
1324     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1325         didCloseWebSocketImpl(*instrumentingAgents, identifier);
1326 }
1327 
1328 inline void InspectorInstrumentation::didReceiveWebSocketFrame(Document* document, unsigned long identifier, const WebSocketFrame&amp; frame)
1329 {
1330     FAST_RETURN_IF_NO_FRONTENDS(void());
1331     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1332         didReceiveWebSocketFrameImpl(*instrumentingAgents, identifier, frame);
1333 }
1334 
1335 inline void InspectorInstrumentation::didReceiveWebSocketFrameError(Document* document, unsigned long identifier, const String&amp; errorMessage)
1336 {
1337     FAST_RETURN_IF_NO_FRONTENDS(void());
1338     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1339         didReceiveWebSocketFrameErrorImpl(*instrumentingAgents, identifier, errorMessage);
1340 }
1341 
1342 inline void InspectorInstrumentation::didSendWebSocketFrame(Document* document, unsigned long identifier, const WebSocketFrame&amp; frame)
1343 {
1344     FAST_RETURN_IF_NO_FRONTENDS(void());
1345     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1346         didSendWebSocketFrameImpl(*instrumentingAgents, identifier, frame);
1347 }
1348 
1349 #if ENABLE(RESOURCE_USAGE)
1350 inline void InspectorInstrumentation::didHandleMemoryPressure(Page&amp; page, Critical critical)
1351 {
1352     FAST_RETURN_IF_NO_FRONTENDS(void());
1353     didHandleMemoryPressureImpl(instrumentingAgentsForPage(page), critical);
1354 }
1355 #endif
1356 
1357 inline void InspectorInstrumentation::didChangeCSSCanvasClientNodes(CanvasBase&amp; canvasBase)
1358 {
1359     FAST_RETURN_IF_NO_FRONTENDS(void());
1360     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(canvasBase.scriptExecutionContext()))
1361         didChangeCSSCanvasClientNodesImpl(*instrumentingAgents, canvasBase);
1362 }
1363 
1364 inline void InspectorInstrumentation::didCreateCanvasRenderingContext(CanvasRenderingContext&amp; context)
1365 {
1366     FAST_RETURN_IF_NO_FRONTENDS(void());
1367     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1368         didCreateCanvasRenderingContextImpl(*instrumentingAgents, context);
1369 }
1370 
1371 inline void InspectorInstrumentation::didChangeCanvasMemory(CanvasRenderingContext&amp; context)
1372 {
1373     FAST_RETURN_IF_NO_FRONTENDS(void());
1374     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1375         didChangeCanvasMemoryImpl(*instrumentingAgents, context);
1376 }
1377 
1378 inline void InspectorInstrumentation::recordCanvasAction(CanvasRenderingContext&amp; context, const String&amp; name, std::initializer_list&lt;RecordCanvasActionVariant&gt;&amp;&amp; parameters)
1379 {
1380     FAST_RETURN_IF_NO_FRONTENDS(void());
1381     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1382         recordCanvasActionImpl(*instrumentingAgents, context, name, WTFMove(parameters));
1383 }
1384 
1385 inline void InspectorInstrumentation::didFinishRecordingCanvasFrame(CanvasRenderingContext&amp; context, bool forceDispatch)
1386 {
1387     FAST_RETURN_IF_NO_FRONTENDS(void());
1388     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1389         didFinishRecordingCanvasFrameImpl(*instrumentingAgents, context, forceDispatch);
1390 }
1391 
1392 #if ENABLE(WEBGL)
1393 inline void InspectorInstrumentation::didEnableExtension(WebGLRenderingContextBase&amp; contextWebGLBase, const String&amp; extension)
1394 {
1395     FAST_RETURN_IF_NO_FRONTENDS(void());
1396     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
1397         didEnableExtensionImpl(*instrumentingAgents, contextWebGLBase, extension);
1398 }
1399 
<a name="76" id="anc76"></a><span class="line-modified">1400 inline void InspectorInstrumentation::didCreateWebGLProgram(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)</span>
1401 {
1402     FAST_RETURN_IF_NO_FRONTENDS(void());
1403     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
<a name="77" id="anc77"></a><span class="line-modified">1404         didCreateWebGLProgramImpl(*instrumentingAgents, contextWebGLBase, program);</span>
1405 }
1406 
<a name="78" id="anc78"></a><span class="line-modified">1407 inline void InspectorInstrumentation::willDestroyWebGLProgram(WebGLProgram&amp; program)</span>
1408 {
1409     FAST_RETURN_IF_NO_FRONTENDS(void());
<a name="79" id="anc79"></a><span class="line-modified">1410     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(program.scriptExecutionContext()))</span>
<span class="line-modified">1411         willDestroyWebGLProgramImpl(*instrumentingAgents, program);</span>
1412 }
1413 
<a name="80" id="anc80"></a><span class="line-modified">1414 inline bool InspectorInstrumentation::isWebGLProgramDisabled(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)</span>
1415 {
1416     FAST_RETURN_IF_NO_FRONTENDS(false);
1417     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
<a name="81" id="anc81"></a><span class="line-modified">1418         return isWebGLProgramDisabledImpl(*instrumentingAgents, program);</span>
1419     return false;
1420 }
1421 
<a name="82" id="anc82"></a><span class="line-modified">1422 inline bool InspectorInstrumentation::isWebGLProgramHighlighted(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)</span>
1423 {
1424     FAST_RETURN_IF_NO_FRONTENDS(false);
1425     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
<a name="83" id="anc83"></a><span class="line-modified">1426         return isWebGLProgramHighlightedImpl(*instrumentingAgents, program);</span>
1427     return false;
1428 }
1429 #endif
1430 
<a name="84" id="anc84"></a><span class="line-added">1431 #if ENABLE(WEBGPU)</span>
<span class="line-added">1432 inline void InspectorInstrumentation::didCreateWebGPUDevice(WebGPUDevice&amp; device)</span>
<span class="line-added">1433 {</span>
<span class="line-added">1434     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1435     if (auto* instrumentingAgents = instrumentingAgentsForWebGPUDevice(device))</span>
<span class="line-added">1436         didCreateWebGPUDeviceImpl(*instrumentingAgents, device);</span>
<span class="line-added">1437 }</span>
<span class="line-added">1438 </span>
<span class="line-added">1439 inline void InspectorInstrumentation::willDestroyWebGPUDevice(WebGPUDevice&amp; device)</span>
<span class="line-added">1440 {</span>
<span class="line-added">1441     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1442     if (auto* instrumentingAgents = instrumentingAgentsForWebGPUDevice(device))</span>
<span class="line-added">1443         willDestroyWebGPUDeviceImpl(*instrumentingAgents, device);</span>
<span class="line-added">1444 }</span>
<span class="line-added">1445 </span>
<span class="line-added">1446 inline void InspectorInstrumentation::willConfigureSwapChain(GPUCanvasContext&amp; contextGPU, WebGPUSwapChain&amp; newSwapChain)</span>
<span class="line-added">1447 {</span>
<span class="line-added">1448     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1449     if (auto* instrumentingAgents = instrumentingAgentsForContext(contextGPU.canvasBase().scriptExecutionContext()))</span>
<span class="line-added">1450         willConfigureSwapChainImpl(*instrumentingAgents, contextGPU, newSwapChain);</span>
<span class="line-added">1451 }</span>
<span class="line-added">1452 </span>
<span class="line-added">1453 inline void InspectorInstrumentation::didCreateWebGPUPipeline(WebGPUDevice&amp; device, WebGPUPipeline&amp; pipeline)</span>
<span class="line-added">1454 {</span>
<span class="line-added">1455     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1456     if (auto* instrumentingAgents = instrumentingAgentsForWebGPUDevice(device))</span>
<span class="line-added">1457         didCreateWebGPUPipelineImpl(*instrumentingAgents, device, pipeline);</span>
<span class="line-added">1458 }</span>
<span class="line-added">1459 </span>
<span class="line-added">1460 inline void InspectorInstrumentation::willDestroyWebGPUPipeline(WebGPUPipeline&amp; pipeline)</span>
<span class="line-added">1461 {</span>
<span class="line-added">1462     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1463     if (auto* instrumentingAgents = instrumentingAgentsForContext(pipeline.scriptExecutionContext()))</span>
<span class="line-added">1464         willDestroyWebGPUPipelineImpl(*instrumentingAgents, pipeline);</span>
<span class="line-added">1465 }</span>
<span class="line-added">1466 #endif</span>
<span class="line-added">1467 </span>
<span class="line-added">1468 inline void InspectorInstrumentation::willApplyKeyframeEffect(Element&amp; target, KeyframeEffect&amp; effect, ComputedEffectTiming computedTiming)</span>
<span class="line-added">1469 {</span>
<span class="line-added">1470     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1471     if (auto* instrumentingAgents = instrumentingAgentsForDocument(target.document()))</span>
<span class="line-added">1472         willApplyKeyframeEffectImpl(*instrumentingAgents, target, effect, computedTiming);</span>
<span class="line-added">1473 }</span>
<span class="line-added">1474 </span>
<span class="line-added">1475 inline void InspectorInstrumentation::didSetWebAnimationEffect(WebAnimation&amp; animation)</span>
<span class="line-added">1476 {</span>
<span class="line-added">1477     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1478     if (auto* instrumentingAgents = instrumentingAgentsForContext(animation.scriptExecutionContext()))</span>
<span class="line-added">1479         didSetWebAnimationEffectImpl(*instrumentingAgents, animation);</span>
<span class="line-added">1480 }</span>
<span class="line-added">1481 </span>
<span class="line-added">1482 inline void InspectorInstrumentation::didChangeWebAnimationEffectTiming(WebAnimation&amp; animation)</span>
<span class="line-added">1483 {</span>
<span class="line-added">1484     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1485     if (auto* instrumentingAgents = instrumentingAgentsForContext(animation.scriptExecutionContext()))</span>
<span class="line-added">1486         didChangeWebAnimationEffectTimingImpl(*instrumentingAgents, animation);</span>
<span class="line-added">1487 }</span>
<span class="line-added">1488 </span>
<span class="line-added">1489 inline void InspectorInstrumentation::didChangeWebAnimationEffectTarget(WebAnimation&amp; animation)</span>
<span class="line-added">1490 {</span>
<span class="line-added">1491     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1492     if (auto* instrumentingAgents = instrumentingAgentsForContext(animation.scriptExecutionContext()))</span>
<span class="line-added">1493         didChangeWebAnimationEffectTargetImpl(*instrumentingAgents, animation);</span>
<span class="line-added">1494 }</span>
<span class="line-added">1495 </span>
<span class="line-added">1496 inline void InspectorInstrumentation::didCreateWebAnimation(WebAnimation&amp; animation)</span>
<span class="line-added">1497 {</span>
<span class="line-added">1498     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1499     if (auto* instrumentingAgents = instrumentingAgentsForContext(animation.scriptExecutionContext()))</span>
<span class="line-added">1500         didCreateWebAnimationImpl(*instrumentingAgents, animation);</span>
<span class="line-added">1501 }</span>
<span class="line-added">1502 </span>
<span class="line-added">1503 inline void InspectorInstrumentation::willDestroyWebAnimation(WebAnimation&amp; animation)</span>
<span class="line-added">1504 {</span>
<span class="line-added">1505     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1506     if (auto* instrumentingAgents = instrumentingAgentsForContext(animation.scriptExecutionContext()))</span>
<span class="line-added">1507         willDestroyWebAnimationImpl(*instrumentingAgents, animation);</span>
<span class="line-added">1508 }</span>
<span class="line-added">1509 </span>
1510 inline void InspectorInstrumentation::networkStateChanged(Page&amp; page)
1511 {
1512     FAST_RETURN_IF_NO_FRONTENDS(void());
1513     networkStateChangedImpl(instrumentingAgentsForPage(page));
1514 }
1515 
1516 inline void InspectorInstrumentation::updateApplicationCacheStatus(Frame* frame)
1517 {
1518     FAST_RETURN_IF_NO_FRONTENDS(void());
1519     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1520         updateApplicationCacheStatusImpl(*instrumentingAgents, *frame);
1521 }
1522 
1523 inline void InspectorInstrumentation::addMessageToConsole(Page&amp; page, std::unique_ptr&lt;Inspector::ConsoleMessage&gt; message)
1524 {
1525     addMessageToConsoleImpl(instrumentingAgentsForPage(page), WTFMove(message));
1526 }
1527 
1528 inline void InspectorInstrumentation::addMessageToConsole(WorkerGlobalScope&amp; workerGlobalScope, std::unique_ptr&lt;Inspector::ConsoleMessage&gt; message)
1529 {
1530     addMessageToConsoleImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), WTFMove(message));
1531 }
1532 
<a name="85" id="anc85"></a><span class="line-modified">1533 inline void InspectorInstrumentation::consoleCount(Page&amp; page, JSC::JSGlobalObject* state, const String&amp; label)</span>
1534 {
1535     consoleCountImpl(instrumentingAgentsForPage(page), state, label);
1536 }
1537 
<a name="86" id="anc86"></a><span class="line-modified">1538 inline void InspectorInstrumentation::consoleCount(WorkerGlobalScope&amp; workerGlobalScope, JSC::JSGlobalObject* state, const String&amp; label)</span>
1539 {
1540     consoleCountImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), state, label);
1541 }
1542 
<a name="87" id="anc87"></a><span class="line-modified">1543 inline void InspectorInstrumentation::consoleCountReset(Page&amp; page, JSC::JSGlobalObject* state, const String&amp; label)</span>
1544 {
1545     consoleCountResetImpl(instrumentingAgentsForPage(page), state, label);
1546 }
1547 
<a name="88" id="anc88"></a><span class="line-modified">1548 inline void InspectorInstrumentation::consoleCountReset(WorkerGlobalScope&amp; workerGlobalScope, JSC::JSGlobalObject* state, const String&amp; label)</span>
1549 {
1550     consoleCountResetImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), state, label);
1551 }
1552 
1553 inline void InspectorInstrumentation::takeHeapSnapshot(Frame&amp; frame, const String&amp; title)
1554 {
1555     FAST_RETURN_IF_NO_FRONTENDS(void());
1556     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1557         takeHeapSnapshotImpl(*instrumentingAgents, title);
1558 }
1559 
<a name="89" id="anc89"></a><span class="line-modified">1560 inline void InspectorInstrumentation::startConsoleTiming(Frame&amp; frame, JSC::JSGlobalObject* exec, const String&amp; label)</span>
1561 {
1562     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1563         startConsoleTimingImpl(*instrumentingAgents, frame, exec, label);
1564 }
1565 
<a name="90" id="anc90"></a><span class="line-modified">1566 inline void InspectorInstrumentation::startConsoleTiming(WorkerGlobalScope&amp; workerGlobalScope, JSC::JSGlobalObject* exec, const String&amp; label)</span>
1567 {
1568     startConsoleTimingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), exec, label);
1569 }
1570 
<a name="91" id="anc91"></a><span class="line-modified">1571 inline void InspectorInstrumentation::logConsoleTiming(Frame&amp; frame, JSC::JSGlobalObject* exec, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)</span>
1572 {
1573     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1574         logConsoleTimingImpl(*instrumentingAgents, exec, label, WTFMove(arguments));
1575 }
1576 
<a name="92" id="anc92"></a><span class="line-modified">1577 inline void InspectorInstrumentation::logConsoleTiming(WorkerGlobalScope&amp; workerGlobalScope, JSC::JSGlobalObject* exec, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)</span>
1578 {
1579     logConsoleTimingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), exec, label, WTFMove(arguments));
1580 }
1581 
<a name="93" id="anc93"></a><span class="line-modified">1582 inline void InspectorInstrumentation::stopConsoleTiming(Frame&amp; frame, JSC::JSGlobalObject* exec, const String&amp; label)</span>
1583 {
1584     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1585         stopConsoleTimingImpl(*instrumentingAgents, frame, exec, label);
1586 }
1587 
<a name="94" id="anc94"></a><span class="line-modified">1588 inline void InspectorInstrumentation::stopConsoleTiming(WorkerGlobalScope&amp; workerGlobalScope, JSC::JSGlobalObject* exec, const String&amp; label)</span>
1589 {
1590     stopConsoleTimingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), exec, label);
1591 }
1592 
1593 inline void InspectorInstrumentation::consoleTimeStamp(Frame&amp; frame, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)
1594 {
1595     FAST_RETURN_IF_NO_FRONTENDS(void());
1596     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1597         consoleTimeStampImpl(*instrumentingAgents, frame, WTFMove(arguments));
1598 }
1599 
<a name="95" id="anc95"></a><span class="line-modified">1600 inline void InspectorInstrumentation::startProfiling(Page&amp; page, JSC::JSGlobalObject* exec, const String &amp;title)</span>
1601 {
1602     FAST_RETURN_IF_NO_FRONTENDS(void());
1603     startProfilingImpl(instrumentingAgentsForPage(page), exec, title);
1604 }
1605 
<a name="96" id="anc96"></a><span class="line-modified">1606 inline void InspectorInstrumentation::stopProfiling(Page&amp; page, JSC::JSGlobalObject* exec, const String &amp;title)</span>
1607 {
1608     FAST_RETURN_IF_NO_FRONTENDS(void());
1609     stopProfilingImpl(instrumentingAgentsForPage(page), exec, title);
1610 }
1611 
<a name="97" id="anc97"></a><span class="line-modified">1612 inline void InspectorInstrumentation::consoleStartRecordingCanvas(CanvasRenderingContext&amp; context, JSC::JSGlobalObject&amp; exec, JSC::JSObject* options)</span>
1613 {
<a name="98" id="anc98"></a>
1614     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1615         consoleStartRecordingCanvasImpl(*instrumentingAgents, context, exec, options);
1616 }
1617 
<a name="99" id="anc99"></a><span class="line-added">1618 inline void InspectorInstrumentation::consoleStopRecordingCanvas(CanvasRenderingContext&amp; context)</span>
<span class="line-added">1619 {</span>
<span class="line-added">1620     if (auto* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))</span>
<span class="line-added">1621         consoleStopRecordingCanvasImpl(*instrumentingAgents, context);</span>
<span class="line-added">1622 }</span>
<span class="line-added">1623 </span>
1624 inline void InspectorInstrumentation::didRequestAnimationFrame(Document&amp; document, int callbackId)
1625 {
1626     FAST_RETURN_IF_NO_FRONTENDS(void());
1627     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1628         didRequestAnimationFrameImpl(*instrumentingAgents, callbackId, document);
1629 }
1630 
1631 inline void InspectorInstrumentation::didCancelAnimationFrame(Document&amp; document, int callbackId)
1632 {
1633     FAST_RETURN_IF_NO_FRONTENDS(void());
1634     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1635         didCancelAnimationFrameImpl(*instrumentingAgents, callbackId, document);
1636 }
1637 
<a name="100" id="anc100"></a><span class="line-modified">1638 inline void InspectorInstrumentation::willFireAnimationFrame(Document&amp; document, int callbackId)</span>
1639 {
<a name="101" id="anc101"></a><span class="line-modified">1640     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified">1641     if (auto* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified">1642         willFireAnimationFrameImpl(*instrumentingAgents, callbackId, document);</span>

1643 }
1644 
<a name="102" id="anc102"></a><span class="line-modified">1645 inline void InspectorInstrumentation::didFireAnimationFrame(Document&amp; document)</span>
1646 {
1647     FAST_RETURN_IF_NO_FRONTENDS(void());
<a name="103" id="anc103"></a><span class="line-modified">1648     if (auto* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified">1649         didFireAnimationFrameImpl(*instrumentingAgents);</span>
1650 }
1651 
<a name="104" id="anc104"></a><span class="line-modified">1652 inline void InspectorInstrumentation::willFireObserverCallback(ScriptExecutionContext&amp; context, const String&amp; callbackType)</span>
1653 {
<a name="105" id="anc105"></a><span class="line-modified">1654     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified">1655     if (auto* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified">1656         willFireObserverCallbackImpl(*instrumentingAgents, callbackType, context);</span>

1657 }
1658 
<a name="106" id="anc106"></a><span class="line-modified">1659 inline void InspectorInstrumentation::didFireObserverCallback(ScriptExecutionContext&amp; context)</span>
1660 {
1661     FAST_RETURN_IF_NO_FRONTENDS(void());
<a name="107" id="anc107"></a><span class="line-modified">1662     if (auto* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified">1663         didFireObserverCallbackImpl(*instrumentingAgents);</span>
1664 }
1665 
1666 inline void InspectorInstrumentation::layerTreeDidChange(Page* page)
1667 {
1668     FAST_RETURN_IF_NO_FRONTENDS(void());
1669     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
1670         layerTreeDidChangeImpl(*instrumentingAgents);
1671 }
1672 
1673 inline void InspectorInstrumentation::renderLayerDestroyed(Page* page, const RenderLayer&amp; renderLayer)
1674 {
1675     FAST_RETURN_IF_NO_FRONTENDS(void());
1676     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
1677         renderLayerDestroyedImpl(*instrumentingAgents, renderLayer);
1678 }
1679 
1680 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForContext(ScriptExecutionContext* context)
1681 {
1682     return context ? instrumentingAgentsForContext(*context) : nullptr;
1683 }
1684 
<a name="108" id="anc108"></a><span class="line-modified">1685 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForFrame(const Frame* frame)</span>









1686 {
1687     return frame ? instrumentingAgentsForFrame(*frame) : nullptr;
1688 }
1689 
<a name="109" id="anc109"></a><span class="line-modified">1690 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForFrame(const Frame&amp; frame)</span>
1691 {
1692     return instrumentingAgentsForPage(frame.page());
1693 }
1694 
1695 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForDocument(Document* document)
1696 {
1697     return document ? instrumentingAgentsForDocument(*document) : nullptr;
1698 }
1699 
1700 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForDocument(Document&amp; document)
1701 {
1702     Page* page = document.page();
1703     if (!page &amp;&amp; document.templateDocumentHost())
1704         page = document.templateDocumentHost()-&gt;page();
1705     return instrumentingAgentsForPage(page);
1706 }
1707 
1708 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForPage(Page* page)
1709 {
1710     return page ? &amp;instrumentingAgentsForPage(*page) : nullptr;
1711 }
1712 
<a name="110" id="anc110"></a>





1713 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope* workerGlobalScope)
1714 {
1715     return workerGlobalScope ? &amp;instrumentingAgentsForWorkerGlobalScope(*workerGlobalScope) : nullptr;
1716 }
1717 
<a name="111" id="anc111"></a>




1718 inline void InspectorInstrumentation::frontendCreated()
1719 {
1720     ASSERT(isMainThread());
<a name="112" id="anc112"></a><span class="line-modified">1721     ++InspectorInstrumentationPublic::s_frontendCounter;</span>
1722 
<a name="113" id="anc113"></a><span class="line-modified">1723     if (InspectorInstrumentationPublic::s_frontendCounter == 1)</span>
1724         InspectorInstrumentation::firstFrontendCreated();
1725 }
1726 
1727 inline void InspectorInstrumentation::frontendDeleted()
1728 {
1729     ASSERT(isMainThread());
<a name="114" id="anc114"></a><span class="line-modified">1730     --InspectorInstrumentationPublic::s_frontendCounter;</span>
1731 
<a name="115" id="anc115"></a><span class="line-modified">1732     if (!InspectorInstrumentationPublic::s_frontendCounter)</span>
1733         InspectorInstrumentation::lastFrontendDeleted();
1734 }
1735 
1736 } // namespace WebCore
<a name="116" id="anc116"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="116" type="hidden" />
</body>
</html>