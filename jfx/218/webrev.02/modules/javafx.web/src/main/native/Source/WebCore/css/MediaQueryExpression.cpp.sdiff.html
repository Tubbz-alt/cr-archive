<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/css/MediaQueryExpression.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="MediaQueryEvaluator.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="MediaQueryMatcher.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/css/MediaQueryExpression.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 16  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 17  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 18  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 19  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 20  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 21  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 22  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 23  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 24  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 25  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 26  */
 27 
 28 #include &quot;config.h&quot;
 29 #include &quot;MediaQueryExpression.h&quot;
 30 
 31 #include &quot;CSSAspectRatioValue.h&quot;
 32 #include &quot;CSSPrimitiveValue.h&quot;
 33 #include &quot;CSSPropertyParserHelpers.h&quot;
 34 #include &quot;MediaFeatureNames.h&quot;
 35 #include &quot;MediaQueryParserContext.h&quot;
<span class="line-removed"> 36 #include &quot;RuntimeEnabledFeatures.h&quot;</span>
 37 #include &lt;wtf/text/TextStream.h&gt;
 38 #include &lt;wtf/text/StringBuilder.h&gt;
 39 
 40 namespace WebCore {
 41 
 42 static inline bool featureWithValidIdent(const AtomString&amp; mediaFeature, const CSSPrimitiveValue&amp; value, const MediaQueryParserContext&amp; context)
 43 {
<span class="line-modified"> 44     if (value.primitiveType() != CSSPrimitiveValue::UnitType::CSS_IDENT)</span>
 45         return false;
 46 
 47     return mediaFeature == MediaFeatureNames::orientation
 48     || mediaFeature == MediaFeatureNames::colorGamut
 49     || mediaFeature == MediaFeatureNames::anyHover
 50     || mediaFeature == MediaFeatureNames::anyPointer
 51     || mediaFeature == MediaFeatureNames::hover
 52     || mediaFeature == MediaFeatureNames::invertedColors
 53     || mediaFeature == MediaFeatureNames::pointer
 54 #if ENABLE(APPLICATION_MANIFEST)
 55     || mediaFeature == MediaFeatureNames::displayMode
 56 #endif
 57 #if ENABLE(DARK_MODE_CSS)
 58     || (mediaFeature == MediaFeatureNames::prefersColorScheme)
 59 #endif
 60     || mediaFeature == MediaFeatureNames::prefersReducedMotion
<span class="line-modified"> 61     || (mediaFeature == MediaFeatureNames::prefersDarkInterface &amp;&amp; (context.useSystemAppearance || isUASheetBehavior(context.mode)));</span>

 62 }
 63 
 64 static inline bool featureWithValidDensity(const String&amp; mediaFeature, const CSSPrimitiveValue&amp; value)
 65 {
 66     if (!value.isResolution() || value.doubleValue() &lt;= 0)
 67         return false;
 68 
 69     return mediaFeature == MediaFeatureNames::resolution
 70     || mediaFeature == MediaFeatureNames::minResolution
 71     || mediaFeature == MediaFeatureNames::maxResolution;
 72 }
 73 
 74 static inline bool featureWithValidPositiveLength(const String&amp; mediaFeature, const CSSPrimitiveValue&amp; value)
 75 {
 76     if (!(value.isLength() || (value.isNumber() &amp;&amp; !value.doubleValue())) || value.doubleValue() &lt; 0)
 77         return false;
 78 
 79     return mediaFeature == MediaFeatureNames::height
 80     || mediaFeature == MediaFeatureNames::maxHeight
 81     || mediaFeature == MediaFeatureNames::minHeight
</pre>
</td>
<td>
<hr />
<pre>
 16  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 17  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 18  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 19  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 20  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 21  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 22  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 23  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 24  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 25  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 26  */
 27 
 28 #include &quot;config.h&quot;
 29 #include &quot;MediaQueryExpression.h&quot;
 30 
 31 #include &quot;CSSAspectRatioValue.h&quot;
 32 #include &quot;CSSPrimitiveValue.h&quot;
 33 #include &quot;CSSPropertyParserHelpers.h&quot;
 34 #include &quot;MediaFeatureNames.h&quot;
 35 #include &quot;MediaQueryParserContext.h&quot;

 36 #include &lt;wtf/text/TextStream.h&gt;
 37 #include &lt;wtf/text/StringBuilder.h&gt;
 38 
 39 namespace WebCore {
 40 
 41 static inline bool featureWithValidIdent(const AtomString&amp; mediaFeature, const CSSPrimitiveValue&amp; value, const MediaQueryParserContext&amp; context)
 42 {
<span class="line-modified"> 43     if (value.primitiveType() != CSSUnitType::CSS_IDENT)</span>
 44         return false;
 45 
 46     return mediaFeature == MediaFeatureNames::orientation
 47     || mediaFeature == MediaFeatureNames::colorGamut
 48     || mediaFeature == MediaFeatureNames::anyHover
 49     || mediaFeature == MediaFeatureNames::anyPointer
 50     || mediaFeature == MediaFeatureNames::hover
 51     || mediaFeature == MediaFeatureNames::invertedColors
 52     || mediaFeature == MediaFeatureNames::pointer
 53 #if ENABLE(APPLICATION_MANIFEST)
 54     || mediaFeature == MediaFeatureNames::displayMode
 55 #endif
 56 #if ENABLE(DARK_MODE_CSS)
 57     || (mediaFeature == MediaFeatureNames::prefersColorScheme)
 58 #endif
 59     || mediaFeature == MediaFeatureNames::prefersReducedMotion
<span class="line-modified"> 60     || (mediaFeature == MediaFeatureNames::prefersDarkInterface &amp;&amp; (context.useSystemAppearance || isUASheetBehavior(context.mode)))</span>
<span class="line-added"> 61     || mediaFeature == MediaFeatureNames::dynamicRange;</span>
 62 }
 63 
 64 static inline bool featureWithValidDensity(const String&amp; mediaFeature, const CSSPrimitiveValue&amp; value)
 65 {
 66     if (!value.isResolution() || value.doubleValue() &lt;= 0)
 67         return false;
 68 
 69     return mediaFeature == MediaFeatureNames::resolution
 70     || mediaFeature == MediaFeatureNames::minResolution
 71     || mediaFeature == MediaFeatureNames::maxResolution;
 72 }
 73 
 74 static inline bool featureWithValidPositiveLength(const String&amp; mediaFeature, const CSSPrimitiveValue&amp; value)
 75 {
 76     if (!(value.isLength() || (value.isNumber() &amp;&amp; !value.doubleValue())) || value.doubleValue() &lt; 0)
 77         return false;
 78 
 79     return mediaFeature == MediaFeatureNames::height
 80     || mediaFeature == MediaFeatureNames::maxHeight
 81     || mediaFeature == MediaFeatureNames::minHeight
</pre>
</td>
</tr>
</table>
<center><a href="MediaQueryEvaluator.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="MediaQueryMatcher.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>