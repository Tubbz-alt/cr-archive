<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/rendering/RenderDeprecatedFlexibleBox.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="RenderCounter.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="RenderElement.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/rendering/RenderDeprecatedFlexibleBox.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 268         // repaint ourselves (and the child) anyway.
 269         if (!box-&gt;selfNeedsLayout() &amp;&amp; child-&gt;checkForRepaintDuringLayout())
 270             child-&gt;repaintDuringLayoutIfMoved(oldChildRects[childIndex]);
 271 
 272         ++childIndex;
 273     }
 274     ASSERT(childIndex == oldChildRects.size());
 275 }
 276 
 277 void RenderDeprecatedFlexibleBox::layoutBlock(bool relayoutChildren, LayoutUnit)
 278 {
 279     ASSERT(needsLayout());
 280 
 281     if (!relayoutChildren &amp;&amp; simplifiedLayout())
 282         return;
 283 
 284     LayoutRepainter repainter(*this, checkForRepaintDuringLayout());
 285     {
 286         LayoutStateMaintainer statePusher(*this, locationOffset(), hasTransform() || hasReflection() || style().isFlippedBlocksWritingMode());
 287 

 288         preparePaginationBeforeBlockLayout(relayoutChildren);
 289 
 290         LayoutSize previousSize = size();
 291 
 292         updateLogicalWidth();
 293         updateLogicalHeight();
 294 
 295         if (previousSize != size()
 296             || (parent()-&gt;isDeprecatedFlexibleBox() &amp;&amp; parent()-&gt;style().boxOrient() == BoxOrient::Horizontal
 297                 &amp;&amp; parent()-&gt;style().boxAlign() == BoxAlignment::Stretch))
 298             relayoutChildren = true;
 299 
 300         setHeight(0);
 301 
 302         m_stretchingChildren = false;
 303 
<span class="line-modified"> 304 #if !ASSERT_DISABLED</span>
 305         LayoutSize oldLayoutDelta = view().frameView().layoutContext().layoutDelta();
 306 #endif
 307 
 308         // Fieldsets need to find their legend and position it inside the border of the object.
 309         // The legend then gets skipped during normal layout. The same is true for ruby text.
 310         // It doesn&#39;t get included in the normal layout process but is instead skipped.
 311         layoutExcludedChildren(relayoutChildren);
 312 
 313         ChildFrameRects oldChildRects;
 314         appendChildFrameRects(this, oldChildRects);
 315 
 316         if (isHorizontal())
 317             layoutHorizontalBox(relayoutChildren);
 318         else
 319             layoutVerticalBox(relayoutChildren);
 320 
 321         repaintChildrenDuringLayoutIfMoved(this, oldChildRects);
 322         ASSERT(view().frameView().layoutContext().layoutDeltaMatches(oldLayoutDelta));
 323 
 324         LayoutUnit oldClientAfterEdge = clientLogicalBottom();
</pre>
</td>
<td>
<hr />
<pre>
 268         // repaint ourselves (and the child) anyway.
 269         if (!box-&gt;selfNeedsLayout() &amp;&amp; child-&gt;checkForRepaintDuringLayout())
 270             child-&gt;repaintDuringLayoutIfMoved(oldChildRects[childIndex]);
 271 
 272         ++childIndex;
 273     }
 274     ASSERT(childIndex == oldChildRects.size());
 275 }
 276 
 277 void RenderDeprecatedFlexibleBox::layoutBlock(bool relayoutChildren, LayoutUnit)
 278 {
 279     ASSERT(needsLayout());
 280 
 281     if (!relayoutChildren &amp;&amp; simplifiedLayout())
 282         return;
 283 
 284     LayoutRepainter repainter(*this, checkForRepaintDuringLayout());
 285     {
 286         LayoutStateMaintainer statePusher(*this, locationOffset(), hasTransform() || hasReflection() || style().isFlippedBlocksWritingMode());
 287 
<span class="line-added"> 288         resetLogicalHeightBeforeLayoutIfNeeded();</span>
 289         preparePaginationBeforeBlockLayout(relayoutChildren);
 290 
 291         LayoutSize previousSize = size();
 292 
 293         updateLogicalWidth();
 294         updateLogicalHeight();
 295 
 296         if (previousSize != size()
 297             || (parent()-&gt;isDeprecatedFlexibleBox() &amp;&amp; parent()-&gt;style().boxOrient() == BoxOrient::Horizontal
 298                 &amp;&amp; parent()-&gt;style().boxAlign() == BoxAlignment::Stretch))
 299             relayoutChildren = true;
 300 
 301         setHeight(0);
 302 
 303         m_stretchingChildren = false;
 304 
<span class="line-modified"> 305 #if ASSERT_ENABLED</span>
 306         LayoutSize oldLayoutDelta = view().frameView().layoutContext().layoutDelta();
 307 #endif
 308 
 309         // Fieldsets need to find their legend and position it inside the border of the object.
 310         // The legend then gets skipped during normal layout. The same is true for ruby text.
 311         // It doesn&#39;t get included in the normal layout process but is instead skipped.
 312         layoutExcludedChildren(relayoutChildren);
 313 
 314         ChildFrameRects oldChildRects;
 315         appendChildFrameRects(this, oldChildRects);
 316 
 317         if (isHorizontal())
 318             layoutHorizontalBox(relayoutChildren);
 319         else
 320             layoutVerticalBox(relayoutChildren);
 321 
 322         repaintChildrenDuringLayoutIfMoved(this, oldChildRects);
 323         ASSERT(view().frameView().layoutContext().layoutDeltaMatches(oldLayoutDelta));
 324 
 325         LayoutUnit oldClientAfterEdge = clientLogicalBottom();
</pre>
</td>
</tr>
</table>
<center><a href="RenderCounter.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="RenderElement.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>