<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/Cursor.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Curl.cmake.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Cursor.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/Cursor.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  9  * 2. Redistributions in binary form must reproduce the above copyright
 10  *    notice, this list of conditions and the following disclaimer in the
 11  *    documentation and/or other materials provided with the distribution.
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #include &quot;config.h&quot;
 27 #include &quot;Cursor.h&quot;
 28 
<span class="line-removed"> 29 #if !PLATFORM(IOS_FAMILY)</span>
<span class="line-removed"> 30 </span>
 31 #include &quot;Image.h&quot;
 32 #include &quot;IntRect.h&quot;
 33 #include &quot;NotImplemented.h&quot;
 34 #include &lt;wtf/Assertions.h&gt;
 35 #include &lt;wtf/NeverDestroyed.h&gt;
 36 
 37 namespace WebCore {
 38 
 39 IntPoint determineHotSpot(Image* image, const IntPoint&amp; specifiedHotSpot)
 40 {
 41     if (image-&gt;isNull())
 42         return IntPoint();
 43 
 44     // Hot spot must be inside cursor rectangle.
 45     IntRect imageRect = IntRect(image-&gt;rect());
 46     if (imageRect.contains(specifiedHotSpot))
 47         return specifiedHotSpot;
 48 
 49     // If hot spot is not specified externally, it can be extracted from some image formats (e.g. .cur).
 50     if (auto intrinsicHotSpot = image-&gt;hotSpot()) {
</pre>
<hr />
<pre>
166 #if ENABLE(MOUSE_CURSOR_SCALE)
167 Cursor::Cursor(Image* image, const IntPoint&amp; hotSpot, float scale)
168     : m_type(Custom)
169     , m_image(image)
170     , m_hotSpot(determineHotSpot(image, hotSpot))
171     , m_imageScaleFactor(scale)
172     , m_platformCursor(0)
173 {
174 }
175 #endif
176 
177 Cursor::Cursor(Type type)
178     : m_type(type)
179 #if ENABLE(MOUSE_CURSOR_SCALE)
180     , m_imageScaleFactor(1)
181 #endif
182     , m_platformCursor(0)
183 {
184 }
185 
<span class="line-modified">186 #if !PLATFORM(COCOA)</span>
187 
188 PlatformCursor Cursor::platformCursor() const
189 {
190     ensurePlatformCursor();
191     return m_platformCursor;
192 }
193 
194 #endif
195 
196 #if !PLATFORM(JAVA)
197 
198 const Cursor&amp; pointerCursor()
199 {
200     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Pointer);
201     return c;
202 }
203 
204 const Cursor&amp; crossCursor()
205 {
206     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Cross);
</pre>
<hr />
<pre>
436 }
437 
438 const Cursor&amp; westPanningCursor()
439 {
440     static NeverDestroyed&lt;Cursor&gt; c(Cursor::WestPanning);
441     return c;
442 }
443 
444 const Cursor&amp; grabCursor()
445 {
446     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Grab);
447     return c;
448 }
449 
450 const Cursor&amp; grabbingCursor()
451 {
452     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Grabbing);
453     return c;
454 }
455 
<span class="line-modified">456 #if !PLATFORM(COCOA) &amp;&amp; !PLATFORM(GTK) &amp;&amp; !PLATFORM(WIN)</span>
457 void Cursor::ensurePlatformCursor() const
458 {
459     notImplemented();
460 }
461 #endif
462 
463 #endif
464 
<span class="line-modified">465 } // namespace WebCore</span>
<span class="line-modified">466 </span>
<span class="line-modified">467 #endif // !PLATFORM(IOS_FAMILY)</span>



468 

</pre>
</td>
<td>
<hr />
<pre>
  9  * 2. Redistributions in binary form must reproduce the above copyright
 10  *    notice, this list of conditions and the following disclaimer in the
 11  *    documentation and/or other materials provided with the distribution.
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #include &quot;config.h&quot;
 27 #include &quot;Cursor.h&quot;
 28 


 29 #include &quot;Image.h&quot;
 30 #include &quot;IntRect.h&quot;
 31 #include &quot;NotImplemented.h&quot;
 32 #include &lt;wtf/Assertions.h&gt;
 33 #include &lt;wtf/NeverDestroyed.h&gt;
 34 
 35 namespace WebCore {
 36 
 37 IntPoint determineHotSpot(Image* image, const IntPoint&amp; specifiedHotSpot)
 38 {
 39     if (image-&gt;isNull())
 40         return IntPoint();
 41 
 42     // Hot spot must be inside cursor rectangle.
 43     IntRect imageRect = IntRect(image-&gt;rect());
 44     if (imageRect.contains(specifiedHotSpot))
 45         return specifiedHotSpot;
 46 
 47     // If hot spot is not specified externally, it can be extracted from some image formats (e.g. .cur).
 48     if (auto intrinsicHotSpot = image-&gt;hotSpot()) {
</pre>
<hr />
<pre>
164 #if ENABLE(MOUSE_CURSOR_SCALE)
165 Cursor::Cursor(Image* image, const IntPoint&amp; hotSpot, float scale)
166     : m_type(Custom)
167     , m_image(image)
168     , m_hotSpot(determineHotSpot(image, hotSpot))
169     , m_imageScaleFactor(scale)
170     , m_platformCursor(0)
171 {
172 }
173 #endif
174 
175 Cursor::Cursor(Type type)
176     : m_type(type)
177 #if ENABLE(MOUSE_CURSOR_SCALE)
178     , m_imageScaleFactor(1)
179 #endif
180     , m_platformCursor(0)
181 {
182 }
183 
<span class="line-modified">184 #if !HAVE(NSCURSOR)</span>
185 
186 PlatformCursor Cursor::platformCursor() const
187 {
188     ensurePlatformCursor();
189     return m_platformCursor;
190 }
191 
192 #endif
193 
194 #if !PLATFORM(JAVA)
195 
196 const Cursor&amp; pointerCursor()
197 {
198     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Pointer);
199     return c;
200 }
201 
202 const Cursor&amp; crossCursor()
203 {
204     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Cross);
</pre>
<hr />
<pre>
434 }
435 
436 const Cursor&amp; westPanningCursor()
437 {
438     static NeverDestroyed&lt;Cursor&gt; c(Cursor::WestPanning);
439     return c;
440 }
441 
442 const Cursor&amp; grabCursor()
443 {
444     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Grab);
445     return c;
446 }
447 
448 const Cursor&amp; grabbingCursor()
449 {
450     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Grabbing);
451     return c;
452 }
453 
<span class="line-modified">454 #if !HAVE(NSCURSOR) &amp;&amp; !PLATFORM(GTK) &amp;&amp; !PLATFORM(WIN)</span>
455 void Cursor::ensurePlatformCursor() const
456 {
457     notImplemented();
458 }
459 #endif
460 
461 #endif
462 
<span class="line-modified">463 #if !HAVE(NSCURSOR)</span>
<span class="line-modified">464 void Cursor::setAsPlatformCursor() const</span>
<span class="line-modified">465 {</span>
<span class="line-added">466     notImplemented();</span>
<span class="line-added">467 }</span>
<span class="line-added">468 #endif</span>
469 
<span class="line-added">470 } // namespace WebCore</span>
</pre>
</td>
</tr>
</table>
<center><a href="Curl.cmake.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Cursor.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>