<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/dom/SelectorQuery.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SelectorQuery.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ShadowRoot.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/dom/SelectorQuery.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 33 #include &lt;wtf/Vector.h&gt;
 34 #include &lt;wtf/text/AtomStringHash.h&gt;
 35 
 36 namespace WebCore {
 37 
 38 class CSSSelector;
 39 class ContainerNode;
 40 class Document;
 41 class Element;
 42 
 43 class SelectorDataList {
 44 public:
 45     explicit SelectorDataList(const CSSSelectorList&amp;);
 46     bool matches(Element&amp;) const;
 47     Element* closest(Element&amp;) const;
 48     Ref&lt;NodeList&gt; queryAll(ContainerNode&amp; rootNode) const;
 49     Element* queryFirst(ContainerNode&amp; rootNode) const;
 50 
 51 private:
 52     struct SelectorData {
<span class="line-removed"> 53         SelectorData(const CSSSelector* selector)</span>
<span class="line-removed"> 54             : selector(selector)</span>
<span class="line-removed"> 55 #if ENABLE(CSS_SELECTOR_JIT) &amp;&amp; CSS_SELECTOR_JIT_PROFILING</span>
<span class="line-removed"> 56             , m_compiledSelectorUseCount(0)</span>
<span class="line-removed"> 57 #endif</span>
<span class="line-removed"> 58         {</span>
<span class="line-removed"> 59         }</span>
<span class="line-removed"> 60 </span>
 61         const CSSSelector* selector;
 62 #if ENABLE(CSS_SELECTOR_JIT)
<span class="line-modified"> 63         mutable JSC::MacroAssemblerCodeRef&lt;CSSSelectorPtrTag&gt; compiledSelectorCodeRef;</span>
<span class="line-removed"> 64         mutable SelectorCompilationStatus compilationStatus;</span>
<span class="line-removed"> 65 #if CSS_SELECTOR_JIT_PROFILING</span>
<span class="line-removed"> 66         ~SelectorData()</span>
<span class="line-removed"> 67         {</span>
<span class="line-removed"> 68             if (compiledSelectorCodeRef.code().executableAddress())</span>
<span class="line-removed"> 69                 dataLogF(&quot;SelectorData compiled selector %d \&quot;%s\&quot;\n&quot;, m_compiledSelectorUseCount, selector-&gt;selectorText().utf8().data());</span>
<span class="line-removed"> 70         }</span>
<span class="line-removed"> 71         mutable unsigned m_compiledSelectorUseCount;</span>
<span class="line-removed"> 72         void compiledSelectorUsed() const { m_compiledSelectorUseCount++; }</span>
 73 #endif
<span class="line-removed"> 74 #endif // ENABLE(CSS_SELECTOR_JIT)</span>
 75     };
 76 
 77     bool selectorMatches(const SelectorData&amp;, Element&amp;, const ContainerNode&amp; rootNode) const;
 78     Element* selectorClosest(const SelectorData&amp;, Element&amp;, const ContainerNode&amp; rootNode) const;
 79 
 80     template &lt;typename SelectorQueryTrait&gt; void execute(ContainerNode&amp; rootNode, typename SelectorQueryTrait::OutputType&amp;) const;
 81     template &lt;typename SelectorQueryTrait&gt; void executeFastPathForIdSelector(const ContainerNode&amp; rootNode, const SelectorData&amp;, const CSSSelector* idSelector, typename SelectorQueryTrait::OutputType&amp;) const;
 82     template &lt;typename SelectorQueryTrait&gt; void executeSingleTagNameSelectorData(const ContainerNode&amp; rootNode, const SelectorData&amp;, typename SelectorQueryTrait::OutputType&amp;) const;
 83     template &lt;typename SelectorQueryTrait&gt; void executeSingleClassNameSelectorData(const ContainerNode&amp; rootNode, const SelectorData&amp;, typename SelectorQueryTrait::OutputType&amp;) const;
 84     template &lt;typename SelectorQueryTrait&gt; void executeSingleSelectorData(const ContainerNode&amp; rootNode, const ContainerNode&amp; searchRootNode, const SelectorData&amp;, typename SelectorQueryTrait::OutputType&amp;) const;
 85     template &lt;typename SelectorQueryTrait&gt; void executeSingleMultiSelectorData(const ContainerNode&amp; rootNode, typename SelectorQueryTrait::OutputType&amp;) const;
 86 #if ENABLE(CSS_SELECTOR_JIT)
 87     template &lt;typename SelectorQueryTrait&gt; void executeCompiledSimpleSelectorChecker(const ContainerNode&amp; searchRootNode, SelectorCompiler::QuerySelectorSimpleSelectorChecker, typename SelectorQueryTrait::OutputType&amp;, const SelectorData&amp;) const;
 88     template &lt;typename SelectorQueryTrait&gt; void executeCompiledSelectorCheckerWithCheckingContext(const ContainerNode&amp; rootNode, const ContainerNode&amp; searchRootNode, SelectorCompiler::QuerySelectorSelectorCheckerWithCheckingContext, typename SelectorQueryTrait::OutputType&amp;, const SelectorData&amp;) const;
 89     template &lt;typename SelectorQueryTrait&gt; void executeCompiledSingleMultiSelectorData(const ContainerNode&amp; rootNode, typename SelectorQueryTrait::OutputType&amp;) const;
 90     static bool compileSelector(const SelectorData&amp;);
 91 #endif // ENABLE(CSS_SELECTOR_JIT)
 92 
 93     Vector&lt;SelectorData&gt; m_selectors;
 94     mutable enum MatchType {
</pre>
</td>
<td>
<hr />
<pre>
 33 #include &lt;wtf/Vector.h&gt;
 34 #include &lt;wtf/text/AtomStringHash.h&gt;
 35 
 36 namespace WebCore {
 37 
 38 class CSSSelector;
 39 class ContainerNode;
 40 class Document;
 41 class Element;
 42 
 43 class SelectorDataList {
 44 public:
 45     explicit SelectorDataList(const CSSSelectorList&amp;);
 46     bool matches(Element&amp;) const;
 47     Element* closest(Element&amp;) const;
 48     Ref&lt;NodeList&gt; queryAll(ContainerNode&amp; rootNode) const;
 49     Element* queryFirst(ContainerNode&amp; rootNode) const;
 50 
 51 private:
 52     struct SelectorData {








 53         const CSSSelector* selector;
 54 #if ENABLE(CSS_SELECTOR_JIT)
<span class="line-modified"> 55         mutable CompiledSelector compiledSelector { };</span>









 56 #endif

 57     };
 58 
 59     bool selectorMatches(const SelectorData&amp;, Element&amp;, const ContainerNode&amp; rootNode) const;
 60     Element* selectorClosest(const SelectorData&amp;, Element&amp;, const ContainerNode&amp; rootNode) const;
 61 
 62     template &lt;typename SelectorQueryTrait&gt; void execute(ContainerNode&amp; rootNode, typename SelectorQueryTrait::OutputType&amp;) const;
 63     template &lt;typename SelectorQueryTrait&gt; void executeFastPathForIdSelector(const ContainerNode&amp; rootNode, const SelectorData&amp;, const CSSSelector* idSelector, typename SelectorQueryTrait::OutputType&amp;) const;
 64     template &lt;typename SelectorQueryTrait&gt; void executeSingleTagNameSelectorData(const ContainerNode&amp; rootNode, const SelectorData&amp;, typename SelectorQueryTrait::OutputType&amp;) const;
 65     template &lt;typename SelectorQueryTrait&gt; void executeSingleClassNameSelectorData(const ContainerNode&amp; rootNode, const SelectorData&amp;, typename SelectorQueryTrait::OutputType&amp;) const;
 66     template &lt;typename SelectorQueryTrait&gt; void executeSingleSelectorData(const ContainerNode&amp; rootNode, const ContainerNode&amp; searchRootNode, const SelectorData&amp;, typename SelectorQueryTrait::OutputType&amp;) const;
 67     template &lt;typename SelectorQueryTrait&gt; void executeSingleMultiSelectorData(const ContainerNode&amp; rootNode, typename SelectorQueryTrait::OutputType&amp;) const;
 68 #if ENABLE(CSS_SELECTOR_JIT)
 69     template &lt;typename SelectorQueryTrait&gt; void executeCompiledSimpleSelectorChecker(const ContainerNode&amp; searchRootNode, SelectorCompiler::QuerySelectorSimpleSelectorChecker, typename SelectorQueryTrait::OutputType&amp;, const SelectorData&amp;) const;
 70     template &lt;typename SelectorQueryTrait&gt; void executeCompiledSelectorCheckerWithCheckingContext(const ContainerNode&amp; rootNode, const ContainerNode&amp; searchRootNode, SelectorCompiler::QuerySelectorSelectorCheckerWithCheckingContext, typename SelectorQueryTrait::OutputType&amp;, const SelectorData&amp;) const;
 71     template &lt;typename SelectorQueryTrait&gt; void executeCompiledSingleMultiSelectorData(const ContainerNode&amp; rootNode, typename SelectorQueryTrait::OutputType&amp;) const;
 72     static bool compileSelector(const SelectorData&amp;);
 73 #endif // ENABLE(CSS_SELECTOR_JIT)
 74 
 75     Vector&lt;SelectorData&gt; m_selectors;
 76     mutable enum MatchType {
</pre>
</td>
</tr>
</table>
<center><a href="SelectorQuery.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ShadowRoot.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>