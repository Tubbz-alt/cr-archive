<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WebCore/css/CSSValue.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (C) 2011 Andreas Kling (kling@webkit.org)
  3  * Copyright (C) 2013 Adobe Systems Incorporated. All rights reserved.
  4  *
  5  * Redistribution and use in source and binary forms, with or without
  6  * modification, are permitted provided that the following conditions
  7  * are met:
  8  * 1. Redistributions of source code must retain the above copyright
  9  *    notice, this list of conditions and the following disclaimer.
 10  * 2. Redistributions in binary form must reproduce the above copyright
 11  *    notice, this list of conditions and the following disclaimer in the
 12  *    documentation and/or other materials provided with the distribution.
 13  *
 14  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 15  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 16  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 17  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 18  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 19  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 20  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 21  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 22  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 23  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 24  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 25  *
 26  */
 27 
 28 #include &quot;config.h&quot;
 29 #include &quot;CSSValue.h&quot;
 30 
 31 #include &quot;CSSAspectRatioValue.h&quot;
 32 #include &quot;CSSBorderImageSliceValue.h&quot;
 33 #include &quot;CSSCalculationValue.h&quot;
 34 #include &quot;CSSCanvasValue.h&quot;
 35 #include &quot;CSSContentDistributionValue.h&quot;
 36 #include &quot;CSSCrossfadeValue.h&quot;
 37 #include &quot;CSSCursorImageValue.h&quot;
 38 #include &quot;CSSCustomIdentValue.h&quot;
 39 #include &quot;CSSCustomPropertyValue.h&quot;
 40 #include &quot;CSSFilterImageValue.h&quot;
 41 #include &quot;CSSFontFaceSrcValue.h&quot;
 42 #include &quot;CSSFontFeatureValue.h&quot;
 43 #include &quot;CSSFontStyleRangeValue.h&quot;
 44 #include &quot;CSSFontStyleValue.h&quot;
 45 #include &quot;CSSFontValue.h&quot;
 46 #include &quot;CSSFontVariationValue.h&quot;
 47 #include &quot;CSSFunctionValue.h&quot;
 48 #include &quot;CSSGradientValue.h&quot;
 49 #include &quot;CSSImageSetValue.h&quot;
 50 #include &quot;CSSImageValue.h&quot;
 51 #include &quot;CSSInheritedValue.h&quot;
 52 #include &quot;CSSInitialValue.h&quot;
 53 #include &quot;CSSLineBoxContainValue.h&quot;
 54 #include &quot;CSSNamedImageValue.h&quot;
 55 #include &quot;CSSPaintImageValue.h&quot;
 56 #include &quot;CSSPendingSubstitutionValue.h&quot;
 57 #include &quot;CSSPrimitiveValue.h&quot;
 58 #include &quot;CSSProperty.h&quot;
 59 #include &quot;CSSReflectValue.h&quot;
 60 #include &quot;CSSShadowValue.h&quot;
 61 #include &quot;CSSTimingFunctionValue.h&quot;
 62 #include &quot;CSSUnicodeRangeValue.h&quot;
 63 #include &quot;CSSUnsetValue.h&quot;
 64 #include &quot;CSSValueList.h&quot;
 65 #include &quot;CSSVariableReferenceValue.h&quot;
 66 
 67 #include &quot;CSSGridAutoRepeatValue.h&quot;
 68 #include &quot;CSSGridIntegerRepeatValue.h&quot;
 69 #include &quot;CSSGridLineNamesValue.h&quot;
 70 #include &quot;CSSGridTemplateAreasValue.h&quot;
 71 
 72 #include &quot;DeprecatedCSSOMPrimitiveValue.h&quot;
 73 #include &quot;DeprecatedCSSOMValueList.h&quot;
 74 
 75 namespace WebCore {
 76 
 77 struct SameSizeAsCSSValue {
 78     uint32_t refCount;
 79     uint32_t bitfields;
 80 };
 81 
 82 COMPILE_ASSERT(sizeof(CSSValue) == sizeof(SameSizeAsCSSValue), CSS_value_should_stay_small);
 83 
 84 bool CSSValue::isImplicitInitialValue() const
 85 {
 86     return m_classType == InitialClass &amp;&amp; downcast&lt;CSSInitialValue&gt;(*this).isImplicit();
 87 }
 88 
 89 DEFINE_ALLOCATOR_WITH_HEAP_IDENTIFIER(CSSValue);
 90 
 91 CSSValue::Type CSSValue::cssValueType() const
 92 {
 93     if (isInheritedValue())
 94         return CSS_INHERIT;
 95     if (isPrimitiveValue())
 96         return CSS_PRIMITIVE_VALUE;
 97     if (isValueList())
 98         return CSS_VALUE_LIST;
 99     if (isInitialValue())
100         return CSS_INITIAL;
101     if (isUnsetValue())
102         return CSS_UNSET;
103     if (isRevertValue())
104         return CSS_REVERT;
105     return CSS_CUSTOM;
106 }
107 
108 bool CSSValue::traverseSubresources(const WTF::Function&lt;bool (const CachedResource&amp;)&gt;&amp; handler) const
109 {
110     if (is&lt;CSSValueList&gt;(*this))
111         return downcast&lt;CSSValueList&gt;(*this).traverseSubresources(handler);
112     if (is&lt;CSSFontFaceSrcValue&gt;(*this))
113         return downcast&lt;CSSFontFaceSrcValue&gt;(*this).traverseSubresources(handler);
114     if (is&lt;CSSImageValue&gt;(*this))
115         return downcast&lt;CSSImageValue&gt;(*this).traverseSubresources(handler);
116     if (is&lt;CSSCrossfadeValue&gt;(*this))
117         return downcast&lt;CSSCrossfadeValue&gt;(*this).traverseSubresources(handler);
118     if (is&lt;CSSFilterImageValue&gt;(*this))
119         return downcast&lt;CSSFilterImageValue&gt;(*this).traverseSubresources(handler);
120     if (is&lt;CSSImageSetValue&gt;(*this))
121         return downcast&lt;CSSImageSetValue&gt;(*this).traverseSubresources(handler);
122     return false;
123 }
124 
125 void CSSValue::collectDirectComputationalDependencies(HashSet&lt;CSSPropertyID&gt;&amp; values) const
126 {
127     if (is&lt;CSSPrimitiveValue&gt;(*this))
128         downcast&lt;CSSPrimitiveValue&gt;(*this).collectDirectComputationalDependencies(values);
129 }
130 
131 void CSSValue::collectDirectRootComputationalDependencies(HashSet&lt;CSSPropertyID&gt;&amp; values) const
132 {
133     if (is&lt;CSSPrimitiveValue&gt;(*this))
134         downcast&lt;CSSPrimitiveValue&gt;(*this).collectDirectRootComputationalDependencies(values);
135 }
136 
137 template&lt;class ChildClassType&gt;
138 inline static bool compareCSSValues(const CSSValue&amp; first, const CSSValue&amp; second)
139 {
140     return static_cast&lt;const ChildClassType&amp;&gt;(first).equals(static_cast&lt;const ChildClassType&amp;&gt;(second));
141 }
142 
143 bool CSSValue::equals(const CSSValue&amp; other) const
144 {
145     if (m_classType == other.m_classType) {
146         switch (m_classType) {
147         case AspectRatioClass:
148             return compareCSSValues&lt;CSSAspectRatioValue&gt;(*this, other);
149         case BorderImageSliceClass:
150             return compareCSSValues&lt;CSSBorderImageSliceValue&gt;(*this, other);
151         case CanvasClass:
152             return compareCSSValues&lt;CSSCanvasValue&gt;(*this, other);
153         case NamedImageClass:
154             return compareCSSValues&lt;CSSNamedImageValue&gt;(*this, other);
155         case CursorImageClass:
156             return compareCSSValues&lt;CSSCursorImageValue&gt;(*this, other);
157         case FilterImageClass:
158             return compareCSSValues&lt;CSSFilterImageValue&gt;(*this, other);
159 #if ENABLE(CSS_PAINTING_API)
160         case PaintImageClass:
161             return compareCSSValues&lt;CSSPaintImageValue&gt;(*this, other);
162 #endif
163         case FontClass:
164             return compareCSSValues&lt;CSSFontValue&gt;(*this, other);
165         case FontFaceSrcClass:
166             return compareCSSValues&lt;CSSFontFaceSrcValue&gt;(*this, other);
167         case FontFeatureClass:
168             return compareCSSValues&lt;CSSFontFeatureValue&gt;(*this, other);
169 #if ENABLE(VARIATION_FONTS)
170         case FontVariationClass:
171             return compareCSSValues&lt;CSSFontVariationValue&gt;(*this, other);
172 #endif
173         case FunctionClass:
174             return compareCSSValues&lt;CSSFunctionValue&gt;(*this, other);
175         case LinearGradientClass:
176             return compareCSSValues&lt;CSSLinearGradientValue&gt;(*this, other);
177         case RadialGradientClass:
178             return compareCSSValues&lt;CSSRadialGradientValue&gt;(*this, other);
179         case ConicGradientClass:
180             return compareCSSValues&lt;CSSConicGradientValue&gt;(*this, other);
181         case CrossfadeClass:
182             return compareCSSValues&lt;CSSCrossfadeValue&gt;(*this, other);
183         case ImageClass:
184             return compareCSSValues&lt;CSSImageValue&gt;(*this, other);
185         case InheritedClass:
186             return compareCSSValues&lt;CSSInheritedValue&gt;(*this, other);
187         case InitialClass:
188             return compareCSSValues&lt;CSSInitialValue&gt;(*this, other);
189         case UnsetClass:
190             return compareCSSValues&lt;CSSUnsetValue&gt;(*this, other);
191         case RevertClass:
192             return compareCSSValues&lt;CSSRevertValue&gt;(*this, other);
193         case GridAutoRepeatClass:
194             return compareCSSValues&lt;CSSGridAutoRepeatValue&gt;(*this, other);
195         case GridIntegerRepeatClass:
196             return compareCSSValues&lt;CSSGridIntegerRepeatValue&gt;(*this, other);
197         case GridLineNamesClass:
198             return compareCSSValues&lt;CSSGridLineNamesValue&gt;(*this, other);
199         case GridTemplateAreasClass:
200             return compareCSSValues&lt;CSSGridTemplateAreasValue&gt;(*this, other);
201         case PrimitiveClass:
202             return compareCSSValues&lt;CSSPrimitiveValue&gt;(*this, other);
203         case ReflectClass:
204             return compareCSSValues&lt;CSSReflectValue&gt;(*this, other);
205         case ShadowClass:
206             return compareCSSValues&lt;CSSShadowValue&gt;(*this, other);
207         case CubicBezierTimingFunctionClass:
208             return compareCSSValues&lt;CSSCubicBezierTimingFunctionValue&gt;(*this, other);
209         case StepsTimingFunctionClass:
210             return compareCSSValues&lt;CSSStepsTimingFunctionValue&gt;(*this, other);
211         case SpringTimingFunctionClass:
212             return compareCSSValues&lt;CSSSpringTimingFunctionValue&gt;(*this, other);
213         case UnicodeRangeClass:
214             return compareCSSValues&lt;CSSUnicodeRangeValue&gt;(*this, other);
215         case ValueListClass:
216             return compareCSSValues&lt;CSSValueList&gt;(*this, other);
217         case LineBoxContainClass:
218             return compareCSSValues&lt;CSSLineBoxContainValue&gt;(*this, other);
219         case CalculationClass:
220             return compareCSSValues&lt;CSSCalcValue&gt;(*this, other);
221         case ImageSetClass:
222             return compareCSSValues&lt;CSSImageSetValue&gt;(*this, other);
223         case CSSContentDistributionClass:
224             return compareCSSValues&lt;CSSContentDistributionValue&gt;(*this, other);
225         case CustomPropertyClass:
226             return compareCSSValues&lt;CSSCustomPropertyValue&gt;(*this, other);
227         case VariableReferenceClass:
228             return compareCSSValues&lt;CSSVariableReferenceValue&gt;(*this, other);
229         case PendingSubstitutionValueClass:
230             return compareCSSValues&lt;CSSPendingSubstitutionValue&gt;(*this, other);
231         case FontStyleClass:
232             return compareCSSValues&lt;CSSFontStyleValue&gt;(*this, other);
233         case FontStyleRangeClass:
234             return compareCSSValues&lt;CSSFontStyleRangeValue&gt;(*this, other);
235         default:
236             ASSERT_NOT_REACHED();
237             return false;
238         }
239     } else if (is&lt;CSSValueList&gt;(*this) &amp;&amp; !is&lt;CSSValueList&gt;(other))
240         return downcast&lt;CSSValueList&gt;(*this).equals(other);
241     else if (!is&lt;CSSValueList&gt;(*this) &amp;&amp; is&lt;CSSValueList&gt;(other))
242         return static_cast&lt;const CSSValueList&amp;&gt;(other).equals(*this);
243     return false;
244 }
245 
246 String CSSValue::cssText() const
247 {
248     switch (classType()) {
249     case AspectRatioClass:
250         return downcast&lt;CSSAspectRatioValue&gt;(*this).customCSSText();
251     case BorderImageSliceClass:
252         return downcast&lt;CSSBorderImageSliceValue&gt;(*this).customCSSText();
253     case CanvasClass:
254         return downcast&lt;CSSCanvasValue&gt;(*this).customCSSText();
255     case NamedImageClass:
256         return downcast&lt;CSSNamedImageValue&gt;(*this).customCSSText();
257     case CursorImageClass:
258         return downcast&lt;CSSCursorImageValue&gt;(*this).customCSSText();
259     case FilterImageClass:
260         return downcast&lt;CSSFilterImageValue&gt;(*this).customCSSText();
261 #if ENABLE(CSS_PAINTING_API)
262     case PaintImageClass:
263         return downcast&lt;CSSPaintImageValue&gt;(*this).customCSSText();
264 #endif
265     case FontClass:
266         return downcast&lt;CSSFontValue&gt;(*this).customCSSText();
267     case FontFaceSrcClass:
268         return downcast&lt;CSSFontFaceSrcValue&gt;(*this).customCSSText();
269     case FontFeatureClass:
270         return downcast&lt;CSSFontFeatureValue&gt;(*this).customCSSText();
271 #if ENABLE(VARIATION_FONTS)
272     case FontVariationClass:
273         return downcast&lt;CSSFontVariationValue&gt;(*this).customCSSText();
274 #endif
275     case FunctionClass:
276         return downcast&lt;CSSFunctionValue&gt;(*this).customCSSText();
277     case LinearGradientClass:
278         return downcast&lt;CSSLinearGradientValue&gt;(*this).customCSSText();
279     case RadialGradientClass:
280         return downcast&lt;CSSRadialGradientValue&gt;(*this).customCSSText();
281     case ConicGradientClass:
282         return downcast&lt;CSSConicGradientValue&gt;(*this).customCSSText();
283     case CrossfadeClass:
284         return downcast&lt;CSSCrossfadeValue&gt;(*this).customCSSText();
285     case ImageClass:
286         return downcast&lt;CSSImageValue&gt;(*this).customCSSText();
287     case InheritedClass:
288         return downcast&lt;CSSInheritedValue&gt;(*this).customCSSText();
289     case InitialClass:
290         return downcast&lt;CSSInitialValue&gt;(*this).customCSSText();
291     case UnsetClass:
292         return downcast&lt;CSSUnsetValue&gt;(*this).customCSSText();
293     case RevertClass:
294         return downcast&lt;CSSRevertValue&gt;(*this).customCSSText();
295     case GridAutoRepeatClass:
296         return downcast&lt;CSSGridAutoRepeatValue&gt;(*this).customCSSText();
297     case GridIntegerRepeatClass:
298         return downcast&lt;CSSGridIntegerRepeatValue&gt;(*this).customCSSText();
299     case GridLineNamesClass:
300         return downcast&lt;CSSGridLineNamesValue&gt;(*this).customCSSText();
301     case GridTemplateAreasClass:
302         return downcast&lt;CSSGridTemplateAreasValue&gt;(*this).customCSSText();
303     case PrimitiveClass:
304         return downcast&lt;CSSPrimitiveValue&gt;(*this).customCSSText();
305     case ReflectClass:
306         return downcast&lt;CSSReflectValue&gt;(*this).customCSSText();
307     case ShadowClass:
308         return downcast&lt;CSSShadowValue&gt;(*this).customCSSText();
309     case CubicBezierTimingFunctionClass:
310         return downcast&lt;CSSCubicBezierTimingFunctionValue&gt;(*this).customCSSText();
311     case StepsTimingFunctionClass:
312         return downcast&lt;CSSStepsTimingFunctionValue&gt;(*this).customCSSText();
313     case SpringTimingFunctionClass:
314         return downcast&lt;CSSSpringTimingFunctionValue&gt;(*this).customCSSText();
315     case UnicodeRangeClass:
316         return downcast&lt;CSSUnicodeRangeValue&gt;(*this).customCSSText();
317     case ValueListClass:
318         return downcast&lt;CSSValueList&gt;(*this).customCSSText();
319     case LineBoxContainClass:
320         return downcast&lt;CSSLineBoxContainValue&gt;(*this).customCSSText();
321     case CalculationClass:
322         return downcast&lt;CSSCalcValue&gt;(*this).customCSSText();
323     case ImageSetClass:
324         return downcast&lt;CSSImageSetValue&gt;(*this).customCSSText();
325     case CSSContentDistributionClass:
326         return downcast&lt;CSSContentDistributionValue&gt;(*this).customCSSText();
327     case CustomPropertyClass:
328         return downcast&lt;CSSCustomPropertyValue&gt;(*this).customCSSText();
329     case CustomIdentClass:
330         return downcast&lt;CSSCustomIdentValue&gt;(*this).customCSSText();
331     case VariableReferenceClass:
332         return downcast&lt;CSSVariableReferenceValue&gt;(*this).customCSSText();
333     case PendingSubstitutionValueClass:
334         return downcast&lt;CSSPendingSubstitutionValue&gt;(*this).customCSSText();
335     case FontStyleClass:
336         return downcast&lt;CSSFontStyleValue&gt;(*this).customCSSText();
337     case FontStyleRangeClass:
338         return downcast&lt;CSSFontStyleRangeValue&gt;(*this).customCSSText();
339     }
340 
341     ASSERT_NOT_REACHED();
342     return String();
343 }
344 
345 void CSSValue::destroy()
346 {
347     switch (classType()) {
348     case AspectRatioClass:
349         delete downcast&lt;CSSAspectRatioValue&gt;(this);
350         return;
351     case BorderImageSliceClass:
352         delete downcast&lt;CSSBorderImageSliceValue&gt;(this);
353         return;
354     case CanvasClass:
355         delete downcast&lt;CSSCanvasValue&gt;(this);
356         return;
357     case NamedImageClass:
358         delete downcast&lt;CSSNamedImageValue&gt;(this);
359         return;
360     case CursorImageClass:
361         delete downcast&lt;CSSCursorImageValue&gt;(this);
362         return;
363     case FontClass:
364         delete downcast&lt;CSSFontValue&gt;(this);
365         return;
366     case FontFaceSrcClass:
367         delete downcast&lt;CSSFontFaceSrcValue&gt;(this);
368         return;
369     case FontFeatureClass:
370         delete downcast&lt;CSSFontFeatureValue&gt;(this);
371         return;
372 #if ENABLE(VARIATION_FONTS)
373     case FontVariationClass:
374         delete downcast&lt;CSSFontVariationValue&gt;(this);
375         return;
376 #endif
377     case FunctionClass:
378         delete downcast&lt;CSSFunctionValue&gt;(this);
379         return;
380     case LinearGradientClass:
381         delete downcast&lt;CSSLinearGradientValue&gt;(this);
382         return;
383     case RadialGradientClass:
384         delete downcast&lt;CSSRadialGradientValue&gt;(this);
385         return;
386     case ConicGradientClass:
387         delete downcast&lt;CSSConicGradientValue&gt;(this);
388         return;
389     case CrossfadeClass:
390         delete downcast&lt;CSSCrossfadeValue&gt;(this);
391         return;
392     case ImageClass:
393         delete downcast&lt;CSSImageValue&gt;(this);
394         return;
395     case InheritedClass:
396         delete downcast&lt;CSSInheritedValue&gt;(this);
397         return;
398     case InitialClass:
399         delete downcast&lt;CSSInitialValue&gt;(this);
400         return;
401     case UnsetClass:
402         delete downcast&lt;CSSUnsetValue&gt;(this);
403         return;
404     case RevertClass:
405         delete downcast&lt;CSSRevertValue&gt;(this);
406         return;
407     case GridAutoRepeatClass:
408         delete downcast&lt;CSSGridAutoRepeatValue&gt;(this);
409         return;
410     case GridIntegerRepeatClass:
411         delete downcast&lt;CSSGridIntegerRepeatValue&gt;(this);
412         return;
413     case GridLineNamesClass:
414         delete downcast&lt;CSSGridLineNamesValue&gt;(this);
415         return;
416     case GridTemplateAreasClass:
417         delete downcast&lt;CSSGridTemplateAreasValue&gt;(this);
418         return;
419     case PrimitiveClass:
420         delete downcast&lt;CSSPrimitiveValue&gt;(this);
421         return;
422     case ReflectClass:
423         delete downcast&lt;CSSReflectValue&gt;(this);
424         return;
425     case ShadowClass:
426         delete downcast&lt;CSSShadowValue&gt;(this);
427         return;
428     case CubicBezierTimingFunctionClass:
429         delete downcast&lt;CSSCubicBezierTimingFunctionValue&gt;(this);
430         return;
431     case StepsTimingFunctionClass:
432         delete downcast&lt;CSSStepsTimingFunctionValue&gt;(this);
433         return;
434     case SpringTimingFunctionClass:
435         delete downcast&lt;CSSSpringTimingFunctionValue&gt;(this);
436         return;
437     case UnicodeRangeClass:
438         delete downcast&lt;CSSUnicodeRangeValue&gt;(this);
439         return;
440     case ValueListClass:
441         delete downcast&lt;CSSValueList&gt;(this);
442         return;
443     case LineBoxContainClass:
444         delete downcast&lt;CSSLineBoxContainValue&gt;(this);
445         return;
446     case CalculationClass:
447         delete downcast&lt;CSSCalcValue&gt;(this);
448         return;
449     case ImageSetClass:
450         delete downcast&lt;CSSImageSetValue&gt;(this);
451         return;
452     case FilterImageClass:
453         delete downcast&lt;CSSFilterImageValue&gt;(this);
454         return;
455 #if ENABLE(CSS_PAINTING_API)
456     case PaintImageClass:
457         delete downcast&lt;CSSPaintImageValue&gt;(this);
458         return;
459 #endif
460     case CSSContentDistributionClass:
461         delete downcast&lt;CSSContentDistributionValue&gt;(this);
462         return;
463     case CustomPropertyClass:
464         delete downcast&lt;CSSCustomPropertyValue&gt;(this);
465         return;
466     case CustomIdentClass:
467         delete downcast&lt;CSSCustomIdentValue&gt;(this);
468         return;
469     case VariableReferenceClass:
470         delete downcast&lt;CSSVariableReferenceValue&gt;(this);
471         return;
472     case PendingSubstitutionValueClass:
473         delete downcast&lt;CSSPendingSubstitutionValue&gt;(this);
474         return;
475     case FontStyleClass:
476         delete downcast&lt;CSSFontStyleValue&gt;(this);
477         return;
478     case FontStyleRangeClass:
479         delete downcast&lt;CSSFontStyleRangeValue&gt;(this);
480         return;
481     }
482     ASSERT_NOT_REACHED();
483 }
484 
485 Ref&lt;DeprecatedCSSOMValue&gt; CSSValue::createDeprecatedCSSOMWrapper(CSSStyleDeclaration&amp; styleDeclaration) const
486 {
487     if (isImageValue() || isCursorImageValue())
488         return downcast&lt;CSSImageValue&gt;(this)-&gt;createDeprecatedCSSOMWrapper(styleDeclaration);
489     if (isPrimitiveValue())
490         return DeprecatedCSSOMPrimitiveValue::create(downcast&lt;CSSPrimitiveValue&gt;(*this), styleDeclaration);
491     if (isValueList())
492         return DeprecatedCSSOMValueList::create(downcast&lt;CSSValueList&gt;(*this), styleDeclaration);
493     return DeprecatedCSSOMComplexValue::create(*this, styleDeclaration);
494 }
495 
496 bool CSSValue::treatAsInheritedValue(CSSPropertyID propertyID) const
497 {
498     return classType() == InheritedClass || (classType() == UnsetClass &amp;&amp; CSSProperty::isInheritedProperty(propertyID));
499 }
500 
501 bool CSSValue::treatAsInitialValue(CSSPropertyID propertyID) const
502 {
503     return classType() == InitialClass || (classType() == UnsetClass &amp;&amp; !CSSProperty::isInheritedProperty(propertyID));
504 }
505 
506 }
    </pre>
  </body>
</html>