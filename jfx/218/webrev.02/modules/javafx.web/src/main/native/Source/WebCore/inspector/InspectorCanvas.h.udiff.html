<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/inspector/InspectorCanvas.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="InspectorCanvas.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="InspectorController.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/inspector/InspectorCanvas.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -24,42 +24,66 @@</span>
   */
  
  #pragma once
  
  #include &quot;CallTracerTypes.h&quot;
<span class="udiff-line-added">+ #include &quot;CanvasRenderingContext.h&quot;</span>
  #include &lt;JavaScriptCore/InspectorProtocolObjects.h&gt;
<span class="udiff-line-added">+ #include &lt;JavaScriptCore/JSCInlines.h&gt;</span>
  #include &lt;JavaScriptCore/ScriptCallFrame.h&gt;
  #include &lt;JavaScriptCore/ScriptCallStack.h&gt;
  #include &lt;initializer_list&gt;
<span class="udiff-line-added">+ #include &lt;wtf/HashSet.h&gt;</span>
  #include &lt;wtf/Variant.h&gt;
  #include &lt;wtf/Vector.h&gt;
  #include &lt;wtf/text/WTFString.h&gt;
  
<span class="udiff-line-added">+ #if ENABLE(WEBGPU)</span>
<span class="udiff-line-added">+ #include &quot;WebGPUDevice.h&quot;</span>
<span class="udiff-line-added">+ #endif</span>
<span class="udiff-line-added">+ </span>
  namespace WebCore {
  
  class CanvasGradient;
  class CanvasPattern;
<span class="udiff-line-modified-removed">- class CanvasRenderingContext;</span>
<span class="udiff-line-modified-added">+ class Element;</span>
  class HTMLCanvasElement;
  class HTMLImageElement;
  class HTMLVideoElement;
  class ImageBitmap;
  class ImageData;
<span class="udiff-line-added">+ #if ENABLE(OFFSCREEN_CANVAS)</span>
<span class="udiff-line-added">+ class OffscreenCanvas;</span>
<span class="udiff-line-added">+ #endif</span>
  #if ENABLE(CSS_TYPED_OM)
  class TypedOMCSSImageValue;
  #endif
  
  typedef String ErrorString;
  
  class InspectorCanvas final : public RefCounted&lt;InspectorCanvas&gt; {
  public:
      static Ref&lt;InspectorCanvas&gt; create(CanvasRenderingContext&amp;);
<span class="udiff-line-added">+ #if ENABLE(WEBGPU)</span>
<span class="udiff-line-added">+     static Ref&lt;InspectorCanvas&gt; create(WebGPUDevice&amp;);</span>
<span class="udiff-line-added">+ #endif</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     const String&amp; identifier() const { return m_identifier; }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     CanvasRenderingContext* canvasContext() const;</span>
<span class="udiff-line-added">+     HTMLCanvasElement* canvasElement() const;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ #if ENABLE(WEBGPU)</span>
<span class="udiff-line-added">+     WebGPUDevice* deviceContext() const;</span>
<span class="udiff-line-added">+     bool isDeviceForCanvasContext(CanvasRenderingContext&amp;) const;</span>
<span class="udiff-line-added">+ #endif</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     ScriptExecutionContext* scriptExecutionContext() const;</span>
  
<span class="udiff-line-modified-removed">-     const String&amp; identifier() { return m_identifier; }</span>
<span class="udiff-line-removed">-     CanvasRenderingContext&amp; context() { return m_context; }</span>
<span class="udiff-line-modified-added">+     JSC::JSValue resolveContext(JSC::JSGlobalObject*) const;</span>
  
<span class="udiff-line-modified-removed">-     HTMLCanvasElement* canvasElement();</span>
<span class="udiff-line-modified-added">+     HashSet&lt;Element*&gt; clientNodes() const;</span>
  
      void canvasChanged();
  
      void resetRecordingData();
      bool hasRecordingData() const;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -85,10 +109,14 @@</span>
  
      String getCanvasContentAsDataURL(ErrorString&amp;);
  
  private:
      InspectorCanvas(CanvasRenderingContext&amp;);
<span class="udiff-line-added">+ #if ENABLE(WEBGPU)</span>
<span class="udiff-line-added">+     InspectorCanvas(WebGPUDevice&amp;);</span>
<span class="udiff-line-added">+ #endif</span>
<span class="udiff-line-added">+ </span>
      void appendActionSnapshotIfNeeded();
  
      using DuplicateDataVariant = Variant&lt;
          RefPtr&lt;CanvasGradient&gt;,
          RefPtr&lt;CanvasPattern&gt;,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -102,10 +130,13 @@</span>
          RefPtr&lt;Inspector::ScriptCallStack&gt;,
  #if ENABLE(CSS_TYPED_OM)
          RefPtr&lt;TypedOMCSSImageValue&gt;,
  #endif
          Inspector::ScriptCallFrame,
<span class="udiff-line-added">+ #if ENABLE(OFFSCREEN_CANVAS)</span>
<span class="udiff-line-added">+         RefPtr&lt;OffscreenCanvas&gt;,</span>
<span class="udiff-line-added">+ #endif</span>
          String
      &gt;;
  
      int indexForData(DuplicateDataVariant);
      String stringIndexForKey(const String&amp;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -114,11 +145,18 @@</span>
      Ref&lt;JSON::ArrayOf&lt;JSON::Value&gt;&gt; buildArrayForCanvasGradient(const CanvasGradient&amp;);
      Ref&lt;JSON::ArrayOf&lt;JSON::Value&gt;&gt; buildArrayForCanvasPattern(const CanvasPattern&amp;);
      Ref&lt;JSON::ArrayOf&lt;JSON::Value&gt;&gt; buildArrayForImageData(const ImageData&amp;);
  
      String m_identifier;
<span class="udiff-line-modified-removed">-     CanvasRenderingContext&amp; m_context;</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-added">+     Variant&lt;</span>
<span class="udiff-line-added">+         std::reference_wrapper&lt;CanvasRenderingContext&gt;,</span>
<span class="udiff-line-added">+ #if ENABLE(WEBGPU)</span>
<span class="udiff-line-added">+         std::reference_wrapper&lt;WebGPUDevice&gt;,</span>
<span class="udiff-line-added">+ #endif</span>
<span class="udiff-line-added">+         Monostate</span>
<span class="udiff-line-added">+     &gt; m_context;</span>
  
      RefPtr&lt;Inspector::Protocol::Recording::InitialState&gt; m_initialState;
      RefPtr&lt;JSON::ArrayOf&lt;Inspector::Protocol::Recording::Frame&gt;&gt; m_frames;
      RefPtr&lt;JSON::ArrayOf&lt;JSON::Value&gt;&gt; m_currentActions;
      RefPtr&lt;JSON::ArrayOf&lt;JSON::Value&gt;&gt; m_lastRecordedAction;
</pre>
<center><a href="InspectorCanvas.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="InspectorController.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>