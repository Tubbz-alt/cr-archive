<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/bytecode/CallLinkInfo.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="CallLinkInfo.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CallLinkStatus.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/bytecode/CallLinkInfo.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 132,11 ***</span>
      CallMode callMode() const
      {
          return callModeFor(static_cast&lt;CallType&gt;(m_callType));
      }
  
<span class="line-modified">!     bool isDirect()</span>
      {
          return isDirect(static_cast&lt;CallType&gt;(m_callType));
      }
  
      bool isTailCall() const
<span class="line-new-header">--- 132,11 ---</span>
      CallMode callMode() const
      {
          return callModeFor(static_cast&lt;CallType&gt;(m_callType));
      }
  
<span class="line-modified">!     bool isDirect() const</span>
      {
          return isDirect(static_cast&lt;CallType&gt;(m_callType));
      }
  
      bool isTailCall() const
</pre>
<hr />
<pre>
<span class="line-old-header">*** 152,11 ***</span>
      bool isVarargs() const
      {
          return isVarargsCallType(static_cast&lt;CallType&gt;(m_callType));
      }
  
<span class="line-modified">!     bool isLinked() { return m_stub || m_calleeOrCodeBlock; }</span>
      void unlink(VM&amp;);
  
      void setUpCall(CallType callType, CodeOrigin codeOrigin, GPRReg calleeGPR)
      {
          m_callType = callType;
<span class="line-new-header">--- 152,11 ---</span>
      bool isVarargs() const
      {
          return isVarargsCallType(static_cast&lt;CallType&gt;(m_callType));
      }
  
<span class="line-modified">!     bool isLinked() const { return m_stub || m_calleeOrCodeBlock; }</span>
      void unlink(VM&amp;);
  
      void setUpCall(CallType callType, CodeOrigin codeOrigin, GPRReg calleeGPR)
      {
          m_callType = callType;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 199,12 ***</span>
      void clearCodeBlock();
      FunctionCodeBlock* codeBlock();
  
      void setLastSeenCallee(VM&amp;, const JSCell* owner, JSObject* callee);
      void clearLastSeenCallee();
<span class="line-modified">!     JSObject* lastSeenCallee();</span>
<span class="line-modified">!     bool haveLastSeenCallee();</span>
  
      void setExecutableDuringCompilation(ExecutableBase*);
      ExecutableBase* executable();
  
      void setStub(Ref&lt;PolymorphicCallStubRoutine&gt;&amp;&amp; newStub)
<span class="line-new-header">--- 199,12 ---</span>
      void clearCodeBlock();
      FunctionCodeBlock* codeBlock();
  
      void setLastSeenCallee(VM&amp;, const JSCell* owner, JSObject* callee);
      void clearLastSeenCallee();
<span class="line-modified">!     JSObject* lastSeenCallee() const;</span>
<span class="line-modified">!     bool haveLastSeenCallee() const;</span>
  
      void setExecutableDuringCompilation(ExecutableBase*);
      ExecutableBase* executable();
  
      void setStub(Ref&lt;PolymorphicCallStubRoutine&gt;&amp;&amp; newStub)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 213,11 ***</span>
          m_stub = WTFMove(newStub);
      }
  
      void clearStub();
  
<span class="line-modified">!     PolymorphicCallStubRoutine* stub()</span>
      {
          return m_stub.get();
      }
  
      void setSlowStub(Ref&lt;JITStubRoutine&gt;&amp;&amp; newSlowStub)
<span class="line-new-header">--- 213,11 ---</span>
          m_stub = WTFMove(newStub);
      }
  
      void clearStub();
  
<span class="line-modified">!     PolymorphicCallStubRoutine* stub() const</span>
      {
          return m_stub.get();
      }
  
      void setSlowStub(Ref&lt;JITStubRoutine&gt;&amp;&amp; newSlowStub)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 293,21 ***</span>
      CallType callType()
      {
          return static_cast&lt;CallType&gt;(m_callType);
      }
  
<span class="line-modified">!     uint32_t* addressOfMaxNumArguments()</span>
      {
<span class="line-modified">!         return &amp;m_maxNumArguments;</span>
      }
  
<span class="line-modified">!     uint32_t maxNumArguments()</span>
      {
<span class="line-modified">!         return m_maxNumArguments;</span>
      }
  
<span class="line-modified">!     void setMaxNumArguments(unsigned);</span>
  
      static ptrdiff_t offsetOfSlowPathCount()
      {
          return OBJECT_OFFSETOF(CallLinkInfo, m_slowPathCount);
      }
<span class="line-new-header">--- 293,21 ---</span>
      CallType callType()
      {
          return static_cast&lt;CallType&gt;(m_callType);
      }
  
<span class="line-modified">!     uint32_t* addressOfMaxArgumentCountIncludingThis()</span>
      {
<span class="line-modified">!         return &amp;m_maxArgumentCountIncludingThis;</span>
      }
  
<span class="line-modified">!     uint32_t maxArgumentCountIncludingThis()</span>
      {
<span class="line-modified">!         return m_maxArgumentCountIncludingThis;</span>
      }
  
<span class="line-modified">!     void setMaxArgumentCountIncludingThis(unsigned);</span>
  
      static ptrdiff_t offsetOfSlowPathCount()
      {
          return OBJECT_OFFSETOF(CallLinkInfo, m_slowPathCount);
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 330,21 ***</span>
      CodeOrigin codeOrigin()
      {
          return m_codeOrigin;
      }
  
      void visitWeak(VM&amp;);
  
      void setFrameShuffleData(const CallFrameShuffleData&amp;);
  
      const CallFrameShuffleData* frameShuffleData()
      {
          return m_frameShuffleData.get();
      }
  
  private:
<span class="line-modified">!     uint32_t m_maxNumArguments { 0 }; // For varargs: the profiled maximum number of arguments. For direct: the number of stack slots allocated for arguments.</span>
      CodeLocationLabel&lt;JSInternalPtrTag&gt; m_callReturnLocationOrPatchableJump;
      CodeLocationLabel&lt;JSInternalPtrTag&gt; m_hotPathBeginOrSlowPathStart;
      CodeLocationNearCall&lt;JSInternalPtrTag&gt; m_hotPathOther;
      WriteBarrier&lt;JSCell&gt; m_calleeOrCodeBlock;
      WriteBarrier&lt;JSCell&gt; m_lastSeenCalleeOrExecutable;
<span class="line-new-header">--- 330,37 ---</span>
      CodeOrigin codeOrigin()
      {
          return m_codeOrigin;
      }
  
<span class="line-added">+     template&lt;typename Functor&gt;</span>
<span class="line-added">+     void forEachDependentCell(const Functor&amp; functor) const</span>
<span class="line-added">+     {</span>
<span class="line-added">+         if (isLinked()) {</span>
<span class="line-added">+             if (stub())</span>
<span class="line-added">+                 stub()-&gt;forEachDependentCell(functor);</span>
<span class="line-added">+             else {</span>
<span class="line-added">+                 functor(m_calleeOrCodeBlock.get());</span>
<span class="line-added">+                 if (isDirect())</span>
<span class="line-added">+                     functor(m_lastSeenCalleeOrExecutable.get());</span>
<span class="line-added">+             }</span>
<span class="line-added">+         }</span>
<span class="line-added">+         if (!isDirect() &amp;&amp; haveLastSeenCallee())</span>
<span class="line-added">+             functor(lastSeenCallee());</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      void visitWeak(VM&amp;);
  
      void setFrameShuffleData(const CallFrameShuffleData&amp;);
  
      const CallFrameShuffleData* frameShuffleData()
      {
          return m_frameShuffleData.get();
      }
  
  private:
<span class="line-modified">!     uint32_t m_maxArgumentCountIncludingThis { 0 }; // For varargs: the profiled maximum number of arguments. For direct: the number of stack slots allocated for arguments.</span>
      CodeLocationLabel&lt;JSInternalPtrTag&gt; m_callReturnLocationOrPatchableJump;
      CodeLocationLabel&lt;JSInternalPtrTag&gt; m_hotPathBeginOrSlowPathStart;
      CodeLocationNearCall&lt;JSInternalPtrTag&gt; m_hotPathOther;
      WriteBarrier&lt;JSCell&gt; m_calleeOrCodeBlock;
      WriteBarrier&lt;JSCell&gt; m_lastSeenCalleeOrExecutable;
</pre>
<center><a href="CallLinkInfo.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CallLinkStatus.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>