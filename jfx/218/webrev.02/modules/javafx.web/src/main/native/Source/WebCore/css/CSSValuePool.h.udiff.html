<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/css/CSSValuePool.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="CSSValuePool.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CSSVariableReferenceValue.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/css/CSSValuePool.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -40,64 +40,77 @@</span>
  #include &lt;wtf/text/AtomStringHash.h&gt;
  
  namespace WebCore {
  
  class CSSValueList;
<span class="udiff-line-added">+ class CSSValuePool;</span>
  
  enum class FromSystemFontID { No, Yes };
  
<span class="udiff-line-added">+ class StaticCSSValuePool {</span>
<span class="udiff-line-added">+     friend class CSSValuePool;</span>
<span class="udiff-line-added">+     friend class LazyNeverDestroyed&lt;StaticCSSValuePool&gt;;</span>
<span class="udiff-line-added">+ public:</span>
<span class="udiff-line-added">+     static void init();</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ private:</span>
<span class="udiff-line-added">+     StaticCSSValuePool();</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LazyNeverDestroyed&lt;CSSInheritedValue&gt; m_inheritedValue;</span>
<span class="udiff-line-added">+     LazyNeverDestroyed&lt;CSSInitialValue&gt; m_implicitInitialValue;</span>
<span class="udiff-line-added">+     LazyNeverDestroyed&lt;CSSInitialValue&gt; m_explicitInitialValue;</span>
<span class="udiff-line-added">+     LazyNeverDestroyed&lt;CSSUnsetValue&gt; m_unsetValue;</span>
<span class="udiff-line-added">+     LazyNeverDestroyed&lt;CSSRevertValue&gt; m_revertValue;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LazyNeverDestroyed&lt;CSSPrimitiveValue&gt; m_transparentColor;</span>
<span class="udiff-line-added">+     LazyNeverDestroyed&lt;CSSPrimitiveValue&gt; m_whiteColor;</span>
<span class="udiff-line-added">+     LazyNeverDestroyed&lt;CSSPrimitiveValue&gt; m_blackColor;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     static constexpr int maximumCacheableIntegerValue = 255;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     LazyNeverDestroyed&lt;CSSPrimitiveValue&gt; m_pixelValues[maximumCacheableIntegerValue + 1];</span>
<span class="udiff-line-added">+     LazyNeverDestroyed&lt;CSSPrimitiveValue&gt; m_percentValues[maximumCacheableIntegerValue + 1];</span>
<span class="udiff-line-added">+     LazyNeverDestroyed&lt;CSSPrimitiveValue&gt; m_numberValues[maximumCacheableIntegerValue + 1];</span>
<span class="udiff-line-added">+     LazyNeverDestroyed&lt;CSSPrimitiveValue&gt; m_identifierValues[numCSSValueKeywords];</span>
<span class="udiff-line-added">+ };</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ WEBCORE_EXPORT extern LazyNeverDestroyed&lt;StaticCSSValuePool&gt; staticCSSValuePool;</span>
<span class="udiff-line-added">+ </span>
  class CSSValuePool {
      WTF_MAKE_FAST_ALLOCATED;
  public:
<span class="udiff-line-added">+     CSSValuePool();</span>
<span class="udiff-line-added">+ </span>
      static CSSValuePool&amp; singleton();
  
      RefPtr&lt;CSSValueList&gt; createFontFaceValue(const AtomString&amp;);
      Ref&lt;CSSPrimitiveValue&gt; createFontFamilyValue(const String&amp;, FromSystemFontID = FromSystemFontID::No);
<span class="udiff-line-modified-removed">-     Ref&lt;CSSInheritedValue&gt; createInheritedValue() { return m_inheritedValue.get(); }</span>
<span class="udiff-line-modified-removed">-     Ref&lt;CSSInitialValue&gt; createImplicitInitialValue() { return m_implicitInitialValue.get(); }</span>
<span class="udiff-line-modified-removed">-     Ref&lt;CSSInitialValue&gt; createExplicitInitialValue() { return m_explicitInitialValue.get(); }</span>
<span class="udiff-line-modified-removed">-     Ref&lt;CSSUnsetValue&gt; createUnsetValue() { return m_unsetValue.get(); }</span>
<span class="udiff-line-modified-removed">-     Ref&lt;CSSRevertValue&gt; createRevertValue() { return m_revertValue.get(); }</span>
<span class="udiff-line-modified-added">+     Ref&lt;CSSInheritedValue&gt; createInheritedValue() { return staticCSSValuePool-&gt;m_inheritedValue.get(); }</span>
<span class="udiff-line-modified-added">+     Ref&lt;CSSInitialValue&gt; createImplicitInitialValue() { return staticCSSValuePool-&gt;m_implicitInitialValue.get(); }</span>
<span class="udiff-line-modified-added">+     Ref&lt;CSSInitialValue&gt; createExplicitInitialValue() { return staticCSSValuePool-&gt;m_explicitInitialValue.get(); }</span>
<span class="udiff-line-modified-added">+     Ref&lt;CSSUnsetValue&gt; createUnsetValue() { return staticCSSValuePool-&gt;m_unsetValue.get(); }</span>
<span class="udiff-line-modified-added">+     Ref&lt;CSSRevertValue&gt; createRevertValue() { return staticCSSValuePool-&gt;m_revertValue.get(); }</span>
      Ref&lt;CSSPrimitiveValue&gt; createIdentifierValue(CSSValueID identifier);
      Ref&lt;CSSPrimitiveValue&gt; createIdentifierValue(CSSPropertyID identifier);
      Ref&lt;CSSPrimitiveValue&gt; createColorValue(const Color&amp;);
<span class="udiff-line-modified-removed">-     Ref&lt;CSSPrimitiveValue&gt; createValue(double value, CSSPrimitiveValue::UnitType);</span>
<span class="udiff-line-modified-removed">-     Ref&lt;CSSPrimitiveValue&gt; createValue(const String&amp; value, CSSPrimitiveValue::UnitType type) { return CSSPrimitiveValue::create(value, type); }</span>
<span class="udiff-line-modified-added">+     Ref&lt;CSSPrimitiveValue&gt; createValue(double value, CSSUnitType);</span>
<span class="udiff-line-modified-added">+     Ref&lt;CSSPrimitiveValue&gt; createValue(const String&amp; value, CSSUnitType type) { return CSSPrimitiveValue::create(value, type); }</span>
      Ref&lt;CSSPrimitiveValue&gt; createValue(const Length&amp; value, const RenderStyle&amp; style) { return CSSPrimitiveValue::create(value, style); }
      Ref&lt;CSSPrimitiveValue&gt; createValue(const LengthSize&amp; value, const RenderStyle&amp; style) { return CSSPrimitiveValue::create(value, style); }
      template&lt;typename T&gt; static Ref&lt;CSSPrimitiveValue&gt; createValue(T&amp;&amp; value) { return CSSPrimitiveValue::create(std::forward&lt;T&gt;(value)); }
  
      void drain();
  
  private:
<span class="udiff-line-removed">-     CSSValuePool();</span>
<span class="udiff-line-removed">- </span>
      typedef HashMap&lt;Color, RefPtr&lt;CSSPrimitiveValue&gt;&gt; ColorValueCache;
      ColorValueCache m_colorValueCache;
  
      typedef HashMap&lt;AtomString, RefPtr&lt;CSSValueList&gt;&gt; FontFaceValueCache;
      FontFaceValueCache m_fontFaceValueCache;
  
      typedef HashMap&lt;std::pair&lt;String, bool&gt;, RefPtr&lt;CSSPrimitiveValue&gt;&gt; FontFamilyValueCache;
      FontFamilyValueCache m_fontFamilyValueCache;
  
<span class="udiff-line-modified-removed">-     friend class WTF::NeverDestroyed&lt;CSSValuePool&gt;;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     LazyNeverDestroyed&lt;CSSInheritedValue&gt; m_inheritedValue;</span>
<span class="udiff-line-removed">-     LazyNeverDestroyed&lt;CSSInitialValue&gt; m_implicitInitialValue;</span>
<span class="udiff-line-removed">-     LazyNeverDestroyed&lt;CSSInitialValue&gt; m_explicitInitialValue;</span>
<span class="udiff-line-removed">-     LazyNeverDestroyed&lt;CSSUnsetValue&gt; m_unsetValue;</span>
<span class="udiff-line-removed">-     LazyNeverDestroyed&lt;CSSRevertValue&gt; m_revertValue;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     LazyNeverDestroyed&lt;CSSPrimitiveValue&gt; m_transparentColor;</span>
<span class="udiff-line-removed">-     LazyNeverDestroyed&lt;CSSPrimitiveValue&gt; m_whiteColor;</span>
<span class="udiff-line-removed">-     LazyNeverDestroyed&lt;CSSPrimitiveValue&gt; m_blackColor;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     static const int maximumCacheableIntegerValue = 255;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     LazyNeverDestroyed&lt;CSSPrimitiveValue&gt; m_pixelValues[maximumCacheableIntegerValue + 1];</span>
<span class="udiff-line-removed">-     LazyNeverDestroyed&lt;CSSPrimitiveValue&gt; m_percentValues[maximumCacheableIntegerValue + 1];</span>
<span class="udiff-line-removed">-     LazyNeverDestroyed&lt;CSSPrimitiveValue&gt; m_numberValues[maximumCacheableIntegerValue + 1];</span>
<span class="udiff-line-removed">-     LazyNeverDestroyed&lt;CSSPrimitiveValue&gt; m_identifierValues[numCSSValueKeywords];</span>
<span class="udiff-line-modified-added">+     friend class NeverDestroyed&lt;CSSValuePool&gt;;</span>
  };
  
  } // namespace WebCore
</pre>
<center><a href="CSSValuePool.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CSSVariableReferenceValue.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>