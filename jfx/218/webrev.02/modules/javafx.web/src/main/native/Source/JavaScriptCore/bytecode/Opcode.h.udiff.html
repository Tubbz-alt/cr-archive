<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/JavaScriptCore/bytecode/Opcode.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Opcode.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Operands.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/bytecode/Opcode.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -34,10 +34,11 @@</span>
  
  #include &lt;algorithm&gt;
  #include &lt;string.h&gt;
  
  #include &lt;wtf/Assertions.h&gt;
<span class="udiff-line-added">+ #include &lt;wtf/MathExtras.h&gt;</span>
  
  namespace JSC {
  
  #define FOR_EACH_CORE_OPCODE_ID_WITH_EXTENSION(macro, extension__) \
      FOR_EACH_BYTECODE_ID(macro) \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -51,38 +52,49 @@</span>
          macro, \
          FOR_EACH_LLINT_OPCODE_EXTENSION(macro) \
      )
  
  
<span class="udiff-line-removed">- const int maxOpcodeLength = 40;</span>
  #if ENABLE(C_LOOP)
  const int numOpcodeIDs = NUMBER_OF_BYTECODE_IDS + NUMBER_OF_CLOOP_BYTECODE_HELPER_IDS + NUMBER_OF_BYTECODE_HELPER_IDS;
  #else
  const int numOpcodeIDs = NUMBER_OF_BYTECODE_IDS + NUMBER_OF_BYTECODE_HELPER_IDS;
  #endif
  
<span class="udiff-line-added">+ constexpr int numWasmOpcodeIDs = NUMBER_OF_WASM_IDS + NUMBER_OF_BYTECODE_HELPER_IDS;</span>
<span class="udiff-line-added">+ </span>
  #define OPCODE_ID_ENUM(opcode, length) opcode,
      enum OpcodeID : unsigned { FOR_EACH_OPCODE_ID(OPCODE_ID_ENUM) };
<span class="udiff-line-added">+     enum WasmOpcodeID : unsigned { FOR_EACH_WASM_ID(OPCODE_ID_ENUM) };</span>
  #undef OPCODE_ID_ENUM
  
  #if ENABLE(C_LOOP) &amp;&amp; !HAVE(COMPUTED_GOTO)
  
  #define OPCODE_ID_ENUM(opcode, length) opcode##_wide16 = numOpcodeIDs + opcode,
      enum OpcodeIDWide16 : unsigned { FOR_EACH_OPCODE_ID(OPCODE_ID_ENUM) };
<span class="udiff-line-added">+     enum WasmOpcodeIDWide16 : unsigned { FOR_EACH_WASM_ID(OPCODE_ID_ENUM) };</span>
  #undef OPCODE_ID_ENUM
  
  #define OPCODE_ID_ENUM(opcode, length) opcode##_wide32 = numOpcodeIDs * 2 + opcode,
      enum OpcodeIDWide32 : unsigned { FOR_EACH_OPCODE_ID(OPCODE_ID_ENUM) };
<span class="udiff-line-added">+     enum WasmOpcodeIDWide32 : unsigned { FOR_EACH_WASM_ID(OPCODE_ID_ENUM) };</span>
  #undef OPCODE_ID_ENUM
  #endif
  
  extern const unsigned opcodeLengths[];
<span class="udiff-line-added">+ extern const unsigned wasmOpcodeLengths[];</span>
  
  #define OPCODE_ID_LENGTHS(id, length) const int id##_length = length;
      FOR_EACH_OPCODE_ID(OPCODE_ID_LENGTHS);
<span class="udiff-line-added">+     FOR_EACH_WASM_ID(OPCODE_ID_LENGTHS);</span>
  #undef OPCODE_ID_LENGTHS
  
<span class="udiff-line-added">+ static constexpr unsigned maxJSOpcodeLength = /* Opcode */ 1 + /* Wide32 Opcode */ 1 + /* Operands */ (MAX_LENGTH_OF_BYTECODE_IDS - 1) * 4;</span>
<span class="udiff-line-added">+ static constexpr unsigned maxWasmOpcodeLength = /* Opcode */ 1 + /* Wide32 Opcode */ 1 + /* Operands */ (MAX_LENGTH_OF_WASM_IDS - 1) * 4;</span>
<span class="udiff-line-added">+ static constexpr unsigned maxOpcodeLength = std::max(maxJSOpcodeLength, maxWasmOpcodeLength);</span>
<span class="udiff-line-added">+ static constexpr unsigned bitWidthForMaxOpcodeLength = WTF::getMSBSetConstexpr(maxOpcodeLength) + 1;</span>
<span class="udiff-line-added">+ </span>
  #define FOR_EACH_OPCODE_WITH_VALUE_PROFILE(macro) \
      macro(OpCallVarargs) \
      macro(OpTailCallVarargs) \
      macro(OpTailCallForwardArguments) \
      macro(OpConstructVarargs) \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -93,12 +105,14 @@</span>
      macro(OpTryGetById) \
      macro(OpGetByIdDirect) \
      macro(OpGetByValWithThis) \
      macro(OpGetFromArguments) \
      macro(OpToNumber) \
<span class="udiff-line-added">+     macro(OpToNumeric) \</span>
      macro(OpToObject) \
      macro(OpGetArgument) \
<span class="udiff-line-added">+     macro(OpGetInternalField) \</span>
      macro(OpToThis) \
      macro(OpCall) \
      macro(OpTailCall) \
      macro(OpCallEval) \
      macro(OpConstruct) \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -106,10 +120,11 @@</span>
      macro(OpBitand) \
      macro(OpBitor) \
      macro(OpBitnot) \
      macro(OpBitxor) \
      macro(OpLshift) \
<span class="udiff-line-added">+     macro(OpRshift) \</span>
  
  #define FOR_EACH_OPCODE_WITH_ARRAY_PROFILE(macro) \
      macro(OpHasIndexedProperty) \
      macro(OpCallVarargs) \
      macro(OpTailCallVarargs) \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -147,10 +162,11 @@</span>
  #else
  typedef OpcodeID Opcode;
  #endif
  
  extern const char* const opcodeNames[];
<span class="udiff-line-added">+ extern const char* const wasmOpcodeNames[];</span>
  
  #if ENABLE(OPCODE_STATS)
  
  struct OpcodeStats {
      OpcodeStats();
</pre>
<center><a href="Opcode.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Operands.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>