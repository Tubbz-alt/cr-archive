<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/html/MediaDocument.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="LinkRelAttribute.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="MediaDocument.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/html/MediaDocument.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 142,23 ***</span>
  
      createDocumentStructure();
      finish();
  }
  
<span class="line-modified">! MediaDocument::MediaDocument(PAL::SessionID sessionID, Frame* frame, const URL&amp; url)</span>
<span class="line-modified">!     : HTMLDocument(sessionID, frame, url, MediaDocumentClass)</span>
<span class="line-removed">-     , m_replaceMediaElementTimer(*this, &amp;MediaDocument::replaceMediaElementTimerFired)</span>
  {
      setCompatibilityMode(DocumentCompatibilityMode::QuirksMode);
      lockCompatibilityMode();
      if (frame)
          m_outgoingReferrer = frame-&gt;loader().outgoingReferrer();
  }
  
  MediaDocument::~MediaDocument()
  {
<span class="line-removed">-     ASSERT(!m_replaceMediaElementTimer.isActive());</span>
  }
  
  Ref&lt;DocumentParser&gt; MediaDocument::createParser()
  {
      return MediaDocumentParser::create(*this);
<span class="line-new-header">--- 142,21 ---</span>
  
      createDocumentStructure();
      finish();
  }
  
<span class="line-modified">! MediaDocument::MediaDocument(Frame* frame, const URL&amp; url)</span>
<span class="line-modified">!     : HTMLDocument(frame, url, MediaDocumentClass)</span>
  {
      setCompatibilityMode(DocumentCompatibilityMode::QuirksMode);
      lockCompatibilityMode();
      if (frame)
          m_outgoingReferrer = frame-&gt;loader().outgoingReferrer();
  }
  
  MediaDocument::~MediaDocument()
  {
  }
  
  Ref&lt;DocumentParser&gt; MediaDocument::createParser()
  {
      return MediaDocumentParser::create(*this);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 226,20 ***</span>
              keyboardEvent.setDefaultHandled();
          }
      }
  }
  
<span class="line-removed">- void MediaDocument::mediaElementSawUnsupportedTracks()</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     // The HTMLMediaElement was told it has something that the underlying</span>
<span class="line-removed">-     // MediaPlayer cannot handle so we should switch from &lt;video&gt; to &lt;embed&gt;</span>
<span class="line-removed">-     // and let the plugin handle this. Don&#39;t do it immediately as this</span>
<span class="line-removed">-     // function may be called directly from a media engine callback, and</span>
<span class="line-removed">-     // replaceChild will destroy the element, media player, and media engine.</span>
<span class="line-removed">-     m_replaceMediaElementTimer.startOneShot(0_s);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  void MediaDocument::replaceMediaElementTimerFired()
  {
      auto htmlBody = makeRefPtr(bodyOrFrameset());
      if (!htmlBody)
          return;
<span class="line-new-header">--- 224,10 ---</span>
</pre>
<center><a href="LinkRelAttribute.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="MediaDocument.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>