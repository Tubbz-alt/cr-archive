<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/style/StyleInvalidator.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="StyleInvalidator.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="StyleResolveForDocument.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/style/StyleInvalidator.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -24,46 +24,71 @@</span>
   */
  
  #pragma once
  
  #include &quot;RuleFeature.h&quot;
<span class="udiff-line-added">+ #include &quot;RuleSet.h&quot;</span>
  #include &lt;wtf/Forward.h&gt;
<span class="udiff-line-added">+ #include &lt;wtf/HashMap.h&gt;</span>
  
  namespace WebCore {
  
  class Document;
  class Element;
  class MediaQueryEvaluator;
<span class="udiff-line-modified-removed">- class RuleSet;</span>
<span class="udiff-line-modified-added">+ class Scope;</span>
  class SelectorFilter;
  class ShadowRoot;
  class StyleSheetContents;
  
  namespace Style {
  
<span class="udiff-line-added">+ struct InvalidationRuleSet;</span>
<span class="udiff-line-added">+ </span>
  class Invalidator {
  public:
      Invalidator(const Vector&lt;StyleSheetContents*&gt;&amp;, const MediaQueryEvaluator&amp;);
<span class="udiff-line-modified-removed">-     Invalidator(const RuleSet&amp;);</span>
<span class="udiff-line-modified-added">+     Invalidator(const InvalidationRuleSetVector&amp;);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     ~Invalidator();</span>
  
      bool dirtiesAllStyle() const { return m_dirtiesAllStyle; }
<span class="udiff-line-removed">-     bool hasShadowPseudoElementRulesInAuthorSheet() const { return m_hasShadowPseudoElementRulesInAuthorSheet; }</span>
      void invalidateStyle(Document&amp;);
<span class="udiff-line-added">+     void invalidateStyle(Scope&amp;);</span>
      void invalidateStyle(ShadowRoot&amp;);
      void invalidateStyle(Element&amp;);
<span class="udiff-line-modified-removed">-     void invalidateStyleWithMatchElement(Element&amp;, MatchElement);</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-added">+     static void invalidateShadowParts(ShadowRoot&amp;);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     using MatchElementRuleSets = HashMap&lt;MatchElement, InvalidationRuleSetVector, WTF::IntHash&lt;MatchElement&gt;, WTF::StrongEnumHashTraits&lt;MatchElement&gt;&gt;;</span>
<span class="udiff-line-added">+     static void addToMatchElementRuleSets(Invalidator::MatchElementRuleSets&amp;, const InvalidationRuleSet&amp;);</span>
<span class="udiff-line-added">+     static void invalidateWithMatchElementRuleSets(Element&amp;, const MatchElementRuleSets&amp;);</span>
<span class="udiff-line-added">+     static void invalidateAllStyle(Scope&amp;);</span>
<span class="udiff-line-added">+     static void invalidateHostAndSlottedStyleIfNeeded(ShadowRoot&amp;);</span>
  
  private:
      enum class CheckDescendants { Yes, No };
      CheckDescendants invalidateIfNeeded(Element&amp;, const SelectorFilter*);
      void invalidateStyleForTree(Element&amp;, SelectorFilter*);
      void invalidateStyleForDescendants(Element&amp;, SelectorFilter*);
<span class="udiff-line-added">+     void invalidateInShadowTreeIfNeeded(Element&amp;);</span>
<span class="udiff-line-added">+     void invalidateStyleWithMatchElement(Element&amp;, MatchElement);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     struct RuleInformation {</span>
<span class="udiff-line-added">+         bool hasSlottedPseudoElementRules { false };</span>
<span class="udiff-line-added">+         bool hasHostPseudoClassRules { false };</span>
<span class="udiff-line-added">+         bool hasShadowPseudoElementRules { false };</span>
<span class="udiff-line-added">+         bool hasPartPseudoElementRules { false };</span>
<span class="udiff-line-added">+     };</span>
<span class="udiff-line-added">+     RuleInformation collectRuleInformation();</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     RefPtr&lt;RuleSet&gt; m_ownedRuleSet;</span>
<span class="udiff-line-added">+     const InvalidationRuleSetVector m_ruleSets;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     RuleInformation m_ruleInformation;</span>
  
<span class="udiff-line-removed">-     std::unique_ptr&lt;RuleSet&gt; m_ownedRuleSet;</span>
<span class="udiff-line-removed">-     const RuleSet&amp; m_ruleSet;</span>
      bool m_dirtiesAllStyle { false };
<span class="udiff-line-removed">-     bool m_hasShadowPseudoElementRulesInAuthorSheet { false };</span>
      bool m_didInvalidateHostChildren { false };
  };
  
  }
  }
</pre>
<center><a href="StyleInvalidator.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="StyleResolveForDocument.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>