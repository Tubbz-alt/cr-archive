<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/JavaScriptCore/API/JSValueRef.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (C) 2006-2019 Apple Inc. All rights reserved.
  3  *
  4  * Redistribution and use in source and binary forms, with or without
  5  * modification, are permitted provided that the following conditions
  6  * are met:
  7  * 1. Redistributions of source code must retain the above copyright
  8  *    notice, this list of conditions and the following disclaimer.
  9  * 2. Redistributions in binary form must reproduce the above copyright
 10  *    notice, this list of conditions and the following disclaimer in the
 11  *    documentation and/or other materials provided with the distribution.
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #include &quot;config.h&quot;
 27 #include &quot;JSValueRef.h&quot;
 28 
 29 #include &quot;APICast.h&quot;
 30 #include &quot;APIUtils.h&quot;
 31 #include &quot;DateInstance.h&quot;
 32 #include &quot;Exception.h&quot;
 33 #include &quot;JSAPIWrapperObject.h&quot;
 34 #include &quot;JSCInlines.h&quot;
 35 #include &quot;JSCJSValue.h&quot;
 36 #include &quot;JSCallbackObject.h&quot;
 37 #include &quot;JSGlobalObject.h&quot;
 38 #include &quot;JSONObject.h&quot;
 39 #include &quot;JSObjectRefPrivate.h&quot;
 40 #include &quot;JSString.h&quot;
 41 #include &quot;LiteralParser.h&quot;
 42 #include &quot;Protect.h&quot;
 43 #include &lt;algorithm&gt;
 44 #include &lt;wtf/Assertions.h&gt;
 45 #include &lt;wtf/text/StringHash.h&gt;
 46 #include &lt;wtf/text/WTFString.h&gt;
 47 
 48 #if PLATFORM(MAC)
 49 #include &lt;mach-o/dyld.h&gt;
 50 #endif
 51 
 52 #if ENABLE(REMOTE_INSPECTOR)
 53 #include &quot;JSGlobalObjectInspectorController.h&quot;
 54 #endif
 55 
 56 using namespace JSC;
 57 
 58 ::JSType JSValueGetType(JSContextRef ctx, JSValueRef value)
 59 {
 60     if (!ctx) {
 61         ASSERT_NOT_REACHED();
 62         return kJSTypeUndefined;
 63     }
<a name="1" id="anc1"></a><span class="line-modified"> 64     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified"> 65     JSLockHolder locker(globalObject);</span>
 66 
<a name="2" id="anc2"></a><span class="line-modified"> 67     JSValue jsValue = toJS(globalObject, value);</span>
 68 
 69     if (jsValue.isUndefined())
 70         return kJSTypeUndefined;
 71     if (jsValue.isNull())
 72         return kJSTypeNull;
 73     if (jsValue.isBoolean())
 74         return kJSTypeBoolean;
 75     if (jsValue.isNumber())
 76         return kJSTypeNumber;
 77     if (jsValue.isString())
 78         return kJSTypeString;
 79     if (jsValue.isSymbol())
 80         return kJSTypeSymbol;
 81     ASSERT(jsValue.isObject());
 82     return kJSTypeObject;
 83 }
 84 
 85 bool JSValueIsUndefined(JSContextRef ctx, JSValueRef value)
 86 {
 87     if (!ctx) {
 88         ASSERT_NOT_REACHED();
 89         return false;
 90     }
<a name="3" id="anc3"></a><span class="line-modified"> 91     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified"> 92     JSLockHolder locker(globalObject);</span>
 93 
<a name="4" id="anc4"></a><span class="line-modified"> 94     return toJS(globalObject, value).isUndefined();</span>
 95 }
 96 
 97 bool JSValueIsNull(JSContextRef ctx, JSValueRef value)
 98 {
 99     if (!ctx) {
100         ASSERT_NOT_REACHED();
101         return false;
102     }
<a name="5" id="anc5"></a><span class="line-modified">103     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">104     JSLockHolder locker(globalObject);</span>
105 
<a name="6" id="anc6"></a><span class="line-modified">106     return toJS(globalObject, value).isNull();</span>
107 }
108 
109 bool JSValueIsBoolean(JSContextRef ctx, JSValueRef value)
110 {
111     if (!ctx) {
112         ASSERT_NOT_REACHED();
113         return false;
114     }
<a name="7" id="anc7"></a><span class="line-modified">115     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">116     JSLockHolder locker(globalObject);</span>
117 
<a name="8" id="anc8"></a><span class="line-modified">118     return toJS(globalObject, value).isBoolean();</span>
119 }
120 
121 bool JSValueIsNumber(JSContextRef ctx, JSValueRef value)
122 {
123     if (!ctx) {
124         ASSERT_NOT_REACHED();
125         return false;
126     }
<a name="9" id="anc9"></a><span class="line-modified">127     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">128     JSLockHolder locker(globalObject);</span>
129 
<a name="10" id="anc10"></a><span class="line-modified">130     return toJS(globalObject, value).isNumber();</span>
131 }
132 
133 bool JSValueIsString(JSContextRef ctx, JSValueRef value)
134 {
135     if (!ctx) {
136         ASSERT_NOT_REACHED();
137         return false;
138     }
<a name="11" id="anc11"></a><span class="line-modified">139     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">140     JSLockHolder locker(globalObject);</span>
141 
<a name="12" id="anc12"></a><span class="line-modified">142     return toJS(globalObject, value).isString();</span>
143 }
144 
145 bool JSValueIsObject(JSContextRef ctx, JSValueRef value)
146 {
147     if (!ctx) {
148         ASSERT_NOT_REACHED();
149         return false;
150     }
<a name="13" id="anc13"></a><span class="line-modified">151     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">152     JSLockHolder locker(globalObject);</span>
153 
<a name="14" id="anc14"></a><span class="line-modified">154     return toJS(globalObject, value).isObject();</span>
155 }
156 
157 bool JSValueIsSymbol(JSContextRef ctx, JSValueRef value)
158 {
159     if (!ctx) {
160         ASSERT_NOT_REACHED();
161         return false;
162     }
<a name="15" id="anc15"></a><span class="line-modified">163     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">164     JSLockHolder locker(globalObject);</span>
165 
<a name="16" id="anc16"></a><span class="line-modified">166     return toJS(globalObject, value).isSymbol();</span>
167 }
168 
169 bool JSValueIsArray(JSContextRef ctx, JSValueRef value)
170 {
171     if (!ctx) {
172         ASSERT_NOT_REACHED();
173         return false;
174     }
<a name="17" id="anc17"></a><span class="line-modified">175     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">176     VM&amp; vm = globalObject-&gt;vm();</span>
<span class="line-modified">177     JSLockHolder locker(globalObject);</span>
178 
<a name="18" id="anc18"></a><span class="line-modified">179     return toJS(globalObject, value).inherits&lt;JSArray&gt;(vm);</span>
180 }
181 
182 bool JSValueIsDate(JSContextRef ctx, JSValueRef value)
183 {
184     if (!ctx) {
185         ASSERT_NOT_REACHED();
186         return false;
187     }
<a name="19" id="anc19"></a><span class="line-modified">188     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">189     VM&amp; vm = globalObject-&gt;vm();</span>
<span class="line-modified">190     JSLockHolder locker(globalObject);</span>
191 
<a name="20" id="anc20"></a><span class="line-modified">192     return toJS(globalObject, value).inherits&lt;DateInstance&gt;(vm);</span>
193 }
194 
195 bool JSValueIsObjectOfClass(JSContextRef ctx, JSValueRef value, JSClassRef jsClass)
196 {
197     if (!ctx || !jsClass) {
198         ASSERT_NOT_REACHED();
199         return false;
200     }
<a name="21" id="anc21"></a><span class="line-modified">201     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">202     VM&amp; vm = globalObject-&gt;vm();</span>
<span class="line-modified">203     JSLockHolder locker(globalObject);</span>
204 
<a name="22" id="anc22"></a><span class="line-modified">205     JSValue jsValue = toJS(globalObject, value);</span>
206 
207     if (JSObject* o = jsValue.getObject()) {
208         if (o-&gt;inherits&lt;JSProxy&gt;(vm))
209             o = jsCast&lt;JSProxy*&gt;(o)-&gt;target();
210 
211         if (o-&gt;inherits&lt;JSCallbackObject&lt;JSGlobalObject&gt;&gt;(vm))
212             return jsCast&lt;JSCallbackObject&lt;JSGlobalObject&gt;*&gt;(o)-&gt;inherits(jsClass);
<a name="23" id="anc23"></a><span class="line-modified">213         if (o-&gt;inherits&lt;JSCallbackObject&lt;JSNonFinalObject&gt;&gt;(vm))</span>
<span class="line-modified">214             return jsCast&lt;JSCallbackObject&lt;JSNonFinalObject&gt;*&gt;(o)-&gt;inherits(jsClass);</span>
215 #if JSC_OBJC_API_ENABLED
216         if (o-&gt;inherits&lt;JSCallbackObject&lt;JSAPIWrapperObject&gt;&gt;(vm))
217             return jsCast&lt;JSCallbackObject&lt;JSAPIWrapperObject&gt;*&gt;(o)-&gt;inherits(jsClass);
218 #endif
219     }
220     return false;
221 }
222 
223 bool JSValueIsEqual(JSContextRef ctx, JSValueRef a, JSValueRef b, JSValueRef* exception)
224 {
225     if (!ctx) {
226         ASSERT_NOT_REACHED();
227         return false;
228     }
<a name="24" id="anc24"></a><span class="line-modified">229     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">230     VM&amp; vm = globalObject-&gt;vm();</span>
231     JSLockHolder locker(vm);
232     auto scope = DECLARE_CATCH_SCOPE(vm);
233 
<a name="25" id="anc25"></a><span class="line-modified">234     JSValue jsA = toJS(globalObject, a);</span>
<span class="line-modified">235     JSValue jsB = toJS(globalObject, b);</span>
236 
<a name="26" id="anc26"></a><span class="line-modified">237     bool result = JSValue::equal(globalObject, jsA, jsB); // false if an exception is thrown</span>
<span class="line-modified">238     handleExceptionIfNeeded(scope, ctx, exception);</span>
239 
240     return result;
241 }
242 
243 bool JSValueIsStrictEqual(JSContextRef ctx, JSValueRef a, JSValueRef b)
244 {
245     if (!ctx) {
246         ASSERT_NOT_REACHED();
247         return false;
248     }
<a name="27" id="anc27"></a><span class="line-modified">249     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">250     JSLockHolder locker(globalObject);</span>
251 
<a name="28" id="anc28"></a><span class="line-modified">252     JSValue jsA = toJS(globalObject, a);</span>
<span class="line-modified">253     JSValue jsB = toJS(globalObject, b);</span>
254 
<a name="29" id="anc29"></a><span class="line-modified">255     return JSValue::strictEqual(globalObject, jsA, jsB);</span>
256 }
257 
258 bool JSValueIsInstanceOfConstructor(JSContextRef ctx, JSValueRef value, JSObjectRef constructor, JSValueRef* exception)
259 {
260     if (!ctx) {
261         ASSERT_NOT_REACHED();
262         return false;
263     }
<a name="30" id="anc30"></a><span class="line-modified">264     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">265     VM&amp; vm = globalObject-&gt;vm();</span>
266     JSLockHolder locker(vm);
267     auto scope = DECLARE_CATCH_SCOPE(vm);
268 
<a name="31" id="anc31"></a><span class="line-modified">269     JSValue jsValue = toJS(globalObject, value);</span>
270 
271     JSObject* jsConstructor = toJS(constructor);
272     if (!jsConstructor-&gt;structure(vm)-&gt;typeInfo().implementsHasInstance())
273         return false;
<a name="32" id="anc32"></a><span class="line-modified">274     bool result = jsConstructor-&gt;hasInstance(globalObject, jsValue); // false if an exception is thrown</span>
<span class="line-modified">275     handleExceptionIfNeeded(scope, ctx, exception);</span>
276     return result;
277 }
278 
279 JSValueRef JSValueMakeUndefined(JSContextRef ctx)
280 {
281     if (!ctx) {
282         ASSERT_NOT_REACHED();
283         return 0;
284     }
<a name="33" id="anc33"></a><span class="line-modified">285     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">286     JSLockHolder locker(globalObject);</span>
287 
<a name="34" id="anc34"></a><span class="line-modified">288     return toRef(globalObject, jsUndefined());</span>
289 }
290 
291 JSValueRef JSValueMakeNull(JSContextRef ctx)
292 {
293     if (!ctx) {
294         ASSERT_NOT_REACHED();
295         return 0;
296     }
<a name="35" id="anc35"></a><span class="line-modified">297     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">298     JSLockHolder locker(globalObject);</span>
299 
<a name="36" id="anc36"></a><span class="line-modified">300     return toRef(globalObject, jsNull());</span>
301 }
302 
303 JSValueRef JSValueMakeBoolean(JSContextRef ctx, bool value)
304 {
305     if (!ctx) {
306         ASSERT_NOT_REACHED();
307         return 0;
308     }
<a name="37" id="anc37"></a><span class="line-modified">309     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">310     JSLockHolder locker(globalObject);</span>
311 
<a name="38" id="anc38"></a><span class="line-modified">312     return toRef(globalObject, jsBoolean(value));</span>
313 }
314 
315 JSValueRef JSValueMakeNumber(JSContextRef ctx, double value)
316 {
317     if (!ctx) {
318         ASSERT_NOT_REACHED();
319         return 0;
320     }
<a name="39" id="anc39"></a><span class="line-modified">321     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">322     JSLockHolder locker(globalObject);</span>
323 
<a name="40" id="anc40"></a><span class="line-modified">324     return toRef(globalObject, jsNumber(purifyNaN(value)));</span>
325 }
326 
327 JSValueRef JSValueMakeSymbol(JSContextRef ctx, JSStringRef description)
328 {
329     if (!ctx) {
330         ASSERT_NOT_REACHED();
331         return nullptr;
332     }
<a name="41" id="anc41"></a><span class="line-modified">333     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">334     VM&amp; vm = globalObject-&gt;vm();</span>
<span class="line-modified">335     JSLockHolder locker(globalObject);</span>
336 
337     if (!description)
<a name="42" id="anc42"></a><span class="line-modified">338         return toRef(globalObject, Symbol::create(vm));</span>
<span class="line-modified">339     return toRef(globalObject, Symbol::createWithDescription(vm, description-&gt;string()));</span>
340 }
341 
342 JSValueRef JSValueMakeString(JSContextRef ctx, JSStringRef string)
343 {
344     if (!ctx) {
345         ASSERT_NOT_REACHED();
346         return 0;
347     }
<a name="43" id="anc43"></a><span class="line-modified">348     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">349     VM&amp; vm = globalObject-&gt;vm();</span>
350     JSLockHolder locker(vm);
351 
<a name="44" id="anc44"></a><span class="line-modified">352     return toRef(globalObject, jsString(vm, string ? string-&gt;string() : String()));</span>
353 }
354 
355 JSValueRef JSValueMakeFromJSONString(JSContextRef ctx, JSStringRef string)
356 {
357     if (!ctx) {
358         ASSERT_NOT_REACHED();
359         return 0;
360     }
<a name="45" id="anc45"></a><span class="line-modified">361     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">362     JSLockHolder locker(globalObject);</span>
363     String str = string-&gt;string();
364     unsigned length = str.length();
365     if (!length || str.is8Bit()) {
<a name="46" id="anc46"></a><span class="line-modified">366         LiteralParser&lt;LChar&gt; parser(globalObject, str.characters8(), length, StrictJSON);</span>
<span class="line-modified">367         return toRef(globalObject, parser.tryLiteralParse());</span>
368     }
<a name="47" id="anc47"></a><span class="line-modified">369     LiteralParser&lt;UChar&gt; parser(globalObject, str.characters16(), length, StrictJSON);</span>
<span class="line-modified">370     return toRef(globalObject, parser.tryLiteralParse());</span>
371 }
372 
373 JSStringRef JSValueCreateJSONString(JSContextRef ctx, JSValueRef apiValue, unsigned indent, JSValueRef* exception)
374 {
375     if (!ctx) {
376         ASSERT_NOT_REACHED();
377         return 0;
378     }
<a name="48" id="anc48"></a><span class="line-modified">379     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">380     VM&amp; vm = globalObject-&gt;vm();</span>
381     JSLockHolder locker(vm);
382     auto scope = DECLARE_CATCH_SCOPE(vm);
383 
<a name="49" id="anc49"></a><span class="line-modified">384     JSValue value = toJS(globalObject, apiValue);</span>
<span class="line-modified">385     String result = JSONStringify(globalObject, value, indent);</span>
386     if (exception)
387         *exception = 0;
<a name="50" id="anc50"></a><span class="line-modified">388     if (handleExceptionIfNeeded(scope, ctx, exception) == ExceptionStatus::DidThrow)</span>
389         return 0;
390     return OpaqueJSString::tryCreate(result).leakRef();
391 }
392 
393 bool JSValueToBoolean(JSContextRef ctx, JSValueRef value)
394 {
395     if (!ctx) {
396         ASSERT_NOT_REACHED();
397         return false;
398     }
<a name="51" id="anc51"></a><span class="line-modified">399     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">400     JSLockHolder locker(globalObject);</span>
401 
<a name="52" id="anc52"></a><span class="line-modified">402     JSValue jsValue = toJS(globalObject, value);</span>
<span class="line-modified">403     return jsValue.toBoolean(globalObject);</span>
404 }
405 
406 double JSValueToNumber(JSContextRef ctx, JSValueRef value, JSValueRef* exception)
407 {
408     if (!ctx) {
409         ASSERT_NOT_REACHED();
410         return PNaN;
411     }
<a name="53" id="anc53"></a><span class="line-modified">412     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">413     VM&amp; vm = globalObject-&gt;vm();</span>
414     JSLockHolder locker(vm);
415     auto scope = DECLARE_CATCH_SCOPE(vm);
416 
<a name="54" id="anc54"></a><span class="line-modified">417     JSValue jsValue = toJS(globalObject, value);</span>
418 
<a name="55" id="anc55"></a><span class="line-modified">419     double number = jsValue.toNumber(globalObject);</span>
<span class="line-modified">420     if (handleExceptionIfNeeded(scope, ctx, exception) == ExceptionStatus::DidThrow)</span>
421         number = PNaN;
422     return number;
423 }
424 
425 JSStringRef JSValueToStringCopy(JSContextRef ctx, JSValueRef value, JSValueRef* exception)
426 {
427     if (!ctx) {
428         ASSERT_NOT_REACHED();
429         return 0;
430     }
<a name="56" id="anc56"></a><span class="line-modified">431     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">432     VM&amp; vm = globalObject-&gt;vm();</span>
433     JSLockHolder locker(vm);
434     auto scope = DECLARE_CATCH_SCOPE(vm);
435 
<a name="57" id="anc57"></a><span class="line-modified">436     JSValue jsValue = toJS(globalObject, value);</span>
437 
<a name="58" id="anc58"></a><span class="line-modified">438     auto stringRef(OpaqueJSString::tryCreate(jsValue.toWTFString(globalObject)));</span>
<span class="line-modified">439     if (handleExceptionIfNeeded(scope, ctx, exception) == ExceptionStatus::DidThrow)</span>
440         stringRef = nullptr;
441     return stringRef.leakRef();
442 }
443 
444 JSObjectRef JSValueToObject(JSContextRef ctx, JSValueRef value, JSValueRef* exception)
445 {
446     if (!ctx) {
447         ASSERT_NOT_REACHED();
448         return 0;
449     }
<a name="59" id="anc59"></a><span class="line-modified">450     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">451     VM&amp; vm = globalObject-&gt;vm();</span>
452     JSLockHolder locker(vm);
453     auto scope = DECLARE_CATCH_SCOPE(vm);
454 
<a name="60" id="anc60"></a><span class="line-modified">455     JSValue jsValue = toJS(globalObject, value);</span>
456 
<a name="61" id="anc61"></a><span class="line-modified">457     JSObjectRef objectRef = toRef(jsValue.toObject(globalObject));</span>
<span class="line-modified">458     if (handleExceptionIfNeeded(scope, ctx, exception) == ExceptionStatus::DidThrow)</span>
459         objectRef = 0;
460     return objectRef;
461 }
462 
463 void JSValueProtect(JSContextRef ctx, JSValueRef value)
464 {
465     if (!ctx) {
466         ASSERT_NOT_REACHED();
467         return;
468     }
<a name="62" id="anc62"></a><span class="line-modified">469     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">470     JSLockHolder locker(globalObject);</span>
471 
<a name="63" id="anc63"></a><span class="line-modified">472     JSValue jsValue = toJSForGC(globalObject, value);</span>
473     gcProtect(jsValue);
474 }
475 
476 void JSValueUnprotect(JSContextRef ctx, JSValueRef value)
477 {
<a name="64" id="anc64"></a><span class="line-modified">478     JSGlobalObject* globalObject = toJS(ctx);</span>
<span class="line-modified">479     JSLockHolder locker(globalObject);</span>
480 
<a name="65" id="anc65"></a><span class="line-modified">481     JSValue jsValue = toJSForGC(globalObject, value);</span>
482     gcUnprotect(jsValue);
483 }
<a name="66" id="anc66"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="66" type="hidden" />
</body>
</html>