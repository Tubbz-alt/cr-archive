<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/JavaScriptCore/parser/Nodes.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="NodeConstructors.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Nodes.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/parser/Nodes.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -31,10 +31,12 @@</span>
  #include &quot;ModuleScopeData.h&quot;
  #include &lt;wtf/Assertions.h&gt;
  
  namespace JSC {
  
<span class="udiff-line-added">+ DEFINE_ALLOCATOR_WITH_HEAP_IDENTIFIER(ParserArenaRoot);</span>
<span class="udiff-line-added">+ </span>
  // ------------------------------ StatementNode --------------------------------
  
  void StatementNode::setLoc(unsigned firstLine, unsigned lastLine, int startOffset, int lineStartOffset)
  {
      m_lastLine = lastLine;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -196,10 +198,11 @@</span>
      ConstructorKind constructorKind, SuperBinding superBinding, unsigned parameterCount, SourceParseMode mode, bool isArrowFunctionBodyExpression)
          : Node(endLocation)
          , m_isInStrictContext(isInStrictContext)
          , m_superBinding(static_cast&lt;unsigned&gt;(superBinding))
          , m_constructorKind(static_cast&lt;unsigned&gt;(constructorKind))
<span class="udiff-line-added">+         , m_needsClassFieldInitializer(static_cast&lt;unsigned&gt;(NeedsClassFieldInitializer::No))</span>
          , m_isArrowFunctionBodyExpression(isArrowFunctionBodyExpression)
          , m_parseMode(mode)
          , m_startColumn(startColumn)
          , m_endColumn(endColumn)
          , m_functionKeywordStart(functionKeywordStart)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -219,10 +222,11 @@</span>
      ConstructorKind constructorKind, SuperBinding superBinding, unsigned parameterCount, SourceParseMode mode, bool isArrowFunctionBodyExpression)
          : Node(endLocation)
          , m_isInStrictContext(isInStrictContext)
          , m_superBinding(static_cast&lt;unsigned&gt;(superBinding))
          , m_constructorKind(static_cast&lt;unsigned&gt;(constructorKind))
<span class="udiff-line-added">+         , m_needsClassFieldInitializer(static_cast&lt;unsigned&gt;(NeedsClassFieldInitializer::No))</span>
          , m_isArrowFunctionBodyExpression(isArrowFunctionBodyExpression)
          , m_parseMode(mode)
          , m_startColumn(startColumn)
          , m_endColumn(endColumn)
          , m_functionKeywordStart(functionKeywordStart)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -248,28 +252,28 @@</span>
      m_endColumn = position.offset - position.lineStartOffset;
  }
  
  bool FunctionMetadataNode::operator==(const FunctionMetadataNode&amp; other) const
  {
<span class="udiff-line-modified-removed">-     return m_parseMode== other.m_parseMode</span>
<span class="udiff-line-modified-added">+     return m_parseMode == other.m_parseMode</span>
          &amp;&amp; m_isInStrictContext == other.m_isInStrictContext
          &amp;&amp; m_superBinding == other.m_superBinding
          &amp;&amp; m_constructorKind == other.m_constructorKind
          &amp;&amp; m_isArrowFunctionBodyExpression == other.m_isArrowFunctionBodyExpression
          &amp;&amp; m_ident == other.m_ident
          &amp;&amp; m_ecmaName == other.m_ecmaName
<span class="udiff-line-modified-removed">-         &amp;&amp; m_functionMode== other.m_functionMode</span>
<span class="udiff-line-modified-removed">-         &amp;&amp; m_startColumn== other.m_startColumn</span>
<span class="udiff-line-modified-removed">-         &amp;&amp; m_endColumn== other.m_endColumn</span>
<span class="udiff-line-modified-removed">-         &amp;&amp; m_functionKeywordStart== other.m_functionKeywordStart</span>
<span class="udiff-line-modified-removed">-         &amp;&amp; m_functionNameStart== other.m_functionNameStart</span>
<span class="udiff-line-modified-removed">-         &amp;&amp; m_parametersStart== other.m_parametersStart</span>
<span class="udiff-line-modified-removed">-         &amp;&amp; m_source== other.m_source</span>
<span class="udiff-line-modified-removed">-         &amp;&amp; m_classSource== other.m_classSource</span>
<span class="udiff-line-modified-removed">-         &amp;&amp; m_startStartOffset== other.m_startStartOffset</span>
<span class="udiff-line-modified-removed">-         &amp;&amp; m_parameterCount== other.m_parameterCount</span>
<span class="udiff-line-modified-removed">-         &amp;&amp; m_lastLine== other.m_lastLine</span>
<span class="udiff-line-modified-added">+         &amp;&amp; m_functionMode == other.m_functionMode</span>
<span class="udiff-line-modified-added">+         &amp;&amp; m_startColumn == other.m_startColumn</span>
<span class="udiff-line-modified-added">+         &amp;&amp; m_endColumn == other.m_endColumn</span>
<span class="udiff-line-modified-added">+         &amp;&amp; m_functionKeywordStart == other.m_functionKeywordStart</span>
<span class="udiff-line-modified-added">+         &amp;&amp; m_functionNameStart == other.m_functionNameStart</span>
<span class="udiff-line-modified-added">+         &amp;&amp; m_parametersStart == other.m_parametersStart</span>
<span class="udiff-line-modified-added">+         &amp;&amp; m_source == other.m_source</span>
<span class="udiff-line-modified-added">+         &amp;&amp; m_classSource == other.m_classSource</span>
<span class="udiff-line-modified-added">+         &amp;&amp; m_startStartOffset == other.m_startStartOffset</span>
<span class="udiff-line-modified-added">+         &amp;&amp; m_parameterCount == other.m_parameterCount</span>
<span class="udiff-line-modified-added">+         &amp;&amp; m_lastLine == other.m_lastLine</span>
          &amp;&amp; m_position == other.m_position;
  }
  
  void FunctionMetadataNode::dump(PrintStream&amp; stream) const
  {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -324,10 +328,35 @@</span>
          list = list-&gt;m_next;
      }
      return false;
  }
  
<span class="udiff-line-added">+ // FIXME: calculate this feature once when parsing the property list.</span>
<span class="udiff-line-added">+ // https://bugs.webkit.org/show_bug.cgi?id=206174</span>
<span class="udiff-line-added">+ bool PropertyListNode::shouldCreateLexicalScopeForClass(PropertyListNode* list)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     while (list) {</span>
<span class="udiff-line-added">+         if (list-&gt;m_node-&gt;isComputedClassField())</span>
<span class="udiff-line-added">+             return true;</span>
<span class="udiff-line-added">+         list = list-&gt;m_next;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+     return false;</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ // ------------------------------ ClassExprNode -----------------------------</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ // FIXME: calculate this feature once when parsing the property list.</span>
<span class="udiff-line-added">+ // https://bugs.webkit.org/show_bug.cgi?id=206174</span>
<span class="udiff-line-added">+ bool PropertyListNode::hasInstanceFields() const</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     for (auto list = this; list; list = list-&gt;m_next) {</span>
<span class="udiff-line-added">+         if (list-&gt;m_node-&gt;isInstanceClassField())</span>
<span class="udiff-line-added">+             return true;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+     return false;</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
  VariableEnvironmentNode::VariableEnvironmentNode(VariableEnvironment&amp; lexicalVariables)
  {
      m_lexicalVariables.swap(lexicalVariables);
  }
  
</pre>
<center><a href="NodeConstructors.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Nodes.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>