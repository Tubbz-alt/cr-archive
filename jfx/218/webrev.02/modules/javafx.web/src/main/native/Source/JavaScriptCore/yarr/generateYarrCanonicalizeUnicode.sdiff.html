<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/yarr/generateYarrCanonicalizeUnicode</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="YarrPattern.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../ThirdParty/sqlite/VERSION.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/yarr/generateYarrCanonicalizeUnicode</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 #! /usr/bin/env python
  2 
<span class="line-modified">  3 # Copyright (C) 2016 Apple Inc. All rights reserved.</span>
  4 #
  5 # Redistribution and use in source and binary forms, with or without
  6 # modification, are permitted provided that the following conditions
  7 # are met:
  8 #
  9 # 1.  Redistributions of source code must retain the above copyright
 10 #     notice, this list of conditions and the following disclaimer. 
 11 # 2.  Redistributions in binary form must reproduce the above copyright
 12 #     notice, this list of conditions and the following disclaimer in the
 13 #     documentation and/or other materials provided with the distribution. 
 14 #
 15 # THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS &quot;AS IS&quot; AND ANY
 16 # EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 17 # WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 18 # DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 19 # DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 20 # (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 21 # LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 22 # ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 23 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
</pre>
<hr />
<pre>
145                         typeInfo[high] = &quot;CanonicalizeRangeHi:%d&quot; % delta
146 
147         rangeInfo = []
148         end = 0
149         while end &lt;= MaxUnicode:
150             begin = end
151             type = typeInfo[end]
152             while end &lt; MaxUnicode and typeInfo[end + 1] == type:
153                 end = end + 1
154             rangeInfo.append({&quot;begin&quot;: begin, &quot;end&quot;: end, &quot;type&quot;: type})
155             end = end + 1
156         
157         for i in range(len(characterSets)):
158             characters = &quot;&quot;
159             cur_set = characterSets[i]
160             for ch in cur_set:
161                 characters = characters + &quot;0x{character:04x}, &quot;.format(character=ch)
162             file.write(&quot;const UChar32 unicodeCharacterSet{index:d}[] = {{ {characters}0 }};\n&quot;.format(index=i, characters=characters))
163 
164         file.write(&quot;\n&quot;)
<span class="line-modified">165         file.write(&quot;static const size_t UNICODE_CANONICALIZATION_SETS = {setCount:d};\n&quot;.format(setCount=len(characterSets)))</span>
166         file.write(&quot;const UChar32* const unicodeCharacterSetInfo[UNICODE_CANONICALIZATION_SETS] = {\n&quot;)
167 
168         for i in range(len(characterSets)):
169             file.write(&quot;    unicodeCharacterSet{setNumber:d},\n&quot;.format(setNumber=i))
170 
171         file.write(&quot;};\n&quot;)
172         file.write(&quot;\n&quot;)
173         file.write(&quot;const size_t UNICODE_CANONICALIZATION_RANGES = {rangeCount:d};\n&quot;.format(rangeCount=len(rangeInfo)))
174         file.write(&quot;const CanonicalizationRange unicodeRangeInfo[UNICODE_CANONICALIZATION_RANGES] = {\n&quot;)
175 
176         for info in rangeInfo:
177             typeAndValue = info[&quot;type&quot;].split(&quot;:&quot;)
178             file.write(&quot;    {{ 0x{begin:04x}, 0x{end:04x}, 0x{value:04x}, {type} }},\n&quot;.format(begin=info[&quot;begin&quot;], end=info[&quot;end&quot;], value=int(typeAndValue[1]), type=typeAndValue[0]))
179 
180         file.write(&quot;};\n&quot;)
181         file.write(&quot;\n&quot;)
182 
183         
184 if __name__ == &quot;__main__&quot;:
185     parser = optparse.OptionParser(usage = &quot;usage: %prog  &lt;CaseFolding.txt&gt; &lt;YarrCanonicalizeUnicode.h&gt;&quot;)
</pre>
</td>
<td>
<hr />
<pre>
  1 #! /usr/bin/env python
  2 
<span class="line-modified">  3 # Copyright (C) 2016-2019 Apple Inc. All rights reserved.</span>
  4 #
  5 # Redistribution and use in source and binary forms, with or without
  6 # modification, are permitted provided that the following conditions
  7 # are met:
  8 #
  9 # 1.  Redistributions of source code must retain the above copyright
 10 #     notice, this list of conditions and the following disclaimer. 
 11 # 2.  Redistributions in binary form must reproduce the above copyright
 12 #     notice, this list of conditions and the following disclaimer in the
 13 #     documentation and/or other materials provided with the distribution. 
 14 #
 15 # THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS &quot;AS IS&quot; AND ANY
 16 # EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 17 # WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 18 # DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 19 # DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 20 # (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 21 # LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 22 # ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 23 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
</pre>
<hr />
<pre>
145                         typeInfo[high] = &quot;CanonicalizeRangeHi:%d&quot; % delta
146 
147         rangeInfo = []
148         end = 0
149         while end &lt;= MaxUnicode:
150             begin = end
151             type = typeInfo[end]
152             while end &lt; MaxUnicode and typeInfo[end + 1] == type:
153                 end = end + 1
154             rangeInfo.append({&quot;begin&quot;: begin, &quot;end&quot;: end, &quot;type&quot;: type})
155             end = end + 1
156         
157         for i in range(len(characterSets)):
158             characters = &quot;&quot;
159             cur_set = characterSets[i]
160             for ch in cur_set:
161                 characters = characters + &quot;0x{character:04x}, &quot;.format(character=ch)
162             file.write(&quot;const UChar32 unicodeCharacterSet{index:d}[] = {{ {characters}0 }};\n&quot;.format(index=i, characters=characters))
163 
164         file.write(&quot;\n&quot;)
<span class="line-modified">165         file.write(&quot;static constexpr size_t UNICODE_CANONICALIZATION_SETS = {setCount:d};\n&quot;.format(setCount=len(characterSets)))</span>
166         file.write(&quot;const UChar32* const unicodeCharacterSetInfo[UNICODE_CANONICALIZATION_SETS] = {\n&quot;)
167 
168         for i in range(len(characterSets)):
169             file.write(&quot;    unicodeCharacterSet{setNumber:d},\n&quot;.format(setNumber=i))
170 
171         file.write(&quot;};\n&quot;)
172         file.write(&quot;\n&quot;)
173         file.write(&quot;const size_t UNICODE_CANONICALIZATION_RANGES = {rangeCount:d};\n&quot;.format(rangeCount=len(rangeInfo)))
174         file.write(&quot;const CanonicalizationRange unicodeRangeInfo[UNICODE_CANONICALIZATION_RANGES] = {\n&quot;)
175 
176         for info in rangeInfo:
177             typeAndValue = info[&quot;type&quot;].split(&quot;:&quot;)
178             file.write(&quot;    {{ 0x{begin:04x}, 0x{end:04x}, 0x{value:04x}, {type} }},\n&quot;.format(begin=info[&quot;begin&quot;], end=info[&quot;end&quot;], value=int(typeAndValue[1]), type=typeAndValue[0]))
179 
180         file.write(&quot;};\n&quot;)
181         file.write(&quot;\n&quot;)
182 
183         
184 if __name__ == &quot;__main__&quot;:
185     parser = optparse.OptionParser(usage = &quot;usage: %prog  &lt;CaseFolding.txt&gt; &lt;YarrCanonicalizeUnicode.h&gt;&quot;)
</pre>
</td>
</tr>
</table>
<center><a href="YarrPattern.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../ThirdParty/sqlite/VERSION.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>