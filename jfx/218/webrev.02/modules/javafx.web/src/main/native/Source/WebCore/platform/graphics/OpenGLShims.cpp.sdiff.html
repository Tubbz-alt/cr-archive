<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/OpenGLShims.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="NativeImage.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="OpenGLShims.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/OpenGLShims.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
  2  *  Copyright (C) 2011 Igalia S.L.
  3  *
  4  *  This library is free software; you can redistribute it and/or
  5  *  modify it under the terms of the GNU Lesser General Public
  6  *  License as published by the Free Software Foundation; either
  7  *  version 2.1 of the License, or (at your option) any later version.
  8  *
  9  *  This library is distributed in the hope that it will be useful,
 10  *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 11  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 12  *  Lesser General Public License for more details.
 13  *
 14  *  You should have received a copy of the GNU Lesser General Public
 15  *  License along with this library; if not, write to the Free Software
 16  *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
 17  */
 18 
 19 #include &quot;config.h&quot;
<span class="line-modified"> 20 #if ENABLE(GRAPHICS_CONTEXT_3D)</span>
 21 
 22 #define DISABLE_SHIMS
 23 #include &quot;OpenGLShims.h&quot;
 24 
 25 #if !PLATFORM(WIN)
 26 #include &lt;dlfcn.h&gt;
 27 #endif
 28 
 29 #include &lt;wtf/text/CString.h&gt;
 30 #include &lt;wtf/text/WTFString.h&gt;
 31 
 32 namespace WebCore {
 33 
 34 OpenGLFunctionTable* openGLFunctionTable()
 35 {
 36     static OpenGLFunctionTable table;
 37     return &amp;table;
 38 }
 39 
 40 #if PLATFORM(WIN)
</pre>
<hr />
<pre>
145     ASSIGN_FUNCTION_TABLE_ENTRY(glEnableVertexAttribArray, success);
146     ASSIGN_FUNCTION_TABLE_ENTRY(glFramebufferRenderbuffer, success);
147     ASSIGN_FUNCTION_TABLE_ENTRY(glFramebufferTexture2D, success);
148     ASSIGN_FUNCTION_TABLE_ENTRY(glGenBuffers, success);
149     ASSIGN_FUNCTION_TABLE_ENTRY(glGenerateMipmap, success);
150     ASSIGN_FUNCTION_TABLE_ENTRY(glGenFramebuffers, success);
151     ASSIGN_FUNCTION_TABLE_ENTRY(glGenRenderbuffers, success);
152     ASSIGN_FUNCTION_TABLE_ENTRY_EXT(glGenVertexArrays);
153     ASSIGN_FUNCTION_TABLE_ENTRY(glGetActiveAttrib, success);
154     ASSIGN_FUNCTION_TABLE_ENTRY(glGetActiveUniform, success);
155     ASSIGN_FUNCTION_TABLE_ENTRY(glGetAttachedShaders, success);
156     ASSIGN_FUNCTION_TABLE_ENTRY(glGetAttribLocation, success);
157     ASSIGN_FUNCTION_TABLE_ENTRY(glGetBufferParameteriv, success);
158     ASSIGN_FUNCTION_TABLE_ENTRY(glGetFramebufferAttachmentParameteriv, success);
159     ASSIGN_FUNCTION_TABLE_ENTRY(glGetProgramInfoLog, success);
160     ASSIGN_FUNCTION_TABLE_ENTRY(glGetProgramiv, success);
161     ASSIGN_FUNCTION_TABLE_ENTRY(glGetRenderbufferParameteriv, success);
162     ASSIGN_FUNCTION_TABLE_ENTRY(glGetShaderInfoLog, success);
163     ASSIGN_FUNCTION_TABLE_ENTRY(glGetShaderiv, success);
164     ASSIGN_FUNCTION_TABLE_ENTRY(glGetShaderSource, success);

165     // glGetStringi is only available on OpenGL or GLES versions &gt;= 3.0.
166     // Add it with _EXT so it doesn&#39;t cause an initialization failure on lower versions.
167     ASSIGN_FUNCTION_TABLE_ENTRY_EXT(glGetStringi);
168     ASSIGN_FUNCTION_TABLE_ENTRY(glGetUniformfv, success);
169     ASSIGN_FUNCTION_TABLE_ENTRY(glGetUniformiv, success);
170     ASSIGN_FUNCTION_TABLE_ENTRY(glGetUniformLocation, success);
171     ASSIGN_FUNCTION_TABLE_ENTRY(glGetVertexAttribfv, success);
172     ASSIGN_FUNCTION_TABLE_ENTRY(glGetVertexAttribiv, success);
173     ASSIGN_FUNCTION_TABLE_ENTRY(glGetVertexAttribPointerv, success);
174     ASSIGN_FUNCTION_TABLE_ENTRY(glIsBuffer, success);
175     ASSIGN_FUNCTION_TABLE_ENTRY(glIsFramebuffer, success);
176     ASSIGN_FUNCTION_TABLE_ENTRY(glIsProgram, success);
177     ASSIGN_FUNCTION_TABLE_ENTRY(glIsRenderbuffer, success);
178     ASSIGN_FUNCTION_TABLE_ENTRY(glIsShader, success);
179     ASSIGN_FUNCTION_TABLE_ENTRY_EXT(glIsVertexArray);
180     ASSIGN_FUNCTION_TABLE_ENTRY(glLinkProgram, success);
181     ASSIGN_FUNCTION_TABLE_ENTRY(glRenderbufferStorage, success);
182     // In GLES2 there are optional ANGLE and APPLE extensions for glRenderbufferStorageMultisample.
183 #if defined(GL_ES_VERSION_2_0)
184     ASSIGN_FUNCTION_TABLE_ENTRY_EXT(glRenderbufferStorageMultisample);
</pre>
<hr />
<pre>
212     ASSIGN_FUNCTION_TABLE_ENTRY(glUseProgram, success);
213     ASSIGN_FUNCTION_TABLE_ENTRY(glValidateProgram, success);
214     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib1f, success);
215     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib1fv, success);
216     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib2f, success);
217     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib2fv, success);
218     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib3f, success);
219     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib3fv, success);
220     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib4f, success);
221     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib4fv, success);
222     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttribDivisor, success);
223     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttribPointer, success);
224 
225     if (!success)
226         LOG_ERROR(&quot;Could not initialize OpenGL shims&quot;);
227     return success;
228 }
229 
230 } // namespace WebCore
231 
<span class="line-modified">232 #endif // ENABLE(GRAPHICS_CONTEXT_3D)</span>
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
  2  *  Copyright (C) 2011 Igalia S.L.
  3  *
  4  *  This library is free software; you can redistribute it and/or
  5  *  modify it under the terms of the GNU Lesser General Public
  6  *  License as published by the Free Software Foundation; either
  7  *  version 2.1 of the License, or (at your option) any later version.
  8  *
  9  *  This library is distributed in the hope that it will be useful,
 10  *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 11  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 12  *  Lesser General Public License for more details.
 13  *
 14  *  You should have received a copy of the GNU Lesser General Public
 15  *  License along with this library; if not, write to the Free Software
 16  *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
 17  */
 18 
 19 #include &quot;config.h&quot;
<span class="line-modified"> 20 #if ENABLE(GRAPHICS_CONTEXT_GL)</span>
 21 
 22 #define DISABLE_SHIMS
 23 #include &quot;OpenGLShims.h&quot;
 24 
 25 #if !PLATFORM(WIN)
 26 #include &lt;dlfcn.h&gt;
 27 #endif
 28 
 29 #include &lt;wtf/text/CString.h&gt;
 30 #include &lt;wtf/text/WTFString.h&gt;
 31 
 32 namespace WebCore {
 33 
 34 OpenGLFunctionTable* openGLFunctionTable()
 35 {
 36     static OpenGLFunctionTable table;
 37     return &amp;table;
 38 }
 39 
 40 #if PLATFORM(WIN)
</pre>
<hr />
<pre>
145     ASSIGN_FUNCTION_TABLE_ENTRY(glEnableVertexAttribArray, success);
146     ASSIGN_FUNCTION_TABLE_ENTRY(glFramebufferRenderbuffer, success);
147     ASSIGN_FUNCTION_TABLE_ENTRY(glFramebufferTexture2D, success);
148     ASSIGN_FUNCTION_TABLE_ENTRY(glGenBuffers, success);
149     ASSIGN_FUNCTION_TABLE_ENTRY(glGenerateMipmap, success);
150     ASSIGN_FUNCTION_TABLE_ENTRY(glGenFramebuffers, success);
151     ASSIGN_FUNCTION_TABLE_ENTRY(glGenRenderbuffers, success);
152     ASSIGN_FUNCTION_TABLE_ENTRY_EXT(glGenVertexArrays);
153     ASSIGN_FUNCTION_TABLE_ENTRY(glGetActiveAttrib, success);
154     ASSIGN_FUNCTION_TABLE_ENTRY(glGetActiveUniform, success);
155     ASSIGN_FUNCTION_TABLE_ENTRY(glGetAttachedShaders, success);
156     ASSIGN_FUNCTION_TABLE_ENTRY(glGetAttribLocation, success);
157     ASSIGN_FUNCTION_TABLE_ENTRY(glGetBufferParameteriv, success);
158     ASSIGN_FUNCTION_TABLE_ENTRY(glGetFramebufferAttachmentParameteriv, success);
159     ASSIGN_FUNCTION_TABLE_ENTRY(glGetProgramInfoLog, success);
160     ASSIGN_FUNCTION_TABLE_ENTRY(glGetProgramiv, success);
161     ASSIGN_FUNCTION_TABLE_ENTRY(glGetRenderbufferParameteriv, success);
162     ASSIGN_FUNCTION_TABLE_ENTRY(glGetShaderInfoLog, success);
163     ASSIGN_FUNCTION_TABLE_ENTRY(glGetShaderiv, success);
164     ASSIGN_FUNCTION_TABLE_ENTRY(glGetShaderSource, success);
<span class="line-added">165     ASSIGN_FUNCTION_TABLE_ENTRY(glGetString, success);</span>
166     // glGetStringi is only available on OpenGL or GLES versions &gt;= 3.0.
167     // Add it with _EXT so it doesn&#39;t cause an initialization failure on lower versions.
168     ASSIGN_FUNCTION_TABLE_ENTRY_EXT(glGetStringi);
169     ASSIGN_FUNCTION_TABLE_ENTRY(glGetUniformfv, success);
170     ASSIGN_FUNCTION_TABLE_ENTRY(glGetUniformiv, success);
171     ASSIGN_FUNCTION_TABLE_ENTRY(glGetUniformLocation, success);
172     ASSIGN_FUNCTION_TABLE_ENTRY(glGetVertexAttribfv, success);
173     ASSIGN_FUNCTION_TABLE_ENTRY(glGetVertexAttribiv, success);
174     ASSIGN_FUNCTION_TABLE_ENTRY(glGetVertexAttribPointerv, success);
175     ASSIGN_FUNCTION_TABLE_ENTRY(glIsBuffer, success);
176     ASSIGN_FUNCTION_TABLE_ENTRY(glIsFramebuffer, success);
177     ASSIGN_FUNCTION_TABLE_ENTRY(glIsProgram, success);
178     ASSIGN_FUNCTION_TABLE_ENTRY(glIsRenderbuffer, success);
179     ASSIGN_FUNCTION_TABLE_ENTRY(glIsShader, success);
180     ASSIGN_FUNCTION_TABLE_ENTRY_EXT(glIsVertexArray);
181     ASSIGN_FUNCTION_TABLE_ENTRY(glLinkProgram, success);
182     ASSIGN_FUNCTION_TABLE_ENTRY(glRenderbufferStorage, success);
183     // In GLES2 there are optional ANGLE and APPLE extensions for glRenderbufferStorageMultisample.
184 #if defined(GL_ES_VERSION_2_0)
185     ASSIGN_FUNCTION_TABLE_ENTRY_EXT(glRenderbufferStorageMultisample);
</pre>
<hr />
<pre>
213     ASSIGN_FUNCTION_TABLE_ENTRY(glUseProgram, success);
214     ASSIGN_FUNCTION_TABLE_ENTRY(glValidateProgram, success);
215     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib1f, success);
216     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib1fv, success);
217     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib2f, success);
218     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib2fv, success);
219     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib3f, success);
220     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib3fv, success);
221     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib4f, success);
222     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttrib4fv, success);
223     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttribDivisor, success);
224     ASSIGN_FUNCTION_TABLE_ENTRY(glVertexAttribPointer, success);
225 
226     if (!success)
227         LOG_ERROR(&quot;Could not initialize OpenGL shims&quot;);
228     return success;
229 }
230 
231 } // namespace WebCore
232 
<span class="line-modified">233 #endif // ENABLE(GRAPHICS_CONTEXT_GL)</span>
</pre>
</td>
</tr>
</table>
<center><a href="NativeImage.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="OpenGLShims.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>