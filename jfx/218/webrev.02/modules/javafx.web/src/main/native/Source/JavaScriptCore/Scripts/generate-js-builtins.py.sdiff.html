<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/Scripts/generate-js-builtins.py</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="generate-combined-inspector-json.py.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="wkbuiltins/builtins_generate_combined_header.py.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/Scripts/generate-js-builtins.py</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
122         filename = concatenated_output_filename(builtins_files, framework_name, generate_only_wrapper_files)
123         output_filepath = os.path.join(output_path, filename)
124         log.debug(&quot;Writing file: %s&quot; % output_filepath)
125         output_file = LazyFileWriter(output_filepath, force_output)
126         output_file.write(&#39;\n&#39;.join(test_result_file_contents))
127         output_file.close()
128 
129 if __name__ == &#39;__main__&#39;:
130     allowed_framework_names = [&#39;JavaScriptCore&#39;, &#39;WebCore&#39;]
131     cli_parser = optparse.OptionParser(usage=&quot;usage: %prog [options] Builtin1.js [, Builtin2.js, ...]&quot;)
132     cli_parser.add_option(&quot;-i&quot;, &quot;--input-directory&quot;, help=&quot;If specified, generates builtins from all JavaScript files in the specified directory in addition to specific files passed as arguments.&quot;)
133     cli_parser.add_option(&quot;-o&quot;, &quot;--output-directory&quot;, help=&quot;Directory where generated files should be written.&quot;)
134     cli_parser.add_option(&quot;--framework&quot;, type=&quot;choice&quot;, choices=allowed_framework_names, help=&quot;Destination framework for generated files.&quot;)
135     cli_parser.add_option(&quot;--force&quot;, action=&quot;store_true&quot;, help=&quot;Force output of generated scripts, even if nothing changed.&quot;)
136     cli_parser.add_option(&quot;--combined&quot;, action=&quot;store_true&quot;, help=&quot;Produce one .h/.cpp file instead of producing one per builtin object.&quot;)
137     cli_parser.add_option(&quot;--wrappers-only&quot;, action=&quot;store_true&quot;, help=&quot;Produce .h/.cpp wrapper files to ease integration of the builtins.&quot;)
138     cli_parser.add_option(&quot;-v&quot;, &quot;--debug&quot;, action=&quot;store_true&quot;, help=&quot;Log extra output for debugging the generator itself.&quot;)
139     cli_parser.add_option(&quot;-t&quot;, &quot;--test&quot;, action=&quot;store_true&quot;, help=&quot;Enable test mode.&quot;)
140 
141     arg_options, arg_values = cli_parser.parse_args()
<span class="line-modified">142     if len(arg_values) is 0 and not arg_options.input_directory:</span>
143         raise ParseException(&quot;At least one input file or directory expected.&quot;)
144 
145     if not arg_options.output_directory:
146         raise ParseException(&quot;Missing output directory.&quot;)
147 
148     if arg_options.debug:
149         log.setLevel(logging.DEBUG)
150 
151     input_filepaths = arg_values[:]
152     if arg_options.input_directory:
153         for filepath in os.listdir(arg_options.input_directory):
154             input_filepaths.append(os.path.join(arg_options.input_directory, filepath))
155 
156     input_filepaths = sorted([name for name in input_filepaths if fnmatch.fnmatch(name, &#39;*.js&#39;)])
157 
158     options = {
159         &#39;output_path&#39;: arg_options.output_directory,
160         &#39;framework_name&#39;: arg_options.framework,
161         &#39;combined_output&#39;: arg_options.combined,
162         &#39;generate_only_wrapper_files&#39;: arg_options.wrappers_only,
</pre>
</td>
<td>
<hr />
<pre>
122         filename = concatenated_output_filename(builtins_files, framework_name, generate_only_wrapper_files)
123         output_filepath = os.path.join(output_path, filename)
124         log.debug(&quot;Writing file: %s&quot; % output_filepath)
125         output_file = LazyFileWriter(output_filepath, force_output)
126         output_file.write(&#39;\n&#39;.join(test_result_file_contents))
127         output_file.close()
128 
129 if __name__ == &#39;__main__&#39;:
130     allowed_framework_names = [&#39;JavaScriptCore&#39;, &#39;WebCore&#39;]
131     cli_parser = optparse.OptionParser(usage=&quot;usage: %prog [options] Builtin1.js [, Builtin2.js, ...]&quot;)
132     cli_parser.add_option(&quot;-i&quot;, &quot;--input-directory&quot;, help=&quot;If specified, generates builtins from all JavaScript files in the specified directory in addition to specific files passed as arguments.&quot;)
133     cli_parser.add_option(&quot;-o&quot;, &quot;--output-directory&quot;, help=&quot;Directory where generated files should be written.&quot;)
134     cli_parser.add_option(&quot;--framework&quot;, type=&quot;choice&quot;, choices=allowed_framework_names, help=&quot;Destination framework for generated files.&quot;)
135     cli_parser.add_option(&quot;--force&quot;, action=&quot;store_true&quot;, help=&quot;Force output of generated scripts, even if nothing changed.&quot;)
136     cli_parser.add_option(&quot;--combined&quot;, action=&quot;store_true&quot;, help=&quot;Produce one .h/.cpp file instead of producing one per builtin object.&quot;)
137     cli_parser.add_option(&quot;--wrappers-only&quot;, action=&quot;store_true&quot;, help=&quot;Produce .h/.cpp wrapper files to ease integration of the builtins.&quot;)
138     cli_parser.add_option(&quot;-v&quot;, &quot;--debug&quot;, action=&quot;store_true&quot;, help=&quot;Log extra output for debugging the generator itself.&quot;)
139     cli_parser.add_option(&quot;-t&quot;, &quot;--test&quot;, action=&quot;store_true&quot;, help=&quot;Enable test mode.&quot;)
140 
141     arg_options, arg_values = cli_parser.parse_args()
<span class="line-modified">142     if len(arg_values) == 0 and not arg_options.input_directory:</span>
143         raise ParseException(&quot;At least one input file or directory expected.&quot;)
144 
145     if not arg_options.output_directory:
146         raise ParseException(&quot;Missing output directory.&quot;)
147 
148     if arg_options.debug:
149         log.setLevel(logging.DEBUG)
150 
151     input_filepaths = arg_values[:]
152     if arg_options.input_directory:
153         for filepath in os.listdir(arg_options.input_directory):
154             input_filepaths.append(os.path.join(arg_options.input_directory, filepath))
155 
156     input_filepaths = sorted([name for name in input_filepaths if fnmatch.fnmatch(name, &#39;*.js&#39;)])
157 
158     options = {
159         &#39;output_path&#39;: arg_options.output_directory,
160         &#39;framework_name&#39;: arg_options.framework,
161         &#39;combined_output&#39;: arg_options.combined,
162         &#39;generate_only_wrapper_files&#39;: arg_options.wrappers_only,
</pre>
</td>
</tr>
</table>
<center><a href="generate-combined-inspector-json.py.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="wkbuiltins/builtins_generate_combined_header.py.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>