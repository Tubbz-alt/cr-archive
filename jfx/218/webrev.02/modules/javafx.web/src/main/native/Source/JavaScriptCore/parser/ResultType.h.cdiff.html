<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/parser/ResultType.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ParserTokens.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SourceCodeKey.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/parser/ResultType.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 25,10 ***</span>
<span class="line-new-header">--- 25,12 ---</span>
  
  #pragma once
  
  namespace JSC {
  
<span class="line-added">+     // FIXME: Consider whether this is actually necessary. Is LLInt and Baseline&#39;s profiling information enough?</span>
<span class="line-added">+     // https://bugs.webkit.org/show_bug.cgi?id=201659</span>
      struct ResultType {
      private:
          friend struct OperandTypes;
  
          using Type = uint8_t;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 44,10 ***</span>
<span class="line-new-header">--- 46,14 ---</span>
  
      public:
          static constexpr int numBitsNeeded = 7;
          static_assert((TypeBits &amp; ((1 &lt;&lt; numBitsNeeded) - 1)) == TypeBits, &quot;This is necessary for correctness.&quot;);
  
<span class="line-added">+         constexpr explicit ResultType()</span>
<span class="line-added">+             : ResultType(unknownType())</span>
<span class="line-added">+         {</span>
<span class="line-added">+         }</span>
          constexpr explicit ResultType(Type type)
              : m_bits(type)
          {
          }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 146,11 ***</span>
              return ResultType(TypeMaybeBigInt);
          }
  
          static constexpr ResultType bigIntOrInt32Type()
          {
<span class="line-modified">!             return ResultType(TypeMaybeBigInt | TypeInt32);</span>
          }
  
          static constexpr ResultType unknownType()
          {
              return ResultType(TypeBits);
<span class="line-new-header">--- 152,16 ---</span>
              return ResultType(TypeMaybeBigInt);
          }
  
          static constexpr ResultType bigIntOrInt32Type()
          {
<span class="line-modified">!             return ResultType(TypeMaybeBigInt | TypeInt32 | TypeMaybeNumber);</span>
<span class="line-added">+         }</span>
<span class="line-added">+ </span>
<span class="line-added">+         static constexpr ResultType bigIntOrNumberType()</span>
<span class="line-added">+         {</span>
<span class="line-added">+             return ResultType(TypeMaybeBigInt | TypeMaybeNumber);</span>
          }
  
          static constexpr ResultType unknownType()
          {
              return ResultType(TypeBits);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 165,10 ***</span>
<span class="line-new-header">--- 176,28 ---</span>
              if (op1.definitelyIsBigInt() &amp;&amp; op2.definitelyIsBigInt())
                  return bigIntType();
              return addResultType();
          }
  
<span class="line-added">+         static constexpr ResultType forNonAddArith(ResultType op1, ResultType op2)</span>
<span class="line-added">+         {</span>
<span class="line-added">+             if (op1.definitelyIsNumber() &amp;&amp; op2.definitelyIsNumber())</span>
<span class="line-added">+                 return numberType();</span>
<span class="line-added">+             if (op1.definitelyIsBigInt() &amp;&amp; op2.definitelyIsBigInt())</span>
<span class="line-added">+                 return bigIntType();</span>
<span class="line-added">+             return bigIntOrNumberType();</span>
<span class="line-added">+         }</span>
<span class="line-added">+ </span>
<span class="line-added">+         static constexpr ResultType forUnaryArith(ResultType op)</span>
<span class="line-added">+         {</span>
<span class="line-added">+             if (op.definitelyIsNumber())</span>
<span class="line-added">+                 return numberType();</span>
<span class="line-added">+             if (op.definitelyIsBigInt())</span>
<span class="line-added">+                 return bigIntType();</span>
<span class="line-added">+             return bigIntOrNumberType();</span>
<span class="line-added">+         }</span>
<span class="line-added">+ </span>
          // Unlike in C, a logical op produces the value of the
          // last expression evaluated (and not true or false).
          static constexpr ResultType forLogicalOp(ResultType op1, ResultType op2)
          {
              if (op1.definitelyIsBoolean() &amp;&amp; op2.definitelyIsBoolean())
</pre>
<center><a href="ParserTokens.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SourceCodeKey.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>