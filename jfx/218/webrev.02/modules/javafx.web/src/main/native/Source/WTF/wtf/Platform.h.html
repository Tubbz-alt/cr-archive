<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WTF/wtf/Platform.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (C) 2006-2020 Apple Inc. All rights reserved.
  3  * Copyright (C) 2007-2009 Torch Mobile, Inc.
  4  * Copyright (C) 2010, 2011 Research In Motion Limited. All rights reserved.
  5  *
  6  * Redistribution and use in source and binary forms, with or without
  7  * modification, are permitted provided that the following conditions
  8  * are met:
  9  * 1. Redistributions of source code must retain the above copyright
 10  *    notice, this list of conditions and the following disclaimer.
 11  * 2. Redistributions in binary form must reproduce the above copyright
 12  *    notice, this list of conditions and the following disclaimer in the
 13  *    documentation and/or other materials provided with the distribution.
 14  *
 15  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 16  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 17  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 18  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 19  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 20  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 21  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 22  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 23  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 24  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 25  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 26  */
 27 
 28 #pragma once
 29 
 30 /* Include compiler specific macros */
 31 #include &lt;wtf/Compiler.h&gt;
 32 
 33 /* This ensures that users #include &lt;wtf/Platform.h&gt; rather than one of the helper files files directly. */
 34 #define WTF_PLATFORM_GUARD_AGAINST_INDIRECT_INCLUSION
 35 
 36 
 37 /* ==== Platform adaptation macros: these describe properties of the target environment. ==== */
 38 
 39 /* CPU() - the target CPU architecture */
 40 #include &lt;wtf/PlatformCPU.h&gt;
 41 
 42 /* OS() - underlying operating system; only to be used for mandated low-level services like
 43    virtual memory, not to choose a GUI toolkit */
 44 #include &lt;wtf/PlatformOS.h&gt;
 45 
 46 /* PLATFORM() - handles OS, operating environment, graphics API, and
 47    CPU. This macro will be phased out in favor of platform adaptation
 48    macros, policy decision macros, and top-level port definitions. */
 49 #include &lt;wtf/PlatformLegacy.h&gt;
 50 
 51 /* HAVE() - specific system features (headers, functions or similar) that are present or not */
 52 #include &lt;wtf/PlatformHave.h&gt;
 53 
 54 
 55 /* ==== Policy decision macros: these define policy choices for a particular port. ==== */
 56 
 57 /* USE() - use a particular third-party library or optional OS service */
 58 #include &lt;wtf/PlatformUse.h&gt;
 59 
 60 /* ENABLE() - turn on a specific feature of WebKit */
 61 #include &lt;wtf/PlatformEnable.h&gt;
 62 
 63 
 64 /* ==== Helper macros ==== */
 65 
 66 /* Macros for specifing specific calling conventions. */
 67 #include &lt;wtf/PlatformCallingConventions.h&gt;
 68 
 69 
 70 /* ==== Platform additions: additions to Platform.h from outside the main repository ==== */
 71 
 72 #if USE(APPLE_INTERNAL_SDK) &amp;&amp; __has_include(&lt;WebKitAdditions/AdditionalPlatform.h&gt;)
 73 #include &lt;WebKitAdditions/AdditionalPlatform.h&gt;
 74 #endif
 75 
 76 
 77 #undef WTF_PLATFORM_GUARD_AGAINST_INDIRECT_INCLUSION
 78 
 79 
 80 /* FIXME: The following are currenly positioned at the bottom of this file as they either
 81    are currently dependent on macros they should not be and need to be refined or do not
 82    belong as part of Platform.h at all. */
 83 
 84 
 85 #if PLATFORM(GTK)
 86 #define GLIB_VERSION_MIN_REQUIRED GLIB_VERSION_2_36
 87 #define GDK_VERSION_MIN_REQUIRED GDK_VERSION_3_6
 88 #endif
 89 
 90 #if PLATFORM(WPE)
 91 #define GLIB_VERSION_MIN_REQUIRED GLIB_VERSION_2_40
 92 #endif
 93 
 94 #if USE(SOUP)
 95 #define SOUP_VERSION_MIN_REQUIRED SOUP_VERSION_2_42
 96 #endif
 97 
 98 #if PLATFORM(COCOA)
 99 /* Cocoa defines a series of platform macros for debugging. */
100 /* Some of them are really annoying because they use common names (e.g. check()). */
101 /* Disable those macros so that we are not limited in how we name methods and functions. */
102 #undef __ASSERT_MACROS_DEFINE_VERSIONS_WITHOUT_UNDERSCORES
103 #define __ASSERT_MACROS_DEFINE_VERSIONS_WITHOUT_UNDERSCORES 0
104 #endif
105 
106 #if COMPILER(MSVC)
107 #undef __STDC_FORMAT_MACROS
108 #define __STDC_FORMAT_MACROS
109 #undef __STDC_LIMIT_MACROS
110 #define __STDC_LIMIT_MACROS
111 #endif
112 
113 /* FIXME: Any remaining use of TARGET_OS_IPHONE should be removed outside of Apple only files and replaced with OS() checks. */
114 /* Set TARGET_OS_IPHONE to 0 by default to allow using it as a guard
115  * in cross-platform the same way as it is used in OS(DARWIN) code. */
116 #if !defined(TARGET_OS_IPHONE) &amp;&amp; !OS(DARWIN)
117 #define TARGET_OS_IPHONE 0
118 #endif
119 
120 /* FIXME: This does not belong in Platform.h and should instead be included in another mechanism (compiler option, prefix header, config.h, etc) */
121 #if COMPILER(MSVC)
122 /* Enable strict runtime stack buffer checks. */
123 #pragma strict_gs_check(on)
124 #endif
125 
126 /* FIXME: This does not belong in Platform.h and should instead be included in another mechanism (prefix header, config.h, etc) */
127 #if USE(GLIB)
128 #include &lt;wtf/glib/GTypedefs.h&gt;
129 #endif
130 
131 /* FIXME: The availability of RSA_PSS should not depend on the policy decision to USE(GCRYPT). */
132 #if PLATFORM(MAC) || PLATFORM(IOS) || PLATFORM(MACCATALYST) || USE(GCRYPT)
133 #define HAVE_RSA_PSS 1
134 #endif
135 
136 /* FIXME: Remove dependence on ENABLE(WEB_RTC). */
137 #if PLATFORM(COCOA) &amp;&amp; ENABLE(WEB_RTC)
138 #define USE_LIBWEBRTC 1
139 #endif
140 
141 
142 #if PLATFORM(COCOA)
143 #if ENABLE(WEBGL)
144 
145 /* USE_ANGLE=1 uses ANGLE for the WebGL backend.
146    It replaces USE_OPENGL, USE_OPENGL_ES and USE_EGL. */
147 #if PLATFORM(MAC) || (PLATFORM(MACCATALYST) &amp;&amp; __has_include(&lt;OpenGL/OpenGL.h&gt;))
148 #define USE_OPENGL 1
149 #define USE_OPENGL_ES 0
150 #define USE_ANGLE 0
151 #else
152 #define USE_OPENGL 0
153 #define USE_OPENGL_ES 1
154 #define USE_ANGLE 0
155 #endif
156 
157 #ifndef GL_SILENCE_DEPRECATION
158 #define GL_SILENCE_DEPRECATION 1
159 #endif
160 
161 #if USE(OPENGL) &amp;&amp; !defined(HAVE_OPENGL_4)
162 #define HAVE_OPENGL_4 1
163 #endif
164 
165 #if USE(OPENGL_ES) &amp;&amp; !defined(HAVE_OPENGL_ES_3)
166 #define HAVE_OPENGL_ES_3 1
167 #endif
168 
169 #if USE_ANGLE &amp;&amp; (USE_OPENGL || USE_OPENGL_ES)
170 #error USE_ANGLE is incompatible with USE_OPENGL and USE_OPENGL_ES
171 #endif
172 
173 #endif /* ENABLE(WEBGL) */
174 #endif /* PLATFORM(COCOA) */
175 
176 #if ENABLE(WEBGL)
177 #if !defined(USE_ANGLE)
178 #define USE_ANGLE 0
179 #endif
180 
181 #if (USE_ANGLE &amp;&amp; (USE_OPENGL || USE_OPENGL_ES || (defined(USE_EGL) &amp;&amp; USE_EGL))) &amp;&amp; !USE(TEXTURE_MAPPER)
182 #error USE_ANGLE is incompatible with USE_OPENGL, USE_OPENGL_ES and USE_EGL
183 #endif
184 #endif
185 
186 #if USE(TEXTURE_MAPPER) &amp;&amp; ENABLE(GRAPHICS_CONTEXT_GL) &amp;&amp; !defined(USE_TEXTURE_MAPPER_GL)
187 #define USE_TEXTURE_MAPPER_GL 1
188 #endif
189 
190 /* FIXME: This is used to &quot;turn on a specific feature of WebKit&quot;, so should be converted to an ENABLE macro. */
191 #if PLATFORM(COCOA) &amp;&amp; ENABLE(ACCESSIBILITY)
192 #define USE_ACCESSIBILITY_CONTEXT_MENUS 1
193 #endif
    </pre>
  </body>
</html>