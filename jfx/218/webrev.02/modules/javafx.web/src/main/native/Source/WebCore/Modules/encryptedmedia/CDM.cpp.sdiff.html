<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/encryptedmedia/CDM.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../credentialmanagement/CredentialsContainer.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="InitDataRegistry.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/encryptedmedia/CDM.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
451             continue;
452 
453         // 3.10. If media types is empty:
454         if (codecs.isEmpty()) {
455             // ↳ If container normatively implies a specific set of codecs and codec constraints:
456             // ↳ Otherwise:
457             notImplemented();
458         }
459 
460         // 3.11. If content type is not strictly a audio/video type, continue to the next iteration.
461         // 3.12. If robustness is not the empty string and contains an unrecognized value or a value not supported by
462         //       implementation, continue to the next iteration. String comparison is case-sensitive.
463         if (!robustness.isEmpty() &amp;&amp; !m_private-&gt;supportsRobustness(robustness))
464             continue;
465 
466         // 3.13. If the user agent and implementation definitely support playback of encrypted media data for the
467         //       combination of container, media types, robustness and local accumulated configuration in combination
468         //       with restrictions:
469         MediaEngineSupportParameters parameters;
470         parameters.type = ContentType(contentType-&gt;mimeType());
<span class="line-modified">471         if (!MediaPlayer::supportsType(parameters)) {</span>

472             // Try with Media Source:
473             parameters.isMediaSource = true;
<span class="line-modified">474             if (!MediaPlayer::supportsType(parameters))</span>
475                 continue;
476         }
477 
478         if (!m_private-&gt;supportsConfigurationWithRestrictions(accumulatedConfiguration, restrictions))
479             continue;
480 
481         // 3.13.1. Add requested media capability to supported media capabilities.
482         supportedMediaCapabilities.append(requestedCapability);
483 
484         // 3.13.2. ↳ If audio/video type is Video:
485         //         Add requested media capability to the videoCapabilities member of local accumulated configuration.
486         if (type == AudioVideoType::Video)
487             accumulatedConfiguration.videoCapabilities.append(requestedCapability);
488         // 3.13.2. ↳ If audio/video type is Audio:
489         //         Add requested media capability to the audioCapabilities member of local accumulated configuration.
490         else
491             accumulatedConfiguration.audioCapabilities.append(requestedCapability);
492     }
493 
494     // 4. If supported media capabilities is empty, return null.
</pre>
</td>
<td>
<hr />
<pre>
451             continue;
452 
453         // 3.10. If media types is empty:
454         if (codecs.isEmpty()) {
455             // ↳ If container normatively implies a specific set of codecs and codec constraints:
456             // ↳ Otherwise:
457             notImplemented();
458         }
459 
460         // 3.11. If content type is not strictly a audio/video type, continue to the next iteration.
461         // 3.12. If robustness is not the empty string and contains an unrecognized value or a value not supported by
462         //       implementation, continue to the next iteration. String comparison is case-sensitive.
463         if (!robustness.isEmpty() &amp;&amp; !m_private-&gt;supportsRobustness(robustness))
464             continue;
465 
466         // 3.13. If the user agent and implementation definitely support playback of encrypted media data for the
467         //       combination of container, media types, robustness and local accumulated configuration in combination
468         //       with restrictions:
469         MediaEngineSupportParameters parameters;
470         parameters.type = ContentType(contentType-&gt;mimeType());
<span class="line-modified">471         if (MediaPlayer::supportsType(parameters) == MediaPlayer::SupportsType::IsNotSupported) {</span>
<span class="line-added">472 </span>
473             // Try with Media Source:
474             parameters.isMediaSource = true;
<span class="line-modified">475             if (MediaPlayer::supportsType(parameters) == MediaPlayer::SupportsType::IsNotSupported)</span>
476                 continue;
477         }
478 
479         if (!m_private-&gt;supportsConfigurationWithRestrictions(accumulatedConfiguration, restrictions))
480             continue;
481 
482         // 3.13.1. Add requested media capability to supported media capabilities.
483         supportedMediaCapabilities.append(requestedCapability);
484 
485         // 3.13.2. ↳ If audio/video type is Video:
486         //         Add requested media capability to the videoCapabilities member of local accumulated configuration.
487         if (type == AudioVideoType::Video)
488             accumulatedConfiguration.videoCapabilities.append(requestedCapability);
489         // 3.13.2. ↳ If audio/video type is Audio:
490         //         Add requested media capability to the audioCapabilities member of local accumulated configuration.
491         else
492             accumulatedConfiguration.audioCapabilities.append(requestedCapability);
493     }
494 
495     // 4. If supported media capabilities is empty, return null.
</pre>
</td>
</tr>
</table>
<center><a href="../credentialmanagement/CredentialsContainer.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="InitDataRegistry.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>