<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/nicosia/NicosiaAnimation.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  Copyright (C) 2012 Nokia Corporation and/or its subsidiary(-ies)
  3 
  4  This library is free software; you can redistribute it and/or
  5  modify it under the terms of the GNU Library General Public
  6  License as published by the Free Software Foundation; either
  7  version 2 of the License, or (at your option) any later version.
  8 
  9  This library is distributed in the hope that it will be useful,
 10  but WITHOUT ANY WARRANTY; without even the implied warranty of
 11  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 12  Library General Public License for more details.
 13 
 14  You should have received a copy of the GNU Library General Public License
 15  along with this library; see the file COPYING.LIB.  If not, write to
 16  the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 17  Boston, MA 02110-1301, USA.
 18  */
 19 
 20 #pragma once
 21 
 22 #include &quot;Animation.h&quot;
 23 #include &quot;GraphicsLayer.h&quot;
 24 
 25 namespace WebCore {
 26 class TransformationMatrix;
 27 }
 28 
 29 namespace Nicosia {
 30 
 31 class Animation {
 32 public:
 33     enum class AnimationState { Playing, Paused, Stopped };
 34 
 35     struct ApplicationResult {
 36         Optional&lt;WebCore::TransformationMatrix&gt; transform;
 37         Optional&lt;double&gt; opacity;
 38         Optional&lt;WebCore::FilterOperations&gt; filters;
 39         bool hasRunningAnimations { false };
 40     };
 41 
 42     Animation()
 43         : m_keyframes(WebCore::AnimatedPropertyInvalid)
 44     { }
 45     Animation(const String&amp;, const WebCore::KeyframeValueList&amp;, const WebCore::FloatSize&amp;, const WebCore::Animation&amp;, bool, MonotonicTime, Seconds, AnimationState);
 46 
 47     WEBCORE_EXPORT Animation(const Animation&amp;);
 48     Animation&amp; operator=(const Animation&amp;);
 49     Animation(Animation&amp;&amp;) = default;
 50     Animation&amp; operator=(Animation&amp;&amp;) = default;
 51 
 52     void apply(ApplicationResult&amp;, MonotonicTime);
 53     void applyKeepingInternalState(ApplicationResult&amp;, MonotonicTime);
 54     void pause(Seconds);
 55     void resume();
 56 
 57     const String&amp; name() const { return m_name; }
 58     const WebCore::KeyframeValueList&amp; keyframes() const { return m_keyframes; }
 59     AnimationState state() const { return m_state; }
 60     WebCore::TimingFunction* timingFunction() const { return m_timingFunction.get(); }
 61 
 62 private:
 63     void applyInternal(ApplicationResult&amp;, const WebCore::AnimationValue&amp; from, const WebCore::AnimationValue&amp; to, float progress);
 64     Seconds computeTotalRunningTime(MonotonicTime);
 65 
 66     String m_name;
 67     WebCore::KeyframeValueList m_keyframes;
 68     WebCore::FloatSize m_boxSize;
 69     RefPtr&lt;WebCore::TimingFunction&gt; m_timingFunction;
 70     double m_iterationCount;
 71     double m_duration;
 72     WebCore::Animation::AnimationDirection m_direction;
 73     bool m_fillsForwards;
 74     bool m_listsMatch;
 75     MonotonicTime m_startTime;
 76     Seconds m_pauseTime;
 77     Seconds m_totalRunningTime;
 78     MonotonicTime m_lastRefreshedTime;
 79     AnimationState m_state;
 80 };
 81 
 82 class Animations {
 83 public:
 84     Animations() = default;
 85 
 86     void add(const Animation&amp;);
 87     void remove(const String&amp; name);
 88     void remove(const String&amp; name, WebCore::AnimatedPropertyID);
 89     void pause(const String&amp;, Seconds);
 90     void suspend(MonotonicTime);
 91     void resume();
 92 
 93     void apply(Animation::ApplicationResult&amp;, MonotonicTime);
 94     void applyKeepingInternalState(Animation::ApplicationResult&amp;, MonotonicTime);
 95 
 96     bool isEmpty() const { return m_animations.isEmpty(); }
 97     size_t size() const { return m_animations.size(); }
 98     const Vector&lt;Animation&gt;&amp; animations() const { return m_animations; }
 99     Vector&lt;Animation&gt;&amp; animations() { return m_animations; }
100 
101     bool hasRunningAnimations() const;
102     bool hasActiveAnimationsOfType(WebCore::AnimatedPropertyID type) const;
103 
104 private:
105     Vector&lt;Animation&gt; m_animations;
106 };
107 
108 }
    </pre>
  </body>
</html>