<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/FloatPoint3D.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2     Copyright (C) 2004, 2005, 2006 Nikolas Zimmermann &lt;wildfox@kde.org&gt;
  3                   2004, 2005 Rob Buis &lt;buis@kde.org&gt;
  4                   2005 Eric Seidel &lt;eric@webkit.org&gt;
  5                   2010 Zoltan Herczeg &lt;zherczeg@webkit.org&gt;
  6 
  7     This library is free software; you can redistribute it and/or
  8     modify it under the terms of the GNU Library General Public
  9     License as published by the Free Software Foundation; either
 10     version 2 of the License, or (at your option) any later version.
 11 
 12     This library is distributed in the hope that it will be useful,
 13     but WITHOUT ANY WARRANTY; without even the implied warranty of
 14     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 15     Library General Public License for more details.
 16 
 17     You should have received a copy of the GNU Library General Public License
 18     aint with this library; see the file COPYING.LIB.  If not, write to
 19     the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 20     Boston, MA 02110-1301, USA.
 21 */
 22 
 23 #ifndef FloatPoint3D_h
 24 #define FloatPoint3D_h
 25 
 26 #include &quot;FloatPoint.h&quot;
 27 
 28 #if PLATFORM(JAVA)
 29 #include &lt;wtf/java/JavaMath.h&gt;
 30 #endif
 31 
 32 namespace WebCore {
 33 
 34 class FloatPoint3D {
 35 public:
 36     FloatPoint3D()
 37         : m_x(0)
 38         , m_y(0)
 39         , m_z(0)
 40     {
 41     }
 42 
 43     FloatPoint3D(float x, float y, float z)
 44         : m_x(x)
 45         , m_y(y)
 46         , m_z(z)
 47     {
 48     }
 49 
 50     FloatPoint3D(const FloatPoint&amp; p)
 51         : m_x(p.x())
 52         , m_y(p.y())
 53         , m_z(0)
 54     {
 55     }
 56 
 57     float x() const { return m_x; }
 58     void setX(float x) { m_x = x; }
 59 
 60     float y() const { return m_y; }
 61     void setY(float y) { m_y = y; }
 62 
 63     FloatPoint xy() const { return { m_x, m_y }; }
 64     void setXY(FloatPoint p)
 65     {
 66         m_x = p.x();
 67         m_y = p.y();
 68     }
 69 
 70     float z() const { return m_z; }
 71     void setZ(float z) { m_z = z; }
 72     void set(float x, float y, float z)
 73     {
 74         m_x = x;
 75         m_y = y;
 76         m_z = z;
 77     }
 78     void move(float dx, float dy, float dz)
 79     {
 80         m_x += dx;
 81         m_y += dy;
 82         m_z += dz;
 83     }
 84     void scale(float sx, float sy, float sz)
 85     {
 86         m_x *= sx;
 87         m_y *= sy;
 88         m_z *= sz;
 89     }
 90 
 91     bool isZero() const
 92     {
 93         return !m_x &amp;&amp; !m_y &amp;&amp; !m_z;
 94     }
 95 
 96     void normalize();
 97 
 98     float dot(const FloatPoint3D&amp; a) const
 99     {
100         return m_x * a.x() + m_y * a.y() + m_z * a.z();
101     }
102 
103     // Sets this FloatPoint3D to the cross product of the passed two.
104     // It is safe for &quot;this&quot; to be the same as either or both of the
105     // arguments.
106     void cross(const FloatPoint3D&amp; a, const FloatPoint3D&amp; b)
107     {
108         float x = a.y() * b.z() - a.z() * b.y();
109         float y = a.z() * b.x() - a.x() * b.z();
110         float z = a.x() * b.y() - a.y() * b.x();
111         m_x = x;
112         m_y = y;
113         m_z = z;
114     }
115 
116     // Convenience function returning &quot;this cross point&quot; as a
117     // stack-allocated result.
118     FloatPoint3D cross(const FloatPoint3D&amp; point) const
119     {
120         FloatPoint3D result;
121         result.cross(*this, point);
122         return result;
123     }
124 
125     float lengthSquared() const { return this-&gt;dot(*this); }
126     float length() const
127     {
128 #if PLATFORM(JAVA)
129         return javamath::hypot(m_x, m_y, m_z);
130 #else
131         return std::hypot(m_x, m_y, m_z);
132 #endif
133     }
134 
135     float distanceTo(const FloatPoint3D&amp; a) const;
136 
137 private:
138     float m_x;
139     float m_y;
140     float m_z;
141 };
142 
143 inline FloatPoint3D&amp; operator +=(FloatPoint3D&amp; a, const FloatPoint3D&amp; b)
144 {
145     a.move(b.x(), b.y(), b.z());
146     return a;
147 }
148 
149 inline FloatPoint3D&amp; operator -=(FloatPoint3D&amp; a, const FloatPoint3D&amp; b)
150 {
151     a.move(-b.x(), -b.y(), -b.z());
152     return a;
153 }
154 
155 inline FloatPoint3D operator+(const FloatPoint3D&amp; a, const FloatPoint3D&amp; b)
156 {
157     return FloatPoint3D(a.x() + b.x(), a.y() + b.y(), a.z() + b.z());
158 }
159 
160 inline FloatPoint3D operator-(const FloatPoint3D&amp; a, const FloatPoint3D&amp; b)
161 {
162     return FloatPoint3D(a.x() - b.x(), a.y() - b.y(), a.z() - b.z());
163 }
164 
165 inline bool operator==(const FloatPoint3D&amp; a, const FloatPoint3D&amp; b)
166 {
167     return a.x() == b.x() &amp;&amp; a.y() == b.y() &amp;&amp; a.z() == b.z();
168 }
169 
170 inline bool operator!=(const FloatPoint3D&amp; a, const FloatPoint3D&amp; b)
171 {
172     return a.x() != b.x() || a.y() != b.y() || a.z() != b.z();
173 }
174 
175 inline float operator*(const FloatPoint3D&amp; a, const FloatPoint3D&amp; b)
176 {
177     // dot product
178     return a.dot(b);
179 }
180 
181 inline FloatPoint3D operator*(float k, const FloatPoint3D&amp; v)
182 {
183     return FloatPoint3D(k * v.x(), k * v.y(), k * v.z());
184 }
185 
186 inline FloatPoint3D operator*(const FloatPoint3D&amp; v, float k)
187 {
188     return FloatPoint3D(k * v.x(), k * v.y(), k * v.z());
189 }
190 
191 inline float FloatPoint3D::distanceTo(const FloatPoint3D&amp; a) const
192 {
193     return (*this - a).length();
194 }
195 
196 WEBCORE_EXPORT WTF::TextStream&amp; operator&lt;&lt;(WTF::TextStream&amp;, const FloatPoint3D&amp;);
197 
198 } // namespace WebCore
199 
200 #endif // FloatPoint3D_h
    </pre>
  </body>
</html>