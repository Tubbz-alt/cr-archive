<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/WebCore/platform/animation/Animation.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (C) 1999 Antti Koivisto (koivisto@kde.org)
  3  * Copyright (C) 2004-2017 Apple Inc. All rights reserved.
  4  *
  5  * This library is free software; you can redistribute it and/or
  6  * modify it under the terms of the GNU Library General Public
  7  * License as published by the Free Software Foundation; either
  8  * version 2 of the License, or (at your option) any later version.
  9  *
 10  * This library is distributed in the hope that it will be useful,
 11  * but WITHOUT ANY WARRANTY; without even the implied warranty of
 12  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 13  * Library General Public License for more details.
 14  *
 15  * You should have received a copy of the GNU Library General Public License
 16  * along with this library; see the file COPYING.LIB.  If not, write to
 17  * the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 18  * Boston, MA 02110-1301, USA.
 19  *
 20  */
 21 
 22 #include &quot;config.h&quot;
 23 #include &quot;Animation.h&quot;
 24 
 25 #include &lt;wtf/NeverDestroyed.h&gt;
<a name="1" id="anc1"></a><span class="line-added"> 26 #include &lt;wtf/text/TextStream.h&gt;</span>
 27 
 28 namespace WebCore {
 29 
 30 Animation::Animation()
 31     : m_name(initialName())
 32     , m_iterationCount(initialIterationCount())
 33     , m_delay(initialDelay())
 34     , m_duration(initialDuration())
 35     , m_timingFunction(initialTimingFunction())
 36     , m_mode(AnimateAll)
 37     , m_direction(initialDirection())
 38     , m_fillMode(static_cast&lt;unsigned&gt;(initialFillMode()))
 39     , m_playState(static_cast&lt;unsigned&gt;(initialPlayState()))
 40     , m_delaySet(false)
 41     , m_directionSet(false)
 42     , m_durationSet(false)
 43     , m_fillModeSet(false)
 44     , m_iterationCountSet(false)
 45     , m_nameSet(false)
 46     , m_playStateSet(false)
 47     , m_propertySet(false)
 48     , m_timingFunctionSet(false)
 49     , m_isNone(false)
 50 {
 51 }
 52 
 53 Animation::Animation(const Animation&amp; o)
 54     : RefCounted&lt;Animation&gt;()
 55     , m_property(o.m_property)
 56     , m_name(o.m_name)
 57     , m_iterationCount(o.m_iterationCount)
 58     , m_delay(o.m_delay)
 59     , m_duration(o.m_duration)
 60     , m_timingFunction(o.m_timingFunction)
 61     , m_nameStyleScopeOrdinal(o.m_nameStyleScopeOrdinal)
 62     , m_mode(o.m_mode)
 63     , m_direction(o.m_direction)
 64     , m_fillMode(o.m_fillMode)
 65     , m_playState(o.m_playState)
 66     , m_delaySet(o.m_delaySet)
 67     , m_directionSet(o.m_directionSet)
 68     , m_durationSet(o.m_durationSet)
 69     , m_fillModeSet(o.m_fillModeSet)
 70     , m_iterationCountSet(o.m_iterationCountSet)
 71     , m_nameSet(o.m_nameSet)
 72     , m_playStateSet(o.m_playStateSet)
 73     , m_propertySet(o.m_propertySet)
 74     , m_timingFunctionSet(o.m_timingFunctionSet)
 75     , m_isNone(o.m_isNone)
 76 {
 77 }
 78 
 79 Animation&amp; Animation::operator=(const Animation&amp; o)
 80 {
 81     m_name = o.m_name;
 82     m_iterationCount = o.m_iterationCount;
 83     m_delay = o.m_delay;
 84     m_duration = o.m_duration;
 85     m_timingFunction = o.m_timingFunction;
 86     m_nameStyleScopeOrdinal = o.m_nameStyleScopeOrdinal;
 87     m_property = o.m_property;
 88     m_mode = o.m_mode;
 89     m_direction = o.m_direction;
 90     m_fillMode = o.m_fillMode;
 91     m_playState = o.m_playState;
 92 
 93     m_delaySet = o.m_delaySet;
 94     m_directionSet = o.m_directionSet;
 95     m_durationSet = o.m_durationSet;
 96     m_fillModeSet = o.m_fillModeSet;
 97     m_iterationCountSet = o.m_iterationCountSet;
 98     m_nameSet = o.m_nameSet;
 99     m_playStateSet = o.m_playStateSet;
100     m_propertySet = o.m_propertySet;
101     m_timingFunctionSet = o.m_timingFunctionSet;
102     m_isNone = o.m_isNone;
103 
104     return *this;
105 }
106 
107 Animation::~Animation() = default;
108 
109 bool Animation::animationsMatch(const Animation&amp; other, bool matchProperties) const
110 {
111     bool result = m_name == other.m_name
112         &amp;&amp; m_playState == other.m_playState
113         &amp;&amp; m_playStateSet == other.m_playStateSet
114         &amp;&amp; m_iterationCount == other.m_iterationCount
115         &amp;&amp; m_delay == other.m_delay
116         &amp;&amp; m_duration == other.m_duration
117         &amp;&amp; *(m_timingFunction.get()) == *(other.m_timingFunction.get())
118         &amp;&amp; m_nameStyleScopeOrdinal == other.m_nameStyleScopeOrdinal
119         &amp;&amp; m_direction == other.m_direction
120         &amp;&amp; m_fillMode == other.m_fillMode
121         &amp;&amp; m_delaySet == other.m_delaySet
122         &amp;&amp; m_directionSet == other.m_directionSet
123         &amp;&amp; m_durationSet == other.m_durationSet
124         &amp;&amp; m_fillModeSet == other.m_fillModeSet
125         &amp;&amp; m_iterationCountSet == other.m_iterationCountSet
126         &amp;&amp; m_nameSet == other.m_nameSet
127         &amp;&amp; m_timingFunctionSet == other.m_timingFunctionSet
128         &amp;&amp; m_isNone == other.m_isNone;
129 
130     if (!result)
131         return false;
132 
133     return !matchProperties || (m_mode == other.m_mode &amp;&amp; m_property == other.m_property &amp;&amp; m_propertySet == other.m_propertySet);
134 }
135 
136 const String&amp; Animation::initialName()
137 {
138     static NeverDestroyed&lt;String&gt; initialValue(MAKE_STATIC_STRING_IMPL(&quot;none&quot;));
139     return initialValue;
140 }
141 
<a name="2" id="anc2"></a><span class="line-added">142 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, Animation::AnimationMode mode)</span>
<span class="line-added">143 {</span>
<span class="line-added">144     switch (mode) {</span>
<span class="line-added">145     case Animation::AnimateAll: ts &lt;&lt; &quot;all&quot;; break;</span>
<span class="line-added">146     case Animation::AnimateNone: ts &lt;&lt; &quot;none&quot;; break;</span>
<span class="line-added">147     case Animation::AnimateSingleProperty: ts &lt;&lt; &quot;single property&quot;; break;</span>
<span class="line-added">148     case Animation::AnimateUnknownProperty: ts &lt;&lt; &quot;unknown property&quot;; break;</span>
<span class="line-added">149     }</span>
<span class="line-added">150     return ts;</span>
<span class="line-added">151 }</span>
<span class="line-added">152 </span>
<span class="line-added">153 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, Animation::AnimationDirection direction)</span>
<span class="line-added">154 {</span>
<span class="line-added">155     switch (direction) {</span>
<span class="line-added">156     case Animation::AnimationDirectionNormal: ts &lt;&lt; &quot;normal&quot;; break;</span>
<span class="line-added">157     case Animation::AnimationDirectionAlternate: ts &lt;&lt; &quot;alternate&quot;; break;</span>
<span class="line-added">158     case Animation::AnimationDirectionReverse: ts &lt;&lt; &quot;reverse&quot;; break;</span>
<span class="line-added">159     case Animation::AnimationDirectionAlternateReverse: ts &lt;&lt; &quot;alternate-reverse&quot;; break;</span>
<span class="line-added">160     }</span>
<span class="line-added">161     return ts;</span>
<span class="line-added">162 }</span>
<span class="line-added">163 </span>
<span class="line-added">164 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, const Animation&amp; animation)</span>
<span class="line-added">165 {</span>
<span class="line-added">166     ts.dumpProperty(&quot;property&quot;, getPropertyName(animation.property()));</span>
<span class="line-added">167     ts.dumpProperty(&quot;name&quot;, animation.name());</span>
<span class="line-added">168     ts.dumpProperty(&quot;iteration count&quot;, animation.iterationCount());</span>
<span class="line-added">169     ts.dumpProperty(&quot;delay&quot;, animation.iterationCount());</span>
<span class="line-added">170     ts.dumpProperty(&quot;duration&quot;, animation.duration());</span>
<span class="line-added">171     if (animation.timingFunction())</span>
<span class="line-added">172         ts.dumpProperty(&quot;timing function&quot;, *animation.timingFunction());</span>
<span class="line-added">173     ts.dumpProperty(&quot;mode&quot;, animation.animationMode());</span>
<span class="line-added">174     ts.dumpProperty(&quot;direction&quot;, animation.direction());</span>
<span class="line-added">175     ts.dumpProperty(&quot;fill-mode&quot;, animation.fillMode());</span>
<span class="line-added">176     ts.dumpProperty(&quot;play-state&quot;, animation.playState());</span>
<span class="line-added">177 </span>
<span class="line-added">178     return ts;</span>
<span class="line-added">179 }</span>
<span class="line-added">180 </span>
181 } // namespace WebCore
<a name="3" id="anc3"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="3" type="hidden" />
</body>
</html>