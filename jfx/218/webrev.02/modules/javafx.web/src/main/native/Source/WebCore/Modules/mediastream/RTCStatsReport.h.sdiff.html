<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/mediastream/RTCStatsReport.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="RTCRtpTransceiverBackend.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="RTCStatsReport.idl.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/mediastream/RTCStatsReport.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  8  * 1.  Redistributions of source code must retain the above copyright
  9  *     notice, this list of conditions and the following disclaimer.
 10  * 2.  Redistributions in binary form must reproduce the above copyright
 11  *     notice, this list of conditions and the following disclaimer in the
 12  *     documentation and/or other materials provided with the distribution.
 13  *
 14  * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS&#39;&#39; AND ANY
 15  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 16  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 17  * DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 18  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 19  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 20  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 21  * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 23  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #pragma once
 27 
<span class="line-modified"> 28 #include &quot;JSDOMMapLike.h&quot;</span>
 29 
 30 namespace WebCore {
 31 


 32 class RTCStatsReport : public RefCounted&lt;RTCStatsReport&gt; {
 33 public:
<span class="line-modified"> 34     static Ref&lt;RTCStatsReport&gt; create() { return adoptRef(*new RTCStatsReport); }</span>
<span class="line-modified"> 35 </span>
<span class="line-removed"> 36     void synchronizeBackingMap(Ref&lt;DOMMapLike&gt;&amp;&amp; mapLike) { m_mapLike = WTFMove(mapLike); }</span>
<span class="line-removed"> 37     DOMMapLike* backingMap() { return m_mapLike.get(); }</span>
<span class="line-removed"> 38 </span>
<span class="line-removed"> 39     template&lt;typename Value&gt; void addStats(typename Value::ParameterType&amp;&amp; value) { m_mapLike-&gt;set&lt;IDLDOMString, Value&gt;(value.id, std::forward&lt;typename Value::ParameterType&gt;(value)); }</span>
 40 

 41 
 42     enum class Type {
 43         Codec,
 44         InboundRtp,
 45         OutboundRtp,
 46         PeerConnection,
 47         DataChannel,
 48         Track,
 49         Transport,
 50         CandidatePair,
 51         LocalCandidate,
 52         RemoteCandidate,
 53         Certificate
 54     };
 55     struct Stats {
 56         double timestamp;
 57         Type type;
 58         String id;
 59     };
 60 
</pre>
<hr />
<pre>
219 
220     struct TransportStats : Stats {
221         TransportStats() { type = RTCStatsReport::Type::Transport; }
222 
223         Optional&lt;uint64_t&gt; bytesSent;
224         Optional&lt;uint64_t&gt; bytesReceived;
225         String rtcpTransportStatsId;
226         String selectedCandidatePairId;
227         String localCertificateId;
228         String remoteCertificateId;
229     };
230 
231     struct PeerConnectionStats : Stats {
232         PeerConnectionStats() { type = RTCStatsReport::Type::PeerConnection; }
233 
234         Optional&lt;uint32_t&gt; dataChannelsOpened;
235         Optional&lt;uint32_t&gt; dataChannelsClosed;
236     };
237 
238 private:
<span class="line-modified">239     RTCStatsReport() = default;</span>
240 
<span class="line-modified">241 private:</span>
<span class="line-removed">242     RefPtr&lt;DOMMapLike&gt; m_mapLike;</span>
243 };
244 





245 } // namespace WebCore
</pre>
</td>
<td>
<hr />
<pre>
  8  * 1.  Redistributions of source code must retain the above copyright
  9  *     notice, this list of conditions and the following disclaimer.
 10  * 2.  Redistributions in binary form must reproduce the above copyright
 11  *     notice, this list of conditions and the following disclaimer in the
 12  *     documentation and/or other materials provided with the distribution.
 13  *
 14  * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS&#39;&#39; AND ANY
 15  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 16  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 17  * DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 18  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 19  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 20  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 21  * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 23  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #pragma once
 27 
<span class="line-modified"> 28 #include &quot;LibWebRTCStatsCollector.h&quot;</span>
 29 
 30 namespace WebCore {
 31 
<span class="line-added"> 32 class DOMMapAdapter;</span>
<span class="line-added"> 33 </span>
 34 class RTCStatsReport : public RefCounted&lt;RTCStatsReport&gt; {
 35 public:
<span class="line-modified"> 36     using MapInitializer = Function&lt;void(DOMMapAdapter&amp;)&gt;;</span>
<span class="line-modified"> 37     static Ref&lt;RTCStatsReport&gt; create(MapInitializer&amp;&amp; mapInitializer) { return adoptRef(*new RTCStatsReport(WTFMove(mapInitializer))); }</span>




 38 
<span class="line-added"> 39     void initializeMapLike(DOMMapAdapter&amp; adapter) { m_mapInitializer(adapter); }</span>
 40 
 41     enum class Type {
 42         Codec,
 43         InboundRtp,
 44         OutboundRtp,
 45         PeerConnection,
 46         DataChannel,
 47         Track,
 48         Transport,
 49         CandidatePair,
 50         LocalCandidate,
 51         RemoteCandidate,
 52         Certificate
 53     };
 54     struct Stats {
 55         double timestamp;
 56         Type type;
 57         String id;
 58     };
 59 
</pre>
<hr />
<pre>
218 
219     struct TransportStats : Stats {
220         TransportStats() { type = RTCStatsReport::Type::Transport; }
221 
222         Optional&lt;uint64_t&gt; bytesSent;
223         Optional&lt;uint64_t&gt; bytesReceived;
224         String rtcpTransportStatsId;
225         String selectedCandidatePairId;
226         String localCertificateId;
227         String remoteCertificateId;
228     };
229 
230     struct PeerConnectionStats : Stats {
231         PeerConnectionStats() { type = RTCStatsReport::Type::PeerConnection; }
232 
233         Optional&lt;uint32_t&gt; dataChannelsOpened;
234         Optional&lt;uint32_t&gt; dataChannelsClosed;
235     };
236 
237 private:
<span class="line-modified">238     explicit RTCStatsReport(MapInitializer&amp;&amp;);</span>
239 
<span class="line-modified">240     MapInitializer m_mapInitializer;</span>

241 };
242 
<span class="line-added">243 inline RTCStatsReport::RTCStatsReport(MapInitializer&amp;&amp; mapInitializer)</span>
<span class="line-added">244     : m_mapInitializer(WTFMove(mapInitializer))</span>
<span class="line-added">245 {</span>
<span class="line-added">246 }</span>
<span class="line-added">247 </span>
248 } // namespace WebCore
</pre>
</td>
</tr>
</table>
<center><a href="RTCRtpTransceiverBackend.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="RTCStatsReport.idl.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>