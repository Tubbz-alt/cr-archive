<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old modules/javafx.web/src/main/native/Source/WebCore/rendering/RenderThemeMac.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (C) 2005-2017 Apple Inc. All rights reserved.
  3  *
  4  * This library is free software; you can redistribute it and/or
  5  * modify it under the terms of the GNU Library General Public
  6  * License as published by the Free Software Foundation; either
  7  * version 2 of the License, or (at your option) any later version.
  8  *
  9  * This library is distributed in the hope that it will be useful,
 10  * but WITHOUT ANY WARRANTY; without even the implied warranty of
 11  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 12  * Library General Public License for more details.
 13  *
 14  * You should have received a copy of the GNU Library General Public License
 15  * along with this library; see the file COPYING.LIB.  If not, write to
 16  * the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 17  * Boston, MA 02110-1301, USA.
 18  *
 19  */
 20 
 21 #pragma once
 22 
 23 #if PLATFORM(MAC)
 24 
 25 #import &quot;RenderThemeCocoa.h&quot;
 26 
 27 #if ENABLE(SERVICE_CONTROLS)
 28 OBJC_CLASS NSServicesRolloverButtonCell;
 29 #endif
 30 
 31 OBJC_CLASS WebCoreRenderThemeNotificationObserver;
 32 
 33 namespace WebCore {
 34 
 35 class RenderProgress;
 36 class RenderStyle;
 37 
 38 struct AttachmentLayout;
 39 
 40 class RenderThemeMac final : public RenderThemeCocoa {
 41 public:
 42     friend NeverDestroyed&lt;RenderThemeMac&gt;;
 43 
 44     // A method asking if the control changes its tint when the window has focus or not.
 45     bool controlSupportsTints(const RenderObject&amp;) const final;
 46 
 47     // A general method asking if any control tinting is supported at all.
 48     bool supportsControlTints() const final { return true; }
 49 
 50     void adjustRepaintRect(const RenderObject&amp;, FloatRect&amp;) final;
 51 
 52     bool isControlStyled(const RenderStyle&amp;, const BorderData&amp;, const FillLayer&amp;, const Color&amp; backgroundColor) const final;
 53 
 54     bool supportsSelectionForegroundColors(OptionSet&lt;StyleColor::Options&gt;) const final;
 55 
 56     Color platformActiveSelectionBackgroundColor(OptionSet&lt;StyleColor::Options&gt;) const final;
 57     Color platformActiveSelectionForegroundColor(OptionSet&lt;StyleColor::Options&gt;) const final;
 58     Color transformSelectionBackgroundColor(const Color&amp;, OptionSet&lt;StyleColor::Options&gt;) const final;
 59     Color platformInactiveSelectionBackgroundColor(OptionSet&lt;StyleColor::Options&gt;) const final;
 60     Color platformInactiveSelectionForegroundColor(OptionSet&lt;StyleColor::Options&gt;) const final;
 61     Color platformActiveListBoxSelectionBackgroundColor(OptionSet&lt;StyleColor::Options&gt;) const final;
 62     Color platformActiveListBoxSelectionForegroundColor(OptionSet&lt;StyleColor::Options&gt;) const final;
 63     Color platformInactiveListBoxSelectionBackgroundColor(OptionSet&lt;StyleColor::Options&gt;) const final;
 64     Color platformInactiveListBoxSelectionForegroundColor(OptionSet&lt;StyleColor::Options&gt;) const final;
 65     Color platformFocusRingColor(OptionSet&lt;StyleColor::Options&gt;) const final;
 66     Color platformActiveTextSearchHighlightColor(OptionSet&lt;StyleColor::Options&gt;) const final;
 67     Color platformInactiveTextSearchHighlightColor(OptionSet&lt;StyleColor::Options&gt;) const final;
 68 
 69     ScrollbarControlSize scrollbarControlSizeForPart(ControlPart) final { return SmallScrollbar; }
 70 
 71     int minimumMenuListSize(const RenderStyle&amp;) const final;
 72 
 73     void adjustSliderThumbSize(RenderStyle&amp;, const Element*) const final;
 74 
 75 #if ENABLE(DATALIST_ELEMENT)
 76     IntSize sliderTickSize() const final;
 77     int sliderTickOffsetFromTrackCenter() const final;
 78 #endif
 79 
 80     LengthBox popupInternalPaddingBox(const RenderStyle&amp;) const final;
 81     PopupMenuStyle::PopupMenuSize popupMenuSize(const RenderStyle&amp;, IntRect&amp;) const final;
 82 
 83     bool popsMenuByArrowKeys() const final { return true; }
 84 
 85 #if ENABLE(METER_ELEMENT)
 86     IntSize meterSizeForBounds(const RenderMeter&amp;, const IntRect&amp;) const final;
 87     bool paintMeter(const RenderObject&amp;, const PaintInfo&amp;, const IntRect&amp;) final;
 88     bool supportsMeter(ControlPart) const final;
 89 #endif
 90 
 91     // Returns the repeat interval of the animation for the progress bar.
 92     Seconds animationRepeatIntervalForProgressBar(RenderProgress&amp;) const final;
 93     // Returns the duration of the animation for the progress bar.
 94     Seconds animationDurationForProgressBar(RenderProgress&amp;) const final;
 95     IntRect progressBarRectForBounds(const RenderObject&amp;, const IntRect&amp;) const final;
 96 
 97     // Controls color values returned from platformFocusRingColor(). systemColor() will be used when false.
 98     bool usesTestModeFocusRingColor() const;
 99     // A view associated to the contained document.
100     NSView* documentViewFor(const RenderObject&amp;) const;
101 
102 private:
103     RenderThemeMac();
104 
105     // System fonts.
106     void updateCachedSystemFontDescription(CSSValueID, FontCascadeDescription&amp;) const final;
107 
108 #if ENABLE(VIDEO)
109     // Media controls
110     String mediaControlsStyleSheet() final;
111     String modernMediaControlsStyleSheet() final;
112     String mediaControlsScript() final;
113     String mediaControlsBase64StringForIconNameAndType(const String&amp;, const String&amp;) final;
114 #endif
115 
116 #if ENABLE(SERVICE_CONTROLS)
117     String imageControlsStyleSheet() const final;
118 #endif
119 
120     bool paintTextField(const RenderObject&amp;, const PaintInfo&amp;, const FloatRect&amp;) final;
121     void adjustTextFieldStyle(StyleResolver&amp;, RenderStyle&amp;, const Element*) const final;
122 
123     bool paintTextArea(const RenderObject&amp;, const PaintInfo&amp;, const FloatRect&amp;) final;
124     void adjustTextAreaStyle(StyleResolver&amp;, RenderStyle&amp;, const Element*) const final;
125 
126     bool paintMenuList(const RenderObject&amp;, const PaintInfo&amp;, const FloatRect&amp;) final;
127     void adjustMenuListStyle(StyleResolver&amp;, RenderStyle&amp;, const Element*) const final;
128 
129     bool paintMenuListButtonDecorations(const RenderBox&amp;, const PaintInfo&amp;, const FloatRect&amp;) final;
130     void adjustMenuListButtonStyle(StyleResolver&amp;, RenderStyle&amp;, const Element*) const final;
131 
132     void adjustProgressBarStyle(StyleResolver&amp;, RenderStyle&amp;, const Element*) const final;
133     bool paintProgressBar(const RenderObject&amp;, const PaintInfo&amp;, const IntRect&amp;) final;
134 
135     bool paintSliderTrack(const RenderObject&amp;, const PaintInfo&amp;, const IntRect&amp;) final;
136     void adjustSliderTrackStyle(StyleResolver&amp;, RenderStyle&amp;, const Element*) const final;
137 
138     bool paintSliderThumb(const RenderObject&amp;, const PaintInfo&amp;, const IntRect&amp;) final;
139     void adjustSliderThumbStyle(StyleResolver&amp;, RenderStyle&amp;, const Element*) const final;
140 
141     bool paintSearchField(const RenderObject&amp;, const PaintInfo&amp;, const IntRect&amp;) final;
142     void adjustSearchFieldStyle(StyleResolver&amp;, RenderStyle&amp;, const Element*) const final;
143 
144     void adjustSearchFieldCancelButtonStyle(StyleResolver&amp;, RenderStyle&amp;, const Element*) const final;
145     bool paintSearchFieldCancelButton(const RenderBox&amp;, const PaintInfo&amp;, const IntRect&amp;) final;
146 
147     void adjustSearchFieldDecorationPartStyle(StyleResolver&amp;, RenderStyle&amp;, const Element*) const final;
148     bool paintSearchFieldDecorationPart(const RenderObject&amp;, const PaintInfo&amp;, const IntRect&amp;) final;
149 
150     void adjustSearchFieldResultsDecorationPartStyle(StyleResolver&amp;, RenderStyle&amp;, const Element*) const final;
151     bool paintSearchFieldResultsDecorationPart(const RenderBox&amp;, const PaintInfo&amp;, const IntRect&amp;) final;
152 
153     void adjustSearchFieldResultsButtonStyle(StyleResolver&amp;, RenderStyle&amp;, const Element*) const final;
154     bool paintSearchFieldResultsButton(const RenderBox&amp;, const PaintInfo&amp;, const IntRect&amp;) final;
155 
156 #if ENABLE(DATALIST_ELEMENT)
157     void paintListButtonForInput(const RenderObject&amp;, GraphicsContext&amp;, const FloatRect&amp;);
158     void adjustListButtonStyle(StyleResolver&amp;, RenderStyle&amp;, const Element*) const final;
159 #endif
160 
161 #if ENABLE(VIDEO)
162     bool supportsClosedCaptioning() const final { return true; }
163 #endif
164 
165     bool paintSnapshottedPluginOverlay(const RenderObject&amp;, const PaintInfo&amp;, const IntRect&amp;) final;
166 
167 #if ENABLE(ATTACHMENT_ELEMENT)
168     LayoutSize attachmentIntrinsicSize(const RenderAttachment&amp;) const final;
169     int attachmentBaseline(const RenderAttachment&amp;) const final;
170     bool paintAttachment(const RenderObject&amp;, const PaintInfo&amp;, const IntRect&amp;) final;
171 #endif
172 
173 private:
174     String fileListNameForWidth(const FileList*, const FontCascade&amp;, int width, bool multipleFilesAllowed) const final;
175 
176     Color systemColor(CSSValueID, OptionSet&lt;StyleColor::Options&gt;) const final;
177 
178     void purgeCaches() final;
179 
180     // Get the control size based off the font. Used by some of the controls (like buttons).
181     NSControlSize controlSizeForFont(const RenderStyle&amp;) const;
182     NSControlSize controlSizeForSystemFont(const RenderStyle&amp;) const;
183     NSControlSize controlSizeForCell(NSCell*, const IntSize* sizes, const IntSize&amp; minSize, float zoomLevel = 1.0f) const;
184     void setControlSize(NSCell*, const IntSize* sizes, const IntSize&amp; minSize, float zoomLevel = 1.0f);
185     void setSizeFromFont(RenderStyle&amp;, const IntSize* sizes) const;
186     IntSize sizeForFont(const RenderStyle&amp;, const IntSize* sizes) const;
187     IntSize sizeForSystemFont(const RenderStyle&amp;, const IntSize* sizes) const;
188     void setFontFromControlSize(StyleResolver&amp;, RenderStyle&amp;, NSControlSize) const;
189 
190     void updateCheckedState(NSCell*, const RenderObject&amp;);
191     void updateEnabledState(NSCell*, const RenderObject&amp;);
192     void updateFocusedState(NSCell*, const RenderObject&amp;);
193     void updatePressedState(NSCell*, const RenderObject&amp;);
194 
195     // Helpers for adjusting appearance and for painting
196 
197     void paintCellAndSetFocusedElementNeedsRepaintIfNecessary(NSCell*, const RenderObject&amp;, const PaintInfo&amp;, const FloatRect&amp;);
198     void setPopupButtonCellState(const RenderObject&amp;, const IntSize&amp;);
199     const IntSize* popupButtonSizes() const;
200     const int* popupButtonMargins() const;
201     const int* popupButtonPadding(NSControlSize, bool isRTL) const;
202     void paintMenuListButtonGradients(const RenderObject&amp;, const PaintInfo&amp;, const IntRect&amp;);
203     const IntSize* menuListSizes() const;
204 
205     const IntSize* searchFieldSizes() const;
206     const IntSize* cancelButtonSizes() const;
207     const IntSize* resultsButtonSizes() const;
208     void setSearchCellState(const RenderObject&amp;, const IntRect&amp;);
209     void setSearchFieldSize(RenderStyle&amp;) const;
210 
211     NSPopUpButtonCell *popupButton() const;
212     NSSearchFieldCell *search() const;
213     NSMenu *searchMenuTemplate() const;
214     NSSliderCell *sliderThumbHorizontal() const;
215     NSSliderCell *sliderThumbVertical() const;
216     NSTextFieldCell *textField() const;
217 #if ENABLE(DATALIST_ELEMENT)
218     NSCell *listButton() const;
219 #endif
220 
221 #if ENABLE(METER_ELEMENT)
222     NSLevelIndicatorStyle levelIndicatorStyleFor(ControlPart) const;
223     NSLevelIndicatorCell *levelIndicatorFor(const RenderMeter&amp;) const;
224 #endif
225 
226     int minimumProgressBarHeight(const RenderStyle&amp;) const;
227     const IntSize* progressBarSizes() const;
228     const int* progressBarMargins(NSControlSize) const;
229 
230 #if ENABLE(SERVICE_CONTROLS)
231     bool paintImageControlsButton(const RenderObject&amp;, const PaintInfo&amp;, const IntRect&amp;) final;
232     IntSize imageControlsButtonSize(const RenderObject&amp;) const final;
233     IntSize imageControlsButtonPositionOffset() const final;
234 
235     NSServicesRolloverButtonCell *servicesRolloverButtonCell() const;
236 #endif
237 
238     mutable RetainPtr&lt;NSPopUpButtonCell&gt; m_popupButton;
239     mutable RetainPtr&lt;NSSearchFieldCell&gt; m_search;
240     mutable RetainPtr&lt;NSMenu&gt; m_searchMenuTemplate;
241     mutable RetainPtr&lt;NSSliderCell&gt; m_sliderThumbHorizontal;
242     mutable RetainPtr&lt;NSSliderCell&gt; m_sliderThumbVertical;
243     mutable RetainPtr&lt;NSLevelIndicatorCell&gt; m_levelIndicator;
244     mutable RetainPtr&lt;NSTextFieldCell&gt; m_textField;
245 #if ENABLE(SERVICE_CONTROLS)
246     mutable RetainPtr&lt;NSServicesRolloverButtonCell&gt; m_servicesRolloverButton;
247 #endif
248 #if ENABLE(DATALIST_ELEMENT)
249     mutable RetainPtr&lt;NSCell&gt; m_listButton;
250 #endif
251 
252     bool m_isSliderThumbHorizontalPressed { false };
253     bool m_isSliderThumbVerticalPressed { false };
254 
255     RetainPtr&lt;WebCoreRenderThemeNotificationObserver&gt; m_notificationObserver;
256 
257     String m_legacyMediaControlsScript;
258     String m_mediaControlsScript;
259     String m_legacyMediaControlsStyleSheet;
260     String m_mediaControlsStyleSheet;
261 };
262 
263 } // namespace WebCore
264 
265 #endif // PLATFORM(MAC)
    </pre>
  </body>
</html>