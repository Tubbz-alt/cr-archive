<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WTF/wtf/PlatformUse.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (C) 2006-2020 Apple Inc. All rights reserved.
  3  * Copyright (C) 2007-2009 Torch Mobile, Inc.
  4  * Copyright (C) 2010, 2011 Research In Motion Limited. All rights reserved.
  5  *
  6  * Redistribution and use in source and binary forms, with or without
  7  * modification, are permitted provided that the following conditions
  8  * are met:
  9  * 1. Redistributions of source code must retain the above copyright
 10  *    notice, this list of conditions and the following disclaimer.
 11  * 2. Redistributions in binary form must reproduce the above copyright
 12  *    notice, this list of conditions and the following disclaimer in the
 13  *    documentation and/or other materials provided with the distribution.
 14  *
 15  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 16  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 17  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 18  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 19  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 20  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 21  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 22  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 23  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 24  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 25  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 26  */
 27 
 28 #pragma once
 29 
 30 #ifndef WTF_PLATFORM_GUARD_AGAINST_INDIRECT_INCLUSION
 31 #error &quot;Please #include &lt;wtf/Platform.h&gt; instead of this file directly.&quot;
 32 #endif
 33 
 34 
 35 /* USE() - use a particular third-party library or optional OS service */
 36 #define USE(WTF_FEATURE) (defined USE_##WTF_FEATURE &amp;&amp; USE_##WTF_FEATURE)
 37 
 38 
 39 #if PLATFORM(COCOA)
 40 #if defined __has_include &amp;&amp; __has_include(&lt;CoreFoundation/CFPriv.h&gt;)
 41 #define USE_APPLE_INTERNAL_SDK 1
 42 #endif
 43 #endif
 44 
 45 /* Export macro support. Detects the attributes available for shared library symbol export
 46    decorations. */
 47 #if OS(WINDOWS) || (COMPILER_HAS_CLANG_DECLSPEC(dllimport) &amp;&amp; COMPILER_HAS_CLANG_DECLSPEC(dllexport))
 48 #define USE_DECLSPEC_ATTRIBUTE 1
 49 #elif defined(__GNUC__)
 50 #define USE_VISIBILITY_ATTRIBUTE 1
 51 #endif
 52 
 53 #if PLATFORM(COCOA)
 54 #define USE_CG 1
 55 #endif
 56 
 57 #if PLATFORM(COCOA)
 58 #define USE_CA 1
 59 #endif
 60 
 61 #if PLATFORM(GTK) || PLATFORM(WPE)
 62 #define USE_GLIB 1
 63 #endif
 64 
 65 #if PLATFORM(GTK) || PLATFORM(WPE)
 66 #define USE_FREETYPE 1
 67 #endif
 68 
 69 #if PLATFORM(GTK) || PLATFORM(WPE)
 70 #define USE_HARFBUZZ 1
 71 #endif
 72 
 73 #if PLATFORM(GTK) || PLATFORM(WPE)
 74 #define USE_SOUP 1
 75 #endif
 76 
 77 #if PLATFORM(GTK) || PLATFORM(WPE)
 78 #define USE_WEBP 1
 79 #endif
 80 
 81 /* On Windows, use QueryPerformanceCounter by default */
 82 #if OS(WINDOWS)
 83 #define USE_QUERY_PERFORMANCE_COUNTER  1
 84 #endif
 85 
 86 #if PLATFORM(COCOA)
 87 #define USE_CF 1
 88 #endif
 89 
 90 #if PLATFORM(COCOA) || (PLATFORM(GTK) || PLATFORM(WPE))
 91 #define USE_FILE_LOCK 1
 92 #endif
 93 
 94 #if PLATFORM(COCOA)
 95 #define USE_FOUNDATION 1
 96 #endif
 97 
 98 #if PLATFORM(MAC)
 99 #define USE_APPKIT 1
100 #endif
101 
102 #if PLATFORM(MAC)
103 #define USE_PASSKIT 1
104 #endif
105 
106 #if PLATFORM(MAC)
107 #define USE_PLUGIN_HOST_PROCESS 1
108 #endif
109 
110 #if PLATFORM(IOS_FAMILY)
111 #define USE_UIKIT_EDITING 1
112 #endif
113 
114 #if PLATFORM(IOS_FAMILY)
115 #define USE_WEB_THREAD 1
116 #endif
117 
118 #if !defined(USE_UIKIT_KEYBOARD_ADDITIONS) &amp;&amp; (PLATFORM(IOS) || PLATFORM(MACCATALYST))
119 #define USE_UIKIT_KEYBOARD_ADDITIONS 1
120 #endif
121 
122 #if OS(UNIX)
123 #define USE_PTHREADS 1
124 #endif
125 
126 #if OS(DARWIN) &amp;&amp; !PLATFORM(GTK)
127 #define USE_ACCELERATE 1
128 #endif
129 
130 #if OS(WINDOWS)
131 #define USE_SYSTEM_MALLOC 1
132 #endif
133 
134 #if !defined(USE_JSVALUE64) &amp;&amp; !defined(USE_JSVALUE32_64)
135 #if CPU(ADDRESS64) || CPU(ARM64)
136 #define USE_JSVALUE64 1
137 #else
138 #define USE_JSVALUE32_64 1
139 #endif
140 #endif /* !defined(USE_JSVALUE64) &amp;&amp; !defined(USE_JSVALUE32_64) */
141 
142 /* FIXME: This name should be more specific if it is only for use with CallFrame* */
143 /* Use __builtin_frame_address(1) to get CallFrame* */
144 #if COMPILER(GCC_COMPATIBLE) &amp;&amp; (CPU(ARM64) || CPU(X86_64))
145 #define USE_BUILTIN_FRAME_ADDRESS 1
146 #endif
147 
148 #if PLATFORM(IOS)
149 #define USE_PASSKIT 1
150 #endif
151 
152 #if PLATFORM(IOS)
153 #define USE_QUICK_LOOK 1
154 #endif
155 
156 #if PLATFORM(IOS)
157 #define USE_SYSTEM_PREVIEW 1
158 #endif
159 
160 #if PLATFORM(COCOA)
161 #define USE_AVFOUNDATION 1
162 #endif
163 
164 #if PLATFORM(COCOA)
165 #define USE_PROTECTION_SPACE_AUTH_CALLBACK 1
166 #endif
167 
168 #if PLATFORM(COCOA)
169 #define USE_METAL 1
170 #endif
171 
172 #if !defined(USE_EXPORT_MACROS) &amp;&amp; (PLATFORM(COCOA) || OS(WINDOWS))
173 #define USE_EXPORT_MACROS 1
174 #endif
175 
176 #if PLATFORM(GTK) || PLATFORM(WPE)
177 #define USE_UNIX_DOMAIN_SOCKETS 1
178 #endif
179 
180 #if !defined(USE_IMLANG_FONT_LINK2)
181 #define USE_IMLANG_FONT_LINK2 1
182 #endif
183 
184 #if PLATFORM(COCOA)
185 #define USE_COREMEDIA 1
186 #endif
187 
188 #if PLATFORM(COCOA)
189 #define USE_VIDEOTOOLBOX 1
190 #endif
191 
192 #if !PLATFORM(WIN) &amp;&amp; !PLATFORM(JAVA)
193 #define USE_REQUEST_ANIMATION_FRAME_DISPLAY_MONITOR 1
194 #endif
195 
196 #if PLATFORM(MAC)
197 #define USE_COREAUDIO 1
198 #endif
199 
200 #if !defined(USE_ZLIB) &amp;&amp; !PLATFORM(JAVA)
201 #define USE_ZLIB 1
202 #endif
203 
204 #define USE_GRAMMAR_CHECKING 1
205 
206 #if PLATFORM(COCOA) || PLATFORM(GTK)
207 #define USE_UNIFIED_TEXT_CHECKING 1
208 #endif
209 
210 #if PLATFORM(MAC)
211 #define USE_AUTOMATIC_TEXT_REPLACEMENT 1
212 #endif
213 
214 #if PLATFORM(MAC)
215 /* Some platforms provide UI for suggesting autocorrection. */
216 #define USE_AUTOCORRECTION_PANEL 1
217 #endif
218 
219 #if PLATFORM(COCOA)
220 /* Some platforms use spelling and autocorrection markers to provide visual cue. On such platform, if word with marker is edited, we need to remove the marker. */
221 #define USE_MARKER_REMOVAL_UPON_EDITING 1
222 #endif
223 
224 #if PLATFORM(MAC)
225 #define USE_INSERTION_UNDO_GROUPING 1
226 #endif
227 
228 #if PLATFORM(COCOA)
229 #define USE_AUDIO_SESSION 1
230 #endif
231 
232 #if PLATFORM(COCOA)
233 #define USE_MEDIATOOLBOX 1
234 #endif
235 
236 #if PLATFORM(COCOA)
237 #define USE_OS_LOG 1
238 #endif
239 
240 #if PLATFORM(COCOA) &amp;&amp; USE(APPLE_INTERNAL_SDK)
241 #define USE_OS_STATE 1
242 #endif
243 
244 #if !defined(WTF_DEFAULT_EVENT_LOOP)
245 #define WTF_DEFAULT_EVENT_LOOP 1
246 #endif
247 
248 #if WTF_DEFAULT_EVENT_LOOP
249 #if USE(GLIB)
250 /* Use GLib&#39;s event loop abstraction. Primarily GTK port uses it. */
251 #define USE_GLIB_EVENT_LOOP 1
252 #elif OS(WINDOWS)
253 /* Use Windows message pump abstraction.
254  * Even if the port is AppleWin, we use the Windows message pump system for the event loop,
255  * so that USE(WINDOWS_EVENT_LOOP) &amp;&amp; USE(CF) can be true.
256  * And PLATFORM(WIN) and PLATFORM(GTK) are exclusive. If the port is GTK,
257  * PLATFORM(WIN) should be false. And in that case, GLib&#39;s event loop is used.
258  */
259 #define USE_WINDOWS_EVENT_LOOP 1
260 #elif PLATFORM(COCOA)
261 /* OS X and IOS. Use CoreFoundation &amp; GCD abstraction. */
262 #define USE_COCOA_EVENT_LOOP 1
263 #else
264 #define USE_GENERIC_EVENT_LOOP 1
265 #endif
266 #endif
267 
268 #if PLATFORM(COCOA)
269 #define USE_MEDIAREMOTE 1
270 #endif
271 
272 #if PLATFORM(MAC)
273 #define USE_DICTATION_ALTERNATIVES 1
274 #endif
275 
276 #if (PLATFORM(MAC) &amp;&amp; USE(APPLE_INTERNAL_SDK) &amp;&amp; __MAC_OS_X_VERSION_MIN_REQUIRED &gt;= 101500) || PLATFORM(IOS_FAMILY)
277 #define USE_SOURCE_APPLICATION_AUDIT_DATA 1
278 #endif
279 
280 #if PLATFORM(COCOA) &amp;&amp; USE(CA)
281 #define USE_IOSURFACE_CANVAS_BACKING_STORE 1
282 #endif
283 
284 /* The override isn&#39;t needed on iOS family, as the default behavior is to not sniff. */
285 /* FIXME: This should probably be enabled on 10.13.2 and newer, not just 10.14 and newer. */
286 #if PLATFORM(MAC) &amp;&amp; __MAC_OS_X_VERSION_MIN_REQUIRED &gt;= 101400
287 #define USE_CFNETWORK_CONTENT_ENCODING_SNIFFING_OVERRIDE 1
288 #endif
289 
290 #if PLATFORM(MAC) || PLATFORM(WPE)
291 /* FIXME: This really needs a descriptive name, this &quot;new theme&quot; was added in 2008. */
292 #define USE_NEW_THEME 1
293 #endif
294 
295 #if PLATFORM(MAC) &amp;&amp; __MAC_OS_X_VERSION_MAX_ALLOWED &lt; 101500
296 #define USE_REALPATH_FOR_DLOPEN_PREFLIGHT 1
297 #endif
298 
299 #if PLATFORM(IOS) || PLATFORM(MACCATALYST)
300 #define USE_UICONTEXTMENU 1
301 #endif
302 
303 #if PLATFORM(COCOA)
304 #define USE_PLATFORM_SYSTEM_FALLBACK_LIST 1
305 #endif
306 
307 #if PLATFORM(IOS_FAMILY) || (!(defined(USE_SYSTEM_MALLOC) &amp;&amp; USE_SYSTEM_MALLOC) &amp;&amp; (OS(LINUX) &amp;&amp; (PLATFORM(GTK) || PLATFORM(WPE))))
308 #define USE_BMALLOC_MEMORY_FOOTPRINT_API 1
309 #endif
310 
311 #if OS(DARWIN) &amp;&amp; !USE(PLATFORM_REGISTERS_WITH_PROFILE) &amp;&amp; CPU(ARM64)
312 #define USE_DARWIN_REGISTER_MACROS 1
313 #endif
    </pre>
  </body>
</html>