<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/inspector/InspectorInstrumentation.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="InspectorInstrumentation.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="InspectorNodeFinder.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/inspector/InspectorInstrumentation.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  19 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  20 * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
  21 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
  22 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
  23 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
  24 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  25 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  26 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
  27 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  28 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  29 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  30 */
  31 
  32 #pragma once
  33 
  34 #include &quot;CSSSelector.h&quot;
  35 #include &quot;CallTracerTypes.h&quot;
  36 #include &quot;CanvasBase.h&quot;
  37 #include &quot;CanvasRenderingContext.h&quot;
  38 #include &quot;Database.h&quot;

  39 #include &quot;DocumentThreadableLoader.h&quot;
  40 #include &quot;Element.h&quot;
  41 #include &quot;EventTarget.h&quot;
  42 #include &quot;FormData.h&quot;
  43 #include &quot;Frame.h&quot;
  44 #include &quot;HitTestResult.h&quot;
<span class="line-modified">  45 #include &quot;InspectorController.h&quot;</span>
<span class="line-removed">  46 #include &quot;InspectorInstrumentationCookie.h&quot;</span>
<span class="line-removed">  47 #include &quot;OffscreenCanvas.h&quot;</span>
  48 #include &quot;Page.h&quot;
  49 #include &quot;StorageArea.h&quot;
<span class="line-modified">  50 #include &quot;WorkerGlobalScope.h&quot;</span>
<span class="line-modified">  51 #include &quot;WorkerInspectorController.h&quot;</span>
<span class="line-removed">  52 #include &lt;JavaScriptCore/JSCInlines.h&gt;</span>
  53 #include &lt;initializer_list&gt;

  54 #include &lt;wtf/MemoryPressureHandler.h&gt;
  55 #include &lt;wtf/RefPtr.h&gt;
  56 
  57 #if ENABLE(WEBGL)
  58 #include &quot;WebGLRenderingContextBase.h&quot;
  59 #endif
  60 





  61 namespace Inspector {
  62 class ConsoleMessage;
  63 class ScriptArguments;
  64 class ScriptCallStack;
  65 }
  66 
  67 namespace WebCore {
  68 
  69 class CachedResource;
  70 class CharacterData;
  71 class DOMWindow;
  72 class DOMWrapperWorld;
  73 class Document;
  74 class DocumentLoader;
  75 class EventListener;
  76 class HTTPHeaderMap;
  77 class InspectorTimelineAgent;
  78 class InstrumentingAgents;

  79 class NetworkLoadMetrics;
  80 class Node;
  81 class PseudoElement;
  82 class RegisteredEventListener;
  83 class RenderLayer;
  84 class RenderObject;
  85 class ResourceLoader;
  86 class ResourceRequest;
  87 class ResourceResponse;
  88 class ScriptExecutionContext;
  89 class SecurityOrigin;
  90 class ShadowRoot;

  91 class TimerBase;




  92 #if ENABLE(WEBGL)
  93 class WebGLProgram;
  94 #endif
<span class="line-removed">  95 class WebKitNamedFlow;</span>
<span class="line-removed">  96 class WorkerInspectorProxy;</span>
  97 
<span class="line-modified">  98 enum class StorageType;</span>



  99 
<span class="line-modified"> 100 struct WebSocketFrame;</span>
 101 
<span class="line-modified"> 102 #define FAST_RETURN_IF_NO_FRONTENDS(value) if (LIKELY(!InspectorInstrumentation::hasFrontends())) return value;</span>

 103 
 104 class InspectorInstrumentation {
 105 public:
 106     static void didClearWindowObjectInWorld(Frame&amp;, DOMWrapperWorld&amp;);
 107     static bool isDebuggerPaused(Frame*);
 108 
 109     static int identifierForNode(Node&amp;);
 110     static void addEventListenersToNode(Node&amp;);
 111     static void willInsertDOMNode(Document&amp;, Node&amp; parent);
 112     static void didInsertDOMNode(Document&amp;, Node&amp;);
 113     static void willRemoveDOMNode(Document&amp;, Node&amp;);
 114     static void didRemoveDOMNode(Document&amp;, Node&amp;);
 115     static void willModifyDOMAttr(Document&amp;, Element&amp;, const AtomString&amp; oldValue, const AtomString&amp; newValue);
 116     static void didModifyDOMAttr(Document&amp;, Element&amp;, const AtomString&amp; name, const AtomString&amp; value);
 117     static void didRemoveDOMAttr(Document&amp;, Element&amp;, const AtomString&amp; name);
 118     static void characterDataModified(Document&amp;, CharacterData&amp;);
 119     static void willInvalidateStyleAttr(Element&amp;);
 120     static void didInvalidateStyleAttr(Element&amp;);
 121     static void documentDetached(Document&amp;);
 122     static void frameWindowDiscarded(Frame&amp;, DOMWindow*);
</pre>
<hr />
<pre>
 126     static void willPopShadowRoot(Element&amp; host, ShadowRoot&amp;);
 127     static void didChangeCustomElementState(Element&amp;);
 128     static void pseudoElementCreated(Page*, PseudoElement&amp;);
 129     static void pseudoElementDestroyed(Page*, PseudoElement&amp;);
 130     static void didCreateNamedFlow(Document*, WebKitNamedFlow&amp;);
 131     static void willRemoveNamedFlow(Document*, WebKitNamedFlow&amp;);
 132     static void didChangeRegionOverset(Document&amp;, WebKitNamedFlow&amp;);
 133     static void didRegisterNamedFlowContentElement(Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement, Node* nextContentElement = nullptr);
 134     static void didUnregisterNamedFlowContentElement(Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement);
 135 
 136     static void mouseDidMoveOverElement(Page&amp;, const HitTestResult&amp;, unsigned modifierFlags);
 137     static bool handleMousePress(Frame&amp;);
 138     static bool handleTouchEvent(Frame&amp;, Node&amp;);
 139     static bool forcePseudoState(const Element&amp;, CSSSelector::PseudoClassType);
 140 
 141     static void willSendXMLHttpRequest(ScriptExecutionContext*, const String&amp; url);
 142     static void willFetch(ScriptExecutionContext&amp;, const String&amp; url);
 143     static void didInstallTimer(ScriptExecutionContext&amp;, int timerId, Seconds timeout, bool singleShot);
 144     static void didRemoveTimer(ScriptExecutionContext&amp;, int timerId);
 145 
<span class="line-modified"> 146     static void didPostMessage(Frame&amp;, TimerBase&amp;, JSC::ExecState&amp;);</span>
 147     static void didFailPostMessage(Frame&amp;, TimerBase&amp;);
 148     static void willDispatchPostMessage(Frame&amp;, TimerBase&amp;);
 149     static void didDispatchPostMessage(Frame&amp;, TimerBase&amp;);
 150 
<span class="line-modified"> 151     static InspectorInstrumentationCookie willCallFunction(ScriptExecutionContext*, const String&amp; scriptName, int scriptLine, int scriptColumn);</span>
<span class="line-modified"> 152     static void didCallFunction(const InspectorInstrumentationCookie&amp;, ScriptExecutionContext*);</span>
 153     static void didAddEventListener(EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 154     static void willRemoveEventListener(EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 155     static bool isEventListenerDisabled(EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
<span class="line-modified"> 156     static InspectorInstrumentationCookie willDispatchEvent(Document&amp;, const Event&amp;, bool hasEventListeners);</span>
<span class="line-modified"> 157     static void didDispatchEvent(const InspectorInstrumentationCookie&amp;, bool defaultPrevented);</span>
 158     static void willHandleEvent(ScriptExecutionContext&amp;, Event&amp;, const RegisteredEventListener&amp;);
 159     static void didHandleEvent(ScriptExecutionContext&amp;);
<span class="line-modified"> 160     static InspectorInstrumentationCookie willDispatchEventOnWindow(Frame*, const Event&amp;, DOMWindow&amp;);</span>
<span class="line-modified"> 161     static void didDispatchEventOnWindow(const InspectorInstrumentationCookie&amp;, bool defaultPrevented);</span>
 162     static void eventDidResetAfterDispatch(const Event&amp;);
<span class="line-modified"> 163     static InspectorInstrumentationCookie willEvaluateScript(Frame&amp;, const String&amp; url, int lineNumber, int columnNumber);</span>
<span class="line-modified"> 164     static void didEvaluateScript(const InspectorInstrumentationCookie&amp;, Frame&amp;);</span>
<span class="line-modified"> 165     static InspectorInstrumentationCookie willFireTimer(ScriptExecutionContext&amp;, int timerId, bool oneShot);</span>
<span class="line-modified"> 166     static void didFireTimer(const InspectorInstrumentationCookie&amp;);</span>
 167     static void didInvalidateLayout(Frame&amp;);
<span class="line-modified"> 168     static InspectorInstrumentationCookie willLayout(Frame&amp;);</span>
<span class="line-modified"> 169     static void didLayout(const InspectorInstrumentationCookie&amp;, RenderObject&amp;);</span>
 170     static void didScroll(Page&amp;);
 171     static void willComposite(Frame&amp;);
 172     static void didComposite(Frame&amp;);
 173     static void willPaint(RenderObject&amp;);
 174     static void didPaint(RenderObject&amp;, const LayoutRect&amp;);
<span class="line-modified"> 175     static InspectorInstrumentationCookie willRecalculateStyle(Document&amp;);</span>
<span class="line-modified"> 176     static void didRecalculateStyle(const InspectorInstrumentationCookie&amp;);</span>
 177     static void didScheduleStyleRecalculation(Document&amp;);
 178     static void applyUserAgentOverride(Frame&amp;, String&amp;);
 179     static void applyEmulatedMedia(Frame&amp;, String&amp;);
 180 
 181     static void willSendRequest(Frame*, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, const ResourceResponse&amp; redirectResponse);
 182     static void didLoadResourceFromMemoryCache(Page&amp;, DocumentLoader*, CachedResource*);
 183     static void didReceiveResourceResponse(Frame&amp;, unsigned long identifier, DocumentLoader*, const ResourceResponse&amp;, ResourceLoader*);
 184     static void didReceiveThreadableLoaderResponse(DocumentThreadableLoader&amp;, unsigned long identifier);
 185     static void didReceiveData(Frame*, unsigned long identifier, const char* data, int dataLength, int encodedDataLength);
 186     static void didFinishLoading(Frame*, DocumentLoader*, unsigned long identifier, const NetworkLoadMetrics&amp;, ResourceLoader*);
 187     static void didFailLoading(Frame*, DocumentLoader*, unsigned long identifier, const ResourceError&amp;);
 188 
 189     static void willSendRequest(WorkerGlobalScope&amp;, unsigned long identifier, ResourceRequest&amp;);
 190     static void didReceiveResourceResponse(WorkerGlobalScope&amp;, unsigned long identifier, const ResourceResponse&amp;);
 191     static void didReceiveData(WorkerGlobalScope&amp;, unsigned long identifier, const char* data, int dataLength);
 192     static void didFinishLoading(WorkerGlobalScope&amp;, unsigned long identifier, const NetworkLoadMetrics&amp;);
 193     static void didFailLoading(WorkerGlobalScope&amp;, unsigned long identifier, const ResourceError&amp;);
 194 
 195     // Some network requests do not go through the normal network loading path.
 196     // These network requests have to issue their own willSendRequest / didReceiveResponse / didFinishLoading / didFailLoading
</pre>
<hr />
<pre>
 202     static void continueWithPolicyDownload(Frame&amp;, unsigned long identifier, DocumentLoader&amp;, const ResourceResponse&amp;);
 203     static void continueWithPolicyIgnore(Frame&amp;, unsigned long identifier, DocumentLoader&amp;, const ResourceResponse&amp;);
 204     static void willLoadXHRSynchronously(ScriptExecutionContext*);
 205     static void didLoadXHRSynchronously(ScriptExecutionContext*);
 206     static void scriptImported(ScriptExecutionContext&amp;, unsigned long identifier, const String&amp; sourceString);
 207     static void scriptExecutionBlockedByCSP(ScriptExecutionContext*, const String&amp; directiveText);
 208     static void didReceiveScriptResponse(ScriptExecutionContext*, unsigned long identifier);
 209     static void domContentLoadedEventFired(Frame&amp;);
 210     static void loadEventFired(Frame*);
 211     static void frameDetachedFromParent(Frame&amp;);
 212     static void didCommitLoad(Frame&amp;, DocumentLoader*);
 213     static void frameDocumentUpdated(Frame&amp;);
 214     static void loaderDetachedFromFrame(Frame&amp;, DocumentLoader&amp;);
 215     static void frameStartedLoading(Frame&amp;);
 216     static void frameStoppedLoading(Frame&amp;);
 217     static void frameScheduledNavigation(Frame&amp;, Seconds delay);
 218     static void frameClearedScheduledNavigation(Frame&amp;);
 219     static void defaultAppearanceDidChange(Page&amp;, bool useDarkAppearance);
 220     static void willDestroyCachedResource(CachedResource&amp;);
 221 




 222     static void addMessageToConsole(Page&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 223     static void addMessageToConsole(WorkerGlobalScope&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 224 
<span class="line-modified"> 225     static void consoleCount(Page&amp;, JSC::ExecState*, const String&amp; label);</span>
<span class="line-modified"> 226     static void consoleCount(WorkerGlobalScope&amp;, JSC::ExecState*, const String&amp; label);</span>
<span class="line-modified"> 227     static void consoleCountReset(Page&amp;, JSC::ExecState*, const String&amp; label);</span>
<span class="line-modified"> 228     static void consoleCountReset(WorkerGlobalScope&amp;, JSC::ExecState*, const String&amp; label);</span>
 229 
 230     static void takeHeapSnapshot(Frame&amp;, const String&amp; title);
<span class="line-modified"> 231     static void startConsoleTiming(Frame&amp;, JSC::ExecState*, const String&amp; label);</span>
<span class="line-modified"> 232     static void startConsoleTiming(WorkerGlobalScope&amp;, JSC::ExecState*, const String&amp; label);</span>
<span class="line-modified"> 233     static void logConsoleTiming(Frame&amp;, JSC::ExecState*, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);</span>
<span class="line-modified"> 234     static void logConsoleTiming(WorkerGlobalScope&amp;, JSC::ExecState*, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);</span>
<span class="line-modified"> 235     static void stopConsoleTiming(Frame&amp;, JSC::ExecState*, const String&amp; label);</span>
<span class="line-modified"> 236     static void stopConsoleTiming(WorkerGlobalScope&amp;, JSC::ExecState*, const String&amp; label);</span>
 237     static void consoleTimeStamp(Frame&amp;, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
<span class="line-modified"> 238     static void startProfiling(Page&amp;, JSC::ExecState*, const String&amp; title);</span>
<span class="line-modified"> 239     static void stopProfiling(Page&amp;, JSC::ExecState*, const String&amp; title);</span>
<span class="line-modified"> 240     static void consoleStartRecordingCanvas(CanvasRenderingContext&amp;, JSC::ExecState&amp;, JSC::JSObject* options);</span>

 241 
 242     static void didRequestAnimationFrame(Document&amp;, int callbackId);
 243     static void didCancelAnimationFrame(Document&amp;, int callbackId);
<span class="line-modified"> 244     static InspectorInstrumentationCookie willFireAnimationFrame(Document&amp;, int callbackId);</span>
<span class="line-modified"> 245     static void didFireAnimationFrame(const InspectorInstrumentationCookie&amp;);</span>
 246 
<span class="line-modified"> 247     static InspectorInstrumentationCookie willFireObserverCallback(ScriptExecutionContext&amp;, const String&amp; callbackType);</span>
<span class="line-modified"> 248     static void didFireObserverCallback(const InspectorInstrumentationCookie&amp;);</span>
 249 
 250     static void didOpenDatabase(Database&amp;);
 251 
 252     static void didDispatchDOMStorageEvent(Page&amp;, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType, SecurityOrigin*);
 253 
 254     static bool shouldWaitForDebuggerOnStart(ScriptExecutionContext&amp;);
 255     static void workerStarted(ScriptExecutionContext&amp;, WorkerInspectorProxy*, const URL&amp;);
 256     static void workerTerminated(ScriptExecutionContext&amp;, WorkerInspectorProxy*);
 257 
 258     static void didCreateWebSocket(Document*, unsigned long identifier, const URL&amp; requestURL);
 259     static void willSendWebSocketHandshakeRequest(Document*, unsigned long identifier, const ResourceRequest&amp;);
 260     static void didReceiveWebSocketHandshakeResponse(Document*, unsigned long identifier, const ResourceResponse&amp;);
 261     static void didCloseWebSocket(Document*, unsigned long identifier);
 262     static void didReceiveWebSocketFrame(Document*, unsigned long identifier, const WebSocketFrame&amp;);
 263     static void didSendWebSocketFrame(Document*, unsigned long identifier, const WebSocketFrame&amp;);
 264     static void didReceiveWebSocketFrameError(Document*, unsigned long identifier, const String&amp; errorMessage);
 265 
 266 #if ENABLE(RESOURCE_USAGE)
 267     static void didHandleMemoryPressure(Page&amp;, Critical);
 268 #endif
 269 
 270     static void didChangeCSSCanvasClientNodes(CanvasBase&amp;);
 271     static void didCreateCanvasRenderingContext(CanvasRenderingContext&amp;);
 272     static void didChangeCanvasMemory(CanvasRenderingContext&amp;);
 273     static void recordCanvasAction(CanvasRenderingContext&amp;, const String&amp;, std::initializer_list&lt;RecordCanvasActionVariant&gt;&amp;&amp; = { });
 274     static void didFinishRecordingCanvasFrame(CanvasRenderingContext&amp;, bool forceDispatch = false);
 275 #if ENABLE(WEBGL)
 276     static void didEnableExtension(WebGLRenderingContextBase&amp;, const String&amp;);
<span class="line-modified"> 277     static void didCreateProgram(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 278     static void willDeleteProgram(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 279     static bool isShaderProgramDisabled(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 280     static bool isShaderProgramHighlighted(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);</span>







 281 #endif
 282 







 283     static void networkStateChanged(Page&amp;);
 284     static void updateApplicationCacheStatus(Frame*);
 285 
 286     static void layerTreeDidChange(Page*);
 287     static void renderLayerDestroyed(Page*, const RenderLayer&amp;);
 288 
 289     static void frontendCreated();
 290     static void frontendDeleted();
<span class="line-modified"> 291     static bool hasFrontends() { return s_frontendCounter; }</span>
 292 
 293     static void firstFrontendCreated();
 294     static void lastFrontendDeleted();
 295 
 296     static bool consoleAgentEnabled(ScriptExecutionContext*);
 297     static bool timelineAgentTracking(ScriptExecutionContext*);
 298 
 299     static InstrumentingAgents* instrumentingAgentsForPage(Page*);
 300 
 301     static void registerInstrumentingAgents(InstrumentingAgents&amp;);
 302     static void unregisterInstrumentingAgents(InstrumentingAgents&amp;);
 303 
 304 private:
 305     static void didClearWindowObjectInWorldImpl(InstrumentingAgents&amp;, Frame&amp;, DOMWrapperWorld&amp;);
 306     static bool isDebuggerPausedImpl(InstrumentingAgents&amp;);
 307 
 308     static int identifierForNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 309     static void addEventListenersToNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 310     static void willInsertDOMNodeImpl(InstrumentingAgents&amp;, Node&amp; parent);
 311     static void didInsertDOMNodeImpl(InstrumentingAgents&amp;, Node&amp;);
</pre>
<hr />
<pre>
 325     static void willPopShadowRootImpl(InstrumentingAgents&amp;, Element&amp; host, ShadowRoot&amp;);
 326     static void didChangeCustomElementStateImpl(InstrumentingAgents&amp;, Element&amp;);
 327     static void pseudoElementCreatedImpl(InstrumentingAgents&amp;, PseudoElement&amp;);
 328     static void pseudoElementDestroyedImpl(InstrumentingAgents&amp;, PseudoElement&amp;);
 329     static void didCreateNamedFlowImpl(InstrumentingAgents&amp;, Document*, WebKitNamedFlow&amp;);
 330     static void willRemoveNamedFlowImpl(InstrumentingAgents&amp;, Document*, WebKitNamedFlow&amp;);
 331     static void didChangeRegionOversetImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;);
 332     static void didRegisterNamedFlowContentElementImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement, Node* nextContentElement = nullptr);
 333     static void didUnregisterNamedFlowContentElementImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement);
 334 
 335     static void mouseDidMoveOverElementImpl(InstrumentingAgents&amp;, const HitTestResult&amp;, unsigned modifierFlags);
 336     static bool handleMousePressImpl(InstrumentingAgents&amp;);
 337     static bool handleTouchEventImpl(InstrumentingAgents&amp;, Node&amp;);
 338     static bool forcePseudoStateImpl(InstrumentingAgents&amp;, const Element&amp;, CSSSelector::PseudoClassType);
 339 
 340     static void willSendXMLHttpRequestImpl(InstrumentingAgents&amp;, const String&amp; url);
 341     static void willFetchImpl(InstrumentingAgents&amp;, const String&amp; url);
 342     static void didInstallTimerImpl(InstrumentingAgents&amp;, int timerId, Seconds timeout, bool singleShot, ScriptExecutionContext&amp;);
 343     static void didRemoveTimerImpl(InstrumentingAgents&amp;, int timerId, ScriptExecutionContext&amp;);
 344 
<span class="line-modified"> 345     static void didPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;, JSC::ExecState&amp;);</span>
 346     static void didFailPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 347     static void willDispatchPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 348     static void didDispatchPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 349 
<span class="line-modified"> 350     static InspectorInstrumentationCookie willCallFunctionImpl(InstrumentingAgents&amp;, const String&amp; scriptName, int scriptLine, int scriptColumn, ScriptExecutionContext*);</span>
<span class="line-modified"> 351     static void didCallFunctionImpl(const InspectorInstrumentationCookie&amp;, ScriptExecutionContext*);</span>
 352     static void didAddEventListenerImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 353     static void willRemoveEventListenerImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 354     static bool isEventListenerDisabledImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
<span class="line-modified"> 355     static InspectorInstrumentationCookie willDispatchEventImpl(InstrumentingAgents&amp;, Document&amp;, const Event&amp;, bool hasEventListeners);</span>
 356     static void willHandleEventImpl(InstrumentingAgents&amp;, Event&amp;, const RegisteredEventListener&amp;);
 357     static void didHandleEventImpl(InstrumentingAgents&amp;);
<span class="line-modified"> 358     static void didDispatchEventImpl(const InspectorInstrumentationCookie&amp;, bool defaultPrevented);</span>
<span class="line-modified"> 359     static InspectorInstrumentationCookie willDispatchEventOnWindowImpl(InstrumentingAgents&amp;, const Event&amp;, DOMWindow&amp;);</span>
<span class="line-modified"> 360     static void didDispatchEventOnWindowImpl(const InspectorInstrumentationCookie&amp;, bool defaultPrevented);</span>
 361     static void eventDidResetAfterDispatchImpl(InstrumentingAgents&amp;, const Event&amp;);
<span class="line-modified"> 362     static InspectorInstrumentationCookie willEvaluateScriptImpl(InstrumentingAgents&amp;, Frame&amp;, const String&amp; url, int lineNumber, int columnNumber);</span>
<span class="line-modified"> 363     static void didEvaluateScriptImpl(const InspectorInstrumentationCookie&amp;, Frame&amp;);</span>
<span class="line-modified"> 364     static InspectorInstrumentationCookie willFireTimerImpl(InstrumentingAgents&amp;, int timerId, bool oneShot, ScriptExecutionContext&amp;);</span>
<span class="line-modified"> 365     static void didFireTimerImpl(const InspectorInstrumentationCookie&amp;);</span>
 366     static void didInvalidateLayoutImpl(InstrumentingAgents&amp;, Frame&amp;);
<span class="line-modified"> 367     static InspectorInstrumentationCookie willLayoutImpl(InstrumentingAgents&amp;, Frame&amp;);</span>
<span class="line-modified"> 368     static void didLayoutImpl(const InspectorInstrumentationCookie&amp;, RenderObject&amp;);</span>
 369     static void didScrollImpl(InstrumentingAgents&amp;);
 370     static void willCompositeImpl(InstrumentingAgents&amp;, Frame&amp;);
 371     static void didCompositeImpl(InstrumentingAgents&amp;);
 372     static void willPaintImpl(InstrumentingAgents&amp;, RenderObject&amp;);
 373     static void didPaintImpl(InstrumentingAgents&amp;, RenderObject&amp;, const LayoutRect&amp;);
<span class="line-modified"> 374     static InspectorInstrumentationCookie willRecalculateStyleImpl(InstrumentingAgents&amp;, Document&amp;);</span>
<span class="line-modified"> 375     static void didRecalculateStyleImpl(const InspectorInstrumentationCookie&amp;);</span>
 376     static void didScheduleStyleRecalculationImpl(InstrumentingAgents&amp;, Document&amp;);
 377     static void applyUserAgentOverrideImpl(InstrumentingAgents&amp;, String&amp;);
 378     static void applyEmulatedMediaImpl(InstrumentingAgents&amp;, String&amp;);
 379 
 380     static void willSendRequestImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, const ResourceResponse&amp; redirectResponse);
 381     static void willSendRequestOfTypeImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, LoadType);
 382     static void markResourceAsCachedImpl(InstrumentingAgents&amp;, unsigned long identifier);
 383     static void didLoadResourceFromMemoryCacheImpl(InstrumentingAgents&amp;, DocumentLoader*, CachedResource*);
 384     static void didReceiveResourceResponseImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const ResourceResponse&amp;, ResourceLoader*);
 385     static void didReceiveThreadableLoaderResponseImpl(InstrumentingAgents&amp;, DocumentThreadableLoader&amp;, unsigned long identifier);
 386     static void didReceiveDataImpl(InstrumentingAgents&amp;, unsigned long identifier, const char* data, int dataLength, int encodedDataLength);
 387     static void didFinishLoadingImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const NetworkLoadMetrics&amp;, ResourceLoader*);
 388     static void didFailLoadingImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const ResourceError&amp;);
 389     static void willLoadXHRSynchronouslyImpl(InstrumentingAgents&amp;);
 390     static void didLoadXHRSynchronouslyImpl(InstrumentingAgents&amp;);
 391     static void scriptImportedImpl(InstrumentingAgents&amp;, unsigned long identifier, const String&amp; sourceString);
 392     static void scriptExecutionBlockedByCSPImpl(InstrumentingAgents&amp;, const String&amp; directiveText);
 393     static void didReceiveScriptResponseImpl(InstrumentingAgents&amp;, unsigned long identifier);
 394     static void domContentLoadedEventFiredImpl(InstrumentingAgents&amp;, Frame&amp;);
 395     static void loadEventFiredImpl(InstrumentingAgents&amp;, Frame*);
 396     static void frameDetachedFromParentImpl(InstrumentingAgents&amp;, Frame&amp;);
 397     static void didCommitLoadImpl(InstrumentingAgents&amp;, Frame&amp;, DocumentLoader*);
 398     static void frameDocumentUpdatedImpl(InstrumentingAgents&amp;, Frame&amp;);
 399     static void loaderDetachedFromFrameImpl(InstrumentingAgents&amp;, DocumentLoader&amp;);
 400     static void frameStartedLoadingImpl(InstrumentingAgents&amp;, Frame&amp;);
 401     static void frameStoppedLoadingImpl(InstrumentingAgents&amp;, Frame&amp;);
 402     static void frameScheduledNavigationImpl(InstrumentingAgents&amp;, Frame&amp;, Seconds delay);
 403     static void frameClearedScheduledNavigationImpl(InstrumentingAgents&amp;, Frame&amp;);
 404     static void defaultAppearanceDidChangeImpl(InstrumentingAgents&amp;, bool useDarkAppearance);
 405     static void willDestroyCachedResourceImpl(CachedResource&amp;);
 406 




 407     static void addMessageToConsoleImpl(InstrumentingAgents&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 408 
<span class="line-modified"> 409     static void consoleCountImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; label);</span>
<span class="line-modified"> 410     static void consoleCountResetImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; label);</span>
 411     static void takeHeapSnapshotImpl(InstrumentingAgents&amp;, const String&amp; title);
<span class="line-modified"> 412     static void startConsoleTimingImpl(InstrumentingAgents&amp;, Frame&amp;, JSC::ExecState*, const String&amp; label);</span>
<span class="line-modified"> 413     static void startConsoleTimingImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; label);</span>
<span class="line-modified"> 414     static void logConsoleTimingImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);</span>
<span class="line-modified"> 415     static void stopConsoleTimingImpl(InstrumentingAgents&amp;, Frame&amp;, JSC::ExecState*, const String&amp; label);</span>
<span class="line-modified"> 416     static void stopConsoleTimingImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; label);</span>
 417     static void consoleTimeStampImpl(InstrumentingAgents&amp;, Frame&amp;, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
<span class="line-modified"> 418     static void startProfilingImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; title);</span>
<span class="line-modified"> 419     static void stopProfilingImpl(InstrumentingAgents&amp;, JSC::ExecState*, const String&amp; title);</span>
<span class="line-modified"> 420     static void consoleStartRecordingCanvasImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, JSC::ExecState&amp;, JSC::JSObject* options);</span>

 421 
 422     static void didRequestAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);
 423     static void didCancelAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);
<span class="line-modified"> 424     static InspectorInstrumentationCookie willFireAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);</span>
<span class="line-modified"> 425     static void didFireAnimationFrameImpl(const InspectorInstrumentationCookie&amp;);</span>
 426 
<span class="line-modified"> 427     static InspectorInstrumentationCookie willFireObserverCallbackImpl(InstrumentingAgents&amp;, const String&amp;, ScriptExecutionContext&amp;);</span>
<span class="line-modified"> 428     static void didFireObserverCallbackImpl(const InspectorInstrumentationCookie&amp;);</span>
 429 
 430     static void didOpenDatabaseImpl(InstrumentingAgents&amp;, Database&amp;);
 431 
 432     static void didDispatchDOMStorageEventImpl(InstrumentingAgents&amp;, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType, SecurityOrigin*);
 433 
 434     static bool shouldWaitForDebuggerOnStartImpl(InstrumentingAgents&amp;);
 435     static void workerStartedImpl(InstrumentingAgents&amp;, WorkerInspectorProxy*, const URL&amp;);
 436     static void workerTerminatedImpl(InstrumentingAgents&amp;, WorkerInspectorProxy*);
 437 
 438     static void didCreateWebSocketImpl(InstrumentingAgents&amp;, unsigned long identifier, const URL&amp; requestURL);
 439     static void willSendWebSocketHandshakeRequestImpl(InstrumentingAgents&amp;, unsigned long identifier, const ResourceRequest&amp;);
 440     static void didReceiveWebSocketHandshakeResponseImpl(InstrumentingAgents&amp;, unsigned long identifier, const ResourceResponse&amp;);
 441     static void didCloseWebSocketImpl(InstrumentingAgents&amp;, unsigned long identifier);
 442     static void didReceiveWebSocketFrameImpl(InstrumentingAgents&amp;, unsigned long identifier, const WebSocketFrame&amp;);
 443     static void didSendWebSocketFrameImpl(InstrumentingAgents&amp;, unsigned long identifier, const WebSocketFrame&amp;);
 444     static void didReceiveWebSocketFrameErrorImpl(InstrumentingAgents&amp;, unsigned long identifier, const String&amp;);
 445 
 446 #if ENABLE(RESOURCE_USAGE)
 447     static void didHandleMemoryPressureImpl(InstrumentingAgents&amp;, Critical);
 448 #endif
 449 
 450     static void networkStateChangedImpl(InstrumentingAgents&amp;);
 451     static void updateApplicationCacheStatusImpl(InstrumentingAgents&amp;, Frame&amp;);
 452 
 453     static void didChangeCSSCanvasClientNodesImpl(InstrumentingAgents&amp;, CanvasBase&amp;);
 454     static void didCreateCanvasRenderingContextImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;);
 455     static void didChangeCanvasMemoryImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;);
 456     static void recordCanvasActionImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, const String&amp;, std::initializer_list&lt;RecordCanvasActionVariant&gt;&amp;&amp; = { });
 457     static void didFinishRecordingCanvasFrameImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, bool forceDispatch = false);
 458 #if ENABLE(WEBGL)
 459     static void didEnableExtensionImpl(InstrumentingAgents&amp;, WebGLRenderingContextBase&amp;, const String&amp;);
<span class="line-modified"> 460     static void didCreateProgramImpl(InstrumentingAgents&amp;, WebGLRenderingContextBase&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 461     static void willDeleteProgramImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 462     static bool isShaderProgramDisabledImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 463     static bool isShaderProgramHighlightedImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);</span>








 464 #endif
 465 







 466     static void layerTreeDidChangeImpl(InstrumentingAgents&amp;);
 467     static void renderLayerDestroyedImpl(InstrumentingAgents&amp;, const RenderLayer&amp;);
 468 
 469     static InstrumentingAgents&amp; instrumentingAgentsForPage(Page&amp;);
 470     static InstrumentingAgents&amp; instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope&amp;);
 471 
<span class="line-modified"> 472     static InstrumentingAgents* instrumentingAgentsForFrame(Frame&amp;);</span>
<span class="line-modified"> 473     static InstrumentingAgents* instrumentingAgentsForFrame(Frame*);</span>
 474     static InstrumentingAgents* instrumentingAgentsForContext(ScriptExecutionContext*);
 475     static InstrumentingAgents* instrumentingAgentsForContext(ScriptExecutionContext&amp;);
 476     static InstrumentingAgents* instrumentingAgentsForDocument(Document&amp;);
 477     static InstrumentingAgents* instrumentingAgentsForDocument(Document*);
 478     static InstrumentingAgents* instrumentingAgentsForRenderer(RenderObject&amp;);
 479     static InstrumentingAgents* instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope*);
<span class="line-removed"> 480 </span>
<span class="line-removed"> 481     static InspectorTimelineAgent* retrieveTimelineAgent(const InspectorInstrumentationCookie&amp;);</span>
<span class="line-removed"> 482 </span>
<span class="line-removed"> 483     WEBCORE_EXPORT static int s_frontendCounter;</span>
 484 };
 485 
 486 inline void InspectorInstrumentation::didClearWindowObjectInWorld(Frame&amp; frame, DOMWrapperWorld&amp; world)
 487 {
 488     FAST_RETURN_IF_NO_FRONTENDS(void());
 489     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 490         didClearWindowObjectInWorldImpl(*instrumentingAgents, frame, world);
 491 }
 492 
 493 inline bool InspectorInstrumentation::isDebuggerPaused(Frame* frame)
 494 {
 495     FAST_RETURN_IF_NO_FRONTENDS(false);
 496     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 497         return isDebuggerPausedImpl(*instrumentingAgents);
 498     return false;
 499 }
 500 
 501 inline int InspectorInstrumentation::identifierForNode(Node&amp; node)
 502 {
 503     FAST_RETURN_IF_NO_FRONTENDS(0);
</pre>
<hr />
<pre>
 743     FAST_RETURN_IF_NO_FRONTENDS(void());
 744     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 745         didAddEventListenerImpl(*instrumentingAgents, target, eventType, listener, capture);
 746 }
 747 
 748 inline void InspectorInstrumentation::willRemoveEventListener(EventTarget&amp; target, const AtomString&amp; eventType, EventListener&amp; listener, bool capture)
 749 {
 750     FAST_RETURN_IF_NO_FRONTENDS(void());
 751     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 752         willRemoveEventListenerImpl(*instrumentingAgents, target, eventType, listener, capture);
 753 }
 754 
 755 inline bool InspectorInstrumentation::isEventListenerDisabled(EventTarget&amp; target, const AtomString&amp; eventType, EventListener&amp; listener, bool capture)
 756 {
 757     FAST_RETURN_IF_NO_FRONTENDS(false);
 758     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 759         return isEventListenerDisabledImpl(*instrumentingAgents, target, eventType, listener, capture);
 760     return false;
 761 }
 762 
<span class="line-modified"> 763 inline void InspectorInstrumentation::didPostMessage(Frame&amp; frame, TimerBase&amp; timer, JSC::ExecState&amp; state)</span>
 764 {
 765     FAST_RETURN_IF_NO_FRONTENDS(void());
 766     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 767         didPostMessageImpl(*instrumentingAgents, timer, state);
 768 }
 769 
 770 inline void InspectorInstrumentation::didFailPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 771 {
 772     FAST_RETURN_IF_NO_FRONTENDS(void());
 773     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 774         didFailPostMessageImpl(*instrumentingAgents, timer);
 775 }
 776 
 777 inline void InspectorInstrumentation::willDispatchPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 778 {
 779     FAST_RETURN_IF_NO_FRONTENDS(void());
 780     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 781         willDispatchPostMessageImpl(*instrumentingAgents, timer);
 782 }
 783 
 784 inline void InspectorInstrumentation::didDispatchPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 785 {
 786     FAST_RETURN_IF_NO_FRONTENDS(void());
 787     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 788         didDispatchPostMessageImpl(*instrumentingAgents, timer);
 789 }
 790 
<span class="line-modified"> 791 inline InspectorInstrumentationCookie InspectorInstrumentation::willCallFunction(ScriptExecutionContext* context, const String&amp; scriptName, int scriptLine, int scriptColumn)</span>
 792 {
<span class="line-modified"> 793     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());</span>
<span class="line-modified"> 794     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified"> 795         return willCallFunctionImpl(*instrumentingAgents, scriptName, scriptLine, scriptColumn, context);</span>
<span class="line-removed"> 796     return InspectorInstrumentationCookie();</span>
 797 }
 798 
<span class="line-modified"> 799 inline void InspectorInstrumentation::didCallFunction(const InspectorInstrumentationCookie&amp; cookie, ScriptExecutionContext* context)</span>
 800 {
 801     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified"> 802     if (cookie.isValid())</span>
<span class="line-modified"> 803         didCallFunctionImpl(cookie, context);</span>
 804 }
 805 
<span class="line-modified"> 806 inline InspectorInstrumentationCookie InspectorInstrumentation::willDispatchEvent(Document&amp; document, const Event&amp; event, bool hasEventListeners)</span>
 807 {
<span class="line-modified"> 808     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());</span>
<span class="line-modified"> 809     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified"> 810         return willDispatchEventImpl(*instrumentingAgents, document, event, hasEventListeners);</span>
<span class="line-removed"> 811     return InspectorInstrumentationCookie();</span>
 812 }
 813 
<span class="line-modified"> 814 inline void InspectorInstrumentation::didDispatchEvent(const InspectorInstrumentationCookie&amp; cookie, bool defaultPrevented)</span>
 815 {
 816     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified"> 817     if (cookie.isValid())</span>
<span class="line-modified"> 818         didDispatchEventImpl(cookie, defaultPrevented);</span>
 819 }
 820 
 821 inline void InspectorInstrumentation::willHandleEvent(ScriptExecutionContext&amp; context, Event&amp; event, const RegisteredEventListener&amp; listener)
 822 {
 823     FAST_RETURN_IF_NO_FRONTENDS(void());
 824     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 825         return willHandleEventImpl(*instrumentingAgents, event, listener);
 826 }
 827 
 828 inline void InspectorInstrumentation::didHandleEvent(ScriptExecutionContext&amp; context)
 829 {
 830     FAST_RETURN_IF_NO_FRONTENDS(void());
 831     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 832         return didHandleEventImpl(*instrumentingAgents);
 833 }
 834 
<span class="line-modified"> 835 inline InspectorInstrumentationCookie InspectorInstrumentation::willDispatchEventOnWindow(Frame* frame, const Event&amp; event, DOMWindow&amp; window)</span>
 836 {
<span class="line-modified"> 837     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());</span>
<span class="line-modified"> 838     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 839         return willDispatchEventOnWindowImpl(*instrumentingAgents, event, window);</span>
<span class="line-removed"> 840     return InspectorInstrumentationCookie();</span>
 841 }
 842 
<span class="line-modified"> 843 inline void InspectorInstrumentation::didDispatchEventOnWindow(const InspectorInstrumentationCookie&amp; cookie, bool defaultPrevented)</span>
 844 {
 845     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified"> 846     if (cookie.isValid())</span>
<span class="line-modified"> 847         didDispatchEventOnWindowImpl(cookie, defaultPrevented);</span>
 848 }
 849 
 850 inline void InspectorInstrumentation::eventDidResetAfterDispatch(const Event&amp; event)
 851 {
 852     FAST_RETURN_IF_NO_FRONTENDS(void());
 853 
 854     if (!is&lt;Node&gt;(event.target()))
 855         return;
 856 
 857     auto* node = downcast&lt;Node&gt;(event.target());
 858     if (auto* instrumentingAgents = instrumentingAgentsForContext(node-&gt;scriptExecutionContext()))
 859         return eventDidResetAfterDispatchImpl(*instrumentingAgents, event);
 860 }
 861 
<span class="line-modified"> 862 inline InspectorInstrumentationCookie InspectorInstrumentation::willEvaluateScript(Frame&amp; frame, const String&amp; url, int lineNumber, int columnNumber)</span>
 863 {
<span class="line-modified"> 864     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());</span>
<span class="line-modified"> 865     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 866         return willEvaluateScriptImpl(*instrumentingAgents, frame, url, lineNumber, columnNumber);</span>
<span class="line-removed"> 867     return InspectorInstrumentationCookie();</span>
 868 }
 869 
<span class="line-modified"> 870 inline void InspectorInstrumentation::didEvaluateScript(const InspectorInstrumentationCookie&amp; cookie, Frame&amp; frame)</span>
 871 {
 872     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified"> 873     if (cookie.isValid())</span>
<span class="line-modified"> 874         didEvaluateScriptImpl(cookie, frame);</span>
 875 }
 876 
<span class="line-modified"> 877 inline InspectorInstrumentationCookie InspectorInstrumentation::willFireTimer(ScriptExecutionContext&amp; context, int timerId, bool oneShot)</span>
 878 {
<span class="line-modified"> 879     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());</span>
<span class="line-modified"> 880     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified"> 881         return willFireTimerImpl(*instrumentingAgents, timerId, oneShot, context);</span>
<span class="line-removed"> 882     return InspectorInstrumentationCookie();</span>
 883 }
 884 
<span class="line-modified"> 885 inline void InspectorInstrumentation::didFireTimer(const InspectorInstrumentationCookie&amp; cookie)</span>
 886 {
 887     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified"> 888     if (cookie.isValid())</span>
<span class="line-modified"> 889         didFireTimerImpl(cookie);</span>
 890 }
 891 
 892 inline void InspectorInstrumentation::didInvalidateLayout(Frame&amp; frame)
 893 {
 894     FAST_RETURN_IF_NO_FRONTENDS(void());
 895     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 896         didInvalidateLayoutImpl(*instrumentingAgents, frame);
 897 }
 898 
<span class="line-modified"> 899 inline InspectorInstrumentationCookie InspectorInstrumentation::willLayout(Frame&amp; frame)</span>
 900 {
<span class="line-modified"> 901     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());</span>
<span class="line-modified"> 902     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 903         return willLayoutImpl(*instrumentingAgents, frame);</span>
<span class="line-removed"> 904     return InspectorInstrumentationCookie();</span>
 905 }
 906 
<span class="line-modified"> 907 inline void InspectorInstrumentation::didLayout(const InspectorInstrumentationCookie&amp; cookie, RenderObject&amp; root)</span>
 908 {
 909     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified"> 910     if (cookie.isValid())</span>
<span class="line-modified"> 911         didLayoutImpl(cookie, root);</span>
 912 }
 913 
 914 inline void InspectorInstrumentation::didScroll(Page&amp; page)
 915 {
 916     FAST_RETURN_IF_NO_FRONTENDS(void());
 917     didScrollImpl(instrumentingAgentsForPage(page));
 918 }
 919 
 920 inline void InspectorInstrumentation::willComposite(Frame&amp; frame)
 921 {
 922     FAST_RETURN_IF_NO_FRONTENDS(void());
 923     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 924         willCompositeImpl(*instrumentingAgents, frame);
 925 }
 926 
 927 inline void InspectorInstrumentation::didComposite(Frame&amp; frame)
 928 {
 929     FAST_RETURN_IF_NO_FRONTENDS(void());
 930     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 931         didCompositeImpl(*instrumentingAgents);
 932 }
 933 
 934 inline void InspectorInstrumentation::willPaint(RenderObject&amp; renderer)
 935 {
 936     FAST_RETURN_IF_NO_FRONTENDS(void());
 937     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForRenderer(renderer))
 938         return willPaintImpl(*instrumentingAgents, renderer);
 939 }
 940 
 941 inline void InspectorInstrumentation::didPaint(RenderObject&amp; renderer, const LayoutRect&amp; rect)
 942 {
 943     FAST_RETURN_IF_NO_FRONTENDS(void());
 944     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForRenderer(renderer))
 945         didPaintImpl(*instrumentingAgents, renderer, rect);
 946 }
 947 
<span class="line-modified"> 948 inline InspectorInstrumentationCookie InspectorInstrumentation::willRecalculateStyle(Document&amp; document)</span>
 949 {
<span class="line-modified"> 950     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());</span>
<span class="line-modified"> 951     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified"> 952         return willRecalculateStyleImpl(*instrumentingAgents, document);</span>
<span class="line-removed"> 953     return InspectorInstrumentationCookie();</span>
 954 }
 955 
<span class="line-modified"> 956 inline void InspectorInstrumentation::didRecalculateStyle(const InspectorInstrumentationCookie&amp; cookie)</span>
 957 {
 958     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified"> 959     if (cookie.isValid())</span>
<span class="line-modified"> 960         didRecalculateStyleImpl(cookie);</span>
 961 }
 962 
 963 inline void InspectorInstrumentation::didScheduleStyleRecalculation(Document&amp; document)
 964 {
 965     FAST_RETURN_IF_NO_FRONTENDS(void());
 966     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
 967         didScheduleStyleRecalculationImpl(*instrumentingAgents, document);
 968 }
 969 
 970 inline void InspectorInstrumentation::applyUserAgentOverride(Frame&amp; frame, String&amp; userAgent)
 971 {
 972     FAST_RETURN_IF_NO_FRONTENDS(void());
 973     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 974         applyUserAgentOverrideImpl(*instrumentingAgents, userAgent);
 975 }
 976 
 977 inline void InspectorInstrumentation::applyEmulatedMedia(Frame&amp; frame, String&amp; media)
 978 {
 979     FAST_RETURN_IF_NO_FRONTENDS(void());
 980     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
</pre>
<hr />
<pre>
1182 
1183 inline void InspectorInstrumentation::frameClearedScheduledNavigation(Frame&amp; frame)
1184 {
1185     FAST_RETURN_IF_NO_FRONTENDS(void());
1186     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1187         frameClearedScheduledNavigationImpl(*instrumentingAgents, frame);
1188 }
1189 
1190 inline void InspectorInstrumentation::defaultAppearanceDidChange(Page&amp; page, bool useDarkAppearance)
1191 {
1192     FAST_RETURN_IF_NO_FRONTENDS(void());
1193     defaultAppearanceDidChangeImpl(instrumentingAgentsForPage(page), useDarkAppearance);
1194 }
1195 
1196 inline void InspectorInstrumentation::willDestroyCachedResource(CachedResource&amp; cachedResource)
1197 {
1198     FAST_RETURN_IF_NO_FRONTENDS(void());
1199     willDestroyCachedResourceImpl(cachedResource);
1200 }
1201 























1202 inline void InspectorInstrumentation::didOpenDatabase(Database&amp; database)
1203 {
1204     FAST_RETURN_IF_NO_FRONTENDS(void());
1205     if (auto* instrumentingAgents = instrumentingAgentsForContext(database.document()))
1206         didOpenDatabaseImpl(*instrumentingAgents, database);
1207 }
1208 
1209 inline void InspectorInstrumentation::didDispatchDOMStorageEvent(Page&amp; page, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType storageType, SecurityOrigin* securityOrigin)
1210 {
1211     FAST_RETURN_IF_NO_FRONTENDS(void());
1212     didDispatchDOMStorageEventImpl(instrumentingAgentsForPage(page), key, oldValue, newValue, storageType, securityOrigin);
1213 }
1214 
1215 inline bool InspectorInstrumentation::shouldWaitForDebuggerOnStart(ScriptExecutionContext&amp; context)
1216 {
1217     FAST_RETURN_IF_NO_FRONTENDS(false);
1218     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1219         return shouldWaitForDebuggerOnStartImpl(*instrumentingAgents);
1220     return false;
1221 }
</pre>
<hr />
<pre>
1317     FAST_RETURN_IF_NO_FRONTENDS(void());
1318     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1319         recordCanvasActionImpl(*instrumentingAgents, context, name, WTFMove(parameters));
1320 }
1321 
1322 inline void InspectorInstrumentation::didFinishRecordingCanvasFrame(CanvasRenderingContext&amp; context, bool forceDispatch)
1323 {
1324     FAST_RETURN_IF_NO_FRONTENDS(void());
1325     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1326         didFinishRecordingCanvasFrameImpl(*instrumentingAgents, context, forceDispatch);
1327 }
1328 
1329 #if ENABLE(WEBGL)
1330 inline void InspectorInstrumentation::didEnableExtension(WebGLRenderingContextBase&amp; contextWebGLBase, const String&amp; extension)
1331 {
1332     FAST_RETURN_IF_NO_FRONTENDS(void());
1333     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
1334         didEnableExtensionImpl(*instrumentingAgents, contextWebGLBase, extension);
1335 }
1336 
<span class="line-modified">1337 inline void InspectorInstrumentation::didCreateProgram(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)</span>
1338 {
1339     FAST_RETURN_IF_NO_FRONTENDS(void());
1340     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
<span class="line-modified">1341         didCreateProgramImpl(*instrumentingAgents, contextWebGLBase, program);</span>
1342 }
1343 
<span class="line-modified">1344 inline void InspectorInstrumentation::willDeleteProgram(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)</span>
1345 {
1346     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified">1347     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))</span>
<span class="line-modified">1348         willDeleteProgramImpl(*instrumentingAgents, program);</span>
1349 }
1350 
<span class="line-modified">1351 inline bool InspectorInstrumentation::isShaderProgramDisabled(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)</span>
1352 {
1353     FAST_RETURN_IF_NO_FRONTENDS(false);
1354     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
<span class="line-modified">1355         return isShaderProgramDisabledImpl(*instrumentingAgents, program);</span>
1356     return false;
1357 }
1358 
<span class="line-modified">1359 inline bool InspectorInstrumentation::isShaderProgramHighlighted(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)</span>
1360 {
1361     FAST_RETURN_IF_NO_FRONTENDS(false);
1362     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
<span class="line-modified">1363         return isShaderProgramHighlightedImpl(*instrumentingAgents, program);</span>
1364     return false;
1365 }
1366 #endif
1367 















































































1368 inline void InspectorInstrumentation::networkStateChanged(Page&amp; page)
1369 {
1370     FAST_RETURN_IF_NO_FRONTENDS(void());
1371     networkStateChangedImpl(instrumentingAgentsForPage(page));
1372 }
1373 
1374 inline void InspectorInstrumentation::updateApplicationCacheStatus(Frame* frame)
1375 {
1376     FAST_RETURN_IF_NO_FRONTENDS(void());
1377     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1378         updateApplicationCacheStatusImpl(*instrumentingAgents, *frame);
1379 }
1380 
1381 inline void InspectorInstrumentation::addMessageToConsole(Page&amp; page, std::unique_ptr&lt;Inspector::ConsoleMessage&gt; message)
1382 {
1383     addMessageToConsoleImpl(instrumentingAgentsForPage(page), WTFMove(message));
1384 }
1385 
1386 inline void InspectorInstrumentation::addMessageToConsole(WorkerGlobalScope&amp; workerGlobalScope, std::unique_ptr&lt;Inspector::ConsoleMessage&gt; message)
1387 {
1388     addMessageToConsoleImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), WTFMove(message));
1389 }
1390 
<span class="line-modified">1391 inline void InspectorInstrumentation::consoleCount(Page&amp; page, JSC::ExecState* state, const String&amp; label)</span>
1392 {
1393     consoleCountImpl(instrumentingAgentsForPage(page), state, label);
1394 }
1395 
<span class="line-modified">1396 inline void InspectorInstrumentation::consoleCount(WorkerGlobalScope&amp; workerGlobalScope, JSC::ExecState* state, const String&amp; label)</span>
1397 {
1398     consoleCountImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), state, label);
1399 }
1400 
<span class="line-modified">1401 inline void InspectorInstrumentation::consoleCountReset(Page&amp; page, JSC::ExecState* state, const String&amp; label)</span>
1402 {
1403     consoleCountResetImpl(instrumentingAgentsForPage(page), state, label);
1404 }
1405 
<span class="line-modified">1406 inline void InspectorInstrumentation::consoleCountReset(WorkerGlobalScope&amp; workerGlobalScope, JSC::ExecState* state, const String&amp; label)</span>
1407 {
1408     consoleCountResetImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), state, label);
1409 }
1410 
1411 inline void InspectorInstrumentation::takeHeapSnapshot(Frame&amp; frame, const String&amp; title)
1412 {
1413     FAST_RETURN_IF_NO_FRONTENDS(void());
1414     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1415         takeHeapSnapshotImpl(*instrumentingAgents, title);
1416 }
1417 
<span class="line-modified">1418 inline void InspectorInstrumentation::startConsoleTiming(Frame&amp; frame, JSC::ExecState* exec, const String&amp; label)</span>
1419 {
1420     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1421         startConsoleTimingImpl(*instrumentingAgents, frame, exec, label);
1422 }
1423 
<span class="line-modified">1424 inline void InspectorInstrumentation::startConsoleTiming(WorkerGlobalScope&amp; workerGlobalScope, JSC::ExecState* exec, const String&amp; label)</span>
1425 {
1426     startConsoleTimingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), exec, label);
1427 }
1428 
<span class="line-modified">1429 inline void InspectorInstrumentation::logConsoleTiming(Frame&amp; frame, JSC::ExecState* exec, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)</span>
1430 {
1431     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1432         logConsoleTimingImpl(*instrumentingAgents, exec, label, WTFMove(arguments));
1433 }
1434 
<span class="line-modified">1435 inline void InspectorInstrumentation::logConsoleTiming(WorkerGlobalScope&amp; workerGlobalScope, JSC::ExecState* exec, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)</span>
1436 {
1437     logConsoleTimingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), exec, label, WTFMove(arguments));
1438 }
1439 
<span class="line-modified">1440 inline void InspectorInstrumentation::stopConsoleTiming(Frame&amp; frame, JSC::ExecState* exec, const String&amp; label)</span>
1441 {
1442     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1443         stopConsoleTimingImpl(*instrumentingAgents, frame, exec, label);
1444 }
1445 
<span class="line-modified">1446 inline void InspectorInstrumentation::stopConsoleTiming(WorkerGlobalScope&amp; workerGlobalScope, JSC::ExecState* exec, const String&amp; label)</span>
1447 {
1448     stopConsoleTimingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), exec, label);
1449 }
1450 
1451 inline void InspectorInstrumentation::consoleTimeStamp(Frame&amp; frame, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)
1452 {
1453     FAST_RETURN_IF_NO_FRONTENDS(void());
1454     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1455         consoleTimeStampImpl(*instrumentingAgents, frame, WTFMove(arguments));
1456 }
1457 
<span class="line-modified">1458 inline void InspectorInstrumentation::startProfiling(Page&amp; page, JSC::ExecState* exec, const String &amp;title)</span>
1459 {
1460     FAST_RETURN_IF_NO_FRONTENDS(void());
1461     startProfilingImpl(instrumentingAgentsForPage(page), exec, title);
1462 }
1463 
<span class="line-modified">1464 inline void InspectorInstrumentation::stopProfiling(Page&amp; page, JSC::ExecState* exec, const String &amp;title)</span>
1465 {
1466     FAST_RETURN_IF_NO_FRONTENDS(void());
1467     stopProfilingImpl(instrumentingAgentsForPage(page), exec, title);
1468 }
1469 
<span class="line-modified">1470 inline void InspectorInstrumentation::consoleStartRecordingCanvas(CanvasRenderingContext&amp; context, JSC::ExecState&amp; exec, JSC::JSObject* options)</span>
1471 {
<span class="line-removed">1472     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
1473     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1474         consoleStartRecordingCanvasImpl(*instrumentingAgents, context, exec, options);
1475 }
1476 






1477 inline void InspectorInstrumentation::didRequestAnimationFrame(Document&amp; document, int callbackId)
1478 {
1479     FAST_RETURN_IF_NO_FRONTENDS(void());
1480     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1481         didRequestAnimationFrameImpl(*instrumentingAgents, callbackId, document);
1482 }
1483 
1484 inline void InspectorInstrumentation::didCancelAnimationFrame(Document&amp; document, int callbackId)
1485 {
1486     FAST_RETURN_IF_NO_FRONTENDS(void());
1487     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1488         didCancelAnimationFrameImpl(*instrumentingAgents, callbackId, document);
1489 }
1490 
<span class="line-modified">1491 inline InspectorInstrumentationCookie InspectorInstrumentation::willFireAnimationFrame(Document&amp; document, int callbackId)</span>
1492 {
<span class="line-modified">1493     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());</span>
<span class="line-modified">1494     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified">1495         return willFireAnimationFrameImpl(*instrumentingAgents, callbackId, document);</span>
<span class="line-removed">1496     return InspectorInstrumentationCookie();</span>
1497 }
1498 
<span class="line-modified">1499 inline void InspectorInstrumentation::didFireAnimationFrame(const InspectorInstrumentationCookie&amp; cookie)</span>
1500 {
1501     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified">1502     if (cookie.isValid())</span>
<span class="line-modified">1503         didFireAnimationFrameImpl(cookie);</span>
1504 }
1505 
<span class="line-modified">1506 inline InspectorInstrumentationCookie InspectorInstrumentation::willFireObserverCallback(ScriptExecutionContext&amp; context, const String&amp; callbackType)</span>
1507 {
<span class="line-modified">1508     FAST_RETURN_IF_NO_FRONTENDS(InspectorInstrumentationCookie());</span>
<span class="line-modified">1509     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified">1510         return willFireObserverCallbackImpl(*instrumentingAgents, callbackType, context);</span>
<span class="line-removed">1511     return InspectorInstrumentationCookie();</span>
1512 }
1513 
<span class="line-modified">1514 inline void InspectorInstrumentation::didFireObserverCallback(const InspectorInstrumentationCookie&amp; cookie)</span>
1515 {
1516     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified">1517     if (cookie.isValid())</span>
<span class="line-modified">1518         didFireObserverCallbackImpl(cookie);</span>
1519 }
1520 
1521 inline void InspectorInstrumentation::layerTreeDidChange(Page* page)
1522 {
1523     FAST_RETURN_IF_NO_FRONTENDS(void());
1524     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
1525         layerTreeDidChangeImpl(*instrumentingAgents);
1526 }
1527 
1528 inline void InspectorInstrumentation::renderLayerDestroyed(Page* page, const RenderLayer&amp; renderLayer)
1529 {
1530     FAST_RETURN_IF_NO_FRONTENDS(void());
1531     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
1532         renderLayerDestroyedImpl(*instrumentingAgents, renderLayer);
1533 }
1534 
1535 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForContext(ScriptExecutionContext* context)
1536 {
1537     return context ? instrumentingAgentsForContext(*context) : nullptr;
1538 }
1539 
<span class="line-modified">1540 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForContext(ScriptExecutionContext&amp; context)</span>
<span class="line-removed">1541 {</span>
<span class="line-removed">1542     if (is&lt;Document&gt;(context))</span>
<span class="line-removed">1543         return instrumentingAgentsForPage(downcast&lt;Document&gt;(context).page());</span>
<span class="line-removed">1544     if (is&lt;WorkerGlobalScope&gt;(context))</span>
<span class="line-removed">1545         return &amp;instrumentingAgentsForWorkerGlobalScope(downcast&lt;WorkerGlobalScope&gt;(context));</span>
<span class="line-removed">1546     return nullptr;</span>
<span class="line-removed">1547 }</span>
<span class="line-removed">1548 </span>
<span class="line-removed">1549 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForFrame(Frame* frame)</span>
1550 {
1551     return frame ? instrumentingAgentsForFrame(*frame) : nullptr;
1552 }
1553 
<span class="line-modified">1554 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForFrame(Frame&amp; frame)</span>
1555 {
1556     return instrumentingAgentsForPage(frame.page());
1557 }
1558 
1559 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForDocument(Document* document)
1560 {
1561     return document ? instrumentingAgentsForDocument(*document) : nullptr;
1562 }
1563 
1564 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForDocument(Document&amp; document)
1565 {
1566     Page* page = document.page();
1567     if (!page &amp;&amp; document.templateDocumentHost())
1568         page = document.templateDocumentHost()-&gt;page();
1569     return instrumentingAgentsForPage(page);
1570 }
1571 
1572 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForPage(Page* page)
1573 {
1574     return page ? &amp;instrumentingAgentsForPage(*page) : nullptr;
1575 }
1576 
<span class="line-removed">1577 inline InstrumentingAgents&amp; InspectorInstrumentation::instrumentingAgentsForPage(Page&amp; page)</span>
<span class="line-removed">1578 {</span>
<span class="line-removed">1579     ASSERT(isMainThread());</span>
<span class="line-removed">1580     return page.inspectorController().m_instrumentingAgents.get();</span>
<span class="line-removed">1581 }</span>
<span class="line-removed">1582 </span>
1583 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope* workerGlobalScope)
1584 {
1585     return workerGlobalScope ? &amp;instrumentingAgentsForWorkerGlobalScope(*workerGlobalScope) : nullptr;
1586 }
1587 
<span class="line-removed">1588 inline InstrumentingAgents&amp; InspectorInstrumentation::instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope&amp; workerGlobalScope)</span>
<span class="line-removed">1589 {</span>
<span class="line-removed">1590     return workerGlobalScope.inspectorController().m_instrumentingAgents;</span>
<span class="line-removed">1591 }</span>
<span class="line-removed">1592 </span>
1593 inline void InspectorInstrumentation::frontendCreated()
1594 {
1595     ASSERT(isMainThread());
<span class="line-modified">1596     s_frontendCounter++;</span>
1597 
<span class="line-modified">1598     if (s_frontendCounter == 1)</span>
1599         InspectorInstrumentation::firstFrontendCreated();
1600 }
1601 
1602 inline void InspectorInstrumentation::frontendDeleted()
1603 {
1604     ASSERT(isMainThread());
<span class="line-modified">1605     s_frontendCounter--;</span>
1606 
<span class="line-modified">1607     if (!s_frontendCounter)</span>
1608         InspectorInstrumentation::lastFrontendDeleted();
1609 }
1610 
1611 } // namespace WebCore
</pre>
</td>
<td>
<hr />
<pre>
  19 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  20 * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
  21 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
  22 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
  23 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
  24 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  25 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  26 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
  27 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  28 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  29 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  30 */
  31 
  32 #pragma once
  33 
  34 #include &quot;CSSSelector.h&quot;
  35 #include &quot;CallTracerTypes.h&quot;
  36 #include &quot;CanvasBase.h&quot;
  37 #include &quot;CanvasRenderingContext.h&quot;
  38 #include &quot;Database.h&quot;
<span class="line-added">  39 #include &quot;DeclarativeAnimation.h&quot;</span>
  40 #include &quot;DocumentThreadableLoader.h&quot;
  41 #include &quot;Element.h&quot;
  42 #include &quot;EventTarget.h&quot;
  43 #include &quot;FormData.h&quot;
  44 #include &quot;Frame.h&quot;
  45 #include &quot;HitTestResult.h&quot;
<span class="line-modified">  46 #include &quot;InspectorInstrumentationPublic.h&quot;</span>


  47 #include &quot;Page.h&quot;
  48 #include &quot;StorageArea.h&quot;
<span class="line-modified">  49 #include &quot;WebAnimation.h&quot;</span>
<span class="line-modified">  50 #include &lt;JavaScriptCore/ConsoleMessage.h&gt;</span>

  51 #include &lt;initializer_list&gt;
<span class="line-added">  52 #include &lt;wtf/CompletionHandler.h&gt;</span>
  53 #include &lt;wtf/MemoryPressureHandler.h&gt;
  54 #include &lt;wtf/RefPtr.h&gt;
  55 
  56 #if ENABLE(WEBGL)
  57 #include &quot;WebGLRenderingContextBase.h&quot;
  58 #endif
  59 
<span class="line-added">  60 #if ENABLE(WEBGPU)</span>
<span class="line-added">  61 #include &quot;GPUCanvasContext.h&quot;</span>
<span class="line-added">  62 #include &quot;WebGPUPipeline.h&quot;</span>
<span class="line-added">  63 #endif</span>
<span class="line-added">  64 </span>
  65 namespace Inspector {
  66 class ConsoleMessage;
  67 class ScriptArguments;
  68 class ScriptCallStack;
  69 }
  70 
  71 namespace WebCore {
  72 
  73 class CachedResource;
  74 class CharacterData;
  75 class DOMWindow;
  76 class DOMWrapperWorld;
  77 class Document;
  78 class DocumentLoader;
  79 class EventListener;
  80 class HTTPHeaderMap;
  81 class InspectorTimelineAgent;
  82 class InstrumentingAgents;
<span class="line-added">  83 class KeyframeEffect;</span>
  84 class NetworkLoadMetrics;
  85 class Node;
  86 class PseudoElement;
  87 class RegisteredEventListener;
  88 class RenderLayer;
  89 class RenderObject;
  90 class ResourceLoader;
  91 class ResourceRequest;
  92 class ResourceResponse;
  93 class ScriptExecutionContext;
  94 class SecurityOrigin;
  95 class ShadowRoot;
<span class="line-added">  96 class SharedBuffer;</span>
  97 class TimerBase;
<span class="line-added">  98 class WebKitNamedFlow;</span>
<span class="line-added">  99 class WorkerGlobalScope;</span>
<span class="line-added"> 100 class WorkerInspectorProxy;</span>
<span class="line-added"> 101 </span>
 102 #if ENABLE(WEBGL)
 103 class WebGLProgram;
 104 #endif


 105 
<span class="line-modified"> 106 #if ENABLE(WEBGPU)</span>
<span class="line-added"> 107 class WebGPUDevice;</span>
<span class="line-added"> 108 class WebGPUSwapChain;</span>
<span class="line-added"> 109 #endif</span>
 110 
<span class="line-modified"> 111 enum class StorageType : uint8_t;</span>
 112 
<span class="line-modified"> 113 struct ComputedEffectTiming;</span>
<span class="line-added"> 114 struct WebSocketFrame;</span>
 115 
 116 class InspectorInstrumentation {
 117 public:
 118     static void didClearWindowObjectInWorld(Frame&amp;, DOMWrapperWorld&amp;);
 119     static bool isDebuggerPaused(Frame*);
 120 
 121     static int identifierForNode(Node&amp;);
 122     static void addEventListenersToNode(Node&amp;);
 123     static void willInsertDOMNode(Document&amp;, Node&amp; parent);
 124     static void didInsertDOMNode(Document&amp;, Node&amp;);
 125     static void willRemoveDOMNode(Document&amp;, Node&amp;);
 126     static void didRemoveDOMNode(Document&amp;, Node&amp;);
 127     static void willModifyDOMAttr(Document&amp;, Element&amp;, const AtomString&amp; oldValue, const AtomString&amp; newValue);
 128     static void didModifyDOMAttr(Document&amp;, Element&amp;, const AtomString&amp; name, const AtomString&amp; value);
 129     static void didRemoveDOMAttr(Document&amp;, Element&amp;, const AtomString&amp; name);
 130     static void characterDataModified(Document&amp;, CharacterData&amp;);
 131     static void willInvalidateStyleAttr(Element&amp;);
 132     static void didInvalidateStyleAttr(Element&amp;);
 133     static void documentDetached(Document&amp;);
 134     static void frameWindowDiscarded(Frame&amp;, DOMWindow*);
</pre>
<hr />
<pre>
 138     static void willPopShadowRoot(Element&amp; host, ShadowRoot&amp;);
 139     static void didChangeCustomElementState(Element&amp;);
 140     static void pseudoElementCreated(Page*, PseudoElement&amp;);
 141     static void pseudoElementDestroyed(Page*, PseudoElement&amp;);
 142     static void didCreateNamedFlow(Document*, WebKitNamedFlow&amp;);
 143     static void willRemoveNamedFlow(Document*, WebKitNamedFlow&amp;);
 144     static void didChangeRegionOverset(Document&amp;, WebKitNamedFlow&amp;);
 145     static void didRegisterNamedFlowContentElement(Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement, Node* nextContentElement = nullptr);
 146     static void didUnregisterNamedFlowContentElement(Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement);
 147 
 148     static void mouseDidMoveOverElement(Page&amp;, const HitTestResult&amp;, unsigned modifierFlags);
 149     static bool handleMousePress(Frame&amp;);
 150     static bool handleTouchEvent(Frame&amp;, Node&amp;);
 151     static bool forcePseudoState(const Element&amp;, CSSSelector::PseudoClassType);
 152 
 153     static void willSendXMLHttpRequest(ScriptExecutionContext*, const String&amp; url);
 154     static void willFetch(ScriptExecutionContext&amp;, const String&amp; url);
 155     static void didInstallTimer(ScriptExecutionContext&amp;, int timerId, Seconds timeout, bool singleShot);
 156     static void didRemoveTimer(ScriptExecutionContext&amp;, int timerId);
 157 
<span class="line-modified"> 158     static void didPostMessage(Frame&amp;, TimerBase&amp;, JSC::JSGlobalObject&amp;);</span>
 159     static void didFailPostMessage(Frame&amp;, TimerBase&amp;);
 160     static void willDispatchPostMessage(Frame&amp;, TimerBase&amp;);
 161     static void didDispatchPostMessage(Frame&amp;, TimerBase&amp;);
 162 
<span class="line-modified"> 163     static void willCallFunction(ScriptExecutionContext*, const String&amp; scriptName, int scriptLine, int scriptColumn);</span>
<span class="line-modified"> 164     static void didCallFunction(ScriptExecutionContext*);</span>
 165     static void didAddEventListener(EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 166     static void willRemoveEventListener(EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 167     static bool isEventListenerDisabled(EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
<span class="line-modified"> 168     static void willDispatchEvent(Document&amp;, const Event&amp;);</span>
<span class="line-modified"> 169     static void didDispatchEvent(Document&amp;, const Event&amp;);</span>
 170     static void willHandleEvent(ScriptExecutionContext&amp;, Event&amp;, const RegisteredEventListener&amp;);
 171     static void didHandleEvent(ScriptExecutionContext&amp;);
<span class="line-modified"> 172     static void willDispatchEventOnWindow(Frame*, const Event&amp;, DOMWindow&amp;);</span>
<span class="line-modified"> 173     static void didDispatchEventOnWindow(Frame*, const Event&amp;);</span>
 174     static void eventDidResetAfterDispatch(const Event&amp;);
<span class="line-modified"> 175     static void willEvaluateScript(Frame&amp;, const String&amp; url, int lineNumber, int columnNumber);</span>
<span class="line-modified"> 176     static void didEvaluateScript(Frame&amp;);</span>
<span class="line-modified"> 177     static void willFireTimer(ScriptExecutionContext&amp;, int timerId, bool oneShot);</span>
<span class="line-modified"> 178     static void didFireTimer(ScriptExecutionContext&amp;);</span>
 179     static void didInvalidateLayout(Frame&amp;);
<span class="line-modified"> 180     static void willLayout(Frame&amp;);</span>
<span class="line-modified"> 181     static void didLayout(Frame&amp;, RenderObject&amp;);</span>
 182     static void didScroll(Page&amp;);
 183     static void willComposite(Frame&amp;);
 184     static void didComposite(Frame&amp;);
 185     static void willPaint(RenderObject&amp;);
 186     static void didPaint(RenderObject&amp;, const LayoutRect&amp;);
<span class="line-modified"> 187     static void willRecalculateStyle(Document&amp;);</span>
<span class="line-modified"> 188     static void didRecalculateStyle(Document&amp;);</span>
 189     static void didScheduleStyleRecalculation(Document&amp;);
 190     static void applyUserAgentOverride(Frame&amp;, String&amp;);
 191     static void applyEmulatedMedia(Frame&amp;, String&amp;);
 192 
 193     static void willSendRequest(Frame*, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, const ResourceResponse&amp; redirectResponse);
 194     static void didLoadResourceFromMemoryCache(Page&amp;, DocumentLoader*, CachedResource*);
 195     static void didReceiveResourceResponse(Frame&amp;, unsigned long identifier, DocumentLoader*, const ResourceResponse&amp;, ResourceLoader*);
 196     static void didReceiveThreadableLoaderResponse(DocumentThreadableLoader&amp;, unsigned long identifier);
 197     static void didReceiveData(Frame*, unsigned long identifier, const char* data, int dataLength, int encodedDataLength);
 198     static void didFinishLoading(Frame*, DocumentLoader*, unsigned long identifier, const NetworkLoadMetrics&amp;, ResourceLoader*);
 199     static void didFailLoading(Frame*, DocumentLoader*, unsigned long identifier, const ResourceError&amp;);
 200 
 201     static void willSendRequest(WorkerGlobalScope&amp;, unsigned long identifier, ResourceRequest&amp;);
 202     static void didReceiveResourceResponse(WorkerGlobalScope&amp;, unsigned long identifier, const ResourceResponse&amp;);
 203     static void didReceiveData(WorkerGlobalScope&amp;, unsigned long identifier, const char* data, int dataLength);
 204     static void didFinishLoading(WorkerGlobalScope&amp;, unsigned long identifier, const NetworkLoadMetrics&amp;);
 205     static void didFailLoading(WorkerGlobalScope&amp;, unsigned long identifier, const ResourceError&amp;);
 206 
 207     // Some network requests do not go through the normal network loading path.
 208     // These network requests have to issue their own willSendRequest / didReceiveResponse / didFinishLoading / didFailLoading
</pre>
<hr />
<pre>
 214     static void continueWithPolicyDownload(Frame&amp;, unsigned long identifier, DocumentLoader&amp;, const ResourceResponse&amp;);
 215     static void continueWithPolicyIgnore(Frame&amp;, unsigned long identifier, DocumentLoader&amp;, const ResourceResponse&amp;);
 216     static void willLoadXHRSynchronously(ScriptExecutionContext*);
 217     static void didLoadXHRSynchronously(ScriptExecutionContext*);
 218     static void scriptImported(ScriptExecutionContext&amp;, unsigned long identifier, const String&amp; sourceString);
 219     static void scriptExecutionBlockedByCSP(ScriptExecutionContext*, const String&amp; directiveText);
 220     static void didReceiveScriptResponse(ScriptExecutionContext*, unsigned long identifier);
 221     static void domContentLoadedEventFired(Frame&amp;);
 222     static void loadEventFired(Frame*);
 223     static void frameDetachedFromParent(Frame&amp;);
 224     static void didCommitLoad(Frame&amp;, DocumentLoader*);
 225     static void frameDocumentUpdated(Frame&amp;);
 226     static void loaderDetachedFromFrame(Frame&amp;, DocumentLoader&amp;);
 227     static void frameStartedLoading(Frame&amp;);
 228     static void frameStoppedLoading(Frame&amp;);
 229     static void frameScheduledNavigation(Frame&amp;, Seconds delay);
 230     static void frameClearedScheduledNavigation(Frame&amp;);
 231     static void defaultAppearanceDidChange(Page&amp;, bool useDarkAppearance);
 232     static void willDestroyCachedResource(CachedResource&amp;);
 233 
<span class="line-added"> 234     static bool willInterceptRequest(const Frame*, const ResourceRequest&amp;);</span>
<span class="line-added"> 235     static bool shouldInterceptResponse(const Frame&amp;, const ResourceResponse&amp;);</span>
<span class="line-added"> 236     static void interceptResponse(const Frame&amp;, const ResourceResponse&amp;, unsigned long identifier, CompletionHandler&lt;void(const ResourceResponse&amp;, RefPtr&lt;SharedBuffer&gt;)&gt;&amp;&amp;);</span>
<span class="line-added"> 237 </span>
 238     static void addMessageToConsole(Page&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 239     static void addMessageToConsole(WorkerGlobalScope&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 240 
<span class="line-modified"> 241     static void consoleCount(Page&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 242     static void consoleCount(WorkerGlobalScope&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 243     static void consoleCountReset(Page&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 244     static void consoleCountReset(WorkerGlobalScope&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
 245 
 246     static void takeHeapSnapshot(Frame&amp;, const String&amp; title);
<span class="line-modified"> 247     static void startConsoleTiming(Frame&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 248     static void startConsoleTiming(WorkerGlobalScope&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 249     static void logConsoleTiming(Frame&amp;, JSC::JSGlobalObject*, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);</span>
<span class="line-modified"> 250     static void logConsoleTiming(WorkerGlobalScope&amp;, JSC::JSGlobalObject*, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);</span>
<span class="line-modified"> 251     static void stopConsoleTiming(Frame&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 252     static void stopConsoleTiming(WorkerGlobalScope&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
 253     static void consoleTimeStamp(Frame&amp;, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
<span class="line-modified"> 254     static void startProfiling(Page&amp;, JSC::JSGlobalObject*, const String&amp; title);</span>
<span class="line-modified"> 255     static void stopProfiling(Page&amp;, JSC::JSGlobalObject*, const String&amp; title);</span>
<span class="line-modified"> 256     static void consoleStartRecordingCanvas(CanvasRenderingContext&amp;, JSC::JSGlobalObject&amp;, JSC::JSObject* options);</span>
<span class="line-added"> 257     static void consoleStopRecordingCanvas(CanvasRenderingContext&amp;);</span>
 258 
 259     static void didRequestAnimationFrame(Document&amp;, int callbackId);
 260     static void didCancelAnimationFrame(Document&amp;, int callbackId);
<span class="line-modified"> 261     static void willFireAnimationFrame(Document&amp;, int callbackId);</span>
<span class="line-modified"> 262     static void didFireAnimationFrame(Document&amp;);</span>
 263 
<span class="line-modified"> 264     static void willFireObserverCallback(ScriptExecutionContext&amp;, const String&amp; callbackType);</span>
<span class="line-modified"> 265     static void didFireObserverCallback(ScriptExecutionContext&amp;);</span>
 266 
 267     static void didOpenDatabase(Database&amp;);
 268 
 269     static void didDispatchDOMStorageEvent(Page&amp;, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType, SecurityOrigin*);
 270 
 271     static bool shouldWaitForDebuggerOnStart(ScriptExecutionContext&amp;);
 272     static void workerStarted(ScriptExecutionContext&amp;, WorkerInspectorProxy*, const URL&amp;);
 273     static void workerTerminated(ScriptExecutionContext&amp;, WorkerInspectorProxy*);
 274 
 275     static void didCreateWebSocket(Document*, unsigned long identifier, const URL&amp; requestURL);
 276     static void willSendWebSocketHandshakeRequest(Document*, unsigned long identifier, const ResourceRequest&amp;);
 277     static void didReceiveWebSocketHandshakeResponse(Document*, unsigned long identifier, const ResourceResponse&amp;);
 278     static void didCloseWebSocket(Document*, unsigned long identifier);
 279     static void didReceiveWebSocketFrame(Document*, unsigned long identifier, const WebSocketFrame&amp;);
 280     static void didSendWebSocketFrame(Document*, unsigned long identifier, const WebSocketFrame&amp;);
 281     static void didReceiveWebSocketFrameError(Document*, unsigned long identifier, const String&amp; errorMessage);
 282 
 283 #if ENABLE(RESOURCE_USAGE)
 284     static void didHandleMemoryPressure(Page&amp;, Critical);
 285 #endif
 286 
 287     static void didChangeCSSCanvasClientNodes(CanvasBase&amp;);
 288     static void didCreateCanvasRenderingContext(CanvasRenderingContext&amp;);
 289     static void didChangeCanvasMemory(CanvasRenderingContext&amp;);
 290     static void recordCanvasAction(CanvasRenderingContext&amp;, const String&amp;, std::initializer_list&lt;RecordCanvasActionVariant&gt;&amp;&amp; = { });
 291     static void didFinishRecordingCanvasFrame(CanvasRenderingContext&amp;, bool forceDispatch = false);
 292 #if ENABLE(WEBGL)
 293     static void didEnableExtension(WebGLRenderingContextBase&amp;, const String&amp;);
<span class="line-modified"> 294     static void didCreateWebGLProgram(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 295     static void willDestroyWebGLProgram(WebGLProgram&amp;);</span>
<span class="line-modified"> 296     static bool isWebGLProgramDisabled(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 297     static bool isWebGLProgramHighlighted(WebGLRenderingContextBase&amp;, WebGLProgram&amp;);</span>
<span class="line-added"> 298 #endif</span>
<span class="line-added"> 299 #if ENABLE(WEBGPU)</span>
<span class="line-added"> 300     static void didCreateWebGPUDevice(WebGPUDevice&amp;);</span>
<span class="line-added"> 301     static void willDestroyWebGPUDevice(WebGPUDevice&amp;);</span>
<span class="line-added"> 302     static void willConfigureSwapChain(GPUCanvasContext&amp;, WebGPUSwapChain&amp;);</span>
<span class="line-added"> 303     static void didCreateWebGPUPipeline(WebGPUDevice&amp;, WebGPUPipeline&amp;);</span>
<span class="line-added"> 304     static void willDestroyWebGPUPipeline(WebGPUPipeline&amp;);</span>
 305 #endif
 306 
<span class="line-added"> 307     static void willApplyKeyframeEffect(Element&amp;, KeyframeEffect&amp;, ComputedEffectTiming);</span>
<span class="line-added"> 308     static void didSetWebAnimationEffect(WebAnimation&amp;);</span>
<span class="line-added"> 309     static void didChangeWebAnimationEffectTiming(WebAnimation&amp;);</span>
<span class="line-added"> 310     static void didChangeWebAnimationEffectTarget(WebAnimation&amp;);</span>
<span class="line-added"> 311     static void didCreateWebAnimation(WebAnimation&amp;);</span>
<span class="line-added"> 312     static void willDestroyWebAnimation(WebAnimation&amp;);</span>
<span class="line-added"> 313 </span>
 314     static void networkStateChanged(Page&amp;);
 315     static void updateApplicationCacheStatus(Frame*);
 316 
 317     static void layerTreeDidChange(Page*);
 318     static void renderLayerDestroyed(Page*, const RenderLayer&amp;);
 319 
 320     static void frontendCreated();
 321     static void frontendDeleted();
<span class="line-modified"> 322     static bool hasFrontends() { return InspectorInstrumentationPublic::hasFrontends(); }</span>
 323 
 324     static void firstFrontendCreated();
 325     static void lastFrontendDeleted();
 326 
 327     static bool consoleAgentEnabled(ScriptExecutionContext*);
 328     static bool timelineAgentTracking(ScriptExecutionContext*);
 329 
 330     static InstrumentingAgents* instrumentingAgentsForPage(Page*);
 331 
 332     static void registerInstrumentingAgents(InstrumentingAgents&amp;);
 333     static void unregisterInstrumentingAgents(InstrumentingAgents&amp;);
 334 
 335 private:
 336     static void didClearWindowObjectInWorldImpl(InstrumentingAgents&amp;, Frame&amp;, DOMWrapperWorld&amp;);
 337     static bool isDebuggerPausedImpl(InstrumentingAgents&amp;);
 338 
 339     static int identifierForNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 340     static void addEventListenersToNodeImpl(InstrumentingAgents&amp;, Node&amp;);
 341     static void willInsertDOMNodeImpl(InstrumentingAgents&amp;, Node&amp; parent);
 342     static void didInsertDOMNodeImpl(InstrumentingAgents&amp;, Node&amp;);
</pre>
<hr />
<pre>
 356     static void willPopShadowRootImpl(InstrumentingAgents&amp;, Element&amp; host, ShadowRoot&amp;);
 357     static void didChangeCustomElementStateImpl(InstrumentingAgents&amp;, Element&amp;);
 358     static void pseudoElementCreatedImpl(InstrumentingAgents&amp;, PseudoElement&amp;);
 359     static void pseudoElementDestroyedImpl(InstrumentingAgents&amp;, PseudoElement&amp;);
 360     static void didCreateNamedFlowImpl(InstrumentingAgents&amp;, Document*, WebKitNamedFlow&amp;);
 361     static void willRemoveNamedFlowImpl(InstrumentingAgents&amp;, Document*, WebKitNamedFlow&amp;);
 362     static void didChangeRegionOversetImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;);
 363     static void didRegisterNamedFlowContentElementImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement, Node* nextContentElement = nullptr);
 364     static void didUnregisterNamedFlowContentElementImpl(InstrumentingAgents&amp;, Document&amp;, WebKitNamedFlow&amp;, Node&amp; contentElement);
 365 
 366     static void mouseDidMoveOverElementImpl(InstrumentingAgents&amp;, const HitTestResult&amp;, unsigned modifierFlags);
 367     static bool handleMousePressImpl(InstrumentingAgents&amp;);
 368     static bool handleTouchEventImpl(InstrumentingAgents&amp;, Node&amp;);
 369     static bool forcePseudoStateImpl(InstrumentingAgents&amp;, const Element&amp;, CSSSelector::PseudoClassType);
 370 
 371     static void willSendXMLHttpRequestImpl(InstrumentingAgents&amp;, const String&amp; url);
 372     static void willFetchImpl(InstrumentingAgents&amp;, const String&amp; url);
 373     static void didInstallTimerImpl(InstrumentingAgents&amp;, int timerId, Seconds timeout, bool singleShot, ScriptExecutionContext&amp;);
 374     static void didRemoveTimerImpl(InstrumentingAgents&amp;, int timerId, ScriptExecutionContext&amp;);
 375 
<span class="line-modified"> 376     static void didPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;, JSC::JSGlobalObject&amp;);</span>
 377     static void didFailPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 378     static void willDispatchPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 379     static void didDispatchPostMessageImpl(InstrumentingAgents&amp;, const TimerBase&amp;);
 380 
<span class="line-modified"> 381     static void willCallFunctionImpl(InstrumentingAgents&amp;, const String&amp; scriptName, int scriptLine, int scriptColumn, ScriptExecutionContext*);</span>
<span class="line-modified"> 382     static void didCallFunctionImpl(InstrumentingAgents&amp;, ScriptExecutionContext*);</span>
 383     static void didAddEventListenerImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 384     static void willRemoveEventListenerImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
 385     static bool isEventListenerDisabledImpl(InstrumentingAgents&amp;, EventTarget&amp;, const AtomString&amp; eventType, EventListener&amp;, bool capture);
<span class="line-modified"> 386     static void willDispatchEventImpl(InstrumentingAgents&amp;, Document&amp;, const Event&amp;);</span>
 387     static void willHandleEventImpl(InstrumentingAgents&amp;, Event&amp;, const RegisteredEventListener&amp;);
 388     static void didHandleEventImpl(InstrumentingAgents&amp;);
<span class="line-modified"> 389     static void didDispatchEventImpl(InstrumentingAgents&amp;, const Event&amp;);</span>
<span class="line-modified"> 390     static void willDispatchEventOnWindowImpl(InstrumentingAgents&amp;, const Event&amp;, DOMWindow&amp;);</span>
<span class="line-modified"> 391     static void didDispatchEventOnWindowImpl(InstrumentingAgents&amp;, const Event&amp;);</span>
 392     static void eventDidResetAfterDispatchImpl(InstrumentingAgents&amp;, const Event&amp;);
<span class="line-modified"> 393     static void willEvaluateScriptImpl(InstrumentingAgents&amp;, Frame&amp;, const String&amp; url, int lineNumber, int columnNumber);</span>
<span class="line-modified"> 394     static void didEvaluateScriptImpl(InstrumentingAgents&amp;, Frame&amp;);</span>
<span class="line-modified"> 395     static void willFireTimerImpl(InstrumentingAgents&amp;, int timerId, bool oneShot, ScriptExecutionContext&amp;);</span>
<span class="line-modified"> 396     static void didFireTimerImpl(InstrumentingAgents&amp;);</span>
 397     static void didInvalidateLayoutImpl(InstrumentingAgents&amp;, Frame&amp;);
<span class="line-modified"> 398     static void willLayoutImpl(InstrumentingAgents&amp;, Frame&amp;);</span>
<span class="line-modified"> 399     static void didLayoutImpl(InstrumentingAgents&amp;, RenderObject&amp;);</span>
 400     static void didScrollImpl(InstrumentingAgents&amp;);
 401     static void willCompositeImpl(InstrumentingAgents&amp;, Frame&amp;);
 402     static void didCompositeImpl(InstrumentingAgents&amp;);
 403     static void willPaintImpl(InstrumentingAgents&amp;, RenderObject&amp;);
 404     static void didPaintImpl(InstrumentingAgents&amp;, RenderObject&amp;, const LayoutRect&amp;);
<span class="line-modified"> 405     static void willRecalculateStyleImpl(InstrumentingAgents&amp;, Document&amp;);</span>
<span class="line-modified"> 406     static void didRecalculateStyleImpl(InstrumentingAgents&amp;);</span>
 407     static void didScheduleStyleRecalculationImpl(InstrumentingAgents&amp;, Document&amp;);
 408     static void applyUserAgentOverrideImpl(InstrumentingAgents&amp;, String&amp;);
 409     static void applyEmulatedMediaImpl(InstrumentingAgents&amp;, String&amp;);
 410 
 411     static void willSendRequestImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, const ResourceResponse&amp; redirectResponse);
 412     static void willSendRequestOfTypeImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, ResourceRequest&amp;, LoadType);
 413     static void markResourceAsCachedImpl(InstrumentingAgents&amp;, unsigned long identifier);
 414     static void didLoadResourceFromMemoryCacheImpl(InstrumentingAgents&amp;, DocumentLoader*, CachedResource*);
 415     static void didReceiveResourceResponseImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const ResourceResponse&amp;, ResourceLoader*);
 416     static void didReceiveThreadableLoaderResponseImpl(InstrumentingAgents&amp;, DocumentThreadableLoader&amp;, unsigned long identifier);
 417     static void didReceiveDataImpl(InstrumentingAgents&amp;, unsigned long identifier, const char* data, int dataLength, int encodedDataLength);
 418     static void didFinishLoadingImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const NetworkLoadMetrics&amp;, ResourceLoader*);
 419     static void didFailLoadingImpl(InstrumentingAgents&amp;, unsigned long identifier, DocumentLoader*, const ResourceError&amp;);
 420     static void willLoadXHRSynchronouslyImpl(InstrumentingAgents&amp;);
 421     static void didLoadXHRSynchronouslyImpl(InstrumentingAgents&amp;);
 422     static void scriptImportedImpl(InstrumentingAgents&amp;, unsigned long identifier, const String&amp; sourceString);
 423     static void scriptExecutionBlockedByCSPImpl(InstrumentingAgents&amp;, const String&amp; directiveText);
 424     static void didReceiveScriptResponseImpl(InstrumentingAgents&amp;, unsigned long identifier);
 425     static void domContentLoadedEventFiredImpl(InstrumentingAgents&amp;, Frame&amp;);
 426     static void loadEventFiredImpl(InstrumentingAgents&amp;, Frame*);
 427     static void frameDetachedFromParentImpl(InstrumentingAgents&amp;, Frame&amp;);
 428     static void didCommitLoadImpl(InstrumentingAgents&amp;, Frame&amp;, DocumentLoader*);
 429     static void frameDocumentUpdatedImpl(InstrumentingAgents&amp;, Frame&amp;);
 430     static void loaderDetachedFromFrameImpl(InstrumentingAgents&amp;, DocumentLoader&amp;);
 431     static void frameStartedLoadingImpl(InstrumentingAgents&amp;, Frame&amp;);
 432     static void frameStoppedLoadingImpl(InstrumentingAgents&amp;, Frame&amp;);
 433     static void frameScheduledNavigationImpl(InstrumentingAgents&amp;, Frame&amp;, Seconds delay);
 434     static void frameClearedScheduledNavigationImpl(InstrumentingAgents&amp;, Frame&amp;);
 435     static void defaultAppearanceDidChangeImpl(InstrumentingAgents&amp;, bool useDarkAppearance);
 436     static void willDestroyCachedResourceImpl(CachedResource&amp;);
 437 
<span class="line-added"> 438     static bool willInterceptRequestImpl(InstrumentingAgents&amp;, const ResourceRequest&amp;);</span>
<span class="line-added"> 439     static bool shouldInterceptResponseImpl(InstrumentingAgents&amp;, const ResourceResponse&amp;);</span>
<span class="line-added"> 440     static void interceptResponseImpl(InstrumentingAgents&amp;, const ResourceResponse&amp;, unsigned long identifier, CompletionHandler&lt;void(const ResourceResponse&amp;, RefPtr&lt;SharedBuffer&gt;)&gt;&amp;&amp;);</span>
<span class="line-added"> 441 </span>
 442     static void addMessageToConsoleImpl(InstrumentingAgents&amp;, std::unique_ptr&lt;Inspector::ConsoleMessage&gt;);
 443 
<span class="line-modified"> 444     static void consoleCountImpl(InstrumentingAgents&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 445     static void consoleCountResetImpl(InstrumentingAgents&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
 446     static void takeHeapSnapshotImpl(InstrumentingAgents&amp;, const String&amp; title);
<span class="line-modified"> 447     static void startConsoleTimingImpl(InstrumentingAgents&amp;, Frame&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 448     static void startConsoleTimingImpl(InstrumentingAgents&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 449     static void logConsoleTimingImpl(InstrumentingAgents&amp;, JSC::JSGlobalObject*, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);</span>
<span class="line-modified"> 450     static void stopConsoleTimingImpl(InstrumentingAgents&amp;, Frame&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
<span class="line-modified"> 451     static void stopConsoleTimingImpl(InstrumentingAgents&amp;, JSC::JSGlobalObject*, const String&amp; label);</span>
 452     static void consoleTimeStampImpl(InstrumentingAgents&amp;, Frame&amp;, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp;);
<span class="line-modified"> 453     static void startProfilingImpl(InstrumentingAgents&amp;, JSC::JSGlobalObject*, const String&amp; title);</span>
<span class="line-modified"> 454     static void stopProfilingImpl(InstrumentingAgents&amp;, JSC::JSGlobalObject*, const String&amp; title);</span>
<span class="line-modified"> 455     static void consoleStartRecordingCanvasImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, JSC::JSGlobalObject&amp;, JSC::JSObject* options);</span>
<span class="line-added"> 456     static void consoleStopRecordingCanvasImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;);</span>
 457 
 458     static void didRequestAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);
 459     static void didCancelAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);
<span class="line-modified"> 460     static void willFireAnimationFrameImpl(InstrumentingAgents&amp;, int callbackId, Document&amp;);</span>
<span class="line-modified"> 461     static void didFireAnimationFrameImpl(InstrumentingAgents&amp;);</span>
 462 
<span class="line-modified"> 463     static void willFireObserverCallbackImpl(InstrumentingAgents&amp;, const String&amp;, ScriptExecutionContext&amp;);</span>
<span class="line-modified"> 464     static void didFireObserverCallbackImpl(InstrumentingAgents&amp;);</span>
 465 
 466     static void didOpenDatabaseImpl(InstrumentingAgents&amp;, Database&amp;);
 467 
 468     static void didDispatchDOMStorageEventImpl(InstrumentingAgents&amp;, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType, SecurityOrigin*);
 469 
 470     static bool shouldWaitForDebuggerOnStartImpl(InstrumentingAgents&amp;);
 471     static void workerStartedImpl(InstrumentingAgents&amp;, WorkerInspectorProxy*, const URL&amp;);
 472     static void workerTerminatedImpl(InstrumentingAgents&amp;, WorkerInspectorProxy*);
 473 
 474     static void didCreateWebSocketImpl(InstrumentingAgents&amp;, unsigned long identifier, const URL&amp; requestURL);
 475     static void willSendWebSocketHandshakeRequestImpl(InstrumentingAgents&amp;, unsigned long identifier, const ResourceRequest&amp;);
 476     static void didReceiveWebSocketHandshakeResponseImpl(InstrumentingAgents&amp;, unsigned long identifier, const ResourceResponse&amp;);
 477     static void didCloseWebSocketImpl(InstrumentingAgents&amp;, unsigned long identifier);
 478     static void didReceiveWebSocketFrameImpl(InstrumentingAgents&amp;, unsigned long identifier, const WebSocketFrame&amp;);
 479     static void didSendWebSocketFrameImpl(InstrumentingAgents&amp;, unsigned long identifier, const WebSocketFrame&amp;);
 480     static void didReceiveWebSocketFrameErrorImpl(InstrumentingAgents&amp;, unsigned long identifier, const String&amp;);
 481 
 482 #if ENABLE(RESOURCE_USAGE)
 483     static void didHandleMemoryPressureImpl(InstrumentingAgents&amp;, Critical);
 484 #endif
 485 
 486     static void networkStateChangedImpl(InstrumentingAgents&amp;);
 487     static void updateApplicationCacheStatusImpl(InstrumentingAgents&amp;, Frame&amp;);
 488 
 489     static void didChangeCSSCanvasClientNodesImpl(InstrumentingAgents&amp;, CanvasBase&amp;);
 490     static void didCreateCanvasRenderingContextImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;);
 491     static void didChangeCanvasMemoryImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;);
 492     static void recordCanvasActionImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, const String&amp;, std::initializer_list&lt;RecordCanvasActionVariant&gt;&amp;&amp; = { });
 493     static void didFinishRecordingCanvasFrameImpl(InstrumentingAgents&amp;, CanvasRenderingContext&amp;, bool forceDispatch = false);
 494 #if ENABLE(WEBGL)
 495     static void didEnableExtensionImpl(InstrumentingAgents&amp;, WebGLRenderingContextBase&amp;, const String&amp;);
<span class="line-modified"> 496     static void didCreateWebGLProgramImpl(InstrumentingAgents&amp;, WebGLRenderingContextBase&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 497     static void willDestroyWebGLProgramImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 498     static bool isWebGLProgramDisabledImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);</span>
<span class="line-modified"> 499     static bool isWebGLProgramHighlightedImpl(InstrumentingAgents&amp;, WebGLProgram&amp;);</span>
<span class="line-added"> 500 #endif</span>
<span class="line-added"> 501 #if ENABLE(WEBGPU)</span>
<span class="line-added"> 502     static void didCreateWebGPUDeviceImpl(InstrumentingAgents&amp;, WebGPUDevice&amp;);</span>
<span class="line-added"> 503     static void willDestroyWebGPUDeviceImpl(InstrumentingAgents&amp;, WebGPUDevice&amp;);</span>
<span class="line-added"> 504     static void willConfigureSwapChainImpl(InstrumentingAgents&amp;, GPUCanvasContext&amp;, WebGPUSwapChain&amp;);</span>
<span class="line-added"> 505     static void didCreateWebGPUPipelineImpl(InstrumentingAgents&amp;, WebGPUDevice&amp;, WebGPUPipeline&amp;);</span>
<span class="line-added"> 506     static void willDestroyWebGPUPipelineImpl(InstrumentingAgents&amp;, WebGPUPipeline&amp;);</span>
<span class="line-added"> 507     static InstrumentingAgents* instrumentingAgentsForWebGPUDevice(WebGPUDevice&amp;);</span>
 508 #endif
 509 
<span class="line-added"> 510     static void willApplyKeyframeEffectImpl(InstrumentingAgents&amp;, Element&amp;, KeyframeEffect&amp;, ComputedEffectTiming);</span>
<span class="line-added"> 511     static void didSetWebAnimationEffectImpl(InstrumentingAgents&amp;, WebAnimation&amp;);</span>
<span class="line-added"> 512     static void didChangeWebAnimationEffectTimingImpl(InstrumentingAgents&amp;, WebAnimation&amp;);</span>
<span class="line-added"> 513     static void didChangeWebAnimationEffectTargetImpl(InstrumentingAgents&amp;, WebAnimation&amp;);</span>
<span class="line-added"> 514     static void didCreateWebAnimationImpl(InstrumentingAgents&amp;, WebAnimation&amp;);</span>
<span class="line-added"> 515     static void willDestroyWebAnimationImpl(InstrumentingAgents&amp;, WebAnimation&amp;);</span>
<span class="line-added"> 516 </span>
 517     static void layerTreeDidChangeImpl(InstrumentingAgents&amp;);
 518     static void renderLayerDestroyedImpl(InstrumentingAgents&amp;, const RenderLayer&amp;);
 519 
 520     static InstrumentingAgents&amp; instrumentingAgentsForPage(Page&amp;);
 521     static InstrumentingAgents&amp; instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope&amp;);
 522 
<span class="line-modified"> 523     static InstrumentingAgents* instrumentingAgentsForFrame(const Frame&amp;);</span>
<span class="line-modified"> 524     static InstrumentingAgents* instrumentingAgentsForFrame(const Frame*);</span>
 525     static InstrumentingAgents* instrumentingAgentsForContext(ScriptExecutionContext*);
 526     static InstrumentingAgents* instrumentingAgentsForContext(ScriptExecutionContext&amp;);
 527     static InstrumentingAgents* instrumentingAgentsForDocument(Document&amp;);
 528     static InstrumentingAgents* instrumentingAgentsForDocument(Document*);
 529     static InstrumentingAgents* instrumentingAgentsForRenderer(RenderObject&amp;);
 530     static InstrumentingAgents* instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope*);




 531 };
 532 
 533 inline void InspectorInstrumentation::didClearWindowObjectInWorld(Frame&amp; frame, DOMWrapperWorld&amp; world)
 534 {
 535     FAST_RETURN_IF_NO_FRONTENDS(void());
 536     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 537         didClearWindowObjectInWorldImpl(*instrumentingAgents, frame, world);
 538 }
 539 
 540 inline bool InspectorInstrumentation::isDebuggerPaused(Frame* frame)
 541 {
 542     FAST_RETURN_IF_NO_FRONTENDS(false);
 543     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 544         return isDebuggerPausedImpl(*instrumentingAgents);
 545     return false;
 546 }
 547 
 548 inline int InspectorInstrumentation::identifierForNode(Node&amp; node)
 549 {
 550     FAST_RETURN_IF_NO_FRONTENDS(0);
</pre>
<hr />
<pre>
 790     FAST_RETURN_IF_NO_FRONTENDS(void());
 791     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 792         didAddEventListenerImpl(*instrumentingAgents, target, eventType, listener, capture);
 793 }
 794 
 795 inline void InspectorInstrumentation::willRemoveEventListener(EventTarget&amp; target, const AtomString&amp; eventType, EventListener&amp; listener, bool capture)
 796 {
 797     FAST_RETURN_IF_NO_FRONTENDS(void());
 798     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 799         willRemoveEventListenerImpl(*instrumentingAgents, target, eventType, listener, capture);
 800 }
 801 
 802 inline bool InspectorInstrumentation::isEventListenerDisabled(EventTarget&amp; target, const AtomString&amp; eventType, EventListener&amp; listener, bool capture)
 803 {
 804     FAST_RETURN_IF_NO_FRONTENDS(false);
 805     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(target.scriptExecutionContext()))
 806         return isEventListenerDisabledImpl(*instrumentingAgents, target, eventType, listener, capture);
 807     return false;
 808 }
 809 
<span class="line-modified"> 810 inline void InspectorInstrumentation::didPostMessage(Frame&amp; frame, TimerBase&amp; timer, JSC::JSGlobalObject&amp; state)</span>
 811 {
 812     FAST_RETURN_IF_NO_FRONTENDS(void());
 813     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 814         didPostMessageImpl(*instrumentingAgents, timer, state);
 815 }
 816 
 817 inline void InspectorInstrumentation::didFailPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 818 {
 819     FAST_RETURN_IF_NO_FRONTENDS(void());
 820     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 821         didFailPostMessageImpl(*instrumentingAgents, timer);
 822 }
 823 
 824 inline void InspectorInstrumentation::willDispatchPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 825 {
 826     FAST_RETURN_IF_NO_FRONTENDS(void());
 827     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 828         willDispatchPostMessageImpl(*instrumentingAgents, timer);
 829 }
 830 
 831 inline void InspectorInstrumentation::didDispatchPostMessage(Frame&amp; frame, TimerBase&amp; timer)
 832 {
 833     FAST_RETURN_IF_NO_FRONTENDS(void());
 834     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 835         didDispatchPostMessageImpl(*instrumentingAgents, timer);
 836 }
 837 
<span class="line-modified"> 838 inline void InspectorInstrumentation::willCallFunction(ScriptExecutionContext* context, const String&amp; scriptName, int scriptLine, int scriptColumn)</span>
 839 {
<span class="line-modified"> 840     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified"> 841     if (auto* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified"> 842         willCallFunctionImpl(*instrumentingAgents, scriptName, scriptLine, scriptColumn, context);</span>

 843 }
 844 
<span class="line-modified"> 845 inline void InspectorInstrumentation::didCallFunction(ScriptExecutionContext* context)</span>
 846 {
 847     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified"> 848     if (auto* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified"> 849         didCallFunctionImpl(*instrumentingAgents, context);</span>
 850 }
 851 
<span class="line-modified"> 852 inline void InspectorInstrumentation::willDispatchEvent(Document&amp; document, const Event&amp; event)</span>
 853 {
<span class="line-modified"> 854     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified"> 855     if (auto* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified"> 856         willDispatchEventImpl(*instrumentingAgents, document, event);</span>

 857 }
 858 
<span class="line-modified"> 859 inline void InspectorInstrumentation::didDispatchEvent(Document&amp; document, const Event&amp; event)</span>
 860 {
 861     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified"> 862     if (auto* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified"> 863         didDispatchEventImpl(*instrumentingAgents, event);</span>
 864 }
 865 
 866 inline void InspectorInstrumentation::willHandleEvent(ScriptExecutionContext&amp; context, Event&amp; event, const RegisteredEventListener&amp; listener)
 867 {
 868     FAST_RETURN_IF_NO_FRONTENDS(void());
 869     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 870         return willHandleEventImpl(*instrumentingAgents, event, listener);
 871 }
 872 
 873 inline void InspectorInstrumentation::didHandleEvent(ScriptExecutionContext&amp; context)
 874 {
 875     FAST_RETURN_IF_NO_FRONTENDS(void());
 876     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
 877         return didHandleEventImpl(*instrumentingAgents);
 878 }
 879 
<span class="line-modified"> 880 inline void InspectorInstrumentation::willDispatchEventOnWindow(Frame* frame, const Event&amp; event, DOMWindow&amp; window)</span>
 881 {
<span class="line-modified"> 882     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified"> 883     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 884         willDispatchEventOnWindowImpl(*instrumentingAgents, event, window);</span>

 885 }
 886 
<span class="line-modified"> 887 inline void InspectorInstrumentation::didDispatchEventOnWindow(Frame* frame, const Event&amp; event)</span>
 888 {
 889     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified"> 890     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 891         didDispatchEventOnWindowImpl(*instrumentingAgents, event);</span>
 892 }
 893 
 894 inline void InspectorInstrumentation::eventDidResetAfterDispatch(const Event&amp; event)
 895 {
 896     FAST_RETURN_IF_NO_FRONTENDS(void());
 897 
 898     if (!is&lt;Node&gt;(event.target()))
 899         return;
 900 
 901     auto* node = downcast&lt;Node&gt;(event.target());
 902     if (auto* instrumentingAgents = instrumentingAgentsForContext(node-&gt;scriptExecutionContext()))
 903         return eventDidResetAfterDispatchImpl(*instrumentingAgents, event);
 904 }
 905 
<span class="line-modified"> 906 inline void InspectorInstrumentation::willEvaluateScript(Frame&amp; frame, const String&amp; url, int lineNumber, int columnNumber)</span>
 907 {
<span class="line-modified"> 908     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified"> 909     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 910         willEvaluateScriptImpl(*instrumentingAgents, frame, url, lineNumber, columnNumber);</span>

 911 }
 912 
<span class="line-modified"> 913 inline void InspectorInstrumentation::didEvaluateScript(Frame&amp; frame)</span>
 914 {
 915     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified"> 916     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 917         didEvaluateScriptImpl(*instrumentingAgents, frame);</span>
 918 }
 919 
<span class="line-modified"> 920 inline void InspectorInstrumentation::willFireTimer(ScriptExecutionContext&amp; context, int timerId, bool oneShot)</span>
 921 {
<span class="line-modified"> 922     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified"> 923     if (auto* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified"> 924         willFireTimerImpl(*instrumentingAgents, timerId, oneShot, context);</span>

 925 }
 926 
<span class="line-modified"> 927 inline void InspectorInstrumentation::didFireTimer(ScriptExecutionContext&amp; context)</span>
 928 {
 929     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified"> 930     if (auto* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified"> 931         didFireTimerImpl(*instrumentingAgents);</span>
 932 }
 933 
 934 inline void InspectorInstrumentation::didInvalidateLayout(Frame&amp; frame)
 935 {
 936     FAST_RETURN_IF_NO_FRONTENDS(void());
 937     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 938         didInvalidateLayoutImpl(*instrumentingAgents, frame);
 939 }
 940 
<span class="line-modified"> 941 inline void InspectorInstrumentation::willLayout(Frame&amp; frame)</span>
 942 {
<span class="line-modified"> 943     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified"> 944     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 945         willLayoutImpl(*instrumentingAgents, frame);</span>

 946 }
 947 
<span class="line-modified"> 948 inline void InspectorInstrumentation::didLayout(Frame&amp; frame, RenderObject&amp; root)</span>
 949 {
 950     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified"> 951     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-modified"> 952         didLayoutImpl(*instrumentingAgents, root);</span>
 953 }
 954 
 955 inline void InspectorInstrumentation::didScroll(Page&amp; page)
 956 {
 957     FAST_RETURN_IF_NO_FRONTENDS(void());
 958     didScrollImpl(instrumentingAgentsForPage(page));
 959 }
 960 
 961 inline void InspectorInstrumentation::willComposite(Frame&amp; frame)
 962 {
 963     FAST_RETURN_IF_NO_FRONTENDS(void());
 964     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 965         willCompositeImpl(*instrumentingAgents, frame);
 966 }
 967 
 968 inline void InspectorInstrumentation::didComposite(Frame&amp; frame)
 969 {
 970     FAST_RETURN_IF_NO_FRONTENDS(void());
 971     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
 972         didCompositeImpl(*instrumentingAgents);
 973 }
 974 
 975 inline void InspectorInstrumentation::willPaint(RenderObject&amp; renderer)
 976 {
 977     FAST_RETURN_IF_NO_FRONTENDS(void());
 978     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForRenderer(renderer))
 979         return willPaintImpl(*instrumentingAgents, renderer);
 980 }
 981 
 982 inline void InspectorInstrumentation::didPaint(RenderObject&amp; renderer, const LayoutRect&amp; rect)
 983 {
 984     FAST_RETURN_IF_NO_FRONTENDS(void());
 985     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForRenderer(renderer))
 986         didPaintImpl(*instrumentingAgents, renderer, rect);
 987 }
 988 
<span class="line-modified"> 989 inline void InspectorInstrumentation::willRecalculateStyle(Document&amp; document)</span>
 990 {
<span class="line-modified"> 991     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified"> 992     if (auto* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified"> 993         willRecalculateStyleImpl(*instrumentingAgents, document);</span>

 994 }
 995 
<span class="line-modified"> 996 inline void InspectorInstrumentation::didRecalculateStyle(Document&amp; document)</span>
 997 {
 998     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified"> 999     if (auto* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified">1000         didRecalculateStyleImpl(*instrumentingAgents);</span>
1001 }
1002 
1003 inline void InspectorInstrumentation::didScheduleStyleRecalculation(Document&amp; document)
1004 {
1005     FAST_RETURN_IF_NO_FRONTENDS(void());
1006     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1007         didScheduleStyleRecalculationImpl(*instrumentingAgents, document);
1008 }
1009 
1010 inline void InspectorInstrumentation::applyUserAgentOverride(Frame&amp; frame, String&amp; userAgent)
1011 {
1012     FAST_RETURN_IF_NO_FRONTENDS(void());
1013     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1014         applyUserAgentOverrideImpl(*instrumentingAgents, userAgent);
1015 }
1016 
1017 inline void InspectorInstrumentation::applyEmulatedMedia(Frame&amp; frame, String&amp; media)
1018 {
1019     FAST_RETURN_IF_NO_FRONTENDS(void());
1020     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
</pre>
<hr />
<pre>
1222 
1223 inline void InspectorInstrumentation::frameClearedScheduledNavigation(Frame&amp; frame)
1224 {
1225     FAST_RETURN_IF_NO_FRONTENDS(void());
1226     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1227         frameClearedScheduledNavigationImpl(*instrumentingAgents, frame);
1228 }
1229 
1230 inline void InspectorInstrumentation::defaultAppearanceDidChange(Page&amp; page, bool useDarkAppearance)
1231 {
1232     FAST_RETURN_IF_NO_FRONTENDS(void());
1233     defaultAppearanceDidChangeImpl(instrumentingAgentsForPage(page), useDarkAppearance);
1234 }
1235 
1236 inline void InspectorInstrumentation::willDestroyCachedResource(CachedResource&amp; cachedResource)
1237 {
1238     FAST_RETURN_IF_NO_FRONTENDS(void());
1239     willDestroyCachedResourceImpl(cachedResource);
1240 }
1241 
<span class="line-added">1242 inline bool InspectorInstrumentation::willInterceptRequest(const Frame* frame, const ResourceRequest&amp; request)</span>
<span class="line-added">1243 {</span>
<span class="line-added">1244     FAST_RETURN_IF_NO_FRONTENDS(false);</span>
<span class="line-added">1245     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-added">1246         return willInterceptRequestImpl(*instrumentingAgents, request);</span>
<span class="line-added">1247     return false;</span>
<span class="line-added">1248 }</span>
<span class="line-added">1249 </span>
<span class="line-added">1250 inline bool InspectorInstrumentation::shouldInterceptResponse(const Frame&amp; frame, const ResourceResponse&amp; response)</span>
<span class="line-added">1251 {</span>
<span class="line-added">1252     ASSERT(InspectorInstrumentationPublic::hasFrontends());</span>
<span class="line-added">1253     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-added">1254         return shouldInterceptResponseImpl(*instrumentingAgents, response);</span>
<span class="line-added">1255     return false;</span>
<span class="line-added">1256 }</span>
<span class="line-added">1257 </span>
<span class="line-added">1258 inline void InspectorInstrumentation::interceptResponse(const Frame&amp; frame, const ResourceResponse&amp; response, unsigned long identifier, CompletionHandler&lt;void(const ResourceResponse&amp;, RefPtr&lt;SharedBuffer&gt;)&gt;&amp;&amp; handler)</span>
<span class="line-added">1259 {</span>
<span class="line-added">1260     ASSERT(InspectorInstrumentation::shouldInterceptResponse(frame, response));</span>
<span class="line-added">1261     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))</span>
<span class="line-added">1262         interceptResponseImpl(*instrumentingAgents, response, identifier, WTFMove(handler));</span>
<span class="line-added">1263 }</span>
<span class="line-added">1264 </span>
1265 inline void InspectorInstrumentation::didOpenDatabase(Database&amp; database)
1266 {
1267     FAST_RETURN_IF_NO_FRONTENDS(void());
1268     if (auto* instrumentingAgents = instrumentingAgentsForContext(database.document()))
1269         didOpenDatabaseImpl(*instrumentingAgents, database);
1270 }
1271 
1272 inline void InspectorInstrumentation::didDispatchDOMStorageEvent(Page&amp; page, const String&amp; key, const String&amp; oldValue, const String&amp; newValue, StorageType storageType, SecurityOrigin* securityOrigin)
1273 {
1274     FAST_RETURN_IF_NO_FRONTENDS(void());
1275     didDispatchDOMStorageEventImpl(instrumentingAgentsForPage(page), key, oldValue, newValue, storageType, securityOrigin);
1276 }
1277 
1278 inline bool InspectorInstrumentation::shouldWaitForDebuggerOnStart(ScriptExecutionContext&amp; context)
1279 {
1280     FAST_RETURN_IF_NO_FRONTENDS(false);
1281     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context))
1282         return shouldWaitForDebuggerOnStartImpl(*instrumentingAgents);
1283     return false;
1284 }
</pre>
<hr />
<pre>
1380     FAST_RETURN_IF_NO_FRONTENDS(void());
1381     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1382         recordCanvasActionImpl(*instrumentingAgents, context, name, WTFMove(parameters));
1383 }
1384 
1385 inline void InspectorInstrumentation::didFinishRecordingCanvasFrame(CanvasRenderingContext&amp; context, bool forceDispatch)
1386 {
1387     FAST_RETURN_IF_NO_FRONTENDS(void());
1388     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1389         didFinishRecordingCanvasFrameImpl(*instrumentingAgents, context, forceDispatch);
1390 }
1391 
1392 #if ENABLE(WEBGL)
1393 inline void InspectorInstrumentation::didEnableExtension(WebGLRenderingContextBase&amp; contextWebGLBase, const String&amp; extension)
1394 {
1395     FAST_RETURN_IF_NO_FRONTENDS(void());
1396     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
1397         didEnableExtensionImpl(*instrumentingAgents, contextWebGLBase, extension);
1398 }
1399 
<span class="line-modified">1400 inline void InspectorInstrumentation::didCreateWebGLProgram(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)</span>
1401 {
1402     FAST_RETURN_IF_NO_FRONTENDS(void());
1403     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
<span class="line-modified">1404         didCreateWebGLProgramImpl(*instrumentingAgents, contextWebGLBase, program);</span>
1405 }
1406 
<span class="line-modified">1407 inline void InspectorInstrumentation::willDestroyWebGLProgram(WebGLProgram&amp; program)</span>
1408 {
1409     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified">1410     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(program.scriptExecutionContext()))</span>
<span class="line-modified">1411         willDestroyWebGLProgramImpl(*instrumentingAgents, program);</span>
1412 }
1413 
<span class="line-modified">1414 inline bool InspectorInstrumentation::isWebGLProgramDisabled(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)</span>
1415 {
1416     FAST_RETURN_IF_NO_FRONTENDS(false);
1417     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
<span class="line-modified">1418         return isWebGLProgramDisabledImpl(*instrumentingAgents, program);</span>
1419     return false;
1420 }
1421 
<span class="line-modified">1422 inline bool InspectorInstrumentation::isWebGLProgramHighlighted(WebGLRenderingContextBase&amp; contextWebGLBase, WebGLProgram&amp; program)</span>
1423 {
1424     FAST_RETURN_IF_NO_FRONTENDS(false);
1425     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(contextWebGLBase.canvasBase().scriptExecutionContext()))
<span class="line-modified">1426         return isWebGLProgramHighlightedImpl(*instrumentingAgents, program);</span>
1427     return false;
1428 }
1429 #endif
1430 
<span class="line-added">1431 #if ENABLE(WEBGPU)</span>
<span class="line-added">1432 inline void InspectorInstrumentation::didCreateWebGPUDevice(WebGPUDevice&amp; device)</span>
<span class="line-added">1433 {</span>
<span class="line-added">1434     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1435     if (auto* instrumentingAgents = instrumentingAgentsForWebGPUDevice(device))</span>
<span class="line-added">1436         didCreateWebGPUDeviceImpl(*instrumentingAgents, device);</span>
<span class="line-added">1437 }</span>
<span class="line-added">1438 </span>
<span class="line-added">1439 inline void InspectorInstrumentation::willDestroyWebGPUDevice(WebGPUDevice&amp; device)</span>
<span class="line-added">1440 {</span>
<span class="line-added">1441     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1442     if (auto* instrumentingAgents = instrumentingAgentsForWebGPUDevice(device))</span>
<span class="line-added">1443         willDestroyWebGPUDeviceImpl(*instrumentingAgents, device);</span>
<span class="line-added">1444 }</span>
<span class="line-added">1445 </span>
<span class="line-added">1446 inline void InspectorInstrumentation::willConfigureSwapChain(GPUCanvasContext&amp; contextGPU, WebGPUSwapChain&amp; newSwapChain)</span>
<span class="line-added">1447 {</span>
<span class="line-added">1448     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1449     if (auto* instrumentingAgents = instrumentingAgentsForContext(contextGPU.canvasBase().scriptExecutionContext()))</span>
<span class="line-added">1450         willConfigureSwapChainImpl(*instrumentingAgents, contextGPU, newSwapChain);</span>
<span class="line-added">1451 }</span>
<span class="line-added">1452 </span>
<span class="line-added">1453 inline void InspectorInstrumentation::didCreateWebGPUPipeline(WebGPUDevice&amp; device, WebGPUPipeline&amp; pipeline)</span>
<span class="line-added">1454 {</span>
<span class="line-added">1455     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1456     if (auto* instrumentingAgents = instrumentingAgentsForWebGPUDevice(device))</span>
<span class="line-added">1457         didCreateWebGPUPipelineImpl(*instrumentingAgents, device, pipeline);</span>
<span class="line-added">1458 }</span>
<span class="line-added">1459 </span>
<span class="line-added">1460 inline void InspectorInstrumentation::willDestroyWebGPUPipeline(WebGPUPipeline&amp; pipeline)</span>
<span class="line-added">1461 {</span>
<span class="line-added">1462     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1463     if (auto* instrumentingAgents = instrumentingAgentsForContext(pipeline.scriptExecutionContext()))</span>
<span class="line-added">1464         willDestroyWebGPUPipelineImpl(*instrumentingAgents, pipeline);</span>
<span class="line-added">1465 }</span>
<span class="line-added">1466 #endif</span>
<span class="line-added">1467 </span>
<span class="line-added">1468 inline void InspectorInstrumentation::willApplyKeyframeEffect(Element&amp; target, KeyframeEffect&amp; effect, ComputedEffectTiming computedTiming)</span>
<span class="line-added">1469 {</span>
<span class="line-added">1470     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1471     if (auto* instrumentingAgents = instrumentingAgentsForDocument(target.document()))</span>
<span class="line-added">1472         willApplyKeyframeEffectImpl(*instrumentingAgents, target, effect, computedTiming);</span>
<span class="line-added">1473 }</span>
<span class="line-added">1474 </span>
<span class="line-added">1475 inline void InspectorInstrumentation::didSetWebAnimationEffect(WebAnimation&amp; animation)</span>
<span class="line-added">1476 {</span>
<span class="line-added">1477     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1478     if (auto* instrumentingAgents = instrumentingAgentsForContext(animation.scriptExecutionContext()))</span>
<span class="line-added">1479         didSetWebAnimationEffectImpl(*instrumentingAgents, animation);</span>
<span class="line-added">1480 }</span>
<span class="line-added">1481 </span>
<span class="line-added">1482 inline void InspectorInstrumentation::didChangeWebAnimationEffectTiming(WebAnimation&amp; animation)</span>
<span class="line-added">1483 {</span>
<span class="line-added">1484     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1485     if (auto* instrumentingAgents = instrumentingAgentsForContext(animation.scriptExecutionContext()))</span>
<span class="line-added">1486         didChangeWebAnimationEffectTimingImpl(*instrumentingAgents, animation);</span>
<span class="line-added">1487 }</span>
<span class="line-added">1488 </span>
<span class="line-added">1489 inline void InspectorInstrumentation::didChangeWebAnimationEffectTarget(WebAnimation&amp; animation)</span>
<span class="line-added">1490 {</span>
<span class="line-added">1491     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1492     if (auto* instrumentingAgents = instrumentingAgentsForContext(animation.scriptExecutionContext()))</span>
<span class="line-added">1493         didChangeWebAnimationEffectTargetImpl(*instrumentingAgents, animation);</span>
<span class="line-added">1494 }</span>
<span class="line-added">1495 </span>
<span class="line-added">1496 inline void InspectorInstrumentation::didCreateWebAnimation(WebAnimation&amp; animation)</span>
<span class="line-added">1497 {</span>
<span class="line-added">1498     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1499     if (auto* instrumentingAgents = instrumentingAgentsForContext(animation.scriptExecutionContext()))</span>
<span class="line-added">1500         didCreateWebAnimationImpl(*instrumentingAgents, animation);</span>
<span class="line-added">1501 }</span>
<span class="line-added">1502 </span>
<span class="line-added">1503 inline void InspectorInstrumentation::willDestroyWebAnimation(WebAnimation&amp; animation)</span>
<span class="line-added">1504 {</span>
<span class="line-added">1505     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-added">1506     if (auto* instrumentingAgents = instrumentingAgentsForContext(animation.scriptExecutionContext()))</span>
<span class="line-added">1507         willDestroyWebAnimationImpl(*instrumentingAgents, animation);</span>
<span class="line-added">1508 }</span>
<span class="line-added">1509 </span>
1510 inline void InspectorInstrumentation::networkStateChanged(Page&amp; page)
1511 {
1512     FAST_RETURN_IF_NO_FRONTENDS(void());
1513     networkStateChangedImpl(instrumentingAgentsForPage(page));
1514 }
1515 
1516 inline void InspectorInstrumentation::updateApplicationCacheStatus(Frame* frame)
1517 {
1518     FAST_RETURN_IF_NO_FRONTENDS(void());
1519     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1520         updateApplicationCacheStatusImpl(*instrumentingAgents, *frame);
1521 }
1522 
1523 inline void InspectorInstrumentation::addMessageToConsole(Page&amp; page, std::unique_ptr&lt;Inspector::ConsoleMessage&gt; message)
1524 {
1525     addMessageToConsoleImpl(instrumentingAgentsForPage(page), WTFMove(message));
1526 }
1527 
1528 inline void InspectorInstrumentation::addMessageToConsole(WorkerGlobalScope&amp; workerGlobalScope, std::unique_ptr&lt;Inspector::ConsoleMessage&gt; message)
1529 {
1530     addMessageToConsoleImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), WTFMove(message));
1531 }
1532 
<span class="line-modified">1533 inline void InspectorInstrumentation::consoleCount(Page&amp; page, JSC::JSGlobalObject* state, const String&amp; label)</span>
1534 {
1535     consoleCountImpl(instrumentingAgentsForPage(page), state, label);
1536 }
1537 
<span class="line-modified">1538 inline void InspectorInstrumentation::consoleCount(WorkerGlobalScope&amp; workerGlobalScope, JSC::JSGlobalObject* state, const String&amp; label)</span>
1539 {
1540     consoleCountImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), state, label);
1541 }
1542 
<span class="line-modified">1543 inline void InspectorInstrumentation::consoleCountReset(Page&amp; page, JSC::JSGlobalObject* state, const String&amp; label)</span>
1544 {
1545     consoleCountResetImpl(instrumentingAgentsForPage(page), state, label);
1546 }
1547 
<span class="line-modified">1548 inline void InspectorInstrumentation::consoleCountReset(WorkerGlobalScope&amp; workerGlobalScope, JSC::JSGlobalObject* state, const String&amp; label)</span>
1549 {
1550     consoleCountResetImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), state, label);
1551 }
1552 
1553 inline void InspectorInstrumentation::takeHeapSnapshot(Frame&amp; frame, const String&amp; title)
1554 {
1555     FAST_RETURN_IF_NO_FRONTENDS(void());
1556     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1557         takeHeapSnapshotImpl(*instrumentingAgents, title);
1558 }
1559 
<span class="line-modified">1560 inline void InspectorInstrumentation::startConsoleTiming(Frame&amp; frame, JSC::JSGlobalObject* exec, const String&amp; label)</span>
1561 {
1562     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1563         startConsoleTimingImpl(*instrumentingAgents, frame, exec, label);
1564 }
1565 
<span class="line-modified">1566 inline void InspectorInstrumentation::startConsoleTiming(WorkerGlobalScope&amp; workerGlobalScope, JSC::JSGlobalObject* exec, const String&amp; label)</span>
1567 {
1568     startConsoleTimingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), exec, label);
1569 }
1570 
<span class="line-modified">1571 inline void InspectorInstrumentation::logConsoleTiming(Frame&amp; frame, JSC::JSGlobalObject* exec, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)</span>
1572 {
1573     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1574         logConsoleTimingImpl(*instrumentingAgents, exec, label, WTFMove(arguments));
1575 }
1576 
<span class="line-modified">1577 inline void InspectorInstrumentation::logConsoleTiming(WorkerGlobalScope&amp; workerGlobalScope, JSC::JSGlobalObject* exec, const String&amp; label, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)</span>
1578 {
1579     logConsoleTimingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), exec, label, WTFMove(arguments));
1580 }
1581 
<span class="line-modified">1582 inline void InspectorInstrumentation::stopConsoleTiming(Frame&amp; frame, JSC::JSGlobalObject* exec, const String&amp; label)</span>
1583 {
1584     if (auto* instrumentingAgents = instrumentingAgentsForFrame(frame))
1585         stopConsoleTimingImpl(*instrumentingAgents, frame, exec, label);
1586 }
1587 
<span class="line-modified">1588 inline void InspectorInstrumentation::stopConsoleTiming(WorkerGlobalScope&amp; workerGlobalScope, JSC::JSGlobalObject* exec, const String&amp; label)</span>
1589 {
1590     stopConsoleTimingImpl(instrumentingAgentsForWorkerGlobalScope(workerGlobalScope), exec, label);
1591 }
1592 
1593 inline void InspectorInstrumentation::consoleTimeStamp(Frame&amp; frame, Ref&lt;Inspector::ScriptArguments&gt;&amp;&amp; arguments)
1594 {
1595     FAST_RETURN_IF_NO_FRONTENDS(void());
1596     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForFrame(frame))
1597         consoleTimeStampImpl(*instrumentingAgents, frame, WTFMove(arguments));
1598 }
1599 
<span class="line-modified">1600 inline void InspectorInstrumentation::startProfiling(Page&amp; page, JSC::JSGlobalObject* exec, const String &amp;title)</span>
1601 {
1602     FAST_RETURN_IF_NO_FRONTENDS(void());
1603     startProfilingImpl(instrumentingAgentsForPage(page), exec, title);
1604 }
1605 
<span class="line-modified">1606 inline void InspectorInstrumentation::stopProfiling(Page&amp; page, JSC::JSGlobalObject* exec, const String &amp;title)</span>
1607 {
1608     FAST_RETURN_IF_NO_FRONTENDS(void());
1609     stopProfilingImpl(instrumentingAgentsForPage(page), exec, title);
1610 }
1611 
<span class="line-modified">1612 inline void InspectorInstrumentation::consoleStartRecordingCanvas(CanvasRenderingContext&amp; context, JSC::JSGlobalObject&amp; exec, JSC::JSObject* options)</span>
1613 {

1614     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))
1615         consoleStartRecordingCanvasImpl(*instrumentingAgents, context, exec, options);
1616 }
1617 
<span class="line-added">1618 inline void InspectorInstrumentation::consoleStopRecordingCanvas(CanvasRenderingContext&amp; context)</span>
<span class="line-added">1619 {</span>
<span class="line-added">1620     if (auto* instrumentingAgents = instrumentingAgentsForContext(context.canvasBase().scriptExecutionContext()))</span>
<span class="line-added">1621         consoleStopRecordingCanvasImpl(*instrumentingAgents, context);</span>
<span class="line-added">1622 }</span>
<span class="line-added">1623 </span>
1624 inline void InspectorInstrumentation::didRequestAnimationFrame(Document&amp; document, int callbackId)
1625 {
1626     FAST_RETURN_IF_NO_FRONTENDS(void());
1627     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1628         didRequestAnimationFrameImpl(*instrumentingAgents, callbackId, document);
1629 }
1630 
1631 inline void InspectorInstrumentation::didCancelAnimationFrame(Document&amp; document, int callbackId)
1632 {
1633     FAST_RETURN_IF_NO_FRONTENDS(void());
1634     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForDocument(document))
1635         didCancelAnimationFrameImpl(*instrumentingAgents, callbackId, document);
1636 }
1637 
<span class="line-modified">1638 inline void InspectorInstrumentation::willFireAnimationFrame(Document&amp; document, int callbackId)</span>
1639 {
<span class="line-modified">1640     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified">1641     if (auto* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified">1642         willFireAnimationFrameImpl(*instrumentingAgents, callbackId, document);</span>

1643 }
1644 
<span class="line-modified">1645 inline void InspectorInstrumentation::didFireAnimationFrame(Document&amp; document)</span>
1646 {
1647     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified">1648     if (auto* instrumentingAgents = instrumentingAgentsForDocument(document))</span>
<span class="line-modified">1649         didFireAnimationFrameImpl(*instrumentingAgents);</span>
1650 }
1651 
<span class="line-modified">1652 inline void InspectorInstrumentation::willFireObserverCallback(ScriptExecutionContext&amp; context, const String&amp; callbackType)</span>
1653 {
<span class="line-modified">1654     FAST_RETURN_IF_NO_FRONTENDS(void());</span>
<span class="line-modified">1655     if (auto* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified">1656         willFireObserverCallbackImpl(*instrumentingAgents, callbackType, context);</span>

1657 }
1658 
<span class="line-modified">1659 inline void InspectorInstrumentation::didFireObserverCallback(ScriptExecutionContext&amp; context)</span>
1660 {
1661     FAST_RETURN_IF_NO_FRONTENDS(void());
<span class="line-modified">1662     if (auto* instrumentingAgents = instrumentingAgentsForContext(context))</span>
<span class="line-modified">1663         didFireObserverCallbackImpl(*instrumentingAgents);</span>
1664 }
1665 
1666 inline void InspectorInstrumentation::layerTreeDidChange(Page* page)
1667 {
1668     FAST_RETURN_IF_NO_FRONTENDS(void());
1669     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
1670         layerTreeDidChangeImpl(*instrumentingAgents);
1671 }
1672 
1673 inline void InspectorInstrumentation::renderLayerDestroyed(Page* page, const RenderLayer&amp; renderLayer)
1674 {
1675     FAST_RETURN_IF_NO_FRONTENDS(void());
1676     if (InstrumentingAgents* instrumentingAgents = instrumentingAgentsForPage(page))
1677         renderLayerDestroyedImpl(*instrumentingAgents, renderLayer);
1678 }
1679 
1680 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForContext(ScriptExecutionContext* context)
1681 {
1682     return context ? instrumentingAgentsForContext(*context) : nullptr;
1683 }
1684 
<span class="line-modified">1685 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForFrame(const Frame* frame)</span>









1686 {
1687     return frame ? instrumentingAgentsForFrame(*frame) : nullptr;
1688 }
1689 
<span class="line-modified">1690 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForFrame(const Frame&amp; frame)</span>
1691 {
1692     return instrumentingAgentsForPage(frame.page());
1693 }
1694 
1695 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForDocument(Document* document)
1696 {
1697     return document ? instrumentingAgentsForDocument(*document) : nullptr;
1698 }
1699 
1700 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForDocument(Document&amp; document)
1701 {
1702     Page* page = document.page();
1703     if (!page &amp;&amp; document.templateDocumentHost())
1704         page = document.templateDocumentHost()-&gt;page();
1705     return instrumentingAgentsForPage(page);
1706 }
1707 
1708 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForPage(Page* page)
1709 {
1710     return page ? &amp;instrumentingAgentsForPage(*page) : nullptr;
1711 }
1712 






1713 inline InstrumentingAgents* InspectorInstrumentation::instrumentingAgentsForWorkerGlobalScope(WorkerGlobalScope* workerGlobalScope)
1714 {
1715     return workerGlobalScope ? &amp;instrumentingAgentsForWorkerGlobalScope(*workerGlobalScope) : nullptr;
1716 }
1717 





1718 inline void InspectorInstrumentation::frontendCreated()
1719 {
1720     ASSERT(isMainThread());
<span class="line-modified">1721     ++InspectorInstrumentationPublic::s_frontendCounter;</span>
1722 
<span class="line-modified">1723     if (InspectorInstrumentationPublic::s_frontendCounter == 1)</span>
1724         InspectorInstrumentation::firstFrontendCreated();
1725 }
1726 
1727 inline void InspectorInstrumentation::frontendDeleted()
1728 {
1729     ASSERT(isMainThread());
<span class="line-modified">1730     --InspectorInstrumentationPublic::s_frontendCounter;</span>
1731 
<span class="line-modified">1732     if (!InspectorInstrumentationPublic::s_frontendCounter)</span>
1733         InspectorInstrumentation::lastFrontendDeleted();
1734 }
1735 
1736 } // namespace WebCore
</pre>
</td>
</tr>
</table>
<center><a href="InspectorInstrumentation.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="InspectorNodeFinder.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>