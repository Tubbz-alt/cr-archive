<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/JavaScriptCore/debugger/Debugger.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Debugger.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DebuggerCallFrame.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/debugger/Debugger.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -32,19 +32,17 @@</span>
  #include &lt;wtf/RefPtr.h&gt;
  #include &lt;wtf/text/TextPosition.h&gt;
  
  namespace JSC {
  
<span class="udiff-line-added">+ class CallFrame;</span>
  class CodeBlock;
  class Exception;
<span class="udiff-line-removed">- class ExecState;</span>
  class JSGlobalObject;
  class SourceProvider;
  class VM;
  
<span class="udiff-line-removed">- typedef ExecState CallFrame;</span>
<span class="udiff-line-removed">- </span>
  class JS_EXPORT_PRIVATE Debugger {
      WTF_MAKE_FAST_ALLOCATED;
  public:
      Debugger(VM&amp;);
      virtual ~Debugger();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -89,19 +87,22 @@</span>
          PauseOnUncaughtExceptions
      };
      PauseOnExceptionsState pauseOnExceptionsState() const { return m_pauseOnExceptionsState; }
      void setPauseOnExceptionsState(PauseOnExceptionsState);
  
<span class="udiff-line-added">+     void setPauseOnDebuggerStatements(bool enabled) { m_pauseOnDebuggerStatements = enabled; }</span>
<span class="udiff-line-added">+ </span>
      enum ReasonForPause {
          NotPaused,
          PausedForException,
          PausedAtStatement,
          PausedAtExpression,
          PausedBeforeReturn,
          PausedAtEndOfProgram,
          PausedForBreakpoint,
          PausedForDebuggerStatement,
<span class="udiff-line-added">+         PausedAfterBlackboxedScript,</span>
      };
      ReasonForPause reasonForPause() const { return m_reasonForPause; }
      BreakpointID pausingBreakpointID() const { return m_pausingBreakpointID; }
  
      void setPauseOnNextStatement(bool);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -109,33 +110,33 @@</span>
      void continueProgram();
      void stepIntoStatement();
      void stepOverStatement();
      void stepOutOfFunction();
  
<span class="udiff-line-modified-removed">-     bool isBlacklisted(SourceID) const;</span>
<span class="udiff-line-modified-removed">-     void addToBlacklist(SourceID);</span>
<span class="udiff-line-modified-removed">-     void clearBlacklist();</span>
<span class="udiff-line-modified-added">+     enum class BlackboxType { Deferred, Ignored };</span>
<span class="udiff-line-modified-added">+     void setBlackboxType(SourceID, Optional&lt;BlackboxType&gt;);</span>
<span class="udiff-line-modified-added">+     void clearBlackbox();</span>
  
      bool isPaused() const { return m_isPaused; }
      bool isStepping() const { return m_steppingMode == SteppingModeEnabled; }
  
      bool suppressAllPauses() const { return m_suppressAllPauses; }
      void setSuppressAllPauses(bool suppress) { m_suppressAllPauses = suppress; }
  
<span class="udiff-line-modified-removed">-     virtual void sourceParsed(ExecState*, SourceProvider*, int errorLineNumber, const WTF::String&amp; errorMessage) = 0;</span>
<span class="udiff-line-modified-added">+     virtual void sourceParsed(JSGlobalObject*, SourceProvider*, int errorLineNumber, const WTF::String&amp; errorMessage) = 0;</span>
      virtual void willRunMicrotask() { }
      virtual void didRunMicrotask() { }
  
<span class="udiff-line-modified-removed">-     void exception(CallFrame*, JSValue exceptionValue, bool hasCatchHandler);</span>
<span class="udiff-line-modified-added">+     void exception(JSGlobalObject*, CallFrame*, JSValue exceptionValue, bool hasCatchHandler);</span>
      void atStatement(CallFrame*);
      void atExpression(CallFrame*);
      void callEvent(CallFrame*);
      void returnEvent(CallFrame*);
      void unwindEvent(CallFrame*);
      void willExecuteProgram(CallFrame*);
      void didExecuteProgram(CallFrame*);
<span class="udiff-line-modified-removed">-     void didReachBreakpoint(CallFrame*);</span>
<span class="udiff-line-modified-added">+     void didReachDebuggerStatement(CallFrame*);</span>
  
      virtual void recompileAllJSFunctions();
  
      void registerCodeBlock(CodeBlock*);
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -153,11 +154,11 @@</span>
      Seconds willEvaluateScript();
      void didEvaluateScript(Seconds startTime, ProfilingReason);
  
  protected:
      virtual void handleBreakpointHit(JSGlobalObject*, const Breakpoint&amp;) { }
<span class="udiff-line-modified-removed">-     virtual void handleExceptionInBreakpointCondition(ExecState*, Exception*) const { }</span>
<span class="udiff-line-modified-added">+     virtual void handleExceptionInBreakpointCondition(JSGlobalObject*, Exception*) const { }</span>
      virtual void handlePause(JSGlobalObject*, ReasonForPause) { }
      virtual void notifyDoneProcessingDebuggerEvents() { }
  
  private:
      typedef HashMap&lt;BreakpointID, Breakpoint*&gt; BreakpointIDToBreakpointMap;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -196,13 +197,13 @@</span>
      // key&#39;ed off the source position instead of the bytecode PC. This ensures
      // that we don&#39;t break on the same line more than once. Once we switch to a
      // bytecode PC key&#39;ed breakpoint, we will not need these anymore and should
      // be able to remove them.
      enum CallFrameUpdateAction { AttemptPause, NoPause };
<span class="udiff-line-modified-removed">-     void updateCallFrame(JSC::CallFrame*, CallFrameUpdateAction);</span>
<span class="udiff-line-modified-added">+     void updateCallFrame(JSC::JSGlobalObject*, JSC::CallFrame*, CallFrameUpdateAction);</span>
      void updateCallFrameInternal(JSC::CallFrame*);
<span class="udiff-line-modified-removed">-     void pauseIfNeeded(JSC::CallFrame*);</span>
<span class="udiff-line-modified-added">+     void pauseIfNeeded(JSC::JSGlobalObject*);</span>
      void clearNextPauseState();
  
      enum SteppingMode {
          SteppingModeDisabled,
          SteppingModeEnabled
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -222,13 +223,14 @@</span>
      void clearParsedData();
  
      VM&amp; m_vm;
      HashSet&lt;JSGlobalObject*&gt; m_globalObjects;
      HashMap&lt;SourceID, DebuggerParseData, WTF::IntHash&lt;SourceID&gt;, WTF::UnsignedWithZeroKeyHashTraits&lt;SourceID&gt;&gt; m_parseDataMap;
<span class="udiff-line-modified-removed">-     HashSet&lt;SourceID, WTF::IntHash&lt;SourceID&gt;, WTF::UnsignedWithZeroKeyHashTraits&lt;SourceID&gt;&gt; m_blacklistedScripts;</span>
<span class="udiff-line-modified-added">+     HashMap&lt;SourceID, BlackboxType, WTF::IntHash&lt;SourceID&gt;, WTF::UnsignedWithZeroKeyHashTraits&lt;SourceID&gt;&gt; m_blackboxedScripts;</span>
  
      PauseOnExceptionsState m_pauseOnExceptionsState;
<span class="udiff-line-added">+     bool m_pauseOnDebuggerStatements : 1;</span>
      bool m_pauseAtNextOpportunity : 1;
      bool m_pauseOnStepOut : 1;
      bool m_pastFirstExpressionInStatement : 1;
      bool m_isPaused : 1;
      bool m_breakpointsActivated : 1;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -240,10 +242,11 @@</span>
      JSValue m_currentException;
      CallFrame* m_pauseOnCallFrame { nullptr };
      CallFrame* m_currentCallFrame { nullptr };
      unsigned m_lastExecutedLine;
      SourceID m_lastExecutedSourceID;
<span class="udiff-line-added">+     bool m_afterBlackboxedScript { false };</span>
  
      BreakpointID m_topBreakpointID;
      BreakpointID m_pausingBreakpointID;
      BreakpointIDToBreakpointMap m_breakpointIDToBreakpoint;
      SourceIDToBreakpointsMap m_sourceIDToBreakpoints;
</pre>
<center><a href="Debugger.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DebuggerCallFrame.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>