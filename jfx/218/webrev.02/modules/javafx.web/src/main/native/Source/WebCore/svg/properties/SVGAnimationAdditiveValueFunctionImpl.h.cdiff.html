<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/svg/properties/SVGAnimationAdditiveValueFunctionImpl.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SVGAnimationAdditiveListFunctionImpl.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="SVGDecoratedEnumeration.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/svg/properties/SVGAnimationAdditiveValueFunctionImpl.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 27,14 ***</span>
<span class="line-new-header">--- 27,19 ---</span>
  
  #include &quot;Color.h&quot;
  #include &quot;FloatRect.h&quot;
  #include &quot;SVGAngleValue.h&quot;
  #include &quot;SVGAnimationAdditiveValueFunction.h&quot;
<span class="line-added">+ #include &quot;SVGLengthContext.h&quot;</span>
  #include &quot;SVGLengthValue.h&quot;
  #include &quot;SVGPathByteStream.h&quot;
  #include &quot;SVGPropertyTraits.h&quot;
  
<span class="line-added">+ #if PLATFORM(JAVA)</span>
<span class="line-added">+ #include &lt;wtf/java/JavaMath.h&gt;</span>
<span class="line-added">+ #endif</span>
<span class="line-added">+ </span>
  namespace WebCore {
  
  class SVGAnimationAngleFunction : public SVGAnimationAdditiveValueFunction&lt;SVGAngleValue&gt; {
  public:
      using Base = SVGAnimationAdditiveValueFunction&lt;SVGAngleValue&gt;;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 99,11 ***</span>
          if (!toColor.isValid())
              return { };
          float red = fromColor.red() - toColor.red();
          float green = fromColor.green() - toColor.green();
          float blue = fromColor.blue() - toColor.blue();
<span class="line-modified">!         return sqrtf(red * red + green * green + blue * blue);</span>
      }
  
  private:
      void addFromAndToValues(SVGElement*) override
      {
<span class="line-new-header">--- 104,15 ---</span>
          if (!toColor.isValid())
              return { };
          float red = fromColor.red() - toColor.red();
          float green = fromColor.green() - toColor.green();
          float blue = fromColor.blue() - toColor.blue();
<span class="line-modified">! #if PLATFORM(JAVA)</span>
<span class="line-added">+         return javamath::hypot(red, green, blue);</span>
<span class="line-added">+ #else</span>
<span class="line-added">+         return std::hypot(red, green, blue);</span>
<span class="line-added">+ #endif</span>
      }
  
  private:
      void addFromAndToValues(SVGElement*) override
      {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 175,19 ***</span>
      }
  
      void animate(SVGElement* targetElement, float progress, unsigned repeatCount, SVGLengthValue&amp; animated)
      {
          SVGLengthContext lengthContext(targetElement);
<span class="line-modified">!         SVGLengthType unitType = progress &lt; 0.5 ? m_from.unitType() : m_to.unitType();</span>
  
          float from = (m_animationMode == AnimationMode::To ? animated : m_from).value(lengthContext);
          float to = m_to.value(lengthContext);
          float toAtEndOfDuration = this-&gt;toAtEndOfDuration().value(lengthContext);
          float value = animated.value(lengthContext);
  
          value = Base::animate(progress, repeatCount, from, to, toAtEndOfDuration, value);
<span class="line-modified">!         animated = { lengthContext, value, m_lengthMode, unitType };</span>
      }
  
      Optional&lt;float&gt; calculateDistance(SVGElement* targetElement, const String&amp; from, const String&amp; to) const override
      {
          SVGLengthContext lengthContext(targetElement);
<span class="line-new-header">--- 184,19 ---</span>
      }
  
      void animate(SVGElement* targetElement, float progress, unsigned repeatCount, SVGLengthValue&amp; animated)
      {
          SVGLengthContext lengthContext(targetElement);
<span class="line-modified">!         SVGLengthType lengthType = progress &lt; 0.5 ? m_from.lengthType() : m_to.lengthType();</span>
  
          float from = (m_animationMode == AnimationMode::To ? animated : m_from).value(lengthContext);
          float to = m_to.value(lengthContext);
          float toAtEndOfDuration = this-&gt;toAtEndOfDuration().value(lengthContext);
          float value = animated.value(lengthContext);
  
          value = Base::animate(progress, repeatCount, from, to, toAtEndOfDuration, value);
<span class="line-modified">!         animated = { lengthContext, value, lengthType, m_lengthMode };</span>
      }
  
      Optional&lt;float&gt; calculateDistance(SVGElement* targetElement, const String&amp; from, const String&amp; to) const override
      {
          SVGLengthContext lengthContext(targetElement);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 198,11 ***</span>
  
  private:
      void addFromAndToValues(SVGElement* targetElement) override
      {
          SVGLengthContext lengthContext(targetElement);
<span class="line-modified">!         m_to.setValue(m_to.value(lengthContext) + m_from.value(lengthContext), lengthContext);</span>
      }
  
      SVGLengthMode m_lengthMode;
  };
  
<span class="line-new-header">--- 207,11 ---</span>
  
  private:
      void addFromAndToValues(SVGElement* targetElement) override
      {
          SVGLengthContext lengthContext(targetElement);
<span class="line-modified">!         m_to.setValue(lengthContext, m_to.value(lengthContext) + m_from.value(lengthContext));</span>
      }
  
      SVGLengthMode m_lengthMode;
  };
  
</pre>
<center><a href="SVGAnimationAdditiveListFunctionImpl.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="SVGDecoratedEnumeration.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>