<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/html/canvas/WebGLProgram.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="WebGLProgram.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="WebGLQuery.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/html/canvas/WebGLProgram.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 25,27 ***</span>
  
  #pragma once
  
  #if ENABLE(WEBGL)
  
  #include &quot;WebGLSharedObject.h&quot;
<span class="line-modified">! #include &lt;wtf/Forward.h&gt;</span>
  
  namespace WebCore {
  
  class WebGLShader;
  
<span class="line-modified">! class WebGLProgram final : public WebGLSharedObject {</span>
  public:
      static Ref&lt;WebGLProgram&gt; create(WebGLRenderingContextBase&amp;);
      virtual ~WebGLProgram();
  
<span class="line-modified">!     static HashMap&lt;WebGLProgram*, WebGLRenderingContextBase*&gt;&amp; instances(const LockHolder&amp;);</span>
      static Lock&amp; instancesMutex();
  
      unsigned numActiveAttribLocations();
<span class="line-modified">!     GC3Dint getActiveAttribLocation(GC3Duint index);</span>
  
      bool isUsingVertexAttrib0();
  
      bool getLinkStatus();
      void setLinkStatus(bool);
<span class="line-new-header">--- 25,35 ---</span>
  
  #pragma once
  
  #if ENABLE(WEBGL)
  
<span class="line-added">+ #include &quot;ContextDestructionObserver.h&quot;</span>
  #include &quot;WebGLSharedObject.h&quot;
<span class="line-modified">! #include &lt;wtf/HashMap.h&gt;</span>
<span class="line-added">+ #include &lt;wtf/HashFunctions.h&gt;</span>
<span class="line-added">+ #include &lt;wtf/Lock.h&gt;</span>
<span class="line-added">+ #include &lt;wtf/Vector.h&gt;</span>
  
  namespace WebCore {
  
<span class="line-added">+ class ScriptExecutionContext;</span>
<span class="line-added">+ class WebGLRenderingContextBase;</span>
  class WebGLShader;
  
<span class="line-modified">! class WebGLProgram final : public WebGLSharedObject, public ContextDestructionObserver {</span>
  public:
      static Ref&lt;WebGLProgram&gt; create(WebGLRenderingContextBase&amp;);
      virtual ~WebGLProgram();
  
<span class="line-modified">!     static HashMap&lt;WebGLProgram*, WebGLRenderingContextBase*&gt;&amp; instances(const WTF::LockHolder&amp;);</span>
      static Lock&amp; instancesMutex();
  
<span class="line-added">+     void contextDestroyed() final;</span>
<span class="line-added">+ </span>
      unsigned numActiveAttribLocations();
<span class="line-modified">!     GCGLint getActiveAttribLocation(GCGLuint index);</span>
  
      bool isUsingVertexAttrib0();
  
      bool getLinkStatus();
      void setLinkStatus(bool);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 56,26 ***</span>
      // We don&#39;t deal with integer overflow here, assuming in reality a program
      // will never be linked so many times.
      // Also, we invalidate the cached program info.
      void increaseLinkCount();
  
<span class="line-modified">!     WebGLShader* getAttachedShader(GC3Denum);</span>
      bool attachShader(WebGLShader*);
      bool detachShader(WebGLShader*);
  
  protected:
      WebGLProgram(WebGLRenderingContextBase&amp;);
  
<span class="line-modified">!     void deleteObjectImpl(GraphicsContext3D*, Platform3DObject) override;</span>
  
  private:
<span class="line-modified">!     void cacheActiveAttribLocations(GraphicsContext3D*);</span>
      void cacheInfoIfNeeded();
  
<span class="line-modified">!     Vector&lt;GC3Dint&gt; m_activeAttribLocations;</span>
  
<span class="line-modified">!     GC3Dint m_linkStatus { 0 };</span>
  
      // This is used to track whether a WebGLUniformLocation belongs to this program or not.
      unsigned m_linkCount { 0 };
  
      RefPtr&lt;WebGLShader&gt; m_vertexShader;
<span class="line-new-header">--- 64,26 ---</span>
      // We don&#39;t deal with integer overflow here, assuming in reality a program
      // will never be linked so many times.
      // Also, we invalidate the cached program info.
      void increaseLinkCount();
  
<span class="line-modified">!     WebGLShader* getAttachedShader(GCGLenum);</span>
      bool attachShader(WebGLShader*);
      bool detachShader(WebGLShader*);
  
  protected:
      WebGLProgram(WebGLRenderingContextBase&amp;);
  
<span class="line-modified">!     void deleteObjectImpl(GraphicsContextGLOpenGL*, PlatformGLObject) override;</span>
  
  private:
<span class="line-modified">!     void cacheActiveAttribLocations(GraphicsContextGLOpenGL*);</span>
      void cacheInfoIfNeeded();
  
<span class="line-modified">!     Vector&lt;GCGLint&gt; m_activeAttribLocations;</span>
  
<span class="line-modified">!     GCGLint m_linkStatus { 0 };</span>
  
      // This is used to track whether a WebGLUniformLocation belongs to this program or not.
      unsigned m_linkCount { 0 };
  
      RefPtr&lt;WebGLShader&gt; m_vertexShader;
</pre>
<center><a href="WebGLProgram.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="WebGLQuery.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>