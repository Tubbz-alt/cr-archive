<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebKitLegacy/java/DOM/JavaDocument.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="JavaDOMWindow.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="JavaXPathExpression.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebKitLegacy/java/DOM/JavaDocument.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  33 #include &lt;WebCore/DOMException.h&gt;
  34 #include &lt;WebCore/DOMImplementation.h&gt;
  35 #include &lt;WebCore/DOMWindow.h&gt;
  36 #include &lt;WebCore/Document.h&gt;
  37 #include &lt;WebCore/DocumentFragment.h&gt;
  38 #include &lt;WebCore/DocumentType.h&gt;
  39 #include &lt;WebCore/Element.h&gt;
  40 #include &lt;WebCore/Event.h&gt;
  41 #include &lt;WebCore/EventListener.h&gt;
  42 #include &lt;WebCore/FullscreenManager.h&gt;
  43 #include &lt;WebCore/HTMLCollection.h&gt;
  44 #include &lt;WebCore/HTMLElement.h&gt;
  45 #include &lt;WebCore/HTMLHeadElement.h&gt;
  46 #include &lt;WebCore/HTMLScriptElement.h&gt;
  47 #include &lt;WebCore/Node.h&gt;
  48 #include &lt;WebCore/NodeFilter.h&gt;
  49 #include &lt;WebCore/NodeIterator.h&gt;
  50 #include &lt;WebCore/NodeList.h&gt;
  51 #include &lt;WebCore/ProcessingInstruction.h&gt;
  52 #include &lt;WebCore/Range.h&gt;

  53 #include &lt;WebCore/ScrollIntoViewOptions.h&gt;
  54 #include &lt;WebCore/StyleSheetList.h&gt;
  55 #include &lt;WebCore/Text.h&gt;
  56 #include &lt;WebCore/TreeWalker.h&gt;
  57 #include &lt;WebCore/XPathExpression.h&gt;
  58 #include &lt;WebCore/XPathNSResolver.h&gt;
  59 #include &lt;WebCore/XPathResult.h&gt;
  60 #include &lt;WebCore/EventNames.h&gt;
  61 #include &lt;WebCore/JSExecState.h&gt;
  62 
  63 #include &lt;wtf/RefPtr.h&gt;
  64 #include &lt;wtf/GetPtr.h&gt;
  65 
  66 #include &quot;AbstractViewInternal.h&quot;
  67 #include &lt;WebCore/JavaDOMUtils.h&gt;
  68 #include &lt;wtf/java/JavaEnv.h&gt;
  69 
  70 using namespace WebCore;
  71 
  72 extern &quot;C&quot; {
</pre>
<hr />
<pre>
 370         break;
 371     }
 372     return JavaReturn&lt;String&gt;(env, String(visibility));
 373 }
 374 
 375 JNIEXPORT jboolean JNICALL Java_com_sun_webkit_dom_DocumentImpl_getHiddenImpl(JNIEnv*, jclass, jlong peer)
 376 {
 377     WebCore::JSMainThreadNullState state;
 378     return IMPL-&gt;hidden();
 379 }
 380 
 381 JNIEXPORT jlong JNICALL Java_com_sun_webkit_dom_DocumentImpl_getCurrentScriptImpl(JNIEnv* env, jclass, jlong peer)
 382 {
 383     WebCore::JSMainThreadNullState state;
 384     return JavaReturn&lt;HTMLScriptElement&gt;(env, WTF::getPtr(IMPL-&gt;currentScript()));
 385 }
 386 
 387 JNIEXPORT jstring JNICALL Java_com_sun_webkit_dom_DocumentImpl_getOriginImpl(JNIEnv* env, jclass, jlong peer)
 388 {
 389     WebCore::JSMainThreadNullState state;
<span class="line-modified"> 390     return JavaReturn&lt;String&gt;(env, IMPL-&gt;origin());</span>
 391 }
 392 
 393 JNIEXPORT jlong JNICALL Java_com_sun_webkit_dom_DocumentImpl_getScrollingElementImpl(JNIEnv* env, jclass, jlong peer)
 394 {
 395     WebCore::JSMainThreadNullState state;
 396     return JavaReturn&lt;Element&gt;(env, WTF::getPtr(IMPL-&gt;scrollingElementForAPI()));
 397 }
 398 
 399 JNIEXPORT jlong JNICALL Java_com_sun_webkit_dom_DocumentImpl_getOnbeforecopyImpl(JNIEnv* env, jclass, jlong peer)
 400 {
 401     WebCore::JSMainThreadNullState state;
 402     return JavaReturn&lt;EventListener&gt;(env, WTF::getPtr(IMPL-&gt;attributeEventListener(eventNames().beforecopyEvent, mainThreadNormalWorld())));
 403 }
 404 
 405 JNIEXPORT void JNICALL Java_com_sun_webkit_dom_DocumentImpl_setOnbeforecopyImpl(JNIEnv*, jclass, jlong peer, jlong value)
 406 {
 407     WebCore::JSMainThreadNullState state;
 408     IMPL-&gt;setAttributeEventListener(eventNames().beforecopyEvent, static_cast&lt;EventListener*&gt;(jlong_to_ptr(value)), mainThreadNormalWorld());
 409 }
 410 
</pre>
<hr />
<pre>
1399             , String(env, pseudoElement))));
1400 #endif
1401     return 0L;
1402 }
1403 
1404 
1405 JNIEXPORT jlong JNICALL Java_com_sun_webkit_dom_DocumentImpl_createExpressionImpl(JNIEnv* env, jclass, jlong peer
1406     , jstring expression
1407     , jlong resolver)
1408 {
1409     WebCore::JSMainThreadNullState state;
1410     return JavaReturn&lt;XPathExpression&gt;(env, WTF::getPtr(raiseOnDOMError(env, IMPL-&gt;createExpression(String(env, expression)
1411             , static_cast&lt;XPathNSResolver*&gt;(jlong_to_ptr(resolver))))));
1412 }
1413 
1414 
1415 JNIEXPORT jlong JNICALL Java_com_sun_webkit_dom_DocumentImpl_createNSResolverImpl(JNIEnv* env, jclass, jlong peer
1416     , jlong nodeResolver)
1417 {
1418     WebCore::JSMainThreadNullState state;
<span class="line-modified">1419     return JavaReturn&lt;XPathNSResolver&gt;(env, WTF::getPtr(IMPL-&gt;createNSResolver(static_cast&lt;Node*&gt;(jlong_to_ptr(nodeResolver)))));</span>



1420 }
1421 
1422 // - (DOMXPathResult *)evaluate:(NSString *)expression
1423 // contextNode:(DOMNode *)contextNode
1424 // resolver:(id &lt;DOMXPathNSResolver&gt;)resolver
1425 // type:(unsigned short)type
1426 // inResult:(DOMXPathResult *)inResult WEBKIT_AVAILABLE_MAC(10_5);
1427 
1428 JNIEXPORT jlong JNICALL Java_com_sun_webkit_dom_DocumentImpl_evaluateImpl(JNIEnv* env, jclass, jlong peer
1429     , jstring expression
1430     , jlong contextNode
1431     , jlong resolver
1432     , jshort type
1433     , jlong inResult)
1434 {
1435     WebCore::JSMainThreadNullState state;
1436     return JavaReturn&lt;XPathResult&gt;(env, WTF::getPtr(raiseOnDOMError(env, IMPL-&gt;evaluate(String(env, expression)
<span class="line-modified">1437             , static_cast&lt;Node*&gt;(jlong_to_ptr(contextNode))</span>
1438             , static_cast&lt;XPathNSResolver*&gt;(jlong_to_ptr(resolver))
1439             , type
1440             , static_cast&lt;XPathResult*&gt;(jlong_to_ptr(inResult))))));
1441 }
1442 
1443 
1444 JNIEXPORT jboolean JNICALL Java_com_sun_webkit_dom_DocumentImpl_execCommandImpl(JNIEnv* env, jclass, jlong peer
1445     , jstring command
1446     , jboolean userInterface
1447     , jstring value)
1448 {
1449     WebCore::JSMainThreadNullState state;
1450     return IMPL-&gt;execCommand(String(env, command)
1451             , userInterface
1452             , String(env, value));
1453 }
1454 
1455 
1456 JNIEXPORT jboolean JNICALL Java_com_sun_webkit_dom_DocumentImpl_queryCommandEnabledImpl(JNIEnv* env, jclass, jlong peer
1457     , jstring command)
</pre>
</td>
<td>
<hr />
<pre>
  33 #include &lt;WebCore/DOMException.h&gt;
  34 #include &lt;WebCore/DOMImplementation.h&gt;
  35 #include &lt;WebCore/DOMWindow.h&gt;
  36 #include &lt;WebCore/Document.h&gt;
  37 #include &lt;WebCore/DocumentFragment.h&gt;
  38 #include &lt;WebCore/DocumentType.h&gt;
  39 #include &lt;WebCore/Element.h&gt;
  40 #include &lt;WebCore/Event.h&gt;
  41 #include &lt;WebCore/EventListener.h&gt;
  42 #include &lt;WebCore/FullscreenManager.h&gt;
  43 #include &lt;WebCore/HTMLCollection.h&gt;
  44 #include &lt;WebCore/HTMLElement.h&gt;
  45 #include &lt;WebCore/HTMLHeadElement.h&gt;
  46 #include &lt;WebCore/HTMLScriptElement.h&gt;
  47 #include &lt;WebCore/Node.h&gt;
  48 #include &lt;WebCore/NodeFilter.h&gt;
  49 #include &lt;WebCore/NodeIterator.h&gt;
  50 #include &lt;WebCore/NodeList.h&gt;
  51 #include &lt;WebCore/ProcessingInstruction.h&gt;
  52 #include &lt;WebCore/Range.h&gt;
<span class="line-added">  53 #include &lt;WebCore/SecurityOrigin.h&gt;</span>
  54 #include &lt;WebCore/ScrollIntoViewOptions.h&gt;
  55 #include &lt;WebCore/StyleSheetList.h&gt;
  56 #include &lt;WebCore/Text.h&gt;
  57 #include &lt;WebCore/TreeWalker.h&gt;
  58 #include &lt;WebCore/XPathExpression.h&gt;
  59 #include &lt;WebCore/XPathNSResolver.h&gt;
  60 #include &lt;WebCore/XPathResult.h&gt;
  61 #include &lt;WebCore/EventNames.h&gt;
  62 #include &lt;WebCore/JSExecState.h&gt;
  63 
  64 #include &lt;wtf/RefPtr.h&gt;
  65 #include &lt;wtf/GetPtr.h&gt;
  66 
  67 #include &quot;AbstractViewInternal.h&quot;
  68 #include &lt;WebCore/JavaDOMUtils.h&gt;
  69 #include &lt;wtf/java/JavaEnv.h&gt;
  70 
  71 using namespace WebCore;
  72 
  73 extern &quot;C&quot; {
</pre>
<hr />
<pre>
 371         break;
 372     }
 373     return JavaReturn&lt;String&gt;(env, String(visibility));
 374 }
 375 
 376 JNIEXPORT jboolean JNICALL Java_com_sun_webkit_dom_DocumentImpl_getHiddenImpl(JNIEnv*, jclass, jlong peer)
 377 {
 378     WebCore::JSMainThreadNullState state;
 379     return IMPL-&gt;hidden();
 380 }
 381 
 382 JNIEXPORT jlong JNICALL Java_com_sun_webkit_dom_DocumentImpl_getCurrentScriptImpl(JNIEnv* env, jclass, jlong peer)
 383 {
 384     WebCore::JSMainThreadNullState state;
 385     return JavaReturn&lt;HTMLScriptElement&gt;(env, WTF::getPtr(IMPL-&gt;currentScript()));
 386 }
 387 
 388 JNIEXPORT jstring JNICALL Java_com_sun_webkit_dom_DocumentImpl_getOriginImpl(JNIEnv* env, jclass, jlong peer)
 389 {
 390     WebCore::JSMainThreadNullState state;
<span class="line-modified"> 391     return JavaReturn&lt;String&gt;(env, IMPL-&gt;securityOrigin().toString());</span>
 392 }
 393 
 394 JNIEXPORT jlong JNICALL Java_com_sun_webkit_dom_DocumentImpl_getScrollingElementImpl(JNIEnv* env, jclass, jlong peer)
 395 {
 396     WebCore::JSMainThreadNullState state;
 397     return JavaReturn&lt;Element&gt;(env, WTF::getPtr(IMPL-&gt;scrollingElementForAPI()));
 398 }
 399 
 400 JNIEXPORT jlong JNICALL Java_com_sun_webkit_dom_DocumentImpl_getOnbeforecopyImpl(JNIEnv* env, jclass, jlong peer)
 401 {
 402     WebCore::JSMainThreadNullState state;
 403     return JavaReturn&lt;EventListener&gt;(env, WTF::getPtr(IMPL-&gt;attributeEventListener(eventNames().beforecopyEvent, mainThreadNormalWorld())));
 404 }
 405 
 406 JNIEXPORT void JNICALL Java_com_sun_webkit_dom_DocumentImpl_setOnbeforecopyImpl(JNIEnv*, jclass, jlong peer, jlong value)
 407 {
 408     WebCore::JSMainThreadNullState state;
 409     IMPL-&gt;setAttributeEventListener(eventNames().beforecopyEvent, static_cast&lt;EventListener*&gt;(jlong_to_ptr(value)), mainThreadNormalWorld());
 410 }
 411 
</pre>
<hr />
<pre>
1400             , String(env, pseudoElement))));
1401 #endif
1402     return 0L;
1403 }
1404 
1405 
1406 JNIEXPORT jlong JNICALL Java_com_sun_webkit_dom_DocumentImpl_createExpressionImpl(JNIEnv* env, jclass, jlong peer
1407     , jstring expression
1408     , jlong resolver)
1409 {
1410     WebCore::JSMainThreadNullState state;
1411     return JavaReturn&lt;XPathExpression&gt;(env, WTF::getPtr(raiseOnDOMError(env, IMPL-&gt;createExpression(String(env, expression)
1412             , static_cast&lt;XPathNSResolver*&gt;(jlong_to_ptr(resolver))))));
1413 }
1414 
1415 
1416 JNIEXPORT jlong JNICALL Java_com_sun_webkit_dom_DocumentImpl_createNSResolverImpl(JNIEnv* env, jclass, jlong peer
1417     , jlong nodeResolver)
1418 {
1419     WebCore::JSMainThreadNullState state;
<span class="line-modified">1420     if (!nodeResolver)</span>
<span class="line-added">1421         return 0;</span>
<span class="line-added">1422 </span>
<span class="line-added">1423     return JavaReturn&lt;XPathNSResolver&gt;(env, WTF::getPtr(IMPL-&gt;createNSResolver(*static_cast&lt;Node*&gt;(jlong_to_ptr(nodeResolver)))));</span>
1424 }
1425 
1426 // - (DOMXPathResult *)evaluate:(NSString *)expression
1427 // contextNode:(DOMNode *)contextNode
1428 // resolver:(id &lt;DOMXPathNSResolver&gt;)resolver
1429 // type:(unsigned short)type
1430 // inResult:(DOMXPathResult *)inResult WEBKIT_AVAILABLE_MAC(10_5);
1431 
1432 JNIEXPORT jlong JNICALL Java_com_sun_webkit_dom_DocumentImpl_evaluateImpl(JNIEnv* env, jclass, jlong peer
1433     , jstring expression
1434     , jlong contextNode
1435     , jlong resolver
1436     , jshort type
1437     , jlong inResult)
1438 {
1439     WebCore::JSMainThreadNullState state;
1440     return JavaReturn&lt;XPathResult&gt;(env, WTF::getPtr(raiseOnDOMError(env, IMPL-&gt;evaluate(String(env, expression)
<span class="line-modified">1441             , *static_cast&lt;Node*&gt;(jlong_to_ptr(contextNode))</span>
1442             , static_cast&lt;XPathNSResolver*&gt;(jlong_to_ptr(resolver))
1443             , type
1444             , static_cast&lt;XPathResult*&gt;(jlong_to_ptr(inResult))))));
1445 }
1446 
1447 
1448 JNIEXPORT jboolean JNICALL Java_com_sun_webkit_dom_DocumentImpl_execCommandImpl(JNIEnv* env, jclass, jlong peer
1449     , jstring command
1450     , jboolean userInterface
1451     , jstring value)
1452 {
1453     WebCore::JSMainThreadNullState state;
1454     return IMPL-&gt;execCommand(String(env, command)
1455             , userInterface
1456             , String(env, value));
1457 }
1458 
1459 
1460 JNIEXPORT jboolean JNICALL Java_com_sun_webkit_dom_DocumentImpl_queryCommandEnabledImpl(JNIEnv* env, jclass, jlong peer
1461     , jstring command)
</pre>
</td>
</tr>
</table>
<center><a href="JavaDOMWindow.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="JavaXPathExpression.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>