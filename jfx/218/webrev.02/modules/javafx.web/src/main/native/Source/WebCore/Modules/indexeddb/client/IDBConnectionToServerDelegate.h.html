<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WebCore/Modules/indexeddb/client/IDBConnectionToServerDelegate.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 /*
 2  * Copyright (C) 2015, 2016 Apple Inc. All rights reserved.
 3  *
 4  * Redistribution and use in source and binary forms, with or without
 5  * modification, are permitted provided that the following conditions
 6  * are met:
 7  * 1. Redistributions of source code must retain the above copyright
 8  *    notice, this list of conditions and the following disclaimer.
 9  * 2. Redistributions in binary form must reproduce the above copyright
10  *    notice, this list of conditions and the following disclaimer in the
11  *    documentation and/or other materials provided with the distribution.
12  *
13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS&#39;&#39;
14  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
15  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
16  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS
17  * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
18  * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
19  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
20  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
21  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
22  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
23  * THE POSSIBILITY OF SUCH DAMAGE.
24  */
25 
26 #pragma once
27 
28 #if ENABLE(INDEXED_DATABASE)
29 
30 #include &quot;IDBResourceIdentifier.h&quot;
31 #include &lt;wtf/WeakPtr.h&gt;
32 #include &lt;wtf/text/WTFString.h&gt;
33 
34 namespace WebCore {
35 
36 class IDBCursorInfo;
37 class IDBIndexInfo;
38 class IDBKeyData;
39 class IDBObjectStoreInfo;
40 class IDBRequestData;
41 class IDBTransactionInfo;
42 class IDBValue;
43 
44 struct IDBGetAllRecordsData;
45 struct IDBGetRecordData;
46 struct IDBIterateCursorData;
47 struct SecurityOriginData;
48 
49 namespace IndexedDB {
50 enum class ObjectStoreOverwriteMode;
51 enum class ConnectionClosedOnBehalfOfServer : bool;
52 }
53 
54 struct IDBKeyRangeData;
55 
56 namespace IDBClient {
57 
58 class IDBConnectionToServerDelegate : public CanMakeWeakPtr&lt;IDBConnectionToServerDelegate&gt; {
59 public:
60     virtual ~IDBConnectionToServerDelegate() = default;
61 
62     virtual IDBConnectionIdentifier identifier() const = 0;
63     virtual void deleteDatabase(const IDBRequestData&amp;) = 0;
64     virtual void openDatabase(const IDBRequestData&amp;) = 0;
65     virtual void abortTransaction(const IDBResourceIdentifier&amp;) = 0;
66     virtual void commitTransaction(const IDBResourceIdentifier&amp;) = 0;
67     virtual void didFinishHandlingVersionChangeTransaction(uint64_t databaseConnectionIdentifier, const IDBResourceIdentifier&amp;) = 0;
68     virtual void createObjectStore(const IDBRequestData&amp;, const IDBObjectStoreInfo&amp;) = 0;
69     virtual void deleteObjectStore(const IDBRequestData&amp;, const String&amp; objectStoreName) = 0;
70     virtual void renameObjectStore(const IDBRequestData&amp;, uint64_t objectStoreIdentifier, const String&amp; newName) = 0;
71     virtual void clearObjectStore(const IDBRequestData&amp;, uint64_t objectStoreIdentifier) = 0;
72     virtual void createIndex(const IDBRequestData&amp;, const IDBIndexInfo&amp;) = 0;
73     virtual void deleteIndex(const IDBRequestData&amp;, uint64_t objectStoreIdentifier, const String&amp; indexName) = 0;
74     virtual void renameIndex(const IDBRequestData&amp;, uint64_t objectStoreIdentifier, uint64_t indexIdentifier, const String&amp; newName) = 0;
75     virtual void putOrAdd(const IDBRequestData&amp;, const IDBKeyData&amp;, const IDBValue&amp;, const IndexedDB::ObjectStoreOverwriteMode) = 0;
76     virtual void getRecord(const IDBRequestData&amp;, const IDBGetRecordData&amp;) = 0;
77     virtual void getAllRecords(const IDBRequestData&amp;, const IDBGetAllRecordsData&amp;) = 0;
78     virtual void getCount(const IDBRequestData&amp;, const IDBKeyRangeData&amp;) = 0;
79     virtual void deleteRecord(const IDBRequestData&amp;, const IDBKeyRangeData&amp;) = 0;
80     virtual void openCursor(const IDBRequestData&amp;, const IDBCursorInfo&amp;) = 0;
81     virtual void iterateCursor(const IDBRequestData&amp;, const IDBIterateCursorData&amp;) = 0;
82 
83     virtual void establishTransaction(uint64_t databaseConnectionIdentifier, const IDBTransactionInfo&amp;) = 0;
84     virtual void databaseConnectionPendingClose(uint64_t databaseConnectionIdentifier) = 0;
85     virtual void databaseConnectionClosed(uint64_t databaseConnectionIdentifier) = 0;
86     virtual void abortOpenAndUpgradeNeeded(uint64_t databaseConnectionIdentifier, const IDBResourceIdentifier&amp; transactionIdentifier) = 0;
87     virtual void didFireVersionChangeEvent(uint64_t databaseConnectionIdentifier, const IDBResourceIdentifier&amp; requestIdentifier, const IndexedDB::ConnectionClosedOnBehalfOfServer) = 0;
88     virtual void openDBRequestCancelled(const IDBRequestData&amp;) = 0;
89 
90     virtual void getAllDatabaseNames(const SecurityOriginData&amp; mainFrameOrigin, const SecurityOriginData&amp; openingOrigin, uint64_t callbackID) = 0;
91 };
92 
93 } // namespace IDBClient
94 } // namespace WebCore
95 
96 #endif // ENABLE(INDEXED_DATABASE)
    </pre>
  </body>
</html>