<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/workers/service/server/SWServerWorker.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SWServerWorker.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../worklets/PaintWorkletGlobalScope.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/workers/service/server/SWServerWorker.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -60,11 +60,11 @@</span>
      SWServerWorker(const SWServerWorker&amp;) = delete;
      WEBCORE_EXPORT ~SWServerWorker();
  
      void terminate();
  
<span class="udiff-line-modified-removed">-     WEBCORE_EXPORT void whenActivated(WTF::Function&lt;void(bool)&gt;&amp;&amp;);</span>
<span class="udiff-line-modified-added">+     WEBCORE_EXPORT void whenActivated(CompletionHandler&lt;void(bool)&gt;&amp;&amp;);</span>
  
      enum class State {
          Running,
          Terminating,
          NotRunning,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -86,11 +86,11 @@</span>
  
      bool hasPendingEvents() const { return m_hasPendingEvents; }
      void setHasPendingEvents(bool);
  
      void scriptContextFailedToStart(const Optional&lt;ServiceWorkerJobDataIdentifier&gt;&amp;, const String&amp; message);
<span class="udiff-line-modified-removed">-     void scriptContextStarted(const Optional&lt;ServiceWorkerJobDataIdentifier&gt;&amp;);</span>
<span class="udiff-line-modified-added">+     void scriptContextStarted(const Optional&lt;ServiceWorkerJobDataIdentifier&gt;&amp;, bool doesHandleFetch);</span>
      void didFinishInstall(const Optional&lt;ServiceWorkerJobDataIdentifier&gt;&amp;, bool wasSuccessful);
      void didFinishActivation();
      void contextTerminated();
      WEBCORE_EXPORT Optional&lt;ServiceWorkerClientData&gt; findClientByIdentifier(const ServiceWorkerClientIdentifier&amp;) const;
      void matchAll(const ServiceWorkerClientQueryOptions&amp;, ServiceWorkerClientsMatchAllCallback&amp;&amp;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -110,28 +110,39 @@</span>
      const RegistrableDomain&amp; registrableDomain() const { return m_registrableDomain; }
  
      WEBCORE_EXPORT SWServerToContextConnection* contextConnection();
      String userAgent() const;
  
<span class="udiff-line-added">+     bool shouldSkipFetchEvent() const { return m_shouldSkipHandleFetch; }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     SWServerRegistration* registration() const;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     void setHasTimedOutAnyFetchTasks() { m_hasTimedOutAnyFetchTasks = true; }</span>
<span class="udiff-line-added">+     bool hasTimedOutAnyFetchTasks() const { return m_hasTimedOutAnyFetchTasks; }</span>
<span class="udiff-line-added">+     void didFailHeartBeatCheck();</span>
<span class="udiff-line-added">+ </span>
  private:
      SWServerWorker(SWServer&amp;, SWServerRegistration&amp;, const URL&amp;, const String&amp; script, const ContentSecurityPolicyResponseHeaders&amp;, String&amp;&amp; referrerPolicy, WorkerType, ServiceWorkerIdentifier, HashMap&lt;URL, ServiceWorkerContextData::ImportedScript&gt;&amp;&amp;);
  
      void callWhenActivatedHandler(bool success);
  
      WeakPtr&lt;SWServer&gt; m_server;
      ServiceWorkerRegistrationKey m_registrationKey;
<span class="udiff-line-added">+     WeakPtr&lt;SWServerRegistration&gt; m_registration;</span>
      ServiceWorkerData m_data;
      String m_script;
      ContentSecurityPolicyResponseHeaders m_contentSecurityPolicy;
      String m_referrerPolicy;
      bool m_hasPendingEvents { false };
      State m_state { State::NotRunning };
      mutable Optional&lt;ClientOrigin&gt; m_origin;
      RegistrableDomain m_registrableDomain;
      bool m_isSkipWaitingFlagSet { false };
<span class="udiff-line-modified-removed">-     Vector&lt;Function&lt;void(bool)&gt;&gt; m_whenActivatedHandlers;</span>
<span class="udiff-line-modified-added">+     Vector&lt;CompletionHandler&lt;void(bool)&gt;&gt; m_whenActivatedHandlers;</span>
      HashMap&lt;URL, ServiceWorkerContextData::ImportedScript&gt; m_scriptResourceMap;
<span class="udiff-line-added">+     bool m_shouldSkipHandleFetch;</span>
<span class="udiff-line-added">+     bool m_hasTimedOutAnyFetchTasks { false };</span>
  };
  
  } // namespace WebCore
  
  #endif // ENABLE(SERVICE_WORKER)
</pre>
<center><a href="SWServerWorker.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../worklets/PaintWorkletGlobalScope.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>