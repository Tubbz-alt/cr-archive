<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/contentextensions/DFABytecodeCompiler.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ContentExtensionsBackend.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DFAMinimizer.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/contentextensions/DFABytecodeCompiler.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
231     Transitions transitions;
232 
233     uint32_t destinations[128];
234     memset(destinations, 0xff, sizeof(destinations));
235     const uint32_t noDestination = std::numeric_limits&lt;uint32_t&gt;::max();
236 
237     transitions.useFallbackTransition = node.canUseFallbackTransition(m_dfa);
238     if (transitions.useFallbackTransition)
239         transitions.fallbackTransitionTarget = node.bestFallbackTarget(m_dfa);
240 
241     for (const auto&amp; transition : node.transitions(m_dfa)) {
242         uint32_t targetNodeIndex = transition.target();
243         if (transitions.useFallbackTransition &amp;&amp; transitions.fallbackTransitionTarget == targetNodeIndex)
244             continue;
245 
246         for (uint16_t i = transition.range().first; i &lt;= transition.range().last; ++i)
247             destinations[i] = targetNodeIndex;
248     }
249 
250     Vector&lt;Range&gt;&amp; ranges = transitions.ranges;
<span class="line-modified">251     uint8_t rangeMin;</span>
252     bool hasRangeMin = false;
253     for (uint8_t i = 0; i &lt; 128; i++) {
254         if (hasRangeMin) {
255             if (destinations[i] != destinations[rangeMin]) {
256 
257                 // This is the end of a range. Check if it can be case insensitive.
258                 uint8_t rangeMax = i - 1;
259                 bool caseSensitive = true;
260                 if (rangeMin &gt;= &#39;A&#39; &amp;&amp; rangeMax &lt;= &#39;Z&#39;) {
261                     caseSensitive = false;
262                     for (uint8_t rangeIndex = rangeMin; rangeIndex &lt;= rangeMax; rangeIndex++) {
263                         if (destinations[rangeMin] != destinations[toASCIILower(rangeIndex)]) {
264                             caseSensitive = true;
265                             break;
266                         }
267                     }
268                 }
269 
270                 if (!caseSensitive) {
271                     // If all the lower-case destinations are the same as the upper-case destinations,
</pre>
</td>
<td>
<hr />
<pre>
231     Transitions transitions;
232 
233     uint32_t destinations[128];
234     memset(destinations, 0xff, sizeof(destinations));
235     const uint32_t noDestination = std::numeric_limits&lt;uint32_t&gt;::max();
236 
237     transitions.useFallbackTransition = node.canUseFallbackTransition(m_dfa);
238     if (transitions.useFallbackTransition)
239         transitions.fallbackTransitionTarget = node.bestFallbackTarget(m_dfa);
240 
241     for (const auto&amp; transition : node.transitions(m_dfa)) {
242         uint32_t targetNodeIndex = transition.target();
243         if (transitions.useFallbackTransition &amp;&amp; transitions.fallbackTransitionTarget == targetNodeIndex)
244             continue;
245 
246         for (uint16_t i = transition.range().first; i &lt;= transition.range().last; ++i)
247             destinations[i] = targetNodeIndex;
248     }
249 
250     Vector&lt;Range&gt;&amp; ranges = transitions.ranges;
<span class="line-modified">251     uint8_t rangeMin = 0;</span>
252     bool hasRangeMin = false;
253     for (uint8_t i = 0; i &lt; 128; i++) {
254         if (hasRangeMin) {
255             if (destinations[i] != destinations[rangeMin]) {
256 
257                 // This is the end of a range. Check if it can be case insensitive.
258                 uint8_t rangeMax = i - 1;
259                 bool caseSensitive = true;
260                 if (rangeMin &gt;= &#39;A&#39; &amp;&amp; rangeMax &lt;= &#39;Z&#39;) {
261                     caseSensitive = false;
262                     for (uint8_t rangeIndex = rangeMin; rangeIndex &lt;= rangeMax; rangeIndex++) {
263                         if (destinations[rangeMin] != destinations[toASCIILower(rangeIndex)]) {
264                             caseSensitive = true;
265                             break;
266                         }
267                     }
268                 }
269 
270                 if (!caseSensitive) {
271                     // If all the lower-case destinations are the same as the upper-case destinations,
</pre>
</td>
</tr>
</table>
<center><a href="ContentExtensionsBackend.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DFAMinimizer.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>