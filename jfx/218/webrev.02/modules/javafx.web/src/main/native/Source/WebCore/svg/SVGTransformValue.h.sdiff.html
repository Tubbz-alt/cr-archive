<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/svg/SVGTransformValue.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SVGTransformList.idl.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SVGURIReference.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/svg/SVGTransformValue.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
  2  * Copyright (C) 2004, 2005, 2008 Nikolas Zimmermann &lt;zimmermann@kde.org&gt;
  3  * Copyright (C) 2004, 2005 Rob Buis &lt;buis@kde.org&gt;
<span class="line-modified">  4  * Copyright (C) 2019 Apple Inc.  All rights reserved.</span>
  5  *
  6  * This library is free software; you can redistribute it and/or
  7  * modify it under the terms of the GNU Library General Public
  8  * License as published by the Free Software Foundation; either
  9  * version 2 of the License, or (at your option) any later version.
 10  *
 11  * This library is distributed in the hope that it will be useful,
 12  * but WITHOUT ANY WARRANTY; without even the implied warranty of
 13  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 14  * Library General Public License for more details.
 15  *
 16  * You should have received a copy of the GNU Library General Public License
 17  * along with this library; see the file COPYING.LIB.  If not, write to
 18  * the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 19  * Boston, MA 02110-1301, USA.
 20  */
 21 
 22 #pragma once
 23 
 24 #include &quot;FloatConversion.h&quot;
</pre>
<hr />
<pre>
189             break;
190         case SVG_TRANSFORM_TRANSLATE:
191             appendTranslate(builder);
192             break;
193         case SVG_TRANSFORM_SCALE:
194             appendScale(builder);
195             break;
196         case SVG_TRANSFORM_ROTATE:
197             appendRotate(builder);
198             break;
199         case SVG_TRANSFORM_SKEWX:
200             appendSkewX(builder);
201             break;
202         case SVG_TRANSFORM_SKEWY:
203             appendSkewY(builder);
204             break;
205         }
206         return builder.toString();
207     }
208 
<span class="line-modified">209     static String prefixForTransfromType(SVGTransformType type)</span>
210     {
211         switch (type) {
212         case SVG_TRANSFORM_UNKNOWN:
<span class="line-modified">213             return emptyString();</span>
214         case SVG_TRANSFORM_MATRIX:
<span class="line-modified">215             return &quot;matrix(&quot;_s;</span>
216         case SVG_TRANSFORM_TRANSLATE:
<span class="line-modified">217             return &quot;translate(&quot;_s;</span>
218         case SVG_TRANSFORM_SCALE:
<span class="line-modified">219             return &quot;scale(&quot;_s;</span>
220         case SVG_TRANSFORM_ROTATE:
<span class="line-modified">221             return &quot;rotate(&quot;_s;</span>
222         case SVG_TRANSFORM_SKEWX:
<span class="line-modified">223             return &quot;skewX(&quot;_s;</span>
224         case SVG_TRANSFORM_SKEWY:
<span class="line-modified">225             return &quot;skewY(&quot;_s;</span>
226         }
227         ASSERT_NOT_REACHED();
<span class="line-modified">228         return emptyString();</span>
229     }
230 
231 private:
232     static void appendFixedPrecisionNumbers(StringBuilder&amp; builder)
233     {
234         builder.append(&#39;)&#39;);
235     }
236 
237     template&lt;typename Number, typename... Numbers&gt;
238     static void appendFixedPrecisionNumbers(StringBuilder&amp; builder, Number number, Numbers... numbers)
239     {
240         if (builder.length() &amp;&amp; builder[builder.length() - 1] != &#39;(&#39;)
241             builder.append(&#39; &#39;);
<span class="line-modified">242         builder.appendFixedPrecisionNumber(number);</span>

243         appendFixedPrecisionNumbers(builder, numbers...);
244     }
245 
246     void appendMatrix(StringBuilder&amp; builder) const
247     {
248         appendFixedPrecisionNumbers(builder, m_matrix-&gt;a(), m_matrix-&gt;b(), m_matrix-&gt;c(), m_matrix-&gt;d(), m_matrix-&gt;e(), m_matrix-&gt;f());
249     }
250 
251     void appendTranslate(StringBuilder&amp; builder) const
252     {
253         appendFixedPrecisionNumbers(builder, m_matrix-&gt;e(), m_matrix-&gt;f());
254     }
255 
256     void appendScale(StringBuilder&amp; builder) const
257     {
258         appendFixedPrecisionNumbers(builder, m_matrix-&gt;value().xScale(), m_matrix-&gt;value().yScale());
259     }
260 
261     void appendRotate(StringBuilder&amp; builder) const
262     {
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
  2  * Copyright (C) 2004, 2005, 2008 Nikolas Zimmermann &lt;zimmermann@kde.org&gt;
  3  * Copyright (C) 2004, 2005 Rob Buis &lt;buis@kde.org&gt;
<span class="line-modified">  4  * Copyright (C) 2019 Apple Inc. All rights reserved.</span>
  5  *
  6  * This library is free software; you can redistribute it and/or
  7  * modify it under the terms of the GNU Library General Public
  8  * License as published by the Free Software Foundation; either
  9  * version 2 of the License, or (at your option) any later version.
 10  *
 11  * This library is distributed in the hope that it will be useful,
 12  * but WITHOUT ANY WARRANTY; without even the implied warranty of
 13  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 14  * Library General Public License for more details.
 15  *
 16  * You should have received a copy of the GNU Library General Public License
 17  * along with this library; see the file COPYING.LIB.  If not, write to
 18  * the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 19  * Boston, MA 02110-1301, USA.
 20  */
 21 
 22 #pragma once
 23 
 24 #include &quot;FloatConversion.h&quot;
</pre>
<hr />
<pre>
189             break;
190         case SVG_TRANSFORM_TRANSLATE:
191             appendTranslate(builder);
192             break;
193         case SVG_TRANSFORM_SCALE:
194             appendScale(builder);
195             break;
196         case SVG_TRANSFORM_ROTATE:
197             appendRotate(builder);
198             break;
199         case SVG_TRANSFORM_SKEWX:
200             appendSkewX(builder);
201             break;
202         case SVG_TRANSFORM_SKEWY:
203             appendSkewY(builder);
204             break;
205         }
206         return builder.toString();
207     }
208 
<span class="line-modified">209     static const char* prefixForTransfromType(SVGTransformType type)</span>
210     {
211         switch (type) {
212         case SVG_TRANSFORM_UNKNOWN:
<span class="line-modified">213             return &quot;&quot;;</span>
214         case SVG_TRANSFORM_MATRIX:
<span class="line-modified">215             return &quot;matrix(&quot;;</span>
216         case SVG_TRANSFORM_TRANSLATE:
<span class="line-modified">217             return &quot;translate(&quot;;</span>
218         case SVG_TRANSFORM_SCALE:
<span class="line-modified">219             return &quot;scale(&quot;;</span>
220         case SVG_TRANSFORM_ROTATE:
<span class="line-modified">221             return &quot;rotate(&quot;;</span>
222         case SVG_TRANSFORM_SKEWX:
<span class="line-modified">223             return &quot;skewX(&quot;;</span>
224         case SVG_TRANSFORM_SKEWY:
<span class="line-modified">225             return &quot;skewY(&quot;;</span>
226         }
227         ASSERT_NOT_REACHED();
<span class="line-modified">228         return &quot;&quot;;</span>
229     }
230 
231 private:
232     static void appendFixedPrecisionNumbers(StringBuilder&amp; builder)
233     {
234         builder.append(&#39;)&#39;);
235     }
236 
237     template&lt;typename Number, typename... Numbers&gt;
238     static void appendFixedPrecisionNumbers(StringBuilder&amp; builder, Number number, Numbers... numbers)
239     {
240         if (builder.length() &amp;&amp; builder[builder.length() - 1] != &#39;(&#39;)
241             builder.append(&#39; &#39;);
<span class="line-modified">242         // FIXME: Shortest form would be better, but fixed precision is required for now to smooth over precision errors caused by converting float to double and back since we use AffineTransform to store transforms.</span>
<span class="line-added">243         builder.append(FormattedNumber::fixedPrecision(number));</span>
244         appendFixedPrecisionNumbers(builder, numbers...);
245     }
246 
247     void appendMatrix(StringBuilder&amp; builder) const
248     {
249         appendFixedPrecisionNumbers(builder, m_matrix-&gt;a(), m_matrix-&gt;b(), m_matrix-&gt;c(), m_matrix-&gt;d(), m_matrix-&gt;e(), m_matrix-&gt;f());
250     }
251 
252     void appendTranslate(StringBuilder&amp; builder) const
253     {
254         appendFixedPrecisionNumbers(builder, m_matrix-&gt;e(), m_matrix-&gt;f());
255     }
256 
257     void appendScale(StringBuilder&amp; builder) const
258     {
259         appendFixedPrecisionNumbers(builder, m_matrix-&gt;value().xScale(), m_matrix-&gt;value().yScale());
260     }
261 
262     void appendRotate(StringBuilder&amp; builder) const
263     {
</pre>
</td>
</tr>
</table>
<center><a href="SVGTransformList.idl.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SVGURIReference.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>