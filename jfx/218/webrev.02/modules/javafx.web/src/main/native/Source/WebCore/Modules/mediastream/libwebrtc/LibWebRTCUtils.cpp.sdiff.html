<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/mediastream/libwebrtc/LibWebRTCUtils.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="LibWebRTCStatsCollector.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="LibWebRTCUtils.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/mediastream/libwebrtc/LibWebRTCUtils.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 17  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 18  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 19  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 20  * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 21  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 22  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 23  */
 24 
 25 #include &quot;config.h&quot;
 26 #include &quot;LibWebRTCUtils.h&quot;
 27 
 28 #if USE(LIBWEBRTC)
 29 
 30 #include &quot;LibWebRTCMacros.h&quot;
 31 #include &quot;RTCPeerConnection.h&quot;
 32 #include &quot;RTCRtpSendParameters.h&quot;
 33 #include &lt;wtf/text/WTFString.h&gt;
 34 
 35 ALLOW_UNUSED_PARAMETERS_BEGIN
 36 
<span class="line-modified"> 37 #include &lt;webrtc/api/rtpparameters.h&gt;</span>
<span class="line-modified"> 38 #include &lt;webrtc/api/rtptransceiverinterface.h&gt;</span>
 39 
 40 ALLOW_UNUSED_PARAMETERS_END
 41 
 42 namespace WebCore {
 43 
 44 static inline RTCRtpEncodingParameters toRTCEncodingParameters(const webrtc::RtpEncodingParameters&amp; rtcParameters)
 45 {
 46     RTCRtpEncodingParameters parameters;
 47 
 48     if (rtcParameters.ssrc)
 49         parameters.ssrc = *rtcParameters.ssrc;
 50     if (rtcParameters.rtx &amp;&amp; rtcParameters.rtx-&gt;ssrc)
 51         parameters.rtx.ssrc = *rtcParameters.rtx-&gt;ssrc;
 52     if (rtcParameters.fec &amp;&amp; rtcParameters.fec-&gt;ssrc)
 53         parameters.fec.ssrc = *rtcParameters.fec-&gt;ssrc;
 54     if (rtcParameters.dtx) {
 55         switch (*rtcParameters.dtx) {
 56         case webrtc::DtxStatus::DISABLED:
 57             parameters.dtx = RTCDtxStatus::Disabled;
 58             break;
</pre>
<hr />
<pre>
216     case RTCRtpTransceiverDirection::Sendonly:
217         return webrtc::RtpTransceiverDirection::kSendOnly;
218     case RTCRtpTransceiverDirection::Recvonly:
219         return webrtc::RtpTransceiverDirection::kRecvOnly;
220     case RTCRtpTransceiverDirection::Inactive:
221         return webrtc::RtpTransceiverDirection::kInactive;
222     };
223 
224     RELEASE_ASSERT_NOT_REACHED();
225 }
226 
227 webrtc::RtpTransceiverInit fromRtpTransceiverInit(const RTCRtpTransceiverInit&amp; init)
228 {
229     webrtc::RtpTransceiverInit rtcInit;
230     rtcInit.direction = fromRTCRtpTransceiverDirection(init.direction);
231     for (auto&amp; stream : init.streams)
232         rtcInit.stream_ids.push_back(stream-&gt;id().utf8().data());
233     return rtcInit;
234 }
235 



























236 } // namespace WebCore
237 
238 #endif // USE(LIBWEBRTC)
</pre>
</td>
<td>
<hr />
<pre>
 17  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 18  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 19  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 20  * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 21  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 22  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 23  */
 24 
 25 #include &quot;config.h&quot;
 26 #include &quot;LibWebRTCUtils.h&quot;
 27 
 28 #if USE(LIBWEBRTC)
 29 
 30 #include &quot;LibWebRTCMacros.h&quot;
 31 #include &quot;RTCPeerConnection.h&quot;
 32 #include &quot;RTCRtpSendParameters.h&quot;
 33 #include &lt;wtf/text/WTFString.h&gt;
 34 
 35 ALLOW_UNUSED_PARAMETERS_BEGIN
 36 
<span class="line-modified"> 37 #include &lt;webrtc/api/rtp_parameters.h&gt;</span>
<span class="line-modified"> 38 #include &lt;webrtc/api/rtp_transceiver_interface.h&gt;</span>
 39 
 40 ALLOW_UNUSED_PARAMETERS_END
 41 
 42 namespace WebCore {
 43 
 44 static inline RTCRtpEncodingParameters toRTCEncodingParameters(const webrtc::RtpEncodingParameters&amp; rtcParameters)
 45 {
 46     RTCRtpEncodingParameters parameters;
 47 
 48     if (rtcParameters.ssrc)
 49         parameters.ssrc = *rtcParameters.ssrc;
 50     if (rtcParameters.rtx &amp;&amp; rtcParameters.rtx-&gt;ssrc)
 51         parameters.rtx.ssrc = *rtcParameters.rtx-&gt;ssrc;
 52     if (rtcParameters.fec &amp;&amp; rtcParameters.fec-&gt;ssrc)
 53         parameters.fec.ssrc = *rtcParameters.fec-&gt;ssrc;
 54     if (rtcParameters.dtx) {
 55         switch (*rtcParameters.dtx) {
 56         case webrtc::DtxStatus::DISABLED:
 57             parameters.dtx = RTCDtxStatus::Disabled;
 58             break;
</pre>
<hr />
<pre>
216     case RTCRtpTransceiverDirection::Sendonly:
217         return webrtc::RtpTransceiverDirection::kSendOnly;
218     case RTCRtpTransceiverDirection::Recvonly:
219         return webrtc::RtpTransceiverDirection::kRecvOnly;
220     case RTCRtpTransceiverDirection::Inactive:
221         return webrtc::RtpTransceiverDirection::kInactive;
222     };
223 
224     RELEASE_ASSERT_NOT_REACHED();
225 }
226 
227 webrtc::RtpTransceiverInit fromRtpTransceiverInit(const RTCRtpTransceiverInit&amp; init)
228 {
229     webrtc::RtpTransceiverInit rtcInit;
230     rtcInit.direction = fromRTCRtpTransceiverDirection(init.direction);
231     for (auto&amp; stream : init.streams)
232         rtcInit.stream_ids.push_back(stream-&gt;id().utf8().data());
233     return rtcInit;
234 }
235 
<span class="line-added">236 ExceptionCode toExceptionCode(webrtc::RTCErrorType type)</span>
<span class="line-added">237 {</span>
<span class="line-added">238     switch (type) {</span>
<span class="line-added">239     case webrtc::RTCErrorType::INVALID_PARAMETER:</span>
<span class="line-added">240         return InvalidAccessError;</span>
<span class="line-added">241     case webrtc::RTCErrorType::INVALID_RANGE:</span>
<span class="line-added">242         return RangeError;</span>
<span class="line-added">243     case webrtc::RTCErrorType::SYNTAX_ERROR:</span>
<span class="line-added">244         return SyntaxError;</span>
<span class="line-added">245     case webrtc::RTCErrorType::INVALID_STATE:</span>
<span class="line-added">246         return InvalidStateError;</span>
<span class="line-added">247     case webrtc::RTCErrorType::INVALID_MODIFICATION:</span>
<span class="line-added">248         return InvalidModificationError;</span>
<span class="line-added">249     case webrtc::RTCErrorType::NETWORK_ERROR:</span>
<span class="line-added">250         return NetworkError;</span>
<span class="line-added">251     default:</span>
<span class="line-added">252         return OperationError;</span>
<span class="line-added">253     }</span>
<span class="line-added">254 }</span>
<span class="line-added">255 </span>
<span class="line-added">256 Exception toException(const webrtc::RTCError&amp; error)</span>
<span class="line-added">257 {</span>
<span class="line-added">258     ASSERT(!error.ok());</span>
<span class="line-added">259 </span>
<span class="line-added">260     return Exception { toExceptionCode(error.type()), error.message() };</span>
<span class="line-added">261 }</span>
<span class="line-added">262 </span>
263 } // namespace WebCore
264 
265 #endif // USE(LIBWEBRTC)
</pre>
</td>
</tr>
</table>
<center><a href="LibWebRTCStatsCollector.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="LibWebRTCUtils.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>