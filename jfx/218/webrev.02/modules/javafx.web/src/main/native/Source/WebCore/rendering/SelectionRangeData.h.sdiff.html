<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/rendering/SelectionRangeData.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SelectionRangeData.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SimpleLineLayout.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/rendering/SelectionRangeData.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 33 #include &quot;RenderSelectionInfo.h&quot;
 34 
 35 #if ENABLE(SERVICE_CONTROLS)
 36 #include &quot;SelectionRectGatherer.h&quot;
 37 #endif
 38 
 39 namespace WebCore {
 40 
 41 struct OldSelectionData;
 42 
 43 class SelectionRangeData {
 44 public:
 45     SelectionRangeData(RenderView&amp;);
 46 
 47     class Context {
 48     public:
 49         Context() = default;
 50         Context(RenderObject* start, RenderObject* end, unsigned startOffset, unsigned endOffset)
 51             : m_start(makeWeakPtr(start))
 52             , m_end(makeWeakPtr(end))
<span class="line-modified"> 53             , m_startPosition(startOffset)</span>
<span class="line-modified"> 54             , m_endPosition(endOffset)</span>
 55         {
 56         }
 57 
 58         RenderObject* start() const { return m_start.get(); }
 59         RenderObject* end() const { return m_end.get(); }
<span class="line-modified"> 60         Optional&lt;unsigned&gt; startPosition() const { return m_startPosition; }</span>
<span class="line-modified"> 61         Optional&lt;unsigned&gt; endPosition() const { return m_endPosition; }</span>
 62 
 63         bool operator==(const Context&amp; other) const
 64         {
<span class="line-modified"> 65             return m_start == other.m_start &amp;&amp; m_end == other.m_end &amp;&amp; m_startPosition == other.m_startPosition &amp;&amp; m_endPosition == other.m_endPosition;</span>
 66         }
 67 
 68     private:
 69         WeakPtr&lt;RenderObject&gt; m_start;
 70         WeakPtr&lt;RenderObject&gt; m_end;
<span class="line-modified"> 71         Optional&lt;unsigned&gt; m_startPosition;</span>
<span class="line-modified"> 72         Optional&lt;unsigned&gt; m_endPosition;</span>
 73     };
 74 


 75     enum class RepaintMode { NewXOROld, NewMinusOld, Nothing };
 76     void set(const Context&amp;, RepaintMode = RepaintMode::NewXOROld);
 77     const Context&amp; get() const { return m_selectionContext; }
 78 
 79     RenderObject* start() const { return m_selectionContext.start(); }
 80     RenderObject* end() const { return m_selectionContext.end(); }
 81 
<span class="line-modified"> 82     unsigned startPosition() const { ASSERT(m_selectionContext.startPosition()); return m_selectionContext.startPosition().valueOr(0); }</span>
<span class="line-modified"> 83     unsigned endPosition() const { ASSERT(m_selectionContext.endPosition()); return m_selectionContext.endPosition().valueOr(0); }</span>
 84 
 85     void clear();
 86     IntRect bounds() const { return collectBounds(ClipToVisibleContent::No); }
 87     IntRect boundsClippedToVisibleContent() const { return collectBounds(ClipToVisibleContent::Yes); }
 88     void repaint() const;
 89 


 90 private:
 91     enum class ClipToVisibleContent { Yes, No };
 92     IntRect collectBounds(ClipToVisibleContent) const;
 93     void apply(const Context&amp;, RepaintMode);
 94 
 95     const RenderView&amp; m_renderView;
 96 #if ENABLE(SERVICE_CONTROLS)
 97     SelectionRectGatherer m_selectionRectGatherer;
 98 #endif
 99     Context m_selectionContext;
100     bool m_selectionWasCaret { false };
101 };
102 
103 } // namespace WebCore
</pre>
</td>
<td>
<hr />
<pre>
 33 #include &quot;RenderSelectionInfo.h&quot;
 34 
 35 #if ENABLE(SERVICE_CONTROLS)
 36 #include &quot;SelectionRectGatherer.h&quot;
 37 #endif
 38 
 39 namespace WebCore {
 40 
 41 struct OldSelectionData;
 42 
 43 class SelectionRangeData {
 44 public:
 45     SelectionRangeData(RenderView&amp;);
 46 
 47     class Context {
 48     public:
 49         Context() = default;
 50         Context(RenderObject* start, RenderObject* end, unsigned startOffset, unsigned endOffset)
 51             : m_start(makeWeakPtr(start))
 52             , m_end(makeWeakPtr(end))
<span class="line-modified"> 53             , m_startOffset(startOffset)</span>
<span class="line-modified"> 54             , m_endOffset(endOffset)</span>
 55         {
 56         }
 57 
 58         RenderObject* start() const { return m_start.get(); }
 59         RenderObject* end() const { return m_end.get(); }
<span class="line-modified"> 60         Optional&lt;unsigned&gt; startOffset() const { return m_startOffset; }</span>
<span class="line-modified"> 61         Optional&lt;unsigned&gt; endOffset() const { return m_endOffset; }</span>
 62 
 63         bool operator==(const Context&amp; other) const
 64         {
<span class="line-modified"> 65             return m_start == other.m_start &amp;&amp; m_end == other.m_end &amp;&amp; m_startOffset == other.m_startOffset &amp;&amp; m_endOffset == other.m_endOffset;</span>
 66         }
 67 
 68     private:
 69         WeakPtr&lt;RenderObject&gt; m_start;
 70         WeakPtr&lt;RenderObject&gt; m_end;
<span class="line-modified"> 71         Optional&lt;unsigned&gt; m_startOffset;</span>
<span class="line-modified"> 72         Optional&lt;unsigned&gt; m_endOffset;</span>
 73     };
 74 
<span class="line-added"> 75     void setContext(const Context&amp;);</span>
<span class="line-added"> 76 </span>
 77     enum class RepaintMode { NewXOROld, NewMinusOld, Nothing };
 78     void set(const Context&amp;, RepaintMode = RepaintMode::NewXOROld);
 79     const Context&amp; get() const { return m_selectionContext; }
 80 
 81     RenderObject* start() const { return m_selectionContext.start(); }
 82     RenderObject* end() const { return m_selectionContext.end(); }
 83 
<span class="line-modified"> 84     unsigned startOffset() const { ASSERT(m_selectionContext.startOffset()); return m_selectionContext.startOffset().valueOr(0); }</span>
<span class="line-modified"> 85     unsigned endOffset() const { ASSERT(m_selectionContext.endOffset()); return m_selectionContext.endOffset().valueOr(0); }</span>
 86 
 87     void clear();
 88     IntRect bounds() const { return collectBounds(ClipToVisibleContent::No); }
 89     IntRect boundsClippedToVisibleContent() const { return collectBounds(ClipToVisibleContent::Yes); }
 90     void repaint() const;
 91 
<span class="line-added"> 92     RenderObject::SelectionState selectionStateForRenderer(RenderObject&amp;);</span>
<span class="line-added"> 93 </span>
 94 private:
 95     enum class ClipToVisibleContent { Yes, No };
 96     IntRect collectBounds(ClipToVisibleContent) const;
 97     void apply(const Context&amp;, RepaintMode);
 98 
 99     const RenderView&amp; m_renderView;
100 #if ENABLE(SERVICE_CONTROLS)
101     SelectionRectGatherer m_selectionRectGatherer;
102 #endif
103     Context m_selectionContext;
104     bool m_selectionWasCaret { false };
105 };
106 
107 } // namespace WebCore
</pre>
</td>
</tr>
</table>
<center><a href="SelectionRangeData.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SimpleLineLayout.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>