<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/WebCore/Modules/mediastream/RTCStatsReport.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (C) 2012 Google Inc. All rights reserved.
  3  * Copyright (C) 2017 Apple Inc. All rights reserved.
  4  *
  5  * Redistribution and use in source and binary forms, with or without
  6  * modification, are permitted provided that the following conditions
  7  * are met:
  8  * 1.  Redistributions of source code must retain the above copyright
  9  *     notice, this list of conditions and the following disclaimer.
 10  * 2.  Redistributions in binary form must reproduce the above copyright
 11  *     notice, this list of conditions and the following disclaimer in the
 12  *     documentation and/or other materials provided with the distribution.
 13  *
 14  * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS&#39;&#39; AND ANY
 15  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 16  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 17  * DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 18  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 19  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 20  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 21  * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 23  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #pragma once
 27 
<a name="1" id="anc1"></a><span class="line-modified"> 28 #include &quot;JSDOMMapLike.h&quot;</span>
 29 
 30 namespace WebCore {
 31 
<a name="2" id="anc2"></a>

 32 class RTCStatsReport : public RefCounted&lt;RTCStatsReport&gt; {
 33 public:
<a name="3" id="anc3"></a><span class="line-modified"> 34     static Ref&lt;RTCStatsReport&gt; create() { return adoptRef(*new RTCStatsReport); }</span>
<span class="line-modified"> 35 </span>
<span class="line-removed"> 36     void synchronizeBackingMap(Ref&lt;DOMMapLike&gt;&amp;&amp; mapLike) { m_mapLike = WTFMove(mapLike); }</span>
<span class="line-removed"> 37     DOMMapLike* backingMap() { return m_mapLike.get(); }</span>
<span class="line-removed"> 38 </span>
<span class="line-removed"> 39     template&lt;typename Value&gt; void addStats(typename Value::ParameterType&amp;&amp; value) { m_mapLike-&gt;set&lt;IDLDOMString, Value&gt;(value.id, std::forward&lt;typename Value::ParameterType&gt;(value)); }</span>
 40 
<a name="4" id="anc4"></a>
 41 
 42     enum class Type {
 43         Codec,
 44         InboundRtp,
 45         OutboundRtp,
 46         PeerConnection,
 47         DataChannel,
 48         Track,
 49         Transport,
 50         CandidatePair,
 51         LocalCandidate,
 52         RemoteCandidate,
 53         Certificate
 54     };
 55     struct Stats {
 56         double timestamp;
 57         Type type;
 58         String id;
 59     };
 60 
 61     struct RTCRTPStreamStats : Stats {
 62         Optional&lt;uint32_t&gt; ssrc;
 63         String associateStatsId;
 64         bool isRemote { false };
 65         String mediaType;
 66 
 67         String trackId;
 68         String transportId;
 69         String codecId;
 70         Optional&lt;uint32_t&gt; firCount;
 71         Optional&lt;uint32_t&gt; pliCount;
 72         Optional&lt;uint32_t&gt; nackCount;
 73         Optional&lt;uint32_t&gt; sliCount;
 74         Optional&lt;uint64_t&gt; qpSum;
 75     };
 76 
 77     struct InboundRTPStreamStats : RTCRTPStreamStats {
 78         InboundRTPStreamStats() { type = RTCStatsReport::Type::InboundRtp; }
 79 
 80         Optional&lt;uint32_t&gt; packetsReceived;
 81         Optional&lt;uint64_t&gt; bytesReceived;
 82         Optional&lt;uint32_t&gt; packetsLost;
 83         Optional&lt;double&gt; jitter;
 84         Optional&lt;double&gt; fractionLost;
 85         Optional&lt;uint32_t&gt; packetsDiscarded;
 86         Optional&lt;uint32_t&gt; packetsRepaired;
 87         Optional&lt;uint32_t&gt; burstPacketsLost;
 88         Optional&lt;uint32_t&gt; burstPacketsDiscarded;
 89         Optional&lt;uint32_t&gt; burstLossCount;
 90         Optional&lt;uint32_t&gt; burstDiscardCount;
 91         Optional&lt;double&gt; burstLossRate;
 92         Optional&lt;double&gt; burstDiscardRate;
 93         Optional&lt;double&gt; gapLossRate;
 94         Optional&lt;double&gt; gapDiscardRate;
 95         Optional&lt;uint32_t&gt; framesDecoded;
 96     };
 97 
 98     struct OutboundRTPStreamStats : RTCRTPStreamStats {
 99         OutboundRTPStreamStats() { type = RTCStatsReport::Type::OutboundRtp; }
100 
101         Optional&lt;uint32_t&gt; packetsSent;
102         Optional&lt;uint64_t&gt; bytesSent;
103         Optional&lt;double&gt; targetBitrate;
104         Optional&lt;uint32_t&gt; framesEncoded;
105     };
106 
107     struct MediaStreamTrackStats : Stats {
108         MediaStreamTrackStats() { type = RTCStatsReport::Type::Track; }
109 
110         String trackIdentifier;
111         Optional&lt;bool&gt; remoteSource;
112         Optional&lt;bool&gt; ended;
113         Optional&lt;bool&gt; detached;
114         Optional&lt;uint32_t&gt; frameWidth;
115         Optional&lt;uint32_t&gt; frameHeight;
116         Optional&lt;double&gt; framesPerSecond;
117         Optional&lt;uint32_t&gt; framesSent;
118         Optional&lt;uint32_t&gt; framesReceived;
119         Optional&lt;uint32_t&gt; framesDecoded;
120         Optional&lt;uint32_t&gt; framesDropped;
121         Optional&lt;uint32_t&gt; framesCorrupted;
122         Optional&lt;uint32_t&gt; partialFramesLost;
123         Optional&lt;uint32_t&gt; fullFramesLost;
124         Optional&lt;double&gt; audioLevel;
125         Optional&lt;double&gt; echoReturnLoss;
126         Optional&lt;double&gt; echoReturnLossEnhancement;
127     };
128 
129     struct DataChannelStats : Stats {
130         DataChannelStats() { type = RTCStatsReport::Type::DataChannel; }
131 
132         String label;
133         String protocol;
134         Optional&lt;int&gt; datachannelid;
135         String state;
136         Optional&lt;uint32_t&gt; messagesSent;
137         Optional&lt;uint64_t&gt; bytesSent;
138         Optional&lt;uint32_t&gt; messagesReceived;
139         Optional&lt;uint64_t&gt; bytesReceived;
140     };
141 
142     enum class IceCandidatePairState {
143         Frozen,
144         Waiting,
145         Inprogress,
146         Failed,
147         Succeeded,
148         Cancelled
149     };
150 
151     struct IceCandidatePairStats : Stats {
152         IceCandidatePairStats() { type = RTCStatsReport::Type::CandidatePair; }
153 
154         String transportId;
155         String localCandidateId;
156         String remoteCandidateId;
157         IceCandidatePairState state;
158         Optional&lt;uint64_t&gt; priority;
159         Optional&lt;bool&gt; nominated;
160         Optional&lt;bool&gt; writable;
161         Optional&lt;bool&gt; readable;
162         Optional&lt;uint64_t&gt; bytesSent;
163         Optional&lt;uint64_t&gt; bytesReceived;
164         Optional&lt;double&gt; totalRoundTripTime;
165         Optional&lt;double&gt; currentRoundTripTime;
166         Optional&lt;double&gt; availableOutgoingBitrate;
167         Optional&lt;double&gt; availableIncomingBitrate;
168         Optional&lt;uint64_t&gt; requestsReceived;
169         Optional&lt;uint64_t&gt; requestsSent;
170         Optional&lt;uint64_t&gt; responsesReceived;
171         Optional&lt;uint64_t&gt; responsesSent;
172         Optional&lt;uint64_t&gt; retransmissionsReceived;
173         Optional&lt;uint64_t&gt; retransmissionsSent;
174         Optional&lt;uint64_t&gt; consentRequestsReceived;
175         Optional&lt;uint64_t&gt; consentRequestsSent;
176         Optional&lt;uint64_t&gt; consentResponsesReceived;
177         Optional&lt;uint64_t&gt; consentResponsesSent;
178     };
179 
180     enum class IceCandidateType { Host, Srflx, Prflx, Relay };
181 
182     struct IceCandidateStats : Stats {
183         String transportId;
184         String address;
185         Optional&lt;int32_t&gt; port;
186         String protocol;
187         Optional&lt;IceCandidateType&gt; candidateType;
188         Optional&lt;int32_t&gt; priority;
189         String url;
190         bool deleted { false };
191     };
192 
193     struct CertificateStats : Stats {
194         CertificateStats() { type = RTCStatsReport::Type::Certificate; }
195 
196         String fingerprint;
197         String fingerprintAlgorithm;
198         String base64Certificate;
199         String issuerCertificateId;
200     };
201 
202     enum class CodecType {
203         Encode,
204         Decode
205     };
206 
207     struct CodecStats : Stats {
208         CodecStats() { type = RTCStatsReport::Type::Codec; }
209 
210         Optional&lt;uint32_t&gt; payloadType;
211         Optional&lt;CodecType&gt; codecType;
212         String transportId;
213         String mimeType;
214         Optional&lt;uint32_t&gt; clockRate;
215         Optional&lt;uint32_t&gt; channels;
216         String sdpFmtpLine;
217         String implementation;
218     };
219 
220     struct TransportStats : Stats {
221         TransportStats() { type = RTCStatsReport::Type::Transport; }
222 
223         Optional&lt;uint64_t&gt; bytesSent;
224         Optional&lt;uint64_t&gt; bytesReceived;
225         String rtcpTransportStatsId;
226         String selectedCandidatePairId;
227         String localCertificateId;
228         String remoteCertificateId;
229     };
230 
231     struct PeerConnectionStats : Stats {
232         PeerConnectionStats() { type = RTCStatsReport::Type::PeerConnection; }
233 
234         Optional&lt;uint32_t&gt; dataChannelsOpened;
235         Optional&lt;uint32_t&gt; dataChannelsClosed;
236     };
237 
238 private:
<a name="5" id="anc5"></a><span class="line-modified">239     RTCStatsReport() = default;</span>
240 
<a name="6" id="anc6"></a><span class="line-modified">241 private:</span>
<span class="line-removed">242     RefPtr&lt;DOMMapLike&gt; m_mapLike;</span>
243 };
244 
<a name="7" id="anc7"></a>




245 } // namespace WebCore
<a name="8" id="anc8"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="8" type="hidden" />
</body>
</html>