<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/platform/CalculationValue.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="CalculationValue.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ContentType.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/CalculationValue.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -47,18 +47,21 @@</span>
      Add = &#39;+&#39;,
      Subtract = &#39;-&#39;,
      Multiply = &#39;*&#39;,
      Divide = &#39;/&#39;,
      Min = 0,
<span class="udiff-line-modified-removed">-     Max = 1,</span>
<span class="udiff-line-modified-added">+     Max,</span>
<span class="udiff-line-added">+     Clamp,</span>
  };
  
  enum class CalcExpressionNodeType : uint8_t {
      Undefined,
      Number,
      Length,
      Operation,
<span class="udiff-line-added">+     Negation,</span>
<span class="udiff-line-added">+     Inversion,</span>
      BlendLength,
  };
  
  class CalcExpressionNode {
      WTF_MAKE_FAST_ALLOCATED;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -102,10 +105,52 @@</span>
      void dump(WTF::TextStream&amp;) const override;
  
      Length m_length;
  };
  
<span class="udiff-line-added">+ class CalcExpressionNegation final : public CalcExpressionNode {</span>
<span class="udiff-line-added">+ public:</span>
<span class="udiff-line-added">+     CalcExpressionNegation(std::unique_ptr&lt;CalcExpressionNode&gt;&amp;&amp; node)</span>
<span class="udiff-line-added">+         : CalcExpressionNode(CalcExpressionNodeType::Negation)</span>
<span class="udiff-line-added">+         , m_child(WTFMove(node))</span>
<span class="udiff-line-added">+     {</span>
<span class="udiff-line-added">+         ASSERT(m_child);</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     float evaluate(float maxValue) const final;</span>
<span class="udiff-line-added">+     bool operator==(const CalcExpressionNode&amp;) const final;</span>
<span class="udiff-line-added">+     void dump(WTF::TextStream&amp;) const final;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     const CalcExpressionNode* child() const { return m_child.get(); }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ private:</span>
<span class="udiff-line-added">+     std::unique_ptr&lt;CalcExpressionNode&gt; m_child;</span>
<span class="udiff-line-added">+ };</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ bool operator==(const CalcExpressionNegation&amp;, const CalcExpressionNegation&amp;);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ class CalcExpressionInversion final : public CalcExpressionNode {</span>
<span class="udiff-line-added">+ public:</span>
<span class="udiff-line-added">+     CalcExpressionInversion(std::unique_ptr&lt;CalcExpressionNode&gt;&amp;&amp; node)</span>
<span class="udiff-line-added">+         : CalcExpressionNode(CalcExpressionNodeType::Inversion)</span>
<span class="udiff-line-added">+         , m_child(WTFMove(node))</span>
<span class="udiff-line-added">+     {</span>
<span class="udiff-line-added">+         ASSERT(m_child);</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     float evaluate(float maxValue) const final;</span>
<span class="udiff-line-added">+     bool operator==(const CalcExpressionNode&amp;) const final;</span>
<span class="udiff-line-added">+     void dump(WTF::TextStream&amp;) const final;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     const CalcExpressionNode* child() const { return m_child.get(); }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ private:</span>
<span class="udiff-line-added">+     std::unique_ptr&lt;CalcExpressionNode&gt; m_child;</span>
<span class="udiff-line-added">+ };</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ bool operator==(const CalcExpressionInversion&amp;, const CalcExpressionInversion&amp;);</span>
<span class="udiff-line-added">+ </span>
  class CalcExpressionOperation final : public CalcExpressionNode {
  public:
      CalcExpressionOperation(Vector&lt;std::unique_ptr&lt;CalcExpressionNode&gt;&gt;&amp;&amp; children, CalcOperator);
  
      CalcOperator getOperator() const { return m_operator; }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -179,16 +224,10 @@</span>
  inline bool operator==(const CalcExpressionNumber&amp; a, const CalcExpressionNumber&amp; b)
  {
      return a.value() == b.value();
  }
  
<span class="udiff-line-removed">- inline const CalcExpressionNumber&amp; toCalcExpressionNumber(const CalcExpressionNode&amp; value)</span>
<span class="udiff-line-removed">- {</span>
<span class="udiff-line-removed">-     ASSERT_WITH_SECURITY_IMPLICATION(value.type() == CalcExpressionNodeType::Number);</span>
<span class="udiff-line-removed">-     return static_cast&lt;const CalcExpressionNumber&amp;&gt;(value);</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-removed">- </span>
  inline CalcExpressionLength::CalcExpressionLength(Length length)
      : CalcExpressionNode(CalcExpressionNodeType::Length)
      , m_length(length)
  {
  }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -196,42 +235,36 @@</span>
  inline bool operator==(const CalcExpressionLength&amp; a, const CalcExpressionLength&amp; b)
  {
      return a.length() == b.length();
  }
  
<span class="udiff-line-removed">- inline const CalcExpressionLength&amp; toCalcExpressionLength(const CalcExpressionNode&amp; value)</span>
<span class="udiff-line-removed">- {</span>
<span class="udiff-line-removed">-     ASSERT_WITH_SECURITY_IMPLICATION(value.type() == CalcExpressionNodeType::Length);</span>
<span class="udiff-line-removed">-     return static_cast&lt;const CalcExpressionLength&amp;&gt;(value);</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-removed">- </span>
  inline CalcExpressionOperation::CalcExpressionOperation(Vector&lt;std::unique_ptr&lt;CalcExpressionNode&gt;&gt;&amp;&amp; children, CalcOperator op)
      : CalcExpressionNode(CalcExpressionNodeType::Operation)
      , m_children(WTFMove(children))
      , m_operator(op)
  {
  }
  
  bool operator==(const CalcExpressionOperation&amp;, const CalcExpressionOperation&amp;);
  
<span class="udiff-line-removed">- inline const CalcExpressionOperation&amp; toCalcExpressionOperation(const CalcExpressionNode&amp; value)</span>
<span class="udiff-line-removed">- {</span>
<span class="udiff-line-removed">-     ASSERT_WITH_SECURITY_IMPLICATION(value.type() == CalcExpressionNodeType::Operation);</span>
<span class="udiff-line-removed">-     return static_cast&lt;const CalcExpressionOperation&amp;&gt;(value);</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-removed">- </span>
  inline bool operator==(const CalcExpressionBlendLength&amp; a, const CalcExpressionBlendLength&amp; b)
  {
      return a.progress() == b.progress() &amp;&amp; a.from() == b.from() &amp;&amp; a.to() == b.to();
  }
  
<span class="udiff-line-removed">- inline const CalcExpressionBlendLength&amp; toCalcExpressionBlendLength(const CalcExpressionNode&amp; value)</span>
<span class="udiff-line-removed">- {</span>
<span class="udiff-line-removed">-     ASSERT_WITH_SECURITY_IMPLICATION(value.type() == CalcExpressionNodeType::BlendLength);</span>
<span class="udiff-line-removed">-     return static_cast&lt;const CalcExpressionBlendLength&amp;&gt;(value);</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-removed">- </span>
  WTF::TextStream&amp; operator&lt;&lt;(WTF::TextStream&amp;, const CalculationValue&amp;);
  WTF::TextStream&amp; operator&lt;&lt;(WTF::TextStream&amp;, const CalcExpressionNode&amp;);
  WTF::TextStream&amp; operator&lt;&lt;(WTF::TextStream&amp;, CalcOperator);
  
  } // namespace WebCore
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ #define SPECIALIZE_TYPE_TRAITS_CALCEXPRESSION_NODE(ToValueTypeName, predicate) \</span>
<span class="udiff-line-added">+ SPECIALIZE_TYPE_TRAITS_BEGIN(WebCore::ToValueTypeName) \</span>
<span class="udiff-line-added">+     static bool isType(const WebCore::CalcExpressionNode&amp; node) { return node.predicate; } \</span>
<span class="udiff-line-added">+ SPECIALIZE_TYPE_TRAITS_END()</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ SPECIALIZE_TYPE_TRAITS_CALCEXPRESSION_NODE(CalcExpressionNumber, type() == WebCore::CalcExpressionNodeType::Number)</span>
<span class="udiff-line-added">+ SPECIALIZE_TYPE_TRAITS_CALCEXPRESSION_NODE(CalcExpressionLength, type() == WebCore::CalcExpressionNodeType::Length)</span>
<span class="udiff-line-added">+ SPECIALIZE_TYPE_TRAITS_CALCEXPRESSION_NODE(CalcExpressionOperation, type() == WebCore::CalcExpressionNodeType::Operation)</span>
<span class="udiff-line-added">+ SPECIALIZE_TYPE_TRAITS_CALCEXPRESSION_NODE(CalcExpressionNegation, type() == WebCore::CalcExpressionNodeType::Negation)</span>
<span class="udiff-line-added">+ SPECIALIZE_TYPE_TRAITS_CALCEXPRESSION_NODE(CalcExpressionInversion, type() == WebCore::CalcExpressionNodeType::Inversion)</span>
<span class="udiff-line-added">+ SPECIALIZE_TYPE_TRAITS_CALCEXPRESSION_NODE(CalcExpressionBlendLength, type() == WebCore::CalcExpressionNodeType::BlendLength)</span>
</pre>
<center><a href="CalculationValue.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ContentType.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>