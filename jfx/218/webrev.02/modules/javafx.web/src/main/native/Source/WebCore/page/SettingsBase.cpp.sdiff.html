<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/page/SettingsBase.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Settings.yaml.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SettingsBase.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/page/SettingsBase.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 10  *    notice, this list of conditions and the following disclaimer in the
 11  *    documentation and/or other materials provided with the distribution.
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #include &quot;config.h&quot;
 27 #include &quot;SettingsBase.h&quot;
 28 
 29 #include &quot;AudioSession.h&quot;

 30 #include &quot;BackForwardController.h&quot;
 31 #include &quot;CachedResourceLoader.h&quot;
 32 #include &quot;CookieStorage.h&quot;
 33 #include &quot;DOMTimer.h&quot;
 34 #include &quot;Database.h&quot;
 35 #include &quot;Document.h&quot;
 36 #include &quot;FontCascade.h&quot;
 37 #include &quot;FontGenericFamilies.h&quot;
 38 #include &quot;Frame.h&quot;
 39 #include &quot;FrameTree.h&quot;
 40 #include &quot;FrameView.h&quot;
 41 #include &quot;HistoryItem.h&quot;
 42 #include &quot;Page.h&quot;
<span class="line-removed"> 43 #include &quot;PageCache.h&quot;</span>
 44 #include &quot;RenderWidget.h&quot;
 45 #include &quot;RuntimeApplicationChecks.h&quot;
 46 #include &quot;Settings.h&quot;
 47 #include &quot;StorageMap.h&quot;
 48 #include &lt;limits&gt;
 49 #include &lt;wtf/StdLibExtras.h&gt;
 50 
 51 #if ENABLE(MEDIA_STREAM)
 52 #include &quot;MockRealtimeMediaSourceCenter.h&quot;
 53 #endif
 54 
 55 namespace WebCore {
 56 
 57 static void invalidateAfterGenericFamilyChange(Page* page)
 58 {
 59     invalidateFontCascadeCache();
 60     if (page)
 61         page-&gt;setNeedsRecalcStyleInAllFrames();
 62 }
 63 
</pre>
<hr />
<pre>
345 
346 #endif
347 
348 #if ENABLE(MEDIA_STREAM)
349 void SettingsBase::mockCaptureDevicesEnabledChanged()
350 {
351     bool enabled = false;
352     if (m_page)
353         enabled = m_page-&gt;settings().mockCaptureDevicesEnabled();
354 
355     MockRealtimeMediaSourceCenter::setMockRealtimeMediaSourceCenterEnabled(enabled);
356 }
357 #endif
358 
359 void SettingsBase::userStyleSheetLocationChanged()
360 {
361     if (m_page)
362         m_page-&gt;userStyleSheetLocationChanged();
363 }
364 
<span class="line-modified">365 void SettingsBase::usesPageCacheChanged()</span>
366 {
367     if (!m_page)
368         return;
369 
<span class="line-modified">370     if (!m_page-&gt;settings().usesPageCache())</span>
<span class="line-modified">371         PageCache::singleton().pruneToSizeNow(0, PruningReason::None);</span>
372 }
373 
374 void SettingsBase::dnsPrefetchingEnabledChanged()
375 {
376     if (m_page)
377         m_page-&gt;dnsPrefetchingStateChanged();
378 }
379 
380 void SettingsBase::storageBlockingPolicyChanged()
381 {
382     if (m_page)
383         m_page-&gt;storageBlockingStateChanged();
384 }
385 
386 void SettingsBase::backgroundShouldExtendBeyondPageChanged()
387 {
388     if (m_page)
389         m_page-&gt;mainFrame().view()-&gt;updateExtendBackgroundIfNecessary();
390 }
391 
</pre>
</td>
<td>
<hr />
<pre>
 10  *    notice, this list of conditions and the following disclaimer in the
 11  *    documentation and/or other materials provided with the distribution.
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #include &quot;config.h&quot;
 27 #include &quot;SettingsBase.h&quot;
 28 
 29 #include &quot;AudioSession.h&quot;
<span class="line-added"> 30 #include &quot;BackForwardCache.h&quot;</span>
 31 #include &quot;BackForwardController.h&quot;
 32 #include &quot;CachedResourceLoader.h&quot;
 33 #include &quot;CookieStorage.h&quot;
 34 #include &quot;DOMTimer.h&quot;
 35 #include &quot;Database.h&quot;
 36 #include &quot;Document.h&quot;
 37 #include &quot;FontCascade.h&quot;
 38 #include &quot;FontGenericFamilies.h&quot;
 39 #include &quot;Frame.h&quot;
 40 #include &quot;FrameTree.h&quot;
 41 #include &quot;FrameView.h&quot;
 42 #include &quot;HistoryItem.h&quot;
 43 #include &quot;Page.h&quot;

 44 #include &quot;RenderWidget.h&quot;
 45 #include &quot;RuntimeApplicationChecks.h&quot;
 46 #include &quot;Settings.h&quot;
 47 #include &quot;StorageMap.h&quot;
 48 #include &lt;limits&gt;
 49 #include &lt;wtf/StdLibExtras.h&gt;
 50 
 51 #if ENABLE(MEDIA_STREAM)
 52 #include &quot;MockRealtimeMediaSourceCenter.h&quot;
 53 #endif
 54 
 55 namespace WebCore {
 56 
 57 static void invalidateAfterGenericFamilyChange(Page* page)
 58 {
 59     invalidateFontCascadeCache();
 60     if (page)
 61         page-&gt;setNeedsRecalcStyleInAllFrames();
 62 }
 63 
</pre>
<hr />
<pre>
345 
346 #endif
347 
348 #if ENABLE(MEDIA_STREAM)
349 void SettingsBase::mockCaptureDevicesEnabledChanged()
350 {
351     bool enabled = false;
352     if (m_page)
353         enabled = m_page-&gt;settings().mockCaptureDevicesEnabled();
354 
355     MockRealtimeMediaSourceCenter::setMockRealtimeMediaSourceCenterEnabled(enabled);
356 }
357 #endif
358 
359 void SettingsBase::userStyleSheetLocationChanged()
360 {
361     if (m_page)
362         m_page-&gt;userStyleSheetLocationChanged();
363 }
364 
<span class="line-modified">365 void SettingsBase::usesBackForwardCacheChanged()</span>
366 {
367     if (!m_page)
368         return;
369 
<span class="line-modified">370     if (!m_page-&gt;settings().usesBackForwardCache())</span>
<span class="line-modified">371         BackForwardCache::singleton().pruneToSizeNow(0, PruningReason::None);</span>
372 }
373 
374 void SettingsBase::dnsPrefetchingEnabledChanged()
375 {
376     if (m_page)
377         m_page-&gt;dnsPrefetchingStateChanged();
378 }
379 
380 void SettingsBase::storageBlockingPolicyChanged()
381 {
382     if (m_page)
383         m_page-&gt;storageBlockingStateChanged();
384 }
385 
386 void SettingsBase::backgroundShouldExtendBeyondPageChanged()
387 {
388     if (m_page)
389         m_page-&gt;mainFrame().view()-&gt;updateExtendBackgroundIfNecessary();
390 }
391 
</pre>
</td>
</tr>
</table>
<center><a href="Settings.yaml.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SettingsBase.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>