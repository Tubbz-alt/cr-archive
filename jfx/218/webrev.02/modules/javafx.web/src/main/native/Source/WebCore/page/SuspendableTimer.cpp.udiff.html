<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/page/SuspendableTimer.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SettingsBase.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SuspendableTimer.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/page/SuspendableTimer.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -29,23 +29,23 @@</span>
  
  #include &quot;ScriptExecutionContext.h&quot;
  
  namespace WebCore {
  
<span class="udiff-line-modified-removed">- SuspendableTimer::SuspendableTimer(ScriptExecutionContext&amp; context)</span>
<span class="udiff-line-modified-removed">-     : ActiveDOMObject(&amp;context)</span>
<span class="udiff-line-modified-added">+ SuspendableTimerBase::SuspendableTimerBase(ScriptExecutionContext* context)</span>
<span class="udiff-line-modified-added">+     : ActiveDOMObject(context)</span>
  {
  }
  
<span class="udiff-line-modified-removed">- SuspendableTimer::~SuspendableTimer() = default;</span>
<span class="udiff-line-modified-added">+ SuspendableTimerBase::~SuspendableTimerBase() = default;</span>
  
<span class="udiff-line-modified-removed">- bool SuspendableTimer::hasPendingActivity() const</span>
<span class="udiff-line-modified-added">+ bool SuspendableTimerBase::hasPendingActivity() const</span>
  {
      return isActive();
  }
  
<span class="udiff-line-modified-removed">- void SuspendableTimer::stop()</span>
<span class="udiff-line-modified-added">+ void SuspendableTimerBase::stop()</span>
  {
      if (!m_suspended)
          TimerBase::stop();
  
      // Make it less likely that SuspendableTimer is accidentally revived and fires after being stopped.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -54,11 +54,11 @@</span>
      m_savedIsActive = false;
  
      didStop();
  }
  
<span class="udiff-line-modified-removed">- void SuspendableTimer::suspend(ReasonForSuspension)</span>
<span class="udiff-line-modified-added">+ void SuspendableTimerBase::suspend(ReasonForSuspension)</span>
  {
      ASSERT(!m_suspended);
      m_suspended = true;
  
      m_savedIsActive = TimerBase::isActive();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -67,68 +67,63 @@</span>
          m_savedRepeatInterval = TimerBase::repeatInterval();
          TimerBase::stop();
      }
  }
  
<span class="udiff-line-modified-removed">- void SuspendableTimer::resume()</span>
<span class="udiff-line-modified-added">+ void SuspendableTimerBase::resume()</span>
  {
      ASSERT(m_suspended);
      m_suspended = false;
  
      if (m_savedIsActive)
          start(m_savedNextFireInterval, m_savedRepeatInterval);
  }
  
<span class="udiff-line-modified-removed">- bool SuspendableTimer::canSuspendForDocumentSuspension() const</span>
<span class="udiff-line-modified-added">+ void SuspendableTimerBase::didStop()</span>
  {
<span class="udiff-line-removed">-     return true;</span>
  }
  
<span class="udiff-line-modified-removed">- void SuspendableTimer::didStop()</span>
<span class="udiff-line-removed">- {</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- void SuspendableTimer::cancel()</span>
<span class="udiff-line-modified-added">+ void SuspendableTimerBase::cancel()</span>
  {
      if (!m_suspended)
          TimerBase::stop();
      else
          m_suspended = false;
  }
  
<span class="udiff-line-modified-removed">- void SuspendableTimer::startRepeating(Seconds repeatInterval)</span>
<span class="udiff-line-modified-added">+ void SuspendableTimerBase::startRepeating(Seconds repeatInterval)</span>
  {
      if (!m_suspended)
          TimerBase::startRepeating(repeatInterval);
      else {
          m_savedIsActive = true;
          m_savedNextFireInterval = repeatInterval;
          m_savedRepeatInterval = repeatInterval;
      }
  }
  
<span class="udiff-line-modified-removed">- void SuspendableTimer::startOneShot(Seconds interval)</span>
<span class="udiff-line-modified-added">+ void SuspendableTimerBase::startOneShot(Seconds interval)</span>
  {
      if (!m_suspended)
          TimerBase::startOneShot(interval);
      else {
          m_savedIsActive = true;
          m_savedNextFireInterval = interval;
          m_savedRepeatInterval = 0_s;
      }
  }
  
<span class="udiff-line-modified-removed">- Seconds SuspendableTimer::repeatInterval() const</span>
<span class="udiff-line-modified-added">+ Seconds SuspendableTimerBase::repeatInterval() const</span>
  {
      if (!m_suspended)
          return TimerBase::repeatInterval();
      if (m_savedIsActive)
          return m_savedRepeatInterval;
      return 0_s;
  }
  
<span class="udiff-line-modified-removed">- void SuspendableTimer::augmentFireInterval(Seconds delta)</span>
<span class="udiff-line-modified-added">+ void SuspendableTimerBase::augmentFireInterval(Seconds delta)</span>
  {
      if (!m_suspended)
          TimerBase::augmentFireInterval(delta);
      else if (m_savedIsActive) {
          m_savedNextFireInterval += delta;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -137,11 +132,11 @@</span>
          m_savedNextFireInterval = delta;
          m_savedRepeatInterval = 0_s;
      }
  }
  
<span class="udiff-line-modified-removed">- void SuspendableTimer::augmentRepeatInterval(Seconds delta)</span>
<span class="udiff-line-modified-added">+ void SuspendableTimerBase::augmentRepeatInterval(Seconds delta)</span>
  {
      if (!m_suspended)
          TimerBase::augmentRepeatInterval(delta);
      else if (m_savedIsActive) {
          m_savedNextFireInterval += delta;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -151,6 +146,11 @@</span>
          m_savedNextFireInterval = delta;
          m_savedRepeatInterval = delta;
      }
  }
  
<span class="udiff-line-added">+ const char* SuspendableTimer::activeDOMObjectName() const</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     return &quot;SuspendableTimer&quot;;</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
  } // namespace WebCore
</pre>
<center><a href="SettingsBase.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SuspendableTimer.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>