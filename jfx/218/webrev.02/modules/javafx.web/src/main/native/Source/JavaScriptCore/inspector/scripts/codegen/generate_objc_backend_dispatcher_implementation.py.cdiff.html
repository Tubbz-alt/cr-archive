<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/inspector/scripts/codegen/generate_objc_backend_dispatcher_implementation.py</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="generate_js_backend_commands.py.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="generate_objc_header.py.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/inspector/scripts/codegen/generate_objc_backend_dispatcher_implementation.py</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 96,17 ***</span>
<span class="line-new-header">--- 96,21 ---</span>
  
          command_args = {
              &#39;domainName&#39;: domain.domain_name,
              &#39;commandName&#39;: command.command_name,
              &#39;parameters&#39;: &#39;, &#39;.join(parameters),
<span class="line-added">+             &#39;respondsToSelector&#39;: self._generate_responds_to_selector_for_command(domain, command),</span>
              &#39;successCallback&#39;: self._generate_success_block_for_command(domain, command),
              &#39;conversions&#39;: self._generate_conversions_for_command(domain, command),
              &#39;invocation&#39;: self._generate_invocation_for_command(domain, command),
          }
  
          return self.wrap_with_guard_for_domain(domain, Template(ObjCTemplates.BackendDispatcherHeaderDomainHandlerImplementation).substitute(None, **command_args))
  
<span class="line-added">+     def _generate_responds_to_selector_for_command(self, domain, command):</span>
<span class="line-added">+         return &#39;[m_delegate respondsToSelector:@selector(%sWithErrorCallback:successCallback:%s)]&#39; % (command.command_name, &#39;&#39;.join(map(lambda parameter: &#39;%s:&#39; % parameter.parameter_name, command.call_parameters)))</span>
<span class="line-added">+ </span>
      def _generate_success_block_for_command(self, domain, command):
          lines = []
  
          if command.return_parameters:
              success_block_parameters = []
</pre>
<hr />
<pre>
<span class="line-old-header">*** 203,15 ***</span>
          pairs.append(&#39;successCallback:successCallback&#39;)
          for parameter in command.call_parameters:
              in_param_name = &#39;in_%s&#39; % parameter.parameter_name
              objc_in_param_expression = &#39;o_%s&#39; % in_param_name
              if not parameter.is_optional:
<span class="line-removed">-                 # FIXME: we don&#39;t handle optional enum values in commands here because it isn&#39;t used anywhere yet.</span>
<span class="line-removed">-                 # We&#39;d need to change the delegate&#39;s signature to take Optional for optional enum values.</span>
                  if isinstance(parameter.type, EnumType):
                      objc_in_param_expression = &#39;%s.value()&#39; % objc_in_param_expression
  
                  pairs.append(&#39;%s:%s&#39; % (parameter.parameter_name, objc_in_param_expression))
              else:
                  optional_expression = &#39;(%s ? &amp;%s : nil)&#39; % (in_param_name, objc_in_param_expression)
                  pairs.append(&#39;%s:%s&#39; % (parameter.parameter_name, optional_expression))
          return &#39;    [m_delegate %s%s];&#39; % (command.command_name, &#39; &#39;.join(pairs))
<span class="line-new-header">--- 207,16 ---</span>
          pairs.append(&#39;successCallback:successCallback&#39;)
          for parameter in command.call_parameters:
              in_param_name = &#39;in_%s&#39; % parameter.parameter_name
              objc_in_param_expression = &#39;o_%s&#39; % in_param_name
              if not parameter.is_optional:
                  if isinstance(parameter.type, EnumType):
                      objc_in_param_expression = &#39;%s.value()&#39; % objc_in_param_expression
  
                  pairs.append(&#39;%s:%s&#39; % (parameter.parameter_name, objc_in_param_expression))
              else:
<span class="line-added">+                 if isinstance(parameter.type, EnumType):</span>
<span class="line-added">+                     objc_in_param_expression = &#39;%s.value()&#39; % objc_in_param_expression</span>
<span class="line-added">+ </span>
                  optional_expression = &#39;(%s ? &amp;%s : nil)&#39; % (in_param_name, objc_in_param_expression)
                  pairs.append(&#39;%s:%s&#39; % (parameter.parameter_name, optional_expression))
          return &#39;    [m_delegate %s%s];&#39; % (command.command_name, &#39; &#39;.join(pairs))
</pre>
<center><a href="generate_js_backend_commands.py.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="generate_objc_header.py.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>