<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/mediastream/RTCDataChannel.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="RTCDataChannel.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="RTCDataChannelEvent.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/mediastream/RTCDataChannel.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 29,10 ***</span>
<span class="line-new-header">--- 29,11 ---</span>
  
  #include &quot;ActiveDOMObject.h&quot;
  #include &quot;Event.h&quot;
  #include &quot;EventTarget.h&quot;
  #include &quot;ExceptionOr.h&quot;
<span class="line-added">+ #include &quot;NetworkSendQueue.h&quot;</span>
  #include &quot;RTCDataChannelHandler.h&quot;
  #include &quot;RTCDataChannelHandlerClient.h&quot;
  #include &quot;ScriptWrappable.h&quot;
  #include &quot;Timer.h&quot;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 47,11 ***</span>
  class RTCPeerConnectionHandler;
  
  class RTCDataChannel final : public ActiveDOMObject, public RTCDataChannelHandlerClient, public EventTargetWithInlineData {
      WTF_MAKE_ISO_ALLOCATED(RTCDataChannel);
  public:
<span class="line-modified">!     static Ref&lt;RTCDataChannel&gt; create(ScriptExecutionContext&amp;, std::unique_ptr&lt;RTCDataChannelHandler&gt;&amp;&amp;, String&amp;&amp;, RTCDataChannelInit&amp;&amp;);</span>
  
      bool ordered() const { return *m_options.ordered; }
      Optional&lt;unsigned short&gt; maxPacketLifeTime() const { return m_options.maxPacketLifeTime; }
      Optional&lt;unsigned short&gt; maxRetransmits() const { return m_options.maxRetransmits; }
      String protocol() const { return m_options.protocol; }
<span class="line-new-header">--- 48,11 ---</span>
  class RTCPeerConnectionHandler;
  
  class RTCDataChannel final : public ActiveDOMObject, public RTCDataChannelHandlerClient, public EventTargetWithInlineData {
      WTF_MAKE_ISO_ALLOCATED(RTCDataChannel);
  public:
<span class="line-modified">!     static Ref&lt;RTCDataChannel&gt; create(Document&amp;, std::unique_ptr&lt;RTCDataChannelHandler&gt;&amp;&amp;, String&amp;&amp;, RTCDataChannelInit&amp;&amp;);</span>
  
      bool ordered() const { return *m_options.ordered; }
      Optional&lt;unsigned short&gt; maxPacketLifeTime() const { return m_options.maxPacketLifeTime; }
      Optional&lt;unsigned short&gt; maxRetransmits() const { return m_options.maxRetransmits; }
      String protocol() const { return m_options.protocol; }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 76,27 ***</span>
  
      using RTCDataChannelHandlerClient::ref;
      using RTCDataChannelHandlerClient::deref;
  
  private:
<span class="line-modified">!     RTCDataChannel(ScriptExecutionContext&amp;, std::unique_ptr&lt;RTCDataChannelHandler&gt;&amp;&amp;, String&amp;&amp;, RTCDataChannelInit&amp;&amp;);</span>
  
      void scheduleDispatchEvent(Ref&lt;Event&gt;&amp;&amp;);
<span class="line-removed">-     void scheduledEventTimerFired();</span>
  
      EventTargetInterface eventTargetInterface() const final { return RTCDataChannelEventTargetInterfaceType; }
      ScriptExecutionContext* scriptExecutionContext() const final { return m_scriptExecutionContext; }
  
      void refEventTarget() final { ref(); }
      void derefEventTarget() final { deref(); }
  
<span class="line-removed">-     ExceptionOr&lt;void&gt; sendRawData(const char* data, size_t length);</span>
<span class="line-removed">- </span>
      // ActiveDOMObject API
      void stop() final;
      const char* activeDOMObjectName() const final { return &quot;RTCDataChannel&quot;; }
<span class="line-removed">-     bool canSuspendForDocumentSuspension() const final { return m_readyState == RTCDataChannelState::Closed; }</span>
  
      // RTCDataChannelHandlerClient API
      void didChangeReadyState(RTCDataChannelState) final;
      void didReceiveStringData(const String&amp;) final;
      void didReceiveRawData(const char*, size_t) final;
<span class="line-new-header">--- 77,25 ---</span>
  
      using RTCDataChannelHandlerClient::ref;
      using RTCDataChannelHandlerClient::deref;
  
  private:
<span class="line-modified">!     RTCDataChannel(Document&amp;, std::unique_ptr&lt;RTCDataChannelHandler&gt;&amp;&amp;, String&amp;&amp;, RTCDataChannelInit&amp;&amp;);</span>
<span class="line-added">+ </span>
<span class="line-added">+     static NetworkSendQueue createMessageQueue(Document&amp;, RTCDataChannel&amp;);</span>
  
      void scheduleDispatchEvent(Ref&lt;Event&gt;&amp;&amp;);
  
      EventTargetInterface eventTargetInterface() const final { return RTCDataChannelEventTargetInterfaceType; }
      ScriptExecutionContext* scriptExecutionContext() const final { return m_scriptExecutionContext; }
  
      void refEventTarget() final { ref(); }
      void derefEventTarget() final { deref(); }
  
      // ActiveDOMObject API
      void stop() final;
      const char* activeDOMObjectName() const final { return &quot;RTCDataChannel&quot;; }
  
      // RTCDataChannelHandlerClient API
      void didChangeReadyState(RTCDataChannelState) final;
      void didReceiveStringData(const String&amp;) final;
      void didReceiveRawData(const char*, size_t) final;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 110,16 ***</span>
      RTCDataChannelState m_readyState { RTCDataChannelState::Connecting };
  
      enum class BinaryType { Blob, ArrayBuffer };
      BinaryType m_binaryType { BinaryType::ArrayBuffer };
  
<span class="line-removed">-     Timer m_scheduledEventTimer;</span>
<span class="line-removed">-     Vector&lt;Ref&lt;Event&gt;&gt; m_scheduledEvents;</span>
<span class="line-removed">- </span>
      String m_label;
      RTCDataChannelInit m_options;
      size_t m_bufferedAmountLowThreshold { 0 };
  };
  
  } // namespace WebCore
  
  #endif // ENABLE(WEB_RTC)
<span class="line-new-header">--- 109,15 ---</span>
      RTCDataChannelState m_readyState { RTCDataChannelState::Connecting };
  
      enum class BinaryType { Blob, ArrayBuffer };
      BinaryType m_binaryType { BinaryType::ArrayBuffer };
  
      String m_label;
      RTCDataChannelInit m_options;
      size_t m_bufferedAmountLowThreshold { 0 };
<span class="line-added">+ </span>
<span class="line-added">+     NetworkSendQueue m_messageQueue;</span>
  };
  
  } // namespace WebCore
  
  #endif // ENABLE(WEB_RTC)
</pre>
<center><a href="RTCDataChannel.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="RTCDataChannelEvent.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>