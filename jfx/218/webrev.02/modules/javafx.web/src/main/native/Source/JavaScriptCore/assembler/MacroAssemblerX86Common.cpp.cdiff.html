<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/assembler/MacroAssemblerX86Common.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="MacroAssemblerX86.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="MacroAssemblerX86Common.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/assembler/MacroAssemblerX86Common.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (C) 2013-2018 Apple Inc. All rights reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   * 1. Redistributions of source code must retain the above copyright
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (C) 2013-2019 Apple Inc. All rights reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   * 1. Redistributions of source code must retain the above copyright
</pre>
<hr />
<pre>
<span class="line-old-header">*** 515,94 ***</span>
  asm (
      &quot;.globl &quot; SYMBOL_STRING(ctiMasmProbeTrampoline) &quot;\n&quot;
      HIDE_SYMBOL(ctiMasmProbeTrampoline) &quot;\n&quot;
      SYMBOL_STRING(ctiMasmProbeTrampoline) &quot;:&quot; &quot;\n&quot;
  
      &quot;pushfq&quot; &quot;\n&quot;
  
      // MacroAssemblerX86Common::probe() has already generated code to store some values.
<span class="line-modified">!     // Together with the rflags pushed above, the top of stack now looks like this:</span>
<span class="line-modified">!     //     rsp[0 * ptrSize]: rflags</span>
<span class="line-modified">!     //     rsp[1 * ptrSize]: return address / saved rip</span>
<span class="line-modified">!     //     rsp[2 * ptrSize]: saved rbx</span>
<span class="line-modified">!     //     rsp[3 * ptrSize]: saved rdx</span>
<span class="line-modified">!     //     rsp[4 * ptrSize]: saved rcx</span>
<span class="line-modified">!     //     rsp[5 * ptrSize]: saved rax</span>
      //
      // Incoming registers contain:
      //     rcx: Probe::executeProbe
      //     rdx: probe function
      //     rbx: probe arg
      //     rax: scratch (was ctiMasmProbeTrampoline)
  
<span class="line-removed">-     &quot;movq %rsp, %rax&quot; &quot;\n&quot;</span>
      &quot;subq $&quot; STRINGIZE_VALUE_OF(PROBE_SIZE + OUT_SIZE) &quot;, %rsp&quot; &quot;\n&quot;
  
      // The X86_64 ABI specifies that the worse case stack alignment requirement is 32 bytes.
      &quot;andq $~0x1f, %rsp&quot; &quot;\n&quot;
      // Since sp points to the Probe::State, we&#39;ve ensured that it&#39;s protected from interrupts before we initialize it.
  
<span class="line-modified">!     &quot;movq %rbp, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_EBP_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rsp, %rbp&quot; &quot;\n&quot; // Save the Probe::State*.</span>
<span class="line-modified">! </span>
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_EXECUTOR_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rdx, &quot; STRINGIZE_VALUE_OF(PROBE_PROBE_FUNCTION_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rbx, &quot; STRINGIZE_VALUE_OF(PROBE_ARG_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rsi, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_ESI_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rdi, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_EDI_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">! </span>
<span class="line-modified">!     &quot;movq 0 * &quot; STRINGIZE_VALUE_OF(PTR_SIZE) &quot;(%rax), %rcx&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_EFLAGS_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq 1 * &quot; STRINGIZE_VALUE_OF(PTR_SIZE) &quot;(%rax), %rcx&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_EIP_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq 2 * &quot; STRINGIZE_VALUE_OF(PTR_SIZE) &quot;(%rax), %rcx&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_EBX_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq 3 * &quot; STRINGIZE_VALUE_OF(PTR_SIZE) &quot;(%rax), %rcx&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_EDX_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq 4 * &quot; STRINGIZE_VALUE_OF(PTR_SIZE) &quot;(%rax), %rcx&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_ECX_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq 5 * &quot; STRINGIZE_VALUE_OF(PTR_SIZE) &quot;(%rax), %rcx&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_EAX_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">! </span>
<span class="line-removed">-     &quot;movq %rax, %rcx&quot; &quot;\n&quot;</span>
      &quot;addq $&quot; STRINGIZE_VALUE_OF(6 * PTR_SIZE) &quot;, %rcx&quot; &quot;\n&quot;
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_ESP_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">! </span>
<span class="line-modified">!     &quot;movq %r8, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R8_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %r9, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R9_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %r10, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R10_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %r11, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R11_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %r12, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R12_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %r13, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R13_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %r14, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R14_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %r15, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R15_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">! </span>
<span class="line-modified">!     &quot;movq %xmm0, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM0_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm1, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM1_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm2, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM2_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm3, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM3_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm4, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM4_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm5, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM5_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm6, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM6_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm7, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM7_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm8, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM8_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm9, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM9_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm10, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM10_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm11, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM11_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm12, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM12_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm13, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM13_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm14, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM14_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm15, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM15_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
<span class="line-modified">! </span>
<span class="line-modified">!     &quot;movq %rbp, %rdi&quot; &quot;\n&quot; // the Probe::State* arg.</span>
<span class="line-modified">!     &quot;call *&quot; STRINGIZE_VALUE_OF(PROBE_EXECUTOR_OFFSET) &quot;(%rbp)&quot; &quot;\n&quot;</span>
  
      // Make sure the Probe::State is entirely below the result stack pointer so
      // that register values are still preserved when we call the initializeStack
      // function.
      &quot;movq $&quot; STRINGIZE_VALUE_OF(PROBE_SIZE + OUT_SIZE) &quot;, %rcx&quot; &quot;\n&quot;
<span class="line-modified">!     &quot;movq %rbp, %rax&quot; &quot;\n&quot;</span>
      &quot;movq &quot; STRINGIZE_VALUE_OF(PROBE_CPU_ESP_OFFSET) &quot;(%rbp), %rdx&quot; &quot;\n&quot;
      &quot;addq %rcx, %rax&quot; &quot;\n&quot;
      &quot;cmpq %rax, %rdx&quot; &quot;\n&quot;
      &quot;jge &quot; LOCAL_LABEL_STRING(ctiMasmProbeTrampolineProbeStateIsSafe) &quot;\n&quot;
  
<span class="line-new-header">--- 515,97 ---</span>
  asm (
      &quot;.globl &quot; SYMBOL_STRING(ctiMasmProbeTrampoline) &quot;\n&quot;
      HIDE_SYMBOL(ctiMasmProbeTrampoline) &quot;\n&quot;
      SYMBOL_STRING(ctiMasmProbeTrampoline) &quot;:&quot; &quot;\n&quot;
  
<span class="line-added">+     &quot;pushq %rbp&quot; &quot;\n&quot;</span>
<span class="line-added">+     &quot;movq  %rsp, %rbp&quot; &quot;\n&quot;</span>
<span class="line-added">+ </span>
      &quot;pushfq&quot; &quot;\n&quot;
  
      // MacroAssemblerX86Common::probe() has already generated code to store some values.
<span class="line-modified">!     // Together with the rbp and rflags pushed above, the top of stack now looks like this:</span>
<span class="line-modified">!     //     rbp[-1 * ptrSize]: rflags</span>
<span class="line-modified">!     //     rbp[0 * ptrSize]: rbp / previousCallFrame</span>
<span class="line-modified">!     //     rbp[1 * ptrSize]: return address / saved rip</span>
<span class="line-modified">!     //     rbp[2 * ptrSize]: saved rbx</span>
<span class="line-modified">!     //     rbp[3 * ptrSize]: saved rdx</span>
<span class="line-modified">!     //     rbp[4 * ptrSize]: saved rcx</span>
<span class="line-added">+     //     rbp[5 * ptrSize]: saved rax</span>
      //
      // Incoming registers contain:
      //     rcx: Probe::executeProbe
      //     rdx: probe function
      //     rbx: probe arg
      //     rax: scratch (was ctiMasmProbeTrampoline)
  
      &quot;subq $&quot; STRINGIZE_VALUE_OF(PROBE_SIZE + OUT_SIZE) &quot;, %rsp&quot; &quot;\n&quot;
  
      // The X86_64 ABI specifies that the worse case stack alignment requirement is 32 bytes.
      &quot;andq $~0x1f, %rsp&quot; &quot;\n&quot;
      // Since sp points to the Probe::State, we&#39;ve ensured that it&#39;s protected from interrupts before we initialize it.
  
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_EXECUTOR_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rdx, &quot; STRINGIZE_VALUE_OF(PROBE_PROBE_FUNCTION_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rbx, &quot; STRINGIZE_VALUE_OF(PROBE_ARG_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rsi, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_ESI_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rdi, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_EDI_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">! </span>
<span class="line-modified">!     &quot;movq -1 * &quot; STRINGIZE_VALUE_OF(PTR_SIZE) &quot;(%rbp), %rcx&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_EFLAGS_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq 0 * &quot; STRINGIZE_VALUE_OF(PTR_SIZE) &quot;(%rbp), %rcx&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_EBP_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq 1 * &quot; STRINGIZE_VALUE_OF(PTR_SIZE) &quot;(%rbp), %rcx&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_EIP_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq 2 * &quot; STRINGIZE_VALUE_OF(PTR_SIZE) &quot;(%rbp), %rcx&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_EBX_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq 3 * &quot; STRINGIZE_VALUE_OF(PTR_SIZE) &quot;(%rbp), %rcx&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_EDX_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq 4 * &quot; STRINGIZE_VALUE_OF(PTR_SIZE) &quot;(%rbp), %rcx&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_ECX_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq 5 * &quot; STRINGIZE_VALUE_OF(PTR_SIZE) &quot;(%rbp), %rcx&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_EAX_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">! </span>
<span class="line-modified">!     &quot;movq %rbp, %rcx&quot; &quot;\n&quot;</span>
      &quot;addq $&quot; STRINGIZE_VALUE_OF(6 * PTR_SIZE) &quot;, %rcx&quot; &quot;\n&quot;
<span class="line-modified">!     &quot;movq %rcx, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_ESP_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">! </span>
<span class="line-modified">!     &quot;movq %r8, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R8_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %r9, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R9_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %r10, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R10_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %r11, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R11_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %r12, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R12_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %r13, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R13_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %r14, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R14_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %r15, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_R15_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">! </span>
<span class="line-modified">!     &quot;movq %xmm0, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM0_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm1, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM1_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm2, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM2_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm3, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM3_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm4, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM4_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm5, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM5_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm6, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM6_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm7, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM7_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm8, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM8_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm9, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM9_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm10, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM10_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm11, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM11_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm12, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM12_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm13, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM13_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm14, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM14_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">!     &quot;movq %xmm15, &quot; STRINGIZE_VALUE_OF(PROBE_CPU_XMM15_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
<span class="line-modified">! </span>
<span class="line-modified">!     &quot;movq %rsp, %rdi&quot; &quot;\n&quot; // the Probe::State* arg.</span>
<span class="line-modified">!     &quot;call *&quot; STRINGIZE_VALUE_OF(PROBE_EXECUTOR_OFFSET) &quot;(%rsp)&quot; &quot;\n&quot;</span>
  
      // Make sure the Probe::State is entirely below the result stack pointer so
      // that register values are still preserved when we call the initializeStack
      // function.
<span class="line-added">+     &quot;movq %rsp, %rbp&quot; &quot;\n&quot;</span>
      &quot;movq $&quot; STRINGIZE_VALUE_OF(PROBE_SIZE + OUT_SIZE) &quot;, %rcx&quot; &quot;\n&quot;
<span class="line-modified">!     &quot;movq %rsp, %rax&quot; &quot;\n&quot;</span>
      &quot;movq &quot; STRINGIZE_VALUE_OF(PROBE_CPU_ESP_OFFSET) &quot;(%rbp), %rdx&quot; &quot;\n&quot;
      &quot;addq %rcx, %rax&quot; &quot;\n&quot;
      &quot;cmpq %rax, %rdx&quot; &quot;\n&quot;
      &quot;jge &quot; LOCAL_LABEL_STRING(ctiMasmProbeTrampolineProbeStateIsSafe) &quot;\n&quot;
  
</pre>
<center><a href="MacroAssemblerX86.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="MacroAssemblerX86Common.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>