<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/html/canvas/CanvasRenderingContext2DBase.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="CanvasRenderingContext2DBase.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="CanvasStyle.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/html/canvas/CanvasRenderingContext2DBase.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 45 #include &quot;ImageSmoothingQuality.h&quot;
 46 #include &quot;Path.h&quot;
 47 #include &quot;PlatformLayer.h&quot;
 48 #include &lt;wtf/Vector.h&gt;
 49 #include &lt;wtf/text/WTFString.h&gt;
 50 
 51 namespace WebCore {
 52 
 53 class TypedOMCSSImageValue;
 54 class CachedImage;
 55 class CanvasBase;
 56 class CanvasGradient;
 57 class CanvasPattern;
 58 class DOMMatrix;
 59 class FloatRect;
 60 class GraphicsContext;
 61 class HTMLImageElement;
 62 class HTMLVideoElement;
 63 class ImageBitmap;
 64 class ImageData;

 65 class Path2D;
 66 class RenderStyle;
 67 class RenderObject;
 68 class TextMetrics;
 69 
 70 struct DOMMatrix2DInit;
 71 
<span class="line-modified"> 72 #if ENABLE(VIDEO) &amp;&amp; ENABLE(CSS_TYPED_OM)</span>
<span class="line-modified"> 73 using CanvasImageSource = Variant&lt;RefPtr&lt;HTMLImageElement&gt;, RefPtr&lt;HTMLVideoElement&gt;, RefPtr&lt;HTMLCanvasElement&gt;, RefPtr&lt;ImageBitmap&gt;, RefPtr&lt;TypedOMCSSImageValue&gt;&gt;;</span>
<span class="line-modified"> 74 #elif ENABLE(VIDEO)</span>
<span class="line-modified"> 75 using CanvasImageSource = Variant&lt;RefPtr&lt;HTMLImageElement&gt;, RefPtr&lt;HTMLVideoElement&gt;, RefPtr&lt;HTMLCanvasElement&gt;, RefPtr&lt;ImageBitmap&gt;&gt;;</span>
<span class="line-modified"> 76 #else</span>
<span class="line-modified"> 77 using CanvasImageSource = Variant&lt;RefPtr&lt;HTMLImageElement&gt;, RefPtr&lt;HTMLCanvasElement&gt;, RefPtr&lt;ImageBitmap&gt;&gt;;</span>



 78 #endif

 79 
 80 class CanvasRenderingContext2DBase : public CanvasRenderingContext, public CanvasPath {
 81     WTF_MAKE_ISO_ALLOCATED(CanvasRenderingContext2DBase);
 82 public:
 83     CanvasRenderingContext2DBase(CanvasBase&amp;, bool usesCSSCompatibilityParseMode);
 84     virtual ~CanvasRenderingContext2DBase();
 85 
 86     float lineWidth() const;
 87     void setLineWidth(float);
 88 
 89     CanvasLineCap lineCap() const;
 90     void setLineCap(CanvasLineCap);
 91     void setLineCap(const String&amp;);
 92 
 93     CanvasLineJoin lineJoin() const;
 94     void setLineJoin(CanvasLineJoin);
 95     void setLineJoin(const String&amp;);
 96 
 97     float miterLimit() const;
 98     void setMiterLimit(float);
</pre>
<hr />
<pre>
162     bool isPointInPath(Path2D&amp;, float x, float y, CanvasFillRule = CanvasFillRule::Nonzero);
163     bool isPointInStroke(Path2D&amp;, float x, float y);
164 
165     void clearRect(float x, float y, float width, float height);
166     void fillRect(float x, float y, float width, float height);
167     void strokeRect(float x, float y, float width, float height);
168 
169     void setShadow(float width, float height, float blur, const String&amp; color = String(), Optional&lt;float&gt; alpha = WTF::nullopt);
170     void setShadow(float width, float height, float blur, float grayLevel, float alpha = 1.0);
171     void setShadow(float width, float height, float blur, float r, float g, float b, float a);
172     void setShadow(float width, float height, float blur, float c, float m, float y, float k, float a);
173 
174     void clearShadow();
175 
176     ExceptionOr&lt;void&gt; drawImage(CanvasImageSource&amp;&amp;, float dx, float dy);
177     ExceptionOr&lt;void&gt; drawImage(CanvasImageSource&amp;&amp;, float dx, float dy, float dw, float dh);
178     ExceptionOr&lt;void&gt; drawImage(CanvasImageSource&amp;&amp;, float sx, float sy, float sw, float sh, float dx, float dy, float dw, float dh);
179 
180     void drawImageFromRect(HTMLImageElement&amp;, float sx = 0, float sy = 0, float sw = 0, float sh = 0, float dx = 0, float dy = 0, float dw = 0, float dh = 0, const String&amp; compositeOperation = emptyString());
181 
<span class="line-modified">182     using Style = Variant&lt;String, RefPtr&lt;CanvasGradient&gt;, RefPtr&lt;CanvasPattern&gt;&gt;;</span>
<span class="line-modified">183     Style strokeStyle() const;</span>
<span class="line-modified">184     void setStrokeStyle(Style&amp;&amp;);</span>
<span class="line-modified">185     Style fillStyle() const;</span>
<span class="line-modified">186     void setFillStyle(Style&amp;&amp;);</span>
187 
188     ExceptionOr&lt;Ref&lt;CanvasGradient&gt;&gt; createLinearGradient(float x0, float y0, float x1, float y1);
189     ExceptionOr&lt;Ref&lt;CanvasGradient&gt;&gt; createRadialGradient(float x0, float y0, float r0, float x1, float y1, float r1);
190     ExceptionOr&lt;RefPtr&lt;CanvasPattern&gt;&gt; createPattern(CanvasImageSource&amp;&amp;, const String&amp; repetition);
191 
192     RefPtr&lt;ImageData&gt; createImageData(ImageData&amp;) const;
193     ExceptionOr&lt;RefPtr&lt;ImageData&gt;&gt; createImageData(float width, float height) const;
194     ExceptionOr&lt;RefPtr&lt;ImageData&gt;&gt; getImageData(float sx, float sy, float sw, float sh) const;
195     void putImageData(ImageData&amp;, float dx, float dy);
196     void putImageData(ImageData&amp;, float dx, float dy, float dirtyX, float dirtyY, float dirtyWidth, float dirtyHeight);
197 
198     float webkitBackingStorePixelRatio() const { return 1; }
199 
200     void reset();
201 
202     LineCap getLineCap() const { return state().lineCap; }
203     LineJoin getLineJoin() const { return state().lineJoin; }
204 
205     bool imageSmoothingEnabled() const;
206     void setImageSmoothingEnabled(bool);
</pre>
<hr />
<pre>
316     void realizeSavesLoop();
317 
318     void applyStrokePattern();
319     void applyFillPattern();
320 
321     void setStrokeStyle(CanvasStyle);
322     void setFillStyle(CanvasStyle);
323 
324     ExceptionOr&lt;RefPtr&lt;CanvasPattern&gt;&gt; createPattern(HTMLImageElement&amp;, bool repeatX, bool repeatY);
325     ExceptionOr&lt;RefPtr&lt;CanvasPattern&gt;&gt; createPattern(CanvasBase&amp;, bool repeatX, bool repeatY);
326 #if ENABLE(VIDEO)
327     ExceptionOr&lt;RefPtr&lt;CanvasPattern&gt;&gt; createPattern(HTMLVideoElement&amp;, bool repeatX, bool repeatY);
328 #endif
329     ExceptionOr&lt;RefPtr&lt;CanvasPattern&gt;&gt; createPattern(ImageBitmap&amp;, bool repeatX, bool repeatY);
330 #if ENABLE(CSS_TYPED_OM)
331     ExceptionOr&lt;RefPtr&lt;CanvasPattern&gt;&gt; createPattern(TypedOMCSSImageValue&amp;, bool repeatX, bool repeatY);
332 #endif
333 
334     ExceptionOr&lt;void&gt; drawImage(HTMLImageElement&amp;, const FloatRect&amp; srcRect, const FloatRect&amp; dstRect);
335     ExceptionOr&lt;void&gt; drawImage(HTMLImageElement&amp;, const FloatRect&amp; srcRect, const FloatRect&amp; dstRect, const CompositeOperator&amp;, const BlendMode&amp;);
<span class="line-modified">336     ExceptionOr&lt;void&gt; drawImage(HTMLCanvasElement&amp;, const FloatRect&amp; srcRect, const FloatRect&amp; dstRect);</span>
337     ExceptionOr&lt;void&gt; drawImage(Document&amp;, CachedImage*, const RenderObject*, const FloatRect&amp; imageRect, const FloatRect&amp; srcRect, const FloatRect&amp; dstRect, const CompositeOperator&amp;, const BlendMode&amp;);
338 #if ENABLE(VIDEO)
339     ExceptionOr&lt;void&gt; drawImage(HTMLVideoElement&amp;, const FloatRect&amp; srcRect, const FloatRect&amp; dstRect);
340 #endif
341 #if ENABLE(CSS_TYPED_OM)
342     ExceptionOr&lt;void&gt; drawImage(TypedOMCSSImageValue&amp;, const FloatRect&amp; srcRect, const FloatRect&amp; dstRect);
343 #endif
344     ExceptionOr&lt;void&gt; drawImage(ImageBitmap&amp;, const FloatRect&amp; srcRect, const FloatRect&amp; dstRect);
345 
346     void beginCompositeLayer();
347     void endCompositeLayer();
348 
349     void fillInternal(const Path&amp;, CanvasFillRule);
350     void strokeInternal(const Path&amp;);
351     void clipInternal(const Path&amp;, CanvasFillRule);
352 
353     bool isPointInPathInternal(const Path&amp;, float x, float y, CanvasFillRule);
354     bool isPointInStrokeInternal(const Path&amp;, float x, float y);
355 
356     void clearCanvas();
</pre>
</td>
<td>
<hr />
<pre>
 45 #include &quot;ImageSmoothingQuality.h&quot;
 46 #include &quot;Path.h&quot;
 47 #include &quot;PlatformLayer.h&quot;
 48 #include &lt;wtf/Vector.h&gt;
 49 #include &lt;wtf/text/WTFString.h&gt;
 50 
 51 namespace WebCore {
 52 
 53 class TypedOMCSSImageValue;
 54 class CachedImage;
 55 class CanvasBase;
 56 class CanvasGradient;
 57 class CanvasPattern;
 58 class DOMMatrix;
 59 class FloatRect;
 60 class GraphicsContext;
 61 class HTMLImageElement;
 62 class HTMLVideoElement;
 63 class ImageBitmap;
 64 class ImageData;
<span class="line-added"> 65 class OffscreenCanvas;</span>
 66 class Path2D;
 67 class RenderStyle;
 68 class RenderObject;
 69 class TextMetrics;
 70 
 71 struct DOMMatrix2DInit;
 72 
<span class="line-modified"> 73 using CanvasImageSource = Variant&lt;RefPtr&lt;HTMLImageElement&gt;, RefPtr&lt;HTMLCanvasElement&gt;, RefPtr&lt;ImageBitmap&gt;</span>
<span class="line-modified"> 74 #if ENABLE(CSS_TYPED_OM)</span>
<span class="line-modified"> 75     , RefPtr&lt;TypedOMCSSImageValue&gt;</span>
<span class="line-modified"> 76 #endif</span>
<span class="line-modified"> 77 #if ENABLE(OFFSCREEN_CANVAS)</span>
<span class="line-modified"> 78     , RefPtr&lt;OffscreenCanvas&gt;</span>
<span class="line-added"> 79 #endif</span>
<span class="line-added"> 80 #if ENABLE(VIDEO)</span>
<span class="line-added"> 81     , RefPtr&lt;HTMLVideoElement&gt;</span>
 82 #endif
<span class="line-added"> 83     &gt;;</span>
 84 
 85 class CanvasRenderingContext2DBase : public CanvasRenderingContext, public CanvasPath {
 86     WTF_MAKE_ISO_ALLOCATED(CanvasRenderingContext2DBase);
 87 public:
 88     CanvasRenderingContext2DBase(CanvasBase&amp;, bool usesCSSCompatibilityParseMode);
 89     virtual ~CanvasRenderingContext2DBase();
 90 
 91     float lineWidth() const;
 92     void setLineWidth(float);
 93 
 94     CanvasLineCap lineCap() const;
 95     void setLineCap(CanvasLineCap);
 96     void setLineCap(const String&amp;);
 97 
 98     CanvasLineJoin lineJoin() const;
 99     void setLineJoin(CanvasLineJoin);
100     void setLineJoin(const String&amp;);
101 
102     float miterLimit() const;
103     void setMiterLimit(float);
</pre>
<hr />
<pre>
167     bool isPointInPath(Path2D&amp;, float x, float y, CanvasFillRule = CanvasFillRule::Nonzero);
168     bool isPointInStroke(Path2D&amp;, float x, float y);
169 
170     void clearRect(float x, float y, float width, float height);
171     void fillRect(float x, float y, float width, float height);
172     void strokeRect(float x, float y, float width, float height);
173 
174     void setShadow(float width, float height, float blur, const String&amp; color = String(), Optional&lt;float&gt; alpha = WTF::nullopt);
175     void setShadow(float width, float height, float blur, float grayLevel, float alpha = 1.0);
176     void setShadow(float width, float height, float blur, float r, float g, float b, float a);
177     void setShadow(float width, float height, float blur, float c, float m, float y, float k, float a);
178 
179     void clearShadow();
180 
181     ExceptionOr&lt;void&gt; drawImage(CanvasImageSource&amp;&amp;, float dx, float dy);
182     ExceptionOr&lt;void&gt; drawImage(CanvasImageSource&amp;&amp;, float dx, float dy, float dw, float dh);
183     ExceptionOr&lt;void&gt; drawImage(CanvasImageSource&amp;&amp;, float sx, float sy, float sw, float sh, float dx, float dy, float dw, float dh);
184 
185     void drawImageFromRect(HTMLImageElement&amp;, float sx = 0, float sy = 0, float sw = 0, float sh = 0, float dx = 0, float dy = 0, float dw = 0, float dh = 0, const String&amp; compositeOperation = emptyString());
186 
<span class="line-modified">187     using StyleVariant = Variant&lt;String, RefPtr&lt;CanvasGradient&gt;, RefPtr&lt;CanvasPattern&gt;&gt;;</span>
<span class="line-modified">188     StyleVariant strokeStyle() const;</span>
<span class="line-modified">189     void setStrokeStyle(StyleVariant&amp;&amp;);</span>
<span class="line-modified">190     StyleVariant fillStyle() const;</span>
<span class="line-modified">191     void setFillStyle(StyleVariant&amp;&amp;);</span>
192 
193     ExceptionOr&lt;Ref&lt;CanvasGradient&gt;&gt; createLinearGradient(float x0, float y0, float x1, float y1);
194     ExceptionOr&lt;Ref&lt;CanvasGradient&gt;&gt; createRadialGradient(float x0, float y0, float r0, float x1, float y1, float r1);
195     ExceptionOr&lt;RefPtr&lt;CanvasPattern&gt;&gt; createPattern(CanvasImageSource&amp;&amp;, const String&amp; repetition);
196 
197     RefPtr&lt;ImageData&gt; createImageData(ImageData&amp;) const;
198     ExceptionOr&lt;RefPtr&lt;ImageData&gt;&gt; createImageData(float width, float height) const;
199     ExceptionOr&lt;RefPtr&lt;ImageData&gt;&gt; getImageData(float sx, float sy, float sw, float sh) const;
200     void putImageData(ImageData&amp;, float dx, float dy);
201     void putImageData(ImageData&amp;, float dx, float dy, float dirtyX, float dirtyY, float dirtyWidth, float dirtyHeight);
202 
203     float webkitBackingStorePixelRatio() const { return 1; }
204 
205     void reset();
206 
207     LineCap getLineCap() const { return state().lineCap; }
208     LineJoin getLineJoin() const { return state().lineJoin; }
209 
210     bool imageSmoothingEnabled() const;
211     void setImageSmoothingEnabled(bool);
</pre>
<hr />
<pre>
321     void realizeSavesLoop();
322 
323     void applyStrokePattern();
324     void applyFillPattern();
325 
326     void setStrokeStyle(CanvasStyle);
327     void setFillStyle(CanvasStyle);
328 
329     ExceptionOr&lt;RefPtr&lt;CanvasPattern&gt;&gt; createPattern(HTMLImageElement&amp;, bool repeatX, bool repeatY);
330     ExceptionOr&lt;RefPtr&lt;CanvasPattern&gt;&gt; createPattern(CanvasBase&amp;, bool repeatX, bool repeatY);
331 #if ENABLE(VIDEO)
332     ExceptionOr&lt;RefPtr&lt;CanvasPattern&gt;&gt; createPattern(HTMLVideoElement&amp;, bool repeatX, bool repeatY);
333 #endif
334     ExceptionOr&lt;RefPtr&lt;CanvasPattern&gt;&gt; createPattern(ImageBitmap&amp;, bool repeatX, bool repeatY);
335 #if ENABLE(CSS_TYPED_OM)
336     ExceptionOr&lt;RefPtr&lt;CanvasPattern&gt;&gt; createPattern(TypedOMCSSImageValue&amp;, bool repeatX, bool repeatY);
337 #endif
338 
339     ExceptionOr&lt;void&gt; drawImage(HTMLImageElement&amp;, const FloatRect&amp; srcRect, const FloatRect&amp; dstRect);
340     ExceptionOr&lt;void&gt; drawImage(HTMLImageElement&amp;, const FloatRect&amp; srcRect, const FloatRect&amp; dstRect, const CompositeOperator&amp;, const BlendMode&amp;);
<span class="line-modified">341     ExceptionOr&lt;void&gt; drawImage(CanvasBase&amp;, const FloatRect&amp; srcRect, const FloatRect&amp; dstRect);</span>
342     ExceptionOr&lt;void&gt; drawImage(Document&amp;, CachedImage*, const RenderObject*, const FloatRect&amp; imageRect, const FloatRect&amp; srcRect, const FloatRect&amp; dstRect, const CompositeOperator&amp;, const BlendMode&amp;);
343 #if ENABLE(VIDEO)
344     ExceptionOr&lt;void&gt; drawImage(HTMLVideoElement&amp;, const FloatRect&amp; srcRect, const FloatRect&amp; dstRect);
345 #endif
346 #if ENABLE(CSS_TYPED_OM)
347     ExceptionOr&lt;void&gt; drawImage(TypedOMCSSImageValue&amp;, const FloatRect&amp; srcRect, const FloatRect&amp; dstRect);
348 #endif
349     ExceptionOr&lt;void&gt; drawImage(ImageBitmap&amp;, const FloatRect&amp; srcRect, const FloatRect&amp; dstRect);
350 
351     void beginCompositeLayer();
352     void endCompositeLayer();
353 
354     void fillInternal(const Path&amp;, CanvasFillRule);
355     void strokeInternal(const Path&amp;);
356     void clipInternal(const Path&amp;, CanvasFillRule);
357 
358     bool isPointInPathInternal(const Path&amp;, float x, float y, CanvasFillRule);
359     bool isPointInStrokeInternal(const Path&amp;, float x, float y);
360 
361     void clearCanvas();
</pre>
</td>
</tr>
</table>
<center><a href="CanvasRenderingContext2DBase.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="CanvasStyle.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>