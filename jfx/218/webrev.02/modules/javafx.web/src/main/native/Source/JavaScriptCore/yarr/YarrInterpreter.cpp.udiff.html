<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/JavaScriptCore/yarr/YarrInterpreter.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="YarrErrorCode.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="YarrJIT.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/yarr/YarrInterpreter.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -32,10 +32,11 @@</span>
  #include &quot;Yarr.h&quot;
  #include &quot;YarrCanonicalize.h&quot;
  #include &lt;wtf/BumpPointerAllocator.h&gt;
  #include &lt;wtf/CheckedArithmetic.h&gt;
  #include &lt;wtf/DataLog.h&gt;
<span class="udiff-line-added">+ #include &lt;wtf/StackCheck.h&gt;</span>
  #include &lt;wtf/text/CString.h&gt;
  #include &lt;wtf/text/WTFString.h&gt;
  
  namespace JSC { namespace Yarr {
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1692,10 +1693,15 @@</span>
      {
      }
  
      std::unique_ptr&lt;BytecodePattern&gt; compile(BumpPointerAllocator* allocator, ConcurrentJSLock* lock, ErrorCode&amp; errorCode)
      {
<span class="udiff-line-added">+         if (UNLIKELY(!isSafeToRecurse())) {</span>
<span class="udiff-line-added">+             errorCode = ErrorCode::TooManyDisjunctions;</span>
<span class="udiff-line-added">+             return nullptr;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
          regexBegin(m_pattern.m_numSubpatterns, m_pattern.m_body-&gt;m_callFrameSize, m_pattern.m_body-&gt;m_alternatives[0]-&gt;onceThrough());
          if (auto error = emitDisjunction(m_pattern.m_body, 0, 0)) {
              errorCode = error.value();
              return nullptr;
          }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2026,10 +2032,13 @@</span>
          m_currentAlternativeIndex = newAlternativeIndex;
      }
  
      Optional&lt;ErrorCode&gt; WARN_UNUSED_RETURN emitDisjunction(PatternDisjunction* disjunction, Checked&lt;unsigned, RecordOverflow&gt; inputCountAlreadyChecked, unsigned parenthesesInputCountAlreadyChecked)
      {
<span class="udiff-line-added">+         if (UNLIKELY(!isSafeToRecurse()))</span>
<span class="udiff-line-added">+             return ErrorCode::TooManyDisjunctions;</span>
<span class="udiff-line-added">+ </span>
          for (unsigned alt = 0; alt &lt; disjunction-&gt;m_alternatives.size(); ++alt) {
              auto currentCountAlreadyChecked = inputCountAlreadyChecked;
  
              PatternAlternative* alternative = disjunction-&gt;m_alternatives[alt].get();
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2403,12 +2412,15 @@</span>
          }
      }
  #endif
  
  private:
<span class="udiff-line-added">+     inline bool isSafeToRecurse() { return m_stackCheck.isSafeToRecurse(); }</span>
<span class="udiff-line-added">+ </span>
      YarrPattern&amp; m_pattern;
      std::unique_ptr&lt;ByteDisjunction&gt; m_bodyDisjunction;
<span class="udiff-line-added">+     StackCheck m_stackCheck;</span>
      unsigned m_currentAlternativeIndex { 0 };
      Vector&lt;ParenthesesStackEntry&gt; m_parenthesesStack;
      Vector&lt;std::unique_ptr&lt;ByteDisjunction&gt;&gt; m_allParenthesesInfo;
  };
  
</pre>
<center><a href="YarrErrorCode.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="YarrJIT.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>