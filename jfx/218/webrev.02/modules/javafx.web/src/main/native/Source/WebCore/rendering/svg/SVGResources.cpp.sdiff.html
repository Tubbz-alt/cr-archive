<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/rendering/svg/SVGResources.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SVGRenderingContext.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="SVGRootInlineBox.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/rendering/svg/SVGResources.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
198     ASSERT(renderer.element());
199     ASSERT_WITH_SECURITY_IMPLICATION(renderer.element()-&gt;isSVGElement());
200 
201     if (!renderer.element())
202         return false;
203 
204     auto&amp; element = downcast&lt;SVGElement&gt;(*renderer.element());
205 
206     Document&amp; document = element.document();
207 
208     SVGDocumentExtensions&amp; extensions = document.accessSVGExtensions();
209 
210     const AtomString&amp; tagName = element.localName();
211     if (tagName.isNull())
212         return false;
213 
214     const SVGRenderStyle&amp; svgStyle = style.svgStyle();
215 
216     bool foundResources = false;
217     if (clipperFilterMaskerTags().contains(tagName)) {
<span class="line-modified">218         if (svgStyle.hasClipper()) {</span>
<span class="line-removed">219             AtomString id(svgStyle.clipperResource());</span>
<span class="line-removed">220             if (setClipper(getRenderSVGResourceById&lt;RenderSVGResourceClipper&gt;(document, id)))</span>
<span class="line-removed">221                 foundResources = true;</span>
<span class="line-removed">222             else</span>
<span class="line-removed">223                 registerPendingResource(extensions, id, element);</span>
<span class="line-removed">224         } else if (is&lt;ReferenceClipPathOperation&gt;(style.clipPath())) {</span>
225             // FIXME: -webkit-clip-path should support external resources
226             // https://bugs.webkit.org/show_bug.cgi?id=127032
227             auto&amp; clipPath = downcast&lt;ReferenceClipPathOperation&gt;(*style.clipPath());
228             AtomString id(clipPath.fragment());
229             if (setClipper(getRenderSVGResourceById&lt;RenderSVGResourceClipper&gt;(document, id)))
230                 foundResources = true;
231             else
232                 registerPendingResource(extensions, id, element);
233         }
234 
235         if (style.hasFilter()) {
236             const FilterOperations&amp; filterOperations = style.filter();
237             if (filterOperations.size() == 1) {
238                 const FilterOperation&amp; filterOperation = *filterOperations.at(0);
239                 if (filterOperation.type() == FilterOperation::REFERENCE) {
240                     const auto&amp; referenceFilterOperation = downcast&lt;ReferenceFilterOperation&gt;(filterOperation);
241                     AtomString id = SVGURIReference::fragmentIdentifierFromIRIString(referenceFilterOperation.url(), element.document());
242                     if (setFilter(getRenderSVGResourceById&lt;RenderSVGResourceFilter&gt;(document, id)))
243                         foundResources = true;
244                     else
</pre>
</td>
<td>
<hr />
<pre>
198     ASSERT(renderer.element());
199     ASSERT_WITH_SECURITY_IMPLICATION(renderer.element()-&gt;isSVGElement());
200 
201     if (!renderer.element())
202         return false;
203 
204     auto&amp; element = downcast&lt;SVGElement&gt;(*renderer.element());
205 
206     Document&amp; document = element.document();
207 
208     SVGDocumentExtensions&amp; extensions = document.accessSVGExtensions();
209 
210     const AtomString&amp; tagName = element.localName();
211     if (tagName.isNull())
212         return false;
213 
214     const SVGRenderStyle&amp; svgStyle = style.svgStyle();
215 
216     bool foundResources = false;
217     if (clipperFilterMaskerTags().contains(tagName)) {
<span class="line-modified">218         if (is&lt;ReferenceClipPathOperation&gt;(style.clipPath())) {</span>






219             // FIXME: -webkit-clip-path should support external resources
220             // https://bugs.webkit.org/show_bug.cgi?id=127032
221             auto&amp; clipPath = downcast&lt;ReferenceClipPathOperation&gt;(*style.clipPath());
222             AtomString id(clipPath.fragment());
223             if (setClipper(getRenderSVGResourceById&lt;RenderSVGResourceClipper&gt;(document, id)))
224                 foundResources = true;
225             else
226                 registerPendingResource(extensions, id, element);
227         }
228 
229         if (style.hasFilter()) {
230             const FilterOperations&amp; filterOperations = style.filter();
231             if (filterOperations.size() == 1) {
232                 const FilterOperation&amp; filterOperation = *filterOperations.at(0);
233                 if (filterOperation.type() == FilterOperation::REFERENCE) {
234                     const auto&amp; referenceFilterOperation = downcast&lt;ReferenceFilterOperation&gt;(filterOperation);
235                     AtomString id = SVGURIReference::fragmentIdentifierFromIRIString(referenceFilterOperation.url(), element.document());
236                     if (setFilter(getRenderSVGResourceById&lt;RenderSVGResourceFilter&gt;(document, id)))
237                         foundResources = true;
238                     else
</pre>
</td>
</tr>
</table>
<center><a href="SVGRenderingContext.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="SVGRootInlineBox.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>