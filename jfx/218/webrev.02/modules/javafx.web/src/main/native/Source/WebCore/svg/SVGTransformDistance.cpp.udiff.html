<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/svg/SVGTransformDistance.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SVGTransform.idl.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SVGTransformList.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/svg/SVGTransformDistance.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -25,10 +25,14 @@</span>
  #include &quot;FloatSize.h&quot;
  #include &quot;SVGTransformValue.h&quot;
  
  #include &lt;math.h&gt;
  
<span class="udiff-line-added">+ #if PLATFORM(JAVA)</span>
<span class="udiff-line-added">+ #include &lt;wtf/java/JavaMath.h&gt;</span>
<span class="udiff-line-added">+ #endif</span>
<span class="udiff-line-added">+ </span>
  namespace WebCore {
  
  SVGTransformDistance::SVGTransformDistance()
      : m_type(SVGTransformValue::SVG_TRANSFORM_UNKNOWN)
      , m_angle(0)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -55,11 +59,11 @@</span>
      ASSERT(m_type == toSVGTransform.type());
  
      switch (m_type) {
      case SVGTransformValue::SVG_TRANSFORM_MATRIX:
          ASSERT_NOT_REACHED();
<span class="udiff-line-modified-removed">- #if ASSERT_DISABLED</span>
<span class="udiff-line-modified-added">+ #if !ASSERT_ENABLED</span>
          FALLTHROUGH;
  #endif
      case SVGTransformValue::SVG_TRANSFORM_UNKNOWN:
          break;
      case SVGTransformValue::SVG_TRANSFORM_ROTATE: {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -90,11 +94,11 @@</span>
  SVGTransformDistance SVGTransformDistance::scaledDistance(float scaleFactor) const
  {
      switch (m_type) {
      case SVGTransformValue::SVG_TRANSFORM_MATRIX:
          ASSERT_NOT_REACHED();
<span class="udiff-line-modified-removed">- #if ASSERT_DISABLED</span>
<span class="udiff-line-modified-added">+ #if !ASSERT_ENABLED</span>
          FALLTHROUGH;
  #endif
      case SVGTransformValue::SVG_TRANSFORM_UNKNOWN:
          return SVGTransformDistance();
      case SVGTransformValue::SVG_TRANSFORM_ROTATE:
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -123,11 +127,11 @@</span>
      SVGTransformValue transform;
  
      switch (first.type()) {
      case SVGTransformValue::SVG_TRANSFORM_MATRIX:
          ASSERT_NOT_REACHED();
<span class="udiff-line-modified-removed">- #if ASSERT_DISABLED</span>
<span class="udiff-line-modified-added">+ #if !ASSERT_ENABLED</span>
          FALLTHROUGH;
  #endif
      case SVGTransformValue::SVG_TRANSFORM_UNKNOWN:
          return { };
      case SVGTransformValue::SVG_TRANSFORM_ROTATE: {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -165,11 +169,11 @@</span>
      SVGTransformValue newTransform(transform);
  
      switch (m_type) {
      case SVGTransformValue::SVG_TRANSFORM_MATRIX:
          ASSERT_NOT_REACHED();
<span class="udiff-line-modified-removed">- #if ASSERT_DISABLED</span>
<span class="udiff-line-modified-added">+ #if !ASSERT_ENABLED</span>
          FALLTHROUGH;
  #endif
      case SVGTransformValue::SVG_TRANSFORM_UNKNOWN:
          return { };
      case SVGTransformValue::SVG_TRANSFORM_TRANSLATE: {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -209,21 +213,25 @@</span>
  float SVGTransformDistance::distance() const
  {
      switch (m_type) {
      case SVGTransformValue::SVG_TRANSFORM_MATRIX:
          ASSERT_NOT_REACHED();
<span class="udiff-line-modified-removed">- #if ASSERT_DISABLED</span>
<span class="udiff-line-modified-added">+ #if !ASSERT_ENABLED</span>
          FALLTHROUGH;
  #endif
      case SVGTransformValue::SVG_TRANSFORM_UNKNOWN:
          return 0;
      case SVGTransformValue::SVG_TRANSFORM_ROTATE:
<span class="udiff-line-modified-removed">-         return sqrtf(m_angle * m_angle + m_cx * m_cx + m_cy * m_cy);</span>
<span class="udiff-line-modified-added">+ #if PLATFORM(JAVA)</span>
<span class="udiff-line-added">+         return javamath::hypot(m_angle, m_cx, m_cy);</span>
<span class="udiff-line-added">+ #else</span>
<span class="udiff-line-added">+         return std::hypot(m_angle, m_cx, m_cy);</span>
<span class="udiff-line-added">+ #endif</span>
      case SVGTransformValue::SVG_TRANSFORM_SCALE:
<span class="udiff-line-modified-removed">-         return static_cast&lt;float&gt;(sqrt(m_transform.a() * m_transform.a() + m_transform.d() * m_transform.d()));</span>
<span class="udiff-line-modified-added">+         return static_cast&lt;float&gt;(std::hypot(m_transform.a(), m_transform.d()));</span>
      case SVGTransformValue::SVG_TRANSFORM_TRANSLATE:
<span class="udiff-line-modified-removed">-         return static_cast&lt;float&gt;(sqrt(m_transform.e() * m_transform.e() + m_transform.f() * m_transform.f()));</span>
<span class="udiff-line-modified-added">+         return static_cast&lt;float&gt;(std::hypot(m_transform.e(), m_transform.f()));</span>
      case SVGTransformValue::SVG_TRANSFORM_SKEWX:
      case SVGTransformValue::SVG_TRANSFORM_SKEWY:
          return m_angle;
      }
      ASSERT_NOT_REACHED();
</pre>
<center><a href="SVGTransform.idl.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SVGTransformList.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>