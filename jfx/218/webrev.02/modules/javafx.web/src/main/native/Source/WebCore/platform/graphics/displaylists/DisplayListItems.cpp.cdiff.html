<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/displaylists/DisplayListItems.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DisplayList.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="DisplayListItems.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/displaylists/DisplayListItems.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 27,10 ***</span>
<span class="line-new-header">--- 27,14 ---</span>
  #include &quot;DisplayListItems.h&quot;
  
  #include &quot;FontCascade.h&quot;
  #include &lt;wtf/text/TextStream.h&gt;
  
<span class="line-added">+ #if USE(CG)</span>
<span class="line-added">+ #include &quot;GraphicsContextPlatformPrivateCG.h&quot;</span>
<span class="line-added">+ #endif</span>
<span class="line-added">+ </span>
  namespace WebCore {
  namespace DisplayList {
  
  // Should match RenderTheme::platformFocusRingWidth()
  static const float platformFocusRingWidth = 3;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 42,10 ***</span>
<span class="line-new-header">--- 46,17 ---</span>
      ts &lt;&lt; *this;
      return ts.release().utf8();
  }
  #endif
  
<span class="line-added">+ Item::Item(ItemType type)</span>
<span class="line-added">+     : m_type(type)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ Item::~Item() = default;</span>
<span class="line-added">+ </span>
  size_t Item::sizeInBytes(const Item&amp; item)
  {
      switch (item.type()) {
      case ItemType::Save:
          return sizeof(downcast&lt;Save&gt;(item));
</pre>
<hr />
<pre>
<span class="line-old-header">*** 55,10 ***</span>
<span class="line-new-header">--- 66,12 ---</span>
          return sizeof(downcast&lt;Translate&gt;(item));
      case ItemType::Rotate:
          return sizeof(downcast&lt;Rotate&gt;(item));
      case ItemType::Scale:
          return sizeof(downcast&lt;Scale&gt;(item));
<span class="line-added">+     case ItemType::SetCTM:</span>
<span class="line-added">+         return sizeof(downcast&lt;SetCTM&gt;(item));</span>
      case ItemType::ConcatenateCTM:
          return sizeof(downcast&lt;ConcatenateCTM&gt;(item));
      case ItemType::SetState:
          return sizeof(downcast&lt;SetState&gt;(item));
      case ItemType::SetLineCap:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 160,10 ***</span>
<span class="line-new-header">--- 173,24 ---</span>
  
      ts.endGroup();
      return ts;
  }
  
<span class="line-added">+ DrawingItem::DrawingItem(ItemType type)</span>
<span class="line-added">+     : Item(type)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ DrawingItem::~DrawingItem() = default;</span>
<span class="line-added">+ </span>
<span class="line-added">+ Save::Save()</span>
<span class="line-added">+     : Item(ItemType::Save)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ Save::~Save() = default;</span>
<span class="line-added">+ </span>
  void Save::apply(GraphicsContext&amp; context) const
  {
      context.save();
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 171,15 ***</span>
<span class="line-new-header">--- 198,31 ---</span>
  {
      ts.dumpProperty(&quot;restore-index&quot;, item.restoreIndex());
      return ts;
  }
  
<span class="line-added">+ Restore::Restore()</span>
<span class="line-added">+     : Item(ItemType::Restore)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ Restore::~Restore() = default;</span>
<span class="line-added">+ </span>
  void Restore::apply(GraphicsContext&amp; context) const
  {
      context.restore();
  }
  
<span class="line-added">+ Translate::Translate(float x, float y)</span>
<span class="line-added">+     : Item(ItemType::Translate)</span>
<span class="line-added">+     , m_x(x)</span>
<span class="line-added">+     , m_y(y)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ Translate::~Translate() = default;</span>
<span class="line-added">+ </span>
  void Translate::apply(GraphicsContext&amp; context) const
  {
      context.translate(m_x, m_y);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 189,10 ***</span>
<span class="line-new-header">--- 232,18 ---</span>
      ts.dumpProperty(&quot;y&quot;, item.y());
  
      return ts;
  }
  
<span class="line-added">+ Rotate::Rotate(float angle)</span>
<span class="line-added">+     : Item(ItemType::Rotate)</span>
<span class="line-added">+     , m_angle(angle)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ Rotate::~Rotate() = default;</span>
<span class="line-added">+ </span>
  void Rotate::apply(GraphicsContext&amp; context) const
  {
      context.rotate(m_angle);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 201,10 ***</span>
<span class="line-new-header">--- 252,18 ---</span>
      ts.dumpProperty(&quot;angle&quot;, item.angle());
  
      return ts;
  }
  
<span class="line-added">+ Scale::Scale(const FloatSize&amp; size)</span>
<span class="line-added">+     : Item(ItemType::Scale)</span>
<span class="line-added">+     , m_size(size)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ Scale::~Scale() = default;</span>
<span class="line-added">+ </span>
  void Scale::apply(GraphicsContext&amp; context) const
  {
      context.scale(m_size);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 213,16 ***</span>
<span class="line-new-header">--- 272,38 ---</span>
      ts.dumpProperty(&quot;size&quot;, item.amount());
  
      return ts;
  }
  
<span class="line-added">+ SetCTM::SetCTM(const AffineTransform&amp; transform)</span>
<span class="line-added">+     : Item(ItemType::SetCTM)</span>
<span class="line-added">+     , m_transform(transform)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ SetCTM::~SetCTM() = default;</span>
<span class="line-added">+ </span>
<span class="line-added">+ void SetCTM::apply(GraphicsContext&amp; context) const</span>
<span class="line-added">+ {</span>
<span class="line-added">+     context.setCTM(m_transform);</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ static TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, const SetCTM&amp; item)</span>
<span class="line-added">+ {</span>
<span class="line-added">+     ts.dumpProperty(&quot;set-ctm&quot;, item.transform());</span>
<span class="line-added">+ </span>
<span class="line-added">+     return ts;</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
  ConcatenateCTM::ConcatenateCTM(const AffineTransform&amp; transform)
      : Item(ItemType::ConcatenateCTM)
      , m_transform(transform)
  {
  }
  
<span class="line-added">+ ConcatenateCTM::~ConcatenateCTM() = default;</span>
<span class="line-added">+ </span>
  void ConcatenateCTM::apply(GraphicsContext&amp; context) const
  {
      context.concatCTM(m_transform);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 231,10 ***</span>
<span class="line-new-header">--- 312,24 ---</span>
      ts.dumpProperty(&quot;ctm&quot;, item.transform());
  
      return ts;
  }
  
<span class="line-added">+ SetState::SetState(const GraphicsContextState&amp; state, GraphicsContextState::StateChangeFlags flags)</span>
<span class="line-added">+     : Item(ItemType::SetState)</span>
<span class="line-added">+     , m_state(state, flags)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ SetState::SetState(const GraphicsContextStateChange&amp; stateChange)</span>
<span class="line-added">+     : Item(ItemType::SetState)</span>
<span class="line-added">+     , m_state(stateChange)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ SetState::~SetState() = default;</span>
<span class="line-added">+ </span>
  void SetState::apply(GraphicsContext&amp; context) const
  {
      m_state.apply(context);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 247,10 ***</span>
<span class="line-new-header">--- 342,18 ---</span>
  {
      ts &lt;&lt; state.state();
      return ts;
  }
  
<span class="line-added">+ SetLineCap::SetLineCap(LineCap lineCap)</span>
<span class="line-added">+     : Item(ItemType::SetLineCap)</span>
<span class="line-added">+     , m_lineCap(lineCap)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ SetLineCap::~SetLineCap() = default;</span>
<span class="line-added">+ </span>
  void SetLineCap::apply(GraphicsContext&amp; context) const
  {
      context.setLineCap(m_lineCap);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 258,10 ***</span>
<span class="line-new-header">--- 361,19 ---</span>
  {
      ts.dumpProperty(&quot;line-cap&quot;, lineCap.lineCap());
      return ts;
  }
  
<span class="line-added">+ SetLineDash::SetLineDash(const DashArray&amp; dashArray, float dashOffset)</span>
<span class="line-added">+     : Item(ItemType::SetLineDash)</span>
<span class="line-added">+     , m_dashArray(dashArray)</span>
<span class="line-added">+     , m_dashOffset(dashOffset)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ SetLineDash::~SetLineDash() = default;</span>
<span class="line-added">+ </span>
  void SetLineDash::apply(GraphicsContext&amp; context) const
  {
      context.setLineDash(m_dashArray, m_dashOffset);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 270,10 ***</span>
<span class="line-new-header">--- 382,18 ---</span>
      ts.dumpProperty(&quot;dash-array&quot;, lineDash.dashArray());
      ts.dumpProperty(&quot;dash-offset&quot;, lineDash.dashOffset());
      return ts;
  }
  
<span class="line-added">+ SetLineJoin::SetLineJoin(LineJoin lineJoin)</span>
<span class="line-added">+     : Item(ItemType::SetLineJoin)</span>
<span class="line-added">+     , m_lineJoin(lineJoin)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ SetLineJoin::~SetLineJoin() = default;</span>
<span class="line-added">+ </span>
  void SetLineJoin::apply(GraphicsContext&amp; context) const
  {
      context.setLineJoin(m_lineJoin);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 281,10 ***</span>
<span class="line-new-header">--- 401,18 ---</span>
  {
      ts.dumpProperty(&quot;line-join&quot;, lineJoin.lineJoin());
      return ts;
  }
  
<span class="line-added">+ SetMiterLimit::SetMiterLimit(float miterLimit)</span>
<span class="line-added">+     : Item(ItemType::SetMiterLimit)</span>
<span class="line-added">+     , m_miterLimit(miterLimit)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ SetMiterLimit::~SetMiterLimit() = default;</span>
<span class="line-added">+ </span>
  void SetMiterLimit::apply(GraphicsContext&amp; context) const
  {
      context.setMiterLimit(m_miterLimit);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 292,15 ***</span>
<span class="line-new-header">--- 420,30 ---</span>
  {
      ts.dumpProperty(&quot;mitre-limit&quot;, miterLimit.miterLimit());
      return ts;
  }
  
<span class="line-added">+ ClearShadow::ClearShadow()</span>
<span class="line-added">+     : Item(ItemType::ClearShadow)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ ClearShadow::~ClearShadow() = default;</span>
<span class="line-added">+ </span>
  void ClearShadow::apply(GraphicsContext&amp; context) const
  {
      context.clearShadow();
  }
  
<span class="line-added">+ Clip::Clip(const FloatRect&amp; rect)</span>
<span class="line-added">+     : Item(ItemType::Clip)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ Clip::~Clip() = default;</span>
<span class="line-added">+ </span>
  void Clip::apply(GraphicsContext&amp; context) const
  {
      context.clip(m_rect);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 308,10 ***</span>
<span class="line-new-header">--- 451,18 ---</span>
  {
      ts.dumpProperty(&quot;rect&quot;, item.rect());
      return ts;
  }
  
<span class="line-added">+ ClipOut::ClipOut(const FloatRect&amp; rect)</span>
<span class="line-added">+     : Item(ItemType::ClipOut)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ ClipOut::~ClipOut() = default;</span>
<span class="line-added">+ </span>
  void ClipOut::apply(GraphicsContext&amp; context) const
  {
      context.clipOut(m_rect);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 319,10 ***</span>
<span class="line-new-header">--- 470,18 ---</span>
  {
      ts.dumpProperty(&quot;rect&quot;, item.rect());
      return ts;
  }
  
<span class="line-added">+ ClipOutToPath::ClipOutToPath(const Path&amp; path)</span>
<span class="line-added">+     : Item(ItemType::ClipOutToPath)</span>
<span class="line-added">+     , m_path(path)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ ClipOutToPath::~ClipOutToPath() = default;</span>
<span class="line-added">+ </span>
  void ClipOutToPath::apply(GraphicsContext&amp; context) const
  {
      context.clipOut(m_path);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 330,10 ***</span>
<span class="line-new-header">--- 489,19 ---</span>
  {
      ts.dumpProperty(&quot;path&quot;, item.path());
      return ts;
  }
  
<span class="line-added">+ ClipPath::ClipPath(const Path&amp; path, WindRule windRule)</span>
<span class="line-added">+     : Item(ItemType::ClipPath)</span>
<span class="line-added">+     , m_path(path)</span>
<span class="line-added">+     , m_windRule(windRule)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ ClipPath::~ClipPath() = default;</span>
<span class="line-added">+ </span>
  void ClipPath::apply(GraphicsContext&amp; context) const
  {
      context.clipPath(m_path, m_windRule);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 342,10 ***</span>
<span class="line-new-header">--- 510,22 ---</span>
      ts.dumpProperty(&quot;path&quot;, item.path());
      ts.dumpProperty(&quot;wind-rule&quot;, item.windRule());
      return ts;
  }
  
<span class="line-added">+ DrawGlyphs::DrawGlyphs(const Font&amp; font, Vector&lt;GlyphBufferGlyph, 128&gt;&amp;&amp; glyphs, Vector&lt;GlyphBufferAdvance, 128&gt;&amp;&amp; advances, const FloatPoint&amp; blockLocation, const FloatSize&amp; localAnchor, FontSmoothingMode smoothingMode)</span>
<span class="line-added">+     : DrawingItem(ItemType::DrawGlyphs)</span>
<span class="line-added">+     , m_font(const_cast&lt;Font&amp;&gt;(font))</span>
<span class="line-added">+     , m_glyphs(WTFMove(glyphs))</span>
<span class="line-added">+     , m_advances(WTFMove(advances))</span>
<span class="line-added">+     , m_blockLocation(blockLocation)</span>
<span class="line-added">+     , m_localAnchor(localAnchor)</span>
<span class="line-added">+     , m_smoothingMode(smoothingMode)</span>
<span class="line-added">+ {</span>
<span class="line-added">+     computeBounds();</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
  DrawGlyphs::DrawGlyphs(const Font&amp; font, const GlyphBufferGlyph* glyphs, const GlyphBufferAdvance* advances, unsigned count, const FloatPoint&amp; blockLocation, const FloatSize&amp; localAnchor, FontSmoothingMode smoothingMode)
      : DrawingItem(ItemType::DrawGlyphs)
      , m_font(const_cast&lt;Font&amp;&gt;(font))
      , m_blockLocation(blockLocation)
      , m_localAnchor(localAnchor)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 358,10 ***</span>
<span class="line-new-header">--- 538,12 ---</span>
          m_advances.uncheckedAppend(advances[i]);
      }
      computeBounds();
  }
  
<span class="line-added">+ DrawGlyphs::~DrawGlyphs() = default;</span>
<span class="line-added">+ </span>
  inline GlyphBuffer DrawGlyphs::generateGlyphBuffer() const
  {
      GlyphBuffer result;
      for (size_t i = 0; i &lt; m_glyphs.size(); ++i) {
          result.add(m_glyphs[i], &amp;m_font.get(), m_advances[i], GlyphBuffer::noOffset);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 417,10 ***</span>
<span class="line-new-header">--- 599,12 ---</span>
      , m_source(source)
      , m_imagePaintingOptions(imagePaintingOptions)
  {
  }
  
<span class="line-added">+ DrawImage::~DrawImage() = default;</span>
<span class="line-added">+ </span>
  void DrawImage::apply(GraphicsContext&amp; context) const
  {
      context.drawImage(m_image.get(), m_destination, m_source, m_imagePaintingOptions);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 442,10 ***</span>
<span class="line-new-header">--- 626,12 ---</span>
      , m_spacing(spacing)
      , m_imagePaintingOptions(imagePaintingOptions)
  {
  }
  
<span class="line-added">+ DrawTiledImage::~DrawTiledImage() = default;</span>
<span class="line-added">+ </span>
  void DrawTiledImage::apply(GraphicsContext&amp; context) const
  {
      context.drawTiledImage(m_image.get(), m_destination, m_source, m_tileSize, m_spacing, m_imagePaintingOptions);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 470,10 ***</span>
<span class="line-new-header">--- 656,12 ---</span>
      , m_vRule(vRule)
      , m_imagePaintingOptions(imagePaintingOptions)
  {
  }
  
<span class="line-added">+ DrawTiledScaledImage::~DrawTiledScaledImage() = default;</span>
<span class="line-added">+ </span>
  void DrawTiledScaledImage::apply(GraphicsContext&amp; context) const
  {
      context.drawTiledImage(m_image.get(), m_destination, m_source, m_tileScaleFactor, m_hRule, m_vRule, m_imagePaintingOptions);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 492,34 ***</span>
  #if USE(CG)
      // FIXME: Need to store an image for Cairo.
      , m_image(image)
  #endif
      , m_imageSize(imageSize)
<span class="line-modified">!     , m_destination(destRect)</span>
      , m_srcRect(srcRect)
      , m_options(options)
  {
  #if !USE(CG)
      UNUSED_PARAM(image);
  #endif
  }
  
  void DrawNativeImage::apply(GraphicsContext&amp; context) const
  {
  #if USE(CG)
<span class="line-modified">!     context.drawNativeImage(m_image, m_imageSize, m_destination, m_srcRect, m_options);</span>
  #else
      UNUSED_PARAM(context);
  #endif
  }
  
  static TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, const DrawNativeImage&amp; item)
  {
      ts &lt;&lt; static_cast&lt;const DrawingItem&amp;&gt;(item);
      // FIXME: dump more stuff.
      ts.dumpProperty(&quot;source-rect&quot;, item.source());
<span class="line-modified">!     ts.dumpProperty(&quot;dest-rect&quot;, item.destination());</span>
      return ts;
  }
  #endif
  
  DrawPattern::DrawPattern(Image&amp; image, const FloatRect&amp; destRect, const FloatRect&amp; tileRect, const AffineTransform&amp; patternTransform, const FloatPoint&amp; phase, const FloatSize&amp; spacing, const ImagePaintingOptions&amp; options)
<span class="line-new-header">--- 680,36 ---</span>
  #if USE(CG)
      // FIXME: Need to store an image for Cairo.
      , m_image(image)
  #endif
      , m_imageSize(imageSize)
<span class="line-modified">!     , m_destinationRect(destRect)</span>
      , m_srcRect(srcRect)
      , m_options(options)
  {
  #if !USE(CG)
      UNUSED_PARAM(image);
  #endif
  }
  
<span class="line-added">+ DrawNativeImage::~DrawNativeImage() = default;</span>
<span class="line-added">+ </span>
  void DrawNativeImage::apply(GraphicsContext&amp; context) const
  {
  #if USE(CG)
<span class="line-modified">!     context.drawNativeImage(m_image, m_imageSize, m_destinationRect, m_srcRect, m_options);</span>
  #else
      UNUSED_PARAM(context);
  #endif
  }
  
  static TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, const DrawNativeImage&amp; item)
  {
      ts &lt;&lt; static_cast&lt;const DrawingItem&amp;&gt;(item);
      // FIXME: dump more stuff.
      ts.dumpProperty(&quot;source-rect&quot;, item.source());
<span class="line-modified">!     ts.dumpProperty(&quot;dest-rect&quot;, item.destinationRect());</span>
      return ts;
  }
  #endif
  
  DrawPattern::DrawPattern(Image&amp; image, const FloatRect&amp; destRect, const FloatRect&amp; tileRect, const AffineTransform&amp; patternTransform, const FloatPoint&amp; phase, const FloatSize&amp; spacing, const ImagePaintingOptions&amp; options)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 532,10 ***</span>
<span class="line-new-header">--- 722,12 ---</span>
      , m_spacing(spacing)
      , m_options(options)
  {
  }
  
<span class="line-added">+ DrawPattern::~DrawPattern() = default;</span>
<span class="line-added">+ </span>
  void DrawPattern::apply(GraphicsContext&amp; context) const
  {
      context.drawPattern(m_image.get(), m_destination, m_tileRect, m_patternTransform, m_phase, m_spacing, m_options);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 549,10 ***</span>
<span class="line-new-header">--- 741,19 ---</span>
      ts.dumpProperty(&quot;phase&quot;, item.phase());
      ts.dumpProperty(&quot;spacing&quot;, item.spacing());
      return ts;
  }
  
<span class="line-added">+ DrawRect::DrawRect(const FloatRect&amp; rect, float borderThickness)</span>
<span class="line-added">+     : DrawingItem(ItemType::DrawRect)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+     , m_borderThickness(borderThickness)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ DrawRect::~DrawRect() = default;</span>
<span class="line-added">+ </span>
  void DrawRect::apply(GraphicsContext&amp; context) const
  {
      context.drawRect(m_rect, m_borderThickness);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 562,10 ***</span>
<span class="line-new-header">--- 763,19 ---</span>
      ts.dumpProperty(&quot;rect&quot;, item.rect());
      ts.dumpProperty(&quot;border-thickness&quot;, item.borderThickness());
      return ts;
  }
  
<span class="line-added">+ DrawLine::DrawLine(const FloatPoint&amp; point1, const FloatPoint&amp; point2)</span>
<span class="line-added">+     : DrawingItem(ItemType::DrawLine)</span>
<span class="line-added">+     , m_point1(point1)</span>
<span class="line-added">+     , m_point2(point2)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ DrawLine::~DrawLine() = default;</span>
<span class="line-added">+ </span>
  Optional&lt;FloatRect&gt; DrawLine::localBounds(const GraphicsContext&amp;) const
  {
      FloatRect bounds;
      bounds.fitToPoints(m_point1, m_point2);
      return bounds;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 582,10 ***</span>
<span class="line-new-header">--- 792,23 ---</span>
      ts.dumpProperty(&quot;point-1&quot;, item.point1());
      ts.dumpProperty(&quot;point-2&quot;, item.point2());
      return ts;
  }
  
<span class="line-added">+ DrawLinesForText::DrawLinesForText(const FloatPoint&amp; blockLocation, const FloatSize&amp; localAnchor, float thickness, const DashArray&amp; widths, bool printing, bool doubleLines)</span>
<span class="line-added">+     : DrawingItem(ItemType::DrawLinesForText)</span>
<span class="line-added">+     , m_blockLocation(blockLocation)</span>
<span class="line-added">+     , m_localAnchor(localAnchor)</span>
<span class="line-added">+     , m_widths(widths)</span>
<span class="line-added">+     , m_thickness(thickness)</span>
<span class="line-added">+     , m_printing(printing)</span>
<span class="line-added">+     , m_doubleLines(doubleLines)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ DrawLinesForText::~DrawLinesForText() = default;</span>
<span class="line-added">+ </span>
  void DrawLinesForText::apply(GraphicsContext&amp; context) const
  {
      context.drawLinesForText(point(), m_thickness, m_widths, m_printing, m_doubleLines);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 613,10 ***</span>
<span class="line-new-header">--- 836,19 ---</span>
      ts.dumpProperty(&quot;is-printing&quot;, item.isPrinting());
      ts.dumpProperty(&quot;double&quot;, item.doubleLines());
      return ts;
  }
  
<span class="line-added">+ DrawDotsForDocumentMarker::DrawDotsForDocumentMarker(const FloatRect&amp; rect, DocumentMarkerLineStyle style)</span>
<span class="line-added">+     : DrawingItem(ItemType::DrawDotsForDocumentMarker)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+     , m_style(style)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ DrawDotsForDocumentMarker::~DrawDotsForDocumentMarker() = default;</span>
<span class="line-added">+ </span>
  void DrawDotsForDocumentMarker::apply(GraphicsContext&amp; context) const
  {
      context.drawDotsForDocumentMarker(m_rect, m_style);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 630,10 ***</span>
<span class="line-new-header">--- 862,18 ---</span>
      ts &lt;&lt; static_cast&lt;const DrawingItem&amp;&gt;(item);
      ts.dumpProperty(&quot;rect&quot;, item.rect());
      return ts;
  }
  
<span class="line-added">+ DrawEllipse::DrawEllipse(const FloatRect&amp; rect)</span>
<span class="line-added">+     : DrawingItem(ItemType::DrawEllipse)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ DrawEllipse::~DrawEllipse() = default;</span>
<span class="line-added">+ </span>
  void DrawEllipse::apply(GraphicsContext&amp; context) const
  {
      context.drawEllipse(m_rect);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 641,10 ***</span>
<span class="line-new-header">--- 881,18 ---</span>
  {
      ts.dumpProperty(&quot;rect&quot;, item.rect());
      return ts;
  }
  
<span class="line-added">+ DrawPath::DrawPath(const Path&amp; path)</span>
<span class="line-added">+     : DrawingItem(ItemType::DrawPath)</span>
<span class="line-added">+     , m_path(path)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ DrawPath::~DrawPath() = default;</span>
<span class="line-added">+ </span>
  void DrawPath::apply(GraphicsContext&amp; context) const
  {
  #if USE(CG)
      context.drawPath(m_path);
  #else
</pre>
<hr />
<pre>
<span class="line-old-header">*** 657,10 ***</span>
<span class="line-new-header">--- 905,21 ---</span>
      ts &lt;&lt; static_cast&lt;const DrawingItem&amp;&gt;(item);
  //    ts.dumpProperty(&quot;path&quot;, item.path()); // FIXME: add logging for paths.
      return ts;
  }
  
<span class="line-added">+ DrawFocusRingPath::DrawFocusRingPath(const Path&amp; path, float width, float offset, const Color&amp; color)</span>
<span class="line-added">+     : DrawingItem(ItemType::DrawFocusRingPath)</span>
<span class="line-added">+     , m_path(path)</span>
<span class="line-added">+     , m_width(width)</span>
<span class="line-added">+     , m_offset(offset)</span>
<span class="line-added">+     , m_color(color)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ DrawFocusRingPath::~DrawFocusRingPath() = default;</span>
<span class="line-added">+ </span>
  void DrawFocusRingPath::apply(GraphicsContext&amp; context) const
  {
      context.drawFocusRing(m_path, m_width, m_offset, m_color);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 679,10 ***</span>
<span class="line-new-header">--- 938,21 ---</span>
      ts.dumpProperty(&quot;offset&quot;, item.offset());
      ts.dumpProperty(&quot;color&quot;, item.color());
      return ts;
  }
  
<span class="line-added">+ DrawFocusRingRects::DrawFocusRingRects(const Vector&lt;FloatRect&gt;&amp; rects, float width, float offset, const Color&amp; color)</span>
<span class="line-added">+     : DrawingItem(ItemType::DrawFocusRingRects)</span>
<span class="line-added">+     , m_rects(rects)</span>
<span class="line-added">+     , m_width(width)</span>
<span class="line-added">+     , m_offset(offset)</span>
<span class="line-added">+     , m_color(color)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ DrawFocusRingRects::~DrawFocusRingRects() = default;</span>
<span class="line-added">+ </span>
  void DrawFocusRingRects::apply(GraphicsContext&amp; context) const
  {
      context.drawFocusRing(m_rects, m_width, m_offset, m_color);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 703,10 ***</span>
<span class="line-new-header">--- 973,18 ---</span>
      ts.dumpProperty(&quot;offset&quot;, item.offset());
      ts.dumpProperty(&quot;color&quot;, item.color());
      return ts;
  }
  
<span class="line-added">+ FillRect::FillRect(const FloatRect&amp; rect)</span>
<span class="line-added">+     : DrawingItem(ItemType::FillRect)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ FillRect::~FillRect() = default;</span>
<span class="line-added">+ </span>
  void FillRect::apply(GraphicsContext&amp; context) const
  {
      context.fillRect(m_rect);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 715,10 ***</span>
<span class="line-new-header">--- 993,19 ---</span>
      ts &lt;&lt; static_cast&lt;const DrawingItem&amp;&gt;(item);
      ts.dumpProperty(&quot;rect&quot;, item.rect());
      return ts;
  }
  
<span class="line-added">+ FillRectWithColor::FillRectWithColor(const FloatRect&amp; rect, const Color&amp; color)</span>
<span class="line-added">+     : DrawingItem(ItemType::FillRectWithColor)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+     , m_color(color)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ FillRectWithColor::~FillRectWithColor() = default;</span>
<span class="line-added">+ </span>
  void FillRectWithColor::apply(GraphicsContext&amp; context) const
  {
      context.fillRect(m_rect, m_color);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 728,10 ***</span>
<span class="line-new-header">--- 1015,19 ---</span>
      ts.dumpProperty(&quot;rect&quot;, item.rect());
      ts.dumpProperty(&quot;color&quot;, item.color());
      return ts;
  }
  
<span class="line-added">+ FillRectWithGradient::FillRectWithGradient(const FloatRect&amp; rect, Gradient&amp; gradient)</span>
<span class="line-added">+     : DrawingItem(ItemType::FillRectWithGradient)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+     , m_gradient(gradient)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ FillRectWithGradient::~FillRectWithGradient() = default;</span>
<span class="line-added">+ </span>
  void FillRectWithGradient::apply(GraphicsContext&amp; context) const
  {
      context.fillRect(m_rect, m_gradient.get());
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 741,10 ***</span>
<span class="line-new-header">--- 1037,21 ---</span>
      // FIXME: log gradient.
      ts.dumpProperty(&quot;rect&quot;, item.rect());
      return ts;
  }
  
<span class="line-added">+ FillCompositedRect::FillCompositedRect(const FloatRect&amp; rect, const Color&amp; color, CompositeOperator op, BlendMode blendMode)</span>
<span class="line-added">+     : DrawingItem(ItemType::FillCompositedRect)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+     , m_color(color)</span>
<span class="line-added">+     , m_op(op)</span>
<span class="line-added">+     , m_blendMode(blendMode)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ FillCompositedRect::~FillCompositedRect() = default;</span>
<span class="line-added">+ </span>
  void FillCompositedRect::apply(GraphicsContext&amp; context) const
  {
      context.fillRect(m_rect, m_color, m_op, m_blendMode);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 756,10 ***</span>
<span class="line-new-header">--- 1063,20 ---</span>
      ts.dumpProperty(&quot;composite-operation&quot;, item.compositeOperator());
      ts.dumpProperty(&quot;blend-mode&quot;, item.blendMode());
      return ts;
  }
  
<span class="line-added">+ FillRoundedRect::FillRoundedRect(const FloatRoundedRect&amp; rect, const Color&amp; color, BlendMode blendMode)</span>
<span class="line-added">+     : DrawingItem(ItemType::FillRoundedRect)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+     , m_color(color)</span>
<span class="line-added">+     , m_blendMode(blendMode)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ FillRoundedRect::~FillRoundedRect() = default;</span>
<span class="line-added">+ </span>
  void FillRoundedRect::apply(GraphicsContext&amp; context) const
  {
      context.fillRoundedRect(m_rect, m_color, m_blendMode);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 770,10 ***</span>
<span class="line-new-header">--- 1087,20 ---</span>
      ts.dumpProperty(&quot;color&quot;, item.color());
      ts.dumpProperty(&quot;blend-mode&quot;, item.blendMode());
      return ts;
  }
  
<span class="line-added">+ FillRectWithRoundedHole::FillRectWithRoundedHole(const FloatRect&amp; rect, const FloatRoundedRect&amp; roundedHoleRect, const Color&amp; color)</span>
<span class="line-added">+     : DrawingItem(ItemType::FillRectWithRoundedHole)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+     , m_roundedHoleRect(roundedHoleRect)</span>
<span class="line-added">+     , m_color(color)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ FillRectWithRoundedHole::~FillRectWithRoundedHole() = default;</span>
<span class="line-added">+ </span>
  void FillRectWithRoundedHole::apply(GraphicsContext&amp; context) const
  {
      context.fillRectWithRoundedHole(m_rect, m_roundedHoleRect, m_color);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 784,10 ***</span>
<span class="line-new-header">--- 1111,18 ---</span>
      ts.dumpProperty(&quot;rounded-hole-rect&quot;, item.roundedHoleRect());
      ts.dumpProperty(&quot;color&quot;, item.color());
      return ts;
  }
  
<span class="line-added">+ FillPath::FillPath(const Path&amp; path)</span>
<span class="line-added">+     : DrawingItem(ItemType::FillPath)</span>
<span class="line-added">+     , m_path(path)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ FillPath::~FillPath() = default;</span>
<span class="line-added">+ </span>
  void FillPath::apply(GraphicsContext&amp; context) const
  {
      context.fillPath(m_path);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 796,10 ***</span>
<span class="line-new-header">--- 1131,18 ---</span>
      ts &lt;&lt; static_cast&lt;const DrawingItem&amp;&gt;(item);
      ts.dumpProperty(&quot;path&quot;, item.path());
      return ts;
  }
  
<span class="line-added">+ FillEllipse::FillEllipse(const FloatRect&amp; rect)</span>
<span class="line-added">+     : DrawingItem(ItemType::FillEllipse)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ FillEllipse::~FillEllipse() = default;</span>
<span class="line-added">+ </span>
  void FillEllipse::apply(GraphicsContext&amp; context) const
  {
      context.fillEllipse(m_rect);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 808,10 ***</span>
<span class="line-new-header">--- 1151,19 ---</span>
      ts &lt;&lt; static_cast&lt;const DrawingItem&amp;&gt;(item);
      ts.dumpProperty(&quot;rect&quot;, item.rect());
      return ts;
  }
  
<span class="line-added">+ StrokeRect::StrokeRect(const FloatRect&amp; rect, float lineWidth)</span>
<span class="line-added">+     : DrawingItem(ItemType::StrokeRect)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+     , m_lineWidth(lineWidth)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ StrokeRect::~StrokeRect() = default;</span>
<span class="line-added">+ </span>
  Optional&lt;FloatRect&gt; StrokeRect::localBounds(const GraphicsContext&amp;) const
  {
      FloatRect bounds = m_rect;
      bounds.expand(m_lineWidth, m_lineWidth);
      return bounds;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 850,10 ***</span>
<span class="line-new-header">--- 1202,18 ---</span>
      ts &lt;&lt; static_cast&lt;const DrawingItem&amp;&gt;(item);
      ts.dumpProperty(&quot;path&quot;, item.path());
      return ts;
  }
  
<span class="line-added">+ StrokeEllipse::StrokeEllipse(const FloatRect&amp; rect)</span>
<span class="line-added">+     : DrawingItem(ItemType::StrokeEllipse)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ StrokeEllipse::~StrokeEllipse() = default;</span>
<span class="line-added">+ </span>
  Optional&lt;FloatRect&gt; StrokeEllipse::localBounds(const GraphicsContext&amp; context) const
  {
      float strokeThickness = context.strokeThickness();
  
      FloatRect bounds = m_rect;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 871,10 ***</span>
<span class="line-new-header">--- 1231,26 ---</span>
      ts &lt;&lt; static_cast&lt;const DrawingItem&amp;&gt;(item);
      ts.dumpProperty(&quot;rect&quot;, item.rect());
      return ts;
  }
  
<span class="line-added">+ StrokePath::StrokePath(const Path&amp; path)</span>
<span class="line-added">+     : DrawingItem(ItemType::StrokePath)</span>
<span class="line-added">+     , m_path(path)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ StrokePath::~StrokePath() = default;</span>
<span class="line-added">+ </span>
<span class="line-added">+ ClearRect::ClearRect(const FloatRect&amp; rect)</span>
<span class="line-added">+     : DrawingItem(ItemType::ClearRect)</span>
<span class="line-added">+     , m_rect(rect)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ ClearRect::~ClearRect() = default;</span>
<span class="line-added">+ </span>
  void ClearRect::apply(GraphicsContext&amp; context) const
  {
      context.clearRect(m_rect);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 883,10 ***</span>
<span class="line-new-header">--- 1259,18 ---</span>
      ts &lt;&lt; static_cast&lt;const DrawingItem&amp;&gt;(item);
      ts.dumpProperty(&quot;rect&quot;, item.rect());
      return ts;
  }
  
<span class="line-added">+ BeginTransparencyLayer::BeginTransparencyLayer(float opacity)</span>
<span class="line-added">+     : DrawingItem(ItemType::BeginTransparencyLayer)</span>
<span class="line-added">+     , m_opacity(opacity)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ BeginTransparencyLayer::~BeginTransparencyLayer() = default;</span>
<span class="line-added">+ </span>
  void BeginTransparencyLayer::apply(GraphicsContext&amp; context) const
  {
      context.beginTransparencyLayer(m_opacity);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 895,27 ***</span>
<span class="line-new-header">--- 1279,56 ---</span>
      ts &lt;&lt; static_cast&lt;const DrawingItem&amp;&gt;(item);
      ts.dumpProperty(&quot;opacity&quot;, item.opacity());
      return ts;
  }
  
<span class="line-added">+ EndTransparencyLayer::EndTransparencyLayer()</span>
<span class="line-added">+     : DrawingItem(ItemType::EndTransparencyLayer)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ EndTransparencyLayer::~EndTransparencyLayer() = default;</span>
<span class="line-added">+ </span>
  void EndTransparencyLayer::apply(GraphicsContext&amp; context) const
  {
      context.endTransparencyLayer();
  }
  
  #if USE(CG)
<span class="line-added">+ ApplyStrokePattern::ApplyStrokePattern()</span>
<span class="line-added">+     : Item(ItemType::ApplyStrokePattern)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ ApplyStrokePattern::~ApplyStrokePattern() = default;</span>
<span class="line-added">+ </span>
  void ApplyStrokePattern::apply(GraphicsContext&amp; context) const
  {
      context.applyStrokePattern();
  }
  
<span class="line-added">+ ApplyFillPattern::ApplyFillPattern()</span>
<span class="line-added">+     : Item(ItemType::ApplyFillPattern)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ ApplyFillPattern::~ApplyFillPattern() = default;</span>
<span class="line-added">+ </span>
  void ApplyFillPattern::apply(GraphicsContext&amp; context) const
  {
      context.applyFillPattern();
  }
  #endif
  
<span class="line-added">+ ApplyDeviceScaleFactor::ApplyDeviceScaleFactor(float scaleFactor)</span>
<span class="line-added">+     : Item(ItemType::ApplyDeviceScaleFactor)</span>
<span class="line-added">+     , m_scaleFactor(scaleFactor)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ ApplyDeviceScaleFactor::~ApplyDeviceScaleFactor() = default;</span>
<span class="line-added">+ </span>
  void ApplyDeviceScaleFactor::apply(GraphicsContext&amp; context) const
  {
      context.applyDeviceScaleFactor(m_scaleFactor);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 931,10 ***</span>
<span class="line-new-header">--- 1344,11 ---</span>
      case ItemType::Save: ts &lt;&lt; &quot;save&quot;; break;
      case ItemType::Restore: ts &lt;&lt; &quot;restore&quot;; break;
      case ItemType::Translate: ts &lt;&lt; &quot;translate&quot;; break;
      case ItemType::Rotate: ts &lt;&lt; &quot;rotate&quot;; break;
      case ItemType::Scale: ts &lt;&lt; &quot;scale&quot;; break;
<span class="line-added">+     case ItemType::SetCTM: ts &lt;&lt; &quot;set-ctm&quot;; break;</span>
      case ItemType::ConcatenateCTM: ts &lt;&lt; &quot;concatentate-ctm&quot;; break;
      case ItemType::SetState: ts &lt;&lt; &quot;set-state&quot;; break;
      case ItemType::SetLineCap: ts &lt;&lt; &quot;set-line-cap&quot;; break;
      case ItemType::SetLineDash: ts &lt;&lt; &quot;set-line-dash&quot;; break;
      case ItemType::SetLineJoin: ts &lt;&lt; &quot;set-line-join&quot;; break;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1000,10 ***</span>
<span class="line-new-header">--- 1414,13 ---</span>
          ts &lt;&lt; downcast&lt;Rotate&gt;(item);
          break;
      case ItemType::Scale:
          ts &lt;&lt; downcast&lt;Scale&gt;(item);
          break;
<span class="line-added">+     case ItemType::SetCTM:</span>
<span class="line-added">+         ts &lt;&lt; downcast&lt;SetCTM&gt;(item);</span>
<span class="line-added">+         break;</span>
      case ItemType::ConcatenateCTM:
          ts &lt;&lt; downcast&lt;ConcatenateCTM&gt;(item);
          break;
      case ItemType::SetState:
          ts &lt;&lt; downcast&lt;SetState&gt;(item);
</pre>
<center><a href="DisplayList.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="DisplayListItems.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>