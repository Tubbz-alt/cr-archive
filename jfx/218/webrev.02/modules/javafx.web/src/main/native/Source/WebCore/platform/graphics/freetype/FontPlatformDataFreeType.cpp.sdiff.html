<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/freetype/FontPlatformDataFreeType.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FontCustomPlatformDataFreeType.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="SimpleFontDataFreeType.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/freetype/FontPlatformDataFreeType.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 94         // subpixel anti-aliasing.
 95         if (!booleanResult)
 96             cairo_font_options_set_antialias(options, CAIRO_ANTIALIAS_NONE);
 97         else if (cairo_font_options_get_antialias(options) == CAIRO_ANTIALIAS_NONE)
 98             cairo_font_options_set_antialias(options, CAIRO_ANTIALIAS_GRAY);
 99     }
100 
101     if (FcPatternGetInteger(pattern, FC_HINT_STYLE, 0, &amp;integerResult) == FcResultMatch)
102         cairo_font_options_set_hint_style(options, convertFontConfigHintStyle(integerResult));
103     if (FcPatternGetBool(pattern, FC_HINTING, 0, &amp;booleanResult) == FcResultMatch &amp;&amp; !booleanResult)
104         cairo_font_options_set_hint_style(options, CAIRO_HINT_STYLE_NONE);
105 
106 #if ENABLE(VARIATION_FONTS)
107     FcChar8* variations;
108     if (FcPatternGetString(pattern, FC_FONT_VARIATIONS, 0, &amp;variations) == FcResultMatch) {
109         cairo_font_options_set_variations(options, reinterpret_cast&lt;char*&gt;(variations));
110     }
111 #endif
112 }
113 
<span class="line-modified">114 FontPlatformData::FontPlatformData(cairo_font_face_t* fontFace, FcPattern* pattern, float size, bool fixedWidth, bool syntheticBold, bool syntheticOblique, FontOrientation orientation)</span>
115     : FontPlatformData(size, syntheticBold, syntheticOblique, orientation)
116 {
<span class="line-modified">117     m_pattern = pattern;</span>
118     m_fixedWidth = fixedWidth;
119 
120     buildScaledFont(fontFace);
121 
122 #ifdef FT_HAS_COLOR
123     CairoFtFaceLocker cairoFtFaceLocker(m_scaledFont.get());
124     if (FT_Face ftFace = cairoFtFaceLocker.ftFace())
125         m_isColorBitmapFont = FT_HAS_COLOR(ftFace);
126 #endif
127 }
128 
129 FontPlatformData FontPlatformData::cloneWithOrientation(const FontPlatformData&amp; source, FontOrientation orientation)
130 {
131     FontPlatformData copy(source);
132     if (copy.m_scaledFont &amp;&amp; copy.m_orientation != orientation) {
133         copy.m_orientation = orientation;
134         copy.buildScaledFont(cairo_scaled_font_get_font_face(copy.m_scaledFont.get()));
135     }
136     return copy;
137 }
</pre>
</td>
<td>
<hr />
<pre>
 94         // subpixel anti-aliasing.
 95         if (!booleanResult)
 96             cairo_font_options_set_antialias(options, CAIRO_ANTIALIAS_NONE);
 97         else if (cairo_font_options_get_antialias(options) == CAIRO_ANTIALIAS_NONE)
 98             cairo_font_options_set_antialias(options, CAIRO_ANTIALIAS_GRAY);
 99     }
100 
101     if (FcPatternGetInteger(pattern, FC_HINT_STYLE, 0, &amp;integerResult) == FcResultMatch)
102         cairo_font_options_set_hint_style(options, convertFontConfigHintStyle(integerResult));
103     if (FcPatternGetBool(pattern, FC_HINTING, 0, &amp;booleanResult) == FcResultMatch &amp;&amp; !booleanResult)
104         cairo_font_options_set_hint_style(options, CAIRO_HINT_STYLE_NONE);
105 
106 #if ENABLE(VARIATION_FONTS)
107     FcChar8* variations;
108     if (FcPatternGetString(pattern, FC_FONT_VARIATIONS, 0, &amp;variations) == FcResultMatch) {
109         cairo_font_options_set_variations(options, reinterpret_cast&lt;char*&gt;(variations));
110     }
111 #endif
112 }
113 
<span class="line-modified">114 FontPlatformData::FontPlatformData(cairo_font_face_t* fontFace, RefPtr&lt;FcPattern&gt;&amp;&amp; pattern, float size, bool fixedWidth, bool syntheticBold, bool syntheticOblique, FontOrientation orientation)</span>
115     : FontPlatformData(size, syntheticBold, syntheticOblique, orientation)
116 {
<span class="line-modified">117     m_pattern = WTFMove(pattern);</span>
118     m_fixedWidth = fixedWidth;
119 
120     buildScaledFont(fontFace);
121 
122 #ifdef FT_HAS_COLOR
123     CairoFtFaceLocker cairoFtFaceLocker(m_scaledFont.get());
124     if (FT_Face ftFace = cairoFtFaceLocker.ftFace())
125         m_isColorBitmapFont = FT_HAS_COLOR(ftFace);
126 #endif
127 }
128 
129 FontPlatformData FontPlatformData::cloneWithOrientation(const FontPlatformData&amp; source, FontOrientation orientation)
130 {
131     FontPlatformData copy(source);
132     if (copy.m_scaledFont &amp;&amp; copy.m_orientation != orientation) {
133         copy.m_orientation = orientation;
134         copy.buildScaledFont(cairo_scaled_font_get_font_face(copy.m_scaledFont.get()));
135     }
136     return copy;
137 }
</pre>
</td>
</tr>
</table>
<center><a href="FontCustomPlatformDataFreeType.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="SimpleFontDataFreeType.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>