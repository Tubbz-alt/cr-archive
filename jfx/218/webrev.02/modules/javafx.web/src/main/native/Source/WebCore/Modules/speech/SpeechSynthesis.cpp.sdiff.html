<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/speech/SpeechSynthesis.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../paymentrequest/PaymentResponse.idl.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="SpeechSynthesis.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/speech/SpeechSynthesis.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
132 #if PLATFORM(IOS_FAMILY)
133     if (UserGestureIndicator::processingUserGesture())
134         removeBehaviorRestriction(RequireUserGestureForSpeechStartRestriction);
135     else if (userGestureRequiredForSpeechStart())
136         return;
137 #endif
138 
139     m_utteranceQueue.append(utterance);
140 
141     // If the queue was empty, speak this immediately and add it to the queue.
142     if (m_utteranceQueue.size() == 1)
143         startSpeakingImmediately(m_utteranceQueue.first());
144 }
145 
146 void SpeechSynthesis::cancel()
147 {
148     // Remove all the items from the utterance queue.
149     // Hold on to the current utterance so the platform synthesizer can have a chance to clean up.
150     RefPtr&lt;SpeechSynthesisUtterance&gt; current = m_currentSpeechUtterance;
151     m_utteranceQueue.clear();
<span class="line-modified">152     if (m_speechSynthesisClient)</span>
153         m_speechSynthesisClient-&gt;cancel();
<span class="line-modified">154     else if (m_platformSpeechSynthesizer) {</span>

155         m_platformSpeechSynthesizer-&gt;cancel();
156         // The platform should have called back immediately and cleared the current utterance.
157         ASSERT(!m_currentSpeechUtterance);
158     }
159     current = nullptr;
160 }
161 
162 void SpeechSynthesis::pause()
163 {
164     if (!m_isPaused) {
165         if (m_speechSynthesisClient)
166             m_speechSynthesisClient-&gt;pause();
167         else if (m_platformSpeechSynthesizer)
168             m_platformSpeechSynthesizer-&gt;pause();
169     }
170 }
171 
172 void SpeechSynthesis::resume()
173 {
174     if (m_currentSpeechUtterance) {
</pre>
</td>
<td>
<hr />
<pre>
132 #if PLATFORM(IOS_FAMILY)
133     if (UserGestureIndicator::processingUserGesture())
134         removeBehaviorRestriction(RequireUserGestureForSpeechStartRestriction);
135     else if (userGestureRequiredForSpeechStart())
136         return;
137 #endif
138 
139     m_utteranceQueue.append(utterance);
140 
141     // If the queue was empty, speak this immediately and add it to the queue.
142     if (m_utteranceQueue.size() == 1)
143         startSpeakingImmediately(m_utteranceQueue.first());
144 }
145 
146 void SpeechSynthesis::cancel()
147 {
148     // Remove all the items from the utterance queue.
149     // Hold on to the current utterance so the platform synthesizer can have a chance to clean up.
150     RefPtr&lt;SpeechSynthesisUtterance&gt; current = m_currentSpeechUtterance;
151     m_utteranceQueue.clear();
<span class="line-modified">152     if (m_speechSynthesisClient) {</span>
153         m_speechSynthesisClient-&gt;cancel();
<span class="line-modified">154         m_currentSpeechUtterance = nullptr;</span>
<span class="line-added">155     } else if (m_platformSpeechSynthesizer) {</span>
156         m_platformSpeechSynthesizer-&gt;cancel();
157         // The platform should have called back immediately and cleared the current utterance.
158         ASSERT(!m_currentSpeechUtterance);
159     }
160     current = nullptr;
161 }
162 
163 void SpeechSynthesis::pause()
164 {
165     if (!m_isPaused) {
166         if (m_speechSynthesisClient)
167             m_speechSynthesisClient-&gt;pause();
168         else if (m_platformSpeechSynthesizer)
169             m_platformSpeechSynthesizer-&gt;pause();
170     }
171 }
172 
173 void SpeechSynthesis::resume()
174 {
175     if (m_currentSpeechUtterance) {
</pre>
</td>
</tr>
</table>
<center><a href="../paymentrequest/PaymentResponse.idl.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="SpeechSynthesis.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>