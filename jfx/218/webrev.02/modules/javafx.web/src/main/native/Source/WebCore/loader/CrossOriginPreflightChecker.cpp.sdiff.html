<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/loader/CrossOriginPreflightChecker.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="CrossOriginAccessControl.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CrossOriginPreflightChecker.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/loader/CrossOriginPreflightChecker.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
152 
153     // FIXME: Ideally, we should ask platformLoadResourceSynchronously to set ResourceResponse isRedirected and use it here.
154     bool isRedirect = preflightRequest.url().strippedForUseAsReferrer() != response.url().strippedForUseAsReferrer();
155     if (isRedirect || !response.isSuccessful()) {
156         auto errorMessage = &quot;Preflight response is not successful&quot;_s;
157         loader.document().addConsoleMessage(MessageSource::Security, MessageLevel::Error, errorMessage);
158 
159         loader.preflightFailure(identifier, ResourceError { errorDomainWebKitInternal, 0, request.url(), errorMessage, ResourceError::Type::AccessControl });
160         return;
161     }
162 
163     validatePreflightResponse(loader, WTFMove(request), identifier, response);
164 }
165 
166 void CrossOriginPreflightChecker::setDefersLoading(bool value)
167 {
168     if (m_resource)
169         m_resource-&gt;setDefersLoading(value);
170 }
171 
<span class="line-removed">172 bool CrossOriginPreflightChecker::isXMLHttpRequest() const</span>
<span class="line-removed">173 {</span>
<span class="line-removed">174     return m_loader.isXMLHttpRequest();</span>
<span class="line-removed">175 }</span>
<span class="line-removed">176 </span>
177 } // namespace WebCore
</pre>
</td>
<td>
<hr />
<pre>
152 
153     // FIXME: Ideally, we should ask platformLoadResourceSynchronously to set ResourceResponse isRedirected and use it here.
154     bool isRedirect = preflightRequest.url().strippedForUseAsReferrer() != response.url().strippedForUseAsReferrer();
155     if (isRedirect || !response.isSuccessful()) {
156         auto errorMessage = &quot;Preflight response is not successful&quot;_s;
157         loader.document().addConsoleMessage(MessageSource::Security, MessageLevel::Error, errorMessage);
158 
159         loader.preflightFailure(identifier, ResourceError { errorDomainWebKitInternal, 0, request.url(), errorMessage, ResourceError::Type::AccessControl });
160         return;
161     }
162 
163     validatePreflightResponse(loader, WTFMove(request), identifier, response);
164 }
165 
166 void CrossOriginPreflightChecker::setDefersLoading(bool value)
167 {
168     if (m_resource)
169         m_resource-&gt;setDefersLoading(value);
170 }
171 





172 } // namespace WebCore
</pre>
</td>
</tr>
</table>
<center><a href="CrossOriginAccessControl.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CrossOriginPreflightChecker.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>