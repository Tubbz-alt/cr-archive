<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/loader/TextResourceDecoder.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SubresourceLoader.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="TextTrackLoader.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/loader/TextResourceDecoder.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 20 */
 21 
 22 
 23 #include &quot;config.h&quot;
 24 #include &quot;TextResourceDecoder.h&quot;
 25 
 26 #include &quot;HTMLMetaCharsetParser.h&quot;
 27 #include &quot;HTMLNames.h&quot;
 28 #include &quot;MIMETypeRegistry.h&quot;
 29 #include &quot;TextCodec.h&quot;
 30 #include &quot;TextEncoding.h&quot;
 31 #include &quot;TextEncodingDetector.h&quot;
 32 #include &quot;TextEncodingRegistry.h&quot;
 33 #include &lt;wtf/ASCIICType.h&gt;
 34 
 35 
 36 namespace WebCore {
 37 
 38 using namespace HTMLNames;
 39 
<span class="line-modified"> 40 static inline bool bytesEqual(const char* p, char b0, char b1)</span>
 41 {
<span class="line-modified"> 42     return p[0] == b0 &amp;&amp; p[1] == b1;</span>
 43 }
 44 
<span class="line-modified"> 45 static inline bool bytesEqual(const char* p, char b0, char b1, char b2, char b3, char b4)</span>

 46 {
<span class="line-modified"> 47     return p[0] == b0 &amp;&amp; p[1] == b1 &amp;&amp; p[2] == b2 &amp;&amp; p[3] == b3 &amp;&amp; p[4] == b4;</span>
<span class="line-removed"> 48 }</span>
<span class="line-removed"> 49 </span>
<span class="line-removed"> 50 static inline bool bytesEqual(const char* p, char b0, char b1, char b2, char b3, char b4, char b5)</span>
<span class="line-removed"> 51 {</span>
<span class="line-removed"> 52     return p[0] == b0 &amp;&amp; p[1] == b1 &amp;&amp; p[2] == b2 &amp;&amp; p[3] == b3 &amp;&amp; p[4] == b4 &amp;&amp; p[5] == b5;</span>
<span class="line-removed"> 53 }</span>
<span class="line-removed"> 54 </span>
<span class="line-removed"> 55 static inline bool bytesEqual(const char* p, char b0, char b1, char b2, char b3, char b4, char b5, char b6, char b7)</span>
<span class="line-removed"> 56 {</span>
<span class="line-removed"> 57     return p[0] == b0 &amp;&amp; p[1] == b1 &amp;&amp; p[2] == b2 &amp;&amp; p[3] == b3 &amp;&amp; p[4] == b4 &amp;&amp; p[5] == b5 &amp;&amp; p[6] == b6 &amp;&amp; p[7] == b7;</span>
<span class="line-removed"> 58 }</span>
<span class="line-removed"> 59 </span>
<span class="line-removed"> 60 static inline bool bytesEqual(const char* p, char b0, char b1, char b2, char b3, char b4, char b5, char b6, char b7, char b8, char b9)</span>
<span class="line-removed"> 61 {</span>
<span class="line-removed"> 62     return p[0] == b0 &amp;&amp; p[1] == b1 &amp;&amp; p[2] == b2 &amp;&amp; p[3] == b3 &amp;&amp; p[4] == b4 &amp;&amp; p[5] == b5 &amp;&amp; p[6] == b6 &amp;&amp; p[7] == b7 &amp;&amp; p[8] == b8 &amp;&amp; p[9] == b9;</span>
 63 }
 64 
 65 // You might think we should put these find functions elsewhere, perhaps with the
 66 // similar functions that operate on UChar, but arguably only the decoder has
 67 // a reason to process strings of char rather than UChar.
 68 
 69 static int find(const char* subject, size_t subjectLength, const char* target)
 70 {
 71     size_t targetLength = strlen(target);
 72     if (targetLength &gt; subjectLength)
 73         return -1;
 74     for (size_t i = 0; i &lt;= subjectLength - targetLength; ++i) {
 75         bool match = true;
 76         for (size_t j = 0; j &lt; targetLength; ++j) {
 77             if (subject[i + j] != target[j]) {
 78                 match = false;
 79                 break;
 80             }
 81         }
 82         if (match)
</pre>
</td>
<td>
<hr />
<pre>
 20 */
 21 
 22 
 23 #include &quot;config.h&quot;
 24 #include &quot;TextResourceDecoder.h&quot;
 25 
 26 #include &quot;HTMLMetaCharsetParser.h&quot;
 27 #include &quot;HTMLNames.h&quot;
 28 #include &quot;MIMETypeRegistry.h&quot;
 29 #include &quot;TextCodec.h&quot;
 30 #include &quot;TextEncoding.h&quot;
 31 #include &quot;TextEncodingDetector.h&quot;
 32 #include &quot;TextEncodingRegistry.h&quot;
 33 #include &lt;wtf/ASCIICType.h&gt;
 34 
 35 
 36 namespace WebCore {
 37 
 38 using namespace HTMLNames;
 39 
<span class="line-modified"> 40 static constexpr bool bytesEqual(const char* p, char b)</span>
 41 {
<span class="line-modified"> 42     return *p == b;</span>
 43 }
 44 
<span class="line-modified"> 45 template&lt;typename... T&gt;</span>
<span class="line-added"> 46 static constexpr bool bytesEqual(const char* p, char b, T... bs)</span>
 47 {
<span class="line-modified"> 48     return *p == b &amp;&amp; bytesEqual(p + 1, bs...);</span>















 49 }
 50 
 51 // You might think we should put these find functions elsewhere, perhaps with the
 52 // similar functions that operate on UChar, but arguably only the decoder has
 53 // a reason to process strings of char rather than UChar.
 54 
 55 static int find(const char* subject, size_t subjectLength, const char* target)
 56 {
 57     size_t targetLength = strlen(target);
 58     if (targetLength &gt; subjectLength)
 59         return -1;
 60     for (size_t i = 0; i &lt;= subjectLength - targetLength; ++i) {
 61         bool match = true;
 62         for (size_t j = 0; j &lt; targetLength; ++j) {
 63             if (subject[i + j] != target[j]) {
 64                 match = false;
 65                 break;
 66             }
 67         }
 68         if (match)
</pre>
</td>
</tr>
</table>
<center><a href="SubresourceLoader.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="TextTrackLoader.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>