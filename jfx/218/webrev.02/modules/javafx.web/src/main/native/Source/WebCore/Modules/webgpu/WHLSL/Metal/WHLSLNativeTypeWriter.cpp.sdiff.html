<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/webgpu/WHLSL/Metal/WHLSLNativeTypeWriter.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="WHLSLNativeFunctionWriter.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../WHLSLASTDumper.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/webgpu/WHLSL/Metal/WHLSLNativeTypeWriter.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 79         auto suffix = ([&amp;]() -&gt; String {
 80             switch (integerLiteral.value()) {
 81             case 2:
 82                 return &quot;2&quot;_str;
 83             case 3:
 84                 return &quot;3&quot;_str;
 85             default:
 86                 ASSERT(integerLiteral.value() == 4);
 87                 return &quot;4&quot;_str;
 88             }
 89         })();
 90         return makeString(prefix, suffix);
 91     }
 92     if (nativeTypeDeclaration.name() == &quot;matrix&quot;) {
 93         ASSERT(nativeTypeDeclaration.typeArguments().size() == 3);
 94         ASSERT(WTF::holds_alternative&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]));
 95         auto&amp; typeReference = WTF::get&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]);
 96         auto&amp; unifyNode = typeReference-&gt;unifyNode();
 97         auto&amp; namedType = downcast&lt;AST::NamedType&gt;(unifyNode);
 98         auto&amp; parameterType = downcast&lt;AST::NativeTypeDeclaration&gt;(namedType);
<span class="line-modified"> 99         auto prefix = ([&amp;]() -&gt; String {</span>
100             if (parameterType.name() == &quot;bool&quot;)
101                 return &quot;bool&quot;;
102             ASSERT(parameterType.name() == &quot;float&quot;);
103             return &quot;float&quot;;
104         })();
105 
<span class="line-modified">106         ASSERT(WTF::holds_alternative&lt;AST::ConstantExpression&gt;(nativeTypeDeclaration.typeArguments()[1]));</span>
<span class="line-removed">107         auto&amp; constantExpression1 = WTF::get&lt;AST::ConstantExpression&gt;(nativeTypeDeclaration.typeArguments()[1]);</span>
<span class="line-removed">108         auto&amp; integerLiteral1 = constantExpression1.integerLiteral();</span>
<span class="line-removed">109         unsigned rows = integerLiteral1.value();</span>
<span class="line-removed">110         ASSERT(rows == 2 || rows == 3 || rows == 4);</span>
<span class="line-removed">111 </span>
<span class="line-removed">112         ASSERT(WTF::holds_alternative&lt;AST::ConstantExpression&gt;(nativeTypeDeclaration.typeArguments()[2]));</span>
<span class="line-removed">113         auto&amp; constantExpression2 = WTF::get&lt;AST::ConstantExpression&gt;(nativeTypeDeclaration.typeArguments()[2]);</span>
<span class="line-removed">114         auto&amp; integerLiteral2 = constantExpression2.integerLiteral();</span>
<span class="line-removed">115         unsigned columns = integerLiteral2.value();</span>
<span class="line-removed">116         ASSERT(columns == 2 || columns == 3 || columns == 4);</span>
<span class="line-removed">117         return makeString(&quot;array&lt;&quot;, prefix, &quot;, &quot;, columns * rows, &quot;&gt;&quot;);</span>
118     }
119     ASSERT(nativeTypeDeclaration.typeArguments().size() == 1);
120     ASSERT(WTF::holds_alternative&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]));
121     auto&amp; typeReference = WTF::get&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]);
122     auto prefix = ([&amp;]() -&gt; String {
123         if (nativeTypeDeclaration.name() == &quot;Texture1D&quot;)
124             return &quot;texture1d&quot;_str;
125         if (nativeTypeDeclaration.name() == &quot;RWTexture1D&quot;)
126             return &quot;texture1d&quot;_str;
127         if (nativeTypeDeclaration.name() == &quot;Texture1DArray&quot;)
128             return &quot;texture1d_array&quot;_str;
129         if (nativeTypeDeclaration.name() == &quot;RWTexture1DArray&quot;)
130             return &quot;texture1d_array&quot;_str;
131         if (nativeTypeDeclaration.name() == &quot;Texture2D&quot;)
132             return &quot;texture2d&quot;_str;
133         if (nativeTypeDeclaration.name() == &quot;RWTexture2D&quot;)
134             return &quot;texture2d&quot;_str;
135         if (nativeTypeDeclaration.name() == &quot;Texture2DArray&quot;)
136             return &quot;texture2d_array&quot;_str;
137         if (nativeTypeDeclaration.name() == &quot;RWTexture2DArray&quot;)
</pre>
</td>
<td>
<hr />
<pre>
 79         auto suffix = ([&amp;]() -&gt; String {
 80             switch (integerLiteral.value()) {
 81             case 2:
 82                 return &quot;2&quot;_str;
 83             case 3:
 84                 return &quot;3&quot;_str;
 85             default:
 86                 ASSERT(integerLiteral.value() == 4);
 87                 return &quot;4&quot;_str;
 88             }
 89         })();
 90         return makeString(prefix, suffix);
 91     }
 92     if (nativeTypeDeclaration.name() == &quot;matrix&quot;) {
 93         ASSERT(nativeTypeDeclaration.typeArguments().size() == 3);
 94         ASSERT(WTF::holds_alternative&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]));
 95         auto&amp; typeReference = WTF::get&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]);
 96         auto&amp; unifyNode = typeReference-&gt;unifyNode();
 97         auto&amp; namedType = downcast&lt;AST::NamedType&gt;(unifyNode);
 98         auto&amp; parameterType = downcast&lt;AST::NativeTypeDeclaration&gt;(namedType);
<span class="line-modified"> 99         auto prefix = ([&amp;] {</span>
100             if (parameterType.name() == &quot;bool&quot;)
101                 return &quot;bool&quot;;
102             ASSERT(parameterType.name() == &quot;float&quot;);
103             return &quot;float&quot;;
104         })();
105 
<span class="line-modified">106         return makeString(&quot;WSLMatrix&lt;&quot;, prefix, &quot;, &quot;, nativeTypeDeclaration.numberOfMatrixColumns(), &quot;, &quot;, nativeTypeDeclaration.numberOfMatrixRows(), &quot;&gt;&quot;);</span>











107     }
108     ASSERT(nativeTypeDeclaration.typeArguments().size() == 1);
109     ASSERT(WTF::holds_alternative&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]));
110     auto&amp; typeReference = WTF::get&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]);
111     auto prefix = ([&amp;]() -&gt; String {
112         if (nativeTypeDeclaration.name() == &quot;Texture1D&quot;)
113             return &quot;texture1d&quot;_str;
114         if (nativeTypeDeclaration.name() == &quot;RWTexture1D&quot;)
115             return &quot;texture1d&quot;_str;
116         if (nativeTypeDeclaration.name() == &quot;Texture1DArray&quot;)
117             return &quot;texture1d_array&quot;_str;
118         if (nativeTypeDeclaration.name() == &quot;RWTexture1DArray&quot;)
119             return &quot;texture1d_array&quot;_str;
120         if (nativeTypeDeclaration.name() == &quot;Texture2D&quot;)
121             return &quot;texture2d&quot;_str;
122         if (nativeTypeDeclaration.name() == &quot;RWTexture2D&quot;)
123             return &quot;texture2d&quot;_str;
124         if (nativeTypeDeclaration.name() == &quot;Texture2DArray&quot;)
125             return &quot;texture2d_array&quot;_str;
126         if (nativeTypeDeclaration.name() == &quot;RWTexture2DArray&quot;)
</pre>
</td>
</tr>
</table>
<center><a href="WHLSLNativeFunctionWriter.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../WHLSLASTDumper.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>