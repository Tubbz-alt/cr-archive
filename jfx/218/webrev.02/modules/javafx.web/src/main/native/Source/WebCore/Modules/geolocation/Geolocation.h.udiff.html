<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/Modules/geolocation/Geolocation.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Geolocation.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Geolocation.idl.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/geolocation/Geolocation.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -50,11 +50,11 @@</span>
  class ScriptExecutionContext;
  class SecurityOrigin;
  struct PositionOptions;
  
  class Geolocation final : public ScriptWrappable, public RefCounted&lt;Geolocation&gt;, public ActiveDOMObject {
<span class="udiff-line-modified-removed">-     WTF_MAKE_ISO_ALLOCATED(Geolocation);</span>
<span class="udiff-line-modified-added">+     WTF_MAKE_ISO_ALLOCATED_EXPORT(Geolocation, WEBCORE_EXPORT);</span>
      friend class GeoNotifier;
  public:
      static Ref&lt;Geolocation&gt; create(Navigator&amp;);
      WEBCORE_EXPORT ~Geolocation();
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -63,12 +63,13 @@</span>
  
      void getCurrentPosition(Ref&lt;PositionCallback&gt;&amp;&amp;, RefPtr&lt;PositionErrorCallback&gt;&amp;&amp;, PositionOptions&amp;&amp;);
      int watchPosition(Ref&lt;PositionCallback&gt;&amp;&amp;, RefPtr&lt;PositionErrorCallback&gt;&amp;&amp;, PositionOptions&amp;&amp;);
      void clearWatch(int watchID);
  
<span class="udiff-line-modified-removed">-     WEBCORE_EXPORT void setIsAllowed(bool);</span>
<span class="udiff-line-modified-removed">-     void resetIsAllowed() { m_allowGeolocation = Unknown; }</span>
<span class="udiff-line-modified-added">+     WEBCORE_EXPORT void setIsAllowed(bool, const String&amp; authorizationToken);</span>
<span class="udiff-line-modified-added">+     const String&amp; authorizationToken() const { return m_authorizationToken; }</span>
<span class="udiff-line-added">+     WEBCORE_EXPORT void resetIsAllowed();</span>
      bool isAllowed() const { return m_allowGeolocation == Yes; }
  
      void positionChanged();
      void setError(GeolocationError&amp;);
      bool shouldBlockGeolocationRequests();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -81,11 +82,10 @@</span>
  
      GeolocationPosition* lastPosition();
  
      // ActiveDOMObject
      void stop() override;
<span class="udiff-line-removed">-     bool canSuspendForDocumentSuspension() const override;</span>
      void suspend(ReasonForSuspension) override;
      void resume() override;
      const char* activeDOMObjectName() const override;
  
      bool isDenied() const { return m_allowGeolocation == No; }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -131,10 +131,11 @@</span>
  
      void makeSuccessCallbacks(GeolocationPosition&amp;);
      void handleError(GeolocationPositionError&amp;);
  
      void requestPermission();
<span class="udiff-line-added">+     void revokeAuthorizationTokenIfNecessary();</span>
  
      bool startUpdating(GeoNotifier*);
      void stopUpdating();
  
      void handlePendingPermissionNotifiers();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -154,10 +155,11 @@</span>
      Watchers m_watchers;
      GeoNotifierSet m_pendingForPermissionNotifiers;
      RefPtr&lt;GeolocationPosition&gt; m_lastPosition;
  
      enum { Unknown, InProgress, Yes, No } m_allowGeolocation { Unknown };
<span class="udiff-line-added">+     String m_authorizationToken;</span>
      bool m_isSuspended { false };
      bool m_resetOnResume { false };
      bool m_hasChangedPosition { false };
      RefPtr&lt;GeolocationPositionError&gt; m_errorWaitingForResume;
      Timer m_resumeTimer;
</pre>
<center><a href="Geolocation.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Geolocation.idl.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>