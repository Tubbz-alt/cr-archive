<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/filters/FEDropShadow.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FEComposite.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="FEDropShadow.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/filters/FEDropShadow.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 106,17 ***</span>
  
      contextShadow.blurLayerImage(srcPixelArray-&gt;data(), shadowArea.size(), 4 * shadowArea.size().width());
  
      resultImage-&gt;putByteArray(*srcPixelArray, AlphaPremultiplication::Premultiplied, shadowArea.size(), shadowArea, IntPoint(), ImageBuffer::BackingStoreCoordinateSystem);
  
<span class="line-modified">!     resultContext.setCompositeOperation(CompositeSourceIn);</span>
      resultContext.fillRect(FloatRect(FloatPoint(), absolutePaintRect().size()), m_shadowColor);
<span class="line-modified">!     resultContext.setCompositeOperation(CompositeDestinationOver);</span>
  
      resultImage-&gt;context().drawImageBuffer(*sourceImage, drawingRegion);
  }
  
  TextStream&amp; FEDropShadow::externalRepresentation(TextStream&amp; ts, RepresentationType representation) const
  {
      ts &lt;&lt; indent &lt;&lt;&quot;[feDropShadow&quot;;
      FilterEffect::externalRepresentation(ts, representation);
      ts &lt;&lt; &quot; stdDeviation=\&quot;&quot; &lt;&lt; m_stdX &lt;&lt; &quot;, &quot; &lt;&lt; m_stdY &lt;&lt; &quot;\&quot; dx=\&quot;&quot; &lt;&lt; m_dx &lt;&lt; &quot;\&quot; dy=\&quot;&quot; &lt;&lt; m_dy &lt;&lt; &quot;\&quot; flood-color=\&quot;&quot; &lt;&lt; m_shadowColor.nameForRenderTreeAsText() &lt;&lt;&quot;\&quot; flood-opacity=\&quot;&quot; &lt;&lt; m_shadowOpacity &lt;&lt; &quot;]\n&quot;;
<span class="line-new-header">--- 106,28 ---</span>
  
      contextShadow.blurLayerImage(srcPixelArray-&gt;data(), shadowArea.size(), 4 * shadowArea.size().width());
  
      resultImage-&gt;putByteArray(*srcPixelArray, AlphaPremultiplication::Premultiplied, shadowArea.size(), shadowArea, IntPoint(), ImageBuffer::BackingStoreCoordinateSystem);
  
<span class="line-modified">!     resultContext.setCompositeOperation(CompositeOperator::SourceIn);</span>
      resultContext.fillRect(FloatRect(FloatPoint(), absolutePaintRect().size()), m_shadowColor);
<span class="line-modified">!     resultContext.setCompositeOperation(CompositeOperator::DestinationOver);</span>
  
      resultImage-&gt;context().drawImageBuffer(*sourceImage, drawingRegion);
  }
  
<span class="line-added">+ IntOutsets FEDropShadow::outsets() const</span>
<span class="line-added">+ {</span>
<span class="line-added">+     IntSize outsetSize = FEGaussianBlur::calculateOutsetSize({ m_stdX, m_stdY });</span>
<span class="line-added">+     return {</span>
<span class="line-added">+         std::max&lt;int&gt;(0, outsetSize.height() - m_dy),</span>
<span class="line-added">+         std::max&lt;int&gt;(0, outsetSize.width() + m_dx),</span>
<span class="line-added">+         std::max&lt;int&gt;(0, outsetSize.height() + m_dy),</span>
<span class="line-added">+         std::max&lt;int&gt;(0, outsetSize.width() - m_dx)</span>
<span class="line-added">+     };</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
  TextStream&amp; FEDropShadow::externalRepresentation(TextStream&amp; ts, RepresentationType representation) const
  {
      ts &lt;&lt; indent &lt;&lt;&quot;[feDropShadow&quot;;
      FilterEffect::externalRepresentation(ts, representation);
      ts &lt;&lt; &quot; stdDeviation=\&quot;&quot; &lt;&lt; m_stdX &lt;&lt; &quot;, &quot; &lt;&lt; m_stdY &lt;&lt; &quot;\&quot; dx=\&quot;&quot; &lt;&lt; m_dx &lt;&lt; &quot;\&quot; dy=\&quot;&quot; &lt;&lt; m_dy &lt;&lt; &quot;\&quot; flood-color=\&quot;&quot; &lt;&lt; m_shadowColor.nameForRenderTreeAsText() &lt;&lt;&quot;\&quot; flood-opacity=\&quot;&quot; &lt;&lt; m_shadowOpacity &lt;&lt; &quot;]\n&quot;;
</pre>
<center><a href="FEComposite.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="FEDropShadow.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>