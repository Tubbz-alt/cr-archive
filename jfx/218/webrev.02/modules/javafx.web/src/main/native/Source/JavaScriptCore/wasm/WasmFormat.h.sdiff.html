<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/wasm/WasmFormat.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="WasmFaultSignalHandler.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="WasmFunctionParser.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/wasm/WasmFormat.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 37 #include &quot;WasmNameSection.h&quot;
 38 #include &quot;WasmOps.h&quot;
 39 #include &quot;WasmPageCount.h&quot;
 40 #include &quot;WasmSignature.h&quot;
 41 #include &lt;limits&gt;
 42 #include &lt;memory&gt;
 43 #include &lt;wtf/Optional.h&gt;
 44 #include &lt;wtf/Vector.h&gt;
 45 
 46 namespace JSC {
 47 
 48 namespace B3 {
 49 class Compilation;
 50 }
 51 
 52 namespace Wasm {
 53 
 54 struct CompilationContext;
 55 struct ModuleInformation;
 56 


 57 enum class TableElementType : uint8_t {
 58     Anyref,
 59     Funcref
 60 };
 61 
 62 inline bool isValueType(Type type)
 63 {
 64     switch (type) {
 65     case I32:
 66     case I64:
 67     case F32:
 68     case F64:
 69         return true;
 70     case Anyref:
 71     case Funcref:
 72         return Options::useWebAssemblyReferences();
 73     default:
 74         break;
 75     }
 76     return false;
</pre>
<hr />
<pre>
121     return &quot;?&quot;;
122 }
123 
124 struct Import {
125     WTF_MAKE_STRUCT_FAST_ALLOCATED;
126     const Name module;
127     const Name field;
128     ExternalKind kind;
129     unsigned kindIndex; // Index in the vector of the corresponding kind.
130 };
131 
132 struct Export {
133     WTF_MAKE_STRUCT_FAST_ALLOCATED;
134     const Name field;
135     ExternalKind kind;
136     unsigned kindIndex; // Index in the vector of the corresponding kind.
137 };
138 
139 String makeString(const Name&amp; characters);
140 
<span class="line-modified">141 struct Global {</span>
142     WTF_MAKE_STRUCT_FAST_ALLOCATED;
143     enum Mutability : uint8_t {
144         // FIXME auto-generate this. https://bugs.webkit.org/show_bug.cgi?id=165231
145         Mutable = 1,
146         Immutable = 0
147     };
148 
<span class="line-modified">149     enum InitializationType {</span>
150         IsImport,
151         FromGlobalImport,
152         FromRefFunc,
153         FromExpression
154     };
155 





156     Mutability mutability;
157     Type type;
158     InitializationType initializationType { IsImport };

159     uint64_t initialBitsOrImportNumber { 0 };
160 };
161 
162 struct FunctionData {
163     WTF_MAKE_STRUCT_FAST_ALLOCATED;
164     size_t start;
165     size_t end;
166     Vector&lt;uint8_t&gt; data;
167 };
168 
169 class I32InitExpr {
170     WTF_MAKE_FAST_ALLOCATED;
171     enum Type : uint8_t {
172         Global,
173         Const
174     };
175 
176     I32InitExpr(Type type, uint32_t bits)
177         : m_bits(bits)
178         , m_type(type)
</pre>
</td>
<td>
<hr />
<pre>
 37 #include &quot;WasmNameSection.h&quot;
 38 #include &quot;WasmOps.h&quot;
 39 #include &quot;WasmPageCount.h&quot;
 40 #include &quot;WasmSignature.h&quot;
 41 #include &lt;limits&gt;
 42 #include &lt;memory&gt;
 43 #include &lt;wtf/Optional.h&gt;
 44 #include &lt;wtf/Vector.h&gt;
 45 
 46 namespace JSC {
 47 
 48 namespace B3 {
 49 class Compilation;
 50 }
 51 
 52 namespace Wasm {
 53 
 54 struct CompilationContext;
 55 struct ModuleInformation;
 56 
<span class="line-added"> 57 using BlockSignature = const Signature*;</span>
<span class="line-added"> 58 </span>
 59 enum class TableElementType : uint8_t {
 60     Anyref,
 61     Funcref
 62 };
 63 
 64 inline bool isValueType(Type type)
 65 {
 66     switch (type) {
 67     case I32:
 68     case I64:
 69     case F32:
 70     case F64:
 71         return true;
 72     case Anyref:
 73     case Funcref:
 74         return Options::useWebAssemblyReferences();
 75     default:
 76         break;
 77     }
 78     return false;
</pre>
<hr />
<pre>
123     return &quot;?&quot;;
124 }
125 
126 struct Import {
127     WTF_MAKE_STRUCT_FAST_ALLOCATED;
128     const Name module;
129     const Name field;
130     ExternalKind kind;
131     unsigned kindIndex; // Index in the vector of the corresponding kind.
132 };
133 
134 struct Export {
135     WTF_MAKE_STRUCT_FAST_ALLOCATED;
136     const Name field;
137     ExternalKind kind;
138     unsigned kindIndex; // Index in the vector of the corresponding kind.
139 };
140 
141 String makeString(const Name&amp; characters);
142 
<span class="line-modified">143 struct GlobalInformation {</span>
144     WTF_MAKE_STRUCT_FAST_ALLOCATED;
145     enum Mutability : uint8_t {
146         // FIXME auto-generate this. https://bugs.webkit.org/show_bug.cgi?id=165231
147         Mutable = 1,
148         Immutable = 0
149     };
150 
<span class="line-modified">151     enum InitializationType : uint8_t {</span>
152         IsImport,
153         FromGlobalImport,
154         FromRefFunc,
155         FromExpression
156     };
157 
<span class="line-added">158     enum class BindingMode : uint8_t {</span>
<span class="line-added">159         EmbeddedInInstance = 0,</span>
<span class="line-added">160         Portable,</span>
<span class="line-added">161     };</span>
<span class="line-added">162 </span>
163     Mutability mutability;
164     Type type;
165     InitializationType initializationType { IsImport };
<span class="line-added">166     BindingMode bindingMode { BindingMode::EmbeddedInInstance };</span>
167     uint64_t initialBitsOrImportNumber { 0 };
168 };
169 
170 struct FunctionData {
171     WTF_MAKE_STRUCT_FAST_ALLOCATED;
172     size_t start;
173     size_t end;
174     Vector&lt;uint8_t&gt; data;
175 };
176 
177 class I32InitExpr {
178     WTF_MAKE_FAST_ALLOCATED;
179     enum Type : uint8_t {
180         Global,
181         Const
182     };
183 
184     I32InitExpr(Type type, uint32_t bits)
185         : m_bits(bits)
186         , m_type(type)
</pre>
</td>
</tr>
</table>
<center><a href="WasmFaultSignalHandler.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="WasmFunctionParser.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>