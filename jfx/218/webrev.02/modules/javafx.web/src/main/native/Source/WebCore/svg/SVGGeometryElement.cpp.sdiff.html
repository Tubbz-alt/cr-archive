<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/svg/SVGGeometryElement.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SVGGElement.idl.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SVGGeometryElement.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/svg/SVGGeometryElement.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 38 SVGGeometryElement::SVGGeometryElement(const QualifiedName&amp; tagName, Document&amp; document)
 39     : SVGGraphicsElement(tagName, document)
 40 {
 41     static std::once_flag onceFlag;
 42     std::call_once(onceFlag, [] {
 43         PropertyRegistry::registerProperty&lt;SVGNames::pathLengthAttr, &amp;SVGGeometryElement::m_pathLength&gt;();
 44     });
 45 }
 46 
 47 float SVGGeometryElement::getTotalLength() const
 48 {
 49     document().updateLayoutIgnorePendingStylesheets();
 50 
 51     auto* renderer = downcast&lt;RenderSVGShape&gt;(this-&gt;renderer());
 52     if (!renderer)
 53         return 0;
 54 
 55     return renderer-&gt;getTotalLength();
 56 }
 57 
<span class="line-modified"> 58 Ref&lt;SVGPoint&gt; SVGGeometryElement::getPointAtLength(float distance) const</span>
 59 {
<span class="line-removed"> 60     FloatPoint point { };</span>
<span class="line-removed"> 61 </span>
 62     document().updateLayoutIgnorePendingStylesheets();
 63 
 64     auto* renderer = downcast&lt;RenderSVGShape&gt;(this-&gt;renderer());
<span class="line-removed"> 65     if (renderer)</span>
<span class="line-removed"> 66         renderer-&gt;getPointAtLength(point, distance);</span>
 67 
<span class="line-modified"> 68     return SVGPoint::create(point);</span>








 69 }
 70 
 71 bool SVGGeometryElement::isPointInFill(DOMPointInit&amp;&amp; pointInit)
 72 {
 73     document().updateLayoutIgnorePendingStylesheets();
 74 
 75     auto* renderer = downcast&lt;RenderSVGShape&gt;(this-&gt;renderer());
 76     if (!renderer)
 77         return false;
 78 
 79     FloatPoint point {static_cast&lt;float&gt;(pointInit.x), static_cast&lt;float&gt;(pointInit.y)};
 80     return renderer-&gt;isPointInFill(point);
 81 }
 82 
 83 bool SVGGeometryElement::isPointInStroke(DOMPointInit&amp;&amp; pointInit)
 84 {
 85     document().updateLayoutIgnorePendingStylesheets();
 86 
 87     auto* renderer = downcast&lt;RenderSVGShape&gt;(this-&gt;renderer());
 88     if (!renderer)
</pre>
</td>
<td>
<hr />
<pre>
 38 SVGGeometryElement::SVGGeometryElement(const QualifiedName&amp; tagName, Document&amp; document)
 39     : SVGGraphicsElement(tagName, document)
 40 {
 41     static std::once_flag onceFlag;
 42     std::call_once(onceFlag, [] {
 43         PropertyRegistry::registerProperty&lt;SVGNames::pathLengthAttr, &amp;SVGGeometryElement::m_pathLength&gt;();
 44     });
 45 }
 46 
 47 float SVGGeometryElement::getTotalLength() const
 48 {
 49     document().updateLayoutIgnorePendingStylesheets();
 50 
 51     auto* renderer = downcast&lt;RenderSVGShape&gt;(this-&gt;renderer());
 52     if (!renderer)
 53         return 0;
 54 
 55     return renderer-&gt;getTotalLength();
 56 }
 57 
<span class="line-modified"> 58 ExceptionOr&lt;Ref&lt;SVGPoint&gt;&gt; SVGGeometryElement::getPointAtLength(float distance) const</span>
 59 {


 60     document().updateLayoutIgnorePendingStylesheets();
 61 
 62     auto* renderer = downcast&lt;RenderSVGShape&gt;(this-&gt;renderer());


 63 
<span class="line-modified"> 64     // Spec: If current element is a non-rendered element, throw an InvalidStateError.</span>
<span class="line-added"> 65     if (!renderer)</span>
<span class="line-added"> 66         return Exception { InvalidStateError };</span>
<span class="line-added"> 67 </span>
<span class="line-added"> 68     // Spec: Clamp distance to [0, length].</span>
<span class="line-added"> 69     distance = clampTo&lt;float&gt;(distance, 0, getTotalLength());</span>
<span class="line-added"> 70 </span>
<span class="line-added"> 71     // Spec: Return a newly created, detached SVGPoint object.</span>
<span class="line-added"> 72     return SVGPoint::create(renderer-&gt;getPointAtLength(distance));</span>
 73 }
 74 
 75 bool SVGGeometryElement::isPointInFill(DOMPointInit&amp;&amp; pointInit)
 76 {
 77     document().updateLayoutIgnorePendingStylesheets();
 78 
 79     auto* renderer = downcast&lt;RenderSVGShape&gt;(this-&gt;renderer());
 80     if (!renderer)
 81         return false;
 82 
 83     FloatPoint point {static_cast&lt;float&gt;(pointInit.x), static_cast&lt;float&gt;(pointInit.y)};
 84     return renderer-&gt;isPointInFill(point);
 85 }
 86 
 87 bool SVGGeometryElement::isPointInStroke(DOMPointInit&amp;&amp; pointInit)
 88 {
 89     document().updateLayoutIgnorePendingStylesheets();
 90 
 91     auto* renderer = downcast&lt;RenderSVGShape&gt;(this-&gt;renderer());
 92     if (!renderer)
</pre>
</td>
</tr>
</table>
<center><a href="SVGGElement.idl.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SVGGeometryElement.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>