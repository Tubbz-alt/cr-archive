<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/platform/ScrollView.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ScrollTypes.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ScrollView.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/ScrollView.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -204,25 +204,77 @@</span>
          return actualScrollPosition();
  #endif
      return scrollPosition();
  }
  
<span class="udiff-line-modified-removed">- void ScrollView::setContentsScrollPosition(const IntPoint&amp; position)</span>
<span class="udiff-line-modified-added">+ void ScrollView::setContentsScrollPosition(const IntPoint&amp; position, ScrollClamping clamping)</span>
  {
  #if PLATFORM(IOS_FAMILY)
      if (platformWidget())
          setActualScrollPosition(position);
  #endif
<span class="udiff-line-modified-removed">-     setScrollPosition(position);</span>
<span class="udiff-line-modified-added">+     setScrollPosition(position, clamping);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ FloatRect ScrollView::exposedContentRect() const</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+ #if PLATFORM(IOS_FAMILY)</span>
<span class="udiff-line-added">+     if (platformWidget())</span>
<span class="udiff-line-added">+         return platformExposedContentRect();</span>
<span class="udiff-line-added">+ #endif</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     const ScrollView* parent = this-&gt;parent();</span>
<span class="udiff-line-added">+     if (!parent)</span>
<span class="udiff-line-added">+         return m_delegatedScrollingGeometry ? m_delegatedScrollingGeometry-&gt;exposedContentRect : FloatRect();</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     IntRect parentViewExtentContentRect = enclosingIntRect(parent-&gt;exposedContentRect());</span>
<span class="udiff-line-added">+     IntRect selfExtentContentRect = rootViewToContents(parentViewExtentContentRect);</span>
<span class="udiff-line-added">+     selfExtentContentRect.intersect(boundsRect());</span>
<span class="udiff-line-added">+     return selfExtentContentRect;</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void ScrollView::setExposedContentRect(const FloatRect&amp; rect)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     ASSERT(!platformWidget());</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (!m_delegatedScrollingGeometry)</span>
<span class="udiff-line-added">+         m_delegatedScrollingGeometry = DelegatedScrollingGeometry();</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     m_delegatedScrollingGeometry-&gt;exposedContentRect = rect;</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ FloatSize ScrollView::unobscuredContentSize() const</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     ASSERT(m_delegatedScrollingGeometry);</span>
<span class="udiff-line-added">+     if (m_delegatedScrollingGeometry)</span>
<span class="udiff-line-added">+         return m_delegatedScrollingGeometry-&gt;unobscuredContentSize;</span>
<span class="udiff-line-added">+     return { };</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ void ScrollView::setUnobscuredContentSize(const FloatSize&amp; size)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     ASSERT(!platformWidget());</span>
<span class="udiff-line-added">+     if (m_delegatedScrollingGeometry &amp;&amp; size == m_delegatedScrollingGeometry-&gt;unobscuredContentSize)</span>
<span class="udiff-line-added">+         return;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (!m_delegatedScrollingGeometry)</span>
<span class="udiff-line-added">+         m_delegatedScrollingGeometry = DelegatedScrollingGeometry();</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     m_delegatedScrollingGeometry-&gt;unobscuredContentSize = size;</span>
<span class="udiff-line-added">+     unobscuredContentSizeChanged();</span>
  }
  
<span class="udiff-line-removed">- #if !PLATFORM(IOS_FAMILY)</span>
  IntRect ScrollView::unobscuredContentRect(VisibleContentRectIncludesScrollbars scrollbarInclusion) const
  {
<span class="udiff-line-added">+     if (platformWidget())</span>
<span class="udiff-line-added">+         return platformUnobscuredContentRect(scrollbarInclusion);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (m_delegatedScrollingGeometry)</span>
<span class="udiff-line-added">+         return IntRect(m_scrollPosition, roundedIntSize(m_delegatedScrollingGeometry-&gt;unobscuredContentSize));</span>
<span class="udiff-line-added">+ </span>
      return unobscuredContentRectInternal(scrollbarInclusion);
  }
<span class="udiff-line-removed">- #endif</span>
  
  IntRect ScrollView::unobscuredContentRectInternal(VisibleContentRectIncludesScrollbars scrollbarInclusion) const
  {
      FloatSize visibleContentSize = sizeForUnobscuredContent(scrollbarInclusion);
      visibleContentSize.scale(1 / visibleContentScaleFactor());
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -459,11 +511,11 @@</span>
      updateLayerPositionsAfterScrolling();
      scrollContents(scrollDelta);
      updateCompositingLayersAfterScrolling();
  }
  
<span class="udiff-line-modified-removed">- void ScrollView::setScrollPosition(const ScrollPosition&amp; scrollPosition)</span>
<span class="udiff-line-modified-added">+ void ScrollView::setScrollPosition(const ScrollPosition&amp; scrollPosition, ScrollClamping clamping)</span>
  {
      LOG_WITH_STREAM(Scrolling, stream &lt;&lt; &quot;ScrollView::setScrollPosition &quot; &lt;&lt; scrollPosition);
  
      if (prohibitsScrolling())
          return;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -471,16 +523,16 @@</span>
      if (platformWidget()) {
          platformSetScrollPosition(scrollPosition);
          return;
      }
  
<span class="udiff-line-modified-removed">-     ScrollPosition newScrollPosition = !delegatesScrolling() ? adjustScrollPositionWithinRange(scrollPosition) : scrollPosition;</span>
<span class="udiff-line-modified-added">+     ScrollPosition newScrollPosition = (!delegatesScrolling() &amp;&amp; clamping == ScrollClamping::Clamped) ? adjustScrollPositionWithinRange(scrollPosition) : scrollPosition;</span>
  
      if ((!delegatesScrolling() || currentScrollType() == ScrollType::User) &amp;&amp; newScrollPosition == this-&gt;scrollPosition())
          return;
  
<span class="udiff-line-modified-removed">-     if (requestScrollPositionUpdate(newScrollPosition))</span>
<span class="udiff-line-modified-added">+     if (requestScrollPositionUpdate(newScrollPosition, currentScrollType(), clamping))</span>
          return;
  
      updateScrollbars(newScrollPosition);
  }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1526,11 +1578,11 @@</span>
      return false;
  }
  
  IntRect ScrollView::platformVisibleContentRect(bool) const
  {
<span class="udiff-line-modified-removed">-     return IntRect();</span>
<span class="udiff-line-modified-added">+     return { };</span>
  }
  
  float ScrollView::platformTopContentInset() const
  {
      return 0;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1540,21 +1592,31 @@</span>
  {
  }
  
  IntSize ScrollView::platformVisibleContentSize(bool) const
  {
<span class="udiff-line-modified-removed">-     return IntSize();</span>
<span class="udiff-line-modified-added">+     return { };</span>
  }
  
  IntRect ScrollView::platformVisibleContentRectIncludingObscuredArea(bool) const
  {
<span class="udiff-line-modified-removed">-     return IntRect();</span>
<span class="udiff-line-modified-added">+     return { };</span>
  }
  
  IntSize ScrollView::platformVisibleContentSizeIncludingObscuredArea(bool) const
  {
<span class="udiff-line-modified-removed">-     return IntSize();</span>
<span class="udiff-line-modified-added">+     return { };</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ IntRect ScrollView::platformUnobscuredContentRect(VisibleContentRectIncludesScrollbars) const</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     return { };</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ FloatRect ScrollView::platformExposedContentRect() const</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     return { };</span>
  }
  
  void ScrollView::platformSetContentsSize()
  {
  }
</pre>
<center><a href="ScrollTypes.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ScrollView.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>