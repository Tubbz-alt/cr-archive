<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/FloatPolygon.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FloatPoint3D.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FloatPolygon.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/FloatPolygon.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -133,28 +133,22 @@</span>
      m_empty = m_edges.size() &lt; 3;
  
      if (m_empty)
          return;
  
<span class="udiff-line-modified-removed">-     for (unsigned i = 0; i &lt; m_edges.size(); ++i) {</span>
<span class="udiff-line-modified-removed">-         FloatPolygonEdge* edge = &amp;m_edges[i];</span>
<span class="udiff-line-removed">-         m_edgeTree.add(EdgeInterval(edge-&gt;minY(), edge-&gt;maxY(), edge));</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-modified-added">+     for (auto&amp; edge : m_edges)</span>
<span class="udiff-line-modified-added">+         m_edgeTree.add({ edge.minY(), edge.maxY(), &amp;edge });</span>
  }
  
<span class="udiff-line-modified-removed">- bool FloatPolygon::overlappingEdges(float minY, float maxY, Vector&lt;const FloatPolygonEdge*&gt;&amp; result) const</span>
<span class="udiff-line-modified-added">+ Vector&lt;std::reference_wrapper&lt;const FloatPolygonEdge&gt;&gt; FloatPolygon::overlappingEdges(float minY, float maxY) const</span>
  {
<span class="udiff-line-modified-removed">-     Vector&lt;FloatPolygon::EdgeInterval&gt; overlappingEdgeIntervals;</span>
<span class="udiff-line-modified-removed">-     m_edgeTree.allOverlaps(FloatPolygon::EdgeInterval(minY, maxY, 0), overlappingEdgeIntervals);</span>
<span class="udiff-line-modified-removed">-     unsigned overlappingEdgeIntervalsSize = overlappingEdgeIntervals.size();</span>
<span class="udiff-line-modified-removed">-     result.resize(overlappingEdgeIntervalsSize);</span>
<span class="udiff-line-modified-removed">-     for (unsigned i = 0; i &lt; overlappingEdgeIntervalsSize; ++i) {</span>
<span class="udiff-line-modified-removed">-         const FloatPolygonEdge* edge = static_cast&lt;const FloatPolygonEdge*&gt;(overlappingEdgeIntervals[i].data());</span>
<span class="udiff-line-removed">-         ASSERT(edge);</span>
<span class="udiff-line-removed">-         result[i] = edge;</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">-     return overlappingEdgeIntervalsSize &gt; 0;</span>
<span class="udiff-line-modified-added">+     auto overlappingEdgeIntervals = m_edgeTree.allOverlaps({ minY, maxY });</span>
<span class="udiff-line-modified-added">+     Vector&lt;std::reference_wrapper&lt;const FloatPolygonEdge&gt;&gt; result;</span>
<span class="udiff-line-modified-added">+     result.reserveInitialCapacity(overlappingEdgeIntervals.size());</span>
<span class="udiff-line-modified-added">+     for (auto&amp; interval : overlappingEdgeIntervals)</span>
<span class="udiff-line-modified-added">+         result.uncheckedAppend(*interval.data());</span>
<span class="udiff-line-modified-added">+     return result;</span>
  }
  
  static inline float leftSide(const FloatPoint&amp; vertex1, const FloatPoint&amp; vertex2, const FloatPoint&amp; point)
  {
      return ((point.x() - vertex1.x()) * (vertex2.y() - vertex1.y())) - ((vertex2.x() - vertex1.x()) * (point.y() - vertex1.y()));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -255,13 +249,13 @@</span>
      return true;
  }
  
  #ifndef NDEBUG
  
<span class="udiff-line-modified-removed">- String FloatPolygonEdge::debugString() const</span>
<span class="udiff-line-modified-added">+ TextStream&amp; operator&lt;&lt;(TextStream&amp; stream, const FloatPolygonEdge&amp; edge)</span>
  {
<span class="udiff-line-modified-removed">-     return makeString(&quot;0x&quot;, hex(reinterpret_cast&lt;uintptr_t&gt;(this)), &quot; (&quot;, vertex1().x(), &#39;,&#39;, vertex1().y(), &#39; &#39;, vertex2().x(), &#39;,&#39;, vertex2().y(), &#39;)&#39;);</span>
<span class="udiff-line-modified-added">+     return stream &lt;&lt; &amp;edge &lt;&lt; &quot; (&quot; &lt;&lt; edge.vertex1().x() &lt;&lt; &#39;,&#39; &lt;&lt; edge.vertex1().y() &lt;&lt; &#39; &#39; &lt;&lt; edge.vertex2().x() &lt;&lt; &#39;,&#39; &lt;&lt; edge.vertex2().y() &lt;&lt; &#39;)&#39;;</span>
  }
  
  #endif
  
  } // namespace WebCore
</pre>
<center><a href="FloatPoint3D.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FloatPolygon.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>