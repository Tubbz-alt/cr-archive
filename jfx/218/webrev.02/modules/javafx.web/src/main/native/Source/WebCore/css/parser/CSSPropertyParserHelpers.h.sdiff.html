<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/css/parser/CSSPropertyParserHelpers.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="CSSPropertyParserHelpers.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="CSSSelectorParser.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/css/parser/CSSPropertyParserHelpers.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 19 // &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 20 // LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 21 // A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 22 // OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 23 // SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 24 // LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 25 // DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 26 // THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 27 // (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 28 // OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 29 
 30 #pragma once
 31 
 32 #include &quot;CSSFunctionValue.h&quot;
 33 #include &quot;CSSParserContext.h&quot;
 34 #include &quot;CSSParserTokenRange.h&quot;
 35 #include &quot;CSSPrimitiveValue.h&quot;
 36 #include &quot;CSSShadowValue.h&quot;
 37 #include &quot;CSSValuePool.h&quot;
 38 #include &quot;Length.h&quot; // For ValueRange

 39 
 40 namespace WebCore {
 41 
 42 // When these functions are successful, they will consume all the relevant
 43 // tokens from the range and also consume any whitespace which follows. When
 44 // the start of the range doesn&#39;t match the type we&#39;re looking for, the range
 45 // will not be modified.
 46 namespace CSSPropertyParserHelpers {
 47 
 48 // FIXME: These should probably just be consumeComma and consumeSlash.
 49 bool consumeCommaIncludingWhitespace(CSSParserTokenRange&amp;);
 50 bool consumeSlashIncludingWhitespace(CSSParserTokenRange&amp;);
 51 // consumeFunction expects the range starts with a FunctionToken.
 52 CSSParserTokenRange consumeFunction(CSSParserTokenRange&amp;);
 53 
<span class="line-modified"> 54 enum class UnitlessQuirk {</span>
<span class="line-modified"> 55     Allow,</span>
<span class="line-removed"> 56     Forbid</span>
<span class="line-removed"> 57 };</span>
 58 
 59 RefPtr&lt;CSSPrimitiveValue&gt; consumeInteger(CSSParserTokenRange&amp;, double minimumValue = -std::numeric_limits&lt;double&gt;::max());
<span class="line-removed"> 60 bool consumePositiveIntegerRaw(CSSParserTokenRange&amp;, int&amp; result);</span>
 61 RefPtr&lt;CSSPrimitiveValue&gt; consumePositiveInteger(CSSParserTokenRange&amp;);
 62 bool consumeNumberRaw(CSSParserTokenRange&amp;, double&amp; result);
 63 RefPtr&lt;CSSPrimitiveValue&gt; consumeNumber(CSSParserTokenRange&amp;, ValueRange);
 64 RefPtr&lt;CSSPrimitiveValue&gt; consumeFontWeightNumber(CSSParserTokenRange&amp;);
 65 RefPtr&lt;CSSPrimitiveValue&gt; consumeLength(CSSParserTokenRange&amp;, CSSParserMode, ValueRange, UnitlessQuirk = UnitlessQuirk::Forbid);
 66 RefPtr&lt;CSSPrimitiveValue&gt; consumePercent(CSSParserTokenRange&amp;, ValueRange);
 67 RefPtr&lt;CSSPrimitiveValue&gt; consumeLengthOrPercent(CSSParserTokenRange&amp;, CSSParserMode, ValueRange, UnitlessQuirk = UnitlessQuirk::Forbid);
 68 RefPtr&lt;CSSPrimitiveValue&gt; consumeAngle(CSSParserTokenRange&amp;, CSSParserMode, UnitlessQuirk = UnitlessQuirk::Forbid);
 69 RefPtr&lt;CSSPrimitiveValue&gt; consumeTime(CSSParserTokenRange&amp;, CSSParserMode, ValueRange, UnitlessQuirk = UnitlessQuirk::Forbid);
<span class="line-modified"> 70 RefPtr&lt;CSSPrimitiveValue&gt; consumeResolution(CSSParserTokenRange&amp;);</span>
 71 
 72 RefPtr&lt;CSSPrimitiveValue&gt; consumeIdent(CSSParserTokenRange&amp;);
 73 RefPtr&lt;CSSPrimitiveValue&gt; consumeIdentRange(CSSParserTokenRange&amp;, CSSValueID lower, CSSValueID upper);
 74 template&lt;CSSValueID, CSSValueID...&gt; inline bool identMatches(CSSValueID id);
 75 template&lt;CSSValueID... allowedIdents&gt; RefPtr&lt;CSSPrimitiveValue&gt; consumeIdent(CSSParserTokenRange&amp;);
 76 
 77 RefPtr&lt;CSSPrimitiveValue&gt; consumeCustomIdent(CSSParserTokenRange&amp;);
 78 RefPtr&lt;CSSPrimitiveValue&gt; consumeString(CSSParserTokenRange&amp;);
 79 StringView consumeUrlAsStringView(CSSParserTokenRange&amp;);
 80 RefPtr&lt;CSSPrimitiveValue&gt; consumeUrl(CSSParserTokenRange&amp;);
 81 
 82 RefPtr&lt;CSSPrimitiveValue&gt; consumeColor(CSSParserTokenRange&amp;, CSSParserMode, bool acceptQuirkyColors = false);
 83 
<span class="line-modified"> 84 RefPtr&lt;CSSPrimitiveValue&gt; consumePosition(CSSParserTokenRange&amp;, CSSParserMode, UnitlessQuirk);</span>
<span class="line-modified"> 85 bool consumePosition(CSSParserTokenRange&amp;, CSSParserMode, UnitlessQuirk, RefPtr&lt;CSSPrimitiveValue&gt;&amp; resultX, RefPtr&lt;CSSPrimitiveValue&gt;&amp; resultY);</span>





 86 bool consumeOneOrTwoValuedPosition(CSSParserTokenRange&amp;, CSSParserMode, UnitlessQuirk, RefPtr&lt;CSSPrimitiveValue&gt;&amp; resultX, RefPtr&lt;CSSPrimitiveValue&gt;&amp; resultY);
 87 
<span class="line-modified"> 88 enum class ConsumeGeneratedImage {</span>
<span class="line-modified"> 89     Allow,</span>
<span class="line-modified"> 90     Forbid</span>


 91 };
 92 
<span class="line-modified"> 93 RefPtr&lt;CSSValue&gt; consumeImage(CSSParserTokenRange&amp;, CSSParserContext, ConsumeGeneratedImage = ConsumeGeneratedImage::Allow);</span>

 94 RefPtr&lt;CSSValue&gt; consumeImageOrNone(CSSParserTokenRange&amp;, CSSParserContext);
 95 
 96 enum class AllowedFilterFunctions {
 97     PixelFilters,
 98     ColorFilters
 99 };
100 
101 RefPtr&lt;CSSValue&gt; consumeFilter(CSSParserTokenRange&amp;, const CSSParserContext&amp;, AllowedFilterFunctions);
102 RefPtr&lt;CSSShadowValue&gt; consumeSingleShadow(CSSParserTokenRange&amp;, CSSParserMode, bool allowInset, bool allowSpread);
103 
104 // Template implementations are at the bottom of the file for readability.
105 
106 template&lt;typename... emptyBaseCase&gt; inline bool identMatches(CSSValueID) { return false; }
107 template&lt;CSSValueID head, CSSValueID... tail&gt; inline bool identMatches(CSSValueID id)
108 {
109     return id == head || identMatches&lt;tail...&gt;(id);
110 }
111 
112 // FIXME-NEWPARSER - converted to a RefPtr return type from a raw ptr.
113 template&lt;CSSValueID... names&gt; RefPtr&lt;CSSPrimitiveValue&gt; consumeIdent(CSSParserTokenRange&amp; range)
</pre>
</td>
<td>
<hr />
<pre>
 19 // &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 20 // LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 21 // A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 22 // OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 23 // SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 24 // LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 25 // DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 26 // THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 27 // (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 28 // OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 29 
 30 #pragma once
 31 
 32 #include &quot;CSSFunctionValue.h&quot;
 33 #include &quot;CSSParserContext.h&quot;
 34 #include &quot;CSSParserTokenRange.h&quot;
 35 #include &quot;CSSPrimitiveValue.h&quot;
 36 #include &quot;CSSShadowValue.h&quot;
 37 #include &quot;CSSValuePool.h&quot;
 38 #include &quot;Length.h&quot; // For ValueRange
<span class="line-added"> 39 #include &lt;wtf/OptionSet.h&gt;</span>
 40 
 41 namespace WebCore {
 42 
 43 // When these functions are successful, they will consume all the relevant
 44 // tokens from the range and also consume any whitespace which follows. When
 45 // the start of the range doesn&#39;t match the type we&#39;re looking for, the range
 46 // will not be modified.
 47 namespace CSSPropertyParserHelpers {
 48 
 49 // FIXME: These should probably just be consumeComma and consumeSlash.
 50 bool consumeCommaIncludingWhitespace(CSSParserTokenRange&amp;);
 51 bool consumeSlashIncludingWhitespace(CSSParserTokenRange&amp;);
 52 // consumeFunction expects the range starts with a FunctionToken.
 53 CSSParserTokenRange consumeFunction(CSSParserTokenRange&amp;);
 54 
<span class="line-modified"> 55 enum class UnitlessQuirk { Allow, Forbid };</span>
<span class="line-modified"> 56 enum class AllowXResolutionUnit { Allow, Forbid };</span>


 57 
 58 RefPtr&lt;CSSPrimitiveValue&gt; consumeInteger(CSSParserTokenRange&amp;, double minimumValue = -std::numeric_limits&lt;double&gt;::max());

 59 RefPtr&lt;CSSPrimitiveValue&gt; consumePositiveInteger(CSSParserTokenRange&amp;);
 60 bool consumeNumberRaw(CSSParserTokenRange&amp;, double&amp; result);
 61 RefPtr&lt;CSSPrimitiveValue&gt; consumeNumber(CSSParserTokenRange&amp;, ValueRange);
 62 RefPtr&lt;CSSPrimitiveValue&gt; consumeFontWeightNumber(CSSParserTokenRange&amp;);
 63 RefPtr&lt;CSSPrimitiveValue&gt; consumeLength(CSSParserTokenRange&amp;, CSSParserMode, ValueRange, UnitlessQuirk = UnitlessQuirk::Forbid);
 64 RefPtr&lt;CSSPrimitiveValue&gt; consumePercent(CSSParserTokenRange&amp;, ValueRange);
 65 RefPtr&lt;CSSPrimitiveValue&gt; consumeLengthOrPercent(CSSParserTokenRange&amp;, CSSParserMode, ValueRange, UnitlessQuirk = UnitlessQuirk::Forbid);
 66 RefPtr&lt;CSSPrimitiveValue&gt; consumeAngle(CSSParserTokenRange&amp;, CSSParserMode, UnitlessQuirk = UnitlessQuirk::Forbid);
 67 RefPtr&lt;CSSPrimitiveValue&gt; consumeTime(CSSParserTokenRange&amp;, CSSParserMode, ValueRange, UnitlessQuirk = UnitlessQuirk::Forbid);
<span class="line-modified"> 68 RefPtr&lt;CSSPrimitiveValue&gt; consumeResolution(CSSParserTokenRange&amp;, AllowXResolutionUnit = AllowXResolutionUnit::Forbid);</span>
 69 
 70 RefPtr&lt;CSSPrimitiveValue&gt; consumeIdent(CSSParserTokenRange&amp;);
 71 RefPtr&lt;CSSPrimitiveValue&gt; consumeIdentRange(CSSParserTokenRange&amp;, CSSValueID lower, CSSValueID upper);
 72 template&lt;CSSValueID, CSSValueID...&gt; inline bool identMatches(CSSValueID id);
 73 template&lt;CSSValueID... allowedIdents&gt; RefPtr&lt;CSSPrimitiveValue&gt; consumeIdent(CSSParserTokenRange&amp;);
 74 
 75 RefPtr&lt;CSSPrimitiveValue&gt; consumeCustomIdent(CSSParserTokenRange&amp;);
 76 RefPtr&lt;CSSPrimitiveValue&gt; consumeString(CSSParserTokenRange&amp;);
 77 StringView consumeUrlAsStringView(CSSParserTokenRange&amp;);
 78 RefPtr&lt;CSSPrimitiveValue&gt; consumeUrl(CSSParserTokenRange&amp;);
 79 
 80 RefPtr&lt;CSSPrimitiveValue&gt; consumeColor(CSSParserTokenRange&amp;, CSSParserMode, bool acceptQuirkyColors = false);
 81 
<span class="line-modified"> 82 enum class PositionSyntax {</span>
<span class="line-modified"> 83     Position, // &lt;position&gt;</span>
<span class="line-added"> 84     BackgroundPosition // &lt;bg-position&gt;</span>
<span class="line-added"> 85 };</span>
<span class="line-added"> 86 </span>
<span class="line-added"> 87 RefPtr&lt;CSSPrimitiveValue&gt; consumePosition(CSSParserTokenRange&amp;, CSSParserMode, UnitlessQuirk, PositionSyntax);</span>
<span class="line-added"> 88 bool consumePosition(CSSParserTokenRange&amp;, CSSParserMode, UnitlessQuirk, PositionSyntax, RefPtr&lt;CSSPrimitiveValue&gt;&amp; resultX, RefPtr&lt;CSSPrimitiveValue&gt;&amp; resultY);</span>
 89 bool consumeOneOrTwoValuedPosition(CSSParserTokenRange&amp;, CSSParserMode, UnitlessQuirk, RefPtr&lt;CSSPrimitiveValue&gt;&amp; resultX, RefPtr&lt;CSSPrimitiveValue&gt;&amp; resultY);
 90 
<span class="line-modified"> 91 enum class AllowedImageType : uint8_t {</span>
<span class="line-modified"> 92     URLFunction = 1 &lt;&lt; 0,</span>
<span class="line-modified"> 93     RawStringAsURL = 1 &lt;&lt; 1,</span>
<span class="line-added"> 94     ImageSet = 1 &lt;&lt; 2,</span>
<span class="line-added"> 95     GeneratedImage = 1 &lt;&lt; 3</span>
 96 };
 97 
<span class="line-modified"> 98 RefPtr&lt;CSSValue&gt; consumeImage(CSSParserTokenRange&amp;, CSSParserContext, OptionSet&lt;AllowedImageType&gt; = { AllowedImageType::URLFunction, AllowedImageType::ImageSet, AllowedImageType::GeneratedImage });</span>
<span class="line-added"> 99 </span>
100 RefPtr&lt;CSSValue&gt; consumeImageOrNone(CSSParserTokenRange&amp;, CSSParserContext);
101 
102 enum class AllowedFilterFunctions {
103     PixelFilters,
104     ColorFilters
105 };
106 
107 RefPtr&lt;CSSValue&gt; consumeFilter(CSSParserTokenRange&amp;, const CSSParserContext&amp;, AllowedFilterFunctions);
108 RefPtr&lt;CSSShadowValue&gt; consumeSingleShadow(CSSParserTokenRange&amp;, CSSParserMode, bool allowInset, bool allowSpread);
109 
110 // Template implementations are at the bottom of the file for readability.
111 
112 template&lt;typename... emptyBaseCase&gt; inline bool identMatches(CSSValueID) { return false; }
113 template&lt;CSSValueID head, CSSValueID... tail&gt; inline bool identMatches(CSSValueID id)
114 {
115     return id == head || identMatches&lt;tail...&gt;(id);
116 }
117 
118 // FIXME-NEWPARSER - converted to a RefPtr return type from a raw ptr.
119 template&lt;CSSValueID... names&gt; RefPtr&lt;CSSPrimitiveValue&gt; consumeIdent(CSSParserTokenRange&amp; range)
</pre>
</td>
</tr>
</table>
<center><a href="CSSPropertyParserHelpers.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="CSSSelectorParser.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>