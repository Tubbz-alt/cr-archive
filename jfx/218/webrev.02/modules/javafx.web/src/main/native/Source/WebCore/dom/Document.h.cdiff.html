<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/dom/Document.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Document.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Document.idl.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/dom/Document.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 29,17 ***</span>
  
  #include &quot;CSSRegisteredCustomProperty.h&quot;
  #include &quot;Color.h&quot;
  #include &quot;ContainerNode.h&quot;
  #include &quot;DisabledAdaptations.h&quot;
<span class="line-removed">- #include &quot;DocumentEventQueue.h&quot;</span>
  #include &quot;DocumentIdentifier.h&quot;
  #include &quot;DocumentTiming.h&quot;
  #include &quot;ElementIdentifier.h&quot;
  #include &quot;FocusDirection.h&quot;
  #include &quot;FontSelectorClient.h&quot;
  #include &quot;FrameDestructionObserver.h&quot;
  #include &quot;GenericTaskQueue.h&quot;
  #include &quot;GraphicsTypes.h&quot;
  #include &quot;MediaProducer.h&quot;
  #include &quot;MutationObserver.h&quot;
  #include &quot;OrientationNotifier.h&quot;
<span class="line-new-header">--- 29,17 ---</span>
  
  #include &quot;CSSRegisteredCustomProperty.h&quot;
  #include &quot;Color.h&quot;
  #include &quot;ContainerNode.h&quot;
  #include &quot;DisabledAdaptations.h&quot;
  #include &quot;DocumentIdentifier.h&quot;
  #include &quot;DocumentTiming.h&quot;
  #include &quot;ElementIdentifier.h&quot;
  #include &quot;FocusDirection.h&quot;
  #include &quot;FontSelectorClient.h&quot;
  #include &quot;FrameDestructionObserver.h&quot;
<span class="line-added">+ #include &quot;FrameLoaderTypes.h&quot;</span>
  #include &quot;GenericTaskQueue.h&quot;
  #include &quot;GraphicsTypes.h&quot;
  #include &quot;MediaProducer.h&quot;
  #include &quot;MutationObserver.h&quot;
  #include &quot;OrientationNotifier.h&quot;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 79,17 ***</span>
  #if ENABLE(IOS_TOUCH_EVENTS)
  #include &lt;wtf/ThreadingPrimitives.h&gt;
  #endif
  
  namespace JSC {
<span class="line-modified">! class ExecState;</span>
  class InputCursor;
  }
  
  namespace WebCore {
  
<span class="line-removed">- class ApplicationStateChangeListener;</span>
  class AXObjectCache;
  class Attr;
  class CDATASection;
  class CSSCustomPropertyValue;
  class CSSFontSelector;
<span class="line-new-header">--- 79,16 ---</span>
  #if ENABLE(IOS_TOUCH_EVENTS)
  #include &lt;wtf/ThreadingPrimitives.h&gt;
  #endif
  
  namespace JSC {
<span class="line-modified">! class CallFrame;</span>
  class InputCursor;
  }
  
  namespace WebCore {
  
  class AXObjectCache;
  class Attr;
  class CDATASection;
  class CSSCustomPropertyValue;
  class CSSFontSelector;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 117,18 ***</span>
<span class="line-new-header">--- 116,21 ---</span>
  class DocumentParser;
  class DocumentSharedObjectPool;
  class DocumentTimeline;
  class DocumentType;
  class EditingBehavior;
<span class="line-added">+ class EventLoop;</span>
<span class="line-added">+ class EventLoopTaskGroup;</span>
  class ExtensionStyleSheets;
  class FloatQuad;
  class FloatRect;
  class FontFaceSet;
  class FormController;
  class Frame;
  class FrameView;
  class FullscreenManager;
<span class="line-added">+ class GPUCanvasContext;</span>
  class HTMLAllCollection;
  class HTMLBodyElement;
  class HTMLCanvasElement;
  class HTMLCollection;
  class HTMLDocument;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 137,15 ***</span>
  class HTMLHeadElement;
  class HTMLIFrameElement;
  class HTMLImageElement;
  class HTMLMapElement;
  class HTMLMediaElement;
<span class="line-modified">! class HTMLPictureElement;</span>
  class HTMLScriptElement;
  class HitTestLocation;
  class HitTestRequest;
  class HitTestResult;
  class ImageBitmapRenderingContext;
  class IntPoint;
  class JSNode;
  class LayoutPoint;
  class LayoutRect;
<span class="line-new-header">--- 139,18 ---</span>
  class HTMLHeadElement;
  class HTMLIFrameElement;
  class HTMLImageElement;
  class HTMLMapElement;
  class HTMLMediaElement;
<span class="line-modified">! class HTMLVideoElement;</span>
  class HTMLScriptElement;
<span class="line-added">+ class HighlightMap;</span>
  class HitTestLocation;
  class HitTestRequest;
  class HitTestResult;
<span class="line-added">+ class IdleCallbackController;</span>
<span class="line-added">+ class IdleRequestCallback;</span>
  class ImageBitmapRenderingContext;
  class IntPoint;
  class JSNode;
  class LayoutPoint;
  class LayoutRect;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 155,10 ***</span>
<span class="line-new-header">--- 160,11 ---</span>
  class MediaCanStartListener;
  class MediaPlaybackTarget;
  class MediaPlaybackTargetClient;
  class MediaQueryList;
  class MediaQueryMatcher;
<span class="line-added">+ class MessagePortChannelProvider;</span>
  class MouseEventWithHitTestResults;
  class NodeFilter;
  class NodeIterator;
  class Page;
  class PaintWorkletGlobalScope;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 184,56 ***</span>
  class SelectorQuery;
  class SelectorQueryCache;
  class SerializedScriptValue;
  class Settings;
  class StringCallback;
<span class="line-removed">- class StyleResolver;</span>
  class StyleSheet;
  class StyleSheetContents;
  class StyleSheetList;
  class Text;
  class TextResourceDecoder;
  class TreeWalker;
  class UndoManager;
  class VisibilityChangeClient;
  class VisitedLinkState;
  class WebAnimation;
  class WebGL2RenderingContext;
  class WebGLRenderingContext;
<span class="line-modified">! class GPUCanvasContext;</span>
  class WindowProxy;
  class Worklet;
  class XPathEvaluator;
  class XPathExpression;
  class XPathNSResolver;
  class XPathResult;
  
  template&lt;typename&gt; class ExceptionOr;
  
  enum CollectionType;
<span class="line-removed">- enum class ShouldOpenExternalURLsPolicy : uint8_t;</span>
  
  enum class RouteSharingPolicy : uint8_t;
  
  using PlatformDisplayID = uint32_t;
  
  #if ENABLE(XSLT)
  class TransformSource;
  #endif
  
<span class="line-modified">! #if ENABLE(TOUCH_EVENTS) || ENABLE(IOS_TOUCH_EVENTS)</span>
<span class="line-removed">- class Touch;</span>
<span class="line-removed">- class TouchList;</span>
<span class="line-removed">- #endif</span>
<span class="line-removed">- </span>
<span class="line-removed">- #if ENABLE(DEVICE_ORIENTATION)</span>
<span class="line-removed">- #if PLATFORM(IOS_FAMILY)</span>
  class DeviceMotionClient;
  class DeviceMotionController;
  class DeviceOrientationClient;
  class DeviceOrientationController;
  #endif
  class DeviceOrientationAndMotionAccessController;
  #endif
  
  #if ENABLE(TEXT_AUTOSIZING)
  class TextAutoSizing;
<span class="line-new-header">--- 190,52 ---</span>
  class SelectorQuery;
  class SelectorQueryCache;
  class SerializedScriptValue;
  class Settings;
  class StringCallback;
  class StyleSheet;
  class StyleSheetContents;
  class StyleSheetList;
  class Text;
<span class="line-added">+ class TextManipulationController;</span>
  class TextResourceDecoder;
  class TreeWalker;
  class UndoManager;
  class VisibilityChangeClient;
  class VisitedLinkState;
  class WebAnimation;
  class WebGL2RenderingContext;
  class WebGLRenderingContext;
<span class="line-modified">! class WindowEventLoop;</span>
  class WindowProxy;
  class Worklet;
  class XPathEvaluator;
  class XPathExpression;
  class XPathNSResolver;
  class XPathResult;
  
  template&lt;typename&gt; class ExceptionOr;
  
  enum CollectionType;
  
  enum class RouteSharingPolicy : uint8_t;
<span class="line-added">+ enum class ShouldOpenExternalURLsPolicy : uint8_t;</span>
  
  using PlatformDisplayID = uint32_t;
  
  #if ENABLE(XSLT)
  class TransformSource;
  #endif
  
<span class="line-modified">! #if ENABLE(DEVICE_ORIENTATION) &amp;&amp; PLATFORM(IOS_FAMILY)</span>
  class DeviceMotionClient;
  class DeviceMotionController;
  class DeviceOrientationClient;
  class DeviceOrientationController;
  #endif
<span class="line-added">+ </span>
<span class="line-added">+ #if ENABLE(DEVICE_ORIENTATION)</span>
  class DeviceOrientationAndMotionAccessController;
  #endif
  
  #if ENABLE(TEXT_AUTOSIZING)
  class TextAutoSizing;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 254,10 ***</span>
<span class="line-new-header">--- 256,11 ---</span>
  #if ENABLE(RESIZE_OBSERVER)
  class ResizeObserver;
  #endif
  
  namespace Style {
<span class="line-added">+ class Resolver;</span>
  class Scope;
  };
  
  const uint64_t HTMLMediaElementInvalidID = 0;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 348,11 ***</span>
      , public FrameDestructionObserver
      , public Supplementable&lt;Document&gt;
      , public Logger::Observer {
      WTF_MAKE_ISO_ALLOCATED(Document);
  public:
<span class="line-modified">!     static Ref&lt;Document&gt; create(PAL::SessionID, const URL&amp;);</span>
      static Ref&lt;Document&gt; createNonRenderedPlaceholder(Frame&amp;, const URL&amp;);
      static Ref&lt;Document&gt; create(Document&amp;);
  
      virtual ~Document();
  
<span class="line-new-header">--- 351,11 ---</span>
      , public FrameDestructionObserver
      , public Supplementable&lt;Document&gt;
      , public Logger::Observer {
      WTF_MAKE_ISO_ALLOCATED(Document);
  public:
<span class="line-modified">!     static Ref&lt;Document&gt; create(const URL&amp;);</span>
      static Ref&lt;Document&gt; createNonRenderedPlaceholder(Frame&amp;, const URL&amp;);
      static Ref&lt;Document&gt; create(Document&amp;);
  
      virtual ~Document();
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 370,11 ***</span>
      void decrementReferencingNodeCount()
      {
          ASSERT(!m_deletionHasBegun || !m_referencingNodeCount);
          --m_referencingNodeCount;
          if (!m_referencingNodeCount &amp;&amp; !refCount()) {
<span class="line-modified">! #if !ASSERT_DISABLED</span>
              m_deletionHasBegun = true;
  #endif
              m_refCountAndParentBit = s_refCountIncrement; // Avoid double destruction through use of Ref&lt;T&gt;/RefPtr&lt;T&gt;. (This is a security mitigation in case of programmer error. It will ASSERT in debug builds.)
              delete this;
          }
<span class="line-new-header">--- 373,11 ---</span>
      void decrementReferencingNodeCount()
      {
          ASSERT(!m_deletionHasBegun || !m_referencingNodeCount);
          --m_referencingNodeCount;
          if (!m_referencingNodeCount &amp;&amp; !refCount()) {
<span class="line-modified">! #if ASSERT_ENABLED</span>
              m_deletionHasBegun = true;
  #endif
              m_refCountAndParentBit = s_refCountIncrement; // Avoid double destruction through use of Ref&lt;T&gt;/RefPtr&lt;T&gt;. (This is a security mitigation in case of programmer error. It will ASSERT in debug builds.)
              delete this;
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 410,16 ***</span>
  
      void setViewportArguments(const ViewportArguments&amp; viewportArguments) { m_viewportArguments = viewportArguments; }
      WEBCORE_EXPORT ViewportArguments viewportArguments() const;
  
      OptionSet&lt;DisabledAdaptations&gt; disabledAdaptations() const { return m_disabledAdaptations; }
<span class="line-modified">! #ifndef NDEBUG</span>
      bool didDispatchViewportPropertiesChanged() const { return m_didDispatchViewportPropertiesChanged; }
  #endif
  
      void setReferrerPolicy(ReferrerPolicy);
<span class="line-modified">!     ReferrerPolicy referrerPolicy() const { return m_referrerPolicy.valueOr(ReferrerPolicy::NoReferrerWhenDowngrade); }</span>
  
      WEBCORE_EXPORT DocumentType* doctype() const;
  
      WEBCORE_EXPORT DOMImplementation&amp; implementation();
  
<span class="line-new-header">--- 413,16 ---</span>
  
      void setViewportArguments(const ViewportArguments&amp; viewportArguments) { m_viewportArguments = viewportArguments; }
      WEBCORE_EXPORT ViewportArguments viewportArguments() const;
  
      OptionSet&lt;DisabledAdaptations&gt; disabledAdaptations() const { return m_disabledAdaptations; }
<span class="line-modified">! #if ASSERT_ENABLED</span>
      bool didDispatchViewportPropertiesChanged() const { return m_didDispatchViewportPropertiesChanged; }
  #endif
  
      void setReferrerPolicy(ReferrerPolicy);
<span class="line-modified">!     ReferrerPolicy referrerPolicy() const final { return m_referrerPolicy.valueOr(ReferrerPolicy::NoReferrerWhenDowngrade); }</span>
  
      WEBCORE_EXPORT DocumentType* doctype() const;
  
      WEBCORE_EXPORT DOMImplementation&amp; implementation();
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 479,10 ***</span>
<span class="line-new-header">--- 482,13 ---</span>
      enum class StandaloneStatus : uint8_t { Unspecified, Standalone, NotStandalone };
      bool xmlStandalone() const { return m_xmlStandalone == StandaloneStatus::Standalone; }
      StandaloneStatus xmlStandaloneStatus() const { return m_xmlStandalone; }
      bool hasXMLDeclaration() const { return m_hasXMLDeclaration; }
  
<span class="line-added">+     bool shouldPreventEnteringBackForwardCacheForTesting() const { return m_shouldPreventEnteringBackForwardCacheForTesting; }</span>
<span class="line-added">+     void preventEnteringBackForwardCacheForTesting() { m_shouldPreventEnteringBackForwardCacheForTesting = true; }</span>
<span class="line-added">+ </span>
      void setXMLEncoding(const String&amp; encoding) { m_xmlEncoding = encoding; } // read-only property, only to be set from XMLDocumentParser
      WEBCORE_EXPORT ExceptionOr&lt;void&gt; setXMLVersion(const String&amp;);
      WEBCORE_EXPORT void setXMLStandalone(bool);
      void setHasXMLDeclaration(bool hasXMLDeclaration) { m_hasXMLDeclaration = hasXMLDeclaration; }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 530,13 ***</span>
  
      bool isSrcdocDocument() const { return m_isSrcdocDocument; }
  
      bool sawElementsInKnownNamespaces() const { return m_sawElementsInKnownNamespaces; }
  
<span class="line-modified">!     StyleResolver&amp; userAgentShadowTreeStyleResolver();</span>
  
      CSSFontSelector&amp; fontSelector() { return m_fontSelector; }
  
      WEBCORE_EXPORT bool haveStylesheetsLoaded() const;
      bool isIgnoringPendingStylesheets() const { return m_ignorePendingStylesheets; }
  
      WEBCORE_EXPORT StyleSheetList&amp; styleSheets();
<span class="line-new-header">--- 536,14 ---</span>
  
      bool isSrcdocDocument() const { return m_isSrcdocDocument; }
  
      bool sawElementsInKnownNamespaces() const { return m_sawElementsInKnownNamespaces; }
  
<span class="line-modified">!     Style::Resolver&amp; userAgentShadowTreeStyleResolver();</span>
  
      CSSFontSelector&amp; fontSelector() { return m_fontSelector; }
<span class="line-added">+     const CSSFontSelector&amp; fontSelector() const { return m_fontSelector; }</span>
  
      WEBCORE_EXPORT bool haveStylesheetsLoaded() const;
      bool isIgnoringPendingStylesheets() const { return m_ignorePendingStylesheets; }
  
      WEBCORE_EXPORT StyleSheetList&amp; styleSheets();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 547,11 ***</span>
      const ExtensionStyleSheets&amp; extensionStyleSheets() const { return *m_extensionStyleSheets; }
  
      bool gotoAnchorNeededAfterStylesheetsLoad() { return m_gotoAnchorNeededAfterStylesheetsLoad; }
      void setGotoAnchorNeededAfterStylesheetsLoad(bool b) { m_gotoAnchorNeededAfterStylesheetsLoad = b; }
  
<span class="line-modified">!     void evaluateMediaQueryList();</span>
  
      FormController&amp; formController();
      Vector&lt;String&gt; formElementsState() const;
      void setStateForNewFormElements(const Vector&lt;String&gt;&amp;);
  
<span class="line-new-header">--- 554,12 ---</span>
      const ExtensionStyleSheets&amp; extensionStyleSheets() const { return *m_extensionStyleSheets; }
  
      bool gotoAnchorNeededAfterStylesheetsLoad() { return m_gotoAnchorNeededAfterStylesheetsLoad; }
      void setGotoAnchorNeededAfterStylesheetsLoad(bool b) { m_gotoAnchorNeededAfterStylesheetsLoad = b; }
  
<span class="line-modified">!     void updateElementsAffectedByMediaQueries();</span>
<span class="line-added">+     void evaluateMediaQueriesAndReportChanges();</span>
  
      FormController&amp; formController();
      Vector&lt;String&gt; formElementsState() const;
      void setStateForNewFormElements(const Vector&lt;String&gt;&amp;);
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 632,11 ***</span>
  
      AXObjectCache* existingAXObjectCache() const;
      WEBCORE_EXPORT AXObjectCache* axObjectCache() const;
      void clearAXObjectCache();
  
<span class="line-modified">!     Optional&lt;PageIdentifier&gt; pageID() const;</span>
      // to get visually ordered hebrew and arabic pages right
      void setVisuallyOrdered();
      bool visuallyOrdered() const { return m_visuallyOrdered; }
  
      WEBCORE_EXPORT DocumentLoader* loader() const;
<span class="line-new-header">--- 640,11 ---</span>
  
      AXObjectCache* existingAXObjectCache() const;
      WEBCORE_EXPORT AXObjectCache* axObjectCache() const;
      void clearAXObjectCache();
  
<span class="line-modified">!     WEBCORE_EXPORT Optional&lt;PageIdentifier&gt; pageID() const;</span>
      // to get visually ordered hebrew and arabic pages right
      void setVisuallyOrdered();
      bool visuallyOrdered() const { return m_visuallyOrdered; }
  
      WEBCORE_EXPORT DocumentLoader* loader() const;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 678,13 ***</span>
      const URL&amp; baseURLOverride() const { return m_baseURLOverride; }
      const URL&amp; baseElementURL() const { return m_baseElementURL; }
      const String&amp; baseTarget() const { return m_baseTarget; }
      void processBaseElement();
  
<span class="line-modified">!     WEBCORE_EXPORT URL completeURL(const String&amp;) const final;</span>
<span class="line-modified">!     URL completeURL(const String&amp;, const URL&amp; baseURLOverride) const;</span>
<span class="line-removed">-     WEBCORE_EXPORT PAL::SessionID sessionID() const final;</span>
  
      String userAgent(const URL&amp;) const final;
  
      void disableEval(const String&amp; errorMessage) final;
      void disableWebAssembly(const String&amp; errorMessage) final;
<span class="line-new-header">--- 686,12 ---</span>
      const URL&amp; baseURLOverride() const { return m_baseURLOverride; }
      const URL&amp; baseElementURL() const { return m_baseElementURL; }
      const String&amp; baseTarget() const { return m_baseTarget; }
      void processBaseElement();
  
<span class="line-modified">!     WEBCORE_EXPORT URL completeURL(const String&amp;, ForceUTF8 = ForceUTF8::No) const final;</span>
<span class="line-modified">!     URL completeURL(const String&amp;, const URL&amp; baseURLOverride, ForceUTF8 = ForceUTF8::No) const;</span>
  
      String userAgent(const URL&amp;) const final;
  
      void disableEval(const String&amp; errorMessage) final;
      void disableWebAssembly(const String&amp; errorMessage) final;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 754,10 ***</span>
<span class="line-new-header">--- 761,13 ---</span>
      const UserActionElementSet&amp; userActionElements() const { return m_userActionElements; }
  
      void setFocusNavigationStartingNode(Node*);
      Element* focusNavigationStartingNode(FocusDirection) const;
  
<span class="line-added">+     void didRejectSyncXHRDuringPageDismissal();</span>
<span class="line-added">+     bool shouldIgnoreSyncXHRs() const;</span>
<span class="line-added">+ </span>
      enum class NodeRemoval { Node, ChildrenOfNode };
      void adjustFocusedNodeOnNodeRemoval(Node&amp;, NodeRemoval = NodeRemoval::Node);
      void adjustFocusNavigationNodeOnNodeRemoval(Node&amp;, NodeRemoval = NodeRemoval::Node);
  
      void hoveredElementDidDetach(Element&amp;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 914,13 ***</span>
      void titleElementTextChanged(Element&amp; titleElement);
  
      WEBCORE_EXPORT ExceptionOr&lt;String&gt; cookie();
      WEBCORE_EXPORT ExceptionOr&lt;void&gt; setCookie(const String&amp;);
  
<span class="line-modified">!     WEBCORE_EXPORT String referrer() const;</span>
<span class="line-removed">- </span>
<span class="line-removed">-     WEBCORE_EXPORT String origin() const final;</span>
  
      WEBCORE_EXPORT String domain() const;
      ExceptionOr&lt;void&gt; setDomain(const String&amp; newDomain);
  
      void overrideLastModified(const Optional&lt;WallTime&gt;&amp;);
<span class="line-new-header">--- 924,11 ---</span>
      void titleElementTextChanged(Element&amp; titleElement);
  
      WEBCORE_EXPORT ExceptionOr&lt;String&gt; cookie();
      WEBCORE_EXPORT ExceptionOr&lt;void&gt; setCookie(const String&amp;);
  
<span class="line-modified">!     WEBCORE_EXPORT String referrer();</span>
  
      WEBCORE_EXPORT String domain() const;
      ExceptionOr&lt;void&gt; setDomain(const String&amp; newDomain);
  
      void overrideLastModified(const Optional&lt;WallTime&gt;&amp;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1035,12 ***</span>
  
      WEBCORE_EXPORT String originIdentifierForPasteboard() const;
  
      // XPathEvaluator methods
      WEBCORE_EXPORT ExceptionOr&lt;Ref&lt;XPathExpression&gt;&gt; createExpression(const String&amp; expression, RefPtr&lt;XPathNSResolver&gt;&amp;&amp;);
<span class="line-modified">!     WEBCORE_EXPORT Ref&lt;XPathNSResolver&gt; createNSResolver(Node* nodeResolver);</span>
<span class="line-modified">!     WEBCORE_EXPORT ExceptionOr&lt;Ref&lt;XPathResult&gt;&gt; evaluate(const String&amp; expression, Node* contextNode, RefPtr&lt;XPathNSResolver&gt;&amp;&amp;, unsigned short type, XPathResult*);</span>
  
      bool hasNodesWithNonFinalStyle() const { return m_hasNodesWithNonFinalStyle; }
      void setHasNodesWithNonFinalStyle() { m_hasNodesWithNonFinalStyle = true; }
      bool hasNodesWithMissingStyle() const { return m_hasNodesWithMissingStyle; }
      void setHasNodesWithMissingStyle() { m_hasNodesWithMissingStyle = true; }
<span class="line-new-header">--- 1043,12 ---</span>
  
      WEBCORE_EXPORT String originIdentifierForPasteboard() const;
  
      // XPathEvaluator methods
      WEBCORE_EXPORT ExceptionOr&lt;Ref&lt;XPathExpression&gt;&gt; createExpression(const String&amp; expression, RefPtr&lt;XPathNSResolver&gt;&amp;&amp;);
<span class="line-modified">!     WEBCORE_EXPORT Ref&lt;XPathNSResolver&gt; createNSResolver(Node&amp; nodeResolver);</span>
<span class="line-modified">!     WEBCORE_EXPORT ExceptionOr&lt;Ref&lt;XPathResult&gt;&gt; evaluate(const String&amp; expression, Node&amp; contextNode, RefPtr&lt;XPathNSResolver&gt;&amp;&amp;, unsigned short type, XPathResult*);</span>
  
      bool hasNodesWithNonFinalStyle() const { return m_hasNodesWithNonFinalStyle; }
      void setHasNodesWithNonFinalStyle() { m_hasNodesWithNonFinalStyle = true; }
      bool hasNodesWithMissingStyle() const { return m_hasNodesWithMissingStyle; }
      void setHasNodesWithMissingStyle() { m_hasNodesWithMissingStyle = true; }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1053,72 ***</span>
      bool isDNSPrefetchEnabled() const { return m_isDNSPrefetchEnabled; }
      void parseDNSPrefetchControlHeader(const String&amp;);
  
      WEBCORE_EXPORT void postTask(Task&amp;&amp;) final; // Executes the task on context&#39;s thread asynchronously.
  
      ScriptedAnimationController* scriptedAnimationController() { return m_scriptedAnimationController.get(); }
      void suspendScriptedAnimationControllerCallbacks();
      void resumeScriptedAnimationControllerCallbacks();
  
<span class="line-modified">!     void updateAnimationsAndSendEvents(DOMHighResTimeStamp timestamp);</span>
<span class="line-modified">!     void serviceRequestAnimationFrameCallbacks(DOMHighResTimeStamp timestamp);</span>
  
      void windowScreenDidChange(PlatformDisplayID);
  
      void finishedParsing();
  
<span class="line-modified">!     enum PageCacheState { NotInPageCache, AboutToEnterPageCache, InPageCache };</span>
  
<span class="line-modified">!     PageCacheState pageCacheState() const { return m_pageCacheState; }</span>
<span class="line-modified">!     void setPageCacheState(PageCacheState);</span>
  
      void registerForDocumentSuspensionCallbacks(Element&amp;);
      void unregisterForDocumentSuspensionCallbacks(Element&amp;);
  
      void documentWillBecomeInactive();
      void suspend(ReasonForSuspension);
      void resume(ReasonForSuspension);
  
<span class="line-modified">!     void registerForMediaVolumeCallbacks(Element&amp;);</span>
<span class="line-modified">!     void unregisterForMediaVolumeCallbacks(Element&amp;);</span>
<span class="line-removed">-     void mediaVolumeDidChange();</span>
  
      bool audioPlaybackRequiresUserGesture() const;
      bool videoPlaybackRequiresUserGesture() const;
  
  #if ENABLE(MEDIA_SESSION)
      MediaSession&amp; defaultMediaSession();
  #endif
  
<span class="line-removed">-     void registerForPrivateBrowsingStateChangedCallbacks(Element&amp;);</span>
<span class="line-removed">-     void unregisterForPrivateBrowsingStateChangedCallbacks(Element&amp;);</span>
<span class="line-removed">-     void storageBlockingStateDidChange();</span>
      void privateBrowsingStateDidChange(PAL::SessionID);
  
  #if ENABLE(VIDEO_TRACK)
<span class="line-modified">!     void registerForCaptionPreferencesChangedCallbacks(Element&amp;);</span>
<span class="line-modified">!     void unregisterForCaptionPreferencesChangedCallbacks(Element&amp;);</span>
      void captionPreferencesChanged();
  #endif
  
<span class="line-removed">- #if ENABLE(MEDIA_CONTROLS_SCRIPT)</span>
<span class="line-removed">-     void registerForPageScaleFactorChangedCallbacks(HTMLMediaElement&amp;);</span>
<span class="line-removed">-     void unregisterForPageScaleFactorChangedCallbacks(HTMLMediaElement&amp;);</span>
<span class="line-removed">-     void pageScaleFactorChangedAndStable();</span>
<span class="line-removed">-     void registerForUserInterfaceLayoutDirectionChangedCallbacks(HTMLMediaElement&amp;);</span>
<span class="line-removed">-     void unregisterForUserInterfaceLayoutDirectionChangedCallbacks(HTMLMediaElement&amp;);</span>
<span class="line-removed">-     void userInterfaceLayoutDirectionChanged();</span>
<span class="line-removed">- #endif</span>
<span class="line-removed">- </span>
      void registerForVisibilityStateChangedCallbacks(VisibilityChangeClient&amp;);
      void unregisterForVisibilityStateChangedCallbacks(VisibilityChangeClient&amp;);
  
  #if ENABLE(VIDEO)
<span class="line-removed">-     void registerForAllowsMediaDocumentInlinePlaybackChangedCallbacks(HTMLMediaElement&amp;);</span>
<span class="line-removed">-     void unregisterForAllowsMediaDocumentInlinePlaybackChangedCallbacks(HTMLMediaElement&amp;);</span>
<span class="line-removed">-     void allowsMediaDocumentInlinePlaybackChanged();</span>
<span class="line-removed">- </span>
      void stopAllMediaPlayback();
      void suspendAllMediaPlayback();
      void resumeAllMediaPlayback();
      void suspendAllMediaBuffering();
      void resumeAllMediaBuffering();
<span class="line-new-header">--- 1061,61 ---</span>
      bool isDNSPrefetchEnabled() const { return m_isDNSPrefetchEnabled; }
      void parseDNSPrefetchControlHeader(const String&amp;);
  
      WEBCORE_EXPORT void postTask(Task&amp;&amp;) final; // Executes the task on context&#39;s thread asynchronously.
  
<span class="line-added">+     EventLoopTaskGroup&amp; eventLoop() final;</span>
<span class="line-added">+     WindowEventLoop&amp; windowEventLoop();</span>
<span class="line-added">+ </span>
      ScriptedAnimationController* scriptedAnimationController() { return m_scriptedAnimationController.get(); }
      void suspendScriptedAnimationControllerCallbacks();
      void resumeScriptedAnimationControllerCallbacks();
  
<span class="line-modified">!     void updateAnimationsAndSendEvents(DOMHighResTimeStamp);</span>
<span class="line-modified">!     void serviceRequestAnimationFrameCallbacks(DOMHighResTimeStamp);</span>
  
      void windowScreenDidChange(PlatformDisplayID);
  
      void finishedParsing();
  
<span class="line-modified">!     enum BackForwardCacheState { NotInBackForwardCache, AboutToEnterBackForwardCache, InBackForwardCache };</span>
  
<span class="line-modified">!     BackForwardCacheState backForwardCacheState() const { return m_backForwardCacheState; }</span>
<span class="line-modified">!     void setBackForwardCacheState(BackForwardCacheState);</span>
  
      void registerForDocumentSuspensionCallbacks(Element&amp;);
      void unregisterForDocumentSuspensionCallbacks(Element&amp;);
  
      void documentWillBecomeInactive();
      void suspend(ReasonForSuspension);
      void resume(ReasonForSuspension);
  
<span class="line-modified">!     void registerMediaElement(HTMLMediaElement&amp;);</span>
<span class="line-modified">!     void unregisterMediaElement(HTMLMediaElement&amp;);</span>
  
      bool audioPlaybackRequiresUserGesture() const;
      bool videoPlaybackRequiresUserGesture() const;
<span class="line-added">+     bool mediaDataLoadsAutomatically() const;</span>
  
  #if ENABLE(MEDIA_SESSION)
      MediaSession&amp; defaultMediaSession();
  #endif
  
      void privateBrowsingStateDidChange(PAL::SessionID);
  
<span class="line-added">+     void storageBlockingStateDidChange();</span>
<span class="line-added">+ </span>
  #if ENABLE(VIDEO_TRACK)
<span class="line-modified">!     void registerForCaptionPreferencesChangedCallbacks(HTMLMediaElement&amp;);</span>
<span class="line-modified">!     void unregisterForCaptionPreferencesChangedCallbacks(HTMLMediaElement&amp;);</span>
      void captionPreferencesChanged();
  #endif
  
      void registerForVisibilityStateChangedCallbacks(VisibilityChangeClient&amp;);
      void unregisterForVisibilityStateChangedCallbacks(VisibilityChangeClient&amp;);
  
  #if ENABLE(VIDEO)
      void stopAllMediaPlayback();
      void suspendAllMediaPlayback();
      void resumeAllMediaPlayback();
      void suspendAllMediaBuffering();
      void resumeAllMediaBuffering();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1142,11 ***</span>
      void addSVGUseElement(SVGUseElement&amp;);
      void removeSVGUseElement(SVGUseElement&amp;);
      HashSet&lt;SVGUseElement*&gt; const svgUseElements() const { return m_svgUseElements; }
  
      void initSecurityContext();
<span class="line-modified">!     void initContentSecurityPolicy(ContentSecurityPolicy* previousPolicy);</span>
  
      void updateURLForPushOrReplaceState(const URL&amp;);
      void statePopped(Ref&lt;SerializedScriptValue&gt;&amp;&amp;);
  
      bool processingLoadEvent() const { return m_processingLoadEvent; }
<span class="line-new-header">--- 1139,11 ---</span>
      void addSVGUseElement(SVGUseElement&amp;);
      void removeSVGUseElement(SVGUseElement&amp;);
      HashSet&lt;SVGUseElement*&gt; const svgUseElements() const { return m_svgUseElements; }
  
      void initSecurityContext();
<span class="line-modified">!     void initContentSecurityPolicy();</span>
  
      void updateURLForPushOrReplaceState(const URL&amp;);
      void statePopped(Ref&lt;SerializedScriptValue&gt;&amp;&amp;);
  
      bool processingLoadEvent() const { return m_processingLoadEvent; }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1154,18 ***</span>
  
      bool isContextThread() const final;
      bool isSecureContext() const final;
      bool isJSExecutionForbidden() const final { return false; }
  
<span class="line-modified">!     void enqueueWindowEvent(Ref&lt;Event&gt;&amp;&amp;);</span>
<span class="line-modified">!     void enqueueDocumentEvent(Ref&lt;Event&gt;&amp;&amp;);</span>
      void enqueueOverflowEvent(Ref&lt;Event&gt;&amp;&amp;);
      void dispatchPageshowEvent(PageshowEventPersistence);
      WEBCORE_EXPORT void enqueueSecurityPolicyViolationEvent(SecurityPolicyViolationEvent::Init&amp;&amp;);
      void enqueueHashchangeEvent(const String&amp; oldURL, const String&amp; newURL);
      void dispatchPopstateEvent(RefPtr&lt;SerializedScriptValue&gt;&amp;&amp; stateObject);
<span class="line-removed">-     DocumentEventQueue&amp; eventQueue() const final { return m_eventQueue; }</span>
  
      WEBCORE_EXPORT void addMediaCanStartListener(MediaCanStartListener&amp;);
      WEBCORE_EXPORT void removeMediaCanStartListener(MediaCanStartListener&amp;);
      MediaCanStartListener* takeAnyMediaCanStartListener();
  
<span class="line-new-header">--- 1151,17 ---</span>
  
      bool isContextThread() const final;
      bool isSecureContext() const final;
      bool isJSExecutionForbidden() const final { return false; }
  
<span class="line-modified">!     void queueTaskToDispatchEvent(TaskSource, Ref&lt;Event&gt;&amp;&amp;);</span>
<span class="line-modified">!     void queueTaskToDispatchEventOnWindow(TaskSource, Ref&lt;Event&gt;&amp;&amp;);</span>
      void enqueueOverflowEvent(Ref&lt;Event&gt;&amp;&amp;);
      void dispatchPageshowEvent(PageshowEventPersistence);
      WEBCORE_EXPORT void enqueueSecurityPolicyViolationEvent(SecurityPolicyViolationEvent::Init&amp;&amp;);
      void enqueueHashchangeEvent(const String&amp; oldURL, const String&amp; newURL);
      void dispatchPopstateEvent(RefPtr&lt;SerializedScriptValue&gt;&amp;&amp; stateObject);
  
      WEBCORE_EXPORT void addMediaCanStartListener(MediaCanStartListener&amp;);
      WEBCORE_EXPORT void removeMediaCanStartListener(MediaCanStartListener&amp;);
      MediaCanStartListener* takeAnyMediaCanStartListener();
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1186,27 ***</span>
  
  #if ENABLE(IOS_TOUCH_EVENTS)
  #include &lt;WebKitAdditions/DocumentIOS.h&gt;
  #endif
  
<span class="line-modified">! #if ENABLE(DEVICE_ORIENTATION)</span>
<span class="line-removed">- #if PLATFORM(IOS_FAMILY)</span>
      DeviceMotionController&amp; deviceMotionController() const;
      DeviceOrientationController&amp; deviceOrientationController() const;
      WEBCORE_EXPORT void simulateDeviceOrientationChange(double alpha, double beta, double gamma);
  #endif
  
      DeviceOrientationAndMotionAccessController&amp; deviceOrientationAndMotionAccessController();
<span class="line-modified">! #endif // ENABLE(DEVICE_ORIENTATION)</span>
  
      const DocumentTiming&amp; timing() const { return m_documentTiming; }
  
      WEBCORE_EXPORT double monotonicTimestamp() const;
  
      int requestAnimationFrame(Ref&lt;RequestAnimationFrameCallback&gt;&amp;&amp;);
      void cancelAnimationFrame(int id);
  
      EventTarget* errorEventTarget() final;
      void logExceptionToConsole(const String&amp; errorMessage, const String&amp; sourceURL, int lineNumber, int columnNumber, RefPtr&lt;Inspector::ScriptCallStack&gt;&amp;&amp;) final;
  
      void initDNSPrefetch();
  
<span class="line-new-header">--- 1182,31 ---</span>
  
  #if ENABLE(IOS_TOUCH_EVENTS)
  #include &lt;WebKitAdditions/DocumentIOS.h&gt;
  #endif
  
<span class="line-modified">! #if ENABLE(DEVICE_ORIENTATION) &amp;&amp; PLATFORM(IOS_FAMILY)</span>
      DeviceMotionController&amp; deviceMotionController() const;
      DeviceOrientationController&amp; deviceOrientationController() const;
      WEBCORE_EXPORT void simulateDeviceOrientationChange(double alpha, double beta, double gamma);
  #endif
  
<span class="line-added">+ #if ENABLE(DEVICE_ORIENTATION)</span>
      DeviceOrientationAndMotionAccessController&amp; deviceOrientationAndMotionAccessController();
<span class="line-modified">! #endif</span>
  
      const DocumentTiming&amp; timing() const { return m_documentTiming; }
  
      WEBCORE_EXPORT double monotonicTimestamp() const;
  
      int requestAnimationFrame(Ref&lt;RequestAnimationFrameCallback&gt;&amp;&amp;);
      void cancelAnimationFrame(int id);
  
<span class="line-added">+     int requestIdleCallback(Ref&lt;IdleRequestCallback&gt;&amp;&amp;, Seconds timeout);</span>
<span class="line-added">+     void cancelIdleCallback(int id);</span>
<span class="line-added">+     IdleCallbackController* idleCallbackController() { return m_idleCallbackController.get(); }</span>
<span class="line-added">+ </span>
      EventTarget* errorEventTarget() final;
      void logExceptionToConsole(const String&amp; errorMessage, const String&amp; sourceURL, int lineNumber, int columnNumber, RefPtr&lt;Inspector::ScriptCallStack&gt;&amp;&amp;) final;
  
      void initDNSPrefetch();
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1324,15 ***</span>
      // Callers should try to create the ConsoleMessage themselves.
      WEBCORE_EXPORT void addConsoleMessage(MessageSource, MessageLevel, const String&amp; message, unsigned long requestIdentifier = 0) final;
  
      // The following addMessage function is deprecated.
      // Callers should try to create the ConsoleMessage themselves.
<span class="line-modified">!     void addMessage(MessageSource, MessageLevel, const String&amp; message, const String&amp; sourceURL, unsigned lineNumber, unsigned columnNumber, RefPtr&lt;Inspector::ScriptCallStack&gt;&amp;&amp;, JSC::ExecState* = nullptr, unsigned long requestIdentifier = 0) final;</span>
  
      SecurityOrigin&amp; securityOrigin() const { return *SecurityContext::securityOrigin(); }
      SecurityOrigin&amp; topOrigin() const final { return topDocument().securityOrigin(); }
  
      Ref&lt;FontFaceSet&gt; fonts();
  
      void ensurePlugInsInjectedScript(DOMWrapperWorld&amp;);
  
      void setVisualUpdatesAllowedByClient(bool);
<span class="line-new-header">--- 1324,18 ---</span>
      // Callers should try to create the ConsoleMessage themselves.
      WEBCORE_EXPORT void addConsoleMessage(MessageSource, MessageLevel, const String&amp; message, unsigned long requestIdentifier = 0) final;
  
      // The following addMessage function is deprecated.
      // Callers should try to create the ConsoleMessage themselves.
<span class="line-modified">!     void addMessage(MessageSource, MessageLevel, const String&amp; message, const String&amp; sourceURL, unsigned lineNumber, unsigned columnNumber, RefPtr&lt;Inspector::ScriptCallStack&gt;&amp;&amp;, JSC::JSGlobalObject* = nullptr, unsigned long requestIdentifier = 0) final;</span>
  
      SecurityOrigin&amp; securityOrigin() const { return *SecurityContext::securityOrigin(); }
      SecurityOrigin&amp; topOrigin() const final { return topDocument().securityOrigin(); }
  
<span class="line-added">+     void willLoadScriptElement(const URL&amp;);</span>
<span class="line-added">+     void willLoadFrameElement(const URL&amp;);</span>
<span class="line-added">+ </span>
      Ref&lt;FontFaceSet&gt; fonts();
  
      void ensurePlugInsInjectedScript(DOMWrapperWorld&amp;);
  
      void setVisualUpdatesAllowedByClient(bool);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1344,10 ***</span>
<span class="line-new-header">--- 1347,18 ---</span>
  
      void setHasStyleWithViewportUnits() { m_hasStyleWithViewportUnits = true; }
      bool hasStyleWithViewportUnits() const { return m_hasStyleWithViewportUnits; }
      void updateViewportUnitsOnResize();
  
<span class="line-added">+     void setNeedsDOMWindowResizeEvent();</span>
<span class="line-added">+     void setNeedsVisualViewportResize();</span>
<span class="line-added">+     void runResizeSteps();</span>
<span class="line-added">+ </span>
<span class="line-added">+     void addPendingScrollEventTarget(ContainerNode&amp;);</span>
<span class="line-added">+     void setNeedsVisualViewportScrollEvent();</span>
<span class="line-added">+     void runScrollSteps();</span>
<span class="line-added">+ </span>
      WEBCORE_EXPORT void addAudioProducer(MediaProducer&amp;);
      WEBCORE_EXPORT void removeAudioProducer(MediaProducer&amp;);
      MediaProducer::MediaStateFlags mediaState() const { return m_mediaState; }
      void noteUserInteractionWithMediaElement();
      bool isCapturing() const { return MediaProducer::isCapturing(m_mediaState); }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1361,21 ***</span>
      void playbackTargetPickerClientStateDidChange(MediaPlaybackTargetClient&amp;, MediaProducer::MediaStateFlags);
  
      void setPlaybackTarget(uint64_t, Ref&lt;MediaPlaybackTarget&gt;&amp;&amp;);
      void playbackTargetAvailabilityDidChange(uint64_t, bool);
      void setShouldPlayToPlaybackTarget(uint64_t, bool);
  #endif
  
      ShouldOpenExternalURLsPolicy shouldOpenExternalURLsPolicyToPropagate() const;
      bool shouldEnforceContentDispositionAttachmentSandbox() const;
      void applyContentDispositionAttachmentSandbox();
  
<span class="line-modified">!     void addViewportDependentPicture(HTMLPictureElement&amp;);</span>
<span class="line-modified">!     void removeViewportDependentPicture(HTMLPictureElement&amp;);</span>
<span class="line-removed">- </span>
<span class="line-removed">-     void addAppearanceDependentPicture(HTMLPictureElement&amp;);</span>
<span class="line-removed">-     void removeAppearanceDependentPicture(HTMLPictureElement&amp;);</span>
  
      void scheduleTimedRenderingUpdate();
  
  #if ENABLE(INTERSECTION_OBSERVER)
      void addIntersectionObserver(IntersectionObserver&amp;);
<span class="line-new-header">--- 1372,19 ---</span>
      void playbackTargetPickerClientStateDidChange(MediaPlaybackTargetClient&amp;, MediaProducer::MediaStateFlags);
  
      void setPlaybackTarget(uint64_t, Ref&lt;MediaPlaybackTarget&gt;&amp;&amp;);
      void playbackTargetAvailabilityDidChange(uint64_t, bool);
      void setShouldPlayToPlaybackTarget(uint64_t, bool);
<span class="line-added">+     void playbackTargetPickerWasDismissed(uint64_t);</span>
  #endif
  
      ShouldOpenExternalURLsPolicy shouldOpenExternalURLsPolicyToPropagate() const;
      bool shouldEnforceContentDispositionAttachmentSandbox() const;
      void applyContentDispositionAttachmentSandbox();
  
<span class="line-modified">!     void addDynamicMediaQueryDependentImage(HTMLImageElement&amp;);</span>
<span class="line-modified">!     void removeDynamicMediaQueryDependentImage(HTMLImageElement&amp;);</span>
  
      void scheduleTimedRenderingUpdate();
  
  #if ENABLE(INTERSECTION_OBSERVER)
      void addIntersectionObserver(IntersectionObserver&amp;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1401,12 ***</span>
      void setHasCaptureMediaStreamTrack() { m_hasHadCaptureMediaStreamTrack = true; }
      bool hasHadCaptureMediaStreamTrack() const { return m_hasHadCaptureMediaStreamTrack; }
      void setDeviceIDHashSalt(const String&amp;);
      String deviceIDHashSalt() const { return m_idHashSalt; }
      void stopMediaCapture();
<span class="line-removed">-     void registerForMediaStreamStateChangeCallbacks(HTMLMediaElement&amp;);</span>
<span class="line-removed">-     void unregisterForMediaStreamStateChangeCallbacks(HTMLMediaElement&amp;);</span>
      void mediaStreamCaptureStateChanged();
  #endif
  
  // FIXME: Find a better place for this functionality.
  #if ENABLE(TELEPHONE_NUMBER_DETECTION)
<span class="line-new-header">--- 1410,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1463,10 ***</span>
<span class="line-new-header">--- 1470,12 ---</span>
  
      Logger&amp; logger();
  
      WEBCORE_EXPORT void setConsoleMessageListener(RefPtr&lt;StringCallback&gt;&amp;&amp;); // For testing.
  
<span class="line-added">+     void addTimeline(DocumentTimeline&amp;);</span>
<span class="line-added">+     void removeTimeline(DocumentTimeline&amp;);</span>
      WEBCORE_EXPORT DocumentTimeline&amp; timeline();
      DocumentTimeline* existingTimeline() const { return m_timeline.get(); }
      Vector&lt;RefPtr&lt;WebAnimation&gt;&gt; getAnimations();
  
  #if ENABLE(ATTACHMENT_ELEMENT)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1479,21 ***</span>
  
  #if ENABLE(SERVICE_WORKER)
      void setServiceWorkerConnection(SWClientConnection*);
  #endif
  
<span class="line-modified">!     void addApplicationStateChangeListener(ApplicationStateChangeListener&amp;);</span>
<span class="line-modified">!     void removeApplicationStateChangeListener(ApplicationStateChangeListener&amp;);</span>
<span class="line-modified">!     void forEachApplicationStateChangeListener(const Function&lt;void(ApplicationStateChangeListener&amp;)&gt;&amp;);</span>
  
  #if ENABLE(IOS_TOUCH_EVENTS)
      bool handlingTouchEvent() const { return m_handlingTouchEvent; }
  #endif
  
  #if ENABLE(RESOURCE_LOAD_STATISTICS)
<span class="line-modified">!     bool hasRequestedPageSpecificStorageAccessWithUserInteraction(const RegistrableDomain&amp;);</span>
<span class="line-modified">!     void setHasRequestedPageSpecificStorageAccessWithUserInteraction(const RegistrableDomain&amp;);</span>
      WEBCORE_EXPORT void wasLoadedWithDataTransferFromPrevalentResource();
      void downgradeReferrerToRegistrableDomain();
  #endif
  
      String signedPublicKeyAndChallengeString(unsigned keySizeIndex, const String&amp; challengeString, const URL&amp;);
<span class="line-new-header">--- 1488,21 ---</span>
  
  #if ENABLE(SERVICE_WORKER)
      void setServiceWorkerConnection(SWClientConnection*);
  #endif
  
<span class="line-modified">! #if ENABLE(VIDEO)</span>
<span class="line-modified">!     void forEachMediaElement(const Function&lt;void(HTMLMediaElement&amp;)&gt;&amp;);</span>
<span class="line-modified">! #endif</span>
  
  #if ENABLE(IOS_TOUCH_EVENTS)
      bool handlingTouchEvent() const { return m_handlingTouchEvent; }
  #endif
  
  #if ENABLE(RESOURCE_LOAD_STATISTICS)
<span class="line-modified">!     WEBCORE_EXPORT bool hasRequestedPageSpecificStorageAccessWithUserInteraction(const RegistrableDomain&amp;);</span>
<span class="line-modified">!     WEBCORE_EXPORT void setHasRequestedPageSpecificStorageAccessWithUserInteraction(const RegistrableDomain&amp;);</span>
      WEBCORE_EXPORT void wasLoadedWithDataTransferFromPrevalentResource();
      void downgradeReferrerToRegistrableDomain();
  #endif
  
      String signedPublicKeyAndChallengeString(unsigned keySizeIndex, const String&amp; challengeString, const URL&amp;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1523,17 ***</span>
  
      void frameWasDisconnectedFromOwner();
  
      WEBCORE_EXPORT bool hitTest(const HitTestRequest&amp;, HitTestResult&amp;);
      bool hitTest(const HitTestRequest&amp;, const HitTestLocation&amp;, HitTestResult&amp;);
<span class="line-modified">! #if !ASSERT_DISABLED</span>
      bool inHitTesting() const { return m_inHitTesting; }
  #endif
  
  protected:
      enum ConstructionFlags { Synthesized = 1, NonRenderedPlaceholder = 1 &lt;&lt; 1 };
<span class="line-modified">!     Document(PAL::SessionID, Frame*, const URL&amp;, unsigned = DefaultDocumentClass, unsigned constructionFlags = 0);</span>
  
      void clearXMLVersion() { m_xmlVersion = String(); }
  
      virtual Ref&lt;Document&gt; cloneDocumentWithoutChildren() const;
  
<span class="line-new-header">--- 1532,34 ---</span>
  
      void frameWasDisconnectedFromOwner();
  
      WEBCORE_EXPORT bool hitTest(const HitTestRequest&amp;, HitTestResult&amp;);
      bool hitTest(const HitTestRequest&amp;, const HitTestLocation&amp;, HitTestResult&amp;);
<span class="line-modified">! #if ASSERT_ENABLED</span>
      bool inHitTesting() const { return m_inHitTesting; }
  #endif
  
<span class="line-added">+     MessagePortChannelProvider&amp; messagePortChannelProvider();</span>
<span class="line-added">+ </span>
<span class="line-added">+ #if USE(SYSTEM_PREVIEW)</span>
<span class="line-added">+     WEBCORE_EXPORT void dispatchSystemPreviewActionEvent(const SystemPreviewInfo&amp;, const String&amp; message);</span>
<span class="line-added">+ #endif</span>
<span class="line-added">+ </span>
<span class="line-added">+ #if ENABLE(PICTURE_IN_PICTURE_API)</span>
<span class="line-added">+     HTMLVideoElement* pictureInPictureElement() const;</span>
<span class="line-added">+     void setPictureInPictureElement(HTMLVideoElement*);</span>
<span class="line-added">+ #endif</span>
<span class="line-added">+ </span>
<span class="line-added">+     WEBCORE_EXPORT TextManipulationController&amp; textManipulationController();</span>
<span class="line-added">+     TextManipulationController* textManipulationControllerIfExists() { return m_textManipulationController.get(); }</span>
<span class="line-added">+ </span>
<span class="line-added">+     HighlightMap&amp; highlightMap();</span>
<span class="line-added">+     void updateHighlightPositions();</span>
<span class="line-added">+ </span>
  protected:
      enum ConstructionFlags { Synthesized = 1, NonRenderedPlaceholder = 1 &lt;&lt; 1 };
<span class="line-modified">!     Document(Frame*, const URL&amp;, unsigned = DefaultDocumentClass, unsigned constructionFlags = 0);</span>
  
      void clearXMLVersion() { m_xmlVersion = String(); }
  
      virtual Ref&lt;Document&gt; cloneDocumentWithoutChildren() const;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1542,12 ***</span>
      friend class Node;
      friend class ThrowOnDynamicMarkupInsertionCountIncrementer;
      friend class IgnoreOpensDuringUnloadCountIncrementer;
      friend class IgnoreDestructiveWriteCountIncrementer;
  
<span class="line-removed">-     bool shouldInheritContentSecurityPolicy() const;</span>
<span class="line-removed">- </span>
      void updateTitleElement(Element&amp; changingTitleElement);
      void willDetachPage() final;
      void frameDestroyed() final;
  
      void commonTeardown();
<span class="line-new-header">--- 1568,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1616,13 ***</span>
      void setCachedDOMCookies(const String&amp;);
      bool isDOMCookieCacheValid() const { return m_cookieCacheExpiryTimer.isActive(); }
      void invalidateDOMCookieCache();
      void didLoadResourceSynchronously() final;
  
<span class="line-removed">-     void checkViewportDependentPictures();</span>
<span class="line-removed">-     void checkAppearanceDependentPictures();</span>
<span class="line-removed">- </span>
      bool canNavigateInternal(Frame&amp; targetFrame);
      bool isNavigationBlockedByThirdPartyIFrameRedirectBlocking(Frame&amp; targetFrame, const URL&amp; destinationURL);
  
  #if ENABLE(INTERSECTION_OBSERVER)
      void notifyIntersectionObserversTimerFired();
<span class="line-new-header">--- 1640,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1637,15 ***</span>
  
      void platformSuspendOrStopActiveDOMObjects();
  
      bool isBodyPotentiallyScrollable(HTMLBodyElement&amp;);
  
      const Ref&lt;Settings&gt; m_settings;
  
      UniqueRef&lt;Quirks&gt; m_quirks;
  
<span class="line-modified">!     std::unique_ptr&lt;StyleResolver&gt; m_userAgentShadowTreeStyleResolver;</span>
  
      RefPtr&lt;DOMWindow&gt; m_domWindow;
      WeakPtr&lt;Document&gt; m_contextDocument;
  
      Ref&lt;CachedResourceLoader&gt; m_cachedResourceLoader;
<span class="line-new-header">--- 1658,17 ---</span>
  
      void platformSuspendOrStopActiveDOMObjects();
  
      bool isBodyPotentiallyScrollable(HTMLBodyElement&amp;);
  
<span class="line-added">+     void didLogMessage(const WTFLogChannel&amp;, WTFLogLevel, Vector&lt;JSONLogValue&gt;&amp;&amp;) final;</span>
<span class="line-added">+ </span>
      const Ref&lt;Settings&gt; m_settings;
  
      UniqueRef&lt;Quirks&gt; m_quirks;
  
<span class="line-modified">!     std::unique_ptr&lt;Style::Resolver&gt; m_userAgentShadowTreeStyleResolver;</span>
  
      RefPtr&lt;DOMWindow&gt; m_domWindow;
      WeakPtr&lt;Document&gt; m_contextDocument;
  
      Ref&lt;CachedResourceLoader&gt; m_cachedResourceLoader;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1758,48 ***</span>
  #endif
  
      HashMap&lt;String, RefPtr&lt;HTMLCanvasElement&gt;&gt; m_cssCanvasElements;
  
      HashSet&lt;Element*&gt; m_documentSuspensionCallbackElements;
<span class="line-modified">!     HashSet&lt;Element*&gt; m_mediaVolumeCallbackElements;</span>
<span class="line-modified">!     HashSet&lt;Element*&gt; m_privateBrowsingStateChangedElements;</span>
  #if ENABLE(VIDEO_TRACK)
<span class="line-modified">!     HashSet&lt;Element*&gt; m_captionPreferencesChangedElements;</span>
  #endif
  
      Element* m_mainArticleElement { nullptr };
      HashSet&lt;Element*&gt; m_articleElements;
  
<span class="line-removed">- #if ENABLE(MEDIA_CONTROLS_SCRIPT)</span>
<span class="line-removed">-     HashSet&lt;HTMLMediaElement*&gt; m_pageScaleFactorChangedElements;</span>
<span class="line-removed">-     HashSet&lt;HTMLMediaElement*&gt; m_userInterfaceLayoutDirectionChangedElements;</span>
<span class="line-removed">- #endif</span>
<span class="line-removed">- </span>
      HashSet&lt;VisibilityChangeClient*&gt; m_visibilityStateCallbackClients;
<span class="line-removed">- #if ENABLE(VIDEO)</span>
<span class="line-removed">-     HashSet&lt;HTMLMediaElement*&gt; m_allowsMediaDocumentInlinePlaybackElements;</span>
<span class="line-removed">- #endif</span>
  
      std::unique_ptr&lt;HashMap&lt;String, Element*, ASCIICaseInsensitiveHash&gt;&gt; m_accessKeyCache;
  
      std::unique_ptr&lt;ConstantPropertyMap&gt; m_constantPropertyMap;
  
      std::unique_ptr&lt;SelectorQueryCache&gt; m_selectorQueryCache;
  
      DocumentClassFlags m_documentClasses;
  
      RenderPtr&lt;RenderView&gt; m_renderView;
<span class="line-removed">-     mutable DocumentEventQueue m_eventQueue;</span>
  
      HashSet&lt;MediaCanStartListener*&gt; m_mediaCanStartListeners;
  
  #if ENABLE(FULLSCREEN_API)
      UniqueRef&lt;FullscreenManager&gt; m_fullscreenManager;
  #endif
  
<span class="line-modified">!     HashSet&lt;HTMLPictureElement*&gt; m_viewportDependentPictures;</span>
<span class="line-removed">-     HashSet&lt;HTMLPictureElement*&gt; m_appearanceDependentPictures;</span>
  
  #if ENABLE(INTERSECTION_OBSERVER)
      Vector&lt;WeakPtr&lt;IntersectionObserver&gt;&gt; m_intersectionObservers;
      Vector&lt;WeakPtr&lt;IntersectionObserver&gt;&gt; m_intersectionObserversWithPendingNotifications;
      Timer m_intersectionObserversNotifyTimer;
<span class="line-new-header">--- 1781,41 ---</span>
  #endif
  
      HashMap&lt;String, RefPtr&lt;HTMLCanvasElement&gt;&gt; m_cssCanvasElements;
  
      HashSet&lt;Element*&gt; m_documentSuspensionCallbackElements;
<span class="line-modified">! </span>
<span class="line-modified">! #if ENABLE(VIDEO)</span>
<span class="line-added">+     HashSet&lt;HTMLMediaElement*&gt; m_mediaElements;</span>
<span class="line-added">+ #endif</span>
<span class="line-added">+ </span>
  #if ENABLE(VIDEO_TRACK)
<span class="line-modified">!     HashSet&lt;HTMLMediaElement*&gt; m_captionPreferencesChangedElements;</span>
  #endif
  
      Element* m_mainArticleElement { nullptr };
      HashSet&lt;Element*&gt; m_articleElements;
  
      HashSet&lt;VisibilityChangeClient*&gt; m_visibilityStateCallbackClients;
  
      std::unique_ptr&lt;HashMap&lt;String, Element*, ASCIICaseInsensitiveHash&gt;&gt; m_accessKeyCache;
  
      std::unique_ptr&lt;ConstantPropertyMap&gt; m_constantPropertyMap;
  
      std::unique_ptr&lt;SelectorQueryCache&gt; m_selectorQueryCache;
  
      DocumentClassFlags m_documentClasses;
  
      RenderPtr&lt;RenderView&gt; m_renderView;
  
      HashSet&lt;MediaCanStartListener*&gt; m_mediaCanStartListeners;
  
  #if ENABLE(FULLSCREEN_API)
      UniqueRef&lt;FullscreenManager&gt; m_fullscreenManager;
  #endif
  
<span class="line-modified">!     WeakHashSet&lt;HTMLImageElement&gt; m_dynamicMediaQueryDependentImages;</span>
  
  #if ENABLE(INTERSECTION_OBSERVER)
      Vector&lt;WeakPtr&lt;IntersectionObserver&gt;&gt; m_intersectionObservers;
      Vector&lt;WeakPtr&lt;IntersectionObserver&gt;&gt; m_intersectionObserversWithPendingNotifications;
      Timer m_intersectionObserversNotifyTimer;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1831,21 ***</span>
      MonotonicTime m_userActivatedMediaFinishedPlayingTimestamp;
  
      void clearScriptedAnimationController();
      RefPtr&lt;ScriptedAnimationController&gt; m_scriptedAnimationController;
  
<span class="line-modified">!     void notifyMediaCaptureOfVisibilityChanged();</span>
<span class="line-removed">- </span>
<span class="line-removed">-     void didLogMessage(const WTFLogChannel&amp;, WTFLogLevel, Vector&lt;JSONLogValue&gt;&amp;&amp;) final;</span>
  
<span class="line-modified">! #if ENABLE(DEVICE_ORIENTATION)</span>
<span class="line-removed">- #if PLATFORM(IOS_FAMILY)</span>
      std::unique_ptr&lt;DeviceMotionClient&gt; m_deviceMotionClient;
      std::unique_ptr&lt;DeviceMotionController&gt; m_deviceMotionController;
      std::unique_ptr&lt;DeviceOrientationClient&gt; m_deviceOrientationClient;
      std::unique_ptr&lt;DeviceOrientationController&gt; m_deviceOrientationController;
  #endif
      std::unique_ptr&lt;DeviceOrientationAndMotionAccessController&gt; m_deviceOrientationAndMotionAccessController;
  #endif
  
      GenericTaskQueue&lt;Timer&gt; m_logMessageTaskQueue;
  
<span class="line-new-header">--- 1847,20 ---</span>
      MonotonicTime m_userActivatedMediaFinishedPlayingTimestamp;
  
      void clearScriptedAnimationController();
      RefPtr&lt;ScriptedAnimationController&gt; m_scriptedAnimationController;
  
<span class="line-modified">!     std::unique_ptr&lt;IdleCallbackController&gt; m_idleCallbackController;</span>
  
<span class="line-modified">! #if ENABLE(DEVICE_ORIENTATION) &amp;&amp; PLATFORM(IOS_FAMILY)</span>
      std::unique_ptr&lt;DeviceMotionClient&gt; m_deviceMotionClient;
      std::unique_ptr&lt;DeviceMotionController&gt; m_deviceMotionController;
      std::unique_ptr&lt;DeviceOrientationClient&gt; m_deviceOrientationClient;
      std::unique_ptr&lt;DeviceOrientationController&gt; m_deviceOrientationController;
  #endif
<span class="line-added">+ </span>
<span class="line-added">+ #if ENABLE(DEVICE_ORIENTATION)</span>
      std::unique_ptr&lt;DeviceOrientationAndMotionAccessController&gt; m_deviceOrientationAndMotionAccessController;
  #endif
  
      GenericTaskQueue&lt;Timer&gt; m_logMessageTaskQueue;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1854,10 ***</span>
<span class="line-new-header">--- 1869,12 ---</span>
  
  #if ENABLE(TEXT_AUTOSIZING)
      std::unique_ptr&lt;TextAutoSizing&gt; m_textAutoSizing;
  #endif
  
<span class="line-added">+     RefPtr&lt;HighlightMap&gt; m_highlightMap;</span>
<span class="line-added">+ </span>
      Timer m_visualUpdatesSuppressionTimer;
  
      void clearSharedObjectPool();
      Timer m_sharedObjectPoolClearTimer;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1926,16 ***</span>
      unsigned m_writeRecursionDepth { 0 };
  
      InheritedBool m_designMode { inherit };
      MediaProducer::MediaStateFlags m_mediaState { MediaProducer::IsNotPlaying };
      bool m_userHasInteractedWithMediaElement { false };
<span class="line-modified">!     PageCacheState m_pageCacheState { NotInPageCache };</span>
      Optional&lt;ReferrerPolicy&gt; m_referrerPolicy;
      ReadyState m_readyState { Complete };
  
      MutationObserverOptions m_mutationObserverTypes { 0 };
  
      bool m_writeRecursionIsTooDeep { false };
      bool m_wellFormed { false };
      bool m_createRenderers { true };
  
      bool m_hasNodesWithNonFinalStyle { false };
<span class="line-new-header">--- 1943,17 ---</span>
      unsigned m_writeRecursionDepth { 0 };
  
      InheritedBool m_designMode { inherit };
      MediaProducer::MediaStateFlags m_mediaState { MediaProducer::IsNotPlaying };
      bool m_userHasInteractedWithMediaElement { false };
<span class="line-modified">!     BackForwardCacheState m_backForwardCacheState { NotInBackForwardCache };</span>
      Optional&lt;ReferrerPolicy&gt; m_referrerPolicy;
      ReadyState m_readyState { Complete };
  
      MutationObserverOptions m_mutationObserverTypes { 0 };
  
<span class="line-added">+     bool m_activeParserWasAborted { false };</span>
      bool m_writeRecursionIsTooDeep { false };
      bool m_wellFormed { false };
      bool m_createRenderers { true };
  
      bool m_hasNodesWithNonFinalStyle { false };
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1963,11 ***</span>
      bool m_visuallyOrdered { false };
      bool m_bParsing { false }; // FIXME: rename
  
      bool m_needsFullStyleRebuild { false };
      bool m_inStyleRecalc { false };
<span class="line-removed">-     bool m_closeAfterStyleRecalc { false };</span>
      bool m_inRenderTreeUpdate { false };
      bool m_isResolvingTreeStyle { false };
  
      bool m_gotoAnchorNeededAfterStylesheetsLoad { false };
      bool m_isDNSPrefetchEnabled { false };
<span class="line-new-header">--- 1981,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1982,52 ***</span>
      bool m_hasInjectedPlugInsScript { false };
      bool m_renderTreeBeingDestroyed { false };
      bool m_hasPreparedForDestruction { false };
  
      bool m_hasStyleWithViewportUnits { false };
      bool m_isTimerThrottlingEnabled { false };
      bool m_isSuspended { false };
  
      bool m_scheduledTasksAreSuspended { false };
      bool m_visualUpdatesAllowed { true };
  
      bool m_areDeviceMotionAndOrientationUpdatesSuspended { false };
      bool m_userDidInteractWithPage { false };
<span class="line-modified">! #if !ASSERT_DISABLED</span>
      bool m_inHitTesting { false };
  #endif
  
  #if ENABLE(TELEPHONE_NUMBER_DETECTION)
      bool m_isTelephoneNumberParsingAllowed { true };
  #endif
  
  #if ENABLE(MEDIA_STREAM)
      HashSet&lt;HTMLMediaElement*&gt; m_mediaStreamStateChangeElements;
      String m_idHashSalt;
      bool m_hasHadCaptureMediaStreamTrack { false };
  #endif
  
<span class="line-modified">! #ifndef NDEBUG</span>
      bool m_didDispatchViewportPropertiesChanged { false };
  #endif
  
      OrientationNotifier m_orientationNotifier;
<span class="line-removed">-     mutable PAL::SessionID m_sessionID;</span>
      mutable RefPtr&lt;Logger&gt; m_logger;
      RefPtr&lt;StringCallback&gt; m_consoleMessageListener;
  
      static bool hasEverCreatedAnAXObjectCache;
  
      RefPtr&lt;DocumentTimeline&gt; m_timeline;
      DocumentIdentifier m_identifier;
  
  #if ENABLE(SERVICE_WORKER)
      RefPtr&lt;SWClientConnection&gt; m_serviceWorkerConnection;
  #endif
  
<span class="line-removed">-     HashSet&lt;ApplicationStateChangeListener*&gt; m_applicationStateChangeListeners;</span>
<span class="line-removed">- </span>
  #if ENABLE(RESOURCE_LOAD_STATISTICS)
      RegistrableDomain m_registrableDomainRequestedPageSpecificStorageAccessWithUserInteraction { };
      String m_referrerOverride;
  #endif
  
<span class="line-new-header">--- 1999,60 ---</span>
      bool m_hasInjectedPlugInsScript { false };
      bool m_renderTreeBeingDestroyed { false };
      bool m_hasPreparedForDestruction { false };
  
      bool m_hasStyleWithViewportUnits { false };
<span class="line-added">+     bool m_needsDOMWindowResizeEvent { false };</span>
<span class="line-added">+     bool m_needsVisualViewportResizeEvent { false };</span>
<span class="line-added">+     bool m_needsVisualViewportScrollEvent { false };</span>
      bool m_isTimerThrottlingEnabled { false };
      bool m_isSuspended { false };
  
      bool m_scheduledTasksAreSuspended { false };
      bool m_visualUpdatesAllowed { true };
  
      bool m_areDeviceMotionAndOrientationUpdatesSuspended { false };
      bool m_userDidInteractWithPage { false };
<span class="line-modified">! #if ASSERT_ENABLED</span>
      bool m_inHitTesting { false };
  #endif
  
  #if ENABLE(TELEPHONE_NUMBER_DETECTION)
      bool m_isTelephoneNumberParsingAllowed { true };
  #endif
  
<span class="line-added">+     struct PendingScrollEventTargetList;</span>
<span class="line-added">+     std::unique_ptr&lt;PendingScrollEventTargetList&gt; m_pendingScrollEventTargetList;</span>
<span class="line-added">+ </span>
  #if ENABLE(MEDIA_STREAM)
      HashSet&lt;HTMLMediaElement*&gt; m_mediaStreamStateChangeElements;
      String m_idHashSalt;
      bool m_hasHadCaptureMediaStreamTrack { false };
  #endif
  
<span class="line-modified">! #if ASSERT_ENABLED</span>
      bool m_didDispatchViewportPropertiesChanged { false };
  #endif
  
      OrientationNotifier m_orientationNotifier;
      mutable RefPtr&lt;Logger&gt; m_logger;
      RefPtr&lt;StringCallback&gt; m_consoleMessageListener;
  
      static bool hasEverCreatedAnAXObjectCache;
  
      RefPtr&lt;DocumentTimeline&gt; m_timeline;
<span class="line-added">+     WeakHashSet&lt;DocumentTimeline&gt; m_timelines;</span>
<span class="line-added">+ </span>
      DocumentIdentifier m_identifier;
  
<span class="line-added">+     RefPtr&lt;WindowEventLoop&gt; m_eventLoop;</span>
<span class="line-added">+     std::unique_ptr&lt;EventLoopTaskGroup&gt; m_documentTaskGroup;</span>
<span class="line-added">+ </span>
  #if ENABLE(SERVICE_WORKER)
      RefPtr&lt;SWClientConnection&gt; m_serviceWorkerConnection;
  #endif
  
  #if ENABLE(RESOURCE_LOAD_STATISTICS)
      RegistrableDomain m_registrableDomainRequestedPageSpecificStorageAccessWithUserInteraction { };
      String m_referrerOverride;
  #endif
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2035,24 ***</span>
  
  #if ENABLE(CSS_PAINTING_API)
      RefPtr&lt;Worklet&gt; m_paintWorklet;
      HashMap&lt;String, Ref&lt;PaintWorkletGlobalScope&gt;&gt; m_paintWorkletGlobalScopes;
  #endif
<span class="line-modified">! </span>
      bool m_hasEvaluatedUserAgentScripts { false };
      bool m_isRunningUserScripts { false };
      bool m_mayBeDetachedFromFrame { true };
  #if ENABLE(APPLE_PAY)
      bool m_hasStartedApplePaySession { false };
  #endif
  
      Ref&lt;UndoManager&gt; m_undoManager;
  #if PLATFORM(IOS_FAMILY)
      std::unique_ptr&lt;ContentChangeObserver&gt; m_contentChangeObserver;
      std::unique_ptr&lt;DOMTimerHoldingTank&gt; m_domTimerHoldingTank;
  #endif
  
      HashMap&lt;Element*, ElementIdentifier&gt; m_identifiedElementsMap;
  };
  
  Element* eventTargetElementForDocument(Document*);
  
<span class="line-new-header">--- 2060,33 ---</span>
  
  #if ENABLE(CSS_PAINTING_API)
      RefPtr&lt;Worklet&gt; m_paintWorklet;
      HashMap&lt;String, Ref&lt;PaintWorkletGlobalScope&gt;&gt; m_paintWorkletGlobalScopes;
  #endif
<span class="line-modified">!     unsigned m_numberOfRejectedSyncXHRs { 0 };</span>
      bool m_hasEvaluatedUserAgentScripts { false };
      bool m_isRunningUserScripts { false };
      bool m_mayBeDetachedFromFrame { true };
<span class="line-added">+     bool m_shouldPreventEnteringBackForwardCacheForTesting { false };</span>
<span class="line-added">+     bool m_hasLoadedThirdPartyScript { false };</span>
<span class="line-added">+     bool m_hasLoadedThirdPartyFrame { false };</span>
  #if ENABLE(APPLE_PAY)
      bool m_hasStartedApplePaySession { false };
  #endif
  
      Ref&lt;UndoManager&gt; m_undoManager;
  #if PLATFORM(IOS_FAMILY)
      std::unique_ptr&lt;ContentChangeObserver&gt; m_contentChangeObserver;
      std::unique_ptr&lt;DOMTimerHoldingTank&gt; m_domTimerHoldingTank;
  #endif
  
<span class="line-added">+ #if ENABLE(PICTURE_IN_PICTURE_API)</span>
<span class="line-added">+     WeakPtr&lt;HTMLVideoElement&gt; m_pictureInPictureElement;</span>
<span class="line-added">+ #endif</span>
<span class="line-added">+ </span>
<span class="line-added">+     std::unique_ptr&lt;TextManipulationController&gt; m_textManipulationController;</span>
<span class="line-added">+ </span>
      HashMap&lt;Element*, ElementIdentifier&gt; m_identifiedElementsMap;
  };
  
  Element* eventTargetElementForDocument(Document*);
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2073,13 ***</span>
      if (!hasEverCreatedAnAXObjectCache)
          return nullptr;
      return existingAXObjectCacheSlow();
  }
  
<span class="line-modified">! inline Ref&lt;Document&gt; Document::create(PAL::SessionID sessionID, const URL&amp; url)</span>
  {
<span class="line-modified">!     return adoptRef(*new Document(sessionID, nullptr, url));</span>
  }
  
  inline void Document::invalidateAccessKeyCache()
  {
      if (UNLIKELY(m_accessKeyCache))
<span class="line-new-header">--- 2107,13 ---</span>
      if (!hasEverCreatedAnAXObjectCache)
          return nullptr;
      return existingAXObjectCacheSlow();
  }
  
<span class="line-modified">! inline Ref&lt;Document&gt; Document::create(const URL&amp; url)</span>
  {
<span class="line-modified">!     return adoptRef(*new Document(nullptr, url));</span>
  }
  
  inline void Document::invalidateAccessKeyCache()
  {
      if (UNLIKELY(m_accessKeyCache))
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2091,15 ***</span>
  inline ScriptExecutionContext* Node::scriptExecutionContext() const
  {
      return &amp;document().contextDocument();
  }
  
<span class="line-removed">- inline ActiveDOMObject::ActiveDOMObject(Document&amp; document)</span>
<span class="line-removed">-     : ActiveDOMObject(static_cast&lt;ScriptExecutionContext*&gt;(&amp;document.contextDocument()))</span>
<span class="line-removed">- {</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  } // namespace WebCore
  
  SPECIALIZE_TYPE_TRAITS_BEGIN(WebCore::Document)
      static bool isType(const WebCore::ScriptExecutionContext&amp; context) { return context.isDocument(); }
      static bool isType(const WebCore::Node&amp; node) { return node.isDocumentNode(); }
<span class="line-new-header">--- 2125,10 ---</span>
</pre>
<center><a href="Document.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Document.idl.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>