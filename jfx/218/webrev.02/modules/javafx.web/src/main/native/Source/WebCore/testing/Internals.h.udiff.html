<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/testing/Internals.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Internals.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Internals.idl.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/testing/Internals.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -29,11 +29,11 @@</span>
  #include &quot;CSSComputedStyleDeclaration.h&quot;
  #include &quot;ContextDestructionObserver.h&quot;
  #include &quot;Cookie.h&quot;
  #include &quot;ExceptionOr.h&quot;
  #include &quot;HEVCUtilities.h&quot;
<span class="udiff-line-modified-removed">- #include &quot;JSDOMPromiseDeferred.h&quot;</span>
<span class="udiff-line-modified-added">+ #include &quot;IDLTypes.h&quot;</span>
  #include &quot;OrientationNotifier.h&quot;
  #include &quot;PageConsoleClient.h&quot;
  #include &quot;RealtimeMediaSource.h&quot;
  #include &quot;TextIndicator.h&quot;
  #include &lt;JavaScriptCore/Float32Array.h&gt;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -70,13 +70,17 @@</span>
  class HTMLInputElement;
  class HTMLLinkElement;
  class HTMLMediaElement;
  class HTMLPictureElement;
  class HTMLSelectElement;
<span class="udiff-line-added">+ class HTMLVideoElement;</span>
  class ImageData;
  class InspectorStubFrontend;
<span class="udiff-line-added">+ class InternalsMapLike;</span>
  class InternalSettings;
<span class="udiff-line-added">+ class InternalsSetLike;</span>
<span class="udiff-line-added">+ class Location;</span>
  class MallocStatistics;
  class MediaSession;
  class MediaStream;
  class MediaStreamTrack;
  class MemoryInfo;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -94,22 +98,28 @@</span>
  class SourceBuffer;
  class StringCallback;
  class StyleSheet;
  class TimeRanges;
  class TypeConversions;
<span class="udiff-line-added">+ class UnsuspendableActiveDOMObject;</span>
  class VoidCallback;
  class WebGLRenderingContext;
<span class="udiff-line-added">+ class WindowProxy;</span>
  class XMLHttpRequest;
  
  #if ENABLE(VIDEO_TRACK)
  class TextTrackCueGeneric;
  #endif
  
  #if ENABLE(SERVICE_WORKER)
  class ServiceWorker;
  #endif
  
<span class="udiff-line-added">+ template&lt;typename IDLType&gt; class DOMPromiseDeferred;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ struct MockWebAuthenticationConfiguration;</span>
<span class="udiff-line-added">+ </span>
  class Internals final : public RefCounted&lt;Internals&gt;, private ContextDestructionObserver
  #if ENABLE(MEDIA_STREAM)
      , private RealtimeMediaSource::Observer
  #endif
      {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -161,12 +171,13 @@</span>
      void setLargeImageAsyncDecodingEnabledForTesting(HTMLImageElement&amp;, bool enabled);
      void setForceUpdateImageDataEnabledForTesting(HTMLImageElement&amp;, bool enabled);
  
      void setGridMaxTracksLimit(unsigned);
  
<span class="udiff-line-modified-removed">-     void clearPageCache();</span>
<span class="udiff-line-modified-removed">-     unsigned pageCacheSize() const;</span>
<span class="udiff-line-modified-added">+     void clearBackForwardCache();</span>
<span class="udiff-line-modified-added">+     unsigned backForwardCacheSize() const;</span>
<span class="udiff-line-added">+     void preventDocumentFromEnteringBackForwardCache();</span>
  
      void disableTileSizeUpdateDelay();
  
      void setSpeculativeTilingDelayDisabledForTesting(bool);
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -223,10 +234,12 @@</span>
  
      Node* treeScopeRootNode(Node&amp;);
      Node* parentTreeScope(Node&amp;);
  
      String visiblePlaceholder(Element&amp;);
<span class="udiff-line-added">+     void setCanShowPlaceholder(Element&amp;, bool);</span>
<span class="udiff-line-added">+ </span>
      void selectColorInColorChooser(HTMLInputElement&amp;, const String&amp; colorValue);
      ExceptionOr&lt;Vector&lt;String&gt;&gt; formControlStateOfPreviousHistoryItem();
      ExceptionOr&lt;void&gt; setFormControlStateOfPreviousHistoryItem(const Vector&lt;String&gt;&amp;);
  
      ExceptionOr&lt;Ref&lt;DOMRect&gt;&gt; absoluteCaretBounds();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -295,10 +308,12 @@</span>
      void setUserPreferredLanguages(const Vector&lt;String&gt;&amp;);
  
      Vector&lt;String&gt; userPreferredAudioCharacteristics() const;
      void setUserPreferredAudioCharacteristic(const String&amp;);
  
<span class="udiff-line-added">+     void setMaxCanvasPixelMemory(unsigned);</span>
<span class="udiff-line-added">+ </span>
      ExceptionOr&lt;unsigned&gt; wheelEventHandlerCount();
      ExceptionOr&lt;unsigned&gt; touchEventHandlerCount();
  
      ExceptionOr&lt;Ref&lt;DOMRectList&gt;&gt; touchEventRectsForEvent(const String&amp;);
      ExceptionOr&lt;Ref&lt;DOMRectList&gt;&gt; passiveTouchEventListenerRects();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -360,10 +375,11 @@</span>
          LAYER_TREE_INCLUDES_ACCELERATES_DRAWING = 32,
          LAYER_TREE_INCLUDES_CLIPPING = 64,
          LAYER_TREE_INCLUDES_BACKING_STORE_ATTACHED = 128,
          LAYER_TREE_INCLUDES_ROOT_LAYER_PROPERTIES = 256,
          LAYER_TREE_INCLUDES_EVENT_REGION = 512,
<span class="udiff-line-added">+         LAYER_TREE_INCLUDES_DEEP_COLOR = 1024,</span>
      };
      ExceptionOr&lt;String&gt; layerTreeAsText(Document&amp;, unsigned short flags) const;
      ExceptionOr&lt;uint64_t&gt; layerIDForElement(Element&amp;);
      ExceptionOr&lt;String&gt; repaintRectsAsText() const;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -406,10 +422,16 @@</span>
  #endif
  
      uint64_t documentIdentifier(const Document&amp;) const;
      bool isDocumentAlive(uint64_t documentIdentifier) const;
  
<span class="udiff-line-added">+     uint64_t storageAreaMapCount() const;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     uint64_t elementIdentifier(Element&amp;) const;</span>
<span class="udiff-line-added">+     uint64_t frameIdentifier(const Document&amp;) const;</span>
<span class="udiff-line-added">+     uint64_t pageIdentifier(const Document&amp;) const;</span>
<span class="udiff-line-added">+ </span>
      bool isAnyWorkletGlobalScopeAlive() const;
  
      String serviceWorkerClientIdentifier(const Document&amp;) const;
  
      RefPtr&lt;WindowProxy&gt; openDummyInspectorFrontend(const String&amp; url);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -494,10 +516,11 @@</span>
  
      Ref&lt;ArrayBuffer&gt; serializeObject(const RefPtr&lt;SerializedScriptValue&gt;&amp;) const;
      Ref&lt;SerializedScriptValue&gt; deserializeBuffer(ArrayBuffer&amp;) const;
  
      bool isFromCurrentWorld(JSC::JSValue) const;
<span class="udiff-line-added">+     JSC::JSValue evaluateInWorldIgnoringException(const String&amp; name, const String&amp; source);</span>
  
      void setUsesOverlayScrollbars(bool);
      void setUsesMockScrollAnimator(bool);
  
      ExceptionOr&lt;String&gt; getCurrentCursorInfo();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -525,11 +548,10 @@</span>
      void enableMockSpeechSynthesizer();
  #endif
  
  #if ENABLE(MEDIA_STREAM)
      void setShouldInterruptAudioOnPageVisibilityChange(bool);
<span class="udiff-line-removed">-     void setMockMediaCaptureDevicesEnabled(bool);</span>
      void setMediaCaptureRequiresSecureConnection(bool);
      void setCustomPrivateRecorderCreator();
  #endif
  
  #if ENABLE(WEB_RTC)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -539,10 +561,12 @@</span>
      void setEnumeratingAllNetworkInterfacesEnabled(bool);
      void stopPeerConnection(RTCPeerConnection&amp;);
      void clearPeerConnectionFactory();
      void applyRotationForOutgoingVideoSources(RTCPeerConnection&amp;);
      void setEnableWebRTCEncryption(bool);
<span class="udiff-line-added">+     void setUseDTLS10(bool);</span>
<span class="udiff-line-added">+     void setUseGPUProcessForWebRTC(bool);</span>
  #endif
  
      String getImageSourceURL(Element&amp;);
  
  #if ENABLE(VIDEO)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -614,14 +638,16 @@</span>
  #endif
  
  #if ENABLE(WIRELESS_PLAYBACK_TARGET)
      void setMockMediaPlaybackTargetPickerEnabled(bool);
      ExceptionOr&lt;void&gt; setMockMediaPlaybackTargetPickerState(const String&amp; deviceName, const String&amp; deviceState);
<span class="udiff-line-added">+     void mockMediaPlaybackTargetPickerDismissPopup();</span>
  #endif
  
  #if ENABLE(WEB_AUDIO)
      void setAudioContextRestrictions(AudioContext&amp;, StringView restrictionsString);
<span class="udiff-line-added">+     void useMockAudioDestinationCocoa();</span>
  #endif
  
      void simulateSystemSleep() const;
      void simulateSystemWake() const;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -657,12 +683,12 @@</span>
  
      String resourceLoadStatisticsForURL(const DOMURL&amp;);
      void setResourceLoadStatisticsEnabled(bool);
  
  #if ENABLE(STREAMS_API)
<span class="udiff-line-modified-removed">-     bool isReadableStreamDisturbed(JSC::ExecState&amp;, JSC::JSValue);</span>
<span class="udiff-line-modified-removed">-     JSC::JSValue cloneArrayBuffer(JSC::ExecState&amp;, JSC::JSValue, JSC::JSValue, JSC::JSValue);</span>
<span class="udiff-line-modified-added">+     bool isReadableStreamDisturbed(JSC::JSGlobalObject&amp;, JSC::JSValue);</span>
<span class="udiff-line-modified-added">+     JSC::JSValue cloneArrayBuffer(JSC::JSGlobalObject&amp;, JSC::JSValue, JSC::JSValue, JSC::JSValue);</span>
  #endif
  
      String composedTreeAsText(Node&amp;);
  
      bool isProcessingUserGesture();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -724,13 +750,14 @@</span>
      void setMediaStreamTrackMuted(MediaStreamTrack&amp;, bool);
      void removeMediaStreamTrack(MediaStream&amp;, MediaStreamTrack&amp;);
      void simulateMediaStreamTrackCaptureSourceFailure(MediaStreamTrack&amp;);
      void setMediaStreamTrackIdentifier(MediaStreamTrack&amp;, String&amp;&amp; id);
      void setMediaStreamSourceInterrupted(MediaStreamTrack&amp;, bool);
<span class="udiff-line-modified-removed">-     void setDisableGetDisplayMediaUserGestureConstraint(bool);</span>
<span class="udiff-line-modified-added">+     bool isMockRealtimeMediaSourceCenterEnabled();</span>
  #endif
  
<span class="udiff-line-added">+     bool supportsAudioSession() const;</span>
      String audioSessionCategory() const;
      double preferredAudioBufferSize() const;
      bool audioSessionActive() const;
  
      void storeRegistrationsOnDisk(DOMPromiseDeferred&lt;void&gt;&amp;&amp;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -746,21 +773,25 @@</span>
  
  #if ENABLE(SERVICE_WORKER)
      using HasRegistrationPromise = DOMPromiseDeferred&lt;IDLBoolean&gt;;
      void hasServiceWorkerRegistration(const String&amp; clientURL, HasRegistrationPromise&amp;&amp;);
      void terminateServiceWorker(ServiceWorker&amp;);
<span class="udiff-line-modified-removed">-     bool hasServiceWorkerConnection();</span>
<span class="udiff-line-modified-added">+     void isServiceWorkerRunning(ServiceWorker&amp;, DOMPromiseDeferred&lt;IDLBoolean&gt;&amp;&amp;);</span>
  #endif
  
  #if ENABLE(APPLE_PAY)
      MockPaymentCoordinator&amp; mockPaymentCoordinator(Document&amp;);
  #endif
  
      bool isSystemPreviewLink(Element&amp;) const;
      bool isSystemPreviewImage(Element&amp;) const;
  
      void postTask(RefPtr&lt;VoidCallback&gt;&amp;&amp;);
<span class="udiff-line-added">+     ExceptionOr&lt;void&gt; queueTask(ScriptExecutionContext&amp;, const String&amp; source, RefPtr&lt;VoidCallback&gt;&amp;&amp;);</span>
<span class="udiff-line-added">+     ExceptionOr&lt;void&gt; queueTaskToQueueMicrotask(Document&amp;, const String&amp; source, RefPtr&lt;VoidCallback&gt;&amp;&amp;);</span>
<span class="udiff-line-added">+     ExceptionOr&lt;bool&gt; hasSameEventLoopAs(WindowProxy&amp;);</span>
<span class="udiff-line-added">+ </span>
      void markContextAsInsecure();
  
      bool usingAppleInternalSDK() const;
  
      struct NowPlayingState {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -799,10 +830,13 @@</span>
      bool supportsVCPEncoder();
  
      using HEVCParameterSet = WebCore::HEVCParameterSet;
      Optional&lt;HEVCParameterSet&gt; parseHEVCCodecParameters(const String&amp; codecString);
  
<span class="udiff-line-added">+     using DoViParameterSet = WebCore::DoViParameterSet;</span>
<span class="udiff-line-added">+     Optional&lt;DoViParameterSet&gt; parseDoViCodecParameters(const String&amp; codecString);</span>
<span class="udiff-line-added">+ </span>
      struct CookieData {
          String name;
          String value;
          String domain;
          // Expiration dates are expressed as milliseconds since the UNIX epoch.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -838,10 +872,11 @@</span>
      void processDidResume();
  
      void testDictionaryLogging();
  
      void setXHRMaximumIntervalForUserGestureForwarding(XMLHttpRequest&amp;, double);
<span class="udiff-line-added">+     void setTransientActivationDuration(double seconds);</span>
  
      void setIsPlayingToAutomotiveHeadUnit(bool);
  
      struct TextIndicatorInfo {
          RefPtr&lt;DOMRectReadOnly&gt; textBoundingRectInRootViewCoordinates;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -872,10 +907,38 @@</span>
  
      TextIndicatorInfo textIndicatorForRange(const Range&amp;, TextIndicatorOptions);
  
      void addPrefetchLoadEventListener(HTMLLinkElement&amp;, RefPtr&lt;EventListener&gt;&amp;&amp;);
  
<span class="udiff-line-added">+ #if ENABLE(WEB_AUTHN)</span>
<span class="udiff-line-added">+     void setMockWebAuthenticationConfiguration(const MockWebAuthenticationConfiguration&amp;);</span>
<span class="udiff-line-added">+ #endif</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ #if ENABLE(PICTURE_IN_PICTURE_API)</span>
<span class="udiff-line-added">+     void setPictureInPictureAPITestEnabled(HTMLVideoElement&amp;, bool);</span>
<span class="udiff-line-added">+ #endif</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     int processIdentifier() const;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     Ref&lt;InternalsSetLike&gt; createInternalsSetLike();</span>
<span class="udiff-line-added">+     Ref&lt;InternalsMapLike&gt; createInternalsMapLike();</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     bool hasSandboxMachLookupAccessToGlobalName(const String&amp; process, const String&amp; service);</span>
<span class="udiff-line-added">+     bool hasSandboxMachLookupAccessToXPCServiceName(const String&amp; process, const String&amp; service);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     String highlightPseudoElementColor(const String&amp; highlightName, Element&amp;);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     String windowLocationHost(DOMWindow&amp;);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     String systemColorForCSSValue(const String&amp; cssValue, bool useDarkModeAppearance, bool useElevatedUserInterfaceLevel);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     bool systemHasBattery() const;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     String mediaMIMETypeForExtension(const String&amp; extension);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     String focusRingColor();</span>
<span class="udiff-line-added">+ </span>
  private:
      explicit Internals(Document&amp;);
      Document* contextDocument() const;
      Frame* frame() const;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -888,11 +951,11 @@</span>
  
      OrientationNotifier m_orientationNotifier;
      unsigned long m_trackVideoSampleCount { 0 };
      unsigned long m_trackAudioSampleCount { 0 };
      RefPtr&lt;MediaStreamTrack&gt; m_track;
<span class="udiff-line-modified-removed">-     Optional&lt;TrackFramePromise&gt; m_nextTrackFramePromise;</span>
<span class="udiff-line-modified-added">+     std::unique_ptr&lt;TrackFramePromise&gt; m_nextTrackFramePromise;</span>
  #endif
  
      std::unique_ptr&lt;InspectorStubFrontend&gt; m_inspectorFrontend;
      RefPtr&lt;CacheStorageConnection&gt; m_cacheStorageConnection;
  };
</pre>
<center><a href="Internals.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Internals.idl.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>