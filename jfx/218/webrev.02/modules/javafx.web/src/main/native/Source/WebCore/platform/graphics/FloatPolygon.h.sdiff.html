<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/FloatPolygon.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FloatPolygon.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FloatRoundedRect.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/FloatPolygon.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 36 #include &lt;memory&gt;
 37 #include &lt;wtf/Vector.h&gt;
 38 
 39 namespace WebCore {
 40 
 41 class FloatPolygonEdge;
 42 
 43 class FloatPolygon {
 44 public:
 45     FloatPolygon(std::unique_ptr&lt;Vector&lt;FloatPoint&gt;&gt; vertices, WindRule fillRule);
 46 
 47     const FloatPoint&amp; vertexAt(unsigned index) const { return (*m_vertices)[index]; }
 48     unsigned numberOfVertices() const { return m_vertices-&gt;size(); }
 49 
 50     WindRule fillRule() const { return m_fillRule; }
 51 
 52     const FloatPolygonEdge&amp; edgeAt(unsigned index) const { return m_edges[index]; }
 53     unsigned numberOfEdges() const { return m_edges.size(); }
 54 
 55     FloatRect boundingBox() const { return m_boundingBox; }
<span class="line-modified"> 56     bool overlappingEdges(float minY, float maxY, Vector&lt;const FloatPolygonEdge*&gt;&amp; result) const;</span>
 57     bool contains(const FloatPoint&amp;) const;
 58     bool isEmpty() const { return m_empty; }
 59 
 60 private:
<span class="line-removed"> 61     typedef PODInterval&lt;float, FloatPolygonEdge*&gt; EdgeInterval;</span>
 62     typedef PODIntervalTree&lt;float, FloatPolygonEdge*&gt; EdgeIntervalTree;
 63 
 64     bool containsNonZero(const FloatPoint&amp;) const;
 65     bool containsEvenOdd(const FloatPoint&amp;) const;
 66 
 67     std::unique_ptr&lt;Vector&lt;FloatPoint&gt;&gt; m_vertices;
 68     WindRule m_fillRule;
 69     FloatRect m_boundingBox;
 70     bool m_empty;
 71     Vector&lt;FloatPolygonEdge&gt; m_edges;
 72     EdgeIntervalTree m_edgeTree; // Each EdgeIntervalTree node stores minY, maxY, and a (&quot;UserData&quot;) pointer to a FloatPolygonEdge.
 73 
 74 };
 75 
 76 class VertexPair {
 77 public:
 78     virtual ~VertexPair() = default;
 79 
 80     virtual const FloatPoint&amp; vertex1() const = 0;
 81     virtual const FloatPoint&amp; vertex2() const = 0;
</pre>
<hr />
<pre>
104         return m_polygon-&gt;vertexAt(m_vertexIndex2);
105     }
106 
107     const FloatPolygonEdge&amp; previousEdge() const
108     {
109         ASSERT(m_polygon &amp;&amp; m_polygon-&gt;numberOfEdges() &gt; 1);
110         return m_polygon-&gt;edgeAt((m_edgeIndex + m_polygon-&gt;numberOfEdges() - 1) % m_polygon-&gt;numberOfEdges());
111     }
112 
113     const FloatPolygonEdge&amp; nextEdge() const
114     {
115         ASSERT(m_polygon &amp;&amp; m_polygon-&gt;numberOfEdges() &gt; 1);
116         return m_polygon-&gt;edgeAt((m_edgeIndex + 1) % m_polygon-&gt;numberOfEdges());
117     }
118 
119     const FloatPolygon* polygon() const { return m_polygon; }
120     unsigned vertexIndex1() const { return m_vertexIndex1; }
121     unsigned vertexIndex2() const { return m_vertexIndex2; }
122     unsigned edgeIndex() const { return m_edgeIndex; }
123 
<span class="line-removed">124     String debugString() const;</span>
<span class="line-removed">125 </span>
126 private:
127     // Edge vertex index1 is less than index2, except the last edge, where index2 is 0. When a polygon edge
128     // is defined by 3 or more colinear vertices, index2 can be the index of the last colinear vertex.
129     unsigned m_vertexIndex1;
130     unsigned m_vertexIndex2;
131     unsigned m_edgeIndex;
132     const FloatPolygon* m_polygon;
133 };
134 
<span class="line-removed">135 } // namespace WebCore</span>
<span class="line-removed">136 </span>
137 #ifndef NDEBUG
<span class="line-modified">138 </span>
<span class="line-removed">139 namespace WTF {</span>
<span class="line-removed">140 </span>
<span class="line-removed">141 // This structure is used by PODIntervalTree for debugging.</span>
<span class="line-removed">142 template&lt;&gt; struct ValueToString&lt;WebCore::FloatPolygonEdge*&gt; {</span>
<span class="line-removed">143     static String string(const WebCore::FloatPolygonEdge* edge) { return edge-&gt;debugString(); }</span>
<span class="line-removed">144 };</span>
<span class="line-removed">145 </span>
<span class="line-removed">146 }</span>
<span class="line-removed">147 </span>
148 #endif


</pre>
</td>
<td>
<hr />
<pre>
 36 #include &lt;memory&gt;
 37 #include &lt;wtf/Vector.h&gt;
 38 
 39 namespace WebCore {
 40 
 41 class FloatPolygonEdge;
 42 
 43 class FloatPolygon {
 44 public:
 45     FloatPolygon(std::unique_ptr&lt;Vector&lt;FloatPoint&gt;&gt; vertices, WindRule fillRule);
 46 
 47     const FloatPoint&amp; vertexAt(unsigned index) const { return (*m_vertices)[index]; }
 48     unsigned numberOfVertices() const { return m_vertices-&gt;size(); }
 49 
 50     WindRule fillRule() const { return m_fillRule; }
 51 
 52     const FloatPolygonEdge&amp; edgeAt(unsigned index) const { return m_edges[index]; }
 53     unsigned numberOfEdges() const { return m_edges.size(); }
 54 
 55     FloatRect boundingBox() const { return m_boundingBox; }
<span class="line-modified"> 56     Vector&lt;std::reference_wrapper&lt;const FloatPolygonEdge&gt;&gt; overlappingEdges(float minY, float maxY) const;</span>
 57     bool contains(const FloatPoint&amp;) const;
 58     bool isEmpty() const { return m_empty; }
 59 
 60 private:

 61     typedef PODIntervalTree&lt;float, FloatPolygonEdge*&gt; EdgeIntervalTree;
 62 
 63     bool containsNonZero(const FloatPoint&amp;) const;
 64     bool containsEvenOdd(const FloatPoint&amp;) const;
 65 
 66     std::unique_ptr&lt;Vector&lt;FloatPoint&gt;&gt; m_vertices;
 67     WindRule m_fillRule;
 68     FloatRect m_boundingBox;
 69     bool m_empty;
 70     Vector&lt;FloatPolygonEdge&gt; m_edges;
 71     EdgeIntervalTree m_edgeTree; // Each EdgeIntervalTree node stores minY, maxY, and a (&quot;UserData&quot;) pointer to a FloatPolygonEdge.
 72 
 73 };
 74 
 75 class VertexPair {
 76 public:
 77     virtual ~VertexPair() = default;
 78 
 79     virtual const FloatPoint&amp; vertex1() const = 0;
 80     virtual const FloatPoint&amp; vertex2() const = 0;
</pre>
<hr />
<pre>
103         return m_polygon-&gt;vertexAt(m_vertexIndex2);
104     }
105 
106     const FloatPolygonEdge&amp; previousEdge() const
107     {
108         ASSERT(m_polygon &amp;&amp; m_polygon-&gt;numberOfEdges() &gt; 1);
109         return m_polygon-&gt;edgeAt((m_edgeIndex + m_polygon-&gt;numberOfEdges() - 1) % m_polygon-&gt;numberOfEdges());
110     }
111 
112     const FloatPolygonEdge&amp; nextEdge() const
113     {
114         ASSERT(m_polygon &amp;&amp; m_polygon-&gt;numberOfEdges() &gt; 1);
115         return m_polygon-&gt;edgeAt((m_edgeIndex + 1) % m_polygon-&gt;numberOfEdges());
116     }
117 
118     const FloatPolygon* polygon() const { return m_polygon; }
119     unsigned vertexIndex1() const { return m_vertexIndex1; }
120     unsigned vertexIndex2() const { return m_vertexIndex2; }
121     unsigned edgeIndex() const { return m_edgeIndex; }
122 


123 private:
124     // Edge vertex index1 is less than index2, except the last edge, where index2 is 0. When a polygon edge
125     // is defined by 3 or more colinear vertices, index2 can be the index of the last colinear vertex.
126     unsigned m_vertexIndex1;
127     unsigned m_vertexIndex2;
128     unsigned m_edgeIndex;
129     const FloatPolygon* m_polygon;
130 };
131 


132 #ifndef NDEBUG
<span class="line-modified">133 TextStream&amp; operator&lt;&lt;(TextStream&amp;, const FloatPolygonEdge&amp;);</span>









134 #endif
<span class="line-added">135 </span>
<span class="line-added">136 } // namespace WebCore</span>
</pre>
</td>
</tr>
</table>
<center><a href="FloatPolygon.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FloatRoundedRect.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>