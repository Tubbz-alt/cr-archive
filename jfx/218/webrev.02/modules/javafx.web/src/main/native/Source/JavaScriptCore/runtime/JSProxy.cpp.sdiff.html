<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/JSProxy.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="JSPropertyNameEnumerator.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="JSProxy.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/JSProxy.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 38 void JSProxy::visitChildren(JSCell* cell, SlotVisitor&amp; visitor)
 39 {
 40     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(cell);
 41     ASSERT_GC_OBJECT_INHERITS(thisObject, info());
 42     Base::visitChildren(thisObject, visitor);
 43     visitor.append(thisObject-&gt;m_target);
 44 }
 45 
 46 void JSProxy::setTarget(VM&amp; vm, JSGlobalObject* globalObject)
 47 {
 48     m_target.set(vm, this, globalObject);
 49     setPrototypeDirect(vm, globalObject-&gt;getPrototypeDirect(vm));
 50 }
 51 
 52 String JSProxy::className(const JSObject* object, VM&amp; vm)
 53 {
 54     const JSProxy* thisObject = jsCast&lt;const JSProxy*&gt;(object);
 55     return thisObject-&gt;target()-&gt;methodTable(vm)-&gt;className(thisObject-&gt;target(), vm);
 56 }
 57 
<span class="line-modified"> 58 String JSProxy::toStringName(const JSObject* object, ExecState* exec)</span>
 59 {
 60     const JSProxy* thisObject = jsCast&lt;const JSProxy*&gt;(object);
<span class="line-modified"> 61     return thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;toStringName(thisObject-&gt;target(), exec);</span>
 62 }
 63 
<span class="line-modified"> 64 bool JSProxy::getOwnPropertySlot(JSObject* object, ExecState* exec, PropertyName propertyName, PropertySlot&amp; slot)</span>
 65 {
 66     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified"> 67     return thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;getOwnPropertySlot(thisObject-&gt;target(), exec, propertyName, slot);</span>
 68 }
 69 
<span class="line-modified"> 70 bool JSProxy::getOwnPropertySlotByIndex(JSObject* object, ExecState* exec, unsigned propertyName, PropertySlot&amp; slot)</span>
 71 {
 72     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified"> 73     return thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;getOwnPropertySlotByIndex(thisObject-&gt;target(), exec, propertyName, slot);</span>
 74 }
 75 
<span class="line-modified"> 76 bool JSProxy::put(JSCell* cell, ExecState* exec, PropertyName propertyName, JSValue value, PutPropertySlot&amp; slot)</span>
 77 {
 78     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(cell);
<span class="line-modified"> 79     return thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;put(thisObject-&gt;target(), exec, propertyName, value, slot);</span>
 80 }
 81 
<span class="line-modified"> 82 bool JSProxy::putByIndex(JSCell* cell, ExecState* exec, unsigned propertyName, JSValue value, bool shouldThrow)</span>
 83 {
 84     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(cell);
<span class="line-modified"> 85     return thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;putByIndex(thisObject-&gt;target(), exec, propertyName, value, shouldThrow);</span>
 86 }
 87 
<span class="line-modified"> 88 bool JSProxy::defineOwnProperty(JSObject* object, ExecState* exec, PropertyName propertyName, const PropertyDescriptor&amp; descriptor, bool shouldThrow)</span>
 89 {
 90     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified"> 91     return thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;defineOwnProperty(thisObject-&gt;target(), exec, propertyName, descriptor, shouldThrow);</span>
 92 }
 93 
<span class="line-modified"> 94 bool JSProxy::deleteProperty(JSCell* cell, ExecState* exec, PropertyName propertyName)</span>
 95 {
 96     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(cell);
<span class="line-modified"> 97     return thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;deleteProperty(thisObject-&gt;target(), exec, propertyName);</span>
 98 }
 99 
<span class="line-modified">100 bool JSProxy::isExtensible(JSObject* object, ExecState* exec)</span>
101 {
102     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified">103     return thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;isExtensible(thisObject-&gt;target(), exec);</span>
104 }
105 
<span class="line-modified">106 bool JSProxy::preventExtensions(JSObject* object, ExecState* exec)</span>
107 {
108     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified">109     return thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;preventExtensions(thisObject-&gt;target(), exec);</span>
110 }
111 
<span class="line-modified">112 bool JSProxy::deletePropertyByIndex(JSCell* cell, ExecState* exec, unsigned propertyName)</span>
113 {
114     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(cell);
<span class="line-modified">115     return thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;deletePropertyByIndex(thisObject-&gt;target(), exec, propertyName);</span>
116 }
117 
<span class="line-modified">118 void JSProxy::getPropertyNames(JSObject* object, ExecState* exec, PropertyNameArray&amp; propertyNames, EnumerationMode mode)</span>
119 {
120     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified">121     thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;getPropertyNames(thisObject-&gt;target(), exec, propertyNames, mode);</span>
122 }
123 
<span class="line-modified">124 uint32_t JSProxy::getEnumerableLength(ExecState* exec, JSObject* object)</span>
125 {
126     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified">127     return thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;getEnumerableLength(exec, thisObject-&gt;target());</span>
128 }
129 
<span class="line-modified">130 void JSProxy::getStructurePropertyNames(JSObject*, ExecState*, PropertyNameArray&amp;, EnumerationMode)</span>
131 {
132     // Skip the structure loop, since it is invalid for proxies.
133 }
134 
<span class="line-modified">135 void JSProxy::getGenericPropertyNames(JSObject* object, ExecState* exec, PropertyNameArray&amp; propertyNames, EnumerationMode mode)</span>
136 {
137     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
138     // Get *all* of the property names, not just the generic ones, since we skipped the structure
139     // ones above.
<span class="line-modified">140     thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;getPropertyNames(thisObject-&gt;target(), exec, propertyNames, mode);</span>
141 }
142 
<span class="line-modified">143 void JSProxy::getOwnPropertyNames(JSObject* object, ExecState* exec, PropertyNameArray&amp; propertyNames, EnumerationMode mode)</span>
144 {
145     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified">146     thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;getOwnPropertyNames(thisObject-&gt;target(), exec, propertyNames, mode);</span>
147 }
148 
<span class="line-modified">149 bool JSProxy::setPrototype(JSObject* object, ExecState* exec, JSValue prototype, bool shouldThrowIfCantSet)</span>
150 {
151     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified">152     return thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;setPrototype(thisObject-&gt;target(), exec, prototype, shouldThrowIfCantSet);</span>
153 }
154 
<span class="line-modified">155 JSValue JSProxy::getPrototype(JSObject* object, ExecState* exec)</span>
156 {
157     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified">158     return thisObject-&gt;target()-&gt;methodTable(exec-&gt;vm())-&gt;getPrototype(thisObject-&gt;target(), exec);</span>
159 }
160 
161 } // namespace JSC
</pre>
</td>
<td>
<hr />
<pre>
 38 void JSProxy::visitChildren(JSCell* cell, SlotVisitor&amp; visitor)
 39 {
 40     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(cell);
 41     ASSERT_GC_OBJECT_INHERITS(thisObject, info());
 42     Base::visitChildren(thisObject, visitor);
 43     visitor.append(thisObject-&gt;m_target);
 44 }
 45 
 46 void JSProxy::setTarget(VM&amp; vm, JSGlobalObject* globalObject)
 47 {
 48     m_target.set(vm, this, globalObject);
 49     setPrototypeDirect(vm, globalObject-&gt;getPrototypeDirect(vm));
 50 }
 51 
 52 String JSProxy::className(const JSObject* object, VM&amp; vm)
 53 {
 54     const JSProxy* thisObject = jsCast&lt;const JSProxy*&gt;(object);
 55     return thisObject-&gt;target()-&gt;methodTable(vm)-&gt;className(thisObject-&gt;target(), vm);
 56 }
 57 
<span class="line-modified"> 58 String JSProxy::toStringName(const JSObject* object, JSGlobalObject* globalObject)</span>
 59 {
 60     const JSProxy* thisObject = jsCast&lt;const JSProxy*&gt;(object);
<span class="line-modified"> 61     return thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;toStringName(thisObject-&gt;target(), globalObject);</span>
 62 }
 63 
<span class="line-modified"> 64 bool JSProxy::getOwnPropertySlot(JSObject* object, JSGlobalObject* globalObject, PropertyName propertyName, PropertySlot&amp; slot)</span>
 65 {
 66     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified"> 67     return thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;getOwnPropertySlot(thisObject-&gt;target(), globalObject, propertyName, slot);</span>
 68 }
 69 
<span class="line-modified"> 70 bool JSProxy::getOwnPropertySlotByIndex(JSObject* object, JSGlobalObject* globalObject, unsigned propertyName, PropertySlot&amp; slot)</span>
 71 {
 72     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified"> 73     return thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;getOwnPropertySlotByIndex(thisObject-&gt;target(), globalObject, propertyName, slot);</span>
 74 }
 75 
<span class="line-modified"> 76 bool JSProxy::put(JSCell* cell, JSGlobalObject* globalObject, PropertyName propertyName, JSValue value, PutPropertySlot&amp; slot)</span>
 77 {
 78     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(cell);
<span class="line-modified"> 79     return thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;put(thisObject-&gt;target(), globalObject, propertyName, value, slot);</span>
 80 }
 81 
<span class="line-modified"> 82 bool JSProxy::putByIndex(JSCell* cell, JSGlobalObject* globalObject, unsigned propertyName, JSValue value, bool shouldThrow)</span>
 83 {
 84     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(cell);
<span class="line-modified"> 85     return thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;putByIndex(thisObject-&gt;target(), globalObject, propertyName, value, shouldThrow);</span>
 86 }
 87 
<span class="line-modified"> 88 bool JSProxy::defineOwnProperty(JSObject* object, JSGlobalObject* globalObject, PropertyName propertyName, const PropertyDescriptor&amp; descriptor, bool shouldThrow)</span>
 89 {
 90     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified"> 91     return thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;defineOwnProperty(thisObject-&gt;target(), globalObject, propertyName, descriptor, shouldThrow);</span>
 92 }
 93 
<span class="line-modified"> 94 bool JSProxy::deleteProperty(JSCell* cell, JSGlobalObject* globalObject, PropertyName propertyName)</span>
 95 {
 96     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(cell);
<span class="line-modified"> 97     return thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;deleteProperty(thisObject-&gt;target(), globalObject, propertyName);</span>
 98 }
 99 
<span class="line-modified">100 bool JSProxy::isExtensible(JSObject* object, JSGlobalObject* globalObject)</span>
101 {
102     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified">103     return thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;isExtensible(thisObject-&gt;target(), globalObject);</span>
104 }
105 
<span class="line-modified">106 bool JSProxy::preventExtensions(JSObject* object, JSGlobalObject* globalObject)</span>
107 {
108     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified">109     return thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;preventExtensions(thisObject-&gt;target(), globalObject);</span>
110 }
111 
<span class="line-modified">112 bool JSProxy::deletePropertyByIndex(JSCell* cell, JSGlobalObject* globalObject, unsigned propertyName)</span>
113 {
114     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(cell);
<span class="line-modified">115     return thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;deletePropertyByIndex(thisObject-&gt;target(), globalObject, propertyName);</span>
116 }
117 
<span class="line-modified">118 void JSProxy::getPropertyNames(JSObject* object, JSGlobalObject* globalObject, PropertyNameArray&amp; propertyNames, EnumerationMode mode)</span>
119 {
120     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified">121     thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;getPropertyNames(thisObject-&gt;target(), globalObject, propertyNames, mode);</span>
122 }
123 
<span class="line-modified">124 uint32_t JSProxy::getEnumerableLength(JSGlobalObject* globalObject, JSObject* object)</span>
125 {
126     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified">127     return thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;getEnumerableLength(globalObject, thisObject-&gt;target());</span>
128 }
129 
<span class="line-modified">130 void JSProxy::getStructurePropertyNames(JSObject*, JSGlobalObject*, PropertyNameArray&amp;, EnumerationMode)</span>
131 {
132     // Skip the structure loop, since it is invalid for proxies.
133 }
134 
<span class="line-modified">135 void JSProxy::getGenericPropertyNames(JSObject* object, JSGlobalObject* globalObject, PropertyNameArray&amp; propertyNames, EnumerationMode mode)</span>
136 {
137     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
138     // Get *all* of the property names, not just the generic ones, since we skipped the structure
139     // ones above.
<span class="line-modified">140     thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;getPropertyNames(thisObject-&gt;target(), globalObject, propertyNames, mode);</span>
141 }
142 
<span class="line-modified">143 void JSProxy::getOwnPropertyNames(JSObject* object, JSGlobalObject* globalObject, PropertyNameArray&amp; propertyNames, EnumerationMode mode)</span>
144 {
145     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified">146     thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;getOwnPropertyNames(thisObject-&gt;target(), globalObject, propertyNames, mode);</span>
147 }
148 
<span class="line-modified">149 bool JSProxy::setPrototype(JSObject* object, JSGlobalObject* globalObject, JSValue prototype, bool shouldThrowIfCantSet)</span>
150 {
151     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified">152     return thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;setPrototype(thisObject-&gt;target(), globalObject, prototype, shouldThrowIfCantSet);</span>
153 }
154 
<span class="line-modified">155 JSValue JSProxy::getPrototype(JSObject* object, JSGlobalObject* globalObject)</span>
156 {
157     JSProxy* thisObject = jsCast&lt;JSProxy*&gt;(object);
<span class="line-modified">158     return thisObject-&gt;target()-&gt;methodTable(globalObject-&gt;vm())-&gt;getPrototype(thisObject-&gt;target(), globalObject);</span>
159 }
160 
161 } // namespace JSC
</pre>
</td>
</tr>
</table>
<center><a href="JSPropertyNameEnumerator.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="JSProxy.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>