<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/ios/java/com/sun/javafx/scene/web/skin/HTMLEditorSkin.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../behavior/HTMLEditorBehavior.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../javafx/scene/web/HTMLEditor.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/ios/java/com/sun/javafx/scene/web/skin/HTMLEditorSkin.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2010, 2016, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2010, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 21,11 ***</span>
   * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
   * or visit www.oracle.com if you need additional information or have any
   * questions.
   */
  
<span class="line-modified">! package com.sun.javafx.scene.web.skin;</span>
  
  import java.util.ResourceBundle;
  import com.sun.javafx.scene.ParentHelper;
  import com.sun.javafx.application.PlatformImpl;
  import com.sun.javafx.scene.traversal.Algorithm;
<span class="line-new-header">--- 21,11 ---</span>
   * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
   * or visit www.oracle.com if you need additional information or have any
   * questions.
   */
  
<span class="line-modified">! package javafx.scene.web;</span>
  
  import java.util.ResourceBundle;
  import com.sun.javafx.scene.ParentHelper;
  import com.sun.javafx.application.PlatformImpl;
  import com.sun.javafx.scene.traversal.Algorithm;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 75,43 ***</span>
  import javafx.scene.control.skin.ColorPickerSkin;
  import com.sun.javafx.scene.control.skin.FXVK;
  import com.sun.javafx.scene.web.behavior.HTMLEditorBehavior;
  import com.sun.javafx.scene.traversal.TraversalEngine;
  import com.sun.javafx.scene.traversal.TraverseListener;
<span class="line-removed">- //import com.sun.webkit.WebPage;</span>
<span class="line-removed">- //import com.sun.webkit.event.WCFocusEvent;</span>
<span class="line-removed">- //import com.sun.javafx.webkit.Accessor;</span>
  
  import java.security.AccessController;
  import java.security.PrivilegedAction;
  
  import java.util.HashMap;
  import java.util.Locale;
  import java.util.Map;
  import javafx.scene.Scene;
  import javafx.scene.control.*;
  import javafx.scene.layout.*;
<span class="line-removed">- import com.sun.javafx.scene.control.skin.BehaviorSkinBase;</span>
  import javafx.collections.ListChangeListener;
  
  import static javafx.geometry.NodeOrientation.*;
  
  /**
   * HTML editor skin.
   */
<span class="line-modified">! public class HTMLEditorSkin extends BehaviorSkinBase&lt;HTMLEditor, HTMLEditorBehavior&gt; implements TraverseListener {</span>
      private GridPane gridPane;
  
      private ToolBar toolbar1;
      private ToolBar toolbar2;
  
      private Button cutButton;
      private Button copyButton;
      private Button pasteButton;
  
<span class="line-removed">- //    private Button undoButton;</span>
<span class="line-removed">- //    private Button redoButton;</span>
  
      private Button insertHorizontalRuleButton;
  
      private ToggleGroup alignmentToggleGroup;
      private ToggleButton alignLeftButton;
<span class="line-new-header">--- 75,40 ---</span>
  import javafx.scene.control.skin.ColorPickerSkin;
  import com.sun.javafx.scene.control.skin.FXVK;
  import com.sun.javafx.scene.web.behavior.HTMLEditorBehavior;
  import com.sun.javafx.scene.traversal.TraversalEngine;
  import com.sun.javafx.scene.traversal.TraverseListener;
  
  import java.security.AccessController;
  import java.security.PrivilegedAction;
  
  import java.util.HashMap;
  import java.util.Locale;
  import java.util.Map;
  import javafx.scene.Scene;
  import javafx.scene.control.*;
  import javafx.scene.layout.*;
  import javafx.collections.ListChangeListener;
  
  import static javafx.geometry.NodeOrientation.*;
  
<span class="line-added">+ import static javafx.scene.web.HTMLEditorSkin.Command.*;</span>
<span class="line-added">+ </span>
<span class="line-added">+ </span>
  /**
   * HTML editor skin.
   */
<span class="line-modified">! public class HTMLEditorSkin extends SkinBase&lt;HTMLEditor&gt; implements TraverseListener {</span>
      private GridPane gridPane;
  
      private ToolBar toolbar1;
      private ToolBar toolbar2;
  
      private Button cutButton;
      private Button copyButton;
      private Button pasteButton;
  
  
      private Button insertHorizontalRuleButton;
  
      private ToggleGroup alignmentToggleGroup;
      private ToggleButton alignLeftButton;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 142,11 ***</span>
  
      private ColorPicker fgColorButton;
      private ColorPicker bgColorButton;
  
      private WebView webView;
<span class="line-removed">- //    private WebPage webPage;</span>
  
      private static final String CUT_COMMAND = &quot;cut&quot;;
      private static final String COPY_COMMAND = &quot;copy&quot;;
      private static final String PASTE_COMMAND = &quot;paste&quot;;
  
<span class="line-new-header">--- 139,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 256,11 ***</span>
  //                }
  //            }
          }
      };
      public HTMLEditorSkin(HTMLEditor htmlEditor) {
<span class="line-modified">!         super(htmlEditor, new HTMLEditorBehavior(htmlEditor));</span>
  
          getChildren().clear();
  
          gridPane = new GridPane();
          gridPane.getStyleClass().add(&quot;grid&quot;);
<span class="line-new-header">--- 252,11 ---</span>
  //                }
  //            }
          }
      };
      public HTMLEditorSkin(HTMLEditor htmlEditor) {
<span class="line-modified">!         super(htmlEditor);</span>
  
          getChildren().clear();
  
          gridPane = new GridPane();
          gridPane.getStyleClass().add(&quot;grid&quot;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 762,18 ***</span>
          fgColorButton = new ColorPicker();
          fgColorButton.getStyleClass().add(&quot;html-editor-foreground&quot;);
          fgColorButton.setFocusTraversable(false);
          toolbar1.getItems().add(fgColorButton);
  
<span class="line-modified">!         fgColorButton.applyCss();</span>
<span class="line-modified">!         ColorPickerSkin fgColorPickerSkin = (ColorPickerSkin) fgColorButton.getSkin();</span>
<span class="line-modified">!         String fgIcon = AccessController.doPrivileged(new PrivilegedAction&lt;String&gt;() {</span>
<span class="line-modified">!             @Override public String run() {</span>
<span class="line-modified">!                 return HTMLEditorSkin.class.getResource(resources.getString(&quot;foregroundColorIcon&quot;)).toString();</span>
<span class="line-modified">!             }</span>
<span class="line-modified">!         });</span>
<span class="line-modified">!         ((StyleableProperty)fgColorPickerSkin.imageUrlProperty()).applyStyle(null,fgIcon);</span>
  
          fgColorButton.setValue(DEFAULT_FG_COLOR);
          fgColorButton.setTooltip(new Tooltip(resources.getString(&quot;foregroundColor&quot;)));
          fgColorButton.setOnAction(new EventHandler&lt;ActionEvent&gt;() {
              @Override public void handle(ActionEvent ev) {
<span class="line-new-header">--- 758,18 ---</span>
          fgColorButton = new ColorPicker();
          fgColorButton.getStyleClass().add(&quot;html-editor-foreground&quot;);
          fgColorButton.setFocusTraversable(false);
          toolbar1.getItems().add(fgColorButton);
  
<span class="line-modified">!         // fgColorButton.applyCss();</span>
<span class="line-modified">!         // ColorPickerSkin fgColorPickerSkin = (ColorPickerSkin) fgColorButton.getSkin();</span>
<span class="line-modified">!         // String fgIcon = AccessController.doPrivileged(new PrivilegedAction&lt;String&gt;() {</span>
<span class="line-modified">!             // @Override public String run() {</span>
<span class="line-modified">!                 // return HTMLEditorSkin.class.getResource(resources.getString(&quot;foregroundColorIcon&quot;)).toString();</span>
<span class="line-modified">!             // }</span>
<span class="line-modified">!         // });</span>
<span class="line-modified">!         // ((StyleableProperty)fgColorPickerSkin.imageUrlProperty()).applyStyle(null,fgIcon);</span>
  
          fgColorButton.setValue(DEFAULT_FG_COLOR);
          fgColorButton.setTooltip(new Tooltip(resources.getString(&quot;foregroundColor&quot;)));
          fgColorButton.setOnAction(new EventHandler&lt;ActionEvent&gt;() {
              @Override public void handle(ActionEvent ev) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 788,18 ***</span>
          bgColorButton = new ColorPicker();
          bgColorButton.getStyleClass().add(&quot;html-editor-background&quot;);
          bgColorButton.setFocusTraversable(false);
          toolbar1.getItems().add(bgColorButton);
  
<span class="line-modified">!         bgColorButton.applyCss();</span>
<span class="line-modified">!         ColorPickerSkin  bgColorPickerSkin = (ColorPickerSkin) bgColorButton.getSkin();</span>
<span class="line-modified">!         String bgIcon = AccessController.doPrivileged(new PrivilegedAction&lt;String&gt;() {</span>
<span class="line-modified">!             @Override public String run() {</span>
<span class="line-modified">!                 return HTMLEditorSkin.class.getResource(resources.getString(&quot;backgroundColorIcon&quot;)).toString();</span>
<span class="line-modified">!             }</span>
<span class="line-modified">!         });</span>
<span class="line-modified">!         ((StyleableProperty)bgColorPickerSkin.imageUrlProperty()).applyStyle(null,bgIcon);</span>
  
          bgColorButton.setValue(DEFAULT_BG_COLOR);
          bgColorButton.setTooltip(new Tooltip(resources.getString(&quot;backgroundColor&quot;)));
  
          bgColorButton.setOnAction(new EventHandler&lt;ActionEvent&gt;() {
<span class="line-new-header">--- 784,18 ---</span>
          bgColorButton = new ColorPicker();
          bgColorButton.getStyleClass().add(&quot;html-editor-background&quot;);
          bgColorButton.setFocusTraversable(false);
          toolbar1.getItems().add(bgColorButton);
  
<span class="line-modified">!         // bgColorButton.applyCss();</span>
<span class="line-modified">!         // ColorPickerSkin  bgColorPickerSkin = (ColorPickerSkin) bgColorButton.getSkin();</span>
<span class="line-modified">!         // String bgIcon = AccessController.doPrivileged(new PrivilegedAction&lt;String&gt;() {</span>
<span class="line-modified">!             // @Override public String run() {</span>
<span class="line-modified">!                 // return HTMLEditorSkin.class.getResource(resources.getString(&quot;backgroundColorIcon&quot;)).toString();</span>
<span class="line-modified">!             // }</span>
<span class="line-modified">!         // });</span>
<span class="line-modified">!         // ((StyleableProperty)bgColorPickerSkin.imageUrlProperty()).applyStyle(null,bgIcon);</span>
  
          bgColorButton.setValue(DEFAULT_BG_COLOR);
          bgColorButton.setTooltip(new Tooltip(resources.getString(&quot;backgroundColor&quot;)));
  
          bgColorButton.setOnAction(new EventHandler&lt;ActionEvent&gt;() {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1218,6 ***</span>
<span class="line-new-header">--- 1214,63 ---</span>
  
      private static final int FONT_FAMILY_MENUBUTTON_WIDTH = 150;
      private static final int FONT_FAMILY_MENU_WIDTH = 100;
      private static final int FONT_SIZE_MENUBUTTON_WIDTH = 80;
  
<span class="line-added">+     public void performCommand(final Command command) {</span>
<span class="line-added">+         switch (command) {</span>
<span class="line-added">+             case BOLD: boldButton.fire(); break;</span>
<span class="line-added">+             case ITALIC: italicButton.setSelected(!italicButton.isSelected()); break;</span>
<span class="line-added">+             case UNDERLINE: underlineButton.setSelected(!underlineButton.isSelected()); break;</span>
<span class="line-added">+         }</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     public enum Command {</span>
<span class="line-added">+         CUT(&quot;cut&quot;),</span>
<span class="line-added">+         COPY(&quot;copy&quot;),</span>
<span class="line-added">+         PASTE(&quot;paste&quot;),</span>
<span class="line-added">+ </span>
<span class="line-added">+         UNDO(&quot;undo&quot;),</span>
<span class="line-added">+         REDO(&quot;redo&quot;),</span>
<span class="line-added">+ </span>
<span class="line-added">+         INSERT_HORIZONTAL_RULE(&quot;inserthorizontalrule&quot;),</span>
<span class="line-added">+ </span>
<span class="line-added">+         ALIGN_LEFT(&quot;justifyleft&quot;),</span>
<span class="line-added">+         ALIGN_CENTER(&quot;justifycenter&quot;),</span>
<span class="line-added">+         ALIGN_RIGHT(&quot;justifyright&quot;),</span>
<span class="line-added">+         ALIGN_JUSTIFY(&quot;justifyfull&quot;),</span>
<span class="line-added">+ </span>
<span class="line-added">+         BULLETS(&quot;insertUnorderedList&quot;),</span>
<span class="line-added">+         NUMBERS(&quot;insertOrderedList&quot;),</span>
<span class="line-added">+ </span>
<span class="line-added">+         INDENT(&quot;indent&quot;),</span>
<span class="line-added">+         OUTDENT(&quot;outdent&quot;),</span>
<span class="line-added">+ </span>
<span class="line-added">+         FORMAT(&quot;formatblock&quot;),</span>
<span class="line-added">+         FONT_FAMILY(&quot;fontname&quot;),</span>
<span class="line-added">+         FONT_SIZE(&quot;fontsize&quot;),</span>
<span class="line-added">+ </span>
<span class="line-added">+         BOLD(&quot;bold&quot;),</span>
<span class="line-added">+         ITALIC(&quot;italic&quot;),</span>
<span class="line-added">+         UNDERLINE(&quot;underline&quot;),</span>
<span class="line-added">+         STRIKETHROUGH(&quot;strikethrough&quot;),</span>
<span class="line-added">+ </span>
<span class="line-added">+         FOREGROUND_COLOR(&quot;forecolor&quot;),</span>
<span class="line-added">+         BACKGROUND_COLOR(&quot;backcolor&quot;),</span>
<span class="line-added">+         STYLEWITHCSS(&quot;styleWithCSS&quot;),</span>
<span class="line-added">+ </span>
<span class="line-added">+         INSERT_NEW_LINE(&quot;insertnewline&quot;),</span>
<span class="line-added">+         INSERT_TAB(&quot;inserttab&quot;);</span>
<span class="line-added">+ </span>
<span class="line-added">+         private final String command;</span>
<span class="line-added">+ </span>
<span class="line-added">+         Command(String command) {</span>
<span class="line-added">+             this.command = command;</span>
<span class="line-added">+         }</span>
<span class="line-added">+ </span>
<span class="line-added">+         public String getCommand() {</span>
<span class="line-added">+             return command;</span>
<span class="line-added">+         }</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+ </span>
  }
</pre>
<center><a href="../behavior/HTMLEditorBehavior.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../javafx/scene/web/HTMLEditor.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>