<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.graphics/src/main/native-glass/ios/GlassPasteboard.m</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.graphics/src/main/native-glass/ios/GlassPasteboard.m</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
293  * Signature: (J)[[Ljava/lang/String;
294  */
295 JNIEXPORT jobjectArray JNICALL Java_com_sun_glass_ui_ios_IosPasteboard__1getUTFs
296 (JNIEnv *env, jobject jPasteboard, jlong jPtr)
297 {
298     LOG(@&quot;Java_com_sun_glass_ui_ios_IosPasteboard__1getUTFs&quot;);
299 
300     jobjectArray utfs = NULL;
301 
302     GLASS_ASSERT_MAIN_JAVA_THREAD(env);
303     GLASS_POOL_ENTER;
304     {
305         UIPasteboard *pasteboard = (UIPasteboard*)jlong_to_ptr(jPtr);
306 
307 #ifdef VERBOSE
308         DumpPasteboard(pasteboard);
309 #endif
310         NSArray *items = [pasteboard items];
311         if ([items count] &gt; 0)
312         {
<span class="line-modified">313             utfs = (*env)-&gt;NewObjectArray(env, [items count], (*env)-&gt;FindClass(env, &quot;java/lang/Object&quot;), NULL);</span>
314             for (int i=0; i&lt;[items count]; i++)
315             {
316                 NSDictionary *item = [items objectAtIndex:i];
317 
<span class="line-modified">318                 NSEnumerator *e = [item keyEnumerator];</span>
<span class="line-modified">319                 NSString *type;</span>
<span class="line-modified">320                 while ((type = [e nextObject])) {</span>
<span class="line-modified">321                     jobjectArray array = (*env)-&gt;NewObjectArray(env, 1, (*env)-&gt;FindClass(env, &quot;java/lang/String&quot;), NULL);</span>
<span class="line-modified">322                     (*env)-&gt;SetObjectArrayElement(env, array, 0, (*env)-&gt;NewStringUTF(env, [type UTF8String]));</span>
<span class="line-modified">323                     (*env)-&gt;SetObjectArrayElement(env, utfs, i, array);</span>




324                 }
325             }
326         }
327     }
328     GLASS_POOL_EXIT;
329     GLASS_CHECK_EXCEPTION(env);
330 
331     return utfs;
332 }
333 
334 /*
335  * Class:     com_sun_glass_ui_ios_IosPasteboard
336  * Method:    _getItemAsRawImage
337  * Signature: (JI)[B
338  */
339 JNIEXPORT jbyteArray JNICALL Java_com_sun_glass_ui_ios_IosPasteboard__1getItemAsRawImage
340 (JNIEnv *env, jobject jPasteboard, jlong jPtr, jint jIndex)
341 {
342     LOG(@&quot;Java_com_sun_glass_ui_ios_IosPasteboard__1getItemAsRawImage&quot;);
343 
</pre>
</td>
<td>
<hr />
<pre>
293  * Signature: (J)[[Ljava/lang/String;
294  */
295 JNIEXPORT jobjectArray JNICALL Java_com_sun_glass_ui_ios_IosPasteboard__1getUTFs
296 (JNIEnv *env, jobject jPasteboard, jlong jPtr)
297 {
298     LOG(@&quot;Java_com_sun_glass_ui_ios_IosPasteboard__1getUTFs&quot;);
299 
300     jobjectArray utfs = NULL;
301 
302     GLASS_ASSERT_MAIN_JAVA_THREAD(env);
303     GLASS_POOL_ENTER;
304     {
305         UIPasteboard *pasteboard = (UIPasteboard*)jlong_to_ptr(jPtr);
306 
307 #ifdef VERBOSE
308         DumpPasteboard(pasteboard);
309 #endif
310         NSArray *items = [pasteboard items];
311         if ([items count] &gt; 0)
312         {
<span class="line-modified">313             utfs = (*env)-&gt;NewObjectArray(env, (jsize)[items count], (*env)-&gt;FindClass(env, &quot;[Ljava/lang/String;&quot;), NULL);</span>
314             for (int i=0; i&lt;[items count]; i++)
315             {
316                 NSDictionary *item = [items objectAtIndex:i];
317 
<span class="line-modified">318                 NSArray *keys = [item allKeys];</span>
<span class="line-modified">319                 if ([keys count] &gt; 0)</span>
<span class="line-modified">320                 {</span>
<span class="line-modified">321                     jobjectArray array = (*env)-&gt;NewObjectArray(env, (jsize)[keys count], (*env)-&gt;FindClass(env, &quot;java/lang/String&quot;), NULL);</span>
<span class="line-modified">322                     for (int j=0; j&lt;[keys count]; j++)</span>
<span class="line-modified">323                     {</span>
<span class="line-added">324                         NSString *type = [keys objectAtIndex:j];</span>
<span class="line-added">325                         (*env)-&gt;SetObjectArrayElement(env, array, j, (*env)-&gt;NewStringUTF(env, [type UTF8String]));</span>
<span class="line-added">326                     }</span>
<span class="line-added">327                     (*env)-&gt;SetObjectArrayElement(env, utfs, (jsize)i, array);</span>
328                 }
329             }
330         }
331     }
332     GLASS_POOL_EXIT;
333     GLASS_CHECK_EXCEPTION(env);
334 
335     return utfs;
336 }
337 
338 /*
339  * Class:     com_sun_glass_ui_ios_IosPasteboard
340  * Method:    _getItemAsRawImage
341  * Signature: (JI)[B
342  */
343 JNIEXPORT jbyteArray JNICALL Java_com_sun_glass_ui_ios_IosPasteboard__1getItemAsRawImage
344 (JNIEnv *env, jobject jPasteboard, jlong jPtr, jint jIndex)
345 {
346     LOG(@&quot;Java_com_sun_glass_ui_ios_IosPasteboard__1getItemAsRawImage&quot;);
347 
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>