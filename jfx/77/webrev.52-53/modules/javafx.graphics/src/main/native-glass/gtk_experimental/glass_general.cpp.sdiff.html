<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.graphics/src/main/native-glass/gtk_experimental/glass_general.cpp</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../buildSrc/linux.gradle.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="glass_screen.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.graphics/src/main/native-glass/gtk_experimental/glass_general.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
516 
517 gint glass_gdk_visual_get_depth (GdkVisual * visual)
518 {
519     // gdk_visual_get_depth is GTK 2.2 +
520     return gdk_visual_get_depth(visual);
521 }
522 
523 GdkScreen * glass_gdk_window_get_screen(GdkWindow * gdkWindow)
524 {
525 #ifdef GLASS_GTK3
526         GdkVisual * gdkVisual = gdk_window_get_visual(gdkWindow);
527         return gdk_visual_get_screen(gdkVisual);
528 #else
529         return gdk_window_get_screen(gdkWindow);
530 #endif
531 }
532 
533 void
534 glass_gdk_master_pointer_get_position(gint *x, gint *y) {
535 #ifdef GLASS_GTK3
<span class="line-removed">536 #if GTK_CHECK_VERSION(3, 20, 0)</span>
<span class="line-removed">537         gdk_device_get_position(gdk_seat_get_pointer(gdk_display_get_default_seat(gdk_display_get_default())),</span>
<span class="line-removed">538                                 NULL, x, y);</span>
<span class="line-removed">539 #else</span>
540         gdk_device_get_position(
541             gdk_device_manager_get_client_pointer(
542                 gdk_display_get_device_manager(gdk_display_get_default())), NULL , x, y);
<span class="line-removed">543 #endif</span>
544 #else
545         gdk_display_get_pointer(gdk_display_get_default(), NULL, x, y, NULL);
546 #endif
547 }
548 
549 GdkWindow *
550 glass_gdk_device_get_window_at_position(GdkDevice *device, gint *x, gint *y) {
551 #ifdef GLASS_GTK3
552         return gdk_device_get_window_at_position(device, x, y);
553 #else
554         (void) device;
555         return gdk_display_get_window_at_pointer(gdk_display_get_default(), x, y);
556 #endif
557 }
558 
559 void
560 glass_gtk_configure_transparency_and_realize(GtkWidget *window,
561                                              gboolean transparent) {
562         gboolean isTransparent = glass_configure_window_transparency(window, transparent);
563         gtk_widget_realize(window);
</pre>
<hr />
<pre>
585     if (colormap
586             &amp;&amp; gdk_display_supports_composite(default_display)
587             &amp;&amp; gdk_screen_is_composited(default_screen)) {
588         gtk_widget_set_colormap(window, colormap);
589         return TRUE;
590     }
591 #endif
592 
593     return FALSE;
594 }
595 
596 void
597 glass_gdk_window_get_size(GdkWindow *window, gint *w, gint *h) {
598     *w = gdk_window_get_width(window);
599     *h = gdk_window_get_height(window);
600 }
601 
602 void
603 glass_gdk_display_get_pointer(GdkDisplay* display, gint* x, gint *y) {
604 #ifdef GLASS_GTK3
<span class="line-removed">605 #if GTK_CHECK_VERSION(3, 20, 0)</span>
<span class="line-removed">606         gdk_device_get_position(gdk_seat_get_pointer(gdk_display_get_default_seat(display)), NULL, x, y);</span>
<span class="line-removed">607 #else</span>
608         gdk_device_get_position(
609             gdk_device_manager_get_client_pointer(
610                 gdk_display_get_device_manager(display)), NULL , x, y);
<span class="line-removed">611 #endif</span>
612 #else
613         gdk_display_get_pointer(display, NULL, x, y, NULL);
614 #endif
615 }
616 
617 
618 const guchar*
619 glass_gtk_selection_data_get_data_with_length(
620         GtkSelectionData * selectionData,
621         gint * length) {
622     if (selectionData == NULL) {
623         return NULL;
624     }
625 
626     *length = gtk_selection_data_get_length(selectionData);
627     return gtk_selection_data_get_data(selectionData);
628 }
629 
630 static void
631 configure_opaque_window(GtkWidget *window) {
</pre>
</td>
<td>
<hr />
<pre>
516 
517 gint glass_gdk_visual_get_depth (GdkVisual * visual)
518 {
519     // gdk_visual_get_depth is GTK 2.2 +
520     return gdk_visual_get_depth(visual);
521 }
522 
523 GdkScreen * glass_gdk_window_get_screen(GdkWindow * gdkWindow)
524 {
525 #ifdef GLASS_GTK3
526         GdkVisual * gdkVisual = gdk_window_get_visual(gdkWindow);
527         return gdk_visual_get_screen(gdkVisual);
528 #else
529         return gdk_window_get_screen(gdkWindow);
530 #endif
531 }
532 
533 void
534 glass_gdk_master_pointer_get_position(gint *x, gint *y) {
535 #ifdef GLASS_GTK3




536         gdk_device_get_position(
537             gdk_device_manager_get_client_pointer(
538                 gdk_display_get_device_manager(gdk_display_get_default())), NULL , x, y);

539 #else
540         gdk_display_get_pointer(gdk_display_get_default(), NULL, x, y, NULL);
541 #endif
542 }
543 
544 GdkWindow *
545 glass_gdk_device_get_window_at_position(GdkDevice *device, gint *x, gint *y) {
546 #ifdef GLASS_GTK3
547         return gdk_device_get_window_at_position(device, x, y);
548 #else
549         (void) device;
550         return gdk_display_get_window_at_pointer(gdk_display_get_default(), x, y);
551 #endif
552 }
553 
554 void
555 glass_gtk_configure_transparency_and_realize(GtkWidget *window,
556                                              gboolean transparent) {
557         gboolean isTransparent = glass_configure_window_transparency(window, transparent);
558         gtk_widget_realize(window);
</pre>
<hr />
<pre>
580     if (colormap
581             &amp;&amp; gdk_display_supports_composite(default_display)
582             &amp;&amp; gdk_screen_is_composited(default_screen)) {
583         gtk_widget_set_colormap(window, colormap);
584         return TRUE;
585     }
586 #endif
587 
588     return FALSE;
589 }
590 
591 void
592 glass_gdk_window_get_size(GdkWindow *window, gint *w, gint *h) {
593     *w = gdk_window_get_width(window);
594     *h = gdk_window_get_height(window);
595 }
596 
597 void
598 glass_gdk_display_get_pointer(GdkDisplay* display, gint* x, gint *y) {
599 #ifdef GLASS_GTK3



600         gdk_device_get_position(
601             gdk_device_manager_get_client_pointer(
602                 gdk_display_get_device_manager(display)), NULL , x, y);

603 #else
604         gdk_display_get_pointer(display, NULL, x, y, NULL);
605 #endif
606 }
607 
608 
609 const guchar*
610 glass_gtk_selection_data_get_data_with_length(
611         GtkSelectionData * selectionData,
612         gint * length) {
613     if (selectionData == NULL) {
614         return NULL;
615     }
616 
617     *length = gtk_selection_data_get_length(selectionData);
618     return gtk_selection_data_get_data(selectionData);
619 }
620 
621 static void
622 configure_opaque_window(GtkWidget *window) {
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../buildSrc/linux.gradle.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="glass_screen.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>