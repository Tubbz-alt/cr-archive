<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.graphics/src/main/native-glass/gtk/glass_window.cpp</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../index.html" target="_top">index</a> <a href="glass_window.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.graphics/src/main/native-glass/gtk/glass_window.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
1154         mainEnv-&gt;CallVoidMethod(jwindow, jWindowNotifyFocusUngrab);
1155         CHECK_JNI_EXCEPTION(mainEnv)
1156     }
1157 }
1158 
1159 void WindowContext::restack(bool restack) {
1160     gdk_window_restack(gdk_window, NULL, restack ? TRUE : FALSE);
1161 }
1162 
1163 void WindowContext::request_focus() {
1164     //JDK-8212060: Window show and then move glitch.
1165     //The WindowContext::set_visible will take care of showing the window.
1166     //The below code will only handle later request_focus.
1167     if (is_visible()) {
1168         gtk_window_present(GTK_WINDOW(gtk_widget));
1169     }
1170 }
1171 
1172 void WindowContext::enter_fullscreen() {
1173     is_fullscreen = TRUE;








1174     gtk_window_fullscreen(GTK_WINDOW(gtk_widget));
1175 }
1176 
1177 void WindowContext::exit_fullscreen() {
1178     is_fullscreen = FALSE;
1179     gtk_window_unfullscreen(GTK_WINDOW(gtk_widget));





1180 }
1181 
1182 // Applied to a temporary full screen window to prevent sending events to Java
1183 void WindowContext::detach_from_java() {
1184     if (jview) {
1185         mainEnv-&gt;DeleteGlobalRef(jview);
1186         jview = NULL;
1187     }
1188     if (jwindow) {
1189         mainEnv-&gt;DeleteGlobalRef(jwindow);
1190         jwindow = NULL;
1191     }
1192 }
1193 
1194 void WindowContext::increment_events_counter() {
1195     ++events_processing_cnt;
1196 }
1197 
1198 void WindowContext::decrement_events_counter() {
1199     --events_processing_cnt;
</pre>
</td>
<td>
<hr />
<pre>
1154         mainEnv-&gt;CallVoidMethod(jwindow, jWindowNotifyFocusUngrab);
1155         CHECK_JNI_EXCEPTION(mainEnv)
1156     }
1157 }
1158 
1159 void WindowContext::restack(bool restack) {
1160     gdk_window_restack(gdk_window, NULL, restack ? TRUE : FALSE);
1161 }
1162 
1163 void WindowContext::request_focus() {
1164     //JDK-8212060: Window show and then move glitch.
1165     //The WindowContext::set_visible will take care of showing the window.
1166     //The below code will only handle later request_focus.
1167     if (is_visible()) {
1168         gtk_window_present(GTK_WINDOW(gtk_widget));
1169     }
1170 }
1171 
1172 void WindowContext::enter_fullscreen() {
1173     is_fullscreen = TRUE;
<span class="line-added">1174 </span>
<span class="line-added">1175 // workaround gtk+ bug</span>
<span class="line-added">1176 #if !GTK_CHECK_VERSION(3, 22, 0)</span>
<span class="line-added">1177     // this is content size</span>
<span class="line-added">1178     geometry.unfullscreen_w = geometry.current_cw;</span>
<span class="line-added">1179     geometry.unfullscreen_h = geometry.current_ch;</span>
<span class="line-added">1180 #endif</span>
<span class="line-added">1181 </span>
1182     gtk_window_fullscreen(GTK_WINDOW(gtk_widget));
1183 }
1184 
1185 void WindowContext::exit_fullscreen() {
1186     is_fullscreen = FALSE;
1187     gtk_window_unfullscreen(GTK_WINDOW(gtk_widget));
<span class="line-added">1188 </span>
<span class="line-added">1189 // It was a Gtk+ that got fixed</span>
<span class="line-added">1190 #if !GTK_CHECK_VERSION(3, 22, 0)</span>
<span class="line-added">1191     set_bounds(0, 0, false, false, -1, -1, geometry.unfullscreen_w, geometry.unfullscreen_h);</span>
<span class="line-added">1192 #endif</span>
1193 }
1194 
1195 // Applied to a temporary full screen window to prevent sending events to Java
1196 void WindowContext::detach_from_java() {
1197     if (jview) {
1198         mainEnv-&gt;DeleteGlobalRef(jview);
1199         jview = NULL;
1200     }
1201     if (jwindow) {
1202         mainEnv-&gt;DeleteGlobalRef(jwindow);
1203         jwindow = NULL;
1204     }
1205 }
1206 
1207 void WindowContext::increment_events_counter() {
1208     ++events_processing_cnt;
1209 }
1210 
1211 void WindowContext::decrement_events_counter() {
1212     --events_processing_cnt;
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../index.html" target="_top">index</a> <a href="glass_window.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>