<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.graphics/src/main/native-glass/gtk_new/glass_window.cpp</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="glass_screen.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.graphics/src/main/native-glass/gtk_new/glass_window.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 176         screen(_screen),
 177         frame_type(_frame_type),
 178         window_type(type),
 179         owner(_owner),
 180         jview(NULL),
 181         map_received(false),
 182         visible_received(false),
 183         on_top(false),
 184         is_fullscreen(false),
 185         is_iconified(false),
 186         is_maximized(false),
 187         is_mouse_entered(false),
 188         can_be_deleted(false),
 189         events_processing_cnt(0),
 190         grab_pointer(NULL) {
 191 
 192     jwindow = mainEnv-&gt;NewGlobalRef(_jwindow);
 193 
 194     gtk_widget = gtk_window_new(type == POPUP ? GTK_WINDOW_POPUP : GTK_WINDOW_TOPLEVEL);
 195 
<span class="line-modified"> 196     if (gchar * app_name = get_application_name()) {</span>
<span class="line-modified"> 197         gtk_window_set_wmclass(GTK_WINDOW(gtk_widget), app_name, app_name);</span>
<span class="line-modified"> 198         g_free(app_name);</span>
<span class="line-modified"> 199     }</span>

 200 
 201     if (owner) {
 202         owner-&gt;add_child(this);
 203         if (on_top_inherited()) {
 204             gtk_window_set_keep_above(GTK_WINDOW(gtk_widget), TRUE);
 205         }
 206     }
 207 
 208     if (type == UTILITY) {
 209         gtk_window_set_type_hint(GTK_WINDOW(gtk_widget), GDK_WINDOW_TYPE_HINT_UTILITY);
 210     }
 211 
 212     glong xvisualID = (glong) mainEnv-&gt;GetStaticLongField(jApplicationCls, jApplicationVisualID);
 213 
 214     if (xvisualID != 0) {
 215         GdkVisual *visual = gdk_x11_screen_lookup_visual(gdk_screen_get_default(), xvisualID);
 216         glass_gtk_window_configure_from_visual(gtk_widget, visual);
 217     }
 218 
 219     gtk_widget_set_events(gtk_widget, GDK_ALL_EVENTS_MASK);
</pre>
<hr />
<pre>
1044 
1045     size_position_notify(size_changed, pos_changed);
1046 }
1047 
1048 void WindowContext::set_resizable(bool res) {
1049     if (res != geometry.resizable) {
1050         geometry.resizable = res;
1051         apply_geometry();
1052     }
1053 }
1054 
1055 void WindowContext::set_focusable(bool focusable) {
1056     gtk_window_set_accept_focus(GTK_WINDOW(gtk_widget), focusable ? TRUE : FALSE);
1057 }
1058 
1059 void WindowContext::set_title(const char *title) {
1060     gtk_window_set_title(GTK_WINDOW(gtk_widget), title);
1061 }
1062 
1063 void WindowContext::set_alpha(double alpha) {
<span class="line-modified">1064     gtk_window_set_opacity(GTK_WINDOW(gtk_widget), (gdouble) alpha);</span>




1065 }
1066 
1067 void WindowContext::set_enabled(bool enabled) {
1068     if (enabled != geometry.enabled) {
1069         gtk_widget_set_sensitive(gtk_widget, enabled);
1070         geometry.enabled = enabled;
1071         apply_geometry();
1072     }
1073 }
1074 
1075 void WindowContext::set_minimum_size(int w, int h) {
1076     gboolean changed = geometry.minw != w || geometry.minh != h;
1077 
1078     if (!changed) {
1079         return;
1080     }
1081 
1082     geometry.minw = w;
1083     geometry.minh = h;
1084 
</pre>
</td>
<td>
<hr />
<pre>
 176         screen(_screen),
 177         frame_type(_frame_type),
 178         window_type(type),
 179         owner(_owner),
 180         jview(NULL),
 181         map_received(false),
 182         visible_received(false),
 183         on_top(false),
 184         is_fullscreen(false),
 185         is_iconified(false),
 186         is_maximized(false),
 187         is_mouse_entered(false),
 188         can_be_deleted(false),
 189         events_processing_cnt(0),
 190         grab_pointer(NULL) {
 191 
 192     jwindow = mainEnv-&gt;NewGlobalRef(_jwindow);
 193 
 194     gtk_widget = gtk_window_new(type == POPUP ? GTK_WINDOW_POPUP : GTK_WINDOW_TOPLEVEL);
 195 
<span class="line-modified"> 196 // Not useful, see: https://developer.gnome.org/gtk3/stable/GtkWindow.html#gtk-window-set-wmclass</span>
<span class="line-modified"> 197 //    if (gchar * app_name = get_application_name()) {</span>
<span class="line-modified"> 198 //        gtk_window_set_wmclass(GTK_WINDOW(gtk_widget), app_name, app_name);</span>
<span class="line-modified"> 199 //        g_free(app_name);</span>
<span class="line-added"> 200 //    }</span>
 201 
 202     if (owner) {
 203         owner-&gt;add_child(this);
 204         if (on_top_inherited()) {
 205             gtk_window_set_keep_above(GTK_WINDOW(gtk_widget), TRUE);
 206         }
 207     }
 208 
 209     if (type == UTILITY) {
 210         gtk_window_set_type_hint(GTK_WINDOW(gtk_widget), GDK_WINDOW_TYPE_HINT_UTILITY);
 211     }
 212 
 213     glong xvisualID = (glong) mainEnv-&gt;GetStaticLongField(jApplicationCls, jApplicationVisualID);
 214 
 215     if (xvisualID != 0) {
 216         GdkVisual *visual = gdk_x11_screen_lookup_visual(gdk_screen_get_default(), xvisualID);
 217         glass_gtk_window_configure_from_visual(gtk_widget, visual);
 218     }
 219 
 220     gtk_widget_set_events(gtk_widget, GDK_ALL_EVENTS_MASK);
</pre>
<hr />
<pre>
1045 
1046     size_position_notify(size_changed, pos_changed);
1047 }
1048 
1049 void WindowContext::set_resizable(bool res) {
1050     if (res != geometry.resizable) {
1051         geometry.resizable = res;
1052         apply_geometry();
1053     }
1054 }
1055 
1056 void WindowContext::set_focusable(bool focusable) {
1057     gtk_window_set_accept_focus(GTK_WINDOW(gtk_widget), focusable ? TRUE : FALSE);
1058 }
1059 
1060 void WindowContext::set_title(const char *title) {
1061     gtk_window_set_title(GTK_WINDOW(gtk_widget), title);
1062 }
1063 
1064 void WindowContext::set_alpha(double alpha) {
<span class="line-modified">1065 #if GTK_CHECK_VERSION(3, 8, 0)</span>
<span class="line-added">1066     gtk_widget_set_opacity(gtk_widget, (gdouble)alpha);</span>
<span class="line-added">1067 #else</span>
<span class="line-added">1068     gtk_window_set_opacity(GTK_WINDOW(gtk_widget), (gdouble)alpha);</span>
<span class="line-added">1069 #endif</span>
1070 }
1071 
1072 void WindowContext::set_enabled(bool enabled) {
1073     if (enabled != geometry.enabled) {
1074         gtk_widget_set_sensitive(gtk_widget, enabled);
1075         geometry.enabled = enabled;
1076         apply_geometry();
1077     }
1078 }
1079 
1080 void WindowContext::set_minimum_size(int w, int h) {
1081     gboolean changed = geometry.minw != w || geometry.minh != h;
1082 
1083     if (!changed) {
1084         return;
1085     }
1086 
1087     geometry.minw = w;
1088     geometry.minh = h;
1089 
</pre>
</td>
</tr>
</table>
<center><a href="glass_screen.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>