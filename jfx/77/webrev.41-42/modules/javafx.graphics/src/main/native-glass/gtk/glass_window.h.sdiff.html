<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.graphics/src/main/native-glass/gtk/glass_window.h</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="glass_window.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.graphics/src/main/native-glass/gtk/glass_window.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 54 };
 55 
 56 static const guint MOUSE_BUTTONS_MASK = (guint)(GDK_BUTTON1_MASK | GDK_BUTTON2_MASK | GDK_BUTTON3_MASK);
 57 
 58 struct BgColor {
 59     BgColor() : red(0), green(0), blue(0), is_set(FALSE) {}
 60 
 61     float red;
 62     float green;
 63     float blue;
 64     bool is_set;
 65 };
 66 
 67 struct WindowGeometry {
 68     WindowGeometry() : current_x(0),
 69                        current_y(0),
 70                        current_w(0),
 71                        current_h(0),
 72                        current_cw(0),
 73                        current_ch(0),


 74                        adjust_w(0),
 75                        adjust_h(0),
 76                        view_x(0),
 77                        view_y(0),
 78                        frame_extents_received(false),
 79                        gravity_x(1.00),
 80                        gravity_y(1.00),
 81                        enabled(true),
 82                        resizable(true),
 83                        minw(-1),
 84                        minh(-1),
 85                        maxw(-1),
 86                        maxh(-1),
 87                        needs_ajustment(false) {}
 88 
 89     int current_x; // current position X
 90     int current_y; // current position Y
 91     int current_w; // current window width, adjusted
 92     int current_h; // current window height, adjusted
 93     int current_cw; // current content (view) width
 94     int current_ch; // current content (view) height
<span class="line-modified"> 95 </span>
<span class="line-modified"> 96 // workaround gtk+ bug</span>
<span class="line-removed"> 97 #if !GTK_CHECK_VERSION(3, 22, 0)</span>
<span class="line-removed"> 98     int unfullscreen_w;</span>
<span class="line-removed"> 99     int unfullscreen_h;</span>
<span class="line-removed">100 #endif</span>
101 
102     // Used to ajust window sizes because gtk doest not account frame extents as part
103     // of the window size and JavaFx does.
104     int adjust_w;
105     int adjust_h;
106 
107     // The position of the view relative to the window
108     int view_x;
109     int view_y;
110 
111     // If WM supports _NET_REQUEST_FRAME_EXTENTS and it was received
112     bool frame_extents_received;
113 
114     // Currently not used
115     float gravity_x;
116     float gravity_y;
117 
118     bool enabled;
119     bool resizable;
120 
</pre>
<hr />
<pre>
228     void show_or_hide_children(bool);
229     bool is_visible();
230     bool is_dead();
231     bool grab_focus();
232     void ungrab_focus();
233     void restack(bool);
234     void request_focus();
235     void enter_fullscreen();
236     void exit_fullscreen();
237     void detach_from_java();
238     void increment_events_counter();
239     void decrement_events_counter();
240     size_t get_events_count();
241     ~WindowContext();
242 
243 protected:
244     void applyShapeMask(void *, uint width, uint height);
245 
246 private:
247     bool im_filter_keypress(GdkEventKey*);

248     void calculate_adjustments();
249     void apply_geometry();
250     bool get_frame_extents_property(int *, int *, int *, int *);
251     void activate_window();
252     void size_position_notify(bool, bool);
253     void update_ontop_tree(bool);
254     bool on_top_inherited();
255     bool effective_on_top();
256     bool grab_mouse_drag_focus(GdkWindow *, GdkEvent *, GdkCursor *, bool);
257     void ungrab_mouse_drag_focus();
258 };
259 
260 void destroy_and_delete_ctx(WindowContext *ctx);
261 
262 class EventsCounterHelper {
263 private:
264     WindowContext *ctx;
265 public:
266     explicit EventsCounterHelper(WindowContext *context) {
267         ctx = context;
</pre>
</td>
<td>
<hr />
<pre>
 54 };
 55 
 56 static const guint MOUSE_BUTTONS_MASK = (guint)(GDK_BUTTON1_MASK | GDK_BUTTON2_MASK | GDK_BUTTON3_MASK);
 57 
 58 struct BgColor {
 59     BgColor() : red(0), green(0), blue(0), is_set(FALSE) {}
 60 
 61     float red;
 62     float green;
 63     float blue;
 64     bool is_set;
 65 };
 66 
 67 struct WindowGeometry {
 68     WindowGeometry() : current_x(0),
 69                        current_y(0),
 70                        current_w(0),
 71                        current_h(0),
 72                        current_cw(0),
 73                        current_ch(0),
<span class="line-added"> 74                        last_cw(0),</span>
<span class="line-added"> 75                        last_ch(0),</span>
 76                        adjust_w(0),
 77                        adjust_h(0),
 78                        view_x(0),
 79                        view_y(0),
 80                        frame_extents_received(false),
 81                        gravity_x(1.00),
 82                        gravity_y(1.00),
 83                        enabled(true),
 84                        resizable(true),
 85                        minw(-1),
 86                        minh(-1),
 87                        maxw(-1),
 88                        maxh(-1),
 89                        needs_ajustment(false) {}
 90 
 91     int current_x; // current position X
 92     int current_y; // current position Y
 93     int current_w; // current window width, adjusted
 94     int current_h; // current window height, adjusted
 95     int current_cw; // current content (view) width
 96     int current_ch; // current content (view) height
<span class="line-modified"> 97     int last_cw; // not subjected to fullscreen / maximize</span>
<span class="line-modified"> 98     int last_ch;</span>




 99 
100     // Used to ajust window sizes because gtk doest not account frame extents as part
101     // of the window size and JavaFx does.
102     int adjust_w;
103     int adjust_h;
104 
105     // The position of the view relative to the window
106     int view_x;
107     int view_y;
108 
109     // If WM supports _NET_REQUEST_FRAME_EXTENTS and it was received
110     bool frame_extents_received;
111 
112     // Currently not used
113     float gravity_x;
114     float gravity_y;
115 
116     bool enabled;
117     bool resizable;
118 
</pre>
<hr />
<pre>
226     void show_or_hide_children(bool);
227     bool is_visible();
228     bool is_dead();
229     bool grab_focus();
230     void ungrab_focus();
231     void restack(bool);
232     void request_focus();
233     void enter_fullscreen();
234     void exit_fullscreen();
235     void detach_from_java();
236     void increment_events_counter();
237     void decrement_events_counter();
238     size_t get_events_count();
239     ~WindowContext();
240 
241 protected:
242     void applyShapeMask(void *, uint width, uint height);
243 
244 private:
245     bool im_filter_keypress(GdkEventKey*);
<span class="line-added">246     void ensure_window_size();</span>
247     void calculate_adjustments();
248     void apply_geometry();
249     bool get_frame_extents_property(int *, int *, int *, int *);
250     void activate_window();
251     void size_position_notify(bool, bool);
252     void update_ontop_tree(bool);
253     bool on_top_inherited();
254     bool effective_on_top();
255     bool grab_mouse_drag_focus(GdkWindow *, GdkEvent *, GdkCursor *, bool);
256     void ungrab_mouse_drag_focus();
257 };
258 
259 void destroy_and_delete_ctx(WindowContext *ctx);
260 
261 class EventsCounterHelper {
262 private:
263     WindowContext *ctx;
264 public:
265     explicit EventsCounterHelper(WindowContext *context) {
266         ctx = context;
</pre>
</td>
</tr>
</table>
<center><a href="glass_window.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>