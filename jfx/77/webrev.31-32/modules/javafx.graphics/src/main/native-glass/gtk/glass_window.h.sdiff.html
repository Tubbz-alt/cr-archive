<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.graphics/src/main/native-glass/gtk/glass_window.h</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="glass_window.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.graphics/src/main/native-glass/gtk/glass_window.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 47     POPUP
 48 };
 49 
 50 enum request_type {
 51     REQUEST_NONE,
 52     REQUEST_RESIZABLE,
 53     REQUEST_NOT_RESIZABLE
 54 };
 55 
 56 static const guint MOUSE_BUTTONS_MASK = (guint)(GDK_BUTTON1_MASK | GDK_BUTTON2_MASK | GDK_BUTTON3_MASK);
 57 
 58 struct BgColor {
 59     BgColor() : red(0), green(0), blue(0), is_set(FALSE) {}
 60 
 61     float red;
 62     float green;
 63     float blue;
 64     bool is_set;
 65 };
 66 
<span class="line-removed"> 67 struct CachedExtents {</span>
<span class="line-removed"> 68     int adjust_w;</span>
<span class="line-removed"> 69     int adjust_h;</span>
<span class="line-removed"> 70 </span>
<span class="line-removed"> 71     // The position of the view relative to the window</span>
<span class="line-removed"> 72     int view_x;</span>
<span class="line-removed"> 73     int view_y;</span>
<span class="line-removed"> 74 };</span>
<span class="line-removed"> 75 </span>
<span class="line-removed"> 76 static CachedExtents normal_extents = {0, 0, 0, 0};</span>
<span class="line-removed"> 77 static CachedExtents utility_extents = {0, 0, 0, 0};</span>
<span class="line-removed"> 78 </span>
 79 struct WindowGeometry {
 80     WindowGeometry() : current_x(0),
 81                        current_y(0),
 82                        current_w(0),
 83                        current_h(0),
 84                        current_cw(0),
 85                        current_ch(0),
 86                        adjust_w(0),
 87                        adjust_h(0),
 88                        view_x(0),
 89                        view_y(0),

 90                        frame_extents_received(false),
 91                        gravity_x(1.00),
 92                        gravity_y(1.00),
 93                        enabled(true),
 94                        resizable(true),
 95                        minw(-1),
 96                        minh(-1),
 97                        maxw(-1),
 98                        maxh(-1),
 99                        window_size_set(false) {}
100 
101     int current_x; // current position X
102     int current_y; // current position Y
103     int current_w; // current window width
104     int current_h; // current window height
105     int current_cw; // current content (view) width
106     int current_ch; // current content (view) height
107 
108     // Used to ajust window sizes because gtk doest not account frame extents as part
109     // of the window size and JavaFx does.
110     int adjust_w;
111     int adjust_h;
112 
113     // The position of the view relative to the window
114     int view_x;
115     int view_y;
116 

117     // If WM supports _NET_REQUEST_FRAME_EXTENTS and it was received
118     bool frame_extents_received;
119 
120     // Currently not used
121     float gravity_x;
122     float gravity_y;
123 
124     bool enabled;
125     bool resizable;
126 
127     int minw;
128     int minh;
129 
130     int maxw;
131     int maxh;
132 
133     // if the window size was set (instead of content size) - this is used to
134     // &quot;fix&quot; the window size accouting extents.
135     bool window_size_set;
136 };
</pre>
<hr />
<pre>
235     bool is_visible();
236     bool is_dead();
237     bool grab_focus();
238     void ungrab_focus();
239     void restack(bool);
240     void request_focus();
241     void enter_fullscreen();
242     void exit_fullscreen();
243     void detach_from_java();
244     void increment_events_counter();
245     void decrement_events_counter();
246     size_t get_events_count();
247     ~WindowContext();
248 
249 protected:
250     void applyShapeMask(void *, uint width, uint height);
251 
252 private:
253     bool im_filter_keypress(GdkEventKey*);
254     void calculate_adjustments();
<span class="line-removed">255     void save_cached_extents();</span>
256     void apply_geometry();
257     bool get_frame_extents_property(int *, int *, int *, int *);
258     void activate_window();
259     void size_position_notify(bool, bool);
260     void update_ontop_tree(bool);
261     bool on_top_inherited();
262     bool effective_on_top();
263     GdkDevice * get_pointer_device();
264     bool grab_mouse_drag_focus(GdkWindow *, GdkCursor *, bool);
265     void ungrab_mouse_drag_focus();
266 };
267 
268 void destroy_and_delete_ctx(WindowContext *ctx);
269 
270 class EventsCounterHelper {
271 private:
272     WindowContext *ctx;
273 public:
274     explicit EventsCounterHelper(WindowContext *context) {
275         ctx = context;
</pre>
</td>
<td>
<hr />
<pre>
 47     POPUP
 48 };
 49 
 50 enum request_type {
 51     REQUEST_NONE,
 52     REQUEST_RESIZABLE,
 53     REQUEST_NOT_RESIZABLE
 54 };
 55 
 56 static const guint MOUSE_BUTTONS_MASK = (guint)(GDK_BUTTON1_MASK | GDK_BUTTON2_MASK | GDK_BUTTON3_MASK);
 57 
 58 struct BgColor {
 59     BgColor() : red(0), green(0), blue(0), is_set(FALSE) {}
 60 
 61     float red;
 62     float green;
 63     float blue;
 64     bool is_set;
 65 };
 66 












 67 struct WindowGeometry {
 68     WindowGeometry() : current_x(0),
 69                        current_y(0),
 70                        current_w(0),
 71                        current_h(0),
 72                        current_cw(0),
 73                        current_ch(0),
 74                        adjust_w(0),
 75                        adjust_h(0),
 76                        view_x(0),
 77                        view_y(0),
<span class="line-added"> 78                        frame_extents_supported(false),</span>
 79                        frame_extents_received(false),
 80                        gravity_x(1.00),
 81                        gravity_y(1.00),
 82                        enabled(true),
 83                        resizable(true),
 84                        minw(-1),
 85                        minh(-1),
 86                        maxw(-1),
 87                        maxh(-1),
 88                        window_size_set(false) {}
 89 
 90     int current_x; // current position X
 91     int current_y; // current position Y
 92     int current_w; // current window width
 93     int current_h; // current window height
 94     int current_cw; // current content (view) width
 95     int current_ch; // current content (view) height
 96 
 97     // Used to ajust window sizes because gtk doest not account frame extents as part
 98     // of the window size and JavaFx does.
 99     int adjust_w;
100     int adjust_h;
101 
102     // The position of the view relative to the window
103     int view_x;
104     int view_y;
105 
<span class="line-added">106     bool frame_extents_supported;</span>
107     // If WM supports _NET_REQUEST_FRAME_EXTENTS and it was received
108     bool frame_extents_received;
109 
110     // Currently not used
111     float gravity_x;
112     float gravity_y;
113 
114     bool enabled;
115     bool resizable;
116 
117     int minw;
118     int minh;
119 
120     int maxw;
121     int maxh;
122 
123     // if the window size was set (instead of content size) - this is used to
124     // &quot;fix&quot; the window size accouting extents.
125     bool window_size_set;
126 };
</pre>
<hr />
<pre>
225     bool is_visible();
226     bool is_dead();
227     bool grab_focus();
228     void ungrab_focus();
229     void restack(bool);
230     void request_focus();
231     void enter_fullscreen();
232     void exit_fullscreen();
233     void detach_from_java();
234     void increment_events_counter();
235     void decrement_events_counter();
236     size_t get_events_count();
237     ~WindowContext();
238 
239 protected:
240     void applyShapeMask(void *, uint width, uint height);
241 
242 private:
243     bool im_filter_keypress(GdkEventKey*);
244     void calculate_adjustments();

245     void apply_geometry();
246     bool get_frame_extents_property(int *, int *, int *, int *);
247     void activate_window();
248     void size_position_notify(bool, bool);
249     void update_ontop_tree(bool);
250     bool on_top_inherited();
251     bool effective_on_top();
252     GdkDevice * get_pointer_device();
253     bool grab_mouse_drag_focus(GdkWindow *, GdkCursor *, bool);
254     void ungrab_mouse_drag_focus();
255 };
256 
257 void destroy_and_delete_ctx(WindowContext *ctx);
258 
259 class EventsCounterHelper {
260 private:
261     WindowContext *ctx;
262 public:
263     explicit EventsCounterHelper(WindowContext *context) {
264         ctx = context;
</pre>
</td>
</tr>
</table>
<center><a href="glass_window.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>