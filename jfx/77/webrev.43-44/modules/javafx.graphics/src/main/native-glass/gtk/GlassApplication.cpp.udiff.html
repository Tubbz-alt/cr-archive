<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.graphics/src/main/native-glass/gtk/GlassApplication.cpp</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../../java/com/sun/glass/ui/gtk/GtkWindow.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="GlassCursor.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.graphics/src/main/native-glass/gtk/GlassApplication.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -410,11 +410,11 @@</span>
          case GDK_FOCUS_CHANGE:
              return TRUE;
              break;
      }//switch
  
<span class="udiff-line-modified-removed">-     if (ctx != NULL) {</span>
<span class="udiff-line-modified-added">+     if (ctx != NULL ) {</span>
          return ctx-&gt;isEnabled();
      }
      return TRUE;
  }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -433,21 +433,92 @@</span>
          return;
      }
  
      glass_evloop_call_hooks(event);
  
<span class="udiff-line-added">+     if (ctx != NULL &amp;&amp; dynamic_cast&lt;WindowContextPlug*&gt;(ctx) &amp;&amp; ctx-&gt;get_gtk_window()) {</span>
<span class="udiff-line-added">+         WindowContextPlug* ctx_plug = dynamic_cast&lt;WindowContextPlug*&gt;(ctx);</span>
<span class="udiff-line-added">+         if (!ctx_plug-&gt;embedded_children.empty()) {</span>
<span class="udiff-line-added">+             // forward to child</span>
<span class="udiff-line-added">+             ctx = (WindowContext*) ctx_plug-&gt;embedded_children.back();</span>
<span class="udiff-line-added">+             window = ctx-&gt;get_gdk_window();</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      if (ctx != NULL) {
          EventsCounterHelper helper(ctx);
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-         if (event-&gt;type == GDK_EXPOSE) {</span>
<span class="udiff-line-modified-removed">-             ctx-&gt;process_expose(&amp;event-&gt;expose);</span>
<span class="udiff-line-modified-removed">-         } else if (event-&gt;type == GDK_DRAG_LEAVE) {</span>
<span class="udiff-line-modified-removed">-             dnd_drag_leave_callback(ctx);</span>
<span class="udiff-line-modified-removed">-         } else {</span>
<span class="udiff-line-modified-removed">-             gtk_main_do_event(event);</span>
<span class="udiff-line-modified-added">+         try {</span>
<span class="udiff-line-modified-added">+             switch (event-&gt;type) {</span>
<span class="udiff-line-modified-added">+                 case GDK_PROPERTY_NOTIFY:</span>
<span class="udiff-line-modified-added">+                     ctx-&gt;process_property_notify(&amp;event-&gt;property);</span>
<span class="udiff-line-modified-added">+                     gtk_main_do_event(event);</span>
<span class="udiff-line-modified-added">+                     break;</span>
<span class="udiff-line-modified-added">+                 case GDK_CONFIGURE:</span>
<span class="udiff-line-added">+                     ctx-&gt;process_configure(&amp;event-&gt;configure);</span>
<span class="udiff-line-added">+                     gtk_main_do_event(event);</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case GDK_FOCUS_CHANGE:</span>
<span class="udiff-line-added">+                     ctx-&gt;process_focus(&amp;event-&gt;focus_change);</span>
<span class="udiff-line-added">+                     gtk_main_do_event(event);</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case GDK_DESTROY:</span>
<span class="udiff-line-added">+                     destroy_and_delete_ctx(ctx);</span>
<span class="udiff-line-added">+                     gtk_main_do_event(event);</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case GDK_DELETE:</span>
<span class="udiff-line-added">+                     ctx-&gt;process_delete();</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case GDK_EXPOSE:</span>
<span class="udiff-line-added">+                 case GDK_DAMAGE:</span>
<span class="udiff-line-added">+                     ctx-&gt;process_expose(&amp;event-&gt;expose);</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case GDK_WINDOW_STATE:</span>
<span class="udiff-line-added">+                     ctx-&gt;process_state(&amp;event-&gt;window_state);</span>
<span class="udiff-line-added">+                     gtk_main_do_event(event);</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case GDK_BUTTON_PRESS:</span>
<span class="udiff-line-added">+                 case GDK_BUTTON_RELEASE:</span>
<span class="udiff-line-added">+                     ctx-&gt;process_mouse_button(&amp;event-&gt;button);</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case GDK_MOTION_NOTIFY:</span>
<span class="udiff-line-added">+                     ctx-&gt;process_mouse_motion(&amp;event-&gt;motion);</span>
<span class="udiff-line-added">+                     gdk_event_request_motions(&amp;event-&gt;motion);</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case GDK_SCROLL:</span>
<span class="udiff-line-added">+                     ctx-&gt;process_mouse_scroll(&amp;event-&gt;scroll);</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case GDK_ENTER_NOTIFY:</span>
<span class="udiff-line-added">+                 case GDK_LEAVE_NOTIFY:</span>
<span class="udiff-line-added">+                     ctx-&gt;process_mouse_cross(&amp;event-&gt;crossing);</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case GDK_KEY_PRESS:</span>
<span class="udiff-line-added">+                 case GDK_KEY_RELEASE:</span>
<span class="udiff-line-added">+                     ctx-&gt;process_key(&amp;event-&gt;key);</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case GDK_DROP_START:</span>
<span class="udiff-line-added">+                 case GDK_DRAG_ENTER:</span>
<span class="udiff-line-added">+                 case GDK_DRAG_LEAVE:</span>
<span class="udiff-line-added">+                 case GDK_DRAG_MOTION:</span>
<span class="udiff-line-added">+                     process_dnd_target(ctx, &amp;event-&gt;dnd);</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case GDK_MAP:</span>
<span class="udiff-line-added">+                     ctx-&gt;process_map();</span>
<span class="udiff-line-added">+                     // fall-through</span>
<span class="udiff-line-added">+                 case GDK_UNMAP:</span>
<span class="udiff-line-added">+                 case GDK_CLIENT_EVENT:</span>
<span class="udiff-line-added">+                 case GDK_VISIBILITY_NOTIFY:</span>
<span class="udiff-line-added">+                 case GDK_SETTING:</span>
<span class="udiff-line-added">+                 case GDK_OWNER_CHANGE:</span>
<span class="udiff-line-added">+                     gtk_main_do_event(event);</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 default:</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+             }</span>
<span class="udiff-line-added">+         } catch (jni_exception&amp;) {</span>
          }
      } else {
<span class="udiff-line-added">+ </span>
          if (window == gdk_screen_get_root_window(gdk_screen_get_default())) {
              if (event-&gt;any.type == GDK_PROPERTY_NOTIFY) {
                  if (event-&gt;property.atom == gdk_atom_intern_static_string(&quot;_NET_WORKAREA&quot;)
                          || event-&gt;property.atom == gdk_atom_intern_static_string(&quot;_NET_CURRENT_DESKTOP&quot;)) {
                      screen_settings_changed(gdk_screen_get_default(), NULL);
</pre>
<center><a href="../../java/com/sun/glass/ui/gtk/GtkWindow.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="GlassCursor.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>