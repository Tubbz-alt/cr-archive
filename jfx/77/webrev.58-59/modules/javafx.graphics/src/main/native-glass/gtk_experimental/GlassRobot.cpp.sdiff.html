<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.graphics/src/main/native-glass/gtk_experimental/GlassRobot.cpp</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../index.html" target="_top">index</a> <a href="glass_window.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.graphics/src/main/native-glass/gtk_experimental/GlassRobot.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
118 
119     checkXTest(env);
120     keyButton(code, FALSE);
121 }
122 
123 /*
124  * Class:     com_sun_glass_ui_gtk_GtkRobot
125  * Method:    _mouseMove
126  * Signature: (II)V
127  */
128 JNIEXPORT void JNICALL Java_com_sun_glass_ui_gtk_GtkRobot__1mouseMove
129   (JNIEnv *env, jobject obj, jint x, jint y)
130 {
131     (void)obj;
132 
133     Display *xdisplay = gdk_x11_get_default_xdisplay();
134     checkXTest(env);
135     jfloat uiScale = getUIScale();
136     x = rint(x * uiScale);
137     y = rint(y * uiScale);
<span class="line-modified">138     XWarpPointer(xdisplay,</span>
<span class="line-modified">139             None,</span>
<span class="line-modified">140             XRootWindow(xdisplay,gdk_x11_get_default_screen()),</span>
<span class="line-removed">141             0, 0, 0, 0, x, y);</span>
142     XSync(xdisplay, False);
143 }
144 
145 static void mouseButtons(jint buttons, gboolean press)
146 {
147     Display *xdisplay = gdk_x11_get_default_xdisplay();
148     if (buttons &amp; com_sun_glass_ui_GlassRobot_MOUSE_LEFT_BTN) {
149         XTestFakeButtonEvent(xdisplay, 1, press, CurrentTime);
150     }
151     if (buttons &amp; com_sun_glass_ui_GlassRobot_MOUSE_MIDDLE_BTN) {
152         XTestFakeButtonEvent(xdisplay, 2, press, CurrentTime);
153     }
154     if (buttons &amp; com_sun_glass_ui_GlassRobot_MOUSE_RIGHT_BTN) {
155         XTestFakeButtonEvent(xdisplay, 3, press, CurrentTime);
156     }
157     if (buttons &amp; com_sun_glass_ui_GlassRobot_MOUSE_BACK_BTN) {
158         XTestFakeButtonEvent(xdisplay, MOUSE_BACK_BTN, press, CurrentTime);
159     }
160     if (buttons &amp; com_sun_glass_ui_GlassRobot_MOUSE_FORWARD_BTN) {
161         XTestFakeButtonEvent(xdisplay, MOUSE_FORWARD_BTN, press, CurrentTime);
</pre>
</td>
<td>
<hr />
<pre>
118 
119     checkXTest(env);
120     keyButton(code, FALSE);
121 }
122 
123 /*
124  * Class:     com_sun_glass_ui_gtk_GtkRobot
125  * Method:    _mouseMove
126  * Signature: (II)V
127  */
128 JNIEXPORT void JNICALL Java_com_sun_glass_ui_gtk_GtkRobot__1mouseMove
129   (JNIEnv *env, jobject obj, jint x, jint y)
130 {
131     (void)obj;
132 
133     Display *xdisplay = gdk_x11_get_default_xdisplay();
134     checkXTest(env);
135     jfloat uiScale = getUIScale();
136     x = rint(x * uiScale);
137     y = rint(y * uiScale);
<span class="line-modified">138 </span>
<span class="line-modified">139     //-1 means current is current screen</span>
<span class="line-modified">140     XTestFakeMotionEvent(xdisplay, -1, x, y, CurrentTime);</span>

141     XSync(xdisplay, False);
142 }
143 
144 static void mouseButtons(jint buttons, gboolean press)
145 {
146     Display *xdisplay = gdk_x11_get_default_xdisplay();
147     if (buttons &amp; com_sun_glass_ui_GlassRobot_MOUSE_LEFT_BTN) {
148         XTestFakeButtonEvent(xdisplay, 1, press, CurrentTime);
149     }
150     if (buttons &amp; com_sun_glass_ui_GlassRobot_MOUSE_MIDDLE_BTN) {
151         XTestFakeButtonEvent(xdisplay, 2, press, CurrentTime);
152     }
153     if (buttons &amp; com_sun_glass_ui_GlassRobot_MOUSE_RIGHT_BTN) {
154         XTestFakeButtonEvent(xdisplay, 3, press, CurrentTime);
155     }
156     if (buttons &amp; com_sun_glass_ui_GlassRobot_MOUSE_BACK_BTN) {
157         XTestFakeButtonEvent(xdisplay, MOUSE_BACK_BTN, press, CurrentTime);
158     }
159     if (buttons &amp; com_sun_glass_ui_GlassRobot_MOUSE_FORWARD_BTN) {
160         XTestFakeButtonEvent(xdisplay, MOUSE_FORWARD_BTN, press, CurrentTime);
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../index.html" target="_top">index</a> <a href="glass_window.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>