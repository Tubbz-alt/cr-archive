<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff tests/system/src/testscriptapp1/java/mymod/myapp1/FXMLScriptDeployment.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>tests/system/src/testscriptapp1/java/mymod/myapp1/FXMLScriptDeployment.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 54 import pseudoScriptEngine.RgfPseudoScriptEngine;
 55 
 56 /**
 57  * Modular test application for testing FXML.
 58  * This is launched by ModuleLauncherTest.
 59  */
 60 public class FXMLScriptDeployment extends Application {
 61 
 62     static boolean bDebug = false; // true; // display invocation list
 63 
 64     /** Runs the application and invokes the tests.
 65      *  @param args the command line arguments, if any given the RgfPseudoScriptEngine invocation logs get displayed
 66      *              which are used in the asserCorrectInvocations() method
 67      */
 68     public static void main(String[] args) {
 69         try {
 70             // any argument will cause the bDebug flag to be set to true
 71             if (args.length &gt; 0) {
 72                bDebug = true;
 73             }
<span class="line-modified"> 74             new FXMLScriptTest().launch();</span>
 75             // for debugging, allows to study invocation logs in detail
 76             if (bDebug) { dumpEvalInformation(); }
 77             assertCorrectInvocations();
 78         } catch (AssertionError ex) {
 79             System.err.println(&quot;ASSERTION ERROR: caught unexpected exception: &quot; + ex);
 80             ex.printStackTrace(System.err);
 81             System.exit(ERROR_ASSERTION_FAILURE);
 82         } catch (Error | Exception ex) {
 83             System.err.println(&quot;ERROR: caught unexpected exception: &quot; + ex);
 84             ex.printStackTrace(System.err);
 85             System.exit(ERROR_UNEXPECTED_EXCEPTION);
 86         }
 87         System.exit(ERROR_NONE);    // not in stop() method as we need to run the assertions first
 88     }
 89 
 90     @Override
 91     public void start(Stage mainStage) {
 92         URL fxmlUrl = null;
 93         Parent rootNode = null;
 94         Scene scene = null;
 95         Button btn = null;
 96         try {
<span class="line-modified"> 97              fxmlUrl = Util.getURL(FXMLScriptTest.class, &quot;demo_01&quot;);</span>
 98              rootNode = FXMLLoader.load(fxmlUrl);
 99              scene = new Scene(rootNode);
100              btn = (Button) scene.lookup(&quot;#idButton&quot;);
101         }
102         catch (Exception ioe) {
103             ioe.printStackTrace();
104             System.exit(-1);
105         }
106             // fire three events on the button
107         btn.fire();
108         btn.fireEvent(new ActionEvent());
109         btn.fireEvent(new MouseEvent( MouseEvent.MOUSE_CLICKED,
110                                        0,       // double x,
111                                        0,       // double y,
112                                        0,       // double screenX,
113                                        0,       // double screenY,
114                                        MouseButton.PRIMARY,         // MouseButton button,
115                                        0,       // int clickCount,
116                                        false,   // boolean shiftDown,
117                                        false,   // boolean controlDown,
</pre>
<hr />
<pre>
231                     ActionEvent ev = (ActionEvent) obj;
232                     Util.assertSame(&quot;ActionEvent.getSource() == btn&quot;, ev.getSource(), btn);
233                 }
234             }
235 
236             // check filename and script
237             String filename = (String) engineBindings.get(FILENAME);
238             boolean ok = false;
239             switch (invocation) {
240                 case 1:
241                     Util.assertEndsWith  (&quot;demo_01_topscript.rpsl&quot;, filename);
242                     Util.assertStartsWith(&quot;demo_01_topscript.rpsl file - pseudo script&quot;, script);
243                     break;
244 
245                 case 2:
246                     Util.assertEndsWith  (&quot;demo_01_middlescript.rpsl&quot;, filename);
247                     Util.assertStartsWith(&quot;demo_01_middlescript.rpsl file - pseudo script&quot;, script);
248                     break;
249 
250                 case 3:
<span class="line-modified">251                     Util.assertEndsWith(&quot;demo_01.fxml-script_starting_at_line_25&quot;, filename);</span>
<span class="line-modified">252                     Util.assertStartsWith(&quot;demo_01.fxml embedded script rpsl - line # 25&quot;, script);</span>
253                     break;
254 
255                 case 4:
256                     Util.assertEndsWith  (&quot;demo_01_bottomscript.rpsl&quot;, filename);
257                     Util.assertStartsWith(&quot;demo_01_bottomscript.rpsl file - pseudo script&quot;, script);
258                     break;
259 
260                 case 5:
261                     Util.assertEndsWith(&quot;demo_01.fxml-script_starting_at_line_56&quot;, filename);
262                     Util.assertStartsWith(&quot;something (line # 56)&quot;, script);
263                     break;
264 
265                 case 6:
266                     Util.assertEndsWith(&quot;demo_01.fxml-script_starting_at_line_59&quot;, filename);
267                     Util.assertStartsWith(&quot;demo_01.fxml (line # 59):&quot;, script);
268                     break;
269 
270                 case 7:     // same as case 8 (same button clicked)
271                     Util.assertEndsWith(&quot;demo_01.fxml-onAction_attribute_in_element_ending_at_line_46&quot;, filename);
272                     Util.assertStartsWith(&quot;demo_01.fxml embedded event - ActionEvent - line # 45 -&quot;, script);
273                     break;
274 
275                 case 8:     // same as case 7 (same button clicked)
276                     Util.assertEndsWith(&quot;demo_01.fxml-onAction_attribute_in_element_ending_at_line_46&quot;, filename);
277                     Util.assertStartsWith(&quot;demo_01.fxml embedded event - ActionEvent - line # 45 -&quot;, script);
278                     break;
279 
280                 case 9:
281                     Util.assertEndsWith(&quot;demo_01.fxml-onMouseClicked_attribute_in_element_ending_at_line_46&quot;, filename);
<span class="line-modified">282                     Util.assertStartsWith(&quot;demo_01.fxml embedded event - MouseClicked - line # 45&quot;, script);</span>
283                     break;
284             }
285         }
286     }
287 }
</pre>
</td>
<td>
<hr />
<pre>
 54 import pseudoScriptEngine.RgfPseudoScriptEngine;
 55 
 56 /**
 57  * Modular test application for testing FXML.
 58  * This is launched by ModuleLauncherTest.
 59  */
 60 public class FXMLScriptDeployment extends Application {
 61 
 62     static boolean bDebug = false; // true; // display invocation list
 63 
 64     /** Runs the application and invokes the tests.
 65      *  @param args the command line arguments, if any given the RgfPseudoScriptEngine invocation logs get displayed
 66      *              which are used in the asserCorrectInvocations() method
 67      */
 68     public static void main(String[] args) {
 69         try {
 70             // any argument will cause the bDebug flag to be set to true
 71             if (args.length &gt; 0) {
 72                bDebug = true;
 73             }
<span class="line-modified"> 74             new FXMLScriptDeployment().launch();</span>
 75             // for debugging, allows to study invocation logs in detail
 76             if (bDebug) { dumpEvalInformation(); }
 77             assertCorrectInvocations();
 78         } catch (AssertionError ex) {
 79             System.err.println(&quot;ASSERTION ERROR: caught unexpected exception: &quot; + ex);
 80             ex.printStackTrace(System.err);
 81             System.exit(ERROR_ASSERTION_FAILURE);
 82         } catch (Error | Exception ex) {
 83             System.err.println(&quot;ERROR: caught unexpected exception: &quot; + ex);
 84             ex.printStackTrace(System.err);
 85             System.exit(ERROR_UNEXPECTED_EXCEPTION);
 86         }
 87         System.exit(ERROR_NONE);    // not in stop() method as we need to run the assertions first
 88     }
 89 
 90     @Override
 91     public void start(Stage mainStage) {
 92         URL fxmlUrl = null;
 93         Parent rootNode = null;
 94         Scene scene = null;
 95         Button btn = null;
 96         try {
<span class="line-modified"> 97              fxmlUrl = Util.getURL(FXMLScriptDeployment.class, &quot;demo_01&quot;);</span>
 98              rootNode = FXMLLoader.load(fxmlUrl);
 99              scene = new Scene(rootNode);
100              btn = (Button) scene.lookup(&quot;#idButton&quot;);
101         }
102         catch (Exception ioe) {
103             ioe.printStackTrace();
104             System.exit(-1);
105         }
106             // fire three events on the button
107         btn.fire();
108         btn.fireEvent(new ActionEvent());
109         btn.fireEvent(new MouseEvent( MouseEvent.MOUSE_CLICKED,
110                                        0,       // double x,
111                                        0,       // double y,
112                                        0,       // double screenX,
113                                        0,       // double screenY,
114                                        MouseButton.PRIMARY,         // MouseButton button,
115                                        0,       // int clickCount,
116                                        false,   // boolean shiftDown,
117                                        false,   // boolean controlDown,
</pre>
<hr />
<pre>
231                     ActionEvent ev = (ActionEvent) obj;
232                     Util.assertSame(&quot;ActionEvent.getSource() == btn&quot;, ev.getSource(), btn);
233                 }
234             }
235 
236             // check filename and script
237             String filename = (String) engineBindings.get(FILENAME);
238             boolean ok = false;
239             switch (invocation) {
240                 case 1:
241                     Util.assertEndsWith  (&quot;demo_01_topscript.rpsl&quot;, filename);
242                     Util.assertStartsWith(&quot;demo_01_topscript.rpsl file - pseudo script&quot;, script);
243                     break;
244 
245                 case 2:
246                     Util.assertEndsWith  (&quot;demo_01_middlescript.rpsl&quot;, filename);
247                     Util.assertStartsWith(&quot;demo_01_middlescript.rpsl file - pseudo script&quot;, script);
248                     break;
249 
250                 case 3:
<span class="line-modified">251                     Util.assertEndsWith(&quot;demo_01.fxml-script_starting_at_line_52&quot;, filename);</span>
<span class="line-modified">252                     Util.assertStartsWith(&quot;demo_01.fxml embedded script rpsl - line # 52&quot;, script);</span>
253                     break;
254 
255                 case 4:
256                     Util.assertEndsWith  (&quot;demo_01_bottomscript.rpsl&quot;, filename);
257                     Util.assertStartsWith(&quot;demo_01_bottomscript.rpsl file - pseudo script&quot;, script);
258                     break;
259 
260                 case 5:
261                     Util.assertEndsWith(&quot;demo_01.fxml-script_starting_at_line_56&quot;, filename);
262                     Util.assertStartsWith(&quot;something (line # 56)&quot;, script);
263                     break;
264 
265                 case 6:
266                     Util.assertEndsWith(&quot;demo_01.fxml-script_starting_at_line_59&quot;, filename);
267                     Util.assertStartsWith(&quot;demo_01.fxml (line # 59):&quot;, script);
268                     break;
269 
270                 case 7:     // same as case 8 (same button clicked)
271                     Util.assertEndsWith(&quot;demo_01.fxml-onAction_attribute_in_element_ending_at_line_46&quot;, filename);
272                     Util.assertStartsWith(&quot;demo_01.fxml embedded event - ActionEvent - line # 45 -&quot;, script);
273                     break;
274 
275                 case 8:     // same as case 7 (same button clicked)
276                     Util.assertEndsWith(&quot;demo_01.fxml-onAction_attribute_in_element_ending_at_line_46&quot;, filename);
277                     Util.assertStartsWith(&quot;demo_01.fxml embedded event - ActionEvent - line # 45 -&quot;, script);
278                     break;
279 
280                 case 9:
281                     Util.assertEndsWith(&quot;demo_01.fxml-onMouseClicked_attribute_in_element_ending_at_line_46&quot;, filename);
<span class="line-modified">282                     Util.assertStartsWith(&quot;demo_01.fxml embedded event - MouseClicked - line # 44&quot;, script);</span>
283                     break;
284             }
285         }
286     }
287 }
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>