<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff tests/system/src/testscriptapp1/java/mymod/pseudoScriptEngine/InvocationInfos.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>tests/system/src/testscriptapp1/java/mymod/pseudoScriptEngine/InvocationInfos.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
33 import java.util.TreeMap;
34 
35 
36 /** Stores PseudoScriptEngine related invocation information for asserting and debugging. */
37 public class InvocationInfos {
38     public String script;
39     public TreeMap&lt;Integer,TreeMap&lt;String,Object&gt;&gt; bindings;
40     public Instant dateTime;
41 
42     InvocationInfos(String script, ScriptContext context) {
43         this.dateTime = Instant.now();
44         this.script = script;
45         this.bindings = new TreeMap();
46         // get and save each Bindings
47         for (Integer scope : context.getScopes()) {
48             Bindings binding = context.getBindings(scope);
49             bindings.put(scope, binding == null ? new TreeMap&lt;String,Object&gt;() : new TreeMap&lt;String,Object&gt;(binding));
50         }
51     }
52 
<span class="line-modified">53     /** </span>
54      * Creates and returns a string having all information formatted to ease debugging.
55      * @return string formatted to ease debugging
56      */
57     public String toDebugFormat(String indentation) {
58         StringBuilder sb = new StringBuilder();
59         String indent = (indentation == null ? &quot;\t\t&quot; : indentation);
60         sb.append(indent).append(&quot;at:     [&quot;).append(dateTime.toString()).append(&quot;]\n&quot;);
61         sb.append(indent).append(&quot;script: [&quot;).append(script)             .append(&quot;]\n&quot;);
62 
63         for (Integer scope : (Set&lt;Integer&gt;) bindings.keySet()) {
64             sb.append(indent).append(&quot;Bindings for scope # &quot;).append(scope);
65             if (scope == 100) sb.append(&quot; (ENGINE_SCOPE):&quot;);
66             else if (scope == 200) sb.append(&quot; (GLOBAL_SCOPE):&quot;);
67             else                 sb.append(&#39;:&#39;);
68             sb.append(&#39;\n&#39;);
69 
70             TreeMap&lt;String,Object&gt; treeMap = bindings.get(scope);
71             for (String k : (Set&lt;String&gt;) treeMap.keySet()) {
72                 sb.append(indent).append(&quot;\t[&quot;).append(k).append(&quot;]:\t[&quot;).append(treeMap.get(k)).append(&quot;]\n&quot;);
73             }
</pre>
</td>
<td>
<hr />
<pre>
33 import java.util.TreeMap;
34 
35 
36 /** Stores PseudoScriptEngine related invocation information for asserting and debugging. */
37 public class InvocationInfos {
38     public String script;
39     public TreeMap&lt;Integer,TreeMap&lt;String,Object&gt;&gt; bindings;
40     public Instant dateTime;
41 
42     InvocationInfos(String script, ScriptContext context) {
43         this.dateTime = Instant.now();
44         this.script = script;
45         this.bindings = new TreeMap();
46         // get and save each Bindings
47         for (Integer scope : context.getScopes()) {
48             Bindings binding = context.getBindings(scope);
49             bindings.put(scope, binding == null ? new TreeMap&lt;String,Object&gt;() : new TreeMap&lt;String,Object&gt;(binding));
50         }
51     }
52 
<span class="line-modified">53     /**</span>
54      * Creates and returns a string having all information formatted to ease debugging.
55      * @return string formatted to ease debugging
56      */
57     public String toDebugFormat(String indentation) {
58         StringBuilder sb = new StringBuilder();
59         String indent = (indentation == null ? &quot;\t\t&quot; : indentation);
60         sb.append(indent).append(&quot;at:     [&quot;).append(dateTime.toString()).append(&quot;]\n&quot;);
61         sb.append(indent).append(&quot;script: [&quot;).append(script)             .append(&quot;]\n&quot;);
62 
63         for (Integer scope : (Set&lt;Integer&gt;) bindings.keySet()) {
64             sb.append(indent).append(&quot;Bindings for scope # &quot;).append(scope);
65             if (scope == 100) sb.append(&quot; (ENGINE_SCOPE):&quot;);
66             else if (scope == 200) sb.append(&quot; (GLOBAL_SCOPE):&quot;);
67             else                 sb.append(&#39;:&#39;);
68             sb.append(&#39;\n&#39;);
69 
70             TreeMap&lt;String,Object&gt; treeMap = bindings.get(scope);
71             for (String k : (Set&lt;String&gt;) treeMap.keySet()) {
72                 sb.append(indent).append(&quot;\t[&quot;).append(k).append(&quot;]:\t[&quot;).append(treeMap.get(k)).append(&quot;]\n&quot;);
73             }
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>