<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.base/src/main/java/com/sun/javafx/PlatformUtil.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../javafx.graphics/src/main/java/com/sun/glass/ui/monocle/MonocleApplication.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.base/src/main/java/com/sun/javafx/PlatformUtil.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
221     /** Returns the directory containing the JavaFX runtime, or null
222      * if the directory cannot be located
223      */
224     private static File getRTDir() {
225         try {
226             String theClassFile = &quot;PlatformUtil.class&quot;;
227             Class theClass = PlatformUtil.class;
228             URL url = theClass.getResource(theClassFile);
229             if (url == null) return null;
230             String classUrlString = url.toString();
231             if (!classUrlString.startsWith(&quot;jar:file:&quot;)
232                     || classUrlString.indexOf(&#39;!&#39;) == -1) {
233                 return null;
234             }
235             // Strip out the &quot;jar:&quot; and everything after and including the &quot;!&quot;
236             String s = classUrlString.substring(4,
237                     classUrlString.lastIndexOf(&#39;!&#39;));
238             // Strip everything after the last &quot;/&quot; or &quot;\&quot; to get rid of the jar filename
239             int lastIndexOfSlash = Math.max(
240                     s.lastIndexOf(&#39;/&#39;), s.lastIndexOf(&#39;\\&#39;));
<span class="line-modified">241             return new File(new URL(s.substring(0, lastIndexOfSlash + 1)).getPath())</span>
<span class="line-removed">242                     .getParentFile();</span>
243         } catch (MalformedURLException e) {
244             return null;
245         }
246     }
247 
248     private static void loadProperties() {
249         final String vmname = System.getProperty(&quot;java.vm.name&quot;);
250         final String arch = System.getProperty(&quot;os.arch&quot;);
251 
252         if (! (javafxPlatform != null ||
253                 (arch != null &amp;&amp; arch.equals(&quot;arm&quot;)) ||
254                 (vmname != null &amp;&amp; vmname.indexOf(&quot;Embedded&quot;) &gt; 0))) {
255             return;
256         }
257         AccessController.doPrivileged((PrivilegedAction&lt;Void&gt;) () -&gt; {
258             final File rtDir = getRTDir();
259             final String propertyFilename = &quot;javafx.platform.properties&quot;;
260             File rtProperties = new File(rtDir, propertyFilename);
261             // First look for javafx.platform.properties in the JavaFX runtime
262             // Then in the installation directory of the JRE
</pre>
</td>
<td>
<hr />
<pre>
221     /** Returns the directory containing the JavaFX runtime, or null
222      * if the directory cannot be located
223      */
224     private static File getRTDir() {
225         try {
226             String theClassFile = &quot;PlatformUtil.class&quot;;
227             Class theClass = PlatformUtil.class;
228             URL url = theClass.getResource(theClassFile);
229             if (url == null) return null;
230             String classUrlString = url.toString();
231             if (!classUrlString.startsWith(&quot;jar:file:&quot;)
232                     || classUrlString.indexOf(&#39;!&#39;) == -1) {
233                 return null;
234             }
235             // Strip out the &quot;jar:&quot; and everything after and including the &quot;!&quot;
236             String s = classUrlString.substring(4,
237                     classUrlString.lastIndexOf(&#39;!&#39;));
238             // Strip everything after the last &quot;/&quot; or &quot;\&quot; to get rid of the jar filename
239             int lastIndexOfSlash = Math.max(
240                     s.lastIndexOf(&#39;/&#39;), s.lastIndexOf(&#39;\\&#39;));
<span class="line-modified">241             return new File(new URL(s.substring(0, lastIndexOfSlash + 1)).getPath());</span>

242         } catch (MalformedURLException e) {
243             return null;
244         }
245     }
246 
247     private static void loadProperties() {
248         final String vmname = System.getProperty(&quot;java.vm.name&quot;);
249         final String arch = System.getProperty(&quot;os.arch&quot;);
250 
251         if (! (javafxPlatform != null ||
252                 (arch != null &amp;&amp; arch.equals(&quot;arm&quot;)) ||
253                 (vmname != null &amp;&amp; vmname.indexOf(&quot;Embedded&quot;) &gt; 0))) {
254             return;
255         }
256         AccessController.doPrivileged((PrivilegedAction&lt;Void&gt;) () -&gt; {
257             final File rtDir = getRTDir();
258             final String propertyFilename = &quot;javafx.platform.properties&quot;;
259             File rtProperties = new File(rtDir, propertyFilename);
260             // First look for javafx.platform.properties in the JavaFX runtime
261             // Then in the installation directory of the JRE
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../javafx.graphics/src/main/java/com/sun/glass/ui/monocle/MonocleApplication.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>