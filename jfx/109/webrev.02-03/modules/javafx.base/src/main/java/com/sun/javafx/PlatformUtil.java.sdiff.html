<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.base/src/main/java/com/sun/javafx/PlatformUtil.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../module-info.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.base/src/main/java/com/sun/javafx/PlatformUtil.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2011, 2014, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 54     static {
 55         javafxPlatform = AccessController.doPrivileged((PrivilegedAction&lt;String&gt;) () -&gt; System.getProperty(&quot;javafx.platform&quot;));
 56         loadProperties();
 57         embedded = AccessController.doPrivileged((PrivilegedAction&lt;Boolean&gt;) () -&gt; Boolean.getBoolean(&quot;com.sun.javafx.isEmbedded&quot;));
 58         embeddedType = AccessController.doPrivileged((PrivilegedAction&lt;String&gt;) () -&gt; System.getProperty(&quot;embedded&quot;));
 59         useEGL = AccessController.doPrivileged((PrivilegedAction&lt;Boolean&gt;) () -&gt; Boolean.getBoolean(&quot;use.egl&quot;));
 60         if (useEGL) {
 61             doEGLCompositing = AccessController.doPrivileged((PrivilegedAction&lt;Boolean&gt;) () -&gt; Boolean.getBoolean(&quot;doNativeComposite&quot;));
 62         } else
 63             doEGLCompositing = false;
 64     }
 65 
 66     private static final boolean ANDROID = &quot;android&quot;.equals(javafxPlatform) || &quot;Dalvik&quot;.equals(System.getProperty(&quot;java.vm.name&quot;));
 67     private static final boolean WINDOWS = os.startsWith(&quot;Windows&quot;);
 68     private static final boolean WINDOWS_VISTA_OR_LATER = WINDOWS &amp;&amp; versionNumberGreaterThanOrEqualTo(6.0f);
 69     private static final boolean WINDOWS_7_OR_LATER = WINDOWS &amp;&amp; versionNumberGreaterThanOrEqualTo(6.1f);
 70     private static final boolean MAC = os.startsWith(&quot;Mac&quot;);
 71     private static final boolean LINUX = os.startsWith(&quot;Linux&quot;) &amp;&amp; !ANDROID;
 72     private static final boolean SOLARIS = os.startsWith(&quot;SunOS&quot;);
 73     private static final boolean IOS = os.startsWith(&quot;iOS&quot;);

 74 
 75     /**
 76      * Utility method used to determine whether the version number as
 77      * reported by system properties is greater than or equal to a given
 78      * value.
 79      *
 80      * @param value The value to test against.
 81      * @return false if the version number cannot be parsed as a float,
 82      *         otherwise the comparison against value.
 83      */
 84     private static boolean versionNumberGreaterThanOrEqualTo(float value) {
 85         try {
 86             return Float.parseFloat(version) &gt;= value;
 87         } catch (Exception e) {
 88             return false;
 89         }
 90     }
 91 
 92     /**
 93      * Returns true if the operating system is a form of Windows.
</pre>
<hr />
<pre>
160      * Returns true if the platform is embedded.
161      */
162     public static boolean isEmbedded() {
163         return embedded;
164     }
165 
166     /**
167      * Returns a string with the embedded type - ie eglx11, eglfb, dfb or null.
168      */
169     public static String getEmbeddedType() {
170         return embeddedType;
171     }
172 
173     /**
174      * Returns true if the operating system is iOS
175      */
176     public static boolean isIOS(){
177         return IOS;
178     }
179 







180     private static void loadPropertiesFromFile(final File file) {
181         Properties p = new Properties();
182         try {
183             InputStream in = new FileInputStream(file);
184             p.load(in);
185             in.close();
186         } catch (IOException e) {
187             e.printStackTrace();
188         }
189         if (javafxPlatform == null) {
190             javafxPlatform = p.getProperty(&quot;javafx.platform&quot;);
191         }
192         String prefix = javafxPlatform + &quot;.&quot;;
193         int prefixLength = prefix.length();
194         boolean foundPlatform = false;
195         for (Object o : p.keySet()) {
196             String key = (String) o;
197             if (key.startsWith(prefix)) {
198                 foundPlatform = true;
199                 String systemKey = key.substring(prefixLength);
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 54     static {
 55         javafxPlatform = AccessController.doPrivileged((PrivilegedAction&lt;String&gt;) () -&gt; System.getProperty(&quot;javafx.platform&quot;));
 56         loadProperties();
 57         embedded = AccessController.doPrivileged((PrivilegedAction&lt;Boolean&gt;) () -&gt; Boolean.getBoolean(&quot;com.sun.javafx.isEmbedded&quot;));
 58         embeddedType = AccessController.doPrivileged((PrivilegedAction&lt;String&gt;) () -&gt; System.getProperty(&quot;embedded&quot;));
 59         useEGL = AccessController.doPrivileged((PrivilegedAction&lt;Boolean&gt;) () -&gt; Boolean.getBoolean(&quot;use.egl&quot;));
 60         if (useEGL) {
 61             doEGLCompositing = AccessController.doPrivileged((PrivilegedAction&lt;Boolean&gt;) () -&gt; Boolean.getBoolean(&quot;doNativeComposite&quot;));
 62         } else
 63             doEGLCompositing = false;
 64     }
 65 
 66     private static final boolean ANDROID = &quot;android&quot;.equals(javafxPlatform) || &quot;Dalvik&quot;.equals(System.getProperty(&quot;java.vm.name&quot;));
 67     private static final boolean WINDOWS = os.startsWith(&quot;Windows&quot;);
 68     private static final boolean WINDOWS_VISTA_OR_LATER = WINDOWS &amp;&amp; versionNumberGreaterThanOrEqualTo(6.0f);
 69     private static final boolean WINDOWS_7_OR_LATER = WINDOWS &amp;&amp; versionNumberGreaterThanOrEqualTo(6.1f);
 70     private static final boolean MAC = os.startsWith(&quot;Mac&quot;);
 71     private static final boolean LINUX = os.startsWith(&quot;Linux&quot;) &amp;&amp; !ANDROID;
 72     private static final boolean SOLARIS = os.startsWith(&quot;SunOS&quot;);
 73     private static final boolean IOS = os.startsWith(&quot;iOS&quot;);
<span class="line-added"> 74     private static final boolean STATIC_BUILD = &quot;Substrate VM&quot;.equals(System.getProperty(&quot;java.vm.name&quot;));</span>
 75 
 76     /**
 77      * Utility method used to determine whether the version number as
 78      * reported by system properties is greater than or equal to a given
 79      * value.
 80      *
 81      * @param value The value to test against.
 82      * @return false if the version number cannot be parsed as a float,
 83      *         otherwise the comparison against value.
 84      */
 85     private static boolean versionNumberGreaterThanOrEqualTo(float value) {
 86         try {
 87             return Float.parseFloat(version) &gt;= value;
 88         } catch (Exception e) {
 89             return false;
 90         }
 91     }
 92 
 93     /**
 94      * Returns true if the operating system is a form of Windows.
</pre>
<hr />
<pre>
161      * Returns true if the platform is embedded.
162      */
163     public static boolean isEmbedded() {
164         return embedded;
165     }
166 
167     /**
168      * Returns a string with the embedded type - ie eglx11, eglfb, dfb or null.
169      */
170     public static String getEmbeddedType() {
171         return embeddedType;
172     }
173 
174     /**
175      * Returns true if the operating system is iOS
176      */
177     public static boolean isIOS(){
178         return IOS;
179     }
180 
<span class="line-added">181     /**</span>
<span class="line-added">182      * Returns true if the current runtime is a statically linked image</span>
<span class="line-added">183      */</span>
<span class="line-added">184     public static boolean isStaticBuild(){</span>
<span class="line-added">185         return STATIC_BUILD;</span>
<span class="line-added">186     }</span>
<span class="line-added">187 </span>
188     private static void loadPropertiesFromFile(final File file) {
189         Properties p = new Properties();
190         try {
191             InputStream in = new FileInputStream(file);
192             p.load(in);
193             in.close();
194         } catch (IOException e) {
195             e.printStackTrace();
196         }
197         if (javafxPlatform == null) {
198             javafxPlatform = p.getProperty(&quot;javafx.platform&quot;);
199         }
200         String prefix = javafxPlatform + &quot;.&quot;;
201         int prefixLength = prefix.length();
202         boolean foundPlatform = false;
203         for (Object o : p.keySet()) {
204             String key = (String) o;
205             if (key.startsWith(prefix)) {
206                 foundPlatform = true;
207                 String systemKey = key.substring(prefixLength);
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../module-info.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>