<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.swt/src/main/java/javafx/embed/swt/FXCanvas.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../javafx.swing/src/shims/java/javafx/embed/swing/JFXPanelShim.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../tests/system/src/test/java/test/robot/javafx/embed/swing/JFXPanelScaledTest.java.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.swt/src/main/java/javafx/embed/swt/FXCanvas.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -632,12 +632,12 @@</span>
              if (lastPixelsBuf == null) return;
              width = lastWidth;
              height = lastHeight;
              buffer = lastPixelsBuf;
          }
<span class="udiff-line-modified-removed">-         width = (int)Math.round(width * scaleFactor);</span>
<span class="udiff-line-modified-removed">-         height = (int)Math.round(height * scaleFactor);</span>
<span class="udiff-line-modified-added">+         width = (int)Math.ceil(width * scaleFactor);</span>
<span class="udiff-line-modified-added">+         height = (int)Math.ceil(height * scaleFactor);</span>
  
          // Consider optimizing this
          ImageData imageData = null;
          if (&quot;win32&quot;.equals(SWT.getPlatform())) {
              PaletteData palette = new PaletteData(0xFF00, 0xFF0000, 0xFF000000);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1051,12 +1051,12 @@</span>
      private void resizePixelBuffer(double newScaleFactor) {
          lastPixelsBuf = null;
          if ((pWidth &lt;= 0) || (pHeight &lt;= 0)) {
              pixelsBuf = null;
          } else {
<span class="udiff-line-modified-removed">-             pixelsBuf = IntBuffer.allocate((int)Math.round(pWidth * newScaleFactor) *</span>
<span class="udiff-line-modified-removed">-                                            (int)Math.round(pHeight * newScaleFactor));</span>
<span class="udiff-line-modified-added">+             pixelsBuf = IntBuffer.allocate((int)Math.ceil(pWidth * newScaleFactor) *</span>
<span class="udiff-line-modified-added">+                                            (int)Math.ceil(pHeight * newScaleFactor));</span>
              // The bg color may show through on resize. See RT-34380.
              RGB rgb = getBackground().getRGB();
              Arrays.fill(pixelsBuf.array(), rgb.red &lt;&lt; 16 | rgb.green &lt;&lt; 8 | rgb.blue);
          }
      }
</pre>
<center><a href="../../../../../../../javafx.swing/src/shims/java/javafx/embed/swing/JFXPanelShim.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../tests/system/src/test/java/test/robot/javafx/embed/swing/JFXPanelScaledTest.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>