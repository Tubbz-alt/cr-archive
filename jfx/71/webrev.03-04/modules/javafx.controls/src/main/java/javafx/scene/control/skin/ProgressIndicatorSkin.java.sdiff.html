<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/main/java/javafx/scene/control/skin/ProgressIndicatorSkin.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../tests/system/src/test/java/test/javafx/scene/control/ProgressIndicatorLeakTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.controls/src/main/java/javafx/scene/control/skin/ProgressIndicatorSkin.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package javafx.scene.control.skin;
 27 
 28 import com.sun.javafx.scene.NodeHelper;
 29 import com.sun.javafx.scene.control.skin.Utils;
 30 import java.util.ArrayList;
 31 import java.util.Collections;
 32 import java.util.List;
<span class="line-removed"> 33 import java.util.function.Consumer;</span>
 34 
 35 import javafx.animation.Animation;
 36 import javafx.animation.KeyFrame;
 37 import javafx.animation.KeyValue;
 38 import javafx.animation.Timeline;
 39 import javafx.beans.property.BooleanProperty;
 40 import javafx.beans.property.IntegerProperty;
 41 import javafx.beans.property.ObjectProperty;
<span class="line-removed"> 42 import javafx.beans.value.ObservableValue;</span>
 43 import javafx.beans.value.WritableValue;
 44 import javafx.collections.FXCollections;
 45 import javafx.collections.ObservableList;
 46 import javafx.geometry.NodeOrientation;
 47 import javafx.geometry.VPos;
 48 import javafx.scene.Node;
 49 import javafx.scene.control.Control;
 50 import javafx.scene.control.ProgressIndicator;
 51 import javafx.scene.control.SkinBase;
 52 import javafx.scene.layout.Pane;
 53 import javafx.scene.layout.Region;
 54 import javafx.scene.layout.StackPane;
 55 import javafx.scene.paint.Color;
 56 import javafx.scene.paint.Paint;
 57 import javafx.scene.shape.Arc;
 58 import javafx.scene.shape.ArcType;
 59 import javafx.scene.shape.Circle;
<span class="line-removed"> 60 import javafx.scene.text.Font;</span>
 61 import javafx.scene.text.Text;
 62 import javafx.scene.text.TextBoundsType;
 63 import javafx.scene.transform.Scale;
 64 import javafx.util.Duration;
 65 import javafx.css.CssMetaData;
 66 import javafx.css.StyleableObjectProperty;
 67 import javafx.css.StyleableProperty;
 68 import javafx.css.StyleableBooleanProperty;
 69 import javafx.css.StyleableIntegerProperty;
 70 import javafx.css.converter.BooleanConverter;
 71 import javafx.css.converter.PaintConverter;
 72 import javafx.css.converter.SizeConverter;
 73 import com.sun.javafx.scene.control.skin.resources.ControlResources;
 74 import javafx.css.Styleable;
 75 
 76 /**
 77  * Default skin implementation for the {@link ProgressIndicator} control.
 78  *
 79  * @see ProgressIndicator
 80  * @since 9
</pre>
<hr />
<pre>
311     @Override protected double computeMaxWidth(double height, double topInset, double rightInset, double bottomInset, double leftInset) {
312         return computePrefWidth(height, topInset, rightInset, bottomInset, leftInset);
313     }
314 
315     /** {@inheritDoc} */
316     @Override protected double computeMaxHeight(double width, double topInset, double rightInset, double bottomInset, double leftInset) {
317         return computePrefHeight(width, topInset, rightInset, bottomInset, leftInset);
318     }
319 
320 
321     /***************************************************************************
322      *                                                                         *
323      * Private implementation                                                  *
324      *                                                                         *
325      **************************************************************************/
326 
327     void initialize() {
328         boolean isIndeterminate = control.isIndeterminate();
329         if (isIndeterminate) {
330             // clean up the old determinateIndicator
<span class="line-modified">331             if(determinateIndicator != null) {</span>
332                 determinateIndicator.unregisterListener();
333             }
334             determinateIndicator = null;
335 
336             // create spinner
337             spinner = new IndeterminateSpinner(spinEnabled.get(), progressColor.get());
338             getChildren().setAll(spinner);
339             if (NodeHelper.isTreeShowing(control)) {
340                 if (indeterminateTransition != null) {
341                     indeterminateTransition.play();
342                 }
343             }
344         } else {
345             // clean up after spinner
346             if (spinner != null) {
347                 if (indeterminateTransition != null) {
348                     indeterminateTransition.stop();
349                 }
350                 spinner = null;
351             }
</pre>
</td>
<td>
<hr />
<pre>
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package javafx.scene.control.skin;
 27 
 28 import com.sun.javafx.scene.NodeHelper;
 29 import com.sun.javafx.scene.control.skin.Utils;
 30 import java.util.ArrayList;
 31 import java.util.Collections;
 32 import java.util.List;

 33 
 34 import javafx.animation.Animation;
 35 import javafx.animation.KeyFrame;
 36 import javafx.animation.KeyValue;
 37 import javafx.animation.Timeline;
 38 import javafx.beans.property.BooleanProperty;
 39 import javafx.beans.property.IntegerProperty;
 40 import javafx.beans.property.ObjectProperty;

 41 import javafx.beans.value.WritableValue;
 42 import javafx.collections.FXCollections;
 43 import javafx.collections.ObservableList;
 44 import javafx.geometry.NodeOrientation;
 45 import javafx.geometry.VPos;
 46 import javafx.scene.Node;
 47 import javafx.scene.control.Control;
 48 import javafx.scene.control.ProgressIndicator;
 49 import javafx.scene.control.SkinBase;
 50 import javafx.scene.layout.Pane;
 51 import javafx.scene.layout.Region;
 52 import javafx.scene.layout.StackPane;
 53 import javafx.scene.paint.Color;
 54 import javafx.scene.paint.Paint;
 55 import javafx.scene.shape.Arc;
 56 import javafx.scene.shape.ArcType;
 57 import javafx.scene.shape.Circle;

 58 import javafx.scene.text.Text;
 59 import javafx.scene.text.TextBoundsType;
 60 import javafx.scene.transform.Scale;
 61 import javafx.util.Duration;
 62 import javafx.css.CssMetaData;
 63 import javafx.css.StyleableObjectProperty;
 64 import javafx.css.StyleableProperty;
 65 import javafx.css.StyleableBooleanProperty;
 66 import javafx.css.StyleableIntegerProperty;
 67 import javafx.css.converter.BooleanConverter;
 68 import javafx.css.converter.PaintConverter;
 69 import javafx.css.converter.SizeConverter;
 70 import com.sun.javafx.scene.control.skin.resources.ControlResources;
 71 import javafx.css.Styleable;
 72 
 73 /**
 74  * Default skin implementation for the {@link ProgressIndicator} control.
 75  *
 76  * @see ProgressIndicator
 77  * @since 9
</pre>
<hr />
<pre>
308     @Override protected double computeMaxWidth(double height, double topInset, double rightInset, double bottomInset, double leftInset) {
309         return computePrefWidth(height, topInset, rightInset, bottomInset, leftInset);
310     }
311 
312     /** {@inheritDoc} */
313     @Override protected double computeMaxHeight(double width, double topInset, double rightInset, double bottomInset, double leftInset) {
314         return computePrefHeight(width, topInset, rightInset, bottomInset, leftInset);
315     }
316 
317 
318     /***************************************************************************
319      *                                                                         *
320      * Private implementation                                                  *
321      *                                                                         *
322      **************************************************************************/
323 
324     void initialize() {
325         boolean isIndeterminate = control.isIndeterminate();
326         if (isIndeterminate) {
327             // clean up the old determinateIndicator
<span class="line-modified">328             if (determinateIndicator != null) {</span>
329                 determinateIndicator.unregisterListener();
330             }
331             determinateIndicator = null;
332 
333             // create spinner
334             spinner = new IndeterminateSpinner(spinEnabled.get(), progressColor.get());
335             getChildren().setAll(spinner);
336             if (NodeHelper.isTreeShowing(control)) {
337                 if (indeterminateTransition != null) {
338                     indeterminateTransition.play();
339                 }
340             }
341         } else {
342             // clean up after spinner
343             if (spinner != null) {
344                 if (indeterminateTransition != null) {
345                     indeterminateTransition.stop();
346                 }
347                 spinner = null;
348             }
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../tests/system/src/test/java/test/javafx/scene/control/ProgressIndicatorLeakTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>