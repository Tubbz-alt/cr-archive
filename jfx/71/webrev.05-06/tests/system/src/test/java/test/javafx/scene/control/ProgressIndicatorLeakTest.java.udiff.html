<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff tests/system/src/test/java/test/javafx/scene/control/ProgressIndicatorLeakTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>tests/system/src/test/java/test/javafx/scene/control/ProgressIndicatorLeakTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -85,32 +85,22 @@</span>
      }
  
      public static void assertCollectable(WeakReference weakReference) throws Exception {
          int counter = 0;
  
<span class="udiff-line-removed">-         createGarbage();</span>
          System.gc();
          System.runFinalization();
  
          while (counter &lt; 10 &amp;&amp; weakReference.get() != null) {
              Thread.sleep(100);
              counter = counter + 1;
<span class="udiff-line-removed">-             createGarbage();</span>
              System.gc();
              System.runFinalization();
          }
  
          Assert.assertNull(weakReference.get());
      }
<span class="udiff-line-removed">-     public static void createGarbage() {</span>
<span class="udiff-line-removed">-         LinkedList list = new LinkedList&lt;Integer&gt;();</span>
<span class="udiff-line-removed">-         int counter = 0;</span>
<span class="udiff-line-removed">-         while (counter &lt; 999999) {</span>
<span class="udiff-line-removed">-             counter += 1;</span>
<span class="udiff-line-removed">-             list.add(1);</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-removed">-     }</span>
  
      @AfterClass
      public static void teardownOnce() {
          Platform.runLater(() -&gt; {
              stage.hide();
</pre>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>