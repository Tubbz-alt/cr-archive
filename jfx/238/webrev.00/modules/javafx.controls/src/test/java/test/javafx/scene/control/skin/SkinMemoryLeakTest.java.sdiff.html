<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/test/java/test/javafx/scene/control/skin/SkinMemoryLeakTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../main/java/javafx/scene/control/skin/ToolBarSkin.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.controls/src/test/java/test/javafx/scene/control/skin/SkinMemoryLeakTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 90         installDefaultSkin(control);
 91         WeakReference&lt;?&gt; weakRef = new WeakReference&lt;&gt;(replaceSkin(control));
 92         assertNotNull(weakRef.get());
 93         attemptGC(weakRef);
 94         assertEquals(&quot;Skin must be gc&#39;ed&quot;, null, weakRef.get());
 95     }
 96 
 97 //------------ parameters
 98 
 99     // Note: name property not supported before junit 4.11
100     @Parameterized.Parameters //(name = &quot;{index}: {0} &quot;)
101     public static Collection&lt;Object[]&gt; data() {
102         List&lt;Class&lt;Control&gt;&gt; controlClasses = getControlClasses();
103         // FIXME as part of JDK-8241364
104         // The default skins of these controls are leaking
105         // step 1: file issues (where not yet done), add informal ignore to entry
106         // step 2: fix and remove from list
107         List&lt;Class&lt;? extends Control&gt;&gt; leakingClasses = List.of(
108                 Accordion.class,
109                 ButtonBar.class,
<span class="line-removed">110                 // @Ignore(&quot;8244657&quot;)</span>
<span class="line-removed">111                 ChoiceBox.class,</span>
112                 ColorPicker.class,
113                 ComboBox.class,
114                 DatePicker.class,
115                 ListCell.class,
116                 ListView.class,
117                 MenuBar.class,
118                 MenuButton.class,
119                 Pagination.class,
120                 PasswordField.class,
121                 ScrollBar.class,
122                 ScrollPane.class,
123                 // @Ignore(&quot;8245145&quot;)
124                 Spinner.class,
125                 SplitMenuButton.class,
126                 SplitPane.class,
127                 TableRow.class,
128                 TableView.class,
129                 // @Ignore(&quot;8242621&quot;)
130                 TabPane.class,
131                 // @Ignore(&quot;8244419&quot;)
132                 TextArea.class,
133                 // @Ignore(&quot;8240506&quot;)
134                 TextField.class,
<span class="line-removed">135                 ToolBar.class,</span>
136                 TreeCell.class,
137                 TreeTableRow.class,
138                 TreeTableView.class,
139                 TreeView.class
140         );
141         // remove the known issues to make the test pass
142         controlClasses.removeAll(leakingClasses);
143         // instantiate controls
144         List&lt;Control&gt; controls = controlClasses.stream()
145                 .map(ControlSkinFactory::createControl)
146                 .collect(Collectors.toList());
147         return asArrays(controls);
148     }
149 
150     public SkinMemoryLeakTest(Control control) {
151         this.control = control;
152     }
153 
154 //------------ setup
155 
</pre>
</td>
<td>
<hr />
<pre>
 90         installDefaultSkin(control);
 91         WeakReference&lt;?&gt; weakRef = new WeakReference&lt;&gt;(replaceSkin(control));
 92         assertNotNull(weakRef.get());
 93         attemptGC(weakRef);
 94         assertEquals(&quot;Skin must be gc&#39;ed&quot;, null, weakRef.get());
 95     }
 96 
 97 //------------ parameters
 98 
 99     // Note: name property not supported before junit 4.11
100     @Parameterized.Parameters //(name = &quot;{index}: {0} &quot;)
101     public static Collection&lt;Object[]&gt; data() {
102         List&lt;Class&lt;Control&gt;&gt; controlClasses = getControlClasses();
103         // FIXME as part of JDK-8241364
104         // The default skins of these controls are leaking
105         // step 1: file issues (where not yet done), add informal ignore to entry
106         // step 2: fix and remove from list
107         List&lt;Class&lt;? extends Control&gt;&gt; leakingClasses = List.of(
108                 Accordion.class,
109                 ButtonBar.class,


110                 ColorPicker.class,
111                 ComboBox.class,
112                 DatePicker.class,
113                 ListCell.class,
114                 ListView.class,
115                 MenuBar.class,
116                 MenuButton.class,
117                 Pagination.class,
118                 PasswordField.class,
119                 ScrollBar.class,
120                 ScrollPane.class,
121                 // @Ignore(&quot;8245145&quot;)
122                 Spinner.class,
123                 SplitMenuButton.class,
124                 SplitPane.class,
125                 TableRow.class,
126                 TableView.class,
127                 // @Ignore(&quot;8242621&quot;)
128                 TabPane.class,
129                 // @Ignore(&quot;8244419&quot;)
130                 TextArea.class,
131                 // @Ignore(&quot;8240506&quot;)
132                 TextField.class,

133                 TreeCell.class,
134                 TreeTableRow.class,
135                 TreeTableView.class,
136                 TreeView.class
137         );
138         // remove the known issues to make the test pass
139         controlClasses.removeAll(leakingClasses);
140         // instantiate controls
141         List&lt;Control&gt; controls = controlClasses.stream()
142                 .map(ControlSkinFactory::createControl)
143                 .collect(Collectors.toList());
144         return asArrays(controls);
145     }
146 
147     public SkinMemoryLeakTest(Control control) {
148         this.control = control;
149     }
150 
151 //------------ setup
152 
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../main/java/javafx/scene/control/skin/ToolBarSkin.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>