<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff tests/3DLighting/attenuation/CameraScene3D.java</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../index.html" target="_top">index</a> <a href="Environment.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>tests/3DLighting/attenuation/CameraScene3D.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 95             if (e.getEventType() == ScrollEvent.SCROLL_STARTED)
 96                 pan(e.getDeltaX(), e.getDeltaY());
 97             // mouse scroll for zoom
 98             else
 99                 zoom(e.getDeltaY());
100         });
101 
102         setOnMousePressed(e -&gt; {
103             startX = curX = e.getX();
104             startY = curY = e.getY();
105         });
106 
107         setOnMouseDragged(e -&gt; {
108             startX = curX;
109             startY = curY;
110             curX = e.getX();
111             curY = e.getY();
112             double deltaX = curX - startX;
113             double deltaY = curY - startY;
114             if (e.getButton() == MouseButton.PRIMARY) {
<span class="line-modified">115             	pan(deltaX, deltaY);</span>
116             } else if (e.getButton() == MouseButton.SECONDARY) {
117                 boolean positiveX = curX &gt; getWidth() / 2;
118                 boolean positiveY = curY &gt; getHeight() / 2;
119                 deltaX = positiveY ? -deltaX : deltaX;
120                 deltaY = positiveX ? deltaY : -deltaY;
121                 rotate((deltaX + deltaY)/2);
122             }
123         });
124     }
125 
126     private final double scaleFactor = 500;
127 
128     private void pan(double deltaX, double deltaY) {
129         double angle = Math.toRadians(zAngle.get());
130         double cosA = Math.cos(angle);
131         double sinA = Math.sin(angle);
132         double rotatedDeltaX = deltaX *  cosA + deltaY * sinA;
133         double rotatedDeltaY = deltaX * -sinA + deltaY * cosA;
134         double panFactor = panSensitivity.get() * zoom.get() / scaleFactor;
135         double newX = xPan.get() + rotatedDeltaX * panFactor;
136         double newY = yPan.get() + rotatedDeltaY * panFactor;
137         xPan.set(newX);
138         yPan.set(newY);
139     }
140 
141     private void zoom(double amount) {
142         zoom.set(zoom.get() - amount * zoomSensitivity.get() * zoom.get() / scaleFactor);
143     }
144 
145     private void rotate(double amount) {
146         zAngle.set(zAngle.get() - amount * zRotationSensitivity.get());
147     }
<span class="line-modified">148 }</span>
</pre>
</td>
<td>
<hr />
<pre>
 95             if (e.getEventType() == ScrollEvent.SCROLL_STARTED)
 96                 pan(e.getDeltaX(), e.getDeltaY());
 97             // mouse scroll for zoom
 98             else
 99                 zoom(e.getDeltaY());
100         });
101 
102         setOnMousePressed(e -&gt; {
103             startX = curX = e.getX();
104             startY = curY = e.getY();
105         });
106 
107         setOnMouseDragged(e -&gt; {
108             startX = curX;
109             startY = curY;
110             curX = e.getX();
111             curY = e.getY();
112             double deltaX = curX - startX;
113             double deltaY = curY - startY;
114             if (e.getButton() == MouseButton.PRIMARY) {
<span class="line-modified">115                 pan(deltaX, deltaY);</span>
116             } else if (e.getButton() == MouseButton.SECONDARY) {
117                 boolean positiveX = curX &gt; getWidth() / 2;
118                 boolean positiveY = curY &gt; getHeight() / 2;
119                 deltaX = positiveY ? -deltaX : deltaX;
120                 deltaY = positiveX ? deltaY : -deltaY;
121                 rotate((deltaX + deltaY)/2);
122             }
123         });
124     }
125 
126     private final double scaleFactor = 500;
127 
128     private void pan(double deltaX, double deltaY) {
129         double angle = Math.toRadians(zAngle.get());
130         double cosA = Math.cos(angle);
131         double sinA = Math.sin(angle);
132         double rotatedDeltaX = deltaX *  cosA + deltaY * sinA;
133         double rotatedDeltaY = deltaX * -sinA + deltaY * cosA;
134         double panFactor = panSensitivity.get() * zoom.get() / scaleFactor;
135         double newX = xPan.get() + rotatedDeltaX * panFactor;
136         double newY = yPan.get() + rotatedDeltaY * panFactor;
137         xPan.set(newX);
138         yPan.set(newY);
139     }
140 
141     private void zoom(double amount) {
142         zoom.set(zoom.get() - amount * zoomSensitivity.get() * zoom.get() / scaleFactor);
143     }
144 
145     private void rotate(double amount) {
146         zAngle.set(zAngle.get() - amount * zRotationSensitivity.get());
147     }
<span class="line-modified">148 }</span>
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../index.html" target="_top">index</a> <a href="Environment.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>