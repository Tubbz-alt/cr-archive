<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/rendering/RenderLayerFilters.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="RenderLayer.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="svg/RenderSVGResourceClipper.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/rendering/RenderLayerFilters.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 50     removeReferenceFilterClients();
 51 }
 52 
 53 void RenderLayerFilters::setFilter(RefPtr&lt;CSSFilter&gt;&amp;&amp; filter)
 54 {
 55     m_filter = WTFMove(filter);
 56 }
 57 
 58 bool RenderLayerFilters::hasFilterThatMovesPixels() const
 59 {
 60     return m_filter &amp;&amp; m_filter-&gt;hasFilterThatMovesPixels();
 61 }
 62 
 63 bool RenderLayerFilters::hasFilterThatShouldBeRestrictedBySecurityOrigin() const
 64 {
 65     return m_filter &amp;&amp; m_filter-&gt;hasFilterThatShouldBeRestrictedBySecurityOrigin();
 66 }
 67 
 68 void RenderLayerFilters::notifyFinished(CachedResource&amp;)
 69 {
<span class="line-modified"> 70     m_layer.filterNeedsRepaint();</span>




 71 }
 72 
 73 void RenderLayerFilters::updateReferenceFilterClients(const FilterOperations&amp; operations)
 74 {
 75     removeReferenceFilterClients();
 76 
 77     for (auto&amp; operation : operations.operations()) {
 78         if (!is&lt;ReferenceFilterOperation&gt;(*operation))
 79             continue;
 80 
 81         auto&amp; referenceOperation = downcast&lt;ReferenceFilterOperation&gt;(*operation);
 82         auto* documentReference = referenceOperation.cachedSVGDocumentReference();
 83         if (auto* cachedSVGDocument = documentReference ? documentReference-&gt;document() : nullptr) {
 84             // Reference is external; wait for notifyFinished().
 85             cachedSVGDocument-&gt;addClient(*this);
 86             m_externalSVGReferences.append(cachedSVGDocument);
 87         } else {
 88             // Reference is internal; add layer as a client so we can trigger filter repaint on SVG attribute change.
 89             auto* filterElement = m_layer.renderer().document().getElementById(referenceOperation.fragment());
 90             if (!filterElement)
</pre>
</td>
<td>
<hr />
<pre>
 50     removeReferenceFilterClients();
 51 }
 52 
 53 void RenderLayerFilters::setFilter(RefPtr&lt;CSSFilter&gt;&amp;&amp; filter)
 54 {
 55     m_filter = WTFMove(filter);
 56 }
 57 
 58 bool RenderLayerFilters::hasFilterThatMovesPixels() const
 59 {
 60     return m_filter &amp;&amp; m_filter-&gt;hasFilterThatMovesPixels();
 61 }
 62 
 63 bool RenderLayerFilters::hasFilterThatShouldBeRestrictedBySecurityOrigin() const
 64 {
 65     return m_filter &amp;&amp; m_filter-&gt;hasFilterThatShouldBeRestrictedBySecurityOrigin();
 66 }
 67 
 68 void RenderLayerFilters::notifyFinished(CachedResource&amp;)
 69 {
<span class="line-modified"> 70     // FIXME: This really shouldn&#39;t have to invalidate layer composition,</span>
<span class="line-added"> 71     // but tests like css3/filters/effect-reference-delete.html fail if that doesn&#39;t happen.</span>
<span class="line-added"> 72     if (auto* enclosingElement = m_layer.enclosingElement())</span>
<span class="line-added"> 73         enclosingElement-&gt;invalidateStyleAndLayerComposition();</span>
<span class="line-added"> 74     m_layer.renderer().repaint();</span>
 75 }
 76 
 77 void RenderLayerFilters::updateReferenceFilterClients(const FilterOperations&amp; operations)
 78 {
 79     removeReferenceFilterClients();
 80 
 81     for (auto&amp; operation : operations.operations()) {
 82         if (!is&lt;ReferenceFilterOperation&gt;(*operation))
 83             continue;
 84 
 85         auto&amp; referenceOperation = downcast&lt;ReferenceFilterOperation&gt;(*operation);
 86         auto* documentReference = referenceOperation.cachedSVGDocumentReference();
 87         if (auto* cachedSVGDocument = documentReference ? documentReference-&gt;document() : nullptr) {
 88             // Reference is external; wait for notifyFinished().
 89             cachedSVGDocument-&gt;addClient(*this);
 90             m_externalSVGReferences.append(cachedSVGDocument);
 91         } else {
 92             // Reference is internal; add layer as a client so we can trigger filter repaint on SVG attribute change.
 93             auto* filterElement = m_layer.renderer().document().getElementById(referenceOperation.fragment());
 94             if (!filterElement)
</pre>
</td>
</tr>
</table>
<center><a href="RenderLayer.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="svg/RenderSVGResourceClipper.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>