<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.fxml/src/main/java/javafx/fxml/FXMLLoader.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../tests/system/src/test/java/test/launchertest/ModuleLauncherTest.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.fxml/src/main/java/javafx/fxml/FXMLLoader.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1562,11 ***</span>
                      Bindings engineBindings = engine.getBindings(ScriptContext.ENGINE_SCOPE);
                      String filename = location.getPath();
                      engineBindings.put(engine.FILENAME, filename);
  
                      InputStreamReader scriptReader = null;
<span class="line-modified">!                     String script=null;</span>
                      try {
                          scriptReader = new InputStreamReader(location.openStream(), charset);
                          StringBuilder sb = new StringBuilder();
                          final int bufSize = 4096;
                          char[] charBuffer = new char[bufSize];
<span class="line-new-header">--- 1562,11 ---</span>
                      Bindings engineBindings = engine.getBindings(ScriptContext.ENGINE_SCOPE);
                      String filename = location.getPath();
                      engineBindings.put(engine.FILENAME, filename);
  
                      InputStreamReader scriptReader = null;
<span class="line-modified">!                     String script = null;</span>
                      try {
                          scriptReader = new InputStreamReader(location.openStream(), charset);
                          StringBuilder sb = new StringBuilder();
                          final int bufSize = 4096;
                          char[] charBuffer = new char[bufSize];
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1587,11 ***</span>
                      }
                      try {
                          if (engine instanceof Compilable &amp;&amp; compileScript) {
                              CompiledScript compiledScript = null;
                              try {
<span class="line-modified">!                                 compiledScript=((Compilable) engine).compile(script);</span>
                              } catch (ScriptException compileExc) {
                                  Logging.getJavaFXLogger().warning(filename + &quot;: compiling caused \&quot;&quot; + compileExc +
                                      &quot;\&quot;, falling back to evaluating script in uncompiled mode&quot;);
                              }
                              if (compiledScript != null) {
<span class="line-new-header">--- 1587,11 ---</span>
                      }
                      try {
                          if (engine instanceof Compilable &amp;&amp; compileScript) {
                              CompiledScript compiledScript = null;
                              try {
<span class="line-modified">!                                 compiledScript = ((Compilable) engine).compile(script);</span>
                              } catch (ScriptException compileExc) {
                                  Logging.getJavaFXLogger().warning(filename + &quot;: compiling caused \&quot;&quot; + compileExc +
                                      &quot;\&quot;, falling back to evaluating script in uncompiled mode&quot;);
                              }
                              if (compiledScript != null) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1627,11 ***</span>
                                         + (getLineNumber() - (int) script.codePoints().filter(c -&gt; c == &#39;\n&#39;).count());
                      engineBindings.put(scriptEngine.FILENAME, filename);
                      if (scriptEngine instanceof Compilable &amp;&amp; compileScript) {
                          CompiledScript compiledScript = null;
                          try {
<span class="line-modified">!                             compiledScript=((Compilable) scriptEngine).compile(script);</span>
                          } catch (ScriptException compileExc) {
                              Logging.getJavaFXLogger().warning(filename + &quot;: compiling caused \&quot;&quot; + compileExc +
                                  &quot;\&quot;, falling back to evaluating script in uncompiled mode&quot;);
                          }
                          if (compiledScript != null) {
<span class="line-new-header">--- 1627,11 ---</span>
                                         + (getLineNumber() - (int) script.codePoints().filter(c -&gt; c == &#39;\n&#39;).count());
                      engineBindings.put(scriptEngine.FILENAME, filename);
                      if (scriptEngine instanceof Compilable &amp;&amp; compileScript) {
                          CompiledScript compiledScript = null;
                          try {
<span class="line-modified">!                             compiledScript = ((Compilable) scriptEngine).compile(script);</span>
                          } catch (ScriptException compileExc) {
                              Logging.getJavaFXLogger().warning(filename + &quot;: compiling caused \&quot;&quot; + compileExc +
                                  &quot;\&quot;, falling back to evaluating script in uncompiled mode&quot;);
                          }
                          if (compiledScript != null) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1734,11 ***</span>
      private static class ScriptEventHandler implements EventHandler&lt;Event&gt; {
          public final String script;
          public final ScriptEngine scriptEngine;
          public final String filename;
          public CompiledScript compiledScript;
<span class="line-modified">!         public boolean isCompiled=false;</span>
  
          public ScriptEventHandler(String script, ScriptEngine scriptEngine, String filename) {
              this.script = script;
              this.scriptEngine = scriptEngine;
              this.filename = filename;
<span class="line-new-header">--- 1734,11 ---</span>
      private static class ScriptEventHandler implements EventHandler&lt;Event&gt; {
          public final String script;
          public final ScriptEngine scriptEngine;
          public final String filename;
          public CompiledScript compiledScript;
<span class="line-modified">!         public boolean isCompiled = false;</span>
  
          public ScriptEventHandler(String script, ScriptEngine scriptEngine, String filename) {
              this.script = script;
              this.scriptEngine = scriptEngine;
              this.filename = filename;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2755,13 ***</span>
          if (piTarget.equals(LANGUAGE_PROCESSING_INSTRUCTION)) {
              processLanguage();
          } else if (piTarget.equals(IMPORT_PROCESSING_INSTRUCTION)) {
              processImport();
          } else if (piTarget.equals(COMPILE_PROCESSING_INSTRUCTION)) {
<span class="line-modified">!             String strCompile=xmlStreamReader.getPIData().trim();</span>
              // if PIData() is empty string then default to true, otherwise use Boolean.parseBoolean(string) to determine the boolean value
<span class="line-modified">!             compileScript = (strCompile.length()==0 ? true : Boolean.parseBoolean(strCompile));</span>
          }
      }
  
      private void processLanguage() throws LoadException {
          if (scriptEngine != null) {
<span class="line-new-header">--- 2755,13 ---</span>
          if (piTarget.equals(LANGUAGE_PROCESSING_INSTRUCTION)) {
              processLanguage();
          } else if (piTarget.equals(IMPORT_PROCESSING_INSTRUCTION)) {
              processImport();
          } else if (piTarget.equals(COMPILE_PROCESSING_INSTRUCTION)) {
<span class="line-modified">!             String strCompile = xmlStreamReader.getPIData().trim();</span>
              // if PIData() is empty string then default to true, otherwise use Boolean.parseBoolean(string) to determine the boolean value
<span class="line-modified">!             compileScript = (strCompile.length() == 0 ? true : Boolean.parseBoolean(strCompile));</span>
          }
      }
  
      private void processLanguage() throws LoadException {
          if (scriptEngine != null) {
</pre>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../tests/system/src/test/java/test/launchertest/ModuleLauncherTest.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>