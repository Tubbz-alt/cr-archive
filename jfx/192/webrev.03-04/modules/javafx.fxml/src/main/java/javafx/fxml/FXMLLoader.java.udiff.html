<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.fxml/src/main/java/javafx/fxml/FXMLLoader.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../docs/javafx/fxml/doc-files/introduction_to_fxml.html.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../tests/system/src/testscriptapp2/java/mymod/myapp2/FXMLScriptDeployment2Compile_Fail_Compilation.java.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.fxml/src/main/java/javafx/fxml/FXMLLoader.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1570,13 +1570,13 @@</span>
                          StringBuilder sb = new StringBuilder();
                          final int bufSize = 4096;
                          char[] charBuffer = new char[bufSize];
                          int n;
                          do {
<span class="udiff-line-modified-removed">-                           n = scriptReader.read(charBuffer,0,bufSize);</span>
<span class="udiff-line-modified-removed">-                           if (n &gt; 0) {</span>
<span class="udiff-line-modified-removed">-                               sb.append(new String(charBuffer,0,n));</span>
<span class="udiff-line-modified-added">+                             n = scriptReader.read(charBuffer,0,bufSize);</span>
<span class="udiff-line-modified-added">+                             if (n &gt; 0) {</span>
<span class="udiff-line-modified-added">+                                 sb.append(new String(charBuffer,0,n));</span>
                            }
                          } while (n &gt; -1);
                          script = sb.toString();
                      } catch (IOException exception) {
                          throw constructLoadException(exception);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1589,22 +1589,23 @@</span>
                          if (engine instanceof Compilable &amp;&amp; compileScript) {
                              CompiledScript compiledScript = null;
                              try {
                                  compiledScript=((Compilable) engine).compile(script);
                              } catch (ScriptException compileExc) {
<span class="udiff-line-modified-removed">-                                Logging.getJavaFXLogger().warning(filename+&quot;: compiling caused \&quot;&quot;+compileExc+&quot;\&quot;, falling back to evaluating script in uncompiled mode&quot;);</span>
<span class="udiff-line-modified-added">+                                 Logging.getJavaFXLogger().warning(filename + &quot;: compiling caused \&quot;&quot; + compileExc +</span>
<span class="udiff-line-added">+                                     &quot;\&quot;, falling back to evaluating script in uncompiled mode&quot;);</span>
                              }
                              if (compiledScript != null) {
<span class="udiff-line-modified-removed">-                                compiledScript.eval();</span>
<span class="udiff-line-modified-added">+                                 compiledScript.eval();</span>
                              } else { // fallback to uncompiled mode
<span class="udiff-line-modified-removed">-                                engine.eval(script);</span>
<span class="udiff-line-modified-added">+                                 engine.eval(script);</span>
                              }
                          } else {
<span class="udiff-line-modified-removed">-                            engine.eval(script);</span>
<span class="udiff-line-modified-added">+                             engine.eval(script);</span>
                          }
                      } catch (ScriptException exception) {
<span class="udiff-line-modified-removed">-                         System.err.println(filename+&quot;: caused ScriptException&quot;);</span>
<span class="udiff-line-modified-added">+                         System.err.println(filename + &quot;: caused ScriptException&quot;);</span>
                          exception.printStackTrace();
                      }
                  }
                  catch (IOException exception) {
                    throw constructLoadException(exception);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1628,22 +1629,23 @@</span>
                      if (scriptEngine instanceof Compilable &amp;&amp; compileScript) {
                          CompiledScript compiledScript = null;
                          try {
                              compiledScript=((Compilable) scriptEngine).compile(script);
                          } catch (ScriptException compileExc) {
<span class="udiff-line-modified-removed">-                             Logging.getJavaFXLogger().warning(filename+&quot;: compiling caused \&quot;&quot;+compileExc+&quot;\&quot;, falling back to evaluating script in uncompiled mode&quot;);</span>
<span class="udiff-line-modified-added">+                             Logging.getJavaFXLogger().warning(filename + &quot;: compiling caused \&quot;&quot; + compileExc +</span>
<span class="udiff-line-added">+                                 &quot;\&quot;, falling back to evaluating script in uncompiled mode&quot;);</span>
                          }
                          if (compiledScript != null) {
<span class="udiff-line-modified-removed">-                            compiledScript.eval();</span>
<span class="udiff-line-modified-added">+                             compiledScript.eval();</span>
                          } else { // fallback to uncompiled mode
<span class="udiff-line-modified-removed">-                            scriptEngine.eval(script);</span>
<span class="udiff-line-modified-added">+                             scriptEngine.eval(script);</span>
                          }
                      } else {
<span class="udiff-line-modified-removed">-                        scriptEngine.eval(script);</span>
<span class="udiff-line-modified-added">+                         scriptEngine.eval(script);</span>
                      }
                  } catch (ScriptException exception) {
<span class="udiff-line-modified-removed">-                     System.err.println(filename+&quot;: caused ScriptException\n&quot;+exception.getMessage());</span>
<span class="udiff-line-modified-added">+                     System.err.println(filename + &quot;: caused ScriptException\n&quot; + exception.getMessage());</span>
                  }
              }
          }
  
          @Override
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1739,18 +1741,19 @@</span>
          public ScriptEventHandler(String script, ScriptEngine scriptEngine, String filename) {
              this.script = script;
              this.scriptEngine = scriptEngine;
              this.filename = filename;
              if (scriptEngine instanceof Compilable  &amp;&amp; compileScript) {
<span class="udiff-line-modified-removed">-                try {</span>
<span class="udiff-line-modified-removed">-                   // supply the filename to the scriptEngine engine scope Bindings in case it is needed for compilation</span>
<span class="udiff-line-modified-removed">-                   scriptEngine.getBindings(ScriptContext.ENGINE_SCOPE).put(scriptEngine.FILENAME, filename);</span>
<span class="udiff-line-modified-removed">-                   this.compiledScript = ((Compilable) scriptEngine).compile(script);</span>
<span class="udiff-line-modified-removed">-                   this.isCompiled = true;</span>
<span class="udiff-line-modified-removed">-                } catch (ScriptException compileExc){</span>
<span class="udiff-line-modified-removed">-                     Logging.getJavaFXLogger().warning(filename+&quot;: compiling caused \&quot;&quot;+compileExc+&quot;\&quot;, falling back to evaluating script in uncompiled mode&quot;);</span>
<span class="udiff-line-modified-removed">-                }</span>
<span class="udiff-line-modified-added">+                 try {</span>
<span class="udiff-line-modified-added">+                     // supply the filename to the scriptEngine engine scope Bindings in case it is needed for compilation</span>
<span class="udiff-line-modified-added">+                     scriptEngine.getBindings(ScriptContext.ENGINE_SCOPE).put(scriptEngine.FILENAME, filename);</span>
<span class="udiff-line-modified-added">+                     this.compiledScript = ((Compilable) scriptEngine).compile(script);</span>
<span class="udiff-line-modified-added">+                     this.isCompiled = true;</span>
<span class="udiff-line-modified-added">+                 } catch (ScriptException compileExc) {</span>
<span class="udiff-line-modified-added">+                     Logging.getJavaFXLogger().warning(filename + &quot;: compiling caused \&quot;&quot; + compileExc +</span>
<span class="udiff-line-modified-added">+                         &quot;\&quot;, falling back to evaluating script in uncompiled mode&quot;);</span>
<span class="udiff-line-added">+                 }</span>
              }
          }
  
          @Override
          public void handle(Event event) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1766,12 +1769,12 @@</span>
                  if (isCompiled) {
                     compiledScript.eval(localBindings);
                  } else {
                     scriptEngine.eval(script, localBindings);
                  }
<span class="udiff-line-modified-removed">-             } catch (ScriptException exception){</span>
<span class="udiff-line-modified-removed">-                 throw new RuntimeException(filename+&quot;: caused ScriptException&quot;, exception);</span>
<span class="udiff-line-modified-added">+             } catch (ScriptException exception) {</span>
<span class="udiff-line-modified-added">+                 throw new RuntimeException(filename + &quot;: caused ScriptException&quot;, exception);</span>
              }
          }
      }
  
      // Observable list change listener
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3632,7 +3635,5 @@</span>
                      return PACKAGE;
              }
          }
      }
  }
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- </span>
</pre>
<center><a href="../../../docs/javafx/fxml/doc-files/introduction_to_fxml.html.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../tests/system/src/testscriptapp2/java/mymod/myapp2/FXMLScriptDeployment2Compile_Fail_Compilation.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>