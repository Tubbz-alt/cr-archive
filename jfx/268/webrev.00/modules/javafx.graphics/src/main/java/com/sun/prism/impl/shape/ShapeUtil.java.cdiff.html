<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.graphics/src/main/java/com/sun/prism/impl/shape/ShapeUtil.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../PrismSettings.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../sw/SWContext.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.graphics/src/main/java/com/sun/prism/impl/shape/ShapeUtil.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 37,16 ***</span>
  public class ShapeUtil {
  
      private static final ShapeRasterizer shapeRasterizer;
      static {
          switch (PrismSettings.rasterizerSpec) {
<span class="line-removed">-             case JavaPisces:</span>
<span class="line-removed">-                 shapeRasterizer = new OpenPiscesRasterizer();</span>
<span class="line-removed">-                 break;</span>
<span class="line-removed">-             case NativePisces:</span>
<span class="line-removed">-                 shapeRasterizer = new NativePiscesRasterizer();</span>
<span class="line-removed">-                 break;</span>
              case FloatMarlin:
                  shapeRasterizer = new MarlinRasterizer();
                  break;
              default:
              case DoubleMarlin:
<span class="line-new-header">--- 37,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 62,42 ***</span>
                                            boolean close, boolean antialiasedShape)
      {
          return shapeRasterizer.getMaskData(shape, stroke, xformBounds, xform, close, antialiasedShape);
      }
  
<span class="line-modified">!     public static Shape createCenteredStrokedShape(Shape s, BasicStroke stroke)</span>
<span class="line-removed">-     {</span>
<span class="line-removed">-         if (PrismSettings.rasterizerSpec == RasterizerType.DoubleMarlin) {</span>
<span class="line-removed">-             return DMarlinRasterizer.createCenteredStrokedShape(s, stroke);</span>
<span class="line-removed">-         }</span>
          if (PrismSettings.rasterizerSpec == RasterizerType.FloatMarlin) {
              return MarlinRasterizer.createCenteredStrokedShape(s, stroke);
          }
<span class="line-removed">-         // JavaPisces fallback:</span>
<span class="line-removed">-         return createCenteredStrokedShapeOpenPisces(s, stroke);</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     private static Shape createCenteredStrokedShapeOpenPisces(Shape s, BasicStroke stroke)</span>
<span class="line-removed">-     {</span>
<span class="line-removed">-         final float lw = (stroke.getType() == BasicStroke.TYPE_CENTERED) ?</span>
<span class="line-removed">-                              stroke.getLineWidth() : stroke.getLineWidth() * 2.0f;</span>
<span class="line-removed">- </span>
<span class="line-removed">-         final Path2D p2d = new Path2D(Path2D.WIND_NON_ZERO);</span>
<span class="line-removed">- </span>
<span class="line-removed">-         PathConsumer2D pc2d =</span>
<span class="line-removed">-             new com.sun.openpisces.Stroker(p2d, lw, stroke.getEndCap(),</span>
<span class="line-removed">-                                                     stroke.getLineJoin(),</span>
<span class="line-removed">-                                                     stroke.getMiterLimit());</span>
<span class="line-removed">- </span>
<span class="line-removed">-         if (stroke.isDashed()) {</span>
<span class="line-removed">-             pc2d = new com.sun.openpisces.Dasher(pc2d, stroke.getDashArray(),</span>
<span class="line-removed">-                                                        stroke.getDashPhase());</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-         com.sun.prism.impl.shape.OpenPiscesPrismUtils.feedConsumer(</span>
<span class="line-removed">-                 s.getPathIterator(null), pc2d);</span>
  
<span class="line-modified">!         return p2d;</span>
      }
  
      /**
       * Private constructor to prevent instantiation.
       */
<span class="line-new-header">--- 56,17 ---</span>
                                            boolean close, boolean antialiasedShape)
      {
          return shapeRasterizer.getMaskData(shape, stroke, xformBounds, xform, close, antialiasedShape);
      }
  
<span class="line-modified">!     public static Shape createCenteredStrokedShape(Shape s, BasicStroke stroke) {</span>
          if (PrismSettings.rasterizerSpec == RasterizerType.FloatMarlin) {
              return MarlinRasterizer.createCenteredStrokedShape(s, stroke);
          }
  
<span class="line-modified">!         // Default to DoubleMarlin</span>
<span class="line-added">+         return DMarlinRasterizer.createCenteredStrokedShape(s, stroke);</span>
      }
  
      /**
       * Private constructor to prevent instantiation.
       */
</pre>
<center><a href="../PrismSettings.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../sw/SWContext.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>