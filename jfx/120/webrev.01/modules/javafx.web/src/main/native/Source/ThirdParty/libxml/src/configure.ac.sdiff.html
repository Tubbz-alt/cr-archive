<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/libxml/src/configure.ac</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="buf.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="dict.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/libxml/src/configure.ac</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 dnl Process this file with autoconf to produce a configure script.
   2 AC_PREREQ([2.63])
   3 AC_INIT
   4 AC_CONFIG_SRCDIR([entities.c])
   5 AC_CONFIG_HEADERS([config.h])
   6 AM_MAINTAINER_MODE([enable])
   7 AC_CONFIG_MACRO_DIR([m4])
   8 AC_CANONICAL_HOST
   9 
  10 LIBXML_MAJOR_VERSION=2
  11 LIBXML_MINOR_VERSION=9
<span class="line-modified">  12 LIBXML_MICRO_VERSION=9</span>
  13 LIBXML_MICRO_VERSION_SUFFIX=
  14 LIBXML_VERSION=$LIBXML_MAJOR_VERSION.$LIBXML_MINOR_VERSION.$LIBXML_MICRO_VERSION$LIBXML_MICRO_VERSION_SUFFIX
  15 LIBXML_VERSION_INFO=`expr $LIBXML_MAJOR_VERSION + $LIBXML_MINOR_VERSION`:$LIBXML_MICRO_VERSION:$LIBXML_MINOR_VERSION
  16 
  17 LIBXML_VERSION_NUMBER=`expr $LIBXML_MAJOR_VERSION \* 10000 + $LIBXML_MINOR_VERSION \* 100 + $LIBXML_MICRO_VERSION`
  18 
  19 if test -f CVS/Entries ; then
  20   extra=`grep ChangeLog CVS/Entries | grep -v LIBXML | sed -e s\%/ChangeLog/1\.%% -e s\%/.*$%%`
  21   echo extra=$extra
  22   if test &quot;$extra&quot; != &quot;&quot;
  23   then
  24       LIBXML_VERSION_EXTRA=&quot;-CVS$extra&quot;
  25   fi
  26 else if test -d .svn ; then
  27   extra=`svn info | grep Revision | sed &#39;s+Revision: ++&#39;`
  28   echo extra=$extra
  29   if test &quot;$extra&quot; != &quot;&quot;
  30   then
  31       LIBXML_VERSION_EXTRA=&quot;-SVN$extra&quot;
  32   fi
</pre>
<hr />
<pre>
 200 ])
 201 AC_ARG_WITH(lzma,
 202 [  --with-lzma[[=DIR]]       use liblzma in DIR],[
 203   if test &quot;$withval&quot; != &quot;no&quot; -a &quot;$withval&quot; != &quot;yes&quot;; then
 204     LZMA_DIR=$withval
 205     CPPFLAGS=&quot;${CPPFLAGS} -I$withval/include&quot;
 206     LDFLAGS=&quot;${LDFLAGS} -L$withval/lib&quot;
 207   fi
 208 ])
 209 AC_ARG_WITH(coverage,
 210 [  --with-coverage         build for code coverage with GCC (off)])
 211 
 212 AC_ARG_ENABLE(rebuild-docs,
 213 [  --enable-rebuild-docs[[=yes/no]]  rebuild some generated docs [[default=no]]])
 214 if test &quot;$enable_rebuild_docs&quot; = &quot;yes&quot; -a &quot;$srcdir&quot; != &quot;.&quot;; then
 215   AC_MSG_ERROR([cannot rebuild docs when builddir != srcdir])
 216 fi
 217 AM_CONDITIONAL([REBUILD_DOCS], [test &quot;$enable_rebuild_docs&quot; = &quot;yes&quot; -o &quot;$USER&quot; = &quot;veillard&quot;])
 218 
 219 dnl
<span class="line-modified"> 220 dnl hard dependancies on options</span>
 221 dnl
 222 if test &quot;$with_schemas&quot; = &quot;yes&quot;
 223 then
 224     with_pattern=yes
 225     with_regexps=yes
 226 fi
 227 if test &quot;$with_schematron&quot; = &quot;yes&quot;
 228 then
 229     with_pattern=yes
 230     with_tree=yes
 231     with_xpath=yes
 232 fi
 233 if test &quot;$with_reader&quot; = &quot;yes&quot;
 234 then
 235     with_push=yes
 236 fi
 237 if test &quot;$with_xptr&quot; = &quot;yes&quot;
 238 then
 239     with_xpath=yes
 240 fi
</pre>
<hr />
<pre>
 379     fi
 380     if test &quot;$with_modules&quot; = &quot;&quot;
 381     then
 382       with_modules=no
 383     fi
 384 fi
 385 
 386 echo Checking zlib
 387 
 388 dnl Checks for zlib library.
 389 
 390 WITH_ZLIB=0
 391 if test &quot;$with_zlib&quot; = &quot;no&quot;; then
 392     echo &quot;Disabling zlib compression support&quot;
 393 else
 394     # Don&#39;t run pkg-config if with_zlib contains a path.
 395     if test &quot;x$Z_DIR&quot; = &quot;x&quot;; then
 396         # Try pkg-config first so that static linking works.
 397         PKG_CHECK_MODULES([Z],[zlib],
 398             [WITH_ZLIB=1],
<span class="line-modified"> 399             [ ])</span>
 400     fi
 401 
 402     if test &quot;$WITH_ZLIB&quot; = &quot;0&quot;; then
 403         AC_CHECK_HEADERS(zlib.h,
 404             AC_CHECK_LIB(z, gzread,[
 405                 WITH_ZLIB=1
 406                 if test &quot;x${Z_DIR}&quot; != &quot;x&quot;; then
 407                     Z_CFLAGS=&quot;-I${Z_DIR}/include&quot;
 408                     Z_LIBS=&quot;-L${Z_DIR}/lib -lz&quot;
 409                     [case ${host} in
 410                         *-*-solaris*)
 411                             Z_LIBS=&quot;-L${Z_DIR}/lib -R${Z_DIR}/lib -lz&quot;
 412                             ;;
 413                     esac]
 414                 else
 415                     Z_LIBS=&quot;-lz&quot;
 416                 fi])
 417             )
 418     fi
 419 fi
 420 
 421 AC_SUBST(Z_CFLAGS)
 422 AC_SUBST(Z_LIBS)
 423 AC_SUBST(WITH_ZLIB)
 424 
 425 echo Checking lzma
 426 
 427 dnl Checks for lzma library.
 428 
 429 WITH_LZMA=0
 430 if test &quot;$with_lzma&quot; = &quot;no&quot;; then
 431     echo &quot;Disabling lzma compression support&quot;
 432 else
 433     # Don&#39;t run pkg-config if with_lzma contains a path.
 434     if test &quot;x$LZMA_DIR&quot; = &quot;x&quot;; then
 435         # Try pkg-config first so that static linking works.
 436         PKG_CHECK_MODULES([LZMA],[liblzma],
 437             [WITH_LZMA=1],
<span class="line-modified"> 438             [ ])</span>
 439     fi
 440 
 441     # If pkg-config failed, fall back to AC_CHECK_LIB. This
 442     # will not pick up the necessary LIBS flags for liblzma&#39;s
 443     # private dependencies, though, so static linking may fail.
 444     if test &quot;$WITH_LZMA&quot; = &quot;0&quot;; then
 445         AC_CHECK_HEADERS(lzma.h,
 446             AC_CHECK_LIB(lzma, lzma_code,[
 447                 WITH_LZMA=1
 448                 if test &quot;x${LZMA_DIR}&quot; != &quot;x&quot;; then
 449                     LZMA_CFLAGS=&quot;-I${LZMA_DIR}/include&quot;
 450                     LZMA_LIBS=&quot;-L${LZMA_DIR}/lib -llzma&quot;
 451                 else
 452                     LZMA_LIBS=&quot;-llzma&quot;
 453                 fi])
 454             )
 455     fi
 456 fi
 457 
 458 AC_SUBST(LZMA_CFLAGS)
</pre>
<hr />
<pre>
 754           *-dec-osf* )
 755                EXTRA_CFLAGS=&quot;${EXTRA_CFLAGS} -ieee&quot;
 756                ;;
 757 	  alpha*-*-linux* )
 758 	       EXTRA_CFLAGS=&quot;${EXTRA_CFLAGS} -ieee&quot;
 759 	       ;;
 760     esac
 761 else
 762     if test &quot;$with_fexceptions&quot; = &quot;yes&quot;
 763     then
 764         #
 765 	# Not activated by default because this inflates the code size
 766 	# Used to allow propagation of C++ exceptions through the library
 767 	#
 768 	EXTRA_CFLAGS=&quot;${EXTRA_CFLAGS} -fexceptions&quot;
 769     fi
 770 
 771     # warnings we&#39;d like to see
 772     EXTRA_CFLAGS=&quot;${EXTRA_CFLAGS} -pedantic -Wall -Wextra -Wshadow -Wpointer-arith -Wcast-align -Wwrite-strings -Waggregate-return -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Winline -Wredundant-decls&quot;
 773     # warnings we&#39;d like to supress
<span class="line-modified"> 774     EXTRA_CFLAGS=&quot;${EXTRA_CFLAGS} -Wno-long-long -Wno-format-extra-args -Wno-array-bounds&quot;</span>
 775     case &quot;${host}&quot; in
 776           alpha*-*-linux* )
 777 	       EXTRA_CFLAGS=&quot;${EXTRA_CFLAGS} -mieee&quot;
 778 	       ;;
 779 	  alpha*-*-osf* )
 780 	       EXTRA_CFLAGS=&quot;${EXTRA_CFLAGS} -mieee&quot;
 781 	       ;;
 782     esac
 783 fi
 784 case ${host} in
 785     *-*-solaris*)
 786         XML_LIBDIR=&quot;${XML_LIBDIR} -R${libdir}&quot;
 787         ;;
 788     hppa*-hp-mpeix)
 789         NEED_TRIO=1
 790 	;;
 791     *-*-mingw* | *-*-cygwin* | *-*-msvc* )
 792         # If the host is Windows, and shared libraries are disabled, we
 793         # need to add -DLIBXML_STATIC to EXTRA_CFLAGS in order for linking to
 794         # work properly (without it, xmlexports.h would force the use of
</pre>
<hr />
<pre>
1516                 LIBS=&quot;${LIBS} -licucore&quot;
1517 
1518                 AC_TRY_LINK([#include &lt;unicode/ucnv.h&gt;],[
1519         UConverter *utf = ucnv_open(&quot;UTF-8&quot;, NULL);],[
1520                     AC_MSG_RESULT(yes)
1521                     have_libicu=yes
1522                     ICU_LIBS=&quot;${ICU_LIBS} -licucore&quot;
1523                     LIBS=&quot;${_libs}&quot;
1524                     LDFLAGS=&quot;${_ldflags}&quot;],[
1525                     AC_MSG_RESULT(no)
1526                     LIBS=&quot;${_libs}&quot;
1527                 LDFLAGS=&quot;${_ldflags}&quot;])]))
1528         fi
1529     fi
1530 
1531     # Found the library via either method?
1532     if test &quot;x$have_libicu&quot; = &quot;xyes&quot;; then
1533         WITH_ICU=1
1534     fi
1535 fi
<span class="line-modified">1536 XML_LIBS=&quot;-lxml2 $Z_LIBS $LZMA_LIBS $THREAD_LIBS $ICONV_LIBS $ICU_LIBS $M_LIBS $LIBS&quot;</span>

1537 XML_LIBTOOLLIBS=&quot;libxml2.la&quot;
1538 AC_SUBST(WITH_ICU)
1539 
1540 WITH_ISO8859X=1
1541 if test &quot;$WITH_ICONV&quot; != &quot;1&quot; ; then
1542 if test &quot;$with_iso8859x&quot; = &quot;no&quot; ; then
1543     echo Disabling ISO8859X support
1544     WITH_ISO8859X=0
1545 fi
1546 fi
1547 AC_SUBST(WITH_ISO8859X)
1548 
1549 if test &quot;$with_schemas&quot; = &quot;no&quot; ; then
1550     echo &quot;Disabling Schemas/Relax-NG support&quot;
1551     WITH_SCHEMAS=0
1552     TEST_SCHEMAS=
1553 else    
1554     echo &quot;Enabled Schemas/Relax-NG support&quot;
1555     WITH_SCHEMAS=1
1556     TEST_SCHEMAS=&quot;Schemastests Relaxtests&quot;
</pre>
<hr />
<pre>
1603 if test &quot;$with_run_debug&quot; = &quot;yes&quot; ; then
1604     echo Enabling runtime debug support
1605     WITH_RUN_DEBUG=1
1606 else    
1607     WITH_RUN_DEBUG=0
1608 fi
1609 AC_SUBST(WITH_RUN_DEBUG)
1610 
1611 WIN32_EXTRA_LIBADD=
1612 WIN32_EXTRA_LDFLAGS=
1613 CYGWIN_EXTRA_LDFLAGS=
1614 CYGWIN_EXTRA_PYTHON_LIBADD=
1615 WIN32_EXTRA_PYTHON_LIBADD=
1616 case &quot;$host&quot; in
1617  *-*-mingw*)
1618  CPPFLAGS=&quot;$CPPFLAGS -DWIN32&quot;
1619  WIN32_EXTRA_LIBADD=&quot;-lws2_32&quot;
1620  WIN32_EXTRA_LDFLAGS=&quot;-no-undefined&quot;
1621  if test &quot;${PYTHON}&quot; != &quot;&quot;
1622  then





1623    WIN32_EXTRA_PYTHON_LIBADD=&quot;-L${pythondir}/../../libs -lpython$(echo ${PYTHON_VERSION} | tr -d .)&quot;


1624  fi
1625  ;;
1626  *-*-cygwin*)
1627  CYGWIN_EXTRA_LDFLAGS=&quot;-no-undefined&quot;
1628  if test &quot;${PYTHON}&quot; != &quot;&quot;
1629  then
1630    CYGWIN_EXTRA_PYTHON_LIBADD=&quot;-L/usr/lib/python${PYTHON_VERSION}/config -lpython${PYTHON_VERSION}&quot;
1631  fi
1632  ;;
1633 esac
1634 AC_SUBST(WIN32_EXTRA_LIBADD)
1635 AC_SUBST(WIN32_EXTRA_LDFLAGS)
1636 AC_SUBST(WIN32_EXTRA_PYTHON_LIBADD)
1637 AC_SUBST(CYGWIN_EXTRA_LDFLAGS)
1638 AC_SUBST(CYGWIN_EXTRA_PYTHON_LIBADD)
1639 
1640 dnl Checking the standard string functions availability
1641 dnl
1642 dnl Note mingw* has C99 implementation that produce expected xml numbers
1643 dnl if code use {v}snprintf functions.
</pre>
<hr />
<pre>
1654 dnl
1655 AC_CHECK_FUNCS(printf sprintf fprintf snprintf vfprintf vsprintf vsnprintf sscanf,,
1656 	NEED_TRIO=1)
1657 
1658 if test &quot;$with_coverage&quot; = &quot;yes&quot; -a &quot;${GCC}&quot; = &quot;yes&quot;
1659 then
1660     echo Enabling code coverage for GCC
1661     EXTRA_CFLAGS=&quot;$EXTRA_CFLAGS -fprofile-arcs -ftest-coverage&quot;
1662     LDFLAGS=&quot;$LDFLAGS -fprofile-arcs -ftest-coverage&quot;
1663 else
1664     echo Disabling code coverage for GCC
1665 fi
1666 
1667 AC_SUBST(CPPFLAGS)
1668 AC_SUBST(EXTRA_CFLAGS)
1669 AC_SUBST(LDFLAGS)
1670 AC_SUBST(XML_CFLAGS)
1671 
1672 AC_SUBST(XML_LIBDIR)
1673 AC_SUBST(XML_LIBS)

1674 AC_SUBST(XML_LIBTOOLLIBS)
1675 AC_SUBST(ICONV_LIBS)
1676 AC_SUBST(ICU_LIBS)
1677 AC_SUBST(XML_INCLUDEDIR)
1678 AC_SUBST(HTML_DIR)
1679 AC_SUBST(HAVE_ISNAN)
1680 AC_SUBST(HAVE_ISINF)
1681 AC_SUBST(PYTHON)
1682 AC_SUBST(PYTHON_VERSION)
1683 AC_SUBST(PYTHON_INCLUDES)
1684 AC_SUBST(PYTHON_SITE_PACKAGES)
1685 
1686 AC_SUBST(M_LIBS)
1687 AC_SUBST(RDL_LIBS)
1688 
1689 dnl for the spec file
1690 RELDATE=`date +&#39;%a %b %e %Y&#39;`
1691 AC_SUBST(RELDATE)
1692 AC_SUBST(PYTHON_TESTS)
1693 
</pre>
</td>
<td>
<hr />
<pre>
   1 dnl Process this file with autoconf to produce a configure script.
   2 AC_PREREQ([2.63])
   3 AC_INIT
   4 AC_CONFIG_SRCDIR([entities.c])
   5 AC_CONFIG_HEADERS([config.h])
   6 AM_MAINTAINER_MODE([enable])
   7 AC_CONFIG_MACRO_DIR([m4])
   8 AC_CANONICAL_HOST
   9 
  10 LIBXML_MAJOR_VERSION=2
  11 LIBXML_MINOR_VERSION=9
<span class="line-modified">  12 LIBXML_MICRO_VERSION=10</span>
  13 LIBXML_MICRO_VERSION_SUFFIX=
  14 LIBXML_VERSION=$LIBXML_MAJOR_VERSION.$LIBXML_MINOR_VERSION.$LIBXML_MICRO_VERSION$LIBXML_MICRO_VERSION_SUFFIX
  15 LIBXML_VERSION_INFO=`expr $LIBXML_MAJOR_VERSION + $LIBXML_MINOR_VERSION`:$LIBXML_MICRO_VERSION:$LIBXML_MINOR_VERSION
  16 
  17 LIBXML_VERSION_NUMBER=`expr $LIBXML_MAJOR_VERSION \* 10000 + $LIBXML_MINOR_VERSION \* 100 + $LIBXML_MICRO_VERSION`
  18 
  19 if test -f CVS/Entries ; then
  20   extra=`grep ChangeLog CVS/Entries | grep -v LIBXML | sed -e s\%/ChangeLog/1\.%% -e s\%/.*$%%`
  21   echo extra=$extra
  22   if test &quot;$extra&quot; != &quot;&quot;
  23   then
  24       LIBXML_VERSION_EXTRA=&quot;-CVS$extra&quot;
  25   fi
  26 else if test -d .svn ; then
  27   extra=`svn info | grep Revision | sed &#39;s+Revision: ++&#39;`
  28   echo extra=$extra
  29   if test &quot;$extra&quot; != &quot;&quot;
  30   then
  31       LIBXML_VERSION_EXTRA=&quot;-SVN$extra&quot;
  32   fi
</pre>
<hr />
<pre>
 200 ])
 201 AC_ARG_WITH(lzma,
 202 [  --with-lzma[[=DIR]]       use liblzma in DIR],[
 203   if test &quot;$withval&quot; != &quot;no&quot; -a &quot;$withval&quot; != &quot;yes&quot;; then
 204     LZMA_DIR=$withval
 205     CPPFLAGS=&quot;${CPPFLAGS} -I$withval/include&quot;
 206     LDFLAGS=&quot;${LDFLAGS} -L$withval/lib&quot;
 207   fi
 208 ])
 209 AC_ARG_WITH(coverage,
 210 [  --with-coverage         build for code coverage with GCC (off)])
 211 
 212 AC_ARG_ENABLE(rebuild-docs,
 213 [  --enable-rebuild-docs[[=yes/no]]  rebuild some generated docs [[default=no]]])
 214 if test &quot;$enable_rebuild_docs&quot; = &quot;yes&quot; -a &quot;$srcdir&quot; != &quot;.&quot;; then
 215   AC_MSG_ERROR([cannot rebuild docs when builddir != srcdir])
 216 fi
 217 AM_CONDITIONAL([REBUILD_DOCS], [test &quot;$enable_rebuild_docs&quot; = &quot;yes&quot; -o &quot;$USER&quot; = &quot;veillard&quot;])
 218 
 219 dnl
<span class="line-modified"> 220 dnl hard dependencies on options</span>
 221 dnl
 222 if test &quot;$with_schemas&quot; = &quot;yes&quot;
 223 then
 224     with_pattern=yes
 225     with_regexps=yes
 226 fi
 227 if test &quot;$with_schematron&quot; = &quot;yes&quot;
 228 then
 229     with_pattern=yes
 230     with_tree=yes
 231     with_xpath=yes
 232 fi
 233 if test &quot;$with_reader&quot; = &quot;yes&quot;
 234 then
 235     with_push=yes
 236 fi
 237 if test &quot;$with_xptr&quot; = &quot;yes&quot;
 238 then
 239     with_xpath=yes
 240 fi
</pre>
<hr />
<pre>
 379     fi
 380     if test &quot;$with_modules&quot; = &quot;&quot;
 381     then
 382       with_modules=no
 383     fi
 384 fi
 385 
 386 echo Checking zlib
 387 
 388 dnl Checks for zlib library.
 389 
 390 WITH_ZLIB=0
 391 if test &quot;$with_zlib&quot; = &quot;no&quot;; then
 392     echo &quot;Disabling zlib compression support&quot;
 393 else
 394     # Don&#39;t run pkg-config if with_zlib contains a path.
 395     if test &quot;x$Z_DIR&quot; = &quot;x&quot;; then
 396         # Try pkg-config first so that static linking works.
 397         PKG_CHECK_MODULES([Z],[zlib],
 398             [WITH_ZLIB=1],
<span class="line-modified"> 399             [:])</span>
 400     fi
 401 
 402     if test &quot;$WITH_ZLIB&quot; = &quot;0&quot;; then
 403         AC_CHECK_HEADERS(zlib.h,
 404             AC_CHECK_LIB(z, gzread,[
 405                 WITH_ZLIB=1
 406                 if test &quot;x${Z_DIR}&quot; != &quot;x&quot;; then
 407                     Z_CFLAGS=&quot;-I${Z_DIR}/include&quot;
 408                     Z_LIBS=&quot;-L${Z_DIR}/lib -lz&quot;
 409                     [case ${host} in
 410                         *-*-solaris*)
 411                             Z_LIBS=&quot;-L${Z_DIR}/lib -R${Z_DIR}/lib -lz&quot;
 412                             ;;
 413                     esac]
 414                 else
 415                     Z_LIBS=&quot;-lz&quot;
 416                 fi])
 417             )
 418     fi
 419 fi
 420 
 421 AC_SUBST(Z_CFLAGS)
 422 AC_SUBST(Z_LIBS)
 423 AC_SUBST(WITH_ZLIB)
 424 
 425 echo Checking lzma
 426 
 427 dnl Checks for lzma library.
 428 
 429 WITH_LZMA=0
 430 if test &quot;$with_lzma&quot; = &quot;no&quot;; then
 431     echo &quot;Disabling lzma compression support&quot;
 432 else
 433     # Don&#39;t run pkg-config if with_lzma contains a path.
 434     if test &quot;x$LZMA_DIR&quot; = &quot;x&quot;; then
 435         # Try pkg-config first so that static linking works.
 436         PKG_CHECK_MODULES([LZMA],[liblzma],
 437             [WITH_LZMA=1],
<span class="line-modified"> 438             [:])</span>
 439     fi
 440 
 441     # If pkg-config failed, fall back to AC_CHECK_LIB. This
 442     # will not pick up the necessary LIBS flags for liblzma&#39;s
 443     # private dependencies, though, so static linking may fail.
 444     if test &quot;$WITH_LZMA&quot; = &quot;0&quot;; then
 445         AC_CHECK_HEADERS(lzma.h,
 446             AC_CHECK_LIB(lzma, lzma_code,[
 447                 WITH_LZMA=1
 448                 if test &quot;x${LZMA_DIR}&quot; != &quot;x&quot;; then
 449                     LZMA_CFLAGS=&quot;-I${LZMA_DIR}/include&quot;
 450                     LZMA_LIBS=&quot;-L${LZMA_DIR}/lib -llzma&quot;
 451                 else
 452                     LZMA_LIBS=&quot;-llzma&quot;
 453                 fi])
 454             )
 455     fi
 456 fi
 457 
 458 AC_SUBST(LZMA_CFLAGS)
</pre>
<hr />
<pre>
 754           *-dec-osf* )
 755                EXTRA_CFLAGS=&quot;${EXTRA_CFLAGS} -ieee&quot;
 756                ;;
 757 	  alpha*-*-linux* )
 758 	       EXTRA_CFLAGS=&quot;${EXTRA_CFLAGS} -ieee&quot;
 759 	       ;;
 760     esac
 761 else
 762     if test &quot;$with_fexceptions&quot; = &quot;yes&quot;
 763     then
 764         #
 765 	# Not activated by default because this inflates the code size
 766 	# Used to allow propagation of C++ exceptions through the library
 767 	#
 768 	EXTRA_CFLAGS=&quot;${EXTRA_CFLAGS} -fexceptions&quot;
 769     fi
 770 
 771     # warnings we&#39;d like to see
 772     EXTRA_CFLAGS=&quot;${EXTRA_CFLAGS} -pedantic -Wall -Wextra -Wshadow -Wpointer-arith -Wcast-align -Wwrite-strings -Waggregate-return -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Winline -Wredundant-decls&quot;
 773     # warnings we&#39;d like to supress
<span class="line-modified"> 774     EXTRA_CFLAGS=&quot;${EXTRA_CFLAGS} -Wno-long-long -Wno-format-extra-args&quot;</span>
 775     case &quot;${host}&quot; in
 776           alpha*-*-linux* )
 777 	       EXTRA_CFLAGS=&quot;${EXTRA_CFLAGS} -mieee&quot;
 778 	       ;;
 779 	  alpha*-*-osf* )
 780 	       EXTRA_CFLAGS=&quot;${EXTRA_CFLAGS} -mieee&quot;
 781 	       ;;
 782     esac
 783 fi
 784 case ${host} in
 785     *-*-solaris*)
 786         XML_LIBDIR=&quot;${XML_LIBDIR} -R${libdir}&quot;
 787         ;;
 788     hppa*-hp-mpeix)
 789         NEED_TRIO=1
 790 	;;
 791     *-*-mingw* | *-*-cygwin* | *-*-msvc* )
 792         # If the host is Windows, and shared libraries are disabled, we
 793         # need to add -DLIBXML_STATIC to EXTRA_CFLAGS in order for linking to
 794         # work properly (without it, xmlexports.h would force the use of
</pre>
<hr />
<pre>
1516                 LIBS=&quot;${LIBS} -licucore&quot;
1517 
1518                 AC_TRY_LINK([#include &lt;unicode/ucnv.h&gt;],[
1519         UConverter *utf = ucnv_open(&quot;UTF-8&quot;, NULL);],[
1520                     AC_MSG_RESULT(yes)
1521                     have_libicu=yes
1522                     ICU_LIBS=&quot;${ICU_LIBS} -licucore&quot;
1523                     LIBS=&quot;${_libs}&quot;
1524                     LDFLAGS=&quot;${_ldflags}&quot;],[
1525                     AC_MSG_RESULT(no)
1526                     LIBS=&quot;${_libs}&quot;
1527                 LDFLAGS=&quot;${_ldflags}&quot;])]))
1528         fi
1529     fi
1530 
1531     # Found the library via either method?
1532     if test &quot;x$have_libicu&quot; = &quot;xyes&quot;; then
1533         WITH_ICU=1
1534     fi
1535 fi
<span class="line-modified">1536 XML_LIBS=&quot;-lxml2&quot;</span>
<span class="line-added">1537 XML_PRIVATE_LIBS=&quot;$Z_LIBS $LZMA_LIBS $THREAD_LIBS $ICONV_LIBS $ICU_LIBS $M_LIBS $LIBS&quot;</span>
1538 XML_LIBTOOLLIBS=&quot;libxml2.la&quot;
1539 AC_SUBST(WITH_ICU)
1540 
1541 WITH_ISO8859X=1
1542 if test &quot;$WITH_ICONV&quot; != &quot;1&quot; ; then
1543 if test &quot;$with_iso8859x&quot; = &quot;no&quot; ; then
1544     echo Disabling ISO8859X support
1545     WITH_ISO8859X=0
1546 fi
1547 fi
1548 AC_SUBST(WITH_ISO8859X)
1549 
1550 if test &quot;$with_schemas&quot; = &quot;no&quot; ; then
1551     echo &quot;Disabling Schemas/Relax-NG support&quot;
1552     WITH_SCHEMAS=0
1553     TEST_SCHEMAS=
1554 else    
1555     echo &quot;Enabled Schemas/Relax-NG support&quot;
1556     WITH_SCHEMAS=1
1557     TEST_SCHEMAS=&quot;Schemastests Relaxtests&quot;
</pre>
<hr />
<pre>
1604 if test &quot;$with_run_debug&quot; = &quot;yes&quot; ; then
1605     echo Enabling runtime debug support
1606     WITH_RUN_DEBUG=1
1607 else    
1608     WITH_RUN_DEBUG=0
1609 fi
1610 AC_SUBST(WITH_RUN_DEBUG)
1611 
1612 WIN32_EXTRA_LIBADD=
1613 WIN32_EXTRA_LDFLAGS=
1614 CYGWIN_EXTRA_LDFLAGS=
1615 CYGWIN_EXTRA_PYTHON_LIBADD=
1616 WIN32_EXTRA_PYTHON_LIBADD=
1617 case &quot;$host&quot; in
1618  *-*-mingw*)
1619  CPPFLAGS=&quot;$CPPFLAGS -DWIN32&quot;
1620  WIN32_EXTRA_LIBADD=&quot;-lws2_32&quot;
1621  WIN32_EXTRA_LDFLAGS=&quot;-no-undefined&quot;
1622  if test &quot;${PYTHON}&quot; != &quot;&quot;
1623  then
<span class="line-added">1624    case &quot;$host&quot; in</span>
<span class="line-added">1625      *-w64-mingw*)</span>
<span class="line-added">1626        WIN32_EXTRA_PYTHON_LIBADD=&quot;-shrext .pyd -L${pythondir}/../../lib -lpython${PYTHON_VERSION}&quot;</span>
<span class="line-added">1627        ;;</span>
<span class="line-added">1628      *)</span>
1629    WIN32_EXTRA_PYTHON_LIBADD=&quot;-L${pythondir}/../../libs -lpython$(echo ${PYTHON_VERSION} | tr -d .)&quot;
<span class="line-added">1630        ;;</span>
<span class="line-added">1631    esac</span>
1632  fi
1633  ;;
1634  *-*-cygwin*)
1635  CYGWIN_EXTRA_LDFLAGS=&quot;-no-undefined&quot;
1636  if test &quot;${PYTHON}&quot; != &quot;&quot;
1637  then
1638    CYGWIN_EXTRA_PYTHON_LIBADD=&quot;-L/usr/lib/python${PYTHON_VERSION}/config -lpython${PYTHON_VERSION}&quot;
1639  fi
1640  ;;
1641 esac
1642 AC_SUBST(WIN32_EXTRA_LIBADD)
1643 AC_SUBST(WIN32_EXTRA_LDFLAGS)
1644 AC_SUBST(WIN32_EXTRA_PYTHON_LIBADD)
1645 AC_SUBST(CYGWIN_EXTRA_LDFLAGS)
1646 AC_SUBST(CYGWIN_EXTRA_PYTHON_LIBADD)
1647 
1648 dnl Checking the standard string functions availability
1649 dnl
1650 dnl Note mingw* has C99 implementation that produce expected xml numbers
1651 dnl if code use {v}snprintf functions.
</pre>
<hr />
<pre>
1662 dnl
1663 AC_CHECK_FUNCS(printf sprintf fprintf snprintf vfprintf vsprintf vsnprintf sscanf,,
1664 	NEED_TRIO=1)
1665 
1666 if test &quot;$with_coverage&quot; = &quot;yes&quot; -a &quot;${GCC}&quot; = &quot;yes&quot;
1667 then
1668     echo Enabling code coverage for GCC
1669     EXTRA_CFLAGS=&quot;$EXTRA_CFLAGS -fprofile-arcs -ftest-coverage&quot;
1670     LDFLAGS=&quot;$LDFLAGS -fprofile-arcs -ftest-coverage&quot;
1671 else
1672     echo Disabling code coverage for GCC
1673 fi
1674 
1675 AC_SUBST(CPPFLAGS)
1676 AC_SUBST(EXTRA_CFLAGS)
1677 AC_SUBST(LDFLAGS)
1678 AC_SUBST(XML_CFLAGS)
1679 
1680 AC_SUBST(XML_LIBDIR)
1681 AC_SUBST(XML_LIBS)
<span class="line-added">1682 AC_SUBST(XML_PRIVATE_LIBS)</span>
1683 AC_SUBST(XML_LIBTOOLLIBS)
1684 AC_SUBST(ICONV_LIBS)
1685 AC_SUBST(ICU_LIBS)
1686 AC_SUBST(XML_INCLUDEDIR)
1687 AC_SUBST(HTML_DIR)
1688 AC_SUBST(HAVE_ISNAN)
1689 AC_SUBST(HAVE_ISINF)
1690 AC_SUBST(PYTHON)
1691 AC_SUBST(PYTHON_VERSION)
1692 AC_SUBST(PYTHON_INCLUDES)
1693 AC_SUBST(PYTHON_SITE_PACKAGES)
1694 
1695 AC_SUBST(M_LIBS)
1696 AC_SUBST(RDL_LIBS)
1697 
1698 dnl for the spec file
1699 RELDATE=`date +&#39;%a %b %e %Y&#39;`
1700 AC_SUBST(RELDATE)
1701 AC_SUBST(PYTHON_TESTS)
1702 
</pre>
</td>
</tr>
</table>
<center><a href="buf.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="dict.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>