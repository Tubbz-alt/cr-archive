<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/libxml/src/parser.c</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/libxml/src/parser.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 2629     xmlFatalErr(ctxt, XML_ERR_ENTITY_LOOP, NULL);
 2630     return(NULL);
 2631     }
 2632 
 2633     /*
 2634      * allocate a translation buffer.
 2635      */
 2636     buffer_size = XML_PARSER_BIG_BUFFER_SIZE;
 2637     buffer = (xmlChar *) xmlMallocAtomic(buffer_size);
 2638     if (buffer == NULL) goto mem_error;
 2639 
 2640     /*
 2641      * OK loop until we reach one of the ending char or a size limit.
 2642      * we are operating on already parsed values.
 2643      */
 2644     if (str &lt; last)
 2645     c = CUR_SCHAR(str, l);
 2646     else
 2647         c = 0;
 2648     while ((c != 0) &amp;&amp; (c != end) &amp;&amp; /* non input consuming loop */
<span class="line-modified"> 2649        (c != end2) &amp;&amp; (c != end3)) {</span>

 2650 
 2651     if (c == 0) break;
 2652         if ((c == &#39;&amp;&#39;) &amp;&amp; (str[1] == &#39;#&#39;)) {
 2653         int val = xmlParseStringCharRef(ctxt, &amp;str);
 2654         if (val == 0)
 2655                 goto int_error;
 2656         COPY_BUF(0,buffer,nbchars,val);
 2657         if (nbchars + XML_PARSER_BUFFER_SIZE &gt; buffer_size) {
 2658             growBuffer(buffer, XML_PARSER_BUFFER_SIZE);
 2659         }
 2660     } else if ((c == &#39;&amp;&#39;) &amp;&amp; (what &amp; XML_SUBSTITUTE_REF)) {
 2661         if (xmlParserDebugEntities)
 2662         xmlGenericError(xmlGenericErrorContext,
 2663             &quot;String decoding Entity Reference: %.30s\n&quot;,
 2664             str);
 2665         ent = xmlParseStringEntityRef(ctxt, &amp;str);
 2666         xmlParserEntityCheck(ctxt, 0, ent, 0);
 2667         if (ent != NULL)
 2668             ctxt-&gt;nbentities += ent-&gt;checked / 2;
 2669         if ((ent != NULL) &amp;&amp;
</pre>
</td>
<td>
<hr />
<pre>
 2629     xmlFatalErr(ctxt, XML_ERR_ENTITY_LOOP, NULL);
 2630     return(NULL);
 2631     }
 2632 
 2633     /*
 2634      * allocate a translation buffer.
 2635      */
 2636     buffer_size = XML_PARSER_BIG_BUFFER_SIZE;
 2637     buffer = (xmlChar *) xmlMallocAtomic(buffer_size);
 2638     if (buffer == NULL) goto mem_error;
 2639 
 2640     /*
 2641      * OK loop until we reach one of the ending char or a size limit.
 2642      * we are operating on already parsed values.
 2643      */
 2644     if (str &lt; last)
 2645     c = CUR_SCHAR(str, l);
 2646     else
 2647         c = 0;
 2648     while ((c != 0) &amp;&amp; (c != end) &amp;&amp; /* non input consuming loop */
<span class="line-modified"> 2649            (c != end2) &amp;&amp; (c != end3) &amp;&amp;</span>
<span class="line-added"> 2650            (ctxt-&gt;instate != XML_PARSER_EOF)) {</span>
 2651 
 2652     if (c == 0) break;
 2653         if ((c == &#39;&amp;&#39;) &amp;&amp; (str[1] == &#39;#&#39;)) {
 2654         int val = xmlParseStringCharRef(ctxt, &amp;str);
 2655         if (val == 0)
 2656                 goto int_error;
 2657         COPY_BUF(0,buffer,nbchars,val);
 2658         if (nbchars + XML_PARSER_BUFFER_SIZE &gt; buffer_size) {
 2659             growBuffer(buffer, XML_PARSER_BUFFER_SIZE);
 2660         }
 2661     } else if ((c == &#39;&amp;&#39;) &amp;&amp; (what &amp; XML_SUBSTITUTE_REF)) {
 2662         if (xmlParserDebugEntities)
 2663         xmlGenericError(xmlGenericErrorContext,
 2664             &quot;String decoding Entity Reference: %.30s\n&quot;,
 2665             str);
 2666         ent = xmlParseStringEntityRef(ctxt, &amp;str);
 2667         xmlParserEntityCheck(ctxt, 0, ent, 0);
 2668         if (ent != NULL)
 2669             ctxt-&gt;nbentities += ent-&gt;checked / 2;
 2670         if ((ent != NULL) &amp;&amp;
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>