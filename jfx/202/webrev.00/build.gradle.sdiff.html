<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff build.gradle</title>
    <link rel="stylesheet" href="style.css" />
  </head>
<body>
<center>&lt; prev <a href="index.html" target="_top">index</a> next &gt;</center>    <h2>build.gradle</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
1232     def gradleMajorMin = Integer.parseInt(verMin[0]);
1233     def gradleMinorMin = Integer.parseInt(verMin[1].split(&quot;[^0-9]&quot;)[0]);
1234     def err = &quot;&quot;;
1235     if (gradleMajor &lt; gradleMajorMin || (gradleMajor == gradleMajorMin &amp;&amp; gradleMinor &lt; gradleMinorMin)) {
1236         err = &quot;Gradle version too old: ${gradle.gradleVersion}; must be at least ${jfxGradleVersionMin}&quot;
1237     }
1238 
1239     if (IS_GRADLE_VERSION_CHECK &amp;&amp; err != &quot;&quot;) {
1240         fail(err);
1241     }
1242 
1243     logger.warn(&quot;*****************************************************************&quot;);
1244     logger.warn(&quot;Unsupported gradle version $gradle.gradleVersion in use.&quot;);
1245     logger.warn(&quot;Only version $jfxGradleVersion is supported. Use this version at your own risk&quot;);
1246     if ( err != &quot;&quot;) logger.warn(err);
1247     logger.warn(&quot;*****************************************************************&quot;);
1248 }
1249 
1250 // Look for stub runtime in bundled sdk, standalone sdk, or boot JDK
1251 





1252 def String cachedBundledRuntime = cygpath(&quot;$projectDir&quot;) + &quot;/../caches/modular-sdk&quot;
1253 def String cachedStandaloneRuntime = cygpath(&quot;$projectDir&quot;) + &quot;/../caches/sdk&quot;
1254 def String jdkStubRuntime = cygpath(&quot;$JDK_HOME&quot;)

1255 
1256 def defaultStubRuntime = &quot;&quot;
1257 if (file(cachedBundledRuntime).exists()) {
1258     defaultStubRuntime = cachedBundledRuntime
1259 } else if (file(cachedStandaloneRuntime).exists()) {
1260     defaultStubRuntime = cachedStandaloneRuntime
1261 } else if (BUILD_CLOSED) {
1262     defaultStubRuntime = cachedBundledRuntime


1263 } else {
1264     defaultStubRuntime = jdkStubRuntime
1265 }
1266 
1267 defineProperty(&quot;STUB_RUNTIME&quot;, defaultStubRuntime)
1268 
1269 if (STUB_RUNTIME.endsWith(&quot;/modular-sdk&quot;)) {
1270     def stubModulesLib = &quot;$STUB_RUNTIME/modules_libs&quot;
1271     defineProperty(&quot;MEDIA_STUB&quot;, &quot;$stubModulesLib/javafx.media&quot;)
1272     defineProperty(&quot;WEB_STUB&quot;, &quot;$stubModulesLib/javafx.web&quot;)
1273 } else {
1274     def libraryStub = IS_WINDOWS ? &quot;$STUB_RUNTIME/bin&quot; : &quot;$STUB_RUNTIME/lib&quot;
1275 
1276     defineProperty(&quot;MEDIA_STUB&quot;, libraryStub)
1277     defineProperty(&quot;WEB_STUB&quot;, libraryStub)
1278 }
1279 
1280 ext.UPDATE_STUB_CACHE = (BUILD_CLOSED &amp;&amp; STUB_RUNTIME != &quot;&quot; &amp;&amp; !file(STUB_RUNTIME).isDirectory())
1281 
1282 
</pre>
<hr />
<pre>
3364     if (IS_COMPILE_WEBKIT) {
3365         compileJava {
3366             // generate the native headers during compile
3367             // only needed if we are doing the native compile
3368             options.compilerArgs.addAll([
3369                 &#39;-h&#39;, &quot;${project.buildDir}/gensrc/headers&quot;
3370                 ])
3371         }
3372     }
3373 
3374     // Copy these to a common location in the moduleSourcePath
3375     def copyWrappers = project.task(&quot;copyPreGeneratedWrappers&quot;, type: Copy) {
3376         from &quot;src/main/native/Source/WebCore/bindings/java/dom3/java&quot;
3377         into &quot;${gensrcDir}&quot;
3378     }
3379 
3380     compileJava.dependsOn(copyWrappers);
3381 
3382     test {
3383         doFirst {
<span class="line-modified">3384             if (!IS_COMPILE_WEBKIT) {</span>
<span class="line-modified">3385                 println &quot;*****************************************************&quot;</span>








3386                 println &quot;WARNING: running web tests without building webkit.&quot;
3387                 println &quot;The webkit native library will be copied from the JDK,&quot;
3388                 println &quot;which might lead to failures in some web tests.&quot;
<span class="line-modified">3389                 println &quot;To avoid these failures, you should either build&quot;</span>
<span class="line-modified">3390                 println &quot;webkit locally, copy the native webkit library from a&quot;</span>
<span class="line-removed">3391                 println &quot;recent build, or skip execution of web test cases with&quot;</span>
<span class="line-removed">3392                 println &quot;&#39;-x :web:test&#39;&quot;</span>
<span class="line-removed">3393                 println &quot;*****************************************************&quot;</span>
3394             }
3395         }
3396         // Run web tests in headless mode
3397         systemProperty &#39;glass.platform&#39;, &#39;Monocle&#39;
3398         systemProperty &#39;monocle.platform&#39;, &#39;Headless&#39;
3399         systemProperty &#39;prism.order&#39;, &#39;sw&#39;
3400         dependsOn webArchiveJar
3401         def testResourceDir = file(&quot;$buildDir/testing/resources&quot;)
3402         jvmArgs &quot;-DWEB_ARCHIVE_JAR_TEST_DIR=$testResourceDir&quot;
3403     }
3404 
3405     task compileJavaDOMBinding()
3406 
3407     compileTargets { t -&gt;
3408         def targetProperties = project.rootProject.ext[t.upper]
3409         def webkitProperties = targetProperties.webkit
3410         def classifier = (t.name != &quot;linux&quot; &amp;&amp; t.name != &quot;win&quot;) ? t.name :
3411                           IS_64 ? &quot;${t.name}-amd64&quot; : &quot;${t.name}-i586&quot;
3412 
3413         def webkitOutputDir = cygpath(&quot;$buildDir/${t.name}&quot;)
</pre>
<hr />
<pre>
4304             destinationDir = file(&quot;${bundlesDir}&quot;)
4305             archiveName = &quot;${docsBundleName}.zip&quot;
4306             includeEmptyDirs = false
4307             from docsArtifactsDir
4308             into &quot;${docsBundleName}&quot;
4309         }
4310         zipsTask.dependsOn(zipDocsTask)
4311 
4312         def zipJmodsTask = task(&quot;zipJmods$t.capital&quot;, type: Zip, dependsOn: zipDocsTask) {
4313             destinationDir = file(&quot;${bundlesDir}&quot;)
4314             archiveName = &quot;${jmodsBundleName}.zip&quot;
4315             includeEmptyDirs = false
4316             from jmodsArtifactsDir
4317             into &quot;${jmodsBundleName}&quot;
4318         }
4319         zipsTask.dependsOn(zipJmodsTask)
4320     }
4321 }
4322 
4323 






























4324 /******************************************************************************
4325  *                                                                            *
4326  *                               Modules                                      *
4327  *                                                                            *
4328  *****************************************************************************/
4329 
4330 ext.moduleDependencies = [file(&quot;dependencies&quot;)]
4331 
4332 task buildModules {
4333 }
4334 
4335 // Combine the classes, lib, and bin for each module
4336 compileTargets { t -&gt;
4337     def targetProperties = project.ext[t.upper]
4338 
4339     def platformPrefix = targetProperties.platformPrefix
4340     def bundledSdkDirName = &quot;${platformPrefix}modular-sdk&quot;
4341     def bundledSdkDir = &quot;${rootProject.buildDir}/${bundledSdkDirName}&quot;
4342     def modulesDir = &quot;${bundledSdkDir}/modules&quot;
4343     def modulesCmdsDir = &quot;${bundledSdkDir}/modules_cmds&quot;
</pre>
<hr />
<pre>
4898                 libs += [&#39;fontFreetype&#39;, &#39;fontPango&#39;];
4899             }
4900             libs.each { lib -&gt;
4901                 def variants = targetProperties[lib].containsKey(&#39;variants&#39;) &amp;&amp; !useLipo ? targetProperties[lib].variants : [null]
4902                 variants.each { variant -&gt;
4903                     def variantProperties = variant ? targetProperties[lib][variant] : targetProperties[lib]
4904                     from (&quot;${graphicsProject.buildDir}/libs/$lib/$t.name/${library(variantProperties.lib)}&quot;)
4905                 }
4906             }
4907             if (IS_WINDOWS) {
4908                 from (&quot;${graphicsProject.buildDir}/libs/prismD3D/${t.name}/${library(targetProperties.prismD3D.lib)}&quot;);
4909                 targetProperties.VS2017DLLs.each { vslib -&gt;
4910                     from (&quot;$vslib&quot;);
4911                 }
4912                 targetProperties.WinSDKDLLs.each { winsdklib -&gt;
4913                     from (&quot;$winsdklib&quot;);
4914                 }
4915             }
4916         }
4917 
<span class="line-modified">4918         def buildModuleMediaTask = task(&quot;buildModuleMedia$t.capital&quot;, type: Copy, dependsOn: mediaProject.assemble) {</span>
4919             group = &quot;Basic&quot;
4920             description = &quot;copies javafx.media native libraries&quot;
4921 
4922             into &quot;${mediaProject.buildDir}/${moduleNativeDirName}&quot;
4923 
4924             def mediaBuildType = project(&quot;:media&quot;).ext.buildType
4925             if (IS_COMPILE_MEDIA) {
4926                 [ &quot;fxplugins&quot;, &quot;gstreamer-lite&quot;, &quot;jfxmedia&quot; ].each { name -&gt;
4927                     from (&quot;${mediaProject.buildDir}/native/${t.name}/${mediaBuildType}/${library(name)}&quot;) }
4928 
4929                 if (t.name == &quot;mac&quot;) {
4930                     // OSX media natives
4931                     [ &quot;jfxmedia_qtkit&quot;, &quot;jfxmedia_avf&quot;, &quot;glib-lite&quot; ].each { name -&gt;
4932                         from (&quot;${mediaProject.buildDir}/native/${t.name}/${mediaBuildType}/${library(name)}&quot;) }
4933                 } else if (t.name == &quot;linux&quot;) {
4934                     from(&quot;${mediaProject.buildDir}/native/${t.name}/${mediaBuildType}&quot;) { include &quot;libavplugin*.so&quot; }
4935                 } else from (&quot;${mediaProject.buildDir}/native/${t.name}/${mediaBuildType}/${library(&quot;glib-lite&quot;)}&quot;)
4936             } else {
4937                 if (t.name != &quot;android&quot;  &amp;&amp; t.name != &quot;dalvik&quot; ) {
4938                     [ &quot;fxplugins&quot;, &quot;gstreamer-lite&quot;, &quot;jfxmedia&quot; ].each { name -&gt;
4939                         from (&quot;$MEDIA_STUB/${library(name)}&quot;) }
4940                 }
4941 
4942                 if (t.name == &quot;mac&quot;) {
4943                     // copy libjfxmedia_{avf,qtkit}.dylib if they exist
4944                     [ &quot;jfxmedia_qtkit&quot;, &quot;jfxmedia_avf&quot;, &quot;glib-lite&quot; ].each { name -&gt;
4945                         from (&quot;$MEDIA_STUB/${library(name)}&quot;) }
4946                 } else if (t.name == &quot;linux&quot;) {
4947                     from(MEDIA_STUB) { include &quot;libavplugin*.so&quot; }
4948                 }
4949                 else if (t.name != &quot;android&quot;  &amp;&amp; t.name != &quot;dalvik&quot; ) {
4950                     from (&quot;$MEDIA_STUB/${library(&quot;glib-lite&quot;)}&quot;)
4951                 }
4952             }
4953         }
4954 
<span class="line-modified">4955         def buildModuleWeb = task(&quot;buildModuleWeb$t.capital&quot;, type: Copy, dependsOn: webProject.assemble) {</span>
4956             group = &quot;Basic&quot;
4957             description = &quot;copies javafx.web native libraries&quot;
4958 
4959             into &quot;${webProject.buildDir}/${moduleNativeDirName}&quot;
4960 
4961             if (IS_COMPILE_WEBKIT) {
4962                 from (&quot;${webProject.buildDir}/libs/${t.name}/${library(&#39;jfxwebkit&#39;)}&quot;)
4963             } else {
4964                 if (t.name != &quot;android&quot; &amp;&amp; t.name != &quot;ios&quot; &amp;&amp; t.name != &quot;dalvik&quot;) {
4965                     from (&quot;$WEB_STUB/${library(&#39;jfxwebkit&#39;)}&quot;)
4966                 }
4967             }
4968         }
4969 
4970         def buildModuleSWT = task(&quot;buildModuleSWT$t.capital&quot;, type: Copy) {
4971             group = &quot;Basic&quot;
4972             description = &quot;copies SWT JAR&quot;
4973 
4974             // FIXME: the following is a hack to workaround the fact that there
4975             // is no way to deliver javafx-swt.jar other than in one of the
</pre>
</td>
<td>
<hr />
<pre>
1232     def gradleMajorMin = Integer.parseInt(verMin[0]);
1233     def gradleMinorMin = Integer.parseInt(verMin[1].split(&quot;[^0-9]&quot;)[0]);
1234     def err = &quot;&quot;;
1235     if (gradleMajor &lt; gradleMajorMin || (gradleMajor == gradleMajorMin &amp;&amp; gradleMinor &lt; gradleMinorMin)) {
1236         err = &quot;Gradle version too old: ${gradle.gradleVersion}; must be at least ${jfxGradleVersionMin}&quot;
1237     }
1238 
1239     if (IS_GRADLE_VERSION_CHECK &amp;&amp; err != &quot;&quot;) {
1240         fail(err);
1241     }
1242 
1243     logger.warn(&quot;*****************************************************************&quot;);
1244     logger.warn(&quot;Unsupported gradle version $gradle.gradleVersion in use.&quot;);
1245     logger.warn(&quot;Only version $jfxGradleVersion is supported. Use this version at your own risk&quot;);
1246     if ( err != &quot;&quot;) logger.warn(err);
1247     logger.warn(&quot;*****************************************************************&quot;);
1248 }
1249 
1250 // Look for stub runtime in bundled sdk, standalone sdk, or boot JDK
1251 
<span class="line-added">1252 // Allows automatic provisioning of webkit+media shared libraries</span>
<span class="line-added">1253 // from official OpenJFX releases, downloaded from MavenCentral</span>
<span class="line-added">1254 defineProperty(&quot;STUB_RUNTIME_OPENJFX&quot;, &quot;&quot;)</span>
<span class="line-added">1255 ext.IS_STUB_RUNTIME_OPENJFX = !STUB_RUNTIME_OPENJFX.isBlank()</span>
<span class="line-added">1256 </span>
1257 def String cachedBundledRuntime = cygpath(&quot;$projectDir&quot;) + &quot;/../caches/modular-sdk&quot;
1258 def String cachedStandaloneRuntime = cygpath(&quot;$projectDir&quot;) + &quot;/../caches/sdk&quot;
1259 def String jdkStubRuntime = cygpath(&quot;$JDK_HOME&quot;)
<span class="line-added">1260 def String openjfxStubRuntime = cygpath(&quot;$projectDir&quot;) + &quot;/buildSrc/build/openjfxStub&quot;</span>
1261 
1262 def defaultStubRuntime = &quot;&quot;
1263 if (file(cachedBundledRuntime).exists()) {
1264     defaultStubRuntime = cachedBundledRuntime
1265 } else if (file(cachedStandaloneRuntime).exists()) {
1266     defaultStubRuntime = cachedStandaloneRuntime
1267 } else if (BUILD_CLOSED) {
1268     defaultStubRuntime = cachedBundledRuntime
<span class="line-added">1269 } else if (IS_STUB_RUNTIME_OPENJFX) {</span>
<span class="line-added">1270     defaultStubRuntime = openjfxStubRuntime</span>
1271 } else {
1272     defaultStubRuntime = jdkStubRuntime
1273 }
1274 
1275 defineProperty(&quot;STUB_RUNTIME&quot;, defaultStubRuntime)
1276 
1277 if (STUB_RUNTIME.endsWith(&quot;/modular-sdk&quot;)) {
1278     def stubModulesLib = &quot;$STUB_RUNTIME/modules_libs&quot;
1279     defineProperty(&quot;MEDIA_STUB&quot;, &quot;$stubModulesLib/javafx.media&quot;)
1280     defineProperty(&quot;WEB_STUB&quot;, &quot;$stubModulesLib/javafx.web&quot;)
1281 } else {
1282     def libraryStub = IS_WINDOWS ? &quot;$STUB_RUNTIME/bin&quot; : &quot;$STUB_RUNTIME/lib&quot;
1283 
1284     defineProperty(&quot;MEDIA_STUB&quot;, libraryStub)
1285     defineProperty(&quot;WEB_STUB&quot;, libraryStub)
1286 }
1287 
1288 ext.UPDATE_STUB_CACHE = (BUILD_CLOSED &amp;&amp; STUB_RUNTIME != &quot;&quot; &amp;&amp; !file(STUB_RUNTIME).isDirectory())
1289 
1290 
</pre>
<hr />
<pre>
3372     if (IS_COMPILE_WEBKIT) {
3373         compileJava {
3374             // generate the native headers during compile
3375             // only needed if we are doing the native compile
3376             options.compilerArgs.addAll([
3377                 &#39;-h&#39;, &quot;${project.buildDir}/gensrc/headers&quot;
3378                 ])
3379         }
3380     }
3381 
3382     // Copy these to a common location in the moduleSourcePath
3383     def copyWrappers = project.task(&quot;copyPreGeneratedWrappers&quot;, type: Copy) {
3384         from &quot;src/main/native/Source/WebCore/bindings/java/dom3/java&quot;
3385         into &quot;${gensrcDir}&quot;
3386     }
3387 
3388     compileJava.dependsOn(copyWrappers);
3389 
3390     test {
3391         doFirst {
<span class="line-modified">3392             if (IS_STUB_RUNTIME_OPENJFX) {</span>
<span class="line-modified">3393                 println &quot;********************************************************&quot;</span>
<span class="line-added">3394                 println &quot;WARNING: running web tests with officially built webkit.&quot;</span>
<span class="line-added">3395                 println &quot;The webkit native library may not be compatible with the&quot;</span>
<span class="line-added">3396                 println &quot;source tree you are using.&quot;</span>
<span class="line-added">3397                 println &quot;If tests fail, try compiling webkit instead.&quot;</span>
<span class="line-added">3398                 println &quot;See WEBKIT-MEDIA-STUBS.md&quot;</span>
<span class="line-added">3399                 println &quot;********************************************************&quot;</span>
<span class="line-added">3400             } else if (!IS_COMPILE_WEBKIT) {</span>
<span class="line-added">3401                 println &quot;******************************************************&quot;</span>
3402                 println &quot;WARNING: running web tests without building webkit.&quot;
3403                 println &quot;The webkit native library will be copied from the JDK,&quot;
3404                 println &quot;which might lead to failures in some web tests.&quot;
<span class="line-modified">3405                 println &quot;See WEBKIT-MEDIA-STUBS.md&quot;</span>
<span class="line-modified">3406                 println &quot;******************************************************&quot;</span>



3407             }
3408         }
3409         // Run web tests in headless mode
3410         systemProperty &#39;glass.platform&#39;, &#39;Monocle&#39;
3411         systemProperty &#39;monocle.platform&#39;, &#39;Headless&#39;
3412         systemProperty &#39;prism.order&#39;, &#39;sw&#39;
3413         dependsOn webArchiveJar
3414         def testResourceDir = file(&quot;$buildDir/testing/resources&quot;)
3415         jvmArgs &quot;-DWEB_ARCHIVE_JAR_TEST_DIR=$testResourceDir&quot;
3416     }
3417 
3418     task compileJavaDOMBinding()
3419 
3420     compileTargets { t -&gt;
3421         def targetProperties = project.rootProject.ext[t.upper]
3422         def webkitProperties = targetProperties.webkit
3423         def classifier = (t.name != &quot;linux&quot; &amp;&amp; t.name != &quot;win&quot;) ? t.name :
3424                           IS_64 ? &quot;${t.name}-amd64&quot; : &quot;${t.name}-i586&quot;
3425 
3426         def webkitOutputDir = cygpath(&quot;$buildDir/${t.name}&quot;)
</pre>
<hr />
<pre>
4317             destinationDir = file(&quot;${bundlesDir}&quot;)
4318             archiveName = &quot;${docsBundleName}.zip&quot;
4319             includeEmptyDirs = false
4320             from docsArtifactsDir
4321             into &quot;${docsBundleName}&quot;
4322         }
4323         zipsTask.dependsOn(zipDocsTask)
4324 
4325         def zipJmodsTask = task(&quot;zipJmods$t.capital&quot;, type: Zip, dependsOn: zipDocsTask) {
4326             destinationDir = file(&quot;${bundlesDir}&quot;)
4327             archiveName = &quot;${jmodsBundleName}.zip&quot;
4328             includeEmptyDirs = false
4329             from jmodsArtifactsDir
4330             into &quot;${jmodsBundleName}&quot;
4331         }
4332         zipsTask.dependsOn(zipJmodsTask)
4333     }
4334 }
4335 
4336 
<span class="line-added">4337 /******************************************************************************</span>
<span class="line-added">4338  *                                                                            *</span>
<span class="line-added">4339  *                             OpenJFX Stubs                                  *</span>
<span class="line-added">4340  *                                                                            *</span>
<span class="line-added">4341  *****************************************************************************/</span>
<span class="line-added">4342 </span>
<span class="line-added">4343 configurations {</span>
<span class="line-added">4344     openjfxStubs</span>
<span class="line-added">4345 }</span>
<span class="line-added">4346 </span>
<span class="line-added">4347 if (IS_STUB_RUNTIME_OPENJFX) {</span>
<span class="line-added">4348     def String platform = IS_MAC ? &quot;mac&quot; : IS_WINDOWS ? &quot;win&quot; : IS_LINUX ? &quot;linux&quot; : &quot;&quot;</span>
<span class="line-added">4349     dependencies {</span>
<span class="line-added">4350         openjfxStubs &quot;org.openjfx:javafx-media:$STUB_RUNTIME_OPENJFX:$platform@jar&quot;</span>
<span class="line-added">4351         openjfxStubs &quot;org.openjfx:javafx-web:$STUB_RUNTIME_OPENJFX:$platform@jar&quot;</span>
<span class="line-added">4352     }</span>
<span class="line-added">4353 }</span>
<span class="line-added">4354 </span>
<span class="line-added">4355 // Extract binary libraries from OpenJFX artifacts for use as stubs</span>
<span class="line-added">4356 task prepOpenJfxStubs(type: Copy) {</span>
<span class="line-added">4357     enabled = IS_STUB_RUNTIME_OPENJFX</span>
<span class="line-added">4358 </span>
<span class="line-added">4359     from configurations.openjfxStubs.files.collect { zipTree(it) }</span>
<span class="line-added">4360     include(&quot;*.dll&quot;)</span>
<span class="line-added">4361     include(&quot;*.dylib&quot;)</span>
<span class="line-added">4362     include(&quot;*.so&quot;)</span>
<span class="line-added">4363     into IS_WINDOWS ? file(&quot;$openjfxStubRuntime/bin&quot;) : file(&quot;$openjfxStubRuntime/lib&quot;)</span>
<span class="line-added">4364 }</span>
<span class="line-added">4365 </span>
<span class="line-added">4366 </span>
4367 /******************************************************************************
4368  *                                                                            *
4369  *                               Modules                                      *
4370  *                                                                            *
4371  *****************************************************************************/
4372 
4373 ext.moduleDependencies = [file(&quot;dependencies&quot;)]
4374 
4375 task buildModules {
4376 }
4377 
4378 // Combine the classes, lib, and bin for each module
4379 compileTargets { t -&gt;
4380     def targetProperties = project.ext[t.upper]
4381 
4382     def platformPrefix = targetProperties.platformPrefix
4383     def bundledSdkDirName = &quot;${platformPrefix}modular-sdk&quot;
4384     def bundledSdkDir = &quot;${rootProject.buildDir}/${bundledSdkDirName}&quot;
4385     def modulesDir = &quot;${bundledSdkDir}/modules&quot;
4386     def modulesCmdsDir = &quot;${bundledSdkDir}/modules_cmds&quot;
</pre>
<hr />
<pre>
4941                 libs += [&#39;fontFreetype&#39;, &#39;fontPango&#39;];
4942             }
4943             libs.each { lib -&gt;
4944                 def variants = targetProperties[lib].containsKey(&#39;variants&#39;) &amp;&amp; !useLipo ? targetProperties[lib].variants : [null]
4945                 variants.each { variant -&gt;
4946                     def variantProperties = variant ? targetProperties[lib][variant] : targetProperties[lib]
4947                     from (&quot;${graphicsProject.buildDir}/libs/$lib/$t.name/${library(variantProperties.lib)}&quot;)
4948                 }
4949             }
4950             if (IS_WINDOWS) {
4951                 from (&quot;${graphicsProject.buildDir}/libs/prismD3D/${t.name}/${library(targetProperties.prismD3D.lib)}&quot;);
4952                 targetProperties.VS2017DLLs.each { vslib -&gt;
4953                     from (&quot;$vslib&quot;);
4954                 }
4955                 targetProperties.WinSDKDLLs.each { winsdklib -&gt;
4956                     from (&quot;$winsdklib&quot;);
4957                 }
4958             }
4959         }
4960 
<span class="line-modified">4961         def buildModuleMediaTask = task(&quot;buildModuleMedia$t.capital&quot;, type: Copy, dependsOn: [mediaProject.assemble, prepOpenJfxStubs]) {</span>
4962             group = &quot;Basic&quot;
4963             description = &quot;copies javafx.media native libraries&quot;
4964 
4965             into &quot;${mediaProject.buildDir}/${moduleNativeDirName}&quot;
4966 
4967             def mediaBuildType = project(&quot;:media&quot;).ext.buildType
4968             if (IS_COMPILE_MEDIA) {
4969                 [ &quot;fxplugins&quot;, &quot;gstreamer-lite&quot;, &quot;jfxmedia&quot; ].each { name -&gt;
4970                     from (&quot;${mediaProject.buildDir}/native/${t.name}/${mediaBuildType}/${library(name)}&quot;) }
4971 
4972                 if (t.name == &quot;mac&quot;) {
4973                     // OSX media natives
4974                     [ &quot;jfxmedia_qtkit&quot;, &quot;jfxmedia_avf&quot;, &quot;glib-lite&quot; ].each { name -&gt;
4975                         from (&quot;${mediaProject.buildDir}/native/${t.name}/${mediaBuildType}/${library(name)}&quot;) }
4976                 } else if (t.name == &quot;linux&quot;) {
4977                     from(&quot;${mediaProject.buildDir}/native/${t.name}/${mediaBuildType}&quot;) { include &quot;libavplugin*.so&quot; }
4978                 } else from (&quot;${mediaProject.buildDir}/native/${t.name}/${mediaBuildType}/${library(&quot;glib-lite&quot;)}&quot;)
4979             } else {
4980                 if (t.name != &quot;android&quot;  &amp;&amp; t.name != &quot;dalvik&quot; ) {
4981                     [ &quot;fxplugins&quot;, &quot;gstreamer-lite&quot;, &quot;jfxmedia&quot; ].each { name -&gt;
4982                         from (&quot;$MEDIA_STUB/${library(name)}&quot;) }
4983                 }
4984 
4985                 if (t.name == &quot;mac&quot;) {
4986                     // copy libjfxmedia_{avf,qtkit}.dylib if they exist
4987                     [ &quot;jfxmedia_qtkit&quot;, &quot;jfxmedia_avf&quot;, &quot;glib-lite&quot; ].each { name -&gt;
4988                         from (&quot;$MEDIA_STUB/${library(name)}&quot;) }
4989                 } else if (t.name == &quot;linux&quot;) {
4990                     from(MEDIA_STUB) { include &quot;libavplugin*.so&quot; }
4991                 }
4992                 else if (t.name != &quot;android&quot;  &amp;&amp; t.name != &quot;dalvik&quot; ) {
4993                     from (&quot;$MEDIA_STUB/${library(&quot;glib-lite&quot;)}&quot;)
4994                 }
4995             }
4996         }
4997 
<span class="line-modified">4998         def buildModuleWeb = task(&quot;buildModuleWeb$t.capital&quot;, type: Copy, dependsOn: [webProject.assemble, prepOpenJfxStubs]) {</span>
4999             group = &quot;Basic&quot;
5000             description = &quot;copies javafx.web native libraries&quot;
5001 
5002             into &quot;${webProject.buildDir}/${moduleNativeDirName}&quot;
5003 
5004             if (IS_COMPILE_WEBKIT) {
5005                 from (&quot;${webProject.buildDir}/libs/${t.name}/${library(&#39;jfxwebkit&#39;)}&quot;)
5006             } else {
5007                 if (t.name != &quot;android&quot; &amp;&amp; t.name != &quot;ios&quot; &amp;&amp; t.name != &quot;dalvik&quot;) {
5008                     from (&quot;$WEB_STUB/${library(&#39;jfxwebkit&#39;)}&quot;)
5009                 }
5010             }
5011         }
5012 
5013         def buildModuleSWT = task(&quot;buildModuleSWT$t.capital&quot;, type: Copy) {
5014             group = &quot;Basic&quot;
5015             description = &quot;copies SWT JAR&quot;
5016 
5017             // FIXME: the following is a hack to workaround the fact that there
5018             // is no way to deliver javafx-swt.jar other than in one of the
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="index.html" target="_top">index</a> next &gt;</center>  </body>
</html>