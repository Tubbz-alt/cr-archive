<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/java/com/sun/webkit/WebPage.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../javafx/webkit/drt/UIClientImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../legal/webkit.md.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/java/com/sun/webkit/WebPage.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 616 
 617         } finally {
 618             unlockPage();
 619         }
 620     }
 621 
 622     /*
 623      * Executed on the Event Thread.
 624      */
 625     public void updateContent(WCRectangle toPaint) {
 626         lockPage();
 627         try {
 628             ++updateContentCycleID;
 629 
 630             paintLog.finest(&quot;toPaint: {0}&quot;, toPaint);
 631             if (isDisposed) {
 632                 paintLog.fine(&quot;updateContent() request for a disposed web page.&quot;);
 633                 return;
 634             }
 635             updateDirty(toPaint);
<span class="line-modified"> 636 </span>
 637         } finally {
 638             unlockPage();
 639         }
 640     }
 641 




 642     public int getUpdateContentCycleID() {
 643         return updateContentCycleID;
 644     }
 645 
 646     public boolean isRepaintPending() {
 647         lockPage();
 648         try {
 649             synchronized (frameQueue) {
 650                 return !frameQueue.isEmpty();
 651             }
 652         } finally {
 653             unlockPage();
 654         }
 655     }
 656 
 657     /*
 658      * Executed on printing thread.
 659      */
 660     public void print(WCGraphicsContext gc,
 661             final int x, final int y, final int w, final int h)
</pre>
<hr />
<pre>
1138 
1139     // DRT support
1140     public int getUnloadEventListenersCount(long frameID) {
1141         lockPage();
1142         try {
1143             log.fine(&quot;frame: &quot; + frameID);
1144             if (isDisposed) {
1145                 log.fine(&quot;request for a disposed web page.&quot;);
1146                 return 0;
1147             }
1148             if (!frames.contains(frameID)) {
1149                 return 0;
1150             }
1151             return twkGetUnloadEventListenersCount(frameID);
1152 
1153         } finally {
1154             unlockPage();
1155         }
1156     }
1157 






1158     public String getContentType(long frameID) {
1159         lockPage();
1160         try {
1161             log.fine(&quot;Get content type: frame = &quot; + frameID);
1162             if (isDisposed) {
1163                 log.fine(&quot;getContentType() request for a disposed web page.&quot;);
1164                 return null;
1165             }
1166             if (!frames.contains(frameID)) {
1167                 return null;
1168             }
1169             return twkGetContentType(frameID);
1170 
1171         } finally {
1172             unlockPage();
1173         }
1174     }
1175 
1176     public String getTitle(long frameID) {
1177         lockPage();
</pre>
<hr />
<pre>
2580 
2581     private native Object twkExecuteScript(long pFrame, String script);
2582 
2583     private native void twkReset(long pFrame);
2584 
2585     private native int twkGetFrameHeight(long pFrame);
2586     private native int twkBeginPrinting(long pPage, float width, float height);
2587     private native void twkEndPrinting(long pPage);
2588     private native void twkPrint(long pPage, WCRenderQueue gc, int pageNumber, float width);
2589     private native float twkAdjustFrameHeight(long pFrame, float oldTop, float oldBottom, float bottomLimit);
2590 
2591     private native int[] twkGetVisibleRect(long pFrame);
2592     private native void twkScrollToPosition(long pFrame, int x, int y);
2593     private native int[] twkGetContentSize(long pFrame);
2594     private native void twkSetTransparent(long pFrame, boolean isTransparent);
2595     private native void twkSetBackgroundColor(long pFrame, int backgroundColor);
2596 
2597     private native void twkSetBounds(long pPage, int x, int y, int w, int h);
2598     private native void twkPrePaint(long pPage);
2599     private native void twkUpdateContent(long pPage, WCRenderQueue rq, int x, int y, int w, int h);

2600     private native void twkPostPaint(long pPage, WCRenderQueue rq,
2601                                      int x, int y, int w, int h);
2602 
2603     private native String twkGetEncoding(long pPage);
2604     private native void twkSetEncoding(long pPage, String encoding);
2605 
2606     private native void twkProcessFocusEvent(long pPage, int id, int direction);
2607     private native boolean twkProcessKeyEvent(long pPage, int type, String text,
2608                                               String keyIdentifier,
2609                                               int windowsVirtualKeyCode,
2610                                               boolean shift, boolean ctrl,
2611                                               boolean alt, boolean meta, double when);
2612     private native boolean twkProcessMouseEvent(long pPage, int id,
2613                                                 int button, int clickCount,
2614                                                 int x, int y, int sx, int sy,
2615                                                 boolean shift, boolean control, boolean alt, boolean meta,
2616                                                 boolean popupTrigger, double when);
2617     private native boolean twkProcessMouseWheelEvent(long pPage,
2618                                                      int x, int y, int sx, int sy,
2619                                                      float dx, float dy,
</pre>
</td>
<td>
<hr />
<pre>
 616 
 617         } finally {
 618             unlockPage();
 619         }
 620     }
 621 
 622     /*
 623      * Executed on the Event Thread.
 624      */
 625     public void updateContent(WCRectangle toPaint) {
 626         lockPage();
 627         try {
 628             ++updateContentCycleID;
 629 
 630             paintLog.finest(&quot;toPaint: {0}&quot;, toPaint);
 631             if (isDisposed) {
 632                 paintLog.fine(&quot;updateContent() request for a disposed web page.&quot;);
 633                 return;
 634             }
 635             updateDirty(toPaint);
<span class="line-modified"> 636             updateRendering();</span>
 637         } finally {
 638             unlockPage();
 639         }
 640     }
 641 
<span class="line-added"> 642     public void updateRendering() {</span>
<span class="line-added"> 643         twkUpdateRendering(getPage());</span>
<span class="line-added"> 644     }</span>
<span class="line-added"> 645 </span>
 646     public int getUpdateContentCycleID() {
 647         return updateContentCycleID;
 648     }
 649 
 650     public boolean isRepaintPending() {
 651         lockPage();
 652         try {
 653             synchronized (frameQueue) {
 654                 return !frameQueue.isEmpty();
 655             }
 656         } finally {
 657             unlockPage();
 658         }
 659     }
 660 
 661     /*
 662      * Executed on printing thread.
 663      */
 664     public void print(WCGraphicsContext gc,
 665             final int x, final int y, final int w, final int h)
</pre>
<hr />
<pre>
1142 
1143     // DRT support
1144     public int getUnloadEventListenersCount(long frameID) {
1145         lockPage();
1146         try {
1147             log.fine(&quot;frame: &quot; + frameID);
1148             if (isDisposed) {
1149                 log.fine(&quot;request for a disposed web page.&quot;);
1150                 return 0;
1151             }
1152             if (!frames.contains(frameID)) {
1153                 return 0;
1154             }
1155             return twkGetUnloadEventListenersCount(frameID);
1156 
1157         } finally {
1158             unlockPage();
1159         }
1160     }
1161 
<span class="line-added">1162     // DRT support</span>
<span class="line-added">1163     public void forceRepaint() {</span>
<span class="line-added">1164         repaintAll();</span>
<span class="line-added">1165         updateContent(new WCRectangle(0, 0, width, height));</span>
<span class="line-added">1166     }</span>
<span class="line-added">1167 </span>
1168     public String getContentType(long frameID) {
1169         lockPage();
1170         try {
1171             log.fine(&quot;Get content type: frame = &quot; + frameID);
1172             if (isDisposed) {
1173                 log.fine(&quot;getContentType() request for a disposed web page.&quot;);
1174                 return null;
1175             }
1176             if (!frames.contains(frameID)) {
1177                 return null;
1178             }
1179             return twkGetContentType(frameID);
1180 
1181         } finally {
1182             unlockPage();
1183         }
1184     }
1185 
1186     public String getTitle(long frameID) {
1187         lockPage();
</pre>
<hr />
<pre>
2590 
2591     private native Object twkExecuteScript(long pFrame, String script);
2592 
2593     private native void twkReset(long pFrame);
2594 
2595     private native int twkGetFrameHeight(long pFrame);
2596     private native int twkBeginPrinting(long pPage, float width, float height);
2597     private native void twkEndPrinting(long pPage);
2598     private native void twkPrint(long pPage, WCRenderQueue gc, int pageNumber, float width);
2599     private native float twkAdjustFrameHeight(long pFrame, float oldTop, float oldBottom, float bottomLimit);
2600 
2601     private native int[] twkGetVisibleRect(long pFrame);
2602     private native void twkScrollToPosition(long pFrame, int x, int y);
2603     private native int[] twkGetContentSize(long pFrame);
2604     private native void twkSetTransparent(long pFrame, boolean isTransparent);
2605     private native void twkSetBackgroundColor(long pFrame, int backgroundColor);
2606 
2607     private native void twkSetBounds(long pPage, int x, int y, int w, int h);
2608     private native void twkPrePaint(long pPage);
2609     private native void twkUpdateContent(long pPage, WCRenderQueue rq, int x, int y, int w, int h);
<span class="line-added">2610     private native void twkUpdateRendering(long pPage);</span>
2611     private native void twkPostPaint(long pPage, WCRenderQueue rq,
2612                                      int x, int y, int w, int h);
2613 
2614     private native String twkGetEncoding(long pPage);
2615     private native void twkSetEncoding(long pPage, String encoding);
2616 
2617     private native void twkProcessFocusEvent(long pPage, int id, int direction);
2618     private native boolean twkProcessKeyEvent(long pPage, int type, String text,
2619                                               String keyIdentifier,
2620                                               int windowsVirtualKeyCode,
2621                                               boolean shift, boolean ctrl,
2622                                               boolean alt, boolean meta, double when);
2623     private native boolean twkProcessMouseEvent(long pPage, int id,
2624                                                 int button, int clickCount,
2625                                                 int x, int y, int sx, int sy,
2626                                                 boolean shift, boolean control, boolean alt, boolean meta,
2627                                                 boolean popupTrigger, double when);
2628     private native boolean twkProcessMouseWheelEvent(long pPage,
2629                                                      int x, int y, int sx, int sy,
2630                                                      float dx, float dy,
</pre>
</td>
</tr>
</table>
<center><a href="../javafx/webkit/drt/UIClientImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../legal/webkit.md.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>