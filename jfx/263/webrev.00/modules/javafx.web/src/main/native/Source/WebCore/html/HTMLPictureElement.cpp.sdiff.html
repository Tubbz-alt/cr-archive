<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/html/HTMLPictureElement.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="HTMLObjectElement.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="HTMLPictureElement.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/html/HTMLPictureElement.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 27 #include &quot;HTMLPictureElement.h&quot;
 28 
 29 #include &quot;ElementChildIterator.h&quot;
 30 #include &quot;HTMLAnchorElement.h&quot;
 31 #include &quot;HTMLImageElement.h&quot;
 32 #include &quot;Logging.h&quot;
 33 #include &quot;RuntimeEnabledFeatures.h&quot;
 34 #include &lt;wtf/IsoMallocInlines.h&gt;
 35 
 36 namespace WebCore {
 37 
 38 WTF_MAKE_ISO_ALLOCATED_IMPL(HTMLPictureElement);
 39 
 40 HTMLPictureElement::HTMLPictureElement(const QualifiedName&amp; tagName, Document&amp; document)
 41     : HTMLElement(tagName, document)
 42 {
 43 }
 44 
 45 HTMLPictureElement::~HTMLPictureElement()
 46 {
<span class="line-removed"> 47     document().removeViewportDependentPicture(*this);</span>
<span class="line-removed"> 48     document().removeAppearanceDependentPicture(*this);</span>
 49 }
 50 
 51 void HTMLPictureElement::didMoveToNewDocument(Document&amp; oldDocument, Document&amp; newDocument)
 52 {
<span class="line-removed"> 53     oldDocument.removeViewportDependentPicture(*this);</span>
<span class="line-removed"> 54     oldDocument.removeAppearanceDependentPicture(*this);</span>
 55     HTMLElement::didMoveToNewDocument(oldDocument, newDocument);
 56     sourcesChanged();
 57 }
 58 
 59 Ref&lt;HTMLPictureElement&gt; HTMLPictureElement::create(const QualifiedName&amp; tagName, Document&amp; document)
 60 {
 61     return adoptRef(*new HTMLPictureElement(tagName, document));
 62 }
 63 
 64 void HTMLPictureElement::sourcesChanged()
 65 {
 66     for (auto&amp; element : childrenOfType&lt;HTMLImageElement&gt;(*this))
 67         element.selectImageSource();
 68 }
 69 
<span class="line-removed"> 70 bool HTMLPictureElement::viewportChangeAffectedPicture() const</span>
<span class="line-removed"> 71 {</span>
<span class="line-removed"> 72     auto documentElement = makeRefPtr(document().documentElement());</span>
<span class="line-removed"> 73     MediaQueryEvaluator evaluator { document().printing() ? &quot;print&quot; : &quot;screen&quot;, document(), documentElement ? documentElement-&gt;computedStyle() : nullptr };</span>
<span class="line-removed"> 74     for (auto&amp; result : m_viewportDependentMediaQueryResults) {</span>
<span class="line-removed"> 75         LOG(MediaQueries, &quot;HTMLPictureElement %p viewportChangeAffectedPicture evaluating media queries&quot;, this);</span>
<span class="line-removed"> 76         if (evaluator.evaluate(result.expression) != result.result)</span>
<span class="line-removed"> 77             return true;</span>
<span class="line-removed"> 78     }</span>
<span class="line-removed"> 79     return false;</span>
<span class="line-removed"> 80 }</span>
<span class="line-removed"> 81 </span>
<span class="line-removed"> 82 bool HTMLPictureElement::appearanceChangeAffectedPicture() const</span>
<span class="line-removed"> 83 {</span>
<span class="line-removed"> 84     auto documentElement = makeRefPtr(document().documentElement());</span>
<span class="line-removed"> 85     MediaQueryEvaluator evaluator { document().printing() ? &quot;print&quot; : &quot;screen&quot;, document(), documentElement ? documentElement-&gt;computedStyle() : nullptr };</span>
<span class="line-removed"> 86     for (auto&amp; result : m_appearanceDependentMediaQueryResults) {</span>
<span class="line-removed"> 87         LOG(MediaQueries, &quot;HTMLPictureElement %p appearanceChangeAffectedPicture evaluating media queries&quot;, this);</span>
<span class="line-removed"> 88         if (evaluator.evaluate(result.expression) != result.result)</span>
<span class="line-removed"> 89             return true;</span>
<span class="line-removed"> 90     }</span>
<span class="line-removed"> 91     return false;</span>
<span class="line-removed"> 92 }</span>
<span class="line-removed"> 93 </span>
 94 #if USE(SYSTEM_PREVIEW)
 95 bool HTMLPictureElement::isSystemPreviewImage() const
 96 {
 97     if (!RuntimeEnabledFeatures::sharedFeatures().systemPreviewEnabled())
 98         return false;
 99 
100     const auto* parent = parentElement();
101     if (!is&lt;HTMLAnchorElement&gt;(parent))
102         return false;
103     return downcast&lt;HTMLAnchorElement&gt;(parent)-&gt;isSystemPreviewLink();
104 }
105 #endif
106 
107 }
108 
</pre>
</td>
<td>
<hr />
<pre>
 27 #include &quot;HTMLPictureElement.h&quot;
 28 
 29 #include &quot;ElementChildIterator.h&quot;
 30 #include &quot;HTMLAnchorElement.h&quot;
 31 #include &quot;HTMLImageElement.h&quot;
 32 #include &quot;Logging.h&quot;
 33 #include &quot;RuntimeEnabledFeatures.h&quot;
 34 #include &lt;wtf/IsoMallocInlines.h&gt;
 35 
 36 namespace WebCore {
 37 
 38 WTF_MAKE_ISO_ALLOCATED_IMPL(HTMLPictureElement);
 39 
 40 HTMLPictureElement::HTMLPictureElement(const QualifiedName&amp; tagName, Document&amp; document)
 41     : HTMLElement(tagName, document)
 42 {
 43 }
 44 
 45 HTMLPictureElement::~HTMLPictureElement()
 46 {


 47 }
 48 
 49 void HTMLPictureElement::didMoveToNewDocument(Document&amp; oldDocument, Document&amp; newDocument)
 50 {


 51     HTMLElement::didMoveToNewDocument(oldDocument, newDocument);
 52     sourcesChanged();
 53 }
 54 
 55 Ref&lt;HTMLPictureElement&gt; HTMLPictureElement::create(const QualifiedName&amp; tagName, Document&amp; document)
 56 {
 57     return adoptRef(*new HTMLPictureElement(tagName, document));
 58 }
 59 
 60 void HTMLPictureElement::sourcesChanged()
 61 {
 62     for (auto&amp; element : childrenOfType&lt;HTMLImageElement&gt;(*this))
 63         element.selectImageSource();
 64 }
 65 
























 66 #if USE(SYSTEM_PREVIEW)
 67 bool HTMLPictureElement::isSystemPreviewImage() const
 68 {
 69     if (!RuntimeEnabledFeatures::sharedFeatures().systemPreviewEnabled())
 70         return false;
 71 
 72     const auto* parent = parentElement();
 73     if (!is&lt;HTMLAnchorElement&gt;(parent))
 74         return false;
 75     return downcast&lt;HTMLAnchorElement&gt;(parent)-&gt;isSystemPreviewLink();
 76 }
 77 #endif
 78 
 79 }
 80 
</pre>
</td>
</tr>
</table>
<center><a href="HTMLObjectElement.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="HTMLPictureElement.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>