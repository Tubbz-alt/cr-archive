<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/MathObject.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="MathCommon.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="MathObject.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/MathObject.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -31,42 +31,42 @@</span>
  
  namespace JSC {
  
  STATIC_ASSERT_IS_TRIVIALLY_DESTRUCTIBLE(MathObject);
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncACos(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncACosh(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncASin(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncASinh(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncATan(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncATanh(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncATan2(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncCbrt(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncCeil(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncClz32(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncCos(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncCosh(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncExp(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncExpm1(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncFround(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncHypot(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncLog(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncLog1p(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncLog10(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncLog2(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncMax(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncMin(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncPow(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncRandom(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncRound(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncSign(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncSin(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncSinh(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncSqrt(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncTan(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncTanh(ExecState*);</span>
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncIMul(ExecState*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncACos(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncACosh(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncASin(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncASinh(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncATan(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncATanh(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncATan2(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncCbrt(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncCeil(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncClz32(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncCos(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncCosh(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncExp(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncExpm1(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncFround(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncHypot(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncLog(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncLog1p(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncLog10(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncLog2(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncMax(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncMin(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncPow(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncRandom(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncRound(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncSign(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncSin(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncSinh(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncSqrt(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncTan(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncTanh(JSGlobalObject*, CallFrame*);</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncIMul(JSGlobalObject*, CallFrame*);</span>
  
  const ClassInfo MathObject::s_info = { &quot;Math&quot;, &amp;Base::s_info, nullptr, nullptr, CREATE_METHOD_TABLE(MathObject) };
  
  MathObject::MathObject(VM&amp; vm, Structure* structure)
      : JSNonFinalObject(vm, structure)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -84,11 +84,11 @@</span>
      putDirectWithoutTransition(vm, Identifier::fromString(vm, &quot;LOG2E&quot;), jsNumber(1.0 / Math::log(2.0)), PropertyAttribute::DontDelete | PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly);
      putDirectWithoutTransition(vm, Identifier::fromString(vm, &quot;LOG10E&quot;), jsNumber(0.4342944819032518), PropertyAttribute::DontDelete | PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly);
      putDirectWithoutTransition(vm, Identifier::fromString(vm, &quot;PI&quot;), jsNumber(piDouble), PropertyAttribute::DontDelete | PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly);
      putDirectWithoutTransition(vm, Identifier::fromString(vm, &quot;SQRT1_2&quot;), jsNumber(sqrt(0.5)), PropertyAttribute::DontDelete | PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly);
      putDirectWithoutTransition(vm, Identifier::fromString(vm, &quot;SQRT2&quot;), jsNumber(sqrt(2.0)), PropertyAttribute::DontDelete | PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly);
<span class="udiff-line-modified-removed">-     putDirectWithoutTransition(vm, vm.propertyNames-&gt;toStringTagSymbol, jsString(vm, &quot;Math&quot;), PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly);</span>
<span class="udiff-line-modified-added">+     putDirectWithoutTransition(vm, vm.propertyNames-&gt;toStringTagSymbol, jsNontrivialString(vm, &quot;Math&quot;_s), PropertyAttribute::DontEnum | PropertyAttribute::ReadOnly);</span>
  
      putDirectNativeFunctionWithoutTransition(vm, globalObject, Identifier::fromString(vm, &quot;abs&quot;), 1, mathProtoFuncAbs, AbsIntrinsic, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      putDirectNativeFunctionWithoutTransition(vm, globalObject, Identifier::fromString(vm, &quot;acos&quot;), 1, mathProtoFuncACos, ACosIntrinsic, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      putDirectNativeFunctionWithoutTransition(vm, globalObject, Identifier::fromString(vm, &quot;asin&quot;), 1, mathProtoFuncASin, ASinIntrinsic, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
      putDirectNativeFunctionWithoutTransition(vm, globalObject, Identifier::fromString(vm, &quot;atan&quot;), 1, mathProtoFuncATan, ATanIntrinsic, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -125,80 +125,80 @@</span>
      putDirectNativeFunctionWithoutTransition(vm, globalObject, Identifier::fromString(vm, &quot;imul&quot;), 2, mathProtoFuncIMul, IMulIntrinsic, static_cast&lt;unsigned&gt;(PropertyAttribute::DontEnum));
  }
  
  // ------------------------------ Functions --------------------------------
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncAbs(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncAbs(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsNumber(fabs(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsNumber(fabs(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncACos(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncACos(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::acos(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::acos(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncASin(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncASin(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::asin(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::asin(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncATan(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncATan(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::atan(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::atan(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncATan2(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncATan2(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     VM&amp; vm = exec-&gt;vm();</span>
<span class="udiff-line-modified-added">+     VM&amp; vm = globalObject-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
<span class="udiff-line-modified-removed">-     double arg0 = exec-&gt;argument(0).toNumber(exec);</span>
<span class="udiff-line-modified-added">+     double arg0 = callFrame-&gt;argument(0).toNumber(globalObject);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
      scope.release();
<span class="udiff-line-modified-removed">-     double arg1 = exec-&gt;argument(1).toNumber(exec);</span>
<span class="udiff-line-modified-added">+     double arg1 = callFrame-&gt;argument(1).toNumber(globalObject);</span>
      return JSValue::encode(jsDoubleNumber(atan2(arg0, arg1)));
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncCeil(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncCeil(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsNumber(ceil(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsNumber(ceil(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncClz32(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncClz32(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     VM&amp; vm = exec-&gt;vm();</span>
<span class="udiff-line-modified-added">+     VM&amp; vm = globalObject-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
<span class="udiff-line-modified-removed">-     uint32_t value = exec-&gt;argument(0).toUInt32(exec);</span>
<span class="udiff-line-modified-added">+     uint32_t value = callFrame-&gt;argument(0).toUInt32(globalObject);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
      return JSValue::encode(JSValue(clz(value)));
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncCos(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncCos(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::cos(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::cos(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncExp(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncExp(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::exp(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::exp(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncFloor(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncFloor(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsNumber(floor(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsNumber(floor(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncHypot(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncHypot(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     VM&amp; vm = exec-&gt;vm();</span>
<span class="udiff-line-modified-added">+     VM&amp; vm = globalObject-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
<span class="udiff-line-modified-removed">-     unsigned argsCount = exec-&gt;argumentCount();</span>
<span class="udiff-line-modified-added">+     unsigned argsCount = callFrame-&gt;argumentCount();</span>
      double max = 0;
      Vector&lt;double, 8&gt; args;
      args.reserveInitialCapacity(argsCount);
      for (unsigned i = 0; i &lt; argsCount; ++i) {
<span class="udiff-line-modified-removed">-         args.uncheckedAppend(exec-&gt;uncheckedArgument(i).toNumber(exec));</span>
<span class="udiff-line-modified-added">+         args.uncheckedAppend(callFrame-&gt;uncheckedArgument(i).toNumber(globalObject));</span>
          RETURN_IF_EXCEPTION(scope, encodedJSValue());
          if (std::isinf(args[i]))
              return JSValue::encode(jsDoubleNumber(+std::numeric_limits&lt;double&gt;::infinity()));
          max = std::max(fabs(args[i]), max);
      }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -215,171 +215,171 @@</span>
          sum = preliminary;
      }
      return JSValue::encode(jsDoubleNumber(sqrt(sum) * max));
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncLog(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncLog(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::log(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::log(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncMax(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncMax(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     VM&amp; vm = exec-&gt;vm();</span>
<span class="udiff-line-modified-added">+     VM&amp; vm = globalObject-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
<span class="udiff-line-modified-removed">-     unsigned argsCount = exec-&gt;argumentCount();</span>
<span class="udiff-line-modified-added">+     unsigned argsCount = callFrame-&gt;argumentCount();</span>
      double result = -std::numeric_limits&lt;double&gt;::infinity();
      for (unsigned k = 0; k &lt; argsCount; ++k) {
<span class="udiff-line-modified-removed">-         double val = exec-&gt;uncheckedArgument(k).toNumber(exec);</span>
<span class="udiff-line-modified-added">+         double val = callFrame-&gt;uncheckedArgument(k).toNumber(globalObject);</span>
          RETURN_IF_EXCEPTION(scope, encodedJSValue());
          if (std::isnan(val)) {
              result = PNaN;
          } else if (val &gt; result || (!val &amp;&amp; !result &amp;&amp; !std::signbit(val)))
              result = val;
      }
      return JSValue::encode(jsNumber(result));
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncMin(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncMin(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     VM&amp; vm = exec-&gt;vm();</span>
<span class="udiff-line-modified-added">+     VM&amp; vm = globalObject-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
<span class="udiff-line-modified-removed">-     unsigned argsCount = exec-&gt;argumentCount();</span>
<span class="udiff-line-modified-added">+     unsigned argsCount = callFrame-&gt;argumentCount();</span>
      double result = +std::numeric_limits&lt;double&gt;::infinity();
      for (unsigned k = 0; k &lt; argsCount; ++k) {
<span class="udiff-line-modified-removed">-         double val = exec-&gt;uncheckedArgument(k).toNumber(exec);</span>
<span class="udiff-line-modified-added">+         double val = callFrame-&gt;uncheckedArgument(k).toNumber(globalObject);</span>
          RETURN_IF_EXCEPTION(scope, encodedJSValue());
          if (std::isnan(val)) {
              result = PNaN;
          } else if (val &lt; result || (!val &amp;&amp; !result &amp;&amp; std::signbit(val)))
              result = val;
      }
      return JSValue::encode(jsNumber(result));
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncPow(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncPow(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
      // ECMA 15.8.2.1.13
  
<span class="udiff-line-modified-removed">-     VM&amp; vm = exec-&gt;vm();</span>
<span class="udiff-line-modified-added">+     VM&amp; vm = globalObject-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
  
<span class="udiff-line-modified-removed">-     double arg = exec-&gt;argument(0).toNumber(exec);</span>
<span class="udiff-line-modified-added">+     double arg = callFrame-&gt;argument(0).toNumber(globalObject);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
      scope.release();
<span class="udiff-line-modified-removed">-     double arg2 = exec-&gt;argument(1).toNumber(exec);</span>
<span class="udiff-line-modified-added">+     double arg2 = callFrame-&gt;argument(1).toNumber(globalObject);</span>
  
      return JSValue::encode(JSValue(operationMathPow(arg, arg2)));
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncRandom(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncRandom(JSGlobalObject* globalObject, CallFrame*)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(exec-&gt;lexicalGlobalObject()-&gt;weakRandomNumber()));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(globalObject-&gt;weakRandomNumber()));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncRound(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncRound(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsNumber(jsRound(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsNumber(jsRound(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncSign(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncSign(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     double arg = exec-&gt;argument(0).toNumber(exec);</span>
<span class="udiff-line-modified-added">+     double arg = callFrame-&gt;argument(0).toNumber(globalObject);</span>
      if (std::isnan(arg))
          return JSValue::encode(jsNaN());
      if (!arg)
          return JSValue::encode(std::signbit(arg) ? jsNumber(-0.0) : jsNumber(0));
      return JSValue::encode(jsNumber(std::signbit(arg) ? -1 : 1));
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncSin(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncSin(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::sin(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::sin(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncSqrt(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncSqrt(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(sqrt(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(sqrt(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncTan(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncTan(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::tan(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::tan(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncIMul(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncIMul(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     VM&amp; vm = exec-&gt;vm();</span>
<span class="udiff-line-modified-added">+     VM&amp; vm = globalObject-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
<span class="udiff-line-modified-removed">-     int32_t left = exec-&gt;argument(0).toInt32(exec);</span>
<span class="udiff-line-modified-added">+     int32_t left = callFrame-&gt;argument(0).toInt32(globalObject);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
      scope.release();
<span class="udiff-line-modified-removed">-     int32_t right = exec-&gt;argument(1).toInt32(exec);</span>
<span class="udiff-line-modified-added">+     int32_t right = callFrame-&gt;argument(1).toInt32(globalObject);</span>
      return JSValue::encode(jsNumber(left * right));
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncACosh(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncACosh(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::acosh(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::acosh(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncASinh(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncASinh(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::asinh(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::asinh(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncATanh(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncATanh(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::atanh(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::atanh(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncCbrt(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncCbrt(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::cbrt(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::cbrt(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncCosh(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncCosh(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::cosh(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::cosh(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncExpm1(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncExpm1(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::expm1(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::expm1(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncFround(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncFround(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(static_cast&lt;float&gt;(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(static_cast&lt;float&gt;(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncLog1p(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncLog1p(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::log1p(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::log1p(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncLog10(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncLog10(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::log10(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::log10(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncLog2(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncLog2(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::log2(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::log2(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncSinh(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncSinh(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::sinh(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::sinh(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncTanh(ExecState* exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncTanh(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsDoubleNumber(Math::tanh(exec-&gt;argument(0).toNumber(exec))));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsDoubleNumber(Math::tanh(callFrame-&gt;argument(0).toNumber(globalObject))));</span>
  }
  
<span class="udiff-line-modified-removed">- EncodedJSValue JSC_HOST_CALL mathProtoFuncTrunc(ExecState*exec)</span>
<span class="udiff-line-modified-added">+ EncodedJSValue JSC_HOST_CALL mathProtoFuncTrunc(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="udiff-line-modified-removed">-     return JSValue::encode(jsNumber(exec-&gt;argument(0).toIntegerPreserveNaN(exec)));</span>
<span class="udiff-line-modified-added">+     return JSValue::encode(jsNumber(callFrame-&gt;argument(0).toIntegerPreserveNaN(globalObject)));</span>
  }
  
  } // namespace JSC
</pre>
<center><a href="MathCommon.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="MathObject.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>