<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/dfg/DFGBasicBlock.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DFGBackwardsPropagationPhase.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DFGBasicBlock.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/dfg/DFGBasicBlock.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #include &quot;config.h&quot;
 27 #include &quot;DFGBasicBlock.h&quot;
 28 
 29 #if ENABLE(DFG_JIT)
 30 
 31 #include &quot;JSCInlines.h&quot;
 32 
 33 namespace JSC { namespace DFG {
 34 
<span class="line-modified"> 35 BasicBlock::BasicBlock(</span>
<span class="line-modified"> 36     unsigned bytecodeBegin, unsigned numArguments, unsigned numLocals, float executionCount)</span>

 37     : bytecodeBegin(bytecodeBegin)
 38     , index(NoBlock)
 39     , cfaStructureClobberStateAtHead(StructuresAreWatched)
 40     , cfaStructureClobberStateAtTail(StructuresAreWatched)
 41     , cfaBranchDirection(InvalidBranchDirection)
 42     , cfaHasVisited(false)
 43     , cfaShouldRevisit(false)
<span class="line-removed"> 44     , cfaFoundConstants(false)</span>
 45     , cfaDidFinish(true)
 46     , intersectionOfCFAHasVisited(true)
 47     , isOSRTarget(false)
 48     , isCatchEntrypoint(false)
<span class="line-modified"> 49 #if !ASSERT_DISABLED</span>
 50     , isLinked(false)
 51 #endif
 52     , isReachable(false)
<span class="line-modified"> 53     , variablesAtHead(numArguments, numLocals)</span>
<span class="line-modified"> 54     , variablesAtTail(numArguments, numLocals)</span>
<span class="line-modified"> 55     , valuesAtHead(numArguments, numLocals)</span>
<span class="line-modified"> 56     , valuesAtTail(numArguments, numLocals)</span>
<span class="line-modified"> 57     , intersectionOfPastValuesAtHead(numArguments, numLocals, AbstractValue::fullTop())</span>
 58     , executionCount(executionCount)
 59 {
 60 }
 61 
 62 BasicBlock::~BasicBlock()
 63 {
 64 }
 65 
 66 void BasicBlock::ensureLocals(unsigned newNumLocals)
 67 {
 68     variablesAtHead.ensureLocals(newNumLocals);
 69     variablesAtTail.ensureLocals(newNumLocals);
 70     valuesAtHead.ensureLocals(newNumLocals);
 71     valuesAtTail.ensureLocals(newNumLocals);
 72     intersectionOfPastValuesAtHead.ensureLocals(newNumLocals, AbstractValue::fullTop());
 73 }
 74 









 75 void BasicBlock::replaceTerminal(Graph&amp; graph, Node* node)
 76 {
 77     NodeAndIndex result = findTerminal();
 78     if (!result)
 79         append(node);
 80     else {
 81         m_nodes.insert(result.index + 1, node);
 82         result.node-&gt;remove(graph);
 83     }
 84 
 85     ASSERT(terminal());
 86 }
 87 
 88 bool BasicBlock::isInPhis(Node* node) const
 89 {
 90     for (size_t i = 0; i &lt; phis.size(); ++i) {
 91         if (phis[i] == node)
 92             return true;
 93     }
 94     return false;
</pre>
</td>
<td>
<hr />
<pre>
 15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #include &quot;config.h&quot;
 27 #include &quot;DFGBasicBlock.h&quot;
 28 
 29 #if ENABLE(DFG_JIT)
 30 
 31 #include &quot;JSCInlines.h&quot;
 32 
 33 namespace JSC { namespace DFG {
 34 
<span class="line-modified"> 35 DEFINE_ALLOCATOR_WITH_HEAP_IDENTIFIER(BasicBlock);</span>
<span class="line-modified"> 36 </span>
<span class="line-added"> 37 BasicBlock::BasicBlock(BytecodeIndex bytecodeBegin, unsigned numArguments, unsigned numLocals, unsigned numTmps, float executionCount)</span>
 38     : bytecodeBegin(bytecodeBegin)
 39     , index(NoBlock)
 40     , cfaStructureClobberStateAtHead(StructuresAreWatched)
 41     , cfaStructureClobberStateAtTail(StructuresAreWatched)
 42     , cfaBranchDirection(InvalidBranchDirection)
 43     , cfaHasVisited(false)
 44     , cfaShouldRevisit(false)

 45     , cfaDidFinish(true)
 46     , intersectionOfCFAHasVisited(true)
 47     , isOSRTarget(false)
 48     , isCatchEntrypoint(false)
<span class="line-modified"> 49 #if ASSERT_ENABLED</span>
 50     , isLinked(false)
 51 #endif
 52     , isReachable(false)
<span class="line-modified"> 53     , variablesAtHead(numArguments, numLocals, numTmps)</span>
<span class="line-modified"> 54     , variablesAtTail(numArguments, numLocals, numTmps)</span>
<span class="line-modified"> 55     , valuesAtHead(numArguments, numLocals, numTmps)</span>
<span class="line-modified"> 56     , valuesAtTail(numArguments, numLocals, numTmps)</span>
<span class="line-modified"> 57     , intersectionOfPastValuesAtHead(numArguments, numLocals, numTmps, AbstractValue::fullTop())</span>
 58     , executionCount(executionCount)
 59 {
 60 }
 61 
 62 BasicBlock::~BasicBlock()
 63 {
 64 }
 65 
 66 void BasicBlock::ensureLocals(unsigned newNumLocals)
 67 {
 68     variablesAtHead.ensureLocals(newNumLocals);
 69     variablesAtTail.ensureLocals(newNumLocals);
 70     valuesAtHead.ensureLocals(newNumLocals);
 71     valuesAtTail.ensureLocals(newNumLocals);
 72     intersectionOfPastValuesAtHead.ensureLocals(newNumLocals, AbstractValue::fullTop());
 73 }
 74 
<span class="line-added"> 75 void BasicBlock::ensureTmps(unsigned newNumTmps)</span>
<span class="line-added"> 76 {</span>
<span class="line-added"> 77     variablesAtHead.ensureTmps(newNumTmps);</span>
<span class="line-added"> 78     variablesAtTail.ensureTmps(newNumTmps);</span>
<span class="line-added"> 79     valuesAtHead.ensureTmps(newNumTmps);</span>
<span class="line-added"> 80     valuesAtTail.ensureTmps(newNumTmps);</span>
<span class="line-added"> 81     intersectionOfPastValuesAtHead.ensureTmps(newNumTmps, AbstractValue::fullTop());</span>
<span class="line-added"> 82 }</span>
<span class="line-added"> 83 </span>
 84 void BasicBlock::replaceTerminal(Graph&amp; graph, Node* node)
 85 {
 86     NodeAndIndex result = findTerminal();
 87     if (!result)
 88         append(node);
 89     else {
 90         m_nodes.insert(result.index + 1, node);
 91         result.node-&gt;remove(graph);
 92     }
 93 
 94     ASSERT(terminal());
 95 }
 96 
 97 bool BasicBlock::isInPhis(Node* node) const
 98 {
 99     for (size_t i = 0; i &lt; phis.size(); ++i) {
100         if (phis[i] == node)
101             return true;
102     }
103     return false;
</pre>
</td>
</tr>
</table>
<center><a href="DFGBackwardsPropagationPhase.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DFGBasicBlock.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>