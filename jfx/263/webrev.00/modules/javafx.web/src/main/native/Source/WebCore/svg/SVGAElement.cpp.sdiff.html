<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/svg/SVGAElement.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="RadialGradientAttributes.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SVGAElement.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/svg/SVGAElement.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 31 #include &quot;HTMLAnchorElement.h&quot;
 32 #include &quot;HTMLParserIdioms.h&quot;
 33 #include &quot;KeyboardEvent.h&quot;
 34 #include &quot;MouseEvent.h&quot;
 35 #include &quot;PlatformMouseEvent.h&quot;
 36 #include &quot;RenderSVGInline.h&quot;
 37 #include &quot;RenderSVGText.h&quot;
 38 #include &quot;RenderSVGTransformableContainer.h&quot;
 39 #include &quot;ResourceRequest.h&quot;
 40 #include &quot;SVGNames.h&quot;
 41 #include &quot;SVGSMILElement.h&quot;
 42 #include &quot;XLinkNames.h&quot;
 43 #include &lt;wtf/IsoMallocInlines.h&gt;
 44 
 45 namespace WebCore {
 46 
 47 WTF_MAKE_ISO_ALLOCATED_IMPL(SVGAElement);
 48 
 49 inline SVGAElement::SVGAElement(const QualifiedName&amp; tagName, Document&amp; document)
 50     : SVGGraphicsElement(tagName, document)
<span class="line-removed"> 51     , SVGExternalResourcesRequired(this)</span>
 52     , SVGURIReference(this)
 53 {
 54     ASSERT(hasTagName(SVGNames::aTag));
 55 
 56     static std::once_flag onceFlag;
 57     std::call_once(onceFlag, [] {
 58         PropertyRegistry::registerProperty&lt;SVGNames::targetAttr, &amp;SVGAElement::m_target&gt;();
 59     });
 60 }
 61 
 62 Ref&lt;SVGAElement&gt; SVGAElement::create(const QualifiedName&amp; tagName, Document&amp; document)
 63 {
 64     return adoptRef(*new SVGAElement(tagName, document));
 65 }
 66 
 67 String SVGAElement::title() const
 68 {
 69     // If the xlink:title is set (non-empty string), use it.
 70     const AtomString&amp; title = attributeWithoutSynchronization(XLinkNames::titleAttr);
 71     if (!title.isEmpty())
 72         return title;
 73 
 74     // Otherwise, use the title of this element.
 75     return SVGElement::title();
 76 }
 77 
 78 void SVGAElement::parseAttribute(const QualifiedName&amp; name, const AtomString&amp; value)
 79 {
 80     if (name == SVGNames::targetAttr) {
 81         m_target-&gt;setBaseValInternal(value);
 82         return;
 83     }
 84 
 85     SVGGraphicsElement::parseAttribute(name, value);
 86     SVGURIReference::parseAttribute(name, value);
<span class="line-removed"> 87     SVGExternalResourcesRequired::parseAttribute(name, value);</span>
 88 }
 89 
 90 void SVGAElement::svgAttributeChanged(const QualifiedName&amp; attrName)
 91 {
 92     if (SVGURIReference::isKnownAttribute(attrName)) {
 93         bool wasLink = isLink();
 94         setIsLink(!href().isNull() &amp;&amp; !shouldProhibitLinks(this));
 95         if (wasLink != isLink()) {
 96             InstanceInvalidationGuard guard(*this);
 97             invalidateStyleForSubtree();
 98         }
 99         return;
100     }
101 
102     SVGGraphicsElement::svgAttributeChanged(attrName);
<span class="line-removed">103     SVGExternalResourcesRequired::svgAttributeChanged(attrName);</span>
104 }
105 
106 RenderPtr&lt;RenderElement&gt; SVGAElement::createElementRenderer(RenderStyle&amp;&amp; style, const RenderTreePosition&amp;)
107 {
108     if (parentNode() &amp;&amp; parentNode()-&gt;isSVGElement() &amp;&amp; downcast&lt;SVGElement&gt;(*parentNode()).isTextContent())
109         return createRenderer&lt;RenderSVGInline&gt;(*this, WTFMove(style));
110 
111     return createRenderer&lt;RenderSVGTransformableContainer&gt;(*this, WTFMove(style));
112 }
113 
114 void SVGAElement::defaultEventHandler(Event&amp; event)
115 {
116     if (isLink()) {
117         if (focused() &amp;&amp; isEnterKeyKeydownEvent(event)) {
118             event.setDefaultHandled();
119             dispatchSimulatedClick(&amp;event);
120             return;
121         }
122 
123         if (MouseEvent::canTriggerActivationBehavior(event)) {
</pre>
</td>
<td>
<hr />
<pre>
 31 #include &quot;HTMLAnchorElement.h&quot;
 32 #include &quot;HTMLParserIdioms.h&quot;
 33 #include &quot;KeyboardEvent.h&quot;
 34 #include &quot;MouseEvent.h&quot;
 35 #include &quot;PlatformMouseEvent.h&quot;
 36 #include &quot;RenderSVGInline.h&quot;
 37 #include &quot;RenderSVGText.h&quot;
 38 #include &quot;RenderSVGTransformableContainer.h&quot;
 39 #include &quot;ResourceRequest.h&quot;
 40 #include &quot;SVGNames.h&quot;
 41 #include &quot;SVGSMILElement.h&quot;
 42 #include &quot;XLinkNames.h&quot;
 43 #include &lt;wtf/IsoMallocInlines.h&gt;
 44 
 45 namespace WebCore {
 46 
 47 WTF_MAKE_ISO_ALLOCATED_IMPL(SVGAElement);
 48 
 49 inline SVGAElement::SVGAElement(const QualifiedName&amp; tagName, Document&amp; document)
 50     : SVGGraphicsElement(tagName, document)

 51     , SVGURIReference(this)
 52 {
 53     ASSERT(hasTagName(SVGNames::aTag));
 54 
 55     static std::once_flag onceFlag;
 56     std::call_once(onceFlag, [] {
 57         PropertyRegistry::registerProperty&lt;SVGNames::targetAttr, &amp;SVGAElement::m_target&gt;();
 58     });
 59 }
 60 
 61 Ref&lt;SVGAElement&gt; SVGAElement::create(const QualifiedName&amp; tagName, Document&amp; document)
 62 {
 63     return adoptRef(*new SVGAElement(tagName, document));
 64 }
 65 
 66 String SVGAElement::title() const
 67 {
 68     // If the xlink:title is set (non-empty string), use it.
 69     const AtomString&amp; title = attributeWithoutSynchronization(XLinkNames::titleAttr);
 70     if (!title.isEmpty())
 71         return title;
 72 
 73     // Otherwise, use the title of this element.
 74     return SVGElement::title();
 75 }
 76 
 77 void SVGAElement::parseAttribute(const QualifiedName&amp; name, const AtomString&amp; value)
 78 {
 79     if (name == SVGNames::targetAttr) {
 80         m_target-&gt;setBaseValInternal(value);
 81         return;
 82     }
 83 
 84     SVGGraphicsElement::parseAttribute(name, value);
 85     SVGURIReference::parseAttribute(name, value);

 86 }
 87 
 88 void SVGAElement::svgAttributeChanged(const QualifiedName&amp; attrName)
 89 {
 90     if (SVGURIReference::isKnownAttribute(attrName)) {
 91         bool wasLink = isLink();
 92         setIsLink(!href().isNull() &amp;&amp; !shouldProhibitLinks(this));
 93         if (wasLink != isLink()) {
 94             InstanceInvalidationGuard guard(*this);
 95             invalidateStyleForSubtree();
 96         }
 97         return;
 98     }
 99 
100     SVGGraphicsElement::svgAttributeChanged(attrName);

101 }
102 
103 RenderPtr&lt;RenderElement&gt; SVGAElement::createElementRenderer(RenderStyle&amp;&amp; style, const RenderTreePosition&amp;)
104 {
105     if (parentNode() &amp;&amp; parentNode()-&gt;isSVGElement() &amp;&amp; downcast&lt;SVGElement&gt;(*parentNode()).isTextContent())
106         return createRenderer&lt;RenderSVGInline&gt;(*this, WTFMove(style));
107 
108     return createRenderer&lt;RenderSVGTransformableContainer&gt;(*this, WTFMove(style));
109 }
110 
111 void SVGAElement::defaultEventHandler(Event&amp; event)
112 {
113     if (isLink()) {
114         if (focused() &amp;&amp; isEnterKeyKeydownEvent(event)) {
115             event.setDefaultHandled();
116             dispatchSimulatedClick(&amp;event);
117             return;
118         }
119 
120         if (MouseEvent::canTriggerActivationBehavior(event)) {
</pre>
</td>
</tr>
</table>
<center><a href="RadialGradientAttributes.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SVGAElement.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>