<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebKitLegacy/java/WebCoreSupport/FrameLoaderClientJava.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="EditorClientJava.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FrameLoaderClientJava.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebKitLegacy/java/WebCoreSupport/FrameLoaderClientJava.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 322     notImplemented();
 323 }
 324 
 325 void FrameLoaderClientJava::transitionToCommittedFromCachedFrame(CachedFrame*)
 326 {
 327     notImplemented();
 328 }
 329 
 330 void FrameLoaderClientJava::transitionToCommittedForNewPage()
 331 {
 332     FloatRect pageRect = frame()-&gt;page()-&gt;chrome().pageRect();
 333     Color bkColor(Color::white);
 334     Optional&lt;Color&gt; backgroundColor;
 335     FrameView* fv = frame()-&gt;view();
 336     if (fv) {
 337         backgroundColor = fv-&gt;baseBackgroundColor();
 338     }
 339     frame()-&gt;createView(IntRect(pageRect).size(), backgroundColor, /* fixedLayoutSize */ { }, /* fixedVisibleContentRect */ { });
 340 }
 341 
<span class="line-removed"> 342 void FrameLoaderClientJava::didSaveToPageCache()</span>
<span class="line-removed"> 343 {</span>
<span class="line-removed"> 344     notImplemented();</span>
<span class="line-removed"> 345 }</span>
<span class="line-removed"> 346 </span>
<span class="line-removed"> 347 void FrameLoaderClientJava::didRestoreFromPageCache()</span>
<span class="line-removed"> 348 {</span>
<span class="line-removed"> 349     notImplemented();</span>
<span class="line-removed"> 350 }</span>
<span class="line-removed"> 351 </span>
 352 WTF::Ref&lt;WebCore::DocumentLoader&gt; FrameLoaderClientJava::createDocumentLoader(const WebCore::ResourceRequest&amp; request, const SubstituteData&amp; substituteData)
 353 {
 354     return DocumentLoader::create(request, substituteData);
 355 }
 356 
 357 void FrameLoaderClientJava::dispatchWillSubmitForm(FormState&amp;, CompletionHandler&lt;void()&gt;&amp;&amp; function)
 358 {
 359     // FIXME: This is surely too simple
 360     if (!frame() || !function) {
 361         return;
 362     }
 363     function();
 364 }
 365 
 366 void FrameLoaderClientJava::committedLoad(DocumentLoader* loader, const char* data, int length)
 367 {
 368     //uta: for m_pluginWidget we need to do something different
 369     loader-&gt;commitData(data, length);
 370 }
 371 
</pre>
<hr />
<pre>
1044 
1045 ResourceError FrameLoaderClientJava::fileDoesNotExistError(const ResourceResponse&amp; response)
1046 {
1047     return ResourceError(&quot;Error&quot;, -998 /* ### */, response.url(),
1048                          &quot;File does not exist&quot;);
1049 }
1050 
1051 ResourceError FrameLoaderClientJava::pluginWillHandleLoadError(const ResourceResponse&amp; response)
1052 {
1053     using namespace FrameLoaderClientJavaInternal;
1054     return ResourceError(&quot;Error&quot;, WebKitErrorPluginWillHandleLoad, response.url(), &quot;Loading is handled by the media engine&quot;);
1055 }
1056 
1057 bool FrameLoaderClientJava::shouldFallBack(const ResourceError&amp; error)
1058 {
1059     using namespace FrameLoaderClientJavaInternal;
1060     //Font fallback supported by Java Fonts internaly
1061     return !(error.isCancellation() || (error.errorCode() == WebKitErrorFrameLoadInterruptedByPolicyChange));
1062 }
1063 





1064 bool FrameLoaderClientJava::canCachePage() const
1065 {
1066     return true;
1067 }
1068 
1069 void FrameLoaderClientJava::dispatchUnableToImplementPolicy(const ResourceError&amp;)
1070 {
1071     notImplemented();
1072 }
1073 
1074 void FrameLoaderClientJava::dispatchDidBecomeFrameset(bool)
1075 {
1076    notImplemented();
1077 }
1078 
1079 
1080 void FrameLoaderClientJava::setMainDocumentError(
1081     DocumentLoader*,
1082     const ResourceError&amp;)
1083 {
</pre>
<hr />
<pre>
1097     notImplemented();
1098 }
1099 
1100 void FrameLoaderClientJava::updateGlobalHistoryRedirectLinks()
1101 {
1102     notImplemented();
1103 }
1104 
1105 void FrameLoaderClientJava::dispatchDidClearWindowObjectInWorld(
1106     DOMWrapperWorld&amp; world)
1107 {
1108     using namespace FrameLoaderClientJavaInternal;
1109     JNIEnv* env = WTF::GetJavaEnv();
1110     initRefs(env);
1111 
1112     if (&amp;world != &amp;mainThreadNormalWorld()) {
1113         return;
1114     }
1115 
1116     JSGlobalContextRef context = toGlobalRef(frame()-&gt;script().globalObject(
<span class="line-modified">1117             mainThreadNormalWorld())-&gt;globalExec());</span>
1118     JSObjectRef windowObject = JSContextGetGlobalObject(context);
1119 
1120     env-&gt;CallVoidMethod(m_webPage, didClearWindowObjectMID,
1121             ptr_to_jlong(context), ptr_to_jlong(windowObject));
1122     WTF::CheckAndClearException(env);
1123 }
1124 
1125 void FrameLoaderClientJava::registerForIconNotification()
1126 {
1127     //notImplemented();
1128 }
1129 
<span class="line-modified">1130 void FrameLoaderClientJava::convertMainResourceLoadToDownload(DocumentLoader*, PAL::SessionID, const ResourceRequest&amp;, const ResourceResponse&amp;)</span>
1131 {
1132     //notImplemented();
1133 }
1134 
1135 Ref&lt;FrameNetworkingContext&gt; FrameLoaderClientJava::createNetworkingContext()
1136 {
1137     return FrameNetworkingContextJava::create(frame());
1138 }
1139 
1140 
1141 bool FrameLoaderClientJava::shouldUseCredentialStorage(
1142     DocumentLoader*,
1143     unsigned long)
1144 {
1145     notImplemented();
1146     return false;
1147 }
1148 
1149 void FrameLoaderClientJava::dispatchDidReceiveAuthenticationChallenge(DocumentLoader*, unsigned long, const AuthenticationChallenge&amp; challenge)
1150 {
</pre>
<hr />
<pre>
1152     // If the ResourceLoadDelegate doesn&#39;t exist or fails to handle the call, we tell the ResourceHandle
1153     // to continue without credential - this is the best approximation of Mac behavior
1154     challenge.authenticationClient()-&gt;receivedRequestToContinueWithoutCredential(challenge);
1155 }
1156 
1157 void FrameLoaderClientJava::prefetchDNS(const String&amp; hostname)
1158 {
1159     WebCore::prefetchDNS(hostname);
1160 }
1161 
1162 Optional&lt;PageIdentifier&gt; FrameLoaderClientJava::pageID() const
1163 {
1164     return WTF::nullopt;
1165 }
1166 
1167 Optional&lt;FrameIdentifier&gt; FrameLoaderClientJava::frameID() const
1168 {
1169     return WTF::nullopt;
1170 }
1171 
<span class="line-removed">1172 PAL::SessionID FrameLoaderClientJava::sessionID() const</span>
<span class="line-removed">1173 {</span>
<span class="line-removed">1174     return m_frame &amp;&amp; m_frame-&gt;page() ? m_frame-&gt;page()-&gt;sessionID() : PAL::SessionID::defaultSessionID();</span>
<span class="line-removed">1175 }</span>
<span class="line-removed">1176 </span>
1177 }
</pre>
</td>
<td>
<hr />
<pre>
 322     notImplemented();
 323 }
 324 
 325 void FrameLoaderClientJava::transitionToCommittedFromCachedFrame(CachedFrame*)
 326 {
 327     notImplemented();
 328 }
 329 
 330 void FrameLoaderClientJava::transitionToCommittedForNewPage()
 331 {
 332     FloatRect pageRect = frame()-&gt;page()-&gt;chrome().pageRect();
 333     Color bkColor(Color::white);
 334     Optional&lt;Color&gt; backgroundColor;
 335     FrameView* fv = frame()-&gt;view();
 336     if (fv) {
 337         backgroundColor = fv-&gt;baseBackgroundColor();
 338     }
 339     frame()-&gt;createView(IntRect(pageRect).size(), backgroundColor, /* fixedLayoutSize */ { }, /* fixedVisibleContentRect */ { });
 340 }
 341 










 342 WTF::Ref&lt;WebCore::DocumentLoader&gt; FrameLoaderClientJava::createDocumentLoader(const WebCore::ResourceRequest&amp; request, const SubstituteData&amp; substituteData)
 343 {
 344     return DocumentLoader::create(request, substituteData);
 345 }
 346 
 347 void FrameLoaderClientJava::dispatchWillSubmitForm(FormState&amp;, CompletionHandler&lt;void()&gt;&amp;&amp; function)
 348 {
 349     // FIXME: This is surely too simple
 350     if (!frame() || !function) {
 351         return;
 352     }
 353     function();
 354 }
 355 
 356 void FrameLoaderClientJava::committedLoad(DocumentLoader* loader, const char* data, int length)
 357 {
 358     //uta: for m_pluginWidget we need to do something different
 359     loader-&gt;commitData(data, length);
 360 }
 361 
</pre>
<hr />
<pre>
1034 
1035 ResourceError FrameLoaderClientJava::fileDoesNotExistError(const ResourceResponse&amp; response)
1036 {
1037     return ResourceError(&quot;Error&quot;, -998 /* ### */, response.url(),
1038                          &quot;File does not exist&quot;);
1039 }
1040 
1041 ResourceError FrameLoaderClientJava::pluginWillHandleLoadError(const ResourceResponse&amp; response)
1042 {
1043     using namespace FrameLoaderClientJavaInternal;
1044     return ResourceError(&quot;Error&quot;, WebKitErrorPluginWillHandleLoad, response.url(), &quot;Loading is handled by the media engine&quot;);
1045 }
1046 
1047 bool FrameLoaderClientJava::shouldFallBack(const ResourceError&amp; error)
1048 {
1049     using namespace FrameLoaderClientJavaInternal;
1050     //Font fallback supported by Java Fonts internaly
1051     return !(error.isCancellation() || (error.errorCode() == WebKitErrorFrameLoadInterruptedByPolicyChange));
1052 }
1053 
<span class="line-added">1054 void FrameLoaderClientJava::didRestoreFromBackForwardCache()</span>
<span class="line-added">1055 {</span>
<span class="line-added">1056     // FIXME: openjfx2.26 Raise Bug to track fwd / back cache</span>
<span class="line-added">1057 }</span>
<span class="line-added">1058 </span>
1059 bool FrameLoaderClientJava::canCachePage() const
1060 {
1061     return true;
1062 }
1063 
1064 void FrameLoaderClientJava::dispatchUnableToImplementPolicy(const ResourceError&amp;)
1065 {
1066     notImplemented();
1067 }
1068 
1069 void FrameLoaderClientJava::dispatchDidBecomeFrameset(bool)
1070 {
1071    notImplemented();
1072 }
1073 
1074 
1075 void FrameLoaderClientJava::setMainDocumentError(
1076     DocumentLoader*,
1077     const ResourceError&amp;)
1078 {
</pre>
<hr />
<pre>
1092     notImplemented();
1093 }
1094 
1095 void FrameLoaderClientJava::updateGlobalHistoryRedirectLinks()
1096 {
1097     notImplemented();
1098 }
1099 
1100 void FrameLoaderClientJava::dispatchDidClearWindowObjectInWorld(
1101     DOMWrapperWorld&amp; world)
1102 {
1103     using namespace FrameLoaderClientJavaInternal;
1104     JNIEnv* env = WTF::GetJavaEnv();
1105     initRefs(env);
1106 
1107     if (&amp;world != &amp;mainThreadNormalWorld()) {
1108         return;
1109     }
1110 
1111     JSGlobalContextRef context = toGlobalRef(frame()-&gt;script().globalObject(
<span class="line-modified">1112             mainThreadNormalWorld()));</span>
1113     JSObjectRef windowObject = JSContextGetGlobalObject(context);
1114 
1115     env-&gt;CallVoidMethod(m_webPage, didClearWindowObjectMID,
1116             ptr_to_jlong(context), ptr_to_jlong(windowObject));
1117     WTF::CheckAndClearException(env);
1118 }
1119 
1120 void FrameLoaderClientJava::registerForIconNotification()
1121 {
1122     //notImplemented();
1123 }
1124 
<span class="line-modified">1125 void FrameLoaderClientJava::convertMainResourceLoadToDownload(DocumentLoader*, const ResourceRequest&amp;, const ResourceResponse&amp;)</span>
1126 {
1127     //notImplemented();
1128 }
1129 
1130 Ref&lt;FrameNetworkingContext&gt; FrameLoaderClientJava::createNetworkingContext()
1131 {
1132     return FrameNetworkingContextJava::create(frame());
1133 }
1134 
1135 
1136 bool FrameLoaderClientJava::shouldUseCredentialStorage(
1137     DocumentLoader*,
1138     unsigned long)
1139 {
1140     notImplemented();
1141     return false;
1142 }
1143 
1144 void FrameLoaderClientJava::dispatchDidReceiveAuthenticationChallenge(DocumentLoader*, unsigned long, const AuthenticationChallenge&amp; challenge)
1145 {
</pre>
<hr />
<pre>
1147     // If the ResourceLoadDelegate doesn&#39;t exist or fails to handle the call, we tell the ResourceHandle
1148     // to continue without credential - this is the best approximation of Mac behavior
1149     challenge.authenticationClient()-&gt;receivedRequestToContinueWithoutCredential(challenge);
1150 }
1151 
1152 void FrameLoaderClientJava::prefetchDNS(const String&amp; hostname)
1153 {
1154     WebCore::prefetchDNS(hostname);
1155 }
1156 
1157 Optional&lt;PageIdentifier&gt; FrameLoaderClientJava::pageID() const
1158 {
1159     return WTF::nullopt;
1160 }
1161 
1162 Optional&lt;FrameIdentifier&gt; FrameLoaderClientJava::frameID() const
1163 {
1164     return WTF::nullopt;
1165 }
1166 





1167 }
</pre>
</td>
</tr>
</table>
<center><a href="EditorClientJava.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FrameLoaderClientJava.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>