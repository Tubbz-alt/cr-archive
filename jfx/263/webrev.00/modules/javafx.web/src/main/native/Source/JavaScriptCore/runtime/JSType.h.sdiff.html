<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/JSType.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="JSType.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="JSTypeInfo.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/JSType.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  *  Copyright (C) 2006-2018 Apple Inc. All rights reserved.</span>
  3  *
  4  *  This library is free software; you can redistribute it and/or
  5  *  modify it under the terms of the GNU Library General Public
  6  *  License as published by the Free Software Foundation; either
  7  *  version 2 of the License, or (at your option) any later version.
  8  *
  9  *  This library is distributed in the hope that it will be useful,
 10  *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 11  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 12  *  Library General Public License for more details.
 13  *
 14  *  You should have received a copy of the GNU Library General Public License
 15  *  along with this library; see the file COPYING.LIB.  If not, write to
 16  *  the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 17  *  Boston, MA 02110-1301, USA.
 18  *
 19  */
 20 
 21 #pragma once
 22 
 23 namespace JSC {
 24 
 25 enum JSType : uint8_t {
 26     // The CellType value must come before any JSType that is a JSCell.
 27     CellType,
 28     StringType,
 29     SymbolType,
 30     BigIntType,
 31 

 32     CustomGetterSetterType,
 33     APIValueWrapperType,
 34 
 35     NativeExecutableType,
 36 
 37     ProgramExecutableType,
 38     ModuleProgramExecutableType,
 39     EvalExecutableType,
 40     FunctionExecutableType,
 41 
 42     UnlinkedFunctionExecutableType,
 43 
 44     UnlinkedProgramCodeBlockType,
 45     UnlinkedModuleProgramCodeBlockType,
 46     UnlinkedEvalCodeBlockType,
 47     UnlinkedFunctionCodeBlockType,
 48 
 49     CodeBlockType,
 50 
<span class="line-removed"> 51     JSFixedArrayType,</span>
 52     JSImmutableButterflyType,
 53     JSSourceCodeType,
 54     JSScriptFetcherType,
 55     JSScriptFetchParametersType,
 56 
 57     // The ObjectType value must come before any JSType that is a subclass of JSObject.
 58     ObjectType,
 59     FinalObjectType,
 60     JSCalleeType,
 61     JSFunctionType,
 62     InternalFunctionType,
 63     NumberObjectType,
 64     ErrorInstanceType,
 65     PureForwardingProxyType,
 66     ImpureProxyType,
 67     DirectArgumentsType,
 68     ScopedArgumentsType,
 69     ClonedArgumentsType,
 70 
 71     // Start JSArray types.
 72     ArrayType,
 73     DerivedArrayType,
 74     // End JSArray types.
 75 
 76     ArrayBufferType,
 77 
 78     // Start JSArrayBufferView types. Keep in sync with the order of FOR_EACH_TYPED_ARRAY_TYPE_EXCLUDING_DATA_VIEW.
 79     Int8ArrayType,
 80     Uint8ArrayType,
 81     Uint8ClampedArrayType,
 82     Int16ArrayType,
 83     Uint16ArrayType,
 84     Int32ArrayType,
 85     Uint32ArrayType,
 86     Float32ArrayType,
 87     Float64ArrayType,
 88     DataViewType,
 89     // End JSArrayBufferView types.
 90 
<span class="line-removed"> 91     GetterSetterType,</span>
<span class="line-removed"> 92 </span>
 93     // JSScope &lt;- JSWithScope
 94     //         &lt;- StrictEvalActivation
 95     //         &lt;- JSSymbolTableObject  &lt;- JSLexicalEnvironment      &lt;- JSModuleEnvironment
 96     //                                 &lt;- JSSegmentedVariableObject &lt;- JSGlobalLexicalEnvironment
 97     //                                                              &lt;- JSGlobalObject
 98     // Start JSScope types.
 99     // Start environment record types.
100     GlobalObjectType,
101     GlobalLexicalEnvironmentType,
102     LexicalEnvironmentType,
103     ModuleEnvironmentType,
104     StrictEvalActivationType,
105     // End environment record types.
106     WithScopeType,
107     // End JSScope types.
108 

109     RegExpObjectType,

110     ProxyObjectType,





111     JSMapType,
112     JSSetType,
113     JSWeakMapType,
114     JSWeakSetType,
<span class="line-modified">115     WebAssemblyToJSCalleeType,</span>

116     StringObjectType,


117 
<span class="line-modified">118     LastJSCObjectType = StringObjectType, // This is the last &quot;JSC&quot; Object type. After this, we have embedder&#39;s (e.g., WebCore) extended object types.</span>
119     MaxJSType = 0b11111111,
120 };
121 
122 static constexpr uint32_t FirstTypedArrayType = Int8ArrayType;
123 static constexpr uint32_t LastTypedArrayType = DataViewType;
124 
125 // LastObjectType should be MaxJSType (not LastJSCObjectType) since embedders can add their extended object types after the enums listed in JSType.
126 static constexpr uint32_t FirstObjectType = ObjectType;
127 static constexpr uint32_t LastObjectType = MaxJSType;
128 
129 static constexpr uint32_t NumberOfTypedArrayTypes = LastTypedArrayType - FirstTypedArrayType + 1;
130 static constexpr uint32_t NumberOfTypedArrayTypesExcludingDataView = NumberOfTypedArrayTypes - 1;
131 
132 static_assert(sizeof(JSType) == sizeof(uint8_t), &quot;sizeof(JSType) is one byte.&quot;);
<span class="line-modified">133 static_assert(LastJSCObjectType &lt; 128, &quot;The highest bit is reserved for embedder&#39;s extension.&quot;);</span>
134 
135 inline constexpr bool isTypedArrayType(JSType type)
136 {
137     return (static_cast&lt;uint32_t&gt;(type) - FirstTypedArrayType) &lt; NumberOfTypedArrayTypesExcludingDataView;
138 }
139 
140 } // namespace JSC
141 
142 namespace WTF {
143 
144 class PrintStream;
145 
146 void printInternal(PrintStream&amp;, JSC::JSType);
147 
148 } // namespace WTF
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  *  Copyright (C) 2006-2019 Apple Inc. All rights reserved.</span>
  3  *
  4  *  This library is free software; you can redistribute it and/or
  5  *  modify it under the terms of the GNU Library General Public
  6  *  License as published by the Free Software Foundation; either
  7  *  version 2 of the License, or (at your option) any later version.
  8  *
  9  *  This library is distributed in the hope that it will be useful,
 10  *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 11  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 12  *  Library General Public License for more details.
 13  *
 14  *  You should have received a copy of the GNU Library General Public License
 15  *  along with this library; see the file COPYING.LIB.  If not, write to
 16  *  the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 17  *  Boston, MA 02110-1301, USA.
 18  *
 19  */
 20 
 21 #pragma once
 22 
 23 namespace JSC {
 24 
 25 enum JSType : uint8_t {
 26     // The CellType value must come before any JSType that is a JSCell.
 27     CellType,
 28     StringType,
 29     SymbolType,
 30     BigIntType,
 31 
<span class="line-added"> 32     GetterSetterType,</span>
 33     CustomGetterSetterType,
 34     APIValueWrapperType,
 35 
 36     NativeExecutableType,
 37 
 38     ProgramExecutableType,
 39     ModuleProgramExecutableType,
 40     EvalExecutableType,
 41     FunctionExecutableType,
 42 
 43     UnlinkedFunctionExecutableType,
 44 
 45     UnlinkedProgramCodeBlockType,
 46     UnlinkedModuleProgramCodeBlockType,
 47     UnlinkedEvalCodeBlockType,
 48     UnlinkedFunctionCodeBlockType,
 49 
 50     CodeBlockType,
 51 

 52     JSImmutableButterflyType,
 53     JSSourceCodeType,
 54     JSScriptFetcherType,
 55     JSScriptFetchParametersType,
 56 
 57     // The ObjectType value must come before any JSType that is a subclass of JSObject.
 58     ObjectType,
 59     FinalObjectType,
 60     JSCalleeType,
 61     JSFunctionType,
 62     InternalFunctionType,
 63     NumberObjectType,
 64     ErrorInstanceType,
 65     PureForwardingProxyType,
 66     ImpureProxyType,
 67     DirectArgumentsType,
 68     ScopedArgumentsType,
 69     ClonedArgumentsType,
 70 
 71     // Start JSArray types.
 72     ArrayType,
 73     DerivedArrayType,
 74     // End JSArray types.
 75 
 76     ArrayBufferType,
 77 
 78     // Start JSArrayBufferView types. Keep in sync with the order of FOR_EACH_TYPED_ARRAY_TYPE_EXCLUDING_DATA_VIEW.
 79     Int8ArrayType,
 80     Uint8ArrayType,
 81     Uint8ClampedArrayType,
 82     Int16ArrayType,
 83     Uint16ArrayType,
 84     Int32ArrayType,
 85     Uint32ArrayType,
 86     Float32ArrayType,
 87     Float64ArrayType,
 88     DataViewType,
 89     // End JSArrayBufferView types.
 90 


 91     // JSScope &lt;- JSWithScope
 92     //         &lt;- StrictEvalActivation
 93     //         &lt;- JSSymbolTableObject  &lt;- JSLexicalEnvironment      &lt;- JSModuleEnvironment
 94     //                                 &lt;- JSSegmentedVariableObject &lt;- JSGlobalLexicalEnvironment
 95     //                                                              &lt;- JSGlobalObject
 96     // Start JSScope types.
 97     // Start environment record types.
 98     GlobalObjectType,
 99     GlobalLexicalEnvironmentType,
100     LexicalEnvironmentType,
101     ModuleEnvironmentType,
102     StrictEvalActivationType,
103     // End environment record types.
104     WithScopeType,
105     // End JSScope types.
106 
<span class="line-added">107     ModuleNamespaceObjectType,</span>
108     RegExpObjectType,
<span class="line-added">109     JSDateType,</span>
110     ProxyObjectType,
<span class="line-added">111     JSGeneratorType,</span>
<span class="line-added">112     JSAsyncGeneratorType,</span>
<span class="line-added">113     JSArrayIteratorType,</span>
<span class="line-added">114     JSStringIteratorType,</span>
<span class="line-added">115     JSPromiseType,</span>
116     JSMapType,
117     JSSetType,
118     JSWeakMapType,
119     JSWeakSetType,
<span class="line-modified">120     WebAssemblyModuleType,</span>
<span class="line-added">121     // Start StringObjectType types.</span>
122     StringObjectType,
<span class="line-added">123     DerivedStringObjectType,</span>
<span class="line-added">124     // End StringObjectType types.</span>
125 
<span class="line-modified">126     LastJSCObjectType = DerivedStringObjectType, // This is the last &quot;JSC&quot; Object type. After this, we have embedder&#39;s (e.g., WebCore) extended object types.</span>
127     MaxJSType = 0b11111111,
128 };
129 
130 static constexpr uint32_t FirstTypedArrayType = Int8ArrayType;
131 static constexpr uint32_t LastTypedArrayType = DataViewType;
132 
133 // LastObjectType should be MaxJSType (not LastJSCObjectType) since embedders can add their extended object types after the enums listed in JSType.
134 static constexpr uint32_t FirstObjectType = ObjectType;
135 static constexpr uint32_t LastObjectType = MaxJSType;
136 
137 static constexpr uint32_t NumberOfTypedArrayTypes = LastTypedArrayType - FirstTypedArrayType + 1;
138 static constexpr uint32_t NumberOfTypedArrayTypesExcludingDataView = NumberOfTypedArrayTypes - 1;
139 
140 static_assert(sizeof(JSType) == sizeof(uint8_t), &quot;sizeof(JSType) is one byte.&quot;);
<span class="line-modified">141 static_assert(LastJSCObjectType &lt; 0b11100000, &quot;Embedder can use 0b11100000 or upper.&quot;);</span>
142 
143 inline constexpr bool isTypedArrayType(JSType type)
144 {
145     return (static_cast&lt;uint32_t&gt;(type) - FirstTypedArrayType) &lt; NumberOfTypedArrayTypesExcludingDataView;
146 }
147 
148 } // namespace JSC
149 
150 namespace WTF {
151 
152 class PrintStream;
153 
154 void printInternal(PrintStream&amp;, JSC::JSType);
155 
156 } // namespace WTF
</pre>
</td>
</tr>
</table>
<center><a href="JSType.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="JSTypeInfo.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>