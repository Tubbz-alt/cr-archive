<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/ConsoleClient.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ConfigFile.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ConsoleClient.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/ConsoleClient.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 145,15 ***</span>
      builder.append(message);
  
      WTFLogAlways(&quot;%s&quot;, builder.toString().utf8().data());
  }
  
<span class="line-modified">! void ConsoleClient::printConsoleMessageWithArguments(MessageSource source, MessageType type, MessageLevel level, JSC::ExecState* exec, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
      bool isTraceMessage = type == MessageType::Trace;
      size_t stackSize = isTraceMessage ? ScriptCallStack::maxCallStackSizeToCapture : 1;
<span class="line-modified">!     Ref&lt;ScriptCallStack&gt; callStack = createScriptCallStackForConsole(exec, stackSize);</span>
      const ScriptCallFrame&amp; lastCaller = callStack-&gt;at(0);
  
      StringBuilder builder;
  
      if (!lastCaller.sourceURL().isEmpty()) {
<span class="line-new-header">--- 145,15 ---</span>
      builder.append(message);
  
      WTFLogAlways(&quot;%s&quot;, builder.toString().utf8().data());
  }
  
<span class="line-modified">! void ConsoleClient::printConsoleMessageWithArguments(MessageSource source, MessageType type, MessageLevel level, JSC::JSGlobalObject* globalObject, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
      bool isTraceMessage = type == MessageType::Trace;
      size_t stackSize = isTraceMessage ? ScriptCallStack::maxCallStackSizeToCapture : 1;
<span class="line-modified">!     Ref&lt;ScriptCallStack&gt; callStack = createScriptCallStackForConsole(globalObject, stackSize);</span>
      const ScriptCallFrame&amp; lastCaller = callStack-&gt;at(0);
  
      StringBuilder builder;
  
      if (!lastCaller.sourceURL().isEmpty()) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 162,13 ***</span>
      }
  
      appendMessagePrefix(builder, source, type, level);
      for (size_t i = 0; i &lt; arguments-&gt;argumentCount(); ++i) {
          builder.append(&#39; &#39;);
<span class="line-modified">!         auto* state = arguments-&gt;globalState();</span>
<span class="line-modified">!         auto scope = DECLARE_CATCH_SCOPE(state-&gt;vm());</span>
<span class="line-modified">!         builder.append(arguments-&gt;argumentAt(i).toWTFString(state));</span>
          scope.clearException();
      }
  
      WTFLogAlways(&quot;%s&quot;, builder.toString().utf8().data());
  
<span class="line-new-header">--- 162,13 ---</span>
      }
  
      appendMessagePrefix(builder, source, type, level);
      for (size_t i = 0; i &lt; arguments-&gt;argumentCount(); ++i) {
          builder.append(&#39; &#39;);
<span class="line-modified">!         auto* globalObject = arguments-&gt;globalObject();</span>
<span class="line-modified">!         auto scope = DECLARE_CATCH_SCOPE(globalObject-&gt;vm());</span>
<span class="line-modified">!         builder.append(arguments-&gt;argumentAt(i).toWTFString(globalObject));</span>
          scope.clearException();
      }
  
      WTFLogAlways(&quot;%s&quot;, builder.toString().utf8().data());
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 190,64 ***</span>
              WTFLogAlways(&quot;%s&quot;, callFrameBuilder.toString().utf8().data());
          }
      }
  }
  
<span class="line-modified">! void ConsoleClient::internalMessageWithTypeAndLevel(MessageType type, MessageLevel level, JSC::ExecState* exec, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments, ArgumentRequirement argumentRequirement)</span>
  {
      if (argumentRequirement == ArgumentRequired &amp;&amp; !arguments-&gt;argumentCount())
          return;
  
<span class="line-modified">!     messageWithTypeAndLevel(type, level, exec, WTFMove(arguments));</span>
  }
  
<span class="line-modified">! void ConsoleClient::logWithLevel(ExecState* exec, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments, MessageLevel level)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::Log, level, exec, WTFMove(arguments), ArgumentRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::clear(ExecState* exec)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::Clear, MessageLevel::Log, exec, ScriptArguments::create(*exec, { }), ArgumentNotRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::dir(ExecState* exec, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::Dir, MessageLevel::Log, exec, WTFMove(arguments), ArgumentRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::dirXML(ExecState* exec, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::DirXML, MessageLevel::Log, exec, WTFMove(arguments), ArgumentRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::table(ExecState* exec, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::Table, MessageLevel::Log, exec, WTFMove(arguments), ArgumentRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::trace(ExecState* exec, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::Trace, MessageLevel::Log, exec, WTFMove(arguments), ArgumentNotRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::assertion(ExecState* exec, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::Assert, MessageLevel::Error, exec, WTFMove(arguments), ArgumentNotRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::group(ExecState* exec, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::StartGroup, MessageLevel::Log, exec, WTFMove(arguments), ArgumentNotRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::groupCollapsed(ExecState* exec, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::StartGroupCollapsed, MessageLevel::Log, exec, WTFMove(arguments), ArgumentNotRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::groupEnd(ExecState* exec, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::EndGroup, MessageLevel::Log, exec, WTFMove(arguments), ArgumentNotRequired);</span>
  }
  
  } // namespace JSC
<span class="line-new-header">--- 190,64 ---</span>
              WTFLogAlways(&quot;%s&quot;, callFrameBuilder.toString().utf8().data());
          }
      }
  }
  
<span class="line-modified">! void ConsoleClient::internalMessageWithTypeAndLevel(MessageType type, MessageLevel level, JSC::JSGlobalObject* globalObject, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments, ArgumentRequirement argumentRequirement)</span>
  {
      if (argumentRequirement == ArgumentRequired &amp;&amp; !arguments-&gt;argumentCount())
          return;
  
<span class="line-modified">!     messageWithTypeAndLevel(type, level, globalObject, WTFMove(arguments));</span>
  }
  
<span class="line-modified">! void ConsoleClient::logWithLevel(JSGlobalObject* globalObject, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments, MessageLevel level)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::Log, level, globalObject, WTFMove(arguments), ArgumentRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::clear(JSGlobalObject* globalObject)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::Clear, MessageLevel::Log, globalObject, ScriptArguments::create(globalObject, { }), ArgumentNotRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::dir(JSGlobalObject* globalObject, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::Dir, MessageLevel::Log, globalObject, WTFMove(arguments), ArgumentRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::dirXML(JSGlobalObject* globalObject, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::DirXML, MessageLevel::Log, globalObject, WTFMove(arguments), ArgumentRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::table(JSGlobalObject* globalObject, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::Table, MessageLevel::Log, globalObject, WTFMove(arguments), ArgumentRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::trace(JSGlobalObject* globalObject, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::Trace, MessageLevel::Log, globalObject, WTFMove(arguments), ArgumentNotRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::assertion(JSGlobalObject* globalObject, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::Assert, MessageLevel::Error, globalObject, WTFMove(arguments), ArgumentNotRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::group(JSGlobalObject* globalObject, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::StartGroup, MessageLevel::Log, globalObject, WTFMove(arguments), ArgumentNotRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::groupCollapsed(JSGlobalObject* globalObject, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::StartGroupCollapsed, MessageLevel::Log, globalObject, WTFMove(arguments), ArgumentNotRequired);</span>
  }
  
<span class="line-modified">! void ConsoleClient::groupEnd(JSGlobalObject* globalObject, Ref&lt;ScriptArguments&gt;&amp;&amp; arguments)</span>
  {
<span class="line-modified">!     internalMessageWithTypeAndLevel(MessageType::EndGroup, MessageLevel::Log, globalObject, WTFMove(arguments), ArgumentNotRequired);</span>
  }
  
  } // namespace JSC
</pre>
<center><a href="ConfigFile.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ConsoleClient.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>