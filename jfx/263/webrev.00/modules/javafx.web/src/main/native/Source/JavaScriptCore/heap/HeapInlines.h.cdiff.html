<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/heap/HeapInlines.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="HeapCellInlines.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="HeapSnapshot.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/heap/HeapInlines.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 68,21 ***</span>
  }
  
  ALWAYS_INLINE bool Heap::isMarked(const void* rawCell)
  {
      HeapCell* cell = bitwise_cast&lt;HeapCell*&gt;(rawCell);
<span class="line-modified">!     if (cell-&gt;isLargeAllocation())</span>
<span class="line-modified">!         return cell-&gt;largeAllocation().isMarked();</span>
      MarkedBlock&amp; block = cell-&gt;markedBlock();
      return block.isMarked(m_objectSpace.markingVersion(), cell);
  }
  
  ALWAYS_INLINE bool Heap::testAndSetMarked(HeapVersion markingVersion, const void* rawCell)
  {
      HeapCell* cell = bitwise_cast&lt;HeapCell*&gt;(rawCell);
<span class="line-modified">!     if (cell-&gt;isLargeAllocation())</span>
<span class="line-modified">!         return cell-&gt;largeAllocation().testAndSetMarked();</span>
      MarkedBlock&amp; block = cell-&gt;markedBlock();
      Dependency dependency = block.aboutToMark(markingVersion);
      return block.testAndSetMarked(cell, dependency);
  }
  
<span class="line-new-header">--- 68,21 ---</span>
  }
  
  ALWAYS_INLINE bool Heap::isMarked(const void* rawCell)
  {
      HeapCell* cell = bitwise_cast&lt;HeapCell*&gt;(rawCell);
<span class="line-modified">!     if (cell-&gt;isPreciseAllocation())</span>
<span class="line-modified">!         return cell-&gt;preciseAllocation().isMarked();</span>
      MarkedBlock&amp; block = cell-&gt;markedBlock();
      return block.isMarked(m_objectSpace.markingVersion(), cell);
  }
  
  ALWAYS_INLINE bool Heap::testAndSetMarked(HeapVersion markingVersion, const void* rawCell)
  {
      HeapCell* cell = bitwise_cast&lt;HeapCell*&gt;(rawCell);
<span class="line-modified">!     if (cell-&gt;isPreciseAllocation())</span>
<span class="line-modified">!         return cell-&gt;preciseAllocation().testAndSetMarked();</span>
      MarkedBlock&amp; block = cell-&gt;markedBlock();
      Dependency dependency = block.aboutToMark(markingVersion);
      return block.testAndSetMarked(cell, dependency);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 186,11 ***</span>
  inline void Heap::decrementDeferralDepthAndGCIfNeeded()
  {
      ASSERT(!Thread::mayBeGCThread() || m_worldIsStopped);
      m_deferralDepth--;
  
<span class="line-modified">!     if (UNLIKELY(m_didDeferGCWork)) {</span>
          decrementDeferralDepthAndGCIfNeededSlow();
  
          // Here are the possible relationships between m_deferralDepth and m_didDeferGCWork.
          // Note that prior to the call to decrementDeferralDepthAndGCIfNeededSlow,
          // m_didDeferGCWork had to have been true. Now it can be either false or true. There is
<span class="line-new-header">--- 186,11 ---</span>
  inline void Heap::decrementDeferralDepthAndGCIfNeeded()
  {
      ASSERT(!Thread::mayBeGCThread() || m_worldIsStopped);
      m_deferralDepth--;
  
<span class="line-modified">!     if (UNLIKELY(m_didDeferGCWork) || Options::forceDidDeferGCWork()) {</span>
          decrementDeferralDepthAndGCIfNeededSlow();
  
          // Here are the possible relationships between m_deferralDepth and m_didDeferGCWork.
          // Note that prior to the call to decrementDeferralDepthAndGCIfNeededSlow,
          // m_didDeferGCWork had to have been true. Now it can be either false or true. There is
</pre>
<center><a href="HeapCellInlines.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="HeapSnapshot.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>