<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/bindings/js/WindowProxy.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="WindowProxy.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="WorkerScriptController.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/bindings/js/WindowProxy.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -18,23 +18,24 @@</span>
   *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
   */
  
  #pragma once
  
<span class="udiff-line-removed">- #include &quot;DOMWrapperWorld.h&quot;</span>
  #include &lt;JavaScriptCore/Strong.h&gt;
  #include &lt;wtf/HashMap.h&gt;
  #include &lt;wtf/RefCounted.h&gt;
<span class="udiff-line-added">+ #include &lt;wtf/UniqueRef.h&gt;</span>
  
  namespace JSC {
  class Debugger;
  }
  
  namespace WebCore {
  
  class AbstractDOMWindow;
  class AbstractFrame;
<span class="udiff-line-added">+ class DOMWrapperWorld;</span>
  class JSDOMGlobalObject;
  class JSWindowProxy;
  
  class WindowProxy : public RefCounted&lt;WindowProxy&gt; {
      WTF_MAKE_FAST_ALLOCATED;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -51,15 +52,15 @@</span>
      AbstractFrame* frame() const { return m_frame; }
      void detachFromFrame();
  
      void destroyJSWindowProxy(DOMWrapperWorld&amp;);
  
<span class="udiff-line-modified-removed">-     ProxyMap::ValuesConstIteratorRange jsWindowProxies() const { return m_jsWindowProxies.values(); }</span>
<span class="udiff-line-modified-added">+     ProxyMap::ValuesConstIteratorRange jsWindowProxies() const;</span>
      Vector&lt;JSC::Strong&lt;JSWindowProxy&gt;&gt; jsWindowProxiesAsVector() const;
  
<span class="udiff-line-modified-removed">-     ProxyMap releaseJSWindowProxies() { return std::exchange(m_jsWindowProxies, ProxyMap()); }</span>
<span class="udiff-line-modified-removed">-     void setJSWindowProxies(ProxyMap&amp;&amp; windowProxies) { m_jsWindowProxies = WTFMove(windowProxies); }</span>
<span class="udiff-line-modified-added">+     WEBCORE_EXPORT ProxyMap releaseJSWindowProxies();</span>
<span class="udiff-line-modified-added">+     WEBCORE_EXPORT void setJSWindowProxies(ProxyMap&amp;&amp;);</span>
  
      JSWindowProxy* jsWindowProxy(DOMWrapperWorld&amp; world)
      {
          if (!m_frame)
              return nullptr;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -70,17 +71,17 @@</span>
          return &amp;createJSWindowProxyWithInitializedScript(world);
      }
  
      JSWindowProxy* existingJSWindowProxy(DOMWrapperWorld&amp; world) const
      {
<span class="udiff-line-modified-removed">-         auto it = m_jsWindowProxies.find(&amp;world);</span>
<span class="udiff-line-modified-removed">-         return (it != m_jsWindowProxies.end()) ? it-&gt;value.get() : nullptr;</span>
<span class="udiff-line-modified-added">+         auto it = m_jsWindowProxies-&gt;find(&amp;world);</span>
<span class="udiff-line-modified-added">+         return (it != m_jsWindowProxies-&gt;end()) ? it-&gt;value.get() : nullptr;</span>
      }
  
      WEBCORE_EXPORT JSDOMGlobalObject* globalObject(DOMWrapperWorld&amp;);
  
<span class="udiff-line-modified-removed">-     void clearJSWindowProxiesNotMatchingDOMWindow(AbstractDOMWindow*, bool goingIntoPageCache);</span>
<span class="udiff-line-modified-added">+     void clearJSWindowProxiesNotMatchingDOMWindow(AbstractDOMWindow*, bool goingIntoBackForwardCache);</span>
  
      WEBCORE_EXPORT void setDOMWindow(AbstractDOMWindow*);
  
      // Debugger can be nullptr to detach any existing Debugger.
      void attachDebugger(JSC::Debugger*); // Attaches/detaches in all worlds/window proxies.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -92,9 +93,9 @@</span>
  
      JSWindowProxy&amp; createJSWindowProxy(DOMWrapperWorld&amp;);
      WEBCORE_EXPORT JSWindowProxy&amp; createJSWindowProxyWithInitializedScript(DOMWrapperWorld&amp;);
  
      AbstractFrame* m_frame;
<span class="udiff-line-modified-removed">-     ProxyMap m_jsWindowProxies;</span>
<span class="udiff-line-modified-added">+     UniqueRef&lt;ProxyMap&gt; m_jsWindowProxies;</span>
  };
  
  } // namespace WebCore
</pre>
<center><a href="WindowProxy.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="WorkerScriptController.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>