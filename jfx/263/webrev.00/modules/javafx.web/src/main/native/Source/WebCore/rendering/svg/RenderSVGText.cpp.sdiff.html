<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/rendering/svg/RenderSVGText.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="RenderSVGShape.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="RenderSVGTextPath.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/rendering/svg/RenderSVGText.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
355         collectLayoutAttributes(this, m_layoutAttributes);
356         updateFontInAllDescendants(this);
357         m_layoutAttributesBuilder.buildLayoutAttributesForForSubtree(*this);
358 
359         m_needsReordering = true;
360         m_needsTextMetricsUpdate = false;
361         m_needsPositioningValuesUpdate = false;
362         updateCachedBoundariesInParents = true;
363     } else if (m_needsPositioningValuesUpdate) {
364         // When the x/y/dx/dy/rotate lists change, recompute the layout attributes, and eventually
365         // update the on-screen font objects as well in all descendants.
366         if (m_needsTextMetricsUpdate) {
367             updateFontInAllDescendants(this);
368             m_needsTextMetricsUpdate = false;
369         }
370 
371         m_layoutAttributesBuilder.buildLayoutAttributesForForSubtree(*this);
372         m_needsReordering = true;
373         m_needsPositioningValuesUpdate = false;
374         updateCachedBoundariesInParents = true;
<span class="line-modified">375     } else if (m_needsTextMetricsUpdate || SVGRenderSupport::findTreeRootObject(*this)-&gt;isLayoutSizeChanged()) {</span>
<span class="line-modified">376         // If the root layout size changed (eg. window size changes) or the transform to the root</span>
<span class="line-modified">377         // context has changed then recompute the on-screen font size.</span>
<span class="line-modified">378         updateFontInAllDescendants(this, &amp;m_layoutAttributesBuilder);</span>
<span class="line-modified">379 </span>
<span class="line-modified">380         ASSERT(!m_needsReordering);</span>
<span class="line-modified">381         ASSERT(!m_needsPositioningValuesUpdate);</span>
<span class="line-modified">382         m_needsTextMetricsUpdate = false;</span>
<span class="line-modified">383         updateCachedBoundariesInParents = true;</span>



384     }
385 
386     checkLayoutAttributesConsistency(this, m_layoutAttributes);
387 
388     // Reduced version of RenderBlock::layoutBlock(), which only takes care of SVG text.
389     // All if branches that could cause early exit in RenderBlocks layoutBlock() method are turned into assertions.
390     ASSERT(!isInline());
391     ASSERT(!simplifiedLayout());
392     ASSERT(!scrollsOverflow());
393     ASSERT(!hasControlClip());
394     ASSERT(!multiColumnFlow());
395     ASSERT(!positionedObjects());
396     ASSERT(!m_overflow);
397     ASSERT(!isAnonymousBlock());
398 
399     if (!firstChild())
400         setChildrenInline(true);
401 
402     // FIXME: We need to find a way to only layout the child boxes, if needed.
403     FloatRect oldBoundaries = objectBoundingBox();
</pre>
</td>
<td>
<hr />
<pre>
355         collectLayoutAttributes(this, m_layoutAttributes);
356         updateFontInAllDescendants(this);
357         m_layoutAttributesBuilder.buildLayoutAttributesForForSubtree(*this);
358 
359         m_needsReordering = true;
360         m_needsTextMetricsUpdate = false;
361         m_needsPositioningValuesUpdate = false;
362         updateCachedBoundariesInParents = true;
363     } else if (m_needsPositioningValuesUpdate) {
364         // When the x/y/dx/dy/rotate lists change, recompute the layout attributes, and eventually
365         // update the on-screen font objects as well in all descendants.
366         if (m_needsTextMetricsUpdate) {
367             updateFontInAllDescendants(this);
368             m_needsTextMetricsUpdate = false;
369         }
370 
371         m_layoutAttributesBuilder.buildLayoutAttributesForForSubtree(*this);
372         m_needsReordering = true;
373         m_needsPositioningValuesUpdate = false;
374         updateCachedBoundariesInParents = true;
<span class="line-modified">375     } else {</span>
<span class="line-modified">376         RenderSVGRoot* rootObj = SVGRenderSupport::findTreeRootObject(*this);</span>
<span class="line-modified">377         if (m_needsTextMetricsUpdate || (rootObj &amp;&amp; rootObj-&gt;isLayoutSizeChanged())) {</span>
<span class="line-modified">378             // If the root layout size changed (eg. window size changes) or the transform to the root</span>
<span class="line-modified">379             // context has changed then recompute the on-screen font size.</span>
<span class="line-modified">380             updateFontInAllDescendants(this, &amp;m_layoutAttributesBuilder);</span>
<span class="line-modified">381 </span>
<span class="line-modified">382             ASSERT(!m_needsReordering);</span>
<span class="line-modified">383             ASSERT(!m_needsPositioningValuesUpdate);</span>
<span class="line-added">384             m_needsTextMetricsUpdate = false;</span>
<span class="line-added">385             updateCachedBoundariesInParents = true;</span>
<span class="line-added">386         }</span>
387     }
388 
389     checkLayoutAttributesConsistency(this, m_layoutAttributes);
390 
391     // Reduced version of RenderBlock::layoutBlock(), which only takes care of SVG text.
392     // All if branches that could cause early exit in RenderBlocks layoutBlock() method are turned into assertions.
393     ASSERT(!isInline());
394     ASSERT(!simplifiedLayout());
395     ASSERT(!scrollsOverflow());
396     ASSERT(!hasControlClip());
397     ASSERT(!multiColumnFlow());
398     ASSERT(!positionedObjects());
399     ASSERT(!m_overflow);
400     ASSERT(!isAnonymousBlock());
401 
402     if (!firstChild())
403         setChildrenInline(true);
404 
405     // FIXME: We need to find a way to only layout the child boxes, if needed.
406     FloatRect oldBoundaries = objectBoundingBox();
</pre>
</td>
</tr>
</table>
<center><a href="RenderSVGShape.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="RenderSVGTextPath.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>