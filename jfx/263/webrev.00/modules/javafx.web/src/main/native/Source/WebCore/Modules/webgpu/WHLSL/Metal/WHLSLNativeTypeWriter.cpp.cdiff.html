<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/webgpu/WHLSL/Metal/WHLSLNativeTypeWriter.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="WHLSLNativeFunctionWriter.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../WHLSLASTDumper.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/webgpu/WHLSL/Metal/WHLSLNativeTypeWriter.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 94,29 ***</span>
          ASSERT(WTF::holds_alternative&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]));
          auto&amp; typeReference = WTF::get&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]);
          auto&amp; unifyNode = typeReference-&gt;unifyNode();
          auto&amp; namedType = downcast&lt;AST::NamedType&gt;(unifyNode);
          auto&amp; parameterType = downcast&lt;AST::NativeTypeDeclaration&gt;(namedType);
<span class="line-modified">!         auto prefix = ([&amp;]() -&gt; String {</span>
              if (parameterType.name() == &quot;bool&quot;)
                  return &quot;bool&quot;;
              ASSERT(parameterType.name() == &quot;float&quot;);
              return &quot;float&quot;;
          })();
  
<span class="line-modified">!         ASSERT(WTF::holds_alternative&lt;AST::ConstantExpression&gt;(nativeTypeDeclaration.typeArguments()[1]));</span>
<span class="line-removed">-         auto&amp; constantExpression1 = WTF::get&lt;AST::ConstantExpression&gt;(nativeTypeDeclaration.typeArguments()[1]);</span>
<span class="line-removed">-         auto&amp; integerLiteral1 = constantExpression1.integerLiteral();</span>
<span class="line-removed">-         unsigned rows = integerLiteral1.value();</span>
<span class="line-removed">-         ASSERT(rows == 2 || rows == 3 || rows == 4);</span>
<span class="line-removed">- </span>
<span class="line-removed">-         ASSERT(WTF::holds_alternative&lt;AST::ConstantExpression&gt;(nativeTypeDeclaration.typeArguments()[2]));</span>
<span class="line-removed">-         auto&amp; constantExpression2 = WTF::get&lt;AST::ConstantExpression&gt;(nativeTypeDeclaration.typeArguments()[2]);</span>
<span class="line-removed">-         auto&amp; integerLiteral2 = constantExpression2.integerLiteral();</span>
<span class="line-removed">-         unsigned columns = integerLiteral2.value();</span>
<span class="line-removed">-         ASSERT(columns == 2 || columns == 3 || columns == 4);</span>
<span class="line-removed">-         return makeString(&quot;array&lt;&quot;, prefix, &quot;, &quot;, columns * rows, &quot;&gt;&quot;);</span>
      }
      ASSERT(nativeTypeDeclaration.typeArguments().size() == 1);
      ASSERT(WTF::holds_alternative&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]));
      auto&amp; typeReference = WTF::get&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]);
      auto prefix = ([&amp;]() -&gt; String {
<span class="line-new-header">--- 94,18 ---</span>
          ASSERT(WTF::holds_alternative&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]));
          auto&amp; typeReference = WTF::get&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]);
          auto&amp; unifyNode = typeReference-&gt;unifyNode();
          auto&amp; namedType = downcast&lt;AST::NamedType&gt;(unifyNode);
          auto&amp; parameterType = downcast&lt;AST::NativeTypeDeclaration&gt;(namedType);
<span class="line-modified">!         auto prefix = ([&amp;] {</span>
              if (parameterType.name() == &quot;bool&quot;)
                  return &quot;bool&quot;;
              ASSERT(parameterType.name() == &quot;float&quot;);
              return &quot;float&quot;;
          })();
  
<span class="line-modified">!         return makeString(&quot;WSLMatrix&lt;&quot;, prefix, &quot;, &quot;, nativeTypeDeclaration.numberOfMatrixColumns(), &quot;, &quot;, nativeTypeDeclaration.numberOfMatrixRows(), &quot;&gt;&quot;);</span>
      }
      ASSERT(nativeTypeDeclaration.typeArguments().size() == 1);
      ASSERT(WTF::holds_alternative&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]));
      auto&amp; typeReference = WTF::get&lt;Ref&lt;AST::TypeReference&gt;&gt;(nativeTypeDeclaration.typeArguments()[0]);
      auto prefix = ([&amp;]() -&gt; String {
</pre>
<center><a href="WHLSLNativeFunctionWriter.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../WHLSLASTDumper.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>