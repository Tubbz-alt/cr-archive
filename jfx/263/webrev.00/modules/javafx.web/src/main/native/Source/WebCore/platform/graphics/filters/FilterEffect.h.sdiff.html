<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/filters/FilterEffect.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Filter.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="FilterOperations.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/filters/FilterEffect.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  7  * modify it under the terms of the GNU Library General Public
  8  * License as published by the Free Software Foundation; either
  9  * version 2 of the License, or (at your option) any later version.
 10  *
 11  * This library is distributed in the hope that it will be useful,
 12  * but WITHOUT ANY WARRANTY; without even the implied warranty of
 13  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 14  * Library General Public License for more details.
 15  *
 16  * You should have received a copy of the GNU Library General Public License
 17  * along with this library; see the file COPYING.LIB.  If not, write to
 18  * the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 19  * Boston, MA 02110-1301, USA.
 20  */
 21 
 22 #pragma once
 23 
 24 #include &quot;ColorSpace.h&quot;
 25 #include &quot;FloatRect.h&quot;
 26 #include &quot;IntRect.h&quot;

 27 #include &lt;JavaScriptCore/Uint8ClampedArray.h&gt;
 28 #include &lt;wtf/MathExtras.h&gt;
 29 #include &lt;wtf/RefCounted.h&gt;
 30 #include &lt;wtf/RefPtr.h&gt;
 31 #include &lt;wtf/Vector.h&gt;
 32 
 33 namespace WTF {
 34 class TextStream;
 35 }
 36 
 37 namespace WebCore {
 38 
 39 class Filter;
 40 class FilterEffect;
 41 class ImageBuffer;
 42 
 43 typedef Vector&lt;RefPtr&lt;FilterEffect&gt;&gt; FilterEffectVector;
 44 
 45 enum FilterEffectType {
 46     FilterEffectTypeUnknown,
</pre>
<hr />
<pre>
 86     bool isAlphaImage() const { return m_alphaImage; }
 87     void setIsAlphaImage(bool alphaImage) { m_alphaImage = alphaImage; }
 88 
 89     IntRect absolutePaintRect() const { return m_absolutePaintRect; }
 90     void setAbsolutePaintRect(const IntRect&amp; absolutePaintRect) { m_absolutePaintRect = absolutePaintRect; }
 91 
 92     FloatRect maxEffectRect() const { return m_maxEffectRect; }
 93     void setMaxEffectRect(const FloatRect&amp; maxEffectRect) { m_maxEffectRect = maxEffectRect; }
 94 
 95     void apply();
 96 
 97     // Correct any invalid pixels, if necessary, in the result of a filter operation.
 98     // This method is used to ensure valid pixel values on filter inputs and the final result.
 99     // Only the arithmetic composite filter ever needs to perform correction.
100     virtual void correctFilterResultIfNeeded() { }
101 
102     virtual void determineAbsolutePaintRect();
103 
104     virtual FilterEffectType filterEffectType() const { return FilterEffectTypeUnknown; }
105 


106     enum class RepresentationType { TestOutput, Debugging };
107     virtual WTF::TextStream&amp; externalRepresentation(WTF::TextStream&amp;, RepresentationType = RepresentationType::TestOutput) const;
108 
109     // The following functions are SVG specific and will move to RenderSVGResourceFilterPrimitive.
110     // See bug https://bugs.webkit.org/show_bug.cgi?id=45614.
111     bool hasX() const { return m_hasX; }
112     void setHasX(bool value) { m_hasX = value; }
113 
114     bool hasY() const { return m_hasY; }
115     void setHasY(bool value) { m_hasY = value; }
116 
117     bool hasWidth() const { return m_hasWidth; }
118     void setHasWidth(bool value) { m_hasWidth = value; }
119 
120     bool hasHeight() const { return m_hasHeight; }
121     void setHasHeight(bool value) { m_hasHeight = value; }
122 
123     FloatRect filterPrimitiveSubregion() const { return m_filterPrimitiveSubregion; }
124     void setFilterPrimitiveSubregion(const FloatRect&amp; filterPrimitiveSubregion) { m_filterPrimitiveSubregion = filterPrimitiveSubregion; }
125 
</pre>
<hr />
<pre>
191     // The subregion of a filter primitive according to the SVG Filter specification in local coordinates.
192     // This is SVG specific and needs to move to RenderSVGResourceFilterPrimitive.
193     FloatRect m_filterPrimitiveSubregion;
194 
195     // x, y, width and height of the actual SVGFE*Element. Is needed to determine the subregion of the
196     // filter primitive on a later step.
197     FloatRect m_effectBoundaries;
198 
199     // filterPrimitiveSubregion mapped to absolute coordinates before clipping.
200     FloatRect m_absoluteUnclippedSubregion;
201 
202     bool m_alphaImage { false };
203     bool m_hasX { false };
204     bool m_hasY { false };
205     bool m_hasWidth { false };
206     bool m_hasHeight { false };
207 
208     // Should the effect clip to its primitive region, or expand to use the combined region of its inputs.
209     bool m_clipsToBounds { true };
210 
<span class="line-modified">211     ColorSpace m_operatingColorSpace { ColorSpaceLinearRGB };</span>
<span class="line-modified">212     ColorSpace m_resultColorSpace { ColorSpaceSRGB };</span>
213 };
214 
215 WEBCORE_EXPORT WTF::TextStream&amp; operator&lt;&lt;(WTF::TextStream&amp;, const FilterEffect&amp;);
216 
217 } // namespace WebCore
218 
</pre>
</td>
<td>
<hr />
<pre>
  7  * modify it under the terms of the GNU Library General Public
  8  * License as published by the Free Software Foundation; either
  9  * version 2 of the License, or (at your option) any later version.
 10  *
 11  * This library is distributed in the hope that it will be useful,
 12  * but WITHOUT ANY WARRANTY; without even the implied warranty of
 13  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 14  * Library General Public License for more details.
 15  *
 16  * You should have received a copy of the GNU Library General Public License
 17  * along with this library; see the file COPYING.LIB.  If not, write to
 18  * the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 19  * Boston, MA 02110-1301, USA.
 20  */
 21 
 22 #pragma once
 23 
 24 #include &quot;ColorSpace.h&quot;
 25 #include &quot;FloatRect.h&quot;
 26 #include &quot;IntRect.h&quot;
<span class="line-added"> 27 #include &quot;IntRectExtent.h&quot;</span>
 28 #include &lt;JavaScriptCore/Uint8ClampedArray.h&gt;
 29 #include &lt;wtf/MathExtras.h&gt;
 30 #include &lt;wtf/RefCounted.h&gt;
 31 #include &lt;wtf/RefPtr.h&gt;
 32 #include &lt;wtf/Vector.h&gt;
 33 
 34 namespace WTF {
 35 class TextStream;
 36 }
 37 
 38 namespace WebCore {
 39 
 40 class Filter;
 41 class FilterEffect;
 42 class ImageBuffer;
 43 
 44 typedef Vector&lt;RefPtr&lt;FilterEffect&gt;&gt; FilterEffectVector;
 45 
 46 enum FilterEffectType {
 47     FilterEffectTypeUnknown,
</pre>
<hr />
<pre>
 87     bool isAlphaImage() const { return m_alphaImage; }
 88     void setIsAlphaImage(bool alphaImage) { m_alphaImage = alphaImage; }
 89 
 90     IntRect absolutePaintRect() const { return m_absolutePaintRect; }
 91     void setAbsolutePaintRect(const IntRect&amp; absolutePaintRect) { m_absolutePaintRect = absolutePaintRect; }
 92 
 93     FloatRect maxEffectRect() const { return m_maxEffectRect; }
 94     void setMaxEffectRect(const FloatRect&amp; maxEffectRect) { m_maxEffectRect = maxEffectRect; }
 95 
 96     void apply();
 97 
 98     // Correct any invalid pixels, if necessary, in the result of a filter operation.
 99     // This method is used to ensure valid pixel values on filter inputs and the final result.
100     // Only the arithmetic composite filter ever needs to perform correction.
101     virtual void correctFilterResultIfNeeded() { }
102 
103     virtual void determineAbsolutePaintRect();
104 
105     virtual FilterEffectType filterEffectType() const { return FilterEffectTypeUnknown; }
106 
<span class="line-added">107     virtual IntOutsets outsets() const { return IntOutsets(); }</span>
<span class="line-added">108 </span>
109     enum class RepresentationType { TestOutput, Debugging };
110     virtual WTF::TextStream&amp; externalRepresentation(WTF::TextStream&amp;, RepresentationType = RepresentationType::TestOutput) const;
111 
112     // The following functions are SVG specific and will move to RenderSVGResourceFilterPrimitive.
113     // See bug https://bugs.webkit.org/show_bug.cgi?id=45614.
114     bool hasX() const { return m_hasX; }
115     void setHasX(bool value) { m_hasX = value; }
116 
117     bool hasY() const { return m_hasY; }
118     void setHasY(bool value) { m_hasY = value; }
119 
120     bool hasWidth() const { return m_hasWidth; }
121     void setHasWidth(bool value) { m_hasWidth = value; }
122 
123     bool hasHeight() const { return m_hasHeight; }
124     void setHasHeight(bool value) { m_hasHeight = value; }
125 
126     FloatRect filterPrimitiveSubregion() const { return m_filterPrimitiveSubregion; }
127     void setFilterPrimitiveSubregion(const FloatRect&amp; filterPrimitiveSubregion) { m_filterPrimitiveSubregion = filterPrimitiveSubregion; }
128 
</pre>
<hr />
<pre>
194     // The subregion of a filter primitive according to the SVG Filter specification in local coordinates.
195     // This is SVG specific and needs to move to RenderSVGResourceFilterPrimitive.
196     FloatRect m_filterPrimitiveSubregion;
197 
198     // x, y, width and height of the actual SVGFE*Element. Is needed to determine the subregion of the
199     // filter primitive on a later step.
200     FloatRect m_effectBoundaries;
201 
202     // filterPrimitiveSubregion mapped to absolute coordinates before clipping.
203     FloatRect m_absoluteUnclippedSubregion;
204 
205     bool m_alphaImage { false };
206     bool m_hasX { false };
207     bool m_hasY { false };
208     bool m_hasWidth { false };
209     bool m_hasHeight { false };
210 
211     // Should the effect clip to its primitive region, or expand to use the combined region of its inputs.
212     bool m_clipsToBounds { true };
213 
<span class="line-modified">214     ColorSpace m_operatingColorSpace { ColorSpace::LinearRGB };</span>
<span class="line-modified">215     ColorSpace m_resultColorSpace { ColorSpace::SRGB };</span>
216 };
217 
218 WEBCORE_EXPORT WTF::TextStream&amp; operator&lt;&lt;(WTF::TextStream&amp;, const FilterEffect&amp;);
219 
220 } // namespace WebCore
221 
</pre>
</td>
</tr>
</table>
<center><a href="Filter.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="FilterOperations.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>