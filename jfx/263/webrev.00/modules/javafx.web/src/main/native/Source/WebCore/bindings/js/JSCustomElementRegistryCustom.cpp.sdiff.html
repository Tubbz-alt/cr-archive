<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/bindings/js/JSCustomElementRegistryCustom.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="JSCustomElementInterface.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="JSCustomEventCustom.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/bindings/js/JSCustomElementRegistryCustom.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #include &quot;config.h&quot;
 27 #include &quot;JSCustomElementRegistry.h&quot;
 28 
 29 #include &quot;CustomElementRegistry.h&quot;
 30 #include &quot;Document.h&quot;
 31 #include &quot;HTMLNames.h&quot;
 32 #include &quot;JSCustomElementInterface.h&quot;
 33 #include &quot;JSDOMBinding.h&quot;
 34 #include &quot;JSDOMConvertSequences.h&quot;
 35 #include &quot;JSDOMConvertStrings.h&quot;
 36 #include &quot;JSDOMPromiseDeferred.h&quot;
 37 #include &lt;wtf/SetForScope.h&gt;
 38 
 39 
 40 namespace WebCore {
 41 using namespace JSC;
 42 
<span class="line-modified"> 43 static JSObject* getCustomElementCallback(ExecState&amp; state, JSObject&amp; prototype, const Identifier&amp; id)</span>
 44 {
<span class="line-modified"> 45     VM&amp; vm = state.vm();</span>
 46     auto scope = DECLARE_THROW_SCOPE(vm);
 47 
<span class="line-modified"> 48     JSValue callback = prototype.get(&amp;state, id);</span>
 49     RETURN_IF_EXCEPTION(scope, nullptr);
 50     if (callback.isUndefined())
 51         return nullptr;
 52     if (!callback.isFunction(vm)) {
<span class="line-modified"> 53         throwTypeError(&amp;state, scope, &quot;A custom element callback must be a function&quot;_s);</span>
 54         return nullptr;
 55     }
 56     return callback.getObject();
 57 }
 58 
<span class="line-modified"> 59 static bool validateCustomElementNameAndThrowIfNeeded(ExecState&amp; state, const AtomString&amp; name)</span>
 60 {
<span class="line-modified"> 61     auto scope = DECLARE_THROW_SCOPE(state.vm());</span>
 62     switch (Document::validateCustomElementName(name)) {
 63     case CustomElementNameValidationStatus::Valid:
 64         return true;
 65     case CustomElementNameValidationStatus::FirstCharacterIsNotLowercaseASCIILetter:
<span class="line-modified"> 66         throwDOMSyntaxError(state, scope, &quot;Custom element name must have a lowercase ASCII letter as its first character&quot;_s);</span>
 67         return false;
 68     case CustomElementNameValidationStatus::ContainsUppercaseASCIILetter:
<span class="line-modified"> 69         throwDOMSyntaxError(state, scope, &quot;Custom element name cannot contain an uppercase ASCII letter&quot;_s);</span>
 70         return false;
 71     case CustomElementNameValidationStatus::ContainsNoHyphen:
<span class="line-modified"> 72         throwDOMSyntaxError(state, scope, &quot;Custom element name must contain a hyphen&quot;_s);</span>
 73         return false;
 74     case CustomElementNameValidationStatus::ContainsDisallowedCharacter:
<span class="line-modified"> 75         throwDOMSyntaxError(state, scope, &quot;Custom element name contains a character that is not allowed&quot;_s);</span>
 76         return false;
 77     case CustomElementNameValidationStatus::ConflictsWithStandardElementName:
<span class="line-modified"> 78         throwDOMSyntaxError(state, scope, &quot;Custom element name cannot be same as one of the standard elements&quot;_s);</span>
 79         return false;
 80     }
 81     ASSERT_NOT_REACHED();
 82     return false;
 83 }
 84 
 85 // https://html.spec.whatwg.org/#dom-customelementregistry-define
<span class="line-modified"> 86 JSValue JSCustomElementRegistry::define(ExecState&amp; state)</span>
 87 {
<span class="line-modified"> 88     VM&amp; vm = state.vm();</span>
 89     auto scope = DECLARE_THROW_SCOPE(vm);
 90 
<span class="line-modified"> 91     if (UNLIKELY(state.argumentCount() &lt; 2))</span>
<span class="line-modified"> 92         return throwException(&amp;state, scope, createNotEnoughArgumentsError(&amp;state));</span>
 93 
<span class="line-modified"> 94     AtomString localName(state.uncheckedArgument(0).toString(&amp;state)-&gt;toAtomString(&amp;state));</span>
 95     RETURN_IF_EXCEPTION(scope, JSValue());
 96 
<span class="line-modified"> 97     JSValue constructorValue = state.uncheckedArgument(1);</span>
 98     if (!constructorValue.isConstructor(vm))
<span class="line-modified"> 99         return throwTypeError(&amp;state, scope, &quot;The second argument must be a constructor&quot;_s);</span>
100     JSObject* constructor = constructorValue.getObject();
101 
<span class="line-modified">102     if (!validateCustomElementNameAndThrowIfNeeded(state, localName))</span>
103         return jsUndefined();
104 
105     CustomElementRegistry&amp; registry = wrapped();
106 
107     if (registry.elementDefinitionIsRunning()) {
<span class="line-modified">108         throwNotSupportedError(state, scope, &quot;Cannot define a custom element while defining another custom element&quot;_s);</span>
109         return jsUndefined();
110     }
111     SetForScope&lt;bool&gt; change(registry.elementDefinitionIsRunning(), true);
112 
113     if (registry.findInterface(localName)) {
<span class="line-modified">114         throwNotSupportedError(state, scope, &quot;Cannot define multiple custom elements with the same tag name&quot;_s);</span>
115         return jsUndefined();
116     }
117 
118     if (registry.containsConstructor(constructor)) {
<span class="line-modified">119         throwNotSupportedError(state, scope, &quot;Cannot define multiple custom elements with the same class&quot;_s);</span>
120         return jsUndefined();
121     }
122 
<span class="line-modified">123     JSValue prototypeValue = constructor-&gt;get(&amp;state, vm.propertyNames-&gt;prototype);</span>
124     RETURN_IF_EXCEPTION(scope, JSValue());
125     if (!prototypeValue.isObject())
<span class="line-modified">126         return throwTypeError(&amp;state, scope, &quot;Custom element constructor&#39;s prototype must be an object&quot;_s);</span>
127     JSObject&amp; prototypeObject = *asObject(prototypeValue);
128 
129     QualifiedName name(nullAtom(), localName, HTMLNames::xhtmlNamespaceURI);
130     auto elementInterface = JSCustomElementInterface::create(name, constructor, globalObject());
131 
<span class="line-modified">132     auto* connectedCallback = getCustomElementCallback(state, prototypeObject, Identifier::fromString(vm, &quot;connectedCallback&quot;));</span>
133     if (connectedCallback)
134         elementInterface-&gt;setConnectedCallback(connectedCallback);
135     RETURN_IF_EXCEPTION(scope, JSValue());
136 
<span class="line-modified">137     auto* disconnectedCallback = getCustomElementCallback(state, prototypeObject, Identifier::fromString(vm, &quot;disconnectedCallback&quot;));</span>
138     if (disconnectedCallback)
139         elementInterface-&gt;setDisconnectedCallback(disconnectedCallback);
140     RETURN_IF_EXCEPTION(scope, JSValue());
141 
<span class="line-modified">142     auto* adoptedCallback = getCustomElementCallback(state, prototypeObject, Identifier::fromString(vm, &quot;adoptedCallback&quot;));</span>
143     if (adoptedCallback)
144         elementInterface-&gt;setAdoptedCallback(adoptedCallback);
145     RETURN_IF_EXCEPTION(scope, JSValue());
146 
<span class="line-modified">147     auto* attributeChangedCallback = getCustomElementCallback(state, prototypeObject, Identifier::fromString(vm, &quot;attributeChangedCallback&quot;));</span>
148     RETURN_IF_EXCEPTION(scope, JSValue());
149     if (attributeChangedCallback) {
<span class="line-modified">150         auto observedAttributesValue = constructor-&gt;get(&amp;state, Identifier::fromString(vm, &quot;observedAttributes&quot;));</span>
151         RETURN_IF_EXCEPTION(scope, JSValue());
152         if (!observedAttributesValue.isUndefined()) {
<span class="line-modified">153             auto observedAttributes = convert&lt;IDLSequence&lt;IDLDOMString&gt;&gt;(state, observedAttributesValue);</span>
154             RETURN_IF_EXCEPTION(scope, JSValue());
155             elementInterface-&gt;setAttributeChangedCallback(attributeChangedCallback, observedAttributes);
156         }
157     }
158 
159     auto addToGlobalObjectWithPrivateName = [&amp;] (JSObject* objectToAdd) {
160         if (objectToAdd) {
161             PrivateName uniquePrivateName;
162             globalObject()-&gt;putDirect(vm, uniquePrivateName, objectToAdd);
163         }
164     };
165 
166     addToGlobalObjectWithPrivateName(constructor);
167     addToGlobalObjectWithPrivateName(connectedCallback);
168     addToGlobalObjectWithPrivateName(disconnectedCallback);
169     addToGlobalObjectWithPrivateName(adoptedCallback);
170     addToGlobalObjectWithPrivateName(attributeChangedCallback);
171 
172     registry.addElementDefinition(WTFMove(elementInterface));
173 
174     return jsUndefined();
175 }
176 
177 // https://html.spec.whatwg.org/#dom-customelementregistry-whendefined
<span class="line-modified">178 static JSValue whenDefinedPromise(ExecState&amp; state, JSDOMGlobalObject&amp; globalObject, CustomElementRegistry&amp; registry, JSPromiseDeferred&amp; promiseDeferred)</span>
179 {
<span class="line-modified">180     auto scope = DECLARE_THROW_SCOPE(state.vm());</span>
181 
<span class="line-modified">182     if (UNLIKELY(state.argumentCount() &lt; 1))</span>
<span class="line-modified">183         return throwException(&amp;state, scope, createNotEnoughArgumentsError(&amp;state));</span>
184 
<span class="line-modified">185     AtomString localName(state.uncheckedArgument(0).toString(&amp;state)-&gt;toAtomString(&amp;state));</span>
186     RETURN_IF_EXCEPTION(scope, JSValue());
187 
<span class="line-modified">188     if (!validateCustomElementNameAndThrowIfNeeded(state, localName)) {</span>
189         EXCEPTION_ASSERT(scope.exception());
190         return jsUndefined();
191     }
192 
193     if (registry.findInterface(localName)) {
<span class="line-modified">194         DeferredPromise::create(globalObject, promiseDeferred)-&gt;resolve();</span>
<span class="line-modified">195         return promiseDeferred.promise();</span>
196     }
197 
198     auto result = registry.promiseMap().ensure(localName, [&amp;] {
<span class="line-modified">199         return DeferredPromise::create(globalObject, promiseDeferred);</span>
200     });
201 
202     return result.iterator-&gt;value-&gt;promise();
203 }
204 
<span class="line-modified">205 JSValue JSCustomElementRegistry::whenDefined(ExecState&amp; state)</span>
206 {
<span class="line-modified">207     auto scope = DECLARE_CATCH_SCOPE(state.vm());</span>
208 
209     ASSERT(globalObject());
<span class="line-modified">210     auto promiseDeferred = JSPromiseDeferred::tryCreate(&amp;state, globalObject());</span>
<span class="line-modified">211     RELEASE_ASSERT(promiseDeferred);</span>
<span class="line-removed">212     JSValue promise = whenDefinedPromise(state, *globalObject(), wrapped(), *promiseDeferred);</span>
213 
214     if (UNLIKELY(scope.exception())) {
<span class="line-modified">215         rejectPromiseWithExceptionIfAny(state, *globalObject(), *promiseDeferred);</span>
216         scope.assertNoException();
<span class="line-modified">217         return promiseDeferred-&gt;promise();</span>
218     }
219 
220     return promise;
221 }
222 
223 }
</pre>
</td>
<td>
<hr />
<pre>
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #include &quot;config.h&quot;
 27 #include &quot;JSCustomElementRegistry.h&quot;
 28 
 29 #include &quot;CustomElementRegistry.h&quot;
 30 #include &quot;Document.h&quot;
 31 #include &quot;HTMLNames.h&quot;
 32 #include &quot;JSCustomElementInterface.h&quot;
 33 #include &quot;JSDOMBinding.h&quot;
 34 #include &quot;JSDOMConvertSequences.h&quot;
 35 #include &quot;JSDOMConvertStrings.h&quot;
 36 #include &quot;JSDOMPromiseDeferred.h&quot;
 37 #include &lt;wtf/SetForScope.h&gt;
 38 
 39 
 40 namespace WebCore {
 41 using namespace JSC;
 42 
<span class="line-modified"> 43 static JSObject* getCustomElementCallback(JSGlobalObject&amp; lexicalGlobalObject, JSObject&amp; prototype, const Identifier&amp; id)</span>
 44 {
<span class="line-modified"> 45     VM&amp; vm = lexicalGlobalObject.vm();</span>
 46     auto scope = DECLARE_THROW_SCOPE(vm);
 47 
<span class="line-modified"> 48     JSValue callback = prototype.get(&amp;lexicalGlobalObject, id);</span>
 49     RETURN_IF_EXCEPTION(scope, nullptr);
 50     if (callback.isUndefined())
 51         return nullptr;
 52     if (!callback.isFunction(vm)) {
<span class="line-modified"> 53         throwTypeError(&amp;lexicalGlobalObject, scope, &quot;A custom element callback must be a function&quot;_s);</span>
 54         return nullptr;
 55     }
 56     return callback.getObject();
 57 }
 58 
<span class="line-modified"> 59 static bool validateCustomElementNameAndThrowIfNeeded(JSGlobalObject&amp; lexicalGlobalObject, const AtomString&amp; name)</span>
 60 {
<span class="line-modified"> 61     auto scope = DECLARE_THROW_SCOPE(lexicalGlobalObject.vm());</span>
 62     switch (Document::validateCustomElementName(name)) {
 63     case CustomElementNameValidationStatus::Valid:
 64         return true;
 65     case CustomElementNameValidationStatus::FirstCharacterIsNotLowercaseASCIILetter:
<span class="line-modified"> 66         throwDOMSyntaxError(lexicalGlobalObject, scope, &quot;Custom element name must have a lowercase ASCII letter as its first character&quot;_s);</span>
 67         return false;
 68     case CustomElementNameValidationStatus::ContainsUppercaseASCIILetter:
<span class="line-modified"> 69         throwDOMSyntaxError(lexicalGlobalObject, scope, &quot;Custom element name cannot contain an uppercase ASCII letter&quot;_s);</span>
 70         return false;
 71     case CustomElementNameValidationStatus::ContainsNoHyphen:
<span class="line-modified"> 72         throwDOMSyntaxError(lexicalGlobalObject, scope, &quot;Custom element name must contain a hyphen&quot;_s);</span>
 73         return false;
 74     case CustomElementNameValidationStatus::ContainsDisallowedCharacter:
<span class="line-modified"> 75         throwDOMSyntaxError(lexicalGlobalObject, scope, &quot;Custom element name contains a character that is not allowed&quot;_s);</span>
 76         return false;
 77     case CustomElementNameValidationStatus::ConflictsWithStandardElementName:
<span class="line-modified"> 78         throwDOMSyntaxError(lexicalGlobalObject, scope, &quot;Custom element name cannot be same as one of the standard elements&quot;_s);</span>
 79         return false;
 80     }
 81     ASSERT_NOT_REACHED();
 82     return false;
 83 }
 84 
 85 // https://html.spec.whatwg.org/#dom-customelementregistry-define
<span class="line-modified"> 86 JSValue JSCustomElementRegistry::define(JSGlobalObject&amp; lexicalGlobalObject, CallFrame&amp; callFrame)</span>
 87 {
<span class="line-modified"> 88     VM&amp; vm = lexicalGlobalObject.vm();</span>
 89     auto scope = DECLARE_THROW_SCOPE(vm);
 90 
<span class="line-modified"> 91     if (UNLIKELY(callFrame.argumentCount() &lt; 2))</span>
<span class="line-modified"> 92         return throwException(&amp;lexicalGlobalObject, scope, createNotEnoughArgumentsError(&amp;lexicalGlobalObject));</span>
 93 
<span class="line-modified"> 94     AtomString localName(callFrame.uncheckedArgument(0).toString(&amp;lexicalGlobalObject)-&gt;toAtomString(&amp;lexicalGlobalObject));</span>
 95     RETURN_IF_EXCEPTION(scope, JSValue());
 96 
<span class="line-modified"> 97     JSValue constructorValue = callFrame.uncheckedArgument(1);</span>
 98     if (!constructorValue.isConstructor(vm))
<span class="line-modified"> 99         return throwTypeError(&amp;lexicalGlobalObject, scope, &quot;The second argument must be a constructor&quot;_s);</span>
100     JSObject* constructor = constructorValue.getObject();
101 
<span class="line-modified">102     if (!validateCustomElementNameAndThrowIfNeeded(lexicalGlobalObject, localName))</span>
103         return jsUndefined();
104 
105     CustomElementRegistry&amp; registry = wrapped();
106 
107     if (registry.elementDefinitionIsRunning()) {
<span class="line-modified">108         throwNotSupportedError(lexicalGlobalObject, scope, &quot;Cannot define a custom element while defining another custom element&quot;_s);</span>
109         return jsUndefined();
110     }
111     SetForScope&lt;bool&gt; change(registry.elementDefinitionIsRunning(), true);
112 
113     if (registry.findInterface(localName)) {
<span class="line-modified">114         throwNotSupportedError(lexicalGlobalObject, scope, &quot;Cannot define multiple custom elements with the same tag name&quot;_s);</span>
115         return jsUndefined();
116     }
117 
118     if (registry.containsConstructor(constructor)) {
<span class="line-modified">119         throwNotSupportedError(lexicalGlobalObject, scope, &quot;Cannot define multiple custom elements with the same class&quot;_s);</span>
120         return jsUndefined();
121     }
122 
<span class="line-modified">123     JSValue prototypeValue = constructor-&gt;get(&amp;lexicalGlobalObject, vm.propertyNames-&gt;prototype);</span>
124     RETURN_IF_EXCEPTION(scope, JSValue());
125     if (!prototypeValue.isObject())
<span class="line-modified">126         return throwTypeError(&amp;lexicalGlobalObject, scope, &quot;Custom element constructor&#39;s prototype must be an object&quot;_s);</span>
127     JSObject&amp; prototypeObject = *asObject(prototypeValue);
128 
129     QualifiedName name(nullAtom(), localName, HTMLNames::xhtmlNamespaceURI);
130     auto elementInterface = JSCustomElementInterface::create(name, constructor, globalObject());
131 
<span class="line-modified">132     auto* connectedCallback = getCustomElementCallback(lexicalGlobalObject, prototypeObject, Identifier::fromString(vm, &quot;connectedCallback&quot;));</span>
133     if (connectedCallback)
134         elementInterface-&gt;setConnectedCallback(connectedCallback);
135     RETURN_IF_EXCEPTION(scope, JSValue());
136 
<span class="line-modified">137     auto* disconnectedCallback = getCustomElementCallback(lexicalGlobalObject, prototypeObject, Identifier::fromString(vm, &quot;disconnectedCallback&quot;));</span>
138     if (disconnectedCallback)
139         elementInterface-&gt;setDisconnectedCallback(disconnectedCallback);
140     RETURN_IF_EXCEPTION(scope, JSValue());
141 
<span class="line-modified">142     auto* adoptedCallback = getCustomElementCallback(lexicalGlobalObject, prototypeObject, Identifier::fromString(vm, &quot;adoptedCallback&quot;));</span>
143     if (adoptedCallback)
144         elementInterface-&gt;setAdoptedCallback(adoptedCallback);
145     RETURN_IF_EXCEPTION(scope, JSValue());
146 
<span class="line-modified">147     auto* attributeChangedCallback = getCustomElementCallback(lexicalGlobalObject, prototypeObject, Identifier::fromString(vm, &quot;attributeChangedCallback&quot;));</span>
148     RETURN_IF_EXCEPTION(scope, JSValue());
149     if (attributeChangedCallback) {
<span class="line-modified">150         auto observedAttributesValue = constructor-&gt;get(&amp;lexicalGlobalObject, Identifier::fromString(vm, &quot;observedAttributes&quot;));</span>
151         RETURN_IF_EXCEPTION(scope, JSValue());
152         if (!observedAttributesValue.isUndefined()) {
<span class="line-modified">153             auto observedAttributes = convert&lt;IDLSequence&lt;IDLDOMString&gt;&gt;(lexicalGlobalObject, observedAttributesValue);</span>
154             RETURN_IF_EXCEPTION(scope, JSValue());
155             elementInterface-&gt;setAttributeChangedCallback(attributeChangedCallback, observedAttributes);
156         }
157     }
158 
159     auto addToGlobalObjectWithPrivateName = [&amp;] (JSObject* objectToAdd) {
160         if (objectToAdd) {
161             PrivateName uniquePrivateName;
162             globalObject()-&gt;putDirect(vm, uniquePrivateName, objectToAdd);
163         }
164     };
165 
166     addToGlobalObjectWithPrivateName(constructor);
167     addToGlobalObjectWithPrivateName(connectedCallback);
168     addToGlobalObjectWithPrivateName(disconnectedCallback);
169     addToGlobalObjectWithPrivateName(adoptedCallback);
170     addToGlobalObjectWithPrivateName(attributeChangedCallback);
171 
172     registry.addElementDefinition(WTFMove(elementInterface));
173 
174     return jsUndefined();
175 }
176 
177 // https://html.spec.whatwg.org/#dom-customelementregistry-whendefined
<span class="line-modified">178 static JSValue whenDefinedPromise(JSGlobalObject&amp; lexicalGlobalObject, CallFrame&amp; callFrame, JSDOMGlobalObject&amp; globalObject, CustomElementRegistry&amp; registry, JSPromise&amp; promise)</span>
179 {
<span class="line-modified">180     auto scope = DECLARE_THROW_SCOPE(lexicalGlobalObject.vm());</span>
181 
<span class="line-modified">182     if (UNLIKELY(callFrame.argumentCount() &lt; 1))</span>
<span class="line-modified">183         return throwException(&amp;lexicalGlobalObject, scope, createNotEnoughArgumentsError(&amp;lexicalGlobalObject));</span>
184 
<span class="line-modified">185     AtomString localName(callFrame.uncheckedArgument(0).toString(&amp;lexicalGlobalObject)-&gt;toAtomString(&amp;lexicalGlobalObject));</span>
186     RETURN_IF_EXCEPTION(scope, JSValue());
187 
<span class="line-modified">188     if (!validateCustomElementNameAndThrowIfNeeded(lexicalGlobalObject, localName)) {</span>
189         EXCEPTION_ASSERT(scope.exception());
190         return jsUndefined();
191     }
192 
193     if (registry.findInterface(localName)) {
<span class="line-modified">194         DeferredPromise::create(globalObject, promise)-&gt;resolve();</span>
<span class="line-modified">195         return &amp;promise;</span>
196     }
197 
198     auto result = registry.promiseMap().ensure(localName, [&amp;] {
<span class="line-modified">199         return DeferredPromise::create(globalObject, promise);</span>
200     });
201 
202     return result.iterator-&gt;value-&gt;promise();
203 }
204 
<span class="line-modified">205 JSValue JSCustomElementRegistry::whenDefined(JSGlobalObject&amp; lexicalGlobalObject, CallFrame&amp; callFrame)</span>
206 {
<span class="line-modified">207     auto scope = DECLARE_CATCH_SCOPE(lexicalGlobalObject.vm());</span>
208 
209     ASSERT(globalObject());
<span class="line-modified">210     auto* result = JSPromise::create(lexicalGlobalObject.vm(), lexicalGlobalObject.promiseStructure());</span>
<span class="line-modified">211     JSValue promise = whenDefinedPromise(lexicalGlobalObject, callFrame, *globalObject(), wrapped(), *result);</span>

212 
213     if (UNLIKELY(scope.exception())) {
<span class="line-modified">214         rejectPromiseWithExceptionIfAny(lexicalGlobalObject, *globalObject(), *result);</span>
215         scope.assertNoException();
<span class="line-modified">216         return result;</span>
217     }
218 
219     return promise;
220 }
221 
222 }
</pre>
</td>
</tr>
</table>
<center><a href="JSCustomElementInterface.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="JSCustomEventCustom.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>