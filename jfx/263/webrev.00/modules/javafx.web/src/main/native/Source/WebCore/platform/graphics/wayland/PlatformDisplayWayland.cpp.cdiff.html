<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/wayland/PlatformDisplayWayland.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../transforms/TransformationMatrix.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../image-decoders/ScalableImageDecoder.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/wayland/PlatformDisplayWayland.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 91,20 ***</span>
      m_registry.reset(wl_display_get_registry(m_display));
      wl_registry_add_listener(m_registry.get(), &amp;s_registryListener, this);
      wl_display_roundtrip(m_display);
  
  #if USE(EGL)
<span class="line-modified">! #if defined(EGL_KHR_platform_wayland)</span>
      const char* extensions = eglQueryString(nullptr, EGL_EXTENSIONS);
      if (GLContext::isExtensionSupported(extensions, &quot;EGL_KHR_platform_base&quot;)) {
          if (auto* getPlatformDisplay = reinterpret_cast&lt;PFNEGLGETPLATFORMDISPLAYEXTPROC&gt;(eglGetProcAddress(&quot;eglGetPlatformDisplay&quot;)))
              m_eglDisplay = getPlatformDisplay(EGL_PLATFORM_WAYLAND_KHR, m_display, nullptr);
<span class="line-modified">!     } else if (GLContext::isExtensionSupported(extensions, &quot;EGL_EXT_platform_base&quot;)) {</span>
          if (auto* getPlatformDisplay = reinterpret_cast&lt;PFNEGLGETPLATFORMDISPLAYEXTPROC&gt;(eglGetProcAddress(&quot;eglGetPlatformDisplayEXT&quot;)))
<span class="line-modified">!             m_eglDisplay = getPlatformDisplay(EGL_PLATFORM_WAYLAND_KHR, m_display, nullptr);</span>
<span class="line-modified">!     } else</span>
  #endif
          m_eglDisplay = eglGetDisplay(m_display);
  
      PlatformDisplay::initializeEGLDisplay();
  #endif
  }
<span class="line-new-header">--- 91,26 ---</span>
      m_registry.reset(wl_display_get_registry(m_display));
      wl_registry_add_listener(m_registry.get(), &amp;s_registryListener, this);
      wl_display_roundtrip(m_display);
  
  #if USE(EGL)
<span class="line-modified">! #if defined(EGL_KHR_platform_wayland) || defined(EGL_EXT_platform_wayland)</span>
      const char* extensions = eglQueryString(nullptr, EGL_EXTENSIONS);
<span class="line-added">+ #if defined(EGL_KHR_platform_wayland)</span>
      if (GLContext::isExtensionSupported(extensions, &quot;EGL_KHR_platform_base&quot;)) {
          if (auto* getPlatformDisplay = reinterpret_cast&lt;PFNEGLGETPLATFORMDISPLAYEXTPROC&gt;(eglGetProcAddress(&quot;eglGetPlatformDisplay&quot;)))
              m_eglDisplay = getPlatformDisplay(EGL_PLATFORM_WAYLAND_KHR, m_display, nullptr);
<span class="line-modified">!     }</span>
<span class="line-added">+ #endif</span>
<span class="line-added">+ #if defined(EGL_EXT_platform_wayland)</span>
<span class="line-added">+     if (m_eglDisplay == EGL_NO_DISPLAY &amp;&amp; GLContext::isExtensionSupported(extensions, &quot;EGL_EXT_platform_base&quot;)) {</span>
          if (auto* getPlatformDisplay = reinterpret_cast&lt;PFNEGLGETPLATFORMDISPLAYEXTPROC&gt;(eglGetProcAddress(&quot;eglGetPlatformDisplayEXT&quot;)))
<span class="line-modified">!             m_eglDisplay = getPlatformDisplay(EGL_PLATFORM_WAYLAND_EXT, m_display, nullptr);</span>
<span class="line-modified">!     }</span>
<span class="line-added">+ #endif</span>
  #endif
<span class="line-added">+     if (m_eglDisplay == EGL_NO_DISPLAY)</span>
          m_eglDisplay = eglGetDisplay(m_display);
  
      PlatformDisplay::initializeEGLDisplay();
  #endif
  }
</pre>
<center><a href="../transforms/TransformationMatrix.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../image-decoders/ScalableImageDecoder.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>