<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WebCore/testing/Internals.idl</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (C) 2012 Google Inc. All rights reserved.
  3  * Copyright (C) 2013-2019 Apple Inc. All rights reserved.
  4  *
  5  * Redistribution and use in source and binary forms, with or without
  6  * modification, are permitted provided that the following conditions
  7  * are met:
  8  *
  9  * 1.  Redistributions of source code must retain the above copyright
 10  *     notice, this list of conditions and the following disclaimer.
 11  * 2.  Redistributions in binary form must reproduce the above copyright
 12  *     notice, this list of conditions and the following disclaimer in the
 13  *     documentation and/or other materials provided with the distribution.
 14  *
 15  * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS &quot;AS IS&quot; AND ANY
 16  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 17  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 18  * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 19  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 20  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 21  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 22  * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 23  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 24  * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 25  */
 26 
 27 enum PageOverlayType {
 28     &quot;view&quot;,
 29     &quot;document&quot;
 30 };
 31 
 32 // These map to ResourceRequestCachePolicy.
 33 enum CachePolicy {
 34     &quot;UseProtocolCachePolicy&quot;,
 35     &quot;ReloadIgnoringCacheData&quot;,
 36     &quot;ReturnCacheDataElseLoad&quot;,
 37     &quot;ReturnCacheDataDontLoad&quot;
 38 };
 39 
 40 // FIXME: Strings in an enum should not have the name of the enum as a prefix.
 41 enum ResourceLoadPriority {
 42     &quot;ResourceLoadPriorityVeryLow&quot;,
 43     &quot;ResourceLoadPriorityLow&quot;,
 44     &quot;ResourceLoadPriorityMedium&quot;,
 45     &quot;ResourceLoadPriorityHigh&quot;,
 46     &quot;ResourceLoadPriorityVeryHigh&quot;
 47 };
 48 
 49 [Conditional=MEDIA_SESSION] enum MediaSessionInterruptingCategory {
 50     &quot;content&quot;,
 51     &quot;transient&quot;,
 52     &quot;transient-solo&quot;
 53 };
 54 
 55 [Conditional=MEDIA_SESSION] enum MediaControlEvent {
 56     &quot;play-pause&quot;,
 57     &quot;next-track&quot;,
 58     &quot;previous-track&quot;
 59 };
 60 
 61 enum AutoFillButtonType {
 62     &quot;None&quot;,
 63     &quot;Contacts&quot;,
 64     &quot;Credentials&quot;,
 65     &quot;StrongPassword&quot;,
 66     &quot;CreditCard&quot;
 67 };
 68 
 69 enum UserInterfaceLayoutDirection {
 70     &quot;LTR&quot;,
 71     &quot;RTL&quot;
 72 };
 73 
 74 enum BaseWritingDirection {
 75     &quot;Natural&quot;,
 76     &quot;Ltr&quot;,
 77     &quot;Rtl&quot;
 78 };
 79 
 80 enum EventThrottlingBehavior {
 81     &quot;responsive&quot;,
 82     &quot;unresponsive&quot;
 83 };
 84 
 85 enum CompositingPolicy {
 86     &quot;normal&quot;,
 87     &quot;conservative&quot;
 88 };
 89 
 90 [Conditional=VIDEO] enum PlaybackControlsPurpose {
 91     &quot;ControlsManager&quot;,
 92     &quot;NowPlaying&quot;
 93 };
 94 
 95 [Conditional=VIDEO] enum MediaSessionState {
 96     &quot;Idle&quot;,
 97     &quot;Autoplaying&quot;,
 98     &quot;Playing&quot;,
 99     &quot;Paused&quot;,
100     &quot;Interrupted&quot;
101 };
102 
103 [
104     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
105     Conditional=VIDEO,
106     JSGenerateToJSObject,
107 ] dictionary NowPlayingState {
108     boolean hasActiveSession;
109     boolean registeredAsNowPlayingApplication;
110     DOMString title;
111     unrestricted double duration;
112     unrestricted double elapsedTime;
113     unsigned long long uniqueIdentifier;
114 };
115 
116 [
117     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
118     JSGenerateToJSObject,
119 ] dictionary FullscreenInsets {
120     double top;
121     double left;
122     double bottom;
123     double right;
124 };
125 
126 [
127     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
128     JSGenerateToJSObject,
129 ] dictionary HEVCParameterSet {
130     DOMString codecName;
131     unsigned short generalProfileSpace;
132     unsigned short generalProfileIDC;
133     unsigned long generalProfileCompatibilityFlags;
134     boolean generalTierFlag;
135     unsigned short generalLevelIDC;
136     sequence&lt;unsigned short&gt; constraintFlags;
137 };
138 
139 [
140     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
141     JSGenerateToJSObject,
142 ] dictionary DoViParameterSet {
143     DOMString codecName;
144     unsigned short bitstreamProfileID;
145     unsigned short bitstreamLevelID;
146 };
147 
148 [
149     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
150     JSGenerateToJSObject,
151 ] dictionary AcceleratedAnimation {
152     DOMString property;
153     double speed;
154 };
155 
156 [
157     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
158     JSGenerateToJSObject,
159 ] dictionary CookieData {
160     DOMString name;
161     DOMString value;
162     DOMString domain;
163     double expires;
164     boolean isHttpOnly;
165     boolean isSecure;
166     boolean isSession;
167     boolean isSameSiteLax;
168     boolean isSameSiteStrict;
169 };
170 
171 [
172     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
173     JSGenerateToJSObject,
174 ] dictionary TextIndicatorInfo {
175     DOMRectReadOnly textBoundingRectInRootViewCoordinates;
176     DOMRectList textRectsInBoundingRectCoordinates;
177 };
178 
179 [
180     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
181     JSGenerateToJSObject,
182 ] dictionary TextIndicatorOptions {
183     boolean useBoundingRectAndPaintAllContentForComplexRanges = false;
184     boolean computeEstimatedBackgroundColor = false;
185     boolean respectTextColor = false;
186 };
187 
188 [
189     ExportMacro=WEBCORE_TESTSUPPORT_EXPORT,
190     NoInterfaceObject,
191 ] interface Internals {
192     DOMString address(Node node);
193     boolean nodeNeedsStyleRecalc(Node node);
194     DOMString styleChangeType(Node node);
195     DOMString description(any value);
196 
197     // Animated image pausing testing.
198     boolean hasPausedImageAnimations(Element element);
199 
200     // Must be called on an element whose enclosingLayer() is self-painting.
201     boolean isPaintingFrequently(Element element);
202     void incrementFrequentPaintCounter(Element element);
203 
204     [MayThrowException] DOMString elementRenderTreeAsText(Element element);
205     boolean isPreloaded(DOMString url);
206     boolean isLoadingFromMemoryCache(DOMString url);
207     DOMString fetchResponseSource(FetchResponse response);
208     DOMString xhrResponseSource(XMLHttpRequest xhr);
209     boolean isSharingStyleSheetContents(HTMLLinkElement a, HTMLLinkElement b);
210     boolean isStyleSheetLoadingSubresources(HTMLLinkElement link);
211     void clearMemoryCache();
212     void pruneMemoryCacheToSize(long size);
213     void destroyDecodedDataForAllImages();
214     long memoryCacheSize();
215     void setOverrideCachePolicy(CachePolicy policy);
216     void setOverrideResourceLoadPriority(ResourceLoadPriority priority);
217     void setStrictRawResourceValidationPolicyDisabled(boolean disabled);
218 
219     void clearBackForwardCache();
220     unsigned long backForwardCacheSize();
221     void preventDocumentFromEnteringBackForwardCache();
222 
223     CSSStyleDeclaration computedStyleIncludingVisitedInfo(Element element);
224 
225     Node ensureUserAgentShadowRoot(Element host);
226     Node shadowRoot(Element host);
227 
228     // CSS Deferred Parsing Testing.
229     long deferredStyleRulesCount(StyleSheet sheet);
230     long deferredGroupRulesCount(StyleSheet sheet);
231     long deferredKeyframesRulesCount(StyleSheet sheet);
232 
233     [MayThrowException] DOMString shadowRootType(Node root);
234     DOMString shadowPseudoId(Element element);
235     void setShadowPseudoId(Element element, DOMString id);
236     Node treeScopeRootNode(Node node);
237     Node parentTreeScope(Node node);
238 
239     // Spatial Navigation testing
240     [MayThrowException] unsigned long lastSpatialNavigationCandidateCount();
241 
242     // CSS Animation testing.
243     unsigned long numberOfActiveAnimations();
244     [MayThrowException] void suspendAnimations();
245     [MayThrowException] void resumeAnimations();
246     [MayThrowException] boolean animationsAreSuspended();
247     [MayThrowException] boolean pauseAnimationAtTimeOnElement(DOMString animationName, unrestricted double pauseTime, Element element);
248     [MayThrowException] boolean pauseAnimationAtTimeOnPseudoElement(DOMString animationName, unrestricted double pauseTime, Element element, DOMString pseudoId);
249     readonly attribute double animationsInterval;
250 
251     // CSS Transition testing.
252     [MayThrowException] boolean pauseTransitionAtTimeOnElement(DOMString propertyName, unrestricted double pauseTime, Element element);
253     [MayThrowException] boolean pauseTransitionAtTimeOnPseudoElement(DOMString property, unrestricted double pauseTime, Element element, DOMString pseudoId);
254 
255     // Web Animations testing.
256     sequence&lt;AcceleratedAnimation&gt; acceleratedAnimationsForElement(Element element);
257     unsigned long numberOfAnimationTimelineInvalidations();
258 
259     // For animations testing, we need a way to get at pseudo elements.
260     [MayThrowException] Element? pseudoElement(Element element, DOMString pseudoId);
261 
262     DOMString visiblePlaceholder(Element element);
263     void selectColorInColorChooser(HTMLInputElement element, DOMString colorValue);
264     [MayThrowException] sequence&lt;DOMString&gt; formControlStateOfPreviousHistoryItem();
265     [MayThrowException] void setFormControlStateOfPreviousHistoryItem(sequence&lt;DOMString&gt; values);
266 
267     [MayThrowException] DOMRect absoluteCaretBounds();
268     [MayThrowException] boolean isCaretBlinkingSuspended();
269 
270     DOMRect boundingBox(Element element);
271 
272     [MayThrowException] DOMRectList inspectorHighlightRects();
273 
274     [MayThrowException] unsigned long markerCountForNode(Node node, DOMString markerType);
275     [MayThrowException] Range? markerRangeForNode(Node node, DOMString markerType, unsigned long index);
276     [MayThrowException] DOMString markerDescriptionForNode(Node node, DOMString markerType, unsigned long index);
277     [MayThrowException] DOMString dumpMarkerRects(DOMString markerType);
278     void addTextMatchMarker(Range range, boolean isActive);
279     [MayThrowException] void setMarkedTextMatchesAreHighlighted(boolean flag);
280 
281     void invalidateFontCache();
282     void setFontSmoothingEnabled(boolean enabled);
283 
284     [MayThrowException] void setScrollViewPosition(long x, long y);
285 
286     // Like Element.scrollTo(), but without constaints, for testing rubber-banding.
287     [MayThrowException] void unconstrainedScrollTo(Element element, unrestricted double x, unrestricted double y);
288 
289     [MayThrowException] DOMRect layoutViewportRect();
290     [MayThrowException] DOMRect visualViewportRect();
291 
292     [MayThrowException] void setViewIsTransparent(boolean trnasparent);
293 
294     [MayThrowException] DOMString viewBaseBackgroundColor();
295     [MayThrowException] void setViewBaseBackgroundColor(DOMString colorValue);
296 
297     [MayThrowException] void setPagination(DOMString mode, long gap, optional long pageLength = 0);
298     [MayThrowException] void setPaginationLineGridEnabled(boolean enabled);
299 
300     [MayThrowException] DOMString configurationForViewport(unrestricted float devicePixelRatio, long deviceWidth, long deviceHeight, long availableWidth, long availableHeight);
301 
302     [MayThrowException] boolean wasLastChangeUserEdit(Element textField);
303     boolean elementShouldAutoComplete(HTMLInputElement inputElement);
304     void setAutofilled(HTMLInputElement inputElement, boolean enabled);
305     void setAutoFilledAndViewable(HTMLInputElement inputElement, boolean enabled);
306     void setShowAutoFillButton(HTMLInputElement inputElement, AutoFillButtonType autoFillButtonType);
307     AutoFillButtonType autoFillButtonType(HTMLInputElement inputElement);
308     AutoFillButtonType lastAutoFillButtonType(HTMLInputElement inputElement);
309 
310     void setCanShowPlaceholder(Element element, boolean canShowPlaceholder);
311 
312     [MayThrowException] Range? rangeOfString(DOMString text, Range? referenceRange, sequence&lt;DOMString&gt; findOptions);
313     [MayThrowException] unsigned long countMatchesForText(DOMString text, sequence&lt;DOMString&gt; findOptions, DOMString markMatches);
314     [MayThrowException] unsigned long countFindMatches(DOMString text, sequence&lt;DOMString&gt; findOptions);
315 
316     [MayThrowException] DOMString autofillFieldName(Element formControlElement);
317 
318     [MayThrowException] void invalidateControlTints();
319 
320     [MayThrowException] void scrollElementToRect(Element element, long x, long y, long w, long h);
321 
322     Range? rangeFromLocationAndLength(Element scope, long rangeLocation, long rangeLength);
323     unsigned long locationFromRange(Element scope, Range range);
324     unsigned long lengthFromRange(Element scope, Range range);
325     DOMString rangeAsText(Range range);
326     DOMString rangeAsTextUsingBackwardsTextIterator(Range range);
327     Range subrange(Range range, long rangeLocation, long rangeLength);
328     [MayThrowException] Range? rangeForDictionaryLookupAtLocation(long x, long y);
329     Range? rangeOfStringNearLocation(Range range, DOMString text, long targetOffset);
330 
331     [MayThrowException] void setDelegatesScrolling(boolean enabled);
332 
333     [MayThrowException] long lastSpellCheckRequestSequence();
334     [MayThrowException] long lastSpellCheckProcessedSequence();
335 
336     sequence&lt;DOMString&gt; userPreferredLanguages();
337     void setUserPreferredLanguages(sequence&lt;DOMString&gt; languages);
338 
339     sequence&lt;DOMString&gt; userPreferredAudioCharacteristics();
340     void setUserPreferredAudioCharacteristic(DOMString characteristic);
341 
342     [MayThrowException] unsigned long wheelEventHandlerCount();
343     [MayThrowException] unsigned long touchEventHandlerCount();
344 
345     [MayThrowException] DOMRectList touchEventRectsForEvent(DOMString eventName);
346     [MayThrowException] DOMRectList passiveTouchEventListenerRects();
347 
348     [MayThrowException] NodeList? nodesFromRect(Document document, long x, long y,
349         unsigned long topPadding, unsigned long rightPadding, unsigned long bottomPadding, unsigned long leftPadding,
350         boolean ignoreClipping, boolean allowShadowContent, boolean allowChildFrameContent);
351 
352     // Calling parserMetaData() with no arguments gets the metadata for the script of the current scope.
353     DOMString parserMetaData(optional any func);
354 
355     void updateEditorUINowIfScheduled();
356 
357     readonly attribute boolean sentenceRetroCorrectionEnabled;
358     boolean hasSpellingMarker(long from, long length);
359     boolean hasGrammarMarker(long from, long length);
360     boolean hasAutocorrectedMarker(long from, long length);
361     void setContinuousSpellCheckingEnabled(boolean enabled);
362     void setAutomaticQuoteSubstitutionEnabled(boolean enabled);
363     void setAutomaticLinkDetectionEnabled(boolean enabled);
364     void setAutomaticDashSubstitutionEnabled(boolean enabled);
365     void setAutomaticTextReplacementEnabled(boolean enabled);
366     void setAutomaticSpellingCorrectionEnabled(boolean enabled);
367 
368     void handleAcceptedCandidate(DOMString candidate, unsigned long location, unsigned long length);
369     void changeSelectionListType();
370 
371     boolean isOverwriteModeEnabled();
372     void toggleOverwriteModeEnabled();
373 
374     unsigned long numberOfScrollableAreas();
375 
376     [MayThrowException] boolean isPageBoxVisible(long pageNumber);
377 
378     unsigned long imageFrameIndex(HTMLImageElement element);
379     unsigned long imageFrameCount(HTMLImageElement element);
380     float imageFrameDurationAtIndex(HTMLImageElement element, unsigned long index);
381     void setImageFrameDecodingDuration(HTMLImageElement element, unrestricted float duration);
382     void resetImageAnimation(HTMLImageElement element);
383     boolean isImageAnimating(HTMLImageElement element);
384     unsigned long imagePendingDecodePromisesCountForTesting(HTMLImageElement element);
385     void setClearDecoderAfterAsyncFrameRequestForTesting(HTMLImageElement element, boolean enabled);
386     unsigned long imageDecodeCount(HTMLImageElement element);
387     unsigned long pdfDocumentCachingCount(HTMLImageElement element);
388     void setLargeImageAsyncDecodingEnabledForTesting(HTMLImageElement element, boolean enabled);
389     void setForceUpdateImageDataEnabledForTesting(HTMLImageElement element, boolean enabled);
390 
391     void setGridMaxTracksLimit(unsigned long maxTracksLimit);
392 
393     readonly attribute InternalSettings settings;
394     readonly attribute unsigned long workerThreadCount;
395 
396     [MayThrowException] readonly attribute boolean areSVGAnimationsPaused;
397     [MayThrowException] double svgAnimationsInterval(SVGSVGElement element);
398 
399     boolean testProcessIncomingSyncMessagesWhenWaitingForSyncReply();
400 
401     // Flags for layerTreeAsText.
402     const unsigned short LAYER_TREE_INCLUDES_VISIBLE_RECTS = 1;
403     const unsigned short LAYER_TREE_INCLUDES_TILE_CACHES = 2;
404     const unsigned short LAYER_TREE_INCLUDES_REPAINT_RECTS = 4;
405     const unsigned short LAYER_TREE_INCLUDES_PAINTING_PHASES = 8;
406     const unsigned short LAYER_TREE_INCLUDES_CONTENT_LAYERS = 16;
407     const unsigned short LAYER_TREE_INCLUDES_ACCELERATES_DRAWING = 32;
408     const unsigned short LAYER_TREE_INCLUDES_CLIPPING = 64;
409     const unsigned short LAYER_TREE_INCLUDES_BACKING_STORE_ATTACHED = 128;
410     const unsigned short LAYER_TREE_INCLUDES_ROOT_LAYER_PROPERTIES = 256;
411     const unsigned short LAYER_TREE_INCLUDES_EVENT_REGION = 512;
412     const unsigned short LAYER_TREE_INCLUDES_DEEP_COLOR = 1024;
413     [MayThrowException] DOMString layerTreeAsText(Document document, optional unsigned short flags = 0);
414 
415     [MayThrowException] unsigned long long layerIDForElement(Element element);
416 
417     [MayThrowException] DOMString scrollbarOverlayStyle(optional Node? node = null);
418     [MayThrowException] boolean scrollbarUsingDarkAppearance(optional Node? node = null);
419 
420     [MayThrowException] DOMString scrollingStateTreeAsText();
421     [MayThrowException] DOMString mainThreadScrollingReasons(); // FIXME: rename to synchronousScrollingReasons().
422     [MayThrowException] DOMRectList nonFastScrollableRects();
423 
424     [MayThrowException] DOMString repaintRectsAsText();
425 
426     // These throw if the element does not have a compositing layer.
427     [MayThrowException] void setElementUsesDisplayListDrawing(Element element, boolean usesDisplayListDrawing);
428     [MayThrowException] void setElementTracksDisplayListReplay(Element element, boolean trackReplay);
429 
430     // Flags for displayListForElement.
431     const unsigned short DISPLAY_LIST_INCLUDES_PLATFORM_OPERATIONS = 1;
432     // Returns the recorded display list.
433     [MayThrowException] DOMString displayListForElement(Element element, optional unsigned short flags = 0);
434     // Returns the display list that was actually painted.
435     [MayThrowException] DOMString replayDisplayListForElement(Element element, optional unsigned short flags = 0);
436 
437     [MayThrowException] void garbageCollectDocumentResources();
438 
439     [MayThrowException] void insertAuthorCSS(DOMString css);
440     [MayThrowException] void insertUserCSS(DOMString css);
441 
442     readonly attribute boolean isUnderMemoryPressure;
443     void beginSimulatedMemoryPressure();
444     void endSimulatedMemoryPressure();
445 
446     [Conditional=INDEXED_DATABASE] unsigned long numberOfIDBTransactions();
447 
448     unsigned long numberOfLiveNodes();
449     unsigned long numberOfLiveDocuments();
450     unsigned long referencingNodeCount(Document document);
451     [Conditional=INTERSECTION_OBSERVER] unsigned long numberOfIntersectionObservers(Document document);
452     WindowProxy? openDummyInspectorFrontend(DOMString url);
453     void closeDummyInspectorFrontend();
454     [MayThrowException] void setInspectorIsUnderTest(boolean isUnderTest);
455 
456     DOMString counterValue(Element element);
457     long pageNumber(Element element, optional unrestricted float pageWidth = 800, optional unrestricted float pageHeight = 600);
458     sequence&lt;DOMString&gt; shortcutIconURLs();
459     long numberOfPages(optional unrestricted double pageWidthInPixels = 800, optional unrestricted double pageHeightInPixels = 600);
460     [MayThrowException] DOMString pageProperty(DOMString propertyName, long pageNumber);
461     [MayThrowException] DOMString pageSizeAndMarginsInPixels(long pageIndex, long width, long height, long marginTop, long marginRight, long marginBottom, long marginLeft);
462 
463     [MayThrowException] void setPageScaleFactor(unrestricted float scaleFactor, long x, long y);
464     [MayThrowException] float pageScaleFactor();
465 
466     [MayThrowException] void setPageZoomFactor(unrestricted float zoomFactor);
467     [MayThrowException] void setTextZoomFactor(unrestricted float zoomFactor);
468 
469     [MayThrowException] void setUseFixedLayout(boolean useFixedLayout);
470     [MayThrowException] void setFixedLayoutSize(long width, long height);
471     void setPrinting(long width, long height);
472 
473     [MayThrowException] void setViewExposedRect(unrestricted float x, unrestricted float y, unrestricted float width, unrestricted float height);
474 
475     void setHeaderHeight(unrestricted float height);
476     void setFooterHeight(unrestricted float height);
477 
478     void setTopContentInset(unrestricted float contentInset);
479 
480     [Conditional=FULLSCREEN_API] void webkitWillEnterFullScreenForElement(Element element);
481     [Conditional=FULLSCREEN_API] void webkitDidEnterFullScreenForElement(Element element);
482     [Conditional=FULLSCREEN_API] void webkitWillExitFullScreenForElement(Element element);
483     [Conditional=FULLSCREEN_API] void webkitDidExitFullScreenForElement(Element element);
484     [Conditional=FULLSCREEN_API] readonly attribute boolean isAnimatingFullScreen;
485 
486     void setFullscreenInsets(FullscreenInsets insets);
487     void setFullscreenAutoHideDuration(double duration);
488     void setFullscreenControlsHidden(boolean hidden);
489 
490     void setApplicationCacheOriginQuota(unsigned long long quota);
491 
492     void registerURLSchemeAsBypassingContentSecurityPolicy(DOMString scheme);
493     void removeURLSchemeRegisteredAsBypassingContentSecurityPolicy(DOMString scheme);
494 
495     void registerDefaultPortForProtocol(unsigned short port, DOMString scheme);
496 
497     MallocStatistics mallocStatistics();
498     TypeConversions typeConversions();
499     MemoryInfo memoryInfo();
500 
501     sequence&lt;DOMString&gt; getReferencedFilePaths();
502 
503     // These functions both reset the tracked repaint rects. They are intended to be used in the following order:
504     //  startTrackingRepaints, repaintRectsAsText, stopTrackingRepaints.
505     [MayThrowException] void startTrackingRepaints();
506     [MayThrowException] void stopTrackingRepaints();
507 
508     [MayThrowException] void startTrackingLayerFlushes();
509     [MayThrowException] unsigned long layerFlushCount();
510 
511     // Query if a timer is currently throttled, to debug timer throttling.
512     [MayThrowException] boolean isTimerThrottled(long timerHandle);
513 
514     boolean isRequestAnimationFrameThrottled();
515     boolean areTimersThrottled();
516 
517     [MayThrowException] void setLowPowerModeEnabled(boolean enabled);
518     readonly attribute double requestAnimationFrameInterval;
519     readonly attribute boolean scriptedAnimationsAreSuspended;
520 
521     // Override the behavior of WebPage::eventThrottlingDelay(), which only affects iOS.
522     attribute EventThrottlingBehavior? eventThrottlingBehaviorOverride;
523 
524     [MayThrowException] void startTrackingStyleRecalcs();
525     [MayThrowException] unsigned long styleRecalcCount();
526     readonly attribute unsigned long lastStyleUpdateSize;
527 
528     [MayThrowException] void startTrackingCompositingUpdates();
529     [MayThrowException] unsigned long compositingUpdateCount();
530 
531     attribute CompositingPolicy? compositingPolicyOverride;
532 
533     // |node| should be Document, HTMLIFrameElement, or unspecified.
534     // If |node| is an HTMLIFrameElement, it assumes node.contentDocument is
535     // specified without security checks. Unspecified or null means this document.
536     [MayThrowException] void updateLayoutIgnorePendingStylesheetsAndRunPostLayoutTasks(optional Node? node = null);
537 
538     readonly attribute unsigned long layoutCount;
539 
540     // Returns a string with information about the mouse cursor used at the specified client location.
541     [MayThrowException] DOMString getCurrentCursorInfo();
542 
543     DOMString markerTextForListItem(Element element);
544 
545     DOMString toolTipFromElement(Element element);
546 
547     SerializedScriptValue deserializeBuffer(ArrayBuffer buffer);
548     ArrayBuffer serializeObject(SerializedScriptValue object);
549 
550     boolean isFromCurrentWorld(any obj);
551     any evaluateInWorldIgnoringException(DOMString name, DOMString source);
552 
553     void setUsesOverlayScrollbars(boolean enabled);
554     void setUsesMockScrollAnimator(boolean enabled);
555 
556     void forceReload(boolean endToEnd);
557     void reloadExpiredOnly();
558 
559     void enableAutoSizeMode(boolean enabled, long width, long height);
560 
561     [Conditional=VIDEO] sequence&lt;DOMString&gt; mediaResponseSources(HTMLMediaElement media);
562     [Conditional=VIDEO] sequence&lt;DOMString&gt; mediaResponseContentRanges(HTMLMediaElement media);
563     [Conditional=VIDEO] void simulateAudioInterruption(HTMLMediaElement element);
564     [Conditional=VIDEO, MayThrowException] boolean mediaElementHasCharacteristic(HTMLMediaElement element, DOMString characteristic);
565     [Conditional=VIDEO] void beginSimulatedHDCPError(HTMLMediaElement media);
566     [Conditional=VIDEO] void endSimulatedHDCPError(HTMLMediaElement media);
567 
568     [Conditional=VIDEO] boolean elementShouldBufferData(HTMLMediaElement media);
569     [Conditional=VIDEO] DOMString elementBufferingPolicy(HTMLMediaElement media);
570     [Conditional=VIDEO] double privatePlayerVolume(HTMLMediaElement media);
571 
572     [Conditional=LEGACY_ENCRYPTED_MEDIA] void initializeMockCDM();
573     [Conditional=ENCRYPTED_MEDIA] MockCDMFactory registerMockCDM();
574     void enableMockMediaCapabilities();
575 
576     [Conditional=SPEECH_SYNTHESIS] void enableMockSpeechSynthesizer();
577 
578     DOMString getImageSourceURL(Element element);
579 
580     [Conditional=VIDEO_TRACK, MayThrowException] DOMString captionsStyleSheetOverride();
581     [Conditional=VIDEO_TRACK, MayThrowException] void setCaptionsStyleSheetOverride(DOMString override);
582     [Conditional=VIDEO_TRACK, MayThrowException] void setPrimaryAudioTrackLanguageOverride(DOMString language);
583     [Conditional=VIDEO_TRACK, MayThrowException] void setCaptionDisplayMode(DOMString mode);
584     [Conditional=VIDEO_TRACK] TextTrackCueGeneric createGenericCue(double startTime, double endTime, DOMString text);
585 
586     [Conditional=VIDEO] TimeRanges createTimeRanges(Float32Array startTimes, Float32Array
587      endTimes);
588     [Conditional=VIDEO] unrestricted double closestTimeToTimeRanges(unrestricted double time, TimeRanges ranges);
589 
590     boolean isSelectPopupVisible(HTMLSelectElement element);
591 
592     [MayThrowException] boolean isPluginUnavailabilityIndicatorObscured(Element element);
593     [MayThrowException] DOMString unavailablePluginReplacementText(Element element);
594     boolean isPluginSnapshotted(Element element);
595     boolean pluginIsBelowSizeThreshold(Element element);
596 
597     [MayThrowException] DOMRect selectionBounds();
598     void setSelectionWithoutValidation(Node baseNode, unsigned long baseOffset, Node? extentNode, unsigned long extentOffset);
599 
600     [Conditional=MEDIA_SOURCE] void initializeMockMediaSource();
601     [Conditional=MEDIA_SOURCE] sequence&lt;DOMString&gt; bufferedSamplesForTrackID(SourceBuffer buffer, DOMString trackID);
602     [Conditional=MEDIA_SOURCE] sequence&lt;DOMString&gt; enqueuedSamplesForTrackID(SourceBuffer buffer, DOMString trackID);
603     [Conditional=MEDIA_SOURCE] void setShouldGenerateTimestamps(SourceBuffer buffer, boolean flag);
604     [Conditional=MEDIA_SOURCE] double minimumUpcomingPresentationTimeForTrackID(SourceBuffer buffer, DOMString trackID);
605     [Conditional=MEDIA_SOURCE] void setMaximumQueueDepthForTrackID(SourceBuffer buffer, DOMString trackID, unsigned long maxQueueDepth);
606 
607     [Conditional=VIDEO, MayThrowException] void beginMediaSessionInterruption(DOMString interruptionType);
608     [Conditional=VIDEO] void endMediaSessionInterruption(DOMString flags);
609     [Conditional=MEDIA_SESSION] void sendMediaSessionStartOfInterruptionNotification(MediaSessionInterruptingCategory category);
610     [Conditional=MEDIA_SESSION] void sendMediaSessionEndOfInterruptionNotification(MediaSessionInterruptingCategory category);
611     [Conditional=MEDIA_SESSION] DOMString mediaSessionCurrentState(MediaSession session);
612     [Conditional=MEDIA_SESSION] double mediaElementPlayerVolume(HTMLMediaElement element);
613     [Conditional=MEDIA_SESSION] void sendMediaControlEvent(MediaControlEvent event);
614     [Conditional=VIDEO] void applicationWillBecomeInactive();
615     [Conditional=VIDEO] void applicationDidBecomeActive();
616     [Conditional=VIDEO] void applicationWillEnterForeground(optional boolean suspendedUnderLock = false);
617     [Conditional=VIDEO] void applicationDidEnterBackground(optional boolean suspendedUnderLock = false);
618     [Conditional=VIDEO, MayThrowException] void setMediaSessionRestrictions(DOMString mediaType, DOMString restrictions);
619     [Conditional=VIDEO, MayThrowException] DOMString mediaSessionRestrictions(DOMString mediaType);
620     [Conditional=VIDEO] void setMediaElementRestrictions(HTMLMediaElement element, DOMString restrictions);
621     [Conditional=WEB_AUDIO] void setAudioContextRestrictions(AudioContext context, DOMString restrictions);
622     [Conditional=VIDEO, MayThrowException] void postRemoteControlCommand(DOMString command, optional unrestricted float argument = 0);
623     [Conditional=WIRELESS_PLAYBACK_TARGET] void setMockMediaPlaybackTargetPickerEnabled(boolean enabled);
624     [Conditional=WIRELESS_PLAYBACK_TARGET, MayThrowException] void setMockMediaPlaybackTargetPickerState(DOMString deviceName, DOMString deviceState);
625     [Conditional=WIRELESS_PLAYBACK_TARGET] void mockMediaPlaybackTargetPickerDismissPopup();
626     [Conditional=MEDIA_STREAM] void setCustomPrivateRecorderCreator();
627 
628     [Conditional=WEB_AUDIO] void useMockAudioDestinationCocoa();
629 
630     [Conditional=WEB_RTC] void emulateRTCPeerConnectionPlatformEvent(RTCPeerConnection connection, DOMString action);
631     [Conditional=WEB_RTC] void useMockRTCPeerConnectionFactory(DOMString testCase);
632     [Conditional=WEB_RTC] void setICECandidateFiltering(boolean enabled);
633     [Conditional=WEB_RTC] void setEnumeratingAllNetworkInterfacesEnabled(boolean enabled);
634     [Conditional=WEB_RTC] void stopPeerConnection(RTCPeerConnection connection);
635     [Conditional=WEB_RTC] void clearPeerConnectionFactory();
636     [Conditional=WEB_RTC] void setEnableWebRTCEncryption(boolean enabled);
637     [Conditional=WEB_RTC] void setUseDTLS10(boolean use);
638     [Conditional=WEB_RTC] void setUseGPUProcessForWebRTC(boolean use);
639 
640     [Conditional=VIDEO] void simulateSystemSleep();
641     [Conditional=VIDEO] void simulateSystemWake();
642     [Conditional=VIDEO] boolean elementIsBlockingDisplaySleep(HTMLMediaElement element);
643 
644     [MayThrowException] MockPageOverlay installMockPageOverlay(PageOverlayType type);
645     [MayThrowException] DOMString pageOverlayLayerTreeAsText(optional unsigned short flags = 0);
646 
647     void setPageMuted(DOMString mutedState);
648     DOMString pageMediaState();
649 
650     void setPageDefersLoading(boolean defersLoading);
651     [MayThrowException] boolean pageDefersLoading();
652 
653     File? createFile(DOMString url);
654     void queueMicroTask(long testNumber);
655     boolean testPreloaderSettingViewport();
656 
657     [Conditional=CONTENT_FILTERING] readonly attribute MockContentFilterSettings mockContentFilterSettings;
658 
659     [Conditional=CSS_SCROLL_SNAP, MayThrowException] DOMString scrollSnapOffsets(Element element);
660     [Conditional=CSS_SCROLL_SNAP] void setPlatformMomentumScrollingPredictionEnabled(boolean enabled);
661 
662     [MayThrowException] DOMString pathStringWithShrinkWrappedRects(sequence&lt;double&gt; rectComponents, double radius);
663 
664     [Conditional=VIDEO] DOMString getCurrentMediaControlsStatusForElement(HTMLMediaElement element);
665 
666     DOMString userVisibleString(DOMURL url);
667 
668     void setShowAllPlugins(boolean showAll);
669 
670     [Conditional=STREAMS_API, CallWith=GlobalObject] any cloneArrayBuffer(any buffer, any srcByteOffset, any byteLength);
671     [Conditional=STREAMS_API, CallWith=GlobalObject] boolean isReadableStreamDisturbed(any stream);
672 
673     DOMString resourceLoadStatisticsForURL(DOMURL url);
674     void setResourceLoadStatisticsEnabled(boolean enable);
675 
676     [MayThrowException] void setCanShowModalDialogOverride(boolean allow);
677 
678     DOMString composedTreeAsText(Node parent);
679 
680     boolean isProcessingUserGesture();
681     double lastHandledUserGestureTimestamp();
682 
683     void withUserGesture(VoidCallback callback);
684 
685     boolean userIsInteracting();
686 
687     GCObservation? observeGC(any observed);
688 
689     void setUserInterfaceLayoutDirection(UserInterfaceLayoutDirection userInterfaceLayoutDirection);
690     void setBaseWritingDirection(BaseWritingDirection direction);
691 
692     boolean userPrefersReducedMotion();
693     
694     void reportBacktrace();
695 
696     [Conditional=POINTER_LOCK] boolean pageHasPendingPointerLock();
697     [Conditional=POINTER_LOCK] boolean pageHasPointerLock();
698 
699     sequence&lt;DOMString&gt; accessKeyModifiers();
700 
701     void setQuickLookPassword(DOMString password);
702 
703     [CallWith=Document] void setAsRunningUserScripts();
704     [CallWith=Document, Conditional=APPLE_PAY] void setApplePayIsActive();
705 
706     void disableTileSizeUpdateDelay();
707     void setSpeculativeTilingDelayDisabledForTesting(boolean disabled);
708 
709     [Conditional=WEBGL] void simulateWebGLContextChanged(WebGLRenderingContext context);
710     [Conditional=WEBGL] void failNextGPUStatusCheck(WebGLRenderingContext context);
711     [Conditional=WEBGL] boolean hasLowAndHighPowerGPUs();
712 
713     void setPageVisibility(boolean isVisible);
714     void setPageIsFocusedAndActive(boolean isFocused);
715 
716     [Conditional=WEB_RTC] void setH264HardwareEncoderAllowed(boolean allowed);
717     [Conditional=WEB_RTC] void applyRotationForOutgoingVideoSources(RTCPeerConnection connection);
718 
719     [Conditional=MEDIA_STREAM] void setMockAudioTrackChannelNumber(MediaStreamTrack track, unsigned short count);
720     [Conditional=MEDIA_STREAM] void setShouldInterruptAudioOnPageVisibilityChange(boolean shouldInterrupt);
721     [Conditional=MEDIA_STREAM] void setCameraMediaStreamTrackOrientation(MediaStreamTrack track, short orientation);
722     [Conditional=MEDIA_STREAM] void observeMediaStreamTrack(MediaStreamTrack track);
723     [Conditional=MEDIA_STREAM] Promise&lt;ImageData&gt; grabNextMediaStreamTrackFrame();
724     [Conditional=MEDIA_STREAM] readonly attribute unsigned long trackAudioSampleCount;
725     [Conditional=MEDIA_STREAM] readonly attribute unsigned long trackVideoSampleCount;
726     [Conditional=MEDIA_STREAM] void delayMediaStreamTrackSamples(MediaStreamTrack track, float delay);
727     [Conditional=MEDIA_STREAM] void setMediaStreamTrackMuted(MediaStreamTrack track, boolean muted);
728     [Conditional=MEDIA_STREAM] void removeMediaStreamTrack(MediaStream stream, MediaStreamTrack track);
729     [Conditional=MEDIA_STREAM] void simulateMediaStreamTrackCaptureSourceFailure(MediaStreamTrack track);
730     [Conditional=MEDIA_STREAM] void setMediaStreamTrackIdentifier(MediaStreamTrack track, DOMString identifier);
731     [Conditional=MEDIA_STREAM] void setMediaStreamSourceInterrupted(MediaStreamTrack track, boolean interrupted);
732     [Conditional=MEDIA_STREAM] boolean isMockRealtimeMediaSourceCenterEnabled();
733 
734     unsigned long long documentIdentifier(Document document);
735     boolean isDocumentAlive(unsigned long long documentIdentifier);
736 
737     readonly attribute unsigned long long storageAreaMapCount;
738 
739     unsigned long long elementIdentifier(Element element);
740     unsigned long long frameIdentifier(Document document);
741     unsigned long long pageIdentifier(Document document);
742 
743     boolean isAnyWorkletGlobalScopeAlive();
744 
745     readonly attribute long processIdentifier;
746     DOMString serviceWorkerClientIdentifier(Document document);
747     Promise&lt;void&gt; storeRegistrationsOnDisk();
748 
749     Promise&lt;void&gt; clearCacheStorageMemoryRepresentation();
750     Promise&lt;DOMString&gt; cacheStorageEngineRepresentation();
751     void setResponseSizeWithPadding(FetchResponse response, unsigned long long size);
752     unsigned long long responseSizeWithPadding(FetchResponse response);
753 
754     void updateQuotaBasedOnSpaceUsage();
755 
756     void setConsoleMessageListener(StringCallback callback);
757 
758     readonly attribute boolean supportsAudioSession;
759     DOMString audioSessionCategory();
760     double preferredAudioBufferSize();
761     boolean audioSessionActive();
762 
763     [Conditional=SERVICE_WORKER] Promise&lt;boolean&gt; hasServiceWorkerRegistration(DOMString scopeURL);
764     [Conditional=SERVICE_WORKER] void terminateServiceWorker(ServiceWorker worker);
765     [Conditional=SERVICE_WORKER] Promise&lt;boolean&gt; isServiceWorkerRunning(ServiceWorker worker);
766 
767     [CallWith=Document, Conditional=APPLE_PAY] readonly attribute MockPaymentCoordinator mockPaymentCoordinator;
768 
769     boolean isSystemPreviewLink(Element element);
770     boolean isSystemPreviewImage(Element element);
771 
772     boolean usingAppleInternalSDK();
773 
774     void postTask(VoidCallback callback);
775     [CallWith=ScriptExecutionContext, MayThrowException] void queueTask(DOMString source, VoidCallback callback);
776     [CallWith=Document] void queueTaskToQueueMicrotask(DOMString source, VoidCallback callback);
777     [MayThrowException] boolean hasSameEventLoopAs(WindowProxy windowProxy);
778 
779     DOMString windowLocationHost(DOMWindow window);
780 
781     void markContextAsInsecure();
782 
783     void setMaxCanvasPixelMemory(unsigned long size);
784 
785     [Conditional=VIDEO, MayThrowException] readonly attribute NowPlayingState nowPlayingState;
786 
787     [Conditional=VIDEO] HTMLMediaElement bestMediaElementForShowingPlaybackControlsManager(PlaybackControlsPurpose purpose);
788     [Conditional=VIDEO] MediaSessionState mediaSessionState(HTMLMediaElement element);
789 
790     DOMString ongoingLoadsDescriptions();
791     void setCaptureExtraNetworkLoadMetricsEnabled(boolean value);
792 
793     void reloadWithoutContentExtensions();
794 
795     void setUseSystemAppearance(boolean value);
796 
797     unsigned long pluginCount();
798 
799     void notifyResourceLoadObserver();
800 
801     unsigned long primaryScreenDisplayID();
802 
803     boolean capsLockIsOn();
804 
805     boolean supportsVCPEncoder();
806 
807     HEVCParameterSet? parseHEVCCodecParameters(DOMString codecParameters);
808     DoViParameterSet? parseDoViCodecParameters(DOMString codecParameters);
809 
810     sequence&lt;CookieData&gt; getCookies();
811 
812     void setAlwaysAllowLocalWebarchive(boolean alwaysAllowLocalWebarchive);
813 
814     void processWillSuspend();
815     void processDidResume();
816 
817     void testDictionaryLogging();
818 
819     void setXHRMaximumIntervalForUserGestureForwarding(XMLHttpRequest xhr, double interval);
820     void setTransientActivationDuration(double seconds);
821 
822     void setIsPlayingToAutomotiveHeadUnit(boolean value);
823 
824     TextIndicatorInfo textIndicatorForRange(Range range, TextIndicatorOptions options);
825 
826     void addPrefetchLoadEventListener(HTMLLinkElement link, EventListener? callback);
827 
828     [Conditional=WEB_AUTHN] void setMockWebAuthenticationConfiguration(MockWebAuthenticationConfiguration configuration);
829 
830     [Conditional=PICTURE_IN_PICTURE_API] void setPictureInPictureAPITestEnabled(HTMLVideoElement videoElement, boolean enabled);
831 
832     InternalsMapLike createInternalsMapLike();
833     InternalsSetLike createInternalsSetLike();
834 
835     DOMString highlightPseudoElementColor(DOMString highlightName, Element element);
836 
837     boolean hasSandboxMachLookupAccessToGlobalName(DOMString process, DOMString service);
838     boolean hasSandboxMachLookupAccessToXPCServiceName(DOMString process, DOMString service);
839 
840     DOMString systemColorForCSSValue(DOMString cssValue, boolean useDarkModeAppearance, boolean useElevatedUserInterfaceLevel);
841     DOMString focusRingColor();
842 
843     boolean systemHasBattery();
844 
845     DOMString mediaMIMETypeForExtension(DOMString extension);
846 };
    </pre>
  </body>
</html>