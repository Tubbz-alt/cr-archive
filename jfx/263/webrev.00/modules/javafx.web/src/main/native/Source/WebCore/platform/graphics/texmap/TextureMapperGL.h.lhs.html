<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/texmap/TextureMapperGL.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  Copyright (C) 2010 Nokia Corporation and/or its subsidiary(-ies)
  3  Copyright (C) 2015 Igalia S.L.
  4 
  5  This library is free software; you can redistribute it and/or
  6  modify it under the terms of the GNU Library General Public
  7  License as published by the Free Software Foundation; either
  8  version 2 of the License, or (at your option) any later version.
  9 
 10  This library is distributed in the hope that it will be useful,
 11  but WITHOUT ANY WARRANTY; without even the implied warranty of
 12  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 13  Library General Public License for more details.
 14 
 15  You should have received a copy of the GNU Library General Public License
 16  along with this library; see the file COPYING.LIB.  If not, write to
 17  the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 18  Boston, MA 02110-1301, USA.
 19  */
 20 
 21 #ifndef TextureMapperGL_h
 22 #define TextureMapperGL_h
 23 
 24 #if USE(TEXTURE_MAPPER_GL)
 25 
 26 #include &quot;ClipStack.h&quot;
 27 #include &quot;FilterOperation.h&quot;
 28 #include &quot;IntSize.h&quot;
 29 #include &quot;TextureMapper.h&quot;
 30 #include &quot;TextureMapperContextAttributes.h&quot;
 31 #include &quot;TextureMapperGLHeaders.h&quot;
 32 #include &quot;TransformationMatrix.h&quot;
<a name="1" id="anc1"></a>

 33 
 34 namespace WebCore {
 35 
 36 class TextureMapperGLData;
 37 class TextureMapperShaderProgram;
 38 class FilterOperation;
 39 
 40 // An OpenGL-ES2 implementation of TextureMapper.
 41 class TextureMapperGL : public TextureMapper {
 42 public:
 43     TextureMapperGL();
 44     virtual ~TextureMapperGL();
 45 
 46     enum Flag {
 47         NoFlag = 0x00,
 48         ShouldBlend = 0x01,
 49         ShouldFlipTexture = 0x02,
 50         ShouldUseARBTextureRect = 0x04,
 51         ShouldAntialias = 0x08,
 52         ShouldRotateTexture90 = 0x10,
 53         ShouldRotateTexture180 = 0x20,
 54         ShouldRotateTexture270 = 0x40,
 55         ShouldConvertTextureBGRAToRGBA = 0x80,
 56         ShouldConvertTextureARGBToRGBA = 0x100,
<a name="2" id="anc2"></a><span class="line-modified"> 57         ShouldNotBlend = 0x200</span>

 58     };
 59 
 60     typedef int Flags;
 61 
 62     // TextureMapper implementation
 63     void drawBorder(const Color&amp;, float borderWidth, const FloatRect&amp;, const TransformationMatrix&amp;) override;
 64     void drawNumber(int number, const Color&amp;, const FloatPoint&amp;, const TransformationMatrix&amp;) override;
 65     void drawTexture(const BitmapTexture&amp;, const FloatRect&amp;, const TransformationMatrix&amp;, float opacity, unsigned exposedEdges) override;
 66     virtual void drawTexture(GLuint texture, Flags, const IntSize&amp; textureSize, const FloatRect&amp; targetRect, const TransformationMatrix&amp; modelViewMatrix, float opacity, unsigned exposedEdges = AllEdges);
<a name="3" id="anc3"></a>


 67     void drawSolidColor(const FloatRect&amp;, const TransformationMatrix&amp;, const Color&amp;, bool) override;
 68     void clearColor(const Color&amp;) override;
 69 
 70     void bindSurface(BitmapTexture* surface) override;
 71     BitmapTexture* currentSurface();
 72     void beginClip(const TransformationMatrix&amp;, const FloatRect&amp;) override;
 73     void beginPainting(PaintFlags = 0) override;
 74     void endPainting() override;
 75     void endClip() override;
 76     IntRect clipBounds() override;
 77     IntSize maxTextureSize() const override { return IntSize(2000, 2000); }
 78     Ref&lt;BitmapTexture&gt; createTexture() override { return createTexture(GL_DONT_CARE); }
 79     Ref&lt;BitmapTexture&gt; createTexture(GLint internalFormat) override;
 80 
 81     void drawFiltered(const BitmapTexture&amp; sourceTexture, const BitmapTexture* contentTexture, const FilterOperation&amp;, int pass);
 82 
 83     void setEnableEdgeDistanceAntialiasing(bool enabled) { m_enableEdgeDistanceAntialiasing = enabled; }
<a name="4" id="anc4"></a>
 84 
 85 private:
 86     void drawTexturedQuadWithProgram(TextureMapperShaderProgram&amp;, uint32_t texture, Flags, const IntSize&amp;, const FloatRect&amp;, const TransformationMatrix&amp; modelViewMatrix, float opacity);
<a name="5" id="anc5"></a>
 87     void draw(const FloatRect&amp;, const TransformationMatrix&amp; modelViewMatrix, TextureMapperShaderProgram&amp;, GLenum drawingMode, Flags);
 88 
 89     void drawUnitRect(TextureMapperShaderProgram&amp;, GLenum drawingMode);
 90     void drawEdgeTriangles(TextureMapperShaderProgram&amp;);
 91 
 92     bool beginScissorClip(const TransformationMatrix&amp;, const FloatRect&amp;);
 93     void bindDefaultSurface();
 94     ClipStack&amp; clipStack();
 95     inline TextureMapperGLData&amp; data() { return *m_data; }
 96 
 97     TextureMapperContextAttributes m_contextAttributes;
 98     TextureMapperGLData* m_data;
 99     ClipStack m_clipStack;
100     bool m_enableEdgeDistanceAntialiasing;
101 };
102 
103 } // namespace WebCore
104 
105 #endif // USE(TEXTURE_MAPPER_GL)
106 
107 #endif // TextureMapperGL_h
<a name="6" id="anc6"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="6" type="hidden" />
</body>
</html>