<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WTF/wtf/HexNumber.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="HashTraits.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="JSONValues.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WTF/wtf/HexNumber.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -45,60 +45,25 @@</span>
      return appendHex(&amp;buffer.front(), buffer.size(), static_cast&lt;typename std::make_unsigned&lt;NumberType&gt;::type&gt;(number), minimumDigits, mode);
  }
  
  } // namespace Internal
  
<span class="udiff-line-removed">- template&lt;typename T&gt;</span>
<span class="udiff-line-removed">- inline void appendByteAsHex(unsigned char byte, T&amp; destination, HexConversionMode mode = Uppercase)</span>
<span class="udiff-line-removed">- {</span>
<span class="udiff-line-removed">-     auto* hexDigits = Internal::hexDigitsForMode(mode);</span>
<span class="udiff-line-removed">-     destination.append(hexDigits[byte &gt;&gt; 4]);</span>
<span class="udiff-line-removed">-     destination.append(hexDigits[byte &amp; 0xF]);</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- // FIXME: Consider renaming to appendHex.</span>
<span class="udiff-line-removed">- template&lt;typename NumberType, typename DestinationType&gt;</span>
<span class="udiff-line-removed">- inline void appendUnsignedAsHex(NumberType number, DestinationType&amp; destination, HexConversionMode mode = Uppercase)</span>
<span class="udiff-line-removed">- {</span>
<span class="udiff-line-removed">-     appendUnsignedAsHexFixedSize(number, destination, 0, mode);</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- // FIXME: Consider renaming to appendHex.</span>
<span class="udiff-line-removed">- // Same as appendUnsignedAsHex, but zero-padding to get at least the desired number of digits.</span>
<span class="udiff-line-removed">- template&lt;typename NumberType, typename DestinationType&gt;</span>
<span class="udiff-line-removed">- inline void appendUnsignedAsHexFixedSize(NumberType number, DestinationType&amp; destination, unsigned minimumDigits, HexConversionMode mode = Uppercase)</span>
<span class="udiff-line-removed">- {</span>
<span class="udiff-line-removed">-     // Each byte can generate up to two digits.</span>
<span class="udiff-line-removed">-     std::array&lt;LChar, sizeof(NumberType) * 2&gt; buffer;</span>
<span class="udiff-line-removed">-     auto result = Internal::appendHex(buffer, number, minimumDigits, mode);</span>
<span class="udiff-line-removed">-     destination.append(result.first, result.second);</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- // FIXME: Consider renaming to appendHex.</span>
<span class="udiff-line-removed">- // Same as appendUnsignedAsHex, but zero-padding to get at least the desired number of digits.</span>
<span class="udiff-line-removed">- template&lt;typename NumberType&gt;</span>
<span class="udiff-line-removed">- inline void appendUnsignedAsHexFixedSize(NumberType number, StringBuilder&amp; destination, unsigned minimumDigits, HexConversionMode mode = Uppercase)</span>
<span class="udiff-line-removed">- {</span>
<span class="udiff-line-removed">-     // Each byte can generate up to two digits.</span>
<span class="udiff-line-removed">-     std::array&lt;LChar, sizeof(NumberType) * 2&gt; buffer;</span>
<span class="udiff-line-removed">-     auto result = Internal::appendHex(buffer, number, minimumDigits, mode);</span>
<span class="udiff-line-removed">-     destination.appendCharacters(result.first, result.second);</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-removed">- </span>
  struct HexNumberBuffer {
      WTF_MAKE_STRUCT_FAST_ALLOCATED;
  
<span class="udiff-line-modified-removed">-     std::array&lt;LChar, 16&gt; characters;</span>
<span class="udiff-line-modified-added">+     std::array&lt;LChar, 16&gt; buffer;</span>
      unsigned length;
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     const LChar* characters() const { return &amp;*(buffer.end() - length); }</span>
  };
  
  template&lt;typename NumberType&gt; HexNumberBuffer hex(NumberType number, unsigned minimumDigits = 0, HexConversionMode mode = Uppercase)
  {
      // Each byte can generate up to two digits.
      HexNumberBuffer buffer;
<span class="udiff-line-modified-removed">-     static_assert(sizeof(buffer.characters) &gt;= sizeof(NumberType) * 2, &quot;number too large for hexNumber&quot;);</span>
<span class="udiff-line-modified-removed">-     auto result = Internal::appendHex(buffer.characters, number, minimumDigits, mode);</span>
<span class="udiff-line-modified-added">+     static_assert(sizeof(buffer.buffer) &gt;= sizeof(NumberType) * 2, &quot;number too large for hexNumber&quot;);</span>
<span class="udiff-line-modified-added">+     auto result = Internal::appendHex(buffer.buffer, number, minimumDigits, mode);</span>
      buffer.length = result.second;
      return buffer;
  }
  
  template&lt;typename NumberType&gt; HexNumberBuffer hex(NumberType number, HexConversionMode mode)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -116,17 +81,14 @@</span>
      unsigned length() const { return m_buffer.length; }
      bool is8Bit() const { return true; }
      template&lt;typename CharacterType&gt; void writeTo(CharacterType* destination) const { StringImpl::copyCharacters(destination, characters(), length()); }
  
  private:
<span class="udiff-line-modified-removed">-     const LChar* characters() const { return &amp;*(m_buffer.characters.end() - length()); }</span>
<span class="udiff-line-modified-added">+     const LChar* characters() const { return m_buffer.characters(); }</span>
  
      const HexNumberBuffer&amp; m_buffer;
  };
  
  } // namespace WTF
  
<span class="udiff-line-removed">- using WTF::appendByteAsHex;</span>
<span class="udiff-line-removed">- using WTF::appendUnsignedAsHex;</span>
<span class="udiff-line-removed">- using WTF::appendUnsignedAsHexFixedSize;</span>
  using WTF::hex;
  using WTF::Lowercase;
</pre>
<center><a href="HashTraits.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="JSONValues.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>