<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/ftl/FTLCapabilities.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FTLAbstractHeapRepository.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="FTLCompile.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/ftl/FTLCapabilities.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 46     case JSConstant:
 47     case LazyJSConstant:
 48     case GetLocal:
 49     case SetLocal:
 50     case PutStack:
 51     case KillStack:
 52     case GetStack:
 53     case MovHint:
 54     case ZombieHint:
 55     case ExitOK:
 56     case Phantom:
 57     case Flush:
 58     case PhantomLocal:
 59     case SetArgumentDefinitely:
 60     case SetArgumentMaybe:
 61     case Return:
 62     case ArithBitNot:
 63     case ArithBitAnd:
 64     case ArithBitOr:
 65     case ArithBitXor:
<span class="line-modified"> 66     case BitRShift:</span>
 67     case ArithBitLShift:
 68     case BitURShift:
 69     case CheckStructure:
 70     case CheckStructureOrEmpty:
 71     case DoubleAsInt32:
 72     case Arrayify:
 73     case ArrayifyToStructure:
 74     case PutStructure:
 75     case GetButterfly:
 76     case NewObject:



 77     case NewStringObject:
 78     case NewSymbol:
 79     case NewArray:
 80     case NewArrayWithSpread:

 81     case Spread:
 82     case NewArrayBuffer:
 83     case NewTypedArray:
 84     case GetByOffset:
 85     case GetGetterSetterByOffset:
 86     case GetGetter:
 87     case GetSetter:
 88     case PutByOffset:
 89     case GetGlobalVar:
 90     case GetGlobalLexicalVariable:
 91     case PutGlobalVariable:
 92     case ValueBitAnd:
 93     case ValueBitXor:
 94     case ValueBitOr:
 95     case ValueBitNot:
 96     case ValueBitLShift:

 97     case ValueNegate:
 98     case ValueAdd:
 99     case ValueSub:
100     case ValueMul:
101     case ValueDiv:
102     case ValueMod:
103     case ValuePow:


104     case StrCat:
105     case ArithAdd:
106     case ArithClz32:
107     case ArithSub:
108     case ArithMul:
109     case ArithDiv:
110     case ArithMod:
111     case ArithMin:
112     case ArithMax:
113     case ArithAbs:
114     case ArithPow:
115     case ArithRandom:
116     case ArithRound:
117     case ArithFloor:
118     case ArithCeil:
119     case ArithTrunc:
120     case ArithSqrt:
121     case ArithFRound:
122     case ArithNegate:
123     case ArithUnary:
124     case UInt32ToNumber:
125     case Jump:
126     case ForceOSRExit:
127     case Phi:
128     case Upsilon:
129     case ExtractOSREntryLocal:
130     case ExtractCatchLocal:
131     case ClearCatchLocals:
132     case LoopHint:
133     case SkipScope:
134     case GetGlobalObject:
135     case GetGlobalThis:
136     case CreateActivation:
137     case PushWithScope:
138     case NewFunction:
139     case NewGeneratorFunction:
140     case NewAsyncFunction:
141     case NewAsyncGeneratorFunction:
142     case GetClosureVar:
143     case PutClosureVar:


144     case CreateDirectArguments:
145     case CreateScopedArguments:
146     case CreateClonedArguments:

147     case GetFromArguments:
148     case PutToArguments:
149     case GetArgument:
150     case InvalidationPoint:
151     case StringCharAt:
152     case CheckCell:
153     case CheckBadCell:
154     case CheckNotEmpty:
155     case AssertNotEmpty:
<span class="line-modified">156     case CheckStringIdent:</span>
157     case CheckTraps:
158     case StringCharCodeAt:

159     case StringFromCharCode:
160     case AllocatePropertyStorage:
161     case ReallocatePropertyStorage:
162     case NukeStructureAndSetButterfly:
163     case GetTypedArrayByteOffset:
164     case GetPrototypeOf:
165     case NotifyWrite:
166     case StoreBarrier:
167     case FencedStoreBarrier:
168     case Call:
169     case DirectCall:
170     case TailCall:
171     case DirectTailCall:
172     case TailCallInlinedCaller:
173     case DirectTailCallInlinedCaller:
174     case Construct:
175     case DirectConstruct:
176     case CallVarargs:
177     case CallEval:
178     case TailCallVarargs:
179     case TailCallVarargsInlinedCaller:
180     case ConstructVarargs:
181     case CallForwardVarargs:
182     case TailCallForwardVarargs:
183     case TailCallForwardVarargsInlinedCaller:
184     case ConstructForwardVarargs:

185     case LoadVarargs:
186     case ValueToInt32:
187     case Branch:
188     case LogicalNot:
189     case CheckInBounds:
190     case ConstantStoragePointer:
191     case Check:
192     case CheckVarargs:
193     case CheckArray:


194     case CountExecution:
195     case SuperSamplerBegin:
196     case SuperSamplerEnd:
197     case GetExecutable:
198     case GetScope:
199     case GetCallee:
200     case SetCallee:
201     case GetArgumentCountIncludingThis:
202     case SetArgumentCountIncludingThis:
203     case ToNumber:

204     case ToString:
205     case ToObject:
206     case CallObjectConstructor:
207     case CallStringConstructor:
208     case ObjectCreate:
209     case ObjectKeys:
210     case MakeRope:
211     case NewArrayWithSize:
212     case TryGetById:
213     case GetById:
214     case GetByIdFlush:
215     case GetByIdWithThis:
216     case GetByIdDirect:
217     case GetByIdDirectFlush:
218     case ToThis:
219     case MultiGetByOffset:
220     case MultiPutByOffset:
221     case ToPrimitive:

222     case Throw:
223     case ThrowStaticError:
224     case Unreachable:
225     case InByVal:
226     case InById:
227     case HasOwnProperty:
228     case IsCellWithType:
229     case MapHash:
230     case NormalizeMapKey:
231     case GetMapBucket:
232     case GetMapBucketHead:
233     case GetMapBucketNext:
234     case LoadKeyFromMapBucket:
235     case LoadValueFromMapBucket:
236     case ExtractValueFromWeakMapGet:
237     case SetAdd:
238     case MapSet:
239     case WeakMapGet:
240     case WeakSetAdd:
241     case WeakMapSet:
</pre>
<hr />
<pre>
258     case Int52Rep:
259     case DoubleConstant:
260     case Int52Constant:
261     case BooleanToNumber:
262     case HasGenericProperty:
263     case HasStructureProperty:
264     case HasIndexedProperty:
265     case GetDirectPname:
266     case GetEnumerableLength:
267     case GetIndexedPropertyStorage:
268     case GetPropertyEnumerator:
269     case GetEnumeratorStructurePname:
270     case GetEnumeratorGenericPname:
271     case ToIndexString:
272     case BottomValue:
273     case PhantomNewObject:
274     case PhantomNewFunction:
275     case PhantomNewGeneratorFunction:
276     case PhantomNewAsyncGeneratorFunction:
277     case PhantomNewAsyncFunction:

278     case PhantomCreateActivation:
279     case PhantomNewRegexp:
280     case PutHint:
281     case CheckStructureImmediate:
282     case MaterializeNewObject:
283     case MaterializeCreateActivation:

284     case PhantomDirectArguments:
285     case PhantomCreateRest:
286     case PhantomSpread:
287     case PhantomNewArrayWithSpread:
288     case PhantomNewArrayBuffer:
289     case PhantomClonedArguments:
290     case GetMyArgumentByVal:
291     case GetMyArgumentByValOutOfBounds:
292     case ForwardVarargs:
293     case EntrySwitch:
294     case Switch:
295     case TypeOf:
296     case PutById:
297     case PutByIdDirect:
298     case PutByIdFlush:
299     case PutByIdWithThis:
300     case PutGetterById:
301     case PutSetterById:
302     case PutGetterSetterById:
303     case PutGetterByVal:
</pre>
<hr />
<pre>
354     case AtomicsCompareExchange:
355     case AtomicsExchange:
356     case AtomicsLoad:
357     case AtomicsOr:
358     case AtomicsStore:
359     case AtomicsSub:
360     case AtomicsXor:
361     case AtomicsIsLockFree:
362     case InitializeEntrypointArguments:
363     case CPUIntrinsic:
364     case GetArrayLength:
365     case GetVectorLength:
366     case GetByVal:
367     case GetByValWithThis:
368     case PutByVal:
369     case PutByValAlias:
370     case PutByValDirect:
371     case PutByValWithThis:
372     case MatchStructure:
373     case FilterCallLinkStatus:
<span class="line-modified">374     case FilterGetByIdStatus:</span>
375     case FilterPutByIdStatus:
376     case FilterInByIdStatus:
377     case CreateThis:



378     case DataViewGetInt:
379     case DataViewGetFloat:
380     case DataViewSet:


381         // These are OK.
382         break;
383 
384     case Identity:
385         // No backend handles this because it will be optimized out. But we may check
386         // for capabilities before optimization. It would be a deep error to remove this
387         // case because it would prevent us from catching bugs where the FTL backend
388         // pipeline failed to optimize out an Identity.
389         break;
390 
391     case IdentityWithProfile:
392     case CheckTierUpInLoop:
393     case CheckTierUpAndOSREnter:
394     case CheckTierUpAtReturn:
395     case FiatInt52:
396     case ArithIMul:
397     case ProfileType:
398     case ProfileControlFlow:
399     case LastNodeType:
400         return CannotCompile;
</pre>
<hr />
<pre>
443                 case RealNumberUse:
444                 case DoubleRepUse:
445                 case DoubleRepRealUse:
446                 case BooleanUse:
447                 case KnownBooleanUse:
448                 case CellUse:
449                 case KnownCellUse:
450                 case CellOrOtherUse:
451                 case ObjectUse:
452                 case ArrayUse:
453                 case FunctionUse:
454                 case ObjectOrOtherUse:
455                 case StringUse:
456                 case StringOrOtherUse:
457                 case KnownStringUse:
458                 case KnownPrimitiveUse:
459                 case StringObjectUse:
460                 case StringOrStringObjectUse:
461                 case SymbolUse:
462                 case BigIntUse:

463                 case MapObjectUse:
464                 case SetObjectUse:
465                 case WeakMapObjectUse:
466                 case WeakSetObjectUse:
467                 case DataViewObjectUse:
468                 case FinalObjectUse:

469                 case RegExpObjectUse:
470                 case ProxyObjectUse:
471                 case DerivedArrayUse:
472                 case NotCellUse:
473                 case OtherUse:
474                 case KnownOtherUse:
475                 case MiscUse:
476                 case StringIdentUse:
477                 case NotStringVarUse:
478                 case NotSymbolUse:
479                 case AnyIntUse:
480                 case DoubleRepAnyIntUse:
481                     // These are OK.
482                     break;
483                 default:
484                     // Don&#39;t know how to handle anything else.
485                     if (verboseCapabilities()) {
486                         dataLog(&quot;FTL rejecting node in &quot;, *graph.m_codeBlock, &quot; because of bad use kind: &quot;, edge.useKind(), &quot; in node:\n&quot;);
487                         graph.dump(WTF::dataFile(), &quot;    &quot;, node);
488                     }
</pre>
</td>
<td>
<hr />
<pre>
 46     case JSConstant:
 47     case LazyJSConstant:
 48     case GetLocal:
 49     case SetLocal:
 50     case PutStack:
 51     case KillStack:
 52     case GetStack:
 53     case MovHint:
 54     case ZombieHint:
 55     case ExitOK:
 56     case Phantom:
 57     case Flush:
 58     case PhantomLocal:
 59     case SetArgumentDefinitely:
 60     case SetArgumentMaybe:
 61     case Return:
 62     case ArithBitNot:
 63     case ArithBitAnd:
 64     case ArithBitOr:
 65     case ArithBitXor:
<span class="line-modified"> 66     case ArithBitRShift:</span>
 67     case ArithBitLShift:
 68     case BitURShift:
 69     case CheckStructure:
 70     case CheckStructureOrEmpty:
 71     case DoubleAsInt32:
 72     case Arrayify:
 73     case ArrayifyToStructure:
 74     case PutStructure:
 75     case GetButterfly:
 76     case NewObject:
<span class="line-added"> 77     case NewPromise:</span>
<span class="line-added"> 78     case NewGenerator:</span>
<span class="line-added"> 79     case NewAsyncGenerator:</span>
 80     case NewStringObject:
 81     case NewSymbol:
 82     case NewArray:
 83     case NewArrayWithSpread:
<span class="line-added"> 84     case NewArrayIterator:</span>
 85     case Spread:
 86     case NewArrayBuffer:
 87     case NewTypedArray:
 88     case GetByOffset:
 89     case GetGetterSetterByOffset:
 90     case GetGetter:
 91     case GetSetter:
 92     case PutByOffset:
 93     case GetGlobalVar:
 94     case GetGlobalLexicalVariable:
 95     case PutGlobalVariable:
 96     case ValueBitAnd:
 97     case ValueBitXor:
 98     case ValueBitOr:
 99     case ValueBitNot:
100     case ValueBitLShift:
<span class="line-added">101     case ValueBitRShift:</span>
102     case ValueNegate:
103     case ValueAdd:
104     case ValueSub:
105     case ValueMul:
106     case ValueDiv:
107     case ValueMod:
108     case ValuePow:
<span class="line-added">109     case Inc:</span>
<span class="line-added">110     case Dec:</span>
111     case StrCat:
112     case ArithAdd:
113     case ArithClz32:
114     case ArithSub:
115     case ArithMul:
116     case ArithDiv:
117     case ArithMod:
118     case ArithMin:
119     case ArithMax:
120     case ArithAbs:
121     case ArithPow:
122     case ArithRandom:
123     case ArithRound:
124     case ArithFloor:
125     case ArithCeil:
126     case ArithTrunc:
127     case ArithSqrt:
128     case ArithFRound:
129     case ArithNegate:
130     case ArithUnary:
131     case UInt32ToNumber:
132     case Jump:
133     case ForceOSRExit:
134     case Phi:
135     case Upsilon:
136     case ExtractOSREntryLocal:
137     case ExtractCatchLocal:
138     case ClearCatchLocals:
139     case LoopHint:
140     case SkipScope:
141     case GetGlobalObject:
142     case GetGlobalThis:
143     case CreateActivation:
144     case PushWithScope:
145     case NewFunction:
146     case NewGeneratorFunction:
147     case NewAsyncFunction:
148     case NewAsyncGeneratorFunction:
149     case GetClosureVar:
150     case PutClosureVar:
<span class="line-added">151     case GetInternalField:</span>
<span class="line-added">152     case PutInternalField:</span>
153     case CreateDirectArguments:
154     case CreateScopedArguments:
155     case CreateClonedArguments:
<span class="line-added">156     case CreateArgumentsButterfly:</span>
157     case GetFromArguments:
158     case PutToArguments:
159     case GetArgument:
160     case InvalidationPoint:
161     case StringCharAt:
162     case CheckCell:
163     case CheckBadCell:
164     case CheckNotEmpty:
165     case AssertNotEmpty:
<span class="line-modified">166     case CheckIdent:</span>
167     case CheckTraps:
168     case StringCharCodeAt:
<span class="line-added">169     case StringCodePointAt:</span>
170     case StringFromCharCode:
171     case AllocatePropertyStorage:
172     case ReallocatePropertyStorage:
173     case NukeStructureAndSetButterfly:
174     case GetTypedArrayByteOffset:
175     case GetPrototypeOf:
176     case NotifyWrite:
177     case StoreBarrier:
178     case FencedStoreBarrier:
179     case Call:
180     case DirectCall:
181     case TailCall:
182     case DirectTailCall:
183     case TailCallInlinedCaller:
184     case DirectTailCallInlinedCaller:
185     case Construct:
186     case DirectConstruct:
187     case CallVarargs:
188     case CallEval:
189     case TailCallVarargs:
190     case TailCallVarargsInlinedCaller:
191     case ConstructVarargs:
192     case CallForwardVarargs:
193     case TailCallForwardVarargs:
194     case TailCallForwardVarargsInlinedCaller:
195     case ConstructForwardVarargs:
<span class="line-added">196     case VarargsLength:</span>
197     case LoadVarargs:
198     case ValueToInt32:
199     case Branch:
200     case LogicalNot:
201     case CheckInBounds:
202     case ConstantStoragePointer:
203     case Check:
204     case CheckVarargs:
205     case CheckArray:
<span class="line-added">206     case CheckArrayOrEmpty:</span>
<span class="line-added">207     case CheckNeutered:</span>
208     case CountExecution:
209     case SuperSamplerBegin:
210     case SuperSamplerEnd:
211     case GetExecutable:
212     case GetScope:
213     case GetCallee:
214     case SetCallee:
215     case GetArgumentCountIncludingThis:
216     case SetArgumentCountIncludingThis:
217     case ToNumber:
<span class="line-added">218     case ToNumeric:</span>
219     case ToString:
220     case ToObject:
221     case CallObjectConstructor:
222     case CallStringConstructor:
223     case ObjectCreate:
224     case ObjectKeys:
225     case MakeRope:
226     case NewArrayWithSize:
227     case TryGetById:
228     case GetById:
229     case GetByIdFlush:
230     case GetByIdWithThis:
231     case GetByIdDirect:
232     case GetByIdDirectFlush:
233     case ToThis:
234     case MultiGetByOffset:
235     case MultiPutByOffset:
236     case ToPrimitive:
<span class="line-added">237     case ToPropertyKey:</span>
238     case Throw:
239     case ThrowStaticError:
240     case Unreachable:
241     case InByVal:
242     case InById:
243     case HasOwnProperty:
244     case IsCellWithType:
245     case MapHash:
246     case NormalizeMapKey:
247     case GetMapBucket:
248     case GetMapBucketHead:
249     case GetMapBucketNext:
250     case LoadKeyFromMapBucket:
251     case LoadValueFromMapBucket:
252     case ExtractValueFromWeakMapGet:
253     case SetAdd:
254     case MapSet:
255     case WeakMapGet:
256     case WeakSetAdd:
257     case WeakMapSet:
</pre>
<hr />
<pre>
274     case Int52Rep:
275     case DoubleConstant:
276     case Int52Constant:
277     case BooleanToNumber:
278     case HasGenericProperty:
279     case HasStructureProperty:
280     case HasIndexedProperty:
281     case GetDirectPname:
282     case GetEnumerableLength:
283     case GetIndexedPropertyStorage:
284     case GetPropertyEnumerator:
285     case GetEnumeratorStructurePname:
286     case GetEnumeratorGenericPname:
287     case ToIndexString:
288     case BottomValue:
289     case PhantomNewObject:
290     case PhantomNewFunction:
291     case PhantomNewGeneratorFunction:
292     case PhantomNewAsyncGeneratorFunction:
293     case PhantomNewAsyncFunction:
<span class="line-added">294     case PhantomNewArrayIterator:</span>
295     case PhantomCreateActivation:
296     case PhantomNewRegexp:
297     case PutHint:
298     case CheckStructureImmediate:
299     case MaterializeNewObject:
300     case MaterializeCreateActivation:
<span class="line-added">301     case MaterializeNewInternalFieldObject:</span>
302     case PhantomDirectArguments:
303     case PhantomCreateRest:
304     case PhantomSpread:
305     case PhantomNewArrayWithSpread:
306     case PhantomNewArrayBuffer:
307     case PhantomClonedArguments:
308     case GetMyArgumentByVal:
309     case GetMyArgumentByValOutOfBounds:
310     case ForwardVarargs:
311     case EntrySwitch:
312     case Switch:
313     case TypeOf:
314     case PutById:
315     case PutByIdDirect:
316     case PutByIdFlush:
317     case PutByIdWithThis:
318     case PutGetterById:
319     case PutSetterById:
320     case PutGetterSetterById:
321     case PutGetterByVal:
</pre>
<hr />
<pre>
372     case AtomicsCompareExchange:
373     case AtomicsExchange:
374     case AtomicsLoad:
375     case AtomicsOr:
376     case AtomicsStore:
377     case AtomicsSub:
378     case AtomicsXor:
379     case AtomicsIsLockFree:
380     case InitializeEntrypointArguments:
381     case CPUIntrinsic:
382     case GetArrayLength:
383     case GetVectorLength:
384     case GetByVal:
385     case GetByValWithThis:
386     case PutByVal:
387     case PutByValAlias:
388     case PutByValDirect:
389     case PutByValWithThis:
390     case MatchStructure:
391     case FilterCallLinkStatus:
<span class="line-modified">392     case FilterGetByStatus:</span>
393     case FilterPutByIdStatus:
394     case FilterInByIdStatus:
395     case CreateThis:
<span class="line-added">396     case CreatePromise:</span>
<span class="line-added">397     case CreateGenerator:</span>
<span class="line-added">398     case CreateAsyncGenerator:</span>
399     case DataViewGetInt:
400     case DataViewGetFloat:
401     case DataViewSet:
<span class="line-added">402     case DateGetInt32OrNaN:</span>
<span class="line-added">403     case DateGetTime:</span>
404         // These are OK.
405         break;
406 
407     case Identity:
408         // No backend handles this because it will be optimized out. But we may check
409         // for capabilities before optimization. It would be a deep error to remove this
410         // case because it would prevent us from catching bugs where the FTL backend
411         // pipeline failed to optimize out an Identity.
412         break;
413 
414     case IdentityWithProfile:
415     case CheckTierUpInLoop:
416     case CheckTierUpAndOSREnter:
417     case CheckTierUpAtReturn:
418     case FiatInt52:
419     case ArithIMul:
420     case ProfileType:
421     case ProfileControlFlow:
422     case LastNodeType:
423         return CannotCompile;
</pre>
<hr />
<pre>
466                 case RealNumberUse:
467                 case DoubleRepUse:
468                 case DoubleRepRealUse:
469                 case BooleanUse:
470                 case KnownBooleanUse:
471                 case CellUse:
472                 case KnownCellUse:
473                 case CellOrOtherUse:
474                 case ObjectUse:
475                 case ArrayUse:
476                 case FunctionUse:
477                 case ObjectOrOtherUse:
478                 case StringUse:
479                 case StringOrOtherUse:
480                 case KnownStringUse:
481                 case KnownPrimitiveUse:
482                 case StringObjectUse:
483                 case StringOrStringObjectUse:
484                 case SymbolUse:
485                 case BigIntUse:
<span class="line-added">486                 case DateObjectUse:</span>
487                 case MapObjectUse:
488                 case SetObjectUse:
489                 case WeakMapObjectUse:
490                 case WeakSetObjectUse:
491                 case DataViewObjectUse:
492                 case FinalObjectUse:
<span class="line-added">493                 case PromiseObjectUse:</span>
494                 case RegExpObjectUse:
495                 case ProxyObjectUse:
496                 case DerivedArrayUse:
497                 case NotCellUse:
498                 case OtherUse:
499                 case KnownOtherUse:
500                 case MiscUse:
501                 case StringIdentUse:
502                 case NotStringVarUse:
503                 case NotSymbolUse:
504                 case AnyIntUse:
505                 case DoubleRepAnyIntUse:
506                     // These are OK.
507                     break;
508                 default:
509                     // Don&#39;t know how to handle anything else.
510                     if (verboseCapabilities()) {
511                         dataLog(&quot;FTL rejecting node in &quot;, *graph.m_codeBlock, &quot; because of bad use kind: &quot;, edge.useKind(), &quot; in node:\n&quot;);
512                         graph.dump(WTF::dataFile(), &quot;    &quot;, node);
513                     }
</pre>
</td>
</tr>
</table>
<center><a href="FTLAbstractHeapRepository.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="FTLCompile.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>