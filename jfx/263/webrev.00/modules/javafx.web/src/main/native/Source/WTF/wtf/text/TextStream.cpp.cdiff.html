<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WTF/wtf/text/TextStream.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="TextBreakIterator.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="TextStream.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WTF/wtf/text/TextStream.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (C) 2004, 2008, 2010 Apple Inc. All rights reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   * 1. Redistributions of source code must retain the above copyright
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (C) 2004-2019 Apple Inc. All rights reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   * 1. Redistributions of source code must retain the above copyright
</pre>
<hr />
<pre>
<span class="line-old-header">*** 29,25 ***</span>
  #include &lt;wtf/MathExtras.h&gt;
  #include &lt;wtf/text/WTFString.h&gt;
  
  namespace WTF {
  
<span class="line-modified">! static const size_t printBufferSize = 100; // large enough for any integer or floating point value in string format, including trailing null character</span>
  
  static inline bool hasFractions(double val)
  {
<span class="line-modified">!     static const double s_epsilon = 0.0001;</span>
      int ival = static_cast&lt;int&gt;(val);
      double dval = static_cast&lt;double&gt;(ival);
      return fabs(val - dval) &gt; s_epsilon;
  }
  
  TextStream&amp; TextStream::operator&lt;&lt;(bool b)
  {
      return *this &lt;&lt; (b ? &quot;1&quot; : &quot;0&quot;);
  }
  
  TextStream&amp; TextStream::operator&lt;&lt;(int i)
  {
      m_text.appendNumber(i);
      return *this;
  }
<span class="line-new-header">--- 29,31 ---</span>
  #include &lt;wtf/MathExtras.h&gt;
  #include &lt;wtf/text/WTFString.h&gt;
  
  namespace WTF {
  
<span class="line-modified">! static constexpr size_t printBufferSize = 100; // large enough for any integer or floating point value in string format, including trailing null character</span>
  
  static inline bool hasFractions(double val)
  {
<span class="line-modified">!     static constexpr double s_epsilon = 0.0001;</span>
      int ival = static_cast&lt;int&gt;(val);
      double dval = static_cast&lt;double&gt;(ival);
      return fabs(val - dval) &gt; s_epsilon;
  }
  
  TextStream&amp; TextStream::operator&lt;&lt;(bool b)
  {
      return *this &lt;&lt; (b ? &quot;1&quot; : &quot;0&quot;);
  }
  
<span class="line-added">+ TextStream&amp; TextStream::operator&lt;&lt;(char c)</span>
<span class="line-added">+ {</span>
<span class="line-added">+     m_text.append(c);</span>
<span class="line-added">+     return *this;</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
  TextStream&amp; TextStream::operator&lt;&lt;(int i)
  {
      m_text.appendNumber(i);
      return *this;
  }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 85,20 ***</span>
  TextStream&amp; TextStream::operator&lt;&lt;(float f)
  {
      if (m_formattingFlags &amp; Formatting::NumberRespectingIntegers)
          return *this &lt;&lt; FormatNumberRespectingIntegers(f);
  
<span class="line-modified">!     m_text.appendFixedWidthNumber(f, 2);</span>
      return *this;
  }
  
  TextStream&amp; TextStream::operator&lt;&lt;(double d)
  {
      if (m_formattingFlags &amp; Formatting::NumberRespectingIntegers)
          return *this &lt;&lt; FormatNumberRespectingIntegers(d);
  
<span class="line-modified">!     m_text.appendFixedWidthNumber(d, 2);</span>
      return *this;
  }
  
  TextStream&amp; TextStream::operator&lt;&lt;(const char* string)
  {
<span class="line-new-header">--- 91,20 ---</span>
  TextStream&amp; TextStream::operator&lt;&lt;(float f)
  {
      if (m_formattingFlags &amp; Formatting::NumberRespectingIntegers)
          return *this &lt;&lt; FormatNumberRespectingIntegers(f);
  
<span class="line-modified">!     m_text.append(FormattedNumber::fixedWidth(f, 2));</span>
      return *this;
  }
  
  TextStream&amp; TextStream::operator&lt;&lt;(double d)
  {
      if (m_formattingFlags &amp; Formatting::NumberRespectingIntegers)
          return *this &lt;&lt; FormatNumberRespectingIntegers(d);
  
<span class="line-modified">!     m_text.append(FormattedNumber::fixedWidth(d, 2));</span>
      return *this;
  }
  
  TextStream&amp; TextStream::operator&lt;&lt;(const char* string)
  {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 120,11 ***</span>
  }
  
  TextStream&amp; TextStream::operator&lt;&lt;(const FormatNumberRespectingIntegers&amp; numberToFormat)
  {
      if (hasFractions(numberToFormat.value)) {
<span class="line-modified">!         m_text.appendFixedWidthNumber(numberToFormat.value, 2);</span>
          return *this;
      }
  
      m_text.appendNumber(static_cast&lt;int&gt;(numberToFormat.value));
      return *this;
<span class="line-new-header">--- 126,11 ---</span>
  }
  
  TextStream&amp; TextStream::operator&lt;&lt;(const FormatNumberRespectingIntegers&amp; numberToFormat)
  {
      if (hasFractions(numberToFormat.value)) {
<span class="line-modified">!         m_text.append(FormattedNumber::fixedWidth(numberToFormat.value, 2));</span>
          return *this;
      }
  
      m_text.appendNumber(static_cast&lt;int&gt;(numberToFormat.value));
      return *this;
</pre>
<center><a href="TextBreakIterator.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="TextStream.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>