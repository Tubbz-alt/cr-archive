<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/ConsoleObject.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ConsoleClient.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ConstructAbility.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/ConsoleObject.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 32,50 ***</span>
  #include &quot;ScriptArguments.h&quot;
  #include &quot;ScriptCallStackFactory.h&quot;
  
  namespace JSC {
  
<span class="line-modified">! static String valueOrDefaultLabelString(ExecState* exec)</span>
  {
<span class="line-modified">!     if (exec-&gt;argumentCount() &lt; 1)</span>
          return &quot;default&quot;_s;
  
<span class="line-modified">!     auto value = exec-&gt;argument(0);</span>
      if (value.isUndefined())
          return &quot;default&quot;_s;
  
<span class="line-modified">!     return value.toWTFString(exec);</span>
  }
  
  STATIC_ASSERT_IS_TRIVIALLY_DESTRUCTIBLE(ConsoleObject);
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncDebug(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncError(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncLog(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncInfo(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncWarn(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncClear(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncDir(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncDirXML(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTable(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTrace(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncAssert(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncCount(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncCountReset(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncProfile(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncProfileEnd(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTakeHeapSnapshot(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTime(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTimeLog(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTimeEnd(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTimeStamp(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncGroup(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncGroupCollapsed(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncGroupEnd(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncRecord(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncRecordEnd(ExecState*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncScreenshot(ExecState*);</span>
  
  const ClassInfo ConsoleObject::s_info = { &quot;Console&quot;, &amp;Base::s_info, nullptr, nullptr, CREATE_METHOD_TABLE(ConsoleObject) };
  
  ConsoleObject::ConsoleObject(VM&amp; vm, Structure* structure)
      : JSNonFinalObject(vm, structure)
<span class="line-new-header">--- 32,50 ---</span>
  #include &quot;ScriptArguments.h&quot;
  #include &quot;ScriptCallStackFactory.h&quot;
  
  namespace JSC {
  
<span class="line-modified">! static String valueOrDefaultLabelString(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     if (callFrame-&gt;argumentCount() &lt; 1)</span>
          return &quot;default&quot;_s;
  
<span class="line-modified">!     auto value = callFrame-&gt;argument(0);</span>
      if (value.isUndefined())
          return &quot;default&quot;_s;
  
<span class="line-modified">!     return value.toWTFString(globalObject);</span>
  }
  
  STATIC_ASSERT_IS_TRIVIALLY_DESTRUCTIBLE(ConsoleObject);
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncDebug(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncError(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncLog(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncInfo(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncWarn(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncClear(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncDir(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncDirXML(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTable(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTrace(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncAssert(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncCount(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncCountReset(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncProfile(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncProfileEnd(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTakeHeapSnapshot(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTime(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTimeLog(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTimeEnd(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTimeStamp(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncGroup(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncGroupCollapsed(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncGroupEnd(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncRecord(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncRecordEnd(JSGlobalObject*, CallFrame*);</span>
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncScreenshot(JSGlobalObject*, CallFrame*);</span>
  
  const ClassInfo ConsoleObject::s_info = { &quot;Console&quot;, &amp;Base::s_info, nullptr, nullptr, CREATE_METHOD_TABLE(ConsoleObject) };
  
  ConsoleObject::ConsoleObject(VM&amp; vm, Structure* structure)
      : JSNonFinalObject(vm, structure)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 117,319 ***</span>
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;record&quot;, consoleProtoFuncRecord, static_cast&lt;unsigned&gt;(PropertyAttribute::None), 0);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;recordEnd&quot;, consoleProtoFuncRecordEnd, static_cast&lt;unsigned&gt;(PropertyAttribute::None), 0);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;screenshot&quot;, consoleProtoFuncScreenshot, static_cast&lt;unsigned&gt;(PropertyAttribute::None), 0);
  }
  
<span class="line-modified">! static String valueToStringWithUndefinedOrNullCheck(ExecState* exec, JSValue value)</span>
  {
      if (value.isUndefinedOrNull())
          return String();
<span class="line-modified">!     return value.toWTFString(exec);</span>
  }
  
<span class="line-modified">! static EncodedJSValue consoleLogWithLevel(ExecState* exec, MessageLevel level)</span>
  {
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;logWithLevel(exec, Inspector::createScriptArguments(exec, 0), level);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncDebug(ExecState* exec)</span>
  {
<span class="line-modified">!     return consoleLogWithLevel(exec, MessageLevel::Debug);</span>
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncError(ExecState* exec)</span>
  {
<span class="line-modified">!     return consoleLogWithLevel(exec, MessageLevel::Error);</span>
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncLog(ExecState* exec)</span>
  {
<span class="line-modified">!     return consoleLogWithLevel(exec, MessageLevel::Log);</span>
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncInfo(ExecState* exec)</span>
  {
<span class="line-modified">!     return consoleLogWithLevel(exec, MessageLevel::Info);</span>
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncWarn(ExecState* exec)</span>
  {
<span class="line-modified">!     return consoleLogWithLevel(exec, MessageLevel::Warning);</span>
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncClear(ExecState* exec)</span>
  {
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;clear(exec);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncDir(ExecState* exec)</span>
  {
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;dir(exec, Inspector::createScriptArguments(exec, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncDirXML(ExecState* exec)</span>
  {
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;dirXML(exec, Inspector::createScriptArguments(exec, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTable(ExecState* exec)</span>
  {
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;table(exec, Inspector::createScriptArguments(exec, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTrace(ExecState* exec)</span>
  {
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;trace(exec, Inspector::createScriptArguments(exec, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncAssert(ExecState* exec)</span>
  {
<span class="line-modified">!     VM&amp; vm = exec-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     bool condition = exec-&gt;argument(0).toBoolean(exec);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
      if (condition)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;assertion(exec, Inspector::createScriptArguments(exec, 1));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncCount(ExecState* exec)</span>
  {
<span class="line-modified">!     auto scope = DECLARE_THROW_SCOPE(exec-&gt;vm());</span>
<span class="line-modified">!     auto* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     auto label = valueOrDefaultLabelString(exec);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;count(exec, label);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncCountReset(ExecState* exec)</span>
  {
<span class="line-modified">!     auto scope = DECLARE_THROW_SCOPE(exec-&gt;vm());</span>
<span class="line-modified">!     auto* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     auto label = valueOrDefaultLabelString(exec);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;countReset(exec, label);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncProfile(ExecState* exec)</span>
  {
<span class="line-modified">!     VM&amp; vm = exec-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     size_t argsCount = exec-&gt;argumentCount();</span>
      if (!argsCount) {
<span class="line-modified">!         client-&gt;profile(exec, String());</span>
          return JSValue::encode(jsUndefined());
      }
  
<span class="line-modified">!     const String&amp; title(valueToStringWithUndefinedOrNullCheck(exec, exec-&gt;argument(0)));</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;profile(exec, title);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncProfileEnd(ExecState* exec)</span>
  {
<span class="line-modified">!     VM&amp; vm = exec-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     size_t argsCount = exec-&gt;argumentCount();</span>
      if (!argsCount) {
<span class="line-modified">!         client-&gt;profileEnd(exec, String());</span>
          return JSValue::encode(jsUndefined());
      }
  
<span class="line-modified">!     const String&amp; title(valueToStringWithUndefinedOrNullCheck(exec, exec-&gt;argument(0)));</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;profileEnd(exec, title);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTakeHeapSnapshot(ExecState* exec)</span>
  {
<span class="line-modified">!     VM&amp; vm = exec-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     size_t argsCount = exec-&gt;argumentCount();</span>
      if (!argsCount) {
<span class="line-modified">!         client-&gt;takeHeapSnapshot(exec, String());</span>
          return JSValue::encode(jsUndefined());
      }
  
<span class="line-modified">!     const String&amp; title(valueToStringWithUndefinedOrNullCheck(exec, exec-&gt;argument(0)));</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;takeHeapSnapshot(exec, title);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTime(ExecState* exec)</span>
  {
<span class="line-modified">!     auto scope = DECLARE_THROW_SCOPE(exec-&gt;vm());</span>
<span class="line-modified">!     auto* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     auto label = valueOrDefaultLabelString(exec);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;time(exec, label);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTimeLog(ExecState* exec)</span>
  {
<span class="line-modified">!     auto scope = DECLARE_THROW_SCOPE(exec-&gt;vm());</span>
<span class="line-modified">!     auto* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     auto label = valueOrDefaultLabelString(exec);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;timeLog(exec, label, Inspector::createScriptArguments(exec, 1));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTimeEnd(ExecState* exec)</span>
  {
<span class="line-modified">!     auto scope = DECLARE_THROW_SCOPE(exec-&gt;vm());</span>
<span class="line-modified">!     auto* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     auto label = valueOrDefaultLabelString(exec);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;timeEnd(exec, label);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTimeStamp(ExecState* exec)</span>
  {
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;timeStamp(exec, Inspector::createScriptArguments(exec, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncGroup(ExecState* exec)</span>
  {
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;group(exec, Inspector::createScriptArguments(exec, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncGroupCollapsed(ExecState* exec)</span>
  {
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;groupCollapsed(exec, Inspector::createScriptArguments(exec, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncGroupEnd(ExecState* exec)</span>
  {
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;groupEnd(exec, Inspector::createScriptArguments(exec, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncRecord(ExecState* exec)</span>
  {
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;record(exec, Inspector::createScriptArguments(exec, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncRecordEnd(ExecState* exec)</span>
  {
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;recordEnd(exec, Inspector::createScriptArguments(exec, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncScreenshot(ExecState* exec)</span>
  {
<span class="line-modified">!     ConsoleClient* client = exec-&gt;lexicalGlobalObject()-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;screenshot(exec, Inspector::createScriptArguments(exec, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
  } // namespace JSC
<span class="line-new-header">--- 117,319 ---</span>
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;record&quot;, consoleProtoFuncRecord, static_cast&lt;unsigned&gt;(PropertyAttribute::None), 0);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;recordEnd&quot;, consoleProtoFuncRecordEnd, static_cast&lt;unsigned&gt;(PropertyAttribute::None), 0);
      JSC_NATIVE_FUNCTION_WITHOUT_TRANSITION(&quot;screenshot&quot;, consoleProtoFuncScreenshot, static_cast&lt;unsigned&gt;(PropertyAttribute::None), 0);
  }
  
<span class="line-modified">! static String valueToStringWithUndefinedOrNullCheck(JSGlobalObject* globalObject, JSValue value)</span>
  {
      if (value.isUndefinedOrNull())
          return String();
<span class="line-modified">!     return value.toWTFString(globalObject);</span>
  }
  
<span class="line-modified">! static EncodedJSValue consoleLogWithLevel(JSGlobalObject* globalObject, CallFrame* callFrame, MessageLevel level)</span>
  {
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;logWithLevel(globalObject, Inspector::createScriptArguments(globalObject, callFrame, 0), level);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncDebug(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     return consoleLogWithLevel(globalObject, callFrame, MessageLevel::Debug);</span>
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncError(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     return consoleLogWithLevel(globalObject, callFrame, MessageLevel::Error);</span>
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncLog(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     return consoleLogWithLevel(globalObject, callFrame, MessageLevel::Log);</span>
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncInfo(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     return consoleLogWithLevel(globalObject, callFrame, MessageLevel::Info);</span>
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncWarn(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     return consoleLogWithLevel(globalObject, callFrame, MessageLevel::Warning);</span>
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncClear(JSGlobalObject* globalObject, CallFrame*)</span>
  {
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;clear(globalObject);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncDir(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;dir(globalObject, Inspector::createScriptArguments(globalObject, callFrame, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncDirXML(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;dirXML(globalObject, Inspector::createScriptArguments(globalObject, callFrame, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTable(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;table(globalObject, Inspector::createScriptArguments(globalObject, callFrame, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTrace(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;trace(globalObject, Inspector::createScriptArguments(globalObject, callFrame, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncAssert(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     VM&amp; vm = globalObject-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     bool condition = callFrame-&gt;argument(0).toBoolean(globalObject);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
      if (condition)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;assertion(globalObject, Inspector::createScriptArguments(globalObject, callFrame, 1));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncCount(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     auto scope = DECLARE_THROW_SCOPE(globalObject-&gt;vm());</span>
<span class="line-modified">!     auto* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     auto label = valueOrDefaultLabelString(globalObject, callFrame);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;count(globalObject, label);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncCountReset(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     auto scope = DECLARE_THROW_SCOPE(globalObject-&gt;vm());</span>
<span class="line-modified">!     auto* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     auto label = valueOrDefaultLabelString(globalObject, callFrame);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;countReset(globalObject, label);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncProfile(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     VM&amp; vm = globalObject-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     size_t argsCount = callFrame-&gt;argumentCount();</span>
      if (!argsCount) {
<span class="line-modified">!         client-&gt;profile(globalObject, String());</span>
          return JSValue::encode(jsUndefined());
      }
  
<span class="line-modified">!     const String&amp; title(valueToStringWithUndefinedOrNullCheck(globalObject, callFrame-&gt;argument(0)));</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;profile(globalObject, title);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncProfileEnd(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     VM&amp; vm = globalObject-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     size_t argsCount = callFrame-&gt;argumentCount();</span>
      if (!argsCount) {
<span class="line-modified">!         client-&gt;profileEnd(globalObject, String());</span>
          return JSValue::encode(jsUndefined());
      }
  
<span class="line-modified">!     const String&amp; title(valueToStringWithUndefinedOrNullCheck(globalObject, callFrame-&gt;argument(0)));</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;profileEnd(globalObject, title);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTakeHeapSnapshot(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     VM&amp; vm = globalObject-&gt;vm();</span>
      auto scope = DECLARE_THROW_SCOPE(vm);
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     size_t argsCount = callFrame-&gt;argumentCount();</span>
      if (!argsCount) {
<span class="line-modified">!         client-&gt;takeHeapSnapshot(globalObject, String());</span>
          return JSValue::encode(jsUndefined());
      }
  
<span class="line-modified">!     const String&amp; title(valueToStringWithUndefinedOrNullCheck(globalObject, callFrame-&gt;argument(0)));</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;takeHeapSnapshot(globalObject, title);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTime(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     auto scope = DECLARE_THROW_SCOPE(globalObject-&gt;vm());</span>
<span class="line-modified">!     auto* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     auto label = valueOrDefaultLabelString(globalObject, callFrame);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;time(globalObject, label);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTimeLog(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     auto scope = DECLARE_THROW_SCOPE(globalObject-&gt;vm());</span>
<span class="line-modified">!     auto* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     auto label = valueOrDefaultLabelString(globalObject, callFrame);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;timeLog(globalObject, label, Inspector::createScriptArguments(globalObject, callFrame, 1));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTimeEnd(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     auto scope = DECLARE_THROW_SCOPE(globalObject-&gt;vm());</span>
<span class="line-modified">!     auto* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     auto label = valueOrDefaultLabelString(globalObject, callFrame);</span>
      RETURN_IF_EXCEPTION(scope, encodedJSValue());
  
<span class="line-modified">!     client-&gt;timeEnd(globalObject, label);</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncTimeStamp(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;timeStamp(globalObject, Inspector::createScriptArguments(globalObject, callFrame, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncGroup(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;group(globalObject, Inspector::createScriptArguments(globalObject, callFrame, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncGroupCollapsed(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;groupCollapsed(globalObject, Inspector::createScriptArguments(globalObject, callFrame, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncGroupEnd(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;groupEnd(globalObject, Inspector::createScriptArguments(globalObject, callFrame, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncRecord(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;record(globalObject, Inspector::createScriptArguments(globalObject, callFrame, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncRecordEnd(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;recordEnd(globalObject, Inspector::createScriptArguments(globalObject, callFrame, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
<span class="line-modified">! static EncodedJSValue JSC_HOST_CALL consoleProtoFuncScreenshot(JSGlobalObject* globalObject, CallFrame* callFrame)</span>
  {
<span class="line-modified">!     ConsoleClient* client = globalObject-&gt;consoleClient();</span>
      if (!client)
          return JSValue::encode(jsUndefined());
  
<span class="line-modified">!     client-&gt;screenshot(globalObject, Inspector::createScriptArguments(globalObject, callFrame, 0));</span>
      return JSValue::encode(jsUndefined());
  }
  
  } // namespace JSC
</pre>
<center><a href="ConsoleClient.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ConstructAbility.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>