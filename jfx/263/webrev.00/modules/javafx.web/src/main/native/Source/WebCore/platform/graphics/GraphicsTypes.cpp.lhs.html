<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/GraphicsTypes.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (C) 2006 Apple Inc.  All rights reserved.
  3  * Copyright (C) 2012 Rik Cabanier (cabanier@adobe.com)
  4  * Copyright (C) 2014 Adobe Systems Incorporated. All rights reserved.
  5  *
  6  * Redistribution and use in source and binary forms, with or without
  7  * modification, are permitted provided that the following conditions
  8  * are met:
  9  * 1. Redistributions of source code must retain the above copyright
 10  *    notice, this list of conditions and the following disclaimer.
 11  * 2. Redistributions in binary form must reproduce the above copyright
 12  *    notice, this list of conditions and the following disclaimer in the
 13  *    documentation and/or other materials provided with the distribution.
 14  *
 15  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 16  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 17  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 18  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 19  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 20  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 21  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 22  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 23  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 24  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 25  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 26  */
 27 
 28 #include &quot;config.h&quot;
 29 #include &quot;GraphicsTypes.h&quot;
 30 
<a name="1" id="anc1"></a>
 31 #include &lt;wtf/Assertions.h&gt;
 32 #include &lt;wtf/text/TextStream.h&gt;
 33 #include &lt;wtf/text/WTFString.h&gt;
 34 
 35 namespace WebCore {
 36 
 37 static const char* const compositeOperatorNames[] = {
 38     &quot;clear&quot;,
 39     &quot;copy&quot;,
 40     &quot;source-over&quot;,
 41     &quot;source-in&quot;,
 42     &quot;source-out&quot;,
 43     &quot;source-atop&quot;,
 44     &quot;destination-over&quot;,
 45     &quot;destination-in&quot;,
 46     &quot;destination-out&quot;,
 47     &quot;destination-atop&quot;,
 48     &quot;xor&quot;,
 49     &quot;darker&quot;,
 50     &quot;lighter&quot;,
 51     &quot;difference&quot;
 52 };
 53 
 54 static const char* const blendOperatorNames[] = {
 55     &quot;normal&quot;,
 56     &quot;multiply&quot;,
 57     &quot;screen&quot;,
 58     &quot;darken&quot;,
 59     &quot;lighten&quot;,
 60     &quot;overlay&quot;,
 61     &quot;color-dodge&quot;,
 62     &quot;color-burn&quot;,
 63     &quot;hard-light&quot;,
 64     &quot;soft-light&quot;,
 65     &quot;difference&quot;,
 66     &quot;exclusion&quot;,
 67     &quot;hue&quot;,
 68     &quot;saturation&quot;,
 69     &quot;color&quot;,
 70     &quot;luminosity&quot;,
 71     &quot;plus-darker&quot;,
 72     &quot;plus-lighter&quot;
 73 };
<a name="2" id="anc2"></a><span class="line-modified"> 74 const int numCompositeOperatorNames = WTF_ARRAY_LENGTH(compositeOperatorNames);</span>
<span class="line-modified"> 75 const unsigned numBlendOperatorNames = WTF_ARRAY_LENGTH(blendOperatorNames);</span>
 76 
 77 bool parseBlendMode(const String&amp; s, BlendMode&amp; blendMode)
 78 {
 79     for (unsigned i = 0; i &lt; numBlendOperatorNames; i++) {
 80         if (s == blendOperatorNames[i]) {
 81             blendMode = static_cast&lt;BlendMode&gt;(i + static_cast&lt;unsigned&gt;(BlendMode::Normal));
 82             return true;
 83         }
 84     }
 85 
 86     return false;
 87 }
 88 
 89 bool parseCompositeAndBlendOperator(const String&amp; s, CompositeOperator&amp; op, BlendMode&amp; blendOp)
 90 {
 91     for (int i = 0; i &lt; numCompositeOperatorNames; i++) {
 92         if (s == compositeOperatorNames[i]) {
 93             op = static_cast&lt;CompositeOperator&gt;(i);
 94             blendOp = BlendMode::Normal;
 95             return true;
 96         }
 97     }
 98 
 99     if (parseBlendMode(s, blendOp)) {
100         // For now, blending will always assume source-over. This will be fixed in the future
<a name="3" id="anc3"></a><span class="line-modified">101         op = CompositeSourceOver;</span>
102         return true;
103     }
104 
105     return false;
106 }
107 
108 // FIXME: when we support blend modes in combination with compositing other than source-over
109 // this routine needs to be updated.
110 String compositeOperatorName(CompositeOperator op, BlendMode blendOp)
111 {
<a name="4" id="anc4"></a><span class="line-modified">112     ASSERT(op &gt;= 0);</span>
<span class="line-modified">113     ASSERT(op &lt; numCompositeOperatorNames);</span>
114     ASSERT(blendOp &gt;= BlendMode::Normal);
<a name="5" id="anc5"></a><span class="line-modified">115     ASSERT(static_cast&lt;unsigned&gt;(blendOp) &lt;= numBlendOperatorNames);</span>
116     if (blendOp &gt; BlendMode::Normal)
117         return blendOperatorNames[static_cast&lt;unsigned&gt;(blendOp) - static_cast&lt;unsigned&gt;(BlendMode::Normal)];
<a name="6" id="anc6"></a><span class="line-modified">118     return compositeOperatorNames[op];</span>
119 }
120 
121 String blendModeName(BlendMode blendOp)
122 {
123     ASSERT(blendOp &gt;= BlendMode::Normal);
124     ASSERT(blendOp &lt;= BlendMode::PlusLighter);
125     return blendOperatorNames[static_cast&lt;unsigned&gt;(blendOp) - static_cast&lt;unsigned&gt;(BlendMode::Normal)];
126 }
127 
128 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, CompositeOperator op)
129 {
130     return ts &lt;&lt; compositeOperatorName(op, BlendMode::Normal);
131 }
132 
133 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, BlendMode blendMode)
134 {
135     return ts &lt;&lt; blendModeName(blendMode);
136 }
137 
138 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, WindRule rule)
139 {
140     switch (rule) {
141     case WindRule::NonZero:
142         ts &lt;&lt; &quot;NON-ZERO&quot;;
143         break;
144     case WindRule::EvenOdd:
145         ts &lt;&lt; &quot;EVEN-ODD&quot;;
146         break;
147     }
148 
149     return ts;
150 }
151 
152 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, LineCap capStyle)
153 {
154     switch (capStyle) {
155     case ButtCap:
156         ts &lt;&lt; &quot;BUTT&quot;;
157         break;
158     case RoundCap:
159         ts &lt;&lt; &quot;ROUND&quot;;
160         break;
161     case SquareCap:
162         ts &lt;&lt; &quot;SQUARE&quot;;
163         break;
164     }
165     return ts;
166 }
167 
168 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, LineJoin joinStyle)
169 {
170     switch (joinStyle) {
171     case MiterJoin:
172         ts &lt;&lt; &quot;MITER&quot;;
173         break;
174     case RoundJoin:
175         ts &lt;&lt; &quot;ROUND&quot;;
176         break;
177     case BevelJoin:
178         ts &lt;&lt; &quot;BEVEL&quot;;
179         break;
180     }
181     return ts;
182 }
183 
184 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, AlphaPremultiplication premultiplication)
185 {
186     switch (premultiplication) {
187     case AlphaPremultiplication::Premultiplied:
188         ts &lt;&lt; &quot;premultiplied&quot;;
189         break;
190     case AlphaPremultiplication::Unpremultiplied:
191         ts &lt;&lt; &quot;unpremultiplied&quot;;
192         break;
193     }
194     return ts;
195 }
196 
197 } // namespace WebCore
<a name="7" id="anc7"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="7" type="hidden" />
</body>
</html>