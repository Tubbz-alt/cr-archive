<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/FunctionExecutable.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FunctionConstructor.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="FunctionExecutable.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/runtime/FunctionExecutable.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 78 void FunctionExecutable::visitChildren(JSCell* cell, SlotVisitor&amp; visitor)
 79 {
 80     FunctionExecutable* thisObject = jsCast&lt;FunctionExecutable*&gt;(cell);
 81     ASSERT_GC_OBJECT_INHERITS(thisObject, info());
 82     Base::visitChildren(thisObject, visitor);
 83     visitor.append(thisObject-&gt;m_topLevelExecutable);
 84     visitor.append(thisObject-&gt;m_codeBlockForCall);
 85     visitor.append(thisObject-&gt;m_codeBlockForConstruct);
 86     visitor.append(thisObject-&gt;m_unlinkedExecutable);
 87     if (RareData* rareData = thisObject-&gt;m_rareData.get()) {
 88         visitor.append(rareData-&gt;m_cachedPolyProtoStructure);
 89         if (TemplateObjectMap* map = rareData-&gt;m_templateObjectMap.get()) {
 90             auto locker = holdLock(thisObject-&gt;cellLock());
 91             for (auto&amp; entry : *map)
 92                 visitor.append(entry.value);
 93         }
 94     }
 95 }
 96 
 97 FunctionExecutable* FunctionExecutable::fromGlobalCode(
<span class="line-modified"> 98     const Identifier&amp; name, ExecState&amp; exec, const SourceCode&amp; source,</span>
 99     JSObject*&amp; exception, int overrideLineNumber, Optional&lt;int&gt; functionConstructorParametersEndPosition)
100 {
101     UnlinkedFunctionExecutable* unlinkedExecutable =
102         UnlinkedFunctionExecutable::fromGlobalCode(
<span class="line-modified">103             name, exec, source, exception, overrideLineNumber, functionConstructorParametersEndPosition);</span>
104     if (!unlinkedExecutable)
105         return nullptr;
106 
<span class="line-modified">107     return unlinkedExecutable-&gt;link(exec.vm(), nullptr, source, overrideLineNumber);</span>
108 }
109 
110 FunctionExecutable::RareData&amp; FunctionExecutable::ensureRareDataSlow()
111 {
112     ASSERT(!m_rareData);
113     auto rareData = makeUnique&lt;RareData&gt;();
114     rareData-&gt;m_lineCount = lineCount();
115     rareData-&gt;m_endColumn = endColumn();
116     rareData-&gt;m_parametersStartOffset = parametersStartOffset();
117     rareData-&gt;m_typeProfilingStartOffset = typeProfilingStartOffset();
118     rareData-&gt;m_typeProfilingEndOffset = typeProfilingEndOffset();
119     WTF::storeStoreFence();
120     m_rareData = WTFMove(rareData);
121     return *m_rareData;
122 }
123 
124 void FunctionExecutable::overrideInfo(const FunctionOverrideInfo&amp; overrideInfo)
125 {
126     auto&amp; rareData = ensureRareData();
127     m_source = overrideInfo.sourceCode;
</pre>
</td>
<td>
<hr />
<pre>
 78 void FunctionExecutable::visitChildren(JSCell* cell, SlotVisitor&amp; visitor)
 79 {
 80     FunctionExecutable* thisObject = jsCast&lt;FunctionExecutable*&gt;(cell);
 81     ASSERT_GC_OBJECT_INHERITS(thisObject, info());
 82     Base::visitChildren(thisObject, visitor);
 83     visitor.append(thisObject-&gt;m_topLevelExecutable);
 84     visitor.append(thisObject-&gt;m_codeBlockForCall);
 85     visitor.append(thisObject-&gt;m_codeBlockForConstruct);
 86     visitor.append(thisObject-&gt;m_unlinkedExecutable);
 87     if (RareData* rareData = thisObject-&gt;m_rareData.get()) {
 88         visitor.append(rareData-&gt;m_cachedPolyProtoStructure);
 89         if (TemplateObjectMap* map = rareData-&gt;m_templateObjectMap.get()) {
 90             auto locker = holdLock(thisObject-&gt;cellLock());
 91             for (auto&amp; entry : *map)
 92                 visitor.append(entry.value);
 93         }
 94     }
 95 }
 96 
 97 FunctionExecutable* FunctionExecutable::fromGlobalCode(
<span class="line-modified"> 98     const Identifier&amp; name, JSGlobalObject* globalObject, const SourceCode&amp; source,</span>
 99     JSObject*&amp; exception, int overrideLineNumber, Optional&lt;int&gt; functionConstructorParametersEndPosition)
100 {
101     UnlinkedFunctionExecutable* unlinkedExecutable =
102         UnlinkedFunctionExecutable::fromGlobalCode(
<span class="line-modified">103             name, globalObject, source, exception, overrideLineNumber, functionConstructorParametersEndPosition);</span>
104     if (!unlinkedExecutable)
105         return nullptr;
106 
<span class="line-modified">107     return unlinkedExecutable-&gt;link(globalObject-&gt;vm(), nullptr, source, overrideLineNumber);</span>
108 }
109 
110 FunctionExecutable::RareData&amp; FunctionExecutable::ensureRareDataSlow()
111 {
112     ASSERT(!m_rareData);
113     auto rareData = makeUnique&lt;RareData&gt;();
114     rareData-&gt;m_lineCount = lineCount();
115     rareData-&gt;m_endColumn = endColumn();
116     rareData-&gt;m_parametersStartOffset = parametersStartOffset();
117     rareData-&gt;m_typeProfilingStartOffset = typeProfilingStartOffset();
118     rareData-&gt;m_typeProfilingEndOffset = typeProfilingEndOffset();
119     WTF::storeStoreFence();
120     m_rareData = WTFMove(rareData);
121     return *m_rareData;
122 }
123 
124 void FunctionExecutable::overrideInfo(const FunctionOverrideInfo&amp; overrideInfo)
125 {
126     auto&amp; rareData = ensureRareData();
127     m_source = overrideInfo.sourceCode;
</pre>
</td>
</tr>
</table>
<center><a href="FunctionConstructor.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="FunctionExecutable.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>