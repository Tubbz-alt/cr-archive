<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WTF/wtf/SegmentedVector.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Seconds.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SingleRootGraph.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WTF/wtf/SegmentedVector.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 31,10 ***</span>
<span class="line-new-header">--- 31,12 ---</span>
  #include &lt;wtf/Noncopyable.h&gt;
  #include &lt;wtf/Vector.h&gt;
  
  namespace WTF {
  
<span class="line-added">+     DECLARE_ALLOCATOR_WITH_HEAP_IDENTIFIER(SegmentedVector);</span>
<span class="line-added">+ </span>
      // An iterator for SegmentedVector. It supports only the pre ++ operator
      template &lt;typename T, size_t SegmentSize = 8&gt; class SegmentedVector;
      template &lt;typename T, size_t SegmentSize = 8&gt; class SegmentedVectorIterator {
          WTF_MAKE_FAST_ALLOCATED;
      private:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 225,11 ***</span>
          void deleteAllSegments()
          {
              for (size_t i = 0; i &lt; m_size; ++i)
                  at(i).~T();
              for (size_t i = 0; i &lt; m_segments.size(); ++i)
<span class="line-modified">!                 fastFree(m_segments[i]);</span>
          }
  
          bool segmentExistsFor(size_t index)
          {
              return index / SegmentSize &lt; m_segments.size();
<span class="line-new-header">--- 227,11 ---</span>
          void deleteAllSegments()
          {
              for (size_t i = 0; i &lt; m_size; ++i)
                  at(i).~T();
              for (size_t i = 0; i &lt; m_segments.size(); ++i)
<span class="line-modified">!                 SegmentedVectorMalloc::free(m_segments[i]);</span>
          }
  
          bool segmentExistsFor(size_t index)
          {
              return index / SegmentSize &lt; m_segments.size();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 261,11 ***</span>
                  allocateSegment();
          }
  
          void allocateSegment()
          {
<span class="line-modified">!             m_segments.append(static_cast&lt;Segment*&gt;(fastMalloc(sizeof(T) * SegmentSize)));</span>
          }
  
          size_t m_size { 0 };
          Vector&lt;Segment*&gt; m_segments;
      };
<span class="line-new-header">--- 263,11 ---</span>
                  allocateSegment();
          }
  
          void allocateSegment()
          {
<span class="line-modified">!             m_segments.append(static_cast&lt;Segment*&gt;(SegmentedVectorMalloc::malloc(sizeof(T) * SegmentSize)));</span>
          }
  
          size_t m_size { 0 };
          Vector&lt;Segment*&gt; m_segments;
      };
</pre>
<center><a href="Seconds.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SingleRootGraph.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>