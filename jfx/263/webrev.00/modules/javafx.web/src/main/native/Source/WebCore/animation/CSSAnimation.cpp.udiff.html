<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/animation/CSSAnimation.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AnimationTimeline.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CSSAnimation.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/animation/CSSAnimation.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -25,29 +25,33 @@</span>
  
  #include &quot;config.h&quot;
  #include &quot;CSSAnimation.h&quot;
  
  #include &quot;Animation.h&quot;
<span class="udiff-line-added">+ #include &quot;AnimationEvent.h&quot;</span>
  #include &quot;Element.h&quot;
<span class="udiff-line-added">+ #include &quot;InspectorInstrumentation.h&quot;</span>
  #include &quot;RenderStyle.h&quot;
  #include &lt;wtf/IsoMallocInlines.h&gt;
  
  namespace WebCore {
  
  WTF_MAKE_ISO_ALLOCATED_IMPL(CSSAnimation);
  
  Ref&lt;CSSAnimation&gt; CSSAnimation::create(Element&amp; owningElement, const Animation&amp; backingAnimation, const RenderStyle* oldStyle, const RenderStyle&amp; newStyle)
  {
<span class="udiff-line-modified-removed">-     auto result = adoptRef(*new CSSAnimation(owningElement, backingAnimation, newStyle));</span>
<span class="udiff-line-modified-added">+     auto result = adoptRef(*new CSSAnimation(owningElement, backingAnimation));</span>
      result-&gt;initialize(oldStyle, newStyle);
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     InspectorInstrumentation::didCreateWebAnimation(result.get());</span>
<span class="udiff-line-added">+ </span>
      return result;
  }
  
<span class="udiff-line-modified-removed">- CSSAnimation::CSSAnimation(Element&amp; element, const Animation&amp; backingAnimation, const RenderStyle&amp; unanimatedStyle)</span>
<span class="udiff-line-modified-added">+ CSSAnimation::CSSAnimation(Element&amp; element, const Animation&amp; backingAnimation)</span>
      : DeclarativeAnimation(element, backingAnimation)
      , m_animationName(backingAnimation.name())
<span class="udiff-line-removed">-     , m_unanimatedStyle(RenderStyle::clonePtr(unanimatedStyle))</span>
  {
  }
  
  void CSSAnimation::syncPropertiesWithBackingAnimation()
  {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -59,10 +63,12 @@</span>
      suspendEffectInvalidation();
  
      auto&amp; animation = backingAnimation();
      auto* animationEffect = effect();
  
<span class="udiff-line-added">+     auto previousTiming = animationEffect-&gt;getComputedTiming();</span>
<span class="udiff-line-added">+ </span>
      switch (animation.fillMode()) {
      case AnimationFillMode::None:
          animationEffect-&gt;setFill(FillMode::None);
          break;
      case AnimationFillMode::Backwards:
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -94,10 +100,12 @@</span>
      auto iterationCount = animation.iterationCount();
      animationEffect-&gt;setIterations(iterationCount == Animation::IterationCountInfinite ? std::numeric_limits&lt;double&gt;::infinity() : iterationCount);
  
      animationEffect-&gt;setDelay(Seconds(animation.delay()));
      animationEffect-&gt;setIterationDuration(Seconds(animation.duration()));
<span class="udiff-line-added">+     animationEffect-&gt;updateStaticTimingProperties();</span>
<span class="udiff-line-added">+     effectTimingDidChange(previousTiming);</span>
  
      // Synchronize the play state
      if (animation.playState() == AnimationPlayState::Playing &amp;&amp; playState() == WebAnimation::PlayState::Paused) {
          if (!m_stickyPaused)
              play();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -117,6 +125,11 @@</span>
  {
      m_stickyPaused = true;
      return DeclarativeAnimation::bindingsPause();
  }
  
<span class="udiff-line-added">+ Ref&lt;AnimationEventBase&gt; CSSAnimation::createEvent(const AtomString&amp; eventType, double elapsedTime, const String&amp; pseudoId, Optional&lt;Seconds&gt; timelineTime)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     return AnimationEvent::create(eventType, m_animationName, elapsedTime, pseudoId, timelineTime, this);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
  } // namespace WebCore
</pre>
<center><a href="AnimationTimeline.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CSSAnimation.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>