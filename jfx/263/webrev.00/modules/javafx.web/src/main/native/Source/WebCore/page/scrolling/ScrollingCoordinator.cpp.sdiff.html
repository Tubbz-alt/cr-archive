<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/page/scrolling/ScrollingCoordinator.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ScrollLatchingState.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="ScrollingCoordinator.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/page/scrolling/ScrollingCoordinator.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 21  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 22  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
 23  * THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #include &quot;config.h&quot;
 27 
 28 #include &quot;ScrollingCoordinator.h&quot;
 29 
 30 #include &quot;Document.h&quot;
 31 #include &quot;EventNames.h&quot;
 32 #include &quot;Frame.h&quot;
 33 #include &quot;FrameView.h&quot;
 34 #include &quot;GraphicsLayer.h&quot;
 35 #include &quot;Page.h&quot;
 36 #include &quot;PlatformWheelEvent.h&quot;
 37 #include &quot;PluginViewBase.h&quot;
 38 #include &quot;Region.h&quot;
 39 #include &quot;RenderLayerCompositor.h&quot;
 40 #include &quot;RenderView.h&quot;
<span class="line-removed"> 41 #include &quot;RuntimeEnabledFeatures.h&quot;</span>
 42 #include &quot;ScrollAnimator.h&quot;
 43 #include &quot;Settings.h&quot;
 44 #include &lt;wtf/MainThread.h&gt;
 45 #include &lt;wtf/text/StringBuilder.h&gt;
 46 #include &lt;wtf/text/TextStream.h&gt;
 47 
 48 namespace WebCore {
 49 
 50 #if PLATFORM(IOS_FAMILY) || !ENABLE(ASYNC_SCROLLING)
 51 Ref&lt;ScrollingCoordinator&gt; ScrollingCoordinator::create(Page* page)
 52 {
 53     return adoptRef(*new ScrollingCoordinator(page));
 54 }
 55 #endif
 56 
 57 ScrollingCoordinator::ScrollingCoordinator(Page* page)
 58     : m_page(page)
 59 {
 60 }
 61 
 62 ScrollingCoordinator::~ScrollingCoordinator()
 63 {
 64     ASSERT(!m_page);
 65 }
 66 
 67 void ScrollingCoordinator::pageDestroyed()
 68 {
 69     ASSERT(m_page);
 70     m_page = nullptr;
 71 }
 72 
 73 bool ScrollingCoordinator::coordinatesScrollingForFrameView(const FrameView&amp; frameView) const
 74 {
 75     ASSERT(isMainThread());
 76     ASSERT(m_page);
 77 
 78     if (!frameView.frame().isMainFrame() &amp;&amp; !m_page-&gt;settings().scrollingTreeIncludesFrames()
<span class="line-modified"> 79 #if PLATFORM(MAC)</span>
 80         &amp;&amp; !m_page-&gt;settings().asyncFrameScrollingEnabled()
 81 #endif
 82     )
 83         return false;
 84 
 85     auto* renderView = frameView.frame().contentRenderer();
 86     if (!renderView)
 87         return false;
 88     return renderView-&gt;usesCompositing();
 89 }
 90 
 91 bool ScrollingCoordinator::coordinatesScrollingForOverflowLayer(const RenderLayer&amp; layer) const
 92 {
 93     ASSERT(isMainThread());
 94     ASSERT(m_page);
 95 
 96     return layer.hasCompositedScrollableOverflow();
 97 }
 98 
 99 ScrollingNodeID ScrollingCoordinator::scrollableContainerNodeID(const RenderObject&amp;) const
</pre>
<hr />
<pre>
482     }
483     return ts;
484 }
485 
486 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, ViewportRectStability stability)
487 {
488     switch (stability) {
489     case ViewportRectStability::Stable:
490         ts &lt;&lt; &quot;stable&quot;;
491         break;
492     case ViewportRectStability::Unstable:
493         ts &lt;&lt; &quot;unstable&quot;;
494         break;
495     case ViewportRectStability::ChangingObscuredInsetsInteractively:
496         ts &lt;&lt; &quot;changing obscured insets interactively&quot;;
497         break;
498     }
499     return ts;
500 }
501 
<span class="line-removed">502 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, ScrollType scrollType)</span>
<span class="line-removed">503 {</span>
<span class="line-removed">504     switch (scrollType) {</span>
<span class="line-removed">505     case ScrollType::User: ts &lt;&lt; &quot;user&quot;; break;</span>
<span class="line-removed">506     case ScrollType::Programmatic: ts &lt;&lt; &quot;programmatic&quot;; break;</span>
<span class="line-removed">507     }</span>
<span class="line-removed">508     return ts;</span>
<span class="line-removed">509 }</span>
<span class="line-removed">510 </span>
511 } // namespace WebCore
</pre>
</td>
<td>
<hr />
<pre>
 21  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 22  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
 23  * THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #include &quot;config.h&quot;
 27 
 28 #include &quot;ScrollingCoordinator.h&quot;
 29 
 30 #include &quot;Document.h&quot;
 31 #include &quot;EventNames.h&quot;
 32 #include &quot;Frame.h&quot;
 33 #include &quot;FrameView.h&quot;
 34 #include &quot;GraphicsLayer.h&quot;
 35 #include &quot;Page.h&quot;
 36 #include &quot;PlatformWheelEvent.h&quot;
 37 #include &quot;PluginViewBase.h&quot;
 38 #include &quot;Region.h&quot;
 39 #include &quot;RenderLayerCompositor.h&quot;
 40 #include &quot;RenderView.h&quot;

 41 #include &quot;ScrollAnimator.h&quot;
 42 #include &quot;Settings.h&quot;
 43 #include &lt;wtf/MainThread.h&gt;
 44 #include &lt;wtf/text/StringBuilder.h&gt;
 45 #include &lt;wtf/text/TextStream.h&gt;
 46 
 47 namespace WebCore {
 48 
 49 #if PLATFORM(IOS_FAMILY) || !ENABLE(ASYNC_SCROLLING)
 50 Ref&lt;ScrollingCoordinator&gt; ScrollingCoordinator::create(Page* page)
 51 {
 52     return adoptRef(*new ScrollingCoordinator(page));
 53 }
 54 #endif
 55 
 56 ScrollingCoordinator::ScrollingCoordinator(Page* page)
 57     : m_page(page)
 58 {
 59 }
 60 
 61 ScrollingCoordinator::~ScrollingCoordinator()
 62 {
 63     ASSERT(!m_page);
 64 }
 65 
 66 void ScrollingCoordinator::pageDestroyed()
 67 {
 68     ASSERT(m_page);
 69     m_page = nullptr;
 70 }
 71 
 72 bool ScrollingCoordinator::coordinatesScrollingForFrameView(const FrameView&amp; frameView) const
 73 {
 74     ASSERT(isMainThread());
 75     ASSERT(m_page);
 76 
 77     if (!frameView.frame().isMainFrame() &amp;&amp; !m_page-&gt;settings().scrollingTreeIncludesFrames()
<span class="line-modified"> 78 #if PLATFORM(MAC) || USE(NICOSIA)</span>
 79         &amp;&amp; !m_page-&gt;settings().asyncFrameScrollingEnabled()
 80 #endif
 81     )
 82         return false;
 83 
 84     auto* renderView = frameView.frame().contentRenderer();
 85     if (!renderView)
 86         return false;
 87     return renderView-&gt;usesCompositing();
 88 }
 89 
 90 bool ScrollingCoordinator::coordinatesScrollingForOverflowLayer(const RenderLayer&amp; layer) const
 91 {
 92     ASSERT(isMainThread());
 93     ASSERT(m_page);
 94 
 95     return layer.hasCompositedScrollableOverflow();
 96 }
 97 
 98 ScrollingNodeID ScrollingCoordinator::scrollableContainerNodeID(const RenderObject&amp;) const
</pre>
<hr />
<pre>
481     }
482     return ts;
483 }
484 
485 TextStream&amp; operator&lt;&lt;(TextStream&amp; ts, ViewportRectStability stability)
486 {
487     switch (stability) {
488     case ViewportRectStability::Stable:
489         ts &lt;&lt; &quot;stable&quot;;
490         break;
491     case ViewportRectStability::Unstable:
492         ts &lt;&lt; &quot;unstable&quot;;
493         break;
494     case ViewportRectStability::ChangingObscuredInsetsInteractively:
495         ts &lt;&lt; &quot;changing obscured insets interactively&quot;;
496         break;
497     }
498     return ts;
499 }
500 









501 } // namespace WebCore
</pre>
</td>
</tr>
</table>
<center><a href="ScrollLatchingState.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="ScrollingCoordinator.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>