<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/cmake/WebKitCCache.cmake</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="OptionsWin.cmake.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="WebKitCompilerFlags.cmake.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/cmake/WebKitCCache.cmake</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,8 +1,34 @@</span>
<span class="udiff-line-modified-removed">- # Enable ccache by default for the Mac port, if installed.</span>
<span class="udiff-line-modified-removed">- # Setting WK_USE_CCACHE=NO in your environment will disable it.</span>
<span class="udiff-line-modified-removed">- if (PORT STREQUAL &quot;Mac&quot; AND NOT &quot;$ENV{WK_USE_CCACHE}&quot; STREQUAL &quot;NO&quot;)</span>
<span class="udiff-line-modified-added">+ # Enable ccache by default, if installed. To disable it you can:</span>
<span class="udiff-line-modified-added">+ # if using script build-webkit: pass --no-use-ccache</span>
<span class="udiff-line-modified-added">+ # if using cmake: set environment variable WK_USE_CCACHE=NO</span>
<span class="udiff-line-added">+ if (NOT &quot;$ENV{WK_USE_CCACHE}&quot; STREQUAL &quot;NO&quot;)</span>
      find_program(CCACHE_FOUND ccache)
      if (CCACHE_FOUND)
<span class="udiff-line-modified-removed">-         set_property(GLOBAL PROPERTY RULE_LAUNCH_COMPILE ${CMAKE_SOURCE_DIR}/Tools/ccache/ccache-wrapper)</span>
<span class="udiff-line-modified-added">+         if (PORT STREQUAL &quot;Mac&quot;)</span>
<span class="udiff-line-added">+             set(CCACHE ${CMAKE_SOURCE_DIR}/Tools/ccache/ccache-wrapper)</span>
<span class="udiff-line-added">+             set_property(GLOBAL PROPERTY RULE_LAUNCH_COMPILE ${CCACHE_FOUND})</span>
<span class="udiff-line-added">+         else ()</span>
<span class="udiff-line-added">+             if (NOT DEFINED ENV{CCACHE_SLOPPINESS})</span>
<span class="udiff-line-added">+                 set(ENV{CCACHE_SLOPPINESS} time_macros)</span>
<span class="udiff-line-added">+             endif ()</span>
<span class="udiff-line-added">+             # FIXME: readlink -f isn&#39;t supported on macOS. https://bugs.webkit.org/show_bug.cgi?id=208379</span>
<span class="udiff-line-added">+             execute_process(COMMAND readlink -f ${CMAKE_CXX_COMPILER} RESULT_VARIABLE READLINK_RETCODE OUTPUT_VARIABLE REAL_CXX_PATH OUTPUT_STRIP_TRAILING_WHITESPACE ERROR_QUIET)</span>
<span class="udiff-line-added">+             execute_process(COMMAND which ${CCACHE_FOUND} RESULT_VARIABLE WHICH_RETCODE OUTPUT_VARIABLE REAL_CCACHE_PATH OUTPUT_STRIP_TRAILING_WHITESPACE ERROR_QUIET)</span>
<span class="udiff-line-added">+             if (${WHICH_RETCODE} EQUAL 0 AND ${READLINK_RETCODE} EQUAL 0 AND &quot;${REAL_CXX_PATH}&quot; STREQUAL &quot;${REAL_CCACHE_PATH}&quot;)</span>
<span class="udiff-line-added">+                 message(STATUS &quot;Enabling ccache: Compiler path already pointing to ccache. Not setting ccache prefix.&quot;)</span>
<span class="udiff-line-added">+             else ()</span>
<span class="udiff-line-added">+                 message(STATUS &quot;Enabling ccache: Setting ccache prefix for compiler.&quot;)</span>
<span class="udiff-line-added">+                 set_property(GLOBAL PROPERTY RULE_LAUNCH_COMPILE ${CCACHE_FOUND})</span>
<span class="udiff-line-added">+             endif ()</span>
<span class="udiff-line-added">+         endif ()</span>
<span class="udiff-line-added">+     else ()</span>
<span class="udiff-line-added">+         message(WARNING &quot;Enabling ccache: Couldn&#39;t find ccache program. Not enabling it.&quot;)</span>
<span class="udiff-line-added">+     endif ()</span>
<span class="udiff-line-added">+ endif ()</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ if (&quot;$ENV{WEBKIT_USE_SCCACHE}&quot; STREQUAL &quot;YES&quot;)</span>
<span class="udiff-line-added">+     find_program(SCCACHE_FOUND sccache)</span>
<span class="udiff-line-added">+     if (SCCACHE_FOUND)</span>
<span class="udiff-line-added">+         set_property(GLOBAL PROPERTY RULE_LAUNCH_COMPILE ${SCCACHE_FOUND})</span>
      endif ()
  endif ()
</pre>
<center><a href="OptionsWin.cmake.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="WebKitCompilerFlags.cmake.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>