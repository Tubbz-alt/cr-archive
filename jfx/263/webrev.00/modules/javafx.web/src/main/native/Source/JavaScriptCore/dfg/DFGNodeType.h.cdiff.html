<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/dfg/DFGNodeType.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DFGNodeFlowProjection.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DFGOSRAvailabilityAnalysisPhase.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/dfg/DFGNodeType.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (C) 2012-2018 Apple Inc. All rights reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   * 1. Redistributions of source code must retain the above copyright
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (C) 2012-2019 Apple Inc. All rights reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   * 1. Redistributions of source code must retain the above copyright
</pre>
<hr />
<pre>
<span class="line-old-header">*** 51,10 ***</span>
<span class="line-new-header">--- 51,13 ---</span>
      macro(IdentityWithProfile, NodeResultJS | NodeMustGenerate) \
      \
      /* Nodes for handling functions (both as call and as construct). */\
      macro(ToThis, NodeResultJS) \
      macro(CreateThis, NodeResultJS) /* Note this is not MustGenerate since we&#39;re returning it anyway. */ \
<span class="line-added">+     macro(CreatePromise, NodeResultJS | NodeMustGenerate) \</span>
<span class="line-added">+     macro(CreateGenerator, NodeResultJS | NodeMustGenerate) \</span>
<span class="line-added">+     macro(CreateAsyncGenerator, NodeResultJS | NodeMustGenerate) \</span>
      macro(GetCallee, NodeResultJS) \
      macro(SetCallee, NodeMustGenerate) \
      macro(GetArgumentCountIncludingThis, NodeResultInt32) \
      macro(SetArgumentCountIncludingThis, NodeMustGenerate) \
      \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 69,10 ***</span>
<span class="line-new-header">--- 72,11 ---</span>
      /* the same way that we insert Phantoms. That&#39;s hard and probably not profitable. See */\
      /* https://bugs.webkit.org/show_bug.cgi?id=144086 */\
      macro(GetLocal, NodeResultJS | NodeMustGenerate) \
      macro(SetLocal, 0) \
      \
<span class="line-added">+     /* These are used in SSA form to represent to track */\</span>
      macro(PutStack, NodeMustGenerate) \
      macro(KillStack, NodeMustGenerate) \
      macro(GetStack, NodeResultJS) \
      \
      macro(MovHint, NodeMustGenerate) \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 121,11 ***</span>
      macro(ArithBitOr, NodeResultInt32) \
      macro(ValueBitXor, NodeResultJS | NodeMustGenerate) \
      macro(ArithBitXor, NodeResultInt32) \
      macro(ArithBitLShift, NodeResultInt32) \
      macro(ValueBitLShift, NodeResultJS | NodeMustGenerate) \
<span class="line-modified">!     macro(BitRShift, NodeResultInt32) \</span>
      macro(BitURShift, NodeResultInt32) \
      /* Bitwise operators call ToInt32 on their operands. */\
      macro(ValueToInt32, NodeResultInt32) \
      /* Used to box the result of URShift nodes (result has range 0..2^32-1). */\
      macro(UInt32ToNumber, NodeResultNumber) \
<span class="line-new-header">--- 125,12 ---</span>
      macro(ArithBitOr, NodeResultInt32) \
      macro(ValueBitXor, NodeResultJS | NodeMustGenerate) \
      macro(ArithBitXor, NodeResultInt32) \
      macro(ArithBitLShift, NodeResultInt32) \
      macro(ValueBitLShift, NodeResultJS | NodeMustGenerate) \
<span class="line-modified">!     macro(ArithBitRShift, NodeResultInt32) \</span>
<span class="line-added">+     macro(ValueBitRShift, NodeResultJS | NodeMustGenerate) \</span>
      macro(BitURShift, NodeResultInt32) \
      /* Bitwise operators call ToInt32 on their operands. */\
      macro(ValueToInt32, NodeResultInt32) \
      /* Used to box the result of URShift nodes (result has range 0..2^32-1). */\
      macro(UInt32ToNumber, NodeResultNumber) \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 169,11 ***</span>
      macro(ArithCeil, NodeResultNumber | NodeMustGenerate) \
      macro(ArithTrunc, NodeResultNumber | NodeMustGenerate) \
      macro(ArithSqrt, NodeResultDouble | NodeMustGenerate) \
      macro(ArithUnary, NodeResultDouble | NodeMustGenerate) \
      \
<span class="line-modified">!     /* BigInt is a valid operand for negate operations */\</span>
      macro(ValueNegate, NodeResultJS | NodeMustGenerate) \
      \
      /* Add of values may either be arithmetic, or result in string concatenation. */\
      macro(ValueAdd, NodeResultJS | NodeMustGenerate) \
      \
<span class="line-new-header">--- 174,14 ---</span>
      macro(ArithCeil, NodeResultNumber | NodeMustGenerate) \
      macro(ArithTrunc, NodeResultNumber | NodeMustGenerate) \
      macro(ArithSqrt, NodeResultDouble | NodeMustGenerate) \
      macro(ArithUnary, NodeResultDouble | NodeMustGenerate) \
      \
<span class="line-modified">!     /* BigInt is a valid operand for these three operations */\</span>
<span class="line-added">+     /* Inc and Dec don&#39;t update their operand in-place, they are typically combined with some form of SetLocal */\</span>
<span class="line-added">+     macro(Inc, NodeResultJS | NodeMustGenerate) \</span>
<span class="line-added">+     macro(Dec, NodeResultJS | NodeMustGenerate) \</span>
      macro(ValueNegate, NodeResultJS | NodeMustGenerate) \
      \
      /* Add of values may either be arithmetic, or result in string concatenation. */\
      macro(ValueAdd, NodeResultJS | NodeMustGenerate) \
      \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 193,10 ***</span>
<span class="line-new-header">--- 201,11 ---</span>
      /* opcodes use VarArgs beause they may have up to 4 children. */\
      macro(GetByVal, NodeResultJS | NodeMustGenerate | NodeHasVarArgs) \
      macro(GetByValWithThis, NodeResultJS | NodeMustGenerate) \
      macro(GetMyArgumentByVal, NodeResultJS | NodeMustGenerate) \
      macro(GetMyArgumentByValOutOfBounds, NodeResultJS | NodeMustGenerate) \
<span class="line-added">+     macro(VarargsLength, NodeMustGenerate | NodeResultInt32) \</span>
      macro(LoadVarargs, NodeMustGenerate) \
      macro(ForwardVarargs, NodeMustGenerate) \
      macro(PutByValDirect, NodeMustGenerate | NodeHasVarArgs) \
      macro(PutByVal, NodeMustGenerate | NodeHasVarArgs) \
      macro(PutByValAlias, NodeMustGenerate | NodeHasVarArgs) \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 227,10 ***</span>
<span class="line-new-header">--- 236,13 ---</span>
      macro(AllocatePropertyStorage, NodeMustGenerate | NodeResultStorage) \
      macro(ReallocatePropertyStorage, NodeMustGenerate | NodeResultStorage) \
      macro(GetButterfly, NodeResultStorage) \
      macro(NukeStructureAndSetButterfly, NodeMustGenerate) \
      macro(CheckArray, NodeMustGenerate) \
<span class="line-added">+     macro(CheckArrayOrEmpty, NodeMustGenerate) \</span>
<span class="line-added">+     /* This checks if the edge is a typed array and if it is neutered. */ \</span>
<span class="line-added">+     macro(CheckNeutered, NodeMustGenerate) \</span>
      macro(Arrayify, NodeMustGenerate) \
      macro(ArrayifyToStructure, NodeMustGenerate) \
      macro(GetIndexedPropertyStorage, NodeResultStorage) \
      macro(ConstantStoragePointer, NodeResultStorage) \
      macro(GetGetter, NodeResultJS) \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 263,11 ***</span>
      macro(CheckCell, NodeMustGenerate) \
      macro(CheckNotEmpty, NodeMustGenerate) \
      macro(AssertNotEmpty, NodeMustGenerate) \
      macro(CheckBadCell, NodeMustGenerate) \
      macro(CheckInBounds, NodeMustGenerate | NodeResultJS) \
<span class="line-modified">!     macro(CheckStringIdent, NodeMustGenerate) \</span>
      macro(CheckTypeInfoFlags, NodeMustGenerate) /* Takes an OpInfo with the flags you want to test are set */\
      macro(CheckSubClass, NodeMustGenerate) \
      macro(ParseInt, NodeMustGenerate | NodeResultJS) \
      macro(GetPrototypeOf, NodeMustGenerate | NodeResultJS) \
      macro(ObjectCreate, NodeMustGenerate | NodeResultJS) \
<span class="line-new-header">--- 275,11 ---</span>
      macro(CheckCell, NodeMustGenerate) \
      macro(CheckNotEmpty, NodeMustGenerate) \
      macro(AssertNotEmpty, NodeMustGenerate) \
      macro(CheckBadCell, NodeMustGenerate) \
      macro(CheckInBounds, NodeMustGenerate | NodeResultJS) \
<span class="line-modified">!     macro(CheckIdent, NodeMustGenerate) \</span>
      macro(CheckTypeInfoFlags, NodeMustGenerate) /* Takes an OpInfo with the flags you want to test are set */\
      macro(CheckSubClass, NodeMustGenerate) \
      macro(ParseInt, NodeMustGenerate | NodeResultJS) \
      macro(GetPrototypeOf, NodeMustGenerate | NodeResultJS) \
      macro(ObjectCreate, NodeMustGenerate | NodeResultJS) \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 300,10 ***</span>
<span class="line-new-header">--- 312,11 ---</span>
      macro(StringReplace, NodeResultJS | NodeMustGenerate) \
      macro(StringReplaceRegExp, NodeResultJS | NodeMustGenerate) \
      \
      /* Optimizations for string access */ \
      macro(StringCharCodeAt, NodeResultInt32) \
<span class="line-added">+     macro(StringCodePointAt, NodeResultInt32) \</span>
      macro(StringCharAt, NodeResultJS) \
      macro(StringFromCharCode, NodeResultJS | NodeMustGenerate) \
      \
      /* Nodes for comparison operations. */\
      macro(CompareLess, NodeResultBoolean | NodeMustGenerate) \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 336,14 ***</span>
<span class="line-new-header">--- 349,18 ---</span>
      macro(LogShadowChickenPrologue, NodeMustGenerate) \
      macro(LogShadowChickenTail, NodeMustGenerate) \
      \
      /* Allocations. */\
      macro(NewObject, NodeResultJS) \
<span class="line-added">+     macro(NewPromise, NodeResultJS) \</span>
<span class="line-added">+     macro(NewGenerator, NodeResultJS) \</span>
<span class="line-added">+     macro(NewAsyncGenerator, NodeResultJS) \</span>
      macro(NewArray, NodeResultJS | NodeHasVarArgs) \
      macro(NewArrayWithSpread, NodeResultJS | NodeHasVarArgs) \
      macro(NewArrayWithSize, NodeResultJS | NodeMustGenerate) \
      macro(NewArrayBuffer, NodeResultJS) \
<span class="line-added">+     macro(NewArrayIterator, NodeResultJS) \</span>
      macro(NewTypedArray, NodeResultJS | NodeMustGenerate) \
      macro(NewRegexp, NodeResultJS) \
      macro(NewSymbol, NodeResultJS) \
      macro(NewStringObject, NodeResultJS) \
      /* Rest Parameter */\
</pre>
<hr />
<pre>
<span class="line-old-header">*** 358,10 ***</span>
<span class="line-new-header">--- 375,12 ---</span>
      macro(MaterializeNewObject, NodeResultJS | NodeHasVarArgs) \
      macro(PhantomNewFunction, NodeResultJS | NodeMustGenerate) \
      macro(PhantomNewGeneratorFunction, NodeResultJS | NodeMustGenerate) \
      macro(PhantomNewAsyncFunction, NodeResultJS | NodeMustGenerate) \
      macro(PhantomNewAsyncGeneratorFunction, NodeResultJS | NodeMustGenerate) \
<span class="line-added">+     macro(PhantomNewArrayIterator, NodeResultJS | NodeMustGenerate) \</span>
<span class="line-added">+     macro(MaterializeNewInternalFieldObject, NodeResultJS | NodeHasVarArgs) \</span>
      macro(PhantomCreateActivation, NodeResultJS | NodeMustGenerate) \
      macro(MaterializeCreateActivation, NodeResultJS | NodeHasVarArgs) \
      macro(PhantomNewRegexp, NodeResultJS | NodeMustGenerate) \
      \
      /* Nodes for misc operations. */\
</pre>
<hr />
<pre>
<span class="line-old-header">*** 382,12 ***</span>
<span class="line-new-header">--- 401,14 ---</span>
      macro(IsFunction, NodeResultBoolean) \
      macro(IsTypedArrayView, NodeResultBoolean) \
      macro(TypeOf, NodeResultJS) \
      macro(LogicalNot, NodeResultBoolean) \
      macro(ToPrimitive, NodeResultJS | NodeMustGenerate) \
<span class="line-added">+     macro(ToPropertyKey, NodeResultJS | NodeMustGenerate) \</span>
      macro(ToString, NodeResultJS | NodeMustGenerate) \
      macro(ToNumber, NodeResultJS | NodeMustGenerate) \
<span class="line-added">+     macro(ToNumeric, NodeResultJS | NodeMustGenerate) \</span>
      macro(ToObject, NodeResultJS | NodeMustGenerate) \
      macro(CallObjectConstructor, NodeResultJS) \
      macro(CallStringConstructor, NodeResultJS | NodeMustGenerate) \
      macro(NumberToStringWithRadix, NodeResultJS | NodeMustGenerate) \
      macro(NumberToStringWithValidRadixConstant, NodeResultJS) \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 397,10 ***</span>
<span class="line-new-header">--- 418,13 ---</span>
      macro(ProfileType, NodeMustGenerate) \
      macro(ProfileControlFlow, NodeMustGenerate) \
      macro(SetFunctionName, NodeMustGenerate) \
      macro(HasOwnProperty, NodeResultBoolean) \
      \
<span class="line-added">+     macro(GetInternalField, NodeResultJS) \</span>
<span class="line-added">+     macro(PutInternalField, NodeMustGenerate) \</span>
<span class="line-added">+     \</span>
      macro(CreateActivation, NodeResultJS) \
      macro(PushWithScope, NodeResultJS | NodeMustGenerate) \
      \
      macro(CreateDirectArguments, NodeResultJS) \
      macro(PhantomDirectArguments, NodeResultJS | NodeMustGenerate) \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 409,10 ***</span>
<span class="line-new-header">--- 433,11 ---</span>
      macro(PhantomNewArrayWithSpread, NodeResultJS | NodeMustGenerate | NodeHasVarArgs) \
      macro(PhantomNewArrayBuffer, NodeResultJS | NodeMustGenerate) \
      macro(CreateScopedArguments, NodeResultJS) \
      macro(CreateClonedArguments, NodeResultJS) \
      macro(PhantomClonedArguments, NodeResultJS | NodeMustGenerate) \
<span class="line-added">+     macro(CreateArgumentsButterfly, NodeResultJS) \</span>
      macro(GetFromArguments, NodeResultJS) \
      macro(PutToArguments, NodeMustGenerate) \
      macro(GetArgument, NodeResultJS) \
      \
      macro(NewFunction, NodeResultJS) \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 496,17 ***</span>
      /* Used for $vm performance debugging */ \
      macro(CPUIntrinsic, NodeResultJS | NodeMustGenerate) \
      \
      /* Used to provide feedback to the IC profiler. */ \
      macro(FilterCallLinkStatus, NodeMustGenerate) \
<span class="line-modified">!     macro(FilterGetByIdStatus, NodeMustGenerate) \</span>
      macro(FilterInByIdStatus, NodeMustGenerate) \
      macro(FilterPutByIdStatus, NodeMustGenerate) \
      /* Data view access */ \
      macro(DataViewGetInt, NodeMustGenerate | NodeResultJS) /* The gets are must generate for now because they do bounds checks */ \
      macro(DataViewGetFloat, NodeMustGenerate | NodeResultDouble) \
      macro(DataViewSet, NodeMustGenerate | NodeMustGenerate | NodeHasVarArgs) \
  
  
  // This enum generates a monotonically increasing id for all Node types,
  // and is used by the subsequent enum to fill out the id (as accessed via the NodeIdMask).
  enum NodeType {
<span class="line-new-header">--- 521,20 ---</span>
      /* Used for $vm performance debugging */ \
      macro(CPUIntrinsic, NodeResultJS | NodeMustGenerate) \
      \
      /* Used to provide feedback to the IC profiler. */ \
      macro(FilterCallLinkStatus, NodeMustGenerate) \
<span class="line-modified">!     macro(FilterGetByStatus, NodeMustGenerate) \</span>
      macro(FilterInByIdStatus, NodeMustGenerate) \
      macro(FilterPutByIdStatus, NodeMustGenerate) \
      /* Data view access */ \
      macro(DataViewGetInt, NodeMustGenerate | NodeResultJS) /* The gets are must generate for now because they do bounds checks */ \
      macro(DataViewGetFloat, NodeMustGenerate | NodeResultDouble) \
      macro(DataViewSet, NodeMustGenerate | NodeMustGenerate | NodeHasVarArgs) \
<span class="line-added">+     /* Date access */ \</span>
<span class="line-added">+     macro(DateGetInt32OrNaN, NodeResultJS) \</span>
<span class="line-added">+     macro(DateGetTime, NodeResultDouble) \</span>
  
  
  // This enum generates a monotonically increasing id for all Node types,
  // and is used by the subsequent enum to fill out the id (as accessed via the NodeIdMask).
  enum NodeType {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 546,11 ***</span>
      default:
          return false;
      }
  }
  
<span class="line-modified">! static const unsigned maxNumExtraAtomicsArgs = 2;</span>
  
  inline unsigned numExtraAtomicsArgs(NodeType op)
  {
      switch (op) {
      case AtomicsLoad:
<span class="line-new-header">--- 574,11 ---</span>
      default:
          return false;
      }
  }
  
<span class="line-modified">! static constexpr unsigned maxNumExtraAtomicsArgs = 2;</span>
  
  inline unsigned numExtraAtomicsArgs(NodeType op)
  {
      switch (op) {
      case AtomicsLoad:
</pre>
<center><a href="DFGNodeFlowProjection.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DFGOSRAvailabilityAnalysisPhase.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>