<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/mediastream/libwebrtc/LibWebRTCPeerConnectionBackend.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="LibWebRTCPeerConnectionBackend.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="LibWebRTCRtpReceiverBackend.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/mediastream/libwebrtc/LibWebRTCPeerConnectionBackend.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 40 class LibWebRTCRtpSenderBackend;
 41 class LibWebRTCRtpTransceiverBackend;
 42 class RTCRtpReceiver;
 43 class RTCRtpReceiverBackend;
 44 class RTCSessionDescription;
 45 class RTCStatsReport;
 46 class RealtimeIncomingAudioSource;
 47 class RealtimeIncomingVideoSource;
 48 class RealtimeMediaSource;
 49 class RealtimeOutgoingAudioSource;
 50 class RealtimeOutgoingVideoSource;
 51 
 52 class LibWebRTCPeerConnectionBackend final : public PeerConnectionBackend {
 53     WTF_MAKE_FAST_ALLOCATED;
 54 public:
 55     LibWebRTCPeerConnectionBackend(RTCPeerConnection&amp;, LibWebRTCProvider&amp;);
 56     ~LibWebRTCPeerConnectionBackend();
 57 
 58     void replaceTrack(RTCRtpSender&amp;, RefPtr&lt;MediaStreamTrack&gt;&amp;&amp;, DOMPromiseDeferred&lt;void&gt;&amp;&amp;);
 59 
<span class="line-removed"> 60     bool shouldOfferAllowToReceive(const char*) const;</span>
<span class="line-removed"> 61 </span>
 62 private:

 63     void doCreateOffer(RTCOfferOptions&amp;&amp;) final;
 64     void doCreateAnswer(RTCAnswerOptions&amp;&amp;) final;
 65     void doSetLocalDescription(RTCSessionDescription&amp;) final;
 66     void doSetRemoteDescription(RTCSessionDescription&amp;) final;
 67     void doAddIceCandidate(RTCIceCandidate&amp;) final;
 68     void doStop() final;
 69     std::unique_ptr&lt;RTCDataChannelHandler&gt; createDataChannelHandler(const String&amp;, const RTCDataChannelInit&amp;) final;
 70     bool setConfiguration(MediaEndpointConfiguration&amp;&amp;) final;
 71     void getStats(Ref&lt;DeferredPromise&gt;&amp;&amp;) final;
 72     void getStats(RTCRtpSender&amp;, Ref&lt;DeferredPromise&gt;&amp;&amp;) final;
 73     void getStats(RTCRtpReceiver&amp;, Ref&lt;DeferredPromise&gt;&amp;&amp;) final;
 74 
 75     RefPtr&lt;RTCSessionDescription&gt; localDescription() const final;
 76     RefPtr&lt;RTCSessionDescription&gt; currentLocalDescription() const final;
 77     RefPtr&lt;RTCSessionDescription&gt; pendingLocalDescription() const final;
 78 
 79     RefPtr&lt;RTCSessionDescription&gt; remoteDescription() const final;
 80     RefPtr&lt;RTCSessionDescription&gt; currentRemoteDescription() const final;
 81     RefPtr&lt;RTCSessionDescription&gt; pendingRemoteDescription() const final;
 82 
</pre>
<hr />
<pre>
103 
104     struct VideoReceiver {
105         Ref&lt;RTCRtpReceiver&gt; receiver;
106         Ref&lt;RealtimeIncomingVideoSource&gt; source;
107     };
108     struct AudioReceiver {
109         Ref&lt;RTCRtpReceiver&gt; receiver;
110         Ref&lt;RealtimeIncomingAudioSource&gt; source;
111     };
112     VideoReceiver videoReceiver(String&amp;&amp; trackId);
113     AudioReceiver audioReceiver(String&amp;&amp; trackId);
114 
115 private:
116     bool isLocalDescriptionSet() const final { return m_isLocalDescriptionSet; }
117 
118     Ref&lt;RTCRtpTransceiver&gt; completeAddTransceiver(Ref&lt;RTCRtpSender&gt;&amp;&amp;, const RTCRtpTransceiverInit&amp;, const String&amp; trackId, const String&amp; trackKind);
119 
120     Ref&lt;RTCRtpReceiver&gt; createReceiver(const String&amp; trackKind, const String&amp; trackId);
121 
122     template&lt;typename T&gt;
<span class="line-modified">123     ExceptionOr&lt;Ref&lt;RTCRtpTransceiver&gt;&gt; addUnifiedPlanTransceiver(T&amp;&amp; trackOrKind, const RTCRtpTransceiverInit&amp;);</span>
124 
125     Ref&lt;RTCRtpReceiver&gt; createReceiverForSource(Ref&lt;RealtimeMediaSource&gt;&amp;&amp;, std::unique_ptr&lt;RTCRtpReceiverBackend&gt;&amp;&amp;);
126 



127     Ref&lt;LibWebRTCMediaEndpoint&gt; m_endpoint;
128     bool m_isLocalDescriptionSet { false };
129     bool m_isRemoteDescriptionSet { false };
130 
131     Vector&lt;std::unique_ptr&lt;webrtc::IceCandidateInterface&gt;&gt; m_pendingCandidates;
132     Vector&lt;Ref&lt;RTCRtpReceiver&gt;&gt; m_pendingReceivers;
133 };
134 
135 } // namespace WebCore
136 
137 #endif // USE(LIBWEBRTC)
</pre>
</td>
<td>
<hr />
<pre>
 40 class LibWebRTCRtpSenderBackend;
 41 class LibWebRTCRtpTransceiverBackend;
 42 class RTCRtpReceiver;
 43 class RTCRtpReceiverBackend;
 44 class RTCSessionDescription;
 45 class RTCStatsReport;
 46 class RealtimeIncomingAudioSource;
 47 class RealtimeIncomingVideoSource;
 48 class RealtimeMediaSource;
 49 class RealtimeOutgoingAudioSource;
 50 class RealtimeOutgoingVideoSource;
 51 
 52 class LibWebRTCPeerConnectionBackend final : public PeerConnectionBackend {
 53     WTF_MAKE_FAST_ALLOCATED;
 54 public:
 55     LibWebRTCPeerConnectionBackend(RTCPeerConnection&amp;, LibWebRTCProvider&amp;);
 56     ~LibWebRTCPeerConnectionBackend();
 57 
 58     void replaceTrack(RTCRtpSender&amp;, RefPtr&lt;MediaStreamTrack&gt;&amp;&amp;, DOMPromiseDeferred&lt;void&gt;&amp;&amp;);
 59 


 60 private:
<span class="line-added"> 61     void close() final;</span>
 62     void doCreateOffer(RTCOfferOptions&amp;&amp;) final;
 63     void doCreateAnswer(RTCAnswerOptions&amp;&amp;) final;
 64     void doSetLocalDescription(RTCSessionDescription&amp;) final;
 65     void doSetRemoteDescription(RTCSessionDescription&amp;) final;
 66     void doAddIceCandidate(RTCIceCandidate&amp;) final;
 67     void doStop() final;
 68     std::unique_ptr&lt;RTCDataChannelHandler&gt; createDataChannelHandler(const String&amp;, const RTCDataChannelInit&amp;) final;
 69     bool setConfiguration(MediaEndpointConfiguration&amp;&amp;) final;
 70     void getStats(Ref&lt;DeferredPromise&gt;&amp;&amp;) final;
 71     void getStats(RTCRtpSender&amp;, Ref&lt;DeferredPromise&gt;&amp;&amp;) final;
 72     void getStats(RTCRtpReceiver&amp;, Ref&lt;DeferredPromise&gt;&amp;&amp;) final;
 73 
 74     RefPtr&lt;RTCSessionDescription&gt; localDescription() const final;
 75     RefPtr&lt;RTCSessionDescription&gt; currentLocalDescription() const final;
 76     RefPtr&lt;RTCSessionDescription&gt; pendingLocalDescription() const final;
 77 
 78     RefPtr&lt;RTCSessionDescription&gt; remoteDescription() const final;
 79     RefPtr&lt;RTCSessionDescription&gt; currentRemoteDescription() const final;
 80     RefPtr&lt;RTCSessionDescription&gt; pendingRemoteDescription() const final;
 81 
</pre>
<hr />
<pre>
102 
103     struct VideoReceiver {
104         Ref&lt;RTCRtpReceiver&gt; receiver;
105         Ref&lt;RealtimeIncomingVideoSource&gt; source;
106     };
107     struct AudioReceiver {
108         Ref&lt;RTCRtpReceiver&gt; receiver;
109         Ref&lt;RealtimeIncomingAudioSource&gt; source;
110     };
111     VideoReceiver videoReceiver(String&amp;&amp; trackId);
112     AudioReceiver audioReceiver(String&amp;&amp; trackId);
113 
114 private:
115     bool isLocalDescriptionSet() const final { return m_isLocalDescriptionSet; }
116 
117     Ref&lt;RTCRtpTransceiver&gt; completeAddTransceiver(Ref&lt;RTCRtpSender&gt;&amp;&amp;, const RTCRtpTransceiverInit&amp;, const String&amp; trackId, const String&amp; trackKind);
118 
119     Ref&lt;RTCRtpReceiver&gt; createReceiver(const String&amp; trackKind, const String&amp; trackId);
120 
121     template&lt;typename T&gt;
<span class="line-modified">122     ExceptionOr&lt;Ref&lt;RTCRtpTransceiver&gt;&gt; addTransceiverFromTrackOrKind(T&amp;&amp; trackOrKind, const RTCRtpTransceiverInit&amp;);</span>
123 
124     Ref&lt;RTCRtpReceiver&gt; createReceiverForSource(Ref&lt;RealtimeMediaSource&gt;&amp;&amp;, std::unique_ptr&lt;RTCRtpReceiverBackend&gt;&amp;&amp;);
125 
<span class="line-added">126     void suspend() final;</span>
<span class="line-added">127     void resume() final;</span>
<span class="line-added">128 </span>
129     Ref&lt;LibWebRTCMediaEndpoint&gt; m_endpoint;
130     bool m_isLocalDescriptionSet { false };
131     bool m_isRemoteDescriptionSet { false };
132 
133     Vector&lt;std::unique_ptr&lt;webrtc::IceCandidateInterface&gt;&gt; m_pendingCandidates;
134     Vector&lt;Ref&lt;RTCRtpReceiver&gt;&gt; m_pendingReceivers;
135 };
136 
137 } // namespace WebCore
138 
139 #endif // USE(LIBWEBRTC)
</pre>
</td>
</tr>
</table>
<center><a href="LibWebRTCPeerConnectionBackend.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="LibWebRTCRtpReceiverBackend.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>