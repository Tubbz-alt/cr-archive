<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/workers/Worker.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Worker.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Worker.idl.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/workers/Worker.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 28,18 ***</span>
  #include &quot;AbstractWorker.h&quot;
  #include &quot;ActiveDOMObject.h&quot;
  #include &quot;ContentSecurityPolicyResponseHeaders.h&quot;
  #include &quot;EventTarget.h&quot;
  #include &quot;MessagePort.h&quot;
  #include &quot;WorkerScriptLoaderClient.h&quot;
  #include &lt;JavaScriptCore/RuntimeFlags.h&gt;
  #include &lt;wtf/MonotonicTime.h&gt;
  #include &lt;wtf/Optional.h&gt;
  #include &lt;wtf/text/AtomStringHash.h&gt;
  
  namespace JSC {
<span class="line-modified">! class ExecState;</span>
  class JSObject;
  class JSValue;
  }
  
  namespace WebCore {
<span class="line-new-header">--- 28,19 ---</span>
  #include &quot;AbstractWorker.h&quot;
  #include &quot;ActiveDOMObject.h&quot;
  #include &quot;ContentSecurityPolicyResponseHeaders.h&quot;
  #include &quot;EventTarget.h&quot;
  #include &quot;MessagePort.h&quot;
<span class="line-added">+ #include &quot;PostMessageOptions.h&quot;</span>
  #include &quot;WorkerScriptLoaderClient.h&quot;
  #include &lt;JavaScriptCore/RuntimeFlags.h&gt;
  #include &lt;wtf/MonotonicTime.h&gt;
  #include &lt;wtf/Optional.h&gt;
  #include &lt;wtf/text/AtomStringHash.h&gt;
  
  namespace JSC {
<span class="line-modified">! class CallFrame;</span>
  class JSObject;
  class JSValue;
  }
  
  namespace WebCore {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 55,32 ***</span>
          String name;
      };
      static ExceptionOr&lt;Ref&lt;Worker&gt;&gt; create(ScriptExecutionContext&amp;, JSC::RuntimeFlags, const String&amp; url, const Options&amp;);
      virtual ~Worker();
  
<span class="line-modified">!     ExceptionOr&lt;void&gt; postMessage(JSC::ExecState&amp;, JSC::JSValue message, Vector&lt;JSC::Strong&lt;JSC::JSObject&gt;&gt;&amp;&amp;);</span>
  
      void terminate();
  
      bool hasPendingActivity() const final;
  
      String identifier() const { return m_identifier; }
  
      ScriptExecutionContext* scriptExecutionContext() const final { return ActiveDOMObject::scriptExecutionContext(); }
  
  private:
      explicit Worker(ScriptExecutionContext&amp;, JSC::RuntimeFlags, const Options&amp;);
  
      EventTargetInterface eventTargetInterface() const final { return WorkerEventTargetInterfaceType; }
  
      void notifyNetworkStateChange(bool isOnline);
  
      void didReceiveResponse(unsigned long identifier, const ResourceResponse&amp;) final;
      void notifyFinished() final;
  
<span class="line-removed">-     bool canSuspendForDocumentSuspension() const final;</span>
      void stop() final;
      const char* activeDOMObjectName() const final;
  
      static void networkStateChanged(bool isOnLine);
  
      RefPtr&lt;WorkerScriptLoader&gt; m_scriptLoader;
<span class="line-new-header">--- 56,36 ---</span>
          String name;
      };
      static ExceptionOr&lt;Ref&lt;Worker&gt;&gt; create(ScriptExecutionContext&amp;, JSC::RuntimeFlags, const String&amp; url, const Options&amp;);
      virtual ~Worker();
  
<span class="line-modified">!     ExceptionOr&lt;void&gt; postMessage(JSC::JSGlobalObject&amp;, JSC::JSValue message, PostMessageOptions&amp;&amp;);</span>
  
      void terminate();
<span class="line-added">+     bool wasTerminated() const { return m_wasTerminated; }</span>
  
      bool hasPendingActivity() const final;
  
      String identifier() const { return m_identifier; }
  
      ScriptExecutionContext* scriptExecutionContext() const final { return ActiveDOMObject::scriptExecutionContext(); }
  
<span class="line-added">+     void dispatchEvent(Event&amp;) final;</span>
<span class="line-added">+ </span>
  private:
      explicit Worker(ScriptExecutionContext&amp;, JSC::RuntimeFlags, const Options&amp;);
  
      EventTargetInterface eventTargetInterface() const final { return WorkerEventTargetInterfaceType; }
  
      void notifyNetworkStateChange(bool isOnline);
  
      void didReceiveResponse(unsigned long identifier, const ResourceResponse&amp;) final;
      void notifyFinished() final;
  
      void stop() final;
<span class="line-added">+     void suspend(ReasonForSuspension) final;</span>
<span class="line-added">+     void resume() final;</span>
      const char* activeDOMObjectName() const final;
  
      static void networkStateChanged(bool isOnLine);
  
      RefPtr&lt;WorkerScriptLoader&gt; m_scriptLoader;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 88,9 ***</span>
<span class="line-new-header">--- 93,12 ---</span>
      String m_identifier;
      WorkerGlobalScopeProxy&amp; m_contextProxy; // The proxy outlives the worker to perform thread shutdown.
      Optional&lt;ContentSecurityPolicyResponseHeaders&gt; m_contentSecurityPolicyResponseHeaders;
      MonotonicTime m_workerCreationTime;
      bool m_shouldBypassMainWorldContentSecurityPolicy { false };
<span class="line-added">+     bool m_isSuspendedForBackForwardCache { false };</span>
      JSC::RuntimeFlags m_runtimeFlags;
<span class="line-added">+     Deque&lt;RefPtr&lt;Event&gt;&gt; m_pendingEvents;</span>
<span class="line-added">+     bool m_wasTerminated { false };</span>
  };
  
  } // namespace WebCore
</pre>
<center><a href="Worker.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Worker.idl.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>