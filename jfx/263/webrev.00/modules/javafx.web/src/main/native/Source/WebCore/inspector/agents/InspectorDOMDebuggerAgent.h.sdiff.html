<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/inspector/agents/InspectorDOMDebuggerAgent.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="InspectorDOMDebuggerAgent.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="InspectorDOMStorageAgent.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/inspector/agents/InspectorDOMDebuggerAgent.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 27  * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 28  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 29  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 30  */
 31 
 32 #pragma once
 33 
 34 #include &quot;InspectorWebAgentBase.h&quot;
 35 #include &lt;JavaScriptCore/InspectorBackendDispatchers.h&gt;
 36 #include &lt;JavaScriptCore/InspectorDebuggerAgent.h&gt;
 37 #include &lt;wtf/HashMap.h&gt;
 38 #include &lt;wtf/JSONValues.h&gt;
 39 #include &lt;wtf/text/WTFString.h&gt;
 40 
 41 namespace Inspector {
 42 class InjectedScriptManager;
 43 }
 44 
 45 namespace WebCore {
 46 
<span class="line-removed"> 47 class Element;</span>
 48 class Event;
<span class="line-removed"> 49 class Frame;</span>
<span class="line-removed"> 50 class Node;</span>
 51 class RegisteredEventListener;
 52 
 53 typedef String ErrorString;
 54 
<span class="line-modified"> 55 class InspectorDOMDebuggerAgent final : public InspectorAgentBase, public Inspector::DOMDebuggerBackendDispatcherHandler, public Inspector::InspectorDebuggerAgent::Listener {</span>
 56     WTF_MAKE_NONCOPYABLE(InspectorDOMDebuggerAgent);
 57     WTF_MAKE_FAST_ALLOCATED;
 58 public:
<span class="line-modified"> 59     InspectorDOMDebuggerAgent(WebAgentContext&amp;, Inspector::InspectorDebuggerAgent*);</span>
<span class="line-removed"> 60     virtual ~InspectorDOMDebuggerAgent();</span>
 61 
 62     // InspectorAgentBase
<span class="line-modified"> 63     void didCreateFrontendAndBackend(Inspector::FrontendRouter*, Inspector::BackendDispatcher*);</span>
<span class="line-modified"> 64     void willDestroyFrontendAndBackend(Inspector::DisconnectReason);</span>
<span class="line-modified"> 65     void discardAgent();</span>

 66 
 67     // DOMDebuggerBackendDispatcherHandler
<span class="line-modified"> 68     void setURLBreakpoint(ErrorString&amp;, const String&amp; url, const bool* optionalIsRegex);</span>
<span class="line-modified"> 69     void removeURLBreakpoint(ErrorString&amp;, const String&amp; url);</span>
<span class="line-modified"> 70     void setEventBreakpoint(ErrorString&amp;, const String&amp; breakpointType, const String* eventName);</span>
<span class="line-modified"> 71     void removeEventBreakpoint(ErrorString&amp;, const String&amp; breakpointType, const String* eventName);</span>
<span class="line-removed"> 72     void setDOMBreakpoint(ErrorString&amp;, int nodeId, const String&amp; type);</span>
<span class="line-removed"> 73     void removeDOMBreakpoint(ErrorString&amp;, int nodeId, const String&amp; type);</span>
 74 
 75     // InspectorDebuggerAgent::Listener
<span class="line-modified"> 76     void debuggerWasEnabled();</span>
<span class="line-modified"> 77     void debuggerWasDisabled();</span>
 78 
 79     // InspectorInstrumentation
<span class="line-removed"> 80     void willInsertDOMNode(Node&amp; parent);</span>
<span class="line-removed"> 81     void willInvalidateStyleAttr(Element&amp;);</span>
<span class="line-removed"> 82     void didInsertDOMNode(Node&amp;);</span>
<span class="line-removed"> 83     void willRemoveDOMNode(Node&amp;);</span>
<span class="line-removed"> 84     void didRemoveDOMNode(Node&amp;);</span>
<span class="line-removed"> 85     void willModifyDOMAttr(Element&amp;);</span>
 86     void willSendXMLHttpRequest(const String&amp; url);
 87     void willFetch(const String&amp; url);
<span class="line-removed"> 88     void frameDocumentUpdated(Frame&amp;);</span>
 89     void willHandleEvent(Event&amp;, const RegisteredEventListener&amp;);
 90     void didHandleEvent();
 91     void willFireTimer(bool oneShot);
<span class="line-removed"> 92     void willFireAnimationFrame();</span>
<span class="line-removed"> 93     void mainFrameDOMContentLoaded();</span>
 94 
<span class="line-modified"> 95     void disable();</span>







 96 
 97 private:
 98     enum class URLBreakpointSource { Fetch, XHR };
 99     void breakOnURLIfNeeded(const String&amp; url, URLBreakpointSource);
100 
<span class="line-removed">101     void descriptionForDOMEvent(Node&amp; target, int breakpointType, bool insertion, JSON::Object&amp; description);</span>
<span class="line-removed">102     void updateSubtreeBreakpoints(Node*, uint32_t rootMask, bool set);</span>
<span class="line-removed">103     bool hasBreakpoint(Node*, int type);</span>
<span class="line-removed">104 </span>
105     RefPtr&lt;Inspector::DOMDebuggerBackendDispatcher&gt; m_backendDispatcher;
106     Inspector::InjectedScriptManager&amp; m_injectedScriptManager;
107 
<span class="line-removed">108     Inspector::InspectorDebuggerAgent* m_debuggerAgent { nullptr };</span>
<span class="line-removed">109 </span>
<span class="line-removed">110     HashMap&lt;Node*, uint32_t&gt; m_domBreakpoints;</span>
111     HashSet&lt;String&gt; m_listenerBreakpoints;
112 
113     enum class URLBreakpointType { RegularExpression, Text };
114     HashMap&lt;String, URLBreakpointType&gt; m_urlBreakpoints;
115 
<span class="line-removed">116     bool m_pauseOnAllAnimationFramesEnabled { false };</span>
117     bool m_pauseOnAllIntervalsEnabled { false };
118     bool m_pauseOnAllListenersEnabled { false };
119     bool m_pauseOnAllTimeoutsEnabled { false };
120     bool m_pauseOnAllURLsEnabled { false };
121 };
122 
123 } // namespace WebCore
</pre>
</td>
<td>
<hr />
<pre>
 27  * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 28  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 29  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 30  */
 31 
 32 #pragma once
 33 
 34 #include &quot;InspectorWebAgentBase.h&quot;
 35 #include &lt;JavaScriptCore/InspectorBackendDispatchers.h&gt;
 36 #include &lt;JavaScriptCore/InspectorDebuggerAgent.h&gt;
 37 #include &lt;wtf/HashMap.h&gt;
 38 #include &lt;wtf/JSONValues.h&gt;
 39 #include &lt;wtf/text/WTFString.h&gt;
 40 
 41 namespace Inspector {
 42 class InjectedScriptManager;
 43 }
 44 
 45 namespace WebCore {
 46 

 47 class Event;


 48 class RegisteredEventListener;
 49 
 50 typedef String ErrorString;
 51 
<span class="line-modified"> 52 class InspectorDOMDebuggerAgent : public InspectorAgentBase, public Inspector::DOMDebuggerBackendDispatcherHandler, public Inspector::InspectorDebuggerAgent::Listener {</span>
 53     WTF_MAKE_NONCOPYABLE(InspectorDOMDebuggerAgent);
 54     WTF_MAKE_FAST_ALLOCATED;
 55 public:
<span class="line-modified"> 56     ~InspectorDOMDebuggerAgent() override;</span>

 57 
 58     // InspectorAgentBase
<span class="line-modified"> 59     void didCreateFrontendAndBackend(Inspector::FrontendRouter*, Inspector::BackendDispatcher*) override;</span>
<span class="line-modified"> 60     void willDestroyFrontendAndBackend(Inspector::DisconnectReason) override;</span>
<span class="line-modified"> 61     void discardAgent() override;</span>
<span class="line-added"> 62     virtual bool enabled() const;</span>
 63 
 64     // DOMDebuggerBackendDispatcherHandler
<span class="line-modified"> 65     void setURLBreakpoint(ErrorString&amp;, const String&amp; url, const bool* optionalIsRegex) final;</span>
<span class="line-modified"> 66     void removeURLBreakpoint(ErrorString&amp;, const String&amp; url) final;</span>
<span class="line-modified"> 67     void setEventBreakpoint(ErrorString&amp;, const String&amp; breakpointType, const String* eventName) final;</span>
<span class="line-modified"> 68     void removeEventBreakpoint(ErrorString&amp;, const String&amp; breakpointType, const String* eventName) final;</span>


 69 
 70     // InspectorDebuggerAgent::Listener
<span class="line-modified"> 71     void debuggerWasEnabled() override;</span>
<span class="line-modified"> 72     void debuggerWasDisabled() override;</span>
 73 
 74     // InspectorInstrumentation






 75     void willSendXMLHttpRequest(const String&amp; url);
 76     void willFetch(const String&amp; url);

 77     void willHandleEvent(Event&amp;, const RegisteredEventListener&amp;);
 78     void didHandleEvent();
 79     void willFireTimer(bool oneShot);


 80 
<span class="line-modified"> 81 protected:</span>
<span class="line-added"> 82     InspectorDOMDebuggerAgent(WebAgentContext&amp;, Inspector::InspectorDebuggerAgent*);</span>
<span class="line-added"> 83     virtual void enable();</span>
<span class="line-added"> 84     virtual void disable();</span>
<span class="line-added"> 85 </span>
<span class="line-added"> 86     virtual void setAnimationFrameBreakpoint(ErrorString&amp;, bool enabled) = 0;</span>
<span class="line-added"> 87 </span>
<span class="line-added"> 88     Inspector::InspectorDebuggerAgent* m_debuggerAgent { nullptr };</span>
 89 
 90 private:
 91     enum class URLBreakpointSource { Fetch, XHR };
 92     void breakOnURLIfNeeded(const String&amp; url, URLBreakpointSource);
 93 




 94     RefPtr&lt;Inspector::DOMDebuggerBackendDispatcher&gt; m_backendDispatcher;
 95     Inspector::InjectedScriptManager&amp; m_injectedScriptManager;
 96 



 97     HashSet&lt;String&gt; m_listenerBreakpoints;
 98 
 99     enum class URLBreakpointType { RegularExpression, Text };
100     HashMap&lt;String, URLBreakpointType&gt; m_urlBreakpoints;
101 

102     bool m_pauseOnAllIntervalsEnabled { false };
103     bool m_pauseOnAllListenersEnabled { false };
104     bool m_pauseOnAllTimeoutsEnabled { false };
105     bool m_pauseOnAllURLsEnabled { false };
106 };
107 
108 } // namespace WebCore
</pre>
</td>
</tr>
</table>
<center><a href="InspectorDOMDebuggerAgent.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="InspectorDOMStorageAgent.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>