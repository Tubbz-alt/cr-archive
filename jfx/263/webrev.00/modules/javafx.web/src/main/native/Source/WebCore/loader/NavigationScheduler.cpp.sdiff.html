<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/loader/NavigationScheduler.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="MixedContentChecker.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="PingLoader.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/loader/NavigationScheduler.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
260 
261         // go(i!=0) from a frame navigates into the history of the frame only,
262         // in both IE and NS (but not in Mozilla). We can&#39;t easily do that.
263         frame.page()-&gt;backForward().goBackOrForward(m_historySteps);
264     }
265 
266 private:
267     int m_historySteps;
268 };
269 
270 class ScheduledFormSubmission : public ScheduledNavigation {
271 public:
272     ScheduledFormSubmission(Ref&lt;FormSubmission&gt;&amp;&amp; submission, LockBackForwardList lockBackForwardList, bool duringLoad)
273         : ScheduledNavigation(0, submission-&gt;lockHistory(), lockBackForwardList, duringLoad, true, submission-&gt;state().sourceDocument().shouldOpenExternalURLsPolicyToPropagate())
274         , m_submission(WTFMove(submission))
275     {
276     }
277 
278     void fire(Frame&amp; frame) override
279     {



280         UserGestureIndicator gestureIndicator(userGestureToForward());
281 
282         // The submitForm function will find a target frame before using the redirection timer.
283         // Now that the timer has fired, we need to repeat the security check which normally is done when
284         // selecting a target, in case conditions have changed. Other code paths avoid this by targeting
285         // without leaving a time window. If we fail the check just silently drop the form submission.
286         auto&amp; requestingDocument = m_submission-&gt;state().sourceDocument();
287         if (!requestingDocument.canNavigate(&amp;frame))
288             return;
289         FrameLoadRequest frameLoadRequest { requestingDocument, requestingDocument.securityOrigin(), { }, { }, lockHistory(), lockBackForwardList(), MaybeSendReferrer, AllowNavigationToInvalidURL::Yes, NewFrameOpenerPolicy::Allow, shouldOpenExternalURLs(), initiatedByMainFrame() };
290         m_submission-&gt;populateFrameLoadRequest(frameLoadRequest);
291         frame.loader().loadFrameRequest(WTFMove(frameLoadRequest), m_submission-&gt;event(), m_submission-&gt;takeState());
292     }
293 
294     void didStartTimer(Frame&amp; frame, Timer&amp; timer) override
295     {
296         if (m_haveToldClient)
297             return;
298         m_haveToldClient = true;
299 
</pre>
</td>
<td>
<hr />
<pre>
260 
261         // go(i!=0) from a frame navigates into the history of the frame only,
262         // in both IE and NS (but not in Mozilla). We can&#39;t easily do that.
263         frame.page()-&gt;backForward().goBackOrForward(m_historySteps);
264     }
265 
266 private:
267     int m_historySteps;
268 };
269 
270 class ScheduledFormSubmission : public ScheduledNavigation {
271 public:
272     ScheduledFormSubmission(Ref&lt;FormSubmission&gt;&amp;&amp; submission, LockBackForwardList lockBackForwardList, bool duringLoad)
273         : ScheduledNavigation(0, submission-&gt;lockHistory(), lockBackForwardList, duringLoad, true, submission-&gt;state().sourceDocument().shouldOpenExternalURLsPolicyToPropagate())
274         , m_submission(WTFMove(submission))
275     {
276     }
277 
278     void fire(Frame&amp; frame) override
279     {
<span class="line-added">280         if (m_submission-&gt;wasCancelled())</span>
<span class="line-added">281             return;</span>
<span class="line-added">282 </span>
283         UserGestureIndicator gestureIndicator(userGestureToForward());
284 
285         // The submitForm function will find a target frame before using the redirection timer.
286         // Now that the timer has fired, we need to repeat the security check which normally is done when
287         // selecting a target, in case conditions have changed. Other code paths avoid this by targeting
288         // without leaving a time window. If we fail the check just silently drop the form submission.
289         auto&amp; requestingDocument = m_submission-&gt;state().sourceDocument();
290         if (!requestingDocument.canNavigate(&amp;frame))
291             return;
292         FrameLoadRequest frameLoadRequest { requestingDocument, requestingDocument.securityOrigin(), { }, { }, lockHistory(), lockBackForwardList(), MaybeSendReferrer, AllowNavigationToInvalidURL::Yes, NewFrameOpenerPolicy::Allow, shouldOpenExternalURLs(), initiatedByMainFrame() };
293         m_submission-&gt;populateFrameLoadRequest(frameLoadRequest);
294         frame.loader().loadFrameRequest(WTFMove(frameLoadRequest), m_submission-&gt;event(), m_submission-&gt;takeState());
295     }
296 
297     void didStartTimer(Frame&amp; frame, Timer&amp; timer) override
298     {
299         if (m_haveToldClient)
300             return;
301         m_haveToldClient = true;
302 
</pre>
</td>
</tr>
</table>
<center><a href="MixedContentChecker.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="PingLoader.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>