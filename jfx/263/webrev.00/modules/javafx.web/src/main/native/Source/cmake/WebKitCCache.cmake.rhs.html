<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/cmake/WebKitCCache.cmake</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre><a name="1" id="anc1"></a><span class="line-modified"> 1 # Enable ccache by default, if installed. To disable it you can:</span>
<span class="line-modified"> 2 # if using script build-webkit: pass --no-use-ccache</span>
<span class="line-modified"> 3 # if using cmake: set environment variable WK_USE_CCACHE=NO</span>
<span class="line-added"> 4 if (NOT &quot;$ENV{WK_USE_CCACHE}&quot; STREQUAL &quot;NO&quot;)</span>
 5     find_program(CCACHE_FOUND ccache)
 6     if (CCACHE_FOUND)
<a name="2" id="anc2"></a><span class="line-modified"> 7         if (PORT STREQUAL &quot;Mac&quot;)</span>
<span class="line-added"> 8             set(CCACHE ${CMAKE_SOURCE_DIR}/Tools/ccache/ccache-wrapper)</span>
<span class="line-added"> 9             set_property(GLOBAL PROPERTY RULE_LAUNCH_COMPILE ${CCACHE_FOUND})</span>
<span class="line-added">10         else ()</span>
<span class="line-added">11             if (NOT DEFINED ENV{CCACHE_SLOPPINESS})</span>
<span class="line-added">12                 set(ENV{CCACHE_SLOPPINESS} time_macros)</span>
<span class="line-added">13             endif ()</span>
<span class="line-added">14             # FIXME: readlink -f isn&#39;t supported on macOS. https://bugs.webkit.org/show_bug.cgi?id=208379</span>
<span class="line-added">15             execute_process(COMMAND readlink -f ${CMAKE_CXX_COMPILER} RESULT_VARIABLE READLINK_RETCODE OUTPUT_VARIABLE REAL_CXX_PATH OUTPUT_STRIP_TRAILING_WHITESPACE ERROR_QUIET)</span>
<span class="line-added">16             execute_process(COMMAND which ${CCACHE_FOUND} RESULT_VARIABLE WHICH_RETCODE OUTPUT_VARIABLE REAL_CCACHE_PATH OUTPUT_STRIP_TRAILING_WHITESPACE ERROR_QUIET)</span>
<span class="line-added">17             if (${WHICH_RETCODE} EQUAL 0 AND ${READLINK_RETCODE} EQUAL 0 AND &quot;${REAL_CXX_PATH}&quot; STREQUAL &quot;${REAL_CCACHE_PATH}&quot;)</span>
<span class="line-added">18                 message(STATUS &quot;Enabling ccache: Compiler path already pointing to ccache. Not setting ccache prefix.&quot;)</span>
<span class="line-added">19             else ()</span>
<span class="line-added">20                 message(STATUS &quot;Enabling ccache: Setting ccache prefix for compiler.&quot;)</span>
<span class="line-added">21                 set_property(GLOBAL PROPERTY RULE_LAUNCH_COMPILE ${CCACHE_FOUND})</span>
<span class="line-added">22             endif ()</span>
<span class="line-added">23         endif ()</span>
<span class="line-added">24     else ()</span>
<span class="line-added">25         message(WARNING &quot;Enabling ccache: Couldn&#39;t find ccache program. Not enabling it.&quot;)</span>
<span class="line-added">26     endif ()</span>
<span class="line-added">27 endif ()</span>
<span class="line-added">28 </span>
<span class="line-added">29 if (&quot;$ENV{WEBKIT_USE_SCCACHE}&quot; STREQUAL &quot;YES&quot;)</span>
<span class="line-added">30     find_program(SCCACHE_FOUND sccache)</span>
<span class="line-added">31     if (SCCACHE_FOUND)</span>
<span class="line-added">32         set_property(GLOBAL PROPERTY RULE_LAUNCH_COMPILE ${SCCACHE_FOUND})</span>
33     endif ()
34 endif ()
<a name="3" id="anc3"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="3" type="hidden" />
</body>
</html>