<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/accessibility/AccessibilityObject.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AccessibilityObject.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="AccessibilityObjectInterface.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/accessibility/AccessibilityObject.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  14  * 3.  Neither the name of Apple Inc. (&quot;Apple&quot;) nor the names of
  15  *     its contributors may be used to endorse or promote products derived
  16  *     from this software without specific prior written permission.
  17  *
  18  * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS &quot;AS IS&quot; AND ANY
  19  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
  20  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  21  * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
  22  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  23  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  24  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  25  * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  26  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  27  * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  28  */
  29 
  30 #pragma once
  31 
  32 #include &quot;AccessibilityObjectInterface.h&quot;
  33 #include &quot;FloatQuad.h&quot;
<span class="line-removed">  34 #include &quot;HTMLTextFormControlElement.h&quot;</span>
  35 #include &quot;LayoutRect.h&quot;
  36 #include &quot;Path.h&quot;
  37 #include &quot;Range.h&quot;
<span class="line-removed">  38 #include &quot;TextIteratorBehavior.h&quot;</span>
<span class="line-removed">  39 #include &quot;VisiblePosition.h&quot;</span>
<span class="line-removed">  40 #include &quot;VisibleSelection.h&quot;</span>
  41 #include &lt;wtf/Forward.h&gt;
  42 #include &lt;wtf/Function.h&gt;
  43 #include &lt;wtf/RefPtr.h&gt;
  44 #include &lt;wtf/Vector.h&gt;
  45 
  46 #if PLATFORM(COCOA)
  47 #include &lt;wtf/RetainPtr.h&gt;
  48 #endif
  49 
  50 #if USE(ATK)
  51 #include &lt;wtf/glib/GRefPtr.h&gt;
  52 #endif
  53 
  54 #if PLATFORM(COCOA)
  55 
<span class="line-removed">  56 typedef struct _NSRange NSRange;</span>
<span class="line-removed">  57 </span>
  58 OBJC_CLASS NSArray;
  59 OBJC_CLASS NSAttributedString;
  60 OBJC_CLASS NSData;
  61 OBJC_CLASS NSMutableAttributedString;
  62 OBJC_CLASS NSString;
  63 OBJC_CLASS NSValue;
  64 OBJC_CLASS NSView;
  65 
  66 #endif
  67 
  68 namespace WebCore {
  69 
  70 class AccessibilityObject;
<span class="line-removed">  71 class AccessibilityScrollView;</span>
<span class="line-removed">  72 class AXObjectCache;</span>
<span class="line-removed">  73 class Element;</span>
<span class="line-removed">  74 class Frame;</span>
<span class="line-removed">  75 class FrameView;</span>
  76 class IntPoint;
  77 class IntSize;
<span class="line-removed">  78 class Node;</span>
<span class="line-removed">  79 class Page;</span>
<span class="line-removed">  80 class RenderObject;</span>
  81 class ScrollableArea;
<span class="line-removed">  82 class ScrollView;</span>
<span class="line-removed">  83 class Widget;</span>
<span class="line-removed">  84 struct ScrollRectToVisibleOptions;</span>
<span class="line-removed">  85 </span>
<span class="line-removed">  86 enum class AccessibilityTextSource {</span>
<span class="line-removed">  87     Alternative,</span>
<span class="line-removed">  88     Children,</span>
<span class="line-removed">  89     Summary,</span>
<span class="line-removed">  90     Help,</span>
<span class="line-removed">  91     Visible,</span>
<span class="line-removed">  92     TitleTag,</span>
<span class="line-removed">  93     Placeholder,</span>
<span class="line-removed">  94     LabelByElement,</span>
<span class="line-removed">  95     Title,</span>
<span class="line-removed">  96     Subtitle,</span>
<span class="line-removed">  97     Action,</span>
<span class="line-removed">  98 };</span>
  99 
 100 struct AccessibilityText {
 101     String text;
 102     AccessibilityTextSource textSource;
<span class="line-modified"> 103     Vector&lt;RefPtr&lt;AccessibilityObject&gt;&gt; textElements;</span>
 104 
 105     AccessibilityText(const String&amp; t, const AccessibilityTextSource&amp; s)
 106         : text(t)
 107         , textSource(s)
 108     { }
 109 
<span class="line-modified"> 110     AccessibilityText(const String&amp; t, const AccessibilityTextSource&amp; s, Vector&lt;RefPtr&lt;AccessibilityObject&gt;&gt; elements)</span>
 111         : text(t)
 112         , textSource(s)
<span class="line-modified"> 113         , textElements(WTFMove(elements))</span>
<span class="line-modified"> 114     { }</span>



 115 
<span class="line-modified"> 116     AccessibilityText(const String&amp; t, const AccessibilityTextSource&amp; s, RefPtr&lt;AccessibilityObject&gt;&amp;&amp; element)</span>
 117         : text(t)
 118         , textSource(s)
 119     {
<span class="line-modified"> 120         textElements.append(WTFMove(element));</span>
 121     }
 122 };
 123 
<span class="line-removed"> 124 struct AccessibilityTextUnderElementMode {</span>
<span class="line-removed"> 125     enum ChildrenInclusion {</span>
<span class="line-removed"> 126         TextUnderElementModeSkipIgnoredChildren,</span>
<span class="line-removed"> 127         TextUnderElementModeIncludeAllChildren,</span>
<span class="line-removed"> 128         TextUnderElementModeIncludeNameFromContentsChildren, // This corresponds to ARIA concept: nameFrom</span>
<span class="line-removed"> 129     };</span>
<span class="line-removed"> 130 </span>
<span class="line-removed"> 131     ChildrenInclusion childrenInclusion;</span>
<span class="line-removed"> 132     bool includeFocusableContent;</span>
<span class="line-removed"> 133     Node* ignoredChildNode;</span>
<span class="line-removed"> 134 </span>
<span class="line-removed"> 135     AccessibilityTextUnderElementMode(ChildrenInclusion c = TextUnderElementModeSkipIgnoredChildren, bool i = false, Node* ignored = nullptr)</span>
<span class="line-removed"> 136         : childrenInclusion(c)</span>
<span class="line-removed"> 137         , includeFocusableContent(i)</span>
<span class="line-removed"> 138         , ignoredChildNode(ignored)</span>
<span class="line-removed"> 139     { }</span>
<span class="line-removed"> 140 };</span>
<span class="line-removed"> 141 </span>
<span class="line-removed"> 142 // Use this struct to store the isIgnored data that depends on the parents, so that in addChildren()</span>
<span class="line-removed"> 143 // we avoid going up the parent chain for each element while traversing the tree with useful information already.</span>
<span class="line-removed"> 144 struct AccessibilityIsIgnoredFromParentData {</span>
<span class="line-removed"> 145     AccessibilityObject* parent { nullptr };</span>
<span class="line-removed"> 146     bool isAXHidden { false };</span>
<span class="line-removed"> 147     bool isPresentationalChildOfAriaRole { false };</span>
<span class="line-removed"> 148     bool isDescendantOfBarrenParent { false };</span>
<span class="line-removed"> 149 </span>
<span class="line-removed"> 150     AccessibilityIsIgnoredFromParentData(AccessibilityObject* parent = nullptr)</span>
<span class="line-removed"> 151         : parent(parent)</span>
<span class="line-removed"> 152     { }</span>
<span class="line-removed"> 153 </span>
<span class="line-removed"> 154     bool isNull() const { return !parent; }</span>
<span class="line-removed"> 155 };</span>
<span class="line-removed"> 156 </span>
<span class="line-removed"> 157 enum class AccessibilityOrientation {</span>
<span class="line-removed"> 158     Vertical,</span>
<span class="line-removed"> 159     Horizontal,</span>
<span class="line-removed"> 160     Undefined,</span>
<span class="line-removed"> 161 };</span>
<span class="line-removed"> 162 </span>
<span class="line-removed"> 163 enum class AccessibilityObjectInclusion {</span>
<span class="line-removed"> 164     IncludeObject,</span>
<span class="line-removed"> 165     IgnoreObject,</span>
<span class="line-removed"> 166     DefaultBehavior,</span>
<span class="line-removed"> 167 };</span>
<span class="line-removed"> 168 </span>
<span class="line-removed"> 169 enum class AccessibilityButtonState {</span>
<span class="line-removed"> 170     Off = 0,</span>
<span class="line-removed"> 171     On,</span>
<span class="line-removed"> 172     Mixed,</span>
<span class="line-removed"> 173 };</span>
<span class="line-removed"> 174 </span>
<span class="line-removed"> 175 enum class AccessibilitySortDirection {</span>
<span class="line-removed"> 176     None,</span>
<span class="line-removed"> 177     Ascending,</span>
<span class="line-removed"> 178     Descending,</span>
<span class="line-removed"> 179     Other,</span>
<span class="line-removed"> 180     Invalid,</span>
<span class="line-removed"> 181 };</span>
<span class="line-removed"> 182 </span>
<span class="line-removed"> 183 enum class AccessibilitySearchDirection {</span>
<span class="line-removed"> 184     Next = 1,</span>
<span class="line-removed"> 185     Previous,</span>
<span class="line-removed"> 186 };</span>
<span class="line-removed"> 187 </span>
<span class="line-removed"> 188 enum class AccessibilitySearchKey {</span>
<span class="line-removed"> 189     AnyType = 1,</span>
<span class="line-removed"> 190     Article,</span>
<span class="line-removed"> 191     BlockquoteSameLevel,</span>
<span class="line-removed"> 192     Blockquote,</span>
<span class="line-removed"> 193     BoldFont,</span>
<span class="line-removed"> 194     Button,</span>
<span class="line-removed"> 195     CheckBox,</span>
<span class="line-removed"> 196     Control,</span>
<span class="line-removed"> 197     DifferentType,</span>
<span class="line-removed"> 198     FontChange,</span>
<span class="line-removed"> 199     FontColorChange,</span>
<span class="line-removed"> 200     Frame,</span>
<span class="line-removed"> 201     Graphic,</span>
<span class="line-removed"> 202     HeadingLevel1,</span>
<span class="line-removed"> 203     HeadingLevel2,</span>
<span class="line-removed"> 204     HeadingLevel3,</span>
<span class="line-removed"> 205     HeadingLevel4,</span>
<span class="line-removed"> 206     HeadingLevel5,</span>
<span class="line-removed"> 207     HeadingLevel6,</span>
<span class="line-removed"> 208     HeadingSameLevel,</span>
<span class="line-removed"> 209     Heading,</span>
<span class="line-removed"> 210     Highlighted,</span>
<span class="line-removed"> 211     ItalicFont,</span>
<span class="line-removed"> 212     KeyboardFocusable,</span>
<span class="line-removed"> 213     Landmark,</span>
<span class="line-removed"> 214     Link,</span>
<span class="line-removed"> 215     List,</span>
<span class="line-removed"> 216     LiveRegion,</span>
<span class="line-removed"> 217     MisspelledWord,</span>
<span class="line-removed"> 218     Outline,</span>
<span class="line-removed"> 219     PlainText,</span>
<span class="line-removed"> 220     RadioGroup,</span>
<span class="line-removed"> 221     SameType,</span>
<span class="line-removed"> 222     StaticText,</span>
<span class="line-removed"> 223     StyleChange,</span>
<span class="line-removed"> 224     TableSameLevel,</span>
<span class="line-removed"> 225     Table,</span>
<span class="line-removed"> 226     TextField,</span>
<span class="line-removed"> 227     Underline,</span>
<span class="line-removed"> 228     UnvisitedLink,</span>
<span class="line-removed"> 229     VisitedLink,</span>
<span class="line-removed"> 230 };</span>
<span class="line-removed"> 231 </span>
<span class="line-removed"> 232 enum class AccessibilityVisiblePositionForBounds {</span>
<span class="line-removed"> 233     First,</span>
<span class="line-removed"> 234     Last,</span>
<span class="line-removed"> 235 };</span>
<span class="line-removed"> 236 </span>
<span class="line-removed"> 237 struct AccessibilitySearchCriteria {</span>
<span class="line-removed"> 238     AccessibilityObject* startObject;</span>
<span class="line-removed"> 239     AccessibilitySearchDirection searchDirection;</span>
<span class="line-removed"> 240     Vector&lt;AccessibilitySearchKey&gt; searchKeys;</span>
<span class="line-removed"> 241     String searchText;</span>
<span class="line-removed"> 242     unsigned resultsLimit;</span>
<span class="line-removed"> 243     bool visibleOnly;</span>
<span class="line-removed"> 244     bool immediateDescendantsOnly;</span>
<span class="line-removed"> 245 </span>
<span class="line-removed"> 246     AccessibilitySearchCriteria(AccessibilityObject* startObject, AccessibilitySearchDirection searchDirection, String searchText, unsigned resultsLimit, bool visibleOnly, bool immediateDescendantsOnly)</span>
<span class="line-removed"> 247         : startObject(startObject)</span>
<span class="line-removed"> 248         , searchDirection(searchDirection)</span>
<span class="line-removed"> 249         , searchText(searchText)</span>
<span class="line-removed"> 250         , resultsLimit(resultsLimit)</span>
<span class="line-removed"> 251         , visibleOnly(visibleOnly)</span>
<span class="line-removed"> 252         , immediateDescendantsOnly(immediateDescendantsOnly)</span>
<span class="line-removed"> 253     { }</span>
<span class="line-removed"> 254 };</span>
<span class="line-removed"> 255 </span>
<span class="line-removed"> 256 enum class AccessibilityDetachmentType { CacheDestroyed, ElementDestroyed };</span>
<span class="line-removed"> 257 </span>
<span class="line-removed"> 258 struct VisiblePositionRange {</span>
<span class="line-removed"> 259 </span>
<span class="line-removed"> 260     VisiblePosition start;</span>
<span class="line-removed"> 261     VisiblePosition end;</span>
<span class="line-removed"> 262 </span>
<span class="line-removed"> 263     VisiblePositionRange() {}</span>
<span class="line-removed"> 264 </span>
<span class="line-removed"> 265     VisiblePositionRange(const VisiblePosition&amp; s, const VisiblePosition&amp; e)</span>
<span class="line-removed"> 266         : start(s)</span>
<span class="line-removed"> 267         , end(e)</span>
<span class="line-removed"> 268     { }</span>
<span class="line-removed"> 269 </span>
<span class="line-removed"> 270     VisiblePositionRange(const VisibleSelection&amp; selection)</span>
<span class="line-removed"> 271         : start(selection.start())</span>
<span class="line-removed"> 272         , end(selection.end())</span>
<span class="line-removed"> 273     { }</span>
<span class="line-removed"> 274 </span>
<span class="line-removed"> 275     bool isNull() const { return start.isNull() || end.isNull(); }</span>
<span class="line-removed"> 276 };</span>
<span class="line-removed"> 277 </span>
<span class="line-removed"> 278 struct PlainTextRange {</span>
<span class="line-removed"> 279 </span>
<span class="line-removed"> 280     unsigned start { 0 };</span>
<span class="line-removed"> 281     unsigned length { 0 };</span>
<span class="line-removed"> 282 </span>
<span class="line-removed"> 283     PlainTextRange() = default;</span>
<span class="line-removed"> 284 </span>
<span class="line-removed"> 285     PlainTextRange(unsigned s, unsigned l)</span>
<span class="line-removed"> 286         : start(s)</span>
<span class="line-removed"> 287         , length(l)</span>
<span class="line-removed"> 288     { }</span>
<span class="line-removed"> 289 </span>
<span class="line-removed"> 290 #if PLATFORM(COCOA)</span>
<span class="line-removed"> 291     PlainTextRange(NSRange);</span>
<span class="line-removed"> 292 #endif</span>
<span class="line-removed"> 293 </span>
<span class="line-removed"> 294     bool isNull() const { return !start &amp;&amp; !length; }</span>
<span class="line-removed"> 295 };</span>
<span class="line-removed"> 296 </span>
<span class="line-removed"> 297 enum class AccessibilitySearchTextStartFrom {</span>
<span class="line-removed"> 298     Begin, // Search from the beginning of the element.</span>
<span class="line-removed"> 299     Selection, // Search from the position of the current selection.</span>
<span class="line-removed"> 300     End // Search from the end of the element.</span>
<span class="line-removed"> 301 };</span>
<span class="line-removed"> 302 </span>
<span class="line-removed"> 303 enum class AccessibilitySearchTextDirection {</span>
<span class="line-removed"> 304     Forward, // Occurrence after the starting range.</span>
<span class="line-removed"> 305     Backward, // Occurrence before the starting range.</span>
<span class="line-removed"> 306     Closest, // Closest occurrence to the starting range, whether after or before.</span>
<span class="line-removed"> 307     All // All occurrences</span>
<span class="line-removed"> 308 };</span>
<span class="line-removed"> 309 </span>
<span class="line-removed"> 310 struct AccessibilitySearchTextCriteria {</span>
<span class="line-removed"> 311     Vector&lt;String&gt; searchStrings; // Text strings to search for.</span>
<span class="line-removed"> 312     AccessibilitySearchTextStartFrom start;</span>
<span class="line-removed"> 313     AccessibilitySearchTextDirection direction;</span>
<span class="line-removed"> 314 </span>
<span class="line-removed"> 315     AccessibilitySearchTextCriteria()</span>
<span class="line-removed"> 316         : start(AccessibilitySearchTextStartFrom::Selection)</span>
<span class="line-removed"> 317         , direction(AccessibilitySearchTextDirection::Forward)</span>
<span class="line-removed"> 318     { }</span>
<span class="line-removed"> 319 };</span>
<span class="line-removed"> 320 </span>
<span class="line-removed"> 321 enum class AccessibilityTextOperationType {</span>
<span class="line-removed"> 322     Select,</span>
<span class="line-removed"> 323     Replace,</span>
<span class="line-removed"> 324     Capitalize,</span>
<span class="line-removed"> 325     Lowercase,</span>
<span class="line-removed"> 326     Uppercase</span>
<span class="line-removed"> 327 };</span>
<span class="line-removed"> 328 </span>
<span class="line-removed"> 329 struct AccessibilityTextOperation {</span>
<span class="line-removed"> 330     Vector&lt;RefPtr&lt;Range&gt;&gt; textRanges; // text on which perform the operation.</span>
<span class="line-removed"> 331     AccessibilityTextOperationType type;</span>
<span class="line-removed"> 332     String replacementText; // For type = replace.</span>
<span class="line-removed"> 333 </span>
<span class="line-removed"> 334     AccessibilityTextOperation()</span>
<span class="line-removed"> 335         : type(AccessibilityTextOperationType::Select)</span>
<span class="line-removed"> 336     { }</span>
<span class="line-removed"> 337 };</span>
<span class="line-removed"> 338 </span>
<span class="line-removed"> 339 enum class AccessibilityMathScriptObjectType { Subscript, Superscript };</span>
<span class="line-removed"> 340 enum class AccessibilityMathMultiscriptObjectType { PreSubscript, PreSuperscript, PostSubscript, PostSuperscript };</span>
<span class="line-removed"> 341 </span>
<span class="line-removed"> 342 enum class AccessibilityCurrentState { False, True, Page, Step, Location, Date, Time };</span>
<span class="line-removed"> 343 enum class AccessibilityConversionSpace { Screen, Page };</span>
<span class="line-removed"> 344 </span>
 345 bool nodeHasPresentationRole(Node*);
 346 
<span class="line-modified"> 347 class AccessibilityObject : public RefCounted&lt;AccessibilityObject&gt;, public AccessibilityObjectInterface {</span>
<span class="line-removed"> 348 protected:</span>
<span class="line-removed"> 349     AccessibilityObject() = default;</span>
<span class="line-removed"> 350 </span>
 351 public:
 352     virtual ~AccessibilityObject();
 353 
 354     // After constructing an AccessibilityObject, it must be given a
 355     // unique ID, then added to AXObjectCache, and finally init() must
 356     // be called last.
<span class="line-modified"> 357     void setAXObjectID(AXID axObjectID) { m_id = axObjectID; }</span>
<span class="line-modified"> 358     virtual void init() { }</span>
<span class="line-removed"> 359 </span>
<span class="line-removed"> 360     // When the corresponding WebCore object that this AccessibilityObject</span>
<span class="line-removed"> 361     // wraps is deleted, it must be detached.</span>
<span class="line-removed"> 362     virtual void detach(AccessibilityDetachmentType, AXObjectCache* cache = nullptr);</span>
<span class="line-removed"> 363     virtual bool isDetached() const;</span>
 364 
<span class="line-modified"> 365     typedef Vector&lt;RefPtr&lt;AccessibilityObject&gt;&gt; AccessibilityChildrenVector;</span>
 366 
<span class="line-modified"> 367     virtual bool isAccessibilityNodeObject() const { return false; }</span>
<span class="line-modified"> 368     virtual bool isAccessibilityRenderObject() const { return false; }</span>
<span class="line-modified"> 369     virtual bool isAccessibilityScrollbar() const { return false; }</span>
<span class="line-modified"> 370     virtual bool isAccessibilityScrollView() const { return false; }</span>
<span class="line-modified"> 371     virtual bool isAccessibilitySVGRoot() const { return false; }</span>
<span class="line-modified"> 372     virtual bool isAccessibilitySVGElement() const { return false; }</span>
 373 
<span class="line-modified"> 374     bool accessibilityObjectContainsText(String *) const;</span>
<span class="line-modified"> 375 </span>
<span class="line-removed"> 376     virtual bool isAttachmentElement() const { return false; }</span>
<span class="line-removed"> 377     virtual bool isHeading() const { return false; }</span>
 378     bool isLink() const override { return false; }
 379     bool isImage() const override { return false; }
<span class="line-modified"> 380     virtual bool isImageMap() const { return roleValue() == AccessibilityRole::ImageMap; }</span>
<span class="line-modified"> 381     virtual bool isNativeImage() const { return false; }</span>
<span class="line-modified"> 382     virtual bool isImageButton() const { return false; }</span>
<span class="line-modified"> 383     virtual bool isPasswordField() const { return false; }</span>
<span class="line-modified"> 384     bool isContainedByPasswordField() const;</span>
<span class="line-modified"> 385     virtual AccessibilityObject* passwordFieldOrContainingPasswordField() { return nullptr; }</span>
<span class="line-modified"> 386     virtual bool isNativeTextControl() const { return false; }</span>
<span class="line-modified"> 387     virtual bool isSearchField() const { return false; }</span>
<span class="line-modified"> 388     bool isWebArea() const { return roleValue() == AccessibilityRole::WebArea; }</span>
<span class="line-removed"> 389     virtual bool isCheckbox() const { return roleValue() == AccessibilityRole::CheckBox; }</span>
<span class="line-removed"> 390     virtual bool isRadioButton() const { return roleValue() == AccessibilityRole::RadioButton; }</span>
<span class="line-removed"> 391     virtual bool isNativeListBox() const { return false; }</span>
<span class="line-removed"> 392     bool isListBox() const { return roleValue() == AccessibilityRole::ListBox; }</span>
<span class="line-removed"> 393     virtual bool isListBoxOption() const { return false; }</span>
 394     bool isAttachment() const override { return false; }
<span class="line-modified"> 395     virtual bool isMediaTimeline() const { return false; }</span>
<span class="line-modified"> 396     virtual bool isMenuRelated() const { return false; }</span>
<span class="line-modified"> 397     virtual bool isMenu() const { return false; }</span>
<span class="line-modified"> 398     virtual bool isMenuBar() const { return false; }</span>
<span class="line-modified"> 399     virtual bool isMenuButton() const { return false; }</span>
<span class="line-modified"> 400     virtual bool isMenuItem() const { return false; }</span>
 401     bool isFileUploadButton() const override { return false; }
<span class="line-modified"> 402     virtual bool isInputImage() const { return false; }</span>
<span class="line-modified"> 403     virtual bool isProgressIndicator() const { return false; }</span>
<span class="line-modified"> 404     virtual bool isSlider() const { return false; }</span>
<span class="line-modified"> 405     virtual bool isSliderThumb() const { return false; }</span>
<span class="line-modified"> 406     virtual bool isInputSlider() const { return false; }</span>
<span class="line-modified"> 407     virtual bool isControl() const { return false; }</span>
<span class="line-modified"> 408     virtual bool isLabel() const { return false; }</span>
<span class="line-modified"> 409     virtual bool isList() const { return false; }</span>
<span class="line-modified"> 410     virtual bool isTable() const { return false; }</span>
<span class="line-modified"> 411     virtual bool isDataTable() const { return false; }</span>
<span class="line-modified"> 412     virtual bool isTableRow() const { return false; }</span>
<span class="line-modified"> 413     virtual bool isTableColumn() const { return false; }</span>
<span class="line-modified"> 414     virtual bool isTableCell() const { return false; }</span>
<span class="line-modified"> 415     virtual bool isFieldset() const { return false; }</span>
<span class="line-modified"> 416     virtual bool isGroup() const { return false; }</span>
<span class="line-modified"> 417     virtual bool isARIATreeGridRow() const { return false; }</span>





 418     bool isImageMapLink() const override { return false; }
<span class="line-modified"> 419     virtual bool isMenuList() const { return false; }</span>
<span class="line-modified"> 420     virtual bool isMenuListPopup() const { return false; }</span>
<span class="line-modified"> 421     virtual bool isMenuListOption() const { return false; }</span>
<span class="line-modified"> 422     virtual bool isSpinButton() const { return roleValue() == AccessibilityRole::SpinButton; }</span>
<span class="line-modified"> 423     virtual bool isNativeSpinButton() const { return false; }</span>
<span class="line-modified"> 424     virtual bool isSpinButtonPart() const { return false; }</span>
<span class="line-modified"> 425     virtual bool isMockObject() const { return false; }</span>
<span class="line-modified"> 426     bool isMediaControlLabel() const override { return false; }</span>
<span class="line-modified"> 427     virtual bool isMediaObject() const { return false; }</span>
<span class="line-modified"> 428     bool isSwitch() const { return roleValue() == AccessibilityRole::Switch; }</span>
<span class="line-modified"> 429     bool isToggleButton() const { return roleValue() == AccessibilityRole::ToggleButton; }</span>
<span class="line-modified"> 430     bool isTextControl() const;</span>
<span class="line-modified"> 431     bool isARIATextControl() const;</span>
<span class="line-modified"> 432     bool isNonNativeTextControl() const;</span>
<span class="line-modified"> 433     bool isTabList() const { return roleValue() == AccessibilityRole::TabList; }</span>
<span class="line-modified"> 434     bool isTabItem() const { return roleValue() == AccessibilityRole::Tab; }</span>
<span class="line-modified"> 435     bool isRadioGroup() const { return roleValue() == AccessibilityRole::RadioGroup; }</span>
<span class="line-modified"> 436     bool isComboBox() const { return roleValue() == AccessibilityRole::ComboBox; }</span>
<span class="line-modified"> 437     bool isTree() const override { return roleValue() == AccessibilityRole::Tree; }</span>
<span class="line-modified"> 438     bool isTreeGrid() const { return roleValue() == AccessibilityRole::TreeGrid; }</span>
<span class="line-modified"> 439     bool isTreeItem() const override { return roleValue() == AccessibilityRole::TreeItem; }</span>
<span class="line-modified"> 440     bool isScrollbar() const override { return roleValue() == AccessibilityRole::ScrollBar; }</span>
<span class="line-modified"> 441     bool isButton() const;</span>
<span class="line-modified"> 442     bool isListItem() const { return roleValue() == AccessibilityRole::ListItem; }</span>
<span class="line-modified"> 443     bool isCheckboxOrRadio() const { return isCheckbox() || isRadioButton(); }</span>
<span class="line-modified"> 444     bool isScrollView() const { return roleValue() == AccessibilityRole::ScrollArea; }</span>
<span class="line-modified"> 445     bool isCanvas() const { return roleValue() == AccessibilityRole::Canvas; }</span>
<span class="line-modified"> 446     bool isPopUpButton() const { return roleValue() == AccessibilityRole::PopUpButton; }</span>
<span class="line-modified"> 447     bool isBlockquote() const;</span>
<span class="line-modified"> 448     bool isLandmark() const;</span>
<span class="line-modified"> 449     bool isColorWell() const { return roleValue() == AccessibilityRole::ColorWell; }</span>
<span class="line-modified"> 450     bool isRangeControl() const;</span>
<span class="line-modified"> 451     bool isMeter() const;</span>
<span class="line-modified"> 452     bool isSplitter() const { return roleValue() == AccessibilityRole::Splitter; }</span>
<span class="line-modified"> 453     bool isToolbar() const { return roleValue() == AccessibilityRole::Toolbar; }</span>
<span class="line-modified"> 454     bool isStyleFormatGroup() const;</span>
<span class="line-modified"> 455     bool isFigureElement() const;</span>
<span class="line-modified"> 456     bool isKeyboardFocusable() const;</span>
<span class="line-modified"> 457     bool isSummary() const { return roleValue() == AccessibilityRole::Summary; }</span>
<span class="line-modified"> 458     bool isOutput() const;</span>
<span class="line-modified"> 459 </span>
<span class="line-modified"> 460     virtual bool isChecked() const { return false; }</span>
<span class="line-modified"> 461     virtual bool isEnabled() const { return false; }</span>
<span class="line-removed"> 462     virtual bool isSelected() const { return false; }</span>
<span class="line-removed"> 463     virtual bool isFocused() const { return false; }</span>
<span class="line-removed"> 464     virtual bool isHovered() const { return false; }</span>
<span class="line-removed"> 465     virtual bool isIndeterminate() const { return false; }</span>
<span class="line-removed"> 466     virtual bool isLoaded() const { return false; }</span>
<span class="line-removed"> 467     virtual bool isMultiSelectable() const { return false; }</span>
<span class="line-removed"> 468     virtual bool isOffScreen() const { return false; }</span>
<span class="line-removed"> 469     virtual bool isPressed() const { return false; }</span>
<span class="line-removed"> 470     virtual bool isUnvisited() const { return false; }</span>
<span class="line-removed"> 471     virtual bool isVisited() const { return false; }</span>
<span class="line-removed"> 472     virtual bool isRequired() const { return false; }</span>
<span class="line-removed"> 473     virtual bool supportsRequiredAttribute() const { return false; }</span>
<span class="line-removed"> 474     virtual bool isLinked() const { return false; }</span>
<span class="line-removed"> 475     virtual bool isExpanded() const;</span>
<span class="line-removed"> 476     virtual bool isVisible() const { return true; }</span>
<span class="line-removed"> 477     virtual bool isCollapsed() const { return false; }</span>
<span class="line-removed"> 478     virtual void setIsExpanded(bool) { }</span>
 479     FloatRect relativeFrame() const override;
<span class="line-modified"> 480     FloatRect convertFrameToSpace(const FloatRect&amp;, AccessibilityConversionSpace) const;</span>
 481 
 482     // In a multi-select list, many items can be selected but only one is active at a time.
<span class="line-modified"> 483     virtual bool isSelectedOptionActive() const { return false; }</span>
<span class="line-modified"> 484 </span>
<span class="line-modified"> 485     virtual bool hasBoldFont() const { return false; }</span>
<span class="line-modified"> 486     virtual bool hasItalicFont() const { return false; }</span>
<span class="line-modified"> 487     bool hasMisspelling() const;</span>
<span class="line-modified"> 488     virtual bool hasPlainText() const { return false; }</span>
<span class="line-modified"> 489     virtual bool hasSameFont(RenderObject*) const { return false; }</span>
<span class="line-modified"> 490     virtual bool hasSameFontColor(RenderObject*) const { return false; }</span>
<span class="line-modified"> 491     virtual bool hasSameStyle(RenderObject*) const { return false; }</span>
<span class="line-modified"> 492     bool isStaticText() const { return roleValue() == AccessibilityRole::StaticText; }</span>
<span class="line-modified"> 493     virtual bool hasUnderline() const { return false; }</span>
<span class="line-modified"> 494     bool hasHighlighting() const;</span>
<span class="line-modified"> 495 </span>
<span class="line-modified"> 496     bool supportsDatetimeAttribute() const;</span>
<span class="line-modified"> 497     const AtomString&amp; datetimeAttributeValue() const;</span>
<span class="line-modified"> 498 </span>
<span class="line-modified"> 499     virtual bool canSetFocusAttribute() const { return false; }</span>
<span class="line-modified"> 500     virtual bool canSetTextRangeAttributes() const { return false; }</span>
<span class="line-modified"> 501     virtual bool canSetValueAttribute() const { return false; }</span>
<span class="line-modified"> 502     virtual bool canSetNumericValue() const { return false; }</span>
<span class="line-modified"> 503     virtual bool canSetSelectedAttribute() const { return false; }</span>
<span class="line-modified"> 504     virtual bool canSetSelectedChildrenAttribute() const { return false; }</span>
<span class="line-modified"> 505     virtual bool canSetExpandedAttribute() const { return false; }</span>
<span class="line-modified"> 506 </span>
<span class="line-modified"> 507     virtual Element* element() const;</span>
<span class="line-modified"> 508     virtual Node* node() const { return nullptr; }</span>
<span class="line-modified"> 509     virtual RenderObject* renderer() const { return nullptr; }</span>
 510     bool accessibilityIsIgnored() const override;
<span class="line-modified"> 511     virtual AccessibilityObjectInclusion defaultObjectInclusion() const;</span>
<span class="line-modified"> 512     bool accessibilityIsIgnoredByDefault() const;</span>
<span class="line-modified"> 513 </span>
<span class="line-modified"> 514     bool isShowingValidationMessage() const;</span>
<span class="line-modified"> 515     String validationMessage() const;</span>
<span class="line-modified"> 516 </span>
<span class="line-modified"> 517     unsigned blockquoteLevel() const;</span>
<span class="line-modified"> 518     virtual int headingLevel() const { return 0; }</span>
<span class="line-modified"> 519     virtual int tableLevel() const { return 0; }</span>
<span class="line-modified"> 520     virtual AccessibilityButtonState checkboxOrRadioValue() const;</span>
<span class="line-modified"> 521     virtual String valueDescription() const { return String(); }</span>
<span class="line-modified"> 522     virtual float valueForRange() const { return 0.0f; }</span>
<span class="line-modified"> 523     virtual float maxValueForRange() const { return 0.0f; }</span>
<span class="line-modified"> 524     virtual float minValueForRange() const { return 0.0f; }</span>
<span class="line-modified"> 525     virtual float stepValueForRange() const { return 0.0f; }</span>
<span class="line-modified"> 526     virtual AccessibilityObject* selectedRadioButton() { return nullptr; }</span>
<span class="line-modified"> 527     virtual AccessibilityObject* selectedTabItem() { return nullptr; }</span>
<span class="line-modified"> 528     AccessibilityObject* selectedListItem();</span>
<span class="line-modified"> 529     virtual int layoutCount() const { return 0; }</span>
<span class="line-modified"> 530     virtual double estimatedLoadingProgress() const { return 0; }</span>
 531     WEBCORE_EXPORT static bool isARIAControl(AccessibilityRole);
 532     WEBCORE_EXPORT static bool isARIAInput(AccessibilityRole);
 533 
<span class="line-modified"> 534     virtual bool supportsARIAOwns() const { return false; }</span>
<span class="line-modified"> 535     bool isActiveDescendantOfFocusedContainer() const;</span>
<span class="line-modified"> 536     void ariaActiveDescendantReferencingElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 537     void ariaControlsElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 538     void ariaControlsReferencingElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 539     void ariaDescribedByElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 540     void ariaDescribedByReferencingElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 541     void ariaDetailsElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 542     void ariaDetailsReferencingElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 543     void ariaErrorMessageElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 544     void ariaErrorMessageReferencingElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 545     void ariaFlowToElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 546     void ariaFlowToReferencingElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 547     void ariaLabelledByElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 548     void ariaLabelledByReferencingElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 549     void ariaOwnsElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 550     void ariaOwnsReferencingElements(AccessibilityChildrenVector&amp;) const;</span>
<span class="line-modified"> 551 </span>
<span class="line-modified"> 552     virtual bool hasPopup() const { return false; }</span>
<span class="line-modified"> 553     String popupValue() const;</span>
<span class="line-modified"> 554     bool hasDatalist() const;</span>
<span class="line-modified"> 555     bool supportsHasPopup() const;</span>
<span class="line-modified"> 556     bool pressedIsPresent() const;</span>
<span class="line-modified"> 557     bool ariaIsMultiline() const;</span>
<span class="line-modified"> 558     String invalidStatus() const;</span>
<span class="line-modified"> 559     bool supportsPressed() const;</span>
<span class="line-modified"> 560     bool supportsExpanded() const;</span>
<span class="line-modified"> 561     bool supportsChecked() const;</span>
<span class="line-modified"> 562     AccessibilitySortDirection sortDirection() const;</span>
<span class="line-modified"> 563     virtual bool canvasHasFallbackContent() const { return false; }</span>
<span class="line-modified"> 564     bool supportsRangeValue() const;</span>
<span class="line-modified"> 565     const AtomString&amp; identifierAttribute() const;</span>
<span class="line-modified"> 566     const AtomString&amp; linkRelValue() const;</span>
<span class="line-modified"> 567     void classList(Vector&lt;String&gt;&amp;) const;</span>
<span class="line-modified"> 568     virtual String roleDescription() const;</span>
<span class="line-modified"> 569     AccessibilityCurrentState currentState() const;</span>
<span class="line-modified"> 570     String currentValue() const;</span>
<span class="line-modified"> 571     bool supportsCurrent() const;</span>
<span class="line-removed"> 572     const String keyShortcutsValue() const;</span>
 573 
 574     // This function checks if the object should be ignored when there&#39;s a modal dialog displayed.
<span class="line-modified"> 575     bool ignoredFromModalPresence() const;</span>
<span class="line-modified"> 576     bool isModalDescendant(Node*) const;</span>
<span class="line-modified"> 577     bool isModalNode() const;</span>
 578 
<span class="line-modified"> 579     bool supportsSetSize() const;</span>
<span class="line-modified"> 580     bool supportsPosInSet() const;</span>
<span class="line-modified"> 581     int setSize() const;</span>
<span class="line-modified"> 582     int posInSet() const;</span>
 583 
 584     // ARIA drag and drop
<span class="line-modified"> 585     virtual bool supportsARIADropping() const { return false; }</span>
<span class="line-modified"> 586     virtual bool supportsARIADragging() const { return false; }</span>
<span class="line-modified"> 587     virtual bool isARIAGrabbed() { return false; }</span>
<span class="line-modified"> 588     virtual void setARIAGrabbed(bool) { }</span>
<span class="line-modified"> 589     virtual Vector&lt;String&gt; determineARIADropEffects() { return { }; }</span>
 590 
 591     // Called on the root AX object to return the deepest available element.
<span class="line-modified"> 592     AccessibilityObjectInterface* accessibilityHitTest(const IntPoint&amp;) const override { return nullptr; }</span>
 593     // Called on the AX object after the render tree determines which is the right AccessibilityRenderObject.
<span class="line-modified"> 594     virtual AccessibilityObjectInterface* elementAccessibilityHitTest(const IntPoint&amp;) const;</span>
<span class="line-modified"> 595 </span>
<span class="line-modified"> 596     AccessibilityObjectInterface* focusedUIElement() const override;</span>
<span class="line-modified"> 597 </span>
<span class="line-modified"> 598     virtual AccessibilityObject* firstChild() const { return nullptr; }</span>
<span class="line-modified"> 599     virtual AccessibilityObject* lastChild() const { return nullptr; }</span>
<span class="line-modified"> 600     virtual AccessibilityObject* previousSibling() const { return nullptr; }</span>
<span class="line-modified"> 601     virtual AccessibilityObject* nextSibling() const { return nullptr; }</span>
<span class="line-modified"> 602     virtual AccessibilityObject* nextSiblingUnignored(int limit) const;</span>
<span class="line-modified"> 603     virtual AccessibilityObject* previousSiblingUnignored(int limit) const;</span>
<span class="line-modified"> 604     virtual AccessibilityObject* parentObject() const { return nullptr; }</span>
<span class="line-modified"> 605     virtual AccessibilityObject* parentObjectUnignored() const;</span>
<span class="line-modified"> 606     AccessibilityObjectInterface* parentObjectInterfaceUnignored() const override { return parentObjectUnignored(); }</span>
<span class="line-removed"> 607     virtual AccessibilityObject* parentObjectIfExists() const { return nullptr; }</span>
 608     static AccessibilityObject* firstAccessibleObjectFromNode(const Node*);
<span class="line-modified"> 609     void findMatchingObjects(AccessibilitySearchCriteria*, AccessibilityChildrenVector&amp;);</span>
<span class="line-modified"> 610     virtual bool isDescendantOfBarrenParent() const { return false; }</span>
 611 
<span class="line-modified"> 612     bool isDescendantOfRole(AccessibilityRole) const;</span>
 613 
 614     // Text selection
 615 private:
 616     RefPtr&lt;Range&gt; rangeOfStringClosestToRangeInDirection(Range*, AccessibilitySearchDirection, Vector&lt;String&gt; const&amp;) const;
 617     RefPtr&lt;Range&gt; selectionRange() const;
 618     RefPtr&lt;Range&gt; findTextRange(Vector&lt;String&gt; const&amp; searchStrings, RefPtr&lt;Range&gt; const&amp; start, AccessibilitySearchTextDirection) const;
 619 public:
<span class="line-modified"> 620     Vector&lt;RefPtr&lt;Range&gt;&gt; findTextRanges(AccessibilitySearchTextCriteria const&amp;) const;</span>
<span class="line-modified"> 621     Vector&lt;String&gt; performTextOperation(AccessibilityTextOperation const&amp;);</span>
<span class="line-modified"> 622 </span>
<span class="line-modified"> 623     virtual AccessibilityObject* observableObject() const { return nullptr; }</span>
<span class="line-modified"> 624     virtual void linkedUIElements(AccessibilityChildrenVector&amp;) const { }</span>
<span class="line-modified"> 625     virtual AccessibilityObject* titleUIElement() const { return nullptr; }</span>
<span class="line-modified"> 626     virtual bool exposesTitleUIElement() const { return true; }</span>
<span class="line-modified"> 627     virtual AccessibilityObject* correspondingLabelForControlElement() const { return nullptr; }</span>
<span class="line-modified"> 628     virtual AccessibilityObject* correspondingControlForLabelElement() const { return nullptr; }</span>
<span class="line-modified"> 629     virtual AccessibilityObject* scrollBar(AccessibilityOrientation) { return nullptr; }</span>
<span class="line-modified"> 630 </span>
<span class="line-modified"> 631     virtual AccessibilityRole ariaRoleAttribute() const { return AccessibilityRole::Unknown; }</span>
<span class="line-modified"> 632     virtual bool isPresentationalChildOfAriaRole() const { return false; }</span>
<span class="line-modified"> 633     virtual bool ariaRoleHasPresentationalChildren() const { return false; }</span>
<span class="line-modified"> 634     virtual bool inheritsPresentationalRole() const { return false; }</span>
 635 
 636     // Accessibility Text
<span class="line-modified"> 637     virtual void accessibilityText(Vector&lt;AccessibilityText&gt;&amp;) const { };</span>
 638     // A single method for getting a computed label for an AXObject. It condenses the nuances of accessibilityText. Used by Inspector.
<span class="line-modified"> 639     String computedLabel();</span>
 640 
 641     // A programmatic way to set a name on an AccessibleObject.
<span class="line-modified"> 642     virtual void setAccessibleName(const AtomString&amp;) { }</span>
<span class="line-modified"> 643     virtual bool hasAttributesRequiredForInclusion() const;</span>
 644 
 645     // Accessibility Text - (To be deprecated).
<span class="line-modified"> 646     virtual String accessibilityDescription() const { return String(); }</span>
<span class="line-modified"> 647     virtual String title() const { return String(); }</span>
<span class="line-modified"> 648     virtual String helpText() const { return String(); }</span>
 649 
 650     // Methods for determining accessibility text.
<span class="line-modified"> 651     bool isARIAStaticText() const { return ariaRoleAttribute() == AccessibilityRole::StaticText; }</span>
<span class="line-modified"> 652     virtual String stringValue() const { return String(); }</span>
<span class="line-modified"> 653     virtual String textUnderElement(AccessibilityTextUnderElementMode = AccessibilityTextUnderElementMode()) const { return String(); }</span>
<span class="line-modified"> 654     virtual String text() const { return String(); }</span>
<span class="line-modified"> 655     virtual int textLength() const { return 0; }</span>
<span class="line-modified"> 656     virtual String ariaLabeledByAttribute() const { return String(); }</span>
<span class="line-modified"> 657     virtual String ariaDescribedByAttribute() const { return String(); }</span>
<span class="line-modified"> 658     const String placeholderValue() const;</span>
<span class="line-modified"> 659     bool accessibleNameDerivesFromContent() const;</span>
 660 
 661     // Abbreviations
<span class="line-modified"> 662     virtual String expandedTextValue() const { return String(); }</span>
<span class="line-modified"> 663     virtual bool supportsExpandedTextValue() const { return false; }</span>
 664 
<span class="line-modified"> 665     void elementsFromAttribute(Vector&lt;Element*&gt;&amp;, const QualifiedName&amp;) const;</span>
 666 
 667     // Only if isColorWell()
<span class="line-modified"> 668     virtual void colorValue(int&amp; r, int&amp; g, int&amp; b) const { r = 0; g = 0; b = 0; }</span>
 669 
 670     AccessibilityRole roleValue() const override { return m_role; }



 671 
<span class="line-modified"> 672     virtual AXObjectCache* axObjectCache() const;</span>
<span class="line-modified"> 673     AXID axObjectID() const { return m_id; }</span>
 674 
 675     static AccessibilityObject* anchorElementForNode(Node*);
 676     static AccessibilityObject* headingElementForNode(Node*);
<span class="line-modified"> 677     virtual Element* anchorElement() const { return nullptr; }</span>
<span class="line-modified"> 678     bool supportsPressAction() const;</span>
<span class="line-modified"> 679     virtual Element* actionElement() const { return nullptr; }</span>
<span class="line-modified"> 680     virtual LayoutRect boundingBoxRect() const { return LayoutRect(); }</span>
<span class="line-modified"> 681     IntRect pixelSnappedBoundingBoxRect() const { return snappedIntRect(boundingBoxRect()); }</span>
<span class="line-modified"> 682     virtual LayoutRect elementRect() const = 0;</span>
<span class="line-removed"> 683     LayoutSize size() const { return elementRect().size(); }</span>
<span class="line-removed"> 684     virtual IntPoint clickPoint();</span>
 685     static IntRect boundingBoxForQuads(RenderObject*, const Vector&lt;FloatQuad&gt;&amp;);
<span class="line-modified"> 686     virtual Path elementPath() const { return Path(); }</span>
<span class="line-modified"> 687     virtual bool supportsPath() const { return false; }</span>
<span class="line-modified"> 688 </span>
<span class="line-modified"> 689     TextIteratorBehavior textIteratorBehaviorForTextRange() const;</span>
<span class="line-modified"> 690     virtual PlainTextRange selectedTextRange() const { return PlainTextRange(); }</span>
<span class="line-modified"> 691     unsigned selectionStart() const { return selectedTextRange().start; }</span>
<span class="line-modified"> 692     unsigned selectionEnd() const { return selectedTextRange().length; }</span>
<span class="line-modified"> 693 </span>
<span class="line-modified"> 694     virtual URL url() const { return URL(); }</span>
<span class="line-modified"> 695     virtual VisibleSelection selection() const { return VisibleSelection(); }</span>
<span class="line-modified"> 696     virtual String selectedText() const { return String(); }</span>
<span class="line-modified"> 697     virtual const AtomString&amp; accessKey() const { return nullAtom(); }</span>
<span class="line-modified"> 698     const String&amp; actionVerb() const;</span>
<span class="line-modified"> 699     virtual Widget* widget() const { return nullptr; }</span>
<span class="line-modified"> 700     virtual Widget* widgetForAttachmentView() const { return nullptr; }</span>
<span class="line-modified"> 701     Page* page() const;</span>
<span class="line-modified"> 702     virtual Document* document() const;</span>
<span class="line-modified"> 703     virtual FrameView* documentFrameView() const;</span>
<span class="line-modified"> 704     Frame* frame() const;</span>
<span class="line-modified"> 705     Frame* mainFrame() const;</span>
<span class="line-modified"> 706     Document* topDocument() const;</span>
<span class="line-modified"> 707     ScrollView* scrollViewAncestor() const;</span>
<span class="line-modified"> 708     String language() const;</span>
 709     // 1-based, to match the aria-level spec.
<span class="line-modified"> 710     virtual unsigned hierarchicalLevel() const { return 0; }</span>
<span class="line-modified"> 711 </span>
<span class="line-modified"> 712     virtual void setFocused(bool) { }</span>
<span class="line-modified"> 713     virtual void setSelectedText(const String&amp;) { }</span>
<span class="line-modified"> 714     virtual void setSelectedTextRange(const PlainTextRange&amp;) { }</span>
<span class="line-modified"> 715     virtual void setValue(const String&amp;) { }</span>
<span class="line-modified"> 716     bool replaceTextInRange(const String&amp;, const PlainTextRange&amp;);</span>
<span class="line-modified"> 717     bool insertText(const String&amp;);</span>
<span class="line-modified"> 718 </span>
<span class="line-modified"> 719     virtual void setValue(float) { }</span>
<span class="line-modified"> 720     virtual void setSelected(bool) { }</span>
<span class="line-modified"> 721     virtual void setSelectedRows(AccessibilityChildrenVector&amp;) { }</span>
<span class="line-modified"> 722 </span>
<span class="line-modified"> 723     virtual void makeRangeVisible(const PlainTextRange&amp;) { }</span>
<span class="line-modified"> 724     virtual bool press();</span>
<span class="line-modified"> 725     bool performDefaultAction() { return press(); }</span>
<span class="line-modified"> 726 </span>
<span class="line-modified"> 727     virtual AccessibilityOrientation orientation() const;</span>
<span class="line-modified"> 728     virtual void increment() { }</span>
<span class="line-modified"> 729     virtual void decrement() { }</span>
<span class="line-modified"> 730 </span>
<span class="line-modified"> 731     virtual void childrenChanged() { }</span>
<span class="line-modified"> 732     virtual void textChanged() { }</span>
<span class="line-modified"> 733     virtual void updateAccessibilityRole() { }</span>
<span class="line-modified"> 734     const AccessibilityChildrenVector&amp; children(bool updateChildrenIfNeeded = true);</span>
<span class="line-modified"> 735     virtual void addChildren() { }</span>
<span class="line-modified"> 736     virtual void addChild(AccessibilityObject*);</span>
<span class="line-modified"> 737     virtual void insertChild(AccessibilityObject*, unsigned);</span>
<span class="line-modified"> 738 </span>
<span class="line-modified"> 739     virtual bool shouldIgnoreAttributeRole() const { return false; }</span>
<span class="line-modified"> 740 </span>
<span class="line-modified"> 741     virtual bool canHaveChildren() const { return true; }</span>
<span class="line-modified"> 742     virtual bool hasChildren() const { return m_haveChildren; }</span>

 743     void updateChildrenIfNecessary() override;
<span class="line-modified"> 744     virtual void setNeedsToUpdateChildren() { }</span>
<span class="line-modified"> 745     virtual void setNeedsToUpdateSubtree() { }</span>
<span class="line-modified"> 746     virtual void clearChildren();</span>
<span class="line-modified"> 747     virtual bool needsToUpdateChildren() const { return false; }</span>
 748 #if PLATFORM(COCOA)
<span class="line-modified"> 749     virtual void detachFromParent();</span>
 750 #else
<span class="line-modified"> 751     virtual void detachFromParent() { }</span>
 752 #endif
<span class="line-modified"> 753     virtual bool isDetachedFromParent() { return false; }</span>
<span class="line-modified"> 754 </span>
<span class="line-modified"> 755     virtual bool canHaveSelectedChildren() const { return false; }</span>
<span class="line-modified"> 756     virtual void selectedChildren(AccessibilityChildrenVector&amp;) { }</span>
<span class="line-modified"> 757     virtual void visibleChildren(AccessibilityChildrenVector&amp;) { }</span>
<span class="line-modified"> 758     virtual void tabChildren(AccessibilityChildrenVector&amp;) { }</span>
<span class="line-modified"> 759     virtual bool shouldFocusActiveDescendant() const { return false; }</span>
<span class="line-modified"> 760     virtual AccessibilityObject* activeDescendant() const { return nullptr; }</span>
<span class="line-modified"> 761     virtual void handleActiveDescendantChanged() { }</span>
<span class="line-modified"> 762     virtual void handleAriaExpandedChanged() { }</span>
<span class="line-modified"> 763     bool isDescendantOfObject(const AccessibilityObject*) const;</span>
<span class="line-modified"> 764     bool isAncestorOfObject(const AccessibilityObject*) const;</span>
<span class="line-modified"> 765     AccessibilityObject* firstAnonymousBlockChild() const;</span>
 766 
 767     WEBCORE_EXPORT static AccessibilityRole ariaRoleToWebCoreRole(const String&amp;);
<span class="line-modified"> 768     bool hasAttribute(const QualifiedName&amp;) const;</span>
<span class="line-modified"> 769     const AtomString&amp; getAttribute(const QualifiedName&amp;) const;</span>
<span class="line-modified"> 770     bool hasTagName(const QualifiedName&amp;) const;</span>

 771 
<span class="line-modified"> 772     virtual VisiblePositionRange visiblePositionRange() const { return VisiblePositionRange(); }</span>
<span class="line-modified"> 773     virtual VisiblePositionRange visiblePositionRangeForLine(unsigned) const { return VisiblePositionRange(); }</span>
 774 
<span class="line-modified"> 775     RefPtr&lt;Range&gt; elementRange() const;</span>
 776     static bool replacedNodeNeedsCharacter(Node* replacedNode);
 777 
<span class="line-modified"> 778     VisiblePositionRange visiblePositionRangeForUnorderedPositions(const VisiblePosition&amp;, const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 779     VisiblePositionRange positionOfLeftWord(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 780     VisiblePositionRange positionOfRightWord(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 781     VisiblePositionRange leftLineVisiblePositionRange(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 782     VisiblePositionRange rightLineVisiblePositionRange(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 783     VisiblePositionRange sentenceForPosition(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 784     VisiblePositionRange paragraphForPosition(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 785     VisiblePositionRange styleRangeForPosition(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 786     VisiblePositionRange visiblePositionRangeForRange(const PlainTextRange&amp;) const;</span>
<span class="line-modified"> 787     VisiblePositionRange lineRangeForPosition(const VisiblePosition&amp;) const;</span>
 788 
<span class="line-modified"> 789     RefPtr&lt;Range&gt; rangeForPlainTextRange(const PlainTextRange&amp;) const;</span>
 790 
 791     static String stringForVisiblePositionRange(const VisiblePositionRange&amp;);
<span class="line-modified"> 792     String stringForRange(RefPtr&lt;Range&gt;) const;</span>
<span class="line-modified"> 793     virtual IntRect boundsForVisiblePositionRange(const VisiblePositionRange&amp;) const { return IntRect(); }</span>
<span class="line-modified"> 794     virtual IntRect boundsForRange(const RefPtr&lt;Range&gt;) const { return IntRect(); }</span>
<span class="line-modified"> 795     int lengthForVisiblePositionRange(const VisiblePositionRange&amp;) const;</span>
<span class="line-modified"> 796     virtual void setSelectedVisiblePositionRange(const VisiblePositionRange&amp;) const { }</span>
<span class="line-modified"> 797 </span>
<span class="line-modified"> 798     VisiblePosition visiblePositionForBounds(const IntRect&amp;, AccessibilityVisiblePositionForBounds) const;</span>
<span class="line-modified"> 799     virtual VisiblePosition visiblePositionForPoint(const IntPoint&amp;) const { return VisiblePosition(); }</span>
<span class="line-modified"> 800     VisiblePosition nextVisiblePosition(const VisiblePosition&amp; visiblePos) const { return visiblePos.next(); }</span>
<span class="line-modified"> 801     VisiblePosition previousVisiblePosition(const VisiblePosition&amp; visiblePos) const { return visiblePos.previous(); }</span>
<span class="line-modified"> 802     VisiblePosition nextWordEnd(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 803     VisiblePosition previousWordStart(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 804     VisiblePosition nextLineEndPosition(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 805     VisiblePosition previousLineStartPosition(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 806     VisiblePosition nextSentenceEndPosition(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 807     VisiblePosition previousSentenceStartPosition(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 808     VisiblePosition nextParagraphEndPosition(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 809     VisiblePosition previousParagraphStartPosition(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 810     virtual VisiblePosition visiblePositionForIndex(unsigned, bool /*lastIndexOK */) const { return VisiblePosition(); }</span>
<span class="line-modified"> 811 </span>
<span class="line-modified"> 812     virtual VisiblePosition visiblePositionForIndex(int) const { return VisiblePosition(); }</span>
<span class="line-modified"> 813     virtual int indexForVisiblePosition(const VisiblePosition&amp;) const { return 0; }</span>
<span class="line-modified"> 814 </span>
<span class="line-modified"> 815     AccessibilityObject* accessibilityObjectForPosition(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 816     int lineForPosition(const VisiblePosition&amp;) const;</span>
<span class="line-modified"> 817     PlainTextRange plainTextRangeForVisiblePositionRange(const VisiblePositionRange&amp;) const;</span>
<span class="line-modified"> 818     virtual int index(const VisiblePosition&amp;) const { return -1; }</span>
<span class="line-modified"> 819 </span>
<span class="line-modified"> 820     virtual void lineBreaks(Vector&lt;int&gt;&amp;) const { }</span>
<span class="line-modified"> 821     virtual PlainTextRange doAXRangeForLine(unsigned) const { return PlainTextRange(); }</span>
<span class="line-modified"> 822     PlainTextRange doAXRangeForPosition(const IntPoint&amp;) const;</span>
<span class="line-modified"> 823     virtual PlainTextRange doAXRangeForIndex(unsigned) const { return PlainTextRange(); }</span>
<span class="line-modified"> 824     PlainTextRange doAXStyleRangeForIndex(unsigned) const;</span>
<span class="line-modified"> 825 </span>
<span class="line-modified"> 826     virtual String doAXStringForRange(const PlainTextRange&amp;) const { return String(); }</span>
<span class="line-modified"> 827     virtual IntRect doAXBoundsForRange(const PlainTextRange&amp;) const { return IntRect(); }</span>
<span class="line-modified"> 828     virtual IntRect doAXBoundsForRangeUsingCharacterOffset(const PlainTextRange&amp;) const { return IntRect(); }</span>
 829     static String listMarkerTextForNodeAndPosition(Node*, const VisiblePosition&amp;);
 830 
<span class="line-modified"> 831     unsigned doAXLineForIndex(unsigned);</span>
 832 
<span class="line-modified"> 833     String computedRoleString() const;</span>
 834 
<span class="line-modified"> 835     virtual String stringValueForMSAA() const { return String(); }</span>
<span class="line-modified"> 836     virtual String stringRoleForMSAA() const { return String(); }</span>
<span class="line-modified"> 837     virtual String nameForMSAA() const { return String(); }</span>
<span class="line-modified"> 838     virtual String descriptionForMSAA() const { return String(); }</span>
<span class="line-modified"> 839     virtual AccessibilityRole roleValueForMSAA() const { return roleValue(); }</span>
 840 
<span class="line-modified"> 841     virtual String passwordFieldValue() const { return String(); }</span>
<span class="line-modified"> 842     bool isValueAutofilled() const;</span>
<span class="line-modified"> 843     bool isValueAutofillAvailable() const;</span>
<span class="line-modified"> 844     AutoFillButtonType valueAutofillButtonType() const;</span>
 845 
 846     // Used by an ARIA tree to get all its rows.
<span class="line-modified"> 847     void ariaTreeRows(AccessibilityChildrenVector&amp;);</span>
 848     // Used by an ARIA tree item to get all of its direct rows that it can disclose.
<span class="line-modified"> 849     void ariaTreeItemDisclosedRows(AccessibilityChildrenVector&amp;);</span>
 850     // Used by an ARIA tree item to get only its content, and not its child tree items and groups.
<span class="line-modified"> 851     void ariaTreeItemContent(AccessibilityChildrenVector&amp;);</span>
 852 
 853     // ARIA live-region features.
<span class="line-modified"> 854     bool supportsLiveRegion(bool excludeIfOff = true) const;</span>
<span class="line-modified"> 855     bool isInsideLiveRegion(bool excludeIfOff = true) const;</span>
<span class="line-modified"> 856     AccessibilityObject* liveRegionAncestor(bool excludeIfOff = true) const;</span>
<span class="line-modified"> 857     virtual const String liveRegionStatus() const { return String(); }</span>
<span class="line-modified"> 858     virtual const String liveRegionRelevant() const { return nullAtom(); }</span>
<span class="line-modified"> 859     virtual bool liveRegionAtomic() const { return false; }</span>
<span class="line-modified"> 860     virtual bool isBusy() const { return false; }</span>
 861     static const String defaultLiveRegionStatusForRole(AccessibilityRole);
 862     static bool liveRegionStatusIsEnabled(const AtomString&amp;);
 863     static bool contentEditableAttributeIsEnabled(Element*);
<span class="line-modified"> 864     bool hasContentEditableAttributeSet() const;</span>
 865 
<span class="line-modified"> 866     bool supportsReadOnly() const;</span>
<span class="line-modified"> 867     virtual String readOnlyValue() const;</span>
 868 
<span class="line-modified"> 869     bool supportsAutoComplete() const;</span>
<span class="line-modified"> 870     String autoCompleteValue() const;</span>
 871 
<span class="line-modified"> 872     bool supportsARIAAttributes() const;</span>

 873 
 874     // CSS3 Speech properties.
<span class="line-modified"> 875     virtual OptionSet&lt;SpeakAs&gt; speakAsProperty() const { return OptionSet&lt;SpeakAs&gt; { }; }</span>
 876 
 877     // Make this object visible by scrolling as many nested scrollable views as needed.
<span class="line-modified"> 878     virtual void scrollToMakeVisible() const;</span>
 879     // Same, but if the whole object can&#39;t be made visible, try for this subrect, in local coordinates.
<span class="line-modified"> 880     virtual void scrollToMakeVisibleWithSubFocus(const IntRect&amp;) const;</span>
 881     // Scroll this object to a given point in global coordinates of the top-level window.
<span class="line-modified"> 882     virtual void scrollToGlobalPoint(const IntPoint&amp;) const;</span>
 883 
<span class="line-modified"> 884     enum class ScrollByPageDirection { Up, Down, Left, Right };</span>
<span class="line-modified"> 885     bool scrollByPage(ScrollByPageDirection) const;</span>
<span class="line-modified"> 886     IntPoint scrollPosition() const;</span>
<span class="line-modified"> 887     IntSize scrollContentsSize() const;</span>
<span class="line-modified"> 888     IntRect scrollVisibleContentRect() const;</span>
<span class="line-removed"> 889     void scrollToMakeVisible(const ScrollRectToVisibleOptions&amp;) const;</span>
 890 
<span class="line-modified"> 891     bool lastKnownIsIgnoredValue();</span>
<span class="line-modified"> 892     void setLastKnownIsIgnoredValue(bool);</span>
 893 
 894     // Fires a children changed notification on the parent if the isIgnored value changed.
<span class="line-modified"> 895     void notifyIfIgnoredValueChanged();</span>
 896 
 897     // All math elements return true for isMathElement().
<span class="line-modified"> 898     virtual bool isMathElement() const { return false; }</span>
<span class="line-modified"> 899     virtual bool isMathFraction() const { return false; }</span>
<span class="line-modified"> 900     virtual bool isMathFenced() const { return false; }</span>
<span class="line-modified"> 901     virtual bool isMathSubscriptSuperscript() const { return false; }</span>
<span class="line-modified"> 902     virtual bool isMathRow() const { return false; }</span>
<span class="line-modified"> 903     virtual bool isMathUnderOver() const { return false; }</span>
<span class="line-modified"> 904     virtual bool isMathRoot() const { return false; }</span>
<span class="line-modified"> 905     virtual bool isMathSquareRoot() const { return false; }</span>
<span class="line-modified"> 906     virtual bool isMathText() const { return false; }</span>
<span class="line-modified"> 907     virtual bool isMathNumber() const { return false; }</span>
<span class="line-modified"> 908     virtual bool isMathOperator() const { return false; }</span>
<span class="line-modified"> 909     virtual bool isMathFenceOperator() const { return false; }</span>
<span class="line-modified"> 910     virtual bool isMathSeparatorOperator() const { return false; }</span>
<span class="line-modified"> 911     virtual bool isMathIdentifier() const { return false; }</span>
<span class="line-modified"> 912     virtual bool isMathTable() const { return false; }</span>
<span class="line-modified"> 913     virtual bool isMathTableRow() const { return false; }</span>
<span class="line-modified"> 914     virtual bool isMathTableCell() const { return false; }</span>
<span class="line-modified"> 915     virtual bool isMathMultiscript() const { return false; }</span>
<span class="line-modified"> 916     virtual bool isMathToken() const { return false; }</span>
<span class="line-modified"> 917     virtual bool isMathScriptObject(AccessibilityMathScriptObjectType) const { return false; }</span>
<span class="line-modified"> 918     virtual bool isMathMultiscriptObject(AccessibilityMathMultiscriptObjectType) const { return false; }</span>
 919 
 920     // Root components.
<span class="line-modified"> 921     virtual AccessibilityObject* mathRadicandObject() { return nullptr; }</span>
<span class="line-modified"> 922     virtual AccessibilityObject* mathRootIndexObject() { return nullptr; }</span>
 923 
 924     // Under over components.
<span class="line-modified"> 925     virtual AccessibilityObject* mathUnderObject() { return nullptr; }</span>
<span class="line-modified"> 926     virtual AccessibilityObject* mathOverObject() { return nullptr; }</span>
 927 
 928     // Fraction components.
<span class="line-modified"> 929     virtual AccessibilityObject* mathNumeratorObject() { return nullptr; }</span>
<span class="line-modified"> 930     virtual AccessibilityObject* mathDenominatorObject() { return nullptr; }</span>
 931 
 932     // Subscript/superscript components.
<span class="line-modified"> 933     virtual AccessibilityObject* mathBaseObject() { return nullptr; }</span>
<span class="line-modified"> 934     virtual AccessibilityObject* mathSubscriptObject() { return nullptr; }</span>
<span class="line-modified"> 935     virtual AccessibilityObject* mathSuperscriptObject() { return nullptr; }</span>
 936 
 937     // Fenced components.
<span class="line-modified"> 938     virtual String mathFencedOpenString() const { return String(); }</span>
<span class="line-modified"> 939     virtual String mathFencedCloseString() const { return String(); }</span>
<span class="line-modified"> 940     virtual int mathLineThickness() const { return 0; }</span>
<span class="line-modified"> 941     virtual bool isAnonymousMathOperator() const { return false; }</span>
 942 
 943     // Multiscripts components.
<span class="line-modified"> 944     typedef Vector&lt;std::pair&lt;AccessibilityObject*, AccessibilityObject*&gt;&gt; AccessibilityMathMultiscriptPairs;</span>
<span class="line-modified"> 945     virtual void mathPrescripts(AccessibilityMathMultiscriptPairs&amp;) { }</span>
<span class="line-removed"> 946     virtual void mathPostscripts(AccessibilityMathMultiscriptPairs&amp;) { }</span>
 947 
 948     // Visibility.
<span class="line-modified"> 949     bool isAXHidden() const;</span>
<span class="line-modified"> 950     bool isDOMHidden() const;</span>
<span class="line-modified"> 951     bool isHidden() const { return isAXHidden() || isDOMHidden(); }</span>
<span class="line-removed"> 952 </span>
<span class="line-removed"> 953 #if ENABLE(ACCESSIBILITY)</span>
<span class="line-removed"> 954     AccessibilityObjectWrapper* wrapper() const override { return m_wrapper.get(); }</span>
<span class="line-removed"> 955     void setWrapper(AccessibilityObjectWrapper* wrapper) { m_wrapper = wrapper; }</span>
<span class="line-removed"> 956 #else</span>
<span class="line-removed"> 957     AccessibilityObjectWrapper* wrapper() const override { return nullptr; }</span>
<span class="line-removed"> 958 #endif</span>
 959 
 960 #if PLATFORM(COCOA)
<span class="line-modified"> 961     void overrideAttachmentParent(AccessibilityObject* parent);</span>
 962 #else
<span class="line-modified"> 963     void overrideAttachmentParent(AccessibilityObject*) { }</span>
 964 #endif
 965 
 966 #if ENABLE(ACCESSIBILITY)
 967     // a platform-specific method for determining if an attachment is ignored
<span class="line-modified"> 968     bool accessibilityIgnoreAttachment() const;</span>
 969     // gives platforms the opportunity to indicate if and how an object should be included
<span class="line-modified"> 970     AccessibilityObjectInclusion accessibilityPlatformIncludesObject() const;</span>
 971 #else
<span class="line-modified"> 972     bool accessibilityIgnoreAttachment() const { return true; }</span>
<span class="line-modified"> 973     AccessibilityObjectInclusion accessibilityPlatformIncludesObject() const { return AccessibilityObjectInclusion::DefaultBehavior; }</span>
 974 #endif
 975 
 976 #if PLATFORM(IOS_FAMILY)
<span class="line-modified"> 977     int accessibilityPasswordFieldLength();</span>
<span class="line-modified"> 978     bool hasTouchEventListener() const;</span>
<span class="line-modified"> 979     bool isInputTypePopupButton() const;</span>
 980 #endif
 981 
 982     // allows for an AccessibilityObject to update its render tree or perform
 983     // other operations update type operations
<span class="line-modified"> 984     void updateBackingStore();</span>
 985 
 986 #if PLATFORM(COCOA)
<span class="line-modified"> 987     bool preventKeyboardDOMEventDispatch() const;</span>
<span class="line-modified"> 988     void setPreventKeyboardDOMEventDispatch(bool);</span>
<span class="line-modified"> 989     bool fileUploadButtonReturnsValueInTitle() const;</span>
 990     String speechHintAttributeValue() const override;
 991     String descriptionAttributeValue() const override;
 992     String helpTextAttributeValue() const override;
 993     String titleAttributeValue() const override;

 994 #endif
 995 
 996 #if PLATFORM(COCOA) &amp;&amp; !PLATFORM(IOS_FAMILY)
<span class="line-modified"> 997     bool caretBrowsingEnabled() const;</span>
<span class="line-modified"> 998     void setCaretBrowsingEnabled(bool);</span>
 999 #endif
1000 
<span class="line-modified">1001     AccessibilityObject* focusableAncestor();</span>
<span class="line-modified">1002     AccessibilityObject* editableAncestor();</span>
<span class="line-modified">1003     AccessibilityObject* highestEditableAncestor();</span>
1004 
<span class="line-modified">1005     const AccessibilityScrollView* ancestorAccessibilityScrollView(bool includeSelf) const;</span>
<span class="line-removed">1006     static const AccessibilityObject* matchedParent(const AccessibilityObject&amp;, bool includeSelf, const WTF::Function&lt;bool(const AccessibilityObject&amp;)&gt;&amp;);</span>
1007 
<span class="line-modified">1008     void clearIsIgnoredFromParentData() { m_isIgnoredFromParentData = AccessibilityIsIgnoredFromParentData(); }</span>
<span class="line-modified">1009     void setIsIgnoredFromParentDataForChild(AccessibilityObject*);</span>




1010 
1011 protected:




1012     AXID m_id { 0 };
1013     AccessibilityChildrenVector m_children;
1014     mutable bool m_haveChildren { false };
1015     AccessibilityRole m_role { AccessibilityRole::Unknown };
1016     AccessibilityObjectInclusion m_lastKnownIsIgnoredValue { AccessibilityObjectInclusion::DefaultBehavior };
1017     AccessibilityIsIgnoredFromParentData m_isIgnoredFromParentData { };
1018     bool m_childrenDirty { false };
1019     bool m_subtreeDirty { false };
1020 #if ENABLE(ACCESSIBILITY_ISOLATED_TREE)
1021     bool m_isolatedTreeNodeInitialized { false };
1022 #endif
1023 
<span class="line-modified">1024     void setIsIgnoredFromParentData(AccessibilityIsIgnoredFromParentData&amp; data) { m_isIgnoredFromParentData = data; }</span>
1025 
1026     virtual bool computeAccessibilityIsIgnored() const { return true; }
1027     bool isAccessibilityObject() const override { return true; }
1028 
1029     // If this object itself scrolls, return its ScrollableArea.
1030     virtual ScrollableArea* getScrollableAreaIfScrollable() const { return nullptr; }
1031     virtual void scrollTo(const IntPoint&amp;) const { }
1032     ScrollableArea* scrollableAreaAncestor() const;
1033     void scrollAreaAndAncestor(std::pair&lt;ScrollableArea*, AccessibilityObject*&gt;&amp;) const;
1034 
<span class="line-removed">1035     static bool isAccessibilityObjectSearchMatchAtIndex(AccessibilityObject*, AccessibilitySearchCriteria*, size_t);</span>
<span class="line-removed">1036     static bool isAccessibilityObjectSearchMatch(AccessibilityObject*, AccessibilitySearchCriteria*);</span>
<span class="line-removed">1037     static bool isAccessibilityTextSearchMatch(AccessibilityObject*, AccessibilitySearchCriteria*);</span>
<span class="line-removed">1038     static bool objectMatchesSearchCriteriaWithResultLimit(AccessibilityObject*, AccessibilitySearchCriteria*, AccessibilityChildrenVector&amp;);</span>
1039     virtual AccessibilityRole buttonRoleType() const;
<span class="line-modified">1040     bool isOnscreen() const;</span>

1041     bool dispatchTouchEvent();
1042 
1043     void ariaElementsFromAttribute(AccessibilityChildrenVector&amp;, const QualifiedName&amp;) const;
1044     void ariaElementsReferencedByAttribute(AccessibilityChildrenVector&amp;, const QualifiedName&amp;) const;
1045 
1046     AccessibilityObject* radioGroupAncestor() const;
1047 
1048 #if ENABLE(ACCESSIBILITY) &amp;&amp; USE(ATK)
1049     bool allowsTextRanges() const;
1050     unsigned getLengthForTextRange() const;
1051 #else
1052     bool allowsTextRanges() const { return isTextControl(); }
1053     unsigned getLengthForTextRange() const { return text().length(); }
1054 #endif
<span class="line-removed">1055 </span>
<span class="line-removed">1056 #if PLATFORM(COCOA)</span>
<span class="line-removed">1057     RetainPtr&lt;WebAccessibilityObjectWrapper&gt; m_wrapper;</span>
<span class="line-removed">1058 #elif PLATFORM(WIN)</span>
<span class="line-removed">1059     COMPtr&lt;AccessibilityObjectWrapper&gt; m_wrapper;</span>
<span class="line-removed">1060 #elif USE(ATK)</span>
<span class="line-removed">1061     GRefPtr&lt;WebKitAccessible&gt; m_wrapper;</span>
<span class="line-removed">1062 #endif</span>
1063 };
1064 
1065 #if !ENABLE(ACCESSIBILITY)
1066 inline const AccessibilityObject::AccessibilityChildrenVector&amp; AccessibilityObject::children(bool) { return m_children; }
<span class="line-modified">1067 inline const String&amp; AccessibilityObject::actionVerb() const { return emptyString(); }</span>
1068 inline int AccessibilityObject::lineForPosition(const VisiblePosition&amp;) const { return -1; }
1069 inline void AccessibilityObject::updateBackingStore() { }

1070 #endif
1071 
1072 AccessibilityObject* firstAccessibleObjectFromNode(const Node*, const WTF::Function&lt;bool(const AccessibilityObject&amp;)&gt;&amp; isAccessible);
1073 









1074 } // namespace WebCore
1075 
1076 #define SPECIALIZE_TYPE_TRAITS_ACCESSIBILITY(ToValueTypeName, predicate) \
1077 SPECIALIZE_TYPE_TRAITS_BEGIN(WebCore::ToValueTypeName) \
<span class="line-modified">1078     static bool isType(const WebCore::AccessibilityObject&amp; object) { return object.predicate; } \</span>
1079 SPECIALIZE_TYPE_TRAITS_END()
1080 
1081 SPECIALIZE_TYPE_TRAITS_BEGIN(WebCore::AccessibilityObject)
<span class="line-modified">1082 static bool isType(const WebCore::AccessibilityObjectInterface&amp; context) { return context.isAccessibilityObject(); }</span>
1083 SPECIALIZE_TYPE_TRAITS_END()
</pre>
</td>
<td>
<hr />
<pre>
  14  * 3.  Neither the name of Apple Inc. (&quot;Apple&quot;) nor the names of
  15  *     its contributors may be used to endorse or promote products derived
  16  *     from this software without specific prior written permission.
  17  *
  18  * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS &quot;AS IS&quot; AND ANY
  19  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
  20  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  21  * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
  22  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  23  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  24  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  25  * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  26  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  27  * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  28  */
  29 
  30 #pragma once
  31 
  32 #include &quot;AccessibilityObjectInterface.h&quot;
  33 #include &quot;FloatQuad.h&quot;

  34 #include &quot;LayoutRect.h&quot;
  35 #include &quot;Path.h&quot;
  36 #include &quot;Range.h&quot;



  37 #include &lt;wtf/Forward.h&gt;
  38 #include &lt;wtf/Function.h&gt;
  39 #include &lt;wtf/RefPtr.h&gt;
  40 #include &lt;wtf/Vector.h&gt;
  41 
  42 #if PLATFORM(COCOA)
  43 #include &lt;wtf/RetainPtr.h&gt;
  44 #endif
  45 
  46 #if USE(ATK)
  47 #include &lt;wtf/glib/GRefPtr.h&gt;
  48 #endif
  49 
  50 #if PLATFORM(COCOA)
  51 


  52 OBJC_CLASS NSArray;
  53 OBJC_CLASS NSAttributedString;
  54 OBJC_CLASS NSData;
  55 OBJC_CLASS NSMutableAttributedString;
  56 OBJC_CLASS NSString;
  57 OBJC_CLASS NSValue;
  58 OBJC_CLASS NSView;
  59 
  60 #endif
  61 
  62 namespace WebCore {
  63 
  64 class AccessibilityObject;





  65 class IntPoint;
  66 class IntSize;



  67 class ScrollableArea;

















  68 
  69 struct AccessibilityText {
  70     String text;
  71     AccessibilityTextSource textSource;
<span class="line-modified">  72     Vector&lt;RefPtr&lt;AXCoreObject&gt;&gt; textElements;</span>
  73 
  74     AccessibilityText(const String&amp; t, const AccessibilityTextSource&amp; s)
  75         : text(t)
  76         , textSource(s)
  77     { }
  78 
<span class="line-modified">  79     AccessibilityText(const String&amp; t, const AccessibilityTextSource&amp; s, Vector&lt;AXCoreObject*&gt; elements)</span>
  80         : text(t)
  81         , textSource(s)
<span class="line-modified">  82     {</span>
<span class="line-modified">  83         textElements.reserveCapacity(elements.size());</span>
<span class="line-added">  84         for (auto element : elements)</span>
<span class="line-added">  85             textElements.uncheckedAppend(element);</span>
<span class="line-added">  86     }</span>
  87 
<span class="line-modified">  88     AccessibilityText(const String&amp; t, const AccessibilityTextSource&amp; s, AXCoreObject* element)</span>
  89         : text(t)
  90         , textSource(s)
  91     {
<span class="line-modified">  92         textElements.append(element);</span>
  93     }
  94 };
  95 





























































































































































































































  96 bool nodeHasPresentationRole(Node*);
  97 
<span class="line-modified">  98 class AccessibilityObject : public AXCoreObject {</span>



  99 public:
 100     virtual ~AccessibilityObject();
 101 
 102     // After constructing an AccessibilityObject, it must be given a
 103     // unique ID, then added to AXObjectCache, and finally init() must
 104     // be called last.
<span class="line-modified"> 105     void setObjectID(AXID id) override { m_id = id; }</span>
<span class="line-modified"> 106     void init() override { }</span>





 107 
<span class="line-modified"> 108     bool isDetached() const override;</span>
 109 
<span class="line-modified"> 110     bool isAccessibilityNodeObject() const override { return false; }</span>
<span class="line-modified"> 111     bool isAccessibilityRenderObject() const override { return false; }</span>
<span class="line-modified"> 112     bool isAccessibilityScrollbar() const override { return false; }</span>
<span class="line-modified"> 113     bool isAccessibilityScrollView() const override { return false; }</span>
<span class="line-modified"> 114     bool isAccessibilitySVGRoot() const override { return false; }</span>
<span class="line-modified"> 115     bool isAccessibilitySVGElement() const override { return false; }</span>
 116 
<span class="line-modified"> 117     bool isAttachmentElement() const override { return false; }</span>
<span class="line-modified"> 118     bool isHeading() const override { return false; }</span>


 119     bool isLink() const override { return false; }
 120     bool isImage() const override { return false; }
<span class="line-modified"> 121     bool isNativeImage() const override { return false; }</span>
<span class="line-modified"> 122     bool isImageButton() const override { return false; }</span>
<span class="line-modified"> 123     bool isPasswordField() const override { return false; }</span>
<span class="line-modified"> 124     bool isContainedByPasswordField() const override;</span>
<span class="line-modified"> 125     AccessibilityObject* passwordFieldOrContainingPasswordField() override { return nullptr; }</span>
<span class="line-modified"> 126     bool isNativeTextControl() const override { return false; }</span>
<span class="line-modified"> 127     bool isSearchField() const override { return false; }</span>
<span class="line-modified"> 128     bool isNativeListBox() const override { return false; }</span>
<span class="line-modified"> 129     bool isListBoxOption() const override { return false; }</span>





 130     bool isAttachment() const override { return false; }
<span class="line-modified"> 131     bool isMediaTimeline() const override { return false; }</span>
<span class="line-modified"> 132     bool isMenuRelated() const override { return false; }</span>
<span class="line-modified"> 133     bool isMenu() const override { return false; }</span>
<span class="line-modified"> 134     bool isMenuBar() const override { return false; }</span>
<span class="line-modified"> 135     bool isMenuButton() const override { return false; }</span>
<span class="line-modified"> 136     bool isMenuItem() const override { return false; }</span>
 137     bool isFileUploadButton() const override { return false; }
<span class="line-modified"> 138     bool isInputImage() const override { return false; }</span>
<span class="line-modified"> 139     bool isProgressIndicator() const override { return false; }</span>
<span class="line-modified"> 140     bool isSlider() const override { return false; }</span>
<span class="line-modified"> 141     bool isSliderThumb() const override { return false; }</span>
<span class="line-modified"> 142     bool isInputSlider() const override { return false; }</span>
<span class="line-modified"> 143     bool isControl() const override { return false; }</span>
<span class="line-modified"> 144     bool isLabel() const override { return false; }</span>
<span class="line-modified"> 145 </span>
<span class="line-modified"> 146     bool isList() const override { return false; }</span>
<span class="line-modified"> 147     bool isUnorderedList() const override { return false; }</span>
<span class="line-modified"> 148     bool isOrderedList() const override { return false; }</span>
<span class="line-modified"> 149     bool isDescriptionList() const override { return false; }</span>
<span class="line-modified"> 150 </span>
<span class="line-modified"> 151     bool isTable() const override { return false; }</span>
<span class="line-modified"> 152     bool isDataTable() const override { return false; }</span>
<span class="line-modified"> 153     bool isTableRow() const override { return false; }</span>
<span class="line-added"> 154     bool isTableColumn() const override { return false; }</span>
<span class="line-added"> 155     bool isTableCell() const override { return false; }</span>
<span class="line-added"> 156     bool isFieldset() const override { return false; }</span>
<span class="line-added"> 157     bool isGroup() const override { return false; }</span>
<span class="line-added"> 158     bool isARIATreeGridRow() const override { return false; }</span>
 159     bool isImageMapLink() const override { return false; }
<span class="line-modified"> 160     bool isMenuList() const override { return false; }</span>
<span class="line-modified"> 161     bool isMenuListPopup() const override { return false; }</span>
<span class="line-modified"> 162     bool isMenuListOption() const override { return false; }</span>
<span class="line-modified"> 163     bool isNativeSpinButton() const override { return false; }</span>
<span class="line-modified"> 164     AXCoreObject* incrementButton() override { return nullptr; }</span>
<span class="line-modified"> 165     AXCoreObject* decrementButton() override { return nullptr; }</span>
<span class="line-modified"> 166     bool isSpinButtonPart() const override { return false; }</span>
<span class="line-modified"> 167     bool isIncrementor() const override { return false; }</span>
<span class="line-modified"> 168     bool isMockObject() const override { return false; }</span>
<span class="line-modified"> 169     virtual bool isMediaControlLabel() const { return false; }</span>
<span class="line-modified"> 170     bool isMediaObject() const override { return false; }</span>
<span class="line-modified"> 171     bool isTextControl() const override;</span>
<span class="line-modified"> 172     bool isARIATextControl() const override;</span>
<span class="line-modified"> 173     bool isNonNativeTextControl() const override;</span>
<span class="line-modified"> 174     bool isButton() const override;</span>
<span class="line-modified"> 175     bool isBlockquote() const override;</span>
<span class="line-modified"> 176     bool isLandmark() const override;</span>
<span class="line-modified"> 177     bool isRangeControl() const override;</span>
<span class="line-modified"> 178     bool isMeter() const override;</span>
<span class="line-modified"> 179     bool isStyleFormatGroup() const override;</span>
<span class="line-modified"> 180     bool isFigureElement() const override;</span>
<span class="line-modified"> 181     bool isKeyboardFocusable() const override;</span>
<span class="line-modified"> 182     bool isOutput() const override;</span>
<span class="line-modified"> 183 </span>
<span class="line-modified"> 184     bool isChecked() const override { return false; }</span>
<span class="line-modified"> 185     bool isEnabled() const override { return false; }</span>
<span class="line-modified"> 186     bool isSelected() const override { return false; }</span>
<span class="line-modified"> 187     bool isFocused() const override { return false; }</span>
<span class="line-modified"> 188     bool isHovered() const override { return false; }</span>
<span class="line-modified"> 189     bool isIndeterminate() const override { return false; }</span>
<span class="line-modified"> 190     bool isLoaded() const override { return false; }</span>
<span class="line-modified"> 191     bool isMultiSelectable() const override { return false; }</span>
<span class="line-modified"> 192     bool isOffScreen() const override { return false; }</span>
<span class="line-modified"> 193     bool isPressed() const override { return false; }</span>
<span class="line-modified"> 194     bool isUnvisited() const override { return false; }</span>
<span class="line-modified"> 195     bool isVisited() const override { return false; }</span>
<span class="line-modified"> 196     bool isRequired() const override { return false; }</span>
<span class="line-modified"> 197     bool supportsRequiredAttribute() const override { return false; }</span>
<span class="line-modified"> 198     bool isLinked() const override { return false; }</span>
<span class="line-modified"> 199     bool isExpanded() const override;</span>
<span class="line-modified"> 200     bool isVisible() const override { return true; }</span>
<span class="line-modified"> 201     bool isCollapsed() const override { return false; }</span>
<span class="line-modified"> 202     void setIsExpanded(bool) override { }</span>

















 203     FloatRect relativeFrame() const override;
<span class="line-modified"> 204     FloatRect convertFrameToSpace(const FloatRect&amp;, AccessibilityConversionSpace) const override;</span>
 205 
 206     // In a multi-select list, many items can be selected but only one is active at a time.
<span class="line-modified"> 207     bool isSelectedOptionActive() const override { return false; }</span>
<span class="line-modified"> 208 </span>
<span class="line-modified"> 209     bool hasBoldFont() const override { return false; }</span>
<span class="line-modified"> 210     bool hasItalicFont() const override { return false; }</span>
<span class="line-modified"> 211     bool hasMisspelling() const override;</span>
<span class="line-modified"> 212     RefPtr&lt;Range&gt; getMisspellingRange(RefPtr&lt;Range&gt; const&amp; start, AccessibilitySearchDirection) const override;</span>
<span class="line-modified"> 213     bool hasPlainText() const override { return false; }</span>
<span class="line-modified"> 214     bool hasSameFont(RenderObject*) const override { return false; }</span>
<span class="line-modified"> 215     bool hasSameFontColor(RenderObject*) const override { return false; }</span>
<span class="line-modified"> 216     bool hasSameStyle(RenderObject*) const override { return false; }</span>
<span class="line-modified"> 217     bool hasUnderline() const override { return false; }</span>
<span class="line-modified"> 218     bool hasHighlighting() const override;</span>
<span class="line-modified"> 219 </span>
<span class="line-modified"> 220     bool supportsDatetimeAttribute() const override;</span>
<span class="line-modified"> 221     String datetimeAttributeValue() const override;</span>
<span class="line-modified"> 222 </span>
<span class="line-modified"> 223     bool canSetFocusAttribute() const override { return false; }</span>
<span class="line-modified"> 224     bool canSetTextRangeAttributes() const override { return false; }</span>
<span class="line-modified"> 225     bool canSetValueAttribute() const override { return false; }</span>
<span class="line-modified"> 226     bool canSetNumericValue() const override { return false; }</span>
<span class="line-modified"> 227     bool canSetSelectedAttribute() const override { return false; }</span>
<span class="line-modified"> 228     bool canSetSelectedChildrenAttribute() const override { return false; }</span>
<span class="line-modified"> 229     bool canSetExpandedAttribute() const override { return false; }</span>
<span class="line-modified"> 230 </span>
<span class="line-modified"> 231     Element* element() const override;</span>
<span class="line-modified"> 232     Node* node() const override { return nullptr; }</span>
<span class="line-modified"> 233     RenderObject* renderer() const override { return nullptr; }</span>
 234     bool accessibilityIsIgnored() const override;
<span class="line-modified"> 235     AccessibilityObjectInclusion defaultObjectInclusion() const override;</span>
<span class="line-modified"> 236     bool accessibilityIsIgnoredByDefault() const override;</span>
<span class="line-modified"> 237 </span>
<span class="line-modified"> 238     bool isShowingValidationMessage() const override;</span>
<span class="line-modified"> 239     String validationMessage() const override;</span>
<span class="line-modified"> 240 </span>
<span class="line-modified"> 241     unsigned blockquoteLevel() const override;</span>
<span class="line-modified"> 242     int headingLevel() const override { return 0; }</span>
<span class="line-modified"> 243     int tableLevel() const override { return 0; }</span>
<span class="line-modified"> 244     AccessibilityButtonState checkboxOrRadioValue() const override;</span>
<span class="line-modified"> 245     String valueDescription() const override { return String(); }</span>
<span class="line-modified"> 246     float valueForRange() const override { return 0.0f; }</span>
<span class="line-modified"> 247     float maxValueForRange() const override { return 0.0f; }</span>
<span class="line-modified"> 248     float minValueForRange() const override { return 0.0f; }</span>
<span class="line-modified"> 249     float stepValueForRange() const override { return 0.0f; }</span>
<span class="line-modified"> 250     AXCoreObject* selectedRadioButton() override { return nullptr; }</span>
<span class="line-modified"> 251     AXCoreObject* selectedTabItem() override { return nullptr; }</span>
<span class="line-modified"> 252     AXCoreObject* selectedListItem() override;</span>
<span class="line-modified"> 253     int layoutCount() const override { return 0; }</span>
<span class="line-modified"> 254     double estimatedLoadingProgress() const override { return 0; }</span>
 255     WEBCORE_EXPORT static bool isARIAControl(AccessibilityRole);
 256     WEBCORE_EXPORT static bool isARIAInput(AccessibilityRole);
 257 
<span class="line-modified"> 258     bool supportsARIAOwns() const override { return false; }</span>
<span class="line-modified"> 259     bool isActiveDescendantOfFocusedContainer() const override;</span>
<span class="line-modified"> 260     void ariaActiveDescendantReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 261     void ariaControlsElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 262     void ariaControlsReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 263     void ariaDescribedByElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 264     void ariaDescribedByReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 265     void ariaDetailsElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 266     void ariaDetailsReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 267     void ariaErrorMessageElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 268     void ariaErrorMessageReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 269     void ariaFlowToElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 270     void ariaFlowToReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 271     void ariaLabelledByElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 272     void ariaLabelledByReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 273     void ariaOwnsElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 274     void ariaOwnsReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified"> 275 </span>
<span class="line-modified"> 276     bool hasPopup() const override { return false; }</span>
<span class="line-modified"> 277     String popupValue() const override;</span>
<span class="line-modified"> 278     bool hasDatalist() const override;</span>
<span class="line-modified"> 279     bool supportsHasPopup() const override;</span>
<span class="line-modified"> 280     bool pressedIsPresent() const override;</span>
<span class="line-modified"> 281     bool ariaIsMultiline() const override;</span>
<span class="line-modified"> 282     String invalidStatus() const override;</span>
<span class="line-modified"> 283     bool supportsPressed() const override;</span>
<span class="line-modified"> 284     bool supportsExpanded() const override;</span>
<span class="line-modified"> 285     bool supportsChecked() const override;</span>
<span class="line-modified"> 286     AccessibilitySortDirection sortDirection() const override;</span>
<span class="line-modified"> 287     bool canvasHasFallbackContent() const override { return false; }</span>
<span class="line-modified"> 288     bool supportsRangeValue() const override;</span>
<span class="line-modified"> 289     String identifierAttribute() const override;</span>
<span class="line-modified"> 290     String linkRelValue() const override;</span>
<span class="line-modified"> 291     void classList(Vector&lt;String&gt;&amp;) const override;</span>
<span class="line-modified"> 292     AccessibilityCurrentState currentState() const override;</span>
<span class="line-modified"> 293     String currentValue() const override;</span>
<span class="line-modified"> 294     bool supportsCurrent() const override;</span>
<span class="line-modified"> 295     const String keyShortcutsValue() const override;</span>

 296 
 297     // This function checks if the object should be ignored when there&#39;s a modal dialog displayed.
<span class="line-modified"> 298     bool ignoredFromModalPresence() const override;</span>
<span class="line-modified"> 299     bool isModalDescendant(Node*) const override;</span>
<span class="line-modified"> 300     bool isModalNode() const override;</span>
 301 
<span class="line-modified"> 302     bool supportsSetSize() const override;</span>
<span class="line-modified"> 303     bool supportsPosInSet() const override;</span>
<span class="line-modified"> 304     int setSize() const override;</span>
<span class="line-modified"> 305     int posInSet() const override;</span>
 306 
 307     // ARIA drag and drop
<span class="line-modified"> 308     bool supportsARIADropping() const override { return false; }</span>
<span class="line-modified"> 309     bool supportsARIADragging() const override { return false; }</span>
<span class="line-modified"> 310     bool isARIAGrabbed() override { return false; }</span>
<span class="line-modified"> 311     void setARIAGrabbed(bool) override { }</span>
<span class="line-modified"> 312     Vector&lt;String&gt; determineARIADropEffects() override { return { }; }</span>
 313 
 314     // Called on the root AX object to return the deepest available element.
<span class="line-modified"> 315     AXCoreObject* accessibilityHitTest(const IntPoint&amp;) const override { return nullptr; }</span>
 316     // Called on the AX object after the render tree determines which is the right AccessibilityRenderObject.
<span class="line-modified"> 317     AXCoreObject* elementAccessibilityHitTest(const IntPoint&amp;) const override;</span>
<span class="line-modified"> 318 </span>
<span class="line-modified"> 319     AXCoreObject* focusedUIElement() const override;</span>
<span class="line-modified"> 320 </span>
<span class="line-modified"> 321     AccessibilityObject* firstChild() const override { return nullptr; }</span>
<span class="line-modified"> 322     AccessibilityObject* lastChild() const override { return nullptr; }</span>
<span class="line-modified"> 323     AccessibilityObject* previousSibling() const override { return nullptr; }</span>
<span class="line-modified"> 324     AccessibilityObject* nextSibling() const override { return nullptr; }</span>
<span class="line-modified"> 325     AccessibilityObject* nextSiblingUnignored(int limit) const override;</span>
<span class="line-modified"> 326     AccessibilityObject* previousSiblingUnignored(int limit) const override;</span>
<span class="line-modified"> 327     AccessibilityObject* parentObject() const override { return nullptr; }</span>
<span class="line-modified"> 328     AXCoreObject* parentObjectUnignored() const override;</span>
<span class="line-modified"> 329     AccessibilityObject* parentObjectIfExists() const override { return nullptr; }</span>

 330     static AccessibilityObject* firstAccessibleObjectFromNode(const Node*);
<span class="line-modified"> 331     void findMatchingObjects(AccessibilitySearchCriteria*, AccessibilityChildrenVector&amp;) override;</span>
<span class="line-modified"> 332     bool isDescendantOfBarrenParent() const override { return false; }</span>
 333 
<span class="line-modified"> 334     bool isDescendantOfRole(AccessibilityRole) const override;</span>
 335 
 336     // Text selection
 337 private:
 338     RefPtr&lt;Range&gt; rangeOfStringClosestToRangeInDirection(Range*, AccessibilitySearchDirection, Vector&lt;String&gt; const&amp;) const;
 339     RefPtr&lt;Range&gt; selectionRange() const;
 340     RefPtr&lt;Range&gt; findTextRange(Vector&lt;String&gt; const&amp; searchStrings, RefPtr&lt;Range&gt; const&amp; start, AccessibilitySearchTextDirection) const;
 341 public:
<span class="line-modified"> 342     Vector&lt;RefPtr&lt;Range&gt;&gt; findTextRanges(AccessibilitySearchTextCriteria const&amp;) const override;</span>
<span class="line-modified"> 343     Vector&lt;String&gt; performTextOperation(AccessibilityTextOperation const&amp;) override;</span>
<span class="line-modified"> 344 </span>
<span class="line-modified"> 345     AccessibilityObject* observableObject() const override { return nullptr; }</span>
<span class="line-modified"> 346     void linkedUIElements(AccessibilityChildrenVector&amp;) const override { }</span>
<span class="line-modified"> 347     AccessibilityObject* titleUIElement() const override { return nullptr; }</span>
<span class="line-modified"> 348     bool exposesTitleUIElement() const override { return true; }</span>
<span class="line-modified"> 349     AccessibilityObject* correspondingLabelForControlElement() const override { return nullptr; }</span>
<span class="line-modified"> 350     AccessibilityObject* correspondingControlForLabelElement() const override { return nullptr; }</span>
<span class="line-modified"> 351     AccessibilityObject* scrollBar(AccessibilityOrientation) override { return nullptr; }</span>
<span class="line-modified"> 352 </span>
<span class="line-modified"> 353     AccessibilityRole ariaRoleAttribute() const override { return AccessibilityRole::Unknown; }</span>
<span class="line-modified"> 354     bool isPresentationalChildOfAriaRole() const override { return false; }</span>
<span class="line-modified"> 355     bool ariaRoleHasPresentationalChildren() const override { return false; }</span>
<span class="line-modified"> 356     bool inheritsPresentationalRole() const override { return false; }</span>
 357 
 358     // Accessibility Text
<span class="line-modified"> 359     void accessibilityText(Vector&lt;AccessibilityText&gt;&amp;) const override { };</span>
 360     // A single method for getting a computed label for an AXObject. It condenses the nuances of accessibilityText. Used by Inspector.
<span class="line-modified"> 361     String computedLabel() override;</span>
 362 
 363     // A programmatic way to set a name on an AccessibleObject.
<span class="line-modified"> 364     void setAccessibleName(const AtomString&amp;) override { }</span>
<span class="line-modified"> 365     bool hasAttributesRequiredForInclusion() const override;</span>
 366 
 367     // Accessibility Text - (To be deprecated).
<span class="line-modified"> 368     String accessibilityDescription() const override { return String(); }</span>
<span class="line-modified"> 369     String title() const override { return String(); }</span>
<span class="line-modified"> 370     String helpText() const override { return String(); }</span>
 371 
 372     // Methods for determining accessibility text.
<span class="line-modified"> 373     bool isARIAStaticText() const override { return ariaRoleAttribute() == AccessibilityRole::StaticText; }</span>
<span class="line-modified"> 374     String stringValue() const override { return String(); }</span>
<span class="line-modified"> 375     String textUnderElement(AccessibilityTextUnderElementMode = AccessibilityTextUnderElementMode()) const override { return String(); }</span>
<span class="line-modified"> 376     String text() const override { return String(); }</span>
<span class="line-modified"> 377     int textLength() const override { return 0; }</span>
<span class="line-modified"> 378     String ariaLabeledByAttribute() const override { return String(); }</span>
<span class="line-modified"> 379     String ariaDescribedByAttribute() const override { return String(); }</span>
<span class="line-modified"> 380     const String placeholderValue() const override;</span>
<span class="line-modified"> 381     bool accessibleNameDerivesFromContent() const override;</span>
 382 
 383     // Abbreviations
<span class="line-modified"> 384     String expandedTextValue() const override { return String(); }</span>
<span class="line-modified"> 385     bool supportsExpandedTextValue() const override { return false; }</span>
 386 
<span class="line-modified"> 387     void elementsFromAttribute(Vector&lt;Element*&gt;&amp;, const QualifiedName&amp;) const override;</span>
 388 
 389     // Only if isColorWell()
<span class="line-modified"> 390     void colorValue(int&amp; r, int&amp; g, int&amp; b) const override { r = 0; g = 0; b = 0; }</span>
 391 
 392     AccessibilityRole roleValue() const override { return m_role; }
<span class="line-added"> 393     String rolePlatformString() const override;</span>
<span class="line-added"> 394     String roleDescription() const override;</span>
<span class="line-added"> 395     String ariaLandmarkRoleDescription() const override;</span>
 396 
<span class="line-modified"> 397     AXObjectCache* axObjectCache() const override;</span>
<span class="line-modified"> 398     AXID objectID() const override { return m_id; }</span>
 399 
 400     static AccessibilityObject* anchorElementForNode(Node*);
 401     static AccessibilityObject* headingElementForNode(Node*);
<span class="line-modified"> 402     Element* anchorElement() const override { return nullptr; }</span>
<span class="line-modified"> 403     bool supportsPressAction() const override;</span>
<span class="line-modified"> 404     Element* actionElement() const override { return nullptr; }</span>
<span class="line-modified"> 405     LayoutRect boundingBoxRect() const override { return LayoutRect(); }</span>
<span class="line-modified"> 406     LayoutRect elementRect() const override = 0;</span>
<span class="line-modified"> 407     IntPoint clickPoint() override;</span>


 408     static IntRect boundingBoxForQuads(RenderObject*, const Vector&lt;FloatQuad&gt;&amp;);
<span class="line-modified"> 409     Path elementPath() const override { return Path(); }</span>
<span class="line-modified"> 410     bool supportsPath() const override { return false; }</span>
<span class="line-modified"> 411 </span>
<span class="line-modified"> 412     TextIteratorBehavior textIteratorBehaviorForTextRange() const override;</span>
<span class="line-modified"> 413     PlainTextRange selectedTextRange() const override { return PlainTextRange(); }</span>
<span class="line-modified"> 414     unsigned selectionStart() const override { return selectedTextRange().start; }</span>
<span class="line-modified"> 415     unsigned selectionEnd() const override { return selectedTextRange().length; }</span>
<span class="line-modified"> 416 </span>
<span class="line-modified"> 417     URL url() const override { return URL(); }</span>
<span class="line-modified"> 418     VisibleSelection selection() const override { return VisibleSelection(); }</span>
<span class="line-modified"> 419     String selectedText() const override { return String(); }</span>
<span class="line-modified"> 420     String accessKey() const override { return nullAtom(); }</span>
<span class="line-modified"> 421     String actionVerb() const override;</span>
<span class="line-modified"> 422     Widget* widget() const override { return nullptr; }</span>
<span class="line-modified"> 423     Widget* widgetForAttachmentView() const override { return nullptr; }</span>
<span class="line-modified"> 424     Page* page() const override;</span>
<span class="line-modified"> 425     Document* document() const override;</span>
<span class="line-modified"> 426     FrameView* documentFrameView() const override;</span>
<span class="line-modified"> 427     Frame* frame() const override;</span>
<span class="line-modified"> 428     Frame* mainFrame() const override;</span>
<span class="line-modified"> 429     Document* topDocument() const override;</span>
<span class="line-modified"> 430     ScrollView* scrollViewAncestor() const override;</span>
<span class="line-modified"> 431     String language() const override;</span>
 432     // 1-based, to match the aria-level spec.
<span class="line-modified"> 433     unsigned hierarchicalLevel() const override { return 0; }</span>
<span class="line-modified"> 434     bool isInlineText() const override;</span>
<span class="line-modified"> 435 </span>
<span class="line-modified"> 436     void setFocused(bool) override { }</span>
<span class="line-modified"> 437     void setSelectedText(const String&amp;) override { }</span>
<span class="line-modified"> 438     void setSelectedTextRange(const PlainTextRange&amp;) override { }</span>
<span class="line-modified"> 439     void setValue(const String&amp;) override { }</span>
<span class="line-modified"> 440     bool replaceTextInRange(const String&amp;, const PlainTextRange&amp;) override;</span>
<span class="line-modified"> 441     bool insertText(const String&amp;) override;</span>
<span class="line-modified"> 442 </span>
<span class="line-modified"> 443     void setValue(float) override { }</span>
<span class="line-modified"> 444     void setSelected(bool) override { }</span>
<span class="line-modified"> 445     void setSelectedRows(AccessibilityChildrenVector&amp;) override { }</span>
<span class="line-modified"> 446 </span>
<span class="line-modified"> 447     void makeRangeVisible(const PlainTextRange&amp;) override { }</span>
<span class="line-modified"> 448     bool press() override;</span>
<span class="line-modified"> 449     bool performDefaultAction() override { return press(); }</span>
<span class="line-modified"> 450 </span>
<span class="line-modified"> 451     AccessibilityOrientation orientation() const override;</span>
<span class="line-modified"> 452     void increment() override { }</span>
<span class="line-modified"> 453     void decrement() override { }</span>
<span class="line-modified"> 454 </span>
<span class="line-modified"> 455     void childrenChanged() override { }</span>
<span class="line-modified"> 456     void textChanged() override { }</span>
<span class="line-modified"> 457     void updateAccessibilityRole() override { }</span>
<span class="line-modified"> 458     const AccessibilityChildrenVector&amp; children(bool updateChildrenIfNeeded = true) override;</span>
<span class="line-modified"> 459     void addChildren() override { }</span>
<span class="line-modified"> 460     void addChild(AXCoreObject*) override;</span>
<span class="line-modified"> 461     void insertChild(AXCoreObject*, unsigned) override;</span>
<span class="line-modified"> 462 </span>
<span class="line-modified"> 463     bool shouldIgnoreAttributeRole() const override { return false; }</span>
<span class="line-modified"> 464 </span>
<span class="line-modified"> 465     bool canHaveChildren() const override { return true; }</span>
<span class="line-added"> 466     bool hasChildren() const override { return m_haveChildren; }</span>
 467     void updateChildrenIfNecessary() override;
<span class="line-modified"> 468     void setNeedsToUpdateChildren() override { }</span>
<span class="line-modified"> 469     void setNeedsToUpdateSubtree() override { }</span>
<span class="line-modified"> 470     void clearChildren() override;</span>
<span class="line-modified"> 471     bool needsToUpdateChildren() const override { return false; }</span>
 472 #if PLATFORM(COCOA)
<span class="line-modified"> 473     void detachFromParent() override;</span>
 474 #else
<span class="line-modified"> 475     void detachFromParent() override { }</span>
 476 #endif
<span class="line-modified"> 477     bool isDetachedFromParent() override { return false; }</span>
<span class="line-modified"> 478 </span>
<span class="line-modified"> 479     bool canHaveSelectedChildren() const override { return false; }</span>
<span class="line-modified"> 480     void selectedChildren(AccessibilityChildrenVector&amp;) override { }</span>
<span class="line-modified"> 481     void visibleChildren(AccessibilityChildrenVector&amp;) override { }</span>
<span class="line-modified"> 482     void tabChildren(AccessibilityChildrenVector&amp;) override { }</span>
<span class="line-modified"> 483     bool shouldFocusActiveDescendant() const override { return false; }</span>
<span class="line-modified"> 484     AccessibilityObject* activeDescendant() const override { return nullptr; }</span>
<span class="line-modified"> 485     void handleActiveDescendantChanged() override { }</span>
<span class="line-modified"> 486     void handleAriaExpandedChanged() override { }</span>
<span class="line-modified"> 487     bool isDescendantOfObject(const AXCoreObject*) const override;</span>
<span class="line-modified"> 488     bool isAncestorOfObject(const AXCoreObject*) const override;</span>
<span class="line-modified"> 489     AccessibilityObject* firstAnonymousBlockChild() const override;</span>
 490 
 491     WEBCORE_EXPORT static AccessibilityRole ariaRoleToWebCoreRole(const String&amp;);
<span class="line-modified"> 492     bool hasAttribute(const QualifiedName&amp;) const override;</span>
<span class="line-modified"> 493     const AtomString&amp; getAttribute(const QualifiedName&amp;) const override;</span>
<span class="line-modified"> 494     bool hasTagName(const QualifiedName&amp;) const override;</span>
<span class="line-added"> 495     String tagName() const override;</span>
 496 
<span class="line-modified"> 497     VisiblePositionRange visiblePositionRange() const override { return VisiblePositionRange(); }</span>
<span class="line-modified"> 498     VisiblePositionRange visiblePositionRangeForLine(unsigned) const override { return VisiblePositionRange(); }</span>
 499 
<span class="line-modified"> 500     RefPtr&lt;Range&gt; elementRange() const override;</span>
 501     static bool replacedNodeNeedsCharacter(Node* replacedNode);
 502 
<span class="line-modified"> 503     VisiblePositionRange visiblePositionRangeForUnorderedPositions(const VisiblePosition&amp;, const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 504     VisiblePositionRange positionOfLeftWord(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 505     VisiblePositionRange positionOfRightWord(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 506     VisiblePositionRange leftLineVisiblePositionRange(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 507     VisiblePositionRange rightLineVisiblePositionRange(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 508     VisiblePositionRange sentenceForPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 509     VisiblePositionRange paragraphForPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 510     VisiblePositionRange styleRangeForPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 511     VisiblePositionRange visiblePositionRangeForRange(const PlainTextRange&amp;) const override;</span>
<span class="line-modified"> 512     VisiblePositionRange lineRangeForPosition(const VisiblePosition&amp;) const override;</span>
 513 
<span class="line-modified"> 514     RefPtr&lt;Range&gt; rangeForPlainTextRange(const PlainTextRange&amp;) const override;</span>
 515 
 516     static String stringForVisiblePositionRange(const VisiblePositionRange&amp;);
<span class="line-modified"> 517     String stringForRange(RefPtr&lt;Range&gt;) const override;</span>
<span class="line-modified"> 518     IntRect boundsForVisiblePositionRange(const VisiblePositionRange&amp;) const override { return IntRect(); }</span>
<span class="line-modified"> 519     IntRect boundsForRange(const RefPtr&lt;Range&gt;) const override { return IntRect(); }</span>
<span class="line-modified"> 520     int lengthForVisiblePositionRange(const VisiblePositionRange&amp;) const override;</span>
<span class="line-modified"> 521     void setSelectedVisiblePositionRange(const VisiblePositionRange&amp;) const override { }</span>
<span class="line-modified"> 522 </span>
<span class="line-modified"> 523     VisiblePosition visiblePositionForBounds(const IntRect&amp;, AccessibilityVisiblePositionForBounds) const override;</span>
<span class="line-modified"> 524     VisiblePosition visiblePositionForPoint(const IntPoint&amp;) const override { return VisiblePosition(); }</span>
<span class="line-modified"> 525     VisiblePosition nextVisiblePosition(const VisiblePosition&amp; visiblePos) const override { return visiblePos.next(); }</span>
<span class="line-modified"> 526     VisiblePosition previousVisiblePosition(const VisiblePosition&amp; visiblePos) const override { return visiblePos.previous(); }</span>
<span class="line-modified"> 527     VisiblePosition nextWordEnd(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 528     VisiblePosition previousWordStart(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 529     VisiblePosition nextLineEndPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 530     VisiblePosition previousLineStartPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 531     VisiblePosition nextSentenceEndPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 532     VisiblePosition previousSentenceStartPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 533     VisiblePosition nextParagraphEndPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 534     VisiblePosition previousParagraphStartPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 535     VisiblePosition visiblePositionForIndex(unsigned, bool /*lastIndexOK */) const override { return VisiblePosition(); }</span>
<span class="line-modified"> 536 </span>
<span class="line-modified"> 537     VisiblePosition visiblePositionForIndex(int) const override { return VisiblePosition(); }</span>
<span class="line-modified"> 538     int indexForVisiblePosition(const VisiblePosition&amp;) const override { return 0; }</span>
<span class="line-modified"> 539 </span>
<span class="line-modified"> 540     AccessibilityObject* accessibilityObjectForPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 541     int lineForPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified"> 542     PlainTextRange plainTextRangeForVisiblePositionRange(const VisiblePositionRange&amp;) const override;</span>
<span class="line-modified"> 543     int index(const VisiblePosition&amp;) const override { return -1; }</span>
<span class="line-modified"> 544 </span>
<span class="line-modified"> 545     void lineBreaks(Vector&lt;int&gt;&amp;) const override { }</span>
<span class="line-modified"> 546     PlainTextRange doAXRangeForLine(unsigned) const override { return PlainTextRange(); }</span>
<span class="line-modified"> 547     PlainTextRange doAXRangeForPosition(const IntPoint&amp;) const override;</span>
<span class="line-modified"> 548     PlainTextRange doAXRangeForIndex(unsigned) const override { return PlainTextRange(); }</span>
<span class="line-modified"> 549     PlainTextRange doAXStyleRangeForIndex(unsigned) const override;</span>
<span class="line-modified"> 550 </span>
<span class="line-modified"> 551     String doAXStringForRange(const PlainTextRange&amp;) const override { return String(); }</span>
<span class="line-modified"> 552     IntRect doAXBoundsForRange(const PlainTextRange&amp;) const override { return IntRect(); }</span>
<span class="line-modified"> 553     IntRect doAXBoundsForRangeUsingCharacterOffset(const PlainTextRange&amp;) const override { return IntRect(); }</span>
 554     static String listMarkerTextForNodeAndPosition(Node*, const VisiblePosition&amp;);
 555 
<span class="line-modified"> 556     unsigned doAXLineForIndex(unsigned) override;</span>
 557 
<span class="line-modified"> 558     String computedRoleString() const override;</span>
 559 
<span class="line-modified"> 560     String stringValueForMSAA() const override { return String(); }</span>
<span class="line-modified"> 561     String stringRoleForMSAA() const override { return String(); }</span>
<span class="line-modified"> 562     String nameForMSAA() const override { return String(); }</span>
<span class="line-modified"> 563     String descriptionForMSAA() const override { return String(); }</span>
<span class="line-modified"> 564     AccessibilityRole roleValueForMSAA() const override { return roleValue(); }</span>
 565 
<span class="line-modified"> 566     String passwordFieldValue() const override { return String(); }</span>
<span class="line-modified"> 567     bool isValueAutofilled() const override;</span>
<span class="line-modified"> 568     bool isValueAutofillAvailable() const override;</span>
<span class="line-modified"> 569     AutoFillButtonType valueAutofillButtonType() const override;</span>
 570 
 571     // Used by an ARIA tree to get all its rows.
<span class="line-modified"> 572     void ariaTreeRows(AccessibilityChildrenVector&amp;) override;</span>
 573     // Used by an ARIA tree item to get all of its direct rows that it can disclose.
<span class="line-modified"> 574     void ariaTreeItemDisclosedRows(AccessibilityChildrenVector&amp;) override;</span>
 575     // Used by an ARIA tree item to get only its content, and not its child tree items and groups.
<span class="line-modified"> 576     void ariaTreeItemContent(AccessibilityChildrenVector&amp;) override;</span>
 577 
 578     // ARIA live-region features.
<span class="line-modified"> 579     bool supportsLiveRegion(bool excludeIfOff = true) const override;</span>
<span class="line-modified"> 580     bool isInsideLiveRegion(bool excludeIfOff = true) const override;</span>
<span class="line-modified"> 581     AccessibilityObject* liveRegionAncestor(bool excludeIfOff = true) const override;</span>
<span class="line-modified"> 582     const String liveRegionStatus() const override { return String(); }</span>
<span class="line-modified"> 583     const String liveRegionRelevant() const override { return nullAtom(); }</span>
<span class="line-modified"> 584     bool liveRegionAtomic() const override { return false; }</span>
<span class="line-modified"> 585     bool isBusy() const override { return false; }</span>
 586     static const String defaultLiveRegionStatusForRole(AccessibilityRole);
 587     static bool liveRegionStatusIsEnabled(const AtomString&amp;);
 588     static bool contentEditableAttributeIsEnabled(Element*);
<span class="line-modified"> 589     bool hasContentEditableAttributeSet() const override;</span>
 590 
<span class="line-modified"> 591     bool supportsReadOnly() const override;</span>
<span class="line-modified"> 592     String readOnlyValue() const override;</span>
 593 
<span class="line-modified"> 594     bool supportsAutoComplete() const override;</span>
<span class="line-modified"> 595     String autoCompleteValue() const override;</span>
 596 
<span class="line-modified"> 597     bool hasARIAValueNow() const override { return hasAttribute(HTMLNames::aria_valuenowAttr); }</span>
<span class="line-added"> 598     bool supportsARIAAttributes() const override;</span>
 599 
 600     // CSS3 Speech properties.
<span class="line-modified"> 601     OptionSet&lt;SpeakAs&gt; speakAsProperty() const override { return OptionSet&lt;SpeakAs&gt; { }; }</span>
 602 
 603     // Make this object visible by scrolling as many nested scrollable views as needed.
<span class="line-modified"> 604     void scrollToMakeVisible() const override;</span>
 605     // Same, but if the whole object can&#39;t be made visible, try for this subrect, in local coordinates.
<span class="line-modified"> 606     void scrollToMakeVisibleWithSubFocus(const IntRect&amp;) const override;</span>
 607     // Scroll this object to a given point in global coordinates of the top-level window.
<span class="line-modified"> 608     void scrollToGlobalPoint(const IntPoint&amp;) const override;</span>
 609 
<span class="line-modified"> 610     bool scrollByPage(ScrollByPageDirection) const override;</span>
<span class="line-modified"> 611     IntPoint scrollPosition() const override;</span>
<span class="line-modified"> 612     IntSize scrollContentsSize() const override;</span>
<span class="line-modified"> 613     IntRect scrollVisibleContentRect() const override;</span>
<span class="line-modified"> 614     void scrollToMakeVisible(const ScrollRectToVisibleOptions&amp;) const override;</span>

 615 
<span class="line-modified"> 616     bool lastKnownIsIgnoredValue() override;</span>
<span class="line-modified"> 617     void setLastKnownIsIgnoredValue(bool) override;</span>
 618 
 619     // Fires a children changed notification on the parent if the isIgnored value changed.
<span class="line-modified"> 620     void notifyIfIgnoredValueChanged() override;</span>
 621 
 622     // All math elements return true for isMathElement().
<span class="line-modified"> 623     bool isMathElement() const override { return false; }</span>
<span class="line-modified"> 624     bool isMathFraction() const override { return false; }</span>
<span class="line-modified"> 625     bool isMathFenced() const override { return false; }</span>
<span class="line-modified"> 626     bool isMathSubscriptSuperscript() const override { return false; }</span>
<span class="line-modified"> 627     bool isMathRow() const override { return false; }</span>
<span class="line-modified"> 628     bool isMathUnderOver() const override { return false; }</span>
<span class="line-modified"> 629     bool isMathRoot() const override { return false; }</span>
<span class="line-modified"> 630     bool isMathSquareRoot() const override { return false; }</span>
<span class="line-modified"> 631     bool isMathText() const override { return false; }</span>
<span class="line-modified"> 632     bool isMathNumber() const override { return false; }</span>
<span class="line-modified"> 633     bool isMathOperator() const override { return false; }</span>
<span class="line-modified"> 634     bool isMathFenceOperator() const override { return false; }</span>
<span class="line-modified"> 635     bool isMathSeparatorOperator() const override { return false; }</span>
<span class="line-modified"> 636     bool isMathIdentifier() const override { return false; }</span>
<span class="line-modified"> 637     bool isMathTable() const override { return false; }</span>
<span class="line-modified"> 638     bool isMathTableRow() const override { return false; }</span>
<span class="line-modified"> 639     bool isMathTableCell() const override { return false; }</span>
<span class="line-modified"> 640     bool isMathMultiscript() const override { return false; }</span>
<span class="line-modified"> 641     bool isMathToken() const override { return false; }</span>
<span class="line-modified"> 642     bool isMathScriptObject(AccessibilityMathScriptObjectType) const override { return false; }</span>
<span class="line-modified"> 643     bool isMathMultiscriptObject(AccessibilityMathMultiscriptObjectType) const override { return false; }</span>
 644 
 645     // Root components.
<span class="line-modified"> 646     AXCoreObject* mathRadicandObject() override { return nullptr; }</span>
<span class="line-modified"> 647     AXCoreObject* mathRootIndexObject() override { return nullptr; }</span>
 648 
 649     // Under over components.
<span class="line-modified"> 650     AXCoreObject* mathUnderObject() override { return nullptr; }</span>
<span class="line-modified"> 651     AXCoreObject* mathOverObject() override { return nullptr; }</span>
 652 
 653     // Fraction components.
<span class="line-modified"> 654     AXCoreObject* mathNumeratorObject() override { return nullptr; }</span>
<span class="line-modified"> 655     AXCoreObject* mathDenominatorObject() override { return nullptr; }</span>
 656 
 657     // Subscript/superscript components.
<span class="line-modified"> 658     AXCoreObject* mathBaseObject() override { return nullptr; }</span>
<span class="line-modified"> 659     AXCoreObject* mathSubscriptObject() override { return nullptr; }</span>
<span class="line-modified"> 660     AXCoreObject* mathSuperscriptObject() override { return nullptr; }</span>
 661 
 662     // Fenced components.
<span class="line-modified"> 663     String mathFencedOpenString() const override { return String(); }</span>
<span class="line-modified"> 664     String mathFencedCloseString() const override { return String(); }</span>
<span class="line-modified"> 665     int mathLineThickness() const override { return 0; }</span>
<span class="line-modified"> 666     bool isAnonymousMathOperator() const override { return false; }</span>
 667 
 668     // Multiscripts components.
<span class="line-modified"> 669     void mathPrescripts(AccessibilityMathMultiscriptPairs&amp;) override { }</span>
<span class="line-modified"> 670     void mathPostscripts(AccessibilityMathMultiscriptPairs&amp;) override { }</span>

 671 
 672     // Visibility.
<span class="line-modified"> 673     bool isAXHidden() const override;</span>
<span class="line-modified"> 674     bool isDOMHidden() const override;</span>
<span class="line-modified"> 675     bool isHidden() const override { return isAXHidden() || isDOMHidden(); }</span>







 676 
 677 #if PLATFORM(COCOA)
<span class="line-modified"> 678     void overrideAttachmentParent(AXCoreObject* parent) override;</span>
 679 #else
<span class="line-modified"> 680     void overrideAttachmentParent(AXCoreObject*) override { }</span>
 681 #endif
 682 
 683 #if ENABLE(ACCESSIBILITY)
 684     // a platform-specific method for determining if an attachment is ignored
<span class="line-modified"> 685     bool accessibilityIgnoreAttachment() const override;</span>
 686     // gives platforms the opportunity to indicate if and how an object should be included
<span class="line-modified"> 687     AccessibilityObjectInclusion accessibilityPlatformIncludesObject() const override;</span>
 688 #else
<span class="line-modified"> 689     bool accessibilityIgnoreAttachment() const override { return true; }</span>
<span class="line-modified"> 690     AccessibilityObjectInclusion accessibilityPlatformIncludesObject() const override { return AccessibilityObjectInclusion::DefaultBehavior; }</span>
 691 #endif
 692 
 693 #if PLATFORM(IOS_FAMILY)
<span class="line-modified"> 694     int accessibilityPasswordFieldLength() override;</span>
<span class="line-modified"> 695     bool hasTouchEventListener() const override;</span>
<span class="line-modified"> 696     bool isInputTypePopupButton() const override;</span>
 697 #endif
 698 
 699     // allows for an AccessibilityObject to update its render tree or perform
 700     // other operations update type operations
<span class="line-modified"> 701     void updateBackingStore() override;</span>
 702 
 703 #if PLATFORM(COCOA)
<span class="line-modified"> 704     bool preventKeyboardDOMEventDispatch() const override;</span>
<span class="line-modified"> 705     void setPreventKeyboardDOMEventDispatch(bool) override;</span>
<span class="line-modified"> 706     bool fileUploadButtonReturnsValueInTitle() const override;</span>
 707     String speechHintAttributeValue() const override;
 708     String descriptionAttributeValue() const override;
 709     String helpTextAttributeValue() const override;
 710     String titleAttributeValue() const override;
<span class="line-added"> 711     bool hasApplePDFAnnotationAttribute() const override { return hasAttribute(HTMLNames::x_apple_pdf_annotationAttr); }</span>
 712 #endif
 713 
 714 #if PLATFORM(COCOA) &amp;&amp; !PLATFORM(IOS_FAMILY)
<span class="line-modified"> 715     bool caretBrowsingEnabled() const override;</span>
<span class="line-modified"> 716     void setCaretBrowsingEnabled(bool) override;</span>
 717 #endif
 718 
<span class="line-modified"> 719     AccessibilityObject* focusableAncestor() override;</span>
<span class="line-modified"> 720     AccessibilityObject* editableAncestor() override;</span>
<span class="line-modified"> 721     AccessibilityObject* highestEditableAncestor() override;</span>
 722 
<span class="line-modified"> 723     const AccessibilityScrollView* ancestorAccessibilityScrollView(bool includeSelf) const override;</span>

 724 
<span class="line-modified"> 725     void clearIsIgnoredFromParentData() override { m_isIgnoredFromParentData = AccessibilityIsIgnoredFromParentData(); }</span>
<span class="line-modified"> 726     void setIsIgnoredFromParentDataForChild(AXCoreObject*) override;</span>
<span class="line-added"> 727 </span>
<span class="line-added"> 728     uint64_t sessionID() const override;</span>
<span class="line-added"> 729     String documentURI() const override;</span>
<span class="line-added"> 730     String documentEncoding() const override;</span>
 731 
 732 protected:
<span class="line-added"> 733     AccessibilityObject() = default;</span>
<span class="line-added"> 734     void detachRemoteParts(AccessibilityDetachmentType) override;</span>
<span class="line-added"> 735     void detachPlatformWrapper(AccessibilityDetachmentType) override;</span>
<span class="line-added"> 736 </span>
 737     AXID m_id { 0 };
 738     AccessibilityChildrenVector m_children;
 739     mutable bool m_haveChildren { false };
 740     AccessibilityRole m_role { AccessibilityRole::Unknown };
 741     AccessibilityObjectInclusion m_lastKnownIsIgnoredValue { AccessibilityObjectInclusion::DefaultBehavior };
 742     AccessibilityIsIgnoredFromParentData m_isIgnoredFromParentData { };
 743     bool m_childrenDirty { false };
 744     bool m_subtreeDirty { false };
 745 #if ENABLE(ACCESSIBILITY_ISOLATED_TREE)
 746     bool m_isolatedTreeNodeInitialized { false };
 747 #endif
 748 
<span class="line-modified"> 749     void setIsIgnoredFromParentData(AccessibilityIsIgnoredFromParentData&amp; data) override { m_isIgnoredFromParentData = data; }</span>
 750 
 751     virtual bool computeAccessibilityIsIgnored() const { return true; }
 752     bool isAccessibilityObject() const override { return true; }
 753 
 754     // If this object itself scrolls, return its ScrollableArea.
 755     virtual ScrollableArea* getScrollableAreaIfScrollable() const { return nullptr; }
 756     virtual void scrollTo(const IntPoint&amp;) const { }
 757     ScrollableArea* scrollableAreaAncestor() const;
 758     void scrollAreaAndAncestor(std::pair&lt;ScrollableArea*, AccessibilityObject*&gt;&amp;) const;
 759 




 760     virtual AccessibilityRole buttonRoleType() const;
<span class="line-modified"> 761     String rolePlatformDescription() const;</span>
<span class="line-added"> 762     bool isOnScreen() const override;</span>
 763     bool dispatchTouchEvent();
 764 
 765     void ariaElementsFromAttribute(AccessibilityChildrenVector&amp;, const QualifiedName&amp;) const;
 766     void ariaElementsReferencedByAttribute(AccessibilityChildrenVector&amp;, const QualifiedName&amp;) const;
 767 
 768     AccessibilityObject* radioGroupAncestor() const;
 769 
 770 #if ENABLE(ACCESSIBILITY) &amp;&amp; USE(ATK)
 771     bool allowsTextRanges() const;
 772     unsigned getLengthForTextRange() const;
 773 #else
 774     bool allowsTextRanges() const { return isTextControl(); }
 775     unsigned getLengthForTextRange() const { return text().length(); }
 776 #endif








 777 };
 778 
 779 #if !ENABLE(ACCESSIBILITY)
 780 inline const AccessibilityObject::AccessibilityChildrenVector&amp; AccessibilityObject::children(bool) { return m_children; }
<span class="line-modified"> 781 inline String AccessibilityObject::actionVerb() const { return emptyString(); }</span>
 782 inline int AccessibilityObject::lineForPosition(const VisiblePosition&amp;) const { return -1; }
 783 inline void AccessibilityObject::updateBackingStore() { }
<span class="line-added"> 784 inline void AccessibilityObject::detachPlatformWrapper(AccessibilityDetachmentType) { }</span>
 785 #endif
 786 
 787 AccessibilityObject* firstAccessibleObjectFromNode(const Node*, const WTF::Function&lt;bool(const AccessibilityObject&amp;)&gt;&amp; isAccessible);
 788 
<span class="line-added"> 789 namespace Accessibility {</span>
<span class="line-added"> 790 </span>
<span class="line-added"> 791 using PlatformRoleMap = HashMap&lt;AccessibilityRole, String, DefaultHash&lt;unsigned&gt;::Hash, WTF::UnsignedWithZeroKeyHashTraits&lt;unsigned&gt;&gt;;</span>
<span class="line-added"> 792 </span>
<span class="line-added"> 793 PlatformRoleMap createPlatformRoleMap();</span>
<span class="line-added"> 794 String roleToPlatformString(AccessibilityRole);</span>
<span class="line-added"> 795 </span>
<span class="line-added"> 796 } // namespace Accessibility</span>
<span class="line-added"> 797 </span>
 798 } // namespace WebCore
 799 
 800 #define SPECIALIZE_TYPE_TRAITS_ACCESSIBILITY(ToValueTypeName, predicate) \
 801 SPECIALIZE_TYPE_TRAITS_BEGIN(WebCore::ToValueTypeName) \
<span class="line-modified"> 802     static bool isType(const WebCore::AXCoreObject&amp; object) { return object.predicate; } \</span>
 803 SPECIALIZE_TYPE_TRAITS_END()
 804 
 805 SPECIALIZE_TYPE_TRAITS_BEGIN(WebCore::AccessibilityObject)
<span class="line-modified"> 806 static bool isType(const WebCore::AXCoreObject&amp; context) { return context.isAccessibilityObject(); }</span>
 807 SPECIALIZE_TYPE_TRAITS_END()
</pre>
</td>
</tr>
</table>
<center><a href="AccessibilityObject.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="AccessibilityObjectInterface.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>