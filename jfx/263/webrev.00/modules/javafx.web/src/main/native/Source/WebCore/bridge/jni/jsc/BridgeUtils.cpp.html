<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WebCore/bridge/jni/jsc/BridgeUtils.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2011, 2018, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 #include &quot;config.h&quot;
 27 
 28 #include &quot;BridgeUtils.h&quot;
 29 
 30 #include &lt;JavaScriptCore/CallFrame.h&gt;
 31 #include &lt;JavaScriptCore/Identifier.h&gt;
 32 
 33 #include &quot;Document.h&quot;
 34 #include &quot;Frame.h&quot;
 35 #include &quot;JavaInstanceJSC.h&quot;
 36 #include &quot;JavaArrayJSC.h&quot;
 37 #include &quot;JavaRuntimeObject.h&quot;
 38 #include &quot;JNIUtilityPrivate.h&quot;
 39 #include &quot;JSDOMBinding.h&quot;
 40 #include &quot;JSDOMGlobalObject.h&quot;
 41 #include &quot;JSExecState.h&quot;
 42 #include &quot;JSNode.h&quot;
 43 #include &quot;ScriptController.h&quot;
 44 #include &quot;runtime_array.h&quot;
 45 #include &quot;runtime_object.h&quot;
 46 #include &quot;runtime_root.h&quot;
 47 #include &lt;wtf/java/JavaRef.h&gt;
 48 #include &lt;wtf/text/WTFString.h&gt;
 49 #include &lt;JavaScriptCore/JSArray.h&gt;
 50 #include &lt;JavaScriptCore/JSLock.h&gt;
 51 #include &lt;JavaScriptCore/APICast.h&gt;
 52 #include &lt;JavaScriptCore/OpaqueJSString.h&gt;
 53 #include &lt;JavaScriptCore/JSBase.h&gt;
 54 #include &lt;JavaScriptCore/JSStringRef.h&gt;
 55 
 56 #include &quot;com_sun_webkit_dom_JSObject.h&quot;
 57 
 58 #if 1
 59 #define FIND_CACHE_CLASS(ENV, SIG)      \
 60   static JGClass cls((ENV)-&gt;FindClass(SIG)); return cls
 61 #else
 62 #define FIND_CACHE_CLASS(ENV, SIG)      \
 63   static jclass cls = (jclass) (ENV)-&gt;NewGlobalRef((ENV)-&gt;FindClass(SIG)); \
 64   return cls
 65 #endif
 66 
 67 #if 0
 68 static jclass getNodeImplClass (JNIEnv *env)
 69 {
 70     FIND_CACHE_CLASS(env, &quot;com/sun/webkit/dom/NodeImpl&quot;);
 71 }
 72 
 73 static jclass getDoubleClass (JNIEnv *env)
 74 {
 75     FIND_CACHE_CLASS(env, &quot;java/lang/Double&quot;);
 76 }
 77 
 78 static jclass getIntegerClass (JNIEnv *env)
 79 {
 80     FIND_CACHE_CLASS(env, &quot;java/lang/Integer&quot;);
 81 }
 82 #endif
 83 
 84 static jclass getJSObjectClass (JNIEnv *env)
 85 {
 86     FIND_CACHE_CLASS(env, &quot;com/sun/webkit/dom/JSObject&quot;);
 87 }
 88 
 89 static jclass getJSExceptionClass (JNIEnv *env)
 90 {
 91     FIND_CACHE_CLASS(env, &quot;netscape/javascript/JSException&quot;);
 92 }
 93 
 94 static jclass getNumberClass (JNIEnv *env)
 95 {
 96     FIND_CACHE_CLASS(env, &quot;java/lang/Number&quot;);
 97 }
 98 
 99 static jclass getBooleanClass (JNIEnv *env)
100 {
101     FIND_CACHE_CLASS(env, &quot;java/lang/Boolean&quot;);
102 }
103 
104 static jclass getStringClass (JNIEnv *env)
105 {
106     FIND_CACHE_CLASS(env, &quot;java/lang/String&quot;);
107 }
108 
109 static jclass getNullPointerExceptionClass (JNIEnv *env)
110 {
111     FIND_CACHE_CLASS(env, &quot;java/lang/NullPointerException&quot;);
112 }
113 
114 static void throwNullPointerException (JNIEnv *env)
115 {
116     jclass clJSException = getNullPointerExceptionClass(env);
117     env-&gt;Throw((jthrowable) env-&gt;NewObject(clJSException,
118             env-&gt;GetMethodID(clJSException, &quot;&lt;init&gt;&quot;, &quot;()V&quot;)));
119 }
120 
121 namespace WebCore {
122 
123 JSGlobalContextRef getGlobalContext(WebCore::ScriptController* scriptController)
124 {
125     return toGlobalRef(scriptController-&gt;globalObject(WebCore::mainThreadNormalWorld()));
126 }
127 
128 JSStringRef asJSStringRef(JNIEnv *env, jstring str)
129 {
130     unsigned int slen = env-&gt;GetStringLength(str);
131     const jchar* schars = env-&gt;GetStringCritical(str, nullptr);
132     JSStringRef name = JSStringCreateWithCharacters((const JSChar*) schars, slen);
133     env-&gt;ReleaseStringCritical(str, schars);
134     return name;
135 }
136 
137 JSValueRef Java_Object_to_JSValue(
138     JNIEnv *env,
139     JSContextRef ctx,
140     JSC::Bindings::RootObject* rootObject,
141     jobject val,
142     jobject accessControlContext)
143 {
144     if (val == nullptr)
145         return JSValueMakeNull(ctx);
146     JSC::JSGlobalObject* lexicalGlobalObject = toJS(ctx);
147     JSC::JSLockHolder lock(lexicalGlobalObject);
148 
149     jclass clJSObject = getJSObjectClass(env);
150     if (env-&gt;IsInstanceOf(val, clJSObject)) {
151         static jfieldID fldPeer = env-&gt;GetFieldID(clJSObject, &quot;peer&quot;, &quot;J&quot;);
152         static jfieldID fldPeerType = env-&gt;GetFieldID(clJSObject, &quot;peer_type&quot;, &quot;I&quot;);
153         jlong peer = env-&gt;GetLongField(val, fldPeer);
154         jint peer_type = env-&gt;GetIntField(val, fldPeerType);
155         switch (peer_type) {
156         case com_sun_webkit_dom_JSObject_JS_CONTEXT_OBJECT:
157             return static_cast&lt;JSObjectRef&gt;(jlong_to_ptr(peer));
158         case com_sun_webkit_dom_JSObject_JS_DOM_NODE_OBJECT:
159         case com_sun_webkit_dom_JSObject_JS_DOM_WINDOW_OBJECT:
160             {
161                 JSDOMGlobalObject* globalObject = toJSDOMGlobalObject(
162                     ((peer_type == com_sun_webkit_dom_JSObject_JS_DOM_WINDOW_OBJECT)
163                         ? *static_cast&lt;DOMWindow*&gt;(jlong_to_ptr(peer))-&gt;document()
164                         : static_cast&lt;Node*&gt;(jlong_to_ptr(peer))-&gt;document()),
165                     normalWorld(lexicalGlobalObject-&gt;vm()));
166                 return toRef(lexicalGlobalObject,
167                     (peer_type == com_sun_webkit_dom_JSObject_JS_DOM_WINDOW_OBJECT)
168                         ? WebCore::toJS(lexicalGlobalObject, globalObject, static_cast&lt;DOMWindow*&gt;(jlong_to_ptr(peer)))
169                         : WebCore::toJS(lexicalGlobalObject, globalObject, static_cast&lt;Node*&gt;(jlong_to_ptr(peer))));
170             }
171         }
172     }
173     jclass clString = getStringClass(env);
174     if (env-&gt;IsInstanceOf(val, clString)) {
175         JSStringRef value = asJSStringRef(env, (jstring) val);
176         JSValueRef jsvalue = JSValueMakeString(ctx, value);
177         JSStringRelease(value);
178         return jsvalue;
179     }
180     jclass clBoolean = getBooleanClass(env);
181     if (env-&gt;IsInstanceOf(val, clBoolean)) {
182         static jmethodID booleanValueMethod = env-&gt;GetMethodID(clBoolean, &quot;booleanValue&quot;, &quot;()Z&quot;);
183         jboolean value = env-&gt;CallBooleanMethod(val, booleanValueMethod);
184         return JSValueMakeBoolean(ctx, value);
185     }
186     jclass clNumber = getNumberClass(env);
187     if (env-&gt;IsInstanceOf(val, clNumber)) {
188         static jmethodID doubleValueMethod = env-&gt;GetMethodID(clNumber, &quot;doubleValue&quot;, &quot;()D&quot;);
189         jdouble value = env-&gt;CallDoubleMethod(val, doubleValueMethod);
190         return JSValueMakeNumber(ctx, value);
191     }
192 
193     JLObject valClass(JSC::Bindings::callJNIMethod&lt;jobject&gt;(val, &quot;getClass&quot;, &quot;()Ljava/lang/Class;&quot;));
194     if (JSC::Bindings::callJNIMethod&lt;jboolean&gt;(valClass, &quot;isArray&quot;, &quot;()Z&quot;)) {
195         JLString className((jstring)JSC::Bindings::callJNIMethod&lt;jobject&gt;(valClass, &quot;getName&quot;, &quot;()Ljava/lang/String;&quot;));
196         const char* classNameC = JSC::Bindings::getCharactersFromJString(className);
197         JSC::JSValue arr = JSC::Bindings::JavaArray::convertJObjectToArray(lexicalGlobalObject, val, classNameC, rootObject, accessControlContext);
198         JSC::Bindings::releaseCharactersForJString(className, classNameC);
199         return toRef(lexicalGlobalObject, arr);
200     }
201     else {
202         // All other Java Object types including java.lang.Character will be wrapped inside JavaInstance.
203         RefPtr&lt;JSC::Bindings::JavaInstance&gt; jinstance = JSC::Bindings::JavaInstance::create(val, rootObject, accessControlContext);
204         return toRef(jinstance-&gt;createRuntimeObject(lexicalGlobalObject));
205     }
206 }
207 
208 jstring JSValue_to_Java_String(JSValueRef value, JNIEnv* env, JSContextRef ctx)
209 {
210     JSStringRef str = JSValueToStringCopy(ctx, value, nullptr);
211     size_t slen = JSStringGetLength(str);
212     const JSChar* schars = JSStringGetCharactersPtr(str);
213     jstring result = env-&gt;NewString((const jchar*) schars, slen);
214     JSStringRelease(str);
215     return result;
216 }
217 
218 jobject JSValue_to_Java_Object(
219     JSValueRef value,
220     JNIEnv*,
221     JSContextRef ctx,
222     JSC::Bindings::RootObject* rootObject)
223 {
224     JSC::JSGlobalObject* globalObject = toJS(ctx);
225     return convertValueToJValue(globalObject, rootObject, toJS(globalObject, value),
226         JSC::Bindings::JavaTypeObject, &quot;java.lang.Object&quot;).l;
227 }
228 
229 static void throwJavaException(
230     JNIEnv* env,
231     JSContextRef ctx,
232     JSValueRef exception,
233     JSC::Bindings::RootObject* rootObject)
234 {
235     jclass clJSObject = getJSObjectClass(env);
236     jobject jex = JSValue_to_Java_Object(exception, env, ctx, rootObject);
237     static jmethodID makeID =
238         env-&gt;GetStaticMethodID(clJSObject, &quot;fwkMakeException&quot;,
239                         &quot;(Ljava/lang/Object;)Lnetscape/javascript/JSException;&quot;);
240 
241     env-&gt;Throw(JLocalRef&lt;jthrowable&gt;((jthrowable)env-&gt;CallStaticObjectMethod(
242             clJSObject,
243             makeID,
244             jex)));
245 }
246 
247 jobject executeScript(
248     JNIEnv* env,
249     JSObjectRef object,
250     JSContextRef ctx,
251     JSC::Bindings::RootObject *rootObject,
252     jstring str)
253 {
254     if (str == nullptr) {
255         throwNullPointerException(env);
256         return nullptr;
257     }
258     JSStringRef script = asJSStringRef(env, str);
259     JSValueRef exception = 0;
260     JSValueRef value = JSEvaluateScript(ctx, script, object, nullptr, 1, &amp;exception);
261     JSStringRelease(script);
262     if (exception) {
263         throwJavaException(env, ctx, exception, rootObject);
264         return nullptr;
265     }
266     return WebCore::JSValue_to_Java_Object(value, env, ctx, rootObject);
267 }
268 
269 }
270 
271 
272 RefPtr&lt;JSC::Bindings::RootObject&gt; checkJSPeer(
273     jlong peer,
274     jint peer_type,
275     JSObjectRef &amp;object,
276     JSContextRef &amp;context)
277 {
278     JSC::Bindings::RootObject *rootObject = nullptr;
279     switch (peer_type) {
280     case com_sun_webkit_dom_JSObject_JS_CONTEXT_OBJECT:
281         {
282             object = static_cast&lt;JSObjectRef&gt;(jlong_to_ptr(peer));
283             rootObject = JSC::Bindings::findProtectingRootObject(reinterpret_cast&lt;JSC::JSObject*&gt;(object));
284             if (rootObject) {
285                 context = toRef(rootObject-&gt;globalObject());
286             }
287         }
288         break;
289     case com_sun_webkit_dom_JSObject_JS_DOM_NODE_OBJECT:
290     case com_sun_webkit_dom_JSObject_JS_DOM_WINDOW_OBJECT:
291         {
292             WebCore::Frame* frame = (peer_type == com_sun_webkit_dom_JSObject_JS_DOM_WINDOW_OBJECT)
293                 ? static_cast&lt;WebCore::DOMWindow*&gt;(jlong_to_ptr(peer))-&gt;document()-&gt;frame()
294                 : static_cast&lt;WebCore::Node*&gt;(jlong_to_ptr(peer))-&gt;document().frame();
295 
296             if (!frame) {
297                 return rootObject;
298             }
299             rootObject = &amp;(frame-&gt;script().createRootObject(frame).leakRef());
300             if (rootObject) {
301                 context = WebCore::getGlobalContext(&amp;frame-&gt;script());
302                 JSC::JSGlobalObject* JSGlobalObject = toJS(context);
303                 JSC::JSLockHolder lock(JSGlobalObject);
304 
305                 object = const_cast&lt;JSObjectRef&gt;(toRef(JSGlobalObject,
306                     (peer_type == com_sun_webkit_dom_JSObject_JS_DOM_WINDOW_OBJECT)
307                     ? WebCore::toJS(JSGlobalObject, static_cast&lt;WebCore::JSDOMGlobalObject *&gt;(rootObject-&gt;globalObject()), static_cast&lt;WebCore::DOMWindow*&gt;(jlong_to_ptr(peer)))
308                     : WebCore::toJS(JSGlobalObject, static_cast&lt;WebCore::JSDOMGlobalObject *&gt;(rootObject-&gt;globalObject()), static_cast&lt;WebCore::Node*&gt;(jlong_to_ptr(peer)))));
309 
310             }
311         }
312         break;
313     };
314 
315     return rootObject;
316 }
317 
318 
319 
320 extern &quot;C&quot; {
321 
322 JNIEXPORT jobject JNICALL Java_com_sun_webkit_dom_JSObject_evalImpl
323 (JNIEnv *env, jclass, jlong peer, jint peer_type, jstring str)
324 {
325     if (str == nullptr) {
326         throwNullPointerException(env);
327         return nullptr;
328     }
329     JSObjectRef object;
330     JSContextRef ctx;
331     RefPtr&lt;JSC::Bindings::RootObject&gt; rootObject(checkJSPeer(peer, peer_type, object, ctx));
332     if (rootObject.get() == nullptr) {
333         throwNullPointerException(env);
334         return nullptr;
335     }
336 
337     return WebCore::executeScript(env, object, ctx, rootObject.get(), str);
338 }
339 
340 JNIEXPORT jobject JNICALL Java_com_sun_webkit_dom_JSObject_getMemberImpl
341 (JNIEnv *env, jclass, jlong peer, jint peer_type, jstring str)
342 {
343     if (str == nullptr) {
344         throwNullPointerException(env);
345         return nullptr;
346     }
347     JSObjectRef object;
348     JSContextRef ctx;
349     RefPtr&lt;JSC::Bindings::RootObject&gt; rootObject(checkJSPeer(peer, peer_type, object, ctx));
350 
351     if (rootObject.get() == nullptr) {
352         throwNullPointerException(env);
353         return nullptr;
354     }
355     JSStringRef name = WebCore::asJSStringRef(env, str);
356     JSValueRef value = JSObjectGetProperty(ctx, object, name, nullptr);
357     JSStringRelease(name);
358     return WebCore::JSValue_to_Java_Object(value, env, ctx, rootObject.get());
359 }
360 
361 JNIEXPORT void JNICALL Java_com_sun_webkit_dom_JSObject_setMemberImpl
362 (JNIEnv *env, jclass, jlong peer, jint peer_type, jstring str, jobject value, jobject accessControlContext)
363 {
364     if (str == nullptr) {
365         throwNullPointerException(env);
366         return;
367     }
368     JSObjectRef object;
369     JSContextRef ctx;
370     RefPtr&lt;JSC::Bindings::RootObject&gt; rootObject(checkJSPeer(peer, peer_type, object, ctx));
371     if (rootObject.get() == nullptr) {
372         throwNullPointerException(env);
373         return;
374     }
375     JSStringRef name = WebCore::asJSStringRef(env, str);
376     JSValueRef jsvalue = WebCore::Java_Object_to_JSValue(env, ctx, rootObject.get(), value, accessControlContext);
377     JSPropertyAttributes attributes = 0;
378     JSValueRef exception = 0;
379     JSObjectSetProperty(ctx, object, name, jsvalue, attributes, &amp;exception);
380     JSStringRelease(name);
381     if (exception)
382         WebCore::throwJavaException(env, ctx, exception, rootObject.get());
383 }
384 
385 JNIEXPORT void JNICALL Java_com_sun_webkit_dom_JSObject_removeMemberImpl
386 (JNIEnv *env, jclass, jlong peer, jint peer_type, jstring str)
387 {
388     if (str == nullptr) {
389         throwNullPointerException(env);
390         return;
391     }
392     JSObjectRef object;
393     JSContextRef ctx;
394     if (!checkJSPeer(peer, peer_type, object, ctx)) {
395         throwNullPointerException(env);
396         return;
397     }
398 
399     JSStringRef name = WebCore::asJSStringRef(env, str);
400     JSObjectDeleteProperty(ctx, object, name, nullptr);
401     JSStringRelease(name);
402 }
403 
404 JNIEXPORT jobject JNICALL Java_com_sun_webkit_dom_JSObject_getSlotImpl
405   (JNIEnv *env, jclass, jlong peer, jint peer_type, jint index)
406 {
407     JSObjectRef object;
408     JSContextRef ctx;
409     RefPtr&lt;JSC::Bindings::RootObject&gt; rootObject(checkJSPeer(peer, peer_type, object, ctx));
410     if (rootObject.get() == nullptr) {
411         throwNullPointerException(env);
412         return nullptr;
413     }
414 
415     JSValueRef value = JSObjectGetPropertyAtIndex(ctx, object, index, nullptr);
416     return WebCore::JSValue_to_Java_Object(value, env, ctx, rootObject.get());
417 }
418 
419 JNIEXPORT void JNICALL Java_com_sun_webkit_dom_JSObject_setSlotImpl
420 (JNIEnv *env, jclass, jlong peer, jint peer_type, jint index, jobject value, jobject accessControlContext)
421 {
422     JSObjectRef object;
423     JSContextRef ctx;
424     RefPtr&lt;JSC::Bindings::RootObject&gt; rootObject(checkJSPeer(peer, peer_type, object, ctx));
425     if (rootObject.get() == nullptr) {
426         throwNullPointerException(env);
427         return;
428     }
429 
430     JSValueRef jsvalue = WebCore::Java_Object_to_JSValue(env, ctx, rootObject.get(), value, accessControlContext);
431     JSObjectSetPropertyAtIndex(ctx, object, (unsigned) index, jsvalue, nullptr);
432 }
433 
434 JNIEXPORT jstring JNICALL Java_com_sun_webkit_dom_JSObject_toStringImpl
435 (JNIEnv *env, jclass, jlong peer, jint peer_type)
436 {
437     JSObjectRef object;
438     JSContextRef ctx;
439     if (!checkJSPeer(peer, peer_type, object, ctx)) {
440         return nullptr;
441     }
442 
443     JSC::JSGlobalObject* JSGlobalObject = toJS(ctx);
444     JSC::JSLockHolder lock(JSGlobalObject);
445 
446     return toJS(object)-&gt;toString(JSGlobalObject)-&gt;value(JSGlobalObject)
447         .toJavaString(env).releaseLocal();
448 }
449 
450 JNIEXPORT jobject JNICALL Java_com_sun_webkit_dom_JSObject_callImpl
451   (JNIEnv *env, jclass, jlong peer, jint peer_type, jstring methodName, jobjectArray args, jobject accessControlContext)
452 {
453     if (methodName == nullptr || args == nullptr) {
454         throwNullPointerException(env);
455         return nullptr;
456     }
457     JSObjectRef object;
458     JSContextRef ctx;
459     RefPtr&lt;JSC::Bindings::RootObject&gt; rootObject(checkJSPeer(peer, peer_type, object, ctx));
460     if (!rootObject || !rootObject.get() || !ctx) {
461         env-&gt;ThrowNew(getJSExceptionClass(env), &quot;Invalid function reference&quot;);
462         return nullptr;
463     }
464 
465     JSStringRef name = WebCore::asJSStringRef(env, methodName);
466     JSValueRef member = JSObjectGetProperty(ctx, object, name, nullptr);
467     JSStringRelease(name);
468     if (!JSValueIsObject(ctx, member))
469         return JSC::Bindings::convertUndefinedToJObject();
470     JSObjectRef function = JSValueToObject(ctx, member, nullptr);
471     if (! JSObjectIsFunction(ctx, function))
472         return JSC::Bindings::convertUndefinedToJObject();
473     size_t argumentCount = env-&gt;GetArrayLength(args);
474     JSValueRef *arguments = new JSValueRef[argumentCount];
475     for (size_t i = 0;  i &lt; argumentCount; i++) {
476       JLObject jarg(env-&gt;GetObjectArrayElement(args, i));
477         arguments[i] = WebCore::Java_Object_to_JSValue(env, ctx, rootObject.get(), jarg, accessControlContext);
478     }
479     JSValueRef exception = 0;
480     JSValueRef result = JSObjectCallAsFunction(ctx, function, object,
481                                                argumentCount,  arguments,
482                                                &amp;exception);
483     delete[] arguments;
484     if (exception) {
485         WebCore::throwJavaException(env, ctx, exception, rootObject.get());
486         return nullptr;
487     }
488     return WebCore::JSValue_to_Java_Object(result, env, ctx, rootObject.get());
489 }
490 
491 JNIEXPORT void JNICALL Java_com_sun_webkit_dom_JSObject_unprotectImpl
492 (JNIEnv*, jclass, jlong peer, jint peer_type)
493 {
494     JSObjectRef object;
495     JSContextRef ctx;
496     RefPtr&lt;JSC::Bindings::RootObject&gt; rootObject(checkJSPeer(peer, peer_type, object, ctx));
497     if (!rootObject || !rootObject.get() || !peer || !ctx) {
498         return;
499     }
500 
501     rootObject-&gt;gcUnprotect(toJS(object));
502 }
503 
504 }
    </pre>
  </body>
</html>