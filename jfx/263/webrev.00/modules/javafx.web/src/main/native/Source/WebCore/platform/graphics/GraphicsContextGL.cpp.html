<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/GraphicsContextGL.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (C) 2010, 2016 Apple Inc. All rights reserved.
  3  * Copyright (C) 2010 Google Inc. All rights reserved.
  4  * Copyright (C) 2010 Mozilla Corporation. All rights reserved.
  5  *
  6  * Redistribution and use in source and binary forms, with or without
  7  * modification, are permitted provided that the following conditions
  8  * are met:
  9  * 1. Redistributions of source code must retain the above copyright
 10  *    notice, this list of conditions and the following disclaimer.
 11  * 2. Redistributions in binary form must reproduce the above copyright
 12  *    notice, this list of conditions and the following disclaimer in the
 13  *    documentation and/or other materials provided with the distribution.
 14  *
 15  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 16  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 17  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 18  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 19  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 20  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 21  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 22  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 23  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 24  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 25  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 26  */
 27 
 28 #include &quot;config.h&quot;
 29 #include &quot;GraphicsContextGL.h&quot;
 30 
 31 #if ENABLE(GRAPHICS_CONTEXT_GL)
 32 
 33 #include &quot;ExtensionsGL.h&quot;
 34 
 35 namespace WebCore {
 36 
 37 GraphicsContextGL::GraphicsContextGL(GraphicsContextGLAttributes attrs, Destination destination, GraphicsContextGL*)
 38     : m_attrs(attrs)
 39     , m_destination(destination)
 40 {
 41 }
 42 
 43 unsigned GraphicsContextGL::getClearBitsByAttachmentType(GCGLenum attachment)
 44 {
 45     switch (attachment) {
 46     case GraphicsContextGL::COLOR_ATTACHMENT0:
 47     case ExtensionsGL::COLOR_ATTACHMENT1_EXT:
 48     case ExtensionsGL::COLOR_ATTACHMENT2_EXT:
 49     case ExtensionsGL::COLOR_ATTACHMENT3_EXT:
 50     case ExtensionsGL::COLOR_ATTACHMENT4_EXT:
 51     case ExtensionsGL::COLOR_ATTACHMENT5_EXT:
 52     case ExtensionsGL::COLOR_ATTACHMENT6_EXT:
 53     case ExtensionsGL::COLOR_ATTACHMENT7_EXT:
 54     case ExtensionsGL::COLOR_ATTACHMENT8_EXT:
 55     case ExtensionsGL::COLOR_ATTACHMENT9_EXT:
 56     case ExtensionsGL::COLOR_ATTACHMENT10_EXT:
 57     case ExtensionsGL::COLOR_ATTACHMENT11_EXT:
 58     case ExtensionsGL::COLOR_ATTACHMENT12_EXT:
 59     case ExtensionsGL::COLOR_ATTACHMENT13_EXT:
 60     case ExtensionsGL::COLOR_ATTACHMENT14_EXT:
 61     case ExtensionsGL::COLOR_ATTACHMENT15_EXT:
 62         return GraphicsContextGL::COLOR_BUFFER_BIT;
 63     case GraphicsContextGL::DEPTH_ATTACHMENT:
 64         return GraphicsContextGL::DEPTH_BUFFER_BIT;
 65     case GraphicsContextGL::STENCIL_ATTACHMENT:
 66         return GraphicsContextGL::STENCIL_BUFFER_BIT;
 67     case GraphicsContextGL::DEPTH_STENCIL_ATTACHMENT:
 68         return GraphicsContextGL::DEPTH_BUFFER_BIT | GraphicsContextGL::STENCIL_BUFFER_BIT;
 69     default:
 70         return 0;
 71     }
 72 }
 73 
 74 unsigned GraphicsContextGL::getClearBitsByFormat(GCGLenum format)
 75 {
 76     switch (format) {
 77     case GraphicsContextGL::RGB:
 78     case GraphicsContextGL::RGBA:
 79     case GraphicsContextGL::LUMINANCE_ALPHA:
 80     case GraphicsContextGL::LUMINANCE:
 81     case GraphicsContextGL::ALPHA:
 82     case GraphicsContextGL::R8:
 83     case GraphicsContextGL::R8_SNORM:
 84     case GraphicsContextGL::R16F:
 85     case GraphicsContextGL::R32F:
 86     case GraphicsContextGL::R8UI:
 87     case GraphicsContextGL::R8I:
 88     case GraphicsContextGL::R16UI:
 89     case GraphicsContextGL::R16I:
 90     case GraphicsContextGL::R32UI:
 91     case GraphicsContextGL::R32I:
 92     case GraphicsContextGL::RG8:
 93     case GraphicsContextGL::RG8_SNORM:
 94     case GraphicsContextGL::RG16F:
 95     case GraphicsContextGL::RG32F:
 96     case GraphicsContextGL::RG8UI:
 97     case GraphicsContextGL::RG8I:
 98     case GraphicsContextGL::RG16UI:
 99     case GraphicsContextGL::RG16I:
100     case GraphicsContextGL::RG32UI:
101     case GraphicsContextGL::RG32I:
102     case GraphicsContextGL::RGB8:
103     case GraphicsContextGL::SRGB8:
104     case GraphicsContextGL::RGB565:
105     case GraphicsContextGL::RGB8_SNORM:
106     case GraphicsContextGL::R11F_G11F_B10F:
107     case GraphicsContextGL::RGB9_E5:
108     case GraphicsContextGL::RGB16F:
109     case GraphicsContextGL::RGB32F:
110     case GraphicsContextGL::RGB8UI:
111     case GraphicsContextGL::RGB8I:
112     case GraphicsContextGL::RGB16UI:
113     case GraphicsContextGL::RGB16I:
114     case GraphicsContextGL::RGB32UI:
115     case GraphicsContextGL::RGB32I:
116     case GraphicsContextGL::RGBA8:
117     case GraphicsContextGL::SRGB8_ALPHA8:
118     case GraphicsContextGL::RGBA8_SNORM:
119     case GraphicsContextGL::RGB5_A1:
120     case GraphicsContextGL::RGBA4:
121     case GraphicsContextGL::RGB10_A2:
122     case GraphicsContextGL::RGBA16F:
123     case GraphicsContextGL::RGBA32F:
124     case GraphicsContextGL::RGBA8UI:
125     case GraphicsContextGL::RGBA8I:
126     case GraphicsContextGL::RGB10_A2UI:
127     case GraphicsContextGL::RGBA16UI:
128     case GraphicsContextGL::RGBA16I:
129     case GraphicsContextGL::RGBA32I:
130     case GraphicsContextGL::RGBA32UI:
131     case ExtensionsGL::SRGB_EXT:
132     case ExtensionsGL::SRGB_ALPHA_EXT:
133         return GraphicsContextGL::COLOR_BUFFER_BIT;
134     case GraphicsContextGL::DEPTH_COMPONENT16:
135     case GraphicsContextGL::DEPTH_COMPONENT24:
136     case GraphicsContextGL::DEPTH_COMPONENT32F:
137     case GraphicsContextGL::DEPTH_COMPONENT:
138         return GraphicsContextGL::DEPTH_BUFFER_BIT;
139     case GraphicsContextGL::STENCIL_INDEX8:
140         return GraphicsContextGL::STENCIL_BUFFER_BIT;
141     case GraphicsContextGL::DEPTH_STENCIL:
142     case GraphicsContextGL::DEPTH24_STENCIL8:
143     case GraphicsContextGL::DEPTH32F_STENCIL8:
144         return GraphicsContextGL::DEPTH_BUFFER_BIT | GraphicsContextGL::STENCIL_BUFFER_BIT;
145     default:
146         return 0;
147     }
148 }
149 
150 uint8_t GraphicsContextGL::getChannelBitsByFormat(GCGLenum format)
151 {
152     switch (format) {
153     case GraphicsContextGL::ALPHA:
154         return static_cast&lt;uint8_t&gt;(ChannelBits::Alpha);
155     case GraphicsContextGL::LUMINANCE:
156         return static_cast&lt;uint8_t&gt;(ChannelBits::RGB);
157     case GraphicsContextGL::LUMINANCE_ALPHA:
158         return static_cast&lt;uint8_t&gt;(ChannelBits::RGBA);
159     case GraphicsContextGL::RGB:
160     case GraphicsContextGL::RGB565:
161     case ExtensionsGL::SRGB_EXT:
162         return static_cast&lt;uint8_t&gt;(ChannelBits::RGB);
163     case GraphicsContextGL::RGBA:
164     case GraphicsContextGL::RGBA4:
165     case GraphicsContextGL::RGB5_A1:
166     case ExtensionsGL::SRGB_ALPHA_EXT:
167         return static_cast&lt;uint8_t&gt;(ChannelBits::RGBA);
168     case GraphicsContextGL::DEPTH_COMPONENT16:
169     case GraphicsContextGL::DEPTH_COMPONENT:
170         return static_cast&lt;uint8_t&gt;(ChannelBits::Depth);
171     case GraphicsContextGL::STENCIL_INDEX8:
172         return static_cast&lt;uint8_t&gt;(ChannelBits::Stencil);
173     case GraphicsContextGL::DEPTH_STENCIL:
174         return static_cast&lt;uint8_t&gt;(ChannelBits::DepthStencil);
175     default:
176         return 0;
177     }
178 }
179 
180 } // namespace WebCore
181 
182 #endif // ENABLE(WEBGL)
    </pre>
  </body>
</html>