<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/rendering/line/BreakingContext.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../TextPainter.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../shapes/BoxShape.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/rendering/line/BreakingContext.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 610     run.setXPos(xPos + lastSpaceWordSpacing);
 611 
 612     unsigned prefixLength = font.offsetForPosition(run, maxPrefixWidth, false);
 613     if (prefixLength &lt; minimumPrefixLength)
 614         return;
 615 
 616     prefixLength = lastHyphenLocation(StringView(text.text()).substring(lastSpace, pos - lastSpace), std::min(prefixLength, pos - lastSpace - minimumSuffixLength) + 1, localeIdentifier);
 617     if (!prefixLength || prefixLength &lt; minimumPrefixLength)
 618         return;
 619 
 620     // When lastSpace is a space, which it always is except sometimes at the beginning of a line or after collapsed
 621     // space, it should not count towards hyphenate-limit-before.
 622     if (prefixLength == minimumPrefixLength) {
 623         UChar characterAtLastSpace = text.characterAt(lastSpace);
 624         if (characterAtLastSpace == &#39; &#39; || characterAtLastSpace == &#39;\n&#39; || characterAtLastSpace == &#39;\t&#39; || characterAtLastSpace == noBreakSpace)
 625             return;
 626     }
 627 
 628     ASSERT(pos - lastSpace - prefixLength &gt;= minimumSuffixLength);
 629 
<span class="line-modified"> 630 #if !ASSERT_DISABLED</span>
 631     HashSet&lt;const Font*&gt; fallbackFonts;
 632     float prefixWidth = hyphenWidth + textWidth(text, lastSpace, prefixLength, font, xPos, isFixedPitch, collapseWhiteSpace, fallbackFonts) + lastSpaceWordSpacing;
 633     ASSERT(xPos + prefixWidth &lt;= availableWidth);
 634 #else
 635     UNUSED_PARAM(isFixedPitch);
 636 #endif
 637 
 638     lineBreak.moveTo(text, lastSpace + prefixLength, nextBreakable);
 639     hyphenated = true;
 640 }
 641 
 642 inline float BreakingContext::computeAdditionalBetweenWordsWidth(RenderText&amp; renderText, TextLayout* textLayout, UChar currentCharacter, WordTrailingSpace&amp; wordTrailingSpace, HashSet&lt;const Font*&gt;&amp; fallbackFonts, WordMeasurements&amp; wordMeasurements, const FontCascade&amp; font, bool isFixedPitch, unsigned lastSpace, float lastSpaceWordSpacing, float wordSpacingForWordMeasurement, unsigned offset)
 643 {
 644     wordMeasurements.grow(wordMeasurements.size() + 1);
 645     WordMeasurement&amp; wordMeasurement = wordMeasurements.last();
 646 
 647     wordMeasurement.renderer = &amp;renderText;
 648     wordMeasurement.endOffset = offset;
 649     wordMeasurement.startOffset = lastSpace;
 650 
</pre>
</td>
<td>
<hr />
<pre>
 610     run.setXPos(xPos + lastSpaceWordSpacing);
 611 
 612     unsigned prefixLength = font.offsetForPosition(run, maxPrefixWidth, false);
 613     if (prefixLength &lt; minimumPrefixLength)
 614         return;
 615 
 616     prefixLength = lastHyphenLocation(StringView(text.text()).substring(lastSpace, pos - lastSpace), std::min(prefixLength, pos - lastSpace - minimumSuffixLength) + 1, localeIdentifier);
 617     if (!prefixLength || prefixLength &lt; minimumPrefixLength)
 618         return;
 619 
 620     // When lastSpace is a space, which it always is except sometimes at the beginning of a line or after collapsed
 621     // space, it should not count towards hyphenate-limit-before.
 622     if (prefixLength == minimumPrefixLength) {
 623         UChar characterAtLastSpace = text.characterAt(lastSpace);
 624         if (characterAtLastSpace == &#39; &#39; || characterAtLastSpace == &#39;\n&#39; || characterAtLastSpace == &#39;\t&#39; || characterAtLastSpace == noBreakSpace)
 625             return;
 626     }
 627 
 628     ASSERT(pos - lastSpace - prefixLength &gt;= minimumSuffixLength);
 629 
<span class="line-modified"> 630 #if ASSERT_ENABLED</span>
 631     HashSet&lt;const Font*&gt; fallbackFonts;
 632     float prefixWidth = hyphenWidth + textWidth(text, lastSpace, prefixLength, font, xPos, isFixedPitch, collapseWhiteSpace, fallbackFonts) + lastSpaceWordSpacing;
 633     ASSERT(xPos + prefixWidth &lt;= availableWidth);
 634 #else
 635     UNUSED_PARAM(isFixedPitch);
 636 #endif
 637 
 638     lineBreak.moveTo(text, lastSpace + prefixLength, nextBreakable);
 639     hyphenated = true;
 640 }
 641 
 642 inline float BreakingContext::computeAdditionalBetweenWordsWidth(RenderText&amp; renderText, TextLayout* textLayout, UChar currentCharacter, WordTrailingSpace&amp; wordTrailingSpace, HashSet&lt;const Font*&gt;&amp; fallbackFonts, WordMeasurements&amp; wordMeasurements, const FontCascade&amp; font, bool isFixedPitch, unsigned lastSpace, float lastSpaceWordSpacing, float wordSpacingForWordMeasurement, unsigned offset)
 643 {
 644     wordMeasurements.grow(wordMeasurements.size() + 1);
 645     WordMeasurement&amp; wordMeasurement = wordMeasurements.last();
 646 
 647     wordMeasurement.renderer = &amp;renderText;
 648     wordMeasurement.endOffset = offset;
 649     wordMeasurement.startOffset = lastSpace;
 650 
</pre>
</td>
</tr>
</table>
<center><a href="../TextPainter.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../shapes/BoxShape.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>