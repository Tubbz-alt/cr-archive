<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/WebCore/accessibility/AccessibilityObject.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (C) 2008, 2009, 2011 Apple Inc. All rights reserved.
  3  * Copyright (C) 2008 Nuanti Ltd.
  4  *
  5  * Redistribution and use in source and binary forms, with or without
  6  * modification, are permitted provided that the following conditions
  7  * are met:
  8  *
  9  * 1.  Redistributions of source code must retain the above copyright
 10  *     notice, this list of conditions and the following disclaimer.
 11  * 2.  Redistributions in binary form must reproduce the above copyright
 12  *     notice, this list of conditions and the following disclaimer in the
 13  *     documentation and/or other materials provided with the distribution.
 14  * 3.  Neither the name of Apple Inc. (&quot;Apple&quot;) nor the names of
 15  *     its contributors may be used to endorse or promote products derived
 16  *     from this software without specific prior written permission.
 17  *
 18  * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS &quot;AS IS&quot; AND ANY
 19  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 20  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 21  * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 22  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 23  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 24  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 25  * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 26  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 27  * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 28  */
 29 
 30 #pragma once
 31 
 32 #include &quot;AccessibilityObjectInterface.h&quot;
 33 #include &quot;FloatQuad.h&quot;
<a name="1" id="anc1"></a>
 34 #include &quot;LayoutRect.h&quot;
 35 #include &quot;Path.h&quot;
 36 #include &quot;Range.h&quot;
<a name="2" id="anc2"></a>


 37 #include &lt;wtf/Forward.h&gt;
 38 #include &lt;wtf/Function.h&gt;
 39 #include &lt;wtf/RefPtr.h&gt;
 40 #include &lt;wtf/Vector.h&gt;
 41 
 42 #if PLATFORM(COCOA)
 43 #include &lt;wtf/RetainPtr.h&gt;
 44 #endif
 45 
 46 #if USE(ATK)
 47 #include &lt;wtf/glib/GRefPtr.h&gt;
 48 #endif
 49 
 50 #if PLATFORM(COCOA)
 51 
<a name="3" id="anc3"></a>

 52 OBJC_CLASS NSArray;
 53 OBJC_CLASS NSAttributedString;
 54 OBJC_CLASS NSData;
 55 OBJC_CLASS NSMutableAttributedString;
 56 OBJC_CLASS NSString;
 57 OBJC_CLASS NSValue;
 58 OBJC_CLASS NSView;
 59 
 60 #endif
 61 
 62 namespace WebCore {
 63 
 64 class AccessibilityObject;
<a name="4" id="anc4"></a>




 65 class IntPoint;
 66 class IntSize;
<a name="5" id="anc5"></a>


 67 class ScrollableArea;
<a name="6" id="anc6"></a>
















 68 
 69 struct AccessibilityText {
 70     String text;
 71     AccessibilityTextSource textSource;
<a name="7" id="anc7"></a><span class="line-modified"> 72     Vector&lt;RefPtr&lt;AXCoreObject&gt;&gt; textElements;</span>
 73 
 74     AccessibilityText(const String&amp; t, const AccessibilityTextSource&amp; s)
 75         : text(t)
 76         , textSource(s)
 77     { }
 78 
<a name="8" id="anc8"></a><span class="line-modified"> 79     AccessibilityText(const String&amp; t, const AccessibilityTextSource&amp; s, Vector&lt;AXCoreObject*&gt; elements)</span>
 80         : text(t)
 81         , textSource(s)
<a name="9" id="anc9"></a><span class="line-modified"> 82     {</span>
<span class="line-modified"> 83         textElements.reserveCapacity(elements.size());</span>
<span class="line-added"> 84         for (auto element : elements)</span>
<span class="line-added"> 85             textElements.uncheckedAppend(element);</span>
<span class="line-added"> 86     }</span>
 87 
<a name="10" id="anc10"></a><span class="line-modified"> 88     AccessibilityText(const String&amp; t, const AccessibilityTextSource&amp; s, AXCoreObject* element)</span>
 89         : text(t)
 90         , textSource(s)
 91     {
<a name="11" id="anc11"></a><span class="line-modified"> 92         textElements.append(element);</span>
 93     }
 94 };
 95 
<a name="12" id="anc12"></a>




























































































































































































































 96 bool nodeHasPresentationRole(Node*);
 97 
<a name="13" id="anc13"></a><span class="line-modified"> 98 class AccessibilityObject : public AXCoreObject {</span>



 99 public:
100     virtual ~AccessibilityObject();
101 
102     // After constructing an AccessibilityObject, it must be given a
103     // unique ID, then added to AXObjectCache, and finally init() must
104     // be called last.
<a name="14" id="anc14"></a><span class="line-modified">105     void setObjectID(AXID id) override { m_id = id; }</span>
<span class="line-modified">106     void init() override { }</span>





107 
<a name="15" id="anc15"></a><span class="line-modified">108     bool isDetached() const override;</span>
109 
<a name="16" id="anc16"></a><span class="line-modified">110     bool isAccessibilityNodeObject() const override { return false; }</span>
<span class="line-modified">111     bool isAccessibilityRenderObject() const override { return false; }</span>
<span class="line-modified">112     bool isAccessibilityScrollbar() const override { return false; }</span>
<span class="line-modified">113     bool isAccessibilityScrollView() const override { return false; }</span>
<span class="line-modified">114     bool isAccessibilitySVGRoot() const override { return false; }</span>
<span class="line-modified">115     bool isAccessibilitySVGElement() const override { return false; }</span>
116 
<a name="17" id="anc17"></a><span class="line-modified">117     bool isAttachmentElement() const override { return false; }</span>
<span class="line-modified">118     bool isHeading() const override { return false; }</span>


119     bool isLink() const override { return false; }
120     bool isImage() const override { return false; }
<a name="18" id="anc18"></a><span class="line-modified">121     bool isNativeImage() const override { return false; }</span>
<span class="line-modified">122     bool isImageButton() const override { return false; }</span>
<span class="line-modified">123     bool isPasswordField() const override { return false; }</span>
<span class="line-modified">124     bool isContainedByPasswordField() const override;</span>
<span class="line-modified">125     AccessibilityObject* passwordFieldOrContainingPasswordField() override { return nullptr; }</span>
<span class="line-modified">126     bool isNativeTextControl() const override { return false; }</span>
<span class="line-modified">127     bool isSearchField() const override { return false; }</span>
<span class="line-modified">128     bool isNativeListBox() const override { return false; }</span>
<span class="line-modified">129     bool isListBoxOption() const override { return false; }</span>





130     bool isAttachment() const override { return false; }
<a name="19" id="anc19"></a><span class="line-modified">131     bool isMediaTimeline() const override { return false; }</span>
<span class="line-modified">132     bool isMenuRelated() const override { return false; }</span>
<span class="line-modified">133     bool isMenu() const override { return false; }</span>
<span class="line-modified">134     bool isMenuBar() const override { return false; }</span>
<span class="line-modified">135     bool isMenuButton() const override { return false; }</span>
<span class="line-modified">136     bool isMenuItem() const override { return false; }</span>
137     bool isFileUploadButton() const override { return false; }
<a name="20" id="anc20"></a><span class="line-modified">138     bool isInputImage() const override { return false; }</span>
<span class="line-modified">139     bool isProgressIndicator() const override { return false; }</span>
<span class="line-modified">140     bool isSlider() const override { return false; }</span>
<span class="line-modified">141     bool isSliderThumb() const override { return false; }</span>
<span class="line-modified">142     bool isInputSlider() const override { return false; }</span>
<span class="line-modified">143     bool isControl() const override { return false; }</span>
<span class="line-modified">144     bool isLabel() const override { return false; }</span>
<span class="line-modified">145 </span>
<span class="line-modified">146     bool isList() const override { return false; }</span>
<span class="line-modified">147     bool isUnorderedList() const override { return false; }</span>
<span class="line-modified">148     bool isOrderedList() const override { return false; }</span>
<span class="line-modified">149     bool isDescriptionList() const override { return false; }</span>
<span class="line-modified">150 </span>
<span class="line-modified">151     bool isTable() const override { return false; }</span>
<span class="line-modified">152     bool isDataTable() const override { return false; }</span>
<span class="line-modified">153     bool isTableRow() const override { return false; }</span>
<span class="line-added">154     bool isTableColumn() const override { return false; }</span>
<span class="line-added">155     bool isTableCell() const override { return false; }</span>
<span class="line-added">156     bool isFieldset() const override { return false; }</span>
<span class="line-added">157     bool isGroup() const override { return false; }</span>
<span class="line-added">158     bool isARIATreeGridRow() const override { return false; }</span>
159     bool isImageMapLink() const override { return false; }
<a name="21" id="anc21"></a><span class="line-modified">160     bool isMenuList() const override { return false; }</span>
<span class="line-modified">161     bool isMenuListPopup() const override { return false; }</span>
<span class="line-modified">162     bool isMenuListOption() const override { return false; }</span>
<span class="line-modified">163     bool isNativeSpinButton() const override { return false; }</span>
<span class="line-modified">164     AXCoreObject* incrementButton() override { return nullptr; }</span>
<span class="line-modified">165     AXCoreObject* decrementButton() override { return nullptr; }</span>
<span class="line-modified">166     bool isSpinButtonPart() const override { return false; }</span>
<span class="line-modified">167     bool isIncrementor() const override { return false; }</span>
<span class="line-modified">168     bool isMockObject() const override { return false; }</span>
<span class="line-modified">169     virtual bool isMediaControlLabel() const { return false; }</span>
<span class="line-modified">170     bool isMediaObject() const override { return false; }</span>
<span class="line-modified">171     bool isTextControl() const override;</span>
<span class="line-modified">172     bool isARIATextControl() const override;</span>
<span class="line-modified">173     bool isNonNativeTextControl() const override;</span>
<span class="line-modified">174     bool isButton() const override;</span>
<span class="line-modified">175     bool isBlockquote() const override;</span>
<span class="line-modified">176     bool isLandmark() const override;</span>
<span class="line-modified">177     bool isRangeControl() const override;</span>
<span class="line-modified">178     bool isMeter() const override;</span>
<span class="line-modified">179     bool isStyleFormatGroup() const override;</span>
<span class="line-modified">180     bool isFigureElement() const override;</span>
<span class="line-modified">181     bool isKeyboardFocusable() const override;</span>
<span class="line-modified">182     bool isOutput() const override;</span>
<span class="line-modified">183 </span>
<span class="line-modified">184     bool isChecked() const override { return false; }</span>
<span class="line-modified">185     bool isEnabled() const override { return false; }</span>
<span class="line-modified">186     bool isSelected() const override { return false; }</span>
<span class="line-modified">187     bool isFocused() const override { return false; }</span>
<span class="line-modified">188     bool isHovered() const override { return false; }</span>
<span class="line-modified">189     bool isIndeterminate() const override { return false; }</span>
<span class="line-modified">190     bool isLoaded() const override { return false; }</span>
<span class="line-modified">191     bool isMultiSelectable() const override { return false; }</span>
<span class="line-modified">192     bool isOffScreen() const override { return false; }</span>
<span class="line-modified">193     bool isPressed() const override { return false; }</span>
<span class="line-modified">194     bool isUnvisited() const override { return false; }</span>
<span class="line-modified">195     bool isVisited() const override { return false; }</span>
<span class="line-modified">196     bool isRequired() const override { return false; }</span>
<span class="line-modified">197     bool supportsRequiredAttribute() const override { return false; }</span>
<span class="line-modified">198     bool isLinked() const override { return false; }</span>
<span class="line-modified">199     bool isExpanded() const override;</span>
<span class="line-modified">200     bool isVisible() const override { return true; }</span>
<span class="line-modified">201     bool isCollapsed() const override { return false; }</span>
<span class="line-modified">202     void setIsExpanded(bool) override { }</span>

















203     FloatRect relativeFrame() const override;
<a name="22" id="anc22"></a><span class="line-modified">204     FloatRect convertFrameToSpace(const FloatRect&amp;, AccessibilityConversionSpace) const override;</span>
205 
206     // In a multi-select list, many items can be selected but only one is active at a time.
<a name="23" id="anc23"></a><span class="line-modified">207     bool isSelectedOptionActive() const override { return false; }</span>
<span class="line-modified">208 </span>
<span class="line-modified">209     bool hasBoldFont() const override { return false; }</span>
<span class="line-modified">210     bool hasItalicFont() const override { return false; }</span>
<span class="line-modified">211     bool hasMisspelling() const override;</span>
<span class="line-modified">212     RefPtr&lt;Range&gt; getMisspellingRange(RefPtr&lt;Range&gt; const&amp; start, AccessibilitySearchDirection) const override;</span>
<span class="line-modified">213     bool hasPlainText() const override { return false; }</span>
<span class="line-modified">214     bool hasSameFont(RenderObject*) const override { return false; }</span>
<span class="line-modified">215     bool hasSameFontColor(RenderObject*) const override { return false; }</span>
<span class="line-modified">216     bool hasSameStyle(RenderObject*) const override { return false; }</span>
<span class="line-modified">217     bool hasUnderline() const override { return false; }</span>
<span class="line-modified">218     bool hasHighlighting() const override;</span>
<span class="line-modified">219 </span>
<span class="line-modified">220     bool supportsDatetimeAttribute() const override;</span>
<span class="line-modified">221     String datetimeAttributeValue() const override;</span>
<span class="line-modified">222 </span>
<span class="line-modified">223     bool canSetFocusAttribute() const override { return false; }</span>
<span class="line-modified">224     bool canSetTextRangeAttributes() const override { return false; }</span>
<span class="line-modified">225     bool canSetValueAttribute() const override { return false; }</span>
<span class="line-modified">226     bool canSetNumericValue() const override { return false; }</span>
<span class="line-modified">227     bool canSetSelectedAttribute() const override { return false; }</span>
<span class="line-modified">228     bool canSetSelectedChildrenAttribute() const override { return false; }</span>
<span class="line-modified">229     bool canSetExpandedAttribute() const override { return false; }</span>
<span class="line-modified">230 </span>
<span class="line-modified">231     Element* element() const override;</span>
<span class="line-modified">232     Node* node() const override { return nullptr; }</span>
<span class="line-modified">233     RenderObject* renderer() const override { return nullptr; }</span>
234     bool accessibilityIsIgnored() const override;
<a name="24" id="anc24"></a><span class="line-modified">235     AccessibilityObjectInclusion defaultObjectInclusion() const override;</span>
<span class="line-modified">236     bool accessibilityIsIgnoredByDefault() const override;</span>
<span class="line-modified">237 </span>
<span class="line-modified">238     bool isShowingValidationMessage() const override;</span>
<span class="line-modified">239     String validationMessage() const override;</span>
<span class="line-modified">240 </span>
<span class="line-modified">241     unsigned blockquoteLevel() const override;</span>
<span class="line-modified">242     int headingLevel() const override { return 0; }</span>
<span class="line-modified">243     int tableLevel() const override { return 0; }</span>
<span class="line-modified">244     AccessibilityButtonState checkboxOrRadioValue() const override;</span>
<span class="line-modified">245     String valueDescription() const override { return String(); }</span>
<span class="line-modified">246     float valueForRange() const override { return 0.0f; }</span>
<span class="line-modified">247     float maxValueForRange() const override { return 0.0f; }</span>
<span class="line-modified">248     float minValueForRange() const override { return 0.0f; }</span>
<span class="line-modified">249     float stepValueForRange() const override { return 0.0f; }</span>
<span class="line-modified">250     AXCoreObject* selectedRadioButton() override { return nullptr; }</span>
<span class="line-modified">251     AXCoreObject* selectedTabItem() override { return nullptr; }</span>
<span class="line-modified">252     AXCoreObject* selectedListItem() override;</span>
<span class="line-modified">253     int layoutCount() const override { return 0; }</span>
<span class="line-modified">254     double estimatedLoadingProgress() const override { return 0; }</span>
255     WEBCORE_EXPORT static bool isARIAControl(AccessibilityRole);
256     WEBCORE_EXPORT static bool isARIAInput(AccessibilityRole);
257 
<a name="25" id="anc25"></a><span class="line-modified">258     bool supportsARIAOwns() const override { return false; }</span>
<span class="line-modified">259     bool isActiveDescendantOfFocusedContainer() const override;</span>
<span class="line-modified">260     void ariaActiveDescendantReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">261     void ariaControlsElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">262     void ariaControlsReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">263     void ariaDescribedByElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">264     void ariaDescribedByReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">265     void ariaDetailsElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">266     void ariaDetailsReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">267     void ariaErrorMessageElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">268     void ariaErrorMessageReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">269     void ariaFlowToElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">270     void ariaFlowToReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">271     void ariaLabelledByElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">272     void ariaLabelledByReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">273     void ariaOwnsElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">274     void ariaOwnsReferencingElements(AccessibilityChildrenVector&amp;) const override;</span>
<span class="line-modified">275 </span>
<span class="line-modified">276     bool hasPopup() const override { return false; }</span>
<span class="line-modified">277     String popupValue() const override;</span>
<span class="line-modified">278     bool hasDatalist() const override;</span>
<span class="line-modified">279     bool supportsHasPopup() const override;</span>
<span class="line-modified">280     bool pressedIsPresent() const override;</span>
<span class="line-modified">281     bool ariaIsMultiline() const override;</span>
<span class="line-modified">282     String invalidStatus() const override;</span>
<span class="line-modified">283     bool supportsPressed() const override;</span>
<span class="line-modified">284     bool supportsExpanded() const override;</span>
<span class="line-modified">285     bool supportsChecked() const override;</span>
<span class="line-modified">286     AccessibilitySortDirection sortDirection() const override;</span>
<span class="line-modified">287     bool canvasHasFallbackContent() const override { return false; }</span>
<span class="line-modified">288     bool supportsRangeValue() const override;</span>
<span class="line-modified">289     String identifierAttribute() const override;</span>
<span class="line-modified">290     String linkRelValue() const override;</span>
<span class="line-modified">291     void classList(Vector&lt;String&gt;&amp;) const override;</span>
<span class="line-modified">292     AccessibilityCurrentState currentState() const override;</span>
<span class="line-modified">293     String currentValue() const override;</span>
<span class="line-modified">294     bool supportsCurrent() const override;</span>
<span class="line-modified">295     const String keyShortcutsValue() const override;</span>

296 
297     // This function checks if the object should be ignored when there&#39;s a modal dialog displayed.
<a name="26" id="anc26"></a><span class="line-modified">298     bool ignoredFromModalPresence() const override;</span>
<span class="line-modified">299     bool isModalDescendant(Node*) const override;</span>
<span class="line-modified">300     bool isModalNode() const override;</span>
301 
<a name="27" id="anc27"></a><span class="line-modified">302     bool supportsSetSize() const override;</span>
<span class="line-modified">303     bool supportsPosInSet() const override;</span>
<span class="line-modified">304     int setSize() const override;</span>
<span class="line-modified">305     int posInSet() const override;</span>
306 
307     // ARIA drag and drop
<a name="28" id="anc28"></a><span class="line-modified">308     bool supportsARIADropping() const override { return false; }</span>
<span class="line-modified">309     bool supportsARIADragging() const override { return false; }</span>
<span class="line-modified">310     bool isARIAGrabbed() override { return false; }</span>
<span class="line-modified">311     void setARIAGrabbed(bool) override { }</span>
<span class="line-modified">312     Vector&lt;String&gt; determineARIADropEffects() override { return { }; }</span>
313 
314     // Called on the root AX object to return the deepest available element.
<a name="29" id="anc29"></a><span class="line-modified">315     AXCoreObject* accessibilityHitTest(const IntPoint&amp;) const override { return nullptr; }</span>
316     // Called on the AX object after the render tree determines which is the right AccessibilityRenderObject.
<a name="30" id="anc30"></a><span class="line-modified">317     AXCoreObject* elementAccessibilityHitTest(const IntPoint&amp;) const override;</span>
<span class="line-modified">318 </span>
<span class="line-modified">319     AXCoreObject* focusedUIElement() const override;</span>
<span class="line-modified">320 </span>
<span class="line-modified">321     AccessibilityObject* firstChild() const override { return nullptr; }</span>
<span class="line-modified">322     AccessibilityObject* lastChild() const override { return nullptr; }</span>
<span class="line-modified">323     AccessibilityObject* previousSibling() const override { return nullptr; }</span>
<span class="line-modified">324     AccessibilityObject* nextSibling() const override { return nullptr; }</span>
<span class="line-modified">325     AccessibilityObject* nextSiblingUnignored(int limit) const override;</span>
<span class="line-modified">326     AccessibilityObject* previousSiblingUnignored(int limit) const override;</span>
<span class="line-modified">327     AccessibilityObject* parentObject() const override { return nullptr; }</span>
<span class="line-modified">328     AXCoreObject* parentObjectUnignored() const override;</span>
<span class="line-modified">329     AccessibilityObject* parentObjectIfExists() const override { return nullptr; }</span>

330     static AccessibilityObject* firstAccessibleObjectFromNode(const Node*);
<a name="31" id="anc31"></a><span class="line-modified">331     void findMatchingObjects(AccessibilitySearchCriteria*, AccessibilityChildrenVector&amp;) override;</span>
<span class="line-modified">332     bool isDescendantOfBarrenParent() const override { return false; }</span>
333 
<a name="32" id="anc32"></a><span class="line-modified">334     bool isDescendantOfRole(AccessibilityRole) const override;</span>
335 
336     // Text selection
337 private:
338     RefPtr&lt;Range&gt; rangeOfStringClosestToRangeInDirection(Range*, AccessibilitySearchDirection, Vector&lt;String&gt; const&amp;) const;
339     RefPtr&lt;Range&gt; selectionRange() const;
340     RefPtr&lt;Range&gt; findTextRange(Vector&lt;String&gt; const&amp; searchStrings, RefPtr&lt;Range&gt; const&amp; start, AccessibilitySearchTextDirection) const;
341 public:
<a name="33" id="anc33"></a><span class="line-modified">342     Vector&lt;RefPtr&lt;Range&gt;&gt; findTextRanges(AccessibilitySearchTextCriteria const&amp;) const override;</span>
<span class="line-modified">343     Vector&lt;String&gt; performTextOperation(AccessibilityTextOperation const&amp;) override;</span>
<span class="line-modified">344 </span>
<span class="line-modified">345     AccessibilityObject* observableObject() const override { return nullptr; }</span>
<span class="line-modified">346     void linkedUIElements(AccessibilityChildrenVector&amp;) const override { }</span>
<span class="line-modified">347     AccessibilityObject* titleUIElement() const override { return nullptr; }</span>
<span class="line-modified">348     bool exposesTitleUIElement() const override { return true; }</span>
<span class="line-modified">349     AccessibilityObject* correspondingLabelForControlElement() const override { return nullptr; }</span>
<span class="line-modified">350     AccessibilityObject* correspondingControlForLabelElement() const override { return nullptr; }</span>
<span class="line-modified">351     AccessibilityObject* scrollBar(AccessibilityOrientation) override { return nullptr; }</span>
<span class="line-modified">352 </span>
<span class="line-modified">353     AccessibilityRole ariaRoleAttribute() const override { return AccessibilityRole::Unknown; }</span>
<span class="line-modified">354     bool isPresentationalChildOfAriaRole() const override { return false; }</span>
<span class="line-modified">355     bool ariaRoleHasPresentationalChildren() const override { return false; }</span>
<span class="line-modified">356     bool inheritsPresentationalRole() const override { return false; }</span>
357 
358     // Accessibility Text
<a name="34" id="anc34"></a><span class="line-modified">359     void accessibilityText(Vector&lt;AccessibilityText&gt;&amp;) const override { };</span>
360     // A single method for getting a computed label for an AXObject. It condenses the nuances of accessibilityText. Used by Inspector.
<a name="35" id="anc35"></a><span class="line-modified">361     String computedLabel() override;</span>
362 
363     // A programmatic way to set a name on an AccessibleObject.
<a name="36" id="anc36"></a><span class="line-modified">364     void setAccessibleName(const AtomString&amp;) override { }</span>
<span class="line-modified">365     bool hasAttributesRequiredForInclusion() const override;</span>
366 
367     // Accessibility Text - (To be deprecated).
<a name="37" id="anc37"></a><span class="line-modified">368     String accessibilityDescription() const override { return String(); }</span>
<span class="line-modified">369     String title() const override { return String(); }</span>
<span class="line-modified">370     String helpText() const override { return String(); }</span>
371 
372     // Methods for determining accessibility text.
<a name="38" id="anc38"></a><span class="line-modified">373     bool isARIAStaticText() const override { return ariaRoleAttribute() == AccessibilityRole::StaticText; }</span>
<span class="line-modified">374     String stringValue() const override { return String(); }</span>
<span class="line-modified">375     String textUnderElement(AccessibilityTextUnderElementMode = AccessibilityTextUnderElementMode()) const override { return String(); }</span>
<span class="line-modified">376     String text() const override { return String(); }</span>
<span class="line-modified">377     int textLength() const override { return 0; }</span>
<span class="line-modified">378     String ariaLabeledByAttribute() const override { return String(); }</span>
<span class="line-modified">379     String ariaDescribedByAttribute() const override { return String(); }</span>
<span class="line-modified">380     const String placeholderValue() const override;</span>
<span class="line-modified">381     bool accessibleNameDerivesFromContent() const override;</span>
382 
383     // Abbreviations
<a name="39" id="anc39"></a><span class="line-modified">384     String expandedTextValue() const override { return String(); }</span>
<span class="line-modified">385     bool supportsExpandedTextValue() const override { return false; }</span>
386 
<a name="40" id="anc40"></a><span class="line-modified">387     void elementsFromAttribute(Vector&lt;Element*&gt;&amp;, const QualifiedName&amp;) const override;</span>
388 
389     // Only if isColorWell()
<a name="41" id="anc41"></a><span class="line-modified">390     void colorValue(int&amp; r, int&amp; g, int&amp; b) const override { r = 0; g = 0; b = 0; }</span>
391 
392     AccessibilityRole roleValue() const override { return m_role; }
<a name="42" id="anc42"></a><span class="line-added">393     String rolePlatformString() const override;</span>
<span class="line-added">394     String roleDescription() const override;</span>
<span class="line-added">395     String ariaLandmarkRoleDescription() const override;</span>
396 
<a name="43" id="anc43"></a><span class="line-modified">397     AXObjectCache* axObjectCache() const override;</span>
<span class="line-modified">398     AXID objectID() const override { return m_id; }</span>
399 
400     static AccessibilityObject* anchorElementForNode(Node*);
401     static AccessibilityObject* headingElementForNode(Node*);
<a name="44" id="anc44"></a><span class="line-modified">402     Element* anchorElement() const override { return nullptr; }</span>
<span class="line-modified">403     bool supportsPressAction() const override;</span>
<span class="line-modified">404     Element* actionElement() const override { return nullptr; }</span>
<span class="line-modified">405     LayoutRect boundingBoxRect() const override { return LayoutRect(); }</span>
<span class="line-modified">406     LayoutRect elementRect() const override = 0;</span>
<span class="line-modified">407     IntPoint clickPoint() override;</span>


408     static IntRect boundingBoxForQuads(RenderObject*, const Vector&lt;FloatQuad&gt;&amp;);
<a name="45" id="anc45"></a><span class="line-modified">409     Path elementPath() const override { return Path(); }</span>
<span class="line-modified">410     bool supportsPath() const override { return false; }</span>
<span class="line-modified">411 </span>
<span class="line-modified">412     TextIteratorBehavior textIteratorBehaviorForTextRange() const override;</span>
<span class="line-modified">413     PlainTextRange selectedTextRange() const override { return PlainTextRange(); }</span>
<span class="line-modified">414     unsigned selectionStart() const override { return selectedTextRange().start; }</span>
<span class="line-modified">415     unsigned selectionEnd() const override { return selectedTextRange().length; }</span>
<span class="line-modified">416 </span>
<span class="line-modified">417     URL url() const override { return URL(); }</span>
<span class="line-modified">418     VisibleSelection selection() const override { return VisibleSelection(); }</span>
<span class="line-modified">419     String selectedText() const override { return String(); }</span>
<span class="line-modified">420     String accessKey() const override { return nullAtom(); }</span>
<span class="line-modified">421     String actionVerb() const override;</span>
<span class="line-modified">422     Widget* widget() const override { return nullptr; }</span>
<span class="line-modified">423     Widget* widgetForAttachmentView() const override { return nullptr; }</span>
<span class="line-modified">424     Page* page() const override;</span>
<span class="line-modified">425     Document* document() const override;</span>
<span class="line-modified">426     FrameView* documentFrameView() const override;</span>
<span class="line-modified">427     Frame* frame() const override;</span>
<span class="line-modified">428     Frame* mainFrame() const override;</span>
<span class="line-modified">429     Document* topDocument() const override;</span>
<span class="line-modified">430     ScrollView* scrollViewAncestor() const override;</span>
<span class="line-modified">431     String language() const override;</span>
432     // 1-based, to match the aria-level spec.
<a name="46" id="anc46"></a><span class="line-modified">433     unsigned hierarchicalLevel() const override { return 0; }</span>
<span class="line-modified">434     bool isInlineText() const override;</span>
<span class="line-modified">435 </span>
<span class="line-modified">436     void setFocused(bool) override { }</span>
<span class="line-modified">437     void setSelectedText(const String&amp;) override { }</span>
<span class="line-modified">438     void setSelectedTextRange(const PlainTextRange&amp;) override { }</span>
<span class="line-modified">439     void setValue(const String&amp;) override { }</span>
<span class="line-modified">440     bool replaceTextInRange(const String&amp;, const PlainTextRange&amp;) override;</span>
<span class="line-modified">441     bool insertText(const String&amp;) override;</span>
<span class="line-modified">442 </span>
<span class="line-modified">443     void setValue(float) override { }</span>
<span class="line-modified">444     void setSelected(bool) override { }</span>
<span class="line-modified">445     void setSelectedRows(AccessibilityChildrenVector&amp;) override { }</span>
<span class="line-modified">446 </span>
<span class="line-modified">447     void makeRangeVisible(const PlainTextRange&amp;) override { }</span>
<span class="line-modified">448     bool press() override;</span>
<span class="line-modified">449     bool performDefaultAction() override { return press(); }</span>
<span class="line-modified">450 </span>
<span class="line-modified">451     AccessibilityOrientation orientation() const override;</span>
<span class="line-modified">452     void increment() override { }</span>
<span class="line-modified">453     void decrement() override { }</span>
<span class="line-modified">454 </span>
<span class="line-modified">455     void childrenChanged() override { }</span>
<span class="line-modified">456     void textChanged() override { }</span>
<span class="line-modified">457     void updateAccessibilityRole() override { }</span>
<span class="line-modified">458     const AccessibilityChildrenVector&amp; children(bool updateChildrenIfNeeded = true) override;</span>
<span class="line-modified">459     void addChildren() override { }</span>
<span class="line-modified">460     void addChild(AXCoreObject*) override;</span>
<span class="line-modified">461     void insertChild(AXCoreObject*, unsigned) override;</span>
<span class="line-modified">462 </span>
<span class="line-modified">463     bool shouldIgnoreAttributeRole() const override { return false; }</span>
<span class="line-modified">464 </span>
<span class="line-modified">465     bool canHaveChildren() const override { return true; }</span>
<span class="line-added">466     bool hasChildren() const override { return m_haveChildren; }</span>
467     void updateChildrenIfNecessary() override;
<a name="47" id="anc47"></a><span class="line-modified">468     void setNeedsToUpdateChildren() override { }</span>
<span class="line-modified">469     void setNeedsToUpdateSubtree() override { }</span>
<span class="line-modified">470     void clearChildren() override;</span>
<span class="line-modified">471     bool needsToUpdateChildren() const override { return false; }</span>
472 #if PLATFORM(COCOA)
<a name="48" id="anc48"></a><span class="line-modified">473     void detachFromParent() override;</span>
474 #else
<a name="49" id="anc49"></a><span class="line-modified">475     void detachFromParent() override { }</span>
476 #endif
<a name="50" id="anc50"></a><span class="line-modified">477     bool isDetachedFromParent() override { return false; }</span>
<span class="line-modified">478 </span>
<span class="line-modified">479     bool canHaveSelectedChildren() const override { return false; }</span>
<span class="line-modified">480     void selectedChildren(AccessibilityChildrenVector&amp;) override { }</span>
<span class="line-modified">481     void visibleChildren(AccessibilityChildrenVector&amp;) override { }</span>
<span class="line-modified">482     void tabChildren(AccessibilityChildrenVector&amp;) override { }</span>
<span class="line-modified">483     bool shouldFocusActiveDescendant() const override { return false; }</span>
<span class="line-modified">484     AccessibilityObject* activeDescendant() const override { return nullptr; }</span>
<span class="line-modified">485     void handleActiveDescendantChanged() override { }</span>
<span class="line-modified">486     void handleAriaExpandedChanged() override { }</span>
<span class="line-modified">487     bool isDescendantOfObject(const AXCoreObject*) const override;</span>
<span class="line-modified">488     bool isAncestorOfObject(const AXCoreObject*) const override;</span>
<span class="line-modified">489     AccessibilityObject* firstAnonymousBlockChild() const override;</span>
490 
491     WEBCORE_EXPORT static AccessibilityRole ariaRoleToWebCoreRole(const String&amp;);
<a name="51" id="anc51"></a><span class="line-modified">492     bool hasAttribute(const QualifiedName&amp;) const override;</span>
<span class="line-modified">493     const AtomString&amp; getAttribute(const QualifiedName&amp;) const override;</span>
<span class="line-modified">494     bool hasTagName(const QualifiedName&amp;) const override;</span>
<span class="line-added">495     String tagName() const override;</span>
496 
<a name="52" id="anc52"></a><span class="line-modified">497     VisiblePositionRange visiblePositionRange() const override { return VisiblePositionRange(); }</span>
<span class="line-modified">498     VisiblePositionRange visiblePositionRangeForLine(unsigned) const override { return VisiblePositionRange(); }</span>
499 
<a name="53" id="anc53"></a><span class="line-modified">500     RefPtr&lt;Range&gt; elementRange() const override;</span>
501     static bool replacedNodeNeedsCharacter(Node* replacedNode);
502 
<a name="54" id="anc54"></a><span class="line-modified">503     VisiblePositionRange visiblePositionRangeForUnorderedPositions(const VisiblePosition&amp;, const VisiblePosition&amp;) const override;</span>
<span class="line-modified">504     VisiblePositionRange positionOfLeftWord(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">505     VisiblePositionRange positionOfRightWord(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">506     VisiblePositionRange leftLineVisiblePositionRange(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">507     VisiblePositionRange rightLineVisiblePositionRange(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">508     VisiblePositionRange sentenceForPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">509     VisiblePositionRange paragraphForPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">510     VisiblePositionRange styleRangeForPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">511     VisiblePositionRange visiblePositionRangeForRange(const PlainTextRange&amp;) const override;</span>
<span class="line-modified">512     VisiblePositionRange lineRangeForPosition(const VisiblePosition&amp;) const override;</span>
513 
<a name="55" id="anc55"></a><span class="line-modified">514     RefPtr&lt;Range&gt; rangeForPlainTextRange(const PlainTextRange&amp;) const override;</span>
515 
516     static String stringForVisiblePositionRange(const VisiblePositionRange&amp;);
<a name="56" id="anc56"></a><span class="line-modified">517     String stringForRange(RefPtr&lt;Range&gt;) const override;</span>
<span class="line-modified">518     IntRect boundsForVisiblePositionRange(const VisiblePositionRange&amp;) const override { return IntRect(); }</span>
<span class="line-modified">519     IntRect boundsForRange(const RefPtr&lt;Range&gt;) const override { return IntRect(); }</span>
<span class="line-modified">520     int lengthForVisiblePositionRange(const VisiblePositionRange&amp;) const override;</span>
<span class="line-modified">521     void setSelectedVisiblePositionRange(const VisiblePositionRange&amp;) const override { }</span>
<span class="line-modified">522 </span>
<span class="line-modified">523     VisiblePosition visiblePositionForBounds(const IntRect&amp;, AccessibilityVisiblePositionForBounds) const override;</span>
<span class="line-modified">524     VisiblePosition visiblePositionForPoint(const IntPoint&amp;) const override { return VisiblePosition(); }</span>
<span class="line-modified">525     VisiblePosition nextVisiblePosition(const VisiblePosition&amp; visiblePos) const override { return visiblePos.next(); }</span>
<span class="line-modified">526     VisiblePosition previousVisiblePosition(const VisiblePosition&amp; visiblePos) const override { return visiblePos.previous(); }</span>
<span class="line-modified">527     VisiblePosition nextWordEnd(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">528     VisiblePosition previousWordStart(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">529     VisiblePosition nextLineEndPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">530     VisiblePosition previousLineStartPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">531     VisiblePosition nextSentenceEndPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">532     VisiblePosition previousSentenceStartPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">533     VisiblePosition nextParagraphEndPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">534     VisiblePosition previousParagraphStartPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">535     VisiblePosition visiblePositionForIndex(unsigned, bool /*lastIndexOK */) const override { return VisiblePosition(); }</span>
<span class="line-modified">536 </span>
<span class="line-modified">537     VisiblePosition visiblePositionForIndex(int) const override { return VisiblePosition(); }</span>
<span class="line-modified">538     int indexForVisiblePosition(const VisiblePosition&amp;) const override { return 0; }</span>
<span class="line-modified">539 </span>
<span class="line-modified">540     AccessibilityObject* accessibilityObjectForPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">541     int lineForPosition(const VisiblePosition&amp;) const override;</span>
<span class="line-modified">542     PlainTextRange plainTextRangeForVisiblePositionRange(const VisiblePositionRange&amp;) const override;</span>
<span class="line-modified">543     int index(const VisiblePosition&amp;) const override { return -1; }</span>
<span class="line-modified">544 </span>
<span class="line-modified">545     void lineBreaks(Vector&lt;int&gt;&amp;) const override { }</span>
<span class="line-modified">546     PlainTextRange doAXRangeForLine(unsigned) const override { return PlainTextRange(); }</span>
<span class="line-modified">547     PlainTextRange doAXRangeForPosition(const IntPoint&amp;) const override;</span>
<span class="line-modified">548     PlainTextRange doAXRangeForIndex(unsigned) const override { return PlainTextRange(); }</span>
<span class="line-modified">549     PlainTextRange doAXStyleRangeForIndex(unsigned) const override;</span>
<span class="line-modified">550 </span>
<span class="line-modified">551     String doAXStringForRange(const PlainTextRange&amp;) const override { return String(); }</span>
<span class="line-modified">552     IntRect doAXBoundsForRange(const PlainTextRange&amp;) const override { return IntRect(); }</span>
<span class="line-modified">553     IntRect doAXBoundsForRangeUsingCharacterOffset(const PlainTextRange&amp;) const override { return IntRect(); }</span>
554     static String listMarkerTextForNodeAndPosition(Node*, const VisiblePosition&amp;);
555 
<a name="57" id="anc57"></a><span class="line-modified">556     unsigned doAXLineForIndex(unsigned) override;</span>
557 
<a name="58" id="anc58"></a><span class="line-modified">558     String computedRoleString() const override;</span>
559 
<a name="59" id="anc59"></a><span class="line-modified">560     String stringValueForMSAA() const override { return String(); }</span>
<span class="line-modified">561     String stringRoleForMSAA() const override { return String(); }</span>
<span class="line-modified">562     String nameForMSAA() const override { return String(); }</span>
<span class="line-modified">563     String descriptionForMSAA() const override { return String(); }</span>
<span class="line-modified">564     AccessibilityRole roleValueForMSAA() const override { return roleValue(); }</span>
565 
<a name="60" id="anc60"></a><span class="line-modified">566     String passwordFieldValue() const override { return String(); }</span>
<span class="line-modified">567     bool isValueAutofilled() const override;</span>
<span class="line-modified">568     bool isValueAutofillAvailable() const override;</span>
<span class="line-modified">569     AutoFillButtonType valueAutofillButtonType() const override;</span>
570 
571     // Used by an ARIA tree to get all its rows.
<a name="61" id="anc61"></a><span class="line-modified">572     void ariaTreeRows(AccessibilityChildrenVector&amp;) override;</span>
573     // Used by an ARIA tree item to get all of its direct rows that it can disclose.
<a name="62" id="anc62"></a><span class="line-modified">574     void ariaTreeItemDisclosedRows(AccessibilityChildrenVector&amp;) override;</span>
575     // Used by an ARIA tree item to get only its content, and not its child tree items and groups.
<a name="63" id="anc63"></a><span class="line-modified">576     void ariaTreeItemContent(AccessibilityChildrenVector&amp;) override;</span>
577 
578     // ARIA live-region features.
<a name="64" id="anc64"></a><span class="line-modified">579     bool supportsLiveRegion(bool excludeIfOff = true) const override;</span>
<span class="line-modified">580     bool isInsideLiveRegion(bool excludeIfOff = true) const override;</span>
<span class="line-modified">581     AccessibilityObject* liveRegionAncestor(bool excludeIfOff = true) const override;</span>
<span class="line-modified">582     const String liveRegionStatus() const override { return String(); }</span>
<span class="line-modified">583     const String liveRegionRelevant() const override { return nullAtom(); }</span>
<span class="line-modified">584     bool liveRegionAtomic() const override { return false; }</span>
<span class="line-modified">585     bool isBusy() const override { return false; }</span>
586     static const String defaultLiveRegionStatusForRole(AccessibilityRole);
587     static bool liveRegionStatusIsEnabled(const AtomString&amp;);
588     static bool contentEditableAttributeIsEnabled(Element*);
<a name="65" id="anc65"></a><span class="line-modified">589     bool hasContentEditableAttributeSet() const override;</span>
590 
<a name="66" id="anc66"></a><span class="line-modified">591     bool supportsReadOnly() const override;</span>
<span class="line-modified">592     String readOnlyValue() const override;</span>
593 
<a name="67" id="anc67"></a><span class="line-modified">594     bool supportsAutoComplete() const override;</span>
<span class="line-modified">595     String autoCompleteValue() const override;</span>
596 
<a name="68" id="anc68"></a><span class="line-modified">597     bool hasARIAValueNow() const override { return hasAttribute(HTMLNames::aria_valuenowAttr); }</span>
<span class="line-added">598     bool supportsARIAAttributes() const override;</span>
599 
600     // CSS3 Speech properties.
<a name="69" id="anc69"></a><span class="line-modified">601     OptionSet&lt;SpeakAs&gt; speakAsProperty() const override { return OptionSet&lt;SpeakAs&gt; { }; }</span>
602 
603     // Make this object visible by scrolling as many nested scrollable views as needed.
<a name="70" id="anc70"></a><span class="line-modified">604     void scrollToMakeVisible() const override;</span>
605     // Same, but if the whole object can&#39;t be made visible, try for this subrect, in local coordinates.
<a name="71" id="anc71"></a><span class="line-modified">606     void scrollToMakeVisibleWithSubFocus(const IntRect&amp;) const override;</span>
607     // Scroll this object to a given point in global coordinates of the top-level window.
<a name="72" id="anc72"></a><span class="line-modified">608     void scrollToGlobalPoint(const IntPoint&amp;) const override;</span>
609 
<a name="73" id="anc73"></a><span class="line-modified">610     bool scrollByPage(ScrollByPageDirection) const override;</span>
<span class="line-modified">611     IntPoint scrollPosition() const override;</span>
<span class="line-modified">612     IntSize scrollContentsSize() const override;</span>
<span class="line-modified">613     IntRect scrollVisibleContentRect() const override;</span>
<span class="line-modified">614     void scrollToMakeVisible(const ScrollRectToVisibleOptions&amp;) const override;</span>

615 
<a name="74" id="anc74"></a><span class="line-modified">616     bool lastKnownIsIgnoredValue() override;</span>
<span class="line-modified">617     void setLastKnownIsIgnoredValue(bool) override;</span>
618 
619     // Fires a children changed notification on the parent if the isIgnored value changed.
<a name="75" id="anc75"></a><span class="line-modified">620     void notifyIfIgnoredValueChanged() override;</span>
621 
622     // All math elements return true for isMathElement().
<a name="76" id="anc76"></a><span class="line-modified">623     bool isMathElement() const override { return false; }</span>
<span class="line-modified">624     bool isMathFraction() const override { return false; }</span>
<span class="line-modified">625     bool isMathFenced() const override { return false; }</span>
<span class="line-modified">626     bool isMathSubscriptSuperscript() const override { return false; }</span>
<span class="line-modified">627     bool isMathRow() const override { return false; }</span>
<span class="line-modified">628     bool isMathUnderOver() const override { return false; }</span>
<span class="line-modified">629     bool isMathRoot() const override { return false; }</span>
<span class="line-modified">630     bool isMathSquareRoot() const override { return false; }</span>
<span class="line-modified">631     bool isMathText() const override { return false; }</span>
<span class="line-modified">632     bool isMathNumber() const override { return false; }</span>
<span class="line-modified">633     bool isMathOperator() const override { return false; }</span>
<span class="line-modified">634     bool isMathFenceOperator() const override { return false; }</span>
<span class="line-modified">635     bool isMathSeparatorOperator() const override { return false; }</span>
<span class="line-modified">636     bool isMathIdentifier() const override { return false; }</span>
<span class="line-modified">637     bool isMathTable() const override { return false; }</span>
<span class="line-modified">638     bool isMathTableRow() const override { return false; }</span>
<span class="line-modified">639     bool isMathTableCell() const override { return false; }</span>
<span class="line-modified">640     bool isMathMultiscript() const override { return false; }</span>
<span class="line-modified">641     bool isMathToken() const override { return false; }</span>
<span class="line-modified">642     bool isMathScriptObject(AccessibilityMathScriptObjectType) const override { return false; }</span>
<span class="line-modified">643     bool isMathMultiscriptObject(AccessibilityMathMultiscriptObjectType) const override { return false; }</span>
644 
645     // Root components.
<a name="77" id="anc77"></a><span class="line-modified">646     AXCoreObject* mathRadicandObject() override { return nullptr; }</span>
<span class="line-modified">647     AXCoreObject* mathRootIndexObject() override { return nullptr; }</span>
648 
649     // Under over components.
<a name="78" id="anc78"></a><span class="line-modified">650     AXCoreObject* mathUnderObject() override { return nullptr; }</span>
<span class="line-modified">651     AXCoreObject* mathOverObject() override { return nullptr; }</span>
652 
653     // Fraction components.
<a name="79" id="anc79"></a><span class="line-modified">654     AXCoreObject* mathNumeratorObject() override { return nullptr; }</span>
<span class="line-modified">655     AXCoreObject* mathDenominatorObject() override { return nullptr; }</span>
656 
657     // Subscript/superscript components.
<a name="80" id="anc80"></a><span class="line-modified">658     AXCoreObject* mathBaseObject() override { return nullptr; }</span>
<span class="line-modified">659     AXCoreObject* mathSubscriptObject() override { return nullptr; }</span>
<span class="line-modified">660     AXCoreObject* mathSuperscriptObject() override { return nullptr; }</span>
661 
662     // Fenced components.
<a name="81" id="anc81"></a><span class="line-modified">663     String mathFencedOpenString() const override { return String(); }</span>
<span class="line-modified">664     String mathFencedCloseString() const override { return String(); }</span>
<span class="line-modified">665     int mathLineThickness() const override { return 0; }</span>
<span class="line-modified">666     bool isAnonymousMathOperator() const override { return false; }</span>
667 
668     // Multiscripts components.
<a name="82" id="anc82"></a><span class="line-modified">669     void mathPrescripts(AccessibilityMathMultiscriptPairs&amp;) override { }</span>
<span class="line-modified">670     void mathPostscripts(AccessibilityMathMultiscriptPairs&amp;) override { }</span>

671 
672     // Visibility.
<a name="83" id="anc83"></a><span class="line-modified">673     bool isAXHidden() const override;</span>
<span class="line-modified">674     bool isDOMHidden() const override;</span>
<span class="line-modified">675     bool isHidden() const override { return isAXHidden() || isDOMHidden(); }</span>







676 
677 #if PLATFORM(COCOA)
<a name="84" id="anc84"></a><span class="line-modified">678     void overrideAttachmentParent(AXCoreObject* parent) override;</span>
679 #else
<a name="85" id="anc85"></a><span class="line-modified">680     void overrideAttachmentParent(AXCoreObject*) override { }</span>
681 #endif
682 
683 #if ENABLE(ACCESSIBILITY)
684     // a platform-specific method for determining if an attachment is ignored
<a name="86" id="anc86"></a><span class="line-modified">685     bool accessibilityIgnoreAttachment() const override;</span>
686     // gives platforms the opportunity to indicate if and how an object should be included
<a name="87" id="anc87"></a><span class="line-modified">687     AccessibilityObjectInclusion accessibilityPlatformIncludesObject() const override;</span>
688 #else
<a name="88" id="anc88"></a><span class="line-modified">689     bool accessibilityIgnoreAttachment() const override { return true; }</span>
<span class="line-modified">690     AccessibilityObjectInclusion accessibilityPlatformIncludesObject() const override { return AccessibilityObjectInclusion::DefaultBehavior; }</span>
691 #endif
692 
693 #if PLATFORM(IOS_FAMILY)
<a name="89" id="anc89"></a><span class="line-modified">694     int accessibilityPasswordFieldLength() override;</span>
<span class="line-modified">695     bool hasTouchEventListener() const override;</span>
<span class="line-modified">696     bool isInputTypePopupButton() const override;</span>
697 #endif
698 
699     // allows for an AccessibilityObject to update its render tree or perform
700     // other operations update type operations
<a name="90" id="anc90"></a><span class="line-modified">701     void updateBackingStore() override;</span>
702 
703 #if PLATFORM(COCOA)
<a name="91" id="anc91"></a><span class="line-modified">704     bool preventKeyboardDOMEventDispatch() const override;</span>
<span class="line-modified">705     void setPreventKeyboardDOMEventDispatch(bool) override;</span>
<span class="line-modified">706     bool fileUploadButtonReturnsValueInTitle() const override;</span>
707     String speechHintAttributeValue() const override;
708     String descriptionAttributeValue() const override;
709     String helpTextAttributeValue() const override;
710     String titleAttributeValue() const override;
<a name="92" id="anc92"></a><span class="line-added">711     bool hasApplePDFAnnotationAttribute() const override { return hasAttribute(HTMLNames::x_apple_pdf_annotationAttr); }</span>
712 #endif
713 
714 #if PLATFORM(COCOA) &amp;&amp; !PLATFORM(IOS_FAMILY)
<a name="93" id="anc93"></a><span class="line-modified">715     bool caretBrowsingEnabled() const override;</span>
<span class="line-modified">716     void setCaretBrowsingEnabled(bool) override;</span>
717 #endif
718 
<a name="94" id="anc94"></a><span class="line-modified">719     AccessibilityObject* focusableAncestor() override;</span>
<span class="line-modified">720     AccessibilityObject* editableAncestor() override;</span>
<span class="line-modified">721     AccessibilityObject* highestEditableAncestor() override;</span>
722 
<a name="95" id="anc95"></a><span class="line-modified">723     const AccessibilityScrollView* ancestorAccessibilityScrollView(bool includeSelf) const override;</span>

724 
<a name="96" id="anc96"></a><span class="line-modified">725     void clearIsIgnoredFromParentData() override { m_isIgnoredFromParentData = AccessibilityIsIgnoredFromParentData(); }</span>
<span class="line-modified">726     void setIsIgnoredFromParentDataForChild(AXCoreObject*) override;</span>
<span class="line-added">727 </span>
<span class="line-added">728     uint64_t sessionID() const override;</span>
<span class="line-added">729     String documentURI() const override;</span>
<span class="line-added">730     String documentEncoding() const override;</span>
731 
732 protected:
<a name="97" id="anc97"></a><span class="line-added">733     AccessibilityObject() = default;</span>
<span class="line-added">734     void detachRemoteParts(AccessibilityDetachmentType) override;</span>
<span class="line-added">735     void detachPlatformWrapper(AccessibilityDetachmentType) override;</span>
<span class="line-added">736 </span>
737     AXID m_id { 0 };
738     AccessibilityChildrenVector m_children;
739     mutable bool m_haveChildren { false };
740     AccessibilityRole m_role { AccessibilityRole::Unknown };
741     AccessibilityObjectInclusion m_lastKnownIsIgnoredValue { AccessibilityObjectInclusion::DefaultBehavior };
742     AccessibilityIsIgnoredFromParentData m_isIgnoredFromParentData { };
743     bool m_childrenDirty { false };
744     bool m_subtreeDirty { false };
745 #if ENABLE(ACCESSIBILITY_ISOLATED_TREE)
746     bool m_isolatedTreeNodeInitialized { false };
747 #endif
748 
<a name="98" id="anc98"></a><span class="line-modified">749     void setIsIgnoredFromParentData(AccessibilityIsIgnoredFromParentData&amp; data) override { m_isIgnoredFromParentData = data; }</span>
750 
751     virtual bool computeAccessibilityIsIgnored() const { return true; }
752     bool isAccessibilityObject() const override { return true; }
753 
754     // If this object itself scrolls, return its ScrollableArea.
755     virtual ScrollableArea* getScrollableAreaIfScrollable() const { return nullptr; }
756     virtual void scrollTo(const IntPoint&amp;) const { }
757     ScrollableArea* scrollableAreaAncestor() const;
758     void scrollAreaAndAncestor(std::pair&lt;ScrollableArea*, AccessibilityObject*&gt;&amp;) const;
759 
<a name="99" id="anc99"></a>



760     virtual AccessibilityRole buttonRoleType() const;
<a name="100" id="anc100"></a><span class="line-modified">761     String rolePlatformDescription() const;</span>
<span class="line-added">762     bool isOnScreen() const override;</span>
763     bool dispatchTouchEvent();
764 
765     void ariaElementsFromAttribute(AccessibilityChildrenVector&amp;, const QualifiedName&amp;) const;
766     void ariaElementsReferencedByAttribute(AccessibilityChildrenVector&amp;, const QualifiedName&amp;) const;
767 
768     AccessibilityObject* radioGroupAncestor() const;
769 
770 #if ENABLE(ACCESSIBILITY) &amp;&amp; USE(ATK)
771     bool allowsTextRanges() const;
772     unsigned getLengthForTextRange() const;
773 #else
774     bool allowsTextRanges() const { return isTextControl(); }
775     unsigned getLengthForTextRange() const { return text().length(); }
776 #endif
<a name="101" id="anc101"></a>







777 };
778 
779 #if !ENABLE(ACCESSIBILITY)
780 inline const AccessibilityObject::AccessibilityChildrenVector&amp; AccessibilityObject::children(bool) { return m_children; }
<a name="102" id="anc102"></a><span class="line-modified">781 inline String AccessibilityObject::actionVerb() const { return emptyString(); }</span>
782 inline int AccessibilityObject::lineForPosition(const VisiblePosition&amp;) const { return -1; }
783 inline void AccessibilityObject::updateBackingStore() { }
<a name="103" id="anc103"></a><span class="line-added">784 inline void AccessibilityObject::detachPlatformWrapper(AccessibilityDetachmentType) { }</span>
785 #endif
786 
787 AccessibilityObject* firstAccessibleObjectFromNode(const Node*, const WTF::Function&lt;bool(const AccessibilityObject&amp;)&gt;&amp; isAccessible);
788 
<a name="104" id="anc104"></a><span class="line-added">789 namespace Accessibility {</span>
<span class="line-added">790 </span>
<span class="line-added">791 using PlatformRoleMap = HashMap&lt;AccessibilityRole, String, DefaultHash&lt;unsigned&gt;::Hash, WTF::UnsignedWithZeroKeyHashTraits&lt;unsigned&gt;&gt;;</span>
<span class="line-added">792 </span>
<span class="line-added">793 PlatformRoleMap createPlatformRoleMap();</span>
<span class="line-added">794 String roleToPlatformString(AccessibilityRole);</span>
<span class="line-added">795 </span>
<span class="line-added">796 } // namespace Accessibility</span>
<span class="line-added">797 </span>
798 } // namespace WebCore
799 
800 #define SPECIALIZE_TYPE_TRAITS_ACCESSIBILITY(ToValueTypeName, predicate) \
801 SPECIALIZE_TYPE_TRAITS_BEGIN(WebCore::ToValueTypeName) \
<a name="105" id="anc105"></a><span class="line-modified">802     static bool isType(const WebCore::AXCoreObject&amp; object) { return object.predicate; } \</span>
803 SPECIALIZE_TYPE_TRAITS_END()
804 
805 SPECIALIZE_TYPE_TRAITS_BEGIN(WebCore::AccessibilityObject)
<a name="106" id="anc106"></a><span class="line-modified">806 static bool isType(const WebCore::AXCoreObject&amp; context) { return context.isAccessibilityObject(); }</span>
807 SPECIALIZE_TYPE_TRAITS_END()
<a name="107" id="anc107"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="107" type="hidden" />
</body>
</html>