<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.web/src/main/native/Source/cmake/FindHarfBuzz.cmake</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 # Copyright (c) 2012, Intel Corporation
<a name="1" id="anc1"></a><span class="line-added">  2 # Copyright (c) 2019 Sony Interactive Entertainment Inc.</span>
  3 #
  4 # Redistribution and use in source and binary forms, with or without
  5 # modification, are permitted provided that the following conditions are met:
  6 #
  7 # * Redistributions of source code must retain the above copyright notice, this
  8 #   list of conditions and the following disclaimer.
  9 # * Redistributions in binary form must reproduce the above copyright notice,
 10 #   this list of conditions and the following disclaimer in the documentation
 11 #   and/or other materials provided with the distribution.
 12 # * Neither the name of Intel Corporation nor the names of its contributors may
 13 #   be used to endorse or promote products derived from this software without
 14 #   specific prior written permission.
 15 #
 16 # THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;
 17 # AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 18 # IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 19 # ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 20 # LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 21 # CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 22 # SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 23 # INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 24 # CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 25 # ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 26 # POSSIBILITY OF SUCH DAMAGE.
 27 #
 28 # Try to find Harfbuzz include and library directories.
 29 #
 30 # After successful discovery, this will set for inclusion where needed:
<a name="2" id="anc2"></a><span class="line-modified"> 31 # HarfBuzz_INCLUDE_DIRS - containg the HarfBuzz headers</span>
<span class="line-modified"> 32 # HarfBuzz_LIBRARIES - containg the HarfBuzz library</span>
<span class="line-added"> 33 </span>
<span class="line-added"> 34 #[=======================================================================[.rst:</span>
<span class="line-added"> 35 FindHarfBuzz</span>
<span class="line-added"> 36 --------------</span>
<span class="line-added"> 37 </span>
<span class="line-added"> 38 Find HarfBuzz headers and libraries.</span>
<span class="line-added"> 39 </span>
<span class="line-added"> 40 Imported Targets</span>
<span class="line-added"> 41 ^^^^^^^^^^^^^^^^</span>
<span class="line-added"> 42 </span>
<span class="line-added"> 43 ``HarfBuzz::HarfBuzz``</span>
<span class="line-added"> 44   The HarfBuzz library, if found.</span>
<span class="line-added"> 45 </span>
<span class="line-added"> 46 ``HarfBuzz::ICU``</span>
<span class="line-added"> 47   The HarfBuzz ICU library, if found.</span>
<span class="line-added"> 48 </span>
<span class="line-added"> 49 Result Variables</span>
<span class="line-added"> 50 ^^^^^^^^^^^^^^^^</span>
<span class="line-added"> 51 </span>
<span class="line-added"> 52 This will define the following variables in your project:</span>
<span class="line-added"> 53 </span>
<span class="line-added"> 54 ``HarfBuzz_FOUND``</span>
<span class="line-added"> 55   true if (the requested version of) HarfBuzz is available.</span>
<span class="line-added"> 56 ``HarfBuzz_VERSION``</span>
<span class="line-added"> 57   the version of HarfBuzz.</span>
<span class="line-added"> 58 ``HarfBuzz_LIBRARIES``</span>
<span class="line-added"> 59   the libraries to link against to use HarfBuzz.</span>
<span class="line-added"> 60 ``HarfBuzz_INCLUDE_DIRS``</span>
<span class="line-added"> 61   where to find the HarfBuzz headers.</span>
<span class="line-added"> 62 ``HarfBuzz_COMPILE_OPTIONS``</span>
<span class="line-added"> 63   this should be passed to target_compile_options(), if the</span>
<span class="line-added"> 64   target is not used for linking</span>
<span class="line-added"> 65 </span>
<span class="line-added"> 66 #]=======================================================================]</span>
 67 
 68 include(FindPkgConfig)
 69 pkg_check_modules(PC_HARFBUZZ QUIET harfbuzz)
<a name="3" id="anc3"></a><span class="line-added"> 70 set(HarfBuzz_COMPILE_OPTIONS ${PC_HARFBUZZ_CFLAGS_OTHER})</span>
<span class="line-added"> 71 set(HarfBuzz_VERSION ${PC_HARFBUZZ_CFLAGS_VERSION})</span>
 72 
<a name="4" id="anc4"></a><span class="line-modified"> 73 find_path(HarfBuzz_INCLUDE_DIR</span>
 74     NAMES hb.h
<a name="5" id="anc5"></a><span class="line-modified"> 75     HINTS ${PC_HARFBUZZ_INCLUDEDIR} ${PC_HARFBUZZ_INCLUDE_DIRS}</span>

 76     PATH_SUFFIXES harfbuzz
 77 )
 78 
<a name="6" id="anc6"></a><span class="line-modified"> 79 find_library(HarfBuzz_LIBRARY</span>
<span class="line-modified"> 80     NAMES ${HarfBuzz_NAMES} harfbuzz</span>
<span class="line-modified"> 81     HINTS ${PC_HARFBUZZ_LIBDIR} ${PC_HARFBUZZ_LIBRARY_DIRS}</span>
 82 )
 83 
<a name="7" id="anc7"></a><span class="line-modified"> 84 if (HarfBuzz_INCLUDE_DIR AND NOT HarfBuzz_VERSION)</span>
<span class="line-modified"> 85     if (EXISTS &quot;${HarfBuzz_INCLUDE_DIR}/hb-version.h&quot;)</span>
<span class="line-modified"> 86         file(READ &quot;${HarfBuzz_INCLUDE_DIR}/hb-version.h&quot; _harfbuzz_version_content)</span>
 87 
 88         string(REGEX MATCH &quot;#define +HB_VERSION_STRING +\&quot;([0-9]+\.[0-9]+\.[0-9]+)\&quot;&quot; _dummy &quot;${_harfbuzz_version_content}&quot;)
<a name="8" id="anc8"></a><span class="line-modified"> 89         set(HarfBuzz_VERSION &quot;${CMAKE_MATCH_1}&quot;)</span>
 90     endif ()
 91 endif ()
 92 
<a name="9" id="anc9"></a><span class="line-modified"> 93 if (&quot;${HarfBuzz_FIND_VERSION}&quot; VERSION_GREATER &quot;${HarfBuzz_VERSION}&quot;)</span>
<span class="line-modified"> 94     message(FATAL_ERROR &quot;Required version (&quot; ${HarfBuzz_FIND_VERSION} &quot;) is higher than found version (&quot; ${HarfBuzz_VERSION} &quot;)&quot;)</span>
 95 endif ()
 96 
<a name="10" id="anc10"></a><span class="line-modified"> 97 # Find components</span>
<span class="line-modified"> 98 if (HarfBuzz_INCLUDE_DIR AND HarfBuzz_LIBRARY)</span>
<span class="line-added"> 99     set(_HarfBuzz_REQUIRED_LIBS_FOUND ON)</span>
<span class="line-added">100     set(HarfBuzz_LIBS_FOUND &quot;HarfBuzz (required): ${HarfBuzz_LIBRARY}&quot;)</span>
<span class="line-added">101 else ()</span>
<span class="line-added">102     set(_HarfBuzz_REQUIRED_LIBS_FOUND OFF)</span>
<span class="line-added">103     set(HarfBuzz_LIBS_NOT_FOUND &quot;HarfBuzz (required)&quot;)</span>
<span class="line-added">104 endif ()</span>
<span class="line-added">105 </span>
<span class="line-added">106 if (&quot;ICU&quot; IN_LIST HarfBuzz_FIND_COMPONENTS)</span>
107     pkg_check_modules(PC_HARFBUZZ_ICU QUIET harfbuzz-icu)
<a name="11" id="anc11"></a><span class="line-added">108     set(HarfBuzz_ICU_COMPILE_OPTIONS ${PC_HARFBUZZ_ICU_CFLAGS_OTHER})</span>
109 
<a name="12" id="anc12"></a><span class="line-modified">110     find_library(HarfBuzz_ICU_LIBRARY</span>
<span class="line-modified">111         NAMES ${HarfBuzz_ICU_NAMES} harfbuzz-icu</span>
<span class="line-modified">112         HINTS ${PC_HARFBUZZ_ICU_LIBDIR} ${PC_HARFBUZZ_ICU_LIBRARY_DIRS}</span>
113     )
114 
<a name="13" id="anc13"></a><span class="line-modified">115     if (HarfBuzz_ICU_LIBRARY)</span>
<span class="line-modified">116         if (HarfBuzz_FIND_REQUIRED_ICU)</span>
<span class="line-added">117             list(APPEND HarfBuzz_LIBS_FOUND &quot;ICU (required): ${HarfBuzz_ICU_LIBRARY}&quot;)</span>
<span class="line-added">118         else ()</span>
<span class="line-added">119            list(APPEND HarfBuzz_LIBS_FOUND &quot;ICU (optional): ${HarfBuzz_ICU_LIBRARY}&quot;)</span>
<span class="line-added">120         endif ()</span>
<span class="line-added">121     else ()</span>
<span class="line-added">122         if (HarfBuzz_FIND_REQUIRED_ICU)</span>
<span class="line-added">123            set(_HarfBuzz_REQUIRED_LIBS_FOUND OFF)</span>
<span class="line-added">124            list(APPEND HarfBuzz_LIBS_NOT_FOUND &quot;ICU (required)&quot;)</span>
<span class="line-added">125         else ()</span>
<span class="line-added">126            list(APPEND HarfBuzz_LIBS_NOT_FOUND &quot;ICU (optional)&quot;)</span>
<span class="line-added">127         endif ()</span>
128     endif ()
<a name="14" id="anc14"></a><span class="line-added">129 endif ()</span>
130 
<a name="15" id="anc15"></a><span class="line-modified">131 if (NOT HarfBuzz_FIND_QUIETLY)</span>
<span class="line-added">132     if (HarfBuzz_LIBS_FOUND)</span>
<span class="line-added">133         message(STATUS &quot;Found the following HarfBuzz libraries:&quot;)</span>
<span class="line-added">134         foreach (found ${HarfBuzz_LIBS_FOUND})</span>
<span class="line-added">135             message(STATUS &quot; ${found}&quot;)</span>
<span class="line-added">136         endforeach ()</span>
<span class="line-added">137     endif ()</span>
<span class="line-added">138     if (HarfBuzz_LIBS_NOT_FOUND)</span>
<span class="line-added">139         message(STATUS &quot;The following HarfBuzz libraries were not found:&quot;)</span>
<span class="line-added">140         foreach (found ${HarfBuzz_LIBS_NOT_FOUND})</span>
<span class="line-added">141             message(STATUS &quot; ${found}&quot;)</span>
<span class="line-added">142         endforeach ()</span>
<span class="line-added">143     endif ()</span>
144 endif ()
145 
146 include(FindPackageHandleStandardArgs)
<a name="16" id="anc16"></a><span class="line-modified">147 find_package_handle_standard_args(HarfBuzz</span>
<span class="line-modified">148     FOUND_VAR HarfBuzz_FOUND</span>
<span class="line-added">149     REQUIRED_VARS HarfBuzz_INCLUDE_DIR HarfBuzz_LIBRARY _HarfBuzz_REQUIRED_LIBS_FOUND</span>
<span class="line-added">150     VERSION_VAR HarfBuzz_VERSION</span>
<span class="line-added">151 )</span>
<span class="line-added">152 </span>
<span class="line-added">153 if (HarfBuzz_LIBRARY AND NOT TARGET HarfBuzz::HarfBuzz)</span>
<span class="line-added">154     add_library(HarfBuzz::HarfBuzz UNKNOWN IMPORTED GLOBAL)</span>
<span class="line-added">155     set_target_properties(HarfBuzz::HarfBuzz PROPERTIES</span>
<span class="line-added">156         IMPORTED_LOCATION &quot;${HarfBuzz_LIBRARY}&quot;</span>
<span class="line-added">157         INTERFACE_COMPILE_OPTIONS &quot;${HarfBuzz_COMPILE_OPTIONS}&quot;</span>
<span class="line-added">158         INTERFACE_INCLUDE_DIRECTORIES &quot;${HarfBuzz_INCLUDE_DIR}&quot;</span>
<span class="line-added">159     )</span>
<span class="line-added">160 endif ()</span>
<span class="line-added">161 </span>
<span class="line-added">162 if (HarfBuzz_ICU_LIBRARY AND NOT TARGET HarfBuzz::ICU)</span>
<span class="line-added">163     add_library(HarfBuzz::ICU UNKNOWN IMPORTED GLOBAL)</span>
<span class="line-added">164     set_target_properties(HarfBuzz::ICU PROPERTIES</span>
<span class="line-added">165         IMPORTED_LOCATION &quot;${HarfBuzz_ICU_LIBRARY}&quot;</span>
<span class="line-added">166         INTERFACE_COMPILE_OPTIONS &quot;${HarfBuzz_ICU_COMPILE_OPTIONS}&quot;</span>
<span class="line-added">167         INTERFACE_INCLUDE_DIRECTORIES &quot;${HarfBuzz_INCLUDE_DIR}&quot;</span>
<span class="line-added">168     )</span>
<span class="line-added">169 endif ()</span>
170 
171 mark_as_advanced(
<a name="17" id="anc17"></a><span class="line-modified">172     HarfBuzz_INCLUDE_DIR</span>
<span class="line-modified">173     HarfBuzz_LIBRARY</span>
<span class="line-modified">174     HarfBuzz_ICU_LIBRARY</span>
175 )
<a name="18" id="anc18"></a><span class="line-added">176 </span>
<span class="line-added">177 if (HarfBuzz_FOUND)</span>
<span class="line-added">178    set(HarfBuzz_LIBRARIES ${HarfBuzz_LIBRARY} ${HarfBuzz_ICU_LIBRARY})</span>
<span class="line-added">179    set(HarfBuzz_INCLUDE_DIRS ${HarfBuzz_INCLUDE_DIR})</span>
<span class="line-added">180 endif ()</span>
<a name="19" id="anc19"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="19" type="hidden" />
</body>
</html>