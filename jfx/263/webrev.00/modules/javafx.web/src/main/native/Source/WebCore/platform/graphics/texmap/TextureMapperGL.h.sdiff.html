<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/texmap/TextureMapperGL.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="TextureMapperGL.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="TextureMapperGLHeaders.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/texmap/TextureMapperGL.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 13  Library General Public License for more details.
 14 
 15  You should have received a copy of the GNU Library General Public License
 16  along with this library; see the file COPYING.LIB.  If not, write to
 17  the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 18  Boston, MA 02110-1301, USA.
 19  */
 20 
 21 #ifndef TextureMapperGL_h
 22 #define TextureMapperGL_h
 23 
 24 #if USE(TEXTURE_MAPPER_GL)
 25 
 26 #include &quot;ClipStack.h&quot;
 27 #include &quot;FilterOperation.h&quot;
 28 #include &quot;IntSize.h&quot;
 29 #include &quot;TextureMapper.h&quot;
 30 #include &quot;TextureMapperContextAttributes.h&quot;
 31 #include &quot;TextureMapperGLHeaders.h&quot;
 32 #include &quot;TransformationMatrix.h&quot;


 33 
 34 namespace WebCore {
 35 
 36 class TextureMapperGLData;
 37 class TextureMapperShaderProgram;
 38 class FilterOperation;
 39 
 40 // An OpenGL-ES2 implementation of TextureMapper.
 41 class TextureMapperGL : public TextureMapper {
 42 public:
 43     TextureMapperGL();
 44     virtual ~TextureMapperGL();
 45 
 46     enum Flag {
 47         NoFlag = 0x00,
 48         ShouldBlend = 0x01,
 49         ShouldFlipTexture = 0x02,
 50         ShouldUseARBTextureRect = 0x04,
 51         ShouldAntialias = 0x08,
 52         ShouldRotateTexture90 = 0x10,
 53         ShouldRotateTexture180 = 0x20,
 54         ShouldRotateTexture270 = 0x40,
 55         ShouldConvertTextureBGRAToRGBA = 0x80,
 56         ShouldConvertTextureARGBToRGBA = 0x100,
<span class="line-modified"> 57         ShouldNotBlend = 0x200</span>

 58     };
 59 
 60     typedef int Flags;
 61 
 62     // TextureMapper implementation
 63     void drawBorder(const Color&amp;, float borderWidth, const FloatRect&amp;, const TransformationMatrix&amp;) override;
 64     void drawNumber(int number, const Color&amp;, const FloatPoint&amp;, const TransformationMatrix&amp;) override;
 65     void drawTexture(const BitmapTexture&amp;, const FloatRect&amp;, const TransformationMatrix&amp;, float opacity, unsigned exposedEdges) override;
 66     virtual void drawTexture(GLuint texture, Flags, const IntSize&amp; textureSize, const FloatRect&amp; targetRect, const TransformationMatrix&amp; modelViewMatrix, float opacity, unsigned exposedEdges = AllEdges);



 67     void drawSolidColor(const FloatRect&amp;, const TransformationMatrix&amp;, const Color&amp;, bool) override;
 68     void clearColor(const Color&amp;) override;
 69 
 70     void bindSurface(BitmapTexture* surface) override;
 71     BitmapTexture* currentSurface();
 72     void beginClip(const TransformationMatrix&amp;, const FloatRect&amp;) override;
 73     void beginPainting(PaintFlags = 0) override;
 74     void endPainting() override;
 75     void endClip() override;
 76     IntRect clipBounds() override;
 77     IntSize maxTextureSize() const override { return IntSize(2000, 2000); }
 78     Ref&lt;BitmapTexture&gt; createTexture() override { return createTexture(GL_DONT_CARE); }
 79     Ref&lt;BitmapTexture&gt; createTexture(GLint internalFormat) override;
 80 
 81     void drawFiltered(const BitmapTexture&amp; sourceTexture, const BitmapTexture* contentTexture, const FilterOperation&amp;, int pass);
 82 
 83     void setEnableEdgeDistanceAntialiasing(bool enabled) { m_enableEdgeDistanceAntialiasing = enabled; }

 84 
 85 private:
 86     void drawTexturedQuadWithProgram(TextureMapperShaderProgram&amp;, uint32_t texture, Flags, const IntSize&amp;, const FloatRect&amp;, const TransformationMatrix&amp; modelViewMatrix, float opacity);

 87     void draw(const FloatRect&amp;, const TransformationMatrix&amp; modelViewMatrix, TextureMapperShaderProgram&amp;, GLenum drawingMode, Flags);
 88 
 89     void drawUnitRect(TextureMapperShaderProgram&amp;, GLenum drawingMode);
 90     void drawEdgeTriangles(TextureMapperShaderProgram&amp;);
 91 
 92     bool beginScissorClip(const TransformationMatrix&amp;, const FloatRect&amp;);
 93     void bindDefaultSurface();
 94     ClipStack&amp; clipStack();
 95     inline TextureMapperGLData&amp; data() { return *m_data; }
 96 
 97     TextureMapperContextAttributes m_contextAttributes;
 98     TextureMapperGLData* m_data;
 99     ClipStack m_clipStack;
100     bool m_enableEdgeDistanceAntialiasing;
101 };
102 
103 } // namespace WebCore
104 
105 #endif // USE(TEXTURE_MAPPER_GL)
106 
</pre>
</td>
<td>
<hr />
<pre>
 13  Library General Public License for more details.
 14 
 15  You should have received a copy of the GNU Library General Public License
 16  along with this library; see the file COPYING.LIB.  If not, write to
 17  the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 18  Boston, MA 02110-1301, USA.
 19  */
 20 
 21 #ifndef TextureMapperGL_h
 22 #define TextureMapperGL_h
 23 
 24 #if USE(TEXTURE_MAPPER_GL)
 25 
 26 #include &quot;ClipStack.h&quot;
 27 #include &quot;FilterOperation.h&quot;
 28 #include &quot;IntSize.h&quot;
 29 #include &quot;TextureMapper.h&quot;
 30 #include &quot;TextureMapperContextAttributes.h&quot;
 31 #include &quot;TextureMapperGLHeaders.h&quot;
 32 #include &quot;TransformationMatrix.h&quot;
<span class="line-added"> 33 #include &lt;array&gt;</span>
<span class="line-added"> 34 #include &lt;wtf/Vector.h&gt;</span>
 35 
 36 namespace WebCore {
 37 
 38 class TextureMapperGLData;
 39 class TextureMapperShaderProgram;
 40 class FilterOperation;
 41 
 42 // An OpenGL-ES2 implementation of TextureMapper.
 43 class TextureMapperGL : public TextureMapper {
 44 public:
 45     TextureMapperGL();
 46     virtual ~TextureMapperGL();
 47 
 48     enum Flag {
 49         NoFlag = 0x00,
 50         ShouldBlend = 0x01,
 51         ShouldFlipTexture = 0x02,
 52         ShouldUseARBTextureRect = 0x04,
 53         ShouldAntialias = 0x08,
 54         ShouldRotateTexture90 = 0x10,
 55         ShouldRotateTexture180 = 0x20,
 56         ShouldRotateTexture270 = 0x40,
 57         ShouldConvertTextureBGRAToRGBA = 0x80,
 58         ShouldConvertTextureARGBToRGBA = 0x100,
<span class="line-modified"> 59         ShouldNotBlend = 0x200,</span>
<span class="line-added"> 60         ShouldUseExternalOESTextureRect = 0x400</span>
 61     };
 62 
 63     typedef int Flags;
 64 
 65     // TextureMapper implementation
 66     void drawBorder(const Color&amp;, float borderWidth, const FloatRect&amp;, const TransformationMatrix&amp;) override;
 67     void drawNumber(int number, const Color&amp;, const FloatPoint&amp;, const TransformationMatrix&amp;) override;
 68     void drawTexture(const BitmapTexture&amp;, const FloatRect&amp;, const TransformationMatrix&amp;, float opacity, unsigned exposedEdges) override;
 69     virtual void drawTexture(GLuint texture, Flags, const IntSize&amp; textureSize, const FloatRect&amp; targetRect, const TransformationMatrix&amp; modelViewMatrix, float opacity, unsigned exposedEdges = AllEdges);
<span class="line-added"> 70     void drawTexturePlanarYUV(const std::array&lt;GLuint, 3&gt;&amp; textures, const std::array&lt;GLfloat, 9&gt;&amp; yuvToRgbMatrix, Flags, const IntSize&amp; textureSize, const FloatRect&amp; targetRect, const TransformationMatrix&amp; modelViewMatrix, float opacity, unsigned exposedEdges = AllEdges);</span>
<span class="line-added"> 71     void drawTextureSemiPlanarYUV(const std::array&lt;GLuint, 2&gt;&amp; textures, bool uvReversed, const std::array&lt;GLfloat, 9&gt;&amp; yuvToRgbMatrix, Flags, const IntSize&amp; textureSize, const FloatRect&amp; targetRect, const TransformationMatrix&amp; modelViewMatrix, float opacity, unsigned exposedEdges = AllEdges);</span>
<span class="line-added"> 72     void drawTexturePackedYUV(GLuint texture, const std::array&lt;GLfloat, 9&gt;&amp; yuvToRgbMatrix, Flags, const IntSize&amp; textureSize, const FloatRect&amp; targetRect, const TransformationMatrix&amp; modelViewMatrix, float opacity, unsigned exposedEdges = AllEdges);</span>
 73     void drawSolidColor(const FloatRect&amp;, const TransformationMatrix&amp;, const Color&amp;, bool) override;
 74     void clearColor(const Color&amp;) override;
 75 
 76     void bindSurface(BitmapTexture* surface) override;
 77     BitmapTexture* currentSurface();
 78     void beginClip(const TransformationMatrix&amp;, const FloatRect&amp;) override;
 79     void beginPainting(PaintFlags = 0) override;
 80     void endPainting() override;
 81     void endClip() override;
 82     IntRect clipBounds() override;
 83     IntSize maxTextureSize() const override { return IntSize(2000, 2000); }
 84     Ref&lt;BitmapTexture&gt; createTexture() override { return createTexture(GL_DONT_CARE); }
 85     Ref&lt;BitmapTexture&gt; createTexture(GLint internalFormat) override;
 86 
 87     void drawFiltered(const BitmapTexture&amp; sourceTexture, const BitmapTexture* contentTexture, const FilterOperation&amp;, int pass);
 88 
 89     void setEnableEdgeDistanceAntialiasing(bool enabled) { m_enableEdgeDistanceAntialiasing = enabled; }
<span class="line-added"> 90     void drawTextureExternalOES(GLuint texture, Flags, const IntSize&amp;, const FloatRect&amp;, const TransformationMatrix&amp; modelViewMatrix, float opacity);</span>
 91 
 92 private:
 93     void drawTexturedQuadWithProgram(TextureMapperShaderProgram&amp;, uint32_t texture, Flags, const IntSize&amp;, const FloatRect&amp;, const TransformationMatrix&amp; modelViewMatrix, float opacity);
<span class="line-added"> 94     void drawTexturedQuadWithProgram(TextureMapperShaderProgram&amp;, const Vector&lt;std::pair&lt;GLuint, GLuint&gt; &gt;&amp; texturesAndSamplers, Flags, const IntSize&amp;, const FloatRect&amp;, const TransformationMatrix&amp; modelViewMatrix, float opacity);</span>
 95     void draw(const FloatRect&amp;, const TransformationMatrix&amp; modelViewMatrix, TextureMapperShaderProgram&amp;, GLenum drawingMode, Flags);
 96 
 97     void drawUnitRect(TextureMapperShaderProgram&amp;, GLenum drawingMode);
 98     void drawEdgeTriangles(TextureMapperShaderProgram&amp;);
 99 
100     bool beginScissorClip(const TransformationMatrix&amp;, const FloatRect&amp;);
101     void bindDefaultSurface();
102     ClipStack&amp; clipStack();
103     inline TextureMapperGLData&amp; data() { return *m_data; }
104 
105     TextureMapperContextAttributes m_contextAttributes;
106     TextureMapperGLData* m_data;
107     ClipStack m_clipStack;
108     bool m_enableEdgeDistanceAntialiasing;
109 };
110 
111 } // namespace WebCore
112 
113 #endif // USE(TEXTURE_MAPPER_GL)
114 
</pre>
</td>
</tr>
</table>
<center><a href="TextureMapperGL.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="TextureMapperGLHeaders.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>