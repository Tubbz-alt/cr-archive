diff a/modules/javafx.web/src/main/native/Source/WebCore/rendering/updating/RenderTreeBuilderBlock.cpp b/modules/javafx.web/src/main/native/Source/WebCore/rendering/updating/RenderTreeBuilderBlock.cpp
--- a/modules/javafx.web/src/main/native/Source/WebCore/rendering/updating/RenderTreeBuilderBlock.cpp
+++ b/modules/javafx.web/src/main/native/Source/WebCore/rendering/updating/RenderTreeBuilderBlock.cpp
@@ -164,10 +164,17 @@
         while (beforeChildContainer->parent() != &parent)
             beforeChildContainer = beforeChildContainer->parent();
         ASSERT(beforeChildContainer);
 
         if (beforeChildContainer->isAnonymous()) {
+            if (beforeChildContainer->isInline() && child->isInline()) {
+                // The before child happens to be a block level box wrapped in an anonymous inline-block in an inline context (e.g. ruby).
+                // Let's attach this new child before the anonymous inline-block wrapper.
+                ASSERT(beforeChildContainer->isInlineBlockOrInlineTable());
+                m_builder.attach(parent, WTFMove(child), beforeChildContainer);
+                return;
+            }
             RELEASE_ASSERT_WITH_SECURITY_IMPLICATION(!beforeChildContainer->isInline());
 
             // If the requested beforeChild is not one of our children, then this is because
             // there is an anonymous container within this object that contains the beforeChild.
             RenderElement* beforeChildAnonymousContainer = beforeChildContainer;
