<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Tools/Scripts/build-webkit</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../DumpRenderTree/java/TestRunnerJava.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="set-webkit-configuration.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Tools/Scripts/build-webkit</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -42,10 +42,11 @@</span>
  use lib $FindBin::Bin;
  use webkitdirs;
  use List::Util qw(first);
  use webkitperl::FeatureList qw(getFeatureOptionList);
  use POSIX;
<span class="udiff-line-added">+ use Text::ParseWords;</span>
  
  sub writeCongrats();
  
  checkRequiredSystemConfig();
  setConfiguration();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -80,11 +81,11 @@</span>
  my $useCCache = -1;
  
  my @features = getFeatureOptionList();
  
  # Additional environment parameters
<span class="udiff-line-modified-removed">- push @ARGV, split(/ /, $ENV{&#39;BUILD_WEBKIT_ARGS&#39;}) if ($ENV{&#39;BUILD_WEBKIT_ARGS&#39;});</span>
<span class="udiff-line-modified-added">+ push @ARGV, parse_line(&#39;\s+&#39;, 0, $ENV{&#39;BUILD_WEBKIT_ARGS&#39;}) if ($ENV{&#39;BUILD_WEBKIT_ARGS&#39;});</span>
  
  # Initialize values from defaults
  foreach (@ARGV) {
      if ($_ eq &#39;--minimal&#39;) {
          $minimal = 1;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -117,10 +118,11 @@</span>
    --analyze                         Enable static anaylsis (iOS and Mac only)
    --lto-mode=&lt;mode&gt;                 Set Link Time Optimization mode (full, thin, or none) (LLVM only)
    --[no-]xcbuild                    Force the use of XCBuild or not
  
    --java                            Build the Open JavaFX port
<span class="udiff-line-added">+   --ftw                             Build the FTW Windows port</span>
    --gtk                             Build the GTK+ port
    --wpe                             Build the WPE port
    --wincairo                        Build using Cairo (rather than CoreGraphics) on Windows
    --playstation                     Build the PlayStation port
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -188,11 +190,11 @@</span>
  
  # Check that all the project directories are there.
  my @projects = (&quot;Source/JavaScriptCore&quot;, &quot;Source/WebCore&quot;, &quot;Source/WebKitLegacy&quot;);
  
  # Build WTF as a separate static library on ports which support it.
<span class="udiff-line-modified-removed">- splice @projects, 0, 0, &quot;Source/WTF&quot; if isAppleWebKit() or isWinCairo();</span>
<span class="udiff-line-modified-added">+ splice @projects, 0, 0, &quot;Source/WTF&quot; if isAppleWebKit() or isWinCairo() or isFTW();</span>
  
  splice @projects, 0, 0, &quot;Source/bmalloc&quot; if isAppleCocoaWebKit();
  
  # Ports using CMake will check if directories exist in the CMake configuration.
  if (!isCMakeBuild()) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -201,11 +203,11 @@</span>
              die &quot;Error: No $dir directory found. Please do a fresh checkout.\n&quot;;
          }
      }
  }
  
<span class="udiff-line-modified-removed">- if ((isAppleWebKit() || isWinCairo() || isPlayStation()) &amp;&amp; !-d &quot;WebKitLibraries&quot;) {</span>
<span class="udiff-line-modified-added">+ if ((isAppleWebKit() || isWinCairo() || isPlayStation() || isFTW()) &amp;&amp; !-d &quot;WebKitLibraries&quot;) {</span>
      die &quot;Error: No WebKitLibraries directory found. Please do a fresh checkout.\n&quot;;
  }
  
  my @options = ();
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -260,10 +262,14 @@</span>
          push @copyLibrariesArgs, productDir();
          print(join(&quot; &quot;, @copyLibrariesArgs) . &quot;\n&quot;);
          (system(@copyLibrariesArgs) == 0) or die;
      }
  
<span class="udiff-line-added">+     if (isAppleMacWebKit()) {</span>
<span class="udiff-line-added">+         push @projects, (&quot;Tools/lldb/lldbWebKitTester&quot;);</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      # Build Tools needed for Apple ports
      push @projects, (&quot;Tools/DumpRenderTree&quot;, &quot;Tools/WebKitTestRunner&quot;, &quot;Source/ThirdParty/gtest&quot;, &quot;Tools/TestWebKitAPI&quot;);
  
  } elsif (isWinCairo() &amp;&amp; !$skipLibraryUpdate) {
      (system(&quot;python Tools/Scripts/update-webkit-wincairo-libs.py&quot;) == 0) or die;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -305,11 +311,11 @@</span>
  
      buildCMakeProjectOrExit($clean, $prefixPath, $makeArgs, @featureArgs, @cmakeArgs);
  }
  
  my $baseProductDir = baseProductDir();
<span class="udiff-line-modified-removed">- if (isAppleWinWebKit() || isWinCairo() || isPlayStation()) {</span>
<span class="udiff-line-modified-added">+ if (isAppleWinWebKit() || isWinCairo() || isPlayStation() || isFTW()) {</span>
      my @featureArgs = cmakeArgsFromFeatures(@features, !$noExperimentalFeatures);
      removeCMakeCache(@featureArgs);
  
      chdirWebKit();
      if (exitStatus(generateBuildSystemFromCMakeProject($prefixPath, @featureArgs, @cmakeArgs))) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -325,11 +331,11 @@</span>
      } else {
          $result = buildVisualStudioProject(File::Spec-&gt;catfile($baseProductDir, configuration(), &quot;WebKit.sln&quot;), $clean);
      }
      if (exitStatus($result)) {
          my $scriptDir = relativeScriptsDir();
<span class="udiff-line-modified-removed">-         if (isAppleWinWebKit() || isWinCairo()) {</span>
<span class="udiff-line-modified-added">+         if (isAppleWinWebKit() || isWinCairo() || isFTW()) {</span>
              print &quot;\n\n===== BUILD FAILED ======\n\n&quot;;
              print &quot;Please ensure you have run $scriptDir/update-webkit to install dependencies.\n\n&quot;;
              print &quot;You can view build errors by checking the BuildLog.htm files located at:\n$baseProductDir/obj/&lt;project&gt;/&lt;config&gt;.\n&quot;;
          }
          exit exitStatus($result);
</pre>
<center><a href="../DumpRenderTree/java/TestRunnerJava.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="set-webkit-configuration.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>