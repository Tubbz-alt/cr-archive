<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/svg/SVGGraphicsElement.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SVGGradientElement.idl.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SVGImageElement.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/svg/SVGGraphicsElement.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 63 Ref&lt;SVGMatrix&gt; SVGGraphicsElement::getScreenCTMForBindings()
 64 {
 65     return SVGMatrix::create(getScreenCTM());
 66 }
 67 
 68 AffineTransform SVGGraphicsElement::getScreenCTM(StyleUpdateStrategy styleUpdateStrategy)
 69 {
 70     return SVGLocatable::computeCTM(this, SVGLocatable::ScreenScope, styleUpdateStrategy);
 71 }
 72 
 73 AffineTransform SVGGraphicsElement::animatedLocalTransform() const
 74 {
 75     AffineTransform matrix;
 76     auto* style = renderer() ? &amp;renderer()-&gt;style() : nullptr;
 77 
 78     // If CSS property was set, use that, otherwise fallback to attribute (if set).
 79     if (style &amp;&amp; style-&gt;hasTransform()) {
 80 
 81         FloatRect boundingBox;
 82         switch (style-&gt;transformBox()) {







 83         case TransformBox::FillBox:
 84             boundingBox = renderer()-&gt;objectBoundingBox();
 85             break;
<span class="line-removed"> 86         case TransformBox::BorderBox:</span>
<span class="line-removed"> 87             // For SVG elements without an associated CSS layout box, the used value for border-box is view-box.</span>
 88         case TransformBox::ViewBox: {
 89             FloatSize viewportSize;
 90             SVGLengthContext(this).determineViewport(viewportSize);
 91             boundingBox.setSize(viewportSize);
 92             break;
 93             }
 94         }
 95 
 96         // Note: objectBoundingBox is an emptyRect for elements like pattern or clipPath.
 97         // See the &quot;Object bounding box units&quot; section of http://dev.w3.org/csswg/css3-transforms/
 98         TransformationMatrix transform;
 99         style-&gt;applyTransform(transform, boundingBox);
100 
101         // Flatten any 3D transform.
102         matrix = transform.toAffineTransform();
103         // CSS bakes the zoom factor into lengths, including translation components.
104         // In order to align CSS &amp; SVG transforms, we need to invert this operation.
105         float zoom = style-&gt;effectiveZoom();
106         if (zoom != 1) {
107             matrix.setE(matrix.e() / zoom);
</pre>
</td>
<td>
<hr />
<pre>
 63 Ref&lt;SVGMatrix&gt; SVGGraphicsElement::getScreenCTMForBindings()
 64 {
 65     return SVGMatrix::create(getScreenCTM());
 66 }
 67 
 68 AffineTransform SVGGraphicsElement::getScreenCTM(StyleUpdateStrategy styleUpdateStrategy)
 69 {
 70     return SVGLocatable::computeCTM(this, SVGLocatable::ScreenScope, styleUpdateStrategy);
 71 }
 72 
 73 AffineTransform SVGGraphicsElement::animatedLocalTransform() const
 74 {
 75     AffineTransform matrix;
 76     auto* style = renderer() ? &amp;renderer()-&gt;style() : nullptr;
 77 
 78     // If CSS property was set, use that, otherwise fallback to attribute (if set).
 79     if (style &amp;&amp; style-&gt;hasTransform()) {
 80 
 81         FloatRect boundingBox;
 82         switch (style-&gt;transformBox()) {
<span class="line-added"> 83         case TransformBox::BorderBox:</span>
<span class="line-added"> 84             // For SVG elements without an associated CSS layout box, the used value for border-box is stroke-box.</span>
<span class="line-added"> 85         case TransformBox::StrokeBox:</span>
<span class="line-added"> 86             boundingBox = renderer()-&gt;strokeBoundingBox();</span>
<span class="line-added"> 87             break;</span>
<span class="line-added"> 88         case TransformBox::ContentBox:</span>
<span class="line-added"> 89             // For SVG elements without an associated CSS layout box, the used value for content-box is fill-box.</span>
 90         case TransformBox::FillBox:
 91             boundingBox = renderer()-&gt;objectBoundingBox();
 92             break;


 93         case TransformBox::ViewBox: {
 94             FloatSize viewportSize;
 95             SVGLengthContext(this).determineViewport(viewportSize);
 96             boundingBox.setSize(viewportSize);
 97             break;
 98             }
 99         }
100 
101         // Note: objectBoundingBox is an emptyRect for elements like pattern or clipPath.
102         // See the &quot;Object bounding box units&quot; section of http://dev.w3.org/csswg/css3-transforms/
103         TransformationMatrix transform;
104         style-&gt;applyTransform(transform, boundingBox);
105 
106         // Flatten any 3D transform.
107         matrix = transform.toAffineTransform();
108         // CSS bakes the zoom factor into lengths, including translation components.
109         // In order to align CSS &amp; SVG transforms, we need to invert this operation.
110         float zoom = style-&gt;effectiveZoom();
111         if (zoom != 1) {
112             matrix.setE(matrix.e() / zoom);
</pre>
</td>
</tr>
</table>
<center><a href="SVGGradientElement.idl.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SVGImageElement.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>