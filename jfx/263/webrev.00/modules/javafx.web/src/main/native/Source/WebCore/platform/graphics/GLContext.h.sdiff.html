<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/GLContext.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="GLContext.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="GeneratedImage.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/GLContext.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  3  *
  4  *  This library is free software; you can redistribute it and/or
  5  *  modify it under the terms of the GNU Lesser General Public
  6  *  License as published by the Free Software Foundation; either
  7  *  version 2 of the License, or (at your option) any later version.
  8  *
  9  *  This library is distributed in the hope that it will be useful,
 10  *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 11  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 12  *  Lesser General Public License for more details.
 13  *
 14  *  You should have received a copy of the GNU Lesser General Public
 15  *  License along with this library; if not, write to the Free
 16  *  Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 17  *  Boston, MA 02110-1301 USA
 18  */
 19 
 20 #ifndef GLContext_h
 21 #define GLContext_h
 22 
<span class="line-removed"> 23 #include &quot;GraphicsContext3D.h&quot;</span>
 24 #include &quot;IntSize.h&quot;
 25 #include &quot;PlatformDisplay.h&quot;
 26 #include &lt;wtf/Noncopyable.h&gt;
 27 






 28 #if USE(EGL) &amp;&amp; !PLATFORM(GTK)
 29 #if PLATFORM(WPE)
 30 // FIXME: For now default to the GBM EGL platform, but this should really be
 31 // somehow deducible from the build configuration.
 32 #define __GBM__ 1
 33 #endif // PLATFORM(WPE)
 34 #include &lt;EGL/eglplatform.h&gt;
 35 typedef EGLNativeWindowType GLNativeWindowType;
 36 #else // !USE(EGL) || PLATFORM(GTK)
 37 typedef uint64_t GLNativeWindowType;
 38 #endif
 39 
 40 #if USE(CAIRO)
 41 typedef struct _cairo_device cairo_device_t;
 42 #endif
 43 


 44 namespace WebCore {
 45 
 46 class IntSize;
 47 
 48 class GLContext {
 49     WTF_MAKE_NONCOPYABLE(GLContext); WTF_MAKE_FAST_ALLOCATED;
 50 public:
 51     WEBCORE_EXPORT static std::unique_ptr&lt;GLContext&gt; createContextForWindow(GLNativeWindowType windowHandle, PlatformDisplay* = nullptr);
 52     static std::unique_ptr&lt;GLContext&gt; createOffscreenContext(PlatformDisplay* = nullptr);
 53     static std::unique_ptr&lt;GLContext&gt; createSharingContext(PlatformDisplay&amp;);
 54     static GLContext* current();
 55     static bool isExtensionSupported(const char* extensionList, const char* extension);
 56 
 57     PlatformDisplay&amp; display() const { return m_display; }
 58     unsigned version();
 59 
 60     virtual ~GLContext();
 61     virtual bool makeContextCurrent();
 62     virtual void swapBuffers() = 0;
 63     virtual void waitNative() = 0;
 64     virtual bool canRenderToDefaultFramebuffer() = 0;
 65     virtual IntSize defaultFrameBufferSize() = 0;
 66     virtual void swapInterval(int) = 0;
 67 
 68     virtual bool isEGLContext() const = 0;
 69 
 70 #if USE(CAIRO)
 71     virtual cairo_device_t* cairoDevice() = 0;
 72 #endif
 73 
<span class="line-modified"> 74 #if ENABLE(GRAPHICS_CONTEXT_3D)</span>
<span class="line-modified"> 75     virtual PlatformGraphicsContext3D platformContext() = 0;</span>
 76 #endif
 77 
 78 #if PLATFORM(X11)
 79 private:
 80     static void addActiveContext(GLContext*);
 81     static void removeActiveContext(GLContext*);
 82     static void cleanupActiveContextsAtExit();
 83 #endif
 84 
 85 protected:
 86     GLContext(PlatformDisplay&amp;);
 87 
 88     PlatformDisplay&amp; m_display;
 89     unsigned m_version { 0 };
 90 };
 91 
 92 } // namespace WebCore
 93 
 94 #endif // GLContext_h
</pre>
</td>
<td>
<hr />
<pre>
  3  *
  4  *  This library is free software; you can redistribute it and/or
  5  *  modify it under the terms of the GNU Lesser General Public
  6  *  License as published by the Free Software Foundation; either
  7  *  version 2 of the License, or (at your option) any later version.
  8  *
  9  *  This library is distributed in the hope that it will be useful,
 10  *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 11  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 12  *  Lesser General Public License for more details.
 13  *
 14  *  You should have received a copy of the GNU Lesser General Public
 15  *  License along with this library; if not, write to the Free
 16  *  Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 17  *  Boston, MA 02110-1301 USA
 18  */
 19 
 20 #ifndef GLContext_h
 21 #define GLContext_h
 22 

 23 #include &quot;IntSize.h&quot;
 24 #include &quot;PlatformDisplay.h&quot;
 25 #include &lt;wtf/Noncopyable.h&gt;
 26 
<span class="line-added"> 27 #if USE(LIBEPOXY)</span>
<span class="line-added"> 28 #include &lt;epoxy/gl.h&gt;</span>
<span class="line-added"> 29 #elif USE(OPENGL_ES)</span>
<span class="line-added"> 30 #include &lt;GLES2/gl2.h&gt;</span>
<span class="line-added"> 31 #endif</span>
<span class="line-added"> 32 </span>
 33 #if USE(EGL) &amp;&amp; !PLATFORM(GTK)
 34 #if PLATFORM(WPE)
 35 // FIXME: For now default to the GBM EGL platform, but this should really be
 36 // somehow deducible from the build configuration.
 37 #define __GBM__ 1
 38 #endif // PLATFORM(WPE)
 39 #include &lt;EGL/eglplatform.h&gt;
 40 typedef EGLNativeWindowType GLNativeWindowType;
 41 #else // !USE(EGL) || PLATFORM(GTK)
 42 typedef uint64_t GLNativeWindowType;
 43 #endif
 44 
 45 #if USE(CAIRO)
 46 typedef struct _cairo_device cairo_device_t;
 47 #endif
 48 
<span class="line-added"> 49 typedef void* PlatformGraphicsContextGL;</span>
<span class="line-added"> 50 </span>
 51 namespace WebCore {
 52 
 53 class IntSize;
 54 
 55 class GLContext {
 56     WTF_MAKE_NONCOPYABLE(GLContext); WTF_MAKE_FAST_ALLOCATED;
 57 public:
 58     WEBCORE_EXPORT static std::unique_ptr&lt;GLContext&gt; createContextForWindow(GLNativeWindowType windowHandle, PlatformDisplay* = nullptr);
 59     static std::unique_ptr&lt;GLContext&gt; createOffscreenContext(PlatformDisplay* = nullptr);
 60     static std::unique_ptr&lt;GLContext&gt; createSharingContext(PlatformDisplay&amp;);
 61     static GLContext* current();
 62     static bool isExtensionSupported(const char* extensionList, const char* extension);
 63 
 64     PlatformDisplay&amp; display() const { return m_display; }
 65     unsigned version();
 66 
 67     virtual ~GLContext();
 68     virtual bool makeContextCurrent();
 69     virtual void swapBuffers() = 0;
 70     virtual void waitNative() = 0;
 71     virtual bool canRenderToDefaultFramebuffer() = 0;
 72     virtual IntSize defaultFrameBufferSize() = 0;
 73     virtual void swapInterval(int) = 0;
 74 
 75     virtual bool isEGLContext() const = 0;
 76 
 77 #if USE(CAIRO)
 78     virtual cairo_device_t* cairoDevice() = 0;
 79 #endif
 80 
<span class="line-modified"> 81 #if ENABLE(GRAPHICS_CONTEXT_GL)</span>
<span class="line-modified"> 82     virtual PlatformGraphicsContextGL platformContext() = 0;</span>
 83 #endif
 84 
 85 #if PLATFORM(X11)
 86 private:
 87     static void addActiveContext(GLContext*);
 88     static void removeActiveContext(GLContext*);
 89     static void cleanupActiveContextsAtExit();
 90 #endif
 91 
 92 protected:
 93     GLContext(PlatformDisplay&amp;);
 94 
 95     PlatformDisplay&amp; m_display;
 96     unsigned m_version { 0 };
 97 };
 98 
 99 } // namespace WebCore
100 
101 #endif // GLContext_h
</pre>
</td>
</tr>
</table>
<center><a href="GLContext.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="GeneratedImage.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>