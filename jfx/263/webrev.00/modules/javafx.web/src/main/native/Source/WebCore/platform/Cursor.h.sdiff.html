<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/Cursor.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Cursor.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DateComponents.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/Cursor.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 25 
 26 #pragma once
 27 
 28 #include &quot;Image.h&quot;
 29 #include &quot;IntPoint.h&quot;
 30 #include &lt;wtf/Assertions.h&gt;
 31 #include &lt;wtf/RefPtr.h&gt;
 32 
 33 #if PLATFORM(WIN)
 34 typedef struct HICON__* HICON;
 35 typedef HICON HCURSOR;
 36 #include &lt;wtf/RefCounted.h&gt;
 37 #elif PLATFORM(COCOA)
 38 #include &lt;wtf/RetainPtr.h&gt;
 39 #elif PLATFORM(GTK)
 40 #include &quot;GRefPtrGtk.h&quot;
 41 #elif PLATFORM(JAVA)
 42 #include &lt;jni.h&gt;
 43 #endif
 44 
<span class="line-modified"> 45 #if USE(APPKIT)</span>
 46 OBJC_CLASS NSCursor;
 47 #endif
 48 
 49 #if PLATFORM(WIN)
 50 typedef struct HICON__ *HICON;
 51 typedef HICON HCURSOR;
 52 #endif
 53 
 54 namespace WebCore {
 55 
 56 class Image;
 57 
 58 #if PLATFORM(WIN)
 59 
 60 class SharedCursor : public RefCounted&lt;SharedCursor&gt; {
 61 public:
 62     static Ref&lt;SharedCursor&gt; create(HCURSOR);
 63     WEBCORE_EXPORT ~SharedCursor();
 64     HCURSOR nativeCursor() const { return m_nativeCursor; }
 65 
 66 private:
 67     SharedCursor(HCURSOR);
 68     HCURSOR m_nativeCursor;
 69 };
 70 
 71 #endif
 72 
 73 #if PLATFORM(WIN)
 74 using PlatformCursor = RefPtr&lt;SharedCursor&gt;;
<span class="line-modified"> 75 #elif USE(APPKIT)</span>
 76 using PlatformCursor = NSCursor *;
 77 #elif PLATFORM(GTK)
 78 using PlatformCursor = GRefPtr&lt;GdkCursor&gt;;
 79 #elif PLATFORM(JAVA)
 80 using PlatformCursor = jlong;
 81 #else
 82 using PlatformCursor = void*;
 83 #endif
 84 
 85 class Cursor {
 86     WTF_MAKE_FAST_ALLOCATED;
 87 public:
 88     enum Type {
 89         Pointer = 0,
 90         Cross,
 91         Hand,
 92         IBeam,
 93         Wait,
 94         Help,
 95         EastResize,
</pre>
<hr />
<pre>
122         Alias,
123         Progress,
124         NoDrop,
125         Copy,
126         None,
127         NotAllowed,
128         ZoomIn,
129         ZoomOut,
130         Grab,
131         Grabbing,
132         Custom
133     };
134 
135     Cursor() = default;
136 
137 #if PLATFORM(JAVA)
138     explicit Cursor(PlatformCursor);
139     void setPlatformCursor(const Cursor&amp;) const;
140 #endif
141 
<span class="line-removed">142 #if !PLATFORM(IOS_FAMILY)</span>
<span class="line-removed">143 </span>
144     WEBCORE_EXPORT static const Cursor&amp; fromType(Cursor::Type);
145 
146     WEBCORE_EXPORT Cursor(Image*, const IntPoint&amp; hotSpot);
147 
148 #if ENABLE(MOUSE_CURSOR_SCALE)
149     // Hot spot is in image pixels.
150     WEBCORE_EXPORT Cursor(Image*, const IntPoint&amp; hotSpot, float imageScaleFactor);
151 #endif
152 
153     explicit Cursor(Type);
154 
155     Type type() const;
156     Image* image() const { return m_image.get(); }
157     const IntPoint&amp; hotSpot() const { return m_hotSpot; }
158 
159 #if ENABLE(MOUSE_CURSOR_SCALE)
160     // Image scale in image pixels per logical (UI) pixel.
161     float imageScaleFactor() const { return m_imageScaleFactor; }
162 #endif
163 
164     WEBCORE_EXPORT PlatformCursor platformCursor() const;
165 


166 private:
167     void ensurePlatformCursor() const;
168 
169     // The type of -1 indicates an invalid Cursor that should never actually get used.
170     Type m_type { static_cast&lt;Type&gt;(-1) };
171     RefPtr&lt;Image&gt; m_image;
172     IntPoint m_hotSpot;
173 
174 #if ENABLE(MOUSE_CURSOR_SCALE)
175     float m_imageScaleFactor { 1 };
176 #endif
177 
<span class="line-modified">178 #if !USE(APPKIT)</span>
179 #if PLATFORM(JAVA)
180     mutable PlatformCursor m_platformCursor {};
181 #else
182     mutable PlatformCursor m_platformCursor { nullptr };
183 #endif
184 #else
185     mutable RetainPtr&lt;NSCursor&gt; m_platformCursor;
186 #endif
187 
<span class="line-removed">188 #endif // !PLATFORM(IOS_FAMILY)</span>
189 };
190 
191 IntPoint determineHotSpot(Image*, const IntPoint&amp; specifiedHotSpot);
192 
193 WEBCORE_EXPORT const Cursor&amp; pointerCursor();
194 const Cursor&amp; crossCursor();
195 WEBCORE_EXPORT const Cursor&amp; handCursor();
196 const Cursor&amp; moveCursor();
197 WEBCORE_EXPORT const Cursor&amp; iBeamCursor();
198 const Cursor&amp; waitCursor();
199 const Cursor&amp; helpCursor();
200 const Cursor&amp; eastResizeCursor();
201 const Cursor&amp; northResizeCursor();
202 const Cursor&amp; northEastResizeCursor();
203 const Cursor&amp; northWestResizeCursor();
204 const Cursor&amp; southResizeCursor();
205 const Cursor&amp; southEastResizeCursor();
206 const Cursor&amp; southWestResizeCursor();
207 const Cursor&amp; westResizeCursor();
208 const Cursor&amp; northSouthResizeCursor();
</pre>
<hr />
<pre>
217 const Cursor&amp; northEastPanningCursor();
218 const Cursor&amp; northWestPanningCursor();
219 const Cursor&amp; southPanningCursor();
220 const Cursor&amp; southEastPanningCursor();
221 const Cursor&amp; southWestPanningCursor();
222 const Cursor&amp; westPanningCursor();
223 const Cursor&amp; verticalTextCursor();
224 const Cursor&amp; cellCursor();
225 const Cursor&amp; contextMenuCursor();
226 const Cursor&amp; noDropCursor();
227 const Cursor&amp; notAllowedCursor();
228 const Cursor&amp; progressCursor();
229 const Cursor&amp; aliasCursor();
230 const Cursor&amp; zoomInCursor();
231 const Cursor&amp; zoomOutCursor();
232 const Cursor&amp; copyCursor();
233 const Cursor&amp; noneCursor();
234 const Cursor&amp; grabCursor();
235 const Cursor&amp; grabbingCursor();
236 
<span class="line-removed">237 #if !PLATFORM(IOS_FAMILY)</span>
<span class="line-removed">238 </span>
239 inline Cursor::Type Cursor::type() const
240 {
241     ASSERT(m_type &gt;= 0);
242     ASSERT(m_type &lt;= Custom);
243     return m_type;
244 }
245 
<span class="line-removed">246 #endif</span>
<span class="line-removed">247 </span>
248 } // namespace WebCore
</pre>
</td>
<td>
<hr />
<pre>
 25 
 26 #pragma once
 27 
 28 #include &quot;Image.h&quot;
 29 #include &quot;IntPoint.h&quot;
 30 #include &lt;wtf/Assertions.h&gt;
 31 #include &lt;wtf/RefPtr.h&gt;
 32 
 33 #if PLATFORM(WIN)
 34 typedef struct HICON__* HICON;
 35 typedef HICON HCURSOR;
 36 #include &lt;wtf/RefCounted.h&gt;
 37 #elif PLATFORM(COCOA)
 38 #include &lt;wtf/RetainPtr.h&gt;
 39 #elif PLATFORM(GTK)
 40 #include &quot;GRefPtrGtk.h&quot;
 41 #elif PLATFORM(JAVA)
 42 #include &lt;jni.h&gt;
 43 #endif
 44 
<span class="line-modified"> 45 #if HAVE(NSCURSOR)</span>
 46 OBJC_CLASS NSCursor;
 47 #endif
 48 
 49 #if PLATFORM(WIN)
 50 typedef struct HICON__ *HICON;
 51 typedef HICON HCURSOR;
 52 #endif
 53 
 54 namespace WebCore {
 55 
 56 class Image;
 57 
 58 #if PLATFORM(WIN)
 59 
 60 class SharedCursor : public RefCounted&lt;SharedCursor&gt; {
 61 public:
 62     static Ref&lt;SharedCursor&gt; create(HCURSOR);
 63     WEBCORE_EXPORT ~SharedCursor();
 64     HCURSOR nativeCursor() const { return m_nativeCursor; }
 65 
 66 private:
 67     SharedCursor(HCURSOR);
 68     HCURSOR m_nativeCursor;
 69 };
 70 
 71 #endif
 72 
 73 #if PLATFORM(WIN)
 74 using PlatformCursor = RefPtr&lt;SharedCursor&gt;;
<span class="line-modified"> 75 #elif HAVE(NSCURSOR)</span>
 76 using PlatformCursor = NSCursor *;
 77 #elif PLATFORM(GTK)
 78 using PlatformCursor = GRefPtr&lt;GdkCursor&gt;;
 79 #elif PLATFORM(JAVA)
 80 using PlatformCursor = jlong;
 81 #else
 82 using PlatformCursor = void*;
 83 #endif
 84 
 85 class Cursor {
 86     WTF_MAKE_FAST_ALLOCATED;
 87 public:
 88     enum Type {
 89         Pointer = 0,
 90         Cross,
 91         Hand,
 92         IBeam,
 93         Wait,
 94         Help,
 95         EastResize,
</pre>
<hr />
<pre>
122         Alias,
123         Progress,
124         NoDrop,
125         Copy,
126         None,
127         NotAllowed,
128         ZoomIn,
129         ZoomOut,
130         Grab,
131         Grabbing,
132         Custom
133     };
134 
135     Cursor() = default;
136 
137 #if PLATFORM(JAVA)
138     explicit Cursor(PlatformCursor);
139     void setPlatformCursor(const Cursor&amp;) const;
140 #endif
141 


142     WEBCORE_EXPORT static const Cursor&amp; fromType(Cursor::Type);
143 
144     WEBCORE_EXPORT Cursor(Image*, const IntPoint&amp; hotSpot);
145 
146 #if ENABLE(MOUSE_CURSOR_SCALE)
147     // Hot spot is in image pixels.
148     WEBCORE_EXPORT Cursor(Image*, const IntPoint&amp; hotSpot, float imageScaleFactor);
149 #endif
150 
151     explicit Cursor(Type);
152 
153     Type type() const;
154     Image* image() const { return m_image.get(); }
155     const IntPoint&amp; hotSpot() const { return m_hotSpot; }
156 
157 #if ENABLE(MOUSE_CURSOR_SCALE)
158     // Image scale in image pixels per logical (UI) pixel.
159     float imageScaleFactor() const { return m_imageScaleFactor; }
160 #endif
161 
162     WEBCORE_EXPORT PlatformCursor platformCursor() const;
163 
<span class="line-added">164     WEBCORE_EXPORT void setAsPlatformCursor() const;</span>
<span class="line-added">165 </span>
166 private:
167     void ensurePlatformCursor() const;
168 
169     // The type of -1 indicates an invalid Cursor that should never actually get used.
170     Type m_type { static_cast&lt;Type&gt;(-1) };
171     RefPtr&lt;Image&gt; m_image;
172     IntPoint m_hotSpot;
173 
174 #if ENABLE(MOUSE_CURSOR_SCALE)
175     float m_imageScaleFactor { 1 };
176 #endif
177 
<span class="line-modified">178 #if !HAVE(NSCURSOR)</span>
179 #if PLATFORM(JAVA)
180     mutable PlatformCursor m_platformCursor {};
181 #else
182     mutable PlatformCursor m_platformCursor { nullptr };
183 #endif
184 #else
185     mutable RetainPtr&lt;NSCursor&gt; m_platformCursor;
186 #endif
187 

188 };
189 
190 IntPoint determineHotSpot(Image*, const IntPoint&amp; specifiedHotSpot);
191 
192 WEBCORE_EXPORT const Cursor&amp; pointerCursor();
193 const Cursor&amp; crossCursor();
194 WEBCORE_EXPORT const Cursor&amp; handCursor();
195 const Cursor&amp; moveCursor();
196 WEBCORE_EXPORT const Cursor&amp; iBeamCursor();
197 const Cursor&amp; waitCursor();
198 const Cursor&amp; helpCursor();
199 const Cursor&amp; eastResizeCursor();
200 const Cursor&amp; northResizeCursor();
201 const Cursor&amp; northEastResizeCursor();
202 const Cursor&amp; northWestResizeCursor();
203 const Cursor&amp; southResizeCursor();
204 const Cursor&amp; southEastResizeCursor();
205 const Cursor&amp; southWestResizeCursor();
206 const Cursor&amp; westResizeCursor();
207 const Cursor&amp; northSouthResizeCursor();
</pre>
<hr />
<pre>
216 const Cursor&amp; northEastPanningCursor();
217 const Cursor&amp; northWestPanningCursor();
218 const Cursor&amp; southPanningCursor();
219 const Cursor&amp; southEastPanningCursor();
220 const Cursor&amp; southWestPanningCursor();
221 const Cursor&amp; westPanningCursor();
222 const Cursor&amp; verticalTextCursor();
223 const Cursor&amp; cellCursor();
224 const Cursor&amp; contextMenuCursor();
225 const Cursor&amp; noDropCursor();
226 const Cursor&amp; notAllowedCursor();
227 const Cursor&amp; progressCursor();
228 const Cursor&amp; aliasCursor();
229 const Cursor&amp; zoomInCursor();
230 const Cursor&amp; zoomOutCursor();
231 const Cursor&amp; copyCursor();
232 const Cursor&amp; noneCursor();
233 const Cursor&amp; grabCursor();
234 const Cursor&amp; grabbingCursor();
235 


236 inline Cursor::Type Cursor::type() const
237 {
238     ASSERT(m_type &gt;= 0);
239     ASSERT(m_type &lt;= Custom);
240     return m_type;
241 }
242 


243 } // namespace WebCore
</pre>
</td>
</tr>
</table>
<center><a href="Cursor.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DateComponents.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>