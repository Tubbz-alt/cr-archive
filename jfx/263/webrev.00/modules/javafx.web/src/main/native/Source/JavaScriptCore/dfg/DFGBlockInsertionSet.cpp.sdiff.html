<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/dfg/DFGBlockInsertionSet.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DFGBasicBlock.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DFGByteCodeParser.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/dfg/DFGBlockInsertionSet.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 34 
 35 BlockInsertionSet::BlockInsertionSet(Graph&amp; graph)
 36     : m_graph(graph)
 37 {
 38 }
 39 
 40 BlockInsertionSet::~BlockInsertionSet() { }
 41 
 42 void BlockInsertionSet::insert(const BlockInsertion&amp; insertion)
 43 {
 44     m_insertions.append(insertion);
 45 }
 46 
 47 void BlockInsertionSet::insert(size_t index, Ref&lt;BasicBlock&gt;&amp;&amp; block)
 48 {
 49     insert(BlockInsertion(index, WTFMove(block)));
 50 }
 51 
 52 BasicBlock* BlockInsertionSet::insert(size_t index, float executionCount)
 53 {
<span class="line-modified"> 54     Ref&lt;BasicBlock&gt; block = adoptRef(*new BasicBlock(</span>
<span class="line-removed"> 55         UINT_MAX,</span>
<span class="line-removed"> 56         m_graph.block(0)-&gt;variablesAtHead.numberOfArguments(),</span>
<span class="line-removed"> 57         m_graph.block(0)-&gt;variablesAtHead.numberOfLocals(),</span>
<span class="line-removed"> 58         executionCount));</span>
 59     block-&gt;isReachable = true;
 60     auto* result = block.ptr();
 61     insert(index, WTFMove(block));
 62     return result;
 63 }
 64 
 65 BasicBlock* BlockInsertionSet::insertBefore(BasicBlock* before, float executionCount)
 66 {
 67     return insert(before-&gt;index, executionCount);
 68 }
 69 
 70 bool BlockInsertionSet::execute()
 71 {
 72     if (m_insertions.isEmpty())
 73         return false;
 74 
 75     // We allow insertions to be given to us in any order. So, we need to sort them before
 76     // running WTF::executeInsertions. Also, we don&#39;t really care if the sort is stable since
 77     // basic block order doesn&#39;t have semantics - it&#39;s just to make code easier to read.
 78     std::sort(m_insertions.begin(), m_insertions.end());
</pre>
</td>
<td>
<hr />
<pre>
 34 
 35 BlockInsertionSet::BlockInsertionSet(Graph&amp; graph)
 36     : m_graph(graph)
 37 {
 38 }
 39 
 40 BlockInsertionSet::~BlockInsertionSet() { }
 41 
 42 void BlockInsertionSet::insert(const BlockInsertion&amp; insertion)
 43 {
 44     m_insertions.append(insertion);
 45 }
 46 
 47 void BlockInsertionSet::insert(size_t index, Ref&lt;BasicBlock&gt;&amp;&amp; block)
 48 {
 49     insert(BlockInsertion(index, WTFMove(block)));
 50 }
 51 
 52 BasicBlock* BlockInsertionSet::insert(size_t index, float executionCount)
 53 {
<span class="line-modified"> 54     Ref&lt;BasicBlock&gt; block = adoptRef(*new BasicBlock(BytecodeIndex(), m_graph.block(0)-&gt;variablesAtHead.numberOfArguments(), m_graph.block(0)-&gt;variablesAtHead.numberOfLocals(), m_graph.block(0)-&gt;variablesAtHead.numberOfTmps(), executionCount));</span>




 55     block-&gt;isReachable = true;
 56     auto* result = block.ptr();
 57     insert(index, WTFMove(block));
 58     return result;
 59 }
 60 
 61 BasicBlock* BlockInsertionSet::insertBefore(BasicBlock* before, float executionCount)
 62 {
 63     return insert(before-&gt;index, executionCount);
 64 }
 65 
 66 bool BlockInsertionSet::execute()
 67 {
 68     if (m_insertions.isEmpty())
 69         return false;
 70 
 71     // We allow insertions to be given to us in any order. So, we need to sort them before
 72     // running WTF::executeInsertions. Also, we don&#39;t really care if the sort is stable since
 73     // basic block order doesn&#39;t have semantics - it&#39;s just to make code easier to read.
 74     std::sort(m_insertions.begin(), m_insertions.end());
</pre>
</td>
</tr>
</table>
<center><a href="DFGBasicBlock.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DFGByteCodeParser.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>