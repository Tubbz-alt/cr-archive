<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/mediastream/RealtimeMediaSource.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="RealtimeMediaSource.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="RealtimeMediaSourceCenter.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/mediastream/RealtimeMediaSource.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
166     using ApplyConstraintsHandler = CompletionHandler&lt;void(Optional&lt;ApplyConstraintsError&gt;&amp;&amp;)&gt;;
167     virtual void applyConstraints(const MediaConstraints&amp;, ApplyConstraintsHandler&amp;&amp;);
168     Optional&lt;ApplyConstraintsError&gt; applyConstraints(const MediaConstraints&amp;);
169 
170     bool supportsConstraints(const MediaConstraints&amp;, String&amp;);
171     bool supportsConstraint(const MediaConstraint&amp;);
172 
173     virtual bool isIsolated() const { return false; }
174 
175     virtual bool isMockSource() const { return false; }
176     virtual bool isCaptureSource() const { return false; }
177     virtual CaptureDevice::DeviceType deviceType() const { return CaptureDevice::DeviceType::Unknown; }
178 
179     virtual void monitorOrientation(OrientationNotifier&amp;) { }
180 
181     virtual void captureFailed();
182 
183     virtual bool isIncomingAudioSource() const { return false; }
184     virtual bool isIncomingVideoSource() const { return false; }
185 
<span class="line-removed">186     void setIsRemote(bool isRemote) { m_isRemote = isRemote; }</span>
<span class="line-removed">187     bool isRemote() const { return m_isRemote; }</span>
<span class="line-removed">188 </span>
189 #if !RELEASE_LOG_DISABLED
190     void setLogger(const Logger&amp;, const void*);
191     const Logger* loggerPtr() const { return m_logger.get(); }
192     const Logger&amp; logger() const final { ASSERT(m_logger); return *m_logger.get(); }
193     const void* logIdentifier() const final { return m_logIdentifier; }
194     const char* logClassName() const override { return &quot;RealtimeMediaSource&quot;; }
195     WTFLogChannel&amp; logChannel() const final;
196 #endif
197 
198     // Testing only
199     virtual void delaySamples(Seconds) { };
200     void setInterruptedForTesting(bool);
201 
202 protected:
203     RealtimeMediaSource(Type, String&amp;&amp; name, String&amp;&amp; deviceID = { }, String&amp;&amp; hashSalt = { });
204 
205     void scheduleDeferredTask(WTF::Function&lt;void()&gt;&amp;&amp;);
206 
207     virtual void beginConfiguration() { }
208     virtual void commitConfiguration() { }
</pre>
<hr />
<pre>
251     Type m_type;
252     String m_name;
253     mutable RecursiveLock m_observersLock;
254     HashSet&lt;Observer*&gt; m_observers;
255     IntSize m_size;
256     IntSize m_intrinsicSize;
257     double m_frameRate { 30 };
258     double m_aspectRatio { 0 };
259     double m_volume { 1 };
260     double m_sampleRate { 0 };
261     double m_sampleSize { 0 };
262     double m_fitnessScore { 0 };
263     RealtimeMediaSourceSettings::VideoFacingMode m_facingMode { RealtimeMediaSourceSettings::User};
264 
265     bool m_muted { false };
266     bool m_pendingSettingsDidChangeNotification { false };
267     bool m_echoCancellation { false };
268     bool m_isProducingData { false };
269     bool m_interrupted { false };
270     bool m_captureDidFailed { false };
<span class="line-removed">271     bool m_isRemote { false };</span>
272     bool m_isEnded { false };
273 };
274 
275 struct CaptureSourceOrError {
276     CaptureSourceOrError() = default;
277     CaptureSourceOrError(Ref&lt;RealtimeMediaSource&gt;&amp;&amp; source) : captureSource(WTFMove(source)) { }
278     CaptureSourceOrError(String&amp;&amp; message) : errorMessage(WTFMove(message)) { }
279 
280     operator bool()  const { return !!captureSource; }
281     Ref&lt;RealtimeMediaSource&gt; source() { return captureSource.releaseNonNull(); }
282 
283     RefPtr&lt;RealtimeMediaSource&gt; captureSource;
284     String errorMessage;
285 };
286 
287 String convertEnumerationToString(RealtimeMediaSource::Type);
288 
289 } // namespace WebCore
290 
291 namespace WTF {
</pre>
</td>
<td>
<hr />
<pre>
166     using ApplyConstraintsHandler = CompletionHandler&lt;void(Optional&lt;ApplyConstraintsError&gt;&amp;&amp;)&gt;;
167     virtual void applyConstraints(const MediaConstraints&amp;, ApplyConstraintsHandler&amp;&amp;);
168     Optional&lt;ApplyConstraintsError&gt; applyConstraints(const MediaConstraints&amp;);
169 
170     bool supportsConstraints(const MediaConstraints&amp;, String&amp;);
171     bool supportsConstraint(const MediaConstraint&amp;);
172 
173     virtual bool isIsolated() const { return false; }
174 
175     virtual bool isMockSource() const { return false; }
176     virtual bool isCaptureSource() const { return false; }
177     virtual CaptureDevice::DeviceType deviceType() const { return CaptureDevice::DeviceType::Unknown; }
178 
179     virtual void monitorOrientation(OrientationNotifier&amp;) { }
180 
181     virtual void captureFailed();
182 
183     virtual bool isIncomingAudioSource() const { return false; }
184     virtual bool isIncomingVideoSource() const { return false; }
185 



186 #if !RELEASE_LOG_DISABLED
187     void setLogger(const Logger&amp;, const void*);
188     const Logger* loggerPtr() const { return m_logger.get(); }
189     const Logger&amp; logger() const final { ASSERT(m_logger); return *m_logger.get(); }
190     const void* logIdentifier() const final { return m_logIdentifier; }
191     const char* logClassName() const override { return &quot;RealtimeMediaSource&quot;; }
192     WTFLogChannel&amp; logChannel() const final;
193 #endif
194 
195     // Testing only
196     virtual void delaySamples(Seconds) { };
197     void setInterruptedForTesting(bool);
198 
199 protected:
200     RealtimeMediaSource(Type, String&amp;&amp; name, String&amp;&amp; deviceID = { }, String&amp;&amp; hashSalt = { });
201 
202     void scheduleDeferredTask(WTF::Function&lt;void()&gt;&amp;&amp;);
203 
204     virtual void beginConfiguration() { }
205     virtual void commitConfiguration() { }
</pre>
<hr />
<pre>
248     Type m_type;
249     String m_name;
250     mutable RecursiveLock m_observersLock;
251     HashSet&lt;Observer*&gt; m_observers;
252     IntSize m_size;
253     IntSize m_intrinsicSize;
254     double m_frameRate { 30 };
255     double m_aspectRatio { 0 };
256     double m_volume { 1 };
257     double m_sampleRate { 0 };
258     double m_sampleSize { 0 };
259     double m_fitnessScore { 0 };
260     RealtimeMediaSourceSettings::VideoFacingMode m_facingMode { RealtimeMediaSourceSettings::User};
261 
262     bool m_muted { false };
263     bool m_pendingSettingsDidChangeNotification { false };
264     bool m_echoCancellation { false };
265     bool m_isProducingData { false };
266     bool m_interrupted { false };
267     bool m_captureDidFailed { false };

268     bool m_isEnded { false };
269 };
270 
271 struct CaptureSourceOrError {
272     CaptureSourceOrError() = default;
273     CaptureSourceOrError(Ref&lt;RealtimeMediaSource&gt;&amp;&amp; source) : captureSource(WTFMove(source)) { }
274     CaptureSourceOrError(String&amp;&amp; message) : errorMessage(WTFMove(message)) { }
275 
276     operator bool()  const { return !!captureSource; }
277     Ref&lt;RealtimeMediaSource&gt; source() { return captureSource.releaseNonNull(); }
278 
279     RefPtr&lt;RealtimeMediaSource&gt; captureSource;
280     String errorMessage;
281 };
282 
283 String convertEnumerationToString(RealtimeMediaSource::Type);
284 
285 } // namespace WebCore
286 
287 namespace WTF {
</pre>
</td>
</tr>
</table>
<center><a href="RealtimeMediaSource.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="RealtimeMediaSourceCenter.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>