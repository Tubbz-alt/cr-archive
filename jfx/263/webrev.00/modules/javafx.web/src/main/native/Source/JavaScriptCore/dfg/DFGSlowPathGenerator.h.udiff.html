<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/JavaScriptCore/dfg/DFGSlowPathGenerator.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DFGScoreBoard.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DFGSpeculativeJIT.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/dfg/DFGSlowPathGenerator.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -50,11 +50,11 @@</span>
          jit-&gt;m_currentNode = m_currentNode;
          jit-&gt;m_outOfLineStreamIndex = m_streamIndex;
          jit-&gt;m_origin = m_origin;
          generateInternal(jit);
          jit-&gt;m_outOfLineStreamIndex = WTF::nullopt;
<span class="udiff-line-modified-removed">-         if (!ASSERT_DISABLED)</span>
<span class="udiff-line-modified-added">+         if (ASSERT_ENABLED)</span>
              jit-&gt;m_jit.abortWithReason(DFGSlowPathGeneratorFellThrough);
      }
      MacroAssembler::Label label() const { return m_label; }
      virtual MacroAssembler::Call call() const
      {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -100,21 +100,20 @@</span>
  enum class ExceptionCheckRequirement : uint8_t {
      CheckNeeded,
      CheckNotNeeded
  };
  
<span class="udiff-line-modified-removed">- template&lt;typename JumpType, typename FunctionType, typename ResultType&gt;</span>
<span class="udiff-line-modified-added">+ template&lt;typename JumpType, typename ResultType&gt;</span>
  class CallSlowPathGenerator : public JumpingSlowPathGenerator&lt;JumpType&gt; {
  public:
      CallSlowPathGenerator(
<span class="udiff-line-modified-removed">-         JumpType from, SpeculativeJIT* jit, FunctionType function,</span>
<span class="udiff-line-modified-added">+         JumpType from, SpeculativeJIT* jit,</span>
          SpillRegistersMode spillMode, ExceptionCheckRequirement requirement, ResultType result)
          : JumpingSlowPathGenerator&lt;JumpType&gt;(from, jit)
          , m_spillMode(spillMode)
          , m_exceptionCheckRequirement(requirement)
          , m_result(result)
<span class="udiff-line-removed">-         , m_function(function)</span>
      {
          if (m_spillMode == NeedToSpill)
              jit-&gt;silentSpillAllRegistersImpl(false, m_plans, extractResult(result));
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -151,41 +150,44 @@</span>
  
      MacroAssembler::Call m_call;
      SpillRegistersMode m_spillMode;
      ExceptionCheckRequirement m_exceptionCheckRequirement;
      ResultType m_result;
<span class="udiff-line-removed">-     FunctionType m_function;</span>
      Vector&lt;SilentRegisterSavePlan, 2&gt; m_plans;
  };
  
  template&lt;typename JumpType, typename FunctionType, typename ResultType, typename... Arguments&gt;
  class CallResultAndArgumentsSlowPathGenerator
<span class="udiff-line-modified-removed">-     : public CallSlowPathGenerator&lt;JumpType, FunctionType, ResultType&gt; {</span>
<span class="udiff-line-modified-added">+     : public CallSlowPathGenerator&lt;JumpType, ResultType&gt; {</span>
  public:
      CallResultAndArgumentsSlowPathGenerator(
          JumpType from, SpeculativeJIT* jit, FunctionType function,
          SpillRegistersMode spillMode, ExceptionCheckRequirement requirement, ResultType result, Arguments... arguments)
<span class="udiff-line-modified-removed">-         : CallSlowPathGenerator&lt;JumpType, FunctionType, ResultType&gt;(</span>
<span class="udiff-line-modified-removed">-             from, jit, function, spillMode, requirement, result)</span>
<span class="udiff-line-modified-added">+         : CallSlowPathGenerator&lt;JumpType, ResultType&gt;(from, jit, spillMode, requirement, result)</span>
<span class="udiff-line-modified-added">+         , m_function(function)</span>
          , m_arguments(std::forward&lt;Arguments&gt;(arguments)...)
      {
      }
  
  protected:
      template&lt;size_t... ArgumentsIndex&gt;
      void unpackAndGenerate(SpeculativeJIT* jit, std::index_sequence&lt;ArgumentsIndex...&gt;)
      {
          this-&gt;setUp(jit);
<span class="udiff-line-modified-removed">-         this-&gt;recordCall(jit-&gt;callOperation(this-&gt;m_function, extractResult(this-&gt;m_result), std::get&lt;ArgumentsIndex&gt;(m_arguments)...));</span>
<span class="udiff-line-modified-added">+         if constexpr (std::is_same&lt;ResultType, NoResultTag&gt;::value)</span>
<span class="udiff-line-added">+             this-&gt;recordCall(jit-&gt;callOperation(this-&gt;m_function, std::get&lt;ArgumentsIndex&gt;(m_arguments)...));</span>
<span class="udiff-line-added">+         else</span>
<span class="udiff-line-added">+             this-&gt;recordCall(jit-&gt;callOperation(this-&gt;m_function, extractResult(this-&gt;m_result), std::get&lt;ArgumentsIndex&gt;(m_arguments)...));</span>
          this-&gt;tearDown(jit);
      }
  
      void generateInternal(SpeculativeJIT* jit) override
      {
          unpackAndGenerate(jit, std::make_index_sequence&lt;std::tuple_size&lt;std::tuple&lt;Arguments...&gt;&gt;::value&gt;());
      }
  
<span class="udiff-line-added">+     FunctionType m_function;</span>
      std::tuple&lt;Arguments...&gt; m_arguments;
  };
  
  template&lt;typename JumpType, typename FunctionType, typename ResultType, typename... Arguments&gt;
  inline std::unique_ptr&lt;SlowPathGenerator&gt; slowPathCall(
</pre>
<center><a href="DFGScoreBoard.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="DFGSpeculativeJIT.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>