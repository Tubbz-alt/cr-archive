<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/cmake/FindHarfBuzz.cmake</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="FindFontconfig.cmake.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="FindLibEpoxy.cmake.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/cmake/FindHarfBuzz.cmake</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,6 +1,7 @@</span>
  # Copyright (c) 2012, Intel Corporation
<span class="udiff-line-added">+ # Copyright (c) 2019 Sony Interactive Entertainment Inc.</span>
  #
  # Redistribution and use in source and binary forms, with or without
  # modification, are permitted provided that the following conditions are met:
  #
  # * Redistributions of source code must retain the above copyright notice, this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -25,61 +26,155 @@</span>
  # POSSIBILITY OF SUCH DAMAGE.
  #
  # Try to find Harfbuzz include and library directories.
  #
  # After successful discovery, this will set for inclusion where needed:
<span class="udiff-line-modified-removed">- # HARFBUZZ_INCLUDE_DIRS - containg the HarfBuzz headers</span>
<span class="udiff-line-modified-removed">- # HARFBUZZ_LIBRARIES - containg the HarfBuzz library</span>
<span class="udiff-line-modified-added">+ # HarfBuzz_INCLUDE_DIRS - containg the HarfBuzz headers</span>
<span class="udiff-line-modified-added">+ # HarfBuzz_LIBRARIES - containg the HarfBuzz library</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ #[=======================================================================[.rst:</span>
<span class="udiff-line-added">+ FindHarfBuzz</span>
<span class="udiff-line-added">+ --------------</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ Find HarfBuzz headers and libraries.</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ Imported Targets</span>
<span class="udiff-line-added">+ ^^^^^^^^^^^^^^^^</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ ``HarfBuzz::HarfBuzz``</span>
<span class="udiff-line-added">+   The HarfBuzz library, if found.</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ ``HarfBuzz::ICU``</span>
<span class="udiff-line-added">+   The HarfBuzz ICU library, if found.</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ Result Variables</span>
<span class="udiff-line-added">+ ^^^^^^^^^^^^^^^^</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ This will define the following variables in your project:</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ ``HarfBuzz_FOUND``</span>
<span class="udiff-line-added">+   true if (the requested version of) HarfBuzz is available.</span>
<span class="udiff-line-added">+ ``HarfBuzz_VERSION``</span>
<span class="udiff-line-added">+   the version of HarfBuzz.</span>
<span class="udiff-line-added">+ ``HarfBuzz_LIBRARIES``</span>
<span class="udiff-line-added">+   the libraries to link against to use HarfBuzz.</span>
<span class="udiff-line-added">+ ``HarfBuzz_INCLUDE_DIRS``</span>
<span class="udiff-line-added">+   where to find the HarfBuzz headers.</span>
<span class="udiff-line-added">+ ``HarfBuzz_COMPILE_OPTIONS``</span>
<span class="udiff-line-added">+   this should be passed to target_compile_options(), if the</span>
<span class="udiff-line-added">+   target is not used for linking</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ #]=======================================================================]</span>
  
  include(FindPkgConfig)
  pkg_check_modules(PC_HARFBUZZ QUIET harfbuzz)
<span class="udiff-line-added">+ set(HarfBuzz_COMPILE_OPTIONS ${PC_HARFBUZZ_CFLAGS_OTHER})</span>
<span class="udiff-line-added">+ set(HarfBuzz_VERSION ${PC_HARFBUZZ_CFLAGS_VERSION})</span>
  
<span class="udiff-line-modified-removed">- find_path(HARFBUZZ_INCLUDE_DIRS</span>
<span class="udiff-line-modified-added">+ find_path(HarfBuzz_INCLUDE_DIR</span>
      NAMES hb.h
<span class="udiff-line-modified-removed">-     HINTS ${PC_HARFBUZZ_INCLUDEDIR}</span>
<span class="udiff-line-removed">-           ${PC_HARFBUZZ_INCLUDE_DIRS}</span>
<span class="udiff-line-modified-added">+     HINTS ${PC_HARFBUZZ_INCLUDEDIR} ${PC_HARFBUZZ_INCLUDE_DIRS}</span>
      PATH_SUFFIXES harfbuzz
  )
  
<span class="udiff-line-modified-removed">- find_library(HARFBUZZ_LIBRARIES NAMES harfbuzz</span>
<span class="udiff-line-modified-removed">-     HINTS ${PC_HARFBUZZ_LIBDIR}</span>
<span class="udiff-line-modified-removed">-           ${PC_HARFBUZZ_LIBRARY_DIRS}</span>
<span class="udiff-line-modified-added">+ find_library(HarfBuzz_LIBRARY</span>
<span class="udiff-line-modified-added">+     NAMES ${HarfBuzz_NAMES} harfbuzz</span>
<span class="udiff-line-modified-added">+     HINTS ${PC_HARFBUZZ_LIBDIR} ${PC_HARFBUZZ_LIBRARY_DIRS}</span>
  )
  
<span class="udiff-line-modified-removed">- if (HARFBUZZ_INCLUDE_DIRS)</span>
<span class="udiff-line-modified-removed">-     if (EXISTS &quot;${HARFBUZZ_INCLUDE_DIRS}/hb-version.h&quot;)</span>
<span class="udiff-line-modified-removed">-         file(READ &quot;${HARFBUZZ_INCLUDE_DIRS}/hb-version.h&quot; _harfbuzz_version_content)</span>
<span class="udiff-line-modified-added">+ if (HarfBuzz_INCLUDE_DIR AND NOT HarfBuzz_VERSION)</span>
<span class="udiff-line-modified-added">+     if (EXISTS &quot;${HarfBuzz_INCLUDE_DIR}/hb-version.h&quot;)</span>
<span class="udiff-line-modified-added">+         file(READ &quot;${HarfBuzz_INCLUDE_DIR}/hb-version.h&quot; _harfbuzz_version_content)</span>
  
          string(REGEX MATCH &quot;#define +HB_VERSION_STRING +\&quot;([0-9]+\.[0-9]+\.[0-9]+)\&quot;&quot; _dummy &quot;${_harfbuzz_version_content}&quot;)
<span class="udiff-line-modified-removed">-         set(HARFBUZZ_VERSION &quot;${CMAKE_MATCH_1}&quot;)</span>
<span class="udiff-line-modified-added">+         set(HarfBuzz_VERSION &quot;${CMAKE_MATCH_1}&quot;)</span>
      endif ()
  endif ()
  
<span class="udiff-line-modified-removed">- if (&quot;${Harfbuzz_FIND_VERSION}&quot; VERSION_GREATER &quot;${HARFBUZZ_VERSION}&quot;)</span>
<span class="udiff-line-modified-removed">-     message(FATAL_ERROR &quot;Required version (&quot; ${Harfbuzz_FIND_VERSION} &quot;) is higher than found version (&quot; ${CAIRO_VERSION} &quot;)&quot;)</span>
<span class="udiff-line-modified-added">+ if (&quot;${HarfBuzz_FIND_VERSION}&quot; VERSION_GREATER &quot;${HarfBuzz_VERSION}&quot;)</span>
<span class="udiff-line-modified-added">+     message(FATAL_ERROR &quot;Required version (&quot; ${HarfBuzz_FIND_VERSION} &quot;) is higher than found version (&quot; ${HarfBuzz_VERSION} &quot;)&quot;)</span>
  endif ()
  
<span class="udiff-line-modified-removed">- # HarfBuzz 0.9.18 split ICU support into a separate harfbuzz-icu library.</span>
<span class="udiff-line-modified-removed">- if (&quot;${HARFBUZZ_VERSION}&quot; VERSION_GREATER &quot;0.9.17&quot;)</span>
<span class="udiff-line-modified-added">+ # Find components</span>
<span class="udiff-line-modified-added">+ if (HarfBuzz_INCLUDE_DIR AND HarfBuzz_LIBRARY)</span>
<span class="udiff-line-added">+     set(_HarfBuzz_REQUIRED_LIBS_FOUND ON)</span>
<span class="udiff-line-added">+     set(HarfBuzz_LIBS_FOUND &quot;HarfBuzz (required): ${HarfBuzz_LIBRARY}&quot;)</span>
<span class="udiff-line-added">+ else ()</span>
<span class="udiff-line-added">+     set(_HarfBuzz_REQUIRED_LIBS_FOUND OFF)</span>
<span class="udiff-line-added">+     set(HarfBuzz_LIBS_NOT_FOUND &quot;HarfBuzz (required)&quot;)</span>
<span class="udiff-line-added">+ endif ()</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ if (&quot;ICU&quot; IN_LIST HarfBuzz_FIND_COMPONENTS)</span>
      pkg_check_modules(PC_HARFBUZZ_ICU QUIET harfbuzz-icu)
<span class="udiff-line-added">+     set(HarfBuzz_ICU_COMPILE_OPTIONS ${PC_HARFBUZZ_ICU_CFLAGS_OTHER})</span>
  
<span class="udiff-line-modified-removed">-     find_library(HARFBUZZ_ICU_LIBRARIES harfbuzz-icu</span>
<span class="udiff-line-modified-removed">-         HINTS ${PC_HARFBUZZ_ICU_LIBDIR}</span>
<span class="udiff-line-modified-removed">-               ${PC_HARFBUZZ_ICU_LIBRARY_DIRS}</span>
<span class="udiff-line-modified-added">+     find_library(HarfBuzz_ICU_LIBRARY</span>
<span class="udiff-line-modified-added">+         NAMES ${HarfBuzz_ICU_NAMES} harfbuzz-icu</span>
<span class="udiff-line-modified-added">+         HINTS ${PC_HARFBUZZ_ICU_LIBDIR} ${PC_HARFBUZZ_ICU_LIBRARY_DIRS}</span>
      )
  
<span class="udiff-line-modified-removed">-     if (NOT HARFBUZZ_ICU_LIBRARIES)</span>
<span class="udiff-line-modified-removed">-         message(FATAL_ERROR &quot;harfbuzz-icu library not found&quot;)</span>
<span class="udiff-line-modified-added">+     if (HarfBuzz_ICU_LIBRARY)</span>
<span class="udiff-line-modified-added">+         if (HarfBuzz_FIND_REQUIRED_ICU)</span>
<span class="udiff-line-added">+             list(APPEND HarfBuzz_LIBS_FOUND &quot;ICU (required): ${HarfBuzz_ICU_LIBRARY}&quot;)</span>
<span class="udiff-line-added">+         else ()</span>
<span class="udiff-line-added">+            list(APPEND HarfBuzz_LIBS_FOUND &quot;ICU (optional): ${HarfBuzz_ICU_LIBRARY}&quot;)</span>
<span class="udiff-line-added">+         endif ()</span>
<span class="udiff-line-added">+     else ()</span>
<span class="udiff-line-added">+         if (HarfBuzz_FIND_REQUIRED_ICU)</span>
<span class="udiff-line-added">+            set(_HarfBuzz_REQUIRED_LIBS_FOUND OFF)</span>
<span class="udiff-line-added">+            list(APPEND HarfBuzz_LIBS_NOT_FOUND &quot;ICU (required)&quot;)</span>
<span class="udiff-line-added">+         else ()</span>
<span class="udiff-line-added">+            list(APPEND HarfBuzz_LIBS_NOT_FOUND &quot;ICU (optional)&quot;)</span>
<span class="udiff-line-added">+         endif ()</span>
      endif ()
<span class="udiff-line-added">+ endif ()</span>
  
<span class="udiff-line-modified-removed">-     list(APPEND HARFBUZZ_LIBRARIES &quot;${HARFBUZZ_ICU_LIBRARIES}&quot;)</span>
<span class="udiff-line-modified-added">+ if (NOT HarfBuzz_FIND_QUIETLY)</span>
<span class="udiff-line-added">+     if (HarfBuzz_LIBS_FOUND)</span>
<span class="udiff-line-added">+         message(STATUS &quot;Found the following HarfBuzz libraries:&quot;)</span>
<span class="udiff-line-added">+         foreach (found ${HarfBuzz_LIBS_FOUND})</span>
<span class="udiff-line-added">+             message(STATUS &quot; ${found}&quot;)</span>
<span class="udiff-line-added">+         endforeach ()</span>
<span class="udiff-line-added">+     endif ()</span>
<span class="udiff-line-added">+     if (HarfBuzz_LIBS_NOT_FOUND)</span>
<span class="udiff-line-added">+         message(STATUS &quot;The following HarfBuzz libraries were not found:&quot;)</span>
<span class="udiff-line-added">+         foreach (found ${HarfBuzz_LIBS_NOT_FOUND})</span>
<span class="udiff-line-added">+             message(STATUS &quot; ${found}&quot;)</span>
<span class="udiff-line-added">+         endforeach ()</span>
<span class="udiff-line-added">+     endif ()</span>
  endif ()
  
  include(FindPackageHandleStandardArgs)
<span class="udiff-line-modified-removed">- FIND_PACKAGE_HANDLE_STANDARD_ARGS(Harfbuzz REQUIRED_VARS HARFBUZZ_INCLUDE_DIRS HARFBUZZ_LIBRARIES</span>
<span class="udiff-line-modified-removed">-                                            VERSION_VAR HARFBUZZ_VERSION)</span>
<span class="udiff-line-modified-added">+ find_package_handle_standard_args(HarfBuzz</span>
<span class="udiff-line-modified-added">+     FOUND_VAR HarfBuzz_FOUND</span>
<span class="udiff-line-added">+     REQUIRED_VARS HarfBuzz_INCLUDE_DIR HarfBuzz_LIBRARY _HarfBuzz_REQUIRED_LIBS_FOUND</span>
<span class="udiff-line-added">+     VERSION_VAR HarfBuzz_VERSION</span>
<span class="udiff-line-added">+ )</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ if (HarfBuzz_LIBRARY AND NOT TARGET HarfBuzz::HarfBuzz)</span>
<span class="udiff-line-added">+     add_library(HarfBuzz::HarfBuzz UNKNOWN IMPORTED GLOBAL)</span>
<span class="udiff-line-added">+     set_target_properties(HarfBuzz::HarfBuzz PROPERTIES</span>
<span class="udiff-line-added">+         IMPORTED_LOCATION &quot;${HarfBuzz_LIBRARY}&quot;</span>
<span class="udiff-line-added">+         INTERFACE_COMPILE_OPTIONS &quot;${HarfBuzz_COMPILE_OPTIONS}&quot;</span>
<span class="udiff-line-added">+         INTERFACE_INCLUDE_DIRECTORIES &quot;${HarfBuzz_INCLUDE_DIR}&quot;</span>
<span class="udiff-line-added">+     )</span>
<span class="udiff-line-added">+ endif ()</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ if (HarfBuzz_ICU_LIBRARY AND NOT TARGET HarfBuzz::ICU)</span>
<span class="udiff-line-added">+     add_library(HarfBuzz::ICU UNKNOWN IMPORTED GLOBAL)</span>
<span class="udiff-line-added">+     set_target_properties(HarfBuzz::ICU PROPERTIES</span>
<span class="udiff-line-added">+         IMPORTED_LOCATION &quot;${HarfBuzz_ICU_LIBRARY}&quot;</span>
<span class="udiff-line-added">+         INTERFACE_COMPILE_OPTIONS &quot;${HarfBuzz_ICU_COMPILE_OPTIONS}&quot;</span>
<span class="udiff-line-added">+         INTERFACE_INCLUDE_DIRECTORIES &quot;${HarfBuzz_INCLUDE_DIR}&quot;</span>
<span class="udiff-line-added">+     )</span>
<span class="udiff-line-added">+ endif ()</span>
  
  mark_as_advanced(
<span class="udiff-line-modified-removed">-     HARFBUZZ_INCLUDE_DIRS</span>
<span class="udiff-line-modified-removed">-     HARFBUZZ_LIBRARIES</span>
<span class="udiff-line-modified-removed">-     HARFBUZZ_ICU_LIBRARIES</span>
<span class="udiff-line-modified-added">+     HarfBuzz_INCLUDE_DIR</span>
<span class="udiff-line-modified-added">+     HarfBuzz_LIBRARY</span>
<span class="udiff-line-modified-added">+     HarfBuzz_ICU_LIBRARY</span>
  )
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ if (HarfBuzz_FOUND)</span>
<span class="udiff-line-added">+    set(HarfBuzz_LIBRARIES ${HarfBuzz_LIBRARY} ${HarfBuzz_ICU_LIBRARY})</span>
<span class="udiff-line-added">+    set(HarfBuzz_INCLUDE_DIRS ${HarfBuzz_INCLUDE_DIR})</span>
<span class="udiff-line-added">+ endif ()</span>
</pre>
<center><a href="FindFontconfig.cmake.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="FindLibEpoxy.cmake.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>