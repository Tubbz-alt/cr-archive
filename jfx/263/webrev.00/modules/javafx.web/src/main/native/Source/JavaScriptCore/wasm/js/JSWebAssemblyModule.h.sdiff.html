<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/wasm/js/JSWebAssemblyModule.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="JSWebAssemblyModule.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="JSWebAssemblyRuntimeError.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/wasm/js/JSWebAssemblyModule.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
31 #include &quot;JSObject.h&quot;
32 #include &quot;WasmMemoryMode.h&quot;
33 #include &lt;wtf/Bag.h&gt;
34 #include &lt;wtf/Expected.h&gt;
35 #include &lt;wtf/Forward.h&gt;
36 #include &lt;wtf/Ref.h&gt;
37 #include &lt;wtf/text/WTFString.h&gt;
38 
39 namespace JSC {
40 
41 namespace Wasm {
42 class Module;
43 struct ModuleInformation;
44 class Plan;
45 using SignatureIndex = uint64_t;
46 }
47 
48 class SymbolTable;
49 class JSWebAssemblyCodeBlock;
50 class JSWebAssemblyMemory;
<span class="line-removed">51 class WebAssemblyToJSCallee;</span>
52 
<span class="line-modified">53 class JSWebAssemblyModule final : public JSDestructibleObject {</span>
54 public:
<span class="line-modified">55     typedef JSDestructibleObject Base;</span>








56 
57     DECLARE_EXPORT_INFO;
58 
<span class="line-modified">59     JS_EXPORT_PRIVATE static JSWebAssemblyModule* createStub(VM&amp;, ExecState*, Structure*, Expected&lt;RefPtr&lt;Wasm::Module&gt;, String&gt;&amp;&amp;);</span>
60     static Structure* createStructure(VM&amp;, JSGlobalObject*, JSValue);
61 
62     const Wasm::ModuleInformation&amp; moduleInformation() const;
63     SymbolTable* exportSymbolTable() const;
64     Wasm::SignatureIndex signatureIndexFromFunctionIndexSpace(unsigned functionIndexSpace) const;
<span class="line-removed">65     WebAssemblyToJSCallee* callee() const;</span>
66 
67     JSWebAssemblyCodeBlock* codeBlock(Wasm::MemoryMode mode);
68     void setCodeBlock(VM&amp;, Wasm::MemoryMode, JSWebAssemblyCodeBlock*);
69 
70     JS_EXPORT_PRIVATE Wasm::Module&amp; module();
71 
72 private:
73     friend class JSWebAssemblyCodeBlock;
74 
75     JSWebAssemblyModule(VM&amp;, Structure*, Ref&lt;Wasm::Module&gt;&amp;&amp;);
76     void finishCreation(VM&amp;);
<span class="line-removed">77     static void destroy(JSCell*);</span>
78     static void visitChildren(JSCell*, SlotVisitor&amp;);
79 
80     Ref&lt;Wasm::Module&gt; m_module;
81     WriteBarrier&lt;SymbolTable&gt; m_exportSymbolTable;
82     WriteBarrier&lt;JSWebAssemblyCodeBlock&gt; m_codeBlocks[Wasm::NumberOfMemoryModes];
<span class="line-removed">83     WriteBarrier&lt;WebAssemblyToJSCallee&gt; m_callee;</span>
84 };
85 
86 } // namespace JSC
87 
88 #endif // ENABLE(WEBASSEMBLY)
</pre>
</td>
<td>
<hr />
<pre>
31 #include &quot;JSObject.h&quot;
32 #include &quot;WasmMemoryMode.h&quot;
33 #include &lt;wtf/Bag.h&gt;
34 #include &lt;wtf/Expected.h&gt;
35 #include &lt;wtf/Forward.h&gt;
36 #include &lt;wtf/Ref.h&gt;
37 #include &lt;wtf/text/WTFString.h&gt;
38 
39 namespace JSC {
40 
41 namespace Wasm {
42 class Module;
43 struct ModuleInformation;
44 class Plan;
45 using SignatureIndex = uint64_t;
46 }
47 
48 class SymbolTable;
49 class JSWebAssemblyCodeBlock;
50 class JSWebAssemblyMemory;

51 
<span class="line-modified">52 class JSWebAssemblyModule final : public JSNonFinalObject {</span>
53 public:
<span class="line-modified">54     using Base = JSNonFinalObject;</span>
<span class="line-added">55     static constexpr bool needsDestruction = true;</span>
<span class="line-added">56     static void destroy(JSCell*);</span>
<span class="line-added">57 </span>
<span class="line-added">58     template&lt;typename CellType, SubspaceAccess mode&gt;</span>
<span class="line-added">59     static IsoSubspace* subspaceFor(VM&amp; vm)</span>
<span class="line-added">60     {</span>
<span class="line-added">61         return vm.webAssemblyModuleSpace&lt;mode&gt;();</span>
<span class="line-added">62     }</span>
63 
64     DECLARE_EXPORT_INFO;
65 
<span class="line-modified">66     JS_EXPORT_PRIVATE static JSWebAssemblyModule* createStub(VM&amp;, JSGlobalObject*, Structure*, Expected&lt;RefPtr&lt;Wasm::Module&gt;, String&gt;&amp;&amp;);</span>
67     static Structure* createStructure(VM&amp;, JSGlobalObject*, JSValue);
68 
69     const Wasm::ModuleInformation&amp; moduleInformation() const;
70     SymbolTable* exportSymbolTable() const;
71     Wasm::SignatureIndex signatureIndexFromFunctionIndexSpace(unsigned functionIndexSpace) const;

72 
73     JSWebAssemblyCodeBlock* codeBlock(Wasm::MemoryMode mode);
74     void setCodeBlock(VM&amp;, Wasm::MemoryMode, JSWebAssemblyCodeBlock*);
75 
76     JS_EXPORT_PRIVATE Wasm::Module&amp; module();
77 
78 private:
79     friend class JSWebAssemblyCodeBlock;
80 
81     JSWebAssemblyModule(VM&amp;, Structure*, Ref&lt;Wasm::Module&gt;&amp;&amp;);
82     void finishCreation(VM&amp;);

83     static void visitChildren(JSCell*, SlotVisitor&amp;);
84 
85     Ref&lt;Wasm::Module&gt; m_module;
86     WriteBarrier&lt;SymbolTable&gt; m_exportSymbolTable;
87     WriteBarrier&lt;JSWebAssemblyCodeBlock&gt; m_codeBlocks[Wasm::NumberOfMemoryModes];

88 };
89 
90 } // namespace JSC
91 
92 #endif // ENABLE(WEBASSEMBLY)
</pre>
</td>
</tr>
</table>
<center><a href="JSWebAssemblyModule.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="JSWebAssemblyRuntimeError.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>