<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Source/WebCore/platform/Cursor.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (C) 2004, 2006, 2008 Apple Inc. All rights reserved.
  3  *
  4  * Redistribution and use in source and binary forms, with or without
  5  * modification, are permitted provided that the following conditions
  6  * are met:
  7  * 1. Redistributions of source code must retain the above copyright
  8  *    notice, this list of conditions and the following disclaimer.
  9  * 2. Redistributions in binary form must reproduce the above copyright
 10  *    notice, this list of conditions and the following disclaimer in the
 11  *    documentation and/or other materials provided with the distribution.
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #pragma once
 27 
 28 #include &quot;Image.h&quot;
 29 #include &quot;IntPoint.h&quot;
 30 #include &lt;wtf/Assertions.h&gt;
 31 #include &lt;wtf/RefPtr.h&gt;
 32 
 33 #if PLATFORM(WIN)
 34 typedef struct HICON__* HICON;
 35 typedef HICON HCURSOR;
 36 #include &lt;wtf/RefCounted.h&gt;
 37 #elif PLATFORM(COCOA)
 38 #include &lt;wtf/RetainPtr.h&gt;
 39 #elif PLATFORM(GTK)
 40 #include &quot;GRefPtrGtk.h&quot;
 41 #elif PLATFORM(JAVA)
 42 #include &lt;jni.h&gt;
 43 #endif
 44 
 45 #if HAVE(NSCURSOR)
 46 OBJC_CLASS NSCursor;
 47 #endif
 48 
 49 #if PLATFORM(WIN)
 50 typedef struct HICON__ *HICON;
 51 typedef HICON HCURSOR;
 52 #endif
 53 
 54 namespace WebCore {
 55 
 56 class Image;
 57 
 58 #if PLATFORM(WIN)
 59 
 60 class SharedCursor : public RefCounted&lt;SharedCursor&gt; {
 61 public:
 62     static Ref&lt;SharedCursor&gt; create(HCURSOR);
 63     WEBCORE_EXPORT ~SharedCursor();
 64     HCURSOR nativeCursor() const { return m_nativeCursor; }
 65 
 66 private:
 67     SharedCursor(HCURSOR);
 68     HCURSOR m_nativeCursor;
 69 };
 70 
 71 #endif
 72 
 73 #if PLATFORM(WIN)
 74 using PlatformCursor = RefPtr&lt;SharedCursor&gt;;
 75 #elif HAVE(NSCURSOR)
 76 using PlatformCursor = NSCursor *;
 77 #elif PLATFORM(GTK)
 78 using PlatformCursor = GRefPtr&lt;GdkCursor&gt;;
 79 #elif PLATFORM(JAVA)
 80 using PlatformCursor = jlong;
 81 #else
 82 using PlatformCursor = void*;
 83 #endif
 84 
 85 class Cursor {
 86     WTF_MAKE_FAST_ALLOCATED;
 87 public:
 88     enum Type {
 89         Pointer = 0,
 90         Cross,
 91         Hand,
 92         IBeam,
 93         Wait,
 94         Help,
 95         EastResize,
 96         NorthResize,
 97         NorthEastResize,
 98         NorthWestResize,
 99         SouthResize,
100         SouthEastResize,
101         SouthWestResize,
102         WestResize,
103         NorthSouthResize,
104         EastWestResize,
105         NorthEastSouthWestResize,
106         NorthWestSouthEastResize,
107         ColumnResize,
108         RowResize,
109         MiddlePanning,
110         EastPanning,
111         NorthPanning,
112         NorthEastPanning,
113         NorthWestPanning,
114         SouthPanning,
115         SouthEastPanning,
116         SouthWestPanning,
117         WestPanning,
118         Move,
119         VerticalText,
120         Cell,
121         ContextMenu,
122         Alias,
123         Progress,
124         NoDrop,
125         Copy,
126         None,
127         NotAllowed,
128         ZoomIn,
129         ZoomOut,
130         Grab,
131         Grabbing,
132         Custom
133     };
134 
135     Cursor() = default;
136 
137 #if PLATFORM(JAVA)
138     explicit Cursor(PlatformCursor);
139     void setPlatformCursor(const Cursor&amp;) const;
140 #endif
141 
142     WEBCORE_EXPORT static const Cursor&amp; fromType(Cursor::Type);
143 
144     WEBCORE_EXPORT Cursor(Image*, const IntPoint&amp; hotSpot);
145 
146 #if ENABLE(MOUSE_CURSOR_SCALE)
147     // Hot spot is in image pixels.
148     WEBCORE_EXPORT Cursor(Image*, const IntPoint&amp; hotSpot, float imageScaleFactor);
149 #endif
150 
151     explicit Cursor(Type);
152 
153     Type type() const;
154     Image* image() const { return m_image.get(); }
155     const IntPoint&amp; hotSpot() const { return m_hotSpot; }
156 
157 #if ENABLE(MOUSE_CURSOR_SCALE)
158     // Image scale in image pixels per logical (UI) pixel.
159     float imageScaleFactor() const { return m_imageScaleFactor; }
160 #endif
161 
162     WEBCORE_EXPORT PlatformCursor platformCursor() const;
163 
164     WEBCORE_EXPORT void setAsPlatformCursor() const;
165 
166 private:
167     void ensurePlatformCursor() const;
168 
169     // The type of -1 indicates an invalid Cursor that should never actually get used.
170     Type m_type { static_cast&lt;Type&gt;(-1) };
171     RefPtr&lt;Image&gt; m_image;
172     IntPoint m_hotSpot;
173 
174 #if ENABLE(MOUSE_CURSOR_SCALE)
175     float m_imageScaleFactor { 1 };
176 #endif
177 
178 #if !HAVE(NSCURSOR)
179 #if PLATFORM(JAVA)
180     mutable PlatformCursor m_platformCursor {};
181 #else
182     mutable PlatformCursor m_platformCursor { nullptr };
183 #endif
184 #else
185     mutable RetainPtr&lt;NSCursor&gt; m_platformCursor;
186 #endif
187 
188 };
189 
190 IntPoint determineHotSpot(Image*, const IntPoint&amp; specifiedHotSpot);
191 
192 WEBCORE_EXPORT const Cursor&amp; pointerCursor();
193 const Cursor&amp; crossCursor();
194 WEBCORE_EXPORT const Cursor&amp; handCursor();
195 const Cursor&amp; moveCursor();
196 WEBCORE_EXPORT const Cursor&amp; iBeamCursor();
197 const Cursor&amp; waitCursor();
198 const Cursor&amp; helpCursor();
199 const Cursor&amp; eastResizeCursor();
200 const Cursor&amp; northResizeCursor();
201 const Cursor&amp; northEastResizeCursor();
202 const Cursor&amp; northWestResizeCursor();
203 const Cursor&amp; southResizeCursor();
204 const Cursor&amp; southEastResizeCursor();
205 const Cursor&amp; southWestResizeCursor();
206 const Cursor&amp; westResizeCursor();
207 const Cursor&amp; northSouthResizeCursor();
208 const Cursor&amp; eastWestResizeCursor();
209 const Cursor&amp; northEastSouthWestResizeCursor();
210 const Cursor&amp; northWestSouthEastResizeCursor();
211 const Cursor&amp; columnResizeCursor();
212 const Cursor&amp; rowResizeCursor();
213 const Cursor&amp; middlePanningCursor();
214 const Cursor&amp; eastPanningCursor();
215 const Cursor&amp; northPanningCursor();
216 const Cursor&amp; northEastPanningCursor();
217 const Cursor&amp; northWestPanningCursor();
218 const Cursor&amp; southPanningCursor();
219 const Cursor&amp; southEastPanningCursor();
220 const Cursor&amp; southWestPanningCursor();
221 const Cursor&amp; westPanningCursor();
222 const Cursor&amp; verticalTextCursor();
223 const Cursor&amp; cellCursor();
224 const Cursor&amp; contextMenuCursor();
225 const Cursor&amp; noDropCursor();
226 const Cursor&amp; notAllowedCursor();
227 const Cursor&amp; progressCursor();
228 const Cursor&amp; aliasCursor();
229 const Cursor&amp; zoomInCursor();
230 const Cursor&amp; zoomOutCursor();
231 const Cursor&amp; copyCursor();
232 const Cursor&amp; noneCursor();
233 const Cursor&amp; grabCursor();
234 const Cursor&amp; grabbingCursor();
235 
236 inline Cursor::Type Cursor::type() const
237 {
238     ASSERT(m_type &gt;= 0);
239     ASSERT(m_type &lt;= Custom);
240     return m_type;
241 }
242 
243 } // namespace WebCore
    </pre>
  </body>
</html>