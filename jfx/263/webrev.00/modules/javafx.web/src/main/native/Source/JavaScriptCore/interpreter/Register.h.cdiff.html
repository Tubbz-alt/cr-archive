<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/interpreter/Register.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ProtoCallFrame.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ShadowChicken.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/interpreter/Register.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (C) 2008-2018 Apple Inc. All rights reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   *
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (C) 2008-2019 Apple Inc. All rights reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   *
</pre>
<hr />
<pre>
<span class="line-old-header">*** 32,40 ***</span>
  #include &lt;wtf/Assertions.h&gt;
  #include &lt;wtf/VectorTraits.h&gt;
  
  namespace JSC {
  
      class CodeBlock;
<span class="line-removed">-     class ExecState;</span>
      class JSLexicalEnvironment;
      class JSObject;
      class JSScope;
  
<span class="line-removed">-     typedef ExecState CallFrame;</span>
<span class="line-removed">- </span>
      class Register {
          WTF_MAKE_FAST_ALLOCATED;
      public:
          Register();
  
          Register(const JSValue&amp;);
<span class="line-removed">-         Register&amp; operator=(const JSValue&amp;);</span>
          JSValue jsValue() const;
          JSValue asanUnsafeJSValue() const;
          EncodedJSValue encodedJSValue() const;
  
<span class="line-modified">!         Register&amp; operator=(CallFrame*);</span>
<span class="line-modified">!         Register&amp; operator=(CodeBlock*);</span>
<span class="line-modified">!         Register&amp; operator=(JSScope*);</span>
<span class="line-modified">!         Register&amp; operator=(JSObject*);</span>
  
          int32_t i() const;
<span class="line-modified">!         CallFrame* callFrame() const;</span>
<span class="line-modified">!         CodeBlock* codeBlock() const;</span>
<span class="line-modified">!         CodeBlock* asanUnsafeCodeBlock() const;</span>
<span class="line-modified">!         JSObject* object() const;</span>
<span class="line-modified">!         JSScope* scope() const;</span>
          int32_t unboxedInt32() const;
          int32_t asanUnsafeUnboxedInt32() const;
          int64_t unboxedInt52() const;
          int64_t asanUnsafeUnboxedInt52() const;
          int64_t unboxedStrictInt52() const;
<span class="line-new-header">--- 32,38 ---</span>
  #include &lt;wtf/Assertions.h&gt;
  #include &lt;wtf/VectorTraits.h&gt;
  
  namespace JSC {
  
<span class="line-added">+     class CallFrame;</span>
      class CodeBlock;
      class JSLexicalEnvironment;
      class JSObject;
      class JSScope;
  
      class Register {
          WTF_MAKE_FAST_ALLOCATED;
      public:
          Register();
  
          Register(const JSValue&amp;);
          JSValue jsValue() const;
          JSValue asanUnsafeJSValue() const;
          EncodedJSValue encodedJSValue() const;
  
<span class="line-modified">!         ALWAYS_INLINE Register&amp; operator=(CallFrame*);</span>
<span class="line-modified">!         ALWAYS_INLINE Register&amp; operator=(CodeBlock*);</span>
<span class="line-modified">!         ALWAYS_INLINE Register&amp; operator=(JSScope*);</span>
<span class="line-modified">!         ALWAYS_INLINE Register&amp; operator=(JSObject*);</span>
<span class="line-added">+         ALWAYS_INLINE Register&amp; operator=(EncodedJSValue);</span>
  
          int32_t i() const;
<span class="line-modified">!         ALWAYS_INLINE CallFrame* callFrame() const;</span>
<span class="line-modified">!         ALWAYS_INLINE CodeBlock* codeBlock() const;</span>
<span class="line-modified">!         ALWAYS_INLINE CodeBlock* asanUnsafeCodeBlock() const;</span>
<span class="line-modified">!         ALWAYS_INLINE JSObject* object() const;</span>
<span class="line-modified">!         ALWAYS_INLINE JSScope* scope() const;</span>
          int32_t unboxedInt32() const;
          int32_t asanUnsafeUnboxedInt32() const;
          int64_t unboxedInt52() const;
          int64_t asanUnsafeUnboxedInt52() const;
          int64_t unboxedStrictInt52() const;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 112,16 ***</span>
      ALWAYS_INLINE Register::Register(const JSValue&amp; v)
      {
          u.value = JSValue::encode(v);
      }
  
<span class="line-removed">-     ALWAYS_INLINE Register&amp; Register::operator=(const JSValue&amp; v)</span>
<span class="line-removed">-     {</span>
<span class="line-removed">-         u.value = JSValue::encode(v);</span>
<span class="line-removed">-         return *this;</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
      // FIXME (rdar://problem/19379214): ASan only needs to be suppressed for Register::jsValue() when called from prepareOSREntry(), but there is currently no way to express this short of adding a separate copy of the function.
      SUPPRESS_ASAN ALWAYS_INLINE JSValue Register::asanUnsafeJSValue() const
      {
          return JSValue::decode(u.value);
      }
<span class="line-new-header">--- 110,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 136,42 ***</span>
          return u.value;
      }
  
      // Interpreter functions
  
<span class="line-removed">-     ALWAYS_INLINE Register&amp; Register::operator=(CallFrame* callFrame)</span>
<span class="line-removed">-     {</span>
<span class="line-removed">-         u.callFrame = callFrame;</span>
<span class="line-removed">-         return *this;</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     ALWAYS_INLINE Register&amp; Register::operator=(CodeBlock* codeBlock)</span>
<span class="line-removed">-     {</span>
<span class="line-removed">-         u.codeBlock = codeBlock;</span>
<span class="line-removed">-         return *this;</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
      ALWAYS_INLINE int32_t Register::i() const
      {
          return jsValue().asInt32();
      }
  
<span class="line-removed">-     ALWAYS_INLINE CallFrame* Register::callFrame() const</span>
<span class="line-removed">-     {</span>
<span class="line-removed">-         return u.callFrame;</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     ALWAYS_INLINE CodeBlock* Register::codeBlock() const</span>
<span class="line-removed">-     {</span>
<span class="line-removed">-         return u.codeBlock;</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     SUPPRESS_ASAN ALWAYS_INLINE CodeBlock* Register::asanUnsafeCodeBlock() const</span>
<span class="line-removed">-     {</span>
<span class="line-removed">-         return u.codeBlock;</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
      ALWAYS_INLINE int32_t Register::unboxedInt32() const
      {
          return payload();
      }
  
<span class="line-new-header">--- 128,15 ---</span>
</pre>
<center><a href="ProtoCallFrame.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ShadowChicken.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>