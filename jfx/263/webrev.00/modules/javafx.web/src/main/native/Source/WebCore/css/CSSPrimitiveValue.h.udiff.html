<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/css/CSSPrimitiveValue.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="CSSPrimitiveValue.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CSSPrimitiveValueMappings.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/css/CSSPrimitiveValue.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -20,10 +20,11 @@</span>
   */
  
  #pragma once
  
  #include &quot;CSSPropertyNames.h&quot;
<span class="udiff-line-added">+ #include &quot;CSSUnits.h&quot;</span>
  #include &quot;CSSValue.h&quot;
  #include &quot;CSSValueKeywords.h&quot;
  #include &quot;Color.h&quot;
  #include &quot;ExceptionOr.h&quot;
  #include &quot;LayoutUnit.h&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -72,164 +73,77 @@</span>
      return static_cast&lt;float&gt;(value);
  }
  
  class CSSPrimitiveValue final : public CSSValue {
  public:
<span class="udiff-line-modified-removed">-     enum UnitType {</span>
<span class="udiff-line-modified-removed">-         CSS_UNKNOWN = 0,</span>
<span class="udiff-line-modified-removed">-         CSS_NUMBER = 1,</span>
<span class="udiff-line-modified-removed">-         CSS_PERCENTAGE = 2,</span>
<span class="udiff-line-modified-removed">-         CSS_EMS = 3,</span>
<span class="udiff-line-modified-removed">-         CSS_EXS = 4,</span>
<span class="udiff-line-modified-removed">-         CSS_PX = 5,</span>
<span class="udiff-line-modified-removed">-         CSS_CM = 6,</span>
<span class="udiff-line-modified-removed">-         CSS_MM = 7,</span>
<span class="udiff-line-modified-removed">-         CSS_IN = 8,</span>
<span class="udiff-line-modified-removed">-         CSS_PT = 9,</span>
<span class="udiff-line-modified-removed">-         CSS_PC = 10,</span>
<span class="udiff-line-modified-removed">-         CSS_DEG = 11,</span>
<span class="udiff-line-modified-removed">-         CSS_RAD = 12,</span>
<span class="udiff-line-modified-removed">-         CSS_GRAD = 13,</span>
<span class="udiff-line-modified-removed">-         CSS_MS = 14,</span>
<span class="udiff-line-modified-removed">-         CSS_S = 15,</span>
<span class="udiff-line-modified-removed">-         CSS_HZ = 16,</span>
<span class="udiff-line-modified-removed">-         CSS_KHZ = 17,</span>
<span class="udiff-line-modified-removed">-         CSS_DIMENSION = 18,</span>
<span class="udiff-line-modified-removed">-         CSS_STRING = 19,</span>
<span class="udiff-line-modified-removed">-         CSS_URI = 20,</span>
<span class="udiff-line-modified-removed">-         CSS_IDENT = 21,</span>
<span class="udiff-line-modified-removed">-         CSS_ATTR = 22,</span>
<span class="udiff-line-modified-removed">-         CSS_COUNTER = 23,</span>
<span class="udiff-line-modified-removed">-         CSS_RECT = 24,</span>
<span class="udiff-line-modified-removed">-         CSS_RGBCOLOR = 25,</span>
<span class="udiff-line-modified-removed">-         // From CSS Values and Units. Viewport-percentage Lengths (vw/vh/vmin/vmax).</span>
<span class="udiff-line-modified-removed">-         CSS_VW = 26,</span>
<span class="udiff-line-modified-removed">-         CSS_VH = 27,</span>
<span class="udiff-line-modified-removed">-         CSS_VMIN = 28,</span>
<span class="udiff-line-modified-removed">-         CSS_VMAX = 29,</span>
<span class="udiff-line-modified-removed">-         CSS_DPPX = 30,</span>
<span class="udiff-line-modified-removed">-         CSS_DPI = 31,</span>
<span class="udiff-line-modified-removed">-         CSS_DPCM = 32,</span>
<span class="udiff-line-modified-removed">-         CSS_FR = 33,</span>
<span class="udiff-line-modified-removed">-         CSS_PAIR = 100, // We envision this being exposed as a means of getting computed style values for pairs (border-spacing/radius, background-position, etc.)</span>
<span class="udiff-line-modified-removed">-         CSS_UNICODE_RANGE = 102,</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-         // These are from CSS3 Values and Units, but that isn&#39;t a finished standard yet</span>
<span class="udiff-line-modified-removed">-         CSS_TURN = 107,</span>
<span class="udiff-line-removed">-         CSS_REMS = 108,</span>
<span class="udiff-line-removed">-         CSS_CHS = 109,</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         // This is used internally for counter names (as opposed to counter values)</span>
<span class="udiff-line-removed">-         CSS_COUNTER_NAME = 110,</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         // This is used by the CSS Shapes draft</span>
<span class="udiff-line-removed">-         CSS_SHAPE = 111,</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         // Used by border images.</span>
<span class="udiff-line-removed">-         CSS_QUAD = 112,</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         CSS_CALC = 113,</span>
<span class="udiff-line-removed">-         CSS_CALC_PERCENTAGE_WITH_NUMBER = 114,</span>
<span class="udiff-line-removed">-         CSS_CALC_PERCENTAGE_WITH_LENGTH = 115,</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         CSS_FONT_FAMILY = 116,</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         CSS_PROPERTY_ID = 117,</span>
<span class="udiff-line-removed">-         CSS_VALUE_ID = 118,</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         // This value is used to handle quirky margins in reflow roots (body, td, and th) like WinIE.</span>
<span class="udiff-line-removed">-         // The basic idea is that a stylesheet can use the value __qem (for quirky em) instead of em.</span>
<span class="udiff-line-removed">-         // When the quirky value is used, if you&#39;re in quirks mode, the margin will collapse away</span>
<span class="udiff-line-removed">-         // inside a table cell. This quirk is specified in the HTML spec but our impl is different.</span>
<span class="udiff-line-removed">-         CSS_QUIRKY_EMS = 120</span>
<span class="udiff-line-removed">-     };</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     // This enum follows the CSSParser::Units enum augmented with UNIT_FREQUENCY for frequencies.</span>
<span class="udiff-line-removed">-     enum UnitCategory {</span>
<span class="udiff-line-removed">-         UNumber,</span>
<span class="udiff-line-removed">-         UPercent,</span>
<span class="udiff-line-removed">-         ULength,</span>
<span class="udiff-line-removed">-         UAngle,</span>
<span class="udiff-line-removed">-         UTime,</span>
<span class="udiff-line-removed">-         UFrequency,</span>
<span class="udiff-line-removed">- #if ENABLE(CSS_IMAGE_RESOLUTION) || ENABLE(RESOLUTION_MEDIA_QUERY)</span>
<span class="udiff-line-removed">-         UResolution,</span>
<span class="udiff-line-removed">- #endif</span>
<span class="udiff-line-removed">-         UOther</span>
<span class="udiff-line-removed">-     };</span>
<span class="udiff-line-removed">-     static UnitCategory unitCategory(UnitType);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     bool isAngle() const;</span>
<span class="udiff-line-removed">-     bool isAttr() const { return m_primitiveUnitType == CSS_ATTR; }</span>
<span class="udiff-line-removed">-     bool isCounter() const { return m_primitiveUnitType == CSS_COUNTER; }</span>
<span class="udiff-line-removed">-     bool isFontIndependentLength() const { return m_primitiveUnitType &gt;= CSS_PX &amp;&amp; m_primitiveUnitType &lt;= CSS_PC; }</span>
<span class="udiff-line-removed">-     static bool isFontRelativeLength(UnitType);</span>
<span class="udiff-line-removed">-     bool isFontRelativeLength() const { return isFontRelativeLength(static_cast&lt;UnitType&gt;(m_primitiveUnitType)); }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     bool isQuirkyEms() const { return primitiveType() == UnitType::CSS_QUIRKY_EMS; }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     static bool isViewportPercentageLength(UnitType type) { return type &gt;= CSS_VW &amp;&amp; type &lt;= CSS_VMAX; }</span>
<span class="udiff-line-removed">-     bool isViewportPercentageLength() const { return isViewportPercentageLength(static_cast&lt;UnitType&gt;(m_primitiveUnitType)); }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     static bool isLength(UnitType);</span>
<span class="udiff-line-removed">-     bool isLength() const { return isLength(static_cast&lt;UnitType&gt;(primitiveType())); }</span>
<span class="udiff-line-removed">-     bool isNumber() const { return primitiveType() == CSS_NUMBER; }</span>
<span class="udiff-line-removed">-     bool isPercentage() const { return primitiveType() == CSS_PERCENTAGE; }</span>
<span class="udiff-line-removed">-     bool isPx() const { return primitiveType() == CSS_PX; }</span>
<span class="udiff-line-removed">-     bool isRect() const { return m_primitiveUnitType == CSS_RECT; }</span>
<span class="udiff-line-removed">-     bool isPair() const { return m_primitiveUnitType == CSS_PAIR; }</span>
<span class="udiff-line-removed">-     bool isPropertyID() const { return m_primitiveUnitType == CSS_PROPERTY_ID; }</span>
<span class="udiff-line-removed">-     bool isRGBColor() const { return m_primitiveUnitType == CSS_RGBCOLOR; }</span>
<span class="udiff-line-removed">-     bool isShape() const { return m_primitiveUnitType == CSS_SHAPE; }</span>
<span class="udiff-line-removed">-     bool isString() const { return m_primitiveUnitType == CSS_STRING; }</span>
<span class="udiff-line-removed">-     bool isFontFamily() const { return m_primitiveUnitType == CSS_FONT_FAMILY; }</span>
<span class="udiff-line-removed">-     bool isTime() const { return m_primitiveUnitType == CSS_S || m_primitiveUnitType == CSS_MS; }</span>
<span class="udiff-line-removed">-     bool isURI() const { return m_primitiveUnitType == CSS_URI; }</span>
<span class="udiff-line-removed">-     bool isCalculated() const { return m_primitiveUnitType == CSS_CALC; }</span>
<span class="udiff-line-removed">-     bool isCalculatedPercentageWithNumber() const { return primitiveType() == CSS_CALC_PERCENTAGE_WITH_NUMBER; }</span>
<span class="udiff-line-removed">-     bool isCalculatedPercentageWithLength() const { return primitiveType() == CSS_CALC_PERCENTAGE_WITH_LENGTH; }</span>
<span class="udiff-line-removed">-     bool isDotsPerInch() const { return primitiveType() == CSS_DPI; }</span>
<span class="udiff-line-removed">-     bool isDotsPerPixel() const { return primitiveType() == CSS_DPPX; }</span>
<span class="udiff-line-removed">-     bool isDotsPerCentimeter() const { return primitiveType() == CSS_DPCM; }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     static bool isResolution(UnitType);</span>
<span class="udiff-line-removed">-     bool isResolution() const { return isResolution(static_cast&lt;UnitType&gt;(primitiveType())); }</span>
<span class="udiff-line-removed">-     bool isViewportPercentageWidth() const { return m_primitiveUnitType == CSS_VW; }</span>
<span class="udiff-line-removed">-     bool isViewportPercentageHeight() const { return m_primitiveUnitType == CSS_VH; }</span>
<span class="udiff-line-removed">-     bool isViewportPercentageMax() const { return m_primitiveUnitType == CSS_VMAX; }</span>
<span class="udiff-line-removed">-     bool isViewportPercentageMin() const { return m_primitiveUnitType == CSS_VMIN; }</span>
<span class="udiff-line-removed">-     bool isValueID() const { return m_primitiveUnitType == CSS_VALUE_ID; }</span>
<span class="udiff-line-removed">-     bool isFlex() const { return primitiveType() == CSS_FR; }</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     static bool isFontRelativeLength(CSSUnitType);</span>
<span class="udiff-line-modified-added">+     static bool isLength(CSSUnitType);</span>
<span class="udiff-line-modified-added">+     static bool isResolution(CSSUnitType);</span>
<span class="udiff-line-modified-added">+     static bool isViewportPercentageLength(CSSUnitType type) { return type &gt;= CSSUnitType::CSS_VW &amp;&amp; type &lt;= CSSUnitType::CSS_VMAX; }</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     // FIXME: Some of these use primitiveUnitType() and some use primitiveType(). Those that use primitiveUnitType() are broken with calc().</span>
<span class="udiff-line-modified-added">+     bool isAngle() const { return unitCategory(primitiveType()) == CSSUnitCategory::Angle; }</span>
<span class="udiff-line-modified-added">+     bool isAttr() const { return primitiveUnitType() == CSSUnitType::CSS_ATTR; }</span>
<span class="udiff-line-modified-added">+     bool isCounter() const { return primitiveUnitType() == CSSUnitType::CSS_COUNTER; }</span>
<span class="udiff-line-modified-added">+     bool isFontIndependentLength() const { return primitiveUnitType() &gt;= CSSUnitType::CSS_PX &amp;&amp; primitiveUnitType() &lt;= CSSUnitType::CSS_PC; }</span>
<span class="udiff-line-modified-added">+     bool isFontRelativeLength() const { return isFontRelativeLength(primitiveUnitType()); }</span>
<span class="udiff-line-modified-added">+     bool isQuirkyEms() const { return primitiveType() == CSSUnitType::CSS_QUIRKY_EMS; }</span>
<span class="udiff-line-modified-added">+     bool isLength() const { return isLength(static_cast&lt;CSSUnitType&gt;(primitiveType())); }</span>
<span class="udiff-line-modified-added">+     bool isNumber() const { return primitiveType() == CSSUnitType::CSS_NUMBER; }</span>
<span class="udiff-line-modified-added">+     bool isPercentage() const { return primitiveType() == CSSUnitType::CSS_PERCENTAGE; }</span>
<span class="udiff-line-modified-added">+     bool isPx() const { return primitiveType() == CSSUnitType::CSS_PX; }</span>
<span class="udiff-line-modified-added">+     bool isRect() const { return primitiveUnitType() == CSSUnitType::CSS_RECT; }</span>
<span class="udiff-line-modified-added">+     bool isPair() const { return primitiveUnitType() == CSSUnitType::CSS_PAIR; }</span>
<span class="udiff-line-modified-added">+     bool isPropertyID() const { return primitiveUnitType() == CSSUnitType::CSS_PROPERTY_ID; }</span>
<span class="udiff-line-modified-added">+     bool isRGBColor() const { return primitiveUnitType() == CSSUnitType::CSS_RGBCOLOR; }</span>
<span class="udiff-line-modified-added">+     bool isShape() const { return primitiveUnitType() == CSSUnitType::CSS_SHAPE; }</span>
<span class="udiff-line-modified-added">+     bool isString() const { return primitiveUnitType() == CSSUnitType::CSS_STRING; }</span>
<span class="udiff-line-modified-added">+     bool isFontFamily() const { return primitiveUnitType() == CSSUnitType::CSS_FONT_FAMILY; }</span>
<span class="udiff-line-modified-added">+     bool isTime() const { return unitCategory(primitiveUnitType()) == CSSUnitCategory::Time; }</span>
<span class="udiff-line-modified-added">+     bool isFrequency() const { return unitCategory(primitiveType()) == CSSUnitCategory::Frequency; }</span>
<span class="udiff-line-modified-added">+     bool isURI() const { return primitiveUnitType() == CSSUnitType::CSS_URI; }</span>
<span class="udiff-line-modified-added">+     bool isCalculated() const { return primitiveUnitType() == CSSUnitType::CSS_CALC; }</span>
<span class="udiff-line-modified-added">+     bool isCalculatedPercentageWithNumber() const { return primitiveType() == CSSUnitType::CSS_CALC_PERCENTAGE_WITH_NUMBER; }</span>
<span class="udiff-line-modified-added">+     bool isCalculatedPercentageWithLength() const { return primitiveType() == CSSUnitType::CSS_CALC_PERCENTAGE_WITH_LENGTH; }</span>
<span class="udiff-line-modified-added">+     bool isDotsPerInch() const { return primitiveType() == CSSUnitType::CSS_DPI; }</span>
<span class="udiff-line-modified-added">+     bool isDotsPerPixel() const { return primitiveType() == CSSUnitType::CSS_DPPX; }</span>
<span class="udiff-line-modified-added">+     bool isDotsPerCentimeter() const { return primitiveType() == CSSUnitType::CSS_DPCM; }</span>
<span class="udiff-line-modified-added">+     bool isResolution() const { return unitCategory(primitiveType()) == CSSUnitCategory::Resolution; }</span>
<span class="udiff-line-modified-added">+     bool isViewportPercentageLength() const { return isViewportPercentageLength(primitiveUnitType()); }</span>
<span class="udiff-line-modified-added">+     bool isViewportPercentageWidth() const { return primitiveUnitType() == CSSUnitType::CSS_VW; }</span>
<span class="udiff-line-modified-added">+     bool isViewportPercentageHeight() const { return primitiveUnitType() == CSSUnitType::CSS_VH; }</span>
<span class="udiff-line-modified-added">+     bool isViewportPercentageMax() const { return primitiveUnitType() == CSSUnitType::CSS_VMAX; }</span>
<span class="udiff-line-modified-added">+     bool isViewportPercentageMin() const { return primitiveUnitType() == CSSUnitType::CSS_VMIN; }</span>
<span class="udiff-line-modified-added">+     bool isValueID() const { return primitiveUnitType() == CSSUnitType::CSS_VALUE_ID; }</span>
<span class="udiff-line-modified-added">+     bool isFlex() const { return primitiveType() == CSSUnitType::CSS_FR; }</span>
  
      static Ref&lt;CSSPrimitiveValue&gt; createIdentifier(CSSValueID valueID) { return adoptRef(*new CSSPrimitiveValue(valueID)); }
      static Ref&lt;CSSPrimitiveValue&gt; createIdentifier(CSSPropertyID propertyID) { return adoptRef(*new CSSPrimitiveValue(propertyID)); }
  
<span class="udiff-line-modified-removed">-     static Ref&lt;CSSPrimitiveValue&gt; create(double value, UnitType type) { return adoptRef(*new CSSPrimitiveValue(value, type)); }</span>
<span class="udiff-line-modified-removed">-     static Ref&lt;CSSPrimitiveValue&gt; create(const String&amp; value, UnitType type) { return adoptRef(*new CSSPrimitiveValue(value, type)); }</span>
<span class="udiff-line-modified-added">+     static Ref&lt;CSSPrimitiveValue&gt; create(double value, CSSUnitType type) { return adoptRef(*new CSSPrimitiveValue(value, type)); }</span>
<span class="udiff-line-modified-added">+     static Ref&lt;CSSPrimitiveValue&gt; create(const String&amp; value, CSSUnitType type) { return adoptRef(*new CSSPrimitiveValue(value, type)); }</span>
      static Ref&lt;CSSPrimitiveValue&gt; create(const Length&amp; value, const RenderStyle&amp; style) { return adoptRef(*new CSSPrimitiveValue(value, style)); }
      static Ref&lt;CSSPrimitiveValue&gt; create(const LengthSize&amp; value, const RenderStyle&amp; style) { return adoptRef(*new CSSPrimitiveValue(value, style)); }
  
      template&lt;typename T&gt; static Ref&lt;CSSPrimitiveValue&gt; create(T&amp;&amp;);
  
      // This value is used to handle quirky margins in reflow roots (body, td, and th) like WinIE.
      // The basic idea is that a stylesheet can use the value __qem (for quirky em) instead of em.
      // When the quirky value is used, if you&#39;re in quirks mode, the margin will collapse away
      // inside a table cell.
<span class="udiff-line-modified-removed">-     static Ref&lt;CSSPrimitiveValue&gt; createAllowingMarginQuirk(double value, UnitType);</span>
<span class="udiff-line-modified-added">+     static Ref&lt;CSSPrimitiveValue&gt; createAllowingMarginQuirk(double value, CSSUnitType);</span>
  
      ~CSSPrimitiveValue();
  
      void cleanup();
  
<span class="udiff-line-modified-removed">-     WEBCORE_EXPORT unsigned short primitiveType() const;</span>
<span class="udiff-line-modified-removed">-     WEBCORE_EXPORT ExceptionOr&lt;void&gt; setFloatValue(unsigned short unitType, double floatValue);</span>
<span class="udiff-line-modified-removed">-     WEBCORE_EXPORT ExceptionOr&lt;float&gt; getFloatValue(unsigned short unitType) const;</span>
<span class="udiff-line-modified-removed">-     WEBCORE_EXPORT ExceptionOr&lt;void&gt; setStringValue(unsigned short stringType, const String&amp; stringValue);</span>
<span class="udiff-line-modified-added">+     WEBCORE_EXPORT CSSUnitType primitiveType() const;</span>
<span class="udiff-line-modified-added">+     WEBCORE_EXPORT ExceptionOr&lt;void&gt; setFloatValue(CSSUnitType , double);</span>
<span class="udiff-line-modified-added">+     WEBCORE_EXPORT ExceptionOr&lt;float&gt; getFloatValue(CSSUnitType) const;</span>
<span class="udiff-line-modified-added">+     WEBCORE_EXPORT ExceptionOr&lt;void&gt; setStringValue(CSSUnitType, const String&amp;);</span>
      WEBCORE_EXPORT ExceptionOr&lt;String&gt; getStringValue() const;
<span class="udiff-line-removed">-     WEBCORE_EXPORT ExceptionOr&lt;Counter&amp;&gt; getCounterValue() const;</span>
<span class="udiff-line-removed">-     WEBCORE_EXPORT ExceptionOr&lt;Rect&amp;&gt; getRectValue() const;</span>
<span class="udiff-line-removed">-     WEBCORE_EXPORT ExceptionOr&lt;Ref&lt;RGBColor&gt;&gt; getRGBColorValue() const;</span>
  
      double computeDegrees() const;
  
      enum TimeUnit { Seconds, Milliseconds };
      template&lt;typename T, TimeUnit timeUnit&gt; T computeTime() const;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -237,48 +151,56 @@</span>
      template&lt;typename T&gt; T computeLength(const CSSToLengthConversionData&amp;) const;
      template&lt;int&gt; Length convertToLength(const CSSToLengthConversionData&amp;) const;
  
      bool convertingToLengthRequiresNonNullStyle(int lengthConversion) const;
  
<span class="udiff-line-modified-removed">-     double doubleValue(UnitType) const;</span>
<span class="udiff-line-modified-added">+     double doubleValue(CSSUnitType) const;</span>
<span class="udiff-line-added">+     // It&#39;s usually wrong to call this; it can trigger type conversion in calc without sufficient context to resolve relative length units.</span>
      double doubleValue() const;
  
<span class="udiff-line-modified-removed">-     template&lt;typename T&gt; inline T value(UnitType type) const { return clampTo&lt;T&gt;(doubleValue(type)); }</span>
<span class="udiff-line-modified-added">+     // These return nullopt for calc, for which range checking is not done at parse time: &lt;https://www.w3.org/TR/css3-values/#calc-range&gt;.</span>
<span class="udiff-line-added">+     Optional&lt;bool&gt; isZero() const;</span>
<span class="udiff-line-added">+     Optional&lt;bool&gt; isPositive() const;</span>
<span class="udiff-line-added">+     Optional&lt;bool&gt; isNegative() const;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     template&lt;typename T&gt; inline T value(CSSUnitType type) const { return clampTo&lt;T&gt;(doubleValue(type)); }</span>
      template&lt;typename T&gt; inline T value() const { return clampTo&lt;T&gt;(doubleValue()); }
  
<span class="udiff-line-modified-removed">-     float floatValue(UnitType type) const { return value&lt;float&gt;(type); }</span>
<span class="udiff-line-modified-added">+     float floatValue(CSSUnitType type) const { return value&lt;float&gt;(type); }</span>
      float floatValue() const { return value&lt;float&gt;(); }
  
<span class="udiff-line-modified-removed">-     int intValue(UnitType type) const { return value&lt;int&gt;(type); }</span>
<span class="udiff-line-modified-added">+     int intValue(CSSUnitType type) const { return value&lt;int&gt;(type); }</span>
      int intValue() const { return value&lt;int&gt;(); }
  
      WEBCORE_EXPORT String stringValue() const;
  
<span class="udiff-line-modified-removed">-     const Color&amp; color() const { ASSERT(m_primitiveUnitType == CSS_RGBCOLOR); return *m_value.color; }</span>
<span class="udiff-line-modified-removed">-     Counter* counterValue() const { return m_primitiveUnitType != CSS_COUNTER ? nullptr : m_value.counter; }</span>
<span class="udiff-line-modified-removed">-     CSSCalcValue* cssCalcValue() const { return m_primitiveUnitType != CSS_CALC ? nullptr : m_value.calc; }</span>
<span class="udiff-line-modified-removed">-     const CSSFontFamily&amp; fontFamily() const { ASSERT(m_primitiveUnitType == CSS_FONT_FAMILY); return *m_value.fontFamily; }</span>
<span class="udiff-line-modified-removed">-     Pair* pairValue() const { return m_primitiveUnitType != CSS_PAIR ? nullptr : m_value.pair; }</span>
<span class="udiff-line-modified-removed">-     CSSPropertyID propertyID() const { return m_primitiveUnitType == CSS_PROPERTY_ID ? m_value.propertyID : CSSPropertyInvalid; }</span>
<span class="udiff-line-modified-removed">-     Quad* quadValue() const { return m_primitiveUnitType != CSS_QUAD ? nullptr : m_value.quad; }</span>
<span class="udiff-line-modified-removed">-     Rect* rectValue() const { return m_primitiveUnitType != CSS_RECT ? nullptr : m_value.rect; }</span>
<span class="udiff-line-modified-removed">-     CSSBasicShape* shapeValue() const { return m_primitiveUnitType != CSS_SHAPE ? nullptr : m_value.shape; }</span>
<span class="udiff-line-modified-removed">-     CSSValueID valueID() const { return m_primitiveUnitType == CSS_VALUE_ID ? m_value.valueID : CSSValueInvalid; }</span>
<span class="udiff-line-modified-added">+     const Color&amp; color() const { ASSERT(primitiveUnitType() == CSSUnitType::CSS_RGBCOLOR); return *m_value.color; }</span>
<span class="udiff-line-modified-added">+     Counter* counterValue() const { return primitiveUnitType() != CSSUnitType::CSS_COUNTER ? nullptr : m_value.counter; }</span>
<span class="udiff-line-modified-added">+     CSSCalcValue* cssCalcValue() const { return primitiveUnitType() != CSSUnitType::CSS_CALC ? nullptr : m_value.calc; }</span>
<span class="udiff-line-modified-added">+     const CSSFontFamily&amp; fontFamily() const { ASSERT(primitiveUnitType() == CSSUnitType::CSS_FONT_FAMILY); return *m_value.fontFamily; }</span>
<span class="udiff-line-modified-added">+     Pair* pairValue() const { return primitiveUnitType() != CSSUnitType::CSS_PAIR ? nullptr : m_value.pair; }</span>
<span class="udiff-line-modified-added">+     CSSPropertyID propertyID() const { return primitiveUnitType() == CSSUnitType::CSS_PROPERTY_ID ? m_value.propertyID : CSSPropertyInvalid; }</span>
<span class="udiff-line-modified-added">+     Quad* quadValue() const { return primitiveUnitType() != CSSUnitType::CSS_QUAD ? nullptr : m_value.quad; }</span>
<span class="udiff-line-modified-added">+     Rect* rectValue() const { return primitiveUnitType() != CSSUnitType::CSS_RECT ? nullptr : m_value.rect; }</span>
<span class="udiff-line-modified-added">+     CSSBasicShape* shapeValue() const { return primitiveUnitType() != CSSUnitType::CSS_SHAPE ? nullptr : m_value.shape; }</span>
<span class="udiff-line-modified-added">+     CSSValueID valueID() const { return primitiveUnitType() == CSSUnitType::CSS_VALUE_ID ? m_value.valueID : CSSValueInvalid; }</span>
  
      template&lt;typename T&gt; inline operator T() const; // Defined in CSSPrimitiveValueMappings.h
  
      String customCSSText() const;
  
      // FIXME-NEWPARSER: Can ditch the boolean and just use the unit type once old parser is gone.
<span class="udiff-line-modified-removed">-     bool isQuirkValue() const { return m_isQuirkValue || primitiveType() == CSS_QUIRKY_EMS; }</span>
<span class="udiff-line-modified-added">+     bool isQuirkValue() const { return m_isQuirkValue || primitiveType() == CSSUnitType::CSS_QUIRKY_EMS; }</span>
  
      bool equals(const CSSPrimitiveValue&amp;) const;
  
<span class="udiff-line-modified-removed">-     static UnitType canonicalUnitTypeForCategory(UnitCategory);</span>
<span class="udiff-line-modified-removed">-     static double conversionToCanonicalUnitsScaleFactor(UnitType);</span>
<span class="udiff-line-modified-added">+     static double conversionToCanonicalUnitsScaleFactor(CSSUnitType);</span>
<span class="udiff-line-modified-added">+     static String unitTypeString(CSSUnitType);</span>
  
<span class="udiff-line-modified-removed">-     static double computeNonCalcLengthDouble(const CSSToLengthConversionData&amp;, UnitType, double value);</span>
<span class="udiff-line-modified-added">+     static double computeNonCalcLengthDouble(const CSSToLengthConversionData&amp;, CSSUnitType, double value);</span>
<span class="udiff-line-added">+     // True if computeNonCalcLengthDouble would produce identical results when resolved against both these styles.</span>
<span class="udiff-line-added">+     static bool equalForLengthResolution(const RenderStyle&amp;, const RenderStyle&amp;);</span>
  
      Ref&lt;DeprecatedCSSOMPrimitiveValue&gt; createDeprecatedCSSOMPrimitiveWrapper(CSSStyleDeclaration&amp;) const;
  
      void collectDirectComputationalDependencies(HashSet&lt;CSSPropertyID&gt;&amp;) const;
      void collectDirectRootComputationalDependencies(HashSet&lt;CSSPropertyID&gt;&amp;) const;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -291,12 +213,16 @@</span>
      CSSPrimitiveValue(CSSPropertyID);
      CSSPrimitiveValue(const Color&amp;);
      CSSPrimitiveValue(const Length&amp;);
      CSSPrimitiveValue(const Length&amp;, const RenderStyle&amp;);
      CSSPrimitiveValue(const LengthSize&amp;, const RenderStyle&amp;);
<span class="udiff-line-modified-removed">-     CSSPrimitiveValue(const String&amp;, UnitType);</span>
<span class="udiff-line-modified-removed">-     CSSPrimitiveValue(double, UnitType);</span>
<span class="udiff-line-modified-added">+     CSSPrimitiveValue(const String&amp;, CSSUnitType);</span>
<span class="udiff-line-modified-added">+     CSSPrimitiveValue(double, CSSUnitType);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     CSSPrimitiveValue(StaticCSSValueTag, CSSValueID);</span>
<span class="udiff-line-added">+     CSSPrimitiveValue(StaticCSSValueTag, const Color&amp;);</span>
<span class="udiff-line-added">+     CSSPrimitiveValue(StaticCSSValueTag, double, CSSUnitType);</span>
  
      template&lt;typename T&gt; CSSPrimitiveValue(T); // Defined in CSSPrimitiveValueMappings.h
      template&lt;typename T&gt; CSSPrimitiveValue(RefPtr&lt;T&gt;&amp;&amp;);
      template&lt;typename T&gt; CSSPrimitiveValue(Ref&lt;T&gt;&amp;&amp;);
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -311,11 +237,14 @@</span>
      void init(Ref&lt;Counter&gt;&amp;&amp;);
      void init(Ref&lt;Pair&gt;&amp;&amp;);
      void init(Ref&lt;Quad&gt;&amp;&amp;);
      void init(Ref&lt;Rect&gt;&amp;&amp;);
  
<span class="udiff-line-modified-removed">-     Optional&lt;double&gt; doubleValueInternal(UnitType targetUnitType) const;</span>
<span class="udiff-line-modified-added">+     CSSUnitType primitiveUnitType() const { return static_cast&lt;CSSUnitType&gt;(m_primitiveUnitType); }</span>
<span class="udiff-line-added">+     void setPrimitiveUnitType(CSSUnitType type) { m_primitiveUnitType = static_cast&lt;unsigned&gt;(type); }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     Optional&lt;double&gt; doubleValueInternal(CSSUnitType targetUnitType) const;</span>
  
      double computeLengthDouble(const CSSToLengthConversionData&amp;) const;
  
      ALWAYS_INLINE String formatNumberForCustomCSSText() const;
      NEVER_INLINE String formatNumberValue(StringView) const;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -334,63 +263,55 @@</span>
          CSSCalcValue* calc;
          const CSSFontFamily* fontFamily;
      } m_value;
  };
  
<span class="udiff-line-modified-removed">- inline bool CSSPrimitiveValue::isAngle() const</span>
<span class="udiff-line-removed">- {</span>
<span class="udiff-line-removed">-     auto primitiveType = this-&gt;primitiveType();</span>
<span class="udiff-line-removed">-     return primitiveType == CSS_DEG</span>
<span class="udiff-line-removed">-         || primitiveType == CSS_RAD</span>
<span class="udiff-line-removed">-         || primitiveType == CSS_GRAD</span>
<span class="udiff-line-removed">-         || primitiveType == CSS_TURN;</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- inline bool CSSPrimitiveValue::isFontRelativeLength(UnitType type)</span>
<span class="udiff-line-modified-added">+ inline bool CSSPrimitiveValue::isFontRelativeLength(CSSUnitType type)</span>
  {
<span class="udiff-line-modified-removed">-     return type == CSS_EMS</span>
<span class="udiff-line-modified-removed">-         || type == CSS_EXS</span>
<span class="udiff-line-modified-removed">-         || type == CSS_REMS</span>
<span class="udiff-line-modified-removed">-         || type == CSS_CHS</span>
<span class="udiff-line-modified-removed">-         || type == CSS_QUIRKY_EMS;</span>
<span class="udiff-line-modified-added">+     return type == CSSUnitType::CSS_EMS</span>
<span class="udiff-line-modified-added">+         || type == CSSUnitType::CSS_EXS</span>
<span class="udiff-line-modified-added">+         || type == CSSUnitType::CSS_REMS</span>
<span class="udiff-line-modified-added">+         || type == CSSUnitType::CSS_CHS</span>
<span class="udiff-line-modified-added">+         || type == CSSUnitType::CSS_QUIRKY_EMS;</span>
  }
  
<span class="udiff-line-modified-removed">- inline bool CSSPrimitiveValue::isLength(UnitType type)</span>
<span class="udiff-line-modified-added">+ inline bool CSSPrimitiveValue::isLength(CSSUnitType type)</span>
  {
<span class="udiff-line-modified-removed">-     return (type &gt;= CSS_EMS &amp;&amp; type &lt;= CSS_PC)</span>
<span class="udiff-line-modified-removed">-         || type == CSS_REMS</span>
<span class="udiff-line-modified-removed">-         || type == CSS_CHS</span>
<span class="udiff-line-modified-added">+     return (type &gt;= CSSUnitType::CSS_EMS &amp;&amp; type &lt;= CSSUnitType::CSS_PC)</span>
<span class="udiff-line-modified-added">+         || type == CSSUnitType::CSS_REMS</span>
<span class="udiff-line-modified-added">+         || type == CSSUnitType::CSS_CHS</span>
<span class="udiff-line-added">+         || type == CSSUnitType::CSS_Q</span>
          || isViewportPercentageLength(type)
<span class="udiff-line-modified-removed">-         || type == CSS_QUIRKY_EMS;</span>
<span class="udiff-line-modified-added">+         || type == CSSUnitType::CSS_QUIRKY_EMS;</span>
  }
  
<span class="udiff-line-modified-removed">- inline bool CSSPrimitiveValue::isResolution(UnitType type)</span>
<span class="udiff-line-modified-added">+ inline bool CSSPrimitiveValue::isResolution(CSSUnitType type)</span>
  {
<span class="udiff-line-modified-removed">-     return type &gt;= CSS_DPPX &amp;&amp; type &lt;= CSS_DPCM;</span>
<span class="udiff-line-modified-added">+     return type &gt;= CSSUnitType::CSS_DPPX &amp;&amp; type &lt;= CSSUnitType::CSS_DPCM;</span>
  }
  
  template&lt;typename T&gt; inline Ref&lt;CSSPrimitiveValue&gt; CSSPrimitiveValue::create(T&amp;&amp; value)
  {
      return adoptRef(*new CSSPrimitiveValue(std::forward&lt;T&gt;(value)));
  }
  
<span class="udiff-line-modified-removed">- inline Ref&lt;CSSPrimitiveValue&gt; CSSPrimitiveValue::createAllowingMarginQuirk(double value, UnitType type)</span>
<span class="udiff-line-modified-added">+ inline Ref&lt;CSSPrimitiveValue&gt; CSSPrimitiveValue::createAllowingMarginQuirk(double value, CSSUnitType type)</span>
  {
      auto result = adoptRef(*new CSSPrimitiveValue(value, type));
      result-&gt;m_isQuirkValue = true;
      return result;
  }
  
  template&lt;typename T, CSSPrimitiveValue::TimeUnit timeUnit&gt; inline T CSSPrimitiveValue::computeTime() const
  {
<span class="udiff-line-modified-removed">-     if (timeUnit == Seconds &amp;&amp; primitiveType() == CSS_S)</span>
<span class="udiff-line-modified-added">+     if (timeUnit == Seconds &amp;&amp; primitiveType() == CSSUnitType::CSS_S)</span>
          return value&lt;T&gt;();
<span class="udiff-line-modified-removed">-     if (timeUnit == Seconds &amp;&amp; primitiveType() == CSS_MS)</span>
<span class="udiff-line-modified-added">+     if (timeUnit == Seconds &amp;&amp; primitiveType() == CSSUnitType::CSS_MS)</span>
          return value&lt;T&gt;() / 1000;
<span class="udiff-line-modified-removed">-     if (timeUnit == Milliseconds &amp;&amp; primitiveType() == CSS_MS)</span>
<span class="udiff-line-modified-added">+     if (timeUnit == Milliseconds &amp;&amp; primitiveType() == CSSUnitType::CSS_MS)</span>
          return value&lt;T&gt;();
<span class="udiff-line-modified-removed">-     if (timeUnit == Milliseconds &amp;&amp; primitiveType() == CSS_S)</span>
<span class="udiff-line-modified-added">+     if (timeUnit == Milliseconds &amp;&amp; primitiveType() == CSSUnitType::CSS_S)</span>
          return value&lt;T&gt;() * 1000;
      ASSERT_NOT_REACHED();
      return 0;
  }
  
</pre>
<center><a href="CSSPrimitiveValue.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CSSPrimitiveValueMappings.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>