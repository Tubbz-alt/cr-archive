<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old modules/javafx.web/src/main/native/Source/WebCore/platform/graphics/filters/Filter.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 /*
 2  * Copyright (C) 2009 Dirk Schulze &lt;krit@webkit.org&gt;
 3  * Copyright (C) 2013 Google Inc. All rights reserved.
 4  *
 5  * This library is free software; you can redistribute it and/or
 6  * modify it under the terms of the GNU Library General Public
 7  * License as published by the Free Software Foundation; either
 8  * version 2 of the License, or (at your option) any later version.
 9  *
10  * This library is distributed in the hope that it will be useful,
11  * but WITHOUT ANY WARRANTY; without even the implied warranty of
12  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
13  * Library General Public License for more details.
14  *
15  * You should have received a copy of the GNU Library General Public License
16  * along with this library; see the file COPYING.LIB.  If not, write to
17  * the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
18  * Boston, MA 02110-1301, USA.
19  */
20 
21 #pragma once
22 
23 #include &quot;AffineTransform.h&quot;
24 #include &quot;FloatRect.h&quot;
25 #include &quot;GraphicsTypes.h&quot;
26 #include &quot;ImageBuffer.h&quot;
27 #include &lt;wtf/RefCounted.h&gt;
28 
29 namespace WebCore {
30 
31 class FilterEffect;
32 
33 class Filter : public RefCounted&lt;Filter&gt; {
34 public:
35     Filter(const AffineTransform&amp; absoluteTransform, float filterScale = 1)
36         : m_absoluteTransform(absoluteTransform)
37         , m_filterScale(filterScale)
38     { }
39     virtual ~Filter() = default;
40 
41     void setSourceImage(std::unique_ptr&lt;ImageBuffer&gt;&amp;&amp; sourceImage) { m_sourceImage = WTFMove(sourceImage); }
42     ImageBuffer* sourceImage() { return m_sourceImage.get(); }
43 
44     FloatSize filterResolution() const { return m_filterResolution; }
45     void setFilterResolution(const FloatSize&amp; filterResolution) { m_filterResolution = filterResolution; }
46 
47     float filterScale() const { return m_filterScale; }
48     void setFilterScale(float scale) { m_filterScale = scale; }
49 
50     const AffineTransform&amp; absoluteTransform() const { return m_absoluteTransform; }
51 
52     RenderingMode renderingMode() const { return m_renderingMode; }
53     void setRenderingMode(RenderingMode renderingMode) { m_renderingMode = renderingMode; }
54 
55     virtual bool isSVGFilter() const { return false; }
56     virtual bool isCSSFilter() const { return false; }
57 
58     virtual FloatSize scaledByFilterResolution(FloatSize size) const { return size * m_filterResolution; }
59 
60     virtual FloatRect sourceImageRect() const = 0;
61     virtual FloatRect filterRegion() const = 0;
62     virtual FloatRect filterRegionInUserSpace() const = 0;
63 
64 protected:
65     explicit Filter(const FloatSize&amp; filterResolution)
66         : m_filterResolution(filterResolution)
67     {
68     }
69 
70 private:
71     std::unique_ptr&lt;ImageBuffer&gt; m_sourceImage;
72     FloatSize m_filterResolution;
73     AffineTransform m_absoluteTransform;
74     RenderingMode m_renderingMode { Unaccelerated };
75     float m_filterScale { 1 };
76 };
77 
78 } // namespace WebCore
    </pre>
  </body>
</html>