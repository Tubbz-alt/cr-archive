diff a/modules/javafx.web/src/main/native/Source/WebKitLegacy/CMakeLists.txt b/modules/javafx.web/src/main/native/Source/WebKitLegacy/CMakeLists.txt
--- a/modules/javafx.web/src/main/native/Source/WebKitLegacy/CMakeLists.txt
+++ b/modules/javafx.web/src/main/native/Source/WebKitLegacy/CMakeLists.txt
@@ -1,10 +1,13 @@
 cmake_minimum_required(VERSION 3.10)
 include(WebKitCommon)
+include(target/TargetWTF)
+include(target/TargetJavaScriptCore)
 set_property(DIRECTORY . PROPERTY FOLDER "WebKitLegacy")
 
 set(WebKitLegacy_SOURCES
+    Storage/InProcessIDBServer.cpp
     Storage/StorageAreaImpl.cpp
     Storage/StorageAreaSync.cpp
     Storage/StorageNamespaceImpl.cpp
     Storage/StorageSyncManager.cpp
     Storage/StorageThread.cpp
@@ -23,14 +26,14 @@
     "${WEBKITLEGACY_DIR}/WebCoreSupport"
     "${WebCore_PRIVATE_FRAMEWORK_HEADERS_DIR}"
     "${WebKitLegacy_DERIVED_SOURCES_DIR}"
 )
 
-set(WebKitLegacy_LIBRARIES
-    PRIVATE WebKit::JavaScriptCore
-    PRIVATE WebCore${DEBUG_SUFFIX}
-    PRIVATE PAL${DEBUG_SUFFIX}
+set(WebKitLegacy_PRIVATE_LIBRARIES
+    WebKit::JavaScriptCore
+    WebCore${DEBUG_SUFFIX}
+    PAL${DEBUG_SUFFIX}
 )
 
 WEBKIT_FRAMEWORK_DECLARE(WebKitLegacy)
 WEBKIT_INCLUDE_CONFIG_FILES_IF_EXISTS()
 
@@ -58,9 +61,9 @@
         TARGET WebKitLegacy
         POST_BUILD
         COMMAND ${PERL_EXECUTABLE} ${WEBKIT_LIBRARIES_DIR}/tools/scripts/version-stamp.pl ${WebKitLegacy_DERIVED_SOURCES_DIR} $<TARGET_FILE:WebKitLegacy>
         VERBATIM)
 
-     if (APPLE)
-         add_subdirectory(win/WebKitQuartzCoreAdditions)
-     endif ()
+    if (USE_CA)
+        add_subdirectory(win/WebKitQuartzCoreAdditions)
+    endif ()
 endif ()
