diff a/modules/javafx.web/src/main/native/Source/JavaScriptCore/dfg/DFGDesiredWatchpoints.h b/modules/javafx.web/src/main/native/Source/JavaScriptCore/dfg/DFGDesiredWatchpoints.h
--- a/modules/javafx.web/src/main/native/Source/JavaScriptCore/dfg/DFGDesiredWatchpoints.h
+++ b/modules/javafx.web/src/main/native/Source/JavaScriptCore/dfg/DFGDesiredWatchpoints.h
@@ -43,11 +43,16 @@
 
 template<typename T>
 struct SetPointerAdaptor {
     static void add(CodeBlock* codeBlock, T set, CommonData& common)
     {
-        return set->add(common.watchpoints.add(codeBlock));
+        CodeBlockJettisoningWatchpoint* watchpoint = nullptr;
+        {
+            ConcurrentJSLocker locker(codeBlock->m_lock);
+            watchpoint = common.watchpoints.add(codeBlock);
+        }
+        return set->add(WTFMove(watchpoint));
     }
     static bool hasBeenInvalidated(T set)
     {
         return set->hasBeenInvalidated();
     }
@@ -106,11 +111,11 @@
     }
 };
 
 template<typename WatchpointSetType, typename Adaptor = SetPointerAdaptor<WatchpointSetType>>
 class GenericDesiredWatchpoints {
-#if !ASSERT_DISABLED
+#if ASSERT_ENABLED
     typedef HashMap<WatchpointSetType, bool> StateMap;
 #endif
 public:
     GenericDesiredWatchpoints()
         : m_reallyAdded(false)
