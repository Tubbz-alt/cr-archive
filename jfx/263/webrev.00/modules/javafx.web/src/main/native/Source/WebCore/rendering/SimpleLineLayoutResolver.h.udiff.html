<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/rendering/SimpleLineLayoutResolver.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SimpleLineLayoutResolver.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="TableLayout.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/rendering/SimpleLineLayoutResolver.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -56,15 +56,17 @@</span>
  
          FloatRect rect() const;
          float expansion() const;
          ExpansionBehavior expansionBehavior() const;
          int baselinePosition() const;
<span class="udiff-line-added">+         int baselineOffset() const { return m_iterator.resolver().m_baseline; }</span>
          StringView text() const;
          String textWithHyphen() const;
          const RenderObject&amp; renderer() const;
          bool isEndOfLine() const;
          bool hasHyphen() const { return m_iterator.simpleRun().hasHyphen; }
<span class="udiff-line-added">+         bool isLineBreak() const { return m_iterator.simpleRun().isLineBreak; }</span>
          const SimpleLineLayout::Run&amp; simpleRun() const { return m_iterator.simpleRun(); }
  
          unsigned lineIndex() const;
  
      private:
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -87,19 +89,22 @@</span>
          bool operator==(const Iterator&amp;) const;
          bool operator!=(const Iterator&amp;) const;
  
          Run operator*() const;
  
<span class="udiff-line-added">+         bool atBegin() const;</span>
<span class="udiff-line-added">+ </span>
      private:
          const SimpleLineLayout::Run&amp; simpleRun() const;
          unsigned lineIndex() const { return m_lineIndex; }
          Iterator&amp; advance();
          Iterator&amp; advanceLines(unsigned);
<span class="udiff-line-modified-removed">-         const RunResolver&amp; resolver() const { return m_resolver; }</span>
<span class="udiff-line-modified-removed">-         bool inQuirksMode() const { return m_resolver.m_inQuirksMode; }</span>
<span class="udiff-line-modified-added">+         const RunResolver&amp; resolver() const { return *m_resolver; }</span>
<span class="udiff-line-modified-added">+         const Layout&amp; layout() const { return *m_layout; }</span>
  
<span class="udiff-line-modified-removed">-         const RunResolver&amp; m_resolver;</span>
<span class="udiff-line-modified-added">+         RefPtr&lt;const Layout&gt; m_layout;</span>
<span class="udiff-line-added">+         const RunResolver* m_resolver;</span>
          unsigned m_runIndex;
          unsigned m_lineIndex;
      };
  
      RunResolver(const RenderBlockFlow&amp;, const Layout&amp;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -127,11 +132,10 @@</span>
      const LayoutUnit m_baseline;
      const LayoutUnit m_borderAndPaddingBefore;
      const float m_ascent;
      const float m_descent;
      const float m_visualOverflowOffset;
<span class="udiff-line-removed">-     const bool m_inQuirksMode;</span>
  };
  
  class LineResolver {
  public:
      class Iterator {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -216,11 +220,11 @@</span>
  
  inline float RunResolver::Run::computeBaselinePosition() const
  {
      auto&amp; resolver = m_iterator.resolver();
      auto offset = resolver.m_borderAndPaddingBefore + resolver.m_lineHeight * lineIndex();
<span class="udiff-line-modified-removed">-     if (!resolver.m_layout.hasLineStruts())</span>
<span class="udiff-line-modified-added">+     if (!m_iterator.layout().hasLineStruts())</span>
          return offset + resolver.m_baseline;
      for (auto&amp; strutEntry : resolver.m_layout.struts()) {
          if (strutEntry.lineBreak &gt; lineIndex())
              break;
          offset += strutEntry.offset;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -236,11 +240,11 @@</span>
      return *this;
  }
  
  inline bool RunResolver::Iterator::operator==(const Iterator&amp; other) const
  {
<span class="udiff-line-modified-removed">-     ASSERT(&amp;m_resolver == &amp;other.m_resolver);</span>
<span class="udiff-line-modified-added">+     ASSERT(m_resolver == other.m_resolver);</span>
      return m_runIndex == other.m_runIndex;
  }
  
  inline bool RunResolver::Iterator::operator!=(const Iterator&amp; other) const
  {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -250,13 +254,18 @@</span>
  inline RunResolver::Run RunResolver::Iterator::operator*() const
  {
      return Run(*this);
  }
  
<span class="udiff-line-added">+ inline bool RunResolver::Iterator::atBegin() const</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+     return *this == resolver().begin();</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
  inline const SimpleLineLayout::Run&amp; RunResolver::Iterator::simpleRun() const
  {
<span class="udiff-line-modified-removed">-     return m_resolver.m_layout.runAt(m_runIndex);</span>
<span class="udiff-line-modified-added">+     return layout().runAt(m_runIndex);</span>
  }
  
  inline RunResolver::Iterator RunResolver::begin() const
  {
      return Iterator(*this, 0, 0);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -297,15 +306,10 @@</span>
  {
      auto runRange = m_runResolver.rangeForRect(rect);
      return { Iterator(runRange.begin()), Iterator(runRange.end()) };
  }
  
<span class="udiff-line-removed">- inline RunResolver runResolver(const RenderBlockFlow&amp; flow, const Layout&amp; layout)</span>
<span class="udiff-line-removed">- {</span>
<span class="udiff-line-removed">-     return RunResolver(flow, layout);</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-removed">- </span>
  inline LineResolver lineResolver(const RunResolver&amp; runResolver)
  {
      return LineResolver(runResolver);
  }
  
</pre>
<center><a href="SimpleLineLayoutResolver.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="TableLayout.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>