<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/jit/JITInlineCacheGenerator.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="JITInlineCacheGenerator.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="JITInlines.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/jit/JITInlineCacheGenerator.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
103 class JITGetByIdGenerator : public JITByIdGenerator {
104 public:
105     JITGetByIdGenerator() { }
106 
107     JITGetByIdGenerator(
108         CodeBlock*, CodeOrigin, CallSiteIndex, const RegisterSet&amp; usedRegisters, UniquedStringImpl* propertyName,
109         JSValueRegs base, JSValueRegs value, AccessType);
110 
111     void generateFastPath(MacroAssembler&amp;);
112 
113 private:
114     bool m_isLengthAccess;
115 };
116 
117 class JITGetByIdWithThisGenerator : public JITByIdGenerator {
118 public:
119     JITGetByIdWithThisGenerator() { }
120 
121     JITGetByIdWithThisGenerator(
122         CodeBlock*, CodeOrigin, CallSiteIndex, const RegisterSet&amp; usedRegisters, UniquedStringImpl* propertyName,
<span class="line-modified">123         JSValueRegs value, JSValueRegs base, JSValueRegs thisRegs, AccessType);</span>
124 
125     void generateFastPath(MacroAssembler&amp;);
126 };
127 
128 class JITPutByIdGenerator : public JITByIdGenerator {
129 public:
130     JITPutByIdGenerator() { }
131 
132     JITPutByIdGenerator(
133         CodeBlock*, CodeOrigin, CallSiteIndex, const RegisterSet&amp; usedRegisters, JSValueRegs base,
134         JSValueRegs value, GPRReg scratch, ECMAMode, PutKind);
135 
136     void generateFastPath(MacroAssembler&amp;);
137 
<span class="line-modified">138     V_JITOperation_ESsiJJI slowPathFunction();</span>
139 
140 private:
141     ECMAMode m_ecmaMode;
142     PutKind m_putKind;
143 };
144 
145 class JITInByIdGenerator : public JITByIdGenerator {
146 public:
147     JITInByIdGenerator() { }
148 
149     JITInByIdGenerator(
150         CodeBlock*, CodeOrigin, CallSiteIndex, const RegisterSet&amp; usedRegisters, UniquedStringImpl* propertyName,
151         JSValueRegs base, JSValueRegs value);
152 
153     void generateFastPath(MacroAssembler&amp;);
154 };
155 
156 class JITInstanceOfGenerator : public JITInlineCacheGenerator {
157 public:
158     JITInstanceOfGenerator() { }
159 
160     JITInstanceOfGenerator(
161         CodeBlock*, CodeOrigin, CallSiteIndex, const RegisterSet&amp; usedRegisters, GPRReg result,
162         GPRReg value, GPRReg prototype, GPRReg scratch1, GPRReg scratch2,
163         bool prototypeIsKnownObject = false);
164 
165     void generateFastPath(MacroAssembler&amp;);
166 
167     void finalize(LinkBuffer&amp; fastPathLinkBuffer, LinkBuffer&amp; slowPathLinkBuffer);
168 
169 private:
170     MacroAssembler::PatchableJump m_jump;
171 };
172 





























173 template&lt;typename VectorType&gt;
174 void finalizeInlineCaches(VectorType&amp; vector, LinkBuffer&amp; fastPath, LinkBuffer&amp; slowPath)
175 {
176     for (auto&amp; entry : vector)
177         entry.finalize(fastPath, slowPath);
178 }
179 
180 template&lt;typename VectorType&gt;
181 void finalizeInlineCaches(VectorType&amp; vector, LinkBuffer&amp; linkBuffer)
182 {
183     finalizeInlineCaches(vector, linkBuffer, linkBuffer);
184 }
185 
186 } // namespace JSC
187 
188 #endif // ENABLE(JIT)
</pre>
</td>
<td>
<hr />
<pre>
103 class JITGetByIdGenerator : public JITByIdGenerator {
104 public:
105     JITGetByIdGenerator() { }
106 
107     JITGetByIdGenerator(
108         CodeBlock*, CodeOrigin, CallSiteIndex, const RegisterSet&amp; usedRegisters, UniquedStringImpl* propertyName,
109         JSValueRegs base, JSValueRegs value, AccessType);
110 
111     void generateFastPath(MacroAssembler&amp;);
112 
113 private:
114     bool m_isLengthAccess;
115 };
116 
117 class JITGetByIdWithThisGenerator : public JITByIdGenerator {
118 public:
119     JITGetByIdWithThisGenerator() { }
120 
121     JITGetByIdWithThisGenerator(
122         CodeBlock*, CodeOrigin, CallSiteIndex, const RegisterSet&amp; usedRegisters, UniquedStringImpl* propertyName,
<span class="line-modified">123         JSValueRegs value, JSValueRegs base, JSValueRegs thisRegs);</span>
124 
125     void generateFastPath(MacroAssembler&amp;);
126 };
127 
128 class JITPutByIdGenerator : public JITByIdGenerator {
129 public:
130     JITPutByIdGenerator() { }
131 
132     JITPutByIdGenerator(
133         CodeBlock*, CodeOrigin, CallSiteIndex, const RegisterSet&amp; usedRegisters, JSValueRegs base,
134         JSValueRegs value, GPRReg scratch, ECMAMode, PutKind);
135 
136     void generateFastPath(MacroAssembler&amp;);
137 
<span class="line-modified">138     V_JITOperation_GSsiJJI slowPathFunction();</span>
139 
140 private:
141     ECMAMode m_ecmaMode;
142     PutKind m_putKind;
143 };
144 
145 class JITInByIdGenerator : public JITByIdGenerator {
146 public:
147     JITInByIdGenerator() { }
148 
149     JITInByIdGenerator(
150         CodeBlock*, CodeOrigin, CallSiteIndex, const RegisterSet&amp; usedRegisters, UniquedStringImpl* propertyName,
151         JSValueRegs base, JSValueRegs value);
152 
153     void generateFastPath(MacroAssembler&amp;);
154 };
155 
156 class JITInstanceOfGenerator : public JITInlineCacheGenerator {
157 public:
158     JITInstanceOfGenerator() { }
159 
160     JITInstanceOfGenerator(
161         CodeBlock*, CodeOrigin, CallSiteIndex, const RegisterSet&amp; usedRegisters, GPRReg result,
162         GPRReg value, GPRReg prototype, GPRReg scratch1, GPRReg scratch2,
163         bool prototypeIsKnownObject = false);
164 
165     void generateFastPath(MacroAssembler&amp;);
166 
167     void finalize(LinkBuffer&amp; fastPathLinkBuffer, LinkBuffer&amp; slowPathLinkBuffer);
168 
169 private:
170     MacroAssembler::PatchableJump m_jump;
171 };
172 
<span class="line-added">173 class JITGetByValGenerator : public JITInlineCacheGenerator {</span>
<span class="line-added">174     using Base = JITInlineCacheGenerator;</span>
<span class="line-added">175 public:</span>
<span class="line-added">176     JITGetByValGenerator() { }</span>
<span class="line-added">177 </span>
<span class="line-added">178     JITGetByValGenerator(</span>
<span class="line-added">179         CodeBlock*, CodeOrigin, CallSiteIndex, const RegisterSet&amp; usedRegisters,</span>
<span class="line-added">180         JSValueRegs base, JSValueRegs property, JSValueRegs result);</span>
<span class="line-added">181 </span>
<span class="line-added">182     MacroAssembler::Jump slowPathJump() const</span>
<span class="line-added">183     {</span>
<span class="line-added">184         ASSERT(m_slowPathJump.m_jump.isSet());</span>
<span class="line-added">185         return m_slowPathJump.m_jump;</span>
<span class="line-added">186     }</span>
<span class="line-added">187 </span>
<span class="line-added">188     void finalize(</span>
<span class="line-added">189         LinkBuffer&amp; fastPathLinkBuffer, LinkBuffer&amp; slowPathLinkBuffer);</span>
<span class="line-added">190 </span>
<span class="line-added">191     void generateFastPath(MacroAssembler&amp;);</span>
<span class="line-added">192 </span>
<span class="line-added">193 private:</span>
<span class="line-added">194     JSValueRegs m_base;</span>
<span class="line-added">195     JSValueRegs m_result;</span>
<span class="line-added">196     JSValueRegs m_;</span>
<span class="line-added">197 </span>
<span class="line-added">198     MacroAssembler::Label m_start;</span>
<span class="line-added">199     MacroAssembler::PatchableJump m_slowPathJump;</span>
<span class="line-added">200 };</span>
<span class="line-added">201 </span>
202 template&lt;typename VectorType&gt;
203 void finalizeInlineCaches(VectorType&amp; vector, LinkBuffer&amp; fastPath, LinkBuffer&amp; slowPath)
204 {
205     for (auto&amp; entry : vector)
206         entry.finalize(fastPath, slowPath);
207 }
208 
209 template&lt;typename VectorType&gt;
210 void finalizeInlineCaches(VectorType&amp; vector, LinkBuffer&amp; linkBuffer)
211 {
212     finalizeInlineCaches(vector, linkBuffer, linkBuffer);
213 }
214 
215 } // namespace JSC
216 
217 #endif // ENABLE(JIT)
</pre>
</td>
</tr>
</table>
<center><a href="JITInlineCacheGenerator.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="JITInlines.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>