<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/testRegExp.cpp</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="runtime/WeakSetPrototype.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="tools/CompilerTimingScope.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/testRegExp.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  *  Copyright (C) 2011, 2015 Apple Inc. All rights reserved.</span>
  3  *
  4  *  This library is free software; you can redistribute it and/or
  5  *  modify it under the terms of the GNU Library General Public
  6  *  License as published by the Free Software Foundation; either
  7  *  version 2 of the License, or (at your option) any later version.
  8  *
  9  *  This library is distributed in the hope that it will be useful,
 10  *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 11  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 12  *  Library General Public License for more details.
 13  *
 14  *  You should have received a copy of the GNU Library General Public License
 15  *  along with this library; see the file COPYING.LIB.  If not, write to
 16  *  the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 17  *  Boston, MA 02110-1301, USA.
 18  *
 19  */
 20 
 21 #include &quot;config.h&quot;
 22 #include &quot;RegExp.h&quot;
</pre>
<hr />
<pre>
 85 }
 86 
 87 long StopWatch::getElapsedMS()
 88 {
 89     return (m_stopTime - m_startTime).millisecondsAs&lt;long&gt;();
 90 }
 91 
 92 struct RegExpTest {
 93     RegExpTest()
 94         : offset(0)
 95         , result(0)
 96     {
 97     }
 98 
 99     String subject;
100     int offset;
101     int result;
102     Vector&lt;int, 32&gt; expectVector;
103 };
104 
<span class="line-modified">105 class GlobalObject : public JSGlobalObject {</span>
106 private:
107     GlobalObject(VM&amp;, Structure*, const Vector&lt;String&gt;&amp; arguments);
108 
109 public:
<span class="line-modified">110     typedef JSGlobalObject Base;</span>
111 
112     static GlobalObject* create(VM&amp; vm, Structure* structure, const Vector&lt;String&gt;&amp; arguments)
113     {
114         GlobalObject* globalObject = new (NotNull, allocateCell&lt;GlobalObject&gt;(vm.heap)) GlobalObject(vm, structure, arguments);
115         return globalObject;
116     }
117 
118     DECLARE_INFO;
119 
<span class="line-modified">120     static const bool needsDestructor = false;</span>
121 
122     static Structure* createStructure(VM&amp; vm, JSValue prototype)
123     {
124         return Structure::create(vm, 0, prototype, TypeInfo(GlobalObjectType, StructureFlags), info());
125     }
126 
127 protected:
128     void finishCreation(VM&amp; vm, const Vector&lt;String&gt;&amp; arguments)
129     {
130         Base::finishCreation(vm);
131         UNUSED_PARAM(arguments);
132     }
133 };

134 
135 const ClassInfo GlobalObject::s_info = { &quot;global&quot;, &amp;JSGlobalObject::s_info, nullptr, nullptr, CREATE_METHOD_TABLE(GlobalObject) };
136 
137 GlobalObject::GlobalObject(VM&amp; vm, Structure* structure, const Vector&lt;String&gt;&amp; arguments)
138     : JSGlobalObject(vm, structure)
139 {
140     finishCreation(vm, arguments);
141 }
142 
143 // Use SEH for Release builds only to get rid of the crash report dialog
144 // (luckily the same tests fail in Release and Debug builds so far). Need to
145 // be in a separate main function because the realMain function requires object
146 // unwinding.
147 
148 #if COMPILER(MSVC) &amp;&amp; !defined(_DEBUG)
149 #define TRY       __try {
150 #define EXCEPT(x) } __except (EXCEPTION_EXECUTE_HANDLER) { x; }
151 #else
152 #define TRY
153 #define EXCEPT(x)
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  *  Copyright (C) 2011-2019 Apple Inc. All rights reserved.</span>
  3  *
  4  *  This library is free software; you can redistribute it and/or
  5  *  modify it under the terms of the GNU Library General Public
  6  *  License as published by the Free Software Foundation; either
  7  *  version 2 of the License, or (at your option) any later version.
  8  *
  9  *  This library is distributed in the hope that it will be useful,
 10  *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 11  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 12  *  Library General Public License for more details.
 13  *
 14  *  You should have received a copy of the GNU Library General Public License
 15  *  along with this library; see the file COPYING.LIB.  If not, write to
 16  *  the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 17  *  Boston, MA 02110-1301, USA.
 18  *
 19  */
 20 
 21 #include &quot;config.h&quot;
 22 #include &quot;RegExp.h&quot;
</pre>
<hr />
<pre>
 85 }
 86 
 87 long StopWatch::getElapsedMS()
 88 {
 89     return (m_stopTime - m_startTime).millisecondsAs&lt;long&gt;();
 90 }
 91 
 92 struct RegExpTest {
 93     RegExpTest()
 94         : offset(0)
 95         , result(0)
 96     {
 97     }
 98 
 99     String subject;
100     int offset;
101     int result;
102     Vector&lt;int, 32&gt; expectVector;
103 };
104 
<span class="line-modified">105 class GlobalObject final : public JSGlobalObject {</span>
106 private:
107     GlobalObject(VM&amp;, Structure*, const Vector&lt;String&gt;&amp; arguments);
108 
109 public:
<span class="line-modified">110     using Base = JSGlobalObject;</span>
111 
112     static GlobalObject* create(VM&amp; vm, Structure* structure, const Vector&lt;String&gt;&amp; arguments)
113     {
114         GlobalObject* globalObject = new (NotNull, allocateCell&lt;GlobalObject&gt;(vm.heap)) GlobalObject(vm, structure, arguments);
115         return globalObject;
116     }
117 
118     DECLARE_INFO;
119 
<span class="line-modified">120     static constexpr bool needsDestructor = true;</span>
121 
122     static Structure* createStructure(VM&amp; vm, JSValue prototype)
123     {
124         return Structure::create(vm, 0, prototype, TypeInfo(GlobalObjectType, StructureFlags), info());
125     }
126 
127 protected:
128     void finishCreation(VM&amp; vm, const Vector&lt;String&gt;&amp; arguments)
129     {
130         Base::finishCreation(vm);
131         UNUSED_PARAM(arguments);
132     }
133 };
<span class="line-added">134 STATIC_ASSERT_ISO_SUBSPACE_SHARABLE(GlobalObject, JSGlobalObject);</span>
135 
136 const ClassInfo GlobalObject::s_info = { &quot;global&quot;, &amp;JSGlobalObject::s_info, nullptr, nullptr, CREATE_METHOD_TABLE(GlobalObject) };
137 
138 GlobalObject::GlobalObject(VM&amp; vm, Structure* structure, const Vector&lt;String&gt;&amp; arguments)
139     : JSGlobalObject(vm, structure)
140 {
141     finishCreation(vm, arguments);
142 }
143 
144 // Use SEH for Release builds only to get rid of the crash report dialog
145 // (luckily the same tests fail in Release and Debug builds so far). Need to
146 // be in a separate main function because the realMain function requires object
147 // unwinding.
148 
149 #if COMPILER(MSVC) &amp;&amp; !defined(_DEBUG)
150 #define TRY       __try {
151 #define EXCEPT(x) } __except (EXCEPTION_EXECUTE_HANDLER) { x; }
152 #else
153 #define TRY
154 #define EXCEPT(x)
</pre>
</td>
</tr>
</table>
<center><a href="runtime/WeakSetPrototype.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="tools/CompilerTimingScope.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>