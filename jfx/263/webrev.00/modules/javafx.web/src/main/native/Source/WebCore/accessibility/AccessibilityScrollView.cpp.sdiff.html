<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/accessibility/AccessibilityScrollView.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AccessibilitySVGElement.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="AccessibilityScrollView.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/accessibility/AccessibilityScrollView.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 31 #include &quot;Frame.h&quot;
 32 #include &quot;FrameView.h&quot;
 33 #include &quot;HTMLFrameOwnerElement.h&quot;
 34 #include &quot;RenderElement.h&quot;
 35 #include &quot;ScrollView.h&quot;
 36 #include &quot;Widget.h&quot;
 37 
 38 namespace WebCore {
 39 
 40 AccessibilityScrollView::AccessibilityScrollView(ScrollView* view)
 41     : m_scrollView(view)
 42     , m_childrenDirty(false)
 43 {
 44 }
 45 
 46 AccessibilityScrollView::~AccessibilityScrollView()
 47 {
 48     ASSERT(isDetached());
 49 }
 50 
<span class="line-modified"> 51 void AccessibilityScrollView::detach(AccessibilityDetachmentType detachmentType, AXObjectCache* cache)</span>
 52 {
<span class="line-modified"> 53     AccessibilityObject::detach(detachmentType, cache);</span>
 54     m_scrollView = nullptr;
 55 }
 56 
 57 Ref&lt;AccessibilityScrollView&gt; AccessibilityScrollView::create(ScrollView* view)
 58 {
 59     return adoptRef(*new AccessibilityScrollView(view));
 60 }
 61 
 62 AccessibilityObject* AccessibilityScrollView::scrollBar(AccessibilityOrientation orientation)
 63 {
 64     updateScrollbars();
 65 
 66     switch (orientation) {
 67     // ARIA 1.1 Elements with the role scrollbar have an implicit aria-orientation value of vertical.
 68     case AccessibilityOrientation::Undefined:
 69     case AccessibilityOrientation::Vertical:
 70         return m_verticalScrollbar ? m_verticalScrollbar.get() : nullptr;
 71     case AccessibilityOrientation::Horizontal:
 72         return m_horizontalScrollbar ? m_horizontalScrollbar.get() : nullptr;
 73     }
</pre>
<hr />
<pre>
182 
183     addChild(webAreaObject());
184     updateScrollbars();
185 }
186 
187 AccessibilityObject* AccessibilityScrollView::webAreaObject() const
188 {
189     if (!is&lt;FrameView&gt;(m_scrollView))
190         return nullptr;
191 
192     Document* document = downcast&lt;FrameView&gt;(*m_scrollView).frame().document();
193     if (!document || !document-&gt;hasLivingRenderTree())
194         return nullptr;
195 
196     if (AXObjectCache* cache = axObjectCache())
197         return cache-&gt;getOrCreate(document);
198 
199     return nullptr;
200 }
201 
<span class="line-modified">202 AccessibilityObjectInterface* AccessibilityScrollView::accessibilityHitTest(const IntPoint&amp; point) const</span>
203 {
204     AccessibilityObject* webArea = webAreaObject();
205     if (!webArea)
206         return nullptr;
207 
208     if (m_horizontalScrollbar &amp;&amp; m_horizontalScrollbar-&gt;elementRect().contains(point))
209         return m_horizontalScrollbar.get();
210     if (m_verticalScrollbar &amp;&amp; m_verticalScrollbar-&gt;elementRect().contains(point))
211         return m_verticalScrollbar.get();
212 
213     return webArea-&gt;accessibilityHitTest(point);
214 }
215 
216 LayoutRect AccessibilityScrollView::elementRect() const
217 {
218     if (!m_scrollView)
219         return LayoutRect();
220 
221     LayoutRect rect = m_scrollView-&gt;frameRect();
222     float topContentInset = m_scrollView-&gt;topContentInset();
</pre>
</td>
<td>
<hr />
<pre>
 31 #include &quot;Frame.h&quot;
 32 #include &quot;FrameView.h&quot;
 33 #include &quot;HTMLFrameOwnerElement.h&quot;
 34 #include &quot;RenderElement.h&quot;
 35 #include &quot;ScrollView.h&quot;
 36 #include &quot;Widget.h&quot;
 37 
 38 namespace WebCore {
 39 
 40 AccessibilityScrollView::AccessibilityScrollView(ScrollView* view)
 41     : m_scrollView(view)
 42     , m_childrenDirty(false)
 43 {
 44 }
 45 
 46 AccessibilityScrollView::~AccessibilityScrollView()
 47 {
 48     ASSERT(isDetached());
 49 }
 50 
<span class="line-modified"> 51 void AccessibilityScrollView::detachRemoteParts(AccessibilityDetachmentType detachmentType)</span>
 52 {
<span class="line-modified"> 53     AccessibilityObject::detachRemoteParts(detachmentType);</span>
 54     m_scrollView = nullptr;
 55 }
 56 
 57 Ref&lt;AccessibilityScrollView&gt; AccessibilityScrollView::create(ScrollView* view)
 58 {
 59     return adoptRef(*new AccessibilityScrollView(view));
 60 }
 61 
 62 AccessibilityObject* AccessibilityScrollView::scrollBar(AccessibilityOrientation orientation)
 63 {
 64     updateScrollbars();
 65 
 66     switch (orientation) {
 67     // ARIA 1.1 Elements with the role scrollbar have an implicit aria-orientation value of vertical.
 68     case AccessibilityOrientation::Undefined:
 69     case AccessibilityOrientation::Vertical:
 70         return m_verticalScrollbar ? m_verticalScrollbar.get() : nullptr;
 71     case AccessibilityOrientation::Horizontal:
 72         return m_horizontalScrollbar ? m_horizontalScrollbar.get() : nullptr;
 73     }
</pre>
<hr />
<pre>
182 
183     addChild(webAreaObject());
184     updateScrollbars();
185 }
186 
187 AccessibilityObject* AccessibilityScrollView::webAreaObject() const
188 {
189     if (!is&lt;FrameView&gt;(m_scrollView))
190         return nullptr;
191 
192     Document* document = downcast&lt;FrameView&gt;(*m_scrollView).frame().document();
193     if (!document || !document-&gt;hasLivingRenderTree())
194         return nullptr;
195 
196     if (AXObjectCache* cache = axObjectCache())
197         return cache-&gt;getOrCreate(document);
198 
199     return nullptr;
200 }
201 
<span class="line-modified">202 AXCoreObject* AccessibilityScrollView::accessibilityHitTest(const IntPoint&amp; point) const</span>
203 {
204     AccessibilityObject* webArea = webAreaObject();
205     if (!webArea)
206         return nullptr;
207 
208     if (m_horizontalScrollbar &amp;&amp; m_horizontalScrollbar-&gt;elementRect().contains(point))
209         return m_horizontalScrollbar.get();
210     if (m_verticalScrollbar &amp;&amp; m_verticalScrollbar-&gt;elementRect().contains(point))
211         return m_verticalScrollbar.get();
212 
213     return webArea-&gt;accessibilityHitTest(point);
214 }
215 
216 LayoutRect AccessibilityScrollView::elementRect() const
217 {
218     if (!m_scrollView)
219         return LayoutRect();
220 
221     LayoutRect rect = m_scrollView-&gt;frameRect();
222     float topContentInset = m_scrollView-&gt;topContentInset();
</pre>
</td>
</tr>
</table>
<center><a href="AccessibilitySVGElement.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="AccessibilityScrollView.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>