<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/disassembler/udis86/udis86_decode.c</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="udis86.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="udis86_itab_holder.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/disassembler/udis86/udis86_decode.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   9  *     * Redistributions of source code must retain the above copyright notice,
  10  *       this list of conditions and the following disclaimer.
  11  *     * Redistributions in binary form must reproduce the above copyright notice,
  12  *       this list of conditions and the following disclaimer in the documentation
  13  *       and/or other materials provided with the distribution.
  14  *
  15  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND
  16  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
  17  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  18  * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
  19  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  20  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  21  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
  22  * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  23  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  24  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25  */
  26 
  27 #include &quot;config.h&quot;
  28 
<span class="line-modified">  29 #if USE(UDIS86)</span>
  30 
  31 #include &quot;udis86_udint.h&quot;
  32 #include &quot;udis86_types.h&quot;
  33 #include &quot;udis86_extern.h&quot;
  34 #include &quot;udis86_decode.h&quot;
  35 
  36 #ifndef __UD_STANDALONE__
  37 # include &lt;string.h&gt;
  38 #endif /* __UD_STANDALONE__ */
  39 
  40 /* The max number of prefixes to an instruction */
  41 #define MAX_PREFIXES    15
  42 
  43 /* rex prefix bits */
  44 #define REX_W(r)        ( ( 0xF &amp; ( r ) )  &gt;&gt; 3 )
  45 #define REX_R(r)        ( ( 0x7 &amp; ( r ) )  &gt;&gt; 2 )
  46 #define REX_X(r)        ( ( 0x3 &amp; ( r ) )  &gt;&gt; 1 )
  47 #define REX_B(r)        ( ( 0x1 &amp; ( r ) )  &gt;&gt; 0 )
  48 #define REX_PFX_MASK(n) ( ( P_REXW(n) &lt;&lt; 3 ) | \
  49                           ( P_REXR(n) &lt;&lt; 2 ) | \
</pre>
<hr />
<pre>
1249     u-&gt;itab_entry = &amp;ud_itab[0]; /* entry 0 is invalid */
1250     u-&gt;mnemonic = u-&gt;itab_entry-&gt;mnemonic;
1251   }
1252 
1253     /* maybe this stray segment override byte
1254      * should be spewed out?
1255      */
1256     if ( !P_SEG( u-&gt;itab_entry-&gt;prefix ) &amp;&amp;
1257             u-&gt;operand[0].type != UD_OP_MEM &amp;&amp;
1258             u-&gt;operand[1].type != UD_OP_MEM )
1259         u-&gt;pfx_seg = 0;
1260 
1261   u-&gt;insn_offset = u-&gt;pc; /* set offset of instruction */
1262   u-&gt;asm_buf_fill = 0;   /* set translation buffer index to 0 */
1263   u-&gt;pc += u-&gt;inp_ctr;    /* move program counter by bytes decoded */
1264 
1265   /* return number of bytes disassembled. */
1266   return u-&gt;inp_ctr;
1267 }
1268 
<span class="line-modified">1269 #endif // USE(UDIS86)</span>
1270 
1271 /*
1272 vim: set ts=2 sw=2 expandtab
1273 */
</pre>
</td>
<td>
<hr />
<pre>
   9  *     * Redistributions of source code must retain the above copyright notice,
  10  *       this list of conditions and the following disclaimer.
  11  *     * Redistributions in binary form must reproduce the above copyright notice,
  12  *       this list of conditions and the following disclaimer in the documentation
  13  *       and/or other materials provided with the distribution.
  14  *
  15  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND
  16  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
  17  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  18  * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
  19  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  20  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  21  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
  22  * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  23  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  24  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25  */
  26 
  27 #include &quot;config.h&quot;
  28 
<span class="line-modified">  29 #if ENABLE(UDIS86)</span>
  30 
  31 #include &quot;udis86_udint.h&quot;
  32 #include &quot;udis86_types.h&quot;
  33 #include &quot;udis86_extern.h&quot;
  34 #include &quot;udis86_decode.h&quot;
  35 
  36 #ifndef __UD_STANDALONE__
  37 # include &lt;string.h&gt;
  38 #endif /* __UD_STANDALONE__ */
  39 
  40 /* The max number of prefixes to an instruction */
  41 #define MAX_PREFIXES    15
  42 
  43 /* rex prefix bits */
  44 #define REX_W(r)        ( ( 0xF &amp; ( r ) )  &gt;&gt; 3 )
  45 #define REX_R(r)        ( ( 0x7 &amp; ( r ) )  &gt;&gt; 2 )
  46 #define REX_X(r)        ( ( 0x3 &amp; ( r ) )  &gt;&gt; 1 )
  47 #define REX_B(r)        ( ( 0x1 &amp; ( r ) )  &gt;&gt; 0 )
  48 #define REX_PFX_MASK(n) ( ( P_REXW(n) &lt;&lt; 3 ) | \
  49                           ( P_REXR(n) &lt;&lt; 2 ) | \
</pre>
<hr />
<pre>
1249     u-&gt;itab_entry = &amp;ud_itab[0]; /* entry 0 is invalid */
1250     u-&gt;mnemonic = u-&gt;itab_entry-&gt;mnemonic;
1251   }
1252 
1253     /* maybe this stray segment override byte
1254      * should be spewed out?
1255      */
1256     if ( !P_SEG( u-&gt;itab_entry-&gt;prefix ) &amp;&amp;
1257             u-&gt;operand[0].type != UD_OP_MEM &amp;&amp;
1258             u-&gt;operand[1].type != UD_OP_MEM )
1259         u-&gt;pfx_seg = 0;
1260 
1261   u-&gt;insn_offset = u-&gt;pc; /* set offset of instruction */
1262   u-&gt;asm_buf_fill = 0;   /* set translation buffer index to 0 */
1263   u-&gt;pc += u-&gt;inp_ctr;    /* move program counter by bytes decoded */
1264 
1265   /* return number of bytes disassembled. */
1266   return u-&gt;inp_ctr;
1267 }
1268 
<span class="line-modified">1269 #endif // ENABLE(UDIS86)</span>
1270 
1271 /*
1272 vim: set ts=2 sw=2 expandtab
1273 */
</pre>
</td>
</tr>
</table>
<center><a href="udis86.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="udis86_itab_holder.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>