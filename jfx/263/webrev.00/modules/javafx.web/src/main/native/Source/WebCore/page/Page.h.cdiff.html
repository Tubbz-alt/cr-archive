<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/page/Page.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Page.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="PageConfiguration.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/page/Page.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (C) 2006-2017 Apple Inc. All rights reserved.</span>
   * Copyright (C) 2008 Torch Mobile Inc. All rights reserved. (http://www.torchmobile.com/)
   *
   * This library is free software; you can redistribute it and/or
   * modify it under the terms of the GNU Library General Public
   * License as published by the Free Software Foundation; either
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (C) 2006-2019 Apple Inc. All rights reserved.</span>
   * Copyright (C) 2008 Torch Mobile Inc. All rights reserved. (http://www.torchmobile.com/)
   *
   * This library is free software; you can redistribute it and/or
   * modify it under the terms of the GNU Library General Public
   * License as published by the Free Software Foundation; either
</pre>
<hr />
<pre>
<span class="line-old-header">*** 38,11 ***</span>
  #include &quot;Supplementable.h&quot;
  #include &quot;Timer.h&quot;
  #include &quot;UserInterfaceLayoutDirection.h&quot;
  #include &quot;ViewportArguments.h&quot;
  #include &quot;VisibilityState.h&quot;
<span class="line-modified">! #include &quot;WheelEventTestTrigger.h&quot;</span>
  #include &lt;memory&gt;
  #include &lt;pal/SessionID.h&gt;
  #include &lt;wtf/Assertions.h&gt;
  #include &lt;wtf/Forward.h&gt;
  #include &lt;wtf/Function.h&gt;
<span class="line-new-header">--- 38,11 ---</span>
  #include &quot;Supplementable.h&quot;
  #include &quot;Timer.h&quot;
  #include &quot;UserInterfaceLayoutDirection.h&quot;
  #include &quot;ViewportArguments.h&quot;
  #include &quot;VisibilityState.h&quot;
<span class="line-modified">! #include &quot;WheelEventTestMonitor.h&quot;</span>
  #include &lt;memory&gt;
  #include &lt;pal/SessionID.h&gt;
  #include &lt;wtf/Assertions.h&gt;
  #include &lt;wtf/Forward.h&gt;
  #include &lt;wtf/Function.h&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 67,53 ***</span>
  
  #if ENABLE(WIRELESS_PLAYBACK_TARGET)
  #include &quot;MediaPlaybackTargetContext.h&quot;
  #endif
  
  namespace JSC {
  class Debugger;
  }
  
  namespace WebCore {
  
  namespace IDBClient {
  class IDBConnectionToServer;
  }
  
  class AlternativeTextClient;
  class ApplicationCacheStorage;
  class AuthenticatorCoordinator;
  class BackForwardController;
<span class="line-removed">- class BackForwardClient;</span>
  class CacheStorageProvider;
  class Chrome;
<span class="line-removed">- class ChromeClient;</span>
  class Color;
<span class="line-removed">- class ContextMenuClient;</span>
  class ContextMenuController;
  class CookieJar;
<span class="line-removed">- class DOMRect;</span>
  class DOMRectList;
  class DatabaseProvider;
  class DiagnosticLoggingClient;
  class DragCaretController;
<span class="line-removed">- class DragClient;</span>
  class DragController;
  class EditorClient;
  class Element;
  class FocusController;
  class Frame;
<span class="line-removed">- class FrameLoaderClient;</span>
<span class="line-removed">- class HistoryItem;</span>
  class HTMLMediaElement;
<span class="line-modified">! class UserInputBridge;</span>
  class InspectorClient;
  class InspectorController;
  class LibWebRTCProvider;
  class LowPowerModeNotifier;
  class MediaCanStartListener;
  class MediaPlaybackTarget;
  class PageConfiguration;
  class PageConsoleClient;
  class PageDebuggable;
  class PageGroup;
  class PageOverlayController;
<span class="line-new-header">--- 67,52 ---</span>
  
  #if ENABLE(WIRELESS_PLAYBACK_TARGET)
  #include &quot;MediaPlaybackTargetContext.h&quot;
  #endif
  
<span class="line-added">+ #if ENABLE(DEVICE_ORIENTATION) &amp;&amp; PLATFORM(IOS_FAMILY)</span>
<span class="line-added">+ #include &quot;DeviceOrientationUpdateProvider.h&quot;</span>
<span class="line-added">+ #endif</span>
<span class="line-added">+ </span>
  namespace JSC {
  class Debugger;
  }
  
  namespace WebCore {
  
  namespace IDBClient {
  class IDBConnectionToServer;
  }
  
<span class="line-added">+ class ActivityStateChangeObserver;</span>
  class AlternativeTextClient;
  class ApplicationCacheStorage;
  class AuthenticatorCoordinator;
  class BackForwardController;
  class CacheStorageProvider;
  class Chrome;
  class Color;
  class ContextMenuController;
  class CookieJar;
  class DOMRectList;
  class DatabaseProvider;
  class DiagnosticLoggingClient;
  class DragCaretController;
  class DragController;
  class EditorClient;
  class Element;
  class FocusController;
  class Frame;
  class HTMLMediaElement;
<span class="line-modified">! class HistoryItem;</span>
  class InspectorClient;
  class InspectorController;
  class LibWebRTCProvider;
  class LowPowerModeNotifier;
  class MediaCanStartListener;
  class MediaPlaybackTarget;
<span class="line-added">+ class MediaRecorderProvider;</span>
  class PageConfiguration;
  class PageConsoleClient;
  class PageDebuggable;
  class PageGroup;
  class PageOverlayController;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 126,54 ***</span>
  class PluginInfoProvider;
  class PluginViewBase;
  class PointerCaptureController;
  class PointerLockController;
  class ProgressTracker;
<span class="line-removed">- class ProgressTrackerClient;</span>
  class Range;
  class RenderObject;
<span class="line-removed">- class RenderTheme;</span>
  class ResourceUsageOverlay;
<span class="line-removed">- class VisibleSelection;</span>
  class ScrollLatchingState;
<span class="line-removed">- class ScrollableArea;</span>
  class ScrollingCoordinator;
  class ServicesOverlayController;
  class Settings;
  class SocketProvider;
  class StorageNamespace;
  class StorageNamespaceProvider;
  class UserContentProvider;
  class ValidationMessageClient;
<span class="line-modified">! class ActivityStateChangeObserver;</span>
  class VisitedLinkStore;
  class WebGLStateTracker;
<span class="line-removed">- class SpeechSynthesisClient;</span>
  class WheelEventDeltaFilter;
  
<span class="line-modified">! typedef uint64_t SharedStringHash;</span>
  
<span class="line-modified">! enum FindDirection {</span>
<span class="line-modified">!     FindDirectionForward,</span>
<span class="line-modified">!     FindDirectionBackward</span>
<span class="line-modified">! };</span>
  
<span class="line-modified">! enum class EventThrottlingBehavior {</span>
<span class="line-removed">-     Responsive,</span>
<span class="line-removed">-     Unresponsive</span>
<span class="line-removed">- };</span>
  
<span class="line-modified">! enum class CompositingPolicy : uint8_t {</span>
      Normal,
      Conservative, // Used in low memory situations.
  };
  
<span class="line-removed">- enum class CanWrap : bool;</span>
<span class="line-removed">- enum class DidWrap : bool;</span>
<span class="line-removed">- enum class RouteSharingPolicy : uint8_t;</span>
<span class="line-removed">- enum class ShouldTreatAsContinuingLoad : bool;</span>
<span class="line-removed">- </span>
  class Page : public Supplementable&lt;Page&gt;, public CanMakeWeakPtr&lt;Page&gt; {
      WTF_MAKE_NONCOPYABLE(Page);
      WTF_MAKE_FAST_ALLOCATED;
      friend class SettingsBase;
  
<span class="line-new-header">--- 125,44 ---</span>
  class PluginInfoProvider;
  class PluginViewBase;
  class PointerCaptureController;
  class PointerLockController;
  class ProgressTracker;
  class Range;
  class RenderObject;
  class ResourceUsageOverlay;
  class ScrollLatchingState;
  class ScrollingCoordinator;
  class ServicesOverlayController;
  class Settings;
  class SocketProvider;
<span class="line-added">+ class SpeechSynthesisClient;</span>
  class StorageNamespace;
  class StorageNamespaceProvider;
  class UserContentProvider;
<span class="line-added">+ class UserContentURLPattern;</span>
<span class="line-added">+ class UserInputBridge;</span>
  class ValidationMessageClient;
<span class="line-modified">! class VisibleSelection;</span>
  class VisitedLinkStore;
  class WebGLStateTracker;
  class WheelEventDeltaFilter;
  
<span class="line-modified">! using SharedStringHash = uint32_t;</span>
  
<span class="line-modified">! enum class CanWrap : bool;</span>
<span class="line-modified">! enum class DidWrap : bool;</span>
<span class="line-modified">! enum class RouteSharingPolicy : uint8_t;</span>
<span class="line-modified">! enum class ShouldTreatAsContinuingLoad : bool;</span>
  
<span class="line-modified">! enum class EventThrottlingBehavior : bool { Responsive, Unresponsive };</span>
  
<span class="line-modified">! enum class CompositingPolicy : bool {</span>
      Normal,
      Conservative, // Used in low memory situations.
  };
  
  class Page : public Supplementable&lt;Page&gt;, public CanMakeWeakPtr&lt;Page&gt; {
      WTF_MAKE_NONCOPYABLE(Page);
      WTF_MAKE_FAST_ALLOCATED;
      friend class SettingsBase;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 202,11 ***</span>
  
      WEBCORE_EXPORT void setCanStartMedia(bool);
      bool canStartMedia() const { return m_canStartMedia; }
  
      EditorClient&amp; editorClient() { return m_editorClient.get(); }
<span class="line-modified">!     PlugInClient* plugInClient() const { return m_plugInClient; }</span>
  
      Frame&amp; mainFrame() { return m_mainFrame.get(); }
      const Frame&amp; mainFrame() const { return m_mainFrame.get(); }
  
      bool openedByDOM() const;
<span class="line-new-header">--- 191,11 ---</span>
  
      WEBCORE_EXPORT void setCanStartMedia(bool);
      bool canStartMedia() const { return m_canStartMedia; }
  
      EditorClient&amp; editorClient() { return m_editorClient.get(); }
<span class="line-modified">!     PlugInClient* plugInClient() const { return m_plugInClient.get(); }</span>
  
      Frame&amp; mainFrame() { return m_mainFrame.get(); }
      const Frame&amp; mainFrame() const { return m_mainFrame.get(); }
  
      bool openedByDOM() const;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 303,17 ***</span>
      WEBCORE_EXPORT void unmarkAllTextMatches();
  
      WEBCORE_EXPORT void dispatchBeforePrintEvent();
      WEBCORE_EXPORT void dispatchAfterPrintEvent();
  
<span class="line-modified">!     // find all the Ranges for the matching text.</span>
      // Upon return, indexForSelection will be one of the following:
      // 0 if there is no user selection
      // the index of the first range after the user selection
      // NoMatchAfterUserSelection if there is no matching text after the user selection.
      enum { NoMatchAfterUserSelection = -1 };
      WEBCORE_EXPORT void findStringMatchingRanges(const String&amp;, FindOptions, int maxCount, Vector&lt;RefPtr&lt;Range&gt;&gt;&amp;, int&amp; indexForSelection);
  #if PLATFORM(COCOA)
      void platformInitialize();
      WEBCORE_EXPORT void addSchedulePair(Ref&lt;SchedulePair&gt;&amp;&amp;);
      WEBCORE_EXPORT void removeSchedulePair(Ref&lt;SchedulePair&gt;&amp;&amp;);
      SchedulePairHashSet* scheduledRunLoopPairs() { return m_scheduledRunLoopPairs.get(); }
<span class="line-new-header">--- 292,18 ---</span>
      WEBCORE_EXPORT void unmarkAllTextMatches();
  
      WEBCORE_EXPORT void dispatchBeforePrintEvent();
      WEBCORE_EXPORT void dispatchAfterPrintEvent();
  
<span class="line-modified">!     // Find all the Ranges for the matching text.</span>
      // Upon return, indexForSelection will be one of the following:
      // 0 if there is no user selection
      // the index of the first range after the user selection
      // NoMatchAfterUserSelection if there is no matching text after the user selection.
      enum { NoMatchAfterUserSelection = -1 };
      WEBCORE_EXPORT void findStringMatchingRanges(const String&amp;, FindOptions, int maxCount, Vector&lt;RefPtr&lt;Range&gt;&gt;&amp;, int&amp; indexForSelection);
<span class="line-added">+ </span>
  #if PLATFORM(COCOA)
      void platformInitialize();
      WEBCORE_EXPORT void addSchedulePair(Ref&lt;SchedulePair&gt;&amp;&amp;);
      WEBCORE_EXPORT void removeSchedulePair(Ref&lt;SchedulePair&gt;&amp;&amp;);
      SchedulePairHashSet* scheduledRunLoopPairs() { return m_scheduledRunLoopPairs.get(); }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 343,10 ***</span>
<span class="line-new-header">--- 333,13 ---</span>
      WEBCORE_EXPORT void updateMediaElementRateChangeRestrictions();
  
      void didStartProvisionalLoad();
      void didFinishLoad(); // Called when the load has been committed in the main frame.
  
<span class="line-added">+     bool delegatesScaling() const { return m_delegatesScaling; }</span>
<span class="line-added">+     WEBCORE_EXPORT void setDelegatesScaling(bool);</span>
<span class="line-added">+ </span>
      // The view scale factor is multiplied into the page scale factor by all
      // callers of setPageScaleFactor.
      WEBCORE_EXPORT void setViewScaleFactor(float);
      float viewScaleFactor() const { return m_viewScaleFactor; }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 411,11 ***</span>
      WEBCORE_EXPORT void accessibilitySettingsDidChange();
      WEBCORE_EXPORT void appearanceDidChange();
  
      // Page and FrameView both store a Pagination value. Page::pagination() is set only by API,
      // and FrameView::pagination() is set only by CSS. Page::pagination() will affect all
<span class="line-modified">!     // FrameViews in the page cache, but FrameView::pagination() only affects the current</span>
      // FrameView.
      const Pagination&amp; pagination() const { return m_pagination; }
      WEBCORE_EXPORT void setPagination(const Pagination&amp;);
      bool paginationLineGridEnabled() const { return m_paginationLineGridEnabled; }
      WEBCORE_EXPORT void setPaginationLineGridEnabled(bool flag);
<span class="line-new-header">--- 404,11 ---</span>
      WEBCORE_EXPORT void accessibilitySettingsDidChange();
      WEBCORE_EXPORT void appearanceDidChange();
  
      // Page and FrameView both store a Pagination value. Page::pagination() is set only by API,
      // and FrameView::pagination() is set only by CSS. Page::pagination() will affect all
<span class="line-modified">!     // FrameViews in the back/forward cache, but FrameView::pagination() only affects the current</span>
      // FrameView.
      const Pagination&amp; pagination() const { return m_pagination; }
      WEBCORE_EXPORT void setPagination(const Pagination&amp;);
      bool paginationLineGridEnabled() const { return m_paginationLineGridEnabled; }
      WEBCORE_EXPORT void setPaginationLineGridEnabled(bool flag);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 427,15 ***</span>
      PerformanceLoggingClient* performanceLoggingClient() const { return m_performanceLoggingClient.get(); }
  
      WheelEventDeltaFilter* wheelEventDeltaFilter() { return m_recentWheelEventDeltaFilter.get(); }
      PageOverlayController&amp; pageOverlayController() { return *m_pageOverlayController; }
  
<span class="line-modified">! #if PLATFORM(MAC)</span>
<span class="line-removed">- #if ENABLE(SERVICE_CONTROLS) || ENABLE(TELEPHONE_NUMBER_DETECTION)</span>
      ServicesOverlayController&amp; servicesOverlayController() { return *m_servicesOverlayController; }
<span class="line-modified">! #endif // ENABLE(SERVICE_CONTROLS) || ENABLE(TELEPHONE_NUMBER_DETECTION)</span>
  
      ScrollLatchingState* latchingState();
      void pushNewLatchingState();
      void popLatchingState();
      void resetLatchingState();
      void removeLatchingStateForTarget(Element&amp;);
<span class="line-new-header">--- 420,15 ---</span>
      PerformanceLoggingClient* performanceLoggingClient() const { return m_performanceLoggingClient.get(); }
  
      WheelEventDeltaFilter* wheelEventDeltaFilter() { return m_recentWheelEventDeltaFilter.get(); }
      PageOverlayController&amp; pageOverlayController() { return *m_pageOverlayController; }
  
<span class="line-modified">! #if PLATFORM(MAC) &amp;&amp; (ENABLE(SERVICE_CONTROLS) || ENABLE(TELEPHONE_NUMBER_DETECTION))</span>
      ServicesOverlayController&amp; servicesOverlayController() { return *m_servicesOverlayController; }
<span class="line-modified">! #endif</span>
  
<span class="line-added">+ #if PLATFORM(MAC)</span>
      ScrollLatchingState* latchingState();
      void pushNewLatchingState();
      void popLatchingState();
      void resetLatchingState();
      void removeLatchingStateForTarget(Element&amp;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 546,19 ***</span>
      void addRelevantRepaintedObject(RenderObject*, const LayoutRect&amp; objectPaintRect);
      void addRelevantUnpaintedObject(RenderObject*, const LayoutRect&amp; objectPaintRect);
  
      WEBCORE_EXPORT void suspendActiveDOMObjectsAndAnimations();
      WEBCORE_EXPORT void resumeActiveDOMObjectsAndAnimations();
<span class="line-removed">-     void suspendDeviceMotionAndOrientationUpdates();</span>
<span class="line-removed">-     void resumeDeviceMotionAndOrientationUpdates();</span>
  
  #ifndef NDEBUG
      void setIsPainting(bool painting) { m_isPainting = painting; }
      bool isPainting() const { return m_isPainting; }
  #endif
  
<span class="line-modified">!     AlternativeTextClient* alternativeTextClient() const { return m_alternativeTextClient; }</span>
  
      bool hasSeenPlugin(const String&amp; serviceType) const;
      WEBCORE_EXPORT bool hasSeenAnyPlugin() const;
      void sawPlugin(const String&amp; serviceType);
      void resetSeenPlugins();
<span class="line-new-header">--- 539,17 ---</span>
      void addRelevantRepaintedObject(RenderObject*, const LayoutRect&amp; objectPaintRect);
      void addRelevantUnpaintedObject(RenderObject*, const LayoutRect&amp; objectPaintRect);
  
      WEBCORE_EXPORT void suspendActiveDOMObjectsAndAnimations();
      WEBCORE_EXPORT void resumeActiveDOMObjectsAndAnimations();
  
  #ifndef NDEBUG
      void setIsPainting(bool painting) { m_isPainting = painting; }
      bool isPainting() const { return m_isPainting; }
  #endif
  
<span class="line-modified">!     AlternativeTextClient* alternativeTextClient() const { return m_alternativeTextClient.get(); }</span>
  
      bool hasSeenPlugin(const String&amp; serviceType) const;
      WEBCORE_EXPORT bool hasSeenAnyPlugin() const;
      void sawPlugin(const String&amp; serviceType);
      void resetSeenPlugins();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 582,19 ***</span>
<span class="line-new-header">--- 573,24 ---</span>
  
      void forbidPrompts();
      void allowPrompts();
      bool arePromptsAllowed();
  
<span class="line-added">+     void forbidSynchronousLoads();</span>
<span class="line-added">+     void allowSynchronousLoads();</span>
<span class="line-added">+     bool areSynchronousLoadsAllowed();</span>
<span class="line-added">+ </span>
      void mainFrameLoadStarted(const URL&amp;, FrameLoadType);
  
      void setLastSpatialNavigationCandidateCount(unsigned count) { m_lastSpatialNavigationCandidatesCount = count; }
      unsigned lastSpatialNavigationCandidateCount() const { return m_lastSpatialNavigationCandidatesCount; }
  
      ApplicationCacheStorage&amp; applicationCacheStorage() { return m_applicationCacheStorage; }
      DatabaseProvider&amp; databaseProvider() { return m_databaseProvider; }
      CacheStorageProvider&amp; cacheStorageProvider() { return m_cacheStorageProvider; }
      SocketProvider&amp; socketProvider() { return m_socketProvider; }
<span class="line-added">+     MediaRecorderProvider&amp; mediaRecorderProvider() { return m_mediaRecorderProvider; }</span>
      CookieJar&amp; cookieJar() { return m_cookieJar.get(); }
  
      StorageNamespaceProvider&amp; storageNamespaceProvider() { return m_storageNamespaceProvider.get(); }
  
      PluginInfoProvider&amp; pluginInfoProvider();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 605,11 ***</span>
      VisitedLinkStore&amp; visitedLinkStore();
      WEBCORE_EXPORT void setVisitedLinkStore(Ref&lt;VisitedLinkStore&gt;&amp;&amp;);
  
      WEBCORE_EXPORT PAL::SessionID sessionID() const;
      WEBCORE_EXPORT void setSessionID(PAL::SessionID);
<span class="line-removed">-     WEBCORE_EXPORT void enableLegacyPrivateBrowsing(bool privateBrowsingEnabled);</span>
      bool usesEphemeralSession() const { return m_sessionID.isEphemeral(); }
  
      MediaProducer::MediaStateFlags mediaState() const { return m_mediaState; }
      void updateIsPlayingMedia(uint64_t);
      MediaProducer::MutedStateFlags mutedState() const { return m_mutedState; }
<span class="line-new-header">--- 601,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 625,10 ***</span>
<span class="line-new-header">--- 620,13 ---</span>
      bool mediaPlaybackIsSuspended() const { return m_mediaPlaybackIsSuspended; }
      WEBCORE_EXPORT void suspendAllMediaBuffering();
      WEBCORE_EXPORT void resumeAllMediaBuffering();
      bool mediaBufferingIsSuspended() const { return m_mediaBufferingIsSuspended; }
  
<span class="line-added">+     void setHasResourceLoadClient(bool has) { m_hasResourceLoadClient = has; }</span>
<span class="line-added">+     bool hasResourceLoadClient() const { return m_hasResourceLoadClient; }</span>
<span class="line-added">+ </span>
  #if ENABLE(MEDIA_SESSION)
      WEBCORE_EXPORT void handleMediaEvent(MediaEventType);
      WEBCORE_EXPORT void setVolumeOfMediaElement(double, uint64_t);
  #endif
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 637,23 ***</span>
      void removePlaybackTargetPickerClient(uint64_t);
      void showPlaybackTargetPicker(uint64_t, const IntPoint&amp;, bool, RouteSharingPolicy, const String&amp;);
      void playbackTargetPickerClientStateDidChange(uint64_t, MediaProducer::MediaStateFlags);
      WEBCORE_EXPORT void setMockMediaPlaybackTargetPickerEnabled(bool);
      WEBCORE_EXPORT void setMockMediaPlaybackTargetPickerState(const String&amp;, MediaPlaybackTargetContext::State);
  
      WEBCORE_EXPORT void setPlaybackTarget(uint64_t, Ref&lt;MediaPlaybackTarget&gt;&amp;&amp;);
      WEBCORE_EXPORT void playbackTargetAvailabilityDidChange(uint64_t, bool);
      WEBCORE_EXPORT void setShouldPlayToPlaybackTarget(uint64_t, bool);
  #endif
  
<span class="line-modified">!     RefPtr&lt;WheelEventTestTrigger&gt; testTrigger() const { return m_testTrigger; }</span>
<span class="line-modified">!     WEBCORE_EXPORT WheelEventTestTrigger&amp; ensureTestTrigger();</span>
<span class="line-modified">!     void clearTrigger() { m_testTrigger = nullptr; }</span>
<span class="line-modified">!     bool expectsWheelEventTriggers() const { return !!m_testTrigger; }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     void setIsForSanitizingWebContent() { m_isForSanitizingWebContent = true; }</span>
<span class="line-removed">-     bool isForSanitizingWebContent() const { return m_isForSanitizingWebContent; }</span>
  
  #if ENABLE(VIDEO)
      bool allowsMediaDocumentInlinePlayback() const { return m_allowsMediaDocumentInlinePlayback; }
      WEBCORE_EXPORT void setAllowsMediaDocumentInlinePlayback(bool);
  #endif
<span class="line-new-header">--- 635,22 ---</span>
      void removePlaybackTargetPickerClient(uint64_t);
      void showPlaybackTargetPicker(uint64_t, const IntPoint&amp;, bool, RouteSharingPolicy, const String&amp;);
      void playbackTargetPickerClientStateDidChange(uint64_t, MediaProducer::MediaStateFlags);
      WEBCORE_EXPORT void setMockMediaPlaybackTargetPickerEnabled(bool);
      WEBCORE_EXPORT void setMockMediaPlaybackTargetPickerState(const String&amp;, MediaPlaybackTargetContext::State);
<span class="line-added">+     WEBCORE_EXPORT void mockMediaPlaybackTargetPickerDismissPopup();</span>
  
      WEBCORE_EXPORT void setPlaybackTarget(uint64_t, Ref&lt;MediaPlaybackTarget&gt;&amp;&amp;);
      WEBCORE_EXPORT void playbackTargetAvailabilityDidChange(uint64_t, bool);
      WEBCORE_EXPORT void setShouldPlayToPlaybackTarget(uint64_t, bool);
<span class="line-added">+     WEBCORE_EXPORT void playbackTargetPickerWasDismissed(uint64_t);</span>
  #endif
  
<span class="line-modified">!     RefPtr&lt;WheelEventTestMonitor&gt; wheelEventTestMonitor() const { return m_wheelEventTestMonitor; }</span>
<span class="line-modified">!     WEBCORE_EXPORT WheelEventTestMonitor&amp; ensureWheelEventTestMonitor();</span>
<span class="line-modified">!     void clearWheelEventTestMonitor() { m_wheelEventTestMonitor = nullptr; }</span>
<span class="line-modified">!     bool isMonitoringWheelEvents() const { return !!m_wheelEventTestMonitor; }</span>
  
  #if ENABLE(VIDEO)
      bool allowsMediaDocumentInlinePlayback() const { return m_allowsMediaDocumentInlinePlayback; }
      WEBCORE_EXPORT void setAllowsMediaDocumentInlinePlayback(bool);
  #endif
</pre>
<hr />
<pre>
<span class="line-old-header">*** 678,15 ***</span>
      WEBCORE_EXPORT bool isAlwaysOnLoggingAllowed() const;
  
      String captionUserPreferencesStyleSheet();
      void setCaptionUserPreferencesStyleSheet(const String&amp;);
  
<span class="line-modified">!     bool isResourceCachingDisabled() const { return m_resourceCachingDisabled || m_resourceCachingDisabledOverride; }</span>
<span class="line-modified">!     void setResourceCachingDisabled(bool disabled) { m_resourceCachingDisabled = disabled; }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     // Web Inspector can override whatever value is set via WebKit SPI, but only while it is open.</span>
<span class="line-removed">-     void setResourceCachingDisabledOverride(bool disabled) { m_resourceCachingDisabledOverride = disabled; }</span>
  
      Optional&lt;EventThrottlingBehavior&gt; eventThrottlingBehaviorOverride() const { return m_eventThrottlingBehaviorOverride; }
      void setEventThrottlingBehaviorOverride(Optional&lt;EventThrottlingBehavior&gt; throttling) { m_eventThrottlingBehaviorOverride = throttling; }
  
      Optional&lt;CompositingPolicy&gt; compositingPolicyOverride() const { return m_compositingPolicyOverride; }
<span class="line-new-header">--- 675,12 ---</span>
      WEBCORE_EXPORT bool isAlwaysOnLoggingAllowed() const;
  
      String captionUserPreferencesStyleSheet();
      void setCaptionUserPreferencesStyleSheet(const String&amp;);
  
<span class="line-modified">!     bool isResourceCachingDisabledByWebInspector() const { return m_resourceCachingDisabledByWebInspector; }</span>
<span class="line-modified">!     void setResourceCachingDisabledByWebInspector(bool disabled) { m_resourceCachingDisabledByWebInspector = disabled; }</span>
  
      Optional&lt;EventThrottlingBehavior&gt; eventThrottlingBehaviorOverride() const { return m_eventThrottlingBehaviorOverride; }
      void setEventThrottlingBehaviorOverride(Optional&lt;EventThrottlingBehavior&gt; throttling) { m_eventThrottlingBehaviorOverride = throttling; }
  
      Optional&lt;CompositingPolicy&gt; compositingPolicyOverride() const { return m_compositingPolicyOverride; }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 701,14 ***</span>
  #endif
  
      bool isOnlyNonUtilityPage() const;
      bool isUtilityPage() const { return m_isUtilityPage; }
  
<span class="line-removed">- #if ENABLE(DATA_INTERACTION)</span>
<span class="line-removed">-     WEBCORE_EXPORT bool hasSelectionAtPosition(const FloatPoint&amp;) const;</span>
<span class="line-removed">- #endif</span>
<span class="line-removed">- </span>
      bool isLowPowerModeEnabled() const;
      WEBCORE_EXPORT void setLowPowerModeEnabledOverrideForTesting(Optional&lt;bool&gt;);
  
      WEBCORE_EXPORT void applicationWillResignActive();
      WEBCORE_EXPORT void applicationDidEnterBackground();
<span class="line-new-header">--- 695,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 717,10 ***</span>
<span class="line-new-header">--- 707,21 ---</span>
  
      PerformanceLogging&amp; performanceLogging() const { return *m_performanceLogging; }
  
      void configureLoggingChannel(const String&amp;, WTFLogChannelState, WTFLogLevel);
  
<span class="line-added">+     WEBCORE_EXPORT Vector&lt;Ref&lt;Element&gt;&gt; editableElementsInRect(const FloatRect&amp;) const;</span>
<span class="line-added">+ </span>
<span class="line-added">+ #if ENABLE(DEVICE_ORIENTATION) &amp;&amp; PLATFORM(IOS_FAMILY)</span>
<span class="line-added">+     DeviceOrientationUpdateProvider* deviceOrientationUpdateProvider() const { return m_deviceOrientationUpdateProvider.get(); }</span>
<span class="line-added">+ #endif</span>
<span class="line-added">+ </span>
<span class="line-added">+     WEBCORE_EXPORT void forEachDocument(const WTF::Function&lt;void(Document&amp;)&gt;&amp;) const;</span>
<span class="line-added">+     void forEachMediaElement(const WTF::Function&lt;void(HTMLMediaElement&amp;)&gt;&amp;);</span>
<span class="line-added">+ </span>
<span class="line-added">+     bool shouldDisableCorsForRequestTo(const URL&amp;) const;</span>
<span class="line-added">+ </span>
  private:
      struct Navigation {
          RegistrableDomain domain;
          FrameLoadType type;
      };
</pre>
<hr />
<pre>
<span class="line-old-header">*** 730,15 ***</span>
  
      void setIsInWindowInternal(bool);
      void setIsVisibleInternal(bool);
      void setIsVisuallyIdleInternal(bool);
  
<span class="line-removed">- #if ASSERT_DISABLED</span>
<span class="line-removed">-     void checkSubframeCountConsistency() const { }</span>
<span class="line-removed">- #else</span>
      void checkSubframeCountConsistency() const;
<span class="line-removed">- #endif</span>
  
      enum ShouldHighlightMatches { DoNotHighlightMatches, HighlightMatches };
      enum ShouldMarkMatches { DoNotMarkMatches, MarkMatches };
  
      unsigned findMatchesForText(const String&amp;, FindOptions, unsigned maxMatchCount, ShouldHighlightMatches, ShouldMarkMatches);
<span class="line-new-header">--- 731,11 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 751,12 ***</span>
  
      Vector&lt;Ref&lt;PluginViewBase&gt;&gt; pluginViews();
  
      void handleLowModePowerChange(bool);
  
<span class="line-removed">-     void forEachDocument(const WTF::Function&lt;void(Document&amp;)&gt;&amp;);</span>
<span class="line-removed">- </span>
      enum class TimerThrottlingState { Disabled, Enabled, EnabledIncreasing };
      void hiddenPageDOMTimerThrottlingStateChanged();
      void setTimerThrottlingState(TimerThrottlingState);
      void updateTimerThrottlingState();
      void updateDOMTimerAlignmentInterval();
<span class="line-new-header">--- 748,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 789,11 ***</span>
      Ref&lt;Frame&gt; m_mainFrame;
  
      RefPtr&lt;PluginData&gt; m_pluginData;
  
      UniqueRef&lt;EditorClient&gt; m_editorClient;
<span class="line-modified">!     PlugInClient* m_plugInClient;</span>
      std::unique_ptr&lt;ValidationMessageClient&gt; m_validationMessageClient;
      std::unique_ptr&lt;DiagnosticLoggingClient&gt; m_diagnosticLoggingClient;
      std::unique_ptr&lt;PerformanceLoggingClient&gt; m_performanceLoggingClient;
  
  #if ENABLE(WEBGL)
<span class="line-new-header">--- 784,11 ---</span>
      Ref&lt;Frame&gt; m_mainFrame;
  
      RefPtr&lt;PluginData&gt; m_pluginData;
  
      UniqueRef&lt;EditorClient&gt; m_editorClient;
<span class="line-modified">!     std::unique_ptr&lt;PlugInClient&gt; m_plugInClient;</span>
      std::unique_ptr&lt;ValidationMessageClient&gt; m_validationMessageClient;
      std::unique_ptr&lt;DiagnosticLoggingClient&gt; m_diagnosticLoggingClient;
      std::unique_ptr&lt;PerformanceLoggingClient&gt; m_performanceLoggingClient;
  
  #if ENABLE(WEBGL)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 802,10 ***</span>
<span class="line-new-header">--- 797,11 ---</span>
  
  #if ENABLE(SPEECH_SYNTHESIS)
      std::unique_ptr&lt;SpeechSynthesisClient&gt; m_speechSynthesisClient;
  #endif
  
<span class="line-added">+     UniqueRef&lt;MediaRecorderProvider&gt; m_mediaRecorderProvider;</span>
      UniqueRef&lt;LibWebRTCProvider&gt; m_libWebRTCProvider;
      RTCController m_rtcController;
  
      int m_nestedRunLoopCount { 0 };
      WTF::Function&lt;void()&gt; m_unnestCallback;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 897,11 ***</span>
      Region m_relevantUnpaintedRegion;
      bool m_isCountingRelevantRepaintedObjects { false };
  #ifndef NDEBUG
      bool m_isPainting { false };
  #endif
<span class="line-modified">!     AlternativeTextClient* m_alternativeTextClient;</span>
  
      bool m_scriptedAnimationsSuspended { false };
      const std::unique_ptr&lt;PageConsoleClient&gt; m_consoleClient;
  
  #if ENABLE(REMOTE_INSPECTOR)
<span class="line-new-header">--- 893,11 ---</span>
      Region m_relevantUnpaintedRegion;
      bool m_isCountingRelevantRepaintedObjects { false };
  #ifndef NDEBUG
      bool m_isPainting { false };
  #endif
<span class="line-modified">!     std::unique_ptr&lt;AlternativeTextClient&gt; m_alternativeTextClient;</span>
  
      bool m_scriptedAnimationsSuspended { false };
      const std::unique_ptr&lt;PageConsoleClient&gt; m_consoleClient;
  
  #if ENABLE(REMOTE_INSPECTOR)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 915,22 ***</span>
      HashSet&lt;String&gt; m_seenPlugins;
      HashSet&lt;String&gt; m_seenMediaEngines;
  
      unsigned m_lastSpatialNavigationCandidatesCount { 0 };
      unsigned m_forbidPromptsDepth { 0 };
  
      Ref&lt;SocketProvider&gt; m_socketProvider;
      Ref&lt;CookieJar&gt; m_cookieJar;
      Ref&lt;ApplicationCacheStorage&gt; m_applicationCacheStorage;
      Ref&lt;CacheStorageProvider&gt; m_cacheStorageProvider;
      Ref&lt;DatabaseProvider&gt; m_databaseProvider;
      Ref&lt;PluginInfoProvider&gt; m_pluginInfoProvider;
      Ref&lt;StorageNamespaceProvider&gt; m_storageNamespaceProvider;
      Ref&lt;UserContentProvider&gt; m_userContentProvider;
      Ref&lt;VisitedLinkStore&gt; m_visitedLinkStore;
<span class="line-modified">!     RefPtr&lt;WheelEventTestTrigger&gt; m_testTrigger;</span>
<span class="line-removed">- </span>
      HashSet&lt;ActivityStateChangeObserver*&gt; m_activityStateChangeObservers;
  
  #if ENABLE(RESOURCE_USAGE)
      std::unique_ptr&lt;ResourceUsageOverlay&gt; m_resourceUsageOverlay;
  #endif
<span class="line-new-header">--- 911,22 ---</span>
      HashSet&lt;String&gt; m_seenPlugins;
      HashSet&lt;String&gt; m_seenMediaEngines;
  
      unsigned m_lastSpatialNavigationCandidatesCount { 0 };
      unsigned m_forbidPromptsDepth { 0 };
<span class="line-added">+     unsigned m_forbidSynchronousLoadsDepth { 0 };</span>
  
      Ref&lt;SocketProvider&gt; m_socketProvider;
      Ref&lt;CookieJar&gt; m_cookieJar;
      Ref&lt;ApplicationCacheStorage&gt; m_applicationCacheStorage;
      Ref&lt;CacheStorageProvider&gt; m_cacheStorageProvider;
      Ref&lt;DatabaseProvider&gt; m_databaseProvider;
      Ref&lt;PluginInfoProvider&gt; m_pluginInfoProvider;
      Ref&lt;StorageNamespaceProvider&gt; m_storageNamespaceProvider;
      Ref&lt;UserContentProvider&gt; m_userContentProvider;
      Ref&lt;VisitedLinkStore&gt; m_visitedLinkStore;
<span class="line-modified">!     RefPtr&lt;WheelEventTestMonitor&gt; m_wheelEventTestMonitor;</span>
      HashSet&lt;ActivityStateChangeObserver*&gt; m_activityStateChangeObservers;
  
  #if ENABLE(RESOURCE_USAGE)
      std::unique_ptr&lt;ResourceUsageOverlay&gt; m_resourceUsageOverlay;
  #endif
</pre>
<hr />
<pre>
<span class="line-old-header">*** 948,13 ***</span>
  
      bool m_allowsMediaDocumentInlinePlayback { false };
      bool m_allowsPlaybackControlsForAutoplayingAudio { false };
      bool m_showAllPlugins { false };
      bool m_controlledByAutomation { false };
<span class="line-modified">!     bool m_resourceCachingDisabled { false };</span>
<span class="line-removed">-     bool m_resourceCachingDisabledOverride { false };</span>
      bool m_isUtilityPage;
      UserInterfaceLayoutDirection m_userInterfaceLayoutDirection { UserInterfaceLayoutDirection::LTR };
  
      // For testing.
      Optional&lt;EventThrottlingBehavior&gt; m_eventThrottlingBehaviorOverride;
      Optional&lt;CompositingPolicy&gt; m_compositingPolicyOverride;
<span class="line-new-header">--- 944,19 ---</span>
  
      bool m_allowsMediaDocumentInlinePlayback { false };
      bool m_allowsPlaybackControlsForAutoplayingAudio { false };
      bool m_showAllPlugins { false };
      bool m_controlledByAutomation { false };
<span class="line-modified">!     bool m_resourceCachingDisabledByWebInspector { false };</span>
      bool m_isUtilityPage;
<span class="line-added">+     bool m_shouldEnableICECandidateFilteringByDefault { true };</span>
<span class="line-added">+     bool m_mediaPlaybackIsSuspended { false };</span>
<span class="line-added">+     bool m_mediaBufferingIsSuspended { false };</span>
<span class="line-added">+     bool m_inUpdateRendering { false };</span>
<span class="line-added">+     bool m_hasResourceLoadClient { false };</span>
<span class="line-added">+     bool m_delegatesScaling { false };</span>
<span class="line-added">+ </span>
      UserInterfaceLayoutDirection m_userInterfaceLayoutDirection { UserInterfaceLayoutDirection::LTR };
  
      // For testing.
      Optional&lt;EventThrottlingBehavior&gt; m_eventThrottlingBehaviorOverride;
      Optional&lt;CompositingPolicy&gt; m_compositingPolicyOverride;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 966,13 ***</span>
      Optional&lt;Navigation&gt; m_navigationToLogWhenVisible;
  
      std::unique_ptr&lt;PerformanceLogging&gt; m_performanceLogging;
  #if PLATFORM(MAC)
      Vector&lt;ScrollLatchingState&gt; m_latchingState;
<span class="line-removed">- #if ENABLE(SERVICE_CONTROLS) || ENABLE(TELEPHONE_NUMBER_DETECTION)</span>
<span class="line-removed">-     std::unique_ptr&lt;ServicesOverlayController&gt; m_servicesOverlayController;</span>
  #endif
  #endif
  
      std::unique_ptr&lt;WheelEventDeltaFilter&gt; m_recentWheelEventDeltaFilter;
      std::unique_ptr&lt;PageOverlayController&gt; m_pageOverlayController;
  
<span class="line-new-header">--- 968,13 ---</span>
      Optional&lt;Navigation&gt; m_navigationToLogWhenVisible;
  
      std::unique_ptr&lt;PerformanceLogging&gt; m_performanceLogging;
  #if PLATFORM(MAC)
      Vector&lt;ScrollLatchingState&gt; m_latchingState;
  #endif
<span class="line-added">+ #if PLATFORM(MAC) &amp;&amp; (ENABLE(SERVICE_CONTROLS) || ENABLE(TELEPHONE_NUMBER_DETECTION))</span>
<span class="line-added">+     std::unique_ptr&lt;ServicesOverlayController&gt; m_servicesOverlayController;</span>
  #endif
  
      std::unique_ptr&lt;WheelEventDeltaFilter&gt; m_recentWheelEventDeltaFilter;
      std::unique_ptr&lt;PageOverlayController&gt; m_pageOverlayController;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 988,21 ***</span>
      Optional&lt;ApplicationManifest&gt; m_applicationManifest;
  #endif
  
      Optional&lt;ViewportArguments&gt; m_overrideViewportArguments;
  
<span class="line-modified">!     bool m_shouldEnableICECandidateFilteringByDefault { true };</span>
<span class="line-modified">!     bool m_mediaPlaybackIsSuspended { false };</span>
<span class="line-modified">!     bool m_mediaBufferingIsSuspended { false };</span>
<span class="line-removed">-     bool m_inUpdateRendering { false };</span>
  
<span class="line-modified">!     bool m_isForSanitizingWebContent { false };</span>
  };
  
  inline PageGroup&amp; Page::group()
  {
      if (!m_group)
          initGroup();
      return *m_group;
  }
  
  } // namespace WebCore
<span class="line-new-header">--- 990,28 ---</span>
      Optional&lt;ApplicationManifest&gt; m_applicationManifest;
  #endif
  
      Optional&lt;ViewportArguments&gt; m_overrideViewportArguments;
  
<span class="line-modified">! #if ENABLE(DEVICE_ORIENTATION) &amp;&amp; PLATFORM(IOS_FAMILY)</span>
<span class="line-modified">!     RefPtr&lt;DeviceOrientationUpdateProvider&gt; m_deviceOrientationUpdateProvider;</span>
<span class="line-modified">! #endif</span>
  
<span class="line-modified">!     Vector&lt;UserContentURLPattern&gt; m_corsDisablingPatterns;</span>
  };
  
  inline PageGroup&amp; Page::group()
  {
      if (!m_group)
          initGroup();
      return *m_group;
  }
  
<span class="line-added">+ #if !ASSERT_ENABLED</span>
<span class="line-added">+ </span>
<span class="line-added">+ inline void Page::checkSubframeCountConsistency() const</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ #endif // !ASSERT_ENABLED</span>
<span class="line-added">+ </span>
  } // namespace WebCore
</pre>
<center><a href="Page.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="PageConfiguration.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>