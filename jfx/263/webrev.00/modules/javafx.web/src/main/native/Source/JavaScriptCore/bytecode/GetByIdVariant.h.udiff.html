<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/JavaScriptCore/bytecode/GetByIdVariant.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="GetByIdVariant.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="GetterSetterAccessCase.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/bytecode/GetByIdVariant.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (C) 2014-2018 Apple Inc. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (C) 2014-2020 Apple Inc. All rights reserved.</span>
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   * 1. Redistributions of source code must retain the above copyright
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -23,34 +23,37 @@</span>
   * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   */
  
  #pragma once
  
<span class="udiff-line-added">+ #include &quot;CacheableIdentifier.h&quot;</span>
  #include &quot;CallLinkStatus.h&quot;
  #include &quot;ObjectPropertyConditionSet.h&quot;
  #include &quot;PropertyOffset.h&quot;
  #include &quot;StructureSet.h&quot;
<span class="udiff-line-added">+ #include &lt;wtf/Box.h&gt;</span>
  
  namespace JSC {
  namespace DOMJIT {
  class GetterSetter;
  }
  
  class CallLinkStatus;
<span class="udiff-line-modified-removed">- class GetByIdStatus;</span>
<span class="udiff-line-modified-added">+ class GetByStatus;</span>
  struct DumpContext;
  
  class GetByIdVariant {
      WTF_MAKE_FAST_ALLOCATED;
  public:
      GetByIdVariant(
<span class="udiff-line-added">+         CacheableIdentifier,</span>
          const StructureSet&amp; structureSet = StructureSet(), PropertyOffset offset = invalidOffset,
          const ObjectPropertyConditionSet&amp; = ObjectPropertyConditionSet(),
          std::unique_ptr&lt;CallLinkStatus&gt; = nullptr,
          JSFunction* = nullptr,
          FunctionPtr&lt;OperationPtrTag&gt; customAccessorGetter = nullptr,
<span class="udiff-line-modified-removed">-         Optional&lt;DOMAttributeAnnotation&gt; = WTF::nullopt);</span>
<span class="udiff-line-modified-added">+         std::unique_ptr&lt;DOMAttributeAnnotation&gt; = nullptr);</span>
  
      ~GetByIdVariant();
  
      GetByIdVariant(const GetByIdVariant&amp;);
      GetByIdVariant&amp; operator=(const GetByIdVariant&amp;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -66,32 +69,47 @@</span>
      PropertyOffset offset() const { return m_offset; }
      CallLinkStatus* callLinkStatus() const { return m_callLinkStatus.get(); }
      JSFunction* intrinsicFunction() const { return m_intrinsicFunction; }
      Intrinsic intrinsic() const { return m_intrinsicFunction ? m_intrinsicFunction-&gt;intrinsic() : NoIntrinsic; }
      FunctionPtr&lt;OperationPtrTag&gt; customAccessorGetter() const { return m_customAccessorGetter; }
<span class="udiff-line-modified-removed">-     Optional&lt;DOMAttributeAnnotation&gt; domAttribute() const { return m_domAttribute; }</span>
<span class="udiff-line-modified-added">+     DOMAttributeAnnotation* domAttribute() const { return m_domAttribute.get(); }</span>
  
      bool isPropertyUnset() const { return offset() == invalidOffset; }
  
      bool attemptToMerge(const GetByIdVariant&amp; other);
  
<span class="udiff-line-added">+     void visitAggregate(SlotVisitor&amp;);</span>
      void markIfCheap(SlotVisitor&amp;);
      bool finalize(VM&amp;);
  
      void dump(PrintStream&amp;) const;
      void dumpInContext(PrintStream&amp;, DumpContext*) const;
  
<span class="udiff-line-added">+     CacheableIdentifier identifier() const { return m_identifier; }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     bool overlaps(const GetByIdVariant&amp; other)</span>
<span class="udiff-line-added">+     {</span>
<span class="udiff-line-added">+         if (!!m_identifier != !!other.m_identifier)</span>
<span class="udiff-line-added">+             return true;</span>
<span class="udiff-line-added">+         if (m_identifier) {</span>
<span class="udiff-line-added">+             if (m_identifier != other.m_identifier)</span>
<span class="udiff-line-added">+                 return false;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+         return structureSet().overlaps(other.structureSet());</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
  private:
<span class="udiff-line-modified-removed">-     friend class GetByIdStatus;</span>
<span class="udiff-line-modified-added">+     friend class GetByStatus;</span>
  
      bool canMergeIntrinsicStructures(const GetByIdVariant&amp;) const;
  
      StructureSet m_structureSet;
      ObjectPropertyConditionSet m_conditionSet;
      PropertyOffset m_offset;
      std::unique_ptr&lt;CallLinkStatus&gt; m_callLinkStatus;
      JSFunction* m_intrinsicFunction;
      FunctionPtr&lt;OperationPtrTag&gt; m_customAccessorGetter;
<span class="udiff-line-modified-removed">-     Optional&lt;DOMAttributeAnnotation&gt; m_domAttribute;</span>
<span class="udiff-line-modified-added">+     std::unique_ptr&lt;DOMAttributeAnnotation&gt; m_domAttribute;</span>
<span class="udiff-line-added">+     CacheableIdentifier m_identifier;</span>
  };
  
  } // namespace JSC
</pre>
<center><a href="GetByIdVariant.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="GetterSetterAccessCase.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>