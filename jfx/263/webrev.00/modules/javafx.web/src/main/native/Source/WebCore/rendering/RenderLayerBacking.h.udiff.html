<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/WebCore/rendering/RenderLayerBacking.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="RenderLayerBacking.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="RenderLayerCompositor.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/rendering/RenderLayerBacking.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -33,16 +33,26 @@</span>
  #include &quot;RenderLayerCompositor.h&quot;
  #include &quot;ScrollingCoordinator.h&quot;
  
  namespace WebCore {
  
<span class="udiff-line-added">+ class EventRegionContext;</span>
  class KeyframeList;
  class PaintedContentsInfo;
  class RenderLayerCompositor;
  class TiledBacking;
  class TransformationMatrix;
  
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ #if __WORDSIZE == 64</span>
<span class="udiff-line-added">+ #define USE_OWNING_LAYER_BEAR_TRAP 1</span>
<span class="udiff-line-added">+ #define BEAR_TRAP_VALUE 0xEEEEEEEEEEEEEEEE</span>
<span class="udiff-line-added">+ #else</span>
<span class="udiff-line-added">+ #define USE_OWNING_LAYER_BEAR_TRAP 0</span>
<span class="udiff-line-added">+ #endif</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ </span>
  enum CompositingLayerType {
      NormalCompositingLayer, // non-tiled layer with backing store
      TiledCompositingLayer, // tiled layer (always has backing store)
      MediaCompositingLayer, // layer that contains an image, video, WebGL or plugin
      ContainerCompositingLayer // layer with no backing store
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -79,14 +89,14 @@</span>
      void clearBackingSharingLayers();
  
      void updateConfigurationAfterStyleChange();
  
      // Returns true if layer configuration changed.
<span class="udiff-line-modified-removed">-     bool updateConfiguration();</span>
<span class="udiff-line-modified-added">+     bool updateConfiguration(const RenderLayer* compositingAncestor);</span>
  
      // Update graphics layer position and bounds.
<span class="udiff-line-modified-removed">-     void updateGeometry();</span>
<span class="udiff-line-modified-added">+     void updateGeometry(const RenderLayer* compositingAncestor);</span>
  
      // Update state the requires that descendant layers have been updated.
      void updateAfterDescendants();
  
      // Update contents and clipping structure.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -228,11 +238,11 @@</span>
      void tiledBackingUsageChanged(const GraphicsLayer*, bool /*usingTiledBacking*/) override;
      void notifyAnimationStarted(const GraphicsLayer*, const String&amp; animationKey, MonotonicTime startTime) override;
      void notifyFlushRequired(const GraphicsLayer*) override;
      void notifyFlushBeforeDisplayRefresh(const GraphicsLayer*) override;
  
<span class="udiff-line-modified-removed">-     void paintContents(const GraphicsLayer*, GraphicsContext&amp;, OptionSet&lt;GraphicsLayerPaintingPhase&gt;, const FloatRect&amp; clip, GraphicsLayerPaintBehavior) override;</span>
<span class="udiff-line-modified-added">+     void paintContents(const GraphicsLayer*, GraphicsContext&amp;, const FloatRect&amp; clip, GraphicsLayerPaintBehavior) override;</span>
  
      float deviceScaleFactor() const override;
      float contentsScaleMultiplierForNewTiles(const GraphicsLayer*) const override;
  
      bool paintsOpaquelyAtNonIntegralScales(const GraphicsLayer*) const override;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -374,21 +384,25 @@</span>
      bool shouldClipCompositedBounds() const;
  
      bool hasTiledBackingFlatteningLayer() const { return (m_childContainmentLayer &amp;&amp; m_isFrameLayerWithTiledBacking); }
      GraphicsLayer* tileCacheFlatteningLayer() const { return m_isFrameLayerWithTiledBacking ? m_childContainmentLayer.get() : nullptr; }
  
<span class="udiff-line-modified-removed">-     void paintIntoLayer(const GraphicsLayer*, GraphicsContext&amp;, const IntRect&amp; paintDirtyRect, OptionSet&lt;PaintBehavior&gt;, OptionSet&lt;GraphicsLayerPaintingPhase&gt;);</span>
<span class="udiff-line-modified-added">+     void paintIntoLayer(const GraphicsLayer*, GraphicsContext&amp;, const IntRect&amp; paintDirtyRect, OptionSet&lt;PaintBehavior&gt;, EventRegionContext* = nullptr);</span>
<span class="udiff-line-added">+     OptionSet&lt;RenderLayer::PaintLayerFlag&gt; paintFlagsForLayer(const GraphicsLayer&amp;) const;</span>
  
      void paintDebugOverlays(const GraphicsLayer*, GraphicsContext&amp;);
  
      static CSSPropertyID graphicsLayerToCSSProperty(AnimatedPropertyID);
      static AnimatedPropertyID cssToGraphicsLayerProperty(CSSPropertyID);
  
      bool canIssueSetNeedsDisplay() const { return !paintsIntoWindow() &amp;&amp; !paintsIntoCompositedAncestor(); }
      LayoutRect computeParentGraphicsLayerRect(const RenderLayer* compositedAncestor) const;
<span class="udiff-line-modified-removed">-     LayoutRect computePrimaryGraphicsLayerRect(const LayoutRect&amp; parentGraphicsLayerRect) const;</span>
<span class="udiff-line-modified-added">+     LayoutRect computePrimaryGraphicsLayerRect(const RenderLayer* compositedAncestor, const LayoutRect&amp; parentGraphicsLayerRect) const;</span>
  
<span class="udiff-line-added">+ #if USE(OWNING_LAYER_BEAR_TRAP)</span>
<span class="udiff-line-added">+     uintptr_t m_owningLayerBearTrap { BEAR_TRAP_VALUE }; // webkit.org/b.206915</span>
<span class="udiff-line-added">+ #endif</span>
      RenderLayer&amp; m_owningLayer;
  
      // A list other layers that paint into this backing store, later than m_owningLayer in paint order.
      Vector&lt;WeakPtr&lt;RenderLayer&gt;&gt; m_backingSharingLayers;
  
</pre>
<center><a href="RenderLayerBacking.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="RenderLayerCompositor.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>