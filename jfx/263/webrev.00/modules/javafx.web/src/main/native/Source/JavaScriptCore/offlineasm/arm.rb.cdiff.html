<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/offlineasm/arm.rb</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../llint/LowLevelInterpreter64.asm.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="arm64.rb.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/offlineasm/arm.rb</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 35,11 ***</span>
  #  x3 =&gt; t3, a3, r3
  #  x6 =&gt;            (callee-save scratch)
  #  x7 =&gt; cfr
  #  x8 =&gt; t4         (callee-save)
  #  x9 =&gt; t5         (callee-save)
<span class="line-modified">! # x10 =&gt;            (callee-save scratch)</span>
  # x11 =&gt; cfr, csr0  (callee-save, metadataTable)
  # x12 =&gt;            (callee-save scratch)
  #  lr =&gt; lr
  #  sp =&gt; sp
  #  pc =&gt; pc
<span class="line-new-header">--- 35,11 ---</span>
  #  x3 =&gt; t3, a3, r3
  #  x6 =&gt;            (callee-save scratch)
  #  x7 =&gt; cfr
  #  x8 =&gt; t4         (callee-save)
  #  x9 =&gt; t5         (callee-save)
<span class="line-modified">! # x10 =&gt; csr1       (callee-save, PB)</span>
  # x11 =&gt; cfr, csr0  (callee-save, metadataTable)
  # x12 =&gt;            (callee-save scratch)
  #  lr =&gt; lr
  #  sp =&gt; sp
  #  pc =&gt; pc
</pre>
<hr />
<pre>
<span class="line-old-header">*** 67,11 ***</span>
      def armOperand
          @name
      end
  end
  
<span class="line-modified">! ARM_EXTRA_GPRS = [SpecialRegister.new(&quot;r6&quot;), SpecialRegister.new(&quot;r10&quot;), SpecialRegister.new(&quot;r12&quot;)]</span>
  ARM_EXTRA_FPRS = [SpecialRegister.new(&quot;d7&quot;)]
  ARM_SCRATCH_FPR = SpecialRegister.new(&quot;d6&quot;)
  OS_DARWIN = ((RUBY_PLATFORM =~ /darwin/i) != nil)
  
  def armMoveImmediate(value, register)
<span class="line-new-header">--- 67,11 ---</span>
      def armOperand
          @name
      end
  end
  
<span class="line-modified">! ARM_EXTRA_GPRS = [SpecialRegister.new(&quot;r6&quot;), SpecialRegister.new(&quot;r4&quot;), SpecialRegister.new(&quot;r12&quot;)]</span>
  ARM_EXTRA_FPRS = [SpecialRegister.new(&quot;d7&quot;)]
  ARM_SCRATCH_FPR = SpecialRegister.new(&quot;d6&quot;)
  OS_DARWIN = ((RUBY_PLATFORM =~ /darwin/i) != nil)
  
  def armMoveImmediate(value, register)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 100,19 ***</span>
          when &quot;t2&quot;, &quot;a2&quot;
              &quot;r2&quot;
          when &quot;a3&quot;
              &quot;r3&quot;
          when &quot;t3&quot;
<span class="line-modified">!             &quot;r4&quot;</span>
          when &quot;t4&quot;
              &quot;r8&quot;
          when &quot;t5&quot;
              &quot;r9&quot;
          when &quot;cfr&quot;
              &quot;r7&quot;
          when &quot;csr0&quot;
              &quot;r11&quot;
          when &quot;lr&quot;
              &quot;lr&quot;
          when &quot;sp&quot;
              &quot;sp&quot;
          when &quot;pc&quot;
<span class="line-new-header">--- 100,21 ---</span>
          when &quot;t2&quot;, &quot;a2&quot;
              &quot;r2&quot;
          when &quot;a3&quot;
              &quot;r3&quot;
          when &quot;t3&quot;
<span class="line-modified">!             &quot;r3&quot;</span>
          when &quot;t4&quot;
              &quot;r8&quot;
          when &quot;t5&quot;
              &quot;r9&quot;
          when &quot;cfr&quot;
              &quot;r7&quot;
          when &quot;csr0&quot;
              &quot;r11&quot;
<span class="line-added">+         when &quot;csr1&quot;</span>
<span class="line-added">+             &quot;r10&quot;</span>
          when &quot;lr&quot;
              &quot;lr&quot;
          when &quot;sp&quot;
              &quot;sp&quot;
          when &quot;pc&quot;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 297,12 ***</span>
              else
                  false
              end
          }
          result = riscLowerMalformedAddressesDouble(result)
<span class="line-modified">!         result = riscLowerMisplacedImmediates(result, [&quot;storeb&quot;, &quot;storei&quot;, &quot;storep&quot;, &quot;storeq&quot;])</span>
<span class="line-modified">!         result = riscLowerMalformedImmediates(result, 0..0xff)</span>
          result = riscLowerMisplacedAddresses(result)
          result = riscLowerRegisterReuse(result)
          result = assignRegistersToTemporaries(result, :gpr, ARM_EXTRA_GPRS)
          result = assignRegistersToTemporaries(result, :fpr, ARM_EXTRA_FPRS)
          result = armLowerStackPointerInComparison(result)
<span class="line-new-header">--- 299,12 ---</span>
              else
                  false
              end
          }
          result = riscLowerMalformedAddressesDouble(result)
<span class="line-modified">!         result = riscLowerMisplacedImmediates(result, [&quot;storeb&quot;, &quot;storeh&quot;, &quot;storei&quot;, &quot;storep&quot;, &quot;storeq&quot;])</span>
<span class="line-modified">!         result = riscLowerMalformedImmediates(result, 0..0xff, 0..0x0ff)</span>
          result = riscLowerMisplacedAddresses(result)
          result = riscLowerRegisterReuse(result)
          result = assignRegistersToTemporaries(result, :gpr, ARM_EXTRA_GPRS)
          result = assignRegistersToTemporaries(result, :fpr, ARM_EXTRA_FPRS)
          result = armLowerStackPointerInComparison(result)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 416,11 ***</span>
                      $asm.puts &quot;add#{suffix} #{armFlippedOperands(operands)}&quot;
                  end
              end
          when &quot;andi&quot;, &quot;andp&quot;
              emitArmCompact(&quot;ands&quot;, &quot;and&quot;, operands)
<span class="line-modified">!         when &quot;ori&quot;, &quot;orp&quot;</span>
              emitArmCompact(&quot;orrs&quot;, &quot;orr&quot;, operands)
          when &quot;oris&quot;
              emitArmCompact(&quot;orrs&quot;, &quot;orrs&quot;, operands)
          when &quot;xori&quot;, &quot;xorp&quot;
              emitArmCompact(&quot;eors&quot;, &quot;eor&quot;, operands)
<span class="line-new-header">--- 418,11 ---</span>
                      $asm.puts &quot;add#{suffix} #{armFlippedOperands(operands)}&quot;
                  end
              end
          when &quot;andi&quot;, &quot;andp&quot;
              emitArmCompact(&quot;ands&quot;, &quot;and&quot;, operands)
<span class="line-modified">!         when &quot;ori&quot;, &quot;orp&quot;, &quot;orh&quot;</span>
              emitArmCompact(&quot;orrs&quot;, &quot;orr&quot;, operands)
          when &quot;oris&quot;
              emitArmCompact(&quot;orrs&quot;, &quot;orrs&quot;, operands)
          when &quot;xori&quot;, &quot;xorp&quot;
              emitArmCompact(&quot;eors&quot;, &quot;eor&quot;, operands)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 466,11 ***</span>
              emitArm(&quot;vsub.f64&quot;, operands)
          when &quot;muld&quot;
              emitArm(&quot;vmul.f64&quot;, operands)
          when &quot;sqrtd&quot;
              $asm.puts &quot;vsqrt.f64 #{armFlippedOperands(operands)}&quot;
<span class="line-modified">!         when &quot;ci2d&quot;</span>
              $asm.puts &quot;vmov #{operands[1].armSingle}, #{operands[0].armOperand}&quot;
              $asm.puts &quot;vcvt.f64.s32 #{operands[1].armOperand}, #{operands[1].armSingle}&quot;
          when &quot;bdeq&quot;
              emitArmDoubleBranch(&quot;beq&quot;, operands)
          when &quot;bdneq&quot;
<span class="line-new-header">--- 468,11 ---</span>
              emitArm(&quot;vsub.f64&quot;, operands)
          when &quot;muld&quot;
              emitArm(&quot;vmul.f64&quot;, operands)
          when &quot;sqrtd&quot;
              $asm.puts &quot;vsqrt.f64 #{armFlippedOperands(operands)}&quot;
<span class="line-modified">!         when &quot;ci2ds&quot;</span>
              $asm.puts &quot;vmov #{operands[1].armSingle}, #{operands[0].armOperand}&quot;
              $asm.puts &quot;vcvt.f64.s32 #{operands[1].armOperand}, #{operands[1].armSingle}&quot;
          when &quot;bdeq&quot;
              emitArmDoubleBranch(&quot;beq&quot;, operands)
          when &quot;bdneq&quot;
</pre>
<center><a href="../llint/LowLevelInterpreter64.asm.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="arm64.rb.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>