<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old modules/javafx.web/src/main/native/Source/WebCore/platform/Cursor.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (C) 2010 Apple Inc. All rights reserved.
  3  *
  4  * Redistribution and use in source and binary forms, with or without
  5  * modification, are permitted provided that the following conditions
  6  * are met:
  7  * 1. Redistributions of source code must retain the above copyright
  8  *    notice, this list of conditions and the following disclaimer.
  9  * 2. Redistributions in binary form must reproduce the above copyright
 10  *    notice, this list of conditions and the following disclaimer in the
 11  *    documentation and/or other materials provided with the distribution.
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
 14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
 17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #include &quot;config.h&quot;
 27 #include &quot;Cursor.h&quot;
 28 
 29 #if !PLATFORM(IOS_FAMILY)
 30 
 31 #include &quot;Image.h&quot;
 32 #include &quot;IntRect.h&quot;
 33 #include &quot;NotImplemented.h&quot;
 34 #include &lt;wtf/Assertions.h&gt;
 35 #include &lt;wtf/NeverDestroyed.h&gt;
 36 
 37 namespace WebCore {
 38 
 39 IntPoint determineHotSpot(Image* image, const IntPoint&amp; specifiedHotSpot)
 40 {
 41     if (image-&gt;isNull())
 42         return IntPoint();
 43 
 44     // Hot spot must be inside cursor rectangle.
 45     IntRect imageRect = IntRect(image-&gt;rect());
 46     if (imageRect.contains(specifiedHotSpot))
 47         return specifiedHotSpot;
 48 
 49     // If hot spot is not specified externally, it can be extracted from some image formats (e.g. .cur).
 50     if (auto intrinsicHotSpot = image-&gt;hotSpot()) {
 51         if (imageRect.contains(intrinsicHotSpot.value()))
 52             return intrinsicHotSpot.value();
 53     }
 54 
 55     return IntPoint();
 56 }
 57 
 58 const Cursor&amp; Cursor::fromType(Cursor::Type type)
 59 {
 60     switch (type) {
 61     case Cursor::Pointer:
 62         return pointerCursor();
 63     case Cursor::Cross:
 64         return crossCursor();
 65     case Cursor::Hand:
 66         return handCursor();
 67     case Cursor::IBeam:
 68         return iBeamCursor();
 69     case Cursor::Wait:
 70         return waitCursor();
 71     case Cursor::Help:
 72         return helpCursor();
 73     case Cursor::EastResize:
 74         return eastResizeCursor();
 75     case Cursor::NorthResize:
 76         return northResizeCursor();
 77     case Cursor::NorthEastResize:
 78         return northEastResizeCursor();
 79     case Cursor::NorthWestResize:
 80         return northWestResizeCursor();
 81     case Cursor::SouthResize:
 82         return southResizeCursor();
 83     case Cursor::SouthEastResize:
 84         return southEastResizeCursor();
 85     case Cursor::SouthWestResize:
 86         return southWestResizeCursor();
 87     case Cursor::WestResize:
 88         return westResizeCursor();
 89     case Cursor::NorthSouthResize:
 90         return northSouthResizeCursor();
 91     case Cursor::EastWestResize:
 92         return eastWestResizeCursor();
 93     case Cursor::NorthEastSouthWestResize:
 94         return northEastSouthWestResizeCursor();
 95     case Cursor::NorthWestSouthEastResize:
 96         return northWestSouthEastResizeCursor();
 97     case Cursor::ColumnResize:
 98         return columnResizeCursor();
 99     case Cursor::RowResize:
100         return rowResizeCursor();
101     case Cursor::MiddlePanning:
102         return middlePanningCursor();
103     case Cursor::EastPanning:
104         return eastPanningCursor();
105     case Cursor::NorthPanning:
106         return northPanningCursor();
107     case Cursor::NorthEastPanning:
108         return northEastPanningCursor();
109     case Cursor::NorthWestPanning:
110         return northWestPanningCursor();
111     case Cursor::SouthPanning:
112         return southPanningCursor();
113     case Cursor::SouthEastPanning:
114         return southEastPanningCursor();
115     case Cursor::SouthWestPanning:
116         return southWestPanningCursor();
117     case Cursor::WestPanning:
118         return westPanningCursor();
119     case Cursor::Move:
120         return moveCursor();
121     case Cursor::VerticalText:
122         return verticalTextCursor();
123     case Cursor::Cell:
124         return cellCursor();
125     case Cursor::ContextMenu:
126         return contextMenuCursor();
127     case Cursor::Alias:
128         return aliasCursor();
129     case Cursor::Progress:
130         return progressCursor();
131     case Cursor::NoDrop:
132         return noDropCursor();
133     case Cursor::Copy:
134         return copyCursor();
135     case Cursor::None:
136         return noneCursor();
137     case Cursor::NotAllowed:
138         return notAllowedCursor();
139     case Cursor::ZoomIn:
140         return zoomInCursor();
141     case Cursor::ZoomOut:
142         return zoomOutCursor();
143     case Cursor::Grab:
144         return grabCursor();
145     case Cursor::Grabbing:
146         return grabbingCursor();
147     case Cursor::Custom:
148         ASSERT_NOT_REACHED();
149     }
150     return pointerCursor();
151 }
152 
153 #if !PLATFORM(JAVA)
154 Cursor::Cursor(Image* image, const IntPoint&amp; hotSpot)
155     : m_type(Custom)
156     , m_image(image)
157     , m_hotSpot(determineHotSpot(image, hotSpot))
158 #if ENABLE(MOUSE_CURSOR_SCALE)
159     , m_imageScaleFactor(1)
160 #endif
161     , m_platformCursor(0)
162 {
163 }
164 #endif
165 
166 #if ENABLE(MOUSE_CURSOR_SCALE)
167 Cursor::Cursor(Image* image, const IntPoint&amp; hotSpot, float scale)
168     : m_type(Custom)
169     , m_image(image)
170     , m_hotSpot(determineHotSpot(image, hotSpot))
171     , m_imageScaleFactor(scale)
172     , m_platformCursor(0)
173 {
174 }
175 #endif
176 
177 Cursor::Cursor(Type type)
178     : m_type(type)
179 #if ENABLE(MOUSE_CURSOR_SCALE)
180     , m_imageScaleFactor(1)
181 #endif
182     , m_platformCursor(0)
183 {
184 }
185 
186 #if !PLATFORM(COCOA)
187 
188 PlatformCursor Cursor::platformCursor() const
189 {
190     ensurePlatformCursor();
191     return m_platformCursor;
192 }
193 
194 #endif
195 
196 #if !PLATFORM(JAVA)
197 
198 const Cursor&amp; pointerCursor()
199 {
200     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Pointer);
201     return c;
202 }
203 
204 const Cursor&amp; crossCursor()
205 {
206     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Cross);
207     return c;
208 }
209 
210 const Cursor&amp; handCursor()
211 {
212     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Hand);
213     return c;
214 }
215 
216 const Cursor&amp; moveCursor()
217 {
218     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Move);
219     return c;
220 }
221 
222 const Cursor&amp; verticalTextCursor()
223 {
224     static NeverDestroyed&lt;Cursor&gt; c(Cursor::VerticalText);
225     return c;
226 }
227 
228 const Cursor&amp; cellCursor()
229 {
230     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Cell);
231     return c;
232 }
233 
234 const Cursor&amp; contextMenuCursor()
235 {
236     static NeverDestroyed&lt;Cursor&gt; c(Cursor::ContextMenu);
237     return c;
238 }
239 
240 const Cursor&amp; aliasCursor()
241 {
242     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Alias);
243     return c;
244 }
245 
246 const Cursor&amp; zoomInCursor()
247 {
248     static NeverDestroyed&lt;Cursor&gt; c(Cursor::ZoomIn);
249     return c;
250 }
251 
252 const Cursor&amp; zoomOutCursor()
253 {
254     static NeverDestroyed&lt;Cursor&gt; c(Cursor::ZoomOut);
255     return c;
256 }
257 
258 const Cursor&amp; copyCursor()
259 {
260     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Copy);
261     return c;
262 }
263 
264 const Cursor&amp; noneCursor()
265 {
266     static NeverDestroyed&lt;Cursor&gt; c(Cursor::None);
267     return c;
268 }
269 
270 const Cursor&amp; progressCursor()
271 {
272     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Progress);
273     return c;
274 }
275 
276 const Cursor&amp; noDropCursor()
277 {
278     static NeverDestroyed&lt;Cursor&gt; c(Cursor::NoDrop);
279     return c;
280 }
281 
282 const Cursor&amp; notAllowedCursor()
283 {
284     static NeverDestroyed&lt;Cursor&gt; c(Cursor::NotAllowed);
285     return c;
286 }
287 
288 const Cursor&amp; iBeamCursor()
289 {
290     static NeverDestroyed&lt;Cursor&gt; c(Cursor::IBeam);
291     return c;
292 }
293 
294 const Cursor&amp; waitCursor()
295 {
296     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Wait);
297     return c;
298 }
299 
300 const Cursor&amp; helpCursor()
301 {
302     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Help);
303     return c;
304 }
305 
306 const Cursor&amp; eastResizeCursor()
307 {
308     static NeverDestroyed&lt;Cursor&gt; c(Cursor::EastResize);
309     return c;
310 }
311 
312 const Cursor&amp; northResizeCursor()
313 {
314     static NeverDestroyed&lt;Cursor&gt; c(Cursor::NorthResize);
315     return c;
316 }
317 
318 const Cursor&amp; northEastResizeCursor()
319 {
320     static NeverDestroyed&lt;Cursor&gt; c(Cursor::NorthEastResize);
321     return c;
322 }
323 
324 const Cursor&amp; northWestResizeCursor()
325 {
326     static NeverDestroyed&lt;Cursor&gt; c(Cursor::NorthWestResize);
327     return c;
328 }
329 
330 const Cursor&amp; southResizeCursor()
331 {
332     static NeverDestroyed&lt;Cursor&gt; c(Cursor::SouthResize);
333     return c;
334 }
335 
336 const Cursor&amp; southEastResizeCursor()
337 {
338     static NeverDestroyed&lt;Cursor&gt; c(Cursor::SouthEastResize);
339     return c;
340 }
341 
342 const Cursor&amp; southWestResizeCursor()
343 {
344     static NeverDestroyed&lt;Cursor&gt; c(Cursor::SouthWestResize);
345     return c;
346 }
347 
348 const Cursor&amp; westResizeCursor()
349 {
350     static NeverDestroyed&lt;Cursor&gt; c(Cursor::WestResize);
351     return c;
352 }
353 
354 const Cursor&amp; northSouthResizeCursor()
355 {
356     static NeverDestroyed&lt;Cursor&gt; c(Cursor::NorthSouthResize);
357     return c;
358 }
359 
360 const Cursor&amp; eastWestResizeCursor()
361 {
362     static NeverDestroyed&lt;Cursor&gt; c(Cursor::EastWestResize);
363     return c;
364 }
365 
366 const Cursor&amp; northEastSouthWestResizeCursor()
367 {
368     static NeverDestroyed&lt;Cursor&gt; c(Cursor::NorthEastSouthWestResize);
369     return c;
370 }
371 
372 const Cursor&amp; northWestSouthEastResizeCursor()
373 {
374     static NeverDestroyed&lt;Cursor&gt; c(Cursor::NorthWestSouthEastResize);
375     return c;
376 }
377 
378 const Cursor&amp; columnResizeCursor()
379 {
380     static NeverDestroyed&lt;Cursor&gt; c(Cursor::ColumnResize);
381     return c;
382 }
383 
384 const Cursor&amp; rowResizeCursor()
385 {
386     static NeverDestroyed&lt;Cursor&gt; c(Cursor::RowResize);
387     return c;
388 }
389 
390 const Cursor&amp; middlePanningCursor()
391 {
392     static NeverDestroyed&lt;Cursor&gt; c(Cursor::MiddlePanning);
393     return c;
394 }
395 
396 const Cursor&amp; eastPanningCursor()
397 {
398     static NeverDestroyed&lt;Cursor&gt; c(Cursor::EastPanning);
399     return c;
400 }
401 
402 const Cursor&amp; northPanningCursor()
403 {
404     static NeverDestroyed&lt;Cursor&gt; c(Cursor::NorthPanning);
405     return c;
406 }
407 
408 const Cursor&amp; northEastPanningCursor()
409 {
410     static NeverDestroyed&lt;Cursor&gt; c(Cursor::NorthEastPanning);
411     return c;
412 }
413 
414 const Cursor&amp; northWestPanningCursor()
415 {
416     static NeverDestroyed&lt;Cursor&gt; c(Cursor::NorthWestPanning);
417     return c;
418 }
419 
420 const Cursor&amp; southPanningCursor()
421 {
422     static NeverDestroyed&lt;Cursor&gt; c(Cursor::SouthPanning);
423     return c;
424 }
425 
426 const Cursor&amp; southEastPanningCursor()
427 {
428     static NeverDestroyed&lt;Cursor&gt; c(Cursor::SouthEastPanning);
429     return c;
430 }
431 
432 const Cursor&amp; southWestPanningCursor()
433 {
434     static NeverDestroyed&lt;Cursor&gt; c(Cursor::SouthWestPanning);
435     return c;
436 }
437 
438 const Cursor&amp; westPanningCursor()
439 {
440     static NeverDestroyed&lt;Cursor&gt; c(Cursor::WestPanning);
441     return c;
442 }
443 
444 const Cursor&amp; grabCursor()
445 {
446     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Grab);
447     return c;
448 }
449 
450 const Cursor&amp; grabbingCursor()
451 {
452     static NeverDestroyed&lt;Cursor&gt; c(Cursor::Grabbing);
453     return c;
454 }
455 
456 #if !PLATFORM(COCOA) &amp;&amp; !PLATFORM(GTK) &amp;&amp; !PLATFORM(WIN)
457 void Cursor::ensurePlatformCursor() const
458 {
459     notImplemented();
460 }
461 #endif
462 
463 #endif
464 
465 } // namespace WebCore
466 
467 #endif // !PLATFORM(IOS_FAMILY)
468 
    </pre>
  </body>
</html>