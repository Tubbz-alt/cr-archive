<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/platform/network/BlobRegistryImpl.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="BlobRegistry.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="CacheValidation.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/platform/network/BlobRegistryImpl.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
225     ASSERT(isMainThread());
226     return m_blobs.get(url.string());
227 }
228 
229 unsigned long long BlobRegistryImpl::blobSize(const URL&amp; url)
230 {
231     ASSERT(isMainThread());
232     BlobData* data = getBlobDataFromURL(url);
233     if (!data)
234         return 0;
235 
236     unsigned long long result = 0;
237     for (const BlobDataItem&amp; item : data-&gt;items())
238         result += item.length();
239 
240     return result;
241 }
242 
243 static WorkQueue&amp; blobUtilityQueue()
244 {
<span class="line-modified">245     static auto&amp; queue = WorkQueue::create(&quot;org.webkit.BlobUtility&quot;, WorkQueue::Type::Serial, WorkQueue::QOS::Background).leakRef();</span>
246     return queue;
247 }
248 
249 bool BlobRegistryImpl::populateBlobsForFileWriting(const Vector&lt;String&gt;&amp; blobURLs, Vector&lt;BlobForFileWriting&gt;&amp; blobsForWriting)
250 {
251     for (auto&amp; url : blobURLs) {
252         blobsForWriting.append({ });
253         blobsForWriting.last().blobURL = url.isolatedCopy();
254 
255         auto* blobData = getBlobDataFromURL({ { }, url });
256         if (!blobData)
257             return false;
258 
259         for (auto&amp; item : blobData-&gt;items()) {
260             switch (item.type()) {
261             case BlobDataItem::Type::Data:
262                 blobsForWriting.last().filePathsOrDataBuffers.append({ { }, item.data() });
263                 break;
264             case BlobDataItem::Type::File:
265                 blobsForWriting.last().filePathsOrDataBuffers.append({ item.file()-&gt;path().isolatedCopy(), { } });
</pre>
</td>
<td>
<hr />
<pre>
225     ASSERT(isMainThread());
226     return m_blobs.get(url.string());
227 }
228 
229 unsigned long long BlobRegistryImpl::blobSize(const URL&amp; url)
230 {
231     ASSERT(isMainThread());
232     BlobData* data = getBlobDataFromURL(url);
233     if (!data)
234         return 0;
235 
236     unsigned long long result = 0;
237     for (const BlobDataItem&amp; item : data-&gt;items())
238         result += item.length();
239 
240     return result;
241 }
242 
243 static WorkQueue&amp; blobUtilityQueue()
244 {
<span class="line-modified">245     static auto&amp; queue = WorkQueue::create(&quot;org.webkit.BlobUtility&quot;, WorkQueue::Type::Serial, WorkQueue::QOS::Utility).leakRef();</span>
246     return queue;
247 }
248 
249 bool BlobRegistryImpl::populateBlobsForFileWriting(const Vector&lt;String&gt;&amp; blobURLs, Vector&lt;BlobForFileWriting&gt;&amp; blobsForWriting)
250 {
251     for (auto&amp; url : blobURLs) {
252         blobsForWriting.append({ });
253         blobsForWriting.last().blobURL = url.isolatedCopy();
254 
255         auto* blobData = getBlobDataFromURL({ { }, url });
256         if (!blobData)
257             return false;
258 
259         for (auto&amp; item : blobData-&gt;items()) {
260             switch (item.type()) {
261             case BlobDataItem::Type::Data:
262                 blobsForWriting.last().filePathsOrDataBuffers.append({ { }, item.data() });
263                 break;
264             case BlobDataItem::Type::File:
265                 blobsForWriting.last().filePathsOrDataBuffers.append({ item.file()-&gt;path().isolatedCopy(), { } });
</pre>
</td>
</tr>
</table>
<center><a href="BlobRegistry.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="CacheValidation.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>