<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/WebCore/layout/displaytree/DisplayRect.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DisplayBox.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="DisplayRun.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/layout/displaytree/DisplayRect.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 25,22 ***</span>
  
  #pragma once
  
  #if ENABLE(LAYOUT_FORMATTING_CONTEXT)
  
  #include &quot;LayoutUnits.h&quot;
  
  namespace WebCore {
<span class="line-removed">- </span>
<span class="line-removed">- class RenderStyle;</span>
<span class="line-removed">- </span>
  namespace Display {
  
  class Rect {
  public:
      Rect() = default;
      Rect(LayoutUnit top, LayoutUnit left, LayoutUnit width, LayoutUnit height);
  
      LayoutUnit top() const;
      LayoutUnit left() const;
      LayoutPoint topLeft() const;
  
<span class="line-new-header">--- 25,21 ---</span>
  
  #pragma once
  
  #if ENABLE(LAYOUT_FORMATTING_CONTEXT)
  
<span class="line-added">+ #include &quot;LayoutRect.h&quot;</span>
  #include &quot;LayoutUnits.h&quot;
  
  namespace WebCore {
  namespace Display {
  
  class Rect {
  public:
      Rect() = default;
      Rect(LayoutUnit top, LayoutUnit left, LayoutUnit width, LayoutUnit height);
<span class="line-added">+     Rect(LayoutPoint topLeft, LayoutUnit width, LayoutUnit height);</span>
  
      LayoutUnit top() const;
      LayoutUnit left() const;
      LayoutPoint topLeft() const;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 65,20 ***</span>
      void shiftBottomTo(LayoutUnit);
  
      void moveHorizontally(LayoutUnit);
      void moveVertically(LayoutUnit);
  
<span class="line-modified">!     void expand(LayoutUnit, LayoutUnit);</span>
<span class="line-modified">!     void expandHorizontally(LayoutUnit delta) { expand(delta, 0); }</span>
<span class="line-modified">!     void expandVertically(LayoutUnit delta) { expand(0, delta); }</span>
      bool intersects(const Rect&amp; rect) const { return m_rect.intersects(rect); }
  
      Rect clone() const;
      operator LayoutRect() const;
  
  private:
<span class="line-modified">! #if !ASSERT_DISABLED</span>
      void invalidateTop() { m_hasValidTop = false; }
      void invalidateLeft() { m_hasValidLeft = false; }
      void invalidateWidth() { m_hasValidWidth = false; }
      void invalidateHeight() { m_hasValidHeight = false; }
      void invalidatePosition();
<span class="line-new-header">--- 64,20 ---</span>
      void shiftBottomTo(LayoutUnit);
  
      void moveHorizontally(LayoutUnit);
      void moveVertically(LayoutUnit);
  
<span class="line-modified">!     void expand(Optional&lt;LayoutUnit&gt;, Optional&lt;LayoutUnit&gt;);</span>
<span class="line-modified">!     void expandHorizontally(LayoutUnit delta) { expand(delta, { }); }</span>
<span class="line-modified">!     void expandVertically(LayoutUnit delta) { expand({ }, delta); }</span>
      bool intersects(const Rect&amp; rect) const { return m_rect.intersects(rect); }
  
      Rect clone() const;
      operator LayoutRect() const;
  
  private:
<span class="line-modified">! #if ASSERT_ENABLED</span>
      void invalidateTop() { m_hasValidTop = false; }
      void invalidateLeft() { m_hasValidLeft = false; }
      void invalidateWidth() { m_hasValidWidth = false; }
      void invalidateHeight() { m_hasValidHeight = false; }
      void invalidatePosition();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 92,26 ***</span>
  
      bool m_hasValidTop { false };
      bool m_hasValidLeft { false };
      bool m_hasValidWidth { false };
      bool m_hasValidHeight { false };
<span class="line-modified">! #endif</span>
      LayoutRect m_rect;
  };
  
  inline Rect::Rect(LayoutUnit top, LayoutUnit left, LayoutUnit width, LayoutUnit height)
      : m_rect(left, top, width, height)
  {
<span class="line-modified">! #if !ASSERT_DISABLED</span>
      m_hasValidTop = true;
      m_hasValidLeft = true;
      m_hasValidWidth = true;
      m_hasValidHeight = true;
  #endif
  }
  
<span class="line-modified">! #if !ASSERT_DISABLED</span>
  inline void Rect::invalidatePosition()
  {
      invalidateTop();
      invalidateLeft();
  }
<span class="line-new-header">--- 91,31 ---</span>
  
      bool m_hasValidTop { false };
      bool m_hasValidLeft { false };
      bool m_hasValidWidth { false };
      bool m_hasValidHeight { false };
<span class="line-modified">! #endif // ASSERT_ENABLED</span>
      LayoutRect m_rect;
  };
  
  inline Rect::Rect(LayoutUnit top, LayoutUnit left, LayoutUnit width, LayoutUnit height)
      : m_rect(left, top, width, height)
  {
<span class="line-modified">! #if ASSERT_ENABLED</span>
      m_hasValidTop = true;
      m_hasValidLeft = true;
      m_hasValidWidth = true;
      m_hasValidHeight = true;
  #endif
  }
  
<span class="line-modified">! inline Rect::Rect(LayoutPoint topLeft, LayoutUnit width, LayoutUnit height)</span>
<span class="line-added">+     : Rect(topLeft.y(), topLeft.x(), width, height)</span>
<span class="line-added">+ {</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ #if ASSERT_ENABLED</span>
  inline void Rect::invalidatePosition()
  {
      invalidateTop();
      invalidateLeft();
  }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 183,51 ***</span>
      return m_rect.height();
  }
  
  inline void Rect::setTopLeft(const LayoutPoint&amp; topLeft)
  {
<span class="line-modified">! #if !ASSERT_DISABLED</span>
      setHasValidPosition();
  #endif
      m_rect.setLocation(topLeft);
  }
  
  inline void Rect::setTop(LayoutUnit top)
  {
<span class="line-modified">! #if !ASSERT_DISABLED</span>
      m_hasValidTop = true;
  #endif
      m_rect.setY(top);
  }
  
  inline void Rect::setLeft(LayoutUnit left)
  {
<span class="line-modified">! #if !ASSERT_DISABLED</span>
      m_hasValidLeft = true;
  #endif
      m_rect.setX(left);
  }
  
  inline void Rect::setWidth(LayoutUnit width)
  {
<span class="line-modified">! #if !ASSERT_DISABLED</span>
      m_hasValidWidth = true;
  #endif
      m_rect.setWidth(width);
  }
  
  inline void Rect::setHeight(LayoutUnit height)
  {
<span class="line-modified">! #if !ASSERT_DISABLED</span>
      m_hasValidHeight = true;
  #endif
      m_rect.setHeight(height);
  }
  
  inline void Rect::setSize(const LayoutSize&amp; size)
  {
<span class="line-modified">! #if !ASSERT_DISABLED</span>
      setHasValidSize();
  #endif
      m_rect.setSize(size);
  }
  
<span class="line-new-header">--- 187,51 ---</span>
      return m_rect.height();
  }
  
  inline void Rect::setTopLeft(const LayoutPoint&amp; topLeft)
  {
<span class="line-modified">! #if ASSERT_ENABLED</span>
      setHasValidPosition();
  #endif
      m_rect.setLocation(topLeft);
  }
  
  inline void Rect::setTop(LayoutUnit top)
  {
<span class="line-modified">! #if ASSERT_ENABLED</span>
      m_hasValidTop = true;
  #endif
      m_rect.setY(top);
  }
  
  inline void Rect::setLeft(LayoutUnit left)
  {
<span class="line-modified">! #if ASSERT_ENABLED</span>
      m_hasValidLeft = true;
  #endif
      m_rect.setX(left);
  }
  
  inline void Rect::setWidth(LayoutUnit width)
  {
<span class="line-modified">! #if ASSERT_ENABLED</span>
      m_hasValidWidth = true;
  #endif
      m_rect.setWidth(width);
  }
  
  inline void Rect::setHeight(LayoutUnit height)
  {
<span class="line-modified">! #if ASSERT_ENABLED</span>
      m_hasValidHeight = true;
  #endif
      m_rect.setHeight(height);
  }
  
  inline void Rect::setSize(const LayoutSize&amp; size)
  {
<span class="line-modified">! #if ASSERT_ENABLED</span>
      setHasValidSize();
  #endif
      m_rect.setSize(size);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 265,20 ***</span>
  {
      ASSERT(m_hasValidTop);
      m_rect.move(LayoutSize { 0, offset });
  }
  
<span class="line-modified">! inline void Rect::expand(LayoutUnit width, LayoutUnit height)</span>
  {
<span class="line-modified">!     ASSERT(hasValidGeometry());</span>
<span class="line-modified">!     m_rect.expand(width, height);</span>
  }
  
  inline Rect Rect::clone() const
  {
      Rect rect;
<span class="line-modified">! #if !ASSERT_DISABLED</span>
      rect.m_hasValidTop = m_hasValidTop;
      rect.m_hasValidLeft = m_hasValidLeft;
      rect.m_hasValidWidth = m_hasValidWidth;
      rect.m_hasValidHeight  = m_hasValidHeight;
  #endif
<span class="line-new-header">--- 269,21 ---</span>
  {
      ASSERT(m_hasValidTop);
      m_rect.move(LayoutSize { 0, offset });
  }
  
<span class="line-modified">! inline void Rect::expand(Optional&lt;LayoutUnit&gt; width, Optional&lt;LayoutUnit&gt; height)</span>
  {
<span class="line-modified">!     ASSERT(!width || m_hasValidWidth);</span>
<span class="line-modified">!     ASSERT(!height || m_hasValidHeight);</span>
<span class="line-added">+     m_rect.expand(width.valueOr(0), height.valueOr(0));</span>
  }
  
  inline Rect Rect::clone() const
  {
      Rect rect;
<span class="line-modified">! #if ASSERT_ENABLED</span>
      rect.m_hasValidTop = m_hasValidTop;
      rect.m_hasValidLeft = m_hasValidLeft;
      rect.m_hasValidWidth = m_hasValidWidth;
      rect.m_hasValidHeight  = m_hasValidHeight;
  #endif
</pre>
<center><a href="DisplayBox.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="DisplayRun.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>