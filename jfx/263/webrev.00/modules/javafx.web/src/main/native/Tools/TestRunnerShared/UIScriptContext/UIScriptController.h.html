<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.web/src/main/native/Tools/TestRunnerShared/UIScriptContext/UIScriptController.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (C) 2015 Apple Inc. All rights reserved.
  3  *
  4  * Redistribution and use in source and binary forms, with or without
  5  * modification, are permitted provided that the following conditions
  6  * are met:
  7  * 1. Redistributions of source code must retain the above copyright
  8  *    notice, this list of conditions and the following disclaimer.
  9  * 2. Redistributions in binary form must reproduce the above copyright
 10  *    notice, this list of conditions and the following disclaimer in the
 11  *    documentation and/or other materials provided with the distribution.
 12  *
 13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS&#39;&#39;
 14  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 15  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 16  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS
 17  * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 18  * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 19  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 20  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 21  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 22  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
 23  * THE POSSIBILITY OF SUCH DAMAGE.
 24  */
 25 
 26 #ifndef UIScriptController_h
 27 #define UIScriptController_h
 28 
 29 #include &quot;JSWrappable.h&quot;
 30 #include &lt;JavaScriptCore/JSRetainPtr.h&gt;
 31 #include &lt;wtf/Optional.h&gt;
 32 #include &lt;wtf/Ref.h&gt;
 33 
 34 OBJC_CLASS NSUndoManager;
 35 OBJC_CLASS NSView;
 36 OBJC_CLASS UIView;
 37 
 38 namespace WebCore {
 39 class FloatRect;
 40 }
 41 
 42 namespace WTR {
 43 
 44 class UIScriptContext;
 45 
 46 enum class DeviceOrientation {
 47     Portrait,
 48     PortraitUpsideDown,
 49     LandscapeLeft,
 50     LandscapeRight
 51 };
 52 
 53 DeviceOrientation* toDeviceOrientation(JSContextRef, JSValueRef);
 54 
 55 class UIScriptController : public JSWrappable {
 56 public:
 57     static Ref&lt;UIScriptController&gt; create(UIScriptContext&amp;);
 58 
 59     void uiScriptComplete(JSStringRef result);
 60 
 61     void notImplemented() const { RELEASE_ASSERT_NOT_REACHED(); }
 62 
 63     void contextDestroyed();
 64     virtual void waitForOutstandingCallbacks() { /* notImplemented(); */ }
 65 
 66     void makeWindowObject(JSContextRef, JSObjectRef windowObject, JSValueRef* exception);
 67 
 68     // Transaction helpers
 69 
 70     virtual void doAsyncTask(JSValueRef callback) { notImplemented(); }
 71     virtual void doAfterPresentationUpdate(JSValueRef callback) { doAsyncTask(callback); }
 72     virtual void doAfterNextStablePresentationUpdate(JSValueRef callback) { doAsyncTask(callback); }
 73     virtual void ensurePositionInformationIsUpToDateAt(long x, long y, JSValueRef callback) { doAsyncTask(callback); }
 74     virtual void doAfterVisibleContentRectUpdate(JSValueRef callback) { doAsyncTask(callback); }
 75 
 76     virtual void doAfterDoubleTapDelay(JSValueRef callback) { doAsyncTask(callback); }
 77 
 78     // Preferences
 79 
 80     virtual void overridePreference(JSStringRef preference, JSStringRef value) { notImplemented(); }
 81 
 82     // Zooming
 83 
 84     virtual void zoomToScale(double scale, JSValueRef callback) { notImplemented(); }
 85     virtual void immediateZoomToScale(double scale) { notImplemented(); }
 86     virtual void setViewScale(double) { notImplemented(); }
 87     virtual double zoomScale() const { notImplemented(); return 1; }
 88     virtual double minimumZoomScale() const { notImplemented(); return 1; }
 89     virtual double maximumZoomScale() const { notImplemented(); return 1; }
 90 
 91     // Viewports
 92 
 93     virtual void setMinimumEffectiveWidth(double) { notImplemented(); }
 94     virtual void setAllowsViewportShrinkToFit(bool) { notImplemented(); }
 95 
 96     virtual Optional&lt;bool&gt; stableStateOverride() const { notImplemented(); return WTF::nullopt; }
 97     virtual void setStableStateOverride(Optional&lt;bool&gt;) { notImplemented(); }
 98 
 99     virtual JSObjectRef contentVisibleRect() const { notImplemented(); return nullptr; }
100 
101     virtual void setSafeAreaInsets(double top, double right, double bottom, double left) { notImplemented(); }
102 
103     // View Parenting and Visibility
104 
105     virtual void becomeFirstResponder() { notImplemented(); }
106     virtual void resignFirstResponder() { notImplemented(); }
107 
108     virtual void copyText(JSStringRef) { notImplemented(); }
109 
110     virtual void chooseMenuAction(JSStringRef, JSValueRef);
111     virtual void dismissMenu();
112 
113     virtual void firstResponderSuppressionForWebView(bool) { notImplemented(); }
114     virtual void makeWindowContentViewFirstResponder() { notImplemented(); }
115     virtual bool isWindowContentViewFirstResponder() const { notImplemented(); return false; }
116 
117     virtual void removeViewFromWindow(JSValueRef) { notImplemented(); }
118     virtual void addViewToWindow(JSValueRef) { notImplemented(); }
119 
120     // Compositing
121 
122     virtual JSObjectRef propertiesOfLayerWithID(uint64_t layerID) const { notImplemented(); return nullptr; }
123 
124     // Scrolling
125 
126     virtual bool scrollUpdatesDisabled() const { notImplemented(); return false; }
127     virtual void setScrollUpdatesDisabled(bool) { notImplemented(); }
128 
129     virtual void scrollToOffset(long x, long y) { notImplemented(); }
130 
131     virtual void immediateScrollToOffset(long x, long y) { notImplemented(); }
132     virtual void immediateScrollElementAtContentPointToOffset(long x, long y, long xScrollOffset, long yScrollOffset) { notImplemented(); }
133 
134     virtual double contentOffsetX() const { notImplemented(); return 0; }
135     virtual double contentOffsetY() const { notImplemented(); return 0; }
136 
137     virtual JSRetainPtr&lt;JSStringRef&gt; scrollingTreeAsText() const { notImplemented(); return nullptr; }
138 
139     // Touches
140 
141     virtual void touchDownAtPoint(long x, long y, long touchCount, JSValueRef callback) { notImplemented(); }
142     virtual void liftUpAtPoint(long x, long y, long touchCount, JSValueRef callback) { notImplemented(); }
143     virtual void singleTapAtPoint(long x, long y, JSValueRef callback) { notImplemented(); }
144     virtual void singleTapAtPointWithModifiers(long x, long y, JSValueRef modifierArray, JSValueRef callback) { notImplemented(); }
145     virtual void twoFingerSingleTapAtPoint(long x, long y, JSValueRef callback) { notImplemented(); }
146     virtual void doubleTapAtPoint(long x, long y, float delay, JSValueRef callback) { notImplemented(); }
147     virtual void dragFromPointToPoint(long startX, long startY, long endX, long endY, double durationSeconds, JSValueRef callback) { notImplemented(); }
148     virtual void longPressAtPoint(long x, long y, JSValueRef callback) { notImplemented(); }
149 
150     virtual void activateAtPoint(long x, long y, JSValueRef callback) { notImplemented(); }
151 
152     // Keyboard
153 
154     virtual void enterText(JSStringRef) { notImplemented(); }
155     virtual void typeCharacterUsingHardwareKeyboard(JSStringRef character, JSValueRef callback) { notImplemented(); }
156 
157     virtual void keyDown(JSStringRef character, JSValueRef modifierArray) { notImplemented(); }
158     virtual void toggleCapsLock(JSValueRef callback) { notImplemented(); }
159     virtual void setContinuousSpellCheckingEnabled(bool) { notImplemented(); }
160 
161     virtual void rawKeyDown(JSStringRef) { notImplemented(); }
162     virtual void rawKeyUp(JSStringRef) { notImplemented(); }
163 
164     virtual void keyboardAccessoryBarNext() { notImplemented(); }
165     virtual void keyboardAccessoryBarPrevious() { notImplemented(); }
166 
167     virtual void applyAutocorrection(JSStringRef newString, JSStringRef oldString, JSValueRef callback) { notImplemented(); }
168 
169     virtual bool isShowingKeyboard() const { notImplemented(); return false; }
170     virtual bool hasInputSession() const { notImplemented(); return false; }
171 
172     virtual void setHardwareKeyboardAttached(bool) { }
173 
174     virtual void setKeyboardInputModeIdentifier(JSStringRef) { notImplemented(); }
175 
176     virtual void replaceTextAtRange(JSStringRef, int location, int length) { notImplemented(); }
177     virtual void removeAllDynamicDictionaries() { notImplemented(); }
178 
179     // Stylus
180 
181     virtual void stylusDownAtPoint(long x, long y, float azimuthAngle, float altitudeAngle, float pressure, JSValueRef callback) { notImplemented(); }
182     virtual void stylusMoveToPoint(long x, long y, float azimuthAngle, float altitudeAngle, float pressure, JSValueRef callback) { notImplemented(); }
183     virtual void stylusUpAtPoint(long x, long y, JSValueRef callback) { notImplemented(); }
184     virtual void stylusTapAtPoint(long x, long y, float azimuthAngle, float altitudeAngle, float pressure, JSValueRef callback) { notImplemented(); }
185     virtual void stylusTapAtPointWithModifiers(long x, long y, float azimuthAngle, float altitudeAngle, float pressure, JSValueRef modifierArray, JSValueRef callback) { notImplemented(); }
186 
187     // Event Stream
188 
189     virtual void sendEventStream(JSStringRef eventsJSON, JSValueRef callback) { notImplemented(); }
190     virtual void playBackEventStream(JSStringRef stream, JSValueRef callback) { notImplemented(); }
191 
192     // Form Controls
193 
194     virtual void dismissFilePicker(JSValueRef callback) { notImplemented(); }
195     virtual void dismissFormAccessoryView() { notImplemented(); }
196     virtual void selectFormAccessoryPickerRow(long) { notImplemented(); }
197     virtual JSRetainPtr&lt;JSStringRef&gt; textContentType() const { notImplemented(); return nullptr; }
198     virtual JSRetainPtr&lt;JSStringRef&gt; selectFormPopoverTitle() const { notImplemented(); return nullptr; }
199     virtual JSRetainPtr&lt;JSStringRef&gt; formInputLabel() const { notImplemented(); return nullptr; }
200     virtual void setTimePickerValue(long hour, long minute) { notImplemented(); }
201     virtual bool isShowingDataListSuggestions() const { notImplemented(); return false; }
202     virtual JSObjectRef calendarType() const { notImplemented(); return nullptr; }
203     virtual void setDefaultCalendarType(JSStringRef calendarIdentifier) { notImplemented(); }
204     virtual JSObjectRef inputViewBounds() const { notImplemented(); return nullptr; }
205     virtual void activateDataListSuggestion(unsigned, JSValueRef) { notImplemented(); }
206 
207     // Share Sheet
208 
209     virtual void setShareSheetCompletesImmediatelyWithResolution(bool resolved) { notImplemented(); }
210 
211     // Find in Page
212 
213     virtual void findString(JSStringRef, unsigned long options, unsigned long maxCount) { notImplemented(); }
214 
215     // Accessibility
216 
217     virtual void simulateAccessibilitySettingsChangeNotification(JSValueRef callback) { notImplemented(); }
218     virtual void retrieveSpeakSelectionContent(JSValueRef) { notImplemented(); }
219     virtual JSRetainPtr&lt;JSStringRef&gt; accessibilitySpeakSelectionContent() const { notImplemented(); return nullptr; }
220     virtual JSObjectRef contentsOfUserInterfaceItem(JSStringRef) const { notImplemented(); return nullptr; }
221 
222     // Swipe
223 
224     virtual void beginBackSwipe(JSValueRef callback) { notImplemented(); }
225     virtual void completeBackSwipe(JSValueRef callback) { notImplemented(); }
226 
227     // Child View Controllers
228 
229     virtual bool isShowingPopover() const { notImplemented(); return false; }
230     virtual bool isPresentingModally() const { notImplemented(); return false; }
231 
232     // Context Menus
233 
234     virtual bool isDismissingMenu() const { notImplemented(); return false; }
235     virtual bool isShowingMenu() const { notImplemented(); return false; }
236     virtual JSObjectRef rectForMenuAction(JSStringRef action) const { notImplemented(); return nullptr; }
237     virtual JSObjectRef menuRect() const { notImplemented(); return nullptr; }
238 
239     // Selection
240 
241     virtual JSObjectRef textSelectionRangeRects() const { notImplemented(); return nullptr; }
242     virtual JSObjectRef textSelectionCaretRect() const { notImplemented(); return nullptr; }
243     virtual JSObjectRef selectionStartGrabberViewRect() const { notImplemented(); return nullptr; }
244     virtual JSObjectRef selectionEndGrabberViewRect() const { notImplemented(); return nullptr; }
245     virtual JSObjectRef selectionCaretViewRect() const { notImplemented(); return nullptr; }
246     virtual JSObjectRef selectionRangeViewRects() const { notImplemented(); return nullptr; }
247 
248     // Rotation
249 
250     virtual void simulateRotation(DeviceOrientation*, JSValueRef) { notImplemented(); }
251     virtual void simulateRotationLikeSafari(DeviceOrientation*, JSValueRef) { notImplemented(); }
252 
253     // Editable Images
254 
255     virtual void drawSquareInEditableImage() { notImplemented(); }
256     virtual long numberOfStrokesInEditableImage() { notImplemented(); return 0; }
257 
258     // Undo/Redo
259 
260     virtual JSRetainPtr&lt;JSStringRef&gt; lastUndoLabel() const { notImplemented(); return nullptr; }
261     virtual JSRetainPtr&lt;JSStringRef&gt; firstRedoLabel() const { notImplemented(); return nullptr; }
262 
263     // Attachment Elements
264 
265     virtual JSObjectRef attachmentInfo(JSStringRef attachmentIdentifier) { notImplemented(); return nullptr; }
266 
267     // Callbacks
268 
269     virtual void setDidStartFormControlInteractionCallback(JSValueRef);
270     JSValueRef didStartFormControlInteractionCallback() const;
271 
272     virtual void setDidEndFormControlInteractionCallback(JSValueRef);
273     JSValueRef didEndFormControlInteractionCallback() const;
274 
275     virtual void setDidShowContextMenuCallback(JSValueRef);
276     JSValueRef didShowContextMenuCallback() const;
277 
278     virtual void setDidDismissContextMenuCallback(JSValueRef);
279     JSValueRef didDismissContextMenuCallback() const;
280 
281     virtual void setWillBeginZoomingCallback(JSValueRef);
282     JSValueRef willBeginZoomingCallback() const;
283 
284     virtual void setDidEndZoomingCallback(JSValueRef);
285     JSValueRef didEndZoomingCallback() const;
286 
287     virtual void setWillCreateNewPageCallback(JSValueRef);
288     JSValueRef willCreateNewPageCallback() const;
289 
290     virtual void setDidShowKeyboardCallback(JSValueRef);
291     JSValueRef didShowKeyboardCallback() const;
292 
293     virtual void setDidHideKeyboardCallback(JSValueRef);
294     JSValueRef didHideKeyboardCallback() const;
295 
296     virtual void setDidHideMenuCallback(JSValueRef);
297     JSValueRef didHideMenuCallback() const;
298     virtual void setDidShowMenuCallback(JSValueRef);
299     JSValueRef didShowMenuCallback() const;
300 
301     virtual void setDidDismissPopoverCallback(JSValueRef);
302     JSValueRef didDismissPopoverCallback() const;
303     virtual void setWillPresentPopoverCallback(JSValueRef);
304     JSValueRef willPresentPopoverCallback() const;
305 
306     virtual void setDidEndScrollingCallback(JSValueRef);
307     JSValueRef didEndScrollingCallback() const;
308 
309 protected:
310     explicit UIScriptController(UIScriptContext&amp;);
311 
312     UIScriptContext* context() { return m_context; }
313 
314     virtual void clearAllCallbacks() { /* notImplemented(); */ }
315 
316 #if PLATFORM(COCOA)
317     virtual NSUndoManager *platformUndoManager() const { notImplemented(); return nullptr; }
318 #endif
319 
320 #if PLATFORM(IOS_FAMILY)
321     virtual UIView *platformContentView() const { notImplemented(); return nullptr; }
322 #endif
323 #if PLATFORM(MAC)
324     virtual NSView *platformContentView() const { notImplemented(); return nullptr; }
325 #endif
326 
327     JSClassRef wrapperClass() final;
328 
329     JSObjectRef objectFromRect(const WebCore::FloatRect&amp;) const;
330 
331     UIScriptContext* m_context;
332 
333 #if PLATFORM(COCOA)
334     bool m_capsLockOn { false };
335 #endif
336 };
337 
338 }
339 
340 #endif // UIScriptController_h
    </pre>
  </body>
</html>