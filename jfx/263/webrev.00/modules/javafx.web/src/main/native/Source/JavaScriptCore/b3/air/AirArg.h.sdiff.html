<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/JavaScriptCore/b3/air/AirArg.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AirArg.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="AirBasicBlock.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/JavaScriptCore/b3/air/AirArg.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (C) 2015-2017 Apple Inc. All rights reserved.</span>
   3  *
   4  * Redistribution and use in source and binary forms, with or without
   5  * modification, are permitted provided that the following conditions
   6  * are met:
   7  * 1. Redistributions of source code must retain the above copyright
   8  *    notice, this list of conditions and the following disclaimer.
   9  * 2. Redistributions in binary form must reproduce the above copyright
  10  *    notice, this list of conditions and the following disclaimer in the
  11  *    documentation and/or other materials provided with the distribution.
  12  *
  13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
  14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
  17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
  21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  24  */
  25 
  26 #pragma once
  27 
  28 #if ENABLE(B3_JIT)
  29 
  30 #include &quot;AirTmp.h&quot;
  31 #include &quot;B3Bank.h&quot;
  32 #include &quot;B3Common.h&quot;
  33 #include &quot;B3Type.h&quot;
  34 #include &quot;B3Value.h&quot;
  35 #include &quot;B3Width.h&quot;
  36 #include &lt;wtf/Optional.h&gt;
  37 
<span class="line-modified">  38 #if ASSERT_DISABLED</span>
  39 IGNORE_RETURN_TYPE_WARNINGS_BEGIN
  40 #endif
  41 
  42 namespace JSC { namespace B3 {
  43 
  44 class Value;
  45 
  46 namespace Air {
  47 
  48 class Special;
  49 class StackSlot;
  50 
  51 // This class name is also intentionally terse because we will say it a lot. You&#39;ll see code like
  52 // Inst(..., Arg::imm(5), Arg::addr(thing, blah), ...)
  53 class Arg {
  54 public:
  55     // These enum members are intentionally terse because we have to mention them a lot.
  56     enum Kind : int8_t {
  57         Invalid,
  58 
</pre>
<hr />
<pre>
1450     }
1451 
1452     unsigned hash() const
1453     {
1454         // This really doesn&#39;t have to be that great.
1455         return WTF::IntHash&lt;int64_t&gt;::hash(m_offset) + m_kind + m_scale + m_base.hash() +
1456             m_index.hash();
1457     }
1458 
1459 private:
1460     int64_t m_offset { 0 };
1461     Kind m_kind { Invalid };
1462     int32_t m_scale { 1 };
1463     Air::Tmp m_base;
1464     Air::Tmp m_index;
1465 };
1466 
1467 struct ArgHash {
1468     static unsigned hash(const Arg&amp; key) { return key.hash(); }
1469     static bool equal(const Arg&amp; a, const Arg&amp; b) { return a == b; }
<span class="line-modified">1470     static const bool safeToCompareToEmptyOrDeleted = true;</span>
1471 };
1472 
1473 } } } // namespace JSC::B3::Air
1474 
1475 namespace WTF {
1476 
1477 JS_EXPORT_PRIVATE void printInternal(PrintStream&amp;, JSC::B3::Air::Arg::Kind);
1478 JS_EXPORT_PRIVATE void printInternal(PrintStream&amp;, JSC::B3::Air::Arg::Temperature);
1479 JS_EXPORT_PRIVATE void printInternal(PrintStream&amp;, JSC::B3::Air::Arg::Phase);
1480 JS_EXPORT_PRIVATE void printInternal(PrintStream&amp;, JSC::B3::Air::Arg::Timing);
1481 JS_EXPORT_PRIVATE void printInternal(PrintStream&amp;, JSC::B3::Air::Arg::Role);
1482 JS_EXPORT_PRIVATE void printInternal(PrintStream&amp;, JSC::B3::Air::Arg::Signedness);
1483 
1484 template&lt;typename T&gt; struct DefaultHash;
1485 template&lt;&gt; struct DefaultHash&lt;JSC::B3::Air::Arg&gt; {
1486     typedef JSC::B3::Air::ArgHash Hash;
1487 };
1488 
1489 template&lt;typename T&gt; struct HashTraits;
1490 template&lt;&gt; struct HashTraits&lt;JSC::B3::Air::Arg&gt; : SimpleClassHashTraits&lt;JSC::B3::Air::Arg&gt; {
1491     // Because m_scale is 1 in the empty value.
<span class="line-modified">1492     static const bool emptyValueIsZero = false;</span>
1493 };
1494 
1495 } // namespace WTF
1496 
<span class="line-modified">1497 #if ASSERT_DISABLED</span>
1498 IGNORE_RETURN_TYPE_WARNINGS_END
1499 #endif
1500 
1501 #endif // ENABLE(B3_JIT)
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (C) 2015-2019 Apple Inc. All rights reserved.</span>
   3  *
   4  * Redistribution and use in source and binary forms, with or without
   5  * modification, are permitted provided that the following conditions
   6  * are met:
   7  * 1. Redistributions of source code must retain the above copyright
   8  *    notice, this list of conditions and the following disclaimer.
   9  * 2. Redistributions in binary form must reproduce the above copyright
  10  *    notice, this list of conditions and the following disclaimer in the
  11  *    documentation and/or other materials provided with the distribution.
  12  *
  13  * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS&#39;&#39; AND ANY
  14  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  15  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  16  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
  17  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  18  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  19  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  20  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
  21  * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  22  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  23  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  24  */
  25 
  26 #pragma once
  27 
  28 #if ENABLE(B3_JIT)
  29 
  30 #include &quot;AirTmp.h&quot;
  31 #include &quot;B3Bank.h&quot;
  32 #include &quot;B3Common.h&quot;
  33 #include &quot;B3Type.h&quot;
  34 #include &quot;B3Value.h&quot;
  35 #include &quot;B3Width.h&quot;
  36 #include &lt;wtf/Optional.h&gt;
  37 
<span class="line-modified">  38 #if !ASSERT_ENABLED</span>
  39 IGNORE_RETURN_TYPE_WARNINGS_BEGIN
  40 #endif
  41 
  42 namespace JSC { namespace B3 {
  43 
  44 class Value;
  45 
  46 namespace Air {
  47 
  48 class Special;
  49 class StackSlot;
  50 
  51 // This class name is also intentionally terse because we will say it a lot. You&#39;ll see code like
  52 // Inst(..., Arg::imm(5), Arg::addr(thing, blah), ...)
  53 class Arg {
  54 public:
  55     // These enum members are intentionally terse because we have to mention them a lot.
  56     enum Kind : int8_t {
  57         Invalid,
  58 
</pre>
<hr />
<pre>
1450     }
1451 
1452     unsigned hash() const
1453     {
1454         // This really doesn&#39;t have to be that great.
1455         return WTF::IntHash&lt;int64_t&gt;::hash(m_offset) + m_kind + m_scale + m_base.hash() +
1456             m_index.hash();
1457     }
1458 
1459 private:
1460     int64_t m_offset { 0 };
1461     Kind m_kind { Invalid };
1462     int32_t m_scale { 1 };
1463     Air::Tmp m_base;
1464     Air::Tmp m_index;
1465 };
1466 
1467 struct ArgHash {
1468     static unsigned hash(const Arg&amp; key) { return key.hash(); }
1469     static bool equal(const Arg&amp; a, const Arg&amp; b) { return a == b; }
<span class="line-modified">1470     static constexpr bool safeToCompareToEmptyOrDeleted = true;</span>
1471 };
1472 
1473 } } } // namespace JSC::B3::Air
1474 
1475 namespace WTF {
1476 
1477 JS_EXPORT_PRIVATE void printInternal(PrintStream&amp;, JSC::B3::Air::Arg::Kind);
1478 JS_EXPORT_PRIVATE void printInternal(PrintStream&amp;, JSC::B3::Air::Arg::Temperature);
1479 JS_EXPORT_PRIVATE void printInternal(PrintStream&amp;, JSC::B3::Air::Arg::Phase);
1480 JS_EXPORT_PRIVATE void printInternal(PrintStream&amp;, JSC::B3::Air::Arg::Timing);
1481 JS_EXPORT_PRIVATE void printInternal(PrintStream&amp;, JSC::B3::Air::Arg::Role);
1482 JS_EXPORT_PRIVATE void printInternal(PrintStream&amp;, JSC::B3::Air::Arg::Signedness);
1483 
1484 template&lt;typename T&gt; struct DefaultHash;
1485 template&lt;&gt; struct DefaultHash&lt;JSC::B3::Air::Arg&gt; {
1486     typedef JSC::B3::Air::ArgHash Hash;
1487 };
1488 
1489 template&lt;typename T&gt; struct HashTraits;
1490 template&lt;&gt; struct HashTraits&lt;JSC::B3::Air::Arg&gt; : SimpleClassHashTraits&lt;JSC::B3::Air::Arg&gt; {
1491     // Because m_scale is 1 in the empty value.
<span class="line-modified">1492     static constexpr bool emptyValueIsZero = false;</span>
1493 };
1494 
1495 } // namespace WTF
1496 
<span class="line-modified">1497 #if !ASSERT_ENABLED</span>
1498 IGNORE_RETURN_TYPE_WARNINGS_END
1499 #endif
1500 
1501 #endif // ENABLE(B3_JIT)
</pre>
</td>
</tr>
</table>
<center><a href="AirArg.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="AirBasicBlock.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>