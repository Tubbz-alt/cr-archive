<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/WebCore/Modules/webauthn/fido/FidoHidMessage.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FidoConstants.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="FidoHidPacket.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/WebCore/Modules/webauthn/fido/FidoHidMessage.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
129 {
130     size_t remainingSize = m_remainingSize;
131     auto contPacket = FidoHidContinuationPacket::createFromSerializedData(buf, &amp;remainingSize);
132 
133     // Reject packets with a different channel id.
134     if (!contPacket || m_channelId != contPacket-&gt;channelId())
135         return false;
136 
137     m_remainingSize = remainingSize;
138     m_packets.append(WTFMove(contPacket));
139     return true;
140 }
141 
142 size_t FidoHidMessage::numPackets() const
143 {
144     return m_packets.size();
145 }
146 
147 FidoHidMessage::FidoHidMessage(uint32_t channelId, FidoHidDeviceCommand type, const Vector&lt;uint8_t&gt;&amp; data)
148     : m_channelId(channelId)

149 {
150     uint8_t sequence = 0;
151 
152     size_t pos = data.size() &gt; kHidInitPacketDataSize ? kHidInitPacketDataSize : data.size();
153     m_packets.append(makeUnique&lt;FidoHidInitPacket&gt;(channelId, type, getInitPacketData(data), data.size()));
154     for (; pos &lt; data.size(); pos += kHidContinuationPacketDataSize)
155         m_packets.append(makeUnique&lt;FidoHidContinuationPacket&gt;(channelId, sequence++, getContinuationPacketData(data, pos)));
156 }
157 
158 FidoHidMessage::FidoHidMessage(std::unique_ptr&lt;FidoHidInitPacket&gt; initPacket, size_t remainingSize)
159     : m_remainingSize(remainingSize)
160 {
161     m_channelId = initPacket-&gt;channelId();
162     m_cmd = initPacket-&gt;command();
163     m_packets.append(WTFMove(initPacket));
164 }
165 
166 } // namespace fido
167 
168 #endif // ENABLE(WEB_AUTHN)
</pre>
</td>
<td>
<hr />
<pre>
129 {
130     size_t remainingSize = m_remainingSize;
131     auto contPacket = FidoHidContinuationPacket::createFromSerializedData(buf, &amp;remainingSize);
132 
133     // Reject packets with a different channel id.
134     if (!contPacket || m_channelId != contPacket-&gt;channelId())
135         return false;
136 
137     m_remainingSize = remainingSize;
138     m_packets.append(WTFMove(contPacket));
139     return true;
140 }
141 
142 size_t FidoHidMessage::numPackets() const
143 {
144     return m_packets.size();
145 }
146 
147 FidoHidMessage::FidoHidMessage(uint32_t channelId, FidoHidDeviceCommand type, const Vector&lt;uint8_t&gt;&amp; data)
148     : m_channelId(channelId)
<span class="line-added">149     , m_cmd(type)</span>
150 {
151     uint8_t sequence = 0;
152 
153     size_t pos = data.size() &gt; kHidInitPacketDataSize ? kHidInitPacketDataSize : data.size();
154     m_packets.append(makeUnique&lt;FidoHidInitPacket&gt;(channelId, type, getInitPacketData(data), data.size()));
155     for (; pos &lt; data.size(); pos += kHidContinuationPacketDataSize)
156         m_packets.append(makeUnique&lt;FidoHidContinuationPacket&gt;(channelId, sequence++, getContinuationPacketData(data, pos)));
157 }
158 
159 FidoHidMessage::FidoHidMessage(std::unique_ptr&lt;FidoHidInitPacket&gt; initPacket, size_t remainingSize)
160     : m_remainingSize(remainingSize)
161 {
162     m_channelId = initPacket-&gt;channelId();
163     m_cmd = initPacket-&gt;command();
164     m_packets.append(WTFMove(initPacket));
165 }
166 
167 } // namespace fido
168 
169 #endif // ENABLE(WEB_AUTHN)
</pre>
</td>
</tr>
</table>
<center><a href="FidoConstants.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="FidoHidPacket.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>