<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/main/java/javafx/scene/control/skin/MenuBarSkin.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.controls/src/main/java/javafx/scene/control/skin/MenuBarSkin.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 283                     //case ENTER:
 284                         // RT-18859: Doing nothing for space and enter
 285                         if (control.getScene().getWindow().isFocused()) {
 286                             if (focusedMenuIndex != -1) {
 287                                 Menu menuToOpen = getSkinnable().getMenus().get(focusedMenuIndex);
 288                                 showMenu(menuToOpen, true);
 289                                 event.consume();
 290                             }
 291                         }
 292                         break;
 293                     case ESCAPE:
 294                         unSelectMenus();
 295                         event.consume();
 296                         break;
 297                 default:
 298                     break;
 299                 }
 300             }
 301         };
 302         menuBarFocusedPropertyListener = (ov, t, t1) -&gt; {
<span class="line-modified"> 303             if (t1) {</span>

 304                 // RT-23147 when MenuBar&#39;s focusTraversable is true the first
 305                 // menu will visually indicate focus
<span class="line-modified"> 306                 unSelectMenus();</span>
<span class="line-modified"> 307                 if (!container.getChildren().isEmpty()) {</span>
<span class="line-modified"> 308                     menuModeStart(0);</span>
<span class="line-modified"> 309                     openMenuButton = ((MenuBarButton)container.getChildren().get(0));</span>
<span class="line-modified"> 310                     setFocusedMenuIndex(0);</span>
<span class="line-removed"> 311                     openMenuButton.setHover();</span>
<span class="line-removed"> 312                 }</span>
<span class="line-removed"> 313             } else {</span>
<span class="line-removed"> 314                 unSelectMenus();</span>
<span class="line-removed"> 315              }</span>
 316          };
 317         weakSceneKeyEventHandler = new WeakEventHandler&lt;KeyEvent&gt;(keyEventHandler);
 318         Utils.executeOnceWhenPropertyIsNonNull(control.sceneProperty(), (Scene scene) -&gt; {
 319             scene.addEventFilter(KeyEvent.KEY_PRESSED, weakSceneKeyEventHandler);
 320         });
 321 
 322         // When we click else where in the scene - menu selection should be cleared.
 323         mouseEventHandler = t -&gt; {
 324             Bounds containerScreenBounds = container.localToScreen(container.getLayoutBounds());
 325             if (containerScreenBounds == null || !containerScreenBounds.contains(t.getScreenX(), t.getScreenY())) {
 326                 unSelectMenus();
 327             }
 328         };
 329         weakSceneMouseEventHandler = new WeakEventHandler&lt;MouseEvent&gt;(mouseEventHandler);
 330         Utils.executeOnceWhenPropertyIsNonNull(control.sceneProperty(), (Scene scene) -&gt; {
 331             scene.addEventFilter(MouseEvent.MOUSE_CLICKED, weakSceneMouseEventHandler);
 332         });
 333 
 334         weakWindowFocusListener = new WeakChangeListener&lt;Boolean&gt;((ov, t, t1) -&gt; {
 335             if (!t1) {
</pre>
</td>
<td>
<hr />
<pre>
 283                     //case ENTER:
 284                         // RT-18859: Doing nothing for space and enter
 285                         if (control.getScene().getWindow().isFocused()) {
 286                             if (focusedMenuIndex != -1) {
 287                                 Menu menuToOpen = getSkinnable().getMenus().get(focusedMenuIndex);
 288                                 showMenu(menuToOpen, true);
 289                                 event.consume();
 290                             }
 291                         }
 292                         break;
 293                     case ESCAPE:
 294                         unSelectMenus();
 295                         event.consume();
 296                         break;
 297                 default:
 298                     break;
 299                 }
 300             }
 301         };
 302         menuBarFocusedPropertyListener = (ov, t, t1) -&gt; {
<span class="line-modified"> 303             unSelectMenus();</span>
<span class="line-added"> 304             if (t1 &amp;&amp; !container.getChildren().isEmpty()) {</span>
 305                 // RT-23147 when MenuBar&#39;s focusTraversable is true the first
 306                 // menu will visually indicate focus
<span class="line-modified"> 307                 menuModeStart(0);</span>
<span class="line-modified"> 308                 openMenuButton = ((MenuBarButton)container.getChildren().get(0));</span>
<span class="line-modified"> 309                 setFocusedMenuIndex(0);</span>
<span class="line-modified"> 310                 openMenuButton.setHover();</span>
<span class="line-modified"> 311             }</span>





 312          };
 313         weakSceneKeyEventHandler = new WeakEventHandler&lt;KeyEvent&gt;(keyEventHandler);
 314         Utils.executeOnceWhenPropertyIsNonNull(control.sceneProperty(), (Scene scene) -&gt; {
 315             scene.addEventFilter(KeyEvent.KEY_PRESSED, weakSceneKeyEventHandler);
 316         });
 317 
 318         // When we click else where in the scene - menu selection should be cleared.
 319         mouseEventHandler = t -&gt; {
 320             Bounds containerScreenBounds = container.localToScreen(container.getLayoutBounds());
 321             if (containerScreenBounds == null || !containerScreenBounds.contains(t.getScreenX(), t.getScreenY())) {
 322                 unSelectMenus();
 323             }
 324         };
 325         weakSceneMouseEventHandler = new WeakEventHandler&lt;MouseEvent&gt;(mouseEventHandler);
 326         Utils.executeOnceWhenPropertyIsNonNull(control.sceneProperty(), (Scene scene) -&gt; {
 327             scene.addEventFilter(MouseEvent.MOUSE_CLICKED, weakSceneMouseEventHandler);
 328         });
 329 
 330         weakWindowFocusListener = new WeakChangeListener&lt;Boolean&gt;((ov, t, t1) -&gt; {
 331             if (!t1) {
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>