<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff build.gradle</title>
    <link rel="stylesheet" href="style.css" />
  </head>
<body>
<center>&lt; prev <a href="index.html" target="_top">index</a> <a href="modules/javafx.web/src/main/native/CMakeLists.txt.sdiff.html" target="_top">next &gt;</a></center>    <h2>build.gradle</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
3413         def webkitOutputDir = cygpath(&quot;$buildDir/${t.name}&quot;)
3414         def webkitConfig = IS_DEBUG_NATIVE ? &quot;Debug&quot; : &quot;Release&quot;
3415 
3416         File nativeBuildDir = new File(&quot;${webkitOutputDir}&quot;)
3417         nativeBuildDir.mkdirs()
3418 
3419         def compileNativeTask = task(&quot;compileNative${t.capital}&quot;, dependsOn: [compileJava]) {
3420             println &quot;Building Webkit configuration /$webkitConfig/ into $webkitOutputDir&quot;
3421             enabled =  (IS_COMPILE_WEBKIT)
3422 
3423             doLast {
3424                 exec {
3425                     workingDir(&quot;$webkitOutputDir&quot;)
3426                     commandLine(&quot;perl&quot;, &quot;$projectDir/src/main/native/Tools/Scripts/set-webkit-configuration&quot;, &quot;--$webkitConfig&quot;)
3427                     environment([&quot;WEBKIT_OUTPUTDIR&quot; : webkitOutputDir])
3428                 }
3429 
3430                 exec {
3431                     workingDir(&quot;$webkitOutputDir&quot;)
3432                     def cmakeArgs = &quot;-DENABLE_TOOLS=1&quot;



3433                     cmakeArgs = &quot; $cmakeArgs -DCMAKE_C_COMPILER=&#39;${webkitProperties.compiler}&#39;&quot;
3434                     if (t.name == &quot;win&quot;) {
3435                         // To enable ninja build on Windows
3436                         environment(WINDOWS_NATIVE_COMPILE_ENVIRONMENT)
3437                     } else if (t.name == &quot;mac&quot;) {
3438                         cmakeArgs = &quot; $cmakeArgs -DCMAKE_OSX_DEPLOYMENT_TARGET=$MACOSX_MIN_VERSION -DCMAKE_OSX_SYSROOT=$MACOSX_SDK_PATH&quot;
3439                     } else if (t.name == &quot;linux&quot;) {
3440                         cmakeArgs = &quot; $cmakeArgs -DCMAKE_SYSTEM_NAME=Linux&quot;
3441                         if (IS_64) {
3442                             cmakeArgs = &quot;$cmakeArgs -DCMAKE_SYSTEM_PROCESSOR=x86_64&quot;
3443                         } else {
3444                             cmakeArgs = &quot;$cmakeArgs -DCMAKE_SYSTEM_PROCESSOR=i586&quot;
3445                         }
3446                         // TODO: Use cflags and ldflags from all platforms
3447                         def cFlags = webkitProperties.ccFlags?.join(&#39; &#39;) ?: &#39;&#39;
3448                         def lFlags = webkitProperties.linkFlags?.join(&#39; &#39;) ?: &#39;&#39;



3449                         // -shared flag should be omitted while creating executable.
3450                         def exeFlags = webkitProperties.linkFlags?.join(&#39; &#39;)?.replace(&#39;-shared&#39;, &#39;&#39;) ?: &#39;&#39;
3451                         cmakeArgs = &quot;$cmakeArgs -DCMAKE_C_FLAGS=&#39;${cFlags}&#39; -DCMAKE_CXX_FLAGS=&#39;${cFlags}&#39;&quot;
3452                         cmakeArgs = &quot;$cmakeArgs -DCMAKE_SHARED_LINKER_FLAGS=&#39;${lFlags}&#39; -DCMAKE_EXE_LINKER_FLAGS=&#39;${exeFlags}&#39;&quot;
3453                     } else if (t.name.startsWith(&quot;arm&quot;)) {
3454                         fail(&quot;ARM target is not supported as of now.&quot;)
3455                     }
3456 
3457                     if (IS_COMPILE_PARFAIT) {
3458                         environment([
3459                             &quot;COMPILE_PARFAIT&quot; : &quot;true&quot;
3460                         ])
3461                         environment &quot;PATH&quot;, System.env.PARFAIT_PATH + File.pathSeparator + environment.PATH
3462                         cmakeArgs = &quot;-DCMAKE_C_COMPILER=parfait-gcc -DCMAKE_CXX_COMPILER=parfait-g++&quot;
3463                     }
3464 
3465                     if (project.hasProperty(&#39;toolsPath&#39;)) {
3466                         environment &quot;PATH&quot;, toolsPath + File.pathSeparator + environment.PATH
3467                     }
3468 
</pre>
</td>
<td>
<hr />
<pre>
3413         def webkitOutputDir = cygpath(&quot;$buildDir/${t.name}&quot;)
3414         def webkitConfig = IS_DEBUG_NATIVE ? &quot;Debug&quot; : &quot;Release&quot;
3415 
3416         File nativeBuildDir = new File(&quot;${webkitOutputDir}&quot;)
3417         nativeBuildDir.mkdirs()
3418 
3419         def compileNativeTask = task(&quot;compileNative${t.capital}&quot;, dependsOn: [compileJava]) {
3420             println &quot;Building Webkit configuration /$webkitConfig/ into $webkitOutputDir&quot;
3421             enabled =  (IS_COMPILE_WEBKIT)
3422 
3423             doLast {
3424                 exec {
3425                     workingDir(&quot;$webkitOutputDir&quot;)
3426                     commandLine(&quot;perl&quot;, &quot;$projectDir/src/main/native/Tools/Scripts/set-webkit-configuration&quot;, &quot;--$webkitConfig&quot;)
3427                     environment([&quot;WEBKIT_OUTPUTDIR&quot; : webkitOutputDir])
3428                 }
3429 
3430                 exec {
3431                     workingDir(&quot;$webkitOutputDir&quot;)
3432                     def cmakeArgs = &quot;-DENABLE_TOOLS=1&quot;
<span class="line-added">3433                     if (IS_STATIC_BUILD) {</span>
<span class="line-added">3434                         cmakeArgs = &quot; $cmakeArgs -DSTATIC_BUILD=1 -DUSE_THIN_ARCHIVES=OFF&quot;;</span>
<span class="line-added">3435                     }</span>
3436                     cmakeArgs = &quot; $cmakeArgs -DCMAKE_C_COMPILER=&#39;${webkitProperties.compiler}&#39;&quot;
3437                     if (t.name == &quot;win&quot;) {
3438                         // To enable ninja build on Windows
3439                         environment(WINDOWS_NATIVE_COMPILE_ENVIRONMENT)
3440                     } else if (t.name == &quot;mac&quot;) {
3441                         cmakeArgs = &quot; $cmakeArgs -DCMAKE_OSX_DEPLOYMENT_TARGET=$MACOSX_MIN_VERSION -DCMAKE_OSX_SYSROOT=$MACOSX_SDK_PATH&quot;
3442                     } else if (t.name == &quot;linux&quot;) {
3443                         cmakeArgs = &quot; $cmakeArgs -DCMAKE_SYSTEM_NAME=Linux&quot;
3444                         if (IS_64) {
3445                             cmakeArgs = &quot;$cmakeArgs -DCMAKE_SYSTEM_PROCESSOR=x86_64&quot;
3446                         } else {
3447                             cmakeArgs = &quot;$cmakeArgs -DCMAKE_SYSTEM_PROCESSOR=i586&quot;
3448                         }
3449                         // TODO: Use cflags and ldflags from all platforms
3450                         def cFlags = webkitProperties.ccFlags?.join(&#39; &#39;) ?: &#39;&#39;
3451                         def lFlags = webkitProperties.linkFlags?.join(&#39; &#39;) ?: &#39;&#39;
<span class="line-added">3452                         if (IS_STATIC_BUILD) {</span>
<span class="line-added">3453                             cFlags = &quot; $cFlags -DSTATIC_BUILD=1&quot;;</span>
<span class="line-added">3454                         }</span>
3455                         // -shared flag should be omitted while creating executable.
3456                         def exeFlags = webkitProperties.linkFlags?.join(&#39; &#39;)?.replace(&#39;-shared&#39;, &#39;&#39;) ?: &#39;&#39;
3457                         cmakeArgs = &quot;$cmakeArgs -DCMAKE_C_FLAGS=&#39;${cFlags}&#39; -DCMAKE_CXX_FLAGS=&#39;${cFlags}&#39;&quot;
3458                         cmakeArgs = &quot;$cmakeArgs -DCMAKE_SHARED_LINKER_FLAGS=&#39;${lFlags}&#39; -DCMAKE_EXE_LINKER_FLAGS=&#39;${exeFlags}&#39;&quot;
3459                     } else if (t.name.startsWith(&quot;arm&quot;)) {
3460                         fail(&quot;ARM target is not supported as of now.&quot;)
3461                     }
3462 
3463                     if (IS_COMPILE_PARFAIT) {
3464                         environment([
3465                             &quot;COMPILE_PARFAIT&quot; : &quot;true&quot;
3466                         ])
3467                         environment &quot;PATH&quot;, System.env.PARFAIT_PATH + File.pathSeparator + environment.PATH
3468                         cmakeArgs = &quot;-DCMAKE_C_COMPILER=parfait-gcc -DCMAKE_CXX_COMPILER=parfait-g++&quot;
3469                     }
3470 
3471                     if (project.hasProperty(&#39;toolsPath&#39;)) {
3472                         environment &quot;PATH&quot;, toolsPath + File.pathSeparator + environment.PATH
3473                     }
3474 
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="index.html" target="_top">index</a> <a href="modules/javafx.web/src/main/native/CMakeLists.txt.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>