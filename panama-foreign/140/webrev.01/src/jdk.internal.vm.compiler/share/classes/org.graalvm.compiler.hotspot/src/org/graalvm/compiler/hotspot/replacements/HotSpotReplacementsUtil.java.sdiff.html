<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.hotspot/src/org/graalvm/compiler/hotspot/replacements/HotSpotReplacementsUtil.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="HotSpotClassSubstitutions.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../../jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/AbstractMemberWriter.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.hotspot/src/org/graalvm/compiler/hotspot/replacements/HotSpotReplacementsUtil.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
344 
345     public static final LocationIdentity PROTOTYPE_MARK_WORD_LOCATION = NamedLocationIdentity.mutable(&quot;PrototypeMarkWord&quot;);
346 
347     @Fold
348     public static int prototypeMarkWordOffset(@InjectedParameter GraalHotSpotVMConfig config) {
349         return config.prototypeMarkWordOffset;
350     }
351 
352     public static final LocationIdentity KLASS_ACCESS_FLAGS_LOCATION = NamedLocationIdentity.immutable(&quot;Klass::_access_flags&quot;);
353 
354     @Fold
355     public static int klassAccessFlagsOffset(@InjectedParameter GraalHotSpotVMConfig config) {
356         return config.klassAccessFlagsOffset;
357     }
358 
359     @Fold
360     public static int jvmAccWrittenFlags(@InjectedParameter GraalHotSpotVMConfig config) {
361         return config.jvmAccWrittenFlags;
362     }
363 





364     public static final LocationIdentity KLASS_LAYOUT_HELPER_LOCATION = new HotSpotOptimizingLocationIdentity(&quot;Klass::_layout_helper&quot;) {
365         @Override
366         public ValueNode canonicalizeRead(ValueNode read, AddressNode location, ValueNode object, CanonicalizerTool tool) {
367             ValueNode javaObject = findReadHub(object);
368             if (javaObject != null) {
369                 if (javaObject.stamp(NodeView.DEFAULT) instanceof ObjectStamp) {
370                     ObjectStamp stamp = (ObjectStamp) javaObject.stamp(NodeView.DEFAULT);
371                     HotSpotResolvedObjectType type = (HotSpotResolvedObjectType) stamp.javaType(tool.getMetaAccess());
372                     if (type.isArray() &amp;&amp; !type.getComponentType().isPrimitive()) {
373                         int layout = type.layoutHelper();
374                         return ConstantNode.forInt(layout);
375                     }
376                 }
377             }
378             return read;
379         }
380     };
381 
382     @Fold
383     public static int allocatePrefetchStyle(@InjectedParameter GraalHotSpotVMConfig config) {
</pre>
</td>
<td>
<hr />
<pre>
344 
345     public static final LocationIdentity PROTOTYPE_MARK_WORD_LOCATION = NamedLocationIdentity.mutable(&quot;PrototypeMarkWord&quot;);
346 
347     @Fold
348     public static int prototypeMarkWordOffset(@InjectedParameter GraalHotSpotVMConfig config) {
349         return config.prototypeMarkWordOffset;
350     }
351 
352     public static final LocationIdentity KLASS_ACCESS_FLAGS_LOCATION = NamedLocationIdentity.immutable(&quot;Klass::_access_flags&quot;);
353 
354     @Fold
355     public static int klassAccessFlagsOffset(@InjectedParameter GraalHotSpotVMConfig config) {
356         return config.klassAccessFlagsOffset;
357     }
358 
359     @Fold
360     public static int jvmAccWrittenFlags(@InjectedParameter GraalHotSpotVMConfig config) {
361         return config.jvmAccWrittenFlags;
362     }
363 
<span class="line-added">364     @Fold</span>
<span class="line-added">365     public static int jvmAccIsHiddenClass(@InjectedParameter GraalHotSpotVMConfig config) {</span>
<span class="line-added">366         return config.jvmAccIsHiddenClass;</span>
<span class="line-added">367     }</span>
<span class="line-added">368 </span>
369     public static final LocationIdentity KLASS_LAYOUT_HELPER_LOCATION = new HotSpotOptimizingLocationIdentity(&quot;Klass::_layout_helper&quot;) {
370         @Override
371         public ValueNode canonicalizeRead(ValueNode read, AddressNode location, ValueNode object, CanonicalizerTool tool) {
372             ValueNode javaObject = findReadHub(object);
373             if (javaObject != null) {
374                 if (javaObject.stamp(NodeView.DEFAULT) instanceof ObjectStamp) {
375                     ObjectStamp stamp = (ObjectStamp) javaObject.stamp(NodeView.DEFAULT);
376                     HotSpotResolvedObjectType type = (HotSpotResolvedObjectType) stamp.javaType(tool.getMetaAccess());
377                     if (type.isArray() &amp;&amp; !type.getComponentType().isPrimitive()) {
378                         int layout = type.layoutHelper();
379                         return ConstantNode.forInt(layout);
380                     }
381                 }
382             }
383             return read;
384         }
385     };
386 
387     @Fold
388     public static int allocatePrefetchStyle(@InjectedParameter GraalHotSpotVMConfig config) {
</pre>
</td>
</tr>
</table>
<center><a href="HotSpotClassSubstitutions.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../../jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/AbstractMemberWriter.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>