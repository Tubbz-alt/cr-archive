<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/jfr/dcmd/jfrDcmds.cpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../../gc/z/zServiceability.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../metadata/metadata.xml.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/jfr/dcmd/jfrDcmds.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2012, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
</pre>
<hr />
<pre>
325   }
326 
327   static const char klass[] = &quot;jdk/jfr/internal/dcmd/DCmdCheck&quot;;
328   static const char method[] = &quot;execute&quot;;
329   static const char signature[] = &quot;(Ljava/lang/String;Ljava/lang/Boolean;)Ljava/lang/String;&quot;;
330 
331   JfrJavaArguments execute_args(&amp;result, klass, method, signature, CHECK);
332   execute_args.set_receiver(h_dcmd_instance);
333 
334   // arguments
335   execute_args.push_jobject(name);
336   execute_args.push_jobject(verbose);
337 
338   JfrJavaSupport::call_virtual(&amp;execute_args, THREAD);
339   handle_dcmd_result(output(), (oop)result.get_jobject(), source, THREAD);
340 }
341 
342 JfrStartFlightRecordingDCmd::JfrStartFlightRecordingDCmd(outputStream* output,
343                                                          bool heap) : DCmdWithParser(output, heap),
344   _name(&quot;name&quot;, &quot;Name that can be used to identify recording, e.g. \\\&quot;My Recording\\\&quot;&quot;, &quot;STRING&quot;, false, NULL),
<span class="line-modified">345   _settings(&quot;settings&quot;, &quot;Settings file(s), e.g. profile or default. See JRE_HOME/lib/jfr&quot;, &quot;STRING SET&quot;, false),</span>
346   _delay(&quot;delay&quot;, &quot;Delay recording start with (s)econds, (m)inutes), (h)ours), or (d)ays, e.g. 5h.&quot;, &quot;NANOTIME&quot;, false, &quot;0&quot;),
347   _duration(&quot;duration&quot;, &quot;Duration of recording in (s)econds, (m)inutes, (h)ours, or (d)ays, e.g. 300s.&quot;, &quot;NANOTIME&quot;, false, &quot;0&quot;),
348   _disk(&quot;disk&quot;, &quot;Recording should be persisted to disk&quot;, &quot;BOOLEAN&quot;, false),
349   _filename(&quot;filename&quot;, &quot;Resulting recording filename, e.g. \\\&quot;&quot; JFR_FILENAME_EXAMPLE &quot;\\\&quot;&quot;, &quot;STRING&quot;, false),
350   _maxage(&quot;maxage&quot;, &quot;Maximum time to keep recorded data (on disk) in (s)econds, (m)inutes, (h)ours, or (d)ays, e.g. 60m, or 0 for no limit&quot;, &quot;NANOTIME&quot;, false, &quot;0&quot;),
351   _maxsize(&quot;maxsize&quot;, &quot;Maximum amount of bytes to keep (on disk) in (k)B, (M)B or (G)B, e.g. 500M, or 0 for no limit&quot;, &quot;MEMORY SIZE&quot;, false, &quot;0&quot;),
352   _flush_interval(&quot;flush-interval&quot;, &quot;Minimum time before flushing buffers, measured in (s)econds, e.g. 4 s, or 0 for flushing when a recording ends&quot;, &quot;NANOTIME&quot;, false, &quot;1s&quot;),
353   _dump_on_exit(&quot;dumponexit&quot;, &quot;Dump running recording when JVM shuts down&quot;, &quot;BOOLEAN&quot;, false),
354   _path_to_gc_roots(&quot;path-to-gc-roots&quot;, &quot;Collect path to GC roots&quot;, &quot;BOOLEAN&quot;, false, &quot;false&quot;) {
355   _dcmdparser.add_dcmd_option(&amp;_name);
356   _dcmdparser.add_dcmd_option(&amp;_settings);
357   _dcmdparser.add_dcmd_option(&amp;_delay);
358   _dcmdparser.add_dcmd_option(&amp;_duration);
359   _dcmdparser.add_dcmd_option(&amp;_disk);
360   _dcmdparser.add_dcmd_option(&amp;_filename);
361   _dcmdparser.add_dcmd_option(&amp;_maxage);
362   _dcmdparser.add_dcmd_option(&amp;_maxsize);
363   _dcmdparser.add_dcmd_option(&amp;_flush_interval);
364   _dcmdparser.add_dcmd_option(&amp;_dump_on_exit);
365   _dcmdparser.add_dcmd_option(&amp;_path_to_gc_roots);
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2012, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
</pre>
<hr />
<pre>
325   }
326 
327   static const char klass[] = &quot;jdk/jfr/internal/dcmd/DCmdCheck&quot;;
328   static const char method[] = &quot;execute&quot;;
329   static const char signature[] = &quot;(Ljava/lang/String;Ljava/lang/Boolean;)Ljava/lang/String;&quot;;
330 
331   JfrJavaArguments execute_args(&amp;result, klass, method, signature, CHECK);
332   execute_args.set_receiver(h_dcmd_instance);
333 
334   // arguments
335   execute_args.push_jobject(name);
336   execute_args.push_jobject(verbose);
337 
338   JfrJavaSupport::call_virtual(&amp;execute_args, THREAD);
339   handle_dcmd_result(output(), (oop)result.get_jobject(), source, THREAD);
340 }
341 
342 JfrStartFlightRecordingDCmd::JfrStartFlightRecordingDCmd(outputStream* output,
343                                                          bool heap) : DCmdWithParser(output, heap),
344   _name(&quot;name&quot;, &quot;Name that can be used to identify recording, e.g. \\\&quot;My Recording\\\&quot;&quot;, &quot;STRING&quot;, false, NULL),
<span class="line-modified">345   _settings(&quot;settings&quot;, &quot;Settings file(s), e.g. profile or default. See JAVA_HOME/lib/jfr&quot;, &quot;STRING SET&quot;, false),</span>
346   _delay(&quot;delay&quot;, &quot;Delay recording start with (s)econds, (m)inutes), (h)ours), or (d)ays, e.g. 5h.&quot;, &quot;NANOTIME&quot;, false, &quot;0&quot;),
347   _duration(&quot;duration&quot;, &quot;Duration of recording in (s)econds, (m)inutes, (h)ours, or (d)ays, e.g. 300s.&quot;, &quot;NANOTIME&quot;, false, &quot;0&quot;),
348   _disk(&quot;disk&quot;, &quot;Recording should be persisted to disk&quot;, &quot;BOOLEAN&quot;, false),
349   _filename(&quot;filename&quot;, &quot;Resulting recording filename, e.g. \\\&quot;&quot; JFR_FILENAME_EXAMPLE &quot;\\\&quot;&quot;, &quot;STRING&quot;, false),
350   _maxage(&quot;maxage&quot;, &quot;Maximum time to keep recorded data (on disk) in (s)econds, (m)inutes, (h)ours, or (d)ays, e.g. 60m, or 0 for no limit&quot;, &quot;NANOTIME&quot;, false, &quot;0&quot;),
351   _maxsize(&quot;maxsize&quot;, &quot;Maximum amount of bytes to keep (on disk) in (k)B, (M)B or (G)B, e.g. 500M, or 0 for no limit&quot;, &quot;MEMORY SIZE&quot;, false, &quot;0&quot;),
352   _flush_interval(&quot;flush-interval&quot;, &quot;Minimum time before flushing buffers, measured in (s)econds, e.g. 4 s, or 0 for flushing when a recording ends&quot;, &quot;NANOTIME&quot;, false, &quot;1s&quot;),
353   _dump_on_exit(&quot;dumponexit&quot;, &quot;Dump running recording when JVM shuts down&quot;, &quot;BOOLEAN&quot;, false),
354   _path_to_gc_roots(&quot;path-to-gc-roots&quot;, &quot;Collect path to GC roots&quot;, &quot;BOOLEAN&quot;, false, &quot;false&quot;) {
355   _dcmdparser.add_dcmd_option(&amp;_name);
356   _dcmdparser.add_dcmd_option(&amp;_settings);
357   _dcmdparser.add_dcmd_option(&amp;_delay);
358   _dcmdparser.add_dcmd_option(&amp;_duration);
359   _dcmdparser.add_dcmd_option(&amp;_disk);
360   _dcmdparser.add_dcmd_option(&amp;_filename);
361   _dcmdparser.add_dcmd_option(&amp;_maxage);
362   _dcmdparser.add_dcmd_option(&amp;_maxsize);
363   _dcmdparser.add_dcmd_option(&amp;_flush_interval);
364   _dcmdparser.add_dcmd_option(&amp;_dump_on_exit);
365   _dcmdparser.add_dcmd_option(&amp;_path_to_gc_roots);
</pre>
</td>
</tr>
</table>
<center><a href="../../gc/z/zServiceability.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../metadata/metadata.xml.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>