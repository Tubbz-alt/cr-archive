<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/gc/shenandoah/shenandoahUtils.cpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="shenandoahStringDedup.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="shenandoahUtils.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shenandoah/shenandoahUtils.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
108 ShenandoahGCPhase::ShenandoahGCPhase(ShenandoahPhaseTimings::Phase phase) :
109   _timings(ShenandoahHeap::heap()-&gt;phase_timings()), _phase(phase) {
110   assert(!Thread::current()-&gt;is_Worker_thread() &amp;&amp;
111               (Thread::current()-&gt;is_VM_thread() ||
112                Thread::current()-&gt;is_ConcurrentGC_thread()),
113           &quot;Must be set by these threads&quot;);
114   _parent_phase = _current_phase;
115   _current_phase = phase;
116   _start = os::elapsedTime();
117 }
118 
119 ShenandoahGCPhase::~ShenandoahGCPhase() {
120   _timings-&gt;record_phase_time(_phase, os::elapsedTime() - _start);
121   _current_phase = _parent_phase;
122 }
123 
124 bool ShenandoahGCPhase::is_current_phase_valid() {
125   return _current_phase &lt; ShenandoahPhaseTimings::_num_phases;
126 }
127 
<span class="line-removed">128 bool ShenandoahGCPhase::is_root_work_phase() {</span>
<span class="line-removed">129   switch(current_phase()) {</span>
<span class="line-removed">130     case ShenandoahPhaseTimings::scan_roots:</span>
<span class="line-removed">131     case ShenandoahPhaseTimings::update_roots:</span>
<span class="line-removed">132     case ShenandoahPhaseTimings::init_evac:</span>
<span class="line-removed">133     case ShenandoahPhaseTimings::final_update_refs_roots:</span>
<span class="line-removed">134     case ShenandoahPhaseTimings::degen_gc_update_roots:</span>
<span class="line-removed">135     case ShenandoahPhaseTimings::full_gc_scan_roots:</span>
<span class="line-removed">136     case ShenandoahPhaseTimings::full_gc_update_roots:</span>
<span class="line-removed">137     case ShenandoahPhaseTimings::full_gc_adjust_roots:</span>
<span class="line-removed">138       return true;</span>
<span class="line-removed">139     default:</span>
<span class="line-removed">140       return false;</span>
<span class="line-removed">141   }</span>
<span class="line-removed">142 }</span>
<span class="line-removed">143 </span>
144 ShenandoahGCSubPhase::ShenandoahGCSubPhase(ShenandoahPhaseTimings::Phase phase) :
145   ShenandoahGCPhase(phase),
146   _timer(ShenandoahHeap::heap()-&gt;gc_timer()) {
147   _timer-&gt;register_gc_phase_start(ShenandoahPhaseTimings::phase_name(phase), Ticks::now());
148 }
149 
150 ShenandoahGCSubPhase::~ShenandoahGCSubPhase() {
151   _timer-&gt;register_gc_phase_end(Ticks::now());
152 }
153 
154 ShenandoahGCWorkerPhase::ShenandoahGCWorkerPhase(const ShenandoahPhaseTimings::Phase phase) :
155     _timings(ShenandoahHeap::heap()-&gt;phase_timings()), _phase(phase) {
156   _timings-&gt;record_workers_start(_phase);
157 }
158 
159 ShenandoahGCWorkerPhase::~ShenandoahGCWorkerPhase() {
160   _timings-&gt;record_workers_end(_phase);
161 }
162 
163 ShenandoahWorkerSession::ShenandoahWorkerSession(uint worker_id) : _worker_id(worker_id) {
</pre>
</td>
<td>
<hr />
<pre>
108 ShenandoahGCPhase::ShenandoahGCPhase(ShenandoahPhaseTimings::Phase phase) :
109   _timings(ShenandoahHeap::heap()-&gt;phase_timings()), _phase(phase) {
110   assert(!Thread::current()-&gt;is_Worker_thread() &amp;&amp;
111               (Thread::current()-&gt;is_VM_thread() ||
112                Thread::current()-&gt;is_ConcurrentGC_thread()),
113           &quot;Must be set by these threads&quot;);
114   _parent_phase = _current_phase;
115   _current_phase = phase;
116   _start = os::elapsedTime();
117 }
118 
119 ShenandoahGCPhase::~ShenandoahGCPhase() {
120   _timings-&gt;record_phase_time(_phase, os::elapsedTime() - _start);
121   _current_phase = _parent_phase;
122 }
123 
124 bool ShenandoahGCPhase::is_current_phase_valid() {
125   return _current_phase &lt; ShenandoahPhaseTimings::_num_phases;
126 }
127 
















128 ShenandoahGCSubPhase::ShenandoahGCSubPhase(ShenandoahPhaseTimings::Phase phase) :
129   ShenandoahGCPhase(phase),
130   _timer(ShenandoahHeap::heap()-&gt;gc_timer()) {
131   _timer-&gt;register_gc_phase_start(ShenandoahPhaseTimings::phase_name(phase), Ticks::now());
132 }
133 
134 ShenandoahGCSubPhase::~ShenandoahGCSubPhase() {
135   _timer-&gt;register_gc_phase_end(Ticks::now());
136 }
137 
138 ShenandoahGCWorkerPhase::ShenandoahGCWorkerPhase(const ShenandoahPhaseTimings::Phase phase) :
139     _timings(ShenandoahHeap::heap()-&gt;phase_timings()), _phase(phase) {
140   _timings-&gt;record_workers_start(_phase);
141 }
142 
143 ShenandoahGCWorkerPhase::~ShenandoahGCWorkerPhase() {
144   _timings-&gt;record_workers_end(_phase);
145 }
146 
147 ShenandoahWorkerSession::ShenandoahWorkerSession(uint worker_id) : _worker_id(worker_id) {
</pre>
</td>
</tr>
</table>
<center><a href="shenandoahStringDedup.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="shenandoahUtils.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>