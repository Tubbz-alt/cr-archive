<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/classfile/systemDictionaryShared.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="systemDictionaryShared.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vmSymbols.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/classfile/systemDictionaryShared.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
150   //    PLATFORM  classes: VM calls ClassLoaders.PlatformClassLoader::definePackage(String, Module)
151   //                  to define package for shared platform classes from named
152   //                  modules.
153   //
154   // 2. For unnamed modules
155   //    BOOT classes: Reuses the existing JVM_GetSystemPackage(s) interfaces to
156   //                  get packages for shared boot classes in unnamed modules.
157   //
158   //    APP  classes: VM calls ClassLoaders.AppClassLoader::defineOrCheckPackage()
159   //                  with with the manifest and url from archived data.
160   //
161   //    PLATFORM  classes: No package is defined.
162   //
163   // The following two define_shared_package() functions are used to define
164   // package for shared APP and PLATFORM classes.
165   static void define_shared_package(Symbol*  class_name,
166                                     Handle class_loader,
167                                     Handle manifest,
168                                     Handle url,
169                                     TRAPS);
<span class="line-removed">170   static void define_shared_package(Symbol* class_name,</span>
<span class="line-removed">171                                     Handle class_loader,</span>
<span class="line-removed">172                                     ModuleEntry* mod_entry,</span>
<span class="line-removed">173                                     TRAPS);</span>
174 
175   static Handle get_shared_jar_manifest(int shared_path_index, TRAPS);
176   static Handle get_shared_jar_url(int shared_path_index, TRAPS);
177   static Handle get_protection_domain_from_classloader(Handle class_loader,
178                                                        Handle url, TRAPS);
179   static Handle get_shared_protection_domain(Handle class_loader,
180                                              int shared_path_index,
181                                              Handle url,
182                                              TRAPS);
183   static Handle get_shared_protection_domain(Handle class_loader,
184                                              ModuleEntry* mod, TRAPS);
185   static Handle init_security_info(Handle class_loader, InstanceKlass* ik, PackageEntry* pkg_entry, TRAPS);
186 
187   static void atomic_set_array_index(objArrayOop array, int index, oop o) {
188     // Benign race condition:  array.obj_at(index) may already be filled in.
189     // The important thing here is that all threads pick up the same result.
190     // It doesn&#39;t matter which racing thread wins, as long as only one
191     // result is used by all threads, and all future queries.
192     array-&gt;atomic_compare_exchange_oop(index, o, NULL);
193   }
</pre>
</td>
<td>
<hr />
<pre>
150   //    PLATFORM  classes: VM calls ClassLoaders.PlatformClassLoader::definePackage(String, Module)
151   //                  to define package for shared platform classes from named
152   //                  modules.
153   //
154   // 2. For unnamed modules
155   //    BOOT classes: Reuses the existing JVM_GetSystemPackage(s) interfaces to
156   //                  get packages for shared boot classes in unnamed modules.
157   //
158   //    APP  classes: VM calls ClassLoaders.AppClassLoader::defineOrCheckPackage()
159   //                  with with the manifest and url from archived data.
160   //
161   //    PLATFORM  classes: No package is defined.
162   //
163   // The following two define_shared_package() functions are used to define
164   // package for shared APP and PLATFORM classes.
165   static void define_shared_package(Symbol*  class_name,
166                                     Handle class_loader,
167                                     Handle manifest,
168                                     Handle url,
169                                     TRAPS);




170 
171   static Handle get_shared_jar_manifest(int shared_path_index, TRAPS);
172   static Handle get_shared_jar_url(int shared_path_index, TRAPS);
173   static Handle get_protection_domain_from_classloader(Handle class_loader,
174                                                        Handle url, TRAPS);
175   static Handle get_shared_protection_domain(Handle class_loader,
176                                              int shared_path_index,
177                                              Handle url,
178                                              TRAPS);
179   static Handle get_shared_protection_domain(Handle class_loader,
180                                              ModuleEntry* mod, TRAPS);
181   static Handle init_security_info(Handle class_loader, InstanceKlass* ik, PackageEntry* pkg_entry, TRAPS);
182 
183   static void atomic_set_array_index(objArrayOop array, int index, oop o) {
184     // Benign race condition:  array.obj_at(index) may already be filled in.
185     // The important thing here is that all threads pick up the same result.
186     // It doesn&#39;t matter which racing thread wins, as long as only one
187     // result is used by all threads, and all future queries.
188     array-&gt;atomic_compare_exchange_oop(index, o, NULL);
189   }
</pre>
</td>
</tr>
</table>
<center><a href="systemDictionaryShared.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vmSymbols.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>