<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.net.http/share/classes/jdk/internal/net/http/Stream.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ResponseContent.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../jdk.hotspot.agent/share/classes/sun/jvm/hotspot/oops/ConstMethod.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.net.http/share/classes/jdk/internal/net/http/Stream.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 372         this.request = e.request();
 373         this.requestPublisher = request.requestPublisher;  // may be null
 374         this.responseHeadersBuilder = new HttpHeadersBuilder();
 375         this.rspHeadersConsumer = new HeadersConsumer();
 376         this.requestPseudoHeaders = createPseudoHeaders(request);
 377         this.windowUpdater = new StreamWindowUpdateSender(connection);
 378     }
 379 
 380     /**
 381      * Entry point from Http2Connection reader thread.
 382      *
 383      * Data frames will be removed by response body thread.
 384      */
 385     void incoming(Http2Frame frame) throws IOException {
 386         if (debug.on()) debug.log(&quot;incoming: %s&quot;, frame);
 387         if ((frame instanceof HeaderFrame)) {
 388             HeaderFrame hframe = (HeaderFrame)frame;
 389             if (hframe.endHeaders()) {
 390                 Log.logTrace(&quot;handling response (streamid={0})&quot;, streamid);
 391                 handleResponse();
<span class="line-modified"> 392                 if (hframe.getFlag(HeaderFrame.END_STREAM)) {</span>
<span class="line-modified"> 393                     if (debug.on()) debug.log(&quot;handling END_STREAM: %d&quot;, streamid);</span>
<span class="line-modified"> 394                     receiveDataFrame(new DataFrame(streamid, DataFrame.END_STREAM, List.of()));</span>
<span class="line-modified"> 395                 }</span>
 396             }
 397         } else if (frame instanceof DataFrame) {
 398             receiveDataFrame((DataFrame)frame);
 399         } else {
 400             otherFrame(frame);
 401         }
 402     }
 403 
 404     void otherFrame(Http2Frame frame) throws IOException {
 405         switch (frame.type()) {
 406             case WindowUpdateFrame.TYPE:
 407                 incoming_windowUpdate((WindowUpdateFrame) frame);
 408                 break;
 409             case ResetFrame.TYPE:
 410                 incoming_reset((ResetFrame) frame);
 411                 break;
 412             case PriorityFrame.TYPE:
 413                 incoming_priority((PriorityFrame) frame);
 414                 break;
 415             default:
</pre>
</td>
<td>
<hr />
<pre>
 372         this.request = e.request();
 373         this.requestPublisher = request.requestPublisher;  // may be null
 374         this.responseHeadersBuilder = new HttpHeadersBuilder();
 375         this.rspHeadersConsumer = new HeadersConsumer();
 376         this.requestPseudoHeaders = createPseudoHeaders(request);
 377         this.windowUpdater = new StreamWindowUpdateSender(connection);
 378     }
 379 
 380     /**
 381      * Entry point from Http2Connection reader thread.
 382      *
 383      * Data frames will be removed by response body thread.
 384      */
 385     void incoming(Http2Frame frame) throws IOException {
 386         if (debug.on()) debug.log(&quot;incoming: %s&quot;, frame);
 387         if ((frame instanceof HeaderFrame)) {
 388             HeaderFrame hframe = (HeaderFrame)frame;
 389             if (hframe.endHeaders()) {
 390                 Log.logTrace(&quot;handling response (streamid={0})&quot;, streamid);
 391                 handleResponse();
<span class="line-modified"> 392             }</span>
<span class="line-modified"> 393             if (hframe.getFlag(HeaderFrame.END_STREAM)) {</span>
<span class="line-modified"> 394                 if (debug.on()) debug.log(&quot;handling END_STREAM: %d&quot;, streamid);</span>
<span class="line-modified"> 395                 receiveDataFrame(new DataFrame(streamid, DataFrame.END_STREAM, List.of()));</span>
 396             }
 397         } else if (frame instanceof DataFrame) {
 398             receiveDataFrame((DataFrame)frame);
 399         } else {
 400             otherFrame(frame);
 401         }
 402     }
 403 
 404     void otherFrame(Http2Frame frame) throws IOException {
 405         switch (frame.type()) {
 406             case WindowUpdateFrame.TYPE:
 407                 incoming_windowUpdate((WindowUpdateFrame) frame);
 408                 break;
 409             case ResetFrame.TYPE:
 410                 incoming_reset((ResetFrame) frame);
 411                 break;
 412             case PriorityFrame.TYPE:
 413                 incoming_priority((PriorityFrame) frame);
 414                 break;
 415             default:
</pre>
</td>
</tr>
</table>
<center><a href="ResponseContent.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../jdk.hotspot.agent/share/classes/sun/jvm/hotspot/oops/ConstMethod.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>