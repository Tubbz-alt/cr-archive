<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/PackageUseWriter.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="PackageIndexWriter.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="PackageWriterImpl.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/PackageUseWriter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
148      * @param contentTree the content tree to which the package use information will be added
149      */
150     protected void addPackageUse(Content contentTree) {
151         Content content = new ContentBuilder();
152         if (configuration.packages.size() &gt; 1) {
153             addPackageList(content);
154         }
155         addClassList(content);
156         contentTree.add(content);
157     }
158 
159     /**
160      * Add the list of packages that use the given package.
161      *
162      * @param contentTree the content tree to which the package list will be added
163      */
164     protected void addPackageList(Content contentTree) {
165         Content caption = contents.getContent(
166                 &quot;doclet.ClassUse_Packages.that.use.0&quot;,
167                 getPackageLink(packageElement, utils.getPackageName(packageElement)));
<span class="line-modified">168         Table table = new Table(HtmlStyle.useSummary)</span>
169                 .setCaption(caption)
170                 .setHeader(getPackageTableHeader())
171                 .setColumnStyles(HtmlStyle.colFirst, HtmlStyle.colLast);
172         for (String pkgname: usingPackageToUsedClasses.keySet()) {
173             PackageElement pkg = utils.elementUtils.getPackageElement(pkgname);
174             Content packageLink = links.createLink(getPackageAnchorName(pkg),
175                     new StringContent(utils.getPackageName(pkg)));
176             Content summary = new ContentBuilder();
177             if (pkg != null &amp;&amp; !pkg.isUnnamed()) {
178                 addSummaryComment(pkg, summary);
179             } else {
180                 summary.add(Entity.NO_BREAK_SPACE);
181             }
182             table.addRow(packageLink, summary);
183         }
184         contentTree.add(table);
185     }
186 
187     /**
188      * Add the list of classes that use the given package.
189      *
190      * @param contentTree the content tree to which the class list will be added
191      */
192     protected void addClassList(Content contentTree) {
193         TableHeader classTableHeader = new TableHeader(
194                 contents.classLabel, contents.descriptionLabel);
195         HtmlTree ul = new HtmlTree(TagName.UL);
196         ul.setStyle(HtmlStyle.blockList);
197         for (String packageName : usingPackageToUsedClasses.keySet()) {
198             PackageElement usingPackage = utils.elementUtils.getPackageElement(packageName);
199             HtmlTree section = HtmlTree.SECTION(HtmlStyle.detail)
200                     .setId(getPackageAnchorName(usingPackage));
201             String tableSummary = resources.getText(&quot;doclet.Use_Table_Summary&quot;,
202                                                         resources.getText(&quot;doclet.classes&quot;));
203             Content caption = contents.getContent(
204                     &quot;doclet.ClassUse_Classes.in.0.used.by.1&quot;,
205                     getPackageLink(packageElement, utils.getPackageName(packageElement)),
206                     getPackageLink(usingPackage, utils.getPackageName(usingPackage)));
<span class="line-modified">207             Table table = new Table(HtmlStyle.useSummary)</span>
208                     .setCaption(caption)
209                     .setHeader(classTableHeader)
210                     .setColumnStyles(HtmlStyle.colFirst, HtmlStyle.colLast);
211             for (TypeElement te : usingPackageToUsedClasses.get(packageName)) {
212                 DocPath dp = pathString(te,
213                         DocPaths.CLASS_USE.resolve(docPaths.forName(te)));
214                 Content stringContent = new StringContent(utils.getSimpleName(te));
215                 Content typeContent = links.createLink(dp.fragment(getPackageAnchorName(usingPackage)),
216                         stringContent);
217                 Content summary = new ContentBuilder();
218                 addIndexComment(te, summary);
219 
220                 table.addRow(typeContent, summary);
221             }
222             section.add(table);
223             ul.add(HtmlTree.LI(section));
224         }
225         Content li = HtmlTree.SECTION(HtmlStyle.packageUses, ul);
226         contentTree.add(li);
227     }
</pre>
</td>
<td>
<hr />
<pre>
148      * @param contentTree the content tree to which the package use information will be added
149      */
150     protected void addPackageUse(Content contentTree) {
151         Content content = new ContentBuilder();
152         if (configuration.packages.size() &gt; 1) {
153             addPackageList(content);
154         }
155         addClassList(content);
156         contentTree.add(content);
157     }
158 
159     /**
160      * Add the list of packages that use the given package.
161      *
162      * @param contentTree the content tree to which the package list will be added
163      */
164     protected void addPackageList(Content contentTree) {
165         Content caption = contents.getContent(
166                 &quot;doclet.ClassUse_Packages.that.use.0&quot;,
167                 getPackageLink(packageElement, utils.getPackageName(packageElement)));
<span class="line-modified">168         Table table = new Table(HtmlStyle.useSummary, HtmlStyle.summaryTable)</span>
169                 .setCaption(caption)
170                 .setHeader(getPackageTableHeader())
171                 .setColumnStyles(HtmlStyle.colFirst, HtmlStyle.colLast);
172         for (String pkgname: usingPackageToUsedClasses.keySet()) {
173             PackageElement pkg = utils.elementUtils.getPackageElement(pkgname);
174             Content packageLink = links.createLink(getPackageAnchorName(pkg),
175                     new StringContent(utils.getPackageName(pkg)));
176             Content summary = new ContentBuilder();
177             if (pkg != null &amp;&amp; !pkg.isUnnamed()) {
178                 addSummaryComment(pkg, summary);
179             } else {
180                 summary.add(Entity.NO_BREAK_SPACE);
181             }
182             table.addRow(packageLink, summary);
183         }
184         contentTree.add(table);
185     }
186 
187     /**
188      * Add the list of classes that use the given package.
189      *
190      * @param contentTree the content tree to which the class list will be added
191      */
192     protected void addClassList(Content contentTree) {
193         TableHeader classTableHeader = new TableHeader(
194                 contents.classLabel, contents.descriptionLabel);
195         HtmlTree ul = new HtmlTree(TagName.UL);
196         ul.setStyle(HtmlStyle.blockList);
197         for (String packageName : usingPackageToUsedClasses.keySet()) {
198             PackageElement usingPackage = utils.elementUtils.getPackageElement(packageName);
199             HtmlTree section = HtmlTree.SECTION(HtmlStyle.detail)
200                     .setId(getPackageAnchorName(usingPackage));
201             String tableSummary = resources.getText(&quot;doclet.Use_Table_Summary&quot;,
202                                                         resources.getText(&quot;doclet.classes&quot;));
203             Content caption = contents.getContent(
204                     &quot;doclet.ClassUse_Classes.in.0.used.by.1&quot;,
205                     getPackageLink(packageElement, utils.getPackageName(packageElement)),
206                     getPackageLink(usingPackage, utils.getPackageName(usingPackage)));
<span class="line-modified">207             Table table = new Table(HtmlStyle.useSummary, HtmlStyle.summaryTable)</span>
208                     .setCaption(caption)
209                     .setHeader(classTableHeader)
210                     .setColumnStyles(HtmlStyle.colFirst, HtmlStyle.colLast);
211             for (TypeElement te : usingPackageToUsedClasses.get(packageName)) {
212                 DocPath dp = pathString(te,
213                         DocPaths.CLASS_USE.resolve(docPaths.forName(te)));
214                 Content stringContent = new StringContent(utils.getSimpleName(te));
215                 Content typeContent = links.createLink(dp.fragment(getPackageAnchorName(usingPackage)),
216                         stringContent);
217                 Content summary = new ContentBuilder();
218                 addIndexComment(te, summary);
219 
220                 table.addRow(typeContent, summary);
221             }
222             section.add(table);
223             ul.add(HtmlTree.LI(section));
224         }
225         Content li = HtmlTree.SECTION(HtmlStyle.packageUses, ul);
226         contentTree.add(li);
227     }
</pre>
</td>
</tr>
</table>
<center><a href="PackageIndexWriter.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="PackageWriterImpl.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>