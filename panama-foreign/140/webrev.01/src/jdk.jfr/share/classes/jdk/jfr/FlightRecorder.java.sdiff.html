<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.jfr/share/classes/jdk/jfr/FlightRecorder.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="EventType.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="FlightRecorderListener.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jfr/share/classes/jdk/jfr/FlightRecorder.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 68     /**
 69      * Returns an immutable list of the available recordings.
 70      * &lt;p&gt;
 71      * A recording becomes available when it is created. It becomes unavailable when it
 72      * is in the {@code CLOSED} state, typically after a call to
 73      * {@link Recording#close()}.
 74      *
 75      * @return a list of recordings, not {@code null}
 76      */
 77     public List&lt;Recording&gt; getRecordings() {
 78         List&lt;Recording&gt; recs = new ArrayList&lt;&gt;();
 79         for (PlatformRecording r : internal.getRecordings()) {
 80             recs.add(r.getRecording());
 81         }
 82         return Collections.unmodifiableList(recs);
 83     }
 84 
 85     /**
 86      * Creates a snapshot of all available recorded data.
 87      * &lt;p&gt;
<span class="line-modified"> 88      * A snapshot is a synthesized recording in a {@code STOPPPED} state. If no data is</span>
 89      * available, a recording with size {@code 0} is returned.
 90      * &lt;p&gt;
 91      * A snapshot provides stable access to data for later operations (for example,
 92      * operations to change the interval or to reduce the data size).
 93      * &lt;p&gt;
 94      * The following example shows how to create a snapshot and write a subset of the data to a file.
 95      *
<span class="line-modified"> 96      * &lt;pre&gt;</span>
<span class="line-removed"> 97      * &lt;code&gt;</span>
 98      * try (Recording snapshot = FlightRecorder.getFlightRecorder().takeSnapshot()) {
<span class="line-modified"> 99      *   if (snapshot.getSize() &amp;gt; 0) {</span>
100      *     snapshot.setMaxSize(100_000_000);
101      *     snapshot.setMaxAge(Duration.ofMinutes(5));
102      *     snapshot.dump(Paths.get(&quot;snapshot.jfr&quot;));
103      *   }
104      * }
<span class="line-modified">105      * &lt;/code&gt;</span>
<span class="line-removed">106      * &lt;/pre&gt;</span>
107      *
108      * The caller must close the recording when access to the data is no longer
109      * needed.
110      *
111      * @return a snapshot of all available recording data, not {@code null}
112      */
113     public Recording takeSnapshot() {
114         Recording snapshot = new Recording();
115         snapshot.setName(&quot;Snapshot&quot;);
116         internal.fillWithRecordedData(snapshot.getInternal(), null);
117         return snapshot;
118     }
119 
120     /**
121      * Registers an event class.
122      * &lt;p&gt;
123      * If the event class is already registered, then the invocation of this method is
124      * ignored.
125      *
126      * @param eventClass the event class to register, not {@code null}
</pre>
</td>
<td>
<hr />
<pre>
 68     /**
 69      * Returns an immutable list of the available recordings.
 70      * &lt;p&gt;
 71      * A recording becomes available when it is created. It becomes unavailable when it
 72      * is in the {@code CLOSED} state, typically after a call to
 73      * {@link Recording#close()}.
 74      *
 75      * @return a list of recordings, not {@code null}
 76      */
 77     public List&lt;Recording&gt; getRecordings() {
 78         List&lt;Recording&gt; recs = new ArrayList&lt;&gt;();
 79         for (PlatformRecording r : internal.getRecordings()) {
 80             recs.add(r.getRecording());
 81         }
 82         return Collections.unmodifiableList(recs);
 83     }
 84 
 85     /**
 86      * Creates a snapshot of all available recorded data.
 87      * &lt;p&gt;
<span class="line-modified"> 88      * A snapshot is a synthesized recording in a {@code STOPPED} state. If no data is</span>
 89      * available, a recording with size {@code 0} is returned.
 90      * &lt;p&gt;
 91      * A snapshot provides stable access to data for later operations (for example,
 92      * operations to change the interval or to reduce the data size).
 93      * &lt;p&gt;
 94      * The following example shows how to create a snapshot and write a subset of the data to a file.
 95      *
<span class="line-modified"> 96      * &lt;pre&gt;{@literal</span>

 97      * try (Recording snapshot = FlightRecorder.getFlightRecorder().takeSnapshot()) {
<span class="line-modified"> 98      *   if (snapshot.getSize() &gt; 0) {</span>
 99      *     snapshot.setMaxSize(100_000_000);
100      *     snapshot.setMaxAge(Duration.ofMinutes(5));
101      *     snapshot.dump(Paths.get(&quot;snapshot.jfr&quot;));
102      *   }
103      * }
<span class="line-modified">104      * }&lt;/pre&gt;</span>

105      *
106      * The caller must close the recording when access to the data is no longer
107      * needed.
108      *
109      * @return a snapshot of all available recording data, not {@code null}
110      */
111     public Recording takeSnapshot() {
112         Recording snapshot = new Recording();
113         snapshot.setName(&quot;Snapshot&quot;);
114         internal.fillWithRecordedData(snapshot.getInternal(), null);
115         return snapshot;
116     }
117 
118     /**
119      * Registers an event class.
120      * &lt;p&gt;
121      * If the event class is already registered, then the invocation of this method is
122      * ignored.
123      *
124      * @param eventClass the event class to register, not {@code null}
</pre>
</td>
</tr>
</table>
<center><a href="EventType.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="FlightRecorderListener.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>