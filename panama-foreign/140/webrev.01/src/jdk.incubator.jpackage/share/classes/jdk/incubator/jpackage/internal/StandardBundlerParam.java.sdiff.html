<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.jpackage/share/classes/jdk/incubator/jpackage/internal/StandardBundlerParam.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="OverridableResource.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ValidOptions.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.jpackage/share/classes/jdk/incubator/jpackage/internal/StandardBundlerParam.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2014, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 53 import java.util.stream.Stream;
 54 
 55 /**
 56  * StandardBundlerParam
 57  *
 58  * A parameter to a bundler.
 59  *
 60  * Also contains static definitions of all of the common bundler parameters.
 61  * (additional platform specific and mode specific bundler parameters
 62  * are defined in each of the specific bundlers)
 63  *
 64  * Also contains static methods that operate on maps of parameters.
 65  */
 66 class StandardBundlerParam&lt;T&gt; extends BundlerParamInfo&lt;T&gt; {
 67 
 68     private static final ResourceBundle I18N = ResourceBundle.getBundle(
 69             &quot;jdk.incubator.jpackage.internal.resources.MainResources&quot;);
 70     private static final String JAVABASEJMOD = &quot;java.base.jmod&quot;;
 71     private final static String DEFAULT_VERSION = &quot;1.0&quot;;
 72     private final static String DEFAULT_RELEASE = &quot;1&quot;;





 73 
 74     StandardBundlerParam(String id, Class&lt;T&gt; valueType,
 75             Function&lt;Map&lt;String, ? super Object&gt;, T&gt; defaultValueFunction,
 76             BiFunction&lt;String, Map&lt;String, ? super Object&gt;, T&gt; stringConverter)
 77     {
 78         this.id = id;
 79         this.valueType = valueType;
 80         this.defaultValueFunction = defaultValueFunction;
 81         this.stringConverter = stringConverter;
 82     }
 83 
 84     static final StandardBundlerParam&lt;RelativeFileSet&gt; APP_RESOURCES =
 85             new StandardBundlerParam&lt;&gt;(
 86                     BundleParams.PARAM_APP_RESOURCES,
 87                     RelativeFileSet.class,
 88                     null, // no default.  Required parameter
 89                     null  // no string translation,
 90                           // tool must provide complex type
 91             );
 92 
</pre>
<hr />
<pre>
462                     });
463 
464     static final BundlerParamInfo&lt;String&gt; MODULE =
465             new StandardBundlerParam&lt;&gt;(
466                     Arguments.CLIOptions.MODULE.getId(),
467                     String.class,
468                     p -&gt; null,
469                     (s, p) -&gt; {
470                         return String.valueOf(s);
471                     });
472 
473     @SuppressWarnings(&quot;unchecked&quot;)
474     static final BundlerParamInfo&lt;Set&lt;String&gt;&gt; ADD_MODULES =
475             new StandardBundlerParam&lt;&gt;(
476                     Arguments.CLIOptions.ADD_MODULES.getId(),
477                     (Class&lt;Set&lt;String&gt;&gt;) (Object) Set.class,
478                     p -&gt; new LinkedHashSet&lt;String&gt;(),
479                     (s, p) -&gt; new LinkedHashSet&lt;&gt;(Arrays.asList(s.split(&quot;,&quot;)))
480             );
481 








482     @SuppressWarnings(&quot;unchecked&quot;)
483     static final BundlerParamInfo&lt;Set&lt;String&gt;&gt; LIMIT_MODULES =
484             new StandardBundlerParam&lt;&gt;(
485                     &quot;limit-modules&quot;,
486                     (Class&lt;Set&lt;String&gt;&gt;) (Object) Set.class,
487                     p -&gt; new LinkedHashSet&lt;String&gt;(),
488                     (s, p) -&gt; new LinkedHashSet&lt;&gt;(Arrays.asList(s.split(&quot;,&quot;)))
489             );
490 
491     static boolean isRuntimeInstaller(Map&lt;String, ? super Object&gt; params) {
492         if (params.containsKey(MODULE.getID()) ||
493                 params.containsKey(MAIN_JAR.getID()) ||
494                 params.containsKey(PREDEFINED_APP_IMAGE.getID())) {
495             return false; // we are building or are given an application
496         }
497         // runtime installer requires --runtime-image, if this is false
498         // here then we should have thrown error validating args.
499         return params.containsKey(PREDEFINED_RUNTIME_IMAGE.getID());
500     }
501 
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2014, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 53 import java.util.stream.Stream;
 54 
 55 /**
 56  * StandardBundlerParam
 57  *
 58  * A parameter to a bundler.
 59  *
 60  * Also contains static definitions of all of the common bundler parameters.
 61  * (additional platform specific and mode specific bundler parameters
 62  * are defined in each of the specific bundlers)
 63  *
 64  * Also contains static methods that operate on maps of parameters.
 65  */
 66 class StandardBundlerParam&lt;T&gt; extends BundlerParamInfo&lt;T&gt; {
 67 
 68     private static final ResourceBundle I18N = ResourceBundle.getBundle(
 69             &quot;jdk.incubator.jpackage.internal.resources.MainResources&quot;);
 70     private static final String JAVABASEJMOD = &quot;java.base.jmod&quot;;
 71     private final static String DEFAULT_VERSION = &quot;1.0&quot;;
 72     private final static String DEFAULT_RELEASE = &quot;1&quot;;
<span class="line-added"> 73     private final static String[] DEFAULT_JLINK_OPTIONS = {</span>
<span class="line-added"> 74             &quot;--strip-native-commands&quot;,</span>
<span class="line-added"> 75             &quot;--strip-debug&quot;,</span>
<span class="line-added"> 76             &quot;--no-man-pages&quot;,</span>
<span class="line-added"> 77             &quot;--no-header-files&quot;};</span>
 78 
 79     StandardBundlerParam(String id, Class&lt;T&gt; valueType,
 80             Function&lt;Map&lt;String, ? super Object&gt;, T&gt; defaultValueFunction,
 81             BiFunction&lt;String, Map&lt;String, ? super Object&gt;, T&gt; stringConverter)
 82     {
 83         this.id = id;
 84         this.valueType = valueType;
 85         this.defaultValueFunction = defaultValueFunction;
 86         this.stringConverter = stringConverter;
 87     }
 88 
 89     static final StandardBundlerParam&lt;RelativeFileSet&gt; APP_RESOURCES =
 90             new StandardBundlerParam&lt;&gt;(
 91                     BundleParams.PARAM_APP_RESOURCES,
 92                     RelativeFileSet.class,
 93                     null, // no default.  Required parameter
 94                     null  // no string translation,
 95                           // tool must provide complex type
 96             );
 97 
</pre>
<hr />
<pre>
467                     });
468 
469     static final BundlerParamInfo&lt;String&gt; MODULE =
470             new StandardBundlerParam&lt;&gt;(
471                     Arguments.CLIOptions.MODULE.getId(),
472                     String.class,
473                     p -&gt; null,
474                     (s, p) -&gt; {
475                         return String.valueOf(s);
476                     });
477 
478     @SuppressWarnings(&quot;unchecked&quot;)
479     static final BundlerParamInfo&lt;Set&lt;String&gt;&gt; ADD_MODULES =
480             new StandardBundlerParam&lt;&gt;(
481                     Arguments.CLIOptions.ADD_MODULES.getId(),
482                     (Class&lt;Set&lt;String&gt;&gt;) (Object) Set.class,
483                     p -&gt; new LinkedHashSet&lt;String&gt;(),
484                     (s, p) -&gt; new LinkedHashSet&lt;&gt;(Arrays.asList(s.split(&quot;,&quot;)))
485             );
486 
<span class="line-added">487     @SuppressWarnings(&quot;unchecked&quot;)</span>
<span class="line-added">488     static final StandardBundlerParam&lt;List&lt;String&gt;&gt; JLINK_OPTIONS =</span>
<span class="line-added">489             new StandardBundlerParam&lt;&gt;(</span>
<span class="line-added">490                     Arguments.CLIOptions.JLINK_OPTIONS.getId(),</span>
<span class="line-added">491                     (Class&lt;List&lt;String&gt;&gt;) (Object) List.class,</span>
<span class="line-added">492                     p -&gt; Arrays.asList(DEFAULT_JLINK_OPTIONS),</span>
<span class="line-added">493                     (s, p) -&gt; null);</span>
<span class="line-added">494 </span>
495     @SuppressWarnings(&quot;unchecked&quot;)
496     static final BundlerParamInfo&lt;Set&lt;String&gt;&gt; LIMIT_MODULES =
497             new StandardBundlerParam&lt;&gt;(
498                     &quot;limit-modules&quot;,
499                     (Class&lt;Set&lt;String&gt;&gt;) (Object) Set.class,
500                     p -&gt; new LinkedHashSet&lt;String&gt;(),
501                     (s, p) -&gt; new LinkedHashSet&lt;&gt;(Arrays.asList(s.split(&quot;,&quot;)))
502             );
503 
504     static boolean isRuntimeInstaller(Map&lt;String, ? super Object&gt; params) {
505         if (params.containsKey(MODULE.getID()) ||
506                 params.containsKey(MAIN_JAR.getID()) ||
507                 params.containsKey(PREDEFINED_APP_IMAGE.getID())) {
508             return false; // we are building or are given an application
509         }
510         // runtime installer requires --runtime-image, if this is false
511         // here then we should have thrown error validating args.
512         return params.containsKey(PREDEFINED_RUNTIME_IMAGE.getID());
513     }
514 
</pre>
</td>
</tr>
</table>
<center><a href="OverridableResource.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ValidOptions.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>