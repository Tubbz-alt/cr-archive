<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/lang/invoke/package-info.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="MethodHandles.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../text/CompactNumberFormat.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/lang/invoke/package-info.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 /**
 27  * The {@code java.lang.invoke} package provides low-level primitives for interacting
 28  * with the Java Virtual Machine.
 29  *
 30  * &lt;p&gt;
 31  * As described in the Java Virtual Machine Specification, certain types in this package
 32  * are given special treatment by the virtual machine:
 33  * &lt;ul&gt;
<span class="line-modified"> 34  * &lt;li&gt;The classes {@link java.lang.invoke.MethodHandle MethodHandle}</span>
 35  * {@link java.lang.invoke.VarHandle VarHandle} contain
 36  * &lt;a href=&quot;MethodHandle.html#sigpoly&quot;&gt;signature polymorphic methods&lt;/a&gt;
 37  * which can be linked regardless of their type descriptor.
 38  * Normally, method linkage requires exact matching of type descriptors.
 39  * &lt;/li&gt;
 40  *
 41  * &lt;li&gt;The JVM bytecode format supports immediate constants of
 42  * the classes {@link java.lang.invoke.MethodHandle MethodHandle} and
 43  * {@link java.lang.invoke.MethodType MethodType}.
 44  * &lt;/li&gt;
 45  *
 46  * &lt;li&gt;The {@code invokedynamic} instruction makes use of bootstrap {@code MethodHandle}
 47  * constants to dynamically resolve {@code CallSite} objects for custom method invocation
 48  * behavior.
 49  * &lt;/li&gt;
 50  *
 51  * &lt;li&gt;The {@code ldc} instruction makes use of bootstrap {@code MethodHandle} constants
 52  * to dynamically resolve custom constant values.
 53  * &lt;/li&gt;
 54  * &lt;/ul&gt;
</pre>
<hr />
<pre>
173  * &lt;h3&gt;Types of bootstrap methods&lt;/h3&gt;
174  * For a dynamically-computed call site, the bootstrap method is invoked with parameter
175  * types {@code MethodHandles.Lookup}, {@code String}, {@code MethodType}, and the types
176  * of any static arguments; the return type is {@code CallSite}.
177  * &lt;p&gt;
178  * For a dynamically-computed constant, the bootstrap method is invoked with parameter types
179  * {@code MethodHandles.Lookup}, {@code String}, {@code Class}, and the types of any
180  * static arguments; the return type is the type represented by the {@code Class}.
181  * &lt;p&gt;
182  * Because {@link java.lang.invoke.MethodHandle#invoke MethodHandle.invoke} allows for
183  * adaptations between the invoked method type and the bootstrap method handle&#39;s method type,
184  * there is flexibility in the declaration of the bootstrap method.
185  * For a dynamically-computed constant the first parameter type of the bootstrap method handle
186  * must be assignable to {@code MethodHandles.Lookup}, other than that constraint the same degree
187  * of flexibility applies to bootstrap methods of dynamically-computed call sites and
188  * dynamically-computed constants.
189  * Note: this constraint allows for the future possibility where the bootstrap method is
190  * invoked with just the parameter types of static arguments, thereby supporting a wider
191  * range of methods compatible with the static arguments (such as methods that don&#39;t declare
192  * or require the lookup, name, and type meta-data parameters).
<span class="line-modified">193  * &lt;p&gt; For example, for dynamically-computed call site, a the first argument</span>
194  * could be {@code Object} instead of {@code MethodHandles.Lookup}, and the return type
195  * could also be {@code Object} instead of {@code CallSite}.
196  * (Note that the types and number of the stacked arguments limit
197  * the legal kinds of bootstrap methods to appropriately typed
198  * static methods and constructors.)
199  * &lt;p&gt;
200  * If a pushed value is a primitive type, it may be converted to a reference by boxing conversion.
201  * If the bootstrap method is a variable arity method (its modifier bit {@code 0x0080} is set),
202  * then some or all of the arguments specified here may be collected into a trailing array parameter.
203  * (This is not a special rule, but rather a useful consequence of the interaction
204  * between {@code CONSTANT_MethodHandle} constants, the modifier bit for variable arity methods,
205  * and the {@link java.lang.invoke.MethodHandle#asVarargsCollector asVarargsCollector} transformation.)
206  * &lt;p&gt;
207  * Given these rules, here are examples of legal bootstrap method declarations for
208  * dynamically-computed call sites, given various numbers {@code N} of extra arguments.
209  * The first row (marked {@code *}) will work for any number of extra arguments.
210  * &lt;table class=&quot;plain&quot; style=&quot;vertical-align:top&quot;&gt;
211  * &lt;caption style=&quot;display:none&quot;&gt;Static argument types&lt;/caption&gt;
212  * &lt;thead&gt;
213  * &lt;tr&gt;&lt;th scope=&quot;col&quot;&gt;N&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;Sample bootstrap method&lt;/th&gt;&lt;/tr&gt;
</pre>
</td>
<td>
<hr />
<pre>
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 /**
 27  * The {@code java.lang.invoke} package provides low-level primitives for interacting
 28  * with the Java Virtual Machine.
 29  *
 30  * &lt;p&gt;
 31  * As described in the Java Virtual Machine Specification, certain types in this package
 32  * are given special treatment by the virtual machine:
 33  * &lt;ul&gt;
<span class="line-modified"> 34  * &lt;li&gt;The classes {@link java.lang.invoke.MethodHandle MethodHandle} and</span>
 35  * {@link java.lang.invoke.VarHandle VarHandle} contain
 36  * &lt;a href=&quot;MethodHandle.html#sigpoly&quot;&gt;signature polymorphic methods&lt;/a&gt;
 37  * which can be linked regardless of their type descriptor.
 38  * Normally, method linkage requires exact matching of type descriptors.
 39  * &lt;/li&gt;
 40  *
 41  * &lt;li&gt;The JVM bytecode format supports immediate constants of
 42  * the classes {@link java.lang.invoke.MethodHandle MethodHandle} and
 43  * {@link java.lang.invoke.MethodType MethodType}.
 44  * &lt;/li&gt;
 45  *
 46  * &lt;li&gt;The {@code invokedynamic} instruction makes use of bootstrap {@code MethodHandle}
 47  * constants to dynamically resolve {@code CallSite} objects for custom method invocation
 48  * behavior.
 49  * &lt;/li&gt;
 50  *
 51  * &lt;li&gt;The {@code ldc} instruction makes use of bootstrap {@code MethodHandle} constants
 52  * to dynamically resolve custom constant values.
 53  * &lt;/li&gt;
 54  * &lt;/ul&gt;
</pre>
<hr />
<pre>
173  * &lt;h3&gt;Types of bootstrap methods&lt;/h3&gt;
174  * For a dynamically-computed call site, the bootstrap method is invoked with parameter
175  * types {@code MethodHandles.Lookup}, {@code String}, {@code MethodType}, and the types
176  * of any static arguments; the return type is {@code CallSite}.
177  * &lt;p&gt;
178  * For a dynamically-computed constant, the bootstrap method is invoked with parameter types
179  * {@code MethodHandles.Lookup}, {@code String}, {@code Class}, and the types of any
180  * static arguments; the return type is the type represented by the {@code Class}.
181  * &lt;p&gt;
182  * Because {@link java.lang.invoke.MethodHandle#invoke MethodHandle.invoke} allows for
183  * adaptations between the invoked method type and the bootstrap method handle&#39;s method type,
184  * there is flexibility in the declaration of the bootstrap method.
185  * For a dynamically-computed constant the first parameter type of the bootstrap method handle
186  * must be assignable to {@code MethodHandles.Lookup}, other than that constraint the same degree
187  * of flexibility applies to bootstrap methods of dynamically-computed call sites and
188  * dynamically-computed constants.
189  * Note: this constraint allows for the future possibility where the bootstrap method is
190  * invoked with just the parameter types of static arguments, thereby supporting a wider
191  * range of methods compatible with the static arguments (such as methods that don&#39;t declare
192  * or require the lookup, name, and type meta-data parameters).
<span class="line-modified">193  * &lt;p&gt; For example, for dynamically-computed call site, the first argument</span>
194  * could be {@code Object} instead of {@code MethodHandles.Lookup}, and the return type
195  * could also be {@code Object} instead of {@code CallSite}.
196  * (Note that the types and number of the stacked arguments limit
197  * the legal kinds of bootstrap methods to appropriately typed
198  * static methods and constructors.)
199  * &lt;p&gt;
200  * If a pushed value is a primitive type, it may be converted to a reference by boxing conversion.
201  * If the bootstrap method is a variable arity method (its modifier bit {@code 0x0080} is set),
202  * then some or all of the arguments specified here may be collected into a trailing array parameter.
203  * (This is not a special rule, but rather a useful consequence of the interaction
204  * between {@code CONSTANT_MethodHandle} constants, the modifier bit for variable arity methods,
205  * and the {@link java.lang.invoke.MethodHandle#asVarargsCollector asVarargsCollector} transformation.)
206  * &lt;p&gt;
207  * Given these rules, here are examples of legal bootstrap method declarations for
208  * dynamically-computed call sites, given various numbers {@code N} of extra arguments.
209  * The first row (marked {@code *}) will work for any number of extra arguments.
210  * &lt;table class=&quot;plain&quot; style=&quot;vertical-align:top&quot;&gt;
211  * &lt;caption style=&quot;display:none&quot;&gt;Static argument types&lt;/caption&gt;
212  * &lt;thead&gt;
213  * &lt;tr&gt;&lt;th scope=&quot;col&quot;&gt;N&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;Sample bootstrap method&lt;/th&gt;&lt;/tr&gt;
</pre>
</td>
</tr>
</table>
<center><a href="MethodHandles.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../text/CompactNumberFormat.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>