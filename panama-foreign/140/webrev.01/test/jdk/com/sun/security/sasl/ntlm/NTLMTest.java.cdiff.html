<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/jdk/com/sun/security/sasl/ntlm/NTLMTest.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../jndi/ldap/Base64Test.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../java/lang/management/MemoryMXBean/CollectionUsageThreshold.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/com/sun/security/sasl/ntlm/NTLMTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2010, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2010, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 22,19 ***</span>
   */
  
  /*
   * @test
   * @bug 6911951 7150092
   * @summary NTLM should be a supported Java SASL mechanism
   * @modules java.base/sun.security.util
   *          java.security.sasl
   */
  import java.io.IOException;
  import javax.security.sasl.*;
  import javax.security.auth.callback.*;
  import java.util.*;
<span class="line-modified">! import sun.security.util.HexDumpEncoder;</span>
  
  public class NTLMTest {
  
      private static final String MECH = &quot;NTLM&quot;;
      private static final String REALM = &quot;REALM&quot;;
<span class="line-new-header">--- 22,20 ---</span>
   */
  
  /*
   * @test
   * @bug 6911951 7150092
<span class="line-added">+  * @library /test/lib</span>
   * @summary NTLM should be a supported Java SASL mechanism
   * @modules java.base/sun.security.util
   *          java.security.sasl
   */
  import java.io.IOException;
  import javax.security.sasl.*;
  import javax.security.auth.callback.*;
  import java.util.*;
<span class="line-modified">! import jdk.test.lib.hexdump.HexPrinter;</span>
  
  public class NTLMTest {
  
      private static final String MECH = &quot;NTLM&quot;;
      private static final String REALM = &quot;REALM&quot;;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 310,24 ***</span>
          }
  
          byte[] response = (clnt.hasInitialResponse()
                  ? clnt.evaluateChallenge(EMPTY) : EMPTY);
          System.out.println(&quot;Initial:&quot;);
<span class="line-modified">!         new HexDumpEncoder().encodeBuffer(response, System.out);</span>
          byte[] challenge;
  
          while (!clnt.isComplete() || !srv.isComplete()) {
              challenge = srv.evaluateResponse(response);
              response = null;
              if (challenge != null) {
                  System.out.println(&quot;Challenge:&quot;);
<span class="line-modified">!                 new HexDumpEncoder().encodeBuffer(challenge, System.out);</span>
                  response = clnt.evaluateChallenge(challenge);
              }
              if (response != null) {
                  System.out.println(&quot;Response:&quot;);
<span class="line-modified">!                 new HexDumpEncoder().encodeBuffer(response, System.out);</span>
              }
          }
  
          if (clnt.isComplete() &amp;&amp; srv.isComplete()) {
              System.out.println(&quot;SUCCESS&quot;);
<span class="line-new-header">--- 311,24 ---</span>
          }
  
          byte[] response = (clnt.hasInitialResponse()
                  ? clnt.evaluateChallenge(EMPTY) : EMPTY);
          System.out.println(&quot;Initial:&quot;);
<span class="line-modified">!         HexPrinter.simple().format(response);</span>
          byte[] challenge;
  
          while (!clnt.isComplete() || !srv.isComplete()) {
              challenge = srv.evaluateResponse(response);
              response = null;
              if (challenge != null) {
                  System.out.println(&quot;Challenge:&quot;);
<span class="line-modified">!                 HexPrinter.simple().format(challenge);</span>
                  response = clnt.evaluateChallenge(challenge);
              }
              if (response != null) {
                  System.out.println(&quot;Response:&quot;);
<span class="line-modified">!                 HexPrinter.simple().format(response);</span>
              }
          }
  
          if (clnt.isComplete() &amp;&amp; srv.isComplete()) {
              System.out.println(&quot;SUCCESS&quot;);
</pre>
<center><a href="../../../jndi/ldap/Base64Test.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../java/lang/management/MemoryMXBean/CollectionUsageThreshold.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>