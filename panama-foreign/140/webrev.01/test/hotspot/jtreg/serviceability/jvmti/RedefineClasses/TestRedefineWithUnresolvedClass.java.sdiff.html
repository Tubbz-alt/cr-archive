<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/serviceability/jvmti/RedefineClasses/TestRedefineWithUnresolvedClass.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="TestRedefineObject.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../logging/TestBasicLogOutput.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/serviceability/jvmti/RedefineClasses/TestRedefineWithUnresolvedClass.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
61         launchTest();
62     }
63 
64     private static void buildJar(String jarName) throws Throwable {
65         String testSrc = System.getProperty(&quot;test.src&quot;, &quot;?&quot;) + slash;
66 
67         String jarPath = String.format(&quot;%s%s.jar&quot;, testClasses, jarName);
68         String manifestPath = String.format(&quot;%s%s.mf&quot;, testSrc, jarName);
69         String className = String.format(&quot;%s.class&quot;, jarName);
70 
71         String[] args = new String[] {&quot;-cfm&quot;, jarPath, manifestPath, &quot;-C&quot;, testClasses, className};
72 
73         System.out.println(&quot;Running jar &quot; + Arrays.toString(args));
74         sun.tools.jar.Main jarTool = new sun.tools.jar.Main(System.out, System.err, &quot;jar&quot;);
75         if (!jarTool.run(args)) {
76             throw new Exception(&quot;jar failed: args=&quot; + Arrays.toString(args));
77         }
78     }
79 
80     private static void launchTest() throws Throwable {
<span class="line-modified">81         String[] args = {</span>
82             &quot;-javaagent:&quot; + testClasses + &quot;UnresolvedClassAgent.jar&quot;,
83             &quot;-Dtest.classes=&quot; + testClasses,
<span class="line-modified">84             &quot;UnresolvedClassAgent&quot; };</span>
<span class="line-removed">85         OutputAnalyzer output = ProcessTools.executeTestJvm(args);</span>
86         output.shouldHaveExitValue(0);
87     }
88 }
</pre>
</td>
<td>
<hr />
<pre>
61         launchTest();
62     }
63 
64     private static void buildJar(String jarName) throws Throwable {
65         String testSrc = System.getProperty(&quot;test.src&quot;, &quot;?&quot;) + slash;
66 
67         String jarPath = String.format(&quot;%s%s.jar&quot;, testClasses, jarName);
68         String manifestPath = String.format(&quot;%s%s.mf&quot;, testSrc, jarName);
69         String className = String.format(&quot;%s.class&quot;, jarName);
70 
71         String[] args = new String[] {&quot;-cfm&quot;, jarPath, manifestPath, &quot;-C&quot;, testClasses, className};
72 
73         System.out.println(&quot;Running jar &quot; + Arrays.toString(args));
74         sun.tools.jar.Main jarTool = new sun.tools.jar.Main(System.out, System.err, &quot;jar&quot;);
75         if (!jarTool.run(args)) {
76             throw new Exception(&quot;jar failed: args=&quot; + Arrays.toString(args));
77         }
78     }
79 
80     private static void launchTest() throws Throwable {
<span class="line-modified">81         OutputAnalyzer output = ProcessTools.executeTestJvm(</span>
82             &quot;-javaagent:&quot; + testClasses + &quot;UnresolvedClassAgent.jar&quot;,
83             &quot;-Dtest.classes=&quot; + testClasses,
<span class="line-modified">84             &quot;UnresolvedClassAgent&quot;);</span>

85         output.shouldHaveExitValue(0);
86     }
87 }
</pre>
</td>
</tr>
</table>
<center><a href="TestRedefineObject.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../logging/TestBasicLogOutput.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>