<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/gc/stress/gclocker/TestExcessGCLockerCollections.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../gcbasher/TestGCBasherWithZ.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../survivorAlignment/TestAllocationInEden.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/gc/stress/gclocker/TestExcessGCLockerCollections.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
159     private static final String BAD_LOCKER = locker + &quot; [1-9][0-9]?M&quot;;
160 
161     private static final String[] COMMON_OPTIONS = new String[] {
162         &quot;-Xmx1G&quot;, &quot;-Xms1G&quot;, &quot;-Xmn256M&quot;, &quot;-Xlog:gc&quot; };
163 
164     public static void main(String args[]) throws Exception {
165         if (args.length &lt; 3) {
166             System.out.println(&quot;usage: TestExcessGCLockerCollectionsAux&quot; +
167                                &quot; &lt;duration sec&gt; &lt;alloc threads&gt;&quot; +
168                                &quot; &lt;jni critical threads&gt;&quot;);
169             throw new RuntimeException(&quot;Invalid arguments&quot;);
170         }
171 
172         ArrayList&lt;String&gt; finalArgs = new ArrayList&lt;String&gt;();
173         finalArgs.addAll(Arrays.asList(COMMON_OPTIONS));
174         finalArgs.add(TestExcessGCLockerCollectionsAux.class.getName());
175         finalArgs.addAll(Arrays.asList(args));
176 
177         // GC and other options obtained from test framework.
178         ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(
<span class="line-modified">179             true, finalArgs.toArray(new String[0]));</span>
180         OutputAnalyzer output = new OutputAnalyzer(pb.start());
181         output.shouldHaveExitValue(0);
182         //System.out.println(&quot;------------- begin stdout ----------------&quot;);
183         //System.out.println(output.getStdout());
184         //System.out.println(&quot;------------- end stdout ----------------&quot;);
185         output.stdoutShouldMatch(ANY_LOCKER);
186         output.stdoutShouldNotMatch(BAD_LOCKER);
187     }
188 }
</pre>
</td>
<td>
<hr />
<pre>
159     private static final String BAD_LOCKER = locker + &quot; [1-9][0-9]?M&quot;;
160 
161     private static final String[] COMMON_OPTIONS = new String[] {
162         &quot;-Xmx1G&quot;, &quot;-Xms1G&quot;, &quot;-Xmn256M&quot;, &quot;-Xlog:gc&quot; };
163 
164     public static void main(String args[]) throws Exception {
165         if (args.length &lt; 3) {
166             System.out.println(&quot;usage: TestExcessGCLockerCollectionsAux&quot; +
167                                &quot; &lt;duration sec&gt; &lt;alloc threads&gt;&quot; +
168                                &quot; &lt;jni critical threads&gt;&quot;);
169             throw new RuntimeException(&quot;Invalid arguments&quot;);
170         }
171 
172         ArrayList&lt;String&gt; finalArgs = new ArrayList&lt;String&gt;();
173         finalArgs.addAll(Arrays.asList(COMMON_OPTIONS));
174         finalArgs.add(TestExcessGCLockerCollectionsAux.class.getName());
175         finalArgs.addAll(Arrays.asList(args));
176 
177         // GC and other options obtained from test framework.
178         ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(
<span class="line-modified">179             true, finalArgs);</span>
180         OutputAnalyzer output = new OutputAnalyzer(pb.start());
181         output.shouldHaveExitValue(0);
182         //System.out.println(&quot;------------- begin stdout ----------------&quot;);
183         //System.out.println(output.getStdout());
184         //System.out.println(&quot;------------- end stdout ----------------&quot;);
185         output.stdoutShouldMatch(ANY_LOCKER);
186         output.stdoutShouldNotMatch(BAD_LOCKER);
187     }
188 }
</pre>
</td>
</tr>
</table>
<center><a href="../gcbasher/TestGCBasherWithZ.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../survivorAlignment/TestAllocationInEden.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>