<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/gc/TestVerifySubSet.java</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="TestVerifySilently.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="arguments/GCArguments.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/gc/TestVerifySubSet.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
39 import jdk.test.lib.Utils;
40 
41 class TestVerifySubSetRunSystemGC {
42     public static void main(String args[]) throws Exception {
43         System.gc();
44     }
45 }
46 
47 public class TestVerifySubSet {
48 
49     private static OutputAnalyzer runTest(String subset) throws Exception {
50         ArrayList&lt;String&gt; vmOpts = new ArrayList&lt;&gt;();
51 
52         Collections.addAll(vmOpts, Utils.getFilteredTestJavaOpts(&quot;-Xlog.*&quot;));
53         Collections.addAll(vmOpts, new String[] {&quot;-XX:+UnlockDiagnosticVMOptions&quot;,
54                                                  &quot;-XX:+VerifyBeforeGC&quot;,
55                                                  &quot;-XX:+VerifyAfterGC&quot;,
56                                                  &quot;-Xlog:gc+verify=debug&quot;,
57                                                  &quot;-XX:VerifySubSet=&quot;+subset,
58                                                  TestVerifySubSetRunSystemGC.class.getName()});
<span class="line-modified">59         ProcessBuilder pb =</span>
<span class="line-removed">60             ProcessTools.createJavaProcessBuilder(vmOpts.toArray(new String[vmOpts.size()]));</span>
61         OutputAnalyzer output = new OutputAnalyzer(pb.start());
62 
63         System.out.println(&quot;Output:\n&quot; + output.getOutput());
64         return output;
65     }
66 
67     public static void main(String args[]) throws Exception {
68 
69         OutputAnalyzer output;
70 
71         output = runTest(&quot;heap, threads, codecache, metaspace&quot;);
72         output.shouldContain(&quot;Heap&quot;);
73         output.shouldContain(&quot;Threads&quot;);
74         output.shouldContain(&quot;CodeCache&quot;);
75         output.shouldContain(&quot;MetaspaceUtils&quot;);
76         output.shouldNotContain(&quot;SymbolTable&quot;);
77         output.shouldNotContain(&quot;StringTable&quot;);
78         output.shouldNotContain(&quot;SystemDictionary&quot;);
79         output.shouldNotContain(&quot;CodeCache Oops&quot;);
80         output.shouldHaveExitValue(0);
</pre>
</td>
<td>
<hr />
<pre>
39 import jdk.test.lib.Utils;
40 
41 class TestVerifySubSetRunSystemGC {
42     public static void main(String args[]) throws Exception {
43         System.gc();
44     }
45 }
46 
47 public class TestVerifySubSet {
48 
49     private static OutputAnalyzer runTest(String subset) throws Exception {
50         ArrayList&lt;String&gt; vmOpts = new ArrayList&lt;&gt;();
51 
52         Collections.addAll(vmOpts, Utils.getFilteredTestJavaOpts(&quot;-Xlog.*&quot;));
53         Collections.addAll(vmOpts, new String[] {&quot;-XX:+UnlockDiagnosticVMOptions&quot;,
54                                                  &quot;-XX:+VerifyBeforeGC&quot;,
55                                                  &quot;-XX:+VerifyAfterGC&quot;,
56                                                  &quot;-Xlog:gc+verify=debug&quot;,
57                                                  &quot;-XX:VerifySubSet=&quot;+subset,
58                                                  TestVerifySubSetRunSystemGC.class.getName()});
<span class="line-modified">59         ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(vmOpts);</span>

60         OutputAnalyzer output = new OutputAnalyzer(pb.start());
61 
62         System.out.println(&quot;Output:\n&quot; + output.getOutput());
63         return output;
64     }
65 
66     public static void main(String args[]) throws Exception {
67 
68         OutputAnalyzer output;
69 
70         output = runTest(&quot;heap, threads, codecache, metaspace&quot;);
71         output.shouldContain(&quot;Heap&quot;);
72         output.shouldContain(&quot;Threads&quot;);
73         output.shouldContain(&quot;CodeCache&quot;);
74         output.shouldContain(&quot;MetaspaceUtils&quot;);
75         output.shouldNotContain(&quot;SymbolTable&quot;);
76         output.shouldNotContain(&quot;StringTable&quot;);
77         output.shouldNotContain(&quot;SystemDictionary&quot;);
78         output.shouldNotContain(&quot;CodeCache Oops&quot;);
79         output.shouldHaveExitValue(0);
</pre>
</td>
</tr>
</table>
<center><a href="TestVerifySilently.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="arguments/GCArguments.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>