<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/gc/g1/humongousObjects/TestNoAllocationsInHRegions.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="TestHumongousThreshold.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="TestObjectCollected.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/gc/g1/humongousObjects/TestNoAllocationsInHRegions.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 25 
 26 import jdk.test.lib.Utils;
 27 import sun.hotspot.WhiteBox;
 28 
 29 import static gc.testlibrary.Allocation.blackHole;
 30 
 31 import java.util.LinkedList;
 32 import java.util.List;
 33 import java.util.Random;
 34 import java.util.stream.Collectors;
 35 
 36 /**
 37  * @test TestNoAllocationsInHRegions
 38  * @key randomness
 39  * @summary Checks that no additional allocations are made in humongous regions
 40  * @requires vm.gc.G1
 41  * @library /test/lib /
 42  * @modules java.management java.base/jdk.internal.misc
 43  * @build sun.hotspot.WhiteBox
 44  * @run driver ClassFileInstaller sun.hotspot.WhiteBox
<span class="line-removed"> 45  *      sun.hotspot.WhiteBox$WhiteBoxPermission</span>
 46  *
 47  * @run main/othervm -XX:+UseG1GC -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xbootclasspath/a:.
 48  *                   -XX:G1HeapRegionSize=1M -Xms200m -Xmx200m -XX:MaxTenuringThreshold=0
 49  *                   -Xlog:gc=trace:file=TestNoAllocationsInHRegions10.log
 50  *                   gc.g1.humongousObjects.TestNoAllocationsInHRegions 30 10
 51  *
 52  * @run main/othervm -XX:+UseG1GC -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xbootclasspath/a:.
 53  *                   -XX:G1HeapRegionSize=1M -Xms200m -Xmx200m -XX:MaxTenuringThreshold=0
 54  *                   -Xlog:gc=trace:file=TestNoAllocationsInHRegions50.log
 55  *                   gc.g1.humongousObjects.TestNoAllocationsInHRegions 30 50
 56  *
 57  * @run main/othervm -XX:+UseG1GC -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xbootclasspath/a:.
 58  *                   -XX:G1HeapRegionSize=1M -Xms200m -Xmx200m -XX:MaxTenuringThreshold=0
 59  *                   -Xlog:gc=trace:file=TestNoAllocationsInHRegions70.log
 60  *                   gc.g1.humongousObjects.TestNoAllocationsInHRegions 30 70
 61  */
 62 public class TestNoAllocationsInHRegions {
 63     private static final WhiteBox WB = WhiteBox.getWhiteBox();
 64     private static final Random RND = Utils.getRandomInstance();
 65     private static final int G1_REGION_SIZE = WB.g1RegionSize();
</pre>
</td>
<td>
<hr />
<pre>
 25 
 26 import jdk.test.lib.Utils;
 27 import sun.hotspot.WhiteBox;
 28 
 29 import static gc.testlibrary.Allocation.blackHole;
 30 
 31 import java.util.LinkedList;
 32 import java.util.List;
 33 import java.util.Random;
 34 import java.util.stream.Collectors;
 35 
 36 /**
 37  * @test TestNoAllocationsInHRegions
 38  * @key randomness
 39  * @summary Checks that no additional allocations are made in humongous regions
 40  * @requires vm.gc.G1
 41  * @library /test/lib /
 42  * @modules java.management java.base/jdk.internal.misc
 43  * @build sun.hotspot.WhiteBox
 44  * @run driver ClassFileInstaller sun.hotspot.WhiteBox

 45  *
 46  * @run main/othervm -XX:+UseG1GC -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xbootclasspath/a:.
 47  *                   -XX:G1HeapRegionSize=1M -Xms200m -Xmx200m -XX:MaxTenuringThreshold=0
 48  *                   -Xlog:gc=trace:file=TestNoAllocationsInHRegions10.log
 49  *                   gc.g1.humongousObjects.TestNoAllocationsInHRegions 30 10
 50  *
 51  * @run main/othervm -XX:+UseG1GC -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xbootclasspath/a:.
 52  *                   -XX:G1HeapRegionSize=1M -Xms200m -Xmx200m -XX:MaxTenuringThreshold=0
 53  *                   -Xlog:gc=trace:file=TestNoAllocationsInHRegions50.log
 54  *                   gc.g1.humongousObjects.TestNoAllocationsInHRegions 30 50
 55  *
 56  * @run main/othervm -XX:+UseG1GC -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xbootclasspath/a:.
 57  *                   -XX:G1HeapRegionSize=1M -Xms200m -Xmx200m -XX:MaxTenuringThreshold=0
 58  *                   -Xlog:gc=trace:file=TestNoAllocationsInHRegions70.log
 59  *                   gc.g1.humongousObjects.TestNoAllocationsInHRegions 30 70
 60  */
 61 public class TestNoAllocationsInHRegions {
 62     private static final WhiteBox WB = WhiteBox.getWhiteBox();
 63     private static final Random RND = Utils.getRandomInstance();
 64     private static final int G1_REGION_SIZE = WB.g1RegionSize();
</pre>
</td>
</tr>
</table>
<center><a href="TestHumongousThreshold.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="TestObjectCollected.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>