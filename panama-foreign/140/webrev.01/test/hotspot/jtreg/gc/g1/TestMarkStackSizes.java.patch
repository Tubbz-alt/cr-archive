diff a/test/hotspot/jtreg/gc/g1/TestMarkStackSizes.java b/test/hotspot/jtreg/gc/g1/TestMarkStackSizes.java
--- a/test/hotspot/jtreg/gc/g1/TestMarkStackSizes.java
+++ b/test/hotspot/jtreg/gc/g1/TestMarkStackSizes.java
@@ -30,11 +30,11 @@
  * @summary Consistency checks for marking flag related options.
  * @requires vm.gc.G1
  * @library /test/lib
  * @modules java.base/jdk.internal.misc
  *          java.management
- * @run main gc.g1.TestMarkStackSizes
+ * @run driver gc.g1.TestMarkStackSizes
  */
 
 import java.util.ArrayList;
 import java.util.Collections;
 
@@ -49,11 +49,11 @@
         testArguments.add("-Xmx12m");
         testArguments.add("-XX:+PrintFlagsFinal");
         Collections.addAll(testArguments, extraArgs);
         testArguments.add("-version");
 
-        ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(testArguments.toArray(new String[0]));
+        ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(testArguments);
 
         OutputAnalyzer output = new OutputAnalyzer(pb.start());
 
         System.out.println(output.getStderr());
 
