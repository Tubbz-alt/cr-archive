<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/vmTestbase/vm/mlvm/share/MlvmTestExecutor.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="MlvmTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../share/RandomEx.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/vmTestbase/vm/mlvm/share/MlvmTestExecutor.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2014, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
</pre>
<hr />
<pre>
339                 }
340                 passed = false;
341             }
342 
343         } catch (Throwable e) {
344             Env.complain(e, &quot;TEST BUG: exception thrown when instantiating/preparing test for run&quot;);
345             exception = e;
346             passed = false; // never really needed, but let&#39;s keep it
347         }
348 
349         if (exception != null) {
350             Env.throwAsUncheckedException(exception); // always throws
351         }
352 
353         return passed;
354     }
355 
356     private static void setupMlvmTest(MlvmTest instance) {
357         MlvmTest.setInstance(instance);
358         OptionSupport.setup(instance, Env.getArgParser().getRawArguments(), new IgnoreUnknownArgumentsHandler());
<span class="line-removed">359         instance.initRNG();</span>
360     }
361 
362     private static boolean runMlvmTestInstance(MlvmTest instance) throws Throwable {
363         List&lt;Class&lt;? extends Throwable&gt;&gt; expectedExceptions = instance.getRequiredExceptions();
364         int runsCount = instance.getRunsNumber() * instance.getStressOptions().getRunsFactor();
365         if (runsCount &lt; 1) {
366             throw new RuntimeException(&quot;Runs number obtained via command-line options is less than 1&quot;);
367         }
368 
369         int failedRuns = 0;
370 
371         try {
372             for (int run = 1; run &lt;= runsCount; ++run) {
373                 if (runsCount &gt; 1) {
374                     Env.traceNormal(&quot;TEST RUN &quot; + run + &quot;/&quot; + runsCount + &quot;; Failed &quot; + failedRuns + &quot; runs&quot;);
375                 }
376 
377                 if (run &gt; 1) {
378                     instance.resetTest();
379                 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2014, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
</pre>
<hr />
<pre>
339                 }
340                 passed = false;
341             }
342 
343         } catch (Throwable e) {
344             Env.complain(e, &quot;TEST BUG: exception thrown when instantiating/preparing test for run&quot;);
345             exception = e;
346             passed = false; // never really needed, but let&#39;s keep it
347         }
348 
349         if (exception != null) {
350             Env.throwAsUncheckedException(exception); // always throws
351         }
352 
353         return passed;
354     }
355 
356     private static void setupMlvmTest(MlvmTest instance) {
357         MlvmTest.setInstance(instance);
358         OptionSupport.setup(instance, Env.getArgParser().getRawArguments(), new IgnoreUnknownArgumentsHandler());

359     }
360 
361     private static boolean runMlvmTestInstance(MlvmTest instance) throws Throwable {
362         List&lt;Class&lt;? extends Throwable&gt;&gt; expectedExceptions = instance.getRequiredExceptions();
363         int runsCount = instance.getRunsNumber() * instance.getStressOptions().getRunsFactor();
364         if (runsCount &lt; 1) {
365             throw new RuntimeException(&quot;Runs number obtained via command-line options is less than 1&quot;);
366         }
367 
368         int failedRuns = 0;
369 
370         try {
371             for (int run = 1; run &lt;= runsCount; ++run) {
372                 if (runsCount &gt; 1) {
373                     Env.traceNormal(&quot;TEST RUN &quot; + run + &quot;/&quot; + runsCount + &quot;; Failed &quot; + failedRuns + &quot; runs&quot;);
374                 }
375 
376                 if (run &gt; 1) {
377                     instance.resetTest();
378                 }
</pre>
</td>
</tr>
</table>
<center><a href="MlvmTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../share/RandomEx.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>