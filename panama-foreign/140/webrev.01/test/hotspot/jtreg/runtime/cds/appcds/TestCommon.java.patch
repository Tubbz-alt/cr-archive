diff a/test/hotspot/jtreg/runtime/cds/appcds/TestCommon.java b/test/hotspot/jtreg/runtime/cds/appcds/TestCommon.java
--- a/test/hotspot/jtreg/runtime/cds/appcds/TestCommon.java
+++ b/test/hotspot/jtreg/runtime/cds/appcds/TestCommon.java
@@ -236,12 +236,11 @@
             for (String s : opts.suffix) {
                 cmd.add(s);
             }
         }
 
-        String[] cmdLine = cmd.toArray(new String[cmd.size()]);
-        ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(true, cmdLine);
+        ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(true, cmd);
         if (opts.appJarDir != null) {
             pb.directory(new File(opts.appJarDir));
         }
 
         OutputAnalyzer output = executeAndLog(pb, "dump");
@@ -383,12 +382,11 @@
                 cmd.add(0, "-XX:StartFlightRecording=dumponexit=true");
                 System.out.println(cmd);
             }
         }
 
-        String[] cmdLine = cmd.toArray(new String[cmd.size()]);
-        ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(true, cmdLine);
+        ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(true, cmd);
         if (opts.appJarDir != null) {
             pb.directory(new File(opts.appJarDir));
         }
         return executeAndLog(pb, "exec");
     }
