<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/CompileDemos.gmk</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="../doc/testing.md.cdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="CompileInterimLangtools.gmk.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/CompileDemos.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 31,11 ***</span>
  
  include $(SPEC)
  include MakeBase.gmk
  include JavaCompilation.gmk
  include NativeCompilation.gmk
<span class="line-removed">- include SetupJavaCompilers.gmk</span>
  include TextFileProcessing.gmk
  include ZipArchive.gmk
  
  # Hook to include the corresponding custom file, if present.
  $(eval $(call IncludeCustomExtension, CompileDemos-pre.gmk))
<span class="line-new-header">--- 31,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 91,11 ***</span>
  # MAIN_CLASS   The main class for the jar. Defaults to $1.
  # EXTRA_COPY_TO_JAR   Additional files to copy to jar (as patterns)
  # EXTRA_COPY_TO_IMAGE   Additional files to copy to images (as wildcards)
  # EXTRA_MANIFEST_ATTR   Extra manifest attribute
  # SKIP_COMPILATION   Skip Java compilation iff true
<span class="line-removed">- # DISABLE_SJAVAC   Passed to SetupJavaCompilation</span>
  # DISABLED_WARNINGS Additional disabled warnings
  SetupBuildDemo = $(NamedParamsMacroTemplate)
  define SetupBuildDemoBody
    ifeq ($$($1_SRC_DIR), )
      $1_SRC_DIR := $(DEMO_SHARE_SRC)
<span class="line-new-header">--- 90,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 124,22 ***</span>
      $1_EXTRA_MANIFEST_ATTR += Main-Class: \n
    endif
  
    ifneq ($$($1_SKIP_COMPILATION), true)
      $$(eval $$(call SetupJavaCompilation, BUILD_DEMO_$1, \
<span class="line-modified">!         SETUP := GENERATE_USINGJDKBYTECODE, \</span>
          SRC := $$($1_MAIN_SRC) $$($1_EXTRA_SRC_DIR), \
          BIN := $(SUPPORT_OUTPUTDIR)/demos/classes/$$($1_DEMO_SUBDIR)/$1, \
          COPY := $(COPY_TO_JAR) $$($1_EXTRA_COPY_TO_JAR), \
          JAR := $(SUPPORT_OUTPUTDIR)/demos/image/$$($1_DEMO_SUBDIR)/$1/$$($1_JAR_NAME).jar, \
          JARMAIN := $$($1_MAIN_CLASS), \
          MANIFEST := $(DEMO_MANIFEST), \
          EXTRA_MANIFEST_ATTR := $$($1_EXTRA_MANIFEST_ATTR), \
          SRCZIP := $(SUPPORT_OUTPUTDIR)/demos/image/$$($1_DEMO_SUBDIR)/$1/src.zip, \
          EXCLUDE_FILES := $$($1_EXCLUDE_FILES), \
          DISABLED_WARNINGS := $$($1_DISABLED_WARNINGS), \
<span class="line-removed">-         DISABLE_SJAVAC := $$($1_DISABLE_SJAVAC), \</span>
      ))
  
      $1 += $$(BUILD_DEMO_$1)
    endif
  
<span class="line-new-header">--- 122,21 ---</span>
      $1_EXTRA_MANIFEST_ATTR += Main-Class: \n
    endif
  
    ifneq ($$($1_SKIP_COMPILATION), true)
      $$(eval $$(call SetupJavaCompilation, BUILD_DEMO_$1, \
<span class="line-modified">!         TARGET_RELEASE := $(TARGET_RELEASE_NEWJDK_UPGRADED), \</span>
          SRC := $$($1_MAIN_SRC) $$($1_EXTRA_SRC_DIR), \
          BIN := $(SUPPORT_OUTPUTDIR)/demos/classes/$$($1_DEMO_SUBDIR)/$1, \
          COPY := $(COPY_TO_JAR) $$($1_EXTRA_COPY_TO_JAR), \
          JAR := $(SUPPORT_OUTPUTDIR)/demos/image/$$($1_DEMO_SUBDIR)/$1/$$($1_JAR_NAME).jar, \
          JARMAIN := $$($1_MAIN_CLASS), \
          MANIFEST := $(DEMO_MANIFEST), \
          EXTRA_MANIFEST_ATTR := $$($1_EXTRA_MANIFEST_ATTR), \
          SRCZIP := $(SUPPORT_OUTPUTDIR)/demos/image/$$($1_DEMO_SUBDIR)/$1/src.zip, \
          EXCLUDE_FILES := $$($1_EXCLUDE_FILES), \
          DISABLED_WARNINGS := $$($1_DISABLED_WARNINGS), \
      ))
  
      $1 += $$(BUILD_DEMO_$1)
    endif
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 181,11 ***</span>
  $(eval $(call SetupBuildDemo, SwingSet2, \
      DEMO_SUBDIR := jfc, \
      EXTRA_COPY_TO_JAR := .java, \
      EXTRA_MANIFEST_ATTR := SplashScreen-Image: resources/images/splash.png, \
      DISABLED_WARNINGS := rawtypes deprecation unchecked static serial cast, \
<span class="line-removed">-     DISABLE_SJAVAC := true, \</span>
  ))
  
  $(eval $(call SetupBuildDemo, Font2DTest, \
      DISABLED_WARNINGS := rawtypes deprecation unchecked serial cast, \
      DEMO_SUBDIR := jfc, \
<span class="line-new-header">--- 178,10 ---</span>
</pre>
<center><a href="../doc/testing.md.cdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="CompileInterimLangtools.gmk.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>