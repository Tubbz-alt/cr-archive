<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/test/JtregGraalUnit.gmk</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="BuildTestLib.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../../src/hotspot/cpu/aarch64/aarch64.ad.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/test/JtregGraalUnit.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 31,11 ***</span>
  
  default: all
  
  include $(SPEC)
  include MakeBase.gmk
<span class="line-modified">! include SetupJavaCompilers.gmk</span>
  
  TARGETS_BUILD :=
  TARGETS_IMAGE :=
  TARGETS_EXTRA_LIB :=
  
<span class="line-new-header">--- 31,11 ---</span>
  
  default: all
  
  include $(SPEC)
  include MakeBase.gmk
<span class="line-modified">! include JavaCompilation.gmk</span>
  
  TARGETS_BUILD :=
  TARGETS_IMAGE :=
  TARGETS_EXTRA_LIB :=
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 63,10 ***</span>
<span class="line-new-header">--- 63,12 ---</span>
        TEST_JAVAC_FLAGS := \
            -processorpath $(BUILDTOOLS_OUTPUTDIR)/jdk.vm.compiler.replacements.verifier.jar \
            --add-exports jdk.unsupported/sun.misc=ALL-UNNAMED \
            --add-exports java.base/jdk.internal.misc=ALL-UNNAMED \
            --add-exports java.base/jdk.internal.module=ALL-UNNAMED \
<span class="line-added">+           -Xprefer:newer \</span>
<span class="line-added">+           #</span>
  
        ### Copy 3rd party libs
        $(eval $(call SetupCopyFiles, COPY_GRAALUNIT_LIBS, \
            FILES := $(wildcard $(GRAALUNIT_LIB)/*.jar), \
            DEST := $(LIB_OUTPUTDIR), \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 74,11 ***</span>
  
        TARGETS_EXTRA_LIB += $(COPY_GRAALUNIT_LIBS)
  
        ### Compile graalunit tests
        $(eval $(call SetupJavaCompilation, BUILD_VM_COMPILER_TESTS, \
<span class="line-modified">!           SETUP := GENERATE_USINGJDKBYTECODE, \</span>
            SRC := \
                $(SRC_DIR)/jdk.internal.vm.compiler.collections.test/src \
                $(SRC_DIR)/org.graalvm.compiler.api.directives.test/src \
                $(SRC_DIR)/org.graalvm.compiler.api.test/src \
                $(SRC_DIR)/org.graalvm.compiler.asm.aarch64.test/src \
<span class="line-new-header">--- 76,11 ---</span>
  
        TARGETS_EXTRA_LIB += $(COPY_GRAALUNIT_LIBS)
  
        ### Compile graalunit tests
        $(eval $(call SetupJavaCompilation, BUILD_VM_COMPILER_TESTS, \
<span class="line-modified">!           TARGET_RELEASE := $(TARGET_RELEASE_NEWJDK_UPGRADED), \</span>
            SRC := \
                $(SRC_DIR)/jdk.internal.vm.compiler.collections.test/src \
                $(SRC_DIR)/org.graalvm.compiler.api.directives.test/src \
                $(SRC_DIR)/org.graalvm.compiler.api.test/src \
                $(SRC_DIR)/org.graalvm.compiler.asm.aarch64.test/src \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 91,10 ***</span>
<span class="line-new-header">--- 93,11 ---</span>
                $(SRC_DIR)/org.graalvm.compiler.core.test/src \
                $(SRC_DIR)/org.graalvm.compiler.debug.test/src \
                $(SRC_DIR)/org.graalvm.compiler.graph.test/src \
                $(SRC_DIR)/org.graalvm.compiler.hotspot.aarch64.test/src \
                $(SRC_DIR)/org.graalvm.compiler.hotspot.amd64.test/src \
<span class="line-added">+               $(SRC_DIR)/org.graalvm.compiler.hotspot.jdk15.test/src \</span>
                $(SRC_DIR)/org.graalvm.compiler.hotspot.jdk9.test/src \
                $(SRC_DIR)/org.graalvm.compiler.hotspot.lir.test/src \
                $(SRC_DIR)/org.graalvm.compiler.hotspot.sparc.test/src \
                $(SRC_DIR)/org.graalvm.compiler.hotspot.test/src \
                $(SRC_DIR)/org.graalvm.compiler.jtt/src \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 112,32 ***</span>
                , \
            EXCLUDE_FILES := org/graalvm/compiler/core/test/VerifyDebugUsageTest.java, \
            BIN := $(COMPILE_OUTPUTDIR)/jdk.vm.compiler.tests, \
            CLASSPATH := $(TEST_COMPILE_CP), \
            DISABLED_WARNINGS := processing, \
<span class="line-modified">!           ADD_JAVAC_FLAGS := $(TEST_JAVAC_FLAGS), \</span>
            COPY := .input, \
        ))
  
        TARGETS_BUILD += $(BUILD_VM_COMPILER_TESTS)
  
        ### Compile graalunit tests which require -XDstringConcat=inline
        $(eval $(call SetupJavaCompilation, BUILD_VM_COMPILER_TESTS_SET2, \
<span class="line-modified">!           SETUP := GENERATE_USINGJDKBYTECODE, \</span>
            DEPENDS := $(BUILD_VM_COMPILER_TESTS), \
            SRC := $(SRC_DIR)/org.graalvm.compiler.core.test/src, \
            INCLUDE_FILES := org/graalvm/compiler/core/test/VerifyDebugUsageTest.java, \
            BIN := $(COMPILE_OUTPUTDIR)/jdk.vm.compiler.tests, \
            CLASSPATH := \
                $(TEST_COMPILE_CP) \
<span class="line-modified">!               $(COMPILE_OUTPUTDIR)/jdk.vm.compiler.tests \</span>
<span class="line-removed">-               , \</span>
            DISABLED_WARNINGS := processing, \
<span class="line-modified">!           ADD_JAVAC_FLAGS := \</span>
<span class="line-removed">-               $(TEST_JAVAC_FLAGS) \</span>
<span class="line-removed">-               -XDstringConcat=inline \</span>
<span class="line-removed">-               , \</span>
        ))
  
        TARGETS_BUILD += $(BUILD_VM_COMPILER_TESTS_SET2)
  
        ### Generate jdk.vm.compiler.tests.jar
<span class="line-new-header">--- 115,28 ---</span>
                , \
            EXCLUDE_FILES := org/graalvm/compiler/core/test/VerifyDebugUsageTest.java, \
            BIN := $(COMPILE_OUTPUTDIR)/jdk.vm.compiler.tests, \
            CLASSPATH := $(TEST_COMPILE_CP), \
            DISABLED_WARNINGS := processing, \
<span class="line-modified">!           JAVAC_FLAGS := $(TEST_JAVAC_FLAGS), \</span>
            COPY := .input, \
        ))
  
        TARGETS_BUILD += $(BUILD_VM_COMPILER_TESTS)
  
        ### Compile graalunit tests which require -XDstringConcat=inline
        $(eval $(call SetupJavaCompilation, BUILD_VM_COMPILER_TESTS_SET2, \
<span class="line-modified">!           TARGET_RELEASE := $(TARGET_RELEASE_NEWJDK_UPGRADED), \</span>
            DEPENDS := $(BUILD_VM_COMPILER_TESTS), \
            SRC := $(SRC_DIR)/org.graalvm.compiler.core.test/src, \
            INCLUDE_FILES := org/graalvm/compiler/core/test/VerifyDebugUsageTest.java, \
            BIN := $(COMPILE_OUTPUTDIR)/jdk.vm.compiler.tests, \
            CLASSPATH := \
                $(TEST_COMPILE_CP) \
<span class="line-modified">!               $(COMPILE_OUTPUTDIR)/jdk.vm.compiler.tests, \</span>
            DISABLED_WARNINGS := processing, \
<span class="line-modified">!           JAVAC_FLAGS := $(TEST_JAVAC_FLAGS) -XDstringConcat=inline, \</span>
        ))
  
        TARGETS_BUILD += $(BUILD_VM_COMPILER_TESTS_SET2)
  
        ### Generate jdk.vm.compiler.tests.jar
</pre>
<hr />
<pre>
<span class="line-old-header">*** 150,11 ***</span>
  
        TARGETS_BUILD += $(BUILD_VM_COMPILER_TESTS_JAR)
  
        ### Compile and build mxtool
        $(eval $(call SetupJavaCompilation, BUILD_MXTOOL, \
<span class="line-modified">!           SETUP := GENERATE_USINGJDKBYTECODE, \</span>
            SRC := $(TEST_DIR)/com.oracle.mxtool.junit, \
            BIN := $(COMPILE_OUTPUTDIR)/com.oracle.mxtool.junit, \
            JAR := $(COMPILE_OUTPUTDIR)/com.oracle.mxtool.junit.jar, \
            DISABLED_WARNINGS := processing, \
            CLASSPATH := $(LIB_OUTPUTDIR)/junit-4.12.jar, \
<span class="line-new-header">--- 149,11 ---</span>
  
        TARGETS_BUILD += $(BUILD_VM_COMPILER_TESTS_JAR)
  
        ### Compile and build mxtool
        $(eval $(call SetupJavaCompilation, BUILD_MXTOOL, \
<span class="line-modified">!           TARGET_RELEASE := $(TARGET_RELEASE_NEWJDK_UPGRADED), \</span>
            SRC := $(TEST_DIR)/com.oracle.mxtool.junit, \
            BIN := $(COMPILE_OUTPUTDIR)/com.oracle.mxtool.junit, \
            JAR := $(COMPILE_OUTPUTDIR)/com.oracle.mxtool.junit.jar, \
            DISABLED_WARNINGS := processing, \
            CLASSPATH := $(LIB_OUTPUTDIR)/junit-4.12.jar, \
</pre>
<center><a href="BuildTestLib.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../../src/hotspot/cpu/aarch64/aarch64.ad.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>