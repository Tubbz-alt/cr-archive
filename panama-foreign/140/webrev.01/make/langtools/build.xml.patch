diff a/make/langtools/build.xml b/make/langtools/build.xml
--- a/make/langtools/build.xml
+++ b/make/langtools/build.xml
@@ -86,25 +86,15 @@
     <dirset id="src.module.dirset" dir="${src.dir}" includes="${module.names}"/>
 
     <pathconvert pathsep="," property="src.module.dirs" refid="src.module.dirset"/>
 
     <pathconvert property="xpatch.rest" pathsep=" --patch-module=" refid="src.module.dirset">
-        <scriptmapper language="javascript">
-            fs = project.getProperty("file.separator");
-            path = project.getProperty("build.modules");
-            mod = source.substr(source.lastIndexOf(fs)+1);
-            self.addMappedName(mod + "=\"" + path + fs + mod + "\"");
-        </scriptmapper>
+        <regexpmapper from="^.*(/|\\)([^/\\]*)$" to='\2="${build.modules}\1\2"' />
     </pathconvert>
 
     <pathconvert property="xpatch.noquotes.rest" pathsep=" --patch-module=" refid="src.module.dirset">
-        <scriptmapper language="javascript">
-            fs = project.getProperty("file.separator");
-            path = project.getProperty("build.modules");
-            mod = source.substr(source.lastIndexOf(fs)+1);
-            self.addMappedName(mod + "=" + path + fs + mod);
-        </scriptmapper>
+        <regexpmapper from="^([^/\\]*)(/|\\).*" to="\1=${build.modules}\2\1" />
     </pathconvert>
 
     <property name="xpatch.cmd" value="--patch-module=${xpatch.rest}"/>
     <property name="xpatch.noquotes.cmd" value="--patch-module=${xpatch.noquotes.rest}"/>
 
@@ -210,18 +200,11 @@
         </subant>
     </target>
 
     <target name="build-all-classes" depends="generate-sources">
         <pathconvert property="xpatch.src.rest" pathsep=" --patch-module=" refid="src.module.dirset">
-            <scriptmapper language="javascript">
-                fs = project.getProperty("file.separator");
-                path_src = project.getProperty("src.dir");
-                path_sep = project.getProperty("path.separator");
-                path_gensrc = project.getProperty("build.gensrc");
-                mod = source.substr(source.lastIndexOf(fs)+1);
-                self.addMappedName(mod + "=" + path_src + fs + mod + path_sep + path_gensrc + fs + mod);
-            </scriptmapper>
+            <regexpmapper from="^.*(/|\\)([^/\\]*)$" to="\2=${src.dir}\1\2/share/classes${path.separator}${build.gensrc}\1\2" />
         </pathconvert>
         <property name="xpatch.src.cmd" value="--patch-module=${xpatch.src.rest}"/>
         <pathconvert pathsep="," property="gensrc.module.dirs">
             <dirset dir="${build.gensrc}" includes="${module.names}"/>
         </pathconvert>
