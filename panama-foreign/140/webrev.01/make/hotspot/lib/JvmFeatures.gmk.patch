diff a/make/hotspot/lib/JvmFeatures.gmk b/make/hotspot/lib/JvmFeatures.gmk
--- a/make/hotspot/lib/JvmFeatures.gmk
+++ b/make/hotspot/lib/JvmFeatures.gmk
@@ -53,10 +53,14 @@
   ifeq ($(call isTargetCpu, sparcv9), true)
     BUILD_LIBJVM_EXTRA_FILES := $(TOPDIR)/src/hotspot/cpu/sparc/memset_with_concurrent_readers_sparc.cpp
   endif
 endif
 
+ifeq ($(JVM_VARIANT), custom)
+  JVM_CFLAGS_FEATURES += -DVMTYPE=\"Custom\"
+endif
+
 ifeq ($(call check-jvm-feature, minimal), true)
   JVM_CFLAGS_FEATURES += -DMINIMAL_JVM -DVMTYPE=\"Minimal\"
   ifeq ($(call isTargetOs, linux), true)
     # Override the default -g with a more liberal strip policy for the minimal JVM
     JVM_STRIPFLAGS := --strip-unneeded
@@ -149,12 +153,10 @@
 endif
 
 ifneq ($(call check-jvm-feature, serialgc), true)
   JVM_CFLAGS_FEATURES += -DINCLUDE_SERIALGC=0
   JVM_EXCLUDE_PATTERNS += gc/serial
-  # If serial is disabled, we cannot use serial as OldGC in parallel
-  JVM_EXCLUDE_FILES += psMarkSweep.cpp psMarkSweepDecorator.cpp
 endif
 
 ifneq ($(call check-jvm-feature, epsilongc), true)
   JVM_CFLAGS_FEATURES += -DINCLUDE_EPSILONGC=0
   JVM_EXCLUDE_PATTERNS += gc/epsilon
