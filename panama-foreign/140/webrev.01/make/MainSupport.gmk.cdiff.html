<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/MainSupport.gmk</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="Main.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="ModuleTools.gmk.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/MainSupport.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  #
<span class="line-modified">! # Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  #
<span class="line-modified">! # Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 127,22 ***</span>
  # Param 2: Module name
  define DeclareRecipeForModuleMakefile
    $2-$$($1_TARGET_SUFFIX):
          ifeq ($$($1_USE_WRAPPER), true)
  	  +($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) \
<span class="line-modified">! 	      -f ModuleWrapper.gmk \</span>
  	      $$(addprefix -I, $$(PHASE_MAKEDIRS) \
<span class="line-modified">! 	          $$(addsuffix /$$($1_MAKE_SUBDIR), $$(PHASE_MAKEDIRS)) \</span>
  	      ) \
  	      MODULE=$2 MAKEFILE_PREFIX=$$($1_FILE_PREFIX) $$($1_EXTRA_ARGS))
          else
<span class="line-modified">! 	  +($(CD) $$(dir $$(firstword $$(wildcard $$(addsuffix \</span>
<span class="line-removed">- 	      /$$($1_MAKE_SUBDIR)/$$($1_FILE_PREFIX)-$2.gmk, $$(PHASE_MAKEDIRS))))) \</span>
  	  &amp;&amp; $(MAKE) $(MAKE_ARGS) \
<span class="line-modified">! 	      -f $$($1_FILE_PREFIX)-$2.gmk \</span>
  	      $$(addprefix -I, $$(PHASE_MAKEDIRS) \
<span class="line-modified">! 	          $$(addsuffix /$$($1_MAKE_SUBDIR), $$(PHASE_MAKEDIRS)) \</span>
  	      ) \
  	      MODULE=$2 $$($1_EXTRA_ARGS) \
  	  )
          endif
  
<span class="line-new-header">--- 127,21 ---</span>
  # Param 2: Module name
  define DeclareRecipeForModuleMakefile
    $2-$$($1_TARGET_SUFFIX):
          ifeq ($$($1_USE_WRAPPER), true)
  	  +($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) \
<span class="line-modified">! 	      -f ModuleWrapper.gmk -I $$(TOPDIR)/make/common/modules  \</span>
  	      $$(addprefix -I, $$(PHASE_MAKEDIRS) \
<span class="line-modified">! 	          $$(addsuffix /modules/$2, $$(PHASE_MAKEDIRS)) \</span>
  	      ) \
  	      MODULE=$2 MAKEFILE_PREFIX=$$($1_FILE_PREFIX) $$($1_EXTRA_ARGS))
          else
<span class="line-modified">! 	  +($(CD) $$(TOPDIR)/make \</span>
  	  &amp;&amp; $(MAKE) $(MAKE_ARGS) \
<span class="line-modified">! 	      -f modules/$2/$$($1_FILE_PREFIX).gmk -I $$(TOPDIR)/make/common/modules \</span>
  	      $$(addprefix -I, $$(PHASE_MAKEDIRS) \
<span class="line-modified">! 	          $$(addsuffix /modules/$2, $$(PHASE_MAKEDIRS)) \</span>
  	      ) \
  	      MODULE=$2 $$($1_EXTRA_ARGS) \
  	  )
          endif
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 151,11 ***</span>
  # Helper macro for DeclareRecipesForPhase
  # Param 1: Name of list to add targets to
  # Param 2: Module name
  define DeclareRecipesForPhaseAndModule
    $1_$2_MAKEFILES := $$(strip $$(wildcard \
<span class="line-modified">!       $$(addsuffix /$$($1_MAKE_SUBDIR)/$$($1_FILE_PREFIX)-$2.gmk, $$(PHASE_MAKEDIRS))))</span>
  
    # Only declare recipes if there are makefiles to call
    ifneq ($$($1_$2_MAKEFILES), )
      # Add the top dir specific target to target list regardless of if recipe
      # generation is disabled.
<span class="line-new-header">--- 150,11 ---</span>
  # Helper macro for DeclareRecipesForPhase
  # Param 1: Name of list to add targets to
  # Param 2: Module name
  define DeclareRecipesForPhaseAndModule
    $1_$2_MAKEFILES := $$(strip $$(wildcard \
<span class="line-modified">!       $$(addsuffix /modules/$2/$$($1_FILE_PREFIX).gmk, $$(PHASE_MAKEDIRS))))</span>
  
    # Only declare recipes if there are makefiles to call
    ifneq ($$($1_$2_MAKEFILES), )
      # Add the top dir specific target to target list regardless of if recipe
      # generation is disabled.
</pre>
<center><a href="Main.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="ModuleTools.gmk.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>