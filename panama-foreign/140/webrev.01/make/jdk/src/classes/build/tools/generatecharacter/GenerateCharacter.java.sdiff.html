<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/jdk/src/classes/build/tools/generatecharacter/GenerateCharacter.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../idea/build.xml.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../jigsaw/AddPackagesAttribute.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/jdk/src/classes/build/tools/generatecharacter/GenerateCharacter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2002, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 683     * Macro calls to be replaced are indicated in the template file by
 684     * occurrences of the commandMarker &quot;$$&quot;.  The rest of the call may consist
 685     * of Java letters (including the underscore &quot;_&quot;) and also of balanced
 686     * parentheses.
 687     *
 688     * @param theTemplateFileName
 689     *           the file name for the template input file
 690     * @param theOutputFileName
 691     *           the file name for the source code output file
 692     *
 693     *     @see GenerateCharacter#replaceCommand
 694     */
 695 
 696     static void generateCharacterClass(String theTemplateFileName,
 697                                        String theOutputFileName)
 698         throws FileNotFoundException, IOException {
 699         BufferedReader in = new BufferedReader(new FileReader(theTemplateFileName));
 700         PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter(theOutputFileName)));
 701         out.println(commentStart +
 702             &quot; This file was generated AUTOMATICALLY from a template file &quot; +
<span class="line-modified"> 703             new java.util.Date() + commentEnd);</span>
 704         int marklen = commandMarker.length();
 705         LOOP: while(true) {
 706             try {
 707                 String line = in.readLine();
 708                 if (line == null) break LOOP;
 709                 int pos = 0;
 710                 int depth = 0;
 711                 while ((pos = line.indexOf(commandMarker, pos)) &gt;= 0) {
 712                     int newpos = pos + marklen;
 713                     char ch = &#39;x&#39;;
 714                     SCAN: while (newpos &lt; line.length() &amp;&amp;
 715                             (Character.isJavaIdentifierStart(ch = line.charAt(newpos))
 716                             || ch == &#39;(&#39; || (ch == &#39;)&#39; &amp;&amp; depth &gt; 0))) {
 717                         ++newpos;
 718                         if (ch == &#39;(&#39;) {
 719                             ++depth;
 720                         }
 721                         else if (ch == &#39;)&#39;) {
 722                             --depth;
 723                             if (depth == 0)
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2002, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 683     * Macro calls to be replaced are indicated in the template file by
 684     * occurrences of the commandMarker &quot;$$&quot;.  The rest of the call may consist
 685     * of Java letters (including the underscore &quot;_&quot;) and also of balanced
 686     * parentheses.
 687     *
 688     * @param theTemplateFileName
 689     *           the file name for the template input file
 690     * @param theOutputFileName
 691     *           the file name for the source code output file
 692     *
 693     *     @see GenerateCharacter#replaceCommand
 694     */
 695 
 696     static void generateCharacterClass(String theTemplateFileName,
 697                                        String theOutputFileName)
 698         throws FileNotFoundException, IOException {
 699         BufferedReader in = new BufferedReader(new FileReader(theTemplateFileName));
 700         PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter(theOutputFileName)));
 701         out.println(commentStart +
 702             &quot; This file was generated AUTOMATICALLY from a template file &quot; +
<span class="line-modified"> 703             commentEnd);</span>
 704         int marklen = commandMarker.length();
 705         LOOP: while(true) {
 706             try {
 707                 String line = in.readLine();
 708                 if (line == null) break LOOP;
 709                 int pos = 0;
 710                 int depth = 0;
 711                 while ((pos = line.indexOf(commandMarker, pos)) &gt;= 0) {
 712                     int newpos = pos + marklen;
 713                     char ch = &#39;x&#39;;
 714                     SCAN: while (newpos &lt; line.length() &amp;&amp;
 715                             (Character.isJavaIdentifierStart(ch = line.charAt(newpos))
 716                             || ch == &#39;(&#39; || (ch == &#39;)&#39; &amp;&amp; depth &gt; 0))) {
 717                         ++newpos;
 718                         if (ch == &#39;(&#39;) {
 719                             ++depth;
 720                         }
 721                         else if (ch == &#39;)&#39;) {
 722                             --depth;
 723                             if (depth == 0)
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../idea/build.xml.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../jigsaw/AddPackagesAttribute.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>