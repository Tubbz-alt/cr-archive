<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/CompileJavaModules.gmk</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="CompileInterimLangtools.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="CompileModuleTools.gmk.udiff.html" target="_top">next &gt;</a></center>    <h2>make/CompileJavaModules.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -28,20 +28,22 @@</span>
  
  include $(SPEC)
  include MakeBase.gmk
  include Modules.gmk
  include JavaCompilation.gmk
<span class="udiff-line-removed">- include SetupJavaCompilers.gmk</span>
  
  # Hook to include the corresponding custom file, if present.
  $(eval $(call IncludeCustomExtension, CompileJavaModules.gmk))
  
  ################################################################################
  # Module specific build settings
  
<span class="udiff-line-modified-removed">- java.base_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-reference,-accessibility &#39;-Xdoclint/package:java.*,javax.*&#39; -XDstringConcat=inline</span>
<span class="udiff-line-modified-removed">- java.base_COPY += .icu .dat .spp .nrm content-types.properties hijrah-config-Hijrah-umalqura_islamic-umalqura.properties</span>
<span class="udiff-line-modified-added">+ java.base_DOCLINT += -Xdoclint:all/protected,-reference,-accessibility \</span>
<span class="udiff-line-modified-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-added">+ java.base_JAVAC_FLAGS += -XDstringConcat=inline</span>
<span class="udiff-line-added">+ java.base_COPY += .icu .dat .spp .nrm content-types.properties \</span>
<span class="udiff-line-added">+     hijrah-config-Hijrah-umalqura_islamic-umalqura.properties</span>
  java.base_CLEAN += intrinsic.properties
  
  java.base_EXCLUDE_FILES += \
    $(TOPDIR)/src/java.base/share/classes/jdk/internal/module/ModuleLoaderMap.java
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -68,22 +70,23 @@</span>
        #
  endif
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.compiler_ADD_JAVAC_FLAGS += -Xdoclint:all/protected &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.compiler_DOCLINT += -Xdoclint:all/protected \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.datatransfer_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-reference &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.datatransfer_DOCLINT += -Xdoclint:all/protected,-reference \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  java.datatransfer_COPY += flavormap.properties
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.desktop_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-reference \</span>
<span class="udiff-line-modified-removed">-     &#39;-Xdoclint/package:java.*,javax.*&#39; \</span>
<span class="udiff-line-removed">-     --doclint-format html4</span>
<span class="udiff-line-modified-added">+ java.desktop_DOCLINT += -Xdoclint:all/protected,-reference \</span>
<span class="udiff-line-modified-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  java.desktop_COPY += .gif .png .wav .txt .xml .css .pf
  java.desktop_CLEAN += iio-plugin.properties cursors.properties
  
  java.desktop_EXCLUDES += \
      java/awt/doc-files \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -212,79 +215,93 @@</span>
      javax/swing/plaf/nimbus/TabbedPanePainter.java \
      #
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.scripting_ADD_JAVAC_FLAGS += -Xdoclint:all/protected &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.scripting_DOCLINT += -Xdoclint:all/protected \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  java.scripting_COPY += .js
  java.scripting_CLEAN += .properties
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.instrument_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-accessibility &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.instrument_DOCLINT += -Xdoclint:all/protected,-accessibility \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.logging_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-reference,-accessibility &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.logging_DOCLINT += -Xdoclint:all/protected,-reference,-accessibility \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.management_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-reference,-accessibility &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.management_DOCLINT += -Xdoclint:all/protected,-reference,-accessibility \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.management.rmi_ADD_JAVAC_FLAGS += -Xdoclint:all/protected &#39;-Xdoclint/package:javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.management.rmi_DOCLINT += -Xdoclint:all/protected \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:javax.*&#39;</span>
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.prefs_ADD_JAVAC_FLAGS += -Xdoclint:all/protected &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.prefs_DOCLINT += -Xdoclint:all/protected \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.transaction.xa_ADD_JAVAC_FLAGS += -Xdoclint:all/protected &#39;-Xdoclint/package:javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.transaction.xa_DOCLINT += -Xdoclint:all/protected \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:javax.*&#39;</span>
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.sql_ADD_JAVAC_FLAGS += -Xdoclint:all/protected &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.sql_DOCLINT += -Xdoclint:all/protected \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.sql.rowset_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-accessibility &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.sql.rowset_DOCLINT += -Xdoclint:all/protected,-accessibility \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  java.sql.rowset_CLEAN_FILES += $(wildcard \
      $(TOPDIR)/src/java.sql.rowset/share/classes/com/sun/rowset/*.properties \
      $(TOPDIR)/src/java.sql.rowset/share/classes/javax/sql/rowset/*.properties)
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.rmi_ADD_JAVAC_FLAGS += -Xdoclint:all/protected &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.rmi_DOCLINT += -Xdoclint:all/protected \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  java.rmi_CLEAN_FILES += $(wildcard \
      $(TOPDIR)/src/java.rmi/share/classes/sun/rmi/registry/resources/*.properties \
      $(TOPDIR)/src/java.rmi/share/classes/sun/rmi/server/resources/*.properties)
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.xml_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-accessibility \</span>
<span class="udiff-line-modified-added">+ java.xml_DOCLINT += -Xdoclint:all/protected,-accessibility \</span>
      &#39;-Xdoclint/package:$(call CommaList, javax.xml.catalog javax.xml.datatype \
      javax.xml.transform javax.xml.validation javax.xml.xpath)&#39;
  java.xml_CLEAN += .properties
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.naming_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-accessibility &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.naming_DOCLINT += -Xdoclint:all/protected,-accessibility \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  java.naming_CLEAN += jndiprovider.properties
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.security.jgss_ADD_JAVAC_FLAGS += -Xdoclint:all/protected &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.security.jgss_DOCLINT += -Xdoclint:all/protected \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.smartcardio_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-accessibility &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.smartcardio_DOCLINT += -Xdoclint:all/protected,-accessibility \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- java.xml.crypto_ADD_JAVAC_FLAGS += -Xdoclint:all/protected &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
<span class="udiff-line-modified-added">+ java.xml.crypto_DOCLINT += -Xdoclint:all/protected \</span>
<span class="udiff-line-added">+     &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
  java.xml.crypto_COPY += .dtd .xml
  java.xml.crypto_CLEAN += .properties
  
  ################################################################################
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -292,13 +309,13 @@</span>
  
  ################################################################################
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- jdk.compiler_ADD_JAVAC_FLAGS += -Xdoclint:all/protected \</span>
<span class="udiff-line-modified-removed">-     &#39;-Xdoclint/package:-com.sun.tools.*,-jdk.internal.*,sun.tools.serialver.resources.*&#39; \</span>
<span class="udiff-line-modified-removed">-     -XDstringConcat=inline</span>
<span class="udiff-line-modified-added">+ jdk.compiler_DOCLINT += -Xdoclint:all/protected \</span>
<span class="udiff-line-modified-added">+     &#39;-Xdoclint/package:-com.sun.tools.*,-jdk.internal.*,sun.tools.serialver.resources.*&#39;</span>
<span class="udiff-line-modified-added">+ jdk.compiler_JAVAC_FLAGS += -XDstringConcat=inline</span>
  jdk.compiler_CLEAN_FILES += $(wildcard \
      $(patsubst %, $(TOPDIR)/src/jdk.compiler/share/classes/%/*.properties, \
          sun/tools/serialver/resources))
  
  ################################################################################
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -335,21 +352,11 @@</span>
  
  jdk.javadoc_COPY += .xml .css .js .png
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- jdk.jartool_ADD_JAVAC_FLAGS += -XDstringConcat=inline</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- ################################################################################</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- jdk.scripting.nashorn_DISABLED_WARNINGS += removal</span>
<span class="udiff-line-removed">- jdk.scripting.nashorn_COPY := .properties .js</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- ################################################################################</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- jdk.scripting.nashorn.shell_DISABLED_WARNINGS += removal</span>
<span class="udiff-line-removed">- jdk.scripting.nashorn.shell_COPY += .js .properties</span>
<span class="udiff-line-modified-added">+ jdk.jartool_JAVAC_FLAGS += -XDstringConcat=inline</span>
  
  ################################################################################
  
  # No SCTP implementation on Mac OS X or AIX. These classes should be excluded.
  SCTP_IMPL_CLASSES = \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -373,12 +380,13 @@</span>
    jdk.sctp_EXCLUDE_FILES += $(SCTP_IMPL_CLASSES)
  endif
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- jdk.incubator.jpackage_COPY += .gif .png .txt .spec .script .prerm .preinst .postrm .postinst .list .sh \</span>
<span class="udiff-line-modified-removed">-     .desktop .copyright .control .plist .template .icns .scpt .entitlements .wxs .wxl .wxi .ico .bmp .tiff</span>
<span class="udiff-line-modified-added">+ jdk.incubator.jpackage_COPY += .gif .png .txt .spec .script .prerm .preinst \</span>
<span class="udiff-line-modified-added">+     .postrm .postinst .list .sh .desktop .copyright .control .plist .template \</span>
<span class="udiff-line-added">+     .icns .scpt .entitlements .wxs .wxl .wxi .ico .bmp .tiff</span>
  
  jdk.incubator.jpackage_CLEAN += .properties
  
  ################################################################################
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -428,15 +436,15 @@</span>
  # JVMCI compilers make use of that information for various sanity checks.
  # Don&#39;t use Indy strings concatenation to have good JVMCI startup performance.
  # The exports are needed since JVMCI is dynamically exported (see
  # jdk.vm.ci.services.internal.ReflectionAccessJDK::openJVMCITo).
  
<span class="udiff-line-modified-removed">- jdk.internal.vm.ci_ADD_JAVAC_FLAGS += -parameters -XDstringConcat=inline</span>
<span class="udiff-line-modified-added">+ jdk.internal.vm.ci_JAVAC_FLAGS += -parameters -XDstringConcat=inline</span>
  
  ################################################################################
  
<span class="udiff-line-modified-removed">- jdk.internal.vm.compiler_ADD_JAVAC_FLAGS += -parameters -XDstringConcat=inline \</span>
<span class="udiff-line-modified-added">+ jdk.internal.vm.compiler_JAVAC_FLAGS += -parameters -XDstringConcat=inline \</span>
      --add-exports jdk.internal.vm.ci/jdk.vm.ci.aarch64=jdk.internal.vm.compiler \
      --add-exports jdk.internal.vm.ci/jdk.vm.ci.amd64=jdk.internal.vm.compiler \
      --add-exports jdk.internal.vm.ci/jdk.vm.ci.code=jdk.internal.vm.compiler \
      --add-exports jdk.internal.vm.ci/jdk.vm.ci.code.site=jdk.internal.vm.compiler \
      --add-exports jdk.internal.vm.ci/jdk.vm.ci.code.stack=jdk.internal.vm.compiler \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -466,10 +474,11 @@</span>
      org.graalvm.compiler.core.test \
      org.graalvm.compiler.debug.test \
      org.graalvm.compiler.graph.test \
      org.graalvm.compiler.hotspot.aarch64.test \
      org.graalvm.compiler.hotspot.amd64.test \
<span class="udiff-line-added">+     org.graalvm.compiler.hotspot.jdk15.test \</span>
      org.graalvm.compiler.hotspot.jdk9.test \
      org.graalvm.compiler.hotspot.lir.test \
      org.graalvm.compiler.hotspot.sparc.test \
      org.graalvm.compiler.hotspot.test \
      org.graalvm.compiler.jtt \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -500,11 +509,11 @@</span>
  # JVMCI compilers make use of that information for various sanity checks.
  # Don&#39;t use Indy strings concatenation to have good JAOTC startup performance.
  # The exports are needed since JVMCI is dynamically exported (see
  # jdk.vm.ci.services.internal.ReflectionAccessJDK::openJVMCITo).
  
<span class="udiff-line-modified-removed">- jdk.aot_ADD_JAVAC_FLAGS += -parameters -XDstringConcat=inline \</span>
<span class="udiff-line-modified-added">+ jdk.aot_JAVAC_FLAGS += -parameters -XDstringConcat=inline \</span>
      --add-exports jdk.internal.vm.ci/jdk.vm.ci.aarch64=jdk.internal.vm.compiler,jdk.aot \
      --add-exports jdk.internal.vm.ci/jdk.vm.ci.amd64=jdk.internal.vm.compiler,jdk.aot \
      --add-exports jdk.internal.vm.ci/jdk.vm.ci.code=jdk.internal.vm.compiler,jdk.aot \
      --add-exports jdk.internal.vm.ci/jdk.vm.ci.code.site=jdk.internal.vm.compiler,jdk.aot \
      --add-exports jdk.internal.vm.ci/jdk.vm.ci.code.stack=jdk.internal.vm.compiler,jdk.aot \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -535,11 +544,11 @@</span>
  jdk.localedata_KEEP_ALL_TRANSLATIONS := true
  ################################################################################
  
  jdk.jfr_DISABLED_WARNINGS += exports
  jdk.jfr_COPY := .xsd .xml .dtd
<span class="udiff-line-modified-removed">- jdk.jfr_ADD_JAVAC_FLAGS := -XDstringConcat=inline</span>
<span class="udiff-line-modified-added">+ jdk.jfr_JAVAC_FLAGS := -XDstringConcat=inline</span>
  
  ################################################################################
  # If this is an imported module that has prebuilt classes, only compile
  # module-info.java.
  ifneq ($(IMPORT_MODULES_CLASSES), )
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -598,20 +607,21 @@</span>
            $(wildcard $(TOPDIR)/src/$(MODULE)/share/classes/*/src)))
    MODULESOURCEPATH := $(call PathList, $(AOT_MODULESOURCEPATH))
  endif
  
  $(eval $(call SetupJavaCompilation, $(MODULE), \
<span class="udiff-line-modified-removed">-     SETUP := $(if $($(MODULE)_SETUP), $($(MODULE)_SETUP), GENERATE_JDKBYTECODE), \</span>
<span class="udiff-line-modified-added">+     SMALL_JAVA := false, \</span>
      MODULE := $(MODULE), \
      SRC := $(wildcard $(MODULE_SRC_DIRS)), \
      INCLUDES := $(JDK_USER_DEFINED_FILTER), \
      FAIL_NO_SRC := $(FAIL_NO_SRC), \
      BIN := $(if $($(MODULE)_BIN), $($(MODULE)_BIN), $(JDK_OUTPUTDIR)/modules), \
      HEADERS := $(SUPPORT_OUTPUTDIR)/headers, \
      CREATE_API_DIGEST := true, \
<span class="udiff-line-modified-removed">-     ADD_JAVAC_FLAGS := \</span>
<span class="udiff-line-modified-removed">-         $($(MODULE)_ADD_JAVAC_FLAGS) \</span>
<span class="udiff-line-modified-added">+     JAVAC_FLAGS := \</span>
<span class="udiff-line-modified-added">+         $($(MODULE)_DOCLINT) \</span>
<span class="udiff-line-added">+         $($(MODULE)_JAVAC_FLAGS) \</span>
          --module-source-path $(MODULESOURCEPATH) \
          --module-path $(MODULEPATH) \
          --system none, \
  ))
  
</pre>
<center><a href="CompileInterimLangtools.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="CompileModuleTools.gmk.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>