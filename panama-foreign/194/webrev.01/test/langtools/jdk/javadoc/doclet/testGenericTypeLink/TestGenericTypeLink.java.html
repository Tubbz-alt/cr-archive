<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New test/langtools/jdk/javadoc/doclet/testGenericTypeLink/TestGenericTypeLink.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2020, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
 25  * @test
 26  * @bug     8177280
 27  * @summary see and link tag syntax should allow generic types
 28  * @library ../../lib
 29  * @modules jdk.javadoc/jdk.javadoc.internal.tool
 30  * @build javadoc.tester.*
 31  * @run main TestGenericTypeLink
 32  */
 33 
 34 import javadoc.tester.JavadocTester;
 35 
 36 public class TestGenericTypeLink extends JavadocTester {
 37 
 38     public static void main(String... args) throws Exception {
 39         TestGenericTypeLink test = new TestGenericTypeLink();
 40         test.runTests();
 41     }
 42 
 43     /**
 44      * Test valid internal and external links to generic types.
 45      */
 46     @Test
 47     public void testValidLinks() {
 48         javadoc(&quot;-d&quot;, &quot;out1&quot;,
 49                 &quot;-sourcepath&quot;, testSrc,
 50                 &quot;-linkoffline&quot;, &quot;http://example.com/docs/api/&quot;, testSrc,
 51                 &quot;-package&quot;, &quot;pkg1&quot;);
 52         checkExit(Exit.OK);
 53         checkOutput(&quot;pkg1/A.html&quot;, true,
 54                 &quot;&lt;div class=\&quot;block\&quot;&gt;&lt;code&gt;&lt;a href=\&quot;http://example.com/docs/api/java.base&quot;
 55                 + &quot;/java/util/List.html\&quot; title=\&quot;class or interface in java.util\&quot; &quot;
 56                 + &quot;class=\&quot;external-link\&quot;&gt;List&lt;/a&gt;&amp;lt;&lt;a href=\&quot;http://example.com/docs/api/&quot;
 57                 + &quot;java.base/java/lang/String.html\&quot; title=\&quot;class or interface in java.lang\&quot; &quot;
 58                 + &quot;class=\&quot;external-link\&quot;&gt;String&lt;/a&gt;&amp;gt;&lt;/code&gt;\n&quot;
 59                 + &quot; &lt;a href=\&quot;http://example.com/docs/api/java.base/java/util/&quot;
 60                 + &quot;List.html\&quot; title=\&quot;class or interface in java.util\&quot; class=\&quot;external-link\&quot;&gt;&quot;
 61                 + &quot;List&lt;/a&gt;&amp;lt;? extends &lt;a href=\&quot;http://example.com/docs/api/java.base/&quot;
 62                 + &quot;java/lang/CharSequence.html\&quot; title=\&quot;class or interface in java.lang\&quot; &quot;
 63                 + &quot;class=\&quot;external-link\&quot;&gt;CharSequence&lt;/a&gt;&amp;gt;\n&quot;
 64                 + &quot; &lt;a href=\&quot;#someMethod(java.util.List,int)\&quot;&gt;&lt;code&gt;someMethod(&quot;
 65                 + &quot;ArrayList&amp;lt;Integer&amp;gt;, int)&lt;/code&gt;&lt;/a&gt;\n&quot;
 66                 + &quot; &lt;a href=\&quot;#otherMethod(java.util.Map,double)\&quot;&gt;&lt;code&gt;otherMethod(&quot;
 67                 + &quot;Map&amp;lt;String, StringBuilder&amp;gt;, double)&lt;/code&gt;&lt;/a&gt;&lt;/div&gt;\n&quot;,
 68 
 69                 &quot;&lt;dl class=\&quot;notes\&quot;&gt;\n&quot;
 70                 + &quot;&lt;dt&gt;See Also:&lt;/dt&gt;\n&quot;
 71                 + &quot;&lt;dd&gt;&lt;code&gt;&lt;a href=\&quot;http://example.com/docs/api/java.base/&quot;
 72                 + &quot;java/util/Map.html\&quot; title=\&quot;class or interface in java.util\&quot; &quot;
 73                 + &quot;class=\&quot;external-link\&quot;&gt;Map&lt;/a&gt;&amp;lt;&lt;a href=\&quot;http://example.com/&quot;
 74                 + &quot;docs/api/java.base/java/lang/String.html\&quot; title=\&quot;class or interface &quot;
 75                 + &quot;in java.lang\&quot; class=\&quot;external-link\&quot;&gt;String&lt;/a&gt;,&amp;#8203;? extends &quot;
 76                 + &quot;&lt;a href=\&quot;http://example.com/docs/api/java.base/&quot;
 77                 + &quot;java/lang/CharSequence.html\&quot; title=\&quot;class or interface in &quot;
 78                 + &quot;java.lang\&quot; class=\&quot;external-link\&quot;&gt;CharSequence&lt;/a&gt;&amp;gt;&lt;/code&gt;, \n&quot;
 79                 + &quot;&lt;code&gt;&lt;a href=\&quot;http://example.com/docs/api/java.base/&quot;
 80                 + &quot;java/util/Map.html\&quot; title=\&quot;class or interface in java.util\&quot; &quot;
 81                 + &quot;class=\&quot;external-link\&quot;&gt;Map&lt;/a&gt;&amp;lt;&lt;a href=\&quot;http://example.com/docs/api/&quot;
 82                 + &quot;java.base/java/lang/String.html\&quot; title=\&quot;class or interface in java.lang\&quot; &quot;
 83                 + &quot;class=\&quot;external-link\&quot;&gt;String&lt;/a&gt;,&amp;#8203;? super &lt;a href=\&quot;A.html\&quot; title=\&quot;class in pkg1\&quot;&gt;&quot;
 84                 + &quot;A&lt;/a&gt;&amp;lt;&lt;a href=\&quot;http://example.com/docs/api/java.base/&quot;
 85                 + &quot;java/lang/String.html\&quot; title=\&quot;class or interface in java.lang\&quot; &quot;
 86                 + &quot;class=\&quot;external-link\&quot;&gt;String&lt;/a&gt;,&amp;#8203;? extends &lt;a href=\&quot;http://example.com/docs/api&quot;
 87                 + &quot;/java.base/java/lang/RuntimeException.html\&quot; &quot;
 88                 + &quot;title=\&quot;class or interface in java.lang\&quot; class=\&quot;external-link\&quot;&gt;RuntimeException&lt;/a&gt;&quot;
 89                 + &quot;&amp;gt;&amp;gt;&lt;/code&gt;, \n&quot;
 90                 + &quot;&lt;a href=\&quot;#someMethod(java.util.List,int)\&quot;&gt;&lt;code&gt;someMethod&quot;
 91                 + &quot;(List&amp;lt;Number&amp;gt;, int)&lt;/code&gt;&lt;/a&gt;, \n&quot;
 92                 + &quot;&lt;a href=\&quot;#otherMethod(java.util.Map,double)\&quot;&gt;&lt;code&gt;otherMethod&quot;
 93                 + &quot;(Map&amp;lt;String, ? extends CharSequence&amp;gt;, double)&lt;/code&gt;&lt;/a&gt;&lt;/dd&gt;\n&quot;
 94                 + &quot;&lt;/dl&gt;&quot;);
 95         checkOutput(&quot;pkg1/A.SomeException.html&quot;, true,
 96                 &quot;&lt;div class=\&quot;block\&quot;&gt;&lt;code&gt;&lt;a href=\&quot;A.html\&quot; title=\&quot;class in pkg1\&quot;&gt;A&lt;/a&gt;&amp;lt;&quot;
 97                 + &quot;&lt;a href=\&quot;http://example.com/docs/api/java.base/java/lang/String.html&quot;
 98                 + &quot;\&quot; title=\&quot;class or interface in java.lang\&quot; class=\&quot;external-link\&quot;&gt;String&lt;/a&gt;&quot;
 99                 + &quot;,&amp;#8203;&lt;a href=\&quot;A.SomeException.html\&quot; title=\&quot;class in pkg1\&quot;&gt;A.SomeException&lt;/a&gt;&amp;gt;&lt;/code&gt;\n&quot;
100                 + &quot; &lt;a href=\&quot;http://example.com/docs/api/java.base/java/util/Map.html&quot;
101                 + &quot;\&quot; title=\&quot;class or interface in java.util\&quot; class=\&quot;external-link\&quot;&gt;&quot;
102                 + &quot;link to generic type with label&lt;/a&gt;&lt;/div&gt;&quot;,
103 
104                 &quot;&lt;dl class=\&quot;notes\&quot;&gt;\n&quot;
105                 + &quot;&lt;dt&gt;See Also:&lt;/dt&gt;\n&quot;
106                 + &quot;&lt;dd&gt;&lt;code&gt;&lt;a href=\&quot;A.html\&quot; title=\&quot;class in pkg1\&quot;&gt;A&lt;/a&gt;&amp;lt;&lt;a href=\&quot;http://example.com/docs/api&quot;
107                 + &quot;/java.base/java/lang/String.html\&quot; &quot;
108                 + &quot;title=\&quot;class or interface in java.lang\&quot; class=\&quot;external-link\&quot;&gt;String&lt;/a&gt;&quot;
109                 + &quot;,&amp;#8203;&lt;a href=\&quot;A.SomeException.html\&quot; title=\&quot;class in pkg1\&quot;&gt;A.SomeException&lt;/a&gt;&amp;gt;&lt;/code&gt;, \n&quot;
110                 + &quot;&lt;a href=\&quot;http://example.com/docs/api/java.base/&quot;
111                 + &quot;java/util/List.html\&quot; title=\&quot;class or interface in java.util\&quot; &quot;
112                 + &quot;class=\&quot;external-link\&quot;&gt;&lt;code&gt;Link to generic type with label&lt;/code&gt;&lt;/a&gt;&lt;/dd&gt;\n&quot;
113                 + &quot;&lt;/dl&gt;&quot;
114                 );
115     }
116 
117     /**
118      * Test invalid links to generic types.
119      */
120     @Test
121     public void testInvalidLinks() {
122         javadoc(&quot;-d&quot;, &quot;out2&quot;,
123                 &quot;-sourcepath&quot;, testSrc,
124                 &quot;-linkoffline&quot;, &quot;http://example.com/docs/api/&quot;, testSrc,
125                 &quot;-package&quot;, &quot;pkg2&quot;);
126         checkExit(Exit.ERROR);
127         checkOutput(&quot;pkg2/B.html&quot;, true,
128                 &quot;&lt;div class=\&quot;block\&quot;&gt;&lt;code&gt;java.util.Foo&lt;String&gt;&lt;/code&gt;\n&quot;
129                 + &quot; Baz&lt;Object&gt;\n&quot;
130                 + &quot; &lt;code&gt;#b(List&lt;Integer&gt;)&lt;/code&gt;&lt;/div&gt;&quot;,
131 
132                 &quot;&lt;dl class=\&quot;notes\&quot;&gt;\n&quot;
133                 + &quot;&lt;dt&gt;See Also:&lt;/dt&gt;\n&quot;
134                 + &quot;&lt;dd&gt;&lt;code&gt;java.util.List&lt;Bar&gt;&lt;/code&gt;, \n&quot;
135                 + &quot;&lt;code&gt;Baz&lt;Object, String&gt;&lt;/code&gt;, \n&quot;
136                 + &quot;&lt;code&gt;B#b(List&lt;Baz&gt;)&lt;/code&gt;&lt;/dd&gt;\n&lt;/dl&gt;&quot;);
137     }
138 }
139 
    </pre>
  </body>
</html>