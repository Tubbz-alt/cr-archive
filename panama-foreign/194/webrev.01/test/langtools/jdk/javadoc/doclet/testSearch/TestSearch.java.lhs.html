<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames test/langtools/jdk/javadoc/doclet/testSearch/TestSearch.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (c) 2015, 2020, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
 25  * @test
 26  * @bug 8141492 8071982 8141636 8147890 8166175 8168965 8176794 8175218 8147881
 27  *      8181622 8182263 8074407 8187521 8198522 8182765 8199278 8196201 8196202
 28  *      8184205 8214468 8222548 8223378 8234746 8241219
 29  * @summary Test the search feature of javadoc.
 30  * @library ../../lib
 31  * @modules jdk.javadoc/jdk.javadoc.internal.tool
 32  * @build javadoc.tester.*
 33  * @run main TestSearch
 34  */
 35 
 36 import java.util.Locale;
 37 import java.util.Set;
 38 import java.util.TreeSet;
 39 import java.util.regex.Matcher;
 40 import java.util.regex.Pattern;
 41 
 42 import javadoc.tester.JavadocTester;
 43 
 44 public class TestSearch extends JavadocTester {
 45 
 46     public static void main(String... args) throws Exception {
 47         TestSearch tester = new TestSearch();
 48         tester.runTests();
 49     }
 50 
 51     @Test
 52     public void test1() {
 53         javadoc(&quot;-d&quot;, &quot;out-1&quot;,
 54                 &quot;-sourcepath&quot;,
 55                 &quot;-use&quot;,
 56                 testSrc(&quot;UnnamedPkgClass.java&quot;));
 57         checkExit(Exit.OK);
 58         checkSearchOutput(&quot;UnnamedPkgClass.html&quot;, true, true);
 59         checkJqueryAndImageFiles(true);
 60         checkSearchJS();
 61         checkFiles(false,
 62                 &quot;tag-search-index.js&quot;);
 63         checkFiles(true,
 64                 &quot;package-search-index.js&quot;,
 65                 &quot;member-search-index.js&quot;,
 66                 &quot;type-search-index.js&quot;);
 67     }
 68 
 69     @Test
 70     public void test2() {
 71         javadoc(&quot;-d&quot;, &quot;out-2&quot;,
 72                 &quot;-Xdoclint:none&quot;,
 73                 &quot;-sourcepath&quot;, testSrc,
 74                 &quot;-use&quot;,
 75                 &quot;pkg&quot;, &quot;pkg1&quot;, &quot;pkg2&quot;, &quot;pkg3&quot;);
 76         checkExit(Exit.OK);
 77         checkInvalidUsageIndexTag();
 78         checkSearchOutput(true);
 79         checkSingleIndex(true, true);
 80         checkSingleIndexSearchTagDuplication();
 81         checkJqueryAndImageFiles(true);
 82         checkSearchJS();
 83         checkAllPkgsAllClasses();
 84         checkFiles(true,
 85                 &quot;member-search-index.js&quot;,
 86                 &quot;package-search-index.js&quot;,
 87                 &quot;tag-search-index.js&quot;,
 88                 &quot;type-search-index.js&quot;);
 89     }
 90 
 91     @Test
 92     public void test2a() {
 93         javadoc(&quot;-d&quot;, &quot;out-2a&quot;,
 94                 &quot;-Xdoclint:all&quot;,
 95                 &quot;-sourcepath&quot;, testSrc,
 96                 &quot;-use&quot;,
 97                 &quot;pkg&quot;, &quot;pkg1&quot;, &quot;pkg2&quot;, &quot;pkg3&quot;);
 98         checkExit(Exit.ERROR);
 99         checkDocLintErrors();
100         checkSearchOutput(true);
101         checkSingleIndex(true, true);
102         checkSingleIndexSearchTagDuplication();
103         checkJqueryAndImageFiles(true);
104         checkSearchJS();
105         checkFiles(true,
106                 &quot;member-search-index.js&quot;,
107                 &quot;package-search-index.js&quot;,
108                 &quot;tag-search-index.js&quot;,
109                 &quot;type-search-index.js&quot;);
110     }
111 
112     @Test
113     public void test3() {
114         javadoc(&quot;-d&quot;, &quot;out-3&quot;,
115                 &quot;-noindex&quot;,
116                 &quot;-Xdoclint:none&quot;,
117                 &quot;-sourcepath&quot;, testSrc,
118                 &quot;-use&quot;,
119                 &quot;pkg&quot;, &quot;pkg1&quot;, &quot;pkg2&quot;, &quot;pkg3&quot;);
120         checkExit(Exit.OK);
121         checkSearchOutput(false);
122         checkJqueryAndImageFiles(false);
123         checkFiles(false,
124                 &quot;member-search-index.js&quot;,
125                 &quot;package-search-index.js&quot;,
126                 &quot;tag-search-index.js&quot;,
127                 &quot;type-search-index.js&quot;,
128                 &quot;index-all.html&quot;,
129                 &quot;allpackages-index.html&quot;,
130                 &quot;allclasses-index.html&quot;);
131     }
132 
133     @Test
134     public void test4() {
135         javadoc(&quot;-d&quot;, &quot;out-4&quot;,
136                 &quot;-html5&quot;,
137                 &quot;-Xdoclint:none&quot;,
138                 &quot;-sourcepath&quot;, testSrc,
139                 &quot;-use&quot;,
140                 &quot;pkg&quot;, &quot;pkg1&quot;, &quot;pkg2&quot;, &quot;pkg3&quot;);
141         checkExit(Exit.OK);
142         checkSearchOutput(true);
143         checkSingleIndex(true, true);
144         checkSingleIndexSearchTagDuplication();
145         checkJqueryAndImageFiles(true);
146         checkSearchJS();
147         checkFiles(true,
148                 &quot;member-search-index.js&quot;,
149                 &quot;package-search-index.js&quot;,
150                 &quot;tag-search-index.js&quot;,
151                 &quot;type-search-index.js&quot;);
152     }
153 
154     @Test
155     public void test5() {
156         javadoc(&quot;-d&quot;, &quot;out-5&quot;,
157                 &quot;-html5&quot;,
158                 &quot;-noindex&quot;,
159                 &quot;-Xdoclint:none&quot;,
160                 &quot;-sourcepath&quot;, testSrc,
161                 &quot;-use&quot;,
162                 &quot;pkg&quot;, &quot;pkg1&quot;, &quot;pkg2&quot;, &quot;pkg3&quot;);
163         checkExit(Exit.OK);
164         checkSearchOutput(false);
165         checkJqueryAndImageFiles(false);
166         checkFiles(false,
167                 &quot;member-search-index.js&quot;,
168                 &quot;package-search-index.js&quot;,
169                 &quot;tag-search-index.js&quot;,
170                 &quot;type-search-index.js&quot;,
171                 &quot;index-all.html&quot;);
172     }
173 
174     @Test
175     public void test6() {
176         javadoc(&quot;-d&quot;, &quot;out-6&quot;,
177                 &quot;-nocomment&quot;,
178                 &quot;-Xdoclint:none&quot;,
179                 &quot;-sourcepath&quot;, testSrc,
180                 &quot;-use&quot;,
181                 &quot;pkg&quot;, &quot;pkg1&quot;, &quot;pkg2&quot;, &quot;pkg3&quot;);
182         checkExit(Exit.OK);
183         checkSearchOutput(true);
184         checkIndexNoComment();
185         checkJqueryAndImageFiles(true);
186         checkSearchJS();
187         checkFiles(true,
188                 &quot;member-search-index.js&quot;,
189                 &quot;package-search-index.js&quot;,
190                 &quot;tag-search-index.js&quot;,
191                 &quot;type-search-index.js&quot;);
192     }
193 
194     @Test
195     public void test7() {
196         javadoc(&quot;-d&quot;, &quot;out-7&quot;,
197                 &quot;-nodeprecated&quot;,
198                 &quot;-Xdoclint:none&quot;,
199                 &quot;-sourcepath&quot;, testSrc,
200                 &quot;-use&quot;,
201                 &quot;pkg&quot;, &quot;pkg1&quot;, &quot;pkg2&quot;, &quot;pkg3&quot;);
202 
203         checkExit(Exit.OK);
204         checkSearchOutput(true);
205         checkIndexNoDeprecated();
206         checkJqueryAndImageFiles(true);
207         checkSearchJS();
208         checkFiles(true,
209                 &quot;member-search-index.js&quot;,
210                 &quot;package-search-index.js&quot;,
211                 &quot;tag-search-index.js&quot;,
212                 &quot;type-search-index.js&quot;);
213     }
214 
215     @Test
216     public void test8() {
217         javadoc(&quot;-d&quot;, &quot;out-8&quot;,
218                 &quot;-splitindex&quot;,
219                 &quot;-Xdoclint:none&quot;,
220                 &quot;-sourcepath&quot;, testSrc,
221                 &quot;-use&quot;,
222                 &quot;pkg&quot;, &quot;pkg1&quot;, &quot;pkg2&quot;, &quot;pkg3&quot;);
223         checkExit(Exit.OK);
224         checkInvalidUsageIndexTag();
225         checkSearchOutput(true);
226         checkSplitIndex();
227         checkSplitIndexSearchTagDuplication();
228         checkJqueryAndImageFiles(true);
229         checkSearchJS();
230         checkFiles(true,
231                 &quot;member-search-index.js&quot;,
232                 &quot;package-search-index.js&quot;,
233                 &quot;tag-search-index.js&quot;,
234                 &quot;type-search-index.js&quot;);
235     }
236 
237     @Test
238     public void test9() {
239         javadoc(&quot;-d&quot;, &quot;out-9&quot;,
240                 &quot;-sourcepath&quot;, testSrc,
241                 &quot;-javafx&quot;,
242                 &quot;--disable-javafx-strict-checks&quot;,
243                 &quot;-package&quot;,
244                 &quot;-use&quot;,
245                 &quot;pkgfx&quot;, &quot;pkg3&quot;);
246         checkExit(Exit.OK);
247         checkSearchOutput(true);
248         checkJavaFXOutput();
249         checkJqueryAndImageFiles(true);
250         checkSearchJS();
251         checkFiles(false,
252                 &quot;tag-search-index.js&quot;);
253         checkFiles(true,
254                 &quot;member-search-index.js&quot;,
255                 &quot;package-search-index.js&quot;,
256                 &quot;type-search-index.js&quot;);
257     }
258 
259     @Test
260     public void testURLEncoding() {
261         javadoc(&quot;-d&quot;, &quot;out-encode-html5&quot;,
262                 &quot;-Xdoclint:none&quot;,
263                 &quot;-sourcepath&quot;, testSrc,
264                 &quot;-use&quot;,
265                 &quot;pkg&quot;, &quot;pkg1&quot;, &quot;pkg2&quot;, &quot;pkg3&quot;);
266         checkExit(Exit.OK);
267         checkSearchJS();
268         checkSearchIndex(true);
269     }
270 
271     @Test
272     public void testDefaultJapaneseLocale() {
273         Locale prev = Locale.getDefault();
274         Locale.setDefault(Locale.forLanguageTag(&quot;ja-JP&quot;));
275         try {
276             javadoc(&quot;-d&quot;, &quot;out-jp-default&quot;,
277                     &quot;-Xdoclint:none&quot;,
278                     &quot;-sourcepath&quot;, testSrc,
279                     &quot;-use&quot;,
280                     &quot;pkg&quot;, &quot;pkg1&quot;, &quot;pkg2&quot;, &quot;pkg3&quot;);
281             checkExit(Exit.OK);
282             checkOutput(Output.OUT, true,
283                     &quot;\u30d1\u30c3\u30b1\u30fc\u30b8pkg\u306e\u30bd\u30fc\u30b9\u30fb\u30d5\u30a1&quot; +
284                             &quot;\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059...\n&quot;,
285                     &quot;\u30d1\u30c3\u30b1\u30fc\u30b8pkg1\u306e\u30bd\u30fc\u30b9\u30fb\u30d5\u30a1&quot; +
286                             &quot;\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059...\n&quot;);
287             checkSearchJS();
288             checkSearchIndex(true);
289         } finally {
290             Locale.setDefault(prev);
291         }
292     }
293 
294     @Test
295     public void testJapaneseLocaleOption() {
296         javadoc(&quot;-locale&quot;, &quot;ja_JP&quot;,
297                 &quot;-d&quot;, &quot;out-jp-option&quot;,
298                 &quot;-Xdoclint:none&quot;,
299                 &quot;-sourcepath&quot;, testSrc,
300                 &quot;-use&quot;,
301                 &quot;pkg&quot;, &quot;pkg1&quot;, &quot;pkg2&quot;, &quot;pkg3&quot;);
302         checkExit(Exit.OK);
303         checkOutput(Output.OUT, true,
304                 &quot;&quot;&quot;
305                     Loading source files for package pkg...
306                     &quot;&quot;&quot;,
307                 &quot;&quot;&quot;
308                     Loading source files for package pkg1...
309                     &quot;&quot;&quot;);
310         checkOutput(&quot;index.html&quot;, true,
311                 &quot;&lt;span&gt;\u30d1\u30c3\u30b1\u30fc\u30b8&lt;/span&gt;&quot;);
312         checkSearchJS();
313         checkSearchIndex(true);
314     }
315 
316     @Test
317     public void testDefaultChineseLocale() {
318         Locale prev = Locale.getDefault();
319         Locale.setDefault(Locale.forLanguageTag(&quot;zh-CN&quot;));
320         try {
321             javadoc(&quot;-d&quot;, &quot;out-cn-default&quot;,
322                     &quot;-Xdoclint:none&quot;,
323                     &quot;-sourcepath&quot;, testSrc,
324                     &quot;-use&quot;,
325                     &quot;pkg&quot;, &quot;pkg1&quot;, &quot;pkg2&quot;, &quot;pkg3&quot;);
326             checkExit(Exit.OK);
327             checkOutput(Output.OUT, true,
328                     &quot;\u6b63\u5728\u52a0\u8f7d\u7a0b\u5e8f\u5305pkg\u7684\u6e90\u6587\u4ef6...\n&quot;,
329                     &quot;\u6b63\u5728\u52a0\u8f7d\u7a0b\u5e8f\u5305pkg1\u7684\u6e90\u6587\u4ef6...\n&quot;,
330                     &quot;\u6b63\u5728\u52a0\u8f7d\u7a0b\u5e8f\u5305pkg2\u7684\u6e90\u6587\u4ef6...\n&quot;,
331                     &quot;\u6b63\u5728\u52a0\u8f7d\u7a0b\u5e8f\u5305pkg3\u7684\u6e90\u6587\u4ef6...\n&quot;);
332             checkSearchJS();
333             checkSearchIndex(true);
334         } finally {
335             Locale.setDefault(prev);
336         }
337     }
338 
339     @Test
340     public void testChineseLocaleOption() {
341         javadoc(&quot;-locale&quot;, &quot;zh_CN&quot;,
342                 &quot;-d&quot;, &quot;out-cn-option&quot;,
343                 &quot;-Xdoclint:none&quot;,
344                 &quot;-sourcepath&quot;, testSrc,
345                 &quot;-use&quot;,
346                 &quot;pkg&quot;, &quot;pkg1&quot;, &quot;pkg2&quot;, &quot;pkg3&quot;);
347         checkExit(Exit.OK);
348         checkOutput(Output.OUT, true,
349                 &quot;&quot;&quot;
350                     Loading source files for package pkg...
351                     &quot;&quot;&quot;,
352                 &quot;&quot;&quot;
353                     Loading source files for package pkg1...
354                     &quot;&quot;&quot;,
355                 &quot;&quot;&quot;
356                     Loading source files for package pkg2...
357                     &quot;&quot;&quot;,
358                 &quot;&quot;&quot;
359                     Loading source files for package pkg3...
360                     &quot;&quot;&quot;);
361         checkOutput(&quot;index.html&quot;, true,
362                 &quot;&lt;span&gt;\u7a0b\u5e8f\u5305&lt;/span&gt;&quot;);
363         checkSearchJS();
364         checkSearchIndex(true);
365     }
366 
367     void checkDocLintErrors() {
368         checkOutput(Output.OUT, true,
369                 &quot;&quot;&quot;
370                     A sample method. Testing search tag for {@index &quot;unclosed quote}.&quot;&quot;&quot;,
371                 &quot;Another test class. Testing empty {@index }.&quot;,
372                 &quot;Constant field. Testing no text in index tag {@index}.&quot;,
373                 &quot;A test field. Testing only white-spaces in index tag text {@index       }.&quot;);
374     }
375 
376     void checkSearchOutput(boolean expectedOutput) {
377         checkSearchOutput(&quot;index.html&quot;, expectedOutput, true);
378     }
379 
380     void checkSearchIndex(boolean expectedOutput) {
381         checkOutput(&quot;member-search-index.js&quot;, expectedOutput,
382                 &quot;&quot;&quot;
383                     {&quot;p&quot;:&quot;pkg&quot;,&quot;c&quot;:&quot;AnotherClass&quot;,&quot;l&quot;:&quot;AnotherClass()&quot;,&quot;u&quot;:&quot;%3Cinit%3E()&quot;}&quot;&quot;&quot;,
384                 &quot;&quot;&quot;
385                     {&quot;p&quot;:&quot;pkg1&quot;,&quot;c&quot;:&quot;RegClass&quot;,&quot;l&quot;:&quot;RegClass()&quot;,&quot;u&quot;:&quot;%3Cinit%3E()&quot;}&quot;&quot;&quot;,
386                 &quot;&quot;&quot;
387                     {&quot;p&quot;:&quot;pkg2&quot;,&quot;c&quot;:&quot;TestError&quot;,&quot;l&quot;:&quot;TestError()&quot;,&quot;u&quot;:&quot;%3Cinit%3E()&quot;}&quot;&quot;&quot;,
388                 &quot;&quot;&quot;
389                     {&quot;p&quot;:&quot;pkg&quot;,&quot;c&quot;:&quot;AnotherClass&quot;,&quot;l&quot;:&quot;method(byte[], int, String)&quot;,&quot;u&quot;:&quot;method(byte[],int,java.lang.String)&quot;}&quot;&quot;&quot;);
390         checkOutput(&quot;member-search-index.js&quot;, !expectedOutput,
391                 &quot;&quot;&quot;
392                     {&quot;p&quot;:&quot;pkg&quot;,&quot;c&quot;:&quot;AnotherClass&quot;,&quot;l&quot;:&quot;method(RegClass)&quot;,&quot;u&quot;:&quot;method-pkg1.RegClass-&quot;}&quot;&quot;&quot;,
393                 &quot;&quot;&quot;
394                     {&quot;p&quot;:&quot;pkg2&quot;,&quot;c&quot;:&quot;TestClass&quot;,&quot;l&quot;:&quot;TestClass()&quot;,&quot;u&quot;:&quot;TestClass--&quot;}&quot;&quot;&quot;,
395                 &quot;&quot;&quot;
396                     {&quot;p&quot;:&quot;pkg&quot;,&quot;c&quot;:&quot;TestError&quot;,&quot;l&quot;:&quot;TestError()&quot;,&quot;u&quot;:&quot;TestError--&quot;}&quot;&quot;&quot;,
397                 &quot;&quot;&quot;
398                     {&quot;p&quot;:&quot;pkg&quot;,&quot;c&quot;:&quot;AnotherClass&quot;,&quot;l&quot;:&quot;method(byte[], int, String)&quot;,&quot;u&quot;:&quot;method-byte:A-int-java.lang.String-&quot;}&quot;&quot;&quot;);
399     }
400 
401     void checkSearchOutput(boolean expectedOutput, boolean moduleDirectoriesVar) {
402         checkSearchOutput(&quot;index.html&quot;, expectedOutput, moduleDirectoriesVar);
403     }
404 
405     void checkSearchOutput(String fileName, boolean expectedOutput, boolean moduleDirectoriesVar) {
406         // Test for search related markup
407         checkOutput(fileName, expectedOutput,
408                 &quot;&quot;&quot;
<a name="1" id="anc1"></a><span class="line-modified">409                     &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;script-dir/jquery-ui.css&quot; title=&quot;Style&quot;&gt;</span>
410                     &quot;&quot;&quot;,
411                 &quot;&quot;&quot;
<a name="2" id="anc2"></a><span class="line-modified">412                     &lt;script type=&quot;text/javascript&quot; src=&quot;script-dir/jquery-3.4.1.js&quot;&gt;&lt;/script&gt;</span>
413                     &quot;&quot;&quot;,
414                 &quot;&quot;&quot;
<a name="3" id="anc3"></a><span class="line-modified">415                     &lt;script type=&quot;text/javascript&quot; src=&quot;script-dir/jquery-ui.js&quot;&gt;&lt;/script&gt;&quot;&quot;&quot;,</span>
416                 &quot;&quot;&quot;
417                     var pathtoroot = &quot;./&quot;;
418                     loadScripts(document, &#39;script&#39;);&quot;&quot;&quot;,
419                 &quot;&lt;div class=\&quot;nav-list-search\&quot;&gt;&quot;,
420                 &quot;&quot;&quot;
421                     &lt;label for=&quot;search&quot;&gt;SEARCH:&lt;/label&gt;
422                     &lt;input type=&quot;text&quot; id=&quot;search&quot; value=&quot;search&quot; disabled=&quot;disabled&quot;&gt;
423                     &lt;input type=&quot;reset&quot; id=&quot;reset&quot; value=&quot;reset&quot; disabled=&quot;disabled&quot;&gt;
424                     &quot;&quot;&quot;);
425         checkOutput(fileName, true,
426                 &quot;&lt;div class=\&quot;flex-box\&quot;&gt;&quot;);
427     }
428 
429     void checkSingleIndex(boolean expectedOutput, boolean html5) {
430         String html_span_see_span = html5 ? &quot;html%3Cspan%3Esee%3C/span%3E&quot; : &quot;html-span-see-/span-&quot;;
431 
432         // Test for search tags markup in index file.
433         checkOutput(&quot;index-all.html&quot;, expectedOutput,
434                 &quot;&quot;&quot;
435                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/package-summary.html#phrasewithsp\
436                     aces&quot;&gt;phrase with spaces&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;,
437                 &quot;&quot;&quot;
438                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/package-summary.html#pkg&quot;&gt;pkg&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;,
439                 &quot;&quot;&quot;
440                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/package-summary.html#pkg2.5&quot;&gt;pkg2\
441                     .5&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;,
442                 &quot;&quot;&quot;
443                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/package-summary.html#r&quot;&gt;r&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;,
444                 &quot;&quot;&quot;
445                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg1/RegClass.html#searchphrase&quot;&gt;sear\
446                     ch phrase&lt;/a&gt;&lt;/span&gt; - Search tag in class pkg1.RegClass&lt;/dt&gt;&quot;&quot;&quot;,
447                 &quot;&quot;&quot;
448                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg1/RegClass.html#SearchWordWithDesc\
449                     ription&quot;&gt;SearchWordWithDescription&lt;/a&gt;&lt;/span&gt; - Search tag in pkg1.RegClass.CONS\
450                     TANT_FIELD_1&lt;/dt&gt;&quot;&quot;&quot;,
451                 &quot;&quot;&quot;
452                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestAnnotationType.html#searchph\
453                     rasewithdescdeprecated&quot;&gt;search phrase with desc deprecated&lt;/a&gt;&lt;/span&gt; - Search t\
454                     ag in annotation type pkg2.TestAnnotationType&lt;/dt&gt;&quot;&quot;&quot;,
455                 &quot;&quot;&quot;
456                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestClass.html#SearchTagDeprecat\
457                     edClass&quot;&gt;SearchTagDeprecatedClass&lt;/a&gt;&lt;/span&gt; - Search tag in class pkg2.TestClas\
458                     s&lt;/dt&gt;&quot;&quot;&quot;,
459                 &quot;&quot;&quot;
460                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestEnum.html#searchphrasedeprec\
461                     ated&quot;&gt;search phrase deprecated&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestEnum.ONE&lt;/dt&gt;&quot;&quot;&quot;,
462                 &quot;&quot;&quot;
463                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestEnum.html#searchphrasedeprec\
464                     ated&quot;&gt;search phrase deprecated&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestEnum.ONE&lt;/dt&gt;&quot;&quot;&quot;,
465                 &quot;&quot;&quot;
466                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestError.html#SearchTagDeprecat\
467                     edMethod&quot;&gt;SearchTagDeprecatedMethod&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestError.Te\
468                     stError()&lt;/dt&gt;&quot;&quot;&quot;,
469                 &quot;&quot;&quot;
470                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestError.html#SearchTagDeprecat\
471                     edMethod&quot;&gt;SearchTagDeprecatedMethod&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestError.Te\
472                     stError()&lt;/dt&gt;&quot;&quot;&quot;,
473                 &quot;&quot;&quot;
474                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/package-summary.html#SingleWord&quot;&gt;\
475                     SingleWord&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;,
476                 &quot;&quot;&quot;
477                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/AnotherClass.ModalExclusionType.h\
478                     tml#nested%7B@indexnested_tag_test%7D&quot;&gt;nested {@index nested_tag_test}&lt;/a&gt;&lt;/span\
479                     &gt; - Search tag in pkg.AnotherClass.ModalExclusionType.NO_EXCLUDE&lt;/dt&gt;&quot;&quot;&quot;,
480                 &quot;&quot;&quot;
481                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/AnotherClass.ModalExclusionType.html#&quot;&quot;&quot; + html_span_see_span + &quot;&quot;&quot;
482                     &quot;&gt;html &amp;lt;span&amp;gt; see &amp;lt;/span&amp;gt;&lt;/a&gt;&lt;/span&gt; - Search tag in pkg.AnotherClas\
483                     s.ModalExclusionType.APPLICATION_EXCLUDE&lt;/dt&gt;&quot;&quot;&quot;,
484                 &quot;&quot;&quot;
485                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/AnotherClass.html#quoted&quot;&gt;quoted&lt;\
486                     /a&gt;&lt;/span&gt; - Search tag in pkg.AnotherClass.CONSTANT1&lt;/dt&gt;&quot;&quot;&quot;,
487                 &quot;&quot;&quot;
488                     &lt;dt&gt;&lt;span class=&quot;member-name-link&quot;&gt;&lt;a href=&quot;pkg2/TestEnum.html#ONE&quot;&gt;ONE&lt;/a&gt;&lt;/spa\
489                     n&gt; - pkg2.&lt;a href=&quot;pkg2/TestEnum.html&quot; title=&quot;enum in pkg2&quot;&gt;TestEnum&lt;/a&gt;&lt;/dt&gt;&quot;&quot;&quot;,
490                 &quot;&quot;&quot;
491                     &lt;dt&gt;&lt;span class=&quot;member-name-link&quot;&gt;&lt;a href=&quot;pkg2/TestEnum.html#THREE&quot;&gt;THREE&lt;/a&gt;&lt;\
492                     /span&gt; - pkg2.&lt;a href=&quot;pkg2/TestEnum.html&quot; title=&quot;enum in pkg2&quot;&gt;TestEnum&lt;/a&gt;&lt;/dt\
493                     &gt;&quot;&quot;&quot;,
494                 &quot;&quot;&quot;
495                     &lt;dt&gt;&lt;span class=&quot;member-name-link&quot;&gt;&lt;a href=&quot;pkg2/TestEnum.html#TWO&quot;&gt;TWO&lt;/a&gt;&lt;/spa\
496                     n&gt; - pkg2.&lt;a href=&quot;pkg2/TestEnum.html&quot; title=&quot;enum in pkg2&quot;&gt;TestEnum&lt;/a&gt;&lt;/dt&gt;&quot;&quot;&quot;);
497         checkOutput(&quot;index-all.html&quot;, true,
498                 &quot;&quot;&quot;
499                     &lt;div class=&quot;deprecation-comment&quot;&gt;class_test1 passes. Search tag &lt;span id=&quot;Search\
500                     TagDeprecatedClass&quot; class=&quot;search-tag-result&quot;&gt;SearchTagDeprecatedClass&lt;/span&gt;&lt;/d\
501                     iv&gt;&quot;&quot;&quot;,
502                 &quot;&quot;&quot;
503                     &lt;div class=&quot;deprecation-comment&quot;&gt;error_test3 passes. Search tag for
504                      method &lt;span id=&quot;SearchTagDeprecatedMethod&quot; class=&quot;search-tag-result&quot;&gt;SearchTagDeprecatedMethod&lt;/span&gt;&lt;/div&gt;&quot;&quot;&quot;);
505     }
506 
507     void checkSplitIndex() {
508         // Test for search tags markup in split index file.
509         checkOutput(&quot;index-files/index-13.html&quot;, true,
510                 &quot;&quot;&quot;
511                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg1/RegClass.html#searchphrase&quot;&gt;s\
512                     earch phrase&lt;/a&gt;&lt;/span&gt; - Search tag in class pkg1.RegClass&lt;/dt&gt;&quot;&quot;&quot;,
513                 &quot;&quot;&quot;
514                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg1/RegClass.html#SearchWordWithD\
515                     escription&quot;&gt;SearchWordWithDescription&lt;/a&gt;&lt;/span&gt; - Search tag in pkg1.RegClass.C\
516                     ONSTANT_FIELD_1&lt;/dt&gt;&quot;&quot;&quot;,
517                 &quot;&quot;&quot;
518                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg2/TestAnnotationType.html#searc\
519                     hphrasewithdescdeprecated&quot;&gt;search phrase with desc deprecated&lt;/a&gt;&lt;/span&gt; - Searc\
520                     h tag in annotation type pkg2.TestAnnotationType&lt;/dt&gt;&quot;&quot;&quot;,
521                 &quot;&quot;&quot;
522                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg2/TestClass.html#SearchTagDepre\
523                     catedClass&quot;&gt;SearchTagDeprecatedClass&lt;/a&gt;&lt;/span&gt; - Search tag in class pkg2.TestC\
524                     lass&lt;/dt&gt;&quot;&quot;&quot;,
525                 &quot;&quot;&quot;
526                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg2/TestEnum.html#searchphrasedep\
527                     recated&quot;&gt;search phrase deprecated&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestEnum.ONE&lt;/\
528                     dt&gt;&quot;&quot;&quot;,
529                 &quot;&quot;&quot;
530                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg2/TestEnum.html#searchphrasedep\
531                     recated&quot;&gt;search phrase deprecated&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestEnum.ONE&lt;/\
532                     dt&gt;&quot;&quot;&quot;,
533                 &quot;&quot;&quot;
534                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg2/TestError.html#SearchTagDepre\
535                     catedMethod&quot;&gt;SearchTagDeprecatedMethod&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestError\
536                     .TestError()&lt;/dt&gt;&quot;&quot;&quot;,
537                 &quot;&quot;&quot;
538                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg2/TestError.html#SearchTagDepre\
539                     catedMethod&quot;&gt;SearchTagDeprecatedMethod&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestError\
540                     .TestError()&lt;/dt&gt;&quot;&quot;&quot;,
541                 &quot;&quot;&quot;
542                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg/package-summary.html#SingleWor\
543                     d&quot;&gt;SingleWord&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;,
544                 &quot;&quot;&quot;
545                     &lt;br&gt;&lt;a href=&quot;../allclasses-index.html&quot;&gt;All&amp;nbsp;Classes&lt;/a&gt;&lt;span class=&quot;vertical\
546                     -separator&quot;&gt;|&lt;/span&gt;&lt;a href=&quot;../allpackages-index.html&quot;&gt;All&amp;nbsp;Packages&lt;/a&gt;&quot;&quot;&quot;);
547         checkOutput(&quot;index-files/index-10.html&quot;, true,
548                 &quot;&quot;&quot;
549                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg/package-summary.html#phrasewit\
550                     hspaces&quot;&gt;phrase with spaces&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;,
551                 &quot;&quot;&quot;
552                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg/package-summary.html#pkg&quot;&gt;pkg&lt;\
553                     /a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;,
554                 &quot;&quot;&quot;
555                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg/package-summary.html#pkg2.5&quot;&gt;p\
556                     kg2.5&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;);
557         checkOutput(&quot;index-files/index-12.html&quot;, true,
558                 &quot;&quot;&quot;
559                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg/package-summary.html#r&quot;&gt;r&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;);
560         checkOutput(&quot;index-files/index-8.html&quot;, true,
561                 &quot;&quot;&quot;
562                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg/AnotherClass.ModalExclusionTyp\
563                     e.html#nested%7B@indexnested_tag_test%7D&quot;&gt;nested {@index nested_tag_test}&lt;/a&gt;&lt;/s\
564                     pan&gt; - Search tag in pkg.AnotherClass.ModalExclusionType.NO_EXCLUDE&lt;/dt&gt;&quot;&quot;&quot;);
565         checkOutput(&quot;index-files/index-5.html&quot;, true,
566                 &quot;&quot;&quot;
567                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg/AnotherClass.ModalExclusionTyp\
568                     e.html#html%3Cspan%3Esee%3C/span%3E&quot;&gt;html &amp;lt;span&amp;gt; see &amp;lt;/span&amp;gt;&lt;/a&gt;&lt;/sp\
569                     an&gt; - Search tag in pkg.AnotherClass.ModalExclusionType.APPLICATION_EXCLUDE&lt;/dt&gt;&quot;&quot;&quot;);
570         checkOutput(&quot;index-files/index-11.html&quot;, true,
571                 &quot;&quot;&quot;
572                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg/AnotherClass.html#quoted&quot;&gt;quot\
573                     ed&lt;/a&gt;&lt;/span&gt; - Search tag in pkg.AnotherClass.CONSTANT1&lt;/dt&gt;&quot;&quot;&quot;);
574         checkOutput(&quot;index-files/index-9.html&quot;, true,
575                 &quot;&quot;&quot;
576                     &lt;dt&gt;&lt;span class=&quot;member-name-link&quot;&gt;&lt;a href=&quot;../pkg2/TestEnum.html#ONE&quot;&gt;ONE&lt;/a&gt;&lt;/\
577                     span&gt; - pkg2.&lt;a href=&quot;../pkg2/TestEnum.html&quot; title=&quot;enum in pkg2&quot;&gt;TestEnum&lt;/a&gt;&lt;/\
578                     dt&gt;&quot;&quot;&quot;);
579         checkOutput(&quot;index-files/index-14.html&quot;, true,
580                 &quot;&quot;&quot;
581                     &lt;dt&gt;&lt;span class=&quot;member-name-link&quot;&gt;&lt;a href=&quot;../pkg2/TestEnum.html#THREE&quot;&gt;THREE&lt;/\
582                     a&gt;&lt;/span&gt; - pkg2.&lt;a href=&quot;../pkg2/TestEnum.html&quot; title=&quot;enum in pkg2&quot;&gt;TestEnum&lt;/\
583                     a&gt;&lt;/dt&gt;&quot;&quot;&quot;,
584                 &quot;&quot;&quot;
585                     &lt;dt&gt;&lt;span class=&quot;member-name-link&quot;&gt;&lt;a href=&quot;../pkg2/TestEnum.html#TWO&quot;&gt;TWO&lt;/a&gt;&lt;/\
586                     span&gt; - pkg2.&lt;a href=&quot;../pkg2/TestEnum.html&quot; title=&quot;enum in pkg2&quot;&gt;TestEnum&lt;/a&gt;&lt;/\
587                     dt&gt;&quot;&quot;&quot;);
588     }
589 
590     void checkIndexNoComment() {
591         // Test for search tags markup in index file when javadoc is executed with -nocomment.
592         checkOutput(&quot;index-all.html&quot;, false,
593                 &quot;&quot;&quot;
594                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/package-summary.html#phrasewithsp\
595                     aces&quot;&gt;phrase with spaces&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;,
596                 &quot;&quot;&quot;
597                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/package-summary.html#pkg&quot;&gt;pkg&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;,
598                 &quot;&quot;&quot;
599                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/package-summary.html#pkg2.5&quot;&gt;pkg2\
600                     .5&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;,
601                 &quot;&quot;&quot;
602                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/package-summary.html#r&quot;&gt;r&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;,
603                 &quot;&quot;&quot;
604                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg1/RegClass.html#searchphrase&quot;&gt;sear\
605                     ch phrase&lt;/a&gt;&lt;/span&gt; - Search tag in class pkg1.RegClass&lt;/dt&gt;&quot;&quot;&quot;,
606                 &quot;&quot;&quot;
607                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg1/RegClass.html#SearchWordWithDesc\
608                     ription&quot;&gt;SearchWordWithDescription&lt;/a&gt;&lt;/span&gt; - Search tag in pkg1.RegClass.CONS\
609                     TANT_FIELD_1&lt;/dt&gt;&quot;&quot;&quot;,
610                 &quot;&quot;&quot;
611                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestAnnotationType.html#searchph\
612                     rasewithdescdeprecated&quot;&gt;search phrase with desc deprecated&lt;/a&gt;&lt;/span&gt; - Search t\
613                     ag in annotation type pkg2.TestAnnotationType&lt;/dt&gt;&quot;&quot;&quot;,
614                 &quot;&quot;&quot;
615                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestClass.html#SearchTagDeprecat\
616                     edClass&quot;&gt;SearchTagDeprecatedClass&lt;/a&gt;&lt;/span&gt; - Search tag in class pkg2.TestClas\
617                     s&lt;/dt&gt;&quot;&quot;&quot;,
618                 &quot;&quot;&quot;
619                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/package-summary.html#SingleWord&quot;&gt;\
620                     SingleWord&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;,
621                 &quot;&quot;&quot;
622                     &lt;div class=&quot;deprecation-comment&quot;&gt;class_test1 passes. Search tag &lt;span id=&quot;Search\
623                     TagDeprecatedClass&quot;&gt;SearchTagDeprecatedClass&lt;/span&gt;&lt;/div&gt;&quot;&quot;&quot;,
624                 &quot;&quot;&quot;
625                     &lt;div class=&quot;deprecation-comment&quot;&gt;error_test3 passes. Search tag for
626                      method &lt;span id=&quot;SearchTagDeprecatedMethod&quot;&gt;SearchTagDeprecatedMethod&lt;/span&gt;&lt;/div&gt;&quot;&quot;&quot;);
627         checkOutput(&quot;index-all.html&quot;, true,
628                 &quot;&quot;&quot;
629                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestEnum.html#searchphrasedeprec\
630                     ated&quot;&gt;search phrase deprecated&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestEnum.ONE&lt;/dt&gt;&quot;&quot;&quot;,
631                 &quot;&quot;&quot;
632                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestError.html#SearchTagDeprecat\
633                     edMethod&quot;&gt;SearchTagDeprecatedMethod&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestError.Te\
634                     stError()&lt;/dt&gt;&quot;&quot;&quot;);
635     }
636 
637     void checkIndexNoDeprecated() {
638         // Test for search tags markup in index file when javadoc is executed using -nodeprecated.
639         checkOutput(&quot;index-all.html&quot;, true,
640                 &quot;&quot;&quot;
641                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/package-summary.html#phrasewithsp\
642                     aces&quot;&gt;phrase with spaces&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;,
643                 &quot;&quot;&quot;
644                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg1/RegClass.html#searchphrase&quot;&gt;sear\
645                     ch phrase&lt;/a&gt;&lt;/span&gt; - Search tag in class pkg1.RegClass&lt;/dt&gt;&quot;&quot;&quot;,
646                 &quot;&quot;&quot;
647                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg1/RegClass.html#SearchWordWithDesc\
648                     ription&quot;&gt;SearchWordWithDescription&lt;/a&gt;&lt;/span&gt; - Search tag in pkg1.RegClass.CONS\
649                     TANT_FIELD_1&lt;/dt&gt;&quot;&quot;&quot;,
650                 &quot;&quot;&quot;
651                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg/package-summary.html#SingleWord&quot;&gt;\
652                     SingleWord&lt;/a&gt;&lt;/span&gt; - Search tag in package pkg&lt;/dt&gt;&quot;&quot;&quot;);
653         checkOutput(&quot;index-all.html&quot;, false,
654                 &quot;&quot;&quot;
655                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestAnnotationType.html#searchph\
656                     rasewithdescdeprecated&quot;&gt;search phrase with desc deprecated&lt;/a&gt;&lt;/span&gt; - Search t\
657                     ag in annotation type pkg2.TestAnnotationType&lt;/dt&gt;&quot;&quot;&quot;,
658                 &quot;&quot;&quot;
659                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestClass.html#SearchTagDeprecat\
660                     edClass&quot;&gt;SearchTagDeprecatedClass&lt;/a&gt;&lt;/span&gt; - Search tag in class pkg2.TestClas\
661                     s&lt;/dt&gt;&quot;&quot;&quot;,
662                 &quot;&quot;&quot;
663                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestEnum.html#searchphrasedeprec\
664                     ated&quot;&gt;search phrase deprecated&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestEnum.ONE&lt;/dt&gt;&quot;&quot;&quot;,
665                 &quot;&quot;&quot;
666                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestError.html#SearchTagDeprecat\
667                     edMethod&quot;&gt;SearchTagDeprecatedMethod&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestError.Te\
668                     stError()&lt;/dt&gt;&quot;&quot;&quot;,
669                 &quot;&quot;&quot;
670                     &lt;div class=&quot;deprecation-comment&quot;&gt;class_test1 passes. Search tag &lt;span id=&quot;Search\
671                     TagDeprecatedClass&quot;&gt;SearchTagDeprecatedClass&lt;/span&gt;&lt;/div&gt;&quot;&quot;&quot;,
672                 &quot;&quot;&quot;
673                     &lt;div class=&quot;deprecation-comment&quot;&gt;error_test3 passes. Search tag for
674                      method &lt;span id=&quot;SearchTagDeprecatedMethod&quot;&gt;SearchTagDeprecatedMethod&lt;/span&gt;&lt;/div&gt;&quot;&quot;&quot;);
675     }
676 
677     void checkJavaFXOutput() {
678         checkOutput(&quot;index-all.html&quot;, false, &quot;test treat as private&quot;);
679     }
680 
681     void checkInvalidUsageIndexTag() {
682         checkOutput(Output.OUT, true,
683                 &quot;AnotherClass.java:29: warning - invalid usage of tag {@index&quot;,
684                 &quot;AnotherClass.java:39: warning - invalid usage of tag {@index&quot;,
685                 &quot;AnotherClass.java:34: warning - invalid usage of tag {@index&quot;,
686                 &quot;AnotherClass.java:68: warning - invalid usage of tag {@index&quot;);
687     }
688 
689     void checkJqueryAndImageFiles(boolean expectedOutput) {
690         checkFiles(expectedOutput,
691                 &quot;search.js&quot;,
<a name="4" id="anc4"></a><span class="line-modified">692                 &quot;script-dir/jquery-3.4.1.js&quot;,</span>
<span class="line-modified">693                 &quot;script-dir/jquery-ui.js&quot;,</span>
<span class="line-removed">694                 &quot;script-dir/jquery-ui.css&quot;,</span>
695                 &quot;script-dir/jquery-ui.min.js&quot;,
696                 &quot;script-dir/jquery-ui.min.css&quot;,
697                 &quot;script-dir/jquery-ui.structure.min.css&quot;,
<a name="5" id="anc5"></a><span class="line-removed">698                 &quot;script-dir/jquery-ui.structure.css&quot;,</span>
699                 &quot;script-dir/images/ui-bg_glass_65_dadada_1x400.png&quot;,
700                 &quot;script-dir/images/ui-icons_454545_256x240.png&quot;,
701                 &quot;script-dir/images/ui-bg_glass_95_fef1ec_1x400.png&quot;,
702                 &quot;script-dir/images/ui-bg_glass_75_dadada_1x400.png&quot;,
703                 &quot;script-dir/images/ui-bg_highlight-soft_75_cccccc_1x100.png&quot;,
704                 &quot;script-dir/images/ui-icons_888888_256x240.png&quot;,
705                 &quot;script-dir/images/ui-icons_2e83ff_256x240.png&quot;,
706                 &quot;script-dir/images/ui-icons_cd0a0a_256x240.png&quot;,
707                 &quot;script-dir/images/ui-bg_glass_55_fbf9ee_1x400.png&quot;,
708                 &quot;script-dir/images/ui-icons_222222_256x240.png&quot;,
709                 &quot;script-dir/images/ui-bg_glass_75_e6e6e6_1x400.png&quot;,
710                 &quot;resources/x.png&quot;,
711                 &quot;resources/glass.png&quot;);
712     }
713 
714     void checkSearchJS() {
715         checkOutput(&quot;search.js&quot;, true,
716                 &quot;function concatResults(a1, a2) {&quot;,
717                 &quot;&quot;&quot;
718                     $(&quot;#search&quot;).on(&#39;click keydown paste&#39;, function() {
719                             if ($(this).val() == watermark) {
720                                 $(this).val(&#39;&#39;).removeClass(&#39;watermark&#39;);
721                             }
722                         });&quot;&quot;&quot;,
723                 &quot;&quot;&quot;
724                     function getURLPrefix(ui) {
725                         var urlPrefix=&quot;&quot;;
726                         var slash = &quot;/&quot;;
727                         if (ui.item.category === catModules) {
728                             return ui.item.l + slash;
729                         } else if (ui.item.category === catPackages &amp;&amp; ui.item.m) {
730                             return ui.item.m + slash;
731                         } else if ((ui.item.category === catTypes &amp;&amp; ui.item.p) || ui.item.category === catMembers) {
732                             $.each(packageSearchIndex, function(index, item) {
733                                 if (item.m &amp;&amp; ui.item.p == item.l) {
734                                     urlPrefix = item.m + slash;
735                                 }
736                             });
737                             return urlPrefix;
738                         } else {
739                             return urlPrefix;
740                         }
741                         return urlPrefix;
742                     }&quot;&quot;&quot;,
743                 &quot;url += ui.item.l;&quot;);
744 
745         checkCssClasses(&quot;search.js&quot;, &quot;stylesheet.css&quot;);
746     }
747 
748     void checkCssClasses(String jsFile, String cssFile) {
749         // Check that all CSS class names mentioned in the JavaScript file
750         // are also defined as class selectors somewhere in the stylesheet file.
751         String js = readOutputFile(jsFile);
752         Set&lt;String&gt; cssClasses = new TreeSet&lt;&gt;();
753         addMatches(js, Pattern.compile(&quot;class=\\\\*\&quot;([^\\\\\&quot;]+)\\\\*\&quot;&quot;), cssClasses);
754         addMatches(js, Pattern.compile(&quot;attr\\(\&quot;class\&quot;, \&quot;([^\&quot;]+)\&quot;\\)&quot;), cssClasses);
755         // verify that the regex did find use of CSS class names
756         checking(&quot;Checking CSS classes found&quot;);
757         if (cssClasses.isEmpty()) {
758             failed(&quot;no CSS classes found&quot;);
759         } else {
760             passed(cssClasses.size() + &quot; found: &quot; + cssClasses);
761         }
762         checkOutput(cssFile, true, cssClasses.toArray(new String[0]));
763     }
764 
765     void addMatches(String js, Pattern p, Set&lt;String&gt; cssClasses) {
766         Matcher m = p.matcher(js);
767         while (m.find()) {
768             cssClasses.add(&quot;.&quot; + m.group(1));
769         }
770     }
771 
772     void checkSingleIndexSearchTagDuplication() {
773         // Test for search tags duplication in index file.
774         checkOutput(&quot;index-all.html&quot;, true,
775                 &quot;&quot;&quot;
776                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestError.html#SearchTagDeprecat\
777                     edMethod&quot;&gt;SearchTagDeprecatedMethod&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestError.Te\
778                     stError()&lt;/dt&gt;
779                     &lt;dd&gt;with description&lt;/dd&gt;&quot;&quot;&quot;);
780         checkOutput(&quot;index-all.html&quot;, false,
781                 &quot;&quot;&quot;
782                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestError.html#SearchTagDeprecat\
783                     edMethod&quot;&gt;SearchTagDeprecatedMethod&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestError.Te\
784                     stError()&lt;/dt&gt;
785                     &lt;dd&gt;with description&lt;/dd&gt;
786                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;pkg2/TestError.html#SearchTagDeprecat\
787                     edMethod&quot;&gt;SearchTagDeprecatedMethod&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestError.Te\
788                     stError()&lt;/dt&gt;
789                     &lt;dd&gt;with description&lt;/dd&gt;&quot;&quot;&quot;);
790     }
791 
792     void checkSplitIndexSearchTagDuplication() {
793         // Test for search tags duplication in index file.
794         checkOutput(&quot;index-files/index-13.html&quot;, true,
795                 &quot;&quot;&quot;
796                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg2/TestError.html#SearchTagDepre\
797                     catedMethod&quot;&gt;SearchTagDeprecatedMethod&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestError\
798                     .TestError()&lt;/dt&gt;
799                     &lt;dd&gt;with description&lt;/dd&gt;&quot;&quot;&quot;);
800         checkOutput(&quot;index-files/index-13.html&quot;, false,
801                 &quot;&quot;&quot;
802                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg2/TestError.html#SearchTagDepre\
803                     catedMethod&quot;&gt;SearchTagDeprecatedMethod&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestError\
804                     .TestError()&lt;/dt&gt;
805                     &lt;dd&gt;with description&lt;/dd&gt;
806                     &lt;dt&gt;&lt;span class=&quot;search-tag-link&quot;&gt;&lt;a href=&quot;../pkg2/TestError.html#SearchTagDepre\
807                     catedMethod&quot;&gt;SearchTagDeprecatedMethod&lt;/a&gt;&lt;/span&gt; - Search tag in pkg2.TestError\
808                     .TestError()&lt;/dt&gt;
809                     &lt;dd&gt;with description&lt;/dd&gt;&quot;&quot;&quot;);
810     }
811 
812     void checkAllPkgsAllClasses() {
813         checkOutput(&quot;allclasses-index.html&quot;, true,
814                 &quot;&quot;&quot;
815                     &lt;div class=&quot;type-summary&quot; id=&quot;all-classes-table&quot;&gt;
816                     &lt;div class=&quot;table-tabs&quot; role=&quot;tablist&quot; aria-orientation=&quot;horizontal&quot;&gt;&lt;button rol\
817                     e=&quot;tab&quot; aria-selected=&quot;true&quot; aria-controls=&quot;all-classes-table.tabpanel&quot; tabindex\
818                     =&quot;0&quot; onkeydown=&quot;switchTab(event)&quot; id=&quot;t0&quot; class=&quot;active-table-tab&quot;&gt;All Classes&lt;/\
819                     button&gt;&lt;button role=&quot;tab&quot; aria-selected=&quot;false&quot; aria-controls=&quot;all-classes-table\
820                     .tabpanel&quot; tabindex=&quot;-1&quot; onkeydown=&quot;switchTab(event)&quot; id=&quot;t1&quot; class=&quot;table-tab&quot; \
821                     onclick=&quot;show(1);&quot;&gt;Interface Summary&lt;/button&gt;&lt;button role=&quot;tab&quot; aria-selected=&quot;f\
822                     alse&quot; aria-controls=&quot;all-classes-table.tabpanel&quot; tabindex=&quot;-1&quot; onkeydown=&quot;switch\
823                     Tab(event)&quot; id=&quot;t2&quot; class=&quot;table-tab&quot; onclick=&quot;show(2);&quot;&gt;Class Summary&lt;/button&gt;&lt;\
824                     button role=&quot;tab&quot; aria-selected=&quot;false&quot; aria-controls=&quot;all-classes-table.tabpane\
825                     l&quot; tabindex=&quot;-1&quot; onkeydown=&quot;switchTab(event)&quot; id=&quot;t3&quot; class=&quot;table-tab&quot; onclick=\
826                     &quot;show(4);&quot;&gt;Enum Summary&lt;/button&gt;&lt;button role=&quot;tab&quot; aria-selected=&quot;false&quot; aria-co\
827                     ntrols=&quot;all-classes-table.tabpanel&quot; tabindex=&quot;-1&quot; onkeydown=&quot;switchTab(event)&quot; i\
828                     d=&quot;t4&quot; class=&quot;table-tab&quot; onclick=&quot;show(8);&quot;&gt;Exception Summary&lt;/button&gt;&lt;button ro\
829                     le=&quot;tab&quot; aria-selected=&quot;false&quot; aria-controls=&quot;all-classes-table.tabpanel&quot; tabind\
830                     ex=&quot;-1&quot; onkeydown=&quot;switchTab(event)&quot; id=&quot;t5&quot; class=&quot;table-tab&quot; onclick=&quot;show(16)\
831                     ;&quot;&gt;Error Summary&lt;/button&gt;&lt;button role=&quot;tab&quot; aria-selected=&quot;false&quot; aria-controls=\
832                     &quot;all-classes-table.tabpanel&quot; tabindex=&quot;-1&quot; onkeydown=&quot;switchTab(event)&quot; id=&quot;t6&quot; \
833                     class=&quot;table-tab&quot; onclick=&quot;show(32);&quot;&gt;Annotation Types Summary&lt;/button&gt;&lt;/div&gt;
834                     &lt;div id=&quot;all-classes-table.tabpanel&quot; role=&quot;tabpanel&quot;&gt;
835                     &lt;table class=&quot;summary-table&quot; aria-labelledby=&quot;t0&quot;&gt;
836                     &lt;thead&gt;
837                     &lt;tr&gt;
838                     &lt;th class=&quot;col-first&quot; scope=&quot;col&quot;&gt;Class&lt;/th&gt;
839                     &lt;th class=&quot;col-last&quot; scope=&quot;col&quot;&gt;Description&lt;/th&gt;
840                     &lt;/tr&gt;&quot;&quot;&quot;,
841                 &quot;&quot;&quot;
842                     var data = {&quot;i0&quot;:32,&quot;i1&quot;:2,&quot;i2&quot;:4,&quot;i3&quot;:2,&quot;i4&quot;:2,&quot;i5&quot;:1,&quot;i6&quot;:2,&quot;i7&quot;:32,&quot;i8&quot;:2,&quot;i9\
843                     &quot;:4,&quot;i10&quot;:16,&quot;i11&quot;:16,&quot;i12&quot;:8,&quot;i13&quot;:8,&quot;i14&quot;:1,&quot;i15&quot;:2};&quot;&quot;&quot;);
844         checkOutput(&quot;allpackages-index.html&quot;, true,
845                 &quot;&quot;&quot;
846                     &lt;div class=&quot;packages-summary&quot;&gt;
847                     &lt;table class=&quot;summary-table&quot;&gt;
848                     &lt;caption&gt;&lt;span&gt;Package Summary&lt;/span&gt;&lt;/caption&gt;
849                     &lt;thead&gt;
850                     &lt;tr&gt;
851                     &lt;th class=&quot;col-first&quot; scope=&quot;col&quot;&gt;Package&lt;/th&gt;
852                     &lt;th class=&quot;col-last&quot; scope=&quot;col&quot;&gt;Description&lt;/th&gt;
853                     &lt;/tr&gt;
854                     &quot;&quot;&quot;);
855         checkOutput(&quot;type-search-index.js&quot;, true,
856                 &quot;&quot;&quot;
857                     {&quot;l&quot;:&quot;All Classes&quot;,&quot;u&quot;:&quot;allclasses-index.html&quot;}&quot;&quot;&quot;);
858         checkOutput(&quot;package-search-index.js&quot;, true,
859                 &quot;&quot;&quot;
860                     {&quot;l&quot;:&quot;All Packages&quot;,&quot;u&quot;:&quot;allpackages-index.html&quot;}&quot;&quot;&quot;);
861         checkOutput(&quot;index-all.html&quot;, true,
862                     &quot;&quot;&quot;
863                         &lt;br&gt;&lt;a href=&quot;allclasses-index.html&quot;&gt;All&amp;nbsp;Classes&lt;/a&gt;&lt;span class=&quot;vertical-se\
864                         parator&quot;&gt;|&lt;/span&gt;&lt;a href=&quot;allpackages-index.html&quot;&gt;All&amp;nbsp;Packages&lt;/a&gt;&quot;&quot;&quot;);
865     }
866 }
<a name="6" id="anc6"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="6" type="hidden" />
</body>
</html>