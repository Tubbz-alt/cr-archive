diff a/test/jdk/java/lang/invoke/DefineClassTest.java b/test/jdk/java/lang/invoke/DefineClassTest.java
--- a/test/jdk/java/lang/invoke/DefineClassTest.java
+++ b/test/jdk/java/lang/invoke/DefineClassTest.java
@@ -240,10 +240,15 @@
     @Test(expectedExceptions = { NoClassDefFoundError.class })
     public void testLinking() throws Exception {
         lookup().defineClass(generateNonLinkableClass(THIS_PACKAGE + ".NonLinkableClass"));
     }
 
+    @Test(expectedExceptions = { IllegalArgumentException.class })
+    public void testModuleInfo() throws Exception {
+        lookup().defineClass(generateModuleInfo());
+    }
+
     /**
      * Generates a class file with the given class name
      */
     byte[] generateClass(String className) {
         ClassWriter cw = new ClassWriter(ClassWriter.COMPUTE_MAXS
@@ -364,10 +369,27 @@
 
         cw.visitEnd();
         return cw.toByteArray();
     }
 
+    /**
+     * Generates a class file with the given class name
+     */
+    byte[] generateModuleInfo() {
+        ClassWriter cw = new ClassWriter(ClassWriter.COMPUTE_MAXS
+                + ClassWriter.COMPUTE_FRAMES);
+        cw.visit(V14,
+                ACC_MODULE,
+                "module-info",
+                null,
+                null,
+                null);
+
+        cw.visitEnd();
+        return cw.toByteArray();
+    }
+
     private int nextNumber() {
         return ++nextNumber;
     }
 
     private int nextNumber;
