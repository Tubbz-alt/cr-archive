<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/tools/jpackage/helpers/jdk/jpackage/test/Executor.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../sun/security/tools/keytool/fakegen/java.base/sun/security/rsa/RSAKeyPairGenerator.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../junit/jdk/incubator/jpackage/internal/CompareDottedVersionTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/tools/jpackage/helpers/jdk/jpackage/test/Executor.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
221     public Result executeAndRepeatUntilExitCode(int expectedCode, int max, int wait) {
222         Result result;
223         int count = 0;
224 
225         do {
226             result = executeWithoutExitCodeCheck();
227             if (result.getExitCode() == expectedCode) {
228                 return result;
229             }
230 
231             try {
232                 Thread.sleep(wait * 1000);
233             } catch (Exception ex) {} // Ignore
234 
235             count++;
236         } while (count &lt; max);
237 
238         return result.assertExitCodeIs(expectedCode);
239     }
240 




241     private boolean withSavedOutput() {
242         return saveOutputType.contains(SaveOutputType.FULL) || saveOutputType.contains(
243                 SaveOutputType.FIRST_LINE);
244     }
245 
246     private Path executablePath() {
247         if (directory == null
248                 || executable.isAbsolute()
249                 || !Set.of(&quot;.&quot;, &quot;..&quot;).contains(executable.getName(0).toString())) {
250             return executable;
251         }
252 
253         // If relative path to executable is used it seems to be broken when
254         // ProcessBuilder changes the directory. On Windows it changes the
255         // directory first and on Linux it looks up for executable before
256         // changing the directory. So to stay of safe side, use absolute path
257         // to executable.
258         return executable.toAbsolutePath();
259     }
260 
</pre>
</td>
<td>
<hr />
<pre>
221     public Result executeAndRepeatUntilExitCode(int expectedCode, int max, int wait) {
222         Result result;
223         int count = 0;
224 
225         do {
226             result = executeWithoutExitCodeCheck();
227             if (result.getExitCode() == expectedCode) {
228                 return result;
229             }
230 
231             try {
232                 Thread.sleep(wait * 1000);
233             } catch (Exception ex) {} // Ignore
234 
235             count++;
236         } while (count &lt; max);
237 
238         return result.assertExitCodeIs(expectedCode);
239     }
240 
<span class="line-added">241     public List&lt;String&gt; executeWithoutExitCodeCheckAndGetOutput() {</span>
<span class="line-added">242         return saveOutput().executeWithoutExitCodeCheck().getOutput();</span>
<span class="line-added">243     }</span>
<span class="line-added">244 </span>
245     private boolean withSavedOutput() {
246         return saveOutputType.contains(SaveOutputType.FULL) || saveOutputType.contains(
247                 SaveOutputType.FIRST_LINE);
248     }
249 
250     private Path executablePath() {
251         if (directory == null
252                 || executable.isAbsolute()
253                 || !Set.of(&quot;.&quot;, &quot;..&quot;).contains(executable.getName(0).toString())) {
254             return executable;
255         }
256 
257         // If relative path to executable is used it seems to be broken when
258         // ProcessBuilder changes the directory. On Windows it changes the
259         // directory first and on Linux it looks up for executable before
260         // changing the directory. So to stay of safe side, use absolute path
261         // to executable.
262         return executable.toAbsolutePath();
263     }
264 
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../sun/security/tools/keytool/fakegen/java.base/sun/security/rsa/RSAKeyPairGenerator.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../junit/jdk/incubator/jpackage/internal/CompareDottedVersionTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>