<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/hotspot/jtreg/vmTestbase/gc/gctests/gctest04/gctest04.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../gctest03/gctest03.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../nativeGC05/nativeGC05.java.udiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/vmTestbase/gc/gctests/gctest04/gctest04.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2002, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2002, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -22,11 +22,11 @@</span>
   */
  
  
  /*
   * @test
<span class="udiff-line-modified-removed">-  * @key gc</span>
<span class="udiff-line-modified-added">+  * @key gc randomness</span>
   *
   * @summary converted from VM Testbase gc/gctests/gctest04.
   * VM Testbase keywords: [gc]
   *
   * @library /vmTestbase
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -40,24 +40,19 @@</span>
  
  import nsk.share.test.*;
  import nsk.share.TestFailure;
  //gctest04.java
  
<span class="udiff-line-removed">- //import queue;</span>
<span class="udiff-line-removed">- //import LocalRandom;</span>
<span class="udiff-line-removed">- import java.util.Random;</span>
  import nsk.share.TestBug;
  import nsk.share.TestFailure;
  
  
  // small objects ( 8 ~ 32k), short live time ( 5 ~ 10 ms)
  public class gctest04 {
    public static void main(String args[] )
    {
      int queueLimit = 1000;
<span class="udiff-line-removed">-     long randomSeed = System.currentTimeMillis();</span>
<span class="udiff-line-removed">- </span>
      if (args.length &gt; 0)
      {
          try
          {
              queueLimit = new Integer(args[0]).intValue();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -67,26 +62,10 @@</span>
              throw new TestBug(&quot;Bad input to gctest04. Expected integer, &quot; +
                              &quot; got: -&gt;&quot; + args[0] + &quot;&lt;-&quot;, e);
          }
      }
  
<span class="udiff-line-removed">-     if (args.length == 2)</span>
<span class="udiff-line-removed">-     {</span>
<span class="udiff-line-removed">-         try</span>
<span class="udiff-line-removed">-         {</span>
<span class="udiff-line-removed">-             randomSeed = new Long(args[1]).longValue();</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-removed">-         catch (NumberFormatException e)</span>
<span class="udiff-line-removed">-         {</span>
<span class="udiff-line-removed">-             throw new TestFailure(&quot;Bad input to gctest04. Expected long, got: -&gt;&quot; +</span>
<span class="udiff-line-removed">-  args[0] + &quot;&lt;-&quot;, e);</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     System.out.println(&quot;Seed value: &quot; + randomSeed);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- </span>
  
      queue  requestque = new queue(queueLimit);
      reqgen  gen = new reqgen(requestque, 5);
      gen.setsize(8, 32*1024);
      gen.setlive(5, 10);
</pre>
<center><a href="../gctest03/gctest03.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../nativeGC05/nativeGC05.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>