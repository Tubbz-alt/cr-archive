<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/io/ObjectInputStream.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../hotspot/share/utilities/vmError.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../lang/Class.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/io/ObjectInputStream.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
2169 
2170         Object obj;
2171         try {
2172             obj = desc.isInstantiable() ? desc.newInstance() : null;
2173         } catch (Exception ex) {
2174             throw (IOException) new InvalidClassException(
2175                 desc.forClass().getName(),
2176                 &quot;unable to create instance&quot;).initCause(ex);
2177         }
2178 
2179         passHandle = handles.assign(unshared ? unsharedMarker : obj);
2180         ClassNotFoundException resolveEx = desc.getResolveException();
2181         if (resolveEx != null) {
2182             handles.markException(passHandle, resolveEx);
2183         }
2184 
2185         final boolean isRecord = cl != null &amp;&amp; isRecord(cl) ? true : false;
2186         if (isRecord) {
2187             assert obj == null;
2188             obj = readRecord(desc);
<span class="line-modified">2189             handles.setObject(passHandle, obj);</span>

2190         } else if (desc.isExternalizable()) {
2191             readExternalData((Externalizable) obj, desc);
2192         } else {
2193             readSerialData(obj, desc);
2194         }
2195 
2196         handles.finish(passHandle);
2197 
2198         if (obj != null &amp;&amp;
2199             handles.lookupException(passHandle) == null &amp;&amp;
2200             desc.hasReadResolveMethod())
2201         {
2202             Object rep = desc.invokeReadResolve(obj);
2203             if (unshared &amp;&amp; rep.getClass().isArray()) {
2204                 rep = cloneArray(rep);
2205             }
2206             if (rep != obj) {
2207                 // Filter the replacement object
2208                 if (rep != null) {
2209                     if (rep.getClass().isArray()) {
</pre>
</td>
<td>
<hr />
<pre>
2169 
2170         Object obj;
2171         try {
2172             obj = desc.isInstantiable() ? desc.newInstance() : null;
2173         } catch (Exception ex) {
2174             throw (IOException) new InvalidClassException(
2175                 desc.forClass().getName(),
2176                 &quot;unable to create instance&quot;).initCause(ex);
2177         }
2178 
2179         passHandle = handles.assign(unshared ? unsharedMarker : obj);
2180         ClassNotFoundException resolveEx = desc.getResolveException();
2181         if (resolveEx != null) {
2182             handles.markException(passHandle, resolveEx);
2183         }
2184 
2185         final boolean isRecord = cl != null &amp;&amp; isRecord(cl) ? true : false;
2186         if (isRecord) {
2187             assert obj == null;
2188             obj = readRecord(desc);
<span class="line-modified">2189             if (!unshared)</span>
<span class="line-added">2190                 handles.setObject(passHandle, obj);</span>
2191         } else if (desc.isExternalizable()) {
2192             readExternalData((Externalizable) obj, desc);
2193         } else {
2194             readSerialData(obj, desc);
2195         }
2196 
2197         handles.finish(passHandle);
2198 
2199         if (obj != null &amp;&amp;
2200             handles.lookupException(passHandle) == null &amp;&amp;
2201             desc.hasReadResolveMethod())
2202         {
2203             Object rep = desc.invokeReadResolve(obj);
2204             if (unshared &amp;&amp; rep.getClass().isArray()) {
2205                 rep = cloneArray(rep);
2206             }
2207             if (rep != obj) {
2208                 // Filter the replacement object
2209                 if (rep != null) {
2210                     if (rep.getClass().isArray()) {
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../hotspot/share/utilities/vmError.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../lang/Class.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>