<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.compiler/share/classes/com/sun/tools/javac/code/Flags.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../api/JavacTrees.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Preview.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/com/sun/tools/javac/code/Flags.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
349      * Flag to indicate that a class is a record. The flag is also used to mark fields that are
350      * part of the state vector of a record and to mark the canonical constructor
351      */
352     public static final long RECORD = 1L&lt;&lt;61; // ClassSymbols, MethodSymbols and VarSymbols
353 
354     /**
355      * Flag to mark a record constructor as a compact one
356      */
357     public static final long COMPACT_RECORD_CONSTRUCTOR = 1L&lt;&lt;51; // MethodSymbols only
358 
359     /**
360      * Flag to mark a record field that was not initialized in the compact constructor
361      */
362     public static final long UNINITIALIZED_FIELD= 1L&lt;&lt;51; // VarSymbols only
363 
364     /** Flag is set for compiler-generated record members, it could be applied to
365      *  accessors and fields
366      */
367     public static final int GENERATED_MEMBER = 1&lt;&lt;24; // MethodSymbols and VarSymbols
368 










369     /** Modifier masks.
370      */
371     public static final int
372         AccessFlags           = PUBLIC | PROTECTED | PRIVATE,
373         LocalClassFlags       = FINAL | ABSTRACT | STRICTFP | ENUM | SYNTHETIC,
374         StaticLocalFlags      = LocalClassFlags | STATIC | INTERFACE | ANNOTATION,
375         MemberClassFlags      = LocalClassFlags | INTERFACE | AccessFlags,
376         MemberRecordFlags     = MemberClassFlags | STATIC,
377         ClassFlags            = LocalClassFlags | INTERFACE | PUBLIC | ANNOTATION,
378         InterfaceVarFlags     = FINAL | STATIC | PUBLIC,
379         VarFlags              = AccessFlags | FINAL | STATIC |
380                                 VOLATILE | TRANSIENT | ENUM,
381         ConstructorFlags      = AccessFlags,
382         InterfaceMethodFlags  = ABSTRACT | PUBLIC,
383         MethodFlags           = AccessFlags | ABSTRACT | STATIC | NATIVE |
384                                 SYNCHRONIZED | FINAL | STRICTFP,
385         RecordMethodFlags     = AccessFlags | ABSTRACT | STATIC |
386                                 SYNCHRONIZED | FINAL | STRICTFP;
387     public static final long
<span class="line-modified">388         ExtendedStandardFlags       = (long)StandardFlags | DEFAULT,</span>
<span class="line-modified">389         ModifierFlags               = ((long)StandardFlags &amp; ~INTERFACE) | DEFAULT,</span>


390         InterfaceMethodMask         = ABSTRACT | PRIVATE | STATIC | PUBLIC | STRICTFP | DEFAULT,
391         AnnotationTypeElementMask   = ABSTRACT | PUBLIC,
392         LocalVarFlags               = FINAL | PARAMETER,
393         ReceiverParamFlags          = PARAMETER;
394 
<span class="line-modified">395 </span>
396     public static Set&lt;Modifier&gt; asModifierSet(long flags) {
397         Set&lt;Modifier&gt; modifiers = modifierSets.get(flags);
398         if (modifiers == null) {
399             modifiers = java.util.EnumSet.noneOf(Modifier.class);
400             if (0 != (flags &amp; PUBLIC))    modifiers.add(Modifier.PUBLIC);
401             if (0 != (flags &amp; PROTECTED)) modifiers.add(Modifier.PROTECTED);
402             if (0 != (flags &amp; PRIVATE))   modifiers.add(Modifier.PRIVATE);
403             if (0 != (flags &amp; ABSTRACT))  modifiers.add(Modifier.ABSTRACT);
404             if (0 != (flags &amp; STATIC))    modifiers.add(Modifier.STATIC);



405             if (0 != (flags &amp; FINAL))     modifiers.add(Modifier.FINAL);
406             if (0 != (flags &amp; TRANSIENT)) modifiers.add(Modifier.TRANSIENT);
407             if (0 != (flags &amp; VOLATILE))  modifiers.add(Modifier.VOLATILE);
408             if (0 != (flags &amp; SYNCHRONIZED))
409                                           modifiers.add(Modifier.SYNCHRONIZED);
410             if (0 != (flags &amp; NATIVE))    modifiers.add(Modifier.NATIVE);
411             if (0 != (flags &amp; STRICTFP))  modifiers.add(Modifier.STRICTFP);
412             if (0 != (flags &amp; DEFAULT))   modifiers.add(Modifier.DEFAULT);
413             modifiers = Collections.unmodifiableSet(modifiers);
414             modifierSets.put(flags, modifiers);
415         }
416         return modifiers;
417     }
418 
419     // Cache of modifier sets.
420     private static final Map&lt;Long, Set&lt;Modifier&gt;&gt; modifierSets = new ConcurrentHashMap&lt;&gt;(64);
421 
422     public static boolean isStatic(Symbol symbol) {
423         return (symbol.flags() &amp; STATIC) != 0;
424     }
</pre>
<hr />
<pre>
475         AUXILIARY(Flags.AUXILIARY),
476         NOT_IN_PROFILE(Flags.NOT_IN_PROFILE),
477         BAD_OVERRIDE(Flags.BAD_OVERRIDE),
478         SIGNATURE_POLYMORPHIC(Flags.SIGNATURE_POLYMORPHIC),
479         THROWS(Flags.THROWS),
480         LAMBDA_METHOD(Flags.LAMBDA_METHOD),
481         TYPE_TRANSLATED(Flags.TYPE_TRANSLATED),
482         MODULE(Flags.MODULE),
483         AUTOMATIC_MODULE(Flags.AUTOMATIC_MODULE),
484         SYSTEM_MODULE(Flags.SYSTEM_MODULE),
485         DEPRECATED_ANNOTATION(Flags.DEPRECATED_ANNOTATION),
486         DEPRECATED_REMOVAL(Flags.DEPRECATED_REMOVAL),
487         HAS_RESOURCE(Flags.HAS_RESOURCE),
488         POTENTIALLY_AMBIGUOUS(Flags.POTENTIALLY_AMBIGUOUS),
489         ANONCONSTR_BASED(Flags.ANONCONSTR_BASED),
490         NAME_FILLED(Flags.NAME_FILLED),
491         PREVIEW_API(Flags.PREVIEW_API),
492         PREVIEW_ESSENTIAL_API(Flags.PREVIEW_ESSENTIAL_API),
493         MATCH_BINDING(Flags.MATCH_BINDING),
494         MATCH_BINDING_TO_OUTER(Flags.MATCH_BINDING_TO_OUTER),
<span class="line-modified">495         RECORD(Flags.RECORD);</span>







496 
497         Flag(long flag) {
498             this.value = flag;
499             this.lowercaseName = StringUtils.toLowerCase(name());
500         }
501 
502         @Override
503         public String toString() {
504             return lowercaseName;
505         }
506 
507         final long value;
508         final String lowercaseName;
509     }
510 
511 }
</pre>
</td>
<td>
<hr />
<pre>
349      * Flag to indicate that a class is a record. The flag is also used to mark fields that are
350      * part of the state vector of a record and to mark the canonical constructor
351      */
352     public static final long RECORD = 1L&lt;&lt;61; // ClassSymbols, MethodSymbols and VarSymbols
353 
354     /**
355      * Flag to mark a record constructor as a compact one
356      */
357     public static final long COMPACT_RECORD_CONSTRUCTOR = 1L&lt;&lt;51; // MethodSymbols only
358 
359     /**
360      * Flag to mark a record field that was not initialized in the compact constructor
361      */
362     public static final long UNINITIALIZED_FIELD= 1L&lt;&lt;51; // VarSymbols only
363 
364     /** Flag is set for compiler-generated record members, it could be applied to
365      *  accessors and fields
366      */
367     public static final int GENERATED_MEMBER = 1&lt;&lt;24; // MethodSymbols and VarSymbols
368 
<span class="line-added">369     /**</span>
<span class="line-added">370      * Flag to indicate sealed class/interface declaration.</span>
<span class="line-added">371      */</span>
<span class="line-added">372     public static final long SEALED = 1L&lt;&lt;62; // ClassSymbols</span>
<span class="line-added">373 </span>
<span class="line-added">374     /**</span>
<span class="line-added">375      * Flag to indicate that the class/interface was declared with the non-sealed modifier.</span>
<span class="line-added">376      */</span>
<span class="line-added">377     public static final long NON_SEALED = 1L&lt;&lt;63; // ClassSymbols</span>
<span class="line-added">378 </span>
379     /** Modifier masks.
380      */
381     public static final int
382         AccessFlags           = PUBLIC | PROTECTED | PRIVATE,
383         LocalClassFlags       = FINAL | ABSTRACT | STRICTFP | ENUM | SYNTHETIC,
384         StaticLocalFlags      = LocalClassFlags | STATIC | INTERFACE | ANNOTATION,
385         MemberClassFlags      = LocalClassFlags | INTERFACE | AccessFlags,
386         MemberRecordFlags     = MemberClassFlags | STATIC,
387         ClassFlags            = LocalClassFlags | INTERFACE | PUBLIC | ANNOTATION,
388         InterfaceVarFlags     = FINAL | STATIC | PUBLIC,
389         VarFlags              = AccessFlags | FINAL | STATIC |
390                                 VOLATILE | TRANSIENT | ENUM,
391         ConstructorFlags      = AccessFlags,
392         InterfaceMethodFlags  = ABSTRACT | PUBLIC,
393         MethodFlags           = AccessFlags | ABSTRACT | STATIC | NATIVE |
394                                 SYNCHRONIZED | FINAL | STRICTFP,
395         RecordMethodFlags     = AccessFlags | ABSTRACT | STATIC |
396                                 SYNCHRONIZED | FINAL | STRICTFP;
397     public static final long
<span class="line-modified">398         ExtendedStandardFlags       = (long)StandardFlags | DEFAULT | SEALED | NON_SEALED,</span>
<span class="line-modified">399         ExtendedMemberClassFlags    = (long)MemberClassFlags | SEALED | NON_SEALED,</span>
<span class="line-added">400         ExtendedClassFlags          = (long)ClassFlags | SEALED | NON_SEALED,</span>
<span class="line-added">401         ModifierFlags               = ((long)StandardFlags &amp; ~INTERFACE) | DEFAULT | SEALED | NON_SEALED,</span>
402         InterfaceMethodMask         = ABSTRACT | PRIVATE | STATIC | PUBLIC | STRICTFP | DEFAULT,
403         AnnotationTypeElementMask   = ABSTRACT | PUBLIC,
404         LocalVarFlags               = FINAL | PARAMETER,
405         ReceiverParamFlags          = PARAMETER;
406 
<span class="line-modified">407     @SuppressWarnings(&quot;preview&quot;)</span>
408     public static Set&lt;Modifier&gt; asModifierSet(long flags) {
409         Set&lt;Modifier&gt; modifiers = modifierSets.get(flags);
410         if (modifiers == null) {
411             modifiers = java.util.EnumSet.noneOf(Modifier.class);
412             if (0 != (flags &amp; PUBLIC))    modifiers.add(Modifier.PUBLIC);
413             if (0 != (flags &amp; PROTECTED)) modifiers.add(Modifier.PROTECTED);
414             if (0 != (flags &amp; PRIVATE))   modifiers.add(Modifier.PRIVATE);
415             if (0 != (flags &amp; ABSTRACT))  modifiers.add(Modifier.ABSTRACT);
416             if (0 != (flags &amp; STATIC))    modifiers.add(Modifier.STATIC);
<span class="line-added">417             if (0 != (flags &amp; SEALED))    modifiers.add(Modifier.SEALED);</span>
<span class="line-added">418             if (0 != (flags &amp; NON_SEALED))</span>
<span class="line-added">419                                           modifiers.add(Modifier.NON_SEALED);</span>
420             if (0 != (flags &amp; FINAL))     modifiers.add(Modifier.FINAL);
421             if (0 != (flags &amp; TRANSIENT)) modifiers.add(Modifier.TRANSIENT);
422             if (0 != (flags &amp; VOLATILE))  modifiers.add(Modifier.VOLATILE);
423             if (0 != (flags &amp; SYNCHRONIZED))
424                                           modifiers.add(Modifier.SYNCHRONIZED);
425             if (0 != (flags &amp; NATIVE))    modifiers.add(Modifier.NATIVE);
426             if (0 != (flags &amp; STRICTFP))  modifiers.add(Modifier.STRICTFP);
427             if (0 != (flags &amp; DEFAULT))   modifiers.add(Modifier.DEFAULT);
428             modifiers = Collections.unmodifiableSet(modifiers);
429             modifierSets.put(flags, modifiers);
430         }
431         return modifiers;
432     }
433 
434     // Cache of modifier sets.
435     private static final Map&lt;Long, Set&lt;Modifier&gt;&gt; modifierSets = new ConcurrentHashMap&lt;&gt;(64);
436 
437     public static boolean isStatic(Symbol symbol) {
438         return (symbol.flags() &amp; STATIC) != 0;
439     }
</pre>
<hr />
<pre>
490         AUXILIARY(Flags.AUXILIARY),
491         NOT_IN_PROFILE(Flags.NOT_IN_PROFILE),
492         BAD_OVERRIDE(Flags.BAD_OVERRIDE),
493         SIGNATURE_POLYMORPHIC(Flags.SIGNATURE_POLYMORPHIC),
494         THROWS(Flags.THROWS),
495         LAMBDA_METHOD(Flags.LAMBDA_METHOD),
496         TYPE_TRANSLATED(Flags.TYPE_TRANSLATED),
497         MODULE(Flags.MODULE),
498         AUTOMATIC_MODULE(Flags.AUTOMATIC_MODULE),
499         SYSTEM_MODULE(Flags.SYSTEM_MODULE),
500         DEPRECATED_ANNOTATION(Flags.DEPRECATED_ANNOTATION),
501         DEPRECATED_REMOVAL(Flags.DEPRECATED_REMOVAL),
502         HAS_RESOURCE(Flags.HAS_RESOURCE),
503         POTENTIALLY_AMBIGUOUS(Flags.POTENTIALLY_AMBIGUOUS),
504         ANONCONSTR_BASED(Flags.ANONCONSTR_BASED),
505         NAME_FILLED(Flags.NAME_FILLED),
506         PREVIEW_API(Flags.PREVIEW_API),
507         PREVIEW_ESSENTIAL_API(Flags.PREVIEW_ESSENTIAL_API),
508         MATCH_BINDING(Flags.MATCH_BINDING),
509         MATCH_BINDING_TO_OUTER(Flags.MATCH_BINDING_TO_OUTER),
<span class="line-modified">510         RECORD(Flags.RECORD),</span>
<span class="line-added">511         SEALED(Flags.SEALED),</span>
<span class="line-added">512         NON_SEALED(Flags.NON_SEALED) {</span>
<span class="line-added">513             @Override</span>
<span class="line-added">514             public String toString() {</span>
<span class="line-added">515                 return &quot;non-sealed&quot;;</span>
<span class="line-added">516             }</span>
<span class="line-added">517         };</span>
518 
519         Flag(long flag) {
520             this.value = flag;
521             this.lowercaseName = StringUtils.toLowerCase(name());
522         }
523 
524         @Override
525         public String toString() {
526             return lowercaseName;
527         }
528 
529         final long value;
530         final String lowercaseName;
531     }
532 
533 }
</pre>
</td>
</tr>
</table>
<center><a href="../api/JavacTrees.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Preview.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>