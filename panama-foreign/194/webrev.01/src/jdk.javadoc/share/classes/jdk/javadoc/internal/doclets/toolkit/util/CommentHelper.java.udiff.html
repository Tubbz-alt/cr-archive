<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/util/CommentHelper.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../BaseConfiguration.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="DocPaths.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/util/CommentHelper.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -189,10 +189,19 @@</span>
          }
          DocTrees doctrees = configuration.docEnv.getDocTrees();
          return doctrees.getElement(docTreePath);
      }
  
<span class="udiff-line-added">+     public TypeMirror getType(ReferenceTree rtree) {</span>
<span class="udiff-line-added">+         DocTreePath docTreePath = DocTreePath.getPath(path, dcTree, rtree);</span>
<span class="udiff-line-added">+         if (docTreePath != null) {</span>
<span class="udiff-line-added">+             DocTrees doctrees = configuration.docEnv.getDocTrees();</span>
<span class="udiff-line-added">+             return doctrees.getType(docTreePath);</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+         return null;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      public Element getException(DocTree dtree) {
          if (dtree.getKind() == THROWS || dtree.getKind() == EXCEPTION) {
              ThrowsTree tt = (ThrowsTree)dtree;
              ReferenceTree exceptionName = tt.getExceptionName();
              return getElement(exceptionName);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -421,52 +430,23 @@</span>
      public List&lt;? extends DocTree&gt; getFirstSentenceTrees(DocTree dtree) {
          return getFirstSentenceTrees(getBody(dtree));
      }
  
      private Element getReferencedElement(DocTree dtree) {
<span class="udiff-line-modified-removed">-         return new SimpleDocTreeVisitor&lt;Element, Void&gt;() {</span>
<span class="udiff-line-removed">-             @Override</span>
<span class="udiff-line-removed">-             public Element visitSee(SeeTree node, Void p) {</span>
<span class="udiff-line-removed">-                 for (DocTree dt : node.getReference()) {</span>
<span class="udiff-line-removed">-                     return visit(dt, null);</span>
<span class="udiff-line-removed">-                 }</span>
<span class="udiff-line-removed">-                 return null;</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-             @Override</span>
<span class="udiff-line-removed">-             public Element visitLink(LinkTree node, Void p) {</span>
<span class="udiff-line-removed">-                 return visit(node.getReference(), null);</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-             @Override</span>
<span class="udiff-line-removed">-             public Element visitProvides(ProvidesTree node, Void p) {</span>
<span class="udiff-line-removed">-                 return visit(node.getServiceType(), null);</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-             @Override</span>
<span class="udiff-line-removed">-             public Element visitValue(ValueTree node, Void p) {</span>
<span class="udiff-line-removed">-                 return visit(node.getReference(), null);</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-modified-added">+         return new ReferenceDocTreeVisitor&lt;Element&gt;() {</span>
              @Override
              public Element visitReference(ReferenceTree node, Void p) {
                  return getElement(node);
              }
<span class="udiff-line-added">+         }.visit(dtree, null);</span>
<span class="udiff-line-added">+     }</span>
  
<span class="udiff-line-added">+     public TypeMirror getReferencedType(DocTree dtree) {</span>
<span class="udiff-line-added">+         return new ReferenceDocTreeVisitor&lt;TypeMirror&gt;() {</span>
              @Override
<span class="udiff-line-modified-removed">-             public Element visitSerialField(SerialFieldTree node, Void p) {</span>
<span class="udiff-line-modified-removed">-                 return visit(node.getType(), null);</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-             @Override</span>
<span class="udiff-line-removed">-             public Element visitUses(UsesTree node, Void p) {</span>
<span class="udiff-line-removed">-                 return visit(node.getServiceType(), null);</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-             @Override</span>
<span class="udiff-line-removed">-             protected Element defaultAction(DocTree node, Void p) {</span>
<span class="udiff-line-removed">-                return null;</span>
<span class="udiff-line-modified-added">+             public TypeMirror visitReference(ReferenceTree node, Void p) {</span>
<span class="udiff-line-modified-added">+                 return getType(node);</span>
              }
          }.visit(dtree, null);
      }
  
      public TypeElement getServiceType(DocTree dtree) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -477,44 +457,56 @@</span>
          }
          return null;
      }
  
      public  String getReferencedSignature(DocTree dtree) {
<span class="udiff-line-modified-removed">-         return new SimpleDocTreeVisitor&lt;String, Void&gt;() {</span>
<span class="udiff-line-modified-added">+         return new ReferenceDocTreeVisitor&lt;String&gt;() {</span>
              @Override
<span class="udiff-line-modified-removed">-             public String visitSee(SeeTree node, Void p) {</span>
<span class="udiff-line-modified-removed">-                 for (DocTree dt : node.getReference()) {</span>
<span class="udiff-line-removed">-                     return visit(dt, null);</span>
<span class="udiff-line-removed">-                 }</span>
<span class="udiff-line-removed">-                 return null;</span>
<span class="udiff-line-modified-added">+             public String visitReference(ReferenceTree node, Void p) {</span>
<span class="udiff-line-modified-added">+                 return node.getSignature();</span>
              }
<span class="udiff-line-added">+         }.visit(dtree, null);</span>
<span class="udiff-line-added">+     }</span>
  
<span class="udiff-line-modified-removed">-             @Override</span>
<span class="udiff-line-modified-removed">-             public String visitLink(LinkTree node, Void p) {</span>
<span class="udiff-line-modified-removed">-                 return visit(node.getReference(), null);</span>
<span class="udiff-line-modified-added">+     private static class ReferenceDocTreeVisitor&lt;R&gt; extends SimpleDocTreeVisitor&lt;R, Void&gt; {</span>
<span class="udiff-line-modified-added">+         @Override</span>
<span class="udiff-line-modified-added">+         public R visitSee(SeeTree node, Void p) {</span>
<span class="udiff-line-added">+             for (DocTree dt : node.getReference()) {</span>
<span class="udiff-line-added">+                 return visit(dt, null);</span>
              }
<span class="udiff-line-added">+             return null;</span>
<span class="udiff-line-added">+         }</span>
  
<span class="udiff-line-modified-removed">-             @Override</span>
<span class="udiff-line-modified-removed">-             public String visitValue(ValueTree node, Void p) {</span>
<span class="udiff-line-modified-removed">-                 return visit(node.getReference(), null);</span>
<span class="udiff-line-modified-removed">-             }</span>
<span class="udiff-line-modified-added">+         @Override</span>
<span class="udiff-line-modified-added">+         public R visitLink(LinkTree node, Void p) {</span>
<span class="udiff-line-modified-added">+             return visit(node.getReference(), null);</span>
<span class="udiff-line-modified-added">+         }</span>
  
<span class="udiff-line-modified-removed">-             @Override</span>
<span class="udiff-line-modified-removed">-             public String visitReference(ReferenceTree node, Void p) {</span>
<span class="udiff-line-modified-removed">-                 return node.getSignature();</span>
<span class="udiff-line-modified-removed">-             }</span>
<span class="udiff-line-modified-added">+         @Override</span>
<span class="udiff-line-modified-added">+         public R visitProvides(ProvidesTree node, Void p) {</span>
<span class="udiff-line-modified-added">+             return visit(node.getServiceType(), null);</span>
<span class="udiff-line-modified-added">+         }</span>
  
<span class="udiff-line-modified-removed">-             @Override</span>
<span class="udiff-line-modified-removed">-             public String visitSerialField(SerialFieldTree node, Void p) {</span>
<span class="udiff-line-modified-removed">-                 return visit(node.getType(), null);</span>
<span class="udiff-line-modified-removed">-             }</span>
<span class="udiff-line-modified-added">+         @Override</span>
<span class="udiff-line-modified-added">+         public R visitValue(ValueTree node, Void p) {</span>
<span class="udiff-line-modified-added">+             return visit(node.getReference(), null);</span>
<span class="udiff-line-modified-added">+         }</span>
  
<span class="udiff-line-modified-removed">-             @Override</span>
<span class="udiff-line-modified-removed">-             protected String defaultAction(DocTree node, Void p) {</span>
<span class="udiff-line-modified-removed">-                return null;</span>
<span class="udiff-line-modified-removed">-             }</span>
<span class="udiff-line-modified-removed">-         }.visit(dtree, null);</span>
<span class="udiff-line-modified-added">+         @Override</span>
<span class="udiff-line-modified-added">+         public R visitSerialField(SerialFieldTree node, Void p) {</span>
<span class="udiff-line-modified-added">+             return visit(node.getType(), null);</span>
<span class="udiff-line-modified-added">+         }</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-added">+         @Override</span>
<span class="udiff-line-added">+         public R visitUses(UsesTree node, Void p) {</span>
<span class="udiff-line-added">+             return visit(node.getServiceType(), null);</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         @Override</span>
<span class="udiff-line-added">+         protected R defaultAction(DocTree node, Void p) {</span>
<span class="udiff-line-added">+             return null;</span>
<span class="udiff-line-added">+         }</span>
      }
  
      public List&lt;? extends DocTree&gt; getReference(DocTree dtree) {
          return dtree.getKind() == SEE ? ((SeeTree)dtree).getReference() : null;
      }
</pre>
<center><a href="../BaseConfiguration.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="DocPaths.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>