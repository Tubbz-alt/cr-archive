<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/gc/shenandoah/c2/shenandoahSupport.cpp</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="shenandoahBarrierSetC2.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../shenandoahConcurrentMark.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shenandoah/c2/shenandoahSupport.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 296,11 ***</span>
  
          if (adr_type-&gt;isa_oopptr() &amp;&amp; adr_type-&gt;is_oopptr()-&gt;offset() == oopDesc::mark_offset_in_bytes()) {
            if (trace) {tty-&gt;print_cr(&quot;Mark load&quot;);}
          } else if (adr_type-&gt;isa_instptr() &amp;&amp;
                     adr_type-&gt;is_instptr()-&gt;klass()-&gt;is_subtype_of(Compile::current()-&gt;env()-&gt;Reference_klass()) &amp;&amp;
<span class="line-modified">!                    adr_type-&gt;is_instptr()-&gt;offset() == java_lang_ref_Reference::referent_offset) {</span>
            if (trace) {tty-&gt;print_cr(&quot;Reference.get()&quot;);}
          } else if (!verify_helper(n-&gt;in(MemNode::Address), phis, visited, ShenandoahLoad, trace, barriers_used)) {
            report_verify_failure(&quot;Shenandoah verification: Load should have barriers&quot;, n);
          }
        }
<span class="line-new-header">--- 296,11 ---</span>
  
          if (adr_type-&gt;isa_oopptr() &amp;&amp; adr_type-&gt;is_oopptr()-&gt;offset() == oopDesc::mark_offset_in_bytes()) {
            if (trace) {tty-&gt;print_cr(&quot;Mark load&quot;);}
          } else if (adr_type-&gt;isa_instptr() &amp;&amp;
                     adr_type-&gt;is_instptr()-&gt;klass()-&gt;is_subtype_of(Compile::current()-&gt;env()-&gt;Reference_klass()) &amp;&amp;
<span class="line-modified">!                    adr_type-&gt;is_instptr()-&gt;offset() == java_lang_ref_Reference::referent_offset()) {</span>
            if (trace) {tty-&gt;print_cr(&quot;Reference.get()&quot;);}
          } else if (!verify_helper(n-&gt;in(MemNode::Address), phis, visited, ShenandoahLoad, trace, barriers_used)) {
            report_verify_failure(&quot;Shenandoah verification: Load should have barriers&quot;, n);
          }
        }
</pre>
<center><a href="shenandoahBarrierSetC2.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../shenandoahConcurrentMark.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>