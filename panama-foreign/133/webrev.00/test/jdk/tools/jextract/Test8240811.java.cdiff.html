<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/jdk/tools/jextract/Test8240811.java</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="RepeatedDeclsTest.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="UniondeclTest.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/tools/jextract/Test8240811.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 47,45 ***</span>
          try(Loader loader = classLoader(nameCollisionOutput)) {
              Class&lt;?&gt; cls = loader.loadClass(&quot;name_collision_h&quot;);
              assertNotNull(cls);
  
              // check foo layout
<span class="line-modified">!             MemoryLayout fooLayout = findLayout(cls, &quot;foo&quot;);</span>
              assertNotNull(fooLayout);
              assertTrue(((GroupLayout)fooLayout).isStruct());
              checkFieldABIType(fooLayout, &quot;x&quot;,  Type.INT);
              checkFieldABIType(fooLayout, &quot;y&quot;,  Type.INT);
              checkFieldABIType(fooLayout, &quot;z&quot;,  Type.INT);
  
<span class="line-modified">!             MemoryLayout fooVarLayout = findLayout(cls, &quot;var$foo&quot;);</span>
              assertNotNull(fooVarLayout);
  
              // check foo2 layout
<span class="line-modified">!             MemoryLayout foo2Layout = findLayout(cls, &quot;foo2&quot;);</span>
              assertNotNull(foo2Layout);
              assertTrue(((GroupLayout)foo2Layout).isUnion());
              checkFieldABIType(foo2Layout, &quot;i&quot;,  Type.INT);
              checkFieldABIType(foo2Layout, &quot;l&quot;,  Type.LONG);
  
<span class="line-modified">!             MemoryLayout foo2VarLayout = findLayout(cls, &quot;var$foo2&quot;);</span>
              assertNotNull(foo2VarLayout);
  
              MemoryLayout barVarLayout = findLayout(cls, &quot;bar&quot;);
              assertNotNull(barVarLayout);
  
              // check bar layout
<span class="line-modified">!             MemoryLayout barLayout = findLayout(cls, &quot;struct$bar&quot;);</span>
              assertNotNull(barLayout);
              assertTrue(((GroupLayout)barLayout).isStruct());
              checkFieldABIType(barLayout, &quot;f1&quot;,  Type.FLOAT);
              checkFieldABIType(barLayout, &quot;f2&quot;,  Type.FLOAT);
  
              MemoryLayout bar2VarLayout = findLayout(cls, &quot;bar2&quot;);
              assertNotNull(bar2VarLayout);
  
              // check bar layout
<span class="line-modified">!             MemoryLayout bar2Layout = findLayout(cls, &quot;union$bar2&quot;);</span>
              assertNotNull(bar2Layout);
              assertTrue(((GroupLayout)bar2Layout).isUnion());
              checkFieldABIType(bar2Layout, &quot;f&quot;,  Type.FLOAT);
              checkFieldABIType(bar2Layout, &quot;d&quot;,  Type.DOUBLE);
          } finally {
<span class="line-new-header">--- 47,49 ---</span>
          try(Loader loader = classLoader(nameCollisionOutput)) {
              Class&lt;?&gt; cls = loader.loadClass(&quot;name_collision_h&quot;);
              assertNotNull(cls);
  
              // check foo layout
<span class="line-modified">!             Class&lt;?&gt; fooCls = loader.loadClass(&quot;Cfoo&quot;);</span>
<span class="line-added">+             MemoryLayout fooLayout = findLayout(fooCls);</span>
              assertNotNull(fooLayout);
              assertTrue(((GroupLayout)fooLayout).isStruct());
              checkFieldABIType(fooLayout, &quot;x&quot;,  Type.INT);
              checkFieldABIType(fooLayout, &quot;y&quot;,  Type.INT);
              checkFieldABIType(fooLayout, &quot;z&quot;,  Type.INT);
  
<span class="line-modified">!             MemoryLayout fooVarLayout = findLayout(cls, &quot;foo&quot;);</span>
              assertNotNull(fooVarLayout);
  
              // check foo2 layout
<span class="line-modified">!             Class&lt;?&gt; foo2Cls = loader.loadClass(&quot;Cfoo2&quot;);</span>
<span class="line-added">+             MemoryLayout foo2Layout = findLayout(foo2Cls);</span>
              assertNotNull(foo2Layout);
              assertTrue(((GroupLayout)foo2Layout).isUnion());
              checkFieldABIType(foo2Layout, &quot;i&quot;,  Type.INT);
              checkFieldABIType(foo2Layout, &quot;l&quot;,  Type.LONG);
  
<span class="line-modified">!             MemoryLayout foo2VarLayout = findLayout(cls, &quot;foo2&quot;);</span>
              assertNotNull(foo2VarLayout);
  
              MemoryLayout barVarLayout = findLayout(cls, &quot;bar&quot;);
              assertNotNull(barVarLayout);
  
              // check bar layout
<span class="line-modified">!             Class&lt;?&gt; barCls = loader.loadClass(&quot;Cbar&quot;);</span>
<span class="line-added">+             MemoryLayout barLayout = findLayout(barCls);</span>
              assertNotNull(barLayout);
              assertTrue(((GroupLayout)barLayout).isStruct());
              checkFieldABIType(barLayout, &quot;f1&quot;,  Type.FLOAT);
              checkFieldABIType(barLayout, &quot;f2&quot;,  Type.FLOAT);
  
              MemoryLayout bar2VarLayout = findLayout(cls, &quot;bar2&quot;);
              assertNotNull(bar2VarLayout);
  
              // check bar layout
<span class="line-modified">!             Class&lt;?&gt; bar2Cls = loader.loadClass(&quot;Cbar2&quot;);</span>
<span class="line-added">+             MemoryLayout bar2Layout = findLayout(bar2Cls);</span>
              assertNotNull(bar2Layout);
              assertTrue(((GroupLayout)bar2Layout).isUnion());
              checkFieldABIType(bar2Layout, &quot;f&quot;,  Type.FLOAT);
              checkFieldABIType(bar2Layout, &quot;d&quot;,  Type.DOUBLE);
          } finally {
</pre>
<center><a href="RepeatedDeclsTest.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="UniondeclTest.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>