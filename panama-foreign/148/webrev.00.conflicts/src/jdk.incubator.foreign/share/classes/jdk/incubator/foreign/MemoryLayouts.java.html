<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/MemoryLayouts.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  *  Copyright (c) 2019, 2020, Oracle and/or its affiliates. All rights reserved.
  3  *  DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  *  This code is free software; you can redistribute it and/or modify it
  6  *  under the terms of the GNU General Public License version 2 only, as
  7  *  published by the Free Software Foundation.  Oracle designates this
  8  *  particular file as subject to the &quot;Classpath&quot; exception as provided
  9  *  by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  *  This code is distributed in the hope that it will be useful, but WITHOUT
 12  *  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  *  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  *  version 2 for more details (a copy is included in the LICENSE file that
 15  *  accompanied this code).
 16  *
 17  *  You should have received a copy of the GNU General Public License version
 18  *  2 along with this work; if not, write to the Free Software Foundation,
 19  *  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  *   Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  *  or visit www.oracle.com if you need additional information or have any
 23  *  questions.
 24  *
 25  */
 26 
 27 package jdk.incubator.foreign;
 28 
 29 import jdk.internal.foreign.abi.SharedUtils;
 30 import jdk.internal.foreign.abi.x64.windows.Windowsx64ABI;
 31 
 32 import java.nio.ByteOrder;
 33 
 34 import static jdk.incubator.foreign.SystemABI.ABI_AARCH64;
 35 import static jdk.incubator.foreign.SystemABI.ABI_SYSV;
 36 import static jdk.incubator.foreign.SystemABI.ABI_WINDOWS;
 37 
 38 /**
 39  * This class defines useful layout constants. Some of the constants defined in this class are explicit in both
 40  * size and byte order (see {@link #BITS_64_BE}), and can therefore be used to explicitly and unambiguously specify the
 41  * contents of a memory segment. Other constants make implicit byte order assumptions (see
 42  * {@link #JAVA_INT}); as such, these constants make it easy to work with other serialization-centric APIs,
 43  * such as {@link java.nio.ByteBuffer}.
 44  */
 45 public final class MemoryLayouts {
 46 
 47     private MemoryLayouts() {
 48         //just the one, please
 49     }
 50 
 51     /**
 52      * A value layout constant with size of one byte, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
 53      */
 54     public static final ValueLayout BITS_8_LE = MemoryLayout.ofValueBits(8, ByteOrder.LITTLE_ENDIAN);
 55 
 56     /**
 57      * A value layout constant with size of two bytes, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
 58      */
 59     public static final ValueLayout BITS_16_LE = MemoryLayout.ofValueBits(16, ByteOrder.LITTLE_ENDIAN);
 60 
 61     /**
 62      * A value layout constant with size of four bytes, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
 63      */
 64     public static final ValueLayout BITS_32_LE = MemoryLayout.ofValueBits(32, ByteOrder.LITTLE_ENDIAN);
 65 
 66     /**
 67      * A value layout constant with size of eight bytes, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
 68      */
 69     public static final ValueLayout BITS_64_LE = MemoryLayout.ofValueBits(64, ByteOrder.LITTLE_ENDIAN);
 70 
 71     /**
 72      * A value layout constant with size of one byte, and byte order set to {@link ByteOrder#BIG_ENDIAN}.
 73      */
 74     public static final ValueLayout BITS_8_BE = MemoryLayout.ofValueBits(8, ByteOrder.BIG_ENDIAN);
 75 
 76     /**
 77      * A value layout constant with size of two bytes, and byte order set to {@link ByteOrder#BIG_ENDIAN}.
 78      */
 79     public static final ValueLayout BITS_16_BE = MemoryLayout.ofValueBits(16, ByteOrder.BIG_ENDIAN);
 80 
 81     /**
 82      * A value layout constant with size of four bytes, and byte order set to {@link ByteOrder#BIG_ENDIAN}.
 83      */
 84     public static final ValueLayout BITS_32_BE = MemoryLayout.ofValueBits(32, ByteOrder.BIG_ENDIAN);
 85 
 86     /**
 87      * A value layout constant with size of eight bytes, and byte order set to {@link ByteOrder#BIG_ENDIAN}.
 88      */
 89     public static final ValueLayout BITS_64_BE = MemoryLayout.ofValueBits(64, ByteOrder.BIG_ENDIAN);
 90 
 91     /**
 92      * A padding layout constant with size of one byte.
 93      */
 94     public static final MemoryLayout PAD_8 = MemoryLayout.ofPaddingBits(8);
 95 
 96     /**
 97      * A padding layout constant with size of two bytes.
 98      */
 99     public static final MemoryLayout PAD_16 = MemoryLayout.ofPaddingBits(16);
100 
101     /**
102      * A padding layout constant with size of four bytes.
103      */
104     public static final MemoryLayout PAD_32 = MemoryLayout.ofPaddingBits(32);
105 
106     /**
107      * A padding layout constant with size of eight bytes.
108      */
109     public static final MemoryLayout PAD_64 = MemoryLayout.ofPaddingBits(64);
110 
111     /**
112      * A value layout constant whose size is the same as that of a Java {@code byte}, and byte order set to {@link ByteOrder#nativeOrder()}.
113      */
114     public static final ValueLayout JAVA_BYTE = MemoryLayout.ofValueBits(8, ByteOrder.nativeOrder());
115 
116     /**
117      * A value layout constant whose size is the same as that of a Java {@code char}, and byte order set to {@link ByteOrder#nativeOrder()}.
118      */
119     public static final ValueLayout JAVA_CHAR = MemoryLayout.ofValueBits(16, ByteOrder.nativeOrder());
120 
121     /**
122      * A value layout constant whose size is the same as that of a Java {@code short}, and byte order set to {@link ByteOrder#nativeOrder()}.
123      */
124     public static final ValueLayout JAVA_SHORT = MemoryLayout.ofValueBits(16, ByteOrder.nativeOrder());
125 
126     /**
127      * A value layout constant whose size is the same as that of a Java {@code int}, and byte order set to {@link ByteOrder#nativeOrder()}.
128      */
129     public static final ValueLayout JAVA_INT = MemoryLayout.ofValueBits(32, ByteOrder.nativeOrder());
130 
131     /**
132      * A value layout constant whose size is the same as that of a Java {@code long}, and byte order set to {@link ByteOrder#nativeOrder()}.
133      */
134     public static final ValueLayout JAVA_LONG = MemoryLayout.ofValueBits(64, ByteOrder.nativeOrder());
135 
136     /**
137      * A value layout constant whose size is the same as that of a Java {@code float}, and byte order set to {@link ByteOrder#nativeOrder()}.
138      */
139     public static final ValueLayout JAVA_FLOAT = MemoryLayout.ofValueBits(32, ByteOrder.nativeOrder());
140 
141     /**
142      * A value layout constant whose size is the same as that of a Java {@code double}, and byte order set to {@link ByteOrder#nativeOrder()}.
143      */
144     public static final ValueLayout JAVA_DOUBLE = MemoryLayout.ofValueBits(64, ByteOrder.nativeOrder());
145 &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
146 =======
147 
148     /**
149      * The {@code _Bool} native type.
150      */
151     public static final ValueLayout C_BOOL;
152 
153     /**
154      * The {@code unsigned char} native type.
155      */
156     public static final ValueLayout C_UCHAR;
157 
158     /**
159      * The {@code signed char} native type.
160      */
161     public static final ValueLayout C_SCHAR ;
162 
163     /**
164      * The {@code char} native type.
165      */
166     public static final ValueLayout C_CHAR;
167 
168     /**
169      * The {@code short} native type.
170      */
171     public static final ValueLayout C_SHORT;
172 
173     /**
174      * The {@code unsigned short} native type.
175      */
176     public static final ValueLayout C_USHORT;
177 
178     /**
179      * The {@code int} native type.
180      */
181     public static final ValueLayout C_INT;
182 
183     /**
184      * The {@code unsigned int} native type.
185      */
186     public static final ValueLayout C_UINT;
187 
188     /**
189      * The {@code long} native type.
190      */
191     public static final ValueLayout C_LONG;
192 
193     /**
194      * The {@code unsigned long} native type.
195      */
196     public static final ValueLayout C_ULONG;
197 
198     /**
199      * The {@code long long} native type.
200      */
201     public static final ValueLayout C_LONGLONG;
202 
203     /**
204      * The {@code unsigned long long} native type.
205      */
206     public static final ValueLayout C_ULONGLONG;
207 
208     /**
209      * The {@code float} native type.
210      */
211     public static final ValueLayout C_FLOAT;
212 
213     /**
214      * The {@code double} native type.
215      */
216     public static final ValueLayout C_DOUBLE;
217 
218     /**
219      * The {@code long double} native type.
220      */
221     public static final ValueLayout C_LONGDOUBLE;
222 
223     /**
224      * The {@code T*} native type.
225      */
226     public static final ValueLayout C_POINTER;
227 
228     static {
229         SystemABI abi = SharedUtils.getSystemABI();
230         switch (abi.name()) {
231             case ABI_SYSV -&gt; {
232                 C_BOOL = SysV.C_BOOL;
233                 C_UCHAR = SysV.C_UCHAR;
234                 C_SCHAR = SysV.C_SCHAR;
235                 C_CHAR = SysV.C_CHAR;
236                 C_SHORT = SysV.C_SHORT;
237                 C_USHORT = SysV.C_USHORT;
238                 C_INT = SysV.C_INT;
239                 C_UINT = SysV.C_UINT;
240                 C_LONG = SysV.C_LONG;
241                 C_ULONG = SysV.C_ULONG;
242                 C_LONGLONG = SysV.C_LONGLONG;
243                 C_ULONGLONG = SysV.C_ULONGLONG;
244                 C_FLOAT = SysV.C_FLOAT;
245                 C_DOUBLE = SysV.C_DOUBLE;
246                 C_LONGDOUBLE = SysV.C_LONGDOUBLE;
247                 C_POINTER = SysV.C_POINTER;
248             }
249             case ABI_WINDOWS -&gt; {
250                 C_BOOL = WinABI.C_BOOL;
251                 C_UCHAR = WinABI.C_UCHAR;
252                 C_SCHAR = WinABI.C_SCHAR;
253                 C_CHAR = WinABI.C_CHAR;
254                 C_SHORT = WinABI.C_SHORT;
255                 C_USHORT = WinABI.C_USHORT;
256                 C_INT = WinABI.C_INT;
257                 C_UINT = WinABI.C_UINT;
258                 C_LONG = WinABI.C_LONG;
259                 C_ULONG = WinABI.C_ULONG;
260                 C_LONGLONG = WinABI.C_LONGLONG;
261                 C_ULONGLONG = WinABI.C_ULONGLONG;
262                 C_FLOAT = WinABI.C_FLOAT;
263                 C_DOUBLE = WinABI.C_DOUBLE;
264                 C_LONGDOUBLE = WinABI.C_LONGDOUBLE;
265                 C_POINTER = WinABI.C_POINTER;
266             }
267             case ABI_AARCH64 -&gt; {
268                 C_BOOL = AArch64ABI.C_BOOL;
269                 C_UCHAR = AArch64ABI.C_UCHAR;
270                 C_SCHAR = AArch64ABI.C_SCHAR;
271                 C_CHAR = AArch64ABI.C_CHAR;
272                 C_SHORT = AArch64ABI.C_SHORT;
273                 C_USHORT = AArch64ABI.C_USHORT;
274                 C_INT = AArch64ABI.C_INT;
275                 C_UINT = AArch64ABI.C_UINT;
276                 C_LONG = AArch64ABI.C_LONG;
277                 C_ULONG = AArch64ABI.C_ULONG;
278                 C_LONGLONG = AArch64ABI.C_LONGLONG;
279                 C_ULONGLONG = AArch64ABI.C_ULONGLONG;
280                 C_FLOAT = AArch64ABI.C_FLOAT;
281                 C_DOUBLE = AArch64ABI.C_DOUBLE;
282                 C_LONGDOUBLE = AArch64ABI.C_LONGDOUBLE;
283                 C_POINTER = AArch64ABI.C_POINTER;
284             }
285             default -&gt; throw new IllegalStateException(&quot;Unsupported ABI: &quot; + abi.name());
286         }
287     }
288 
289     /**
290      * This class defines layout constants modelling standard primitive types supported by the x64 SystemV ABI.
291      */
292     public static final class SysV {
293         private SysV() {
294             //just the one
295         }
296 
297         /**
298          * The {@code _Bool} native type.
299          */
300         public static final ValueLayout C_BOOL = SharedLayouts.BITS_8_LE
301                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.BOOL);
302 
303 
304         /**
305          * The {@code unsigned char} native type.
306          */
307         public static final ValueLayout C_UCHAR = SharedLayouts.BITS_8_LE
308                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_CHAR);
309 
310 
311         /**
312          * The {@code signed char} native type.
313          */
314         public static final ValueLayout C_SCHAR = SharedLayouts.BITS_8_LE
315                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.SIGNED_CHAR);
316 
317 
318         /**
319          * The {@code char} native type.
320          */
321         public static final ValueLayout C_CHAR = SharedLayouts.BITS_8_LE
322                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.CHAR);
323 
324         /**
325          * The {@code short} native type.
326          */
327         public static final ValueLayout C_SHORT = SharedLayouts.BITS_16_LE
328                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.SHORT);
329 
330         /**
331          * The {@code unsigned short} native type.
332          */
333         public static final ValueLayout C_USHORT = SharedLayouts.BITS_16_LE
334                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_SHORT);
335 
336         /**
337          * The {@code int} native type.
338          */
339         public static final ValueLayout C_INT = SharedLayouts.BITS_32_LE
340                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.INT);
341 
342         /**
343          * The {@code unsigned int} native type.
344          */
345         public static final ValueLayout C_UINT = SharedLayouts.BITS_32_LE
346                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_INT);
347 
348         /**
349          * The {@code long} native type.
350          */
351         public static final ValueLayout C_LONG = SharedLayouts.BITS_64_LE
352                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.LONG);
353 
354         /**
355          * The {@code unsigned long} native type.
356          */
357         public static final ValueLayout C_ULONG = SharedLayouts.BITS_64_LE
358                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG);
359 
360 
361         /**
362          * The {@code long long} native type.
363          */
364         public static final ValueLayout C_LONGLONG = SharedLayouts.BITS_64_LE
365                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.LONG_LONG);
366 
367         /**
368          * The {@code unsigned long long} native type.
369          */
370         public static final ValueLayout C_ULONGLONG = SharedLayouts.BITS_64_LE
371                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG_LONG);
372 
373         /**
374          * The {@code float} native type.
375          */
376         public static final ValueLayout C_FLOAT = SharedLayouts.BITS_32_LE
377                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.FLOAT);
378 
379         /**
380          * The {@code double} native type.
381          */
382         public static final ValueLayout C_DOUBLE = SharedLayouts.BITS_64_LE
383                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.DOUBLE);
384 
385         /**
386          * The {@code long double} native type.
387          */
388         public static final ValueLayout C_LONGDOUBLE = MemoryLayout.ofValueBits(128, ByteOrder.LITTLE_ENDIAN)
389                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.LONG_DOUBLE);
390 
391         /**
392          * The {@code complex long double} native type.
393          */
394         public static final GroupLayout C_COMPLEX_LONGDOUBLE = MemoryLayout.ofStruct(C_LONGDOUBLE, C_LONGDOUBLE)
395                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.COMPLEX_LONG_DOUBLE);
396 
397         /**
398          * The {@code T*} native type.
399          */
400         public static final ValueLayout C_POINTER = SharedLayouts.BITS_64_LE
401                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.POINTER);
402     }
403 
404     /**
405      * This class defines layout constants modelling standard primitive types supported by the x64 Windows ABI.
406      */
407     public static final class WinABI {
408         /**
409          * The {@code _Bool} native type.
410          */
411         public static final ValueLayout C_BOOL = SharedLayouts.BITS_8_LE
412                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.BOOL);
413 
414         /**
415          * The {@code unsigned char} native type.
416          */
417         public static final ValueLayout C_UCHAR = SharedLayouts.BITS_8_LE
418                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_CHAR);
419 
420         /**
421          * The {@code signed char} native type.
422          */
423         public static final ValueLayout C_SCHAR = SharedLayouts.BITS_8_LE
424                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.SIGNED_CHAR);
425 
426         /**
427          * The {@code char} native type.
428          */
429         public static final ValueLayout C_CHAR = SharedLayouts.BITS_8_LE
430                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.CHAR);
431 
432         /**
433          * The {@code short} native type.
434          */
435         public static final ValueLayout C_SHORT = SharedLayouts.BITS_16_LE
436                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.SHORT);
437 
438         /**
439          * The {@code unsigned short} native type.
440          */
441         public static final ValueLayout C_USHORT = SharedLayouts.BITS_16_LE
442                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_SHORT);
443 
444         /**
445          * The {@code int} native type.
446          */
447         public static final ValueLayout C_INT = SharedLayouts.BITS_32_LE
448                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.INT);
449 
450         /**
451          * The {@code unsigned int} native type.
452          */
453         public static final ValueLayout C_UINT = SharedLayouts.BITS_32_LE
454                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_INT);
455 
456         /**
457          * The {@code long} native type.
458          */
459         public static final ValueLayout C_LONG = SharedLayouts.BITS_32_LE
460                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.LONG);
461 
462         /**
463          * The {@code unsigned long} native type.
464          */
465         public static final ValueLayout C_ULONG = SharedLayouts.BITS_32_LE
466                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG);
467 
468         /**
469          * The {@code long long} native type.
470          */
471         public static final ValueLayout C_LONGLONG = SharedLayouts.BITS_64_LE
472                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.LONG_LONG);
473 
474         /**
475          * The {@code unsigned long long} native type.
476          */
477         public static final ValueLayout C_ULONGLONG = SharedLayouts.BITS_64_LE
478                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG_LONG);
479 
480         /**
481          * The {@code float} native type.
482          */
483         public static final ValueLayout C_FLOAT = SharedLayouts.BITS_32_LE
484                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.FLOAT);
485 
486         /**
487          * The {@code double} native type.
488          */
489         public static final ValueLayout C_DOUBLE = SharedLayouts.BITS_64_LE
490                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.DOUBLE);
491 
492         /**
493          * The {@code long double} native type.
494          */
495         public static final ValueLayout C_LONGDOUBLE = SharedLayouts.BITS_64_LE
496                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.LONG_DOUBLE);
497 
498         /**
499          * The {@code T*} native type.
500          */
501         public static final ValueLayout C_POINTER = SharedLayouts.BITS_64_LE
502                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.POINTER);
503 
504         public static ValueLayout asVarArg(ValueLayout l) {
505            return l.withAttribute(Windowsx64ABI.VARARGS_ATTRIBUTE_NAME, &quot;true&quot;);
506         }
507     }
508 
509     /**
510      * This class defines layout constants modelling standard primitive types supported by the AArch64 ABI.
511      */
512     public static final class AArch64ABI {
513         /**
514          * The {@code _Bool} native type.
515          */
516         public static final ValueLayout C_BOOL = SharedLayouts.BITS_8_LE
517                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.BOOL);
518 
519         /**
520          * The {@code unsigned char} native type.
521          */
522         public static final ValueLayout C_UCHAR = SharedLayouts.BITS_8_LE
523                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_CHAR);
524 
525         /**
526          * The {@code signed char} native type.
527          */
528         public static final ValueLayout C_SCHAR = SharedLayouts.BITS_8_LE
529                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.SIGNED_CHAR);
530 
531         /**
532          * The {@code char} native type.
533          */
534         public static final ValueLayout C_CHAR = SharedLayouts.BITS_8_LE
535                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.CHAR);
536 
537         /**
538          * The {@code short} native type.
539          */
540         public static final ValueLayout C_SHORT = SharedLayouts.BITS_16_LE
541                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.SHORT);
542 
543         /**
544          * The {@code unsigned short} native type.
545          */
546         public static final ValueLayout C_USHORT = SharedLayouts.BITS_16_LE
547                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_SHORT);
548 
549         /**
550          * The {@code int} native type.
551          */
552         public static final ValueLayout C_INT = SharedLayouts.BITS_32_LE
553                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.INT);
554 
555         /**
556          * The {@code unsigned int} native type.
557          */
558         public static final ValueLayout C_UINT = SharedLayouts.BITS_32_LE
559                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_INT);
560 
561         /**
562          * The {@code long} native type.
563          */
564         public static final ValueLayout C_LONG = SharedLayouts.BITS_64_LE
565                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.LONG);
566 
567         /**
568          * The {@code unsigned long} native type.
569          */
570         public static final ValueLayout C_ULONG = SharedLayouts.BITS_64_LE
571                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG);
572 
573         /**
574          * The {@code long long} native type.
575          */
576         public static final ValueLayout C_LONGLONG = SharedLayouts.BITS_64_LE
577                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.LONG_LONG);
578 
579         /**
580          * The {@code unsigned long long} native type.
581          */
582         public static final ValueLayout C_ULONGLONG = SharedLayouts.BITS_64_LE
583                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG_LONG);
584 
585         /**
586          * The {@code float} native type.
587          */
588         public static final ValueLayout C_FLOAT = SharedLayouts.BITS_32_LE
589                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.FLOAT);
590 
591         /**
592          * The {@code double} native type.
593          */
594         public static final ValueLayout C_DOUBLE = SharedLayouts.BITS_64_LE
595                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.DOUBLE);
596 
597         /**
598          * The {@code long double} native type.
599          */
600         public static final ValueLayout C_LONGDOUBLE = MemoryLayout.ofValueBits(128, ByteOrder.LITTLE_ENDIAN)
601                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.LONG_DOUBLE);
602 
603         /**
604          * The {@code T*} native type.
605          */
606         public static final ValueLayout C_POINTER = SharedLayouts.BITS_64_LE
607                 .withAttribute(SystemABI.NATIVE_TYPE, SystemABI.Type.POINTER);
608     }
609 
610     private static class SharedLayouts { // Separate class to prevent circular clinit references
611         public static final ValueLayout BITS_8_LE = MemoryLayout.ofValueBits(8, ByteOrder.LITTLE_ENDIAN);
612         public static final ValueLayout BITS_16_LE = MemoryLayout.ofValueBits(16, ByteOrder.LITTLE_ENDIAN);
613         public static final ValueLayout BITS_32_LE = MemoryLayout.ofValueBits(32, ByteOrder.LITTLE_ENDIAN);
614         public static final ValueLayout BITS_64_LE = MemoryLayout.ofValueBits(64, ByteOrder.LITTLE_ENDIAN);
615     }
616 &gt;&gt;&gt;&gt;&gt;&gt;&gt; 6f69981b60125420f99cee4fc8b8d91754602a16
617 }
    </pre>
  </body>
</html>