<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/jdk/java/foreign/TestByteBuffer.java</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../../../../src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/MemoryAccess.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>test/jdk/java/foreign/TestByteBuffer.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -553,11 +553,11 @@</span>
          MemorySegment s1 = MemorySegment.allocateNative(MemoryLayouts.JAVA_INT);
          MemorySegment s2 = MemorySegment.ofByteBuffer(s1.asByteBuffer());
  
          s1.close(); // memory freed
  
<span class="udiff-line-modified-removed">-         MemoryAccess.setInt(s2.baseAddress(), 0L, 10); // Dead access!</span>
<span class="udiff-line-modified-added">+         MemoryAccess.setInt(s2.baseAddress(), 10); // Dead access!</span>
      }
  
      @DataProvider(name = &quot;bufferOps&quot;)
      public static Object[][] bufferOps() throws Throwable {
          return new Object[][]{
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -614,38 +614,38 @@</span>
      }
  
      @DataProvider(name = &quot;resizeOps&quot;)
      public Object[][] resizeOps() {
          Consumer&lt;MemoryAddress&gt; byteInitializer =
<span class="udiff-line-modified-removed">-                 (base) -&gt; initBytes(base, bytes, (addr, pos) -&gt; MemoryAccess.setByte_BE(addr, pos, (byte)(long)pos));</span>
<span class="udiff-line-modified-added">+                 (base) -&gt; initBytes(base, bytes, (addr, pos) -&gt; MemoryAccess.setByteAtIndex_BE(addr, pos, (byte)(long)pos));</span>
          Consumer&lt;MemoryAddress&gt; charInitializer =
<span class="udiff-line-modified-removed">-                 (base) -&gt; initBytes(base, chars, (addr, pos) -&gt; MemoryAccess.setChar_BE(addr, pos * 2, (char)(long)pos));</span>
<span class="udiff-line-modified-added">+                 (base) -&gt; initBytes(base, chars, (addr, pos) -&gt; MemoryAccess.setCharAtIndex_BE(addr, pos, (char)(long)pos));</span>
          Consumer&lt;MemoryAddress&gt; shortInitializer =
<span class="udiff-line-modified-removed">-                 (base) -&gt; initBytes(base, shorts, (addr, pos) -&gt; MemoryAccess.setShort_BE(addr, pos * 2, (short)(long)pos));</span>
<span class="udiff-line-modified-added">+                 (base) -&gt; initBytes(base, shorts, (addr, pos) -&gt; MemoryAccess.setShortAtIndex_BE(addr, pos, (short)(long)pos));</span>
          Consumer&lt;MemoryAddress&gt; intInitializer =
<span class="udiff-line-modified-removed">-                 (base) -&gt; initBytes(base, ints, (addr, pos) -&gt; MemoryAccess.setInt_BE(addr, pos * 4, (int)(long)pos));</span>
<span class="udiff-line-modified-added">+                 (base) -&gt; initBytes(base, ints, (addr, pos) -&gt; MemoryAccess.setIntAtIndex_BE(addr, pos, (int)(long)pos));</span>
          Consumer&lt;MemoryAddress&gt; floatInitializer =
<span class="udiff-line-modified-removed">-                 (base) -&gt; initBytes(base, floats, (addr, pos) -&gt; MemoryAccess.setFloat_BE(addr, pos * 4, (float)(long)pos));</span>
<span class="udiff-line-modified-added">+                 (base) -&gt; initBytes(base, floats, (addr, pos) -&gt; MemoryAccess.setFloatAtIndex_BE(addr, pos, (float)(long)pos));</span>
          Consumer&lt;MemoryAddress&gt; longInitializer =
<span class="udiff-line-modified-removed">-                 (base) -&gt; initBytes(base, longs, (addr, pos) -&gt; MemoryAccess.setLong_BE(addr, pos * 8, (long)pos));</span>
<span class="udiff-line-modified-added">+                 (base) -&gt; initBytes(base, longs, (addr, pos) -&gt; MemoryAccess.setLongAtIndex_BE(addr, pos, pos));</span>
          Consumer&lt;MemoryAddress&gt; doubleInitializer =
<span class="udiff-line-modified-removed">-                 (base) -&gt; initBytes(base, doubles, (addr, pos) -&gt; MemoryAccess.setDouble_BE(addr, pos * 8, (double)(long)pos));</span>
<span class="udiff-line-modified-added">+                 (base) -&gt; initBytes(base, doubles, (addr, pos) -&gt; MemoryAccess.setDoubleAtIndex_BE(addr, pos, (double)(long)pos));</span>
  
          Consumer&lt;MemoryAddress&gt; byteChecker =
<span class="udiff-line-modified-removed">-                 (base) -&gt; checkBytes(base, bytes, Function.identity(), MemoryAccess::getByte_BE, ByteBuffer::get);</span>
<span class="udiff-line-modified-added">+                 (base) -&gt; checkBytes(base, bytes, Function.identity(), MemoryAccess::getByteAtIndex_BE, ByteBuffer::get);</span>
          Consumer&lt;MemoryAddress&gt; charChecker =
<span class="udiff-line-modified-removed">-                 (base) -&gt; checkBytes(base, chars, ByteBuffer::asCharBuffer, (addr, pos) -&gt; MemoryAccess.getChar_BE(addr, pos * 2), CharBuffer::get);</span>
<span class="udiff-line-modified-added">+                 (base) -&gt; checkBytes(base, chars, ByteBuffer::asCharBuffer, MemoryAccess::getCharAtIndex_BE, CharBuffer::get);</span>
          Consumer&lt;MemoryAddress&gt; shortChecker =
<span class="udiff-line-modified-removed">-                 (base) -&gt; checkBytes(base, shorts, ByteBuffer::asShortBuffer, (addr, pos) -&gt; MemoryAccess.getShort_BE(addr, pos * 2), ShortBuffer::get);</span>
<span class="udiff-line-modified-added">+                 (base) -&gt; checkBytes(base, shorts, ByteBuffer::asShortBuffer, MemoryAccess::getShortAtIndex_BE, ShortBuffer::get);</span>
          Consumer&lt;MemoryAddress&gt; intChecker =
<span class="udiff-line-modified-removed">-                 (base) -&gt; checkBytes(base, ints, ByteBuffer::asIntBuffer, (addr, pos) -&gt; MemoryAccess.getInt_BE(addr, pos * 4), IntBuffer::get);</span>
<span class="udiff-line-modified-added">+                 (base) -&gt; checkBytes(base, ints, ByteBuffer::asIntBuffer, MemoryAccess::getIntAtIndex_BE, IntBuffer::get);</span>
          Consumer&lt;MemoryAddress&gt; floatChecker =
<span class="udiff-line-modified-removed">-                 (base) -&gt; checkBytes(base, floats, ByteBuffer::asFloatBuffer, (addr, pos) -&gt; MemoryAccess.getFloat_BE(addr, pos * 4), FloatBuffer::get);</span>
<span class="udiff-line-modified-added">+                 (base) -&gt; checkBytes(base, floats, ByteBuffer::asFloatBuffer, MemoryAccess::getFloatAtIndex_BE, FloatBuffer::get);</span>
          Consumer&lt;MemoryAddress&gt; longChecker =
<span class="udiff-line-modified-removed">-                 (base) -&gt; checkBytes(base, longs, ByteBuffer::asLongBuffer, (addr, pos) -&gt; MemoryAccess.getLong_BE(addr, pos * 8), LongBuffer::get);</span>
<span class="udiff-line-modified-added">+                 (base) -&gt; checkBytes(base, longs, ByteBuffer::asLongBuffer, MemoryAccess::getLongAtIndex_BE, LongBuffer::get);</span>
          Consumer&lt;MemoryAddress&gt; doubleChecker =
<span class="udiff-line-modified-removed">-                 (base) -&gt; checkBytes(base, doubles, ByteBuffer::asDoubleBuffer, (addr, pos) -&gt; MemoryAccess.getDouble_BE(addr, pos * 8), DoubleBuffer::get);</span>
<span class="udiff-line-modified-added">+                 (base) -&gt; checkBytes(base, doubles, ByteBuffer::asDoubleBuffer, MemoryAccess::getDoubleAtIndex_BE, DoubleBuffer::get);</span>
  
          return new Object[][]{
                  {byteChecker, byteInitializer, bytes},
                  {charChecker, charInitializer, chars},
                  {shortChecker, shortInitializer, shorts},
</pre>
<center><a href="../../../../src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/MemoryAccess.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>