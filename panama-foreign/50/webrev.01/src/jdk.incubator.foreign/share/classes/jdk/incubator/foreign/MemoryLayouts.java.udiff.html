<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/MemoryLayouts.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="MemoryLayout.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="PaddingLayout.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/MemoryLayouts.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  *  Copyright (c) 2019, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  *  Copyright (c) 2019, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   *  DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   *  This code is free software; you can redistribute it and/or modify it
   *  under the terms of the GNU General Public License version 2 only, as
   *  published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -24,12 +24,18 @@</span>
   *
   */
  
  package jdk.incubator.foreign;
  
<span class="udiff-line-added">+ import jdk.internal.foreign.abi.x64.windows.Windowsx64ABI;</span>
<span class="udiff-line-added">+ </span>
  import java.nio.ByteOrder;
  
<span class="udiff-line-added">+ import static jdk.incubator.foreign.SystemABI.ABI_AARCH64;</span>
<span class="udiff-line-added">+ import static jdk.incubator.foreign.SystemABI.ABI_SYSV;</span>
<span class="udiff-line-added">+ import static jdk.incubator.foreign.SystemABI.ABI_WINDOWS;</span>
<span class="udiff-line-added">+ </span>
  /**
   * This class defines useful layout constants. Some of the constants defined in this class are explicit in both
   * size and byte order (see {@link #BITS_64_BE}), and can therefore be used to explicitly and unambiguously specify the
   * contents of a memory segment. Other constants make implicit byte order assumptions (see
   * {@link #JAVA_INT}); as such, these constants make it easy to work with other serialization-centric APIs,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -42,26 +48,26 @@</span>
      }
  
      /**
       * A value layout constant with size of one byte, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       */
<span class="udiff-line-modified-removed">-     public static final ValueLayout BITS_8_LE = MemoryLayout.ofValueBits(8, ByteOrder.LITTLE_ENDIAN);</span>
<span class="udiff-line-modified-added">+     public static final ValueLayout BITS_8_LE = SharedLayouts.BITS_8_LE;</span>
  
      /**
       * A value layout constant with size of two bytes, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       */
<span class="udiff-line-modified-removed">-     public static final ValueLayout BITS_16_LE = MemoryLayout.ofValueBits(16, ByteOrder.LITTLE_ENDIAN);</span>
<span class="udiff-line-modified-added">+     public static final ValueLayout BITS_16_LE = SharedLayouts.BITS_16_LE;</span>
  
      /**
       * A value layout constant with size of four bytes, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       */
<span class="udiff-line-modified-removed">-     public static final ValueLayout BITS_32_LE = MemoryLayout.ofValueBits(32, ByteOrder.LITTLE_ENDIAN);</span>
<span class="udiff-line-modified-added">+     public static final ValueLayout BITS_32_LE = SharedLayouts.BITS_32_LE;</span>
  
      /**
       * A value layout constant with size of eight bytes, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       */
<span class="udiff-line-modified-removed">-     public static final ValueLayout BITS_64_LE = MemoryLayout.ofValueBits(64, ByteOrder.LITTLE_ENDIAN);</span>
<span class="udiff-line-modified-added">+     public static final ValueLayout BITS_64_LE = SharedLayouts.BITS_64_LE;</span>
  
      /**
       * A value layout constant with size of one byte, and byte order set to {@link ByteOrder#BIG_ENDIAN}.
       */
      public static final ValueLayout BITS_8_BE = MemoryLayout.ofValueBits(8, ByteOrder.BIG_ENDIAN);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -133,6 +139,467 @@</span>
  
      /**
       * A value layout constant whose size is the same as that of a Java {@code double}, and byte order set to {@link ByteOrder#nativeOrder()}.
       */
      public static final ValueLayout JAVA_DOUBLE = MemoryLayout.ofValueBits(64, ByteOrder.nativeOrder());
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code _Bool} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_BOOL;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code unsigned char} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_UCHAR;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code signed char} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_SCHAR ;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code char} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_CHAR;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code short} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_SHORT;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code unsigned short} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_USHORT;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code int} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_INT;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code unsigned int} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_UINT;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code long} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_LONG;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code unsigned long} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_ULONG;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code long long} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_LONGLONG;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code unsigned long long} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_ULONGLONG;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code float} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_FLOAT;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code double} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_DOUBLE;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * The {@code T*} native type.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final ValueLayout C_POINTER;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     static {</span>
<span class="udiff-line-added">+         SystemABI abi = SystemABI.getInstance();</span>
<span class="udiff-line-added">+         switch (abi.name()) {</span>
<span class="udiff-line-added">+             case ABI_SYSV -&gt; {</span>
<span class="udiff-line-added">+                 C_BOOL = SysV.C_BOOL;</span>
<span class="udiff-line-added">+                 C_UCHAR = SysV.C_UCHAR;</span>
<span class="udiff-line-added">+                 C_SCHAR = SysV.C_SCHAR;</span>
<span class="udiff-line-added">+                 C_CHAR = SysV.C_CHAR;</span>
<span class="udiff-line-added">+                 C_SHORT = SysV.C_SHORT;</span>
<span class="udiff-line-added">+                 C_USHORT = SysV.C_USHORT;</span>
<span class="udiff-line-added">+                 C_INT = SysV.C_INT;</span>
<span class="udiff-line-added">+                 C_UINT = SysV.C_UINT;</span>
<span class="udiff-line-added">+                 C_LONG = SysV.C_LONG;</span>
<span class="udiff-line-added">+                 C_ULONG = SysV.C_ULONG;</span>
<span class="udiff-line-added">+                 C_LONGLONG = SysV.C_LONGLONG;</span>
<span class="udiff-line-added">+                 C_ULONGLONG = SysV.C_ULONGLONG;</span>
<span class="udiff-line-added">+                 C_FLOAT = SysV.C_FLOAT;</span>
<span class="udiff-line-added">+                 C_DOUBLE = SysV.C_DOUBLE;</span>
<span class="udiff-line-added">+                 C_POINTER = SysV.C_POINTER;</span>
<span class="udiff-line-added">+             }</span>
<span class="udiff-line-added">+             case ABI_WINDOWS -&gt; {</span>
<span class="udiff-line-added">+                 C_BOOL = WinABI.C_BOOL;</span>
<span class="udiff-line-added">+                 C_UCHAR = WinABI.C_UCHAR;</span>
<span class="udiff-line-added">+                 C_SCHAR = WinABI.C_SCHAR;</span>
<span class="udiff-line-added">+                 C_CHAR = WinABI.C_CHAR;</span>
<span class="udiff-line-added">+                 C_SHORT = WinABI.C_SHORT;</span>
<span class="udiff-line-added">+                 C_USHORT = WinABI.C_USHORT;</span>
<span class="udiff-line-added">+                 C_INT = WinABI.C_INT;</span>
<span class="udiff-line-added">+                 C_UINT = WinABI.C_UINT;</span>
<span class="udiff-line-added">+                 C_LONG = WinABI.C_LONG;</span>
<span class="udiff-line-added">+                 C_ULONG = WinABI.C_ULONG;</span>
<span class="udiff-line-added">+                 C_LONGLONG = WinABI.C_LONGLONG;</span>
<span class="udiff-line-added">+                 C_ULONGLONG = WinABI.C_ULONGLONG;</span>
<span class="udiff-line-added">+                 C_FLOAT = WinABI.C_FLOAT;</span>
<span class="udiff-line-added">+                 C_DOUBLE = WinABI.C_DOUBLE;</span>
<span class="udiff-line-added">+                 C_POINTER = WinABI.C_POINTER;</span>
<span class="udiff-line-added">+             }</span>
<span class="udiff-line-added">+             case ABI_AARCH64 -&gt; {</span>
<span class="udiff-line-added">+                 C_BOOL = AArch64ABI.C_BOOL;</span>
<span class="udiff-line-added">+                 C_UCHAR = AArch64ABI.C_UCHAR;</span>
<span class="udiff-line-added">+                 C_SCHAR = AArch64ABI.C_SCHAR;</span>
<span class="udiff-line-added">+                 C_CHAR = AArch64ABI.C_CHAR;</span>
<span class="udiff-line-added">+                 C_SHORT = AArch64ABI.C_SHORT;</span>
<span class="udiff-line-added">+                 C_USHORT = AArch64ABI.C_USHORT;</span>
<span class="udiff-line-added">+                 C_INT = AArch64ABI.C_INT;</span>
<span class="udiff-line-added">+                 C_UINT = AArch64ABI.C_UINT;</span>
<span class="udiff-line-added">+                 C_LONG = AArch64ABI.C_LONG;</span>
<span class="udiff-line-added">+                 C_ULONG = AArch64ABI.C_ULONG;</span>
<span class="udiff-line-added">+                 C_LONGLONG = AArch64ABI.C_LONGLONG;</span>
<span class="udiff-line-added">+                 C_ULONGLONG = AArch64ABI.C_ULONGLONG;</span>
<span class="udiff-line-added">+                 C_FLOAT = AArch64ABI.C_FLOAT;</span>
<span class="udiff-line-added">+                 C_DOUBLE = AArch64ABI.C_DOUBLE;</span>
<span class="udiff-line-added">+                 C_POINTER = AArch64ABI.C_POINTER;</span>
<span class="udiff-line-added">+             }</span>
<span class="udiff-line-added">+             default -&gt; throw new IllegalStateException(&quot;Unsupported ABI: &quot; + abi.name());</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * This class defines layout constants modelling standard primitive types supported by the x64 SystemV ABI.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final class SysV {</span>
<span class="udiff-line-added">+         private SysV() {</span>
<span class="udiff-line-added">+             //just the one</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code _Bool} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_BOOL = SharedLayouts.BITS_8_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.BOOL);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned char} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_UCHAR = SharedLayouts.BITS_8_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_CHAR);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code signed char} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_SCHAR = SharedLayouts.BITS_8_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SIGNED_CHAR);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code char} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_CHAR = SharedLayouts.BITS_8_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.CHAR);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code short} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_SHORT = SharedLayouts.BITS_16_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SHORT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned short} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_USHORT = SharedLayouts.BITS_16_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_SHORT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code int} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_INT = SharedLayouts.BITS_32_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.INT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned int} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_UINT = SharedLayouts.BITS_32_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_INT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code long} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_LONG = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned long} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_ULONG = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code long long} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_LONGLONG = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_LONG);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned long long} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_ULONGLONG = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG_LONG);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code float} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_FLOAT = SharedLayouts.BITS_32_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.FLOAT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code double} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_DOUBLE = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.DOUBLE);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code long double} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_LONGDOUBLE = MemoryLayout.ofValueBits(128, ByteOrder.LITTLE_ENDIAN)</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_DOUBLE);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code complex long double} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final GroupLayout C_COMPLEX_LONGDOUBLE = MemoryLayout.ofStruct(C_LONGDOUBLE, C_LONGDOUBLE)</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.COMPLEX_LONG_DOUBLE);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code T*} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_POINTER = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.POINTER);</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * This class defines layout constants modelling standard primitive types supported by the x64 Windows ABI.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final class WinABI {</span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code _Bool} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_BOOL = SharedLayouts.BITS_8_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.BOOL);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned char} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_UCHAR = SharedLayouts.BITS_8_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_CHAR);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code signed char} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_SCHAR = SharedLayouts.BITS_8_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SIGNED_CHAR);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code char} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_CHAR = SharedLayouts.BITS_8_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.CHAR);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code short} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_SHORT = SharedLayouts.BITS_16_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SHORT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned short} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_USHORT = SharedLayouts.BITS_16_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_SHORT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code int} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_INT = SharedLayouts.BITS_32_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.INT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned int} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_UINT = SharedLayouts.BITS_32_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_INT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code long} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_LONG = SharedLayouts.BITS_32_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned long} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_ULONG = SharedLayouts.BITS_32_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code long long} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_LONGLONG = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_LONG);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned long long} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_ULONGLONG = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG_LONG);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code float} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_FLOAT = SharedLayouts.BITS_32_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.FLOAT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code double} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_DOUBLE = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.DOUBLE);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code long double} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_LONGDOUBLE = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_DOUBLE);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code T*} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_POINTER = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.POINTER);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         public static ValueLayout asVarArg(ValueLayout l) {</span>
<span class="udiff-line-added">+            return l.withAnnotation(Windowsx64ABI.VARARGS_ANNOTATION_NAME, &quot;true&quot;);</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * This class defines layout constants modelling standard primitive types supported by the AArch64 ABI.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static final class AArch64ABI {</span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code _Bool} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_BOOL = SharedLayouts.BITS_8_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.BOOL);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned char} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_UCHAR = SharedLayouts.BITS_8_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_CHAR);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code signed char} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_SCHAR = SharedLayouts.BITS_8_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SIGNED_CHAR);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code char} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_CHAR = SharedLayouts.BITS_8_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.CHAR);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code short} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_SHORT = SharedLayouts.BITS_16_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SHORT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned short} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_USHORT = SharedLayouts.BITS_16_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_SHORT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code int} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_INT = SharedLayouts.BITS_32_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.INT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned int} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_UINT = SharedLayouts.BITS_32_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_INT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code long} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_LONG = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned long} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_ULONG = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code long long} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_LONGLONG = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_LONG);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code unsigned long long} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_ULONGLONG = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG_LONG);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code float} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_FLOAT = SharedLayouts.BITS_32_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.FLOAT);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code double} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_DOUBLE = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.DOUBLE);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code long double} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_LONGDOUBLE = MemoryLayout.ofValueBits(128, ByteOrder.LITTLE_ENDIAN)</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_DOUBLE);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         /**</span>
<span class="udiff-line-added">+          * The {@code T*} native type.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         public static final ValueLayout C_POINTER = SharedLayouts.BITS_64_LE</span>
<span class="udiff-line-added">+                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.POINTER);</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     private static class SharedLayouts { // Separate class to prevent circular clinit references</span>
<span class="udiff-line-added">+         public static final ValueLayout BITS_8_LE = MemoryLayout.ofValueBits(8, ByteOrder.LITTLE_ENDIAN);</span>
<span class="udiff-line-added">+         public static final ValueLayout BITS_16_LE = MemoryLayout.ofValueBits(16, ByteOrder.LITTLE_ENDIAN);</span>
<span class="udiff-line-added">+         public static final ValueLayout BITS_32_LE = MemoryLayout.ofValueBits(32, ByteOrder.LITTLE_ENDIAN);</span>
<span class="udiff-line-added">+         public static final ValueLayout BITS_64_LE = MemoryLayout.ofValueBits(64, ByteOrder.LITTLE_ENDIAN);</span>
<span class="udiff-line-added">+     }</span>
  }
</pre>
<center><a href="MemoryLayout.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="PaddingLayout.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>