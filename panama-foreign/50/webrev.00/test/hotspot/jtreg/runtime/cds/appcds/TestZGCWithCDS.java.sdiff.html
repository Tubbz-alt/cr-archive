<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/runtime/cds/appcds/TestZGCWithCDS.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="CommandLineFlagComboNegative.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="dynamicArchive/NoClassToArchive.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/runtime/cds/appcds/TestZGCWithCDS.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 45          out.shouldContain(&quot;Dumping shared data to file:&quot;);
 46          out.shouldHaveExitValue(0);
 47 
 48          // 1. Run with same args of dump
 49          System.out.println(&quot;1. Run with same args of dump&quot;);
 50          out = TestCommon
 51                    .exec(helloJar,
 52                          &quot;-XX:+UnlockExperimentalVMOptions&quot;,
 53                          &quot;-XX:+UseZGC&quot;,
 54                          &quot;-Xlog:cds&quot;,
 55                          &quot;Hello&quot;);
 56          out.shouldContain(HELLO);
 57          out.shouldHaveExitValue(0);
 58 
 59          // 2. Run with ZGC turned off
 60          System.out.println(&quot;2. Run with ZGC turned off&quot;);
 61          out = TestCommon
 62                    .exec(helloJar,
 63                          &quot;-XX:+UnlockExperimentalVMOptions&quot;,
 64                          &quot;-XX:-UseZGC&quot;,


 65                          &quot;-Xlog:cds&quot;,
 66                          &quot;Hello&quot;);
 67          out.shouldContain(UNABLE_TO_USE_ARCHIVE);
 68          out.shouldContain(ERR_MSG);
 69          out.shouldHaveExitValue(1);
 70 
 71          // 3. Run with -UseCompressedOops -UseCompressedClassPointers
 72          System.out.println(&quot;3. Run with -UseCompressedOops -UseCompressedClassPointers&quot;);
 73          out = TestCommon
 74                    .exec(helloJar,
 75                          &quot;-XX:-UseCompressedOops&quot;,
 76                          &quot;-XX:-UseCompressedClassPointers&quot;,
 77                          &quot;-Xlog:cds&quot;,
 78                          &quot;Hello&quot;);
 79          out.shouldContain(HELLO);
 80          out.shouldHaveExitValue(0);
 81 
 82          // 4. Run with +UseCompressedOops -UseCompressedClassPointers
 83          System.out.println(&quot;4. Run with +UseCompressedOops -UseCompressedClassPointers&quot;);
 84          out = TestCommon
</pre>
</td>
<td>
<hr />
<pre>
 45          out.shouldContain(&quot;Dumping shared data to file:&quot;);
 46          out.shouldHaveExitValue(0);
 47 
 48          // 1. Run with same args of dump
 49          System.out.println(&quot;1. Run with same args of dump&quot;);
 50          out = TestCommon
 51                    .exec(helloJar,
 52                          &quot;-XX:+UnlockExperimentalVMOptions&quot;,
 53                          &quot;-XX:+UseZGC&quot;,
 54                          &quot;-Xlog:cds&quot;,
 55                          &quot;Hello&quot;);
 56          out.shouldContain(HELLO);
 57          out.shouldHaveExitValue(0);
 58 
 59          // 2. Run with ZGC turned off
 60          System.out.println(&quot;2. Run with ZGC turned off&quot;);
 61          out = TestCommon
 62                    .exec(helloJar,
 63                          &quot;-XX:+UnlockExperimentalVMOptions&quot;,
 64                          &quot;-XX:-UseZGC&quot;,
<span class="line-added"> 65                          &quot;-XX:+UseCompressedOops&quot;,           // in case turned off by vmoptions</span>
<span class="line-added"> 66                          &quot;-XX:+UseCompressedClassPointers&quot;,  // by jtreg</span>
 67                          &quot;-Xlog:cds&quot;,
 68                          &quot;Hello&quot;);
 69          out.shouldContain(UNABLE_TO_USE_ARCHIVE);
 70          out.shouldContain(ERR_MSG);
 71          out.shouldHaveExitValue(1);
 72 
 73          // 3. Run with -UseCompressedOops -UseCompressedClassPointers
 74          System.out.println(&quot;3. Run with -UseCompressedOops -UseCompressedClassPointers&quot;);
 75          out = TestCommon
 76                    .exec(helloJar,
 77                          &quot;-XX:-UseCompressedOops&quot;,
 78                          &quot;-XX:-UseCompressedClassPointers&quot;,
 79                          &quot;-Xlog:cds&quot;,
 80                          &quot;Hello&quot;);
 81          out.shouldContain(HELLO);
 82          out.shouldHaveExitValue(0);
 83 
 84          // 4. Run with +UseCompressedOops -UseCompressedClassPointers
 85          System.out.println(&quot;4. Run with +UseCompressedOops -UseCompressedClassPointers&quot;);
 86          out = TestCommon
</pre>
</td>
</tr>
</table>
<center><a href="CommandLineFlagComboNegative.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="dynamicArchive/NoClassToArchive.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>