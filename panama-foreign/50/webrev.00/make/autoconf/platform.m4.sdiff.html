<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/autoconf/platform.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="lib-ffi.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="util.m4.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/platform.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 #
<span class="line-modified">  2 # Copyright (c) 2011, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4 #
  5 # This code is free software; you can redistribute it and/or modify it
  6 # under the terms of the GNU General Public License version 2 only, as
  7 # published by the Free Software Foundation.  Oracle designates this
  8 # particular file as subject to the &quot;Classpath&quot; exception as provided
  9 # by Oracle in the LICENSE file that accompanied this code.
 10 #
 11 # This code is distributed in the hope that it will be useful, but WITHOUT
 12 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14 # version 2 for more details (a copy is included in the LICENSE file that
 15 # accompanied this code).
 16 #
 17 # You should have received a copy of the GNU General Public License version
 18 # 2 along with this work; if not, write to the Free Software Foundation,
 19 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20 #
 21 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22 # or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
546 [
547   # Figure out the build and target systems. # Note that in autoconf terminology, &quot;build&quot; is obvious, but &quot;target&quot;
548   # is confusing; it assumes you are cross-compiling a cross-compiler (!)  and &quot;target&quot; is thus the target of the
549   # product you&#39;re building. The target of this build is called &quot;host&quot;. Since this is confusing to most people, we
550   # have not adopted that system, but use &quot;target&quot; as the platform we are building for. In some places though we need
551   # to use the configure naming style.
552   AC_CANONICAL_BUILD
553   AC_CANONICAL_HOST
554   AC_CANONICAL_TARGET
555 
556   PLATFORM_EXTRACT_TARGET_AND_BUILD
557   PLATFORM_SETUP_TARGET_CPU_BITS
558   PLATFORM_SET_MODULE_TARGET_OS_VALUES
559   PLATFORM_SET_RELEASE_FILE_OS_VALUES
560   PLATFORM_SETUP_LEGACY_VARS
561   PLATFORM_CHECK_DEPRECATION
562 ])
563 
564 AC_DEFUN([PLATFORM_CHECK_DEPRECATION],
565 [
<span class="line-modified">566   AC_ARG_ENABLE(deprecated-ports, [AS_HELP_STRING([--enable-deprecated-ports@&lt;:@=yes/no@:&gt;@],</span>
<span class="line-modified">567        [Suppress the error when configuring for a deprecated port @&lt;:@no@:&gt;@])])</span>
<span class="line-modified">568 </span>
<span class="line-modified">569   if test &quot;x$OPENJDK_TARGET_OS&quot; = xsolaris || (test &quot;x$OPENJDK_TARGET_CPU_ARCH&quot; = xsparc &amp;&amp; test &quot;x$with_jvm_variants&quot; != xzero); then</span>
<span class="line-modified">570     if test &quot;x$enable_deprecated_ports&quot; = &quot;xyes&quot;; then</span>



571       AC_MSG_WARN([The Solaris and SPARC ports are deprecated and may be removed in a future release.])
572     else
573       AC_MSG_ERROR(m4_normalize([The Solaris and SPARC ports are deprecated and may be removed in a
574         future release. Use --enable-deprecated-ports=yes to suppress this error.]))
575     fi
576   fi
577 ])
578 
579 AC_DEFUN_ONCE([PLATFORM_SETUP_OPENJDK_BUILD_OS_VERSION],
580 [
581   ###############################################################################
582 
583   # Note that this is the build platform OS version!
584 
585   OS_VERSION=&quot;`uname -r | ${SED} &#39;s!\.! !g&#39; | ${SED} &#39;s!-! !g&#39;`&quot;
586   OS_VERSION_MAJOR=&quot;`${ECHO} ${OS_VERSION} | ${CUT} -f 1 -d &#39; &#39;`&quot;
587   OS_VERSION_MINOR=&quot;`${ECHO} ${OS_VERSION} | ${CUT} -f 2 -d &#39; &#39;`&quot;
588   OS_VERSION_MICRO=&quot;`${ECHO} ${OS_VERSION} | ${CUT} -f 3 -d &#39; &#39;`&quot;
589   AC_SUBST(OS_VERSION_MAJOR)
590   AC_SUBST(OS_VERSION_MINOR)
</pre>
</td>
<td>
<hr />
<pre>
  1 #
<span class="line-modified">  2 # Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4 #
  5 # This code is free software; you can redistribute it and/or modify it
  6 # under the terms of the GNU General Public License version 2 only, as
  7 # published by the Free Software Foundation.  Oracle designates this
  8 # particular file as subject to the &quot;Classpath&quot; exception as provided
  9 # by Oracle in the LICENSE file that accompanied this code.
 10 #
 11 # This code is distributed in the hope that it will be useful, but WITHOUT
 12 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14 # version 2 for more details (a copy is included in the LICENSE file that
 15 # accompanied this code).
 16 #
 17 # You should have received a copy of the GNU General Public License version
 18 # 2 along with this work; if not, write to the Free Software Foundation,
 19 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20 #
 21 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22 # or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
546 [
547   # Figure out the build and target systems. # Note that in autoconf terminology, &quot;build&quot; is obvious, but &quot;target&quot;
548   # is confusing; it assumes you are cross-compiling a cross-compiler (!)  and &quot;target&quot; is thus the target of the
549   # product you&#39;re building. The target of this build is called &quot;host&quot;. Since this is confusing to most people, we
550   # have not adopted that system, but use &quot;target&quot; as the platform we are building for. In some places though we need
551   # to use the configure naming style.
552   AC_CANONICAL_BUILD
553   AC_CANONICAL_HOST
554   AC_CANONICAL_TARGET
555 
556   PLATFORM_EXTRACT_TARGET_AND_BUILD
557   PLATFORM_SETUP_TARGET_CPU_BITS
558   PLATFORM_SET_MODULE_TARGET_OS_VALUES
559   PLATFORM_SET_RELEASE_FILE_OS_VALUES
560   PLATFORM_SETUP_LEGACY_VARS
561   PLATFORM_CHECK_DEPRECATION
562 ])
563 
564 AC_DEFUN([PLATFORM_CHECK_DEPRECATION],
565 [
<span class="line-modified">566   UTIL_ARG_ENABLE(NAME: deprecated-ports, DEFAULT: false,</span>
<span class="line-modified">567       RESULT: ENABLE_DEPRECATED_PORTS,</span>
<span class="line-modified">568       DESC: [suppress the error when configuring for a deprecated port])</span>
<span class="line-modified">569 </span>
<span class="line-modified">570   if test &quot;x$OPENJDK_TARGET_OS&quot; = xsolaris || \</span>
<span class="line-added">571       (test &quot;x$OPENJDK_TARGET_CPU_ARCH&quot; = xsparc &amp;&amp; \</span>
<span class="line-added">572       test &quot;x$with_jvm_variants&quot; != xzero); then</span>
<span class="line-added">573     if test &quot;x$ENABLE_DEPRECATED_PORTS&quot; = &quot;xtrue&quot;; then</span>
574       AC_MSG_WARN([The Solaris and SPARC ports are deprecated and may be removed in a future release.])
575     else
576       AC_MSG_ERROR(m4_normalize([The Solaris and SPARC ports are deprecated and may be removed in a
577         future release. Use --enable-deprecated-ports=yes to suppress this error.]))
578     fi
579   fi
580 ])
581 
582 AC_DEFUN_ONCE([PLATFORM_SETUP_OPENJDK_BUILD_OS_VERSION],
583 [
584   ###############################################################################
585 
586   # Note that this is the build platform OS version!
587 
588   OS_VERSION=&quot;`uname -r | ${SED} &#39;s!\.! !g&#39; | ${SED} &#39;s!-! !g&#39;`&quot;
589   OS_VERSION_MAJOR=&quot;`${ECHO} ${OS_VERSION} | ${CUT} -f 1 -d &#39; &#39;`&quot;
590   OS_VERSION_MINOR=&quot;`${ECHO} ${OS_VERSION} | ${CUT} -f 2 -d &#39; &#39;`&quot;
591   OS_VERSION_MICRO=&quot;`${ECHO} ${OS_VERSION} | ${CUT} -f 3 -d &#39; &#39;`&quot;
592   AC_SUBST(OS_VERSION_MAJOR)
593   AC_SUBST(OS_VERSION_MINOR)
</pre>
</td>
</tr>
</table>
<center><a href="lib-ffi.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="util.m4.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>