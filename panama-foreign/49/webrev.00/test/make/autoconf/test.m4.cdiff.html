<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/make/autoconf/test.m4</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
<body>
<center><a href="../../lib/sun/hotspot/WhiteBox.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> next &gt;</center>    <h2>test/make/autoconf/test.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 44,17 ***</span>
<span class="line-new-header">--- 44,63 ---</span>
    UTIL_GET_MATCHING_VALUES(ACTUAL, $FEW, $MANY)
    UTIL_ASSERT_STRING_EQUALS($ACTUAL, $EXPECTED_MATCHING, \
        [UTIL_GET_MATCHING_VALUES failed])
  ])
  
<span class="line-added">+ AC_DEFUN([TEST_ARG_ENABLE],</span>
<span class="line-added">+ [</span>
<span class="line-added">+   # fake &#39;--enable-default-false=yes&#39; on the command line</span>
<span class="line-added">+   enable_default_false=yes</span>
<span class="line-added">+   UTIL_ARG_ENABLE(NAME: default-false, DEFAULT: false, RESULT: TEST_RESULT)</span>
<span class="line-added">+   UTIL_ASSERT_TRUE($TEST_RESULT)</span>
<span class="line-added">+ </span>
<span class="line-added">+   # assume &#39;--enable-default-true-but-unavailable=yes&#39; not set</span>
<span class="line-added">+   UTIL_ARG_ENABLE(NAME: default-true-but-unavailable, DEFAULT: auto, RESULT: TEST_RESULT, AVAILABLE: false)</span>
<span class="line-added">+   UTIL_ASSERT_NOT_TRUE($TEST_RESULT)</span>
<span class="line-added">+ </span>
<span class="line-added">+   enable_test_given_yes=yes</span>
<span class="line-added">+   given=false</span>
<span class="line-added">+   enabled=false</span>
<span class="line-added">+   disabled=false</span>
<span class="line-added">+   UTIL_ARG_ENABLE(NAME: test-given-yes, DEFAULT: false,</span>
<span class="line-added">+       IF_GIVEN: [ given=true ], IF_ENABLED: [ enabled=true ],</span>
<span class="line-added">+       IF_DISABLED: [ disabled=true ])</span>
<span class="line-added">+   UTIL_ASSERT_TRUE($given)</span>
<span class="line-added">+   UTIL_ASSERT_TRUE($enabled)</span>
<span class="line-added">+   UTIL_ASSERT_NOT_TRUE($disabled)</span>
<span class="line-added">+ </span>
<span class="line-added">+   enable_test_given_default=no</span>
<span class="line-added">+   given=false</span>
<span class="line-added">+   enabled=false</span>
<span class="line-added">+   disabled=false</span>
<span class="line-added">+   UTIL_ARG_ENABLE(NAME: test-given-default, DEFAULT: true,</span>
<span class="line-added">+       IF_GIVEN: [ given=true ], IF_ENABLED: [ enabled=true ],</span>
<span class="line-added">+       IF_DISABLED: [ disabled=true ])</span>
<span class="line-added">+   UTIL_ASSERT_TRUE($given)</span>
<span class="line-added">+   UTIL_ASSERT_NOT_TRUE($enabled)</span>
<span class="line-added">+   UTIL_ASSERT_TRUE($disabled)</span>
<span class="line-added">+ </span>
<span class="line-added">+   # assume &#39;--enable-test-given-no&#39; not set</span>
<span class="line-added">+   given=false</span>
<span class="line-added">+   enabled=false</span>
<span class="line-added">+   disabled=false</span>
<span class="line-added">+   UTIL_ARG_ENABLE(NAME: test-given-no, DEFAULT: true,</span>
<span class="line-added">+       IF_GIVEN: [ given=true ], IF_ENABLED: [ enabled=true ],</span>
<span class="line-added">+       IF_DISABLED: [ disabled=true ])</span>
<span class="line-added">+   UTIL_ASSERT_NOT_TRUE($given)</span>
<span class="line-added">+   UTIL_ASSERT_TRUE($enabled)</span>
<span class="line-added">+   UTIL_ASSERT_NOT_TRUE($disabled)</span>
<span class="line-added">+ ])</span>
<span class="line-added">+ </span>
  # Use the CUSTOM_EARLY_HOOK to inject our test after basic init is done.
  AC_DEFUN_ONCE([CUSTOM_EARLY_HOOK],
  [
    $PRINTF &quot;\nStarting configure tests\n&quot;
    $PRINTF &quot;==============================\n&quot;
  
    TEST_STRING_OPS
<span class="line-added">+   TEST_ARG_ENABLE</span>
  
    # If no assertions failed, report success
    $PRINTF &quot;==============================\n&quot;
    $PRINTF &quot;Configure tests finished successfully\n\n&quot;
    exit 0
</pre>
<center><a href="../../lib/sun/hotspot/WhiteBox.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>