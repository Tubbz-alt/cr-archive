<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/lib/jdk/test/lib/containers/cgroup/CgroupMetricsTester.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../LockFreeLogger.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MetricsTesterCgroupV1.java.udiff.html" target="_top">next &gt;</a></center>    <h2>test/lib/jdk/test/lib/containers/cgroup/CgroupMetricsTester.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -23,10 +23,11 @@</span>
  
  package jdk.test.lib.containers.cgroup;
  
  import java.io.IOException;
  import java.math.BigInteger;
<span class="udiff-line-added">+ import java.util.Arrays;</span>
  import java.util.stream.IntStream;
  import java.util.stream.Stream;
  
  interface CgroupMetricsTester {
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -39,13 +40,13 @@</span>
      public void testCpuSets();
      public void testCpuConsumption() throws IOException, InterruptedException;
      public void testMemoryUsage() throws Exception;
      public void testMisc();
  
<span class="udiff-line-modified-removed">-     public static long convertStringToLong(String strval, long overflowRetval) {</span>
<span class="udiff-line-modified-removed">-         long retval = 0;</span>
<span class="udiff-line-modified-removed">-         if (strval == null) return 0L;</span>
<span class="udiff-line-modified-added">+     public static long convertStringToLong(String strval, long initialVal, long overflowRetval) {</span>
<span class="udiff-line-modified-added">+         long retval = initialVal;</span>
<span class="udiff-line-modified-added">+         if (strval == null) return retval;</span>
  
          try {
              retval = Long.parseLong(strval);
          } catch (NumberFormatException e) {
              // For some properties (e.g. memory.limit_in_bytes) we may overflow the range of signed long.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -91,11 +92,11 @@</span>
                  + &quot;, expected [&quot; + oldVal + &quot;], got [&quot; + testVal + &quot;]&quot;);
      }
  
      public static Integer[] convertCpuSetsToArray(String cpusstr) {
          if (cpusstr == null || EMPTY_STR.equals(cpusstr)) {
<span class="udiff-line-modified-removed">-             return new Integer[0];</span>
<span class="udiff-line-modified-added">+             return null;</span>
          }
          // Parse range string in the format 1,2-6,7
          Integer[] cpuSets = Stream.of(cpusstr.split(&quot;,&quot;)).flatMap(a -&gt; {
              if (a.contains(&quot;-&quot;)) {
                  String[] range = a.split(&quot;-&quot;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -106,6 +107,21 @@</span>
              }
          }).toArray(Integer[]::new);
          return cpuSets;
      }
  
<span class="udiff-line-added">+     public static Integer[] boxedArrayOrNull(int[] primitiveArray) {</span>
<span class="udiff-line-added">+         if (primitiveArray == null) {</span>
<span class="udiff-line-added">+             return null;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+         return Arrays.stream(primitiveArray).boxed().toArray(Integer[]::new);</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     public static Integer[] sortAllowNull(Integer[] array) {</span>
<span class="udiff-line-added">+         if (array == null) {</span>
<span class="udiff-line-added">+             return null;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+         Arrays.sort(array);</span>
<span class="udiff-line-added">+         return array;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
  }
</pre>
<center><a href="../../LockFreeLogger.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MetricsTesterCgroupV1.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>