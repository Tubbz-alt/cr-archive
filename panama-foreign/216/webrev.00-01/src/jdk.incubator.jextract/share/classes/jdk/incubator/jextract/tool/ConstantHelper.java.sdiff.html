<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.jextract/share/classes/jdk/incubator/jextract/tool/ConstantHelper.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/jdk.incubator.jextract/share/classes/jdk/incubator/jextract/tool/ConstantHelper.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
119     private static final ClassDesc CD_PathElelemt = desc(MemoryLayout.PathElement.class);
120     private static final ClassDesc CD_MemoryAddress = desc(MemoryAddress.class);
121     private static final ClassDesc CD_MemorySegment = desc(MemorySegment.class);
122 
123     private final DirectMethodHandleDesc MH_downcallHandle;
124     private final DirectMethodHandleDesc MH_lookupGlobalVariable;
125     private final DirectMethodHandleDesc MH_makeCString;
126 
127     private ClassWriter cw;
128     private final String internalClassName;
129     private final ClassDesc CD_constantsHelper;
130     private final ConstantDesc LIBRARIES;
131 
132     private final Map&lt;String, DirectMethodHandleDesc&gt; pool = new HashMap&lt;&gt;();
133 
134     private static final Map&lt;Class&lt;?&gt;, ClassDesc&gt; CARRIERS = Map.ofEntries(
135             Map.entry(Byte.TYPE,                desc(Byte.TYPE)),
136             Map.entry(Short.TYPE,               desc(Short.TYPE)),
137             Map.entry(Character.TYPE,           desc(Character.TYPE)),
138             Map.entry(Integer.TYPE,             desc(Integer.TYPE)),
<span class="line-modified">139             Map.entry(Long.TYPE,                desc(Short.TYPE)),</span>
<span class="line-modified">140             Map.entry(Float.TYPE,               desc(Short.TYPE)),</span>
<span class="line-modified">141             Map.entry(Double.TYPE,              desc(Short.TYPE)),</span>
142             Map.entry(MemoryAddress.class,      desc(Long.TYPE))
143     );
144 
145     ConstantHelper(String parentClassName, ClassDesc runtimeHelper, ClassDesc cString, String[] libraryNames) {
146         this.cw = new ClassWriter(ClassWriter.COMPUTE_FRAMES);
147         String className = parentClassName + &quot;$constants&quot;;
148         this.CD_constantsHelper = ClassDesc.of(className);
149         this.internalClassName = className.replace(&#39;.&#39;, &#39;/&#39;);
150 
151         this.MH_downcallHandle = findRuntimeHelperBootstrap(
152                 runtimeHelper,
153                 &quot;downcallHandle&quot;,
154                 methodType(
155                         MethodHandle.class,
156                         LibraryLookup[].class,
157                         String.class,
158                         String.class,
159                         FunctionDescriptor.class,
160                         boolean.class)
161         );
</pre>
</td>
<td>
<hr />
<pre>
119     private static final ClassDesc CD_PathElelemt = desc(MemoryLayout.PathElement.class);
120     private static final ClassDesc CD_MemoryAddress = desc(MemoryAddress.class);
121     private static final ClassDesc CD_MemorySegment = desc(MemorySegment.class);
122 
123     private final DirectMethodHandleDesc MH_downcallHandle;
124     private final DirectMethodHandleDesc MH_lookupGlobalVariable;
125     private final DirectMethodHandleDesc MH_makeCString;
126 
127     private ClassWriter cw;
128     private final String internalClassName;
129     private final ClassDesc CD_constantsHelper;
130     private final ConstantDesc LIBRARIES;
131 
132     private final Map&lt;String, DirectMethodHandleDesc&gt; pool = new HashMap&lt;&gt;();
133 
134     private static final Map&lt;Class&lt;?&gt;, ClassDesc&gt; CARRIERS = Map.ofEntries(
135             Map.entry(Byte.TYPE,                desc(Byte.TYPE)),
136             Map.entry(Short.TYPE,               desc(Short.TYPE)),
137             Map.entry(Character.TYPE,           desc(Character.TYPE)),
138             Map.entry(Integer.TYPE,             desc(Integer.TYPE)),
<span class="line-modified">139             Map.entry(Long.TYPE,                desc(Long.TYPE)),</span>
<span class="line-modified">140             Map.entry(Float.TYPE,               desc(Float.TYPE)),</span>
<span class="line-modified">141             Map.entry(Double.TYPE,              desc(Double.TYPE)),</span>
142             Map.entry(MemoryAddress.class,      desc(Long.TYPE))
143     );
144 
145     ConstantHelper(String parentClassName, ClassDesc runtimeHelper, ClassDesc cString, String[] libraryNames) {
146         this.cw = new ClassWriter(ClassWriter.COMPUTE_FRAMES);
147         String className = parentClassName + &quot;$constants&quot;;
148         this.CD_constantsHelper = ClassDesc.of(className);
149         this.internalClassName = className.replace(&#39;.&#39;, &#39;/&#39;);
150 
151         this.MH_downcallHandle = findRuntimeHelperBootstrap(
152                 runtimeHelper,
153                 &quot;downcallHandle&quot;,
154                 methodType(
155                         MethodHandle.class,
156                         LibraryLookup[].class,
157                         String.class,
158                         String.class,
159                         FunctionDescriptor.class,
160                         boolean.class)
161         );
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>