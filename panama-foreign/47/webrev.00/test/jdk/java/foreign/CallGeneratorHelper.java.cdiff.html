<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/jdk/java/foreign/CallGeneratorHelper.java</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../../../../src/jdk.incubator.foreign/share/classes/jdk/internal/foreign/MemorySegmentImpl.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="TestByteBuffer.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/foreign/CallGeneratorHelper.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 42,16 ***</span>
  
  import static jdk.incubator.foreign.MemoryLayouts.*;
  import static org.testng.Assert.*;
  
  public class CallGeneratorHelper extends NativeTestHelper {
<span class="line-removed">-     </span>
<span class="line-removed">- 	static final int MAX_FIELDS = 3;</span>
<span class="line-removed">- 	static final int MAX_PARAMS = 3;</span>
<span class="line-removed">- 	static final int CHUNK_SIZE = 600;</span>
  
<span class="line-modified">! 	static int functions = 0;</span>
  
      enum Ret {
          VOID,
          NON_VOID
      }
<span class="line-new-header">--- 42,16 ---</span>
  
  import static jdk.incubator.foreign.MemoryLayouts.*;
  import static org.testng.Assert.*;
  
  public class CallGeneratorHelper extends NativeTestHelper {
  
<span class="line-modified">!     static final int MAX_FIELDS = 3;</span>
<span class="line-added">+     static final int MAX_PARAMS = 3;</span>
<span class="line-added">+     static final int CHUNK_SIZE = 600;</span>
<span class="line-added">+ </span>
<span class="line-added">+     static int functions = 0;</span>
  
      enum Ret {
          VOID,
          NON_VOID
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 153,11 ***</span>
                  combo.pop();
              }
          }
      }
  
<span class="line-modified">! 	@DataProvider(name = &quot;functions&quot;)</span>
      public static Object[][] functions() {
          List&lt;Object[]&gt; downcalls = new ArrayList&lt;&gt;();
          for (Ret r : Ret.values()) {
              for (int i = 0; i &lt;= MAX_PARAMS; i++) {
                  if (r != Ret.VOID &amp;&amp; i == 0) continue;
<span class="line-new-header">--- 153,11 ---</span>
                  combo.pop();
              }
          }
      }
  
<span class="line-modified">!     @DataProvider(name = &quot;functions&quot;)</span>
      public static Object[][] functions() {
          List&lt;Object[]&gt; downcalls = new ArrayList&lt;&gt;();
          for (Ret r : Ret.values()) {
              for (int i = 0; i &lt;= MAX_PARAMS; i++) {
                  if (r != Ret.VOID &amp;&amp; i == 0) continue;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 335,12 ***</span>
          if (arg instanceof MemoryAddress) {
              cleanup(((MemoryAddress)arg).segment());
          } else if (arg instanceof MemorySegment) {
              try {
                  ((MemorySegment) arg).close();
<span class="line-modified">!             } catch (IllegalStateException e) {</span>
<span class="line-modified">!                 assertEquals(e.getMessage(), &quot;Cannot close a root segment&quot;);</span>
                  // fine, NOTHING segment for upcall stubs
              }
          }
      }
  
<span class="line-new-header">--- 335,12 ---</span>
          if (arg instanceof MemoryAddress) {
              cleanup(((MemoryAddress)arg).segment());
          } else if (arg instanceof MemorySegment) {
              try {
                  ((MemorySegment) arg).close();
<span class="line-modified">!             } catch (UnsupportedOperationException e) {</span>
<span class="line-modified">!                 assertTrue(e.getMessage().contains(&quot;Required access mode&quot;));</span>
                  // fine, NOTHING segment for upcall stubs
              }
          }
      }
  
</pre>
<center><a href="../../../../src/jdk.incubator.foreign/share/classes/jdk/internal/foreign/MemorySegmentImpl.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="TestByteBuffer.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>