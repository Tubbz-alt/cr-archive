<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.jextract/share/classes/jdk/incubator/jextract/tool/Main.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Utils.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.jextract/share/classes/jdk/incubator/jextract/tool/Main.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
170         }
171 
172         //parse    //generate
173         try {
174             JextractTask jextractTask = JextractTask.newTask(!options.source, header);
175             Declaration.Scoped toplevel = jextractTask.parse(options.clangArgs.toArray(new String[0]));
176 
177             //filter
178             if (!options.filters.isEmpty()) {
179                 toplevel = Filter.filter(toplevel, options.filters.toArray(new String[0]));
180             }
181 
182             if (Main.DEBUG) {
183                 System.out.println(toplevel);
184             }
185 
186             Path output = Path.of(options.outputDir);
187 
188             JavaFileObject[] files = OutputFactory.generateWrapped(
189                 toplevel,
<span class="line-modified">190                 header.getFileName().toString().replace(&quot;.h&quot;, &quot;_h&quot;),</span>
191                 options.targetPackage,
192                 options.libraryNames);
193             jextractTask.write(output, files);
194         } catch (RuntimeException re) {
195             err.println(re);
196             if (Main.DEBUG) {
197                 re.printStackTrace(err);
198             }
199             return RUNTIME_ERROR;
200         }
201         return SUCCESS;
202     }
203 
204     public static class JextractToolProvider implements ToolProvider {
205         @Override
206         public String name() {
207             return &quot;jextract&quot;;
208         }
209 
210         @Override
</pre>
</td>
<td>
<hr />
<pre>
170         }
171 
172         //parse    //generate
173         try {
174             JextractTask jextractTask = JextractTask.newTask(!options.source, header);
175             Declaration.Scoped toplevel = jextractTask.parse(options.clangArgs.toArray(new String[0]));
176 
177             //filter
178             if (!options.filters.isEmpty()) {
179                 toplevel = Filter.filter(toplevel, options.filters.toArray(new String[0]));
180             }
181 
182             if (Main.DEBUG) {
183                 System.out.println(toplevel);
184             }
185 
186             Path output = Path.of(options.outputDir);
187 
188             JavaFileObject[] files = OutputFactory.generateWrapped(
189                 toplevel,
<span class="line-modified">190                 Utils.javaSafeIdentifier(header.getFileName().toString().replace(&quot;.h&quot;, &quot;_h&quot;), true),</span>
191                 options.targetPackage,
192                 options.libraryNames);
193             jextractTask.write(output, files);
194         } catch (RuntimeException re) {
195             err.println(re);
196             if (Main.DEBUG) {
197                 re.printStackTrace(err);
198             }
199             return RUNTIME_ERROR;
200         }
201         return SUCCESS;
202     }
203 
204     public static class JextractToolProvider implements ToolProvider {
205         @Override
206         public String name() {
207             return &quot;jextract&quot;;
208         }
209 
210         @Override
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Utils.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>