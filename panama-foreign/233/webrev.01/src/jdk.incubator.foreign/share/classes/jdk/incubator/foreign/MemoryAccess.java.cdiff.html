<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/MemoryAccess.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/micro/org/openjdk/bench/jdk/incubator/foreign/LoopOverNonConstant.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/MemoryAccess.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
<span class="line-new-header">--- 1,10 ---</span>
  package jdk.incubator.foreign;
  
<span class="line-added">+ import jdk.internal.access.foreign.MemoryAddressProxy;</span>
<span class="line-added">+ import jdk.internal.vm.annotation.ForceInline;</span>
<span class="line-added">+ </span>
  import java.lang.invoke.VarHandle;
  import java.nio.ByteOrder;
  
  /**
   * This class defines ready-made static accessors which can be used to dereference memory segments in many ways.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1412,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @return a char value read from {@code addr} at the element index specified by {@code index}.
       */
      public static char getCharAtIndex_LE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getCharAtOffset_LE(addr, 2 * index);</span>
      }
  
      /**
       * Writes a char at given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1415,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @return a char value read from {@code addr} at the element index specified by {@code index}.
       */
      public static char getCharAtIndex_LE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getCharAtOffset_LE(addr, scale(addr, index, 2));</span>
      }
  
      /**
       * Writes a char at given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1427,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @param value the char value to be written.
       */
      public static void setCharAtIndex_LE(MemoryAddress addr, long index, char value) {
<span class="line-modified">!         setCharAtOffset_LE(addr, 2 * index, value);</span>
      }
  
      /**
       * Read a short from given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1430,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @param value the char value to be written.
       */
      public static void setCharAtIndex_LE(MemoryAddress addr, long index, char value) {
<span class="line-modified">!         setCharAtOffset_LE(addr, scale(addr, index, 2), value);</span>
      }
  
      /**
       * Read a short from given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1442,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @return a short value read from {@code addr} at the element index specified by {@code index}.
       */
      public static short getShortAtIndex_LE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getShortAtOffset_LE(addr, 2 * index);</span>
      }
  
      /**
       * Writes a short at given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1445,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @return a short value read from {@code addr} at the element index specified by {@code index}.
       */
      public static short getShortAtIndex_LE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getShortAtOffset_LE(addr, scale(addr, index, 2));</span>
      }
  
      /**
       * Writes a short at given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1457,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @param value the short value to be written.
       */
      public static void setShortAtIndex_LE(MemoryAddress addr, long index, short value) {
<span class="line-modified">!         setShortAtOffset_LE(addr, 2 * index, value);</span>
      }
  
      /**
       * Read an int from given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1460,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @param value the short value to be written.
       */
      public static void setShortAtIndex_LE(MemoryAddress addr, long index, short value) {
<span class="line-modified">!         setShortAtOffset_LE(addr, scale(addr, index, 2), value);</span>
      }
  
      /**
       * Read an int from given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1472,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @return an int value read from {@code addr} at the element index specified by {@code index}.
       */
      public static int getIntAtIndex_LE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getIntAtOffset_LE(addr, 4 * index);</span>
      }
  
      /**
       * Writes an int at given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1475,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @return an int value read from {@code addr} at the element index specified by {@code index}.
       */
      public static int getIntAtIndex_LE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getIntAtOffset_LE(addr, scale(addr, index, 4));</span>
      }
  
      /**
       * Writes an int at given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1487,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @param value the int value to be written.
       */
      public static void setIntAtIndex_LE(MemoryAddress addr, long index, int value) {
<span class="line-modified">!         setIntAtOffset_LE(addr, 4 * index, value);</span>
      }
  
      /**
       * Read a float from given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1490,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @param value the int value to be written.
       */
      public static void setIntAtIndex_LE(MemoryAddress addr, long index, int value) {
<span class="line-modified">!         setIntAtOffset_LE(addr, scale(addr, index, 4), value);</span>
      }
  
      /**
       * Read a float from given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1502,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @return a float value read from {@code addr} at the element index specified by {@code index}.
       */
      public static float getFloatAtIndex_LE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getFloatAtOffset_LE(addr, 4 * index);</span>
      }
  
      /**
       * Writes a float at given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1505,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @return a float value read from {@code addr} at the element index specified by {@code index}.
       */
      public static float getFloatAtIndex_LE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getFloatAtOffset_LE(addr, scale(addr, index, 4));</span>
      }
  
      /**
       * Writes a float at given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1517,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @param value the float value to be written.
       */
      public static void setFloatAtIndex_LE(MemoryAddress addr, long index, float value) {
<span class="line-modified">!         setFloatAtOffset_LE(addr, 4 * index, value);</span>
      }
  
      /**
       * Read a long from given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1520,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @param value the float value to be written.
       */
      public static void setFloatAtIndex_LE(MemoryAddress addr, long index, float value) {
<span class="line-modified">!         setFloatAtOffset_LE(addr, scale(addr, index, 4), value);</span>
      }
  
      /**
       * Read a long from given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1532,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @return a long value read from {@code addr} at the element index specified by {@code index}.
       */
      public static long getLongAtIndex_LE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getLongAtOffset_LE(addr, 8 * index);</span>
      }
  
      /**
       * Writes a long at given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1535,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @return a long value read from {@code addr} at the element index specified by {@code index}.
       */
      public static long getLongAtIndex_LE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getLongAtOffset_LE(addr, scale(addr, index, 8));</span>
      }
  
      /**
       * Writes a long at given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1547,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @param value the long value to be written.
       */
      public static void setLongAtIndex_LE(MemoryAddress addr, long index, long value) {
<span class="line-modified">!         setLongAtOffset_LE(addr, 8 * index, value);</span>
      }
  
      /**
       * Read a double from given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1550,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @param value the long value to be written.
       */
      public static void setLongAtIndex_LE(MemoryAddress addr, long index, long value) {
<span class="line-modified">!         setLongAtOffset_LE(addr, scale(addr, index, 8), value);</span>
      }
  
      /**
       * Read a double from given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1562,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @return a double value read from {@code addr} at the element index specified by {@code index}.
       */
      public static double getDoubleAtIndex_LE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getDoubleAtOffset_LE(addr, 8 * index);</span>
      }
  
      /**
       * Writes a double at given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1565,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @return a double value read from {@code addr} at the element index specified by {@code index}.
       */
      public static double getDoubleAtIndex_LE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getDoubleAtOffset_LE(addr, scale(addr, index, 8));</span>
      }
  
      /**
       * Writes a double at given address and element index, with byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1577,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @param value the double value to be written.
       */
      public static void setDoubleAtIndex_LE(MemoryAddress addr, long index, double value) {
<span class="line-modified">!         setDoubleAtOffset_LE(addr, 8 * index, value);</span>
      }
  
      /**
       * Read a byte from given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1580,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @param value the double value to be written.
       */
      public static void setDoubleAtIndex_LE(MemoryAddress addr, long index, double value) {
<span class="line-modified">!         setDoubleAtOffset_LE(addr, scale(addr, index, 8), value);</span>
      }
  
      /**
       * Read a byte from given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1623,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @return a char value read from {@code addr} at the element index specified by {@code index}.
       */
      public static char getCharAtIndex_BE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getCharAtOffset_BE(addr, 2 * index);</span>
      }
  
      /**
       * Writes a char at given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1626,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @return a char value read from {@code addr} at the element index specified by {@code index}.
       */
      public static char getCharAtIndex_BE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getCharAtOffset_BE(addr, scale(addr, index, 2));</span>
      }
  
      /**
       * Writes a char at given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1638,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @param value the char value to be written.
       */
      public static void setCharAtIndex_BE(MemoryAddress addr, long index, char value) {
<span class="line-modified">!         setCharAtOffset_BE(addr, 2 * index, value);</span>
      }
  
      /**
       * Read a short from given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1641,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @param value the char value to be written.
       */
      public static void setCharAtIndex_BE(MemoryAddress addr, long index, char value) {
<span class="line-modified">!         setCharAtOffset_BE(addr, scale(addr, index, 2), value);</span>
      }
  
      /**
       * Read a short from given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1653,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @return a short value read from {@code addr} at the element index specified by {@code index}.
       */
      public static short getShortAtIndex_BE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getShortAtOffset_BE(addr, 2 * index);</span>
      }
  
      /**
       * Writes a short at given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1656,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @return a short value read from {@code addr} at the element index specified by {@code index}.
       */
      public static short getShortAtIndex_BE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getShortAtOffset_BE(addr, scale(addr, index, 2));</span>
      }
  
      /**
       * Writes a short at given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1668,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @param value the short value to be written.
       */
      public static void setShortAtIndex_BE(MemoryAddress addr, long index, short value) {
<span class="line-modified">!         setShortAtOffset_BE(addr, 2 * index, value);</span>
      }
  
      /**
       * Read an int from given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1671,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @param value the short value to be written.
       */
      public static void setShortAtIndex_BE(MemoryAddress addr, long index, short value) {
<span class="line-modified">!         setShortAtOffset_BE(addr, scale(addr, index, 2), value);</span>
      }
  
      /**
       * Read an int from given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1683,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @return an int value read from {@code addr} at the element index specified by {@code index}.
       */
      public static int getIntAtIndex_BE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getIntAtOffset_BE(addr, 4 * index);</span>
      }
  
      /**
       * Writes an int at given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1686,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @return an int value read from {@code addr} at the element index specified by {@code index}.
       */
      public static int getIntAtIndex_BE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getIntAtOffset_BE(addr, scale(addr, index, 4));</span>
      }
  
      /**
       * Writes an int at given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1698,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @param value the int value to be written.
       */
      public static void setIntAtIndex_BE(MemoryAddress addr, long index, int value) {
<span class="line-modified">!         setIntAtOffset_BE(addr, 4 * index, value);</span>
      }
  
      /**
       * Read a float from given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1701,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @param value the int value to be written.
       */
      public static void setIntAtIndex_BE(MemoryAddress addr, long index, int value) {
<span class="line-modified">!         setIntAtOffset_BE(addr, scale(addr, index, 4), value);</span>
      }
  
      /**
       * Read a float from given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1713,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @return a float value read from {@code addr} at the element index specified by {@code index}.
       */
      public static float getFloatAtIndex_BE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getFloatAtOffset_BE(addr, 4 * index);</span>
      }
  
      /**
       * Writes a float at given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1716,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @return a float value read from {@code addr} at the element index specified by {@code index}.
       */
      public static float getFloatAtIndex_BE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getFloatAtOffset_BE(addr, scale(addr, index, 4));</span>
      }
  
      /**
       * Writes a float at given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1728,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @param value the float value to be written.
       */
      public static void setFloatAtIndex_BE(MemoryAddress addr, long index, float value) {
<span class="line-modified">!         setFloatAtOffset_BE(addr, 4 * index, value);</span>
      }
  
      /**
       * Read a long from given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1731,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @param value the float value to be written.
       */
      public static void setFloatAtIndex_BE(MemoryAddress addr, long index, float value) {
<span class="line-modified">!         setFloatAtOffset_BE(addr, scale(addr, index, 4), value);</span>
      }
  
      /**
       * Read a long from given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1743,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @return a long value read from {@code addr} at the element index specified by {@code index}.
       */
      public static long getLongAtIndex_BE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getLongAtOffset_BE(addr, 8 * index);</span>
      }
  
      /**
       * Writes a long at given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1746,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @return a long value read from {@code addr} at the element index specified by {@code index}.
       */
      public static long getLongAtIndex_BE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getLongAtOffset_BE(addr, scale(addr, index, 8));</span>
      }
  
      /**
       * Writes a long at given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1758,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @param value the long value to be written.
       */
      public static void setLongAtIndex_BE(MemoryAddress addr, long index, long value) {
<span class="line-modified">!         setLongAtOffset_BE(addr, 8 * index, value);</span>
      }
  
      /**
       * Read a double from given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1761,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @param value the long value to be written.
       */
      public static void setLongAtIndex_BE(MemoryAddress addr, long index, long value) {
<span class="line-modified">!         setLongAtOffset_BE(addr, scale(addr, index, 8), value);</span>
      }
  
      /**
       * Read a double from given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1773,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @return a double value read from {@code addr} at the element index specified by {@code index}.
       */
      public static double getDoubleAtIndex_BE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getDoubleAtOffset_BE(addr, 8 * index);</span>
      }
  
      /**
       * Writes a double at given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
<span class="line-new-header">--- 1776,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @return a double value read from {@code addr} at the element index specified by {@code index}.
       */
      public static double getDoubleAtIndex_BE(MemoryAddress addr, long index) {
<span class="line-modified">!         return getDoubleAtOffset_BE(addr, scale(addr, index, 8));</span>
      }
  
      /**
       * Writes a double at given address and element index, with byte order set to {@link ByteOrder#BIG_ENDIAN}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1788,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @param value the double value to be written.
       */
      public static void setDoubleAtIndex_BE(MemoryAddress addr, long index, double value) {
<span class="line-modified">!         setDoubleAtOffset_BE(addr, 8 * index, value);</span>
      }
  
      /**
       * Read a byte from given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
<span class="line-new-header">--- 1791,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @param value the double value to be written.
       */
      public static void setDoubleAtIndex_BE(MemoryAddress addr, long index, double value) {
<span class="line-modified">!         setDoubleAtOffset_BE(addr, scale(addr, index, 8), value);</span>
      }
  
      /**
       * Read a byte from given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1834,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @return a char value read from {@code addr} at the element index specified by {@code index}.
       */
      public static char getCharAtIndex(MemoryAddress addr, long index) {
<span class="line-modified">!         return getCharAtOffset(addr, 2 * index);</span>
      }
  
      /**
       * Writes a char at given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
<span class="line-new-header">--- 1837,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @return a char value read from {@code addr} at the element index specified by {@code index}.
       */
      public static char getCharAtIndex(MemoryAddress addr, long index) {
<span class="line-modified">!         return getCharAtOffset(addr, scale(addr, index, 2));</span>
      }
  
      /**
       * Writes a char at given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1849,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @param value the char value to be written.
       */
      public static void setCharAtIndex(MemoryAddress addr, long index, char value) {
<span class="line-modified">!         setCharAtOffset(addr, 2 * index, value);</span>
      }
  
      /**
       * Read a short from given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
<span class="line-new-header">--- 1852,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @param value the char value to be written.
       */
      public static void setCharAtIndex(MemoryAddress addr, long index, char value) {
<span class="line-modified">!         setCharAtOffset(addr, scale(addr, index, 2), value);</span>
      }
  
      /**
       * Read a short from given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1864,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @return a short value read from {@code addr} at the element index specified by {@code index}.
       */
      public static short getShortAtIndex(MemoryAddress addr, long index) {
<span class="line-modified">!         return getShortAtOffset(addr, 2 * index);</span>
      }
  
      /**
       * Writes a short at given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
<span class="line-new-header">--- 1867,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @return a short value read from {@code addr} at the element index specified by {@code index}.
       */
      public static short getShortAtIndex(MemoryAddress addr, long index) {
<span class="line-modified">!         return getShortAtOffset(addr, scale(addr, index, 2));</span>
      }
  
      /**
       * Writes a short at given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1879,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @param value the short value to be written.
       */
      public static void setShortAtIndex(MemoryAddress addr, long index, short value) {
<span class="line-modified">!         setShortAtOffset(addr, 2 * index, value);</span>
      }
  
      /**
       * Read an int from given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
<span class="line-new-header">--- 1882,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 2)}.
       * @param value the short value to be written.
       */
      public static void setShortAtIndex(MemoryAddress addr, long index, short value) {
<span class="line-modified">!         setShortAtOffset(addr, scale(addr, index, 2), value);</span>
      }
  
      /**
       * Read an int from given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1894,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @return an int value read from {@code addr} at the element index specified by {@code index}.
       */
      public static int getIntAtIndex(MemoryAddress addr, long index) {
<span class="line-modified">!         return getIntAtOffset(addr, 4 * index);</span>
      }
  
      /**
       * Writes an int at given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
<span class="line-new-header">--- 1897,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @return an int value read from {@code addr} at the element index specified by {@code index}.
       */
      public static int getIntAtIndex(MemoryAddress addr, long index) {
<span class="line-modified">!         return getIntAtOffset(addr, scale(addr, index, 4));</span>
      }
  
      /**
       * Writes an int at given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1909,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @param value the int value to be written.
       */
      public static void setIntAtIndex(MemoryAddress addr, long index, int value) {
<span class="line-modified">!         setIntAtOffset(addr, 4 * index, value);</span>
      }
  
      /**
       * Read a float from given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
<span class="line-new-header">--- 1912,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @param value the int value to be written.
       */
      public static void setIntAtIndex(MemoryAddress addr, long index, int value) {
<span class="line-modified">!         setIntAtOffset(addr, scale(addr, index, 4), value);</span>
      }
  
      /**
       * Read a float from given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1924,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @return a float value read from {@code addr} at the element index specified by {@code index}.
       */
      public static float getFloatAtIndex(MemoryAddress addr, long index) {
<span class="line-modified">!         return getFloatAtOffset(addr, 4 * index);</span>
      }
  
      /**
       * Writes a float at given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
<span class="line-new-header">--- 1927,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @return a float value read from {@code addr} at the element index specified by {@code index}.
       */
      public static float getFloatAtIndex(MemoryAddress addr, long index) {
<span class="line-modified">!         return getFloatAtOffset(addr, scale(addr, index, 4));</span>
      }
  
      /**
       * Writes a float at given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1939,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @param value the float value to be written.
       */
      public static void setFloatAtIndex(MemoryAddress addr, long index, float value) {
<span class="line-modified">!         setFloatAtOffset(addr, 4 * index, value);</span>
      }
  
      /**
       * Read a long from given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
<span class="line-new-header">--- 1942,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 4)}.
       * @param value the float value to be written.
       */
      public static void setFloatAtIndex(MemoryAddress addr, long index, float value) {
<span class="line-modified">!         setFloatAtOffset(addr, scale(addr, index, 4), value);</span>
      }
  
      /**
       * Read a long from given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1954,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @return a long value read from {@code addr} at the element index specified by {@code index}.
       */
      public static long getLongAtIndex(MemoryAddress addr, long index) {
<span class="line-modified">!         return getLongAtOffset(addr, 8 * index);</span>
      }
  
      /**
       * Writes a long at given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
<span class="line-new-header">--- 1957,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @return a long value read from {@code addr} at the element index specified by {@code index}.
       */
      public static long getLongAtIndex(MemoryAddress addr, long index) {
<span class="line-modified">!         return getLongAtOffset(addr, scale(addr, index, 8));</span>
      }
  
      /**
       * Writes a long at given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1969,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @param value the long value to be written.
       */
      public static void setLongAtIndex(MemoryAddress addr, long index, long value) {
<span class="line-modified">!         setLongAtOffset(addr, 8 * index, value);</span>
      }
  
      /**
       * Read a double from given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
<span class="line-new-header">--- 1972,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @param value the long value to be written.
       */
      public static void setLongAtIndex(MemoryAddress addr, long index, long value) {
<span class="line-modified">!         setLongAtOffset(addr, scale(addr, index, 8), value);</span>
      }
  
      /**
       * Read a double from given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1984,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @return a double value read from {@code addr} at the element index specified by {@code index}.
       */
      public static double getDoubleAtIndex(MemoryAddress addr, long index) {
<span class="line-modified">!         return getDoubleAtOffset(addr, 8 * index);</span>
      }
  
      /**
       * Writes a double at given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
<span class="line-new-header">--- 1987,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @return a double value read from {@code addr} at the element index specified by {@code index}.
       */
      public static double getDoubleAtIndex(MemoryAddress addr, long index) {
<span class="line-modified">!         return getDoubleAtOffset(addr, scale(addr, index, 8));</span>
      }
  
      /**
       * Writes a double at given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1999,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @param value the double value to be written.
       */
      public static void setDoubleAtIndex(MemoryAddress addr, long index, double value) {
<span class="line-modified">!         setDoubleAtOffset(addr, 8 * index, value);</span>
      }
  
      /**
       * Read a memory address from given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
<span class="line-new-header">--- 2002,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @param value the double value to be written.
       */
      public static void setDoubleAtIndex(MemoryAddress addr, long index, double value) {
<span class="line-modified">!         setDoubleAtOffset(addr, scale(addr, index, 8), value);</span>
      }
  
      /**
       * Read a memory address from given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2014,11 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @return a memory address read from {@code addr} at the element index specified by {@code index}.
       */
      public static MemoryAddress getAddressAtIndex(MemoryAddress addr, long index) {
<span class="line-modified">!         return getAddressAtOffset(addr, index * 8);</span>
      }
  
      /**
       * Writes a memory address at given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
<span class="line-new-header">--- 2017,11 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @return a memory address read from {@code addr} at the element index specified by {@code index}.
       */
      public static MemoryAddress getAddressAtIndex(MemoryAddress addr, long index) {
<span class="line-modified">!         return getAddressAtOffset(addr, scale(addr, index, 8));</span>
      }
  
      /**
       * Writes a memory address at given address and element index, with byte order set to {@link ByteOrder#nativeOrder()}.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2029,8 ***</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @param value the memory address to be written.
       */
      public static void setAddressAtIndex(MemoryAddress addr, long index, MemoryAddress value) {
<span class="line-modified">!         setAddressAtOffset(addr, index * 8, value);</span>
      }
  }
<span class="line-new-header">--- 2032,13 ---</span>
       * @param addr base address.
       * @param index element index (relative to {@code addr}). The final address of this read operation can be expressed as {@code addr.addOffset(index * 8)}.
       * @param value the memory address to be written.
       */
      public static void setAddressAtIndex(MemoryAddress addr, long index, MemoryAddress value) {
<span class="line-modified">!         setAddressAtOffset(addr, scale(addr, index, 8), value);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     @ForceInline</span>
<span class="line-added">+     private static long scale(MemoryAddress address, long index, int size) {</span>
<span class="line-added">+         return MemoryAddressProxy.multiplyOffsets(index, size, (MemoryAddressProxy)address);</span>
      }
  }
</pre>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/micro/org/openjdk/bench/jdk/incubator/foreign/LoopOverNonConstant.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>