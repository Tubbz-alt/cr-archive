<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/AllocationScope.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="MemoryAddress.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/AllocationScope.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 46      * If this allocation scope is bounded, returns the size, in bytes, of this allocation scope.
 47      * @return the size, in bytes, of this allocation scope (if available).
 48      */
 49     public abstract OptionalLong byteSize();
 50 
 51     /**
 52      * Returns the number of allocated bytes in this allocation scope.
 53      * @return the number of allocated bytes in this allocation scope.
 54      */
 55     public abstract long allocatedBytes();
 56 
 57     /**
 58      * Allocate a block of memory in this allocation scope with given layout and initialize it with given byte value.
 59      * The address returned by this method is associated with a segment which cannot be closed. Moreover, the returned
 60      * address must conform to the layout alignment constraints.
 61      * @param layout the layout of the block of memory to be allocated.
 62      * @param value the value to be set on the newly allocated memory block.
 63      * @return an address which points to the newly allocated memory block.
 64      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
 65      * {@code limit() - size() &lt; layout.byteSize()}.
<span class="line-modified"> 66      * @throws IllegalArgumentException if {@code layout.byteSize()) does not conform to the size of a byte value.</span>
 67      */
 68     public MemoryAddress allocate(MemoryLayout layout, byte value) {
 69         VarHandle handle = layout.varHandle(byte.class);
 70         MemoryAddress addr = allocate(layout);
 71         handle.set(addr, value);
 72         return addr;
 73     }
 74 
 75     /**
 76      * Allocate a block of memory in this allocation scope with given layout and initialize it with given short value.
 77      * The address returned by this method is associated with a segment which cannot be closed. Moreover, the returned
 78      * address must conform to the layout alignment constraints.
 79      * @param layout the layout of the block of memory to be allocated.
 80      * @param value the value to be set on the newly allocated memory block.
 81      * @return an address which points to the newly allocated memory block.
 82      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
 83      * {@code limit() - size() &lt; layout.byteSize()}.
<span class="line-modified"> 84      * @throws IllegalArgumentException if {@code layout.byteSize()) does not conform to the size of a short value.</span>
 85      */
 86     public MemoryAddress allocate(MemoryLayout layout, short value) {
 87         VarHandle handle = layout.varHandle(short.class);
 88         MemoryAddress addr = allocate(layout);
 89         handle.set(addr, value);
 90         return addr;
 91     }
 92 
 93     /**
 94      * Allocate a block of memory in this allocation scope with given layout and initialize it with given int value.
 95      * The address returned by this method is associated with a segment which cannot be closed. Moreover, the returned
 96      * address must conform to the layout alignment constraints.
 97      * @param layout the layout of the block of memory to be allocated.
 98      * @param value the value to be set on the newly allocated memory block.
 99      * @return an address which points to the newly allocated memory block.
100      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
101      * {@code limit() - size() &lt; layout.byteSize()}.
<span class="line-modified">102      * @throws IllegalArgumentException if {@code layout.byteSize()) does not conform to the size of a int value.</span>
103      */
104     public MemoryAddress allocate(MemoryLayout layout, int value) {
105         VarHandle handle = layout.varHandle(int.class);
106         MemoryAddress addr = allocate(layout);
107         handle.set(addr, value);
108         return addr;
109     }
110 
111     /**
112      * Allocate a block of memory in this allocation scope with given layout and initialize it with given float value.
113      * The address returned by this method is associated with a segment which cannot be closed. Moreover, the returned
114      * address must conform to the layout alignment constraints.
115      * @param layout the layout of the block of memory to be allocated.
116      * @param value the value to be set on the newly allocated memory block.
117      * @return an address which points to the newly allocated memory block.
118      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
119      * {@code limit() - size() &lt; layout.byteSize()}.
<span class="line-modified">120      * @throws IllegalArgumentException if {@code layout.byteSize()) does not conform to the size of a float value.</span>
121      */
122     public MemoryAddress allocate(MemoryLayout layout, float value) {
123         VarHandle handle = layout.varHandle(float.class);
124         MemoryAddress addr = allocate(layout);
125         handle.set(addr, value);
126         return addr;
127     }
128 
129     /**
130      * Allocate a block of memory in this allocation scope with given layout and initialize it with given long value.
131      * The address returned by this method is associated with a segment which cannot be closed. Moreover, the returned
132      * address must conform to the layout alignment constraints.
133      * @param layout the layout of the block of memory to be allocated.
134      * @param value the value to be set on the newly allocated memory block.
135      * @return an address which points to the newly allocated memory block.
136      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
137      * {@code limit() - size() &lt; layout.byteSize()}.
<span class="line-modified">138      * @throws IllegalArgumentException if {@code layout.byteSize()) does not conform to the size of a long value.</span>
139      */
140     public MemoryAddress allocate(MemoryLayout layout, long value) {
141         VarHandle handle = layout.varHandle(long.class);
142         MemoryAddress addr = allocate(layout);
143         handle.set(addr, value);
144         return addr;
145     }
146 
147     /**
148      * Allocate a block of memory in this allocation scope with given layout and initialize it with given double value.
149      * The address returned by this method is associated with a segment which cannot be closed. Moreover, the returned
150      * address must conform to the layout alignment constraints.
151      * @param layout the layout of the block of memory to be allocated.
152      * @param value the value to be set on the newly allocated memory block.
153      * @return an address which points to the newly allocated memory block.
154      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
155      * {@code limit() - size() &lt; layout.byteSize()}.
<span class="line-modified">156      * @throws IllegalArgumentException if {@code layout.byteSize()) does not conform to the size of a double value.</span>
157      */
158     public MemoryAddress allocate(MemoryLayout layout, double value) {
159         VarHandle handle = layout.varHandle(double.class);
160         MemoryAddress addr = allocate(layout);
161         handle.set(addr, value);
162         return addr;
163     }
164 
165     /**
166      * Allocate a block of memory in this allocation scope with given layout and initialize it with given address value.
167      * The address returned by this method is associated with a segment which cannot be closed. Moreover, the returned
168      * address must conform to the layout alignment constraints.
169      * @param layout the layout of the block of memory to be allocated.

170      * @return an address which points to the newly allocated memory block.
171      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
172      * {@code limit() - size() &lt; layout.byteSize()}.
<span class="line-modified">173      * @throws IllegalArgumentException if {@code layout.byteSize()) does not conform to the size of an address value.</span>
174      */
175     public MemoryAddress allocate(MemoryLayout layout, MemoryAddress value) {
176         VarHandle handle = layout.varHandle(MemoryAddress.class);
177         MemoryAddress addr = allocate(layout);
178         handle.set(addr, value);
179         return addr;
180     }
181 
182     /**
183      * Allocate a block of memory in this allocation scope with given layout. The address returned by this method is
184      * associated with a segment which cannot be closed. Moreover, the returned address must conform to the layout alignment constraints.
185      * @param layout the layout of the block of memory to be allocated.
186      * @return an address which points to the newly allocated memory block.
187      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
188      * {@code limit() - size() &lt; layout.byteSize()}.
189      */
190     public MemoryAddress allocate(MemoryLayout layout) {
191         return allocate(layout.byteSize(), layout.byteAlignment());
192     }
193 
</pre>
</td>
<td>
<hr />
<pre>
 46      * If this allocation scope is bounded, returns the size, in bytes, of this allocation scope.
 47      * @return the size, in bytes, of this allocation scope (if available).
 48      */
 49     public abstract OptionalLong byteSize();
 50 
 51     /**
 52      * Returns the number of allocated bytes in this allocation scope.
 53      * @return the number of allocated bytes in this allocation scope.
 54      */
 55     public abstract long allocatedBytes();
 56 
 57     /**
 58      * Allocate a block of memory in this allocation scope with given layout and initialize it with given byte value.
 59      * The address returned by this method is associated with a segment which cannot be closed. Moreover, the returned
 60      * address must conform to the layout alignment constraints.
 61      * @param layout the layout of the block of memory to be allocated.
 62      * @param value the value to be set on the newly allocated memory block.
 63      * @return an address which points to the newly allocated memory block.
 64      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
 65      * {@code limit() - size() &lt; layout.byteSize()}.
<span class="line-modified"> 66      * @throws IllegalArgumentException if {@code layout.byteSize()} does not conform to the size of a byte value.</span>
 67      */
 68     public MemoryAddress allocate(MemoryLayout layout, byte value) {
 69         VarHandle handle = layout.varHandle(byte.class);
 70         MemoryAddress addr = allocate(layout);
 71         handle.set(addr, value);
 72         return addr;
 73     }
 74 
 75     /**
 76      * Allocate a block of memory in this allocation scope with given layout and initialize it with given short value.
 77      * The address returned by this method is associated with a segment which cannot be closed. Moreover, the returned
 78      * address must conform to the layout alignment constraints.
 79      * @param layout the layout of the block of memory to be allocated.
 80      * @param value the value to be set on the newly allocated memory block.
 81      * @return an address which points to the newly allocated memory block.
 82      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
 83      * {@code limit() - size() &lt; layout.byteSize()}.
<span class="line-modified"> 84      * @throws IllegalArgumentException if {@code layout.byteSize()} does not conform to the size of a short value.</span>
 85      */
 86     public MemoryAddress allocate(MemoryLayout layout, short value) {
 87         VarHandle handle = layout.varHandle(short.class);
 88         MemoryAddress addr = allocate(layout);
 89         handle.set(addr, value);
 90         return addr;
 91     }
 92 
 93     /**
 94      * Allocate a block of memory in this allocation scope with given layout and initialize it with given int value.
 95      * The address returned by this method is associated with a segment which cannot be closed. Moreover, the returned
 96      * address must conform to the layout alignment constraints.
 97      * @param layout the layout of the block of memory to be allocated.
 98      * @param value the value to be set on the newly allocated memory block.
 99      * @return an address which points to the newly allocated memory block.
100      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
101      * {@code limit() - size() &lt; layout.byteSize()}.
<span class="line-modified">102      * @throws IllegalArgumentException if {@code layout.byteSize()} does not conform to the size of a int value.</span>
103      */
104     public MemoryAddress allocate(MemoryLayout layout, int value) {
105         VarHandle handle = layout.varHandle(int.class);
106         MemoryAddress addr = allocate(layout);
107         handle.set(addr, value);
108         return addr;
109     }
110 
111     /**
112      * Allocate a block of memory in this allocation scope with given layout and initialize it with given float value.
113      * The address returned by this method is associated with a segment which cannot be closed. Moreover, the returned
114      * address must conform to the layout alignment constraints.
115      * @param layout the layout of the block of memory to be allocated.
116      * @param value the value to be set on the newly allocated memory block.
117      * @return an address which points to the newly allocated memory block.
118      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
119      * {@code limit() - size() &lt; layout.byteSize()}.
<span class="line-modified">120      * @throws IllegalArgumentException if {@code layout.byteSize()} does not conform to the size of a float value.</span>
121      */
122     public MemoryAddress allocate(MemoryLayout layout, float value) {
123         VarHandle handle = layout.varHandle(float.class);
124         MemoryAddress addr = allocate(layout);
125         handle.set(addr, value);
126         return addr;
127     }
128 
129     /**
130      * Allocate a block of memory in this allocation scope with given layout and initialize it with given long value.
131      * The address returned by this method is associated with a segment which cannot be closed. Moreover, the returned
132      * address must conform to the layout alignment constraints.
133      * @param layout the layout of the block of memory to be allocated.
134      * @param value the value to be set on the newly allocated memory block.
135      * @return an address which points to the newly allocated memory block.
136      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
137      * {@code limit() - size() &lt; layout.byteSize()}.
<span class="line-modified">138      * @throws IllegalArgumentException if {@code layout.byteSize()} does not conform to the size of a long value.</span>
139      */
140     public MemoryAddress allocate(MemoryLayout layout, long value) {
141         VarHandle handle = layout.varHandle(long.class);
142         MemoryAddress addr = allocate(layout);
143         handle.set(addr, value);
144         return addr;
145     }
146 
147     /**
148      * Allocate a block of memory in this allocation scope with given layout and initialize it with given double value.
149      * The address returned by this method is associated with a segment which cannot be closed. Moreover, the returned
150      * address must conform to the layout alignment constraints.
151      * @param layout the layout of the block of memory to be allocated.
152      * @param value the value to be set on the newly allocated memory block.
153      * @return an address which points to the newly allocated memory block.
154      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
155      * {@code limit() - size() &lt; layout.byteSize()}.
<span class="line-modified">156      * @throws IllegalArgumentException if {@code layout.byteSize()} does not conform to the size of a double value.</span>
157      */
158     public MemoryAddress allocate(MemoryLayout layout, double value) {
159         VarHandle handle = layout.varHandle(double.class);
160         MemoryAddress addr = allocate(layout);
161         handle.set(addr, value);
162         return addr;
163     }
164 
165     /**
166      * Allocate a block of memory in this allocation scope with given layout and initialize it with given address value.
167      * The address returned by this method is associated with a segment which cannot be closed. Moreover, the returned
168      * address must conform to the layout alignment constraints.
169      * @param layout the layout of the block of memory to be allocated.
<span class="line-added">170      * @param value the value to be set on the newly allocated memory block.</span>
171      * @return an address which points to the newly allocated memory block.
172      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
173      * {@code limit() - size() &lt; layout.byteSize()}.
<span class="line-modified">174      * @throws IllegalArgumentException if {@code layout.byteSize()} does not conform to the size of an address value.</span>
175      */
176     public MemoryAddress allocate(MemoryLayout layout, MemoryAddress value) {
177         VarHandle handle = layout.varHandle(MemoryAddress.class);
178         MemoryAddress addr = allocate(layout);
179         handle.set(addr, value);
180         return addr;
181     }
182 
183     /**
184      * Allocate a block of memory in this allocation scope with given layout. The address returned by this method is
185      * associated with a segment which cannot be closed. Moreover, the returned address must conform to the layout alignment constraints.
186      * @param layout the layout of the block of memory to be allocated.
187      * @return an address which points to the newly allocated memory block.
188      * @throws OutOfMemoryError if there is not enough space left in this allocation scope, that is, if
189      * {@code limit() - size() &lt; layout.byteSize()}.
190      */
191     public MemoryAddress allocate(MemoryLayout layout) {
192         return allocate(layout.byteSize(), layout.byteAlignment());
193     }
194 
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="MemoryAddress.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>