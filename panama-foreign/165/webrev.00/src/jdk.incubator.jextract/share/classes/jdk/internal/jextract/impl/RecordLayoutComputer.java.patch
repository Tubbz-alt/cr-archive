diff a/src/jdk.incubator.jextract/share/classes/jdk/internal/jextract/impl/RecordLayoutComputer.java b/src/jdk.incubator.jextract/share/classes/jdk/internal/jextract/impl/RecordLayoutComputer.java
--- a/src/jdk.incubator.jextract/share/classes/jdk/internal/jextract/impl/RecordLayoutComputer.java
+++ b/src/jdk.incubator.jextract/share/classes/jdk/internal/jextract/impl/RecordLayoutComputer.java
@@ -24,10 +24,11 @@
  *
  */
 
 package jdk.internal.jextract.impl;
 
+import jdk.incubator.foreign.GroupLayout;
 import jdk.incubator.foreign.MemoryLayout;
 import jdk.incubator.foreign.ValueLayout;
 import jdk.internal.clang.Cursor;
 import jdk.internal.clang.CursorKind;
 import jdk.internal.clang.Type;
@@ -101,14 +102,16 @@
     void addFieldLayout(MemoryLayout MemoryLayout) {
         fieldLayouts.add(MemoryLayout);
     }
 
     void addFieldLayout(long offset, Type parent, Cursor c) {
-        MemoryLayout MemoryLayout = c.isAnonymousStruct()?
-            compute(offset, parent, c.type()) :
-            fieldLayout(c);
-        addFieldLayout(MemoryLayout);
+        if (c.isAnonymousStruct()) {
+            GroupLayout layout = (GroupLayout) compute(offset, parent, c.type());
+            fieldLayouts.addAll(layout.memberLayouts());
+        } else {
+            addFieldLayout(fieldLayout(c));
+        }
     }
 
     MemoryLayout fieldLayout(Cursor c) {
         MemoryLayout l = LayoutUtils.getLayout(c.type());
         String name = LayoutUtils.getName(c);
