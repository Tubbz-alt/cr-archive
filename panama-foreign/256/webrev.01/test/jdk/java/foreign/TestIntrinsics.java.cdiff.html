<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/jdk/java/foreign/TestIntrinsics.java</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="TestDowncall.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="TestLibraryLookup.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/foreign/TestIntrinsics.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 68,20 ***</span>
      private static final MethodHandle MH_identity_va;
      private static final MethodHandle MH_invoke_consumer;
  
      private static MethodHandle linkIndentity(String name, Class&lt;?&gt; carrier, MemoryLayout layout)
              throws NoSuchMethodException {
<span class="line-modified">!         MemoryAddress ma = lookup.lookup(name);</span>
          MethodType mt = methodType(carrier, carrier);
          FunctionDescriptor fd = FunctionDescriptor.of(layout, layout);
          return abi.downcallHandle(ma, mt, fd);
      }
  
      static {
          try {
              {
<span class="line-modified">!                 MemoryAddress ma = lookup.lookup(&quot;empty&quot;);</span>
                  MethodType mt = methodType(void.class);
                  FunctionDescriptor fd = FunctionDescriptor.ofVoid();
                  MH_empty = abi.downcallHandle(ma, mt, fd);
              }
              MH_identity_char = linkIndentity(&quot;identity_char&quot;, byte.class, C_CHAR);
<span class="line-new-header">--- 68,20 ---</span>
      private static final MethodHandle MH_identity_va;
      private static final MethodHandle MH_invoke_consumer;
  
      private static MethodHandle linkIndentity(String name, Class&lt;?&gt; carrier, MemoryLayout layout)
              throws NoSuchMethodException {
<span class="line-modified">!         LibraryLookup.Symbol ma = lookup.lookup(name);</span>
          MethodType mt = methodType(carrier, carrier);
          FunctionDescriptor fd = FunctionDescriptor.of(layout, layout);
          return abi.downcallHandle(ma, mt, fd);
      }
  
      static {
          try {
              {
<span class="line-modified">!                 LibraryLookup.Symbol ma = lookup.lookup(&quot;empty&quot;);</span>
                  MethodType mt = methodType(void.class);
                  FunctionDescriptor fd = FunctionDescriptor.ofVoid();
                  MH_empty = abi.downcallHandle(ma, mt, fd);
              }
              MH_identity_char = linkIndentity(&quot;identity_char&quot;, byte.class, C_CHAR);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 89,18 ***</span>
              MH_identity_int = linkIndentity(&quot;identity_int&quot;, int.class, C_INT);
              MH_identity_long = linkIndentity(&quot;identity_long&quot;, long.class, C_LONGLONG);
              MH_identity_float = linkIndentity(&quot;identity_float&quot;, float.class, C_FLOAT);
              MH_identity_double = linkIndentity(&quot;identity_double&quot;, double.class, C_DOUBLE);
              {
<span class="line-modified">!                 MemoryAddress ma = lookup.lookup(&quot;identity_va&quot;);</span>
                  MethodType mt = methodType(int.class, int.class, double.class, int.class, float.class, long.class);
                  FunctionDescriptor fd = FunctionDescriptor.of(C_INT, C_INT, asVarArg(C_DOUBLE),
                          asVarArg(C_INT), asVarArg(C_FLOAT), asVarArg(C_LONGLONG));
                  MH_identity_va = abi.downcallHandle(ma, mt, fd);
              }
              {
<span class="line-modified">!                 MemoryAddress ma = lookup.lookup(&quot;invoke_consumer&quot;);</span>
                  MethodType mt = methodType(void.class, int.class, double.class, long.class, float.class, byte.class,
                          short.class, char.class);
                  FunctionDescriptor fd = FunctionDescriptor.ofVoid(C_INT, C_DOUBLE, C_LONGLONG, C_FLOAT, C_CHAR,
                          C_SHORT, C_SHORT);
                  MH_invoke_consumer = abi.downcallHandle(ma, mt, fd);
<span class="line-new-header">--- 89,18 ---</span>
              MH_identity_int = linkIndentity(&quot;identity_int&quot;, int.class, C_INT);
              MH_identity_long = linkIndentity(&quot;identity_long&quot;, long.class, C_LONGLONG);
              MH_identity_float = linkIndentity(&quot;identity_float&quot;, float.class, C_FLOAT);
              MH_identity_double = linkIndentity(&quot;identity_double&quot;, double.class, C_DOUBLE);
              {
<span class="line-modified">!                 LibraryLookup.Symbol ma = lookup.lookup(&quot;identity_va&quot;);</span>
                  MethodType mt = methodType(int.class, int.class, double.class, int.class, float.class, long.class);
                  FunctionDescriptor fd = FunctionDescriptor.of(C_INT, C_INT, asVarArg(C_DOUBLE),
                          asVarArg(C_INT), asVarArg(C_FLOAT), asVarArg(C_LONGLONG));
                  MH_identity_va = abi.downcallHandle(ma, mt, fd);
              }
              {
<span class="line-modified">!                 LibraryLookup.Symbol ma = lookup.lookup(&quot;invoke_consumer&quot;);</span>
                  MethodType mt = methodType(void.class, int.class, double.class, long.class, float.class, byte.class,
                          short.class, char.class);
                  FunctionDescriptor fd = FunctionDescriptor.ofVoid(C_INT, C_DOUBLE, C_LONGLONG, C_FLOAT, C_CHAR,
                          C_SHORT, C_SHORT);
                  MH_invoke_consumer = abi.downcallHandle(ma, mt, fd);
</pre>
<center><a href="TestDowncall.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="TestLibraryLookup.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>