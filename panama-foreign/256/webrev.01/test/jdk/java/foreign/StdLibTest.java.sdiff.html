<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/foreign/StdLibTest.java</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../../../../src/jdk.incubator.foreign/share/classes/jdk/internal/foreign/abi/x64/windows/Windowsx64Linker.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="TestDowncall.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/foreign/StdLibTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
158 
159         String expected = String.format(formatString, args.stream()
160                 .map(a -&gt; a.javaValue).toArray());
161 
162         int found = stdLibHelper.vprintf(formatString, args);
163         assertEquals(found, expected.length());
164     }
165 
166     static class StdLibHelper {
167 
168         final static MethodHandle strcat;
169         final static MethodHandle strcmp;
170         final static MethodHandle puts;
171         final static MethodHandle strlen;
172         final static MethodHandle gmtime;
173         final static MethodHandle qsort;
174         final static MethodHandle qsortCompar;
175         final static FunctionDescriptor qsortComparFunction;
176         final static MethodHandle rand;
177         final static MethodHandle vprintf;
<span class="line-modified">178         final static MemoryAddress printfAddr;</span>
179         final static FunctionDescriptor printfBase;
180 
181         static {
182             try {
183                 LibraryLookup lookup = LibraryLookup.ofDefault();
184 
185                 strcat = abi.downcallHandle(lookup.lookup(&quot;strcat&quot;),
186                         MethodType.methodType(MemoryAddress.class, MemoryAddress.class, MemoryAddress.class),
187                         FunctionDescriptor.of(C_POINTER, C_POINTER, C_POINTER));
188 
189                 strcmp = abi.downcallHandle(lookup.lookup(&quot;strcmp&quot;),
190                         MethodType.methodType(int.class, MemoryAddress.class, MemoryAddress.class),
191                         FunctionDescriptor.of(C_INT, C_POINTER, C_POINTER));
192 
193                 puts = abi.downcallHandle(lookup.lookup(&quot;puts&quot;),
194                         MethodType.methodType(int.class, MemoryAddress.class),
195                         FunctionDescriptor.of(C_INT, C_POINTER));
196 
197                 strlen = abi.downcallHandle(lookup.lookup(&quot;strlen&quot;),
198                         MethodType.methodType(int.class, MemoryAddress.class),
</pre>
</td>
<td>
<hr />
<pre>
158 
159         String expected = String.format(formatString, args.stream()
160                 .map(a -&gt; a.javaValue).toArray());
161 
162         int found = stdLibHelper.vprintf(formatString, args);
163         assertEquals(found, expected.length());
164     }
165 
166     static class StdLibHelper {
167 
168         final static MethodHandle strcat;
169         final static MethodHandle strcmp;
170         final static MethodHandle puts;
171         final static MethodHandle strlen;
172         final static MethodHandle gmtime;
173         final static MethodHandle qsort;
174         final static MethodHandle qsortCompar;
175         final static FunctionDescriptor qsortComparFunction;
176         final static MethodHandle rand;
177         final static MethodHandle vprintf;
<span class="line-modified">178         final static LibraryLookup.Symbol printfAddr;</span>
179         final static FunctionDescriptor printfBase;
180 
181         static {
182             try {
183                 LibraryLookup lookup = LibraryLookup.ofDefault();
184 
185                 strcat = abi.downcallHandle(lookup.lookup(&quot;strcat&quot;),
186                         MethodType.methodType(MemoryAddress.class, MemoryAddress.class, MemoryAddress.class),
187                         FunctionDescriptor.of(C_POINTER, C_POINTER, C_POINTER));
188 
189                 strcmp = abi.downcallHandle(lookup.lookup(&quot;strcmp&quot;),
190                         MethodType.methodType(int.class, MemoryAddress.class, MemoryAddress.class),
191                         FunctionDescriptor.of(C_INT, C_POINTER, C_POINTER));
192 
193                 puts = abi.downcallHandle(lookup.lookup(&quot;puts&quot;),
194                         MethodType.methodType(int.class, MemoryAddress.class),
195                         FunctionDescriptor.of(C_INT, C_POINTER));
196 
197                 strlen = abi.downcallHandle(lookup.lookup(&quot;strlen&quot;),
198                         MethodType.methodType(int.class, MemoryAddress.class),
</pre>
</td>
</tr>
</table>
<center><a href="../../../../src/jdk.incubator.foreign/share/classes/jdk/internal/foreign/abi/x64/windows/Windowsx64Linker.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="TestDowncall.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>