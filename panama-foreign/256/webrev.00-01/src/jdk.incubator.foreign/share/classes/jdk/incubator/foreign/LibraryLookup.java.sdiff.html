<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/LibraryLookup.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../internal/foreign/abi/ProgrammableInvoker.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/LibraryLookup.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 34 /**
 35  * A native library lookup. Exposes lookup operation for searching symbols, see {@link LibraryLookup#lookup(String)}.
 36  * A given native library remains loaded as long as there is at least one &lt;em&gt;live&lt;/em&gt; library lookup instance referring
 37  * to it.
 38  * &lt;p&gt;
 39  * Memory address instances generated by a library lookup will contain a strong reference to the originating lookup object,
 40  * therefore preventing library unloading; in turn method handle instances obtained from
 41  * {@link ForeignLinker#downcallHandle(Addressable, MethodType, FunctionDescriptor)}) also maintain a strong reference
 42  * to the memory address parameter used for their construction. This means that there is always a strong reachability chain
 43  * from a native method handle to a lookup object (the one that was used to lookup the native library symbol the method handle
 44  * refers to); this is useful to prevent situations where a native library is unloaded in the middle of a native call.
 45  * &lt;p&gt;
 46  * To allow for a library to be unloaded, a client will have to discard any strong references it
 47  * maintains, directly, or indirectly to a lookup object associated with given library.
 48  */
 49 public interface LibraryLookup {
 50 
 51     /**
 52      * A symbol retrieved during a library lookup. A lookup symbol has a &lt;em&gt;name&lt;/em&gt; and can be projected
 53      * into a memory address (see {@link #name()} and {@link #address()}, respectively).







 54      */
 55     interface Symbol extends Addressable {
 56         /**
 57          * The name of this lookup symbol.
 58          * @return the name of this lookup symbol.
 59          */
 60         String name();
 61 
 62         /**
 63          * The memory address of this lookup symbol.
 64          * @return the memory address of this lookup symbol.
 65          */
 66         @Override
 67         MemoryAddress address();
 68     }
 69 
 70     /**
 71      * Lookups a symbol with given name in this library. The returned address has the same temporal bounds
 72      * as this lookup object.
 73      * @param name the symbol name.
</pre>
</td>
<td>
<hr />
<pre>
 34 /**
 35  * A native library lookup. Exposes lookup operation for searching symbols, see {@link LibraryLookup#lookup(String)}.
 36  * A given native library remains loaded as long as there is at least one &lt;em&gt;live&lt;/em&gt; library lookup instance referring
 37  * to it.
 38  * &lt;p&gt;
 39  * Memory address instances generated by a library lookup will contain a strong reference to the originating lookup object,
 40  * therefore preventing library unloading; in turn method handle instances obtained from
 41  * {@link ForeignLinker#downcallHandle(Addressable, MethodType, FunctionDescriptor)}) also maintain a strong reference
 42  * to the memory address parameter used for their construction. This means that there is always a strong reachability chain
 43  * from a native method handle to a lookup object (the one that was used to lookup the native library symbol the method handle
 44  * refers to); this is useful to prevent situations where a native library is unloaded in the middle of a native call.
 45  * &lt;p&gt;
 46  * To allow for a library to be unloaded, a client will have to discard any strong references it
 47  * maintains, directly, or indirectly to a lookup object associated with given library.
 48  */
 49 public interface LibraryLookup {
 50 
 51     /**
 52      * A symbol retrieved during a library lookup. A lookup symbol has a &lt;em&gt;name&lt;/em&gt; and can be projected
 53      * into a memory address (see {@link #name()} and {@link #address()}, respectively).
<span class="line-added"> 54      *</span>
<span class="line-added"> 55      * @apiNote In the future, if the Java language permits, {@link Symbol}</span>
<span class="line-added"> 56      * may become a {@code sealed} interface, which would prohibit subclassing except by</span>
<span class="line-added"> 57      * explicitly permitted types.</span>
<span class="line-added"> 58      *</span>
<span class="line-added"> 59      * @implSpec</span>
<span class="line-added"> 60      * Implementations of this interface are immutable, thread-safe and &lt;a href=&quot;{@docRoot}/java.base/java/lang/doc-files/ValueBased.html&quot;&gt;value-based&lt;/a&gt;.</span>
 61      */
 62     interface Symbol extends Addressable {
 63         /**
 64          * The name of this lookup symbol.
 65          * @return the name of this lookup symbol.
 66          */
 67         String name();
 68 
 69         /**
 70          * The memory address of this lookup symbol.
 71          * @return the memory address of this lookup symbol.
 72          */
 73         @Override
 74         MemoryAddress address();
 75     }
 76 
 77     /**
 78      * Lookups a symbol with given name in this library. The returned address has the same temporal bounds
 79      * as this lookup object.
 80      * @param name the symbol name.
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../internal/foreign/abi/ProgrammableInvoker.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>