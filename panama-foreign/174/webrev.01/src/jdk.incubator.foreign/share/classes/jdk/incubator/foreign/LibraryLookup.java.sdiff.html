<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/LibraryLookup.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="MemoryLayouts.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/LibraryLookup.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 21  *   Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  *  or visit www.oracle.com if you need additional information or have any
 23  *  questions.
 24  *
 25  */
 26 package jdk.incubator.foreign;
 27 
 28 import jdk.internal.foreign.LibrariesHelper;
 29 
 30 import java.io.File;
 31 import java.lang.invoke.MethodType;
 32 import java.util.Objects;
 33 
 34 /**
 35  * A native library lookup. Exposes lookup operation for searching symbols, see {@link LibraryLookup#lookup(String)}.
 36  * A given native library remains loaded as long as there is at least one &lt;em&gt;live&lt;/em&gt; library lookup instance referring
 37  * to it.
 38  * &lt;p&gt;
 39  * Memory address instances generated by a library lookup will contain a strong reference to the originating lookup object,
 40  * therefore preventing library unloading; in turn method handle instances obtained from
<span class="line-modified"> 41  * {@link SystemABI#downcallHandle(MemoryAddress, MethodType, FunctionDescriptor)}) also maintain a strong reference</span>
 42  * to the memory address parameter used for their construction. This means that there is always a strong reachability chain
 43  * from a native method handle to a lookup object (the one that was used to lookup the native library symbol the method handle
 44  * refers to); this is useful to prevent situations where a native library is unloaded in the middle of a native call.
 45  * &lt;p&gt;
 46  * To allow for a library to be unloaded, a client will have to discard any strong references it
 47  * maintains, directly, or indirectly to a lookup object associated with given library.
 48  */
 49 public interface LibraryLookup {
 50 
 51     /**
 52      * Lookups a symbol with given name in this library. The returned address has the same temporal bounds
 53      * as this lookup object.
 54      * @param name the symbol name.
 55      * @return the library symbol (if any)
 56      * @throws NoSuchMethodException if no symbol with given name could be found.
 57      */
 58     MemoryAddress lookup(String name) throws NoSuchMethodException;
 59 
 60     /**
 61      * Obtain a default library lookup object.
</pre>
</td>
<td>
<hr />
<pre>
 21  *   Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  *  or visit www.oracle.com if you need additional information or have any
 23  *  questions.
 24  *
 25  */
 26 package jdk.incubator.foreign;
 27 
 28 import jdk.internal.foreign.LibrariesHelper;
 29 
 30 import java.io.File;
 31 import java.lang.invoke.MethodType;
 32 import java.util.Objects;
 33 
 34 /**
 35  * A native library lookup. Exposes lookup operation for searching symbols, see {@link LibraryLookup#lookup(String)}.
 36  * A given native library remains loaded as long as there is at least one &lt;em&gt;live&lt;/em&gt; library lookup instance referring
 37  * to it.
 38  * &lt;p&gt;
 39  * Memory address instances generated by a library lookup will contain a strong reference to the originating lookup object,
 40  * therefore preventing library unloading; in turn method handle instances obtained from
<span class="line-modified"> 41  * {@link ForeignLinker#downcallHandle(MemoryAddress, MethodType, FunctionDescriptor)}) also maintain a strong reference</span>
 42  * to the memory address parameter used for their construction. This means that there is always a strong reachability chain
 43  * from a native method handle to a lookup object (the one that was used to lookup the native library symbol the method handle
 44  * refers to); this is useful to prevent situations where a native library is unloaded in the middle of a native call.
 45  * &lt;p&gt;
 46  * To allow for a library to be unloaded, a client will have to discard any strong references it
 47  * maintains, directly, or indirectly to a lookup object associated with given library.
 48  */
 49 public interface LibraryLookup {
 50 
 51     /**
 52      * Lookups a symbol with given name in this library. The returned address has the same temporal bounds
 53      * as this lookup object.
 54      * @param name the symbol name.
 55      * @return the library symbol (if any)
 56      * @throws NoSuchMethodException if no symbol with given name could be found.
 57      */
 58     MemoryAddress lookup(String name) throws NoSuchMethodException;
 59 
 60     /**
 61      * Obtain a default library lookup object.
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="MemoryLayouts.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>