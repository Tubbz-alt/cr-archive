<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/CSupport.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="ForeignLinker.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/CSupport.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 16  *
 17  *  You should have received a copy of the GNU General Public License version
 18  *  2 along with this work; if not, write to the Free Software Foundation,
 19  *  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  *   Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  *  or visit www.oracle.com if you need additional information or have any
 23  *  questions.
 24  *
 25  */
 26 package jdk.incubator.foreign;
 27 
 28 import jdk.internal.foreign.Utils;
 29 import jdk.internal.foreign.abi.SharedUtils;
 30 
 31 import java.nio.ByteOrder;
 32 
 33 /**
 34  * A set of utilities for working with libraries using the C language/ABI
 35  */
<span class="line-modified"> 36 public class C {</span>
 37     /**
 38      * Obtain a linker that uses the de facto C ABI of the current system to do it&#39;s linking.
 39      * &lt;p&gt;
 40      * This method is &lt;em&gt;restricted&lt;/em&gt;. Restricted method are unsafe, and, if used incorrectly, their use might crash
 41      * the JVM crash or, worse, silently result in memory corruption. Thus, clients should refrain from depending on
 42      * restricted methods, and use safe and supported functionalities, where possible.
 43      * @return a linker for this system.
 44      * @throws IllegalAccessError if the runtime property {@code foreign.restricted} is not set to either
 45      * {@code permit}, {@code warn} or {@code debug} (the default value is set to {@code deny}).
 46      */
 47     public static ForeignLinker getSystemLinker() {
<span class="line-modified"> 48         Utils.checkRestrictedAccess(&quot;C.getSystemLinker&quot;);</span>
 49         return SharedUtils.getSystemLinker();
 50     }
 51 
 52     /**
 53      * The {@code _Bool} native type.
 54      */
 55     public static final ValueLayout C_BOOL = Utils.pick(SysV.C_BOOL, Win64.C_BOOL, AArch64.C_BOOL);
 56     /**
 57      * The {@code char} native type.
 58      */
 59     public static final ValueLayout C_CHAR = Utils.pick(SysV.C_CHAR, Win64.C_CHAR, AArch64.C_CHAR);
 60     /**
 61      * The {@code short} native type.
 62      */
 63     public static final ValueLayout C_SHORT = Utils.pick(SysV.C_SHORT, Win64.C_SHORT, AArch64.C_SHORT);
 64     /**
 65      * The {@code int} native type.
 66      */
 67     public static final ValueLayout C_INT = Utils.pick(SysV.C_INT, Win64.C_INT, AArch64.C_INT);
 68     /**
</pre>
</td>
<td>
<hr />
<pre>
 16  *
 17  *  You should have received a copy of the GNU General Public License version
 18  *  2 along with this work; if not, write to the Free Software Foundation,
 19  *  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  *   Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  *  or visit www.oracle.com if you need additional information or have any
 23  *  questions.
 24  *
 25  */
 26 package jdk.incubator.foreign;
 27 
 28 import jdk.internal.foreign.Utils;
 29 import jdk.internal.foreign.abi.SharedUtils;
 30 
 31 import java.nio.ByteOrder;
 32 
 33 /**
 34  * A set of utilities for working with libraries using the C language/ABI
 35  */
<span class="line-modified"> 36 public class CSupport {</span>
 37     /**
 38      * Obtain a linker that uses the de facto C ABI of the current system to do it&#39;s linking.
 39      * &lt;p&gt;
 40      * This method is &lt;em&gt;restricted&lt;/em&gt;. Restricted method are unsafe, and, if used incorrectly, their use might crash
 41      * the JVM crash or, worse, silently result in memory corruption. Thus, clients should refrain from depending on
 42      * restricted methods, and use safe and supported functionalities, where possible.
 43      * @return a linker for this system.
 44      * @throws IllegalAccessError if the runtime property {@code foreign.restricted} is not set to either
 45      * {@code permit}, {@code warn} or {@code debug} (the default value is set to {@code deny}).
 46      */
 47     public static ForeignLinker getSystemLinker() {
<span class="line-modified"> 48         Utils.checkRestrictedAccess(&quot;CSupport.getSystemLinker&quot;);</span>
 49         return SharedUtils.getSystemLinker();
 50     }
 51 
 52     /**
 53      * The {@code _Bool} native type.
 54      */
 55     public static final ValueLayout C_BOOL = Utils.pick(SysV.C_BOOL, Win64.C_BOOL, AArch64.C_BOOL);
 56     /**
 57      * The {@code char} native type.
 58      */
 59     public static final ValueLayout C_CHAR = Utils.pick(SysV.C_CHAR, Win64.C_CHAR, AArch64.C_CHAR);
 60     /**
 61      * The {@code short} native type.
 62      */
 63     public static final ValueLayout C_SHORT = Utils.pick(SysV.C_SHORT, Win64.C_SHORT, AArch64.C_SHORT);
 64     /**
 65      * The {@code int} native type.
 66      */
 67     public static final ValueLayout C_INT = Utils.pick(SysV.C_INT, Win64.C_INT, AArch64.C_INT);
 68     /**
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> <a href="ForeignLinker.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>