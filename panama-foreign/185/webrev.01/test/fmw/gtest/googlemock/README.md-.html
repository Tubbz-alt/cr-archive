<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/fmw/gtest/googlemock/README.md</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
  <body>
    <pre>
  1 ## Google Mock ##
  2 
  3 The Google C++ mocking framework.
  4 
  5 ### Overview ###
  6 
  7 Google&#39;s framework for writing and using C++ mock classes.
  8 It can help you derive better designs of your system and write better tests.
  9 
 10 It is inspired by:
 11 
 12   * [jMock](http://www.jmock.org/),
 13   * [EasyMock](http://www.easymock.org/), and
 14   * [Hamcrest](http://code.google.com/p/hamcrest/),
 15 
 16 and designed with C++&#39;s specifics in mind.
 17 
 18 Google mock:
 19 
 20   * lets you create mock classes trivially using simple macros.
 21   * supports a rich set of matchers and actions.
 22   * handles unordered, partially ordered, or completely ordered expectations.
 23   * is extensible by users.
 24 
 25 We hope you find it useful!
 26 
 27 ### Features ###
 28 
 29   * Provides a declarative syntax for defining mocks.
 30   * Can easily define partial (hybrid) mocks, which are a cross of real
 31     and mock objects.
 32   * Handles functions of arbitrary types and overloaded functions.
 33   * Comes with a rich set of matchers for validating function arguments.
 34   * Uses an intuitive syntax for controlling the behavior of a mock.
 35   * Does automatic verification of expectations (no record-and-replay needed).
 36   * Allows arbitrary (partial) ordering constraints on
 37     function calls to be expressed,.
 38   * Lets an user extend it by defining new matchers and actions.
 39   * Does not use exceptions.
 40   * Is easy to learn and use.
 41 
 42 Please see the project page above for more information as well as the
 43 mailing list for questions, discussions, and development.  There is
 44 also an IRC channel on OFTC (irc.oftc.net) #gtest available.  Please
 45 join us!
 46 
 47 Please note that code under [scripts/generator](scripts/generator/) is
 48 from [cppclean](http://code.google.com/p/cppclean/) and released under
 49 the Apache License, which is different from Google Mock&#39;s license.
 50 
 51 ## Getting Started ##
 52 
 53 If you are new to the project, we suggest that you read the user
 54 documentation in the following order:
 55 
 56   * Learn the [basics](../googletest/docs/primer.md) of
 57     Google Test, if you choose to use Google Mock with it (recommended).
 58   * Read [Google Mock for Dummies](../googlemock/docs/ForDummies.md).
 59   * Read the instructions below on how to build Google Mock.
 60 
 61 You can also watch Zhanyong&#39;s [talk](http://www.youtube.com/watch?v=sYpCyLI47rM) on Google Mock&#39;s usage and implementation.
 62 
 63 Once you understand the basics, check out the rest of the docs:
 64 
 65   * [CheatSheet](../googlemock/docs/CheatSheet.md) - all the commonly used stuff
 66     at a glance.
 67   * [CookBook](../googlemock/docs/CookBook.md) - recipes for getting things done,
 68     including advanced techniques.
 69 
 70 If you need help, please check the
 71 [KnownIssues](docs/KnownIssues.md) and
 72 [FrequentlyAskedQuestions](docs/FrequentlyAskedQuestions.md) before
 73 posting a question on the
 74 [discussion group](http://groups.google.com/group/googlemock).
 75 
 76 
 77 ### Using Google Mock Without Google Test ###
 78 
 79 Google Mock is not a testing framework itself.  Instead, it needs a
 80 testing framework for writing tests.  Google Mock works seamlessly
 81 with [Google Test](https://github.com/google/googletest), but
 82 you can also use it with [any C++ testing framework](../googlemock/docs/ForDummies.md#using-google-mock-with-any-testing-framework).
 83 
 84 ### Requirements for End Users ###
 85 
 86 Google Mock is implemented on top of [Google Test](
 87 http://github.com/google/googletest/), and depends on it.
 88 You must use the bundled version of Google Test when using Google Mock.
 89 
 90 You can also easily configure Google Mock to work with another testing
 91 framework, although it will still need Google Test.  Please read
 92 [&quot;Using_Google_Mock_with_Any_Testing_Framework&quot;](
 93     ../googlemock/docs/ForDummies.md#using-google-mock-with-any-testing-framework)
 94 for instructions.
 95 
 96 Google Mock depends on advanced C++ features and thus requires a more
 97 modern compiler. The following are needed to use Google Mock:
 98 
 99 #### Linux Requirements ####
100 
101   * GNU-compatible Make or &quot;gmake&quot;
102   * POSIX-standard shell
103   * POSIX(-2) Regular Expressions (regex.h)
104   * C++98-standard-compliant compiler (e.g. GCC 3.4 or newer)
105 
106 #### Windows Requirements ####
107 
108   * Microsoft Visual C++ 8.0 SP1 or newer
109 
110 #### Mac OS X Requirements ####
111 
112   * Mac OS X 10.4 Tiger or newer
113   * Developer Tools Installed
114 
115 ### Requirements for Contributors ###
116 
117 We welcome patches. If you plan to contribute a patch, you need to
118 build Google Mock and its tests, which has further requirements:
119 
120   * Automake version 1.9 or newer
121   * Autoconf version 2.59 or newer
122   * Libtool / Libtoolize
123   * Python version 2.3 or newer (for running some of the tests and
124     re-generating certain source files from templates)
125 
126 ### Building Google Mock ###
127 
128 #### Using CMake ####
129 
130 If you have CMake available, it is recommended that you follow the
131 [build instructions][gtest_cmakebuild]
132 as described for Google Test.
133 
134 If are using Google Mock with an
135 existing CMake project, the section
136 [Incorporating Into An Existing CMake Project][gtest_incorpcmake]
137 may be of particular interest.
138 To make it work for Google Mock you will need to change
139 
140     target_link_libraries(example gtest_main)
141 
142 to
143 
144     target_link_libraries(example gmock_main)
145 
146 This works because `gmock_main` library is compiled with Google Test.
147 
148 #### Preparing to Build (Unix only) ####
149 
150 If you are using a Unix system and plan to use the GNU Autotools build
151 system to build Google Mock (described below), you&#39;ll need to
152 configure it now.
153 
154 To prepare the Autotools build system:
155 
156     cd googlemock
157     autoreconf -fvi
158 
159 To build Google Mock and your tests that use it, you need to tell your
160 build system where to find its headers and source files.  The exact
161 way to do it depends on which build system you use, and is usually
162 straightforward.
163 
164 This section shows how you can integrate Google Mock into your
165 existing build system.
166 
167 Suppose you put Google Mock in directory `${GMOCK_DIR}` and Google Test
168 in `${GTEST_DIR}` (the latter is `${GMOCK_DIR}/gtest` by default).  To
169 build Google Mock, create a library build target (or a project as
170 called by Visual Studio and Xcode) to compile
171 
172     ${GTEST_DIR}/src/gtest-all.cc and ${GMOCK_DIR}/src/gmock-all.cc
173 
174 with
175 
176     ${GTEST_DIR}/include and ${GMOCK_DIR}/include
177 
178 in the system header search path, and
179 
180     ${GTEST_DIR} and ${GMOCK_DIR}
181 
182 in the normal header search path.  Assuming a Linux-like system and gcc,
183 something like the following will do:
184 
185     g++ -isystem ${GTEST_DIR}/include -I${GTEST_DIR} \
186         -isystem ${GMOCK_DIR}/include -I${GMOCK_DIR} \
187         -pthread -c ${GTEST_DIR}/src/gtest-all.cc
188     g++ -isystem ${GTEST_DIR}/include -I${GTEST_DIR} \
189         -isystem ${GMOCK_DIR}/include -I${GMOCK_DIR} \
190         -pthread -c ${GMOCK_DIR}/src/gmock-all.cc
191     ar -rv libgmock.a gtest-all.o gmock-all.o
192 
193 (We need -pthread as Google Test and Google Mock use threads.)
194 
195 Next, you should compile your test source file with
196 ${GTEST\_DIR}/include and ${GMOCK\_DIR}/include in the header search
197 path, and link it with gmock and any other necessary libraries:
198 
199     g++ -isystem ${GTEST_DIR}/include -isystem ${GMOCK_DIR}/include \
200         -pthread path/to/your_test.cc libgmock.a -o your_test
201 
202 As an example, the make/ directory contains a Makefile that you can
203 use to build Google Mock on systems where GNU make is available
204 (e.g. Linux, Mac OS X, and Cygwin).  It doesn&#39;t try to build Google
205 Mock&#39;s own tests.  Instead, it just builds the Google Mock library and
206 a sample test.  You can use it as a starting point for your own build
207 script.
208 
209 If the default settings are correct for your environment, the
210 following commands should succeed:
211 
212     cd ${GMOCK_DIR}/make
213     make
214     ./gmock_test
215 
216 If you see errors, try to tweak the contents of
217 [make/Makefile](make/Makefile) to make them go away.
218 
219 ### Windows ###
220 
221 The msvc/2005 directory contains VC++ 2005 projects and the msvc/2010
222 directory contains VC++ 2010 projects for building Google Mock and
223 selected tests.
224 
225 Change to the appropriate directory and run &quot;msbuild gmock.sln&quot; to
226 build the library and tests (or open the gmock.sln in the MSVC IDE).
227 If you want to create your own project to use with Google Mock, you&#39;ll
228 have to configure it to use the `gmock_config` propety sheet.  For that:
229 
230  * Open the Property Manager window (View | Other Windows | Property Manager)
231  * Right-click on your project and select &quot;Add Existing Property Sheet...&quot;
232  * Navigate to `gmock_config.vsprops` or `gmock_config.props` and select it.
233  * In Project Properties | Configuration Properties | General | Additional
234    Include Directories, type &lt;path to Google Mock&gt;/include.
235 
236 ### Tweaking Google Mock ###
237 
238 Google Mock can be used in diverse environments.  The default
239 configuration may not work (or may not work well) out of the box in
240 some environments.  However, you can easily tweak Google Mock by
241 defining control macros on the compiler command line.  Generally,
242 these macros are named like `GTEST_XYZ` and you define them to either 1
243 or 0 to enable or disable a certain feature.
244 
245 We list the most frequently used macros below.  For a complete list,
246 see file [${GTEST\_DIR}/include/gtest/internal/gtest-port.h](
247 ../googletest/include/gtest/internal/gtest-port.h).
248 
249 ### Choosing a TR1 Tuple Library ###
250 
251 Google Mock uses the C++ Technical Report 1 (TR1) tuple library
252 heavily.  Unfortunately TR1 tuple is not yet widely available with all
253 compilers.  The good news is that Google Test 1.4.0+ implements a
254 subset of TR1 tuple that&#39;s enough for Google Mock&#39;s need.  Google Mock
255 will automatically use that implementation when the compiler doesn&#39;t
256 provide TR1 tuple.
257 
258 Usually you don&#39;t need to care about which tuple library Google Test
259 and Google Mock use.  However, if your project already uses TR1 tuple,
260 you need to tell Google Test and Google Mock to use the same TR1 tuple
261 library the rest of your project uses, or the two tuple
262 implementations will clash.  To do that, add
263 
264     -DGTEST_USE_OWN_TR1_TUPLE=0
265 
266 to the compiler flags while compiling Google Test, Google Mock, and
267 your tests.  If you want to force Google Test and Google Mock to use
268 their own tuple library, just add
269 
270     -DGTEST_USE_OWN_TR1_TUPLE=1
271 
272 to the compiler flags instead.
273 
274 If you want to use Boost&#39;s TR1 tuple library with Google Mock, please
275 refer to the Boost website (http://www.boost.org/) for how to obtain
276 it and set it up.
277 
278 ### As a Shared Library (DLL) ###
279 
280 Google Mock is compact, so most users can build and link it as a static
281 library for the simplicity.  Google Mock can be used as a DLL, but the
282 same DLL must contain Google Test as well.  See
283 [Google Test&#39;s README][gtest_readme]
284 for instructions on how to set up necessary compiler settings.
285 
286 ### Tweaking Google Mock ###
287 
288 Most of Google Test&#39;s control macros apply to Google Mock as well.
289 Please see [Google Test&#39;s README][gtest_readme] for how to tweak them.
290 
291 ### Upgrading from an Earlier Version ###
292 
293 We strive to keep Google Mock releases backward compatible.
294 Sometimes, though, we have to make some breaking changes for the
295 users&#39; long-term benefits.  This section describes what you&#39;ll need to
296 do if you are upgrading from an earlier version of Google Mock.
297 
298 #### Upgrading from 1.1.0 or Earlier ####
299 
300 You may need to explicitly enable or disable Google Test&#39;s own TR1
301 tuple library.  See the instructions in section &quot;[Choosing a TR1 Tuple
302 Library](#choosing-a-tr1-tuple-library)&quot;.
303 
304 #### Upgrading from 1.4.0 or Earlier ####
305 
306 On platforms where the pthread library is available, Google Test and
307 Google Mock use it in order to be thread-safe.  For this to work, you
308 may need to tweak your compiler and/or linker flags.  Please see the
309 &quot;[Multi-threaded Tests](../googletest/README.md#multi-threaded-tests)&quot; section in file Google Test&#39;s README for what you may need to do.
310 
311 If you have custom matchers defined using `MatcherInterface` or
312 `MakePolymorphicMatcher()`, you&#39;ll need to update their definitions to
313 use the new matcher API (
314 [monomorphic](./docs/CookBook.md#writing-new-monomorphic-matchers),
315 [polymorphic](./docs/CookBook.md#writing-new-polymorphic-matchers)).
316 Matchers defined using `MATCHER()` or `MATCHER_P*()` aren&#39;t affected.
317 
318 Happy testing!
319 
320 [gtest_readme]: ../googletest/README.md &quot;googletest&quot;
321 [gtest_cmakebuild]:  ../googletest/README.md#using-cmake &quot;Using CMake&quot;
322 [gtest_incorpcmake]: ../googletest/README.md#incorporating-into-an-existing-cmake-project &quot;Incorporating Into An Existing CMake Project&quot;
    </pre>
  </body>
</html>