<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/AbstractLayout.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../jdk.hotspot.agent/share/classes/sun/jvm/hotspot/runtime/VM.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MappedMemorySegment.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/AbstractLayout.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 46,31 ***</span>
  import static java.lang.constant.ConstantDescs.BSM_INVOKE;
  import static java.lang.constant.ConstantDescs.CD_String;
  import static java.lang.constant.ConstantDescs.CD_long;
  
  abstract class AbstractLayout implements MemoryLayout {
<span class="line-removed">-     // memory layout attribute key for layout name</span>
<span class="line-removed">-     static final String NAME = &quot;name&quot;;</span>
  
      private final OptionalLong size;
      final long alignment;
<span class="line-modified">!     protected final Map&lt;String, Constable&gt; attributes;</span>
  
      public AbstractLayout(OptionalLong size, long alignment, Map&lt;String, Constable&gt; attributes) {
          this.size = size;
          this.alignment = alignment;
          this.attributes = Collections.unmodifiableMap(attributes);
      }
  
      @Override
      public AbstractLayout withName(String name) {
<span class="line-modified">!         return withAttribute(NAME, name);</span>
      }
  
      @Override
      public final Optional&lt;String&gt; name() {
<span class="line-modified">!         return attribute(NAME).map(String.class::cast);</span>
      }
  
      @Override
      public Optional&lt;Constable&gt; attribute(String name) {
          return Optional.ofNullable(attributes.get(name));
<span class="line-new-header">--- 46,29 ---</span>
  import static java.lang.constant.ConstantDescs.BSM_INVOKE;
  import static java.lang.constant.ConstantDescs.CD_String;
  import static java.lang.constant.ConstantDescs.CD_long;
  
  abstract class AbstractLayout implements MemoryLayout {
  
      private final OptionalLong size;
      final long alignment;
<span class="line-modified">!     final Map&lt;String, Constable&gt; attributes;</span>
  
      public AbstractLayout(OptionalLong size, long alignment, Map&lt;String, Constable&gt; attributes) {
          this.size = size;
          this.alignment = alignment;
          this.attributes = Collections.unmodifiableMap(attributes);
      }
  
      @Override
      public AbstractLayout withName(String name) {
<span class="line-modified">!         return withAttribute(LAYOUT_NAME, name);</span>
      }
  
      @Override
      public final Optional&lt;String&gt; name() {
<span class="line-modified">!         return attribute(LAYOUT_NAME).map(String.class::cast);</span>
      }
  
      @Override
      public Optional&lt;Constable&gt; attribute(String name) {
          return Optional.ofNullable(attributes.get(name));
</pre>
<center><a href="../../../../../../jdk.hotspot.agent/share/classes/sun/jvm/hotspot/runtime/VM.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MappedMemorySegment.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>