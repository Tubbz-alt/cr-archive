<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/cpu/aarch64/vm_version_aarch64.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="templateTable_aarch64.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vm_version_aarch64.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/cpu/aarch64/vm_version_aarch64.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
203     }
204   }
205 
206   // Enable vendor specific features
207 
208   // Ampere eMAG
209   if (_cpu == CPU_AMCC &amp;&amp; (_model == 0) &amp;&amp; (_variant == 0x3)) {
210     if (FLAG_IS_DEFAULT(AvoidUnalignedAccesses)) {
211       FLAG_SET_DEFAULT(AvoidUnalignedAccesses, true);
212     }
213     if (FLAG_IS_DEFAULT(UseSIMDForMemoryOps)) {
214       FLAG_SET_DEFAULT(UseSIMDForMemoryOps, true);
215     }
216     if (FLAG_IS_DEFAULT(UseSIMDForArrayEquals)) {
217       FLAG_SET_DEFAULT(UseSIMDForArrayEquals, !(_revision == 1 || _revision == 2));
218     }
219   }
220 
221   // ThunderX
222   if (_cpu == CPU_CAVIUM &amp;&amp; (_model == 0xA1)) {
<span class="line-modified">223     if (_variant == 0) _features |= CPU_DMB_ATOMICS;</span>
224     if (FLAG_IS_DEFAULT(AvoidUnalignedAccesses)) {
225       FLAG_SET_DEFAULT(AvoidUnalignedAccesses, true);
226     }
227     if (FLAG_IS_DEFAULT(UseSIMDForMemoryOps)) {
228       FLAG_SET_DEFAULT(UseSIMDForMemoryOps, (_variant &gt; 0));
229     }
230     if (FLAG_IS_DEFAULT(UseSIMDForArrayEquals)) {
231       FLAG_SET_DEFAULT(UseSIMDForArrayEquals, false);
232     }
233   }
234 
235   // ThunderX2
236   if ((_cpu == CPU_CAVIUM &amp;&amp; (_model == 0xAF)) ||
237       (_cpu == CPU_BROADCOM &amp;&amp; (_model == 0x516))) {
238     if (FLAG_IS_DEFAULT(AvoidUnalignedAccesses)) {
239       FLAG_SET_DEFAULT(AvoidUnalignedAccesses, true);
240     }
241     if (FLAG_IS_DEFAULT(UseSIMDForMemoryOps)) {
242       FLAG_SET_DEFAULT(UseSIMDForMemoryOps, true);
243     }
</pre>
<hr />
<pre>
403     FLAG_SET_DEFAULT(UseGHASHIntrinsics, false);
404   }
405 
406   if (is_zva_enabled()) {
407     if (FLAG_IS_DEFAULT(UseBlockZeroing)) {
408       FLAG_SET_DEFAULT(UseBlockZeroing, true);
409     }
410     if (FLAG_IS_DEFAULT(BlockZeroingLowLimit)) {
411       FLAG_SET_DEFAULT(BlockZeroingLowLimit, 4 * VM_Version::zva_length());
412     }
413   } else if (UseBlockZeroing) {
414     warning(&quot;DC ZVA is not available on this CPU&quot;);
415     FLAG_SET_DEFAULT(UseBlockZeroing, false);
416   }
417 
418   // This machine allows unaligned memory accesses
419   if (FLAG_IS_DEFAULT(UseUnalignedAccesses)) {
420     FLAG_SET_DEFAULT(UseUnalignedAccesses, true);
421   }
422 
<span class="line-removed">423   if (FLAG_IS_DEFAULT(UseBarriersForVolatile)) {</span>
<span class="line-removed">424     UseBarriersForVolatile = (_features &amp; CPU_DMB_ATOMICS) != 0;</span>
<span class="line-removed">425   }</span>
<span class="line-removed">426 </span>
427   if (FLAG_IS_DEFAULT(UsePopCountInstruction)) {
428     FLAG_SET_DEFAULT(UsePopCountInstruction, true);
429   }
430 
431   if (!UsePopCountInstruction) {
432     warning(&quot;UsePopCountInstruction is always enabled on this CPU&quot;);
433     UsePopCountInstruction = true;
434   }
435 
436 #ifdef COMPILER2
437   if (FLAG_IS_DEFAULT(UseMultiplyToLenIntrinsic)) {
438     UseMultiplyToLenIntrinsic = true;
439   }
440 
441   if (FLAG_IS_DEFAULT(UseSquareToLenIntrinsic)) {
442     UseSquareToLenIntrinsic = true;
443   }
444 
445   if (FLAG_IS_DEFAULT(UseMulAddIntrinsic)) {
446     UseMulAddIntrinsic = true;
</pre>
</td>
<td>
<hr />
<pre>
203     }
204   }
205 
206   // Enable vendor specific features
207 
208   // Ampere eMAG
209   if (_cpu == CPU_AMCC &amp;&amp; (_model == 0) &amp;&amp; (_variant == 0x3)) {
210     if (FLAG_IS_DEFAULT(AvoidUnalignedAccesses)) {
211       FLAG_SET_DEFAULT(AvoidUnalignedAccesses, true);
212     }
213     if (FLAG_IS_DEFAULT(UseSIMDForMemoryOps)) {
214       FLAG_SET_DEFAULT(UseSIMDForMemoryOps, true);
215     }
216     if (FLAG_IS_DEFAULT(UseSIMDForArrayEquals)) {
217       FLAG_SET_DEFAULT(UseSIMDForArrayEquals, !(_revision == 1 || _revision == 2));
218     }
219   }
220 
221   // ThunderX
222   if (_cpu == CPU_CAVIUM &amp;&amp; (_model == 0xA1)) {
<span class="line-modified">223     guarantee(_variant != 0, &quot;Pre-release hardware no longer supported.&quot;);</span>
224     if (FLAG_IS_DEFAULT(AvoidUnalignedAccesses)) {
225       FLAG_SET_DEFAULT(AvoidUnalignedAccesses, true);
226     }
227     if (FLAG_IS_DEFAULT(UseSIMDForMemoryOps)) {
228       FLAG_SET_DEFAULT(UseSIMDForMemoryOps, (_variant &gt; 0));
229     }
230     if (FLAG_IS_DEFAULT(UseSIMDForArrayEquals)) {
231       FLAG_SET_DEFAULT(UseSIMDForArrayEquals, false);
232     }
233   }
234 
235   // ThunderX2
236   if ((_cpu == CPU_CAVIUM &amp;&amp; (_model == 0xAF)) ||
237       (_cpu == CPU_BROADCOM &amp;&amp; (_model == 0x516))) {
238     if (FLAG_IS_DEFAULT(AvoidUnalignedAccesses)) {
239       FLAG_SET_DEFAULT(AvoidUnalignedAccesses, true);
240     }
241     if (FLAG_IS_DEFAULT(UseSIMDForMemoryOps)) {
242       FLAG_SET_DEFAULT(UseSIMDForMemoryOps, true);
243     }
</pre>
<hr />
<pre>
403     FLAG_SET_DEFAULT(UseGHASHIntrinsics, false);
404   }
405 
406   if (is_zva_enabled()) {
407     if (FLAG_IS_DEFAULT(UseBlockZeroing)) {
408       FLAG_SET_DEFAULT(UseBlockZeroing, true);
409     }
410     if (FLAG_IS_DEFAULT(BlockZeroingLowLimit)) {
411       FLAG_SET_DEFAULT(BlockZeroingLowLimit, 4 * VM_Version::zva_length());
412     }
413   } else if (UseBlockZeroing) {
414     warning(&quot;DC ZVA is not available on this CPU&quot;);
415     FLAG_SET_DEFAULT(UseBlockZeroing, false);
416   }
417 
418   // This machine allows unaligned memory accesses
419   if (FLAG_IS_DEFAULT(UseUnalignedAccesses)) {
420     FLAG_SET_DEFAULT(UseUnalignedAccesses, true);
421   }
422 




423   if (FLAG_IS_DEFAULT(UsePopCountInstruction)) {
424     FLAG_SET_DEFAULT(UsePopCountInstruction, true);
425   }
426 
427   if (!UsePopCountInstruction) {
428     warning(&quot;UsePopCountInstruction is always enabled on this CPU&quot;);
429     UsePopCountInstruction = true;
430   }
431 
432 #ifdef COMPILER2
433   if (FLAG_IS_DEFAULT(UseMultiplyToLenIntrinsic)) {
434     UseMultiplyToLenIntrinsic = true;
435   }
436 
437   if (FLAG_IS_DEFAULT(UseSquareToLenIntrinsic)) {
438     UseSquareToLenIntrinsic = true;
439   }
440 
441   if (FLAG_IS_DEFAULT(UseMulAddIntrinsic)) {
442     UseMulAddIntrinsic = true;
</pre>
</td>
</tr>
</table>
<center><a href="templateTable_aarch64.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vm_version_aarch64.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>