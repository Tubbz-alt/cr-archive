<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/jextract/TestAttributes.java</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="Test8240372.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="TestMacros.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/jextract/TestAttributes.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 26  * @bug 8239808
 27  * @build JextractApiTestBase
 28  * @run testng TestAttributes
 29  */
 30 
 31 import java.lang.constant.Constable;
 32 import java.time.LocalDateTime;
 33 import java.time.format.DateTimeFormatter;
 34 import java.util.List;
 35 import java.util.stream.Collectors;
 36 import java.util.stream.Stream;
 37 import jdk.incubator.foreign.MemoryLayouts;
 38 import jdk.incubator.jextract.Declaration;
 39 import jdk.incubator.jextract.Type;
 40 import org.testng.annotations.Test;
 41 
 42 import static org.testng.Assert.assertEquals;
 43 import static org.testng.Assert.assertTrue;
 44 
 45 public class TestAttributes extends JextractApiTestBase {
<span class="line-modified"> 46     private final static Type C_INT = Type.primitive(Type.Primitive.Kind.Int, MemoryLayouts.C_INT);</span>
 47     private final static String ASMLABEL = &quot;AsmLabelAttr&quot;;
 48 
 49     private void validateAsmLabel(Declaration d, boolean isAdd) {
 50         var attrs = d.getAttribute(ASMLABEL).get();
 51         String value = isMacOSX ? &quot;_&quot; : &quot;&quot;;
 52         value += d.name();
 53         value += isAdd ? &quot;A&quot; : &quot;B&quot;;
 54         assertEquals(attrs.get(0), value);
 55     }
 56 
 57     private void validateHeader(Declaration.Scoped top, boolean isAdd) {
 58         if (isWindows) {
 59             // TODO: add Windows validation
 60             // Simply dump declaration for now
 61             System.out.println(top);
 62             return;
 63         }
 64         var list = top.members().stream()
 65                 .filter(byNameAndType(&quot;foo&quot;, Declaration.Variable.class))
 66                 .map(Declaration.Variable.class::cast)
</pre>
</td>
<td>
<hr />
<pre>
 26  * @bug 8239808
 27  * @build JextractApiTestBase
 28  * @run testng TestAttributes
 29  */
 30 
 31 import java.lang.constant.Constable;
 32 import java.time.LocalDateTime;
 33 import java.time.format.DateTimeFormatter;
 34 import java.util.List;
 35 import java.util.stream.Collectors;
 36 import java.util.stream.Stream;
 37 import jdk.incubator.foreign.MemoryLayouts;
 38 import jdk.incubator.jextract.Declaration;
 39 import jdk.incubator.jextract.Type;
 40 import org.testng.annotations.Test;
 41 
 42 import static org.testng.Assert.assertEquals;
 43 import static org.testng.Assert.assertTrue;
 44 
 45 public class TestAttributes extends JextractApiTestBase {
<span class="line-modified"> 46     private final static Type C_INT = Type.primitive(Type.Primitive.Kind.Int);</span>
 47     private final static String ASMLABEL = &quot;AsmLabelAttr&quot;;
 48 
 49     private void validateAsmLabel(Declaration d, boolean isAdd) {
 50         var attrs = d.getAttribute(ASMLABEL).get();
 51         String value = isMacOSX ? &quot;_&quot; : &quot;&quot;;
 52         value += d.name();
 53         value += isAdd ? &quot;A&quot; : &quot;B&quot;;
 54         assertEquals(attrs.get(0), value);
 55     }
 56 
 57     private void validateHeader(Declaration.Scoped top, boolean isAdd) {
 58         if (isWindows) {
 59             // TODO: add Windows validation
 60             // Simply dump declaration for now
 61             System.out.println(top);
 62             return;
 63         }
 64         var list = top.members().stream()
 65                 .filter(byNameAndType(&quot;foo&quot;, Declaration.Variable.class))
 66                 .map(Declaration.Variable.class::cast)
</pre>
</td>
</tr>
</table>
<center><a href="Test8240372.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="TestMacros.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>