<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/jextract/JextractApiTestBase.java</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../../../../src/jdk.incubator.jextract/share/classes/jdk/internal/jextract/impl/Utils.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>test/jdk/java/jextract/JextractApiTestBase.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 53         return struct;
 54     }
 55 
 56     public static Declaration.Variable checkConstant(Declaration.Scoped scope, String name, Type type) {
 57         Declaration.Variable var = findDecl(scope, name, Declaration.Variable.class);
 58         assertTypeEquals(type, var.type());
 59         return var;
 60     }
 61 
 62     public static Declaration.Variable checkGlobal(Declaration.Scoped toplevel, String name, Type type) {
 63         Declaration.Variable global = checkConstant(toplevel, name, type);
 64         assertEquals(global.kind(), Declaration.Variable.Kind.GLOBAL);
 65         return global;
 66     }
 67 
 68     public static Declaration.Variable checkField(Declaration.Scoped record, String name, Type type) {
 69         Declaration.Variable global = checkConstant(record, name, type);
 70         assertEquals(global.kind(), Declaration.Variable.Kind.FIELD);
 71         return global;
 72     }








 73     public static Declaration.Function checkFunction(Declaration.Scoped toplevel, String name, Type ret, Type... params) {
 74         Declaration.Function function = findDecl(toplevel, name, Declaration.Function.class);
 75         assertTypeEquals(ret, function.type().returnType());
 76         assertEquals(function.parameters().size(), params.length);
 77         for (int i = 0 ; i &lt; params.length ; i++) {
 78             assertTypeEquals(params[i], function.type().argumentTypes().get(i));
 79             Type paramType = function.parameters().get(i).type();
 80             if (paramType instanceof Type.Array) {
 81                 assertTypeEquals(params[i], Type.pointer(((Type.Array) paramType).elementType()));
 82             } else {
 83                 assertTypeEquals(params[i], function.parameters().get(i).type());
 84             }
 85         }
 86         return function;
 87     }
 88 
 89     public static Declaration.Constant checkConstant(Declaration.Scoped toplevel, String name, Type type, Object value) {
 90         Declaration.Constant constant = findDecl(toplevel, name, Declaration.Constant.class);
 91         assertTypeEquals(type, constant.type());
 92         assertEquals(value, constant.value());
</pre>
</td>
<td>
<hr />
<pre>
 53         return struct;
 54     }
 55 
 56     public static Declaration.Variable checkConstant(Declaration.Scoped scope, String name, Type type) {
 57         Declaration.Variable var = findDecl(scope, name, Declaration.Variable.class);
 58         assertTypeEquals(type, var.type());
 59         return var;
 60     }
 61 
 62     public static Declaration.Variable checkGlobal(Declaration.Scoped toplevel, String name, Type type) {
 63         Declaration.Variable global = checkConstant(toplevel, name, type);
 64         assertEquals(global.kind(), Declaration.Variable.Kind.GLOBAL);
 65         return global;
 66     }
 67 
 68     public static Declaration.Variable checkField(Declaration.Scoped record, String name, Type type) {
 69         Declaration.Variable global = checkConstant(record, name, type);
 70         assertEquals(global.kind(), Declaration.Variable.Kind.FIELD);
 71         return global;
 72     }
<span class="line-added"> 73 </span>
<span class="line-added"> 74     public static Declaration.Variable checkBitField(Declaration.Scoped record, String name, Type type, int size) {</span>
<span class="line-added"> 75         Declaration.Variable global = checkConstant(record, name, type);</span>
<span class="line-added"> 76         assertEquals(global.kind(), Declaration.Variable.Kind.BITFIELD);</span>
<span class="line-added"> 77         assertEquals(global.layout().get().bitSize(), size);</span>
<span class="line-added"> 78         return global;</span>
<span class="line-added"> 79     }</span>
<span class="line-added"> 80 </span>
 81     public static Declaration.Function checkFunction(Declaration.Scoped toplevel, String name, Type ret, Type... params) {
 82         Declaration.Function function = findDecl(toplevel, name, Declaration.Function.class);
 83         assertTypeEquals(ret, function.type().returnType());
 84         assertEquals(function.parameters().size(), params.length);
 85         for (int i = 0 ; i &lt; params.length ; i++) {
 86             assertTypeEquals(params[i], function.type().argumentTypes().get(i));
 87             Type paramType = function.parameters().get(i).type();
 88             if (paramType instanceof Type.Array) {
 89                 assertTypeEquals(params[i], Type.pointer(((Type.Array) paramType).elementType()));
 90             } else {
 91                 assertTypeEquals(params[i], function.parameters().get(i).type());
 92             }
 93         }
 94         return function;
 95     }
 96 
 97     public static Declaration.Constant checkConstant(Declaration.Scoped toplevel, String name, Type type, Object value) {
 98         Declaration.Constant constant = findDecl(toplevel, name, Declaration.Constant.class);
 99         assertTypeEquals(type, constant.type());
100         assertEquals(value, constant.value());
</pre>
</td>
</tr>
</table>
<center><a href="../../../../src/jdk.incubator.jextract/share/classes/jdk/internal/jextract/impl/Utils.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>