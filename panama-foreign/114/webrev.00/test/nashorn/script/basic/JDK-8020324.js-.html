<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/nashorn/script/basic/JDK-8020324.js</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2010, 2013, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /**
 25  * JDK-8020324: Implement Object.bindProperties(target, source) for beans
 26  *
 27  * @test
 28  * @run
 29  */
 30 
 31 var PropertyBind = Java.type(&quot;jdk.nashorn.test.models.PropertyBind&quot;)
 32 var bean = new PropertyBind
 33 
 34 var obj1 = {}
 35 Object.bindProperties(obj1, bean)
 36 
 37 printBanner(&quot;Two-way read-write instance field&quot;)
 38 printEval(&quot;obj1.publicInt = 13&quot;)
 39 printEval(&quot;bean.publicInt&quot;)
 40 printEval(&quot;bean.publicInt = 15&quot;)
 41 printEval(&quot;obj1.publicInt&quot;)
 42 
 43 printBanner(&quot;Read only public instance field&quot;)
 44 printEval(&quot;obj1.publicFinalInt&quot;)
 45 printEval(&quot;obj1.publicFinalInt = 16&quot;)
 46 printEval(&quot;obj1.publicFinalInt&quot;)
 47 printEval(&quot;bean.publicFinalInt&quot;)
 48 
 49 printBanner(&quot;Two-way read-write instance property&quot;)
 50 printEval(&quot;obj1.readWrite = 17&quot;)
 51 printEval(&quot;bean.readWrite&quot;)
 52 printEval(&quot;bean.readWrite = 18&quot;)
 53 printEval(&quot;obj1.readWrite&quot;)
 54 printEval(&quot;obj1.getReadWrite()&quot;)
 55 printEval(&quot;obj1.setReadWrite(19)&quot;)
 56 printEval(&quot;obj1.readWrite&quot;)
 57 printEval(&quot;bean.readWrite&quot;)
 58 
 59 printBanner(&quot;Read only instance property&quot;)
 60 printEval(&quot;obj1.readOnly&quot;)
 61 printEval(&quot;obj1.readOnly = 20&quot;)
 62 printEval(&quot;obj1.readOnly&quot;)
 63 printEval(&quot;obj1.getReadOnly()&quot;)
 64 printEval(&quot;bean.getReadOnly()&quot;)
 65 
 66 printBanner(&quot;Write only instance property&quot;)
 67 printEval(&quot;obj1.writeOnly = 21&quot;)
 68 printEval(&quot;obj1.writeOnly&quot;)
 69 printEval(&quot;bean.writeOnly&quot;)
 70 printEval(&quot;bean.peekWriteOnly()&quot;)
 71 
 72 var obj2 = {}
 73 Object.bindProperties(obj2, PropertyBind)
 74 
 75 printBanner(&quot;Two-way read-write public static field&quot;)
 76 printEval(&quot;obj2.publicStaticInt = 22&quot;)
 77 printEval(&quot;PropertyBind.publicStaticInt&quot;)
 78 printEval(&quot;PropertyBind.publicStaticInt = 23&quot;)
 79 printEval(&quot;obj2.publicStaticInt&quot;)
 80 
 81 printBanner(&quot;Read only public static field&quot;)
 82 printEval(&quot;obj2.publicStaticFinalInt&quot;)
 83 printEval(&quot;obj2.publicStaticFinalInt = 24&quot;)
 84 printEval(&quot;obj2.publicStaticFinalInt&quot;)
 85 printEval(&quot;PropertyBind.publicStaticFinalInt&quot;)
 86 
 87 printBanner(&quot;Two-way read-write static property&quot;)
 88 printEval(&quot;obj2.staticReadWrite = 25&quot;)
 89 printEval(&quot;PropertyBind.staticReadWrite&quot;)
 90 printEval(&quot;PropertyBind.staticReadWrite = 26&quot;)
 91 printEval(&quot;obj2.staticReadWrite&quot;)
 92 printEval(&quot;obj2.getStaticReadWrite()&quot;)
 93 printEval(&quot;obj2.setStaticReadWrite(27)&quot;)
 94 printEval(&quot;obj2.staticReadWrite&quot;)
 95 printEval(&quot;PropertyBind.staticReadWrite&quot;)
 96 
 97 printBanner(&quot;Read only static property&quot;)
 98 printEval(&quot;obj2.staticReadOnly&quot;)
 99 printEval(&quot;obj2.staticReadOnly = 28&quot;)
100 printEval(&quot;obj2.staticReadOnly&quot;)
101 printEval(&quot;obj2.getStaticReadOnly()&quot;)
102 printEval(&quot;PropertyBind.getStaticReadOnly()&quot;)
103 
104 printBanner(&quot;Write only static property&quot;)
105 printEval(&quot;obj2.staticWriteOnly = 29&quot;)
106 printEval(&quot;obj2.staticWriteOnly&quot;)
107 printEval(&quot;PropertyBind.staticWriteOnly&quot;)
108 printEval(&quot;PropertyBind.peekStaticWriteOnly()&quot;)
109 
110 printBanner(&quot;Sanity check to ensure property values remained what they were&quot;)
111 printEval(&quot;obj1.publicInt&quot;)
112 printEval(&quot;bean.publicInt&quot;)
113 printEval(&quot;obj1.publicFinalInt&quot;)
114 printEval(&quot;bean.publicFinalInt&quot;)
115 printEval(&quot;obj1.readWrite&quot;)
116 printEval(&quot;bean.readWrite&quot;)
117 printEval(&quot;obj1.readOnly&quot;)
118 printEval(&quot;bean.readOnly&quot;)
119 printEval(&quot;bean.peekWriteOnly()&quot;)
120 
121 printEval(&quot;obj2.publicStaticInt&quot;)
122 printEval(&quot;PropertyBind.publicStaticInt&quot;)
123 printEval(&quot;obj2.publicStaticFinalInt&quot;)
124 printEval(&quot;PropertyBind.publicStaticFinalInt&quot;)
125 printEval(&quot;obj2.staticReadWrite&quot;)
126 printEval(&quot;PropertyBind.staticReadWrite&quot;)
127 printEval(&quot;obj2.staticReadOnly&quot;)
128 printEval(&quot;PropertyBind.staticReadOnly&quot;)
129 printEval(&quot;PropertyBind.peekStaticWriteOnly()&quot;)
130 
131 
132 function printEval(s) {
133     print(s + &quot;: &quot; + eval(s))
134 }
135 
136 function printBanner(s) {
137     print()
138     print(&quot;==== &quot; + s + &quot; ====&quot;)
139 }
    </pre>
  </body>
</html>