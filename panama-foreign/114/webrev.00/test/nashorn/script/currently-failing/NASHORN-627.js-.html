<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/nashorn/script/currently-failing/NASHORN-627.js</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2010, 2013, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /**
 25  * NASHORN-627 : Make NativeDate fully ECMA compliant
 26  *
 27  * @test
 28  * @option -timezone=Europe/Vienna
 29  * @run
 30  */
 31 
 32 // constructor, toString, getTime, toISOString. EXPECTED is from spidermonkey
 33 function printDate(d) {
 34     print(d, d.getTime(), d.toISOString());
 35 }
 36 for (var i = -10; i &lt; 380; i++) {
 37     printDate(new Date(70, 0, i));
 38 }
 39 for (var i = -10; i &lt; 380; i++) {
 40     printDate(new Date(2011, 0, i, 17, 0, 59));
 41 }
 42 for (var i = -10; i &lt; 380; i++) {
 43     printDate(new Date(2012, 0, i, 12, 30, 10, 500));
 44 }
 45 
 46 [
 47     &#39;2012-03-01 09:00&#39;,
 48     &#39;2012-03-01 08:00 +0000&#39;,
 49     &#39;2012/03/01 08:00 GMT+0000&#39;,
 50     &#39;03/01/2012, 08:00 AM UT&#39;,
 51     &#39;01 March 12 08:00 +0000&#39;,
 52     &#39;Mar 01 08:00:00 UT 2012&#39;,
 53     &#39;Sat, 01-Mar-2012 08:00:00 UT&#39;,
 54     &#39;Sat, 01 Mar 2012 08:00:00 UT&#39;,
 55     &#39;Mar 01 2012 08:00:00 UT&#39;,
 56     &#39;Saturday, 01-Mar-2012 08:00:00 UT&#39;,
 57     &#39;01 Mar 2012 08:00 +0000&#39;,
 58 
 59     &#39;Sat, 01-Mar-2012 03:00:00 EST&#39;,
 60     &#39;Sat, 01 Mar 2012 03:00:00 EST&#39;,
 61     &#39;Mar 01 2012 03:00:00 EST&#39;,
 62     &#39;Saturday, 01-Mar-2012 03:00:00 EST&#39;,
 63     &#39;01 Mar 2012 03:00 -0500&#39;,
 64 
 65     &#39;Sat, 01-Mar-2012 04:00:00 EDT&#39;,
 66     &#39;Sat, 01 Mar 2012 04:00:00 EDT&#39;,
 67     &#39;Mar 01 2012 04:00:00 EDT&#39;,
 68     &#39;Saturday, 01-Mar-2012 04:00:00 EDT&#39;,
 69     &#39;01 Mar 2012 04:00 -0400&#39;,
 70 
 71     &#39;Sat, 01-Mar-2012 02:00:00 CST&#39;,
 72     &#39;Sat, 01 Mar 2012 02:00:00 CST&#39;,
 73     &#39;Mar 01 2012 02:00:00 CST&#39;,
 74     &#39;Saturday, 01-Mar-2012 02:00:00 CST&#39;,
 75     &#39;01 Mar 2012 02:00 -0600&#39;,
 76 
 77     &#39;Sat, 01-Mar-2012 03:00:00 CDT&#39;,
 78     &#39;Sat, 01 Mar 2012 03:00:00 CDT&#39;,
 79     &#39;Mar 01 2012 03:00:00 CDT&#39;,
 80     &#39;Saturday, 01-Mar-2012 03:00:00 CDT&#39;,
 81     &#39;01 Mar 2012 03:00 -0500&#39;,
 82 
 83     &#39;Sat, 01-Mar-2012 01:00:00 MST&#39;,
 84     &#39;Sat, 01 Mar 2012 01:00:00 MST&#39;,
 85     &#39;Mar 01 2012 01:00:00 MST&#39;,
 86     &#39;Saturday, 01-Mar-2012 01:00:00 MST&#39;,
 87     &#39;01 Mar 2012 01:00 -0700&#39;,
 88 
 89     &#39;Sat, 01-Mar-2012 02:00:00 MDT&#39;,
 90     &#39;Sat, 01 Mar 2012 02:00:00 MDT&#39;,
 91     &#39;Mar 01 2012 02:00:00 MDT&#39;,
 92     &#39;Saturday, 01-Mar-2012 02:00:00 MDT&#39;,
 93     &#39;01 Mar 2012 02:00 -0600&#39;,
 94 
 95     &#39;Sat, 01-Mar-2012 00:00:00 PST&#39;,
 96     &#39;Sat, 01 Mar 2012 00:00:00 PST&#39;,
 97     &#39;Mar 01 2012 00:00:00 PST&#39;,
 98     &#39;Saturday, 01-Mar-2012 00:00:00 PST&#39;,
 99     &#39;01 Mar 2012 00:00 -0800&#39;,
100 
101     &#39;Sat, 01-Mar-2012 01:00:00 PDT&#39;,
102     &#39;Sat, 01 Mar 2012 01:00:00 PDT&#39;,
103     &#39;Mar 01 2012 01:00:00 PDT&#39;,
104     &#39;Saturday, 01-Mar-2012 01:00:00 PDT&#39;,
105     &#39;01 Mar 2012 01:00 -0700&#39;
106 ].forEach(function(s) {
107     parseDate(s, 1330588800000);
108 });
109 
110 [
111     &#39;2012-01-01T08:00:00.000Z&#39;,
112     &#39;2012-01-01T08:00:00Z&#39;,
113     &#39;2012-01-01T08:00Z&#39;,
114     &#39;2012-01T08:00:00.000Z&#39;,
115     &#39;2012T08:00:00.000Z&#39;,
116     &#39;2012T08:00Z&#39;,
117     &#39;2012-01T00:00:00.000-08:00&#39;,
118     &#39;2012-01T00:00:00.000-08:00&#39;
119 ].forEach(function(s) {
120     parseDate(s, 1325404800000);
121 });
122 
123 [
124     &#39;Mon, 25 Dec 1995 13:30:00 GMT+0430&#39;,
125     &#39;1995/12/25 13:30 GMT+0430&#39;,
126     &#39;12/25/1995, 01:30 PM +04:30&#39;,
127     &#39;Dec 25 1995 13:30:00 +0430&#39;
128 ].forEach(function(s) {
129     parseDate(s, 819882000000);
130 });
131 
132 // invalid iso dates
133 [
134     &#39;2000-01-01TZ&#39;,
135     &#39;2000-01-01T60Z&#39;,
136     &#39;2000-01-01T60:60Z&#39;,
137     &#39;2000-01-0108:00Z&#39;,
138     &#39;2000-01-01T08Z&#39;
139 ].forEach(function(s) {
140         parseDate(s, NaN);
141     });
142 
143 // milliseconds
144 parseDate(&#39;2012-01T08:00:00.001Z&#39;, 1325404800001);
145 parseDate(&#39;2012-01T08:00:00.099Z&#39;, 1325404800099);
146 parseDate(&#39;2012-01T08:00:00.999Z&#39;, 1325404800999);
147 
148 function parseDate(s, t) {
149     var d = new Date(s.toString());
150     if (d.getTime() == t || (isNaN(d.getTime() &amp;&amp; isNaN(t)))) {
151         print(&#39;ok&#39;, d);
152     } else {
153         print(&#39;expected&#39;, t, &#39;got&#39;, d.getTime());
154     }
155 }
    </pre>
  </body>
</html>