<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/nashorn/src/jdk/nashorn/api/javaaccess/test/MethodAccessTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2010, 2013, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package jdk.nashorn.api.javaaccess.test;
 27 
 28 import static org.testng.AssertJUnit.assertEquals;
 29 import static org.testng.AssertJUnit.assertTrue;
 30 import static org.testng.internal.junit.ArrayAsserts.assertArrayEquals;
 31 import java.util.Arrays;
 32 import java.util.Calendar;
 33 import java.util.Locale;
 34 import javax.script.ScriptEngine;
 35 import javax.script.ScriptEngineManager;
 36 import javax.script.ScriptException;
 37 import org.testng.TestNG;
 38 import org.testng.annotations.AfterClass;
 39 import org.testng.annotations.BeforeClass;
 40 import org.testng.annotations.Test;
 41 
 42 /**
 43  * @test
 44  * @build jdk.nashorn.api.javaaccess.test.SharedObject jdk.nashorn.api.javaaccess.test.Person jdk.nashorn.api.javaaccess.test.MethodAccessTest
 45  * @run testng/othervm jdk.nashorn.api.javaaccess.test.MethodAccessTest
 46  */
 47 @SuppressWarnings(&quot;javadoc&quot;)
 48 public class MethodAccessTest {
 49 
 50     private static ScriptEngine e = null;
 51     private static SharedObject o = null;
 52 
 53     public static void main(final String[] args) {
 54         TestNG.main(args);
 55     }
 56 
 57     @BeforeClass
 58     public static void setUpClass() throws ScriptException {
 59         final ScriptEngineManager m = new ScriptEngineManager();
 60         e = m.getEngineByName(&quot;nashorn&quot;);
 61         o = new SharedObject();
 62         o.setEngine(e);
 63         e.put(&quot;o&quot;, o);
 64         e.eval(&quot;var SharedObject = Packages.jdk.nashorn.api.javaaccess.test.SharedObject;&quot;);
 65         e.eval(&quot;var Person = Packages.jdk.nashorn.api.javaaccess.test.Person;&quot;);
 66     }
 67 
 68     @AfterClass
 69     public static void tearDownClass() {
 70         e = null;
 71         o = null;
 72     }
 73 
 74     @Test
 75     public void accessMethodthrowsCheckedException() throws ScriptException {
 76         e.eval(&quot;try {&quot; +
 77                 &quot;    var a = java.lang.Long.parseLong(&#39;foo&#39;);&quot; +
 78                 &quot;} catch(e) {&quot; +
 79                 &quot;    var isThrown = true;&quot; +
 80                 &quot;    var isNumberException = e instanceof java.lang.NumberFormatException;&quot; +
 81                 &quot;} finally {&quot; +
 82                 &quot;    var isFinalized = true;&quot; +
 83                 &quot;}&quot;);
 84         assertEquals(&quot;Exception thrown&quot;, true, e.get(&quot;isThrown&quot;));
 85         assertEquals(&quot;Finally called&quot;, true, e.get(&quot;isFinalized&quot;));
 86         assertEquals(&quot;Type is NumberFormatException&quot;, true, e.get(&quot;isNumberException&quot;));
 87     }
 88 
 89     @Test
 90     public void accessMethodthrowsUnCheckedException() throws ScriptException {
 91         e.eval(&quot;try {&quot; +
 92                 &quot;    var a = java.lang.String.valueOf(null);&quot; +
 93                 &quot;} catch(e) {&quot; +
 94                 &quot;    var isThrown = true;&quot; +
 95                 &quot;    var isNumberException = e instanceof java.lang.NullPointerException;&quot; +
 96                 &quot;} finally {&quot; +
 97                 &quot;    var isFinalized = true;&quot; +
 98                 &quot;}&quot;);
 99         assertEquals(true, e.get(&quot;isThrown&quot;));
100         assertEquals(true, e.get(&quot;isFinalized&quot;));
101         assertEquals(true, e.get(&quot;isNumberException&quot;));
102     }
103 
104     @Test
105     public void accessMethodStartsThread() throws ScriptException {
106         e.eval(&quot;o.methodStartsThread();&quot;);
107         assertEquals(false, o.isFinished);
108     }
109 
110     @Test
111     public void accessStaticMethod() throws ScriptException {
112         assertEquals(10, e.eval(&quot;java.lang.Math.abs(-10);&quot;));
113     }
114 
115     @Test
116     public void accessSynchronousMethod() throws ScriptException {
117         e.eval(&quot;var v = new java.util.Vector();&quot; + &quot;v.add(10);&quot; + &quot;v.add(20);&quot; + &quot;v.add(30);&quot;);
118         assertEquals(10, e.eval(&quot;v[0]&quot;));
119         assertEquals(20, e.eval(&quot;v[1]&quot;));
120         assertEquals(30, e.eval(&quot;v[2]&quot;));
121         assertEquals(3, e.eval(&quot;v.size()&quot;));
122     }
123 
124     @Test
125     public void accessStaticSynchronousMethod() throws ScriptException {
126         e.eval(&quot;var locales = java.util.Calendar.getAvailableLocales();&quot;);
127         final Locale[] locales = (Locale[])e.get(&quot;locales&quot;);
128         assertEquals(locales.length, Calendar.getAvailableLocales().length);
129     }
130 
131     @Test
132     public void accessNativeMethod() throws ScriptException {
133         assertEquals(4.0, e.eval(&quot;java.lang.StrictMath.log10(10000);&quot;));
134     }
135 
136     @Test
137     public void accessConstructorOfAbstractClass() throws ScriptException {
138         e.eval(&quot;try {&quot; +
139                 &quot;    var a = new java.util.AbstractList();&quot; +
140                 &quot;    print(&#39;fail&#39;);&quot; +
141                 &quot;} catch(e) {&quot; +
142                 &quot;    var isThrown = true;&quot; +
143                 &quot;}&quot;);
144         assertEquals(true, e.get(&quot;isThrown&quot;));
145     }
146 
147     @Test
148     public void accessMethodVoid() throws ScriptException {
149         o.isAccessed = false;
150         e.eval(&quot;o.voidMethod();&quot;);
151         assertTrue(o.isAccessed);
152     }
153 
154     @Test
155     public void accessMethodBoolean() throws ScriptException {
156         assertEquals(true, e.eval(&quot;o.booleanMethod(false);&quot;));
157         assertEquals(false, e.eval(&quot;o.booleanMethod(true);&quot;));
158         assertEquals(false, e.eval(&quot;o.booleanMethod(&#39;false&#39;);&quot;));
159         assertEquals(true, e.eval(&quot;o.booleanMethod(&#39;&#39;);&quot;));
160         assertEquals(true, e.eval(&quot;o.booleanMethod(0);&quot;));
161     }
162 
163     @Test
164     public void accessMethodInt() throws ScriptException {
165         assertEquals(0, e.eval(&quot;o.intMethod(0);&quot;));
166         assertEquals(-200, e.eval(&quot;o.intMethod(-100);&quot;));
167         assertEquals(0, e.eval(&quot;o.intMethod(&#39;0&#39;);&quot;));
168         assertEquals(-200, e.eval(&quot;o.intMethod(&#39;-100&#39;);&quot;));
169     }
170 
171     @Test
172     public void accessMethodLong() throws ScriptException {
173         assertEquals((long)0, e.eval(&quot;o.longMethod(0);&quot;));
174         assertEquals((long)400, e.eval(&quot;o.longMethod(200);&quot;));
175         assertEquals((long) 0, e.eval(&quot;o.longMethod(&#39;0&#39;);&quot;));
176         assertEquals((long) 400, e.eval(&quot;o.longMethod(&#39;200&#39;);&quot;));
177     }
178 
179     @Test
180     public void accessMethodByte() throws ScriptException {
181         assertEquals((byte) 0, e.eval(&quot;o.byteMethod(0);&quot;));
182         assertEquals((byte) 10, e.eval(&quot;o.byteMethod(5);&quot;));
183         assertEquals((byte) 0, e.eval(&quot;o.byteMethod(&#39;0&#39;);&quot;));
184         assertEquals((byte) 10, e.eval(&quot;o.byteMethod(&#39;5&#39;);&quot;));
185     }
186 
187     @Test
188     public void accessMethodShort() throws ScriptException {
189         assertEquals((short)0, e.eval(&quot;o.shortMethod(0);&quot;));
190         assertEquals((short)8000, e.eval(&quot;o.shortMethod(4000);&quot;));
191         assertEquals((short) 0, e.eval(&quot;o.shortMethod(&#39;0&#39;);&quot;));
192         assertEquals((short) 8000, e.eval(&quot;o.shortMethod(&#39;4000&#39;);&quot;));
193     }
194 
195     @Test
196     public void accessMethodChar() throws ScriptException {
197         assertEquals(&#39;A&#39;, e.eval(&quot;o.charMethod(&#39;a&#39;);&quot;));
198         assertEquals(&#39;Z&#39;, e.eval(&quot;o.charMethod(&#39;z&#39;);&quot;));
199         assertEquals(o.charMethod((char)0), e.eval(&quot;o.charMethod(0);&quot;));
200         assertEquals(o.charMethod((char)3150), e.eval(&quot;o.charMethod(3150);&quot;));
201     }
202 
203     @Test
204     public void accessMethodFloat() throws ScriptException {
205         assertEquals(0.0f, e.eval(&quot;o.floatMethod(0.0);&quot;));
206         assertEquals(4.2f, e.eval(&quot;o.floatMethod(2.1);&quot;));
207         assertEquals(0.0f, e.eval(&quot;o.floatMethod(&#39;0.0&#39;);&quot;));
208         assertEquals(4.2f, e.eval(&quot;o.floatMethod(&#39;2.1&#39;);&quot;));
209     }
210 
211     @Test
212     public void accessMethodDouble() throws ScriptException {
213         assertEquals(0.0, e.eval(&quot;o.doubleMethod(0.0);&quot;));
214         assertEquals(14.0, e.eval(&quot;o.doubleMethod(7.0);&quot;));
215         assertEquals(0.0, e.eval(&quot;o.doubleMethod(&#39;0.0&#39;);&quot;));
216         assertEquals(14.0, e.eval(&quot;o.doubleMethod(&#39;7.0&#39;);&quot;));
217     }
218 
219     @Test
220     public void accessMethodBooleanBoxing() throws ScriptException {
221         assertEquals(Boolean.TRUE, e.eval(&quot;o.booleanBoxingMethod(java.lang.Boolean.FALSE);&quot;));
222         assertEquals(Boolean.FALSE, e.eval(&quot;o.booleanBoxingMethod(java.lang.Boolean.TRUE);&quot;));
223         assertEquals(Boolean.TRUE, e.eval(&quot;o.booleanBoxingMethod(&#39;&#39;);&quot;));
224         assertEquals(Boolean.FALSE, e.eval(&quot;o.booleanBoxingMethod(&#39;false&#39;);&quot;));
225     }
226 
227     @Test
228     public void accessMethodIntBoxing() throws ScriptException {
229         assertEquals(0, e.eval(&quot;o.intBoxingMethod(0);&quot;));
230         assertEquals(-200, e.eval(&quot;o.intBoxingMethod(-100);&quot;));
231         assertTrue((int)e.eval(&quot;(new java.lang.Integer(2)).compareTo(10.0)&quot;) &lt; 0);
232     }
233 
234     @Test
235     public void accessMethodLongBoxing() throws ScriptException {
236         assertEquals((long) 0, e.eval(&quot;o.longBoxingMethod(0);&quot;));
237         assertEquals((long) 400, e.eval(&quot;o.longBoxingMethod(200);&quot;));
238         assertTrue((int)e.eval(&quot;(new java.lang.Long(2)).compareTo(10.0)&quot;) &lt; 0);
239     }
240 
241     @Test
242     public void accessMethodByteBoxing() throws ScriptException {
243         assertEquals((byte) 0, e.eval(&quot;o.byteBoxingMethod(0);&quot;));
244         assertEquals((byte) 10, e.eval(&quot;o.byteBoxingMethod(5);&quot;));
245         assertTrue((int)e.eval(&quot;(new java.lang.Byte(2)).compareTo(10.0)&quot;) &lt; 0);
246     }
247 
248     @Test
249     public void accessMethodShortBoxing() throws ScriptException {
250         assertEquals((short) 0, e.eval(&quot;o.shortBoxingMethod(0);&quot;));
251         assertEquals((short) 8000, e.eval(&quot;o.shortBoxingMethod(4000);&quot;));
252         assertTrue((int)e.eval(&quot;(new java.lang.Short(2)).compareTo(10.0)&quot;) &lt; 0);
253     }
254 
255     @Test
256     public void accessMethodCharBoxing() throws ScriptException {
257         assertEquals(&#39;A&#39;, e.eval(&quot;o.charBoxingMethod(&#39;a&#39;);&quot;));
258         assertEquals(&#39;Z&#39;, e.eval(&quot;o.charBoxingMethod(&#39;z&#39;);&quot;));
259         assertTrue((int)e.eval(&quot;(new java.lang.Character(2)).compareTo(10)&quot;) &lt; 0);
260     }
261 
262     @Test
263     public void accessMethodFloatBoxing() throws ScriptException {
264         assertEquals(0.0f, e.eval(&quot;o.floatBoxingMethod(0.0);&quot;));
265         assertEquals(4.2f, e.eval(&quot;o.floatBoxingMethod(2.1);&quot;));
266         assertTrue((int)e.eval(&quot;(new java.lang.Float(2.0)).compareTo(10.0)&quot;) &lt; 0);
267     }
268 
269     @Test
270     public void accessMethodDoubleBoxing() throws ScriptException {
271         assertEquals(0.0, e.eval(&quot;o.doubleBoxingMethod(0.0);&quot;));
272         assertEquals(14.0, e.eval(&quot;o.doubleBoxingMethod(7.0);&quot;));
273         assertTrue((int)e.eval(&quot;(new java.lang.Double(2)).compareTo(10.0)&quot;) &lt; 0);
274     }
275 
276     @Test
277     public void accessMethodString() throws ScriptException {
278         assertEquals(&quot;&quot;, e.eval(&quot;o.stringMethod(&#39;&#39;);&quot;));
279         assertEquals(&quot;abcabc&quot;, e.eval(&quot;o.stringMethod(&#39;abc&#39;);&quot;));
280     }
281 
282     @Test
283     public void accessMethodObject() throws ScriptException {
284         e.put(&quot;so&quot;, new Person(5));
285         e.eval(&quot;var rso = o.objectMethod(so);&quot;);
286         assertEquals(new Person(10), e.get(&quot;rso&quot;));
287     }
288 
289     @Test
290     public void accessMethodBooleanArray() throws ScriptException {
291         assertTrue(Arrays.equals(o.booleanArrayMethod(o.publicBooleanArray), (boolean[])e.eval(&quot;o.booleanArrayMethod(o.publicBooleanArray);&quot;)));
292     }
293 
294     @Test
295     public void accessMethodIntArray() throws ScriptException {
296         assertArrayEquals(o.intArrayMethod(o.publicIntArray), (int[])e.eval(&quot;o.intArrayMethod(o.publicIntArray);&quot;));
297     }
298 
299     @Test
300     public void accessMethodLongArray() throws ScriptException {
301         assertArrayEquals(o.longArrayMethod(o.publicLongArray), (long[])e.eval(&quot;o.longArrayMethod(o.publicLongArray);&quot;));
302     }
303 
304     @Test
305     public void accessMethodByteArray() throws ScriptException {
306         assertArrayEquals(o.byteArrayMethod(o.publicByteArray), (byte[])e.eval(&quot;o.byteArrayMethod(o.publicByteArray);&quot;));
307     }
308 
309     @Test
310     public void accessMethodShortArray() throws ScriptException {
311         assertArrayEquals(o.shortArrayMethod(o.publicShortArray), (short[])e.eval(&quot;o.shortArrayMethod(o.publicShortArray);&quot;));
312     }
313 
314     @Test
315     public void accessMethodCharArray() throws ScriptException {
316         assertArrayEquals(o.charArrayMethod(o.publicCharArray), (char[])e.eval(&quot;o.charArrayMethod(o.publicCharArray);&quot;));
317     }
318 
319     @Test
320     public void accessMethodFloatArray() throws ScriptException {
321         assertArrayEquals(o.floatArrayMethod(o.publicFloatArray), (float[])e.eval(&quot;o.floatArrayMethod(o.publicFloatArray);&quot;), 1e-10f);
322     }
323 
324     @Test
325     public void accessMethodDoubleArray() throws ScriptException {
326         assertArrayEquals(o.doubleArrayMethod(o.publicDoubleArray), (double[])e.eval(&quot;o.doubleArrayMethod(o.publicDoubleArray);&quot;), 1e-10);
327     }
328 
329     @Test
330     public void accessMethodStringArray() throws ScriptException {
331         assertArrayEquals(o.stringArrayMethod(o.publicStringArray), (String[])e.eval(&quot;o.stringArrayMethod(o.publicStringArray);&quot;));
332     }
333 
334     @Test
335     public void accessMethodObjectArray() throws ScriptException {
336         assertArrayEquals(o.objectArrayMethod(o.publicObjectArray), (Person[])e.eval(&quot;o.objectArrayMethod(o.publicObjectArray);&quot;));
337     }
338 
339     @Test
340     public void accessDefaultConstructor() throws ScriptException {
341         e.eval(&quot;var dc = new Packages.jdk.nashorn.api.javaaccess.test.Person()&quot;);
342         assertEquals(new Person(), e.get(&quot;dc&quot;));
343     }
344 
345     @Test
346     public void accessCustomConstructor() throws ScriptException {
347         e.eval(&quot;var cc = new Packages.jdk.nashorn.api.javaaccess.test.Person(17)&quot;);
348         assertEquals(new Person(17), e.get(&quot;cc&quot;));
349     }
350 
351     @Test
352     public void accessMethod2PrimitiveParams() throws ScriptException {
353         assertEquals(o.twoParamMethod(50, 40.0), e.eval(&quot;o.twoParamMethod(50,40);&quot;));
354     }
355 
356     @Test
357     public void accessMethod3PrimitiveParams() throws ScriptException {
358         assertEquals(o.threeParamMethod((short)10, 20L, &#39;b&#39;), e.eval(&quot;o.threeParamMethod(10,20,&#39;b&#39;);&quot;));
359     }
360 
361     @Test
362     public void accessMethod2ObjectParams() throws ScriptException {
363         assertArrayEquals(new Person[] { new Person(200), new Person(300) }, (Person[])e.eval(&quot;o.twoObjectParamMethod(new Person(300),new Person(200));&quot;));
364     }
365 
366     @Test
367     public void accessMethod3ObjectParams() throws ScriptException {
368         assertArrayEquals(new Person[] { new Person(3), new Person(2), new Person(1) }, (Person[])e.eval(&quot;o.threeObjectParamMethod(new Person(1),new Person(2),new Person(3));&quot;));
369     }
370 
371     @Test
372     public void accessMethod8ObjectParams() throws ScriptException {
373         assertArrayEquals(new Person[] { new Person(8), new Person(7), new Person(6), new Person(5), new Person(4), new Person(3), new Person(2), new Person(1) }, (Person[])e.eval(&quot;o.eightObjectParamMethod(new Person(1),new Person(2),new Person(3),&quot; + &quot;new Person(4),new Person(5),new Person(6),new Person(7),new Person(8));&quot;));
374     }
375 
376     @Test
377     public void accessMethod9ObjectParams() throws ScriptException {
378         assertArrayEquals(new Person[] { new Person(9), new Person(8), new Person(7), new Person(6), new Person(5), new Person(4), new Person(3), new Person(2), new Person(1) }, (Person[])e.eval(&quot;o.nineObjectParamMethod(new Person(1),new Person(2),new Person(3),&quot; + &quot;new Person(4),new Person(5),new Person(6),&quot; + &quot;new Person(7),new Person(8),new Person(9));&quot;));
379     }
380 
381     @Test
382     public void accessMethodObjectEllipsis() throws ScriptException {
383         assertArrayEquals(new Person[] { new Person(9), new Person(8), new Person(7), new Person(6), new Person(5), new Person(4), new Person(3), new Person(2), new Person(1) }, (Person[])e.eval(&quot;o.methodObjectEllipsis(new Person(1),new Person(2),new Person(3),&quot; + &quot;new Person(4),new Person(5),new Person(6),&quot; + &quot;new Person(7),new Person(8),new Person(9));&quot;));
384         assertArrayEquals(new Person[] {}, (Person[])e.eval(&quot;o.methodObjectEllipsis()&quot;));
385         assertArrayEquals(new Person[] { new Person(9) }, (Person[])e.eval(&quot;o.methodObjectEllipsis(new Person(9))&quot;));
386     }
387 
388     @Test
389     public void accessMethodPrimitiveEllipsis() throws ScriptException {
390         assertArrayEquals(new Person[] { new Person(1), new Person(3), new Person(2) }, (Person[])e.eval(&quot;o.methodPrimitiveEllipsis(1,3,2);&quot;));
391         assertArrayEquals(new Person[] {}, (Person[])e.eval(&quot;o.methodPrimitiveEllipsis();&quot;));
392         assertArrayEquals(o.methodPrimitiveEllipsis(9, 8, 7, 6, 5, 4, 3, 2, 1), (Person[])e.eval(&quot;o.methodPrimitiveEllipsis(9,8,7,6,5,4,3,2,1);&quot;));
393     }
394 
395     @Test
396     public void accessMethodMixedEllipsis() throws ScriptException {
397         assertArrayEquals(new Object[] { new Person(1), 12, &quot;hello&quot;, true }, (Object[])e.eval(&quot;o.methodMixedEllipsis(new Person(1),12,&#39;hello&#39;,true);&quot;));
398         assertArrayEquals(new Object[] {}, (Object[])e.eval(&quot;o.methodMixedEllipsis();&quot;));
399     }
400 
401     @Test
402     public void accessMethodObjectWithEllipsis() throws ScriptException {
403         assertArrayEquals(new Object[] { &quot;hello&quot;, 12, 15, 16 }, (Object[])e.eval(&quot;o.methodObjectWithEllipsis(&#39;hello&#39;,12,15,16);&quot;));
404         assertArrayEquals(new Object[] { &quot;hello&quot; }, (Object[])e.eval(&quot;o.methodObjectWithEllipsis(&#39;hello&#39;);&quot;));
405     }
406 
407     @Test
408     public void accessMethodPrimitiveWithEllipsis() throws ScriptException {
409         assertArrayEquals(new Object[] { 14, 12L, 15L, 16L }, (Object[])e.eval(&quot;o.methodPrimitiveWithEllipsis(14,12,15,16);&quot;));
410         assertArrayEquals(new Object[] { 12 }, (Object[])e.eval(&quot;o.methodPrimitiveWithEllipsis(12);&quot;));
411     }
412 
413     @Test
414     public void accessMethodMixedWithEllipsis() throws ScriptException {
415         assertArrayEquals(new Object[] { &quot;Hello&quot;, 10, true, -100500, 80d }, (Object[])e.eval(&quot;o.methodMixedWithEllipsis(&#39;Hello&#39;, 10, true, -100500,80.0);&quot;));
416         assertArrayEquals(new Object[] { &quot;Nashorn&quot;, 15 }, (Object[])e.eval(&quot;o.methodMixedWithEllipsis(&#39;Nashorn&#39;,15);&quot;));
417     }
418 
419     @Test
420     public void accessMethodOverloaded() throws ScriptException {
421         assertEquals(0, e.eval(&quot;o.overloadedMethod(0);&quot;));
422         assertEquals(2000, e.eval(&quot;o.overloadedMethod(1000);&quot;));
423         assertEquals(2, e.eval(&quot;o.overloadedMethod(&#39;10&#39;);&quot;));
424         assertEquals(7, e.eval(&quot;o.overloadedMethod(&#39;Nashorn&#39;);&quot;));
425         assertEquals(4, e.eval(&quot;o.overloadedMethod(&#39;true&#39;);&quot;));
426         assertEquals(1, e.eval(&quot;o.overloadedMethod(true);&quot;));
427         assertEquals(0, e.eval(&quot;o.overloadedMethod(false);&quot;));
428         assertEquals(44, e.eval(&quot;o.overloadedMethod(new Person(22));&quot;));
429         assertEquals(0, e.eval(&quot;o.overloadedMethod(new Person());&quot;));
430     }
431 
432     @Test
433     public void accessMethodDoubleVSintOverloaded() throws ScriptException {
434         assertEquals(&quot;double&quot;, e.eval(&quot;o.overloadedMethodDoubleVSint(0.0);&quot;));
435         assertEquals(&quot;double&quot;, e.eval(&quot;o.overloadedMethodDoubleVSint(1000.0);&quot;));
436         assertEquals(&quot;double&quot;, e.eval(&quot;o.overloadedMethodDoubleVSint(0.01);&quot;));
437         assertEquals(&quot;double&quot;, e.eval(&quot;o.overloadedMethodDoubleVSint(100.02);&quot;));
438         assertEquals(&quot;int&quot;, e.eval(&quot;o.overloadedMethodDoubleVSint(0);&quot;));
439         assertEquals(&quot;int&quot;, e.eval(&quot;o.overloadedMethodDoubleVSint(1000);&quot;));
440     }
441 
442     @Test
443     public void accessJavaMethodIntFromJSFromJavaFromJS() throws ScriptException {
444         e.eval(&quot;function secondLevelMethodInt(a) {&quot;
445                 + &quot;return o.thirdLevelMethodInt(a);&quot;
446                 + &quot;}&quot;);
447         assertEquals(50, e.eval(&quot;o.firstLevelMethodInt(10);&quot;));
448     }
449 
450     @Test
451     public void accessJavaMethodIntegerFromJSFromJavaFromJS() throws ScriptException {
452         e.eval(&quot;function secondLevelMethodInteger(a) {&quot;
453                 + &quot;return o.thirdLevelMethodInteger(a);&quot;
454                 + &quot;}&quot;);
455         assertEquals(100, e.eval(&quot;o.firstLevelMethodInteger(10);&quot;));
456     }
457 
458     @Test
459     public void accessJavaMethodObjectFromJSFromJavaFromJS() throws ScriptException {
460         e.eval(&quot;function secondLevelMethodObject(p) {&quot;
461                 + &quot;return o.thirdLevelMethodObject(p);&quot;
462                 + &quot;}&quot;);
463         assertEquals(new Person(100), e.eval(&quot;o.firstLevelMethodObject(new Person(10));&quot;));
464     }
465 
466 }
    </pre>
  </body>
</html>