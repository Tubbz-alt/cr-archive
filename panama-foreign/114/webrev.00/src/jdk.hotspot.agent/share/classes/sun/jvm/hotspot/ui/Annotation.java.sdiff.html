<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/ui/Annotation.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AnnotatedMemoryPanel.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="FindInHeapPanel.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/ui/Annotation.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2000, 2003, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 
 25 package sun.jvm.hotspot.ui;
 26 
 27 import java.awt.*;
 28 import java.awt.font.*;
 29 import java.awt.geom.*;
 30 import java.util.*;
 31 
 32 import sun.jvm.hotspot.debugger.*;
 33 import sun.jvm.hotspot.utilities.*;
 34 
 35 /** This can be extended, along with AnnotatedMemoryPanel, to be an
 36     arbitrarily complex mechanism, supporting user interaction,
 37     etc. */
 38 
 39 public class Annotation {
 40   private Interval interval;
<span class="line-modified"> 41   // List&lt;String&gt;</span>
<span class="line-modified"> 42   private java.util.List strings;</span>
<span class="line-removed"> 43   // List&lt;Integer&gt;</span>
<span class="line-removed"> 44   private java.util.List heights;</span>
 45   private Color baseColor;
 46   private int width;
 47   private int height;
 48   private int x;
 49   private int y;
 50 
 51   /** The Annotation can handle the sense of lowAddress and
 52       highAddress being swapped. */
 53   public Annotation(Address lowAddress,
 54                     Address highAddress,
 55                     String s) {
<span class="line-modified"> 56     strings = new ArrayList();</span>
<span class="line-modified"> 57     heights = new ArrayList();</span>
 58     for (StringTokenizer tok = new StringTokenizer(s, &quot;\n&quot;); tok.hasMoreTokens(); ) {
 59       strings.add(tok.nextToken());
 60     }
 61     if (AddressOps.lessThan(highAddress, lowAddress)) {
 62       Address temp = lowAddress;
 63       lowAddress = highAddress;
 64       highAddress = temp;
 65     }
 66     interval = new Interval(lowAddress, highAddress);
 67   }
 68 
 69   public Interval getInterval() {
 70     return interval;
 71   }
 72 
 73   public Address getLowAddress() {
 74     return (Address) getInterval().getLowEndpoint();
 75   }
 76 
 77   public Address getHighAddress() {
</pre>
<hr />
<pre>
 98   }
 99 
100   /** Returns the base color of this annotation. */
101   public Color getColor() {
102     return baseColor;
103   }
104 
105   /** Computes width and height for this Annotation. Retrieve the
106       computed information using getWidth() and getHeight(). Separated
107       because the width and height only need to be recomputed if the
108       font changes. */
109   public void computeWidthAndHeight(Graphics g) {
110     width = 0;
111     height = 0;
112     heights.clear();
113     for (Iterator iter = strings.iterator(); iter.hasNext(); ) {
114       String s = (String) iter.next();
115       Rectangle2D bounds = GraphicsUtilities.getStringBounds(s, g);
116       width  =  Math.max(width, (int) bounds.getWidth());
117       height += (int) bounds.getHeight();
<span class="line-modified">118       heights.add(new Integer((int) bounds.getHeight()));</span>
119     }
120   }
121 
122   public int getWidth() {
123     return width;
124   }
125 
126   public int getHeight() {
127     return height;
128   }
129 
130   /** Set the x and y position of this annotation */
131   public void setXAndY(int x, int y) {
132     this.x = x; this.y = y;
133   }
134 
135   public void setX(int x) {
136     this.x = x;
137   }
138 
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 
 25 package sun.jvm.hotspot.ui;
 26 
 27 import java.awt.*;
 28 import java.awt.font.*;
 29 import java.awt.geom.*;
 30 import java.util.*;
 31 
 32 import sun.jvm.hotspot.debugger.*;
 33 import sun.jvm.hotspot.utilities.*;
 34 
 35 /** This can be extended, along with AnnotatedMemoryPanel, to be an
 36     arbitrarily complex mechanism, supporting user interaction,
 37     etc. */
 38 
 39 public class Annotation {
 40   private Interval interval;
<span class="line-modified"> 41   private java.util.List&lt;String&gt; strings;</span>
<span class="line-modified"> 42   private java.util.List&lt;Integer&gt; heights;</span>


 43   private Color baseColor;
 44   private int width;
 45   private int height;
 46   private int x;
 47   private int y;
 48 
 49   /** The Annotation can handle the sense of lowAddress and
 50       highAddress being swapped. */
 51   public Annotation(Address lowAddress,
 52                     Address highAddress,
 53                     String s) {
<span class="line-modified"> 54     strings = new ArrayList&lt;&gt;();</span>
<span class="line-modified"> 55     heights = new ArrayList&lt;&gt;();</span>
 56     for (StringTokenizer tok = new StringTokenizer(s, &quot;\n&quot;); tok.hasMoreTokens(); ) {
 57       strings.add(tok.nextToken());
 58     }
 59     if (AddressOps.lessThan(highAddress, lowAddress)) {
 60       Address temp = lowAddress;
 61       lowAddress = highAddress;
 62       highAddress = temp;
 63     }
 64     interval = new Interval(lowAddress, highAddress);
 65   }
 66 
 67   public Interval getInterval() {
 68     return interval;
 69   }
 70 
 71   public Address getLowAddress() {
 72     return (Address) getInterval().getLowEndpoint();
 73   }
 74 
 75   public Address getHighAddress() {
</pre>
<hr />
<pre>
 96   }
 97 
 98   /** Returns the base color of this annotation. */
 99   public Color getColor() {
100     return baseColor;
101   }
102 
103   /** Computes width and height for this Annotation. Retrieve the
104       computed information using getWidth() and getHeight(). Separated
105       because the width and height only need to be recomputed if the
106       font changes. */
107   public void computeWidthAndHeight(Graphics g) {
108     width = 0;
109     height = 0;
110     heights.clear();
111     for (Iterator iter = strings.iterator(); iter.hasNext(); ) {
112       String s = (String) iter.next();
113       Rectangle2D bounds = GraphicsUtilities.getStringBounds(s, g);
114       width  =  Math.max(width, (int) bounds.getWidth());
115       height += (int) bounds.getHeight();
<span class="line-modified">116       heights.add((int) bounds.getHeight());</span>
117     }
118   }
119 
120   public int getWidth() {
121     return width;
122   }
123 
124   public int getHeight() {
125     return height;
126   }
127 
128   /** Set the x and y position of this annotation */
129   public void setXAndY(int x, int y) {
130     this.x = x; this.y = y;
131   }
132 
133   public void setX(int x) {
134     this.x = x;
135   }
136 
</pre>
</td>
</tr>
</table>
<center><a href="AnnotatedMemoryPanel.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="FindInHeapPanel.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>