<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/HotSpotAgent.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="HSDB.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="asm/Disassembler.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/HotSpotAgent.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
466     }
467 
468     //--------------------------------------------------------------------------------
469     // OS-specific debugger setup/connect routines
470     //
471 
472     // Use the existing JVMDebugger, as passed to our constructor.
473     // Retrieve os and cpu from that debugger, not the current platform.
474     private void setupDebuggerExisting() {
475 
476         os = debugger.getOS();
477         cpu = debugger.getCPU();
478         setupJVMLibNames(os);
479         machDesc = debugger.getMachineDescription();
480     }
481 
482     // Given a classname, load an alternate implementation of JVMDebugger.
483     private void setupDebuggerAlternate(String alternateName) {
484 
485         try {
<span class="line-modified">486             Class c = Class.forName(alternateName);</span>
487             Constructor cons = c.getConstructor();
488             debugger = (JVMDebugger) cons.newInstance();
489             attachDebugger();
490             setupDebuggerExisting();
491 
492         } catch (ClassNotFoundException cnfe) {
493             throw new DebuggerException(&quot;Cannot find alternate SA Debugger: &#39;&quot; + alternateName + &quot;&#39;&quot;);
494         } catch (NoSuchMethodException nsme) {
495             throw new DebuggerException(&quot;Alternate SA Debugger: &#39;&quot; + alternateName + &quot;&#39; has missing constructor.&quot;);
496         } catch (InstantiationException ie) {
497             throw new DebuggerException(&quot;Alternate SA Debugger: &#39;&quot; + alternateName + &quot;&#39; fails to initialise: &quot;, ie);
498         } catch (IllegalAccessException iae) {
499             throw new DebuggerException(&quot;Alternate SA Debugger: &#39;&quot; + alternateName + &quot;&#39; fails to initialise: &quot;, iae);
500         } catch (InvocationTargetException iae) {
501             throw new DebuggerException(&quot;Alternate SA Debugger: &#39;&quot; + alternateName + &quot;&#39; fails to initialise: &quot;, iae);
502         }
503 
504         System.err.println(&quot;Loaded alternate HotSpot SA Debugger: &quot; + alternateName);
505     }
506 
</pre>
<hr />
<pre>
609         setupJVMLibNamesLinux();
610 
611         if (cpu.equals(&quot;x86&quot;)) {
612             machDesc = new MachineDescriptionIntelX86();
613         } else if (cpu.equals(&quot;amd64&quot;)) {
614             machDesc = new MachineDescriptionAMD64();
615         } else if (cpu.equals(&quot;ppc64&quot;)) {
616             machDesc = new MachineDescriptionPPC64();
617         } else if (cpu.equals(&quot;aarch64&quot;)) {
618             machDesc = new MachineDescriptionAArch64();
619         } else if (cpu.equals(&quot;sparc&quot;)) {
620             if (LinuxDebuggerLocal.getAddressSize()==8) {
621                     machDesc = new MachineDescriptionSPARC64Bit();
622             } else {
623                     machDesc = new MachineDescriptionSPARC32Bit();
624             }
625         } else {
626           try {
627             machDesc = (MachineDescription)
628               Class.forName(&quot;sun.jvm.hotspot.debugger.MachineDescription&quot; +
<span class="line-modified">629                             cpu.toUpperCase()).newInstance();</span>
630           } catch (Exception e) {
631             throw new DebuggerException(&quot;Linux not supported on machine type &quot; + cpu);
632           }
633         }
634 
635         LinuxDebuggerLocal dbg =
636         new LinuxDebuggerLocal(machDesc, !isServer);
637         debugger = dbg;
638 
639         attachDebugger();
640     }
641 
642     private void setupJVMLibNamesLinux() {
643         jvmLibNames = new String[] { &quot;libjvm.so&quot; };
644     }
645 
646     //
647     // BSD
648     //
649 
</pre>
</td>
<td>
<hr />
<pre>
466     }
467 
468     //--------------------------------------------------------------------------------
469     // OS-specific debugger setup/connect routines
470     //
471 
472     // Use the existing JVMDebugger, as passed to our constructor.
473     // Retrieve os and cpu from that debugger, not the current platform.
474     private void setupDebuggerExisting() {
475 
476         os = debugger.getOS();
477         cpu = debugger.getCPU();
478         setupJVMLibNames(os);
479         machDesc = debugger.getMachineDescription();
480     }
481 
482     // Given a classname, load an alternate implementation of JVMDebugger.
483     private void setupDebuggerAlternate(String alternateName) {
484 
485         try {
<span class="line-modified">486             Class&lt;?&gt; c = Class.forName(alternateName);</span>
487             Constructor cons = c.getConstructor();
488             debugger = (JVMDebugger) cons.newInstance();
489             attachDebugger();
490             setupDebuggerExisting();
491 
492         } catch (ClassNotFoundException cnfe) {
493             throw new DebuggerException(&quot;Cannot find alternate SA Debugger: &#39;&quot; + alternateName + &quot;&#39;&quot;);
494         } catch (NoSuchMethodException nsme) {
495             throw new DebuggerException(&quot;Alternate SA Debugger: &#39;&quot; + alternateName + &quot;&#39; has missing constructor.&quot;);
496         } catch (InstantiationException ie) {
497             throw new DebuggerException(&quot;Alternate SA Debugger: &#39;&quot; + alternateName + &quot;&#39; fails to initialise: &quot;, ie);
498         } catch (IllegalAccessException iae) {
499             throw new DebuggerException(&quot;Alternate SA Debugger: &#39;&quot; + alternateName + &quot;&#39; fails to initialise: &quot;, iae);
500         } catch (InvocationTargetException iae) {
501             throw new DebuggerException(&quot;Alternate SA Debugger: &#39;&quot; + alternateName + &quot;&#39; fails to initialise: &quot;, iae);
502         }
503 
504         System.err.println(&quot;Loaded alternate HotSpot SA Debugger: &quot; + alternateName);
505     }
506 
</pre>
<hr />
<pre>
609         setupJVMLibNamesLinux();
610 
611         if (cpu.equals(&quot;x86&quot;)) {
612             machDesc = new MachineDescriptionIntelX86();
613         } else if (cpu.equals(&quot;amd64&quot;)) {
614             machDesc = new MachineDescriptionAMD64();
615         } else if (cpu.equals(&quot;ppc64&quot;)) {
616             machDesc = new MachineDescriptionPPC64();
617         } else if (cpu.equals(&quot;aarch64&quot;)) {
618             machDesc = new MachineDescriptionAArch64();
619         } else if (cpu.equals(&quot;sparc&quot;)) {
620             if (LinuxDebuggerLocal.getAddressSize()==8) {
621                     machDesc = new MachineDescriptionSPARC64Bit();
622             } else {
623                     machDesc = new MachineDescriptionSPARC32Bit();
624             }
625         } else {
626           try {
627             machDesc = (MachineDescription)
628               Class.forName(&quot;sun.jvm.hotspot.debugger.MachineDescription&quot; +
<span class="line-modified">629                             cpu.toUpperCase()).getDeclaredConstructor().newInstance();</span>
630           } catch (Exception e) {
631             throw new DebuggerException(&quot;Linux not supported on machine type &quot; + cpu);
632           }
633         }
634 
635         LinuxDebuggerLocal dbg =
636         new LinuxDebuggerLocal(machDesc, !isServer);
637         debugger = dbg;
638 
639         attachDebugger();
640     }
641 
642     private void setupJVMLibNamesLinux() {
643         jvmLibNames = new String[] { &quot;libjvm.so&quot; };
644     }
645 
646     //
647     // BSD
648     //
649 
</pre>
</td>
</tr>
</table>
<center><a href="HSDB.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="asm/Disassembler.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>