<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/runtime/CompiledVFrame.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="BasicTypeSize.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CompilerThread.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/runtime/CompiledVFrame.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 93,53 ***</span>
    }
  
    public StackValueCollection getLocals() {
      if (getScope() == null)
        return new StackValueCollection();
<span class="line-modified">!     List scvList = getScope().getLocals();</span>
      if (scvList == null)
        return new StackValueCollection();
  
      // scvList is the list of ScopeValues describing the JVM stack state.
      // There is one scv_list entry for every JVM stack state in use.
      int length = scvList.size();
      StackValueCollection result = new StackValueCollection(length);
      for( int i = 0; i &lt; length; i++ )
<span class="line-modified">!       result.add( createStackValue((ScopeValue) scvList.get(i)) );</span>
  
      return result;
    }
  
    public StackValueCollection getExpressions() {
      if (getScope() == null)
        return new StackValueCollection();
<span class="line-modified">!     List scvList = getScope().getExpressions();</span>
      if (scvList == null)
        return new StackValueCollection();
  
      // scvList is the list of ScopeValues describing the JVM stack state.
      // There is one scv_list entry for every JVM stack state in use.
      int length = scvList.size();
      StackValueCollection result = new StackValueCollection(length);
      for( int i = 0; i &lt; length; i++ )
<span class="line-modified">!       result.add( createStackValue((ScopeValue) scvList.get(i)) );</span>
  
      return result;
    }
  
<span class="line-removed">-   /** Returns List&lt;MonitorInfo&gt; */</span>
    public List&lt;MonitorInfo&gt; getMonitors() {
      if (getScope() == null) {
        return new ArrayList&lt;&gt;();
      }
<span class="line-modified">!     List monitors = getScope().getMonitors();</span>
      if (monitors == null) {
        return new ArrayList&lt;&gt;();
      }
      List&lt;MonitorInfo&gt; result = new ArrayList&lt;&gt;(monitors.size());
      for (int i = 0; i &lt; monitors.size(); i++) {
<span class="line-modified">!       MonitorValue mv = (MonitorValue) monitors.get(i);</span>
        ScopeValue ov = mv.owner();
        StackValue ownerSV = createStackValue(ov); // it is an oop
        if (ov.isObject()) { // The owner object was scalar replaced
          Assert.that(mv.eliminated() &amp;&amp; ownerSV.objIsScalarReplaced(), &quot;monitor should be eliminated for scalar replaced object&quot;);
          // Put klass for scalar replaced object.
<span class="line-new-header">--- 93,52 ---</span>
    }
  
    public StackValueCollection getLocals() {
      if (getScope() == null)
        return new StackValueCollection();
<span class="line-modified">!     List&lt;ScopeValue&gt; scvList = getScope().getLocals();</span>
      if (scvList == null)
        return new StackValueCollection();
  
      // scvList is the list of ScopeValues describing the JVM stack state.
      // There is one scv_list entry for every JVM stack state in use.
      int length = scvList.size();
      StackValueCollection result = new StackValueCollection(length);
      for( int i = 0; i &lt; length; i++ )
<span class="line-modified">!       result.add( createStackValue(scvList.get(i)) );</span>
  
      return result;
    }
  
    public StackValueCollection getExpressions() {
      if (getScope() == null)
        return new StackValueCollection();
<span class="line-modified">!     List&lt;ScopeValue&gt; scvList = getScope().getExpressions();</span>
      if (scvList == null)
        return new StackValueCollection();
  
      // scvList is the list of ScopeValues describing the JVM stack state.
      // There is one scv_list entry for every JVM stack state in use.
      int length = scvList.size();
      StackValueCollection result = new StackValueCollection(length);
      for( int i = 0; i &lt; length; i++ )
<span class="line-modified">!       result.add( createStackValue(scvList.get(i)) );</span>
  
      return result;
    }
  
    public List&lt;MonitorInfo&gt; getMonitors() {
      if (getScope() == null) {
        return new ArrayList&lt;&gt;();
      }
<span class="line-modified">!     List&lt;MonitorValue&gt; monitors = getScope().getMonitors();</span>
      if (monitors == null) {
        return new ArrayList&lt;&gt;();
      }
      List&lt;MonitorInfo&gt; result = new ArrayList&lt;&gt;(monitors.size());
      for (int i = 0; i &lt; monitors.size(); i++) {
<span class="line-modified">!       MonitorValue mv = monitors.get(i);</span>
        ScopeValue ov = mv.owner();
        StackValue ownerSV = createStackValue(ov); // it is an oop
        if (ov.isObject()) { // The owner object was scalar replaced
          Assert.that(mv.eliminated() &amp;&amp; ownerSV.objIsScalarReplaced(), &quot;monitor should be eliminated for scalar replaced object&quot;);
          // Put klass for scalar replaced object.
</pre>
<center><a href="BasicTypeSize.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="CompilerThread.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>