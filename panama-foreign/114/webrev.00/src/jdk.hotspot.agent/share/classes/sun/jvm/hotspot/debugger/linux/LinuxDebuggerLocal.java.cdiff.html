<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/debugger/linux/LinuxDebuggerLocal.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="LinuxDebugger.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../proc/ProcCDebugger.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/debugger/linux/LinuxDebuggerLocal.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 41,10 ***</span>
<span class="line-new-header">--- 41,11 ---</span>
  import sun.jvm.hotspot.debugger.DebuggerException;
  import sun.jvm.hotspot.debugger.DebuggerUtilities;
  import sun.jvm.hotspot.debugger.MachineDescription;
  import sun.jvm.hotspot.debugger.NotInHeapException;
  import sun.jvm.hotspot.debugger.OopHandle;
<span class="line-added">+ import sun.jvm.hotspot.debugger.ProcessInfo;</span>
  import sun.jvm.hotspot.debugger.ReadResult;
  import sun.jvm.hotspot.debugger.ThreadProxy;
  import sun.jvm.hotspot.debugger.UnalignedAddressException;
  import sun.jvm.hotspot.debugger.UnmappedAddressException;
  import sun.jvm.hotspot.debugger.cdbg.CDebugger;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 75,12 ***</span>
  
      // CDebugger support
      private LinuxCDebugger cdbg;
  
      // threadList and loadObjectList are filled by attach0 method
<span class="line-modified">!     private List threadList;</span>
<span class="line-modified">!     private List loadObjectList;</span>
  
      // PID namespace support
      // It maps the LWPID in the host to the LWPID in the container.
      private Map&lt;Integer, Integer&gt; nspidMap;
  
<span class="line-new-header">--- 76,12 ---</span>
  
      // CDebugger support
      private LinuxCDebugger cdbg;
  
      // threadList and loadObjectList are filled by attach0 method
<span class="line-modified">!     private List&lt;ThreadProxy&gt; threadList;</span>
<span class="line-modified">!     private List&lt;LoadObject&gt; loadObjectList;</span>
  
      // PID namespace support
      // It maps the LWPID in the host to the LWPID in the container.
      private Map&lt;Integer, Integer&gt; nspidMap;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 246,11 ***</span>
      public boolean hasProcessList() throws DebuggerException {
          return false;
      }
  
      /** From the Debugger interface via JVMDebugger */
<span class="line-modified">!     public List getProcessList() throws DebuggerException {</span>
          throw new DebuggerException(&quot;getProcessList not implemented yet&quot;);
      }
  
      private void checkAttached() throws DebuggerException {
          if (attached) {
<span class="line-new-header">--- 247,11 ---</span>
      public boolean hasProcessList() throws DebuggerException {
          return false;
      }
  
      /** From the Debugger interface via JVMDebugger */
<span class="line-modified">!     public List&lt;ProcessInfo&gt; getProcessList() throws DebuggerException {</span>
          throw new DebuggerException(&quot;getProcessList not implemented yet&quot;);
      }
  
      private void checkAttached() throws DebuggerException {
          if (attached) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 315,12 ***</span>
      }
  
      /** From the Debugger interface via JVMDebugger */
      public synchronized void attach(int processID) throws DebuggerException {
          checkAttached();
<span class="line-modified">!         threadList = new ArrayList();</span>
<span class="line-modified">!         loadObjectList = new ArrayList();</span>
  
          Path proc = Paths.get(&quot;/proc&quot;, Integer.toString(processID));
          int NSpid = getNamespacePID(Paths.get(proc.toString(), &quot;status&quot;));
          if (NSpid != processID) {
              // If PID different from namespace PID, we can assume the process
<span class="line-new-header">--- 316,12 ---</span>
      }
  
      /** From the Debugger interface via JVMDebugger */
      public synchronized void attach(int processID) throws DebuggerException {
          checkAttached();
<span class="line-modified">!         threadList = new ArrayList&lt;&gt;();</span>
<span class="line-modified">!         loadObjectList = new ArrayList&lt;&gt;();</span>
  
          Path proc = Paths.get(&quot;/proc&quot;, Integer.toString(processID));
          int NSpid = getNamespacePID(Paths.get(proc.toString(), &quot;status&quot;));
          if (NSpid != processID) {
              // If PID different from namespace PID, we can assume the process
</pre>
<hr />
<pre>
<span class="line-old-header">*** 347,12 ***</span>
      }
  
      /** From the Debugger interface via JVMDebugger */
      public synchronized void attach(String execName, String coreName) {
          checkAttached();
<span class="line-modified">!         threadList = new ArrayList();</span>
<span class="line-modified">!         loadObjectList = new ArrayList();</span>
          attach0(execName, coreName);
          attached = true;
          isCore = true;
          findABIVersion();
      }
<span class="line-new-header">--- 348,12 ---</span>
      }
  
      /** From the Debugger interface via JVMDebugger */
      public synchronized void attach(String execName, String coreName) {
          checkAttached();
<span class="line-modified">!         threadList = new ArrayList&lt;&gt;();</span>
<span class="line-modified">!         loadObjectList = new ArrayList&lt;&gt;();</span>
          attach0(execName, coreName);
          attached = true;
          isCore = true;
          findABIVersion();
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 591,17 ***</span>
        if (value == 0) return null;
        return new LinuxAddress(this, value);
      }
  
      /** From the LinuxCDebugger interface */
<span class="line-modified">!     public List/*&lt;ThreadProxy&gt;*/ getThreadList() {</span>
        requireAttach();
        return threadList;
      }
  
      /** From the LinuxCDebugger interface */
<span class="line-modified">!     public List/*&lt;LoadObject&gt;*/ getLoadObjectList() {</span>
        requireAttach();
        return loadObjectList;
      }
  
      /** From the LinuxCDebugger interface */
<span class="line-new-header">--- 592,17 ---</span>
        if (value == 0) return null;
        return new LinuxAddress(this, value);
      }
  
      /** From the LinuxCDebugger interface */
<span class="line-modified">!     public List&lt;ThreadProxy&gt; getThreadList() {</span>
        requireAttach();
        return threadList;
      }
  
      /** From the LinuxCDebugger interface */
<span class="line-modified">!     public List&lt;LoadObject&gt; getLoadObjectList() {</span>
        requireAttach();
        return loadObjectList;
      }
  
      /** From the LinuxCDebugger interface */
</pre>
<center><a href="LinuxDebugger.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../proc/ProcCDebugger.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>