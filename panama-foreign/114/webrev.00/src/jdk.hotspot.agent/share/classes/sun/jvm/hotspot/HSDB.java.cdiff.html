<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/HSDB.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="CommandProcessor.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="HotSpotAgent.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/HSDB.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 45,10 ***</span>
<span class="line-new-header">--- 45,12 ---</span>
  import sun.jvm.hotspot.runtime.*;
  import sun.jvm.hotspot.ui.*;
  import sun.jvm.hotspot.ui.tree.*;
  import sun.jvm.hotspot.ui.classbrowser.*;
  import sun.jvm.hotspot.utilities.*;
<span class="line-added">+ import sun.jvm.hotspot.utilities.Observable;</span>
<span class="line-added">+ import sun.jvm.hotspot.utilities.Observer;</span>
  
  /** The top-level HotSpot Debugger. FIXME: make this an embeddable
      component! (Among other things, figure out what to do with the
      menu bar...) */
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 64,14 ***</span>
    private JVMDebugger jvmDebugger;
    private JDesktopPane desktop;
    private boolean      attached;
    private boolean      argError;
    private JFrame frame;
<span class="line-modified">!   /** List &lt;JMenuItem&gt; */</span>
<span class="line-modified">!   private java.util.List attachMenuItems;</span>
<span class="line-removed">-   /** List &lt;JMenuItem&gt; */</span>
<span class="line-removed">-   private java.util.List detachMenuItems;</span>
    private JMenu toolsMenu;
    private JMenuItem showDbgConsoleMenuItem;
    private JMenuItem computeRevPtrsMenuItem;
    private JInternalFrame attachWaitDialog;
    private JInternalFrame threadsFrame;
<span class="line-new-header">--- 66,12 ---</span>
    private JVMDebugger jvmDebugger;
    private JDesktopPane desktop;
    private boolean      attached;
    private boolean      argError;
    private JFrame frame;
<span class="line-modified">!   private java.util.List&lt;JMenuItem&gt; attachMenuItems;</span>
<span class="line-modified">!   private java.util.List&lt;JMenuItem&gt; detachMenuItems;</span>
    private JMenu toolsMenu;
    private JMenuItem showDbgConsoleMenuItem;
    private JMenuItem computeRevPtrsMenuItem;
    private JInternalFrame attachWaitDialog;
    private JInternalFrame threadsFrame;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 153,12 ***</span>
      frame.setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
      frame.addWindowListener(new CloseUI());
  
      agent = new HotSpotAgent();
      workerThread = new WorkerThread();
<span class="line-modified">!     attachMenuItems = new java.util.ArrayList();</span>
<span class="line-modified">!     detachMenuItems = new java.util.ArrayList();</span>
  
  
      JMenuBar menuBar = new JMenuBar();
  
      //
<span class="line-new-header">--- 153,12 ---</span>
      frame.setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
      frame.addWindowListener(new CloseUI());
  
      agent = new HotSpotAgent();
      workerThread = new WorkerThread();
<span class="line-modified">!     attachMenuItems = new java.util.ArrayList&lt;&gt;();</span>
<span class="line-modified">!     detachMenuItems = new java.util.ArrayList&lt;&gt;();</span>
  
  
      JMenuBar menuBar = new JMenuBar();
  
      //
</pre>
<hr />
<pre>
<span class="line-old-header">*** 873,11 ***</span>
            // by a signal. We do this by making two passes over the stack,
            // one which finds signal handler frames and puts the parent
            // frames in a table and one which finds Java frames and if they
            // are in the table indicates that they were interrupted by a signal.
  
<span class="line-modified">!           Map interruptedFrameMap = new HashMap();</span>
            {
              sun.jvm.hotspot.runtime.Frame tmpFrame = thread.getCurrentFrameGuess();
              RegisterMap tmpMap = thread.newRegisterMap(false);
              while ((tmpFrame != null) &amp;&amp; (!tmpFrame.isFirstFrame())) {
                if (tmpFrame.isSignalHandlerFrameDbg()) {
<span class="line-new-header">--- 873,11 ---</span>
            // by a signal. We do this by making two passes over the stack,
            // one which finds signal handler frames and puts the parent
            // frames in a table and one which finds Java frames and if they
            // are in the table indicates that they were interrupted by a signal.
  
<span class="line-modified">!           Map&lt;sun.jvm.hotspot.runtime.Frame, SignalInfo&gt; interruptedFrameMap = new HashMap&lt;&gt;();</span>
            {
              sun.jvm.hotspot.runtime.Frame tmpFrame = thread.getCurrentFrameGuess();
              RegisterMap tmpMap = thread.newRegisterMap(false);
              while ((tmpFrame != null) &amp;&amp; (!tmpFrame.isFirstFrame())) {
                if (tmpFrame.isSignalHandlerFrameDbg()) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1843,11 ***</span>
        curLineLength += tok.length();
      }
      return buf.toString();
    }
  
<span class="line-modified">!   private void setMenuItemsEnabled(java.util.List items, boolean enabled) {</span>
<span class="line-modified">!     for (Iterator iter = items.iterator(); iter.hasNext(); ) {</span>
<span class="line-modified">!       ((JMenuItem) iter.next()).setEnabled(enabled);</span>
      }
    }
  }
<span class="line-new-header">--- 1843,11 ---</span>
        curLineLength += tok.length();
      }
      return buf.toString();
    }
  
<span class="line-modified">!   private void setMenuItemsEnabled(java.util.List&lt;JMenuItem&gt; items, boolean enabled) {</span>
<span class="line-modified">!     for (Iterator&lt;JMenuItem&gt; iter = items.iterator(); iter.hasNext(); ) {</span>
<span class="line-modified">!       iter.next().setEnabled(enabled);</span>
      }
    }
  }
</pre>
<center><a href="CommandProcessor.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="HotSpotAgent.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>