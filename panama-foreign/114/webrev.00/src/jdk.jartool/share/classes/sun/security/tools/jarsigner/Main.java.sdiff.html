<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.jartool/share/classes/sun/security/tools/jarsigner/Main.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../jdk/security/jarsigner/JarSigner.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Resources.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jartool/share/classes/sun/security/tools/jarsigner/Main.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 427                 // Already processed
 428             } else if (collator.compare(flags, &quot;-keypass&quot;) ==0) {
 429                 if (++n == args.length) usageNoArg();
 430                 keypass = getPass(modifier, args[n]);
 431             } else if (collator.compare(flags, &quot;-sigfile&quot;) ==0) {
 432                 if (++n == args.length) usageNoArg();
 433                 sigfile = args[n];
 434             } else if (collator.compare(flags, &quot;-signedjar&quot;) ==0) {
 435                 if (++n == args.length) usageNoArg();
 436                 signedjar = args[n];
 437             } else if (collator.compare(flags, &quot;-tsa&quot;) ==0) {
 438                 if (++n == args.length) usageNoArg();
 439                 tsaUrl = args[n];
 440             } else if (collator.compare(flags, &quot;-tsacert&quot;) ==0) {
 441                 if (++n == args.length) usageNoArg();
 442                 tsaAlias = args[n];
 443             } else if (collator.compare(flags, &quot;-altsigner&quot;) ==0) {
 444                 if (++n == args.length) usageNoArg();
 445                 altSignerClass = args[n];
 446                 System.err.println(
<span class="line-modified"> 447                         rb.getString(&quot;This.option.is.deprecated&quot;) +</span>
 448                                 &quot;-altsigner&quot;);
 449             } else if (collator.compare(flags, &quot;-altsignerpath&quot;) ==0) {
 450                 if (++n == args.length) usageNoArg();
 451                 altSignerClasspath = args[n];
 452                 System.err.println(
<span class="line-modified"> 453                         rb.getString(&quot;This.option.is.deprecated&quot;) +</span>
 454                                 &quot;-altsignerpath&quot;);
 455             } else if (collator.compare(flags, &quot;-sectionsonly&quot;) ==0) {
 456                 signManifest = false;
 457             } else if (collator.compare(flags, &quot;-internalsf&quot;) ==0) {
 458                 externalSF = false;
 459             } else if (collator.compare(flags, &quot;-verify&quot;) ==0) {
 460                 verify = true;
 461             } else if (collator.compare(flags, &quot;-verbose&quot;) ==0) {
 462                 verbose = (modifier != null) ? modifier : &quot;all&quot;;
 463             } else if (collator.compare(flags, &quot;-sigalg&quot;) ==0) {
 464                 if (++n == args.length) usageNoArg();
 465                 sigalg = args[n];
 466             } else if (collator.compare(flags, &quot;-digestalg&quot;) ==0) {
 467                 if (++n == args.length) usageNoArg();
 468                 digestalg = args[n];
 469             } else if (collator.compare(flags, &quot;-certs&quot;) ==0) {
 470                 showcerts = true;
 471             } else if (collator.compare(flags, &quot;-strict&quot;) ==0) {
 472                 strict = true;
 473             } else if (collator.compare(flags, &quot;-?&quot;) == 0 ||
</pre>
<hr />
<pre>
 539         }
 540 
 541         if (protectedPath) {
 542             if (storepass != null || keypass != null) {
 543                 System.err.println(rb.getString
 544                         (&quot;If.protected.is.specified.then.storepass.and.keypass.must.not.be.specified&quot;));
 545                 usage();
 546             }
 547         }
 548         if (KeyStoreUtil.isWindowsKeyStore(storetype)) {
 549             if (storepass != null || keypass != null) {
 550                 System.err.println(rb.getString
 551                         (&quot;If.keystore.is.not.password.protected.then.storepass.and.keypass.must.not.be.specified&quot;));
 552                 usage();
 553             }
 554         }
 555         return args;
 556     }
 557 
 558     static char[] getPass(String modifier, String arg) {
<span class="line-modified"> 559         char[] output = KeyStoreUtil.getPassWithModifier(modifier, arg, rb);</span>

 560         if (output != null) return output;
 561         usage();
 562         return null;    // Useless, usage() already exit
 563     }
 564 
 565     static void usageNoArg() {
 566         System.out.println(rb.getString(&quot;Option.lacks.argument&quot;));
 567         usage();
 568     }
 569 
 570     static void usage() {
 571         System.out.println();
 572         System.out.println(rb.getString(&quot;Please.type.jarsigner.help.for.usage&quot;));
 573         System.exit(1);
 574     }
 575 
 576     static void fullusage() {
 577         System.out.println(rb.getString
 578                 (&quot;Usage.jarsigner.options.jar.file.alias&quot;));
 579         System.out.println(rb.getString
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 1997, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 427                 // Already processed
 428             } else if (collator.compare(flags, &quot;-keypass&quot;) ==0) {
 429                 if (++n == args.length) usageNoArg();
 430                 keypass = getPass(modifier, args[n]);
 431             } else if (collator.compare(flags, &quot;-sigfile&quot;) ==0) {
 432                 if (++n == args.length) usageNoArg();
 433                 sigfile = args[n];
 434             } else if (collator.compare(flags, &quot;-signedjar&quot;) ==0) {
 435                 if (++n == args.length) usageNoArg();
 436                 signedjar = args[n];
 437             } else if (collator.compare(flags, &quot;-tsa&quot;) ==0) {
 438                 if (++n == args.length) usageNoArg();
 439                 tsaUrl = args[n];
 440             } else if (collator.compare(flags, &quot;-tsacert&quot;) ==0) {
 441                 if (++n == args.length) usageNoArg();
 442                 tsaAlias = args[n];
 443             } else if (collator.compare(flags, &quot;-altsigner&quot;) ==0) {
 444                 if (++n == args.length) usageNoArg();
 445                 altSignerClass = args[n];
 446                 System.err.println(
<span class="line-modified"> 447                         rb.getString(&quot;This.option.is.forremoval&quot;) +</span>
 448                                 &quot;-altsigner&quot;);
 449             } else if (collator.compare(flags, &quot;-altsignerpath&quot;) ==0) {
 450                 if (++n == args.length) usageNoArg();
 451                 altSignerClasspath = args[n];
 452                 System.err.println(
<span class="line-modified"> 453                         rb.getString(&quot;This.option.is.forremoval&quot;) +</span>
 454                                 &quot;-altsignerpath&quot;);
 455             } else if (collator.compare(flags, &quot;-sectionsonly&quot;) ==0) {
 456                 signManifest = false;
 457             } else if (collator.compare(flags, &quot;-internalsf&quot;) ==0) {
 458                 externalSF = false;
 459             } else if (collator.compare(flags, &quot;-verify&quot;) ==0) {
 460                 verify = true;
 461             } else if (collator.compare(flags, &quot;-verbose&quot;) ==0) {
 462                 verbose = (modifier != null) ? modifier : &quot;all&quot;;
 463             } else if (collator.compare(flags, &quot;-sigalg&quot;) ==0) {
 464                 if (++n == args.length) usageNoArg();
 465                 sigalg = args[n];
 466             } else if (collator.compare(flags, &quot;-digestalg&quot;) ==0) {
 467                 if (++n == args.length) usageNoArg();
 468                 digestalg = args[n];
 469             } else if (collator.compare(flags, &quot;-certs&quot;) ==0) {
 470                 showcerts = true;
 471             } else if (collator.compare(flags, &quot;-strict&quot;) ==0) {
 472                 strict = true;
 473             } else if (collator.compare(flags, &quot;-?&quot;) == 0 ||
</pre>
<hr />
<pre>
 539         }
 540 
 541         if (protectedPath) {
 542             if (storepass != null || keypass != null) {
 543                 System.err.println(rb.getString
 544                         (&quot;If.protected.is.specified.then.storepass.and.keypass.must.not.be.specified&quot;));
 545                 usage();
 546             }
 547         }
 548         if (KeyStoreUtil.isWindowsKeyStore(storetype)) {
 549             if (storepass != null || keypass != null) {
 550                 System.err.println(rb.getString
 551                         (&quot;If.keystore.is.not.password.protected.then.storepass.and.keypass.must.not.be.specified&quot;));
 552                 usage();
 553             }
 554         }
 555         return args;
 556     }
 557 
 558     static char[] getPass(String modifier, String arg) {
<span class="line-modified"> 559         char[] output =</span>
<span class="line-added"> 560             KeyStoreUtil.getPassWithModifier(modifier, arg, rb, collator);</span>
 561         if (output != null) return output;
 562         usage();
 563         return null;    // Useless, usage() already exit
 564     }
 565 
 566     static void usageNoArg() {
 567         System.out.println(rb.getString(&quot;Option.lacks.argument&quot;));
 568         usage();
 569     }
 570 
 571     static void usage() {
 572         System.out.println();
 573         System.out.println(rb.getString(&quot;Please.type.jarsigner.help.for.usage&quot;));
 574         System.exit(1);
 575     }
 576 
 577     static void fullusage() {
 578         System.out.println(rb.getString
 579                 (&quot;Usage.jarsigner.options.jar.file.alias&quot;));
 580         System.out.println(rb.getString
</pre>
</td>
</tr>
</table>
<center><a href="../../../../jdk/security/jarsigner/JarSigner.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Resources.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>