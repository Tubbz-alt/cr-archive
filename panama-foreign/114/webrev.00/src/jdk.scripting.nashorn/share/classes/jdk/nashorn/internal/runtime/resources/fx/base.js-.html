<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/jdk.scripting.nashorn/share/classes/jdk/nashorn/internal/runtime/resources/fx/base.js</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2010, 2016, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 var JFX_CLASSES = {
 27     &quot;javafx.base&quot;: [],
 28     &quot;javafx.controls&quot;: [],
 29     &quot;javafx.deploy&quot;: [],
 30     &quot;javafx.fxml&quot;: [],
 31     &quot;javafx.graphics&quot;: [],
 32     &quot;javafx.media&quot;: [],
 33     &quot;javafx.swing&quot;: [],
 34     &quot;javafx.web&quot;: []
 35 };
 36 
 37 function LOAD_FX_CLASSES(global, module) {
 38     if (JFX_CLASSES[module]) {
 39         for each (var cls in JFX_CLASSES[module]) {
 40             // Ex. Stage = Java.type(&quot;javafx.stage.Stage&quot;);
 41             var name = cls.join(&quot;.&quot;);
 42             var type = Java.type(name);
 43             global[cls[cls.length - 1]] = type;
 44         }
 45 
 46         JFX_CLASSES[module] = undefined;
 47     }
 48 }
 49 
 50 (function() {
 51     var Files = Java.type(&quot;java.nio.file.Files&quot;);
 52     var FileSystems = Java.type(&quot;java.nio.file.FileSystems&quot;);
 53     var FileVisitor = Java.type(&quot;java.nio.file.FileVisitor&quot;);
 54     var FileVisitResult = Java.type(&quot;java.nio.file.FileVisitResult&quot;);
 55     var CONTINUE = FileVisitResult.CONTINUE;
 56     var SKIP_SUBTREE = FileVisitResult.SKIP_SUBTREE;
 57 
 58     var URI = Java.type(&quot;java.net.URI&quot;);
 59     var uri = new URI(&quot;jrt:/&quot;);
 60     var jrtfs = FileSystems.getFileSystem(uri);
 61     var rootDirectories = jrtfs.getRootDirectories();
 62 
 63     var JRTFSWalker = Java.extend(FileVisitor, {
 64         preVisitDirectory: function(path, attrs) {
 65             var name = path.toString();
 66 
 67             if (name.startsWith(&quot;/packages&quot;)) {
 68                  return SKIP_SUBTREE;
 69             }
 70 
 71             if (name.startsWith(&quot;/modules&quot;) &amp;&amp; !name.equals(&quot;/modules&quot;) &amp;&amp; !name.startsWith(&quot;/modules/javafx&quot;)) {
 72                 return SKIP_SUBTREE;
 73             }
 74 
 75             return CONTINUE;
 76         },
 77 
 78         postVisitDirectory: function(path, attrs) {
 79             return CONTINUE;
 80         },
 81 
 82         visitFile: function(file, attrs) {
 83             var name = file.toString();
 84 
 85             if (!name.endsWith(&quot;.class&quot;) || name.endsWith(&quot;module-info.class&quot;)) {
 86                 return CONTINUE;
 87             }
 88 
 89             var parts = name.split(&quot;/&quot;);
 90             parts = parts.slice(2);
 91             var module = parts.shift();
 92             var path = parts;
 93             var cls = path.pop();
 94             cls = cls.substring(0, cls.length() - 6);
 95             path.push(cls);
 96 
 97             if (path[0] !== &quot;javafx&quot; || /\$\d+$/.test(cls)) {
 98                 return CONTINUE;
 99             }
100 
101             JFX_CLASSES[module].push(path);
102 
103             return CONTINUE;
104         },
105 
106         visitFileFailed: function(file, ex) {
107             return CONTINUE;
108         }
109     });
110 
111     Files.walkFileTree(rootDirectories.toArray()[0], new JRTFSWalker());
112 })();
113 
114 LOAD_FX_CLASSES(this, &quot;javafx.base&quot;);
    </pre>
  </body>
</html>