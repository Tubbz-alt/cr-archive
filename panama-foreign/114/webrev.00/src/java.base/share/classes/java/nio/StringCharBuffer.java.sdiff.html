<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/nio/StringCharBuffer.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="Heap-X-Buffer.java.template.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="file/FileSystems.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/nio/StringCharBuffer.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 26 package java.nio;
 27 
 28 import java.util.Objects;
 29 
 30 // ## If the sequence is a string, use reflection to share its array
 31 
 32 class StringCharBuffer                                  // package-private
 33     extends CharBuffer
 34 {
 35     CharSequence str;
 36 
 37     StringCharBuffer(CharSequence s, int start, int end) { // package-private
 38         super(-1, start, end, s.length(), null);
 39         int n = s.length();
 40         Objects.checkFromToIndex(start, end, n);
 41         str = s;
 42         this.isReadOnly = true;
 43     }
 44 
 45     public CharBuffer slice() {



 46         return new StringCharBuffer(str,
 47                                     -1,
 48                                     0,
<span class="line-modified"> 49                                     this.remaining(),</span>
<span class="line-modified"> 50                                     this.remaining(),</span>
<span class="line-modified"> 51                                     offset + this.position());</span>
 52     }
 53 
 54     @Override
 55     public CharBuffer slice(int index, int length) {
 56         Objects.checkFromIndexSize(index, length, limit());
 57         return new StringCharBuffer(str,
 58                                     -1,
 59                                     0,
 60                                     length,
 61                                     length,
 62                                     offset + index);
 63     }
 64 
 65     private StringCharBuffer(CharSequence s,
 66                              int mark,
 67                              int pos,
 68                              int limit,
 69                              int cap,
 70                              int offset) {
 71         super(mark, pos, limit, cap, null, offset, null);
</pre>
</td>
<td>
<hr />
<pre>
 26 package java.nio;
 27 
 28 import java.util.Objects;
 29 
 30 // ## If the sequence is a string, use reflection to share its array
 31 
 32 class StringCharBuffer                                  // package-private
 33     extends CharBuffer
 34 {
 35     CharSequence str;
 36 
 37     StringCharBuffer(CharSequence s, int start, int end) { // package-private
 38         super(-1, start, end, s.length(), null);
 39         int n = s.length();
 40         Objects.checkFromToIndex(start, end, n);
 41         str = s;
 42         this.isReadOnly = true;
 43     }
 44 
 45     public CharBuffer slice() {
<span class="line-added"> 46         int pos = this.position();</span>
<span class="line-added"> 47         int lim = this.limit();</span>
<span class="line-added"> 48         int rem = (pos &lt;= lim ? lim - pos : 0);</span>
 49         return new StringCharBuffer(str,
 50                                     -1,
 51                                     0,
<span class="line-modified"> 52                                     rem,</span>
<span class="line-modified"> 53                                     rem,</span>
<span class="line-modified"> 54                                     offset + pos);</span>
 55     }
 56 
 57     @Override
 58     public CharBuffer slice(int index, int length) {
 59         Objects.checkFromIndexSize(index, length, limit());
 60         return new StringCharBuffer(str,
 61                                     -1,
 62                                     0,
 63                                     length,
 64                                     length,
 65                                     offset + index);
 66     }
 67 
 68     private StringCharBuffer(CharSequence s,
 69                              int mark,
 70                              int pos,
 71                              int limit,
 72                              int cap,
 73                              int offset) {
 74         super(mark, pos, limit, cap, null, offset, null);
</pre>
</td>
</tr>
</table>
<center><a href="Heap-X-Buffer.java.template.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="file/FileSystems.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>