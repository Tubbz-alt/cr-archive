<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/sun/security/ssl/SSLTransport.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="SSLSocketImpl.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="SessionTicketExtension.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/ssl/SSLTransport.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 171,16 ***</span>
                  context.dispatch(plainText);
              }
  
              if (plainText == null) {
                  plainText = Plaintext.PLAINTEXT_NULL;
<span class="line-modified">!             } else {</span>
<span class="line-modified">!                 // Fill the destination buffers.</span>
<span class="line-modified">!                 if ((dsts != null) &amp;&amp; (dstsLength &gt; 0) &amp;&amp;</span>
<span class="line-modified">!                         (plainText.contentType ==</span>
<span class="line-modified">!                             ContentType.APPLICATION_DATA.id)) {</span>
  
                      ByteBuffer fragment = plainText.fragment;
                      int remains = fragment.remaining();
  
                      // Should have enough room in the destination buffers.
                      int limit = dstsOffset + dstsLength;
<span class="line-new-header">--- 171,28 ---</span>
                  context.dispatch(plainText);
              }
  
              if (plainText == null) {
                  plainText = Plaintext.PLAINTEXT_NULL;
<span class="line-modified">!             } else if (plainText.contentType ==</span>
<span class="line-modified">!                             ContentType.APPLICATION_DATA.id) {</span>
<span class="line-modified">!                 // check handshake status</span>
<span class="line-modified">!                 //</span>
<span class="line-modified">!                 // Note that JDK does not support 0-RTT yet.  Otherwise, it is</span>
<span class="line-added">+                 // needed to check early_data.</span>
<span class="line-added">+                 if (!context.isNegotiated) {</span>
<span class="line-added">+                     if (SSLLogger.isOn &amp;&amp; SSLLogger.isOn(&quot;ssl,verbose&quot;)) {</span>
<span class="line-added">+                         SSLLogger.warning(&quot;unexpected application data &quot; +</span>
<span class="line-added">+                             &quot;before handshake completion&quot;);</span>
<span class="line-added">+                     }</span>
  
<span class="line-added">+                     throw context.fatal(Alert.UNEXPECTED_MESSAGE,</span>
<span class="line-added">+                         &quot;Receiving application data before handshake complete&quot;);</span>
<span class="line-added">+                 }</span>
<span class="line-added">+ </span>
<span class="line-added">+                 // Fill the destination buffers.</span>
<span class="line-added">+                 if ((dsts != null) &amp;&amp; (dstsLength &gt; 0)) {</span>
                      ByteBuffer fragment = plainText.fragment;
                      int remains = fragment.remaining();
  
                      // Should have enough room in the destination buffers.
                      int limit = dstsOffset + dstsLength;
</pre>
<center><a href="SSLSocketImpl.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="SessionTicketExtension.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>