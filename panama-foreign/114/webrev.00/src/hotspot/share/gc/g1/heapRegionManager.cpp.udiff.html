<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/gc/g1/heapRegionManager.cpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="g1RemSetSummary.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="heapRegionManager.hpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/g1/heapRegionManager.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -340,21 +340,23 @@</span>
  bool HeapRegionManager::is_on_preferred_index(uint region_index, uint preferred_node_index) {
    uint region_node_index = G1NUMA::numa()-&gt;preferred_node_index_for_index(region_index);
    return region_node_index == preferred_node_index;
  }
  
<span class="udiff-line-modified-removed">- void HeapRegionManager::guarantee_contiguous_range(uint start, uint num_regions) {</span>
<span class="udiff-line-modified-added">+ #ifdef ASSERT</span>
<span class="udiff-line-added">+ void HeapRegionManager::assert_contiguous_range(uint start, uint num_regions) {</span>
    // General sanity check, regions found should either be available and empty
    // or not available so that we can make them available and use them.
    for (uint i = start; i &lt; (start + num_regions); i++) {
      HeapRegion* hr = _regions.get_by_index(i);
<span class="udiff-line-modified-removed">-     guarantee(!is_available(i) || hr-&gt;is_free(),</span>
<span class="udiff-line-modified-removed">-               &quot;Found region sequence starting at &quot; UINT32_FORMAT &quot;, length &quot; UINT32_FORMAT</span>
<span class="udiff-line-modified-removed">-               &quot; that is not free at &quot; UINT32_FORMAT &quot;. Hr is &quot; PTR_FORMAT &quot;, type is %s&quot;,</span>
<span class="udiff-line-modified-removed">-               start, num_regions, i, p2i(hr), hr-&gt;get_type_str());</span>
<span class="udiff-line-modified-added">+     assert(!is_available(i) || hr-&gt;is_free(),</span>
<span class="udiff-line-modified-added">+            &quot;Found region sequence starting at &quot; UINT32_FORMAT &quot;, length &quot; UINT32_FORMAT</span>
<span class="udiff-line-modified-added">+            &quot; that is not free at &quot; UINT32_FORMAT &quot;. Hr is &quot; PTR_FORMAT &quot;, type is %s&quot;,</span>
<span class="udiff-line-modified-added">+            start, num_regions, i, p2i(hr), hr-&gt;get_type_str());</span>
    }
  }
<span class="udiff-line-added">+ #endif</span>
  
  uint HeapRegionManager::find_contiguous_in_range(uint start, uint end, uint num_regions) {
    assert(start &lt;= end, &quot;precondition&quot;);
    assert(num_regions &gt;= 1, &quot;precondition&quot;);
    uint candidate = start;       // First region in candidate sequence.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -370,11 +372,11 @@</span>
          unchecked = candidate + num_regions;
          candidate = i + 1;
          break;
        } else if (i == unchecked) {
          // All regions of candidate sequence have passed check.
<span class="udiff-line-modified-removed">-         guarantee_contiguous_range(candidate, num_regions);</span>
<span class="udiff-line-modified-added">+         assert_contiguous_range(candidate, num_regions);</span>
          return candidate;
        }
      }
    }
    return G1_NO_HRM_INDEX;
</pre>
<center><a href="g1RemSetSummary.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="heapRegionManager.hpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>