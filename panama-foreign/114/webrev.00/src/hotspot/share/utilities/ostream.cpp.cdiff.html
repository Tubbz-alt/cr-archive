<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/utilities/ostream.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="exceptions.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="ostream.hpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/utilities/ostream.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 531,12 ***</span>
  
  void fileStream::write(const char* s, size_t len) {
    if (_file != NULL)  {
      // Make an unused local variable to avoid warning from gcc compiler.
      size_t count = fwrite(s, 1, len, _file);
    }
<span class="line-removed">-   update_position(s, len);</span>
  }
  
  long fileStream::fileSize() {
    long size = -1;
    if (_file != NULL) {
<span class="line-new-header">--- 531,12 ---</span>
  
  void fileStream::write(const char* s, size_t len) {
    if (_file != NULL)  {
      // Make an unused local variable to avoid warning from gcc compiler.
      size_t count = fwrite(s, 1, len, _file);
<span class="line-added">+     update_position(s, len);</span>
    }
  }
  
  long fileStream::fileSize() {
    long size = -1;
    if (_file != NULL) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 549,13 ***</span>
    }
    return size;
  }
  
  char* fileStream::readln(char *data, int count ) {
<span class="line-modified">!   char * ret = ::fgets(data, count, _file);</span>
<span class="line-modified">!   //Get rid of annoying \n char</span>
<span class="line-modified">!   data[::strlen(data)-1] = &#39;\0&#39;;</span>
    return ret;
  }
  
  fileStream::~fileStream() {
    if (_file != NULL) {
<span class="line-new-header">--- 549,16 ---</span>
    }
    return size;
  }
  
  char* fileStream::readln(char *data, int count ) {
<span class="line-modified">!   char * ret = NULL;</span>
<span class="line-modified">!   if (_file != NULL) {</span>
<span class="line-modified">!     ret = ::fgets(data, count, _file);</span>
<span class="line-added">+     //Get rid of annoying \n char</span>
<span class="line-added">+     data[::strlen(data)-1] = &#39;\0&#39;;</span>
<span class="line-added">+   }</span>
    return ret;
  }
  
  fileStream::~fileStream() {
    if (_file != NULL) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 563,19 ***</span>
      _file      = NULL;
    }
  }
  
  void fileStream::flush() {
<span class="line-modified">!   fflush(_file);</span>
  }
  
  void fdStream::write(const char* s, size_t len) {
    if (_fd != -1) {
      // Make an unused local variable to avoid warning from gcc compiler.
      size_t count = ::write(_fd, s, (int)len);
    }
<span class="line-removed">-   update_position(s, len);</span>
  }
  
  defaultStream* defaultStream::instance = NULL;
  int defaultStream::_output_fd = 1;
  int defaultStream::_error_fd  = 2;
<span class="line-new-header">--- 566,21 ---</span>
      _file      = NULL;
    }
  }
  
  void fileStream::flush() {
<span class="line-modified">!   if (_file != NULL) {</span>
<span class="line-added">+     fflush(_file);</span>
<span class="line-added">+   }</span>
  }
  
  void fdStream::write(const char* s, size_t len) {
    if (_fd != -1) {
      // Make an unused local variable to avoid warning from gcc compiler.
      size_t count = ::write(_fd, s, (int)len);
<span class="line-added">+     update_position(s, len);</span>
    }
  }
  
  defaultStream* defaultStream::instance = NULL;
  int defaultStream::_output_fd = 1;
  int defaultStream::_error_fd  = 2;
</pre>
<center><a href="exceptions.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="ostream.hpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>