diff a/src/hotspot/share/utilities/ostream.hpp b/src/hotspot/share/utilities/ostream.hpp
--- a/src/hotspot/share/utilities/ostream.hpp
+++ b/src/hotspot/share/utilities/ostream.hpp
@@ -228,15 +228,15 @@
   fileStream(const char* file_name, const char* opentype);
   fileStream(FILE* file, bool need_close = false) { _file = file; _need_close = need_close; }
   ~fileStream();
   bool is_open() const { return _file != NULL; }
   virtual void write(const char* c, size_t len);
-  size_t read(void *data, size_t size, size_t count) { return ::fread(data, size, count, _file); }
+  size_t read(void *data, size_t size, size_t count) { return _file != NULL ? ::fread(data, size, count, _file) : 0; }
   char* readln(char *data, int count);
-  int eof() { return feof(_file); }
+  int eof() { return _file != NULL ? feof(_file) : -1; }
   long fileSize();
-  void rewind() { ::rewind(_file); }
+  void rewind() { if (_file != NULL) ::rewind(_file); }
   void flush();
 };
 
 CDS_ONLY(extern fileStream*   classlist_file;)
 
