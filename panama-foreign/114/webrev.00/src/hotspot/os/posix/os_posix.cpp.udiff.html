<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/os/posix/os_posix.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../../cpu/x86/methodHandles_x86.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../windows/os_windows.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/os/posix/os_posix.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -411,64 +411,73 @@</span>
    if (bootsec != -1) {
      os::print_dhm(st, &quot;OS uptime:&quot;, (long) (currsec-bootsec));
    }
  }
  
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">- void os::Posix::print_rlimit_info(outputStream* st) {</span>
<span class="udiff-line-removed">-   st-&gt;print(&quot;rlimit:&quot;);</span>
<span class="udiff-line-modified-added">+ static void print_rlimit(outputStream* st, const char* msg,</span>
<span class="udiff-line-modified-added">+                          int resource, bool output_k = false) {</span>
    struct rlimit rlim;
  
<span class="udiff-line-modified-removed">-   st-&gt;print(&quot; STACK &quot;);</span>
<span class="udiff-line-modified-removed">-   getrlimit(RLIMIT_STACK, &amp;rlim);</span>
<span class="udiff-line-modified-removed">-   if (rlim.rlim_cur == RLIM_INFINITY) st-&gt;print(&quot;infinity&quot;);</span>
<span class="udiff-line-modified-removed">-   else st-&gt;print(UINT64_FORMAT &quot;k&quot;, uint64_t(rlim.rlim_cur) / 1024);</span>
<span class="udiff-line-modified-added">+   st-&gt;print(&quot; %s &quot;, msg);</span>
<span class="udiff-line-modified-added">+   int res = getrlimit(resource, &amp;rlim);</span>
<span class="udiff-line-modified-added">+   if (res == -1) {</span>
<span class="udiff-line-modified-added">+     st-&gt;print(&quot;could not obtain value&quot;);</span>
<span class="udiff-line-added">+   } else {</span>
<span class="udiff-line-added">+     // soft limit</span>
<span class="udiff-line-added">+     if (rlim.rlim_cur == RLIM_INFINITY) { st-&gt;print(&quot;infinity&quot;); }</span>
<span class="udiff-line-added">+     else {</span>
<span class="udiff-line-added">+       if (output_k) { st-&gt;print(UINT64_FORMAT &quot;k&quot;, uint64_t(rlim.rlim_cur) / 1024); }</span>
<span class="udiff-line-added">+       else { st-&gt;print(UINT64_FORMAT, uint64_t(rlim.rlim_cur)); }</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+     // hard limit</span>
<span class="udiff-line-added">+     st-&gt;print(&quot;/&quot;);</span>
<span class="udiff-line-added">+     if (rlim.rlim_max == RLIM_INFINITY) { st-&gt;print(&quot;infinity&quot;); }</span>
<span class="udiff-line-added">+     else {</span>
<span class="udiff-line-added">+       if (output_k) { st-&gt;print(UINT64_FORMAT &quot;k&quot;, uint64_t(rlim.rlim_max) / 1024); }</span>
<span class="udiff-line-added">+       else { st-&gt;print(UINT64_FORMAT, uint64_t(rlim.rlim_max)); }</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+   }</span>
<span class="udiff-line-added">+ }</span>
  
<span class="udiff-line-modified-removed">-   st-&gt;print(&quot;, CORE &quot;);</span>
<span class="udiff-line-modified-removed">-   getrlimit(RLIMIT_CORE, &amp;rlim);</span>
<span class="udiff-line-modified-removed">-   if (rlim.rlim_cur == RLIM_INFINITY) st-&gt;print(&quot;infinity&quot;);</span>
<span class="udiff-line-modified-removed">-   else st-&gt;print(UINT64_FORMAT &quot;k&quot;, uint64_t(rlim.rlim_cur) / 1024);</span>
<span class="udiff-line-modified-added">+ void os::Posix::print_rlimit_info(outputStream* st) {</span>
<span class="udiff-line-modified-added">+   st-&gt;print(&quot;rlimit (soft/hard):&quot;);</span>
<span class="udiff-line-modified-added">+   print_rlimit(st, &quot;STACK&quot;, RLIMIT_STACK, true);</span>
<span class="udiff-line-modified-added">+   print_rlimit(st, &quot;, CORE&quot;, RLIMIT_CORE, true);</span>
  
<span class="udiff-line-removed">-   // Isn&#39;t there on solaris</span>
  #if defined(AIX)
    st-&gt;print(&quot;, NPROC &quot;);
    st-&gt;print(&quot;%d&quot;, sysconf(_SC_CHILD_MAX));
<span class="udiff-line-modified-removed">-   st-&gt;print(&quot;, THREADS &quot;);</span>
<span class="udiff-line-modified-removed">-   getrlimit(RLIMIT_THREADS, &amp;rlim);</span>
<span class="udiff-line-removed">-   if (rlim.rlim_cur == RLIM_INFINITY) st-&gt;print(&quot;infinity&quot;);</span>
<span class="udiff-line-removed">-   else st-&gt;print(UINT64_FORMAT, uint64_t(rlim.rlim_cur));</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+   print_rlimit(st, &quot;, THREADS&quot;, RLIMIT_THREADS);</span>
  #elif !defined(SOLARIS)
<span class="udiff-line-modified-removed">-   st-&gt;print(&quot;, NPROC &quot;);</span>
<span class="udiff-line-modified-removed">-   getrlimit(RLIMIT_NPROC, &amp;rlim);</span>
<span class="udiff-line-modified-removed">-   if (rlim.rlim_cur == RLIM_INFINITY) st-&gt;print(&quot;infinity&quot;);</span>
<span class="udiff-line-modified-removed">-   else st-&gt;print(UINT64_FORMAT, uint64_t(rlim.rlim_cur));</span>
<span class="udiff-line-modified-added">+   print_rlimit(st, &quot;, NPROC&quot;, RLIMIT_NPROC);</span>
<span class="udiff-line-modified-added">+ #endif</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+   print_rlimit(st, &quot;, NOFILE&quot;, RLIMIT_NOFILE);</span>
<span class="udiff-line-added">+   print_rlimit(st, &quot;, AS&quot;, RLIMIT_AS, true);</span>
<span class="udiff-line-added">+   print_rlimit(st, &quot;, CPU&quot;, RLIMIT_CPU);</span>
<span class="udiff-line-added">+   print_rlimit(st, &quot;, DATA&quot;, RLIMIT_DATA, true);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   // maximum size of files that the process may create</span>
<span class="udiff-line-added">+   print_rlimit(st, &quot;, FSIZE&quot;, RLIMIT_FSIZE, true);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ #if defined(LINUX) || defined(__APPLE__)</span>
<span class="udiff-line-added">+   // maximum number of bytes of memory that may be locked into RAM</span>
<span class="udiff-line-added">+   // (rounded down to the nearest  multiple of system pagesize)</span>
<span class="udiff-line-added">+   print_rlimit(st, &quot;, MEMLOCK&quot;, RLIMIT_MEMLOCK, true);</span>
<span class="udiff-line-added">+ #endif</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ #if defined(SOLARIS)</span>
<span class="udiff-line-added">+   // maximum size of mapped address space of a process in bytes;</span>
<span class="udiff-line-added">+   // if the limit is exceeded, mmap and brk fail</span>
<span class="udiff-line-added">+   print_rlimit(st, &quot;, VMEM&quot;, RLIMIT_VMEM, true);</span>
  #endif
  
<span class="udiff-line-modified-removed">-   st-&gt;print(&quot;, NOFILE &quot;);</span>
<span class="udiff-line-modified-removed">-   getrlimit(RLIMIT_NOFILE, &amp;rlim);</span>
<span class="udiff-line-modified-removed">-   if (rlim.rlim_cur == RLIM_INFINITY) st-&gt;print(&quot;infinity&quot;);</span>
<span class="udiff-line-modified-removed">-   else st-&gt;print(UINT64_FORMAT, uint64_t(rlim.rlim_cur));</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   st-&gt;print(&quot;, AS &quot;);</span>
<span class="udiff-line-removed">-   getrlimit(RLIMIT_AS, &amp;rlim);</span>
<span class="udiff-line-removed">-   if (rlim.rlim_cur == RLIM_INFINITY) st-&gt;print(&quot;infinity&quot;);</span>
<span class="udiff-line-removed">-   else st-&gt;print(UINT64_FORMAT &quot;k&quot;, uint64_t(rlim.rlim_cur) / 1024);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   st-&gt;print(&quot;, CPU &quot;);</span>
<span class="udiff-line-removed">-   getrlimit(RLIMIT_CPU, &amp;rlim);</span>
<span class="udiff-line-removed">-   if (rlim.rlim_cur == RLIM_INFINITY) st-&gt;print(&quot;infinity&quot;);</span>
<span class="udiff-line-removed">-   else st-&gt;print(UINT64_FORMAT, uint64_t(rlim.rlim_cur));</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   st-&gt;print(&quot;, DATA &quot;);</span>
<span class="udiff-line-removed">-   getrlimit(RLIMIT_DATA, &amp;rlim);</span>
<span class="udiff-line-removed">-   if (rlim.rlim_cur == RLIM_INFINITY) st-&gt;print(&quot;infinity&quot;);</span>
<span class="udiff-line-removed">-   else st-&gt;print(UINT64_FORMAT &quot;k&quot;, uint64_t(rlim.rlim_cur) / 1024);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   st-&gt;print(&quot;, FSIZE &quot;);</span>
<span class="udiff-line-removed">-   getrlimit(RLIMIT_FSIZE, &amp;rlim);</span>
<span class="udiff-line-removed">-   if (rlim.rlim_cur == RLIM_INFINITY) st-&gt;print(&quot;infinity&quot;);</span>
<span class="udiff-line-removed">-   else st-&gt;print(UINT64_FORMAT &quot;k&quot;, uint64_t(rlim.rlim_cur) / 1024);</span>
<span class="udiff-line-modified-added">+   // MacOS; The maximum size (in bytes) to which a process&#39;s resident set size may grow.</span>
<span class="udiff-line-modified-added">+ #if defined(__APPLE__)</span>
<span class="udiff-line-modified-added">+   print_rlimit(st, &quot;, RSS&quot;, RLIMIT_RSS, true);</span>
<span class="udiff-line-modified-added">+ #endif</span>
  
    st-&gt;cr();
  }
  
  void os::Posix::print_uname_info(outputStream* st) {
</pre>
<center><a href="../../cpu/x86/methodHandles_x86.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../windows/os_windows.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>