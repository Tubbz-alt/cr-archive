<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/unix/native/libawt_xawt/java2d/x11/XRBackendNative.c</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../awt/multiVis.c.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../xawt/XToolkit.c.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/unix/native/libawt_xawt/java2d/x11/XRBackendNative.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 769,11 ***</span>
      defaultImg = (XImage *) jlong_to_ptr(imgPtr);
  
      if (ea != 1.0f) {
          for (line=0; line &lt; height; line++) {
              for (pix=0; pix &lt; width; pix++) {
<span class="line-modified">!                 int index = maskScan*line + pix + maskOff;</span>
                  mask[index] = (((unsigned char) mask[index])*ea);
              }
          }
      }
  
<span class="line-new-header">--- 769,11 ---</span>
      defaultImg = (XImage *) jlong_to_ptr(imgPtr);
  
      if (ea != 1.0f) {
          for (line=0; line &lt; height; line++) {
              for (pix=0; pix &lt; width; pix++) {
<span class="line-modified">!                 size_t index = (size_t) maskScan * line + pix + maskOff;</span>
                  mask[index] = (((unsigned char) mask[index])*ea);
              }
          }
      }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 794,12 ***</span>
          defaultImg-&gt;data = mask;
      } else {
          if (imageFits) {
              for (line=0; line &lt; height; line++) {
                  for (pix=0; pix &lt; width; pix++) {
<span class="line-modified">!                     img-&gt;data[line*img-&gt;bytes_per_line + pix] =</span>
<span class="line-modified">!                         (unsigned char) (mask[maskScan*line + pix + maskOff]);</span>
                  }
              }
          } else {
              img = XCreateImage(awt_display, NULL, 8, ZPixmap,
                                 maskOff, mask, maskScan, height, 8, 0);
<span class="line-new-header">--- 794,12 ---</span>
          defaultImg-&gt;data = mask;
      } else {
          if (imageFits) {
              for (line=0; line &lt; height; line++) {
                  for (pix=0; pix &lt; width; pix++) {
<span class="line-modified">!                     img-&gt;data[(size_t) line * img-&gt;bytes_per_line + pix] =</span>
<span class="line-modified">!                         (unsigned char) (mask[(size_t) maskScan * line + pix + maskOff]);</span>
                  }
              }
          } else {
              img = XCreateImage(awt_display, NULL, 8, ZPixmap,
                                 maskOff, mask, maskScan, height, 8, 0);
</pre>
<center><a href="../../awt/multiVis.c.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../xawt/XToolkit.c.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>