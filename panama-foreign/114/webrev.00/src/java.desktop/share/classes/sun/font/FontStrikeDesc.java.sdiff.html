<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/classes/sun/font/FontStrikeDesc.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="FontScaler.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="FontUtilities.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/classes/sun/font/FontStrikeDesc.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 93         } catch (Exception e) {
 94             /* class cast or NP exceptions should not happen often, if ever,
 95              * and I am hoping that this is faster than an instanceof check.
 96              */
 97             return false;
 98         }
 99     }
100 
101     FontStrikeDesc() {
102         // used with init
103     }
104 
105 
106     /* This maps a public text AA hint value into one of the subset of values
107      * used to index strikes. For the purpose of the strike cache there are
108      * only 4 values : OFF, ON, LCD_HRGB, LCD_VRGB.
109      * Font and ptSize are needed to resolve the &#39;gasp&#39; table. The ptSize
110      * must therefore include device and font transforms.
111      */
112     public static int getAAHintIntVal(Object aa, Font2D font2D, int ptSize) {










113         if (aa == VALUE_TEXT_ANTIALIAS_OFF ||
114             aa == VALUE_TEXT_ANTIALIAS_DEFAULT) {
115             return INTVAL_TEXT_ANTIALIAS_OFF;
116         } else if (aa == VALUE_TEXT_ANTIALIAS_ON) {
117             return INTVAL_TEXT_ANTIALIAS_ON;
118         } else if (aa == VALUE_TEXT_ANTIALIAS_GASP) {
119             if (font2D.useAAForPtSize(ptSize)) {
120                 return INTVAL_TEXT_ANTIALIAS_ON;
121             } else {
122                 return INTVAL_TEXT_ANTIALIAS_OFF;
123             }
124         } else if (aa == VALUE_TEXT_ANTIALIAS_LCD_HRGB ||
125                    aa == VALUE_TEXT_ANTIALIAS_LCD_HBGR) {
126             return INTVAL_TEXT_ANTIALIAS_LCD_HRGB;
127         } else if (aa == VALUE_TEXT_ANTIALIAS_LCD_VRGB ||
128                    aa == VALUE_TEXT_ANTIALIAS_LCD_VBGR) {
129             return INTVAL_TEXT_ANTIALIAS_LCD_VRGB;
130         } else {
131             return INTVAL_TEXT_ANTIALIAS_OFF;
132         }
133     }
134 
135     /* This maps a public text AA hint value into one of the subset of values
136      * used to index strikes. For the purpose of the strike cache there are
137      * only 4 values : OFF, ON, LCD_HRGB, LCD_VRGB.
138      * Font and FontRenderContext are needed to resolve the &#39;gasp&#39; table.
139      * This is similar to the method above, but used by callers which have not
140      * already calculated the glyph device point size.
141      */
142     public static int getAAHintIntVal(Font2D font2D, Font font,
143                                       FontRenderContext frc) {
144         Object aa = frc.getAntiAliasingHint();










145         if (aa == VALUE_TEXT_ANTIALIAS_OFF ||
146             aa == VALUE_TEXT_ANTIALIAS_DEFAULT) {
147             return INTVAL_TEXT_ANTIALIAS_OFF;
148         } else if (aa == VALUE_TEXT_ANTIALIAS_ON) {
149             return INTVAL_TEXT_ANTIALIAS_ON;
150         } else if (aa == VALUE_TEXT_ANTIALIAS_GASP) {
151             /* FRC.isIdentity() would have been useful */
152             int ptSize;
153             AffineTransform tx = frc.getTransform();
154             if (tx.isIdentity() &amp;&amp; !font.isTransformed()) {
155                 ptSize = font.getSize();
156             } else {
157                 /* one or both transforms is not identity */
158                 float size = font.getSize2D();
159                 if (tx.isIdentity()) {
160                     tx = font.getTransform();
161                     tx.scale(size, size);
162                 } else {
163                     tx.scale(size, size);
164                     if (font.isTransformed()) {
</pre>
</td>
<td>
<hr />
<pre>
 93         } catch (Exception e) {
 94             /* class cast or NP exceptions should not happen often, if ever,
 95              * and I am hoping that this is faster than an instanceof check.
 96              */
 97             return false;
 98         }
 99     }
100 
101     FontStrikeDesc() {
102         // used with init
103     }
104 
105 
106     /* This maps a public text AA hint value into one of the subset of values
107      * used to index strikes. For the purpose of the strike cache there are
108      * only 4 values : OFF, ON, LCD_HRGB, LCD_VRGB.
109      * Font and ptSize are needed to resolve the &#39;gasp&#39; table. The ptSize
110      * must therefore include device and font transforms.
111      */
112     public static int getAAHintIntVal(Object aa, Font2D font2D, int ptSize) {
<span class="line-added">113 </span>
<span class="line-added">114         if (FontUtilities.isMacOSX14 &amp;&amp;</span>
<span class="line-added">115             (aa == VALUE_TEXT_ANTIALIAS_OFF ||</span>
<span class="line-added">116              aa == VALUE_TEXT_ANTIALIAS_DEFAULT ||</span>
<span class="line-added">117              aa == VALUE_TEXT_ANTIALIAS_ON ||</span>
<span class="line-added">118              aa == VALUE_TEXT_ANTIALIAS_GASP))</span>
<span class="line-added">119         {</span>
<span class="line-added">120              return INTVAL_TEXT_ANTIALIAS_ON;</span>
<span class="line-added">121         }</span>
<span class="line-added">122 </span>
123         if (aa == VALUE_TEXT_ANTIALIAS_OFF ||
124             aa == VALUE_TEXT_ANTIALIAS_DEFAULT) {
125             return INTVAL_TEXT_ANTIALIAS_OFF;
126         } else if (aa == VALUE_TEXT_ANTIALIAS_ON) {
127             return INTVAL_TEXT_ANTIALIAS_ON;
128         } else if (aa == VALUE_TEXT_ANTIALIAS_GASP) {
129             if (font2D.useAAForPtSize(ptSize)) {
130                 return INTVAL_TEXT_ANTIALIAS_ON;
131             } else {
132                 return INTVAL_TEXT_ANTIALIAS_OFF;
133             }
134         } else if (aa == VALUE_TEXT_ANTIALIAS_LCD_HRGB ||
135                    aa == VALUE_TEXT_ANTIALIAS_LCD_HBGR) {
136             return INTVAL_TEXT_ANTIALIAS_LCD_HRGB;
137         } else if (aa == VALUE_TEXT_ANTIALIAS_LCD_VRGB ||
138                    aa == VALUE_TEXT_ANTIALIAS_LCD_VBGR) {
139             return INTVAL_TEXT_ANTIALIAS_LCD_VRGB;
140         } else {
141             return INTVAL_TEXT_ANTIALIAS_OFF;
142         }
143     }
144 
145     /* This maps a public text AA hint value into one of the subset of values
146      * used to index strikes. For the purpose of the strike cache there are
147      * only 4 values : OFF, ON, LCD_HRGB, LCD_VRGB.
148      * Font and FontRenderContext are needed to resolve the &#39;gasp&#39; table.
149      * This is similar to the method above, but used by callers which have not
150      * already calculated the glyph device point size.
151      */
152     public static int getAAHintIntVal(Font2D font2D, Font font,
153                                       FontRenderContext frc) {
154         Object aa = frc.getAntiAliasingHint();
<span class="line-added">155 </span>
<span class="line-added">156         if (FontUtilities.isMacOSX14 &amp;&amp;</span>
<span class="line-added">157             (aa == VALUE_TEXT_ANTIALIAS_OFF ||</span>
<span class="line-added">158              aa == VALUE_TEXT_ANTIALIAS_DEFAULT ||</span>
<span class="line-added">159              aa == VALUE_TEXT_ANTIALIAS_ON ||</span>
<span class="line-added">160              aa == VALUE_TEXT_ANTIALIAS_GASP))</span>
<span class="line-added">161         {</span>
<span class="line-added">162              return INTVAL_TEXT_ANTIALIAS_ON;</span>
<span class="line-added">163         }</span>
<span class="line-added">164 </span>
165         if (aa == VALUE_TEXT_ANTIALIAS_OFF ||
166             aa == VALUE_TEXT_ANTIALIAS_DEFAULT) {
167             return INTVAL_TEXT_ANTIALIAS_OFF;
168         } else if (aa == VALUE_TEXT_ANTIALIAS_ON) {
169             return INTVAL_TEXT_ANTIALIAS_ON;
170         } else if (aa == VALUE_TEXT_ANTIALIAS_GASP) {
171             /* FRC.isIdentity() would have been useful */
172             int ptSize;
173             AffineTransform tx = frc.getTransform();
174             if (tx.isIdentity() &amp;&amp; !font.isTransformed()) {
175                 ptSize = font.getSize();
176             } else {
177                 /* one or both transforms is not identity */
178                 float size = font.getSize2D();
179                 if (tx.isIdentity()) {
180                     tx = font.getTransform();
181                     tx.scale(size, size);
182                 } else {
183                     tx.scale(size, size);
184                     if (font.isTransformed()) {
</pre>
</td>
</tr>
</table>
<center><a href="FontScaler.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="FontUtilities.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>