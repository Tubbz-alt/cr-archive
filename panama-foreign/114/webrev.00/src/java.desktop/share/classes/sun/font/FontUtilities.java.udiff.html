<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.desktop/share/classes/sun/font/FontUtilities.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="FontStrikeDesc.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="FreetypeFontScaler.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/classes/sun/font/FontUtilities.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -47,10 +47,11 @@</span>
      public static boolean isSolaris;
  
      public static boolean isLinux;
  
      public static boolean isMacOSX;
<span class="udiff-line-added">+     public static boolean isMacOSX14;</span>
  
      public static boolean useJDKScaler;
  
      public static boolean isWindows;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -69,11 +70,29 @@</span>
                  isSolaris = osName.startsWith(&quot;SunOS&quot;);
  
                  isLinux = osName.startsWith(&quot;Linux&quot;);
  
                  isMacOSX = osName.contains(&quot;OS X&quot;); // TODO: MacOSX
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-added">+                 if (isMacOSX) {</span>
<span class="udiff-line-added">+                     // os.version has values like 10.13.6, 10.14.6</span>
<span class="udiff-line-added">+                     // If it is not positively recognised as 10.13 or less,</span>
<span class="udiff-line-added">+                     // assume it means 10.14 or some later version.</span>
<span class="udiff-line-added">+                     isMacOSX14 = true;</span>
<span class="udiff-line-added">+                     String version = System.getProperty(&quot;os.version&quot;, &quot;&quot;);</span>
<span class="udiff-line-added">+                     if (version.startsWith(&quot;10.&quot;)) {</span>
<span class="udiff-line-added">+                         version = version.substring(3);</span>
<span class="udiff-line-added">+                         int periodIndex = version.indexOf(&#39;.&#39;);</span>
<span class="udiff-line-added">+                         if (periodIndex != -1) {</span>
<span class="udiff-line-added">+                             version = version.substring(0, periodIndex);</span>
<span class="udiff-line-added">+                         }</span>
<span class="udiff-line-added">+                         try {</span>
<span class="udiff-line-added">+                             int v = Integer.parseInt(version);</span>
<span class="udiff-line-added">+                             isMacOSX14 = (v &gt;= 14);</span>
<span class="udiff-line-added">+                         } catch (NumberFormatException e) {</span>
<span class="udiff-line-added">+                         }</span>
<span class="udiff-line-added">+                      }</span>
<span class="udiff-line-added">+                  }</span>
                  /* If set to &quot;jdk&quot;, use the JDK&#39;s scaler rather than
                   * the platform one. This may be a no-op on platforms where
                   * JDK has been configured so that it always relies on the
                   * platform scaler. The principal case where it has an
                   * effect is that on Windows, 2D will never use GDI.
</pre>
<center><a href="FontStrikeDesc.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="FreetypeFontScaler.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>