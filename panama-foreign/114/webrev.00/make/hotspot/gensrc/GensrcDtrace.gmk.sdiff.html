<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/hotspot/gensrc/GensrcDtrace.gmk</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
<body>
<center><a href="GensrcAdlc.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="../lib/CompileDtraceLibraries.gmk.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/hotspot/gensrc/GensrcDtrace.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 63     # Include support files that will setup JVM compiler flags.
 64     include lib/JvmFeatures.gmk
 65     include lib/JvmFlags.gmk
 66 
 67     # We cannot compile until the JVMTI and JFR gensrc has finished.
 68     # JFR_FILES is defined in GensrcJfr.gmk.
 69     JVMTI_H := $(JVM_VARIANT_OUTPUTDIR)/gensrc/jvmtifiles/jvmti.h
 70 
 71     $(eval $(call SetupNativeCompilation, BUILD_DTRACE_GEN_OFFSETS, \
 72         NAME := dtraceGenOffsets, \
 73         TYPE := EXECUTABLE, \
 74         SRC := $(TOPDIR)/make/hotspot/src/native/dtrace, \
 75         TOOLCHAIN := $(TOOLCHAIN_BUILD), \
 76         LDFLAGS := -m64, \
 77         CFLAGS := -m64 $(JVM_CFLAGS), \
 78         DISABLED_WARNINGS_solstudio := hidef w_novirtualdescr unknownpragma \
 79             doubunder nokeyworddefine wunreachable, \
 80         EXTRA_DEPS := $(JVMTI_H) $(JFR_FILES), \
 81         OBJECT_DIR := $(JVM_VARIANT_OUTPUTDIR)/tools/dtrace-gen-offsets/objs, \
 82         OUTPUT_DIR := $(JVM_VARIANT_OUTPUTDIR)/tools/dtrace-gen-offsets, \
<span class="line-removed"> 83         DEFINE_THIS_FILE := false, \</span>
 84     ))
 85 
 86     DTRACE_GEN_OFFSETS_TOOL := $(BUILD_DTRACE_GEN_OFFSETS_TARGET)
 87 
 88     # Argument 1: Output filename
 89     # Argument 2: dtrace-gen-offset tool command line option
 90     define SetupDtraceOffsetsGeneration
 91       $$(eval $$(call SetupExecute, dtrace_offset_$$(strip $2), \
 92           INFO := Generating dtrace $2 file, \
 93           DEPS := $$(BUILD_DTRACE_GEN_OFFSETS), \
 94           OUTPUT_FILE := $1, \
 95           COMMAND := ( $$(DTRACE_GEN_OFFSETS_TOOL) -$$(strip $2) &gt; $1 ), \
 96       ))
 97 
 98       TARGETS += $$(dtrace_offset_$$(strip $2)_TARGET)
 99     endef
100 
101     JVM_OFFSETS_H := $(DTRACE_GENSRC_DIR)/JvmOffsets.h
102     JVM_OFFSETS_CPP := $(DTRACE_GENSRC_DIR)/JvmOffsets.cpp
103     JVM_OFFSETS_INDEX_H := $(DTRACE_GENSRC_DIR)/JvmOffsetsIndex.h
</pre>
</td>
<td>
<hr />
<pre>
 63     # Include support files that will setup JVM compiler flags.
 64     include lib/JvmFeatures.gmk
 65     include lib/JvmFlags.gmk
 66 
 67     # We cannot compile until the JVMTI and JFR gensrc has finished.
 68     # JFR_FILES is defined in GensrcJfr.gmk.
 69     JVMTI_H := $(JVM_VARIANT_OUTPUTDIR)/gensrc/jvmtifiles/jvmti.h
 70 
 71     $(eval $(call SetupNativeCompilation, BUILD_DTRACE_GEN_OFFSETS, \
 72         NAME := dtraceGenOffsets, \
 73         TYPE := EXECUTABLE, \
 74         SRC := $(TOPDIR)/make/hotspot/src/native/dtrace, \
 75         TOOLCHAIN := $(TOOLCHAIN_BUILD), \
 76         LDFLAGS := -m64, \
 77         CFLAGS := -m64 $(JVM_CFLAGS), \
 78         DISABLED_WARNINGS_solstudio := hidef w_novirtualdescr unknownpragma \
 79             doubunder nokeyworddefine wunreachable, \
 80         EXTRA_DEPS := $(JVMTI_H) $(JFR_FILES), \
 81         OBJECT_DIR := $(JVM_VARIANT_OUTPUTDIR)/tools/dtrace-gen-offsets/objs, \
 82         OUTPUT_DIR := $(JVM_VARIANT_OUTPUTDIR)/tools/dtrace-gen-offsets, \

 83     ))
 84 
 85     DTRACE_GEN_OFFSETS_TOOL := $(BUILD_DTRACE_GEN_OFFSETS_TARGET)
 86 
 87     # Argument 1: Output filename
 88     # Argument 2: dtrace-gen-offset tool command line option
 89     define SetupDtraceOffsetsGeneration
 90       $$(eval $$(call SetupExecute, dtrace_offset_$$(strip $2), \
 91           INFO := Generating dtrace $2 file, \
 92           DEPS := $$(BUILD_DTRACE_GEN_OFFSETS), \
 93           OUTPUT_FILE := $1, \
 94           COMMAND := ( $$(DTRACE_GEN_OFFSETS_TOOL) -$$(strip $2) &gt; $1 ), \
 95       ))
 96 
 97       TARGETS += $$(dtrace_offset_$$(strip $2)_TARGET)
 98     endef
 99 
100     JVM_OFFSETS_H := $(DTRACE_GENSRC_DIR)/JvmOffsets.h
101     JVM_OFFSETS_CPP := $(DTRACE_GENSRC_DIR)/JvmOffsets.cpp
102     JVM_OFFSETS_INDEX_H := $(DTRACE_GENSRC_DIR)/JvmOffsetsIndex.h
</pre>
</td>
</tr>
</table>
<center><a href="GensrcAdlc.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="../lib/CompileDtraceLibraries.gmk.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>