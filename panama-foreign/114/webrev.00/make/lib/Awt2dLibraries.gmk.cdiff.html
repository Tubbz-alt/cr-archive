<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/lib/Awt2dLibraries.gmk</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="../launcher/LauncherCommon.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="CoreLibraries.gmk.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/lib/Awt2dLibraries.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 35,14 ***</span>
      libawt/java2d/pipe \
      #
  
  ################################################################################
  
<span class="line-removed">- # We must not include java.desktop/unix/native/libmlib_image, which is only</span>
<span class="line-removed">- # for usage by solaris-sparc in libmlib_image_v.</span>
<span class="line-removed">- BUILD_LIBMLIB_EXCLUDE_SRC_PATTERNS := /unix/</span>
<span class="line-removed">- </span>
  BUILD_LIBMLIB_CFLAGS := -D__USE_J2D_NAMES -D__MEDIALIB_OLD_NAMES -DMLIB_NO_LIBSUNMATH
  
  ifeq ($(call isTargetCpuBits, 64), true)
    BUILD_LIBMLIB_CFLAGS += -DMLIB_OS64BIT
  endif
<span class="line-new-header">--- 35,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 66,64 ***</span>
  
  TARGETS += $(BUILD_LIBMLIB_IMAGE)
  
  ################################################################################
  
<span class="line-removed">- ifeq ($(call And, $(call isTargetOs, solaris) $(call isTargetCpuArch, sparc)), true)</span>
<span class="line-removed">- </span>
<span class="line-removed">-   # libmlib_image_v is basically built from mlib_image sources, with some additions</span>
<span class="line-removed">-   # and some exclusions.</span>
<span class="line-removed">-   LIBMLIB_IMAGE_V_SRC := \</span>
<span class="line-removed">-      libmlib_image \</span>
<span class="line-removed">-      common/awt/medialib \</span>
<span class="line-removed">-      #</span>
<span class="line-removed">- </span>
<span class="line-removed">-   LIBMLIB_IMAGE_V_CFLAGS := -xarch=sparcvis -D__USE_J2D_NAMES -D__MEDIALIB_OLD_NAMES \</span>
<span class="line-removed">-       $(TOPDIR)/src/$(MODULE)/unix/native/libmlib_image/vis_$(OPENJDK_TARGET_CPU_BITS).il</span>
<span class="line-removed">- </span>
<span class="line-removed">-   ifeq ($(call isTargetCpuBits, 64), true)</span>
<span class="line-removed">-     LIBMLIB_IMAGE_V_CFLAGS += -DMLIB_OS64BIT</span>
<span class="line-removed">-   endif</span>
<span class="line-removed">- </span>
<span class="line-removed">-   BUILD_LIBMLIB_IMAGE_V_EXFILES := \</span>
<span class="line-removed">-       awt_ImagingLib.c \</span>
<span class="line-removed">-       mlib_c_ImageAffine_BC.c \</span>
<span class="line-removed">-       mlib_c_ImageAffine_BC_S16.c \</span>
<span class="line-removed">-       mlib_c_ImageAffine_BC_U16.c \</span>
<span class="line-removed">-       mlib_c_ImageAffine_BL.c \</span>
<span class="line-removed">-       mlib_c_ImageAffine_BL_S16.c \</span>
<span class="line-removed">-       mlib_c_ImageAffine_BL_U16.c \</span>
<span class="line-removed">-       mlib_c_ImageAffine_NN.c \</span>
<span class="line-removed">-       mlib_c_ImageConvClearEdge.c \</span>
<span class="line-removed">-       mlib_c_ImageConvCopyEdge.c \</span>
<span class="line-removed">-       mlib_c_ImageConv_f.c \</span>
<span class="line-removed">-       mlib_c_ImageConvVersion.c \</span>
<span class="line-removed">-       mlib_c_ImageCopy.c \</span>
<span class="line-removed">-       mlib_c_ImageLookUp.c \</span>
<span class="line-removed">-       mlib_c_ImageLookUp_f.c \</span>
<span class="line-removed">-       #</span>
<span class="line-removed">- </span>
<span class="line-removed">-   $(eval $(call SetupJdkLibrary, BUILD_LIBMLIB_IMAGE_V, \</span>
<span class="line-removed">-       NAME := mlib_image_v, \</span>
<span class="line-removed">-       SRC := $(LIBMLIB_IMAGE_V_SRC), \</span>
<span class="line-removed">-       EXCLUDE_FILES := $(BUILD_LIBMLIB_IMAGE_V_EXFILES), \</span>
<span class="line-removed">-       OPTIMIZATION := HIGHEST, \</span>
<span class="line-removed">-       CFLAGS := $(CFLAGS_JDKLIB) \</span>
<span class="line-removed">-           $(LIBMLIB_IMAGE_V_CFLAGS), \</span>
<span class="line-removed">-       LDFLAGS := $(LDFLAGS_JDKLIB) \</span>
<span class="line-removed">-           $(call SET_SHARED_LIBRARY_ORIGIN), \</span>
<span class="line-removed">-       LIBS := -ljava -ljvm $(LIBM) $(LIBDL), \</span>
<span class="line-removed">-   ))</span>
<span class="line-removed">- </span>
<span class="line-removed">-   $(BUILD_LIBMLIB_IMAGE_V): $(call FindLib, java.base, java)</span>
<span class="line-removed">- </span>
<span class="line-removed">-   TARGETS += $(BUILD_LIBMLIB_IMAGE_V)</span>
<span class="line-removed">- </span>
<span class="line-removed">- endif</span>
<span class="line-removed">- </span>
<span class="line-removed">- ################################################################################</span>
<span class="line-removed">- </span>
  LIBAWT_EXTRA_SRC := \
      common/awt/debug \
      $(TOPDIR)/src/$(MODULE)/$(OPENJDK_TARGET_OS_TYPE)/native/common/awt \
      #
  
<span class="line-new-header">--- 62,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 153,20 ***</span>
        java2d/d3d/D3DShaderGen.c \
        awt/image/cvutils/img_colors.c \
        #
  endif
  
<span class="line-removed">- ifeq ($(call And, $(call isTargetOs, solaris) $(call isTargetCpu, sparcv9)), true)</span>
<span class="line-removed">-   LIBAWT_EXFILES += java2d/loops/MapAccelFunc.c</span>
<span class="line-removed">- else</span>
<span class="line-removed">-   LIBAWT_EXCLUDES += \</span>
<span class="line-removed">-       $(TOPDIR)/src/$(MODULE)/unix/native/libawt/awt/medialib \</span>
<span class="line-removed">-       $(TOPDIR)/src/$(MODULE)/unix/native/libawt/java2d/loops \</span>
<span class="line-removed">-       $(TOPDIR)/src/$(MODULE)/unix/native/common/awt/medialib \</span>
<span class="line-removed">-       #</span>
<span class="line-removed">- endif</span>
<span class="line-removed">- </span>
  LIBAWT_EXTRA_HEADER_DIRS := \
      $(LIBAWT_DEFAULT_HEADER_DIRS) \
      $(call GetJavaHeaderDir, java.base) \
      libawt/awt/medialib \
      libawt/java2d/d3d \
<span class="line-new-header">--- 95,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 181,13 ***</span>
      #
  
  LIBAWT_CFLAGS += -D__MEDIALIB_OLD_NAMES -D__USE_J2D_NAMES $(X_CFLAGS)
  
  ifeq ($(call And, $(call isTargetOs, solaris) $(call isTargetCpu, sparcv9)), true)
<span class="line-removed">-   LIBAWT_CFLAGS += -xarch=sparcvis -DMLIB_ADD_SUFF \</span>
<span class="line-removed">-       $(TOPDIR)/src/$(MODULE)/unix/native/libmlib_image/vis_$(OPENJDK_TARGET_CPU_BITS).il</span>
<span class="line-removed">- </span>
    LIBAWT_ASFLAGS = -P -xarch=v9a
  endif
  
  ifeq ($(call isTargetOs, solaris), false)
    LIBAWT_CFLAGS += -DMLIB_NO_LIBSUNMATH
<span class="line-new-header">--- 113,10 ---</span>
</pre>
<center><a href="../launcher/LauncherCommon.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="CoreLibraries.gmk.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>