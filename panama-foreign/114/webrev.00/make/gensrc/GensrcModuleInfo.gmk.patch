diff a/make/gensrc/GensrcModuleInfo.gmk b/make/gensrc/GensrcModuleInfo.gmk
--- a/make/gensrc/GensrcModuleInfo.gmk
+++ b/make/gensrc/GensrcModuleInfo.gmk
@@ -79,11 +79,13 @@
       $(BUILD_TOOLS_JDK) \
       $(MOD_FILES) \
       $(call DependOnVariable, ALL_MODULES)
 		$(call MakeTargetDir)
 		$(RM) $@ $@.tmp
-		$(TOOL_GENMODULEINFOSOURCE) -o $@.tmp \
+		$(TOOL_GENMODULEINFOSOURCE) \
+		    $(if $(call equals, $(ALLOW_ABSOLUTE_PATHS_IN_OUTPUT), true), -d) \
+		    -o $@.tmp \
 		    --source-file $< \
 		    --modules $(call CommaList, $(ALL_MODULES)) \
 		    $(MOD_FILES)
 		$(MV) $@.tmp $@
 
