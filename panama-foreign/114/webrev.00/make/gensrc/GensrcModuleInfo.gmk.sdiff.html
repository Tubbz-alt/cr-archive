<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/gensrc/GensrcModuleInfo.gmk</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="GensrcCharacterData.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../hotspot/gensrc/GensrcAdlc.gmk.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/gensrc/GensrcModuleInfo.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 64 MOD_FILENAME := module-info.java.extra
 65 
 66 # Construct all possible src directories for the module.
 67 MODULE_CLASSES_DIRS := $(call FindModuleSrcDirs, $(MODULE))
 68 
 69 # Find all the .extra files in the src dirs.
 70 MOD_FILES := $(wildcard $(foreach f, $(MOD_FILENAME), $(addsuffix /$(f), \
 71     $(MODULE_CLASSES_DIRS))))
 72 
 73 ifneq ($(MOD_FILES), )
 74   # Only make this call if modification files are found for this module
 75   ALL_MODULES := $(call FindAllModules)
 76 
 77   $(SUPPORT_OUTPUTDIR)/gensrc/$(MODULE)/module-info.java: \
 78       $(firstword $(call FindAllModuleInfos, $(MODULE))) \
 79       $(BUILD_TOOLS_JDK) \
 80       $(MOD_FILES) \
 81       $(call DependOnVariable, ALL_MODULES)
 82 		$(call MakeTargetDir)
 83 		$(RM) $@ $@.tmp
<span class="line-modified"> 84 		$(TOOL_GENMODULEINFOSOURCE) -o $@.tmp \</span>


 85 		    --source-file $&lt; \
 86 		    --modules $(call CommaList, $(ALL_MODULES)) \
 87 		    $(MOD_FILES)
 88 		$(MV) $@.tmp $@
 89 
 90   TARGETS += $(SUPPORT_OUTPUTDIR)/gensrc/$(MODULE)/module-info.java
 91 
 92 else
 93   # If no modifications are found for this module, remove any module-info.java
 94   # created by a previous build since that is no longer valid.
 95   ifneq ($(wildcard $(SUPPORT_OUTPUTDIR)/gensrc/$(MODULE)/module-info.java), )
 96     $(shell $(RM) $(SUPPORT_OUTPUTDIR)/gensrc/$(MODULE)/module-info.java)
 97   endif
 98 endif
 99 
100 ################################################################################
101 
102 all: $(TARGETS)
</pre>
</td>
<td>
<hr />
<pre>
 64 MOD_FILENAME := module-info.java.extra
 65 
 66 # Construct all possible src directories for the module.
 67 MODULE_CLASSES_DIRS := $(call FindModuleSrcDirs, $(MODULE))
 68 
 69 # Find all the .extra files in the src dirs.
 70 MOD_FILES := $(wildcard $(foreach f, $(MOD_FILENAME), $(addsuffix /$(f), \
 71     $(MODULE_CLASSES_DIRS))))
 72 
 73 ifneq ($(MOD_FILES), )
 74   # Only make this call if modification files are found for this module
 75   ALL_MODULES := $(call FindAllModules)
 76 
 77   $(SUPPORT_OUTPUTDIR)/gensrc/$(MODULE)/module-info.java: \
 78       $(firstword $(call FindAllModuleInfos, $(MODULE))) \
 79       $(BUILD_TOOLS_JDK) \
 80       $(MOD_FILES) \
 81       $(call DependOnVariable, ALL_MODULES)
 82 		$(call MakeTargetDir)
 83 		$(RM) $@ $@.tmp
<span class="line-modified"> 84 		$(TOOL_GENMODULEINFOSOURCE) \</span>
<span class="line-added"> 85 		    $(if $(call equals, $(ALLOW_ABSOLUTE_PATHS_IN_OUTPUT), true), -d) \</span>
<span class="line-added"> 86 		    -o $@.tmp \</span>
 87 		    --source-file $&lt; \
 88 		    --modules $(call CommaList, $(ALL_MODULES)) \
 89 		    $(MOD_FILES)
 90 		$(MV) $@.tmp $@
 91 
 92   TARGETS += $(SUPPORT_OUTPUTDIR)/gensrc/$(MODULE)/module-info.java
 93 
 94 else
 95   # If no modifications are found for this module, remove any module-info.java
 96   # created by a previous build since that is no longer valid.
 97   ifneq ($(wildcard $(SUPPORT_OUTPUTDIR)/gensrc/$(MODULE)/module-info.java), )
 98     $(shell $(RM) $(SUPPORT_OUTPUTDIR)/gensrc/$(MODULE)/module-info.java)
 99   endif
100 endif
101 
102 ################################################################################
103 
104 all: $(TARGETS)
</pre>
</td>
</tr>
</table>
<center><a href="GensrcCharacterData.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../hotspot/gensrc/GensrcAdlc.gmk.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>