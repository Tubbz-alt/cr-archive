<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/markup/HtmlTree.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="HtmlTag.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="RawHtml.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/markup/HtmlTree.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
  23  * questions.
  24  */
  25 
  26 package jdk.javadoc.internal.doclets.formats.html.markup;
  27 
  28 import java.io.IOException;
  29 import java.io.Writer;
<span class="line-modified">  30 import java.nio.charset.Charset;</span>
  31 import java.util.ArrayList;
  32 import java.util.BitSet;
<span class="line-removed">  33 import java.util.Collections;</span>
  34 import java.util.Iterator;
  35 import java.util.LinkedHashMap;
  36 import java.util.List;
  37 import java.util.Map;

  38 
  39 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlAttr.Role;
  40 import jdk.javadoc.internal.doclets.toolkit.Content;
  41 import jdk.javadoc.internal.doclets.toolkit.util.DocletConstants;
  42 
  43 /**
<span class="line-modified">  44  * Class for generating HTML tree for javadoc output.</span>













  45  *
  46  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
  47  *  If you write code that depends on this, you do so at your own risk.
  48  *  This code and its internal interfaces are subject to change or
  49  *  deletion without notice.&lt;/b&gt;
  50  */
  51 public class HtmlTree extends Content {
  52 




  53     public final HtmlTag htmlTag;
<span class="line-removed">  54     private Map&lt;HtmlAttr,String&gt; attrs = Collections.emptyMap();</span>
<span class="line-removed">  55     private List&lt;Content&gt; content = Collections.emptyList();</span>
<span class="line-removed">  56     public static final Content EMPTY = new StringContent(&quot;&quot;);</span>
  57 
  58     /**
<span class="line-modified">  59      * Constructor to construct HtmlTree object.</span>
<span class="line-modified">  60      *</span>
<span class="line-removed">  61      * @param tag HTML tag for the HtmlTree object</span>
  62      */
<span class="line-modified">  63     public HtmlTree(HtmlTag tag) {</span>
<span class="line-removed">  64         htmlTag = nullCheck(tag);</span>
<span class="line-removed">  65     }</span>
  66 
  67     /**
<span class="line-modified">  68      * Constructor to construct HtmlTree object.</span>
<span class="line-modified">  69      *</span>
<span class="line-removed">  70      * @param tag HTML tag for the HtmlTree object</span>
<span class="line-removed">  71      * @param contents contents to be added to the tree</span>
  72      */
<span class="line-modified">  73     public HtmlTree(HtmlTag tag, Content... contents) {</span>
<span class="line-removed">  74         this(tag);</span>
<span class="line-removed">  75         for (Content c: contents)</span>
<span class="line-removed">  76             add(c);</span>
<span class="line-removed">  77     }</span>
  78 
  79     /**
<span class="line-modified">  80      * Constructor to construct HtmlTree object.</span>





  81      *
<span class="line-modified">  82      * @param tag HTML tag for the HtmlTree object</span>
<span class="line-removed">  83      * @param contents contents to be added to the tree</span>
  84      */
<span class="line-modified">  85     public HtmlTree(HtmlTag tag, List&lt;Content&gt; contents) {</span>
<span class="line-modified">  86         this(tag);</span>
<span class="line-removed">  87         for (Content c: contents)</span>
<span class="line-removed">  88             add(c);</span>
  89     }
  90 
  91     /**
<span class="line-modified">  92      * Adds an attribute for the HTML tag.</span>
  93      *
<span class="line-modified">  94      * @param attrName name of the attribute</span>
<span class="line-modified">  95      * @param attrValue value of the attribute</span>
  96      * @return this object
  97      */
  98     public HtmlTree put(HtmlAttr attrName, String attrValue) {
  99         if (attrs.isEmpty())
 100             attrs = new LinkedHashMap&lt;&gt;(3);
<span class="line-modified"> 101         attrs.put(nullCheck(attrName), Entity.escapeHtmlChars(attrValue));</span>
 102         return this;
 103     }
 104 
 105     /**
<span class="line-modified"> 106      * Sets the &quot;id&quot; attribute for this tag.</span>
 107      *
<span class="line-modified"> 108      * @param id the value for the id attribute</span>
 109      * @return this object
 110      */
 111     public HtmlTree setId(String id) {
<span class="line-modified"> 112         put(HtmlAttr.ID, id);</span>
<span class="line-removed"> 113         return this;</span>
 114     }
 115 
 116     /**
<span class="line-modified"> 117      * Sets the &quot;title&quot; attribute for this tag.</span>
<span class="line-modified"> 118      * Any HTML tags in the content will be removed.</span>
 119      *
 120      * @param body the content for the title attribute
 121      * @return this object
 122      */
 123     public HtmlTree setTitle(Content body) {
<span class="line-modified"> 124         put(HtmlAttr.TITLE, stripHtml(body));</span>
<span class="line-removed"> 125         return this;</span>
 126     }
 127 
 128     /**
<span class="line-modified"> 129      * Sets the &quot;role&quot; attribute for this tag.</span>
 130      *
 131      * @param role the role
 132      * @return this object
 133      */
 134     public HtmlTree setRole(Role role) {
<span class="line-modified"> 135         put(HtmlAttr.ROLE, role.toString());</span>
<span class="line-removed"> 136         return this;</span>
 137     }
 138 
 139     /**
<span class="line-modified"> 140      * Sets the style for the HTML tag.</span>
 141      *
<span class="line-modified"> 142      * @param style style to be added</span>
 143      * @return this object
 144      */
 145     public HtmlTree setStyle(HtmlStyle style) {
<span class="line-modified"> 146         put(HtmlAttr.CLASS, style.toString());</span>
<span class="line-removed"> 147         return this;</span>
 148     }
 149 
 150     /**
<span class="line-modified"> 151      * Adds content for the HTML tag.</span>
 152      *
<span class="line-modified"> 153      * @param tagContent tag content to be added</span>
 154      */
 155     @Override
<span class="line-modified"> 156     public void add(Content tagContent) {</span>
<span class="line-modified"> 157         if (tagContent instanceof ContentBuilder) {</span>
<span class="line-modified"> 158             for (Content c: ((ContentBuilder)tagContent).contents) {</span>
<span class="line-removed"> 159                 add(c);</span>
<span class="line-removed"> 160             }</span>
 161         }
<span class="line-modified"> 162         else if (tagContent == HtmlTree.EMPTY || tagContent.isValid()) {</span>
<span class="line-modified"> 163             if (content.isEmpty())</span>
<span class="line-modified"> 164                 content = new ArrayList&lt;&gt;();</span>
<span class="line-modified"> 165             content.add(tagContent);</span>

 166         }

 167     }
 168 
 169     /**
<span class="line-modified"> 170      * Adds String content to the HTML tree. If the last content member</span>
<span class="line-modified"> 171      * added is a StringContent, append the string to that StringContent or else</span>
<span class="line-modified"> 172      * create a new StringContent and add it to the HTML tree.</span>


 173      *
 174      * @param stringContent string content that needs to be added
 175      */
 176     @Override
<span class="line-modified"> 177     public void add(CharSequence stringContent) {</span>
 178         if (!content.isEmpty()) {
 179             Content lastContent = content.get(content.size() - 1);
 180             if (lastContent instanceof StringContent)
 181                 lastContent.add(stringContent);
<span class="line-modified"> 182             else</span>
 183                 add(new StringContent(stringContent));

 184         }
<span class="line-modified"> 185         else</span>
 186             add(new StringContent(stringContent));













 187     }
 188 
 189     @Override
 190     public int charCount() {
 191         int n = 0;
<span class="line-modified"> 192         for (Content c : content)</span>
 193             n += c.charCount();

 194         return n;
 195     }
 196 
 197     /*
 198      * The sets of ASCII URI characters to be left unencoded.
 199      * See &quot;Uniform Resource Identifier (URI): Generic Syntax&quot;
 200      * IETF RFC 3986. https://tools.ietf.org/html/rfc3986
 201      */
 202     public static final BitSet MAIN_CHARS;
 203     public static final BitSet QUERY_FRAGMENT_CHARS;
 204 
 205     static {
 206         BitSet alphaDigit = bitSet(bitSet(&#39;A&#39;, &#39;Z&#39;), bitSet(&#39;a&#39;, &#39;z&#39;), bitSet(&#39;0&#39;, &#39;9&#39;));
 207         BitSet unreserved = bitSet(alphaDigit, bitSet(&quot;-._~&quot;));
 208         BitSet genDelims = bitSet(&quot;:/?#[]@&quot;);
 209         BitSet subDelims = bitSet(&quot;!$&amp;&#39;()*+,;=&quot;);
 210         MAIN_CHARS = bitSet(unreserved, genDelims, subDelims);
 211         BitSet pchar = bitSet(unreserved, subDelims, bitSet(&quot;:@&quot;));
 212         QUERY_FRAGMENT_CHARS = bitSet(pchar, bitSet(&quot;/?&quot;));
 213     }
</pre>
<hr />
<pre>
 230         BitSet result = new BitSet();
 231         for (BitSet set : sets) {
 232             result.or(set);
 233         }
 234         return result;
 235     }
 236 
 237     /**
 238      * Apply percent-encoding to a URL.
 239      * This is similar to {@link java.net.URLEncoder} but
 240      * is less aggressive about encoding some characters,
 241      * like &#39;(&#39;, &#39;)&#39;, &#39;,&#39; which are used in the anchor
 242      * names for Java methods in HTML5 mode.
 243      *
 244      * @param url the url to be percent-encoded.
 245      * @return a percent-encoded string.
 246      */
 247     public static String encodeURL(String url) {
 248         BitSet nonEncodingChars = MAIN_CHARS;
 249         StringBuilder sb = new StringBuilder();
<span class="line-modified"> 250         for (byte c : url.getBytes(Charset.forName(&quot;UTF-8&quot;))) {</span>
 251             if (c == &#39;?&#39; || c == &#39;#&#39;) {
 252                 sb.append((char) c);
 253                 // switch to the more restrictive set inside
 254                 // the query and/or fragment
 255                 nonEncodingChars = QUERY_FRAGMENT_CHARS;
 256             } else if (nonEncodingChars.get(c &amp; 0xFF)) {
 257                 sb.append((char) c);
 258             } else {
 259                 sb.append(String.format(&quot;%%%02X&quot;, c &amp; 0xFF));
 260             }
 261         }
 262         return sb.toString();
 263     }
 264 
 265     /**
<span class="line-modified"> 266      * Generates an HTML anchor tag.</span>
 267      *
<span class="line-modified"> 268      * @param ref reference url for the anchor tag</span>
<span class="line-modified"> 269      * @param body content for the anchor tag</span>
<span class="line-modified"> 270      * @return an HtmlTree object</span>
 271      */
 272     public static HtmlTree A(String ref, Content body) {
<span class="line-modified"> 273         HtmlTree htmltree = new HtmlTree(HtmlTag.A, nullCheck(body));</span>
<span class="line-modified"> 274         htmltree.put(HtmlAttr.HREF, encodeURL(ref));</span>
<span class="line-modified"> 275         return htmltree;</span>
 276     }
 277 
 278     /**
<span class="line-modified"> 279      * Generates a CAPTION tag with some content.</span>
 280      *
<span class="line-modified"> 281      * @param body content for the tag</span>
<span class="line-modified"> 282      * @return an HtmlTree object for the CAPTION tag</span>
 283      */
 284     public static HtmlTree CAPTION(Content body) {
<span class="line-modified"> 285         HtmlTree htmltree = new HtmlTree(HtmlTag.CAPTION, nullCheck(body));</span>
<span class="line-modified"> 286         return htmltree;</span>
 287     }
 288 
 289     /**
<span class="line-modified"> 290      * Generates a CODE tag with some content.</span>
 291      *
<span class="line-modified"> 292      * @param body content for the tag</span>
<span class="line-modified"> 293      * @return an HtmlTree object for the CODE tag</span>
 294      */
 295     public static HtmlTree CODE(Content body) {
<span class="line-modified"> 296         HtmlTree htmltree = new HtmlTree(HtmlTag.CODE, nullCheck(body));</span>
<span class="line-modified"> 297         return htmltree;</span>
 298     }
 299 
 300     /**
<span class="line-modified"> 301      * Generates a DD tag with some content.</span>
 302      *
<span class="line-modified"> 303      * @param body content for the tag</span>
<span class="line-modified"> 304      * @return an HtmlTree object for the DD tag</span>
 305      */
 306     public static HtmlTree DD(Content body) {
<span class="line-modified"> 307         HtmlTree htmltree = new HtmlTree(HtmlTag.DD, nullCheck(body));</span>
<span class="line-modified"> 308         return htmltree;</span>
 309     }
 310 
 311     /**
<span class="line-modified"> 312      * Generates a DL tag with a given style.</span>
 313      *
 314      * @param style the style
<span class="line-modified"> 315      * @return an HtmlTree object for the DL tag</span>
 316      */
 317     public static HtmlTree DL(HtmlStyle style) {
<span class="line-modified"> 318         return new HtmlTree(HtmlTag.DL).setStyle(style);</span>

 319     }
 320 
 321     /**
<span class="line-modified"> 322      * Generates a DL tag with some content.</span>
 323      *
<span class="line-modified"> 324      * @param style the style for the tag</span>
<span class="line-modified"> 325      * @param body  content for the tag</span>
<span class="line-modified"> 326      * @return an HtmlTree object for the DL tag</span>
 327      */
 328     public static HtmlTree DL(HtmlStyle style, Content body) {
<span class="line-modified"> 329         return new HtmlTree(HtmlTag.DL, nullCheck(body)).setStyle(style);</span>


 330     }
 331 
 332     /**
<span class="line-modified"> 333      * Generates a DIV tag with the style class attributes. It also encloses</span>
<span class="line-removed"> 334      * a content.</span>
 335      *
<span class="line-modified"> 336      * @param styleClass stylesheet class for the tag</span>
<span class="line-modified"> 337      * @param body content for the tag</span>
<span class="line-removed"> 338      * @return an HtmlTree object for the DIV tag</span>
 339      */
<span class="line-modified"> 340     public static HtmlTree DIV(HtmlStyle styleClass, Content body) {</span>
<span class="line-modified"> 341         HtmlTree htmltree = new HtmlTree(HtmlTag.DIV, nullCheck(body));</span>
<span class="line-modified"> 342         if (styleClass != null)</span>
<span class="line-removed"> 343             htmltree.setStyle(styleClass);</span>
<span class="line-removed"> 344         return htmltree;</span>
 345     }
 346 
 347     /**
<span class="line-modified"> 348      * Generates a DIV tag with some content.</span>
 349      *
<span class="line-modified"> 350      * @param body content for the tag</span>
<span class="line-modified"> 351      * @return an HtmlTree object for the DIV tag</span>













 352      */
 353     public static HtmlTree DIV(Content body) {
<span class="line-modified"> 354         return DIV(null, body);</span>

 355     }
 356 
 357     /**
<span class="line-modified"> 358      * Generates a DT tag with some content.</span>
 359      *
<span class="line-modified"> 360      * @param body content for the tag</span>
<span class="line-modified"> 361      * @return an HtmlTree object for the DT tag</span>
 362      */
 363     public static HtmlTree DT(Content body) {
<span class="line-modified"> 364         HtmlTree htmltree = new HtmlTree(HtmlTag.DT, nullCheck(body));</span>
<span class="line-modified"> 365         return htmltree;</span>
 366     }
 367 
 368     /**
<span class="line-modified"> 369      * Generates a FOOTER tag with role attribute.</span>

 370      *
<span class="line-modified"> 371      * @return an HtmlTree object for the FOOTER tag</span>
 372      */
 373     public static HtmlTree FOOTER() {
<span class="line-modified"> 374         HtmlTree htmltree = new HtmlTree(HtmlTag.FOOTER);</span>
<span class="line-modified"> 375         htmltree.setRole(Role.CONTENTINFO);</span>
<span class="line-removed"> 376         return htmltree;</span>
 377     }
 378 
 379     /**
<span class="line-modified"> 380      * Generates a HEADER tag with role attribute.</span>

 381      *
<span class="line-modified"> 382      * @return an HtmlTree object for the HEADER tag</span>
 383      */
 384     public static HtmlTree HEADER() {
<span class="line-modified"> 385         HtmlTree htmltree = new HtmlTree(HtmlTag.HEADER);</span>
<span class="line-modified"> 386         htmltree.setRole(Role.BANNER);</span>
<span class="line-removed"> 387         return htmltree;</span>
 388     }
 389 
 390     /**
<span class="line-modified"> 391      * Generates a heading tag (h1 to h6) with the title and style class attributes. It also encloses</span>
<span class="line-removed"> 392      * a content.</span>
 393      *
<span class="line-modified"> 394      * @param headingTag the heading tag to be generated</span>
<span class="line-modified"> 395      * @param printTitle true if title for the tag needs to be printed else false</span>
<span class="line-modified"> 396      * @param styleClass stylesheet class for the tag</span>
<span class="line-removed"> 397      * @param body content for the tag</span>
<span class="line-removed"> 398      * @return an HtmlTree object for the tag</span>
 399      */
<span class="line-modified"> 400     public static HtmlTree HEADING(HtmlTag headingTag, boolean printTitle,</span>
<span class="line-modified"> 401             HtmlStyle styleClass, Content body) {</span>
<span class="line-modified"> 402         HtmlTree htmltree = new HtmlTree(headingTag, nullCheck(body));</span>
<span class="line-removed"> 403         if (printTitle)</span>
<span class="line-removed"> 404             htmltree.setTitle(body);</span>
<span class="line-removed"> 405         if (styleClass != null)</span>
<span class="line-removed"> 406             htmltree.setStyle(styleClass);</span>
<span class="line-removed"> 407         return htmltree;</span>
 408     }
 409 
 410     /**
<span class="line-modified"> 411      * Generates a heading tag (h1 to h6) with style class attribute. It also encloses</span>
<span class="line-removed"> 412      * a content.</span>
 413      *
<span class="line-modified"> 414      * @param headingTag the heading tag to be generated</span>
<span class="line-modified"> 415      * @param styleClass stylesheet class for the tag</span>
<span class="line-modified"> 416      * @param body content for the tag</span>
<span class="line-modified"> 417      * @return an HtmlTree object for the tag</span>
 418      */
<span class="line-modified"> 419     public static HtmlTree HEADING(HtmlTag headingTag, HtmlStyle styleClass, Content body) {</span>
<span class="line-modified"> 420         return HEADING(headingTag, false, styleClass, body);</span>


 421     }
 422 
 423     /**
<span class="line-modified"> 424      * Generates a heading tag (h1 to h6) with the title attribute. It also encloses</span>
<span class="line-modified"> 425      * a content.</span>
 426      *
<span class="line-modified"> 427      * @param headingTag the heading tag to be generated</span>
<span class="line-modified"> 428      * @param printTitle true if the title for the tag needs to be printed else false</span>
<span class="line-modified"> 429      * @param body content for the tag</span>
<span class="line-modified"> 430      * @return an HtmlTree object for the tag</span>
 431      */
<span class="line-modified"> 432     public static HtmlTree HEADING(HtmlTag headingTag, boolean printTitle, Content body) {</span>
<span class="line-modified"> 433         return HEADING(headingTag, printTitle, null, body);</span>




 434     }
 435 
 436     /**
<span class="line-modified"> 437      * Generates a heading tag (h1 to h6)  with some content.</span>

 438      *
<span class="line-modified"> 439      * @param headingTag the heading tag to be generated</span>
<span class="line-modified"> 440      * @param body content for the tag</span>
<span class="line-modified"> 441      * @return an HtmlTree object for the tag</span>
 442      */
<span class="line-modified"> 443     public static HtmlTree HEADING(HtmlTag headingTag, Content body) {</span>
<span class="line-modified"> 444         return HEADING(headingTag, false, null, body);</span>


 445     }
 446 
<span class="line-modified"> 447     /**</span>
<span class="line-modified"> 448      * Generates an HTML tag with lang attribute. It also adds head and body</span>
<span class="line-modified"> 449      * content to the HTML tree.</span>
<span class="line-modified"> 450      *</span>
<span class="line-modified"> 451      * @param lang language for the HTML document</span>
<span class="line-modified"> 452      * @param head head for the HTML tag</span>
<span class="line-modified"> 453      * @param body body for the HTML tag</span>
<span class="line-removed"> 454      * @return an HtmlTree object for the HTML tag</span>
<span class="line-removed"> 455      */</span>
<span class="line-removed"> 456     public static HtmlTree HTML(String lang, Content head, Content body) {</span>
<span class="line-removed"> 457         HtmlTree htmltree = new HtmlTree(HtmlTag.HTML, nullCheck(head), nullCheck(body));</span>
<span class="line-removed"> 458         htmltree.put(HtmlAttr.LANG, nullCheck(lang));</span>
<span class="line-removed"> 459         return htmltree;</span>
 460     }
 461 
 462     /**
<span class="line-modified"> 463      * Generates a IFRAME tag.</span>

 464      *
<span class="line-modified"> 465      * @param src the url of the document to be shown in the frame</span>
<span class="line-modified"> 466      * @param name specifies the name of the frame</span>
<span class="line-modified"> 467      * @param title the title for the frame</span>
<span class="line-modified"> 468      * @return an HtmlTree object for the IFRAME tag</span>
 469      */
<span class="line-modified"> 470     public static HtmlTree IFRAME(String src, String name, String title) {</span>
<span class="line-modified"> 471         HtmlTree htmltree = new HtmlTree(HtmlTag.IFRAME);</span>
<span class="line-modified"> 472         htmltree.put(HtmlAttr.SRC, nullCheck(src));</span>
<span class="line-modified"> 473         htmltree.put(HtmlAttr.NAME, nullCheck(name));</span>
<span class="line-modified"> 474         htmltree.put(HtmlAttr.TITLE, nullCheck(title));</span>
<span class="line-removed"> 475         return htmltree;</span>
 476     }
 477 
 478     /**
<span class="line-modified"> 479      * Generates a INPUT tag with some id.</span>

 480      *
<span class="line-modified"> 481      * @param type the type of input</span>
<span class="line-modified"> 482      * @param id id for the tag</span>
<span class="line-modified"> 483      * @param value value for the tag</span>
<span class="line-modified"> 484      * @return an HtmlTree object for the INPUT tag</span>
 485      */
 486     public static HtmlTree INPUT(String type, String id, String value) {
<span class="line-modified"> 487         HtmlTree htmltree = new HtmlTree(HtmlTag.INPUT);</span>
<span class="line-modified"> 488         htmltree.put(HtmlAttr.TYPE, nullCheck(type));</span>
<span class="line-modified"> 489         htmltree.put(HtmlAttr.ID, nullCheck(id));</span>
<span class="line-modified"> 490         htmltree.put(HtmlAttr.VALUE, nullCheck(value));</span>
<span class="line-modified"> 491         htmltree.put(HtmlAttr.DISABLED, &quot;disabled&quot;);</span>
<span class="line-removed"> 492         return htmltree;</span>
 493     }
 494 
 495     /**
<span class="line-modified"> 496      * Generates a LABEL tag with some content.</span>
 497      *
<span class="line-modified"> 498      * @param forLabel value of &quot;for&quot; attribute of the LABEL tag</span>
<span class="line-modified"> 499      * @param body content for the tag</span>
<span class="line-modified"> 500      * @return an HtmlTree object for the LABEL tag</span>
 501      */
 502     public static HtmlTree LABEL(String forLabel, Content body) {
<span class="line-modified"> 503         HtmlTree htmltree = new HtmlTree(HtmlTag.LABEL, nullCheck(body));</span>
<span class="line-modified"> 504         htmltree.put(HtmlAttr.FOR, nullCheck(forLabel));</span>
<span class="line-modified"> 505         return htmltree;</span>
 506     }
 507 
 508     /**
<span class="line-modified"> 509      * Generates a LI tag with some content.</span>
 510      *
<span class="line-modified"> 511      * @param body content for the tag</span>
<span class="line-modified"> 512      * @return an HtmlTree object for the LI tag</span>
 513      */
 514     public static HtmlTree LI(Content body) {
<span class="line-modified"> 515         return LI(null, body);</span>

 516     }
 517 
 518     /**
<span class="line-modified"> 519      * Generates a LI tag with some content.</span>
 520      *
<span class="line-modified"> 521      * @param styleClass style for the tag</span>
<span class="line-modified"> 522      * @param body content for the tag</span>
<span class="line-modified"> 523      * @return an HtmlTree object for the LI tag</span>
 524      */
<span class="line-modified"> 525     public static HtmlTree LI(HtmlStyle styleClass, Content body) {</span>
<span class="line-modified"> 526         HtmlTree htmltree = new HtmlTree(HtmlTag.LI, nullCheck(body));</span>
<span class="line-modified"> 527         if (styleClass != null)</span>
<span class="line-removed"> 528             htmltree.setStyle(styleClass);</span>
<span class="line-removed"> 529         return htmltree;</span>
 530     }
 531 
 532     /**
<span class="line-modified"> 533      * Generates a LINK tag with the rel, type, href and title attributes.</span>
 534      *
<span class="line-modified"> 535      * @param rel relevance of the link</span>
<span class="line-modified"> 536      * @param type type of link</span>
<span class="line-modified"> 537      * @param href the path for the link</span>
<span class="line-modified"> 538      * @param title title for the link</span>
<span class="line-modified"> 539      * @return an HtmlTree object for the LINK tag</span>
 540      */
 541     public static HtmlTree LINK(String rel, String type, String href, String title) {
<span class="line-modified"> 542         HtmlTree htmltree = new HtmlTree(HtmlTag.LINK);</span>
<span class="line-modified"> 543         htmltree.put(HtmlAttr.REL, nullCheck(rel));</span>
<span class="line-modified"> 544         htmltree.put(HtmlAttr.TYPE, nullCheck(type));</span>
<span class="line-modified"> 545         htmltree.put(HtmlAttr.HREF, nullCheck(href));</span>
<span class="line-modified"> 546         htmltree.put(HtmlAttr.TITLE, nullCheck(title));</span>
<span class="line-removed"> 547         return htmltree;</span>
 548     }
 549 
 550     /**
<span class="line-modified"> 551      * Generates a MAIN tag with role attribute.</span>

 552      *
<span class="line-modified"> 553      * @return an HtmlTree object for the MAIN tag</span>
 554      */
 555     public static HtmlTree MAIN() {
<span class="line-modified"> 556         HtmlTree htmltree = new HtmlTree(HtmlTag.MAIN);</span>
<span class="line-modified"> 557         htmltree.setRole(Role.MAIN);</span>
<span class="line-removed"> 558         return htmltree;</span>
 559     }
 560 
 561     /**
<span class="line-modified"> 562      * Generates a MAIN tag with role attribute and some content.</span>

 563      *
<span class="line-modified"> 564      * @param body content of the MAIN tag</span>
<span class="line-removed"> 565      * @return an HtmlTree object for the MAIN tag</span>
 566      */
 567     public static HtmlTree MAIN(Content body) {
<span class="line-modified"> 568         HtmlTree htmltree = new HtmlTree(HtmlTag.MAIN, nullCheck(body));</span>
<span class="line-modified"> 569         htmltree.setRole(Role.MAIN);</span>
<span class="line-modified"> 570         return htmltree;</span>
 571     }
 572 
 573     /**
<span class="line-modified"> 574      * Generates a META tag with the http-equiv, content and charset attributes.</span>
 575      *
<span class="line-modified"> 576      * @param httpEquiv http equiv attribute for the META tag</span>
<span class="line-modified"> 577      * @param content type of content</span>
<span class="line-modified"> 578      * @param charSet character set used</span>
<span class="line-modified"> 579      * @return an HtmlTree object for the META tag</span>
 580      */
<span class="line-modified"> 581     public static HtmlTree META(String httpEquiv, String content, String charSet) {</span>
<span class="line-modified"> 582         HtmlTree htmltree = new HtmlTree(HtmlTag.META);</span>
<span class="line-modified"> 583         String contentCharset = content + &quot;; charset=&quot; + charSet;</span>
<span class="line-modified"> 584         htmltree.put(HtmlAttr.HTTP_EQUIV, nullCheck(httpEquiv));</span>
<span class="line-removed"> 585         htmltree.put(HtmlAttr.CONTENT, contentCharset);</span>
<span class="line-removed"> 586         return htmltree;</span>
 587     }
 588 
 589     /**
<span class="line-modified"> 590      * Generates a META tag with the name and content attributes.</span>
 591      *
<span class="line-modified"> 592      * @param name name attribute</span>
<span class="line-modified"> 593      * @param content type of content</span>
<span class="line-modified"> 594      * @return an HtmlTree object for the META tag</span>
 595      */
 596     public static HtmlTree META(String name, String content) {
<span class="line-modified"> 597         HtmlTree htmltree = new HtmlTree(HtmlTag.META);</span>
<span class="line-modified"> 598         htmltree.put(HtmlAttr.NAME, nullCheck(name));</span>
<span class="line-modified"> 599         htmltree.put(HtmlAttr.CONTENT, nullCheck(content));</span>
<span class="line-removed"> 600         return htmltree;</span>
 601     }
 602 
 603     /**
<span class="line-modified"> 604      * Generates a NAV tag with the role attribute.</span>

 605      *
<span class="line-modified"> 606      * @return an HtmlTree object for the NAV tag</span>
 607      */
 608     public static HtmlTree NAV() {
<span class="line-modified"> 609         HtmlTree htmltree = new HtmlTree(HtmlTag.NAV);</span>
<span class="line-modified"> 610         htmltree.setRole(Role.NAVIGATION);</span>
<span class="line-removed"> 611         return htmltree;</span>
 612     }
 613 
 614     /**
<span class="line-modified"> 615      * Generates a NOSCRIPT tag with some content.</span>
 616      *
<span class="line-modified"> 617      * @param body content of the noscript tag</span>
<span class="line-modified"> 618      * @return an HtmlTree object for the NOSCRIPT tag</span>
 619      */
 620     public static HtmlTree NOSCRIPT(Content body) {
<span class="line-modified"> 621         HtmlTree htmltree = new HtmlTree(HtmlTag.NOSCRIPT, nullCheck(body));</span>
<span class="line-modified"> 622         return htmltree;</span>
 623     }
 624 
 625     /**
<span class="line-modified"> 626      * Generates a P tag with some content.</span>
 627      *
<span class="line-modified"> 628      * @param body content of the Paragraph tag</span>
<span class="line-modified"> 629      * @return an HtmlTree object for the P tag</span>
 630      */
 631     public static HtmlTree P(Content body) {
<span class="line-modified"> 632         return P(null, body);</span>

 633     }
 634 
 635     /**
<span class="line-modified"> 636      * Generates a P tag with some content.</span>
 637      *
<span class="line-modified"> 638      * @param styleClass style of the Paragraph tag</span>
<span class="line-modified"> 639      * @param body content of the Paragraph tag</span>
<span class="line-modified"> 640      * @return an HtmlTree object for the P tag</span>
 641      */
<span class="line-modified"> 642     public static HtmlTree P(HtmlStyle styleClass, Content body) {</span>
<span class="line-modified"> 643         HtmlTree htmltree = new HtmlTree(HtmlTag.P, nullCheck(body));</span>
<span class="line-modified"> 644         if (styleClass != null)</span>
<span class="line-removed"> 645             htmltree.setStyle(styleClass);</span>
<span class="line-removed"> 646         return htmltree;</span>
 647     }
 648 
 649     /**
<span class="line-modified"> 650      * Generates a SCRIPT tag with the type and src attributes.</span>

 651      *
<span class="line-modified"> 652      * @param src the path for the script</span>
<span class="line-modified"> 653      * @return an HtmlTree object for the SCRIPT tag</span>
 654      */
 655     public static HtmlTree SCRIPT(String src) {
<span class="line-modified"> 656         HtmlTree htmltree = new HtmlTree(HtmlTag.SCRIPT);</span>
<span class="line-modified"> 657         htmltree.put(HtmlAttr.TYPE, &quot;text/javascript&quot;);</span>
<span class="line-modified"> 658         htmltree.put(HtmlAttr.SRC, nullCheck(src));</span>
<span class="line-modified"> 659         return htmltree;</span>
 660     }
 661 
 662     /**
<span class="line-modified"> 663      * Generates a SECTION tag with style class attribute.</span>
 664      *
<span class="line-modified"> 665      * @param styleClass the style class for the tag</span>
<span class="line-modified"> 666      * @return an HtmlTree object for the SECTION tag</span>
 667      */
<span class="line-modified"> 668     public static HtmlTree SECTION(HtmlStyle styleClass) {</span>
<span class="line-modified"> 669         HtmlTree htmlTree = new HtmlTree(HtmlTag.SECTION);</span>
<span class="line-modified"> 670         htmlTree.setStyle(styleClass);</span>
<span class="line-removed"> 671         return htmlTree;</span>
 672     }
 673 
 674     /**
<span class="line-modified"> 675      * Generates a SECTION tag with style class attribute and some content.</span>
 676      *
<span class="line-modified"> 677      * @param styleClass the style class for the tag</span>
<span class="line-modified"> 678      * @param body content of the section tag</span>
<span class="line-modified"> 679      * @return an HtmlTree object for the SECTION tag</span>
 680      */
<span class="line-modified"> 681     public static HtmlTree SECTION(HtmlStyle styleClass, Content body) {</span>
<span class="line-modified"> 682         HtmlTree htmlTree = new HtmlTree(HtmlTag.SECTION, nullCheck(body));</span>
<span class="line-modified"> 683         if (styleClass != null) {</span>
<span class="line-modified"> 684             htmlTree.setStyle(styleClass);</span>
<span class="line-removed"> 685         }</span>
<span class="line-removed"> 686         return htmlTree;</span>
 687     }
 688 
 689     /**
<span class="line-modified"> 690      * Generates a SMALL tag with some content.</span>
 691      *
<span class="line-modified"> 692      * @param body content for the tag</span>
<span class="line-modified"> 693      * @return an HtmlTree object for the SMALL tag</span>
 694      */
 695     public static HtmlTree SMALL(Content body) {
<span class="line-modified"> 696         HtmlTree htmltree = new HtmlTree(HtmlTag.SMALL, nullCheck(body));</span>
<span class="line-modified"> 697         return htmltree;</span>
 698     }
 699 
 700     /**
<span class="line-modified"> 701      * Generates a SPAN tag with some content.</span>
 702      *
<span class="line-modified"> 703      * @param body content for the tag</span>
<span class="line-modified"> 704      * @return an HtmlTree object for the SPAN tag</span>
 705      */
 706     public static HtmlTree SPAN(Content body) {
<span class="line-modified"> 707         return SPAN(null, body);</span>

 708     }
 709 
 710     /**
<span class="line-modified"> 711      * Generates a SPAN tag with style class attribute and some content.</span>
 712      *
<span class="line-modified"> 713      * @param styleClass style class for the tag</span>
<span class="line-modified"> 714      * @param body content for the tag</span>
<span class="line-modified"> 715      * @return an HtmlTree object for the SPAN tag</span>
 716      */
 717     public static HtmlTree SPAN(HtmlStyle styleClass, Content body) {
<span class="line-modified"> 718         HtmlTree htmltree = new HtmlTree(HtmlTag.SPAN, nullCheck(body));</span>
<span class="line-modified"> 719         if (styleClass != null)</span>
<span class="line-removed"> 720             htmltree.setStyle(styleClass);</span>
<span class="line-removed"> 721         return htmltree;</span>
 722     }
 723 
 724     /**
<span class="line-modified"> 725      * Generates an SPAN tag with id attribute and a body.</span>
 726      *
<span class="line-modified"> 727      * @param id id for the tag</span>
<span class="line-modified"> 728      * @param body body for the tag</span>
<span class="line-modified"> 729      * @return an HtmlTree object for the SPAN tag</span>
 730      */
 731     public static HtmlTree SPAN_ID(String id, Content body) {
<span class="line-modified"> 732         HtmlTree htmltree = new HtmlTree(HtmlTag.SPAN, nullCheck(body));</span>
<span class="line-modified"> 733         htmltree.put(HtmlAttr.ID, nullCheck(id));</span>
<span class="line-modified"> 734         return htmltree;</span>
 735     }
 736 
 737     /**
<span class="line-modified"> 738      * Generates a SPAN tag with id and style class attributes. It also encloses</span>
<span class="line-removed"> 739      * a content.</span>
 740      *
<span class="line-modified"> 741      * @param id the id for the tag</span>
<span class="line-modified"> 742      * @param styleClass stylesheet class for the tag</span>
<span class="line-modified"> 743      * @param body content for the tag</span>
<span class="line-modified"> 744      * @return an HtmlTree object for the SPAN tag</span>
<span class="line-removed"> 745      */</span>
<span class="line-removed"> 746     public static HtmlTree SPAN(String id, HtmlStyle styleClass, Content body) {</span>
<span class="line-removed"> 747         HtmlTree htmltree = new HtmlTree(HtmlTag.SPAN, nullCheck(body));</span>
<span class="line-removed"> 748         htmltree.put(HtmlAttr.ID, nullCheck(id));</span>
<span class="line-removed"> 749         if (styleClass != null)</span>
<span class="line-removed"> 750             htmltree.setStyle(styleClass);</span>
<span class="line-removed"> 751         return htmltree;</span>
<span class="line-removed"> 752     }</span>
<span class="line-removed"> 753 </span>
<span class="line-removed"> 754     /**</span>
<span class="line-removed"> 755      * Generates a Table tag with style class and summary attributes and some content.</span>
<span class="line-removed"> 756      *</span>
<span class="line-removed"> 757      * @param styleClass style of the table</span>
<span class="line-removed"> 758      * @param summary summary for the table</span>
<span class="line-removed"> 759      * @param body content for the table</span>
<span class="line-removed"> 760      * @return an HtmlTree object for the TABLE tag</span>
<span class="line-removed"> 761      */</span>
<span class="line-removed"> 762     public static HtmlTree TABLE(HtmlStyle styleClass, String summary, Content body) {</span>
<span class="line-removed"> 763         HtmlTree htmltree = new HtmlTree(HtmlTag.TABLE, nullCheck(body));</span>
<span class="line-removed"> 764         if (styleClass != null)</span>
<span class="line-removed"> 765             htmltree.setStyle(styleClass);</span>
<span class="line-removed"> 766         htmltree.put(HtmlAttr.SUMMARY, nullCheck(summary));</span>
<span class="line-removed"> 767         return htmltree;</span>
<span class="line-removed"> 768     }</span>
<span class="line-removed"> 769 </span>
<span class="line-removed"> 770     /**</span>
<span class="line-removed"> 771      * Generates a Table tag with style class attribute and some content.</span>
<span class="line-removed"> 772      *</span>
<span class="line-removed"> 773      * @param styleClass style of the table</span>
<span class="line-removed"> 774      * @param body content for the table</span>
<span class="line-removed"> 775      * @return an HtmlTree object for the TABLE tag</span>
<span class="line-removed"> 776      */</span>
<span class="line-removed"> 777     public static HtmlTree TABLE(HtmlStyle styleClass, Content body) {</span>
<span class="line-removed"> 778         HtmlTree htmltree = new HtmlTree(HtmlTag.TABLE, nullCheck(body));</span>
<span class="line-removed"> 779         if (styleClass != null) {</span>
<span class="line-removed"> 780             htmltree.setStyle(styleClass);</span>
<span class="line-removed"> 781         }</span>
<span class="line-removed"> 782         return htmltree;</span>
<span class="line-removed"> 783     }</span>
<span class="line-removed"> 784 </span>
<span class="line-removed"> 785     /**</span>
<span class="line-removed"> 786      * Generates a TD tag with style class attribute and some content.</span>
<span class="line-removed"> 787      *</span>
<span class="line-removed"> 788      * @param styleClass style for the tag</span>
<span class="line-removed"> 789      * @param body content for the tag</span>
<span class="line-removed"> 790      * @return an HtmlTree object for the TD tag</span>
 791      */
<span class="line-modified"> 792     public static HtmlTree TD(HtmlStyle styleClass, Content body) {</span>
<span class="line-modified"> 793         HtmlTree htmltree = new HtmlTree(HtmlTag.TD, nullCheck(body));</span>
<span class="line-modified"> 794         if (styleClass != null)</span>
<span class="line-modified"> 795             htmltree.setStyle(styleClass);</span>
<span class="line-modified"> 796         return htmltree;</span>
 797     }
 798 
 799     /**
<span class="line-modified"> 800      * Generates a TD tag for an HTML table with some content.</span>
 801      *
<span class="line-modified"> 802      * @param body content for the tag</span>
<span class="line-modified"> 803      * @return an HtmlTree object for the TD tag</span>

 804      */
<span class="line-modified"> 805     public static HtmlTree TD(Content body) {</span>
<span class="line-modified"> 806         return TD(null, body);</span>


 807     }
 808 
 809     /**
<span class="line-modified"> 810      * Generates a TH tag with style class and scope attributes and some content.</span>
 811      *
<span class="line-modified"> 812      * @param styleClass style for the tag</span>
<span class="line-modified"> 813      * @param scope scope of the tag</span>
<span class="line-modified"> 814      * @param body content for the tag</span>
<span class="line-modified"> 815      * @return an HtmlTree object for the TH tag</span>
 816      */
<span class="line-modified"> 817     public static HtmlTree TH(HtmlStyle styleClass, String scope, Content body) {</span>
<span class="line-modified"> 818         HtmlTree htmltree = new HtmlTree(HtmlTag.TH, nullCheck(body));</span>
<span class="line-modified"> 819         if (styleClass != null)</span>
<span class="line-modified"> 820             htmltree.setStyle(styleClass);</span>
<span class="line-modified"> 821         htmltree.put(HtmlAttr.SCOPE, nullCheck(scope));</span>
<span class="line-removed"> 822         return htmltree;</span>
 823     }
 824 
 825     /**
<span class="line-modified"> 826      * Generates a TH tag with scope attribute and some content.</span>
 827      *
<span class="line-modified"> 828      * @param scope scope of the tag</span>
<span class="line-modified"> 829      * @param body content for the tag</span>
<span class="line-modified"> 830      * @return an HtmlTree object for the TH tag</span>
 831      */
 832     public static HtmlTree TH(String scope, Content body) {
<span class="line-modified"> 833         return TH(null, scope, body);</span>
<span class="line-modified"> 834     }</span>
<span class="line-modified"> 835 </span>
<span class="line-removed"> 836     /**</span>
<span class="line-removed"> 837      * Generates a TH tag with style class, scope attribute and some content.</span>
<span class="line-removed"> 838      *</span>
<span class="line-removed"> 839      * @param styleClass style for the tag</span>
<span class="line-removed"> 840      * @param body content for the tag</span>
<span class="line-removed"> 841      * @return an HtmlTree object for the TH tag</span>
<span class="line-removed"> 842      */</span>
<span class="line-removed"> 843     public static HtmlTree TH_ROW_SCOPE(HtmlStyle styleClass, Content body) {</span>
<span class="line-removed"> 844         return TH(styleClass, &quot;row&quot;, body);</span>
 845     }
 846 
 847     /**
<span class="line-modified"> 848      * Generates a TITLE tag with some content.</span>
 849      *
<span class="line-modified"> 850      * @param body content for the tag</span>
<span class="line-modified"> 851      * @return an HtmlTree object for the TITLE tag</span>
 852      */
 853     public static HtmlTree TITLE(String body) {
<span class="line-modified"> 854         HtmlTree htmltree = new HtmlTree(HtmlTag.TITLE, new StringContent(body));</span>
<span class="line-modified"> 855         return htmltree;</span>
 856     }
 857 
 858     /**
<span class="line-modified"> 859      * Generates a TR tag for an HTML table with some content.</span>
 860      *
<span class="line-modified"> 861      * @param body content for the tag</span>
<span class="line-modified"> 862      * @return an HtmlTree object for the TR tag</span>
<span class="line-modified"> 863      */</span>
<span class="line-modified"> 864     public static HtmlTree TR(Content body) {</span>
<span class="line-modified"> 865         HtmlTree htmltree = new HtmlTree(HtmlTag.TR, nullCheck(body));</span>
<span class="line-modified"> 866         return htmltree;</span>
<span class="line-modified"> 867     }</span>
<span class="line-modified"> 868 </span>
<span class="line-modified"> 869     /**</span>
<span class="line-removed"> 870      * Generates a UL tag with the style class attribute and some content.</span>
<span class="line-removed"> 871      *</span>
<span class="line-removed"> 872      * @param styleClass style for the tag</span>
<span class="line-removed"> 873      * @param first initial content to be added</span>
<span class="line-removed"> 874      * @param more a series of additional content nodes to be added</span>
<span class="line-removed"> 875      * @return an HtmlTree object for the UL tag</span>
<span class="line-removed"> 876      */</span>
<span class="line-removed"> 877     public static HtmlTree UL(HtmlStyle styleClass, Content first, Content... more) {</span>
<span class="line-removed"> 878         HtmlTree htmlTree = new HtmlTree(HtmlTag.UL);</span>
<span class="line-removed"> 879         htmlTree.add(nullCheck(first));</span>
 880         for (Content c : more) {
<span class="line-modified"> 881             htmlTree.add(nullCheck(c));</span>
 882         }
<span class="line-removed"> 883         htmlTree.setStyle(nullCheck(styleClass));</span>
 884         return htmlTree;
 885     }
 886 
 887     @Override
 888     public boolean isEmpty() {
 889         return (!hasContent() &amp;&amp; !hasAttrs());
 890     }
 891 
 892     /**
 893      * Returns true if the HTML tree has content.
 894      *
 895      * @return true if the HTML tree has content else return false
 896      */
 897     public boolean hasContent() {
 898         return (!content.isEmpty());
 899     }
 900 
 901     /**
 902      * Returns true if the HTML tree has attributes.
 903      *
</pre>
<hr />
<pre>
 910     /**
 911      * Returns true if the HTML tree has a specific attribute.
 912      *
 913      * @param attrName name of the attribute to check within the HTML tree
 914      * @return true if the HTML tree has the specified attribute else return false
 915      */
 916     public boolean hasAttr(HtmlAttr attrName) {
 917         return (attrs.containsKey(attrName));
 918     }
 919 
 920     /**
 921      * Returns true if the HTML tree is valid. This check is more specific to
 922      * standard doclet and not exactly similar to W3C specifications. But it
 923      * ensures HTML validation.
 924      *
 925      * @return true if the HTML tree is valid
 926      */
 927     @Override
 928     public boolean isValid() {
 929         switch (htmlTag) {
<span class="line-modified"> 930             case A :</span>
<span class="line-modified"> 931                 return (hasAttr(HtmlAttr.NAME) || hasAttr(HtmlAttr.ID) || (hasAttr(HtmlAttr.HREF) &amp;&amp; hasContent()));</span>
<span class="line-modified"> 932             case BR :</span>
 933                 return (!hasContent() &amp;&amp; (!hasAttrs() || hasAttr(HtmlAttr.CLEAR)));
<span class="line-modified"> 934             case IFRAME :</span>
<span class="line-removed"> 935                 return (hasAttr(HtmlAttr.SRC) &amp;&amp; !hasContent());</span>
<span class="line-removed"> 936             case HR :</span>
 937             case INPUT:
 938                 return (!hasContent());
<span class="line-modified"> 939             case IMG :</span>
 940                 return (hasAttr(HtmlAttr.SRC) &amp;&amp; hasAttr(HtmlAttr.ALT) &amp;&amp; !hasContent());
<span class="line-modified"> 941             case LINK :</span>
 942                 return (hasAttr(HtmlAttr.HREF) &amp;&amp; !hasContent());
<span class="line-modified"> 943             case META :</span>
 944                 return (hasAttr(HtmlAttr.CONTENT) &amp;&amp; !hasContent());
<span class="line-modified"> 945             case SCRIPT :</span>
 946                 return ((hasAttr(HtmlAttr.TYPE) &amp;&amp; hasAttr(HtmlAttr.SRC) &amp;&amp; !hasContent()) ||
 947                         (hasAttr(HtmlAttr.TYPE) &amp;&amp; hasContent()));
<span class="line-modified"> 948             case SPAN :</span>
 949                 return (hasAttr(HtmlAttr.ID) || hasContent());
 950             default :
 951                 return hasContent();
 952         }
 953     }
 954 
 955     /**
 956      * Returns true if the element is an inline element.
 957      *
 958      * @return true if the HTML tag is an inline element
 959      */
 960     public boolean isInline() {
 961         return (htmlTag.blockType == HtmlTag.BlockType.INLINE);
 962     }
 963 
 964     @Override
 965     public boolean write(Writer out, boolean atNewline) throws IOException {
 966         if (!isInline() &amp;&amp; !atNewline)
 967             out.write(DocletConstants.NL);
 968         String tagString = htmlTag.toString();
</pre>
<hr />
<pre>
 993         }
 994         if (!isInline()) {
 995             out.write(DocletConstants.NL);
 996             return true;
 997         } else {
 998             return false;
 999         }
1000     }
1001 
1002     /**
1003      * Given a Content node, strips all html characters and
1004      * return the result.
1005      *
1006      * @param body The content node to check.
1007      * @return the plain text from the content node
1008      *
1009      */
1010     private static String stripHtml(Content body) {
1011         String rawString = body.toString();
1012         // remove HTML tags
<span class="line-modified">1013         rawString = rawString.replaceAll(&quot;\\&lt;.*?&gt;&quot;, &quot; &quot;);</span>
1014         // consolidate multiple spaces between a word to a single space
1015         rawString = rawString.replaceAll(&quot;\\b\\s{2,}\\b&quot;, &quot; &quot;);
1016         // remove extra whitespaces
1017         return rawString.trim();
1018     }
1019 }
</pre>
</td>
<td>
<hr />
<pre>
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
  23  * questions.
  24  */
  25 
  26 package jdk.javadoc.internal.doclets.formats.html.markup;
  27 
  28 import java.io.IOException;
  29 import java.io.Writer;
<span class="line-modified">  30 import java.nio.charset.StandardCharsets;</span>
  31 import java.util.ArrayList;
  32 import java.util.BitSet;

  33 import java.util.Iterator;
  34 import java.util.LinkedHashMap;
  35 import java.util.List;
  36 import java.util.Map;
<span class="line-added">  37 import java.util.Objects;</span>
  38 
  39 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlAttr.Role;
  40 import jdk.javadoc.internal.doclets.toolkit.Content;
  41 import jdk.javadoc.internal.doclets.toolkit.util.DocletConstants;
  42 
  43 /**
<span class="line-modified">  44  * A tree node representing an HTML element, containing the name of the element,</span>
<span class="line-added">  45  * a collection of attributes, and content.</span>
<span class="line-added">  46  *</span>
<span class="line-added">  47  * Except where otherwise stated, all methods in this class will throw</span>
<span class="line-added">  48  * {@code NullPointerException} for any arguments that are {@code null}</span>
<span class="line-added">  49  * or that are arrays or collections that contain {@code null}.</span>
<span class="line-added">  50  *</span>
<span class="line-added">  51  * Many methods in this class return {@code this}, to enable a series</span>
<span class="line-added">  52  * of chained method calls on a single object.</span>
<span class="line-added">  53  *</span>
<span class="line-added">  54  * Terminology: An HTML element is typically composed of a start tag, some</span>
<span class="line-added">  55  * enclosed content and typically an end tag. The start tag contains any</span>
<span class="line-added">  56  * attributes for the element. See:</span>
<span class="line-added">  57  * &lt;a href=&quot;https://en.wikipedia.org/wiki/HTML_element&quot;&gt;HTML element&lt;/a&gt;.</span>
  58  *
  59  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
  60  *  If you write code that depends on this, you do so at your own risk.
  61  *  This code and its internal interfaces are subject to change or
  62  *  deletion without notice.&lt;/b&gt;
  63  */
  64 public class HtmlTree extends Content {
  65 
<span class="line-added">  66     /**</span>
<span class="line-added">  67      * The kind of tag for the HTML element.</span>
<span class="line-added">  68      * This value is never {@code null}.</span>
<span class="line-added">  69      */</span>
  70     public final HtmlTag htmlTag;



  71 
  72     /**
<span class="line-modified">  73      * The attributes for the HTML element.</span>
<span class="line-modified">  74      * The keys and values in this map are never {@code null}.</span>

  75      */
<span class="line-modified">  76     private Map&lt;HtmlAttr, String&gt; attrs = Map.of();</span>


  77 
  78     /**
<span class="line-modified">  79      * The enclosed content (&quot;inner HTML&quot;) for this HTML element.</span>
<span class="line-modified">  80      * The items in this list are never null.</span>


  81      */
<span class="line-modified">  82     private List&lt;Content&gt; content = List.of();</span>




  83 
  84     /**
<span class="line-modified">  85      * A sentinel value to explicitly indicate empty content.</span>
<span class="line-added">  86      */</span>
<span class="line-added">  87     public static final Content EMPTY = new StringContent(&quot;&quot;);</span>
<span class="line-added">  88 </span>
<span class="line-added">  89     /**</span>
<span class="line-added">  90      * Creates an {@code HTMLTree} object with a given kind of tag.</span>
  91      *
<span class="line-modified">  92      * @param tag the kind of tag</span>

  93      */
<span class="line-modified">  94     public HtmlTree(HtmlTag tag) {</span>
<span class="line-modified">  95         htmlTag = Objects.requireNonNull(tag);</span>


  96     }
  97 
  98     /**
<span class="line-modified">  99      * Adds an attribute.</span>
 100      *
<span class="line-modified"> 101      * @param attrName  the name of the attribute</span>
<span class="line-modified"> 102      * @param attrValue the value of the attribute</span>
 103      * @return this object
 104      */
 105     public HtmlTree put(HtmlAttr attrName, String attrValue) {
 106         if (attrs.isEmpty())
 107             attrs = new LinkedHashMap&lt;&gt;(3);
<span class="line-modified"> 108         attrs.put(Objects.requireNonNull(attrName), Entity.escapeHtmlChars(attrValue));</span>
 109         return this;
 110     }
 111 
 112     /**
<span class="line-modified"> 113      * Sets the {@code id} attribute.</span>
 114      *
<span class="line-modified"> 115      * @param id the value for the attribute</span>
 116      * @return this object
 117      */
 118     public HtmlTree setId(String id) {
<span class="line-modified"> 119         return put(HtmlAttr.ID, id);</span>

 120     }
 121 
 122     /**
<span class="line-modified"> 123      * Sets the {@code title} attribute.</span>
<span class="line-modified"> 124      * Any nested start or end tags in the content will be removed.</span>
 125      *
 126      * @param body the content for the title attribute
 127      * @return this object
 128      */
 129     public HtmlTree setTitle(Content body) {
<span class="line-modified"> 130         return put(HtmlAttr.TITLE, stripHtml(body));</span>

 131     }
 132 
 133     /**
<span class="line-modified"> 134      * Sets the {@code role} attribute.</span>
 135      *
 136      * @param role the role
 137      * @return this object
 138      */
 139     public HtmlTree setRole(Role role) {
<span class="line-modified"> 140         return put(HtmlAttr.ROLE, role.toString());</span>

 141     }
 142 
 143     /**
<span class="line-modified"> 144      * Sets the {@code class} attribute.</span>
 145      *
<span class="line-modified"> 146      * @param style the value for the attribute</span>
 147      * @return this object
 148      */
 149     public HtmlTree setStyle(HtmlStyle style) {
<span class="line-modified"> 150         return put(HtmlAttr.CLASS, style.toString());</span>

 151     }
 152 
 153     /**
<span class="line-modified"> 154      * Adds additional content for the HTML element.</span>
 155      *
<span class="line-modified"> 156      * @param content the content</span>
 157      */
 158     @Override
<span class="line-modified"> 159     public HtmlTree add(Content content) {</span>
<span class="line-modified"> 160         if (content instanceof ContentBuilder) {</span>
<span class="line-modified"> 161             ((ContentBuilder) content).contents.forEach(this::add);</span>


 162         }
<span class="line-modified"> 163         else if (content == HtmlTree.EMPTY || content.isValid()) {</span>
<span class="line-modified"> 164             // quietly avoid adding empty or invalid nodes (except EMPTY)</span>
<span class="line-modified"> 165             if (this.content.isEmpty())</span>
<span class="line-modified"> 166                 this.content = new ArrayList&lt;&gt;();</span>
<span class="line-added"> 167             this.content.add(content);</span>
 168         }
<span class="line-added"> 169         return this;</span>
 170     }
 171 
 172     /**
<span class="line-modified"> 173      * Adds text content for the HTML element.</span>
<span class="line-modified"> 174      *</span>
<span class="line-modified"> 175      * If the last content member that was added is a {@code StringContent},</span>
<span class="line-added"> 176      * appends the string to that item; otherwise, creates and uses a new {@code StringContent}</span>
<span class="line-added"> 177      * for the new text content.</span>
 178      *
 179      * @param stringContent string content that needs to be added
 180      */
 181     @Override
<span class="line-modified"> 182     public HtmlTree add(CharSequence stringContent) {</span>
 183         if (!content.isEmpty()) {
 184             Content lastContent = content.get(content.size() - 1);
 185             if (lastContent instanceof StringContent)
 186                 lastContent.add(stringContent);
<span class="line-modified"> 187             else {</span>
 188                 add(new StringContent(stringContent));
<span class="line-added"> 189             }</span>
 190         }
<span class="line-modified"> 191         else {</span>
 192             add(new StringContent(stringContent));
<span class="line-added"> 193         }</span>
<span class="line-added"> 194         return this;</span>
<span class="line-added"> 195     }</span>
<span class="line-added"> 196 </span>
<span class="line-added"> 197     /**</span>
<span class="line-added"> 198      * Adds each of a list of content items.</span>
<span class="line-added"> 199      *</span>
<span class="line-added"> 200      * @param list the list</span>
<span class="line-added"> 201      * @return this object</span>
<span class="line-added"> 202      */</span>
<span class="line-added"> 203     public HtmlTree add(List&lt;? extends Content&gt; list) {</span>
<span class="line-added"> 204         list.forEach(this::add);</span>
<span class="line-added"> 205         return this;</span>
 206     }
 207 
 208     @Override
 209     public int charCount() {
 210         int n = 0;
<span class="line-modified"> 211         for (Content c : content) {</span>
 212             n += c.charCount();
<span class="line-added"> 213         }</span>
 214         return n;
 215     }
 216 
 217     /*
 218      * The sets of ASCII URI characters to be left unencoded.
 219      * See &quot;Uniform Resource Identifier (URI): Generic Syntax&quot;
 220      * IETF RFC 3986. https://tools.ietf.org/html/rfc3986
 221      */
 222     public static final BitSet MAIN_CHARS;
 223     public static final BitSet QUERY_FRAGMENT_CHARS;
 224 
 225     static {
 226         BitSet alphaDigit = bitSet(bitSet(&#39;A&#39;, &#39;Z&#39;), bitSet(&#39;a&#39;, &#39;z&#39;), bitSet(&#39;0&#39;, &#39;9&#39;));
 227         BitSet unreserved = bitSet(alphaDigit, bitSet(&quot;-._~&quot;));
 228         BitSet genDelims = bitSet(&quot;:/?#[]@&quot;);
 229         BitSet subDelims = bitSet(&quot;!$&amp;&#39;()*+,;=&quot;);
 230         MAIN_CHARS = bitSet(unreserved, genDelims, subDelims);
 231         BitSet pchar = bitSet(unreserved, subDelims, bitSet(&quot;:@&quot;));
 232         QUERY_FRAGMENT_CHARS = bitSet(pchar, bitSet(&quot;/?&quot;));
 233     }
</pre>
<hr />
<pre>
 250         BitSet result = new BitSet();
 251         for (BitSet set : sets) {
 252             result.or(set);
 253         }
 254         return result;
 255     }
 256 
 257     /**
 258      * Apply percent-encoding to a URL.
 259      * This is similar to {@link java.net.URLEncoder} but
 260      * is less aggressive about encoding some characters,
 261      * like &#39;(&#39;, &#39;)&#39;, &#39;,&#39; which are used in the anchor
 262      * names for Java methods in HTML5 mode.
 263      *
 264      * @param url the url to be percent-encoded.
 265      * @return a percent-encoded string.
 266      */
 267     public static String encodeURL(String url) {
 268         BitSet nonEncodingChars = MAIN_CHARS;
 269         StringBuilder sb = new StringBuilder();
<span class="line-modified"> 270         for (byte c : url.getBytes(StandardCharsets.UTF_8)) {</span>
 271             if (c == &#39;?&#39; || c == &#39;#&#39;) {
 272                 sb.append((char) c);
 273                 // switch to the more restrictive set inside
 274                 // the query and/or fragment
 275                 nonEncodingChars = QUERY_FRAGMENT_CHARS;
 276             } else if (nonEncodingChars.get(c &amp; 0xFF)) {
 277                 sb.append((char) c);
 278             } else {
 279                 sb.append(String.format(&quot;%%%02X&quot;, c &amp; 0xFF));
 280             }
 281         }
 282         return sb.toString();
 283     }
 284 
 285     /**
<span class="line-modified"> 286      * Creates an HTML {@code A} element.</span>
 287      *
<span class="line-modified"> 288      * @param ref the value for the {@code href} attribute}</span>
<span class="line-modified"> 289      * @param body the content for element</span>
<span class="line-modified"> 290      * @return the element</span>
 291      */
 292     public static HtmlTree A(String ref, Content body) {
<span class="line-modified"> 293         return new HtmlTree(HtmlTag.A)</span>
<span class="line-modified"> 294                 .put(HtmlAttr.HREF, encodeURL(ref))</span>
<span class="line-modified"> 295                 .add(body);</span>
 296     }
 297 
 298     /**
<span class="line-modified"> 299      * Creates an HTML {@code CAPTION} element with the given content.</span>
 300      *
<span class="line-modified"> 301      * @param body content for the element</span>
<span class="line-modified"> 302      * @return the element</span>
 303      */
 304     public static HtmlTree CAPTION(Content body) {
<span class="line-modified"> 305         return new HtmlTree(HtmlTag.CAPTION)</span>
<span class="line-modified"> 306                 .add(body);</span>
 307     }
 308 
 309     /**
<span class="line-modified"> 310      * Creates an HTML {@code CODE} element with the given content.</span>
 311      *
<span class="line-modified"> 312      * @param body content for the element</span>
<span class="line-modified"> 313      * @return the element</span>
 314      */
 315     public static HtmlTree CODE(Content body) {
<span class="line-modified"> 316         return new HtmlTree(HtmlTag.CODE)</span>
<span class="line-modified"> 317                 .add(body);</span>
 318     }
 319 
 320     /**
<span class="line-modified"> 321      * Creates an HTML {@code DD} element with the given content.</span>
 322      *
<span class="line-modified"> 323      * @param body content for the element</span>
<span class="line-modified"> 324      * @return the element</span>
 325      */
 326     public static HtmlTree DD(Content body) {
<span class="line-modified"> 327         return new HtmlTree(HtmlTag.DD)</span>
<span class="line-modified"> 328                 .add(body);</span>
 329     }
 330 
 331     /**
<span class="line-modified"> 332      * Creates an HTML {@code DL} element with the given style.</span>
 333      *
 334      * @param style the style
<span class="line-modified"> 335      * @return the element</span>
 336      */
 337     public static HtmlTree DL(HtmlStyle style) {
<span class="line-modified"> 338         return new HtmlTree(HtmlTag.DL)</span>
<span class="line-added"> 339                 .setStyle(style);</span>
 340     }
 341 
 342     /**
<span class="line-modified"> 343      * Creates an HTML {@code DL} element with the given style and content.</span>
 344      *
<span class="line-modified"> 345      * @param style the style</span>
<span class="line-modified"> 346      * @param body  the content</span>
<span class="line-modified"> 347      * @return the element</span>
 348      */
 349     public static HtmlTree DL(HtmlStyle style, Content body) {
<span class="line-modified"> 350         return new HtmlTree(HtmlTag.DL)</span>
<span class="line-added"> 351                 .setStyle(style)</span>
<span class="line-added"> 352                 .add(body);</span>
 353     }
 354 
 355     /**
<span class="line-modified"> 356      * Creates an HTML {@code DIV} element with the given style.</span>

 357      *
<span class="line-modified"> 358      * @param style the style</span>
<span class="line-modified"> 359      * @return the element</span>

 360      */
<span class="line-modified"> 361     public static HtmlTree DIV(HtmlStyle style) {</span>
<span class="line-modified"> 362         return new HtmlTree(HtmlTag.DIV)</span>
<span class="line-modified"> 363                 .setStyle(style);</span>


 364     }
 365 
 366     /**
<span class="line-modified"> 367      * Creates an HTML {@code DIV} element with the given style and content.</span>
 368      *
<span class="line-modified"> 369      * @param style the style</span>
<span class="line-modified"> 370      * @param body  the content</span>
<span class="line-added"> 371      * @return the element</span>
<span class="line-added"> 372      */</span>
<span class="line-added"> 373     public static HtmlTree DIV(HtmlStyle style, Content body) {</span>
<span class="line-added"> 374         return new HtmlTree(HtmlTag.DIV)</span>
<span class="line-added"> 375                 .setStyle(style)</span>
<span class="line-added"> 376                 .add(body);</span>
<span class="line-added"> 377     }</span>
<span class="line-added"> 378 </span>
<span class="line-added"> 379     /**</span>
<span class="line-added"> 380      * Creates an HTML {@code DIV} element with the given content.</span>
<span class="line-added"> 381      *</span>
<span class="line-added"> 382      * @param body the content</span>
<span class="line-added"> 383      * @return the element</span>
 384      */
 385     public static HtmlTree DIV(Content body) {
<span class="line-modified"> 386         return new HtmlTree(HtmlTag.DIV)</span>
<span class="line-added"> 387                 .add(body);</span>
 388     }
 389 
 390     /**
<span class="line-modified"> 391      * Creates an HTML {@code DT} element with the given content.</span>
 392      *
<span class="line-modified"> 393      * @param body the content</span>
<span class="line-modified"> 394      * @return the element</span>
 395      */
 396     public static HtmlTree DT(Content body) {
<span class="line-modified"> 397         return new HtmlTree(HtmlTag.DT)</span>
<span class="line-modified"> 398                 .add(body);</span>
 399     }
 400 
 401     /**
<span class="line-modified"> 402      * Creates an HTML {@code FOOTER} element.</span>
<span class="line-added"> 403      * The role is set to {@code contentinfo}.</span>
 404      *
<span class="line-modified"> 405      * @return the element</span>
 406      */
 407     public static HtmlTree FOOTER() {
<span class="line-modified"> 408         return new HtmlTree(HtmlTag.FOOTER)</span>
<span class="line-modified"> 409                 .setRole(Role.CONTENTINFO);</span>

 410     }
 411 
 412     /**
<span class="line-modified"> 413      * Creates an HTML {@code HEADER} element.</span>
<span class="line-added"> 414      * The role is set to {@code banner}.</span>
 415      *
<span class="line-modified"> 416      * @return the element</span>
 417      */
 418     public static HtmlTree HEADER() {
<span class="line-modified"> 419         return new HtmlTree(HtmlTag.HEADER)</span>
<span class="line-modified"> 420                 .setRole(Role.BANNER);</span>

 421     }
 422 
 423     /**
<span class="line-modified"> 424      * Creates an HTML heading element with the given content.</span>

 425      *
<span class="line-modified"> 426      * @param headingTag the tag for the heading</span>
<span class="line-modified"> 427      * @param body       the content</span>
<span class="line-modified"> 428      * @return the element</span>


 429      */
<span class="line-modified"> 430     public static HtmlTree HEADING(HtmlTag headingTag, Content body) {</span>
<span class="line-modified"> 431         return new HtmlTree(checkHeading(headingTag))</span>
<span class="line-modified"> 432                 .add(body);</span>





 433     }
 434 
 435     /**
<span class="line-modified"> 436      * Creates an HTML heading element with the given style and content.</span>

 437      *
<span class="line-modified"> 438      * @param headingTag the tag for the heading</span>
<span class="line-modified"> 439      * @param style      the stylesheet class</span>
<span class="line-modified"> 440      * @param body       the content</span>
<span class="line-modified"> 441      * @return the element</span>
 442      */
<span class="line-modified"> 443     public static HtmlTree HEADING(HtmlTag headingTag, HtmlStyle style, Content body) {</span>
<span class="line-modified"> 444         return new HtmlTree(checkHeading(headingTag))</span>
<span class="line-added"> 445                 .setStyle(style)</span>
<span class="line-added"> 446                 .add(body);</span>
 447     }
 448 
 449     /**
<span class="line-modified"> 450      * Creates an HTML heading element with the given style and content.</span>
<span class="line-modified"> 451      * The {@code title} attribute is set from the content.</span>
 452      *
<span class="line-modified"> 453      * @param headingTag the tag for the heading</span>
<span class="line-modified"> 454      * @param style      the stylesheet class</span>
<span class="line-modified"> 455      * @param body       the content</span>
<span class="line-modified"> 456      * @return the element</span>
 457      */
<span class="line-modified"> 458     public static HtmlTree HEADING_TITLE(HtmlTag headingTag,</span>
<span class="line-modified"> 459                                          HtmlStyle style, Content body) {</span>
<span class="line-added"> 460         return new HtmlTree(checkHeading(headingTag))</span>
<span class="line-added"> 461                 .setTitle(body)</span>
<span class="line-added"> 462                 .setStyle(style)</span>
<span class="line-added"> 463                 .add(body);</span>
 464     }
 465 
 466     /**
<span class="line-modified"> 467      * Creates an HTML heading element with the given style and content.</span>
<span class="line-added"> 468      * The {@code title} attribute is set from the content.</span>
 469      *
<span class="line-modified"> 470      * @param headingTag the tag for the heading</span>
<span class="line-modified"> 471      * @param body       the content</span>
<span class="line-modified"> 472      * @return the element</span>
 473      */
<span class="line-modified"> 474     public static HtmlTree HEADING_TITLE(HtmlTag headingTag, Content body) {</span>
<span class="line-modified"> 475         return new HtmlTree(checkHeading(headingTag))</span>
<span class="line-added"> 476                 .setTitle(body)</span>
<span class="line-added"> 477                 .add(body);</span>
 478     }
 479 
<span class="line-modified"> 480     private static HtmlTag checkHeading(HtmlTag headingTag) {</span>
<span class="line-modified"> 481         switch (headingTag) {</span>
<span class="line-modified"> 482             case H1: case H2: case H3: case H4: case H5: case H6:</span>
<span class="line-modified"> 483                 return headingTag;</span>
<span class="line-modified"> 484             default:</span>
<span class="line-modified"> 485                 throw new IllegalArgumentException(headingTag.toString());</span>
<span class="line-modified"> 486         }</span>






 487     }
 488 
 489     /**
<span class="line-modified"> 490      * Craetes an HTML {@code HTML} element with the given {@code lang} attribute,</span>
<span class="line-added"> 491      * and {@code HEAD} and {@code BODY} contents.</span>
 492      *
<span class="line-modified"> 493      * @param lang the value for the {@code lang} attribute</span>
<span class="line-modified"> 494      * @param head the {@code HEAD} element</span>
<span class="line-modified"> 495      * @param body the {@code BODY} element</span>
<span class="line-modified"> 496      * @return the {@code HTML} element</span>
 497      */
<span class="line-modified"> 498     public static HtmlTree HTML(String lang, Content head, Content body) {</span>
<span class="line-modified"> 499         return new HtmlTree(HtmlTag.HTML)</span>
<span class="line-modified"> 500                 .put(HtmlAttr.LANG, lang)</span>
<span class="line-modified"> 501                 .add(head)</span>
<span class="line-modified"> 502                 .add(body);</span>

 503     }
 504 
 505     /**
<span class="line-modified"> 506      * Creates an HTML {@code INPUT} element with the given id and initial value.</span>
<span class="line-added"> 507      * The element as marked as initially disabled.</span>
 508      *
<span class="line-modified"> 509      * @param type  the type of input</span>
<span class="line-modified"> 510      * @param id    the id</span>
<span class="line-modified"> 511      * @param value the initial value</span>
<span class="line-modified"> 512      * @return the element</span>
 513      */
 514     public static HtmlTree INPUT(String type, String id, String value) {
<span class="line-modified"> 515         return new HtmlTree(HtmlTag.INPUT)</span>
<span class="line-modified"> 516                 .put(HtmlAttr.TYPE, type)</span>
<span class="line-modified"> 517                 .put(HtmlAttr.ID, id)</span>
<span class="line-modified"> 518                 .put(HtmlAttr.VALUE, value)</span>
<span class="line-modified"> 519                 .put(HtmlAttr.DISABLED, &quot;disabled&quot;);</span>

 520     }
 521 
 522     /**
<span class="line-modified"> 523      * Creates an HTML {@code LABEL} element with the given content.</span>
 524      *
<span class="line-modified"> 525      * @param forLabel the value of the {@code for} attribute</span>
<span class="line-modified"> 526      * @param body     the content</span>
<span class="line-modified"> 527      * @return the element</span>
 528      */
 529     public static HtmlTree LABEL(String forLabel, Content body) {
<span class="line-modified"> 530         return new HtmlTree(HtmlTag.LABEL)</span>
<span class="line-modified"> 531                 .put(HtmlAttr.FOR, forLabel)</span>
<span class="line-modified"> 532                 .add(body);</span>
 533     }
 534 
 535     /**
<span class="line-modified"> 536      * Creates an HTML {@code LI} element with the given content.</span>
 537      *
<span class="line-modified"> 538      * @param body the content</span>
<span class="line-modified"> 539      * @return the element</span>
 540      */
 541     public static HtmlTree LI(Content body) {
<span class="line-modified"> 542         return new HtmlTree(HtmlTag.LI)</span>
<span class="line-added"> 543                 .add(body);</span>
 544     }
 545 
 546     /**
<span class="line-modified"> 547      * Creates an HTML {@code LI} element with the given style and the given content.</span>
 548      *
<span class="line-modified"> 549      * @param style the style</span>
<span class="line-modified"> 550      * @param body  the content</span>
<span class="line-modified"> 551      * @return the element</span>
 552      */
<span class="line-modified"> 553     public static HtmlTree LI(HtmlStyle style, Content body) {</span>
<span class="line-modified"> 554         return LI(body)</span>
<span class="line-modified"> 555                 .setStyle(style);</span>


 556     }
 557 
 558     /**
<span class="line-modified"> 559      * Creates an HTML {@code LINK} tag with the given attributes.</span>
 560      *
<span class="line-modified"> 561      * @param rel   the relevance of the link: the {@code rel} attribute</span>
<span class="line-modified"> 562      * @param type  the type of link: the {@code type} attribute</span>
<span class="line-modified"> 563      * @param href  the path for the link: the {@code href} attribute</span>
<span class="line-modified"> 564      * @param title title for the link: the {@code title} attribute</span>
<span class="line-modified"> 565      * @return the element</span>
 566      */
 567     public static HtmlTree LINK(String rel, String type, String href, String title) {
<span class="line-modified"> 568         return new HtmlTree(HtmlTag.LINK)</span>
<span class="line-modified"> 569                 .put(HtmlAttr.REL, rel)</span>
<span class="line-modified"> 570                 .put(HtmlAttr.TYPE, type)</span>
<span class="line-modified"> 571                 .put(HtmlAttr.HREF, href)</span>
<span class="line-modified"> 572                 .put(HtmlAttr.TITLE, title);</span>

 573     }
 574 
 575     /**
<span class="line-modified"> 576      * Creates an HTML {@code MAIN} element.</span>
<span class="line-added"> 577      * The role is set to {@code main}.</span>
 578      *
<span class="line-modified"> 579      * @return the element</span>
 580      */
 581     public static HtmlTree MAIN() {
<span class="line-modified"> 582         return new HtmlTree(HtmlTag.MAIN)</span>
<span class="line-modified"> 583                 .setRole(Role.MAIN);</span>

 584     }
 585 
 586     /**
<span class="line-modified"> 587      * Creates an HTML {@code MAIN} element with the given content.</span>
<span class="line-added"> 588      * The role is set to {@code main}.</span>
 589      *
<span class="line-modified"> 590      * @return the element</span>

 591      */
 592     public static HtmlTree MAIN(Content body) {
<span class="line-modified"> 593         return new HtmlTree(HtmlTag.MAIN)</span>
<span class="line-modified"> 594                 .setRole(Role.MAIN)</span>
<span class="line-modified"> 595                 .add(body);</span>
 596     }
 597 
 598     /**
<span class="line-modified"> 599      * Creates an HTML {@code META} element with {@code http-equiv} and {@code content} attributes.</span>
 600      *
<span class="line-modified"> 601      * @param httpEquiv the value for the {@code http-equiv} attribute</span>
<span class="line-modified"> 602      * @param content   the type of content, to be used in the {@code content} attribute</span>
<span class="line-modified"> 603      * @param charset   the character set for the document, to be used in the {@code content} attribute</span>
<span class="line-modified"> 604      * @return the element</span>
 605      */
<span class="line-modified"> 606     public static HtmlTree META(String httpEquiv, String content, String charset) {</span>
<span class="line-modified"> 607         return new HtmlTree(HtmlTag.META)</span>
<span class="line-modified"> 608                 .put(HtmlAttr.HTTP_EQUIV, httpEquiv)</span>
<span class="line-modified"> 609                 .put(HtmlAttr.CONTENT, content + &quot;; charset=&quot; + charset);</span>


 610     }
 611 
 612     /**
<span class="line-modified"> 613      * Creates an HTML {@code META} element with {@code name} and {@code content} attributes.</span>
 614      *
<span class="line-modified"> 615      * @param name    the value for the {@code name} attribute</span>
<span class="line-modified"> 616      * @param content the value for the {@code content} attribute</span>
<span class="line-modified"> 617      * @return the element</span>
 618      */
 619     public static HtmlTree META(String name, String content) {
<span class="line-modified"> 620         return new HtmlTree(HtmlTag.META)</span>
<span class="line-modified"> 621                 .put(HtmlAttr.NAME, name)</span>
<span class="line-modified"> 622                 .put(HtmlAttr.CONTENT, content);</span>

 623     }
 624 
 625     /**
<span class="line-modified"> 626      * Creates an HTML {@code NAV} element.</span>
<span class="line-added"> 627      * The role is set to {@code navigation}.</span>
 628      *
<span class="line-modified"> 629      * @return the element</span>
 630      */
 631     public static HtmlTree NAV() {
<span class="line-modified"> 632         return new HtmlTree(HtmlTag.NAV)</span>
<span class="line-modified"> 633                 .setRole(Role.NAVIGATION);</span>

 634     }
 635 
 636     /**
<span class="line-modified"> 637      * Creates an HTML {@code NOSCRIPT} element with some content.</span>
 638      *
<span class="line-modified"> 639      * @param body the content</span>
<span class="line-modified"> 640      * @return the element</span>
 641      */
 642     public static HtmlTree NOSCRIPT(Content body) {
<span class="line-modified"> 643         return new HtmlTree(HtmlTag.NOSCRIPT)</span>
<span class="line-modified"> 644                 .add(body);</span>
 645     }
 646 
 647     /**
<span class="line-modified"> 648      * Creates an HTML {@code P} element with some content.</span>
 649      *
<span class="line-modified"> 650      * @param body the content</span>
<span class="line-modified"> 651      * @return the element</span>
 652      */
 653     public static HtmlTree P(Content body) {
<span class="line-modified"> 654         return new HtmlTree(HtmlTag.P)</span>
<span class="line-added"> 655                 .add(body);</span>
 656     }
 657 
 658     /**
<span class="line-modified"> 659      * Creates an HTML {@code P} element with the given style and some content.</span>
 660      *
<span class="line-modified"> 661      * @param style the style</span>
<span class="line-modified"> 662      * @param body  the content</span>
<span class="line-modified"> 663      * @return the element</span>
 664      */
<span class="line-modified"> 665     public static HtmlTree P(HtmlStyle style, Content body) {</span>
<span class="line-modified"> 666         return P(body)</span>
<span class="line-modified"> 667                 .setStyle(style);</span>


 668     }
 669 
 670     /**
<span class="line-modified"> 671      * Creates an HTML {@code SCRIPT} element with some script content.</span>
<span class="line-added"> 672      * The type of the script is set to {@code text/javascript}.</span>
 673      *
<span class="line-modified"> 674      * @param src the content</span>
<span class="line-modified"> 675      * @return the element</span>
 676      */
 677     public static HtmlTree SCRIPT(String src) {
<span class="line-modified"> 678         return new HtmlTree(HtmlTag.SCRIPT)</span>
<span class="line-modified"> 679                 .put(HtmlAttr.TYPE, &quot;text/javascript&quot;)</span>
<span class="line-modified"> 680                 .put(HtmlAttr.SRC, src);</span>
<span class="line-modified"> 681 </span>
 682     }
 683 
 684     /**
<span class="line-modified"> 685      * Creates an HTML {@code SECTION} element with the given style.</span>
 686      *
<span class="line-modified"> 687      * @param style the style</span>
<span class="line-modified"> 688      * @return the element</span>
 689      */
<span class="line-modified"> 690     public static HtmlTree SECTION(HtmlStyle style) {</span>
<span class="line-modified"> 691         return new HtmlTree(HtmlTag.SECTION)</span>
<span class="line-modified"> 692                 .setStyle(style);</span>

 693     }
 694 
 695     /**
<span class="line-modified"> 696      * Creates an HTML {@code SECTION} element with the given style and some content.</span>
 697      *
<span class="line-modified"> 698      * @param style the style</span>
<span class="line-modified"> 699      * @param body  the content</span>
<span class="line-modified"> 700      * @return the element</span>
 701      */
<span class="line-modified"> 702     public static HtmlTree SECTION(HtmlStyle style, Content body) {</span>
<span class="line-modified"> 703         return new HtmlTree(HtmlTag.SECTION)</span>
<span class="line-modified"> 704                 .setStyle(style)</span>
<span class="line-modified"> 705                 .add(body);</span>


 706     }
 707 
 708     /**
<span class="line-modified"> 709      * Creates an HTML {@code SMALL} element with some content.</span>
 710      *
<span class="line-modified"> 711      * @param body  the content</span>
<span class="line-modified"> 712      * @return the element</span>
 713      */
 714     public static HtmlTree SMALL(Content body) {
<span class="line-modified"> 715         return new HtmlTree(HtmlTag.SMALL)</span>
<span class="line-modified"> 716                 .add(body);</span>
 717     }
 718 
 719     /**
<span class="line-modified"> 720      * Creates an HTML {@code SPAN} element with some content.</span>
 721      *
<span class="line-modified"> 722      * @param body  the content</span>
<span class="line-modified"> 723      * @return the element</span>
 724      */
 725     public static HtmlTree SPAN(Content body) {
<span class="line-modified"> 726         return new HtmlTree(HtmlTag.SPAN)</span>
<span class="line-added"> 727                 .add(body);</span>
 728     }
 729 
 730     /**
<span class="line-modified"> 731      * Creates an HTML {@code SPAN} element with the given style and some content.</span>
 732      *
<span class="line-modified"> 733      * @param styleClass the style</span>
<span class="line-modified"> 734      * @param body       the content</span>
<span class="line-modified"> 735      * @return the element</span>
 736      */
 737     public static HtmlTree SPAN(HtmlStyle styleClass, Content body) {
<span class="line-modified"> 738         return SPAN(body)</span>
<span class="line-modified"> 739                 .setStyle(styleClass);</span>


 740     }
 741 
 742     /**
<span class="line-modified"> 743      * Creates an HTML {@code SPAN} element with the given id and some content.</span>
 744      *
<span class="line-modified"> 745      * @param id    the id</span>
<span class="line-modified"> 746      * @param body  the content</span>
<span class="line-modified"> 747      * @return the element</span>
 748      */
 749     public static HtmlTree SPAN_ID(String id, Content body) {
<span class="line-modified"> 750         return new HtmlTree(HtmlTag.SPAN)</span>
<span class="line-modified"> 751                 .setId(id)</span>
<span class="line-modified"> 752                 .add(body);</span>
 753     }
 754 
 755     /**
<span class="line-modified"> 756      * Creates an HTML {@code SPAN} element with the given id and style, and some content.</span>

 757      *
<span class="line-modified"> 758      * @param id    the id</span>
<span class="line-modified"> 759      * @param style the style</span>
<span class="line-modified"> 760      * @param body  the content</span>
<span class="line-modified"> 761      * @return the element</span>














































 762      */
<span class="line-modified"> 763     public static HtmlTree SPAN(String id, HtmlStyle style, Content body) {</span>
<span class="line-modified"> 764         return new HtmlTree(HtmlTag.SPAN)</span>
<span class="line-modified"> 765                 .setId(id)</span>
<span class="line-modified"> 766                 .setStyle(style)</span>
<span class="line-modified"> 767                 .add(body);</span>
 768     }
 769 
 770     /**
<span class="line-modified"> 771      * Creates an HTML {@code TD} element with the given style and some content.</span>
 772      *
<span class="line-modified"> 773      * @param style the style</span>
<span class="line-modified"> 774      * @param body  the content</span>
<span class="line-added"> 775      * @return the element</span>
 776      */
<span class="line-modified"> 777     public static HtmlTree TD(HtmlStyle style, Content body) {</span>
<span class="line-modified"> 778         return new HtmlTree(HtmlTag.TD)</span>
<span class="line-added"> 779                 .setStyle(style)</span>
<span class="line-added"> 780                 .add(body);</span>
 781     }
 782 
 783     /**
<span class="line-modified"> 784      * Creates an HTML {@code TH} element with the given style and scope, and some content.</span>
 785      *
<span class="line-modified"> 786      * @param style the style</span>
<span class="line-modified"> 787      * @param scope the value for the {@code scope} attribute</span>
<span class="line-modified"> 788      * @param body  the content</span>
<span class="line-modified"> 789      * @return the element</span>
 790      */
<span class="line-modified"> 791     public static HtmlTree TH(HtmlStyle style, String scope, Content body) {</span>
<span class="line-modified"> 792         return new HtmlTree(HtmlTag.TH)</span>
<span class="line-modified"> 793                 .setStyle(style)</span>
<span class="line-modified"> 794                 .put(HtmlAttr.SCOPE, scope)</span>
<span class="line-modified"> 795                 .add(body);</span>

 796     }
 797 
 798     /**
<span class="line-modified"> 799      * Creates an HTML {@code TH} element with the given scope, and some content.</span>
 800      *
<span class="line-modified"> 801      * @param scope the value for the {@code scope} attribute</span>
<span class="line-modified"> 802      * @param body  the content</span>
<span class="line-modified"> 803      * @return the element</span>
 804      */
 805     public static HtmlTree TH(String scope, Content body) {
<span class="line-modified"> 806         return new HtmlTree(HtmlTag.TH)</span>
<span class="line-modified"> 807                 .put(HtmlAttr.SCOPE, scope)</span>
<span class="line-modified"> 808                 .add(body);</span>









 809     }
 810 
 811     /**
<span class="line-modified"> 812      * Creates an HTML {@code TITLE} element with some content.</span>
 813      *
<span class="line-modified"> 814      * @param body the content</span>
<span class="line-modified"> 815      * @return the element</span>
 816      */
 817     public static HtmlTree TITLE(String body) {
<span class="line-modified"> 818         return new HtmlTree(HtmlTag.TITLE)</span>
<span class="line-modified"> 819             .add(body);</span>
 820     }
 821 
 822     /**
<span class="line-modified"> 823      * Creates an HTML {@code UL} element with the given style and some content.</span>
 824      *
<span class="line-modified"> 825      * @param style the style</span>
<span class="line-modified"> 826      * @param first the initial content</span>
<span class="line-modified"> 827      * @param more  additional content</span>
<span class="line-modified"> 828      * @return the element</span>
<span class="line-modified"> 829      */</span>
<span class="line-modified"> 830     public static HtmlTree UL(HtmlStyle style, Content first, Content... more) {</span>
<span class="line-modified"> 831         HtmlTree htmlTree = new HtmlTree(HtmlTag.UL)</span>
<span class="line-modified"> 832                 .setStyle(style);</span>
<span class="line-modified"> 833         htmlTree.add(first);</span>










 834         for (Content c : more) {
<span class="line-modified"> 835             htmlTree.add(c);</span>
 836         }

 837         return htmlTree;
 838     }
 839 
 840     @Override
 841     public boolean isEmpty() {
 842         return (!hasContent() &amp;&amp; !hasAttrs());
 843     }
 844 
 845     /**
 846      * Returns true if the HTML tree has content.
 847      *
 848      * @return true if the HTML tree has content else return false
 849      */
 850     public boolean hasContent() {
 851         return (!content.isEmpty());
 852     }
 853 
 854     /**
 855      * Returns true if the HTML tree has attributes.
 856      *
</pre>
<hr />
<pre>
 863     /**
 864      * Returns true if the HTML tree has a specific attribute.
 865      *
 866      * @param attrName name of the attribute to check within the HTML tree
 867      * @return true if the HTML tree has the specified attribute else return false
 868      */
 869     public boolean hasAttr(HtmlAttr attrName) {
 870         return (attrs.containsKey(attrName));
 871     }
 872 
 873     /**
 874      * Returns true if the HTML tree is valid. This check is more specific to
 875      * standard doclet and not exactly similar to W3C specifications. But it
 876      * ensures HTML validation.
 877      *
 878      * @return true if the HTML tree is valid
 879      */
 880     @Override
 881     public boolean isValid() {
 882         switch (htmlTag) {
<span class="line-modified"> 883             case A:</span>
<span class="line-modified"> 884                 return (hasAttr(HtmlAttr.ID) || (hasAttr(HtmlAttr.HREF) &amp;&amp; hasContent()));</span>
<span class="line-modified"> 885             case BR:</span>
 886                 return (!hasContent() &amp;&amp; (!hasAttrs() || hasAttr(HtmlAttr.CLEAR)));
<span class="line-modified"> 887             case HR:</span>


 888             case INPUT:
 889                 return (!hasContent());
<span class="line-modified"> 890             case IMG:</span>
 891                 return (hasAttr(HtmlAttr.SRC) &amp;&amp; hasAttr(HtmlAttr.ALT) &amp;&amp; !hasContent());
<span class="line-modified"> 892             case LINK:</span>
 893                 return (hasAttr(HtmlAttr.HREF) &amp;&amp; !hasContent());
<span class="line-modified"> 894             case META:</span>
 895                 return (hasAttr(HtmlAttr.CONTENT) &amp;&amp; !hasContent());
<span class="line-modified"> 896             case SCRIPT:</span>
 897                 return ((hasAttr(HtmlAttr.TYPE) &amp;&amp; hasAttr(HtmlAttr.SRC) &amp;&amp; !hasContent()) ||
 898                         (hasAttr(HtmlAttr.TYPE) &amp;&amp; hasContent()));
<span class="line-modified"> 899             case SPAN:</span>
 900                 return (hasAttr(HtmlAttr.ID) || hasContent());
 901             default :
 902                 return hasContent();
 903         }
 904     }
 905 
 906     /**
 907      * Returns true if the element is an inline element.
 908      *
 909      * @return true if the HTML tag is an inline element
 910      */
 911     public boolean isInline() {
 912         return (htmlTag.blockType == HtmlTag.BlockType.INLINE);
 913     }
 914 
 915     @Override
 916     public boolean write(Writer out, boolean atNewline) throws IOException {
 917         if (!isInline() &amp;&amp; !atNewline)
 918             out.write(DocletConstants.NL);
 919         String tagString = htmlTag.toString();
</pre>
<hr />
<pre>
 944         }
 945         if (!isInline()) {
 946             out.write(DocletConstants.NL);
 947             return true;
 948         } else {
 949             return false;
 950         }
 951     }
 952 
 953     /**
 954      * Given a Content node, strips all html characters and
 955      * return the result.
 956      *
 957      * @param body The content node to check.
 958      * @return the plain text from the content node
 959      *
 960      */
 961     private static String stripHtml(Content body) {
 962         String rawString = body.toString();
 963         // remove HTML tags
<span class="line-modified"> 964         rawString = rawString.replaceAll(&quot;&lt;.*?&gt;&quot;, &quot; &quot;);</span>
 965         // consolidate multiple spaces between a word to a single space
 966         rawString = rawString.replaceAll(&quot;\\b\\s{2,}\\b&quot;, &quot; &quot;);
 967         // remove extra whitespaces
 968         return rawString.trim();
 969     }
 970 }
</pre>
</td>
</tr>
</table>
<center><a href="HtmlTag.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="RawHtml.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>