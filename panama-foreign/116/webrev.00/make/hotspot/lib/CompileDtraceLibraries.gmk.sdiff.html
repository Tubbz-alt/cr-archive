<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/hotspot/lib/CompileDtraceLibraries.gmk</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
<body>
<center><a href="../gensrc/GensrcDtrace.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="CompileGtest.gmk.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/hotspot/lib/CompileDtraceLibraries.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
25 
26 ifeq ($(call check-jvm-feature, dtrace), true)
27   ifeq ($(call isTargetOs, solaris), true)
28     JNI_INCLUDE_FLAGS := \
29         -I$(SUPPORT_OUTPUTDIR)/modules_include/java.base \
30         -I$(SUPPORT_OUTPUTDIR)/modules_include/java.base/$(OPENJDK_TARGET_OS_INCLUDE_SUBDIR) \
31         #
32 
33     ############################################################################
34     # Build the stand-alone dtrace libraries.
35 
36     LIBJVM_DTRACE_OUTPUTDIR := $(JVM_VARIANT_OUTPUTDIR)/libjvm_dtrace
37     $(eval $(call SetupNativeCompilation, BUILD_LIBJVM_DTRACE, \
38         NAME := jvm_dtrace, \
39         OUTPUT_DIR := $(JVM_LIB_OUTPUTDIR), \
40         SRC := $(TOPDIR)/src/java.base/solaris/native/libjvm_dtrace, \
41         CFLAGS := $(JNI_INCLUDE_FLAGS) -m64 -G -mt -KPIC -xldscope=hidden, \
42         LDFLAGS := -m64 -mt -xnolib $(SHARED_LIBRARY_FLAGS), \
43         LIBS := $(LIBDL) -lthread -ldoor, \
44         OBJECT_DIR := $(LIBJVM_DTRACE_OUTPUTDIR)/objs, \
<span class="line-removed">45         DEFINE_THIS_FILE := false, \</span>
46     ))
47 
48     # Note that libjvm_db.c has tests for COMPILER2, but this was never set by
49     # the old build.
50     LIBJVM_DB_OUTPUTDIR := $(JVM_VARIANT_OUTPUTDIR)/libjvm_db
51     $(eval $(call SetupNativeCompilation, BUILD_LIBJVM_DB, \
52         NAME := jvm_db, \
53         OUTPUT_DIR := $(JVM_LIB_OUTPUTDIR), \
54         SRC := $(TOPDIR)/src/java.base/solaris/native/libjvm_db, \
55         CFLAGS := -I$(DTRACE_GENSRC_DIR) $(JNI_INCLUDE_FLAGS) -m64 -G -mt -KPIC -xldscope=hidden, \
56         LDFLAGS := -m64 -mt -xnolib $(SHARED_LIBRARY_FLAGS), \
57         OBJECT_DIR := $(LIBJVM_DB_OUTPUTDIR)/objs, \
<span class="line-removed">58         DEFINE_THIS_FILE := false, \</span>
59     ))
60 
61     TARGETS += $(BUILD_LIBJVM_DTRACE) $(BUILD_LIBJVM_DB)
62 
63   endif
64 endif
</pre>
</td>
<td>
<hr />
<pre>
25 
26 ifeq ($(call check-jvm-feature, dtrace), true)
27   ifeq ($(call isTargetOs, solaris), true)
28     JNI_INCLUDE_FLAGS := \
29         -I$(SUPPORT_OUTPUTDIR)/modules_include/java.base \
30         -I$(SUPPORT_OUTPUTDIR)/modules_include/java.base/$(OPENJDK_TARGET_OS_INCLUDE_SUBDIR) \
31         #
32 
33     ############################################################################
34     # Build the stand-alone dtrace libraries.
35 
36     LIBJVM_DTRACE_OUTPUTDIR := $(JVM_VARIANT_OUTPUTDIR)/libjvm_dtrace
37     $(eval $(call SetupNativeCompilation, BUILD_LIBJVM_DTRACE, \
38         NAME := jvm_dtrace, \
39         OUTPUT_DIR := $(JVM_LIB_OUTPUTDIR), \
40         SRC := $(TOPDIR)/src/java.base/solaris/native/libjvm_dtrace, \
41         CFLAGS := $(JNI_INCLUDE_FLAGS) -m64 -G -mt -KPIC -xldscope=hidden, \
42         LDFLAGS := -m64 -mt -xnolib $(SHARED_LIBRARY_FLAGS), \
43         LIBS := $(LIBDL) -lthread -ldoor, \
44         OBJECT_DIR := $(LIBJVM_DTRACE_OUTPUTDIR)/objs, \

45     ))
46 
47     # Note that libjvm_db.c has tests for COMPILER2, but this was never set by
48     # the old build.
49     LIBJVM_DB_OUTPUTDIR := $(JVM_VARIANT_OUTPUTDIR)/libjvm_db
50     $(eval $(call SetupNativeCompilation, BUILD_LIBJVM_DB, \
51         NAME := jvm_db, \
52         OUTPUT_DIR := $(JVM_LIB_OUTPUTDIR), \
53         SRC := $(TOPDIR)/src/java.base/solaris/native/libjvm_db, \
54         CFLAGS := -I$(DTRACE_GENSRC_DIR) $(JNI_INCLUDE_FLAGS) -m64 -G -mt -KPIC -xldscope=hidden, \
55         LDFLAGS := -m64 -mt -xnolib $(SHARED_LIBRARY_FLAGS), \
56         OBJECT_DIR := $(LIBJVM_DB_OUTPUTDIR)/objs, \

57     ))
58 
59     TARGETS += $(BUILD_LIBJVM_DTRACE) $(BUILD_LIBJVM_DB)
60 
61   endif
62 endif
</pre>
</td>
</tr>
</table>
<center><a href="../gensrc/GensrcDtrace.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="CompileGtest.gmk.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>