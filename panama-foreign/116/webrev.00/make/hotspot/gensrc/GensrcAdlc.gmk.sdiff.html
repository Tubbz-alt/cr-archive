<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/hotspot/gensrc/GensrcAdlc.gmk</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
<body>
<center><a href="../../gensrc/GensrcModuleInfo.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="GensrcDtrace.gmk.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/hotspot/gensrc/GensrcAdlc.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 58   # hurt.
 59   ADLC_CFLAGS += -DASSERT
 60 
 61   ADLC_CFLAGS += -D$(HOTSPOT_TARGET_CPU_DEFINE)
 62 
 63   ADLC_CFLAGS += -I$(TOPDIR)/src/hotspot/share
 64 
 65   $(eval $(call SetupNativeCompilation, BUILD_ADLC, \
 66       NAME := adlc, \
 67       TYPE := EXECUTABLE, \
 68       TOOLCHAIN := TOOLCHAIN_BUILD_LINK_CXX, \
 69       SRC := $(TOPDIR)/src/hotspot/share/adlc, \
 70       EXTRA_FILES := $(TOPDIR)/src/hotspot/share/opto/opcodes.cpp, \
 71       CFLAGS := $(ADLC_CFLAGS) $(ADLC_CFLAGS_WARNINGS), \
 72       LDFLAGS := $(ADLC_LDFLAGS), \
 73       LIBS := $(ADLC_LIBS), \
 74       OBJECT_DIR := $(JVM_VARIANT_OUTPUTDIR)/tools/adlc/objs, \
 75       OUTPUT_DIR := $(JVM_VARIANT_OUTPUTDIR)/tools/adlc, \
 76       DEBUG_SYMBOLS := false, \
 77       DISABLED_WARNINGS_clang := tautological-compare, \
<span class="line-removed"> 78       DEFINE_THIS_FILE := false, \</span>
 79   ))
 80 
 81   ADLC_TOOL := $(BUILD_ADLC_TARGET)
 82 
 83   ##############################################################################
 84   # Transform the ad source files into C++ source files using adlc
 85 
 86   # Setup flags for the adlc build tool (ADLCFLAGS).
 87   ADLCFLAGS += -q -T
 88 
 89   # ADLC flags depending on target OS
 90   ifeq ($(call isTargetOs, linux), true)
 91     ADLCFLAGS += -DLINUX=1 -D_GNU_SOURCE=1
 92   else ifeq ($(call isTargetOs, solaris), true)
 93     ADLCFLAGS += -DSOLARIS=1 -DSPARC_WORKS=1
 94   else ifeq ($(call isTargetOs, aix), true)
 95     ADLCFLAGS += -DAIX=1
 96   else ifeq ($(call isTargetOs, macosx), true)
 97     ADLCFLAGS += -D_ALLBSD_SOURCE=1 -D_GNU_SOURCE=1
 98   endif
</pre>
<hr />
<pre>
184   ADLC_GENERATED_FILES := $(addprefix $(JVM_VARIANT_OUTPUTDIR)/gensrc/adfiles/, \
185       ad_$(HOTSPOT_TARGET_CPU_ARCH).cpp \
186       ad_$(HOTSPOT_TARGET_CPU_ARCH).hpp \
187       ad_$(HOTSPOT_TARGET_CPU_ARCH)_clone.cpp \
188       ad_$(HOTSPOT_TARGET_CPU_ARCH)_expand.cpp \
189       ad_$(HOTSPOT_TARGET_CPU_ARCH)_format.cpp \
190       ad_$(HOTSPOT_TARGET_CPU_ARCH)_gen.cpp \
191       ad_$(HOTSPOT_TARGET_CPU_ARCH)_misc.cpp \
192       ad_$(HOTSPOT_TARGET_CPU_ARCH)_peephole.cpp \
193       ad_$(HOTSPOT_TARGET_CPU_ARCH)_pipeline.cpp \
194       adGlobals_$(HOTSPOT_TARGET_CPU_ARCH).hpp \
195       dfa_$(HOTSPOT_TARGET_CPU_ARCH).cpp \
196   )
197 
198   $(JVM_VARIANT_OUTPUTDIR)/gensrc/adfiles/%: $(adlc_run_TARGET)
199 	$(call LogInfo, Postprocessing adlc file $*)
200 	$(call MakeDir, $(@D))
201 	$(NAWK) \
202 	    &#39;BEGIN { print &quot;#line 1 \&quot;$*\&quot;&quot;; } \
203 	     /^#line 999999$$/ {print &quot;#line &quot; (NR+1) &quot; \&quot;$*\&quot;&quot;; next} \



204 	     {print}&#39; \
205 	    &lt; $(ADLC_SUPPORT_DIR)/$* &gt; $@
206 
207   TARGETS += $(ADLC_GENERATED_FILES)
208 
209 endif
</pre>
</td>
<td>
<hr />
<pre>
 58   # hurt.
 59   ADLC_CFLAGS += -DASSERT
 60 
 61   ADLC_CFLAGS += -D$(HOTSPOT_TARGET_CPU_DEFINE)
 62 
 63   ADLC_CFLAGS += -I$(TOPDIR)/src/hotspot/share
 64 
 65   $(eval $(call SetupNativeCompilation, BUILD_ADLC, \
 66       NAME := adlc, \
 67       TYPE := EXECUTABLE, \
 68       TOOLCHAIN := TOOLCHAIN_BUILD_LINK_CXX, \
 69       SRC := $(TOPDIR)/src/hotspot/share/adlc, \
 70       EXTRA_FILES := $(TOPDIR)/src/hotspot/share/opto/opcodes.cpp, \
 71       CFLAGS := $(ADLC_CFLAGS) $(ADLC_CFLAGS_WARNINGS), \
 72       LDFLAGS := $(ADLC_LDFLAGS), \
 73       LIBS := $(ADLC_LIBS), \
 74       OBJECT_DIR := $(JVM_VARIANT_OUTPUTDIR)/tools/adlc/objs, \
 75       OUTPUT_DIR := $(JVM_VARIANT_OUTPUTDIR)/tools/adlc, \
 76       DEBUG_SYMBOLS := false, \
 77       DISABLED_WARNINGS_clang := tautological-compare, \

 78   ))
 79 
 80   ADLC_TOOL := $(BUILD_ADLC_TARGET)
 81 
 82   ##############################################################################
 83   # Transform the ad source files into C++ source files using adlc
 84 
 85   # Setup flags for the adlc build tool (ADLCFLAGS).
 86   ADLCFLAGS += -q -T
 87 
 88   # ADLC flags depending on target OS
 89   ifeq ($(call isTargetOs, linux), true)
 90     ADLCFLAGS += -DLINUX=1 -D_GNU_SOURCE=1
 91   else ifeq ($(call isTargetOs, solaris), true)
 92     ADLCFLAGS += -DSOLARIS=1 -DSPARC_WORKS=1
 93   else ifeq ($(call isTargetOs, aix), true)
 94     ADLCFLAGS += -DAIX=1
 95   else ifeq ($(call isTargetOs, macosx), true)
 96     ADLCFLAGS += -D_ALLBSD_SOURCE=1 -D_GNU_SOURCE=1
 97   endif
</pre>
<hr />
<pre>
183   ADLC_GENERATED_FILES := $(addprefix $(JVM_VARIANT_OUTPUTDIR)/gensrc/adfiles/, \
184       ad_$(HOTSPOT_TARGET_CPU_ARCH).cpp \
185       ad_$(HOTSPOT_TARGET_CPU_ARCH).hpp \
186       ad_$(HOTSPOT_TARGET_CPU_ARCH)_clone.cpp \
187       ad_$(HOTSPOT_TARGET_CPU_ARCH)_expand.cpp \
188       ad_$(HOTSPOT_TARGET_CPU_ARCH)_format.cpp \
189       ad_$(HOTSPOT_TARGET_CPU_ARCH)_gen.cpp \
190       ad_$(HOTSPOT_TARGET_CPU_ARCH)_misc.cpp \
191       ad_$(HOTSPOT_TARGET_CPU_ARCH)_peephole.cpp \
192       ad_$(HOTSPOT_TARGET_CPU_ARCH)_pipeline.cpp \
193       adGlobals_$(HOTSPOT_TARGET_CPU_ARCH).hpp \
194       dfa_$(HOTSPOT_TARGET_CPU_ARCH).cpp \
195   )
196 
197   $(JVM_VARIANT_OUTPUTDIR)/gensrc/adfiles/%: $(adlc_run_TARGET)
198 	$(call LogInfo, Postprocessing adlc file $*)
199 	$(call MakeDir, $(@D))
200 	$(NAWK) \
201 	    &#39;BEGIN { print &quot;#line 1 \&quot;$*\&quot;&quot;; } \
202 	     /^#line 999999$$/ {print &quot;#line &quot; (NR+1) &quot; \&quot;$*\&quot;&quot;; next} \
<span class="line-added">203 	     $(if $(call equals, $(ALLOW_ABSOLUTE_PATHS_IN_OUTPUT), false), \</span>
<span class="line-added">204 	       /^#line .*$$/ {sub(&quot;$(WORKSPACE_ROOT)/&quot;,&quot;&quot;)} \</span>
<span class="line-added">205 	     ) \</span>
206 	     {print}&#39; \
207 	    &lt; $(ADLC_SUPPORT_DIR)/$* &gt; $@
208 
209   TARGETS += $(ADLC_GENERATED_FILES)
210 
211 endif
</pre>
</td>
</tr>
</table>
<center><a href="../../gensrc/GensrcModuleInfo.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="GensrcDtrace.gmk.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>