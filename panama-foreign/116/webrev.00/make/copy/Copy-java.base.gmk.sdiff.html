<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/copy/Copy-java.base.gmk</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="../common/NativeCompilation.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../devkit/createWindowsDevkit2019.sh.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/copy/Copy-java.base.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 42 
 43 endif
 44 
 45 ################################################################################
 46 # Copy the microsoft runtime libraries on windows
 47 ifeq ($(call isTargetOs, windows), true)
 48 
 49   # Chmod to avoid permission issues if bundles are unpacked on unix platforms.
 50   define copy-and-chmod
 51 	$(install-file)
 52 	$(CHMOD) a+rx $@
 53   endef
 54 
 55   # Use separate macro calls in case the source files are not in the same
 56   # directory.
 57   $(eval $(call SetupCopyFiles,COPY_MSVCR, \
 58       DEST := $(LIB_DST_DIR), \
 59       FILES := $(MSVCR_DLL), \
 60       MACRO := copy-and-chmod))
 61 





 62   $(eval $(call SetupCopyFiles,COPY_MSVCP, \
 63       DEST := $(LIB_DST_DIR), \
 64       FILES := $(MSVCP_DLL), \
 65       MACRO := copy-and-chmod))
 66 
<span class="line-modified"> 67   TARGETS += $(COPY_MSVCR) $(COPY_MSVCP)</span>
 68 
 69   ifneq ($(UCRT_DLL_DIR), )
 70     $(eval $(call SetupCopyFiles, COPY_UCRT_DLLS, \
 71         DEST := $(LIB_DST_DIR), \
 72         SRC := $(UCRT_DLL_DIR), \
 73         FILES := $(wildcard $(UCRT_DLL_DIR)/*.dll), \
 74         MACRO := copy-and-chmod, \
 75     ))
 76 
 77     TARGETS += $(COPY_UCRT_DLLS)
 78   endif
 79 endif
 80 
 81 ################################################################################
 82 # In jvm.cfg, the first listed KNOWN variant is the default. On most build
 83 # configurations, that is the server variant.
 84 ifeq ($(call And, $(call isTargetOs, windows) $(call isTargetCpu, x86)), true)
 85   DEFAULT_CFG_VARIANT ?= client
 86 endif
 87 DEFAULT_CFG_VARIANT ?= server
</pre>
</td>
<td>
<hr />
<pre>
 42 
 43 endif
 44 
 45 ################################################################################
 46 # Copy the microsoft runtime libraries on windows
 47 ifeq ($(call isTargetOs, windows), true)
 48 
 49   # Chmod to avoid permission issues if bundles are unpacked on unix platforms.
 50   define copy-and-chmod
 51 	$(install-file)
 52 	$(CHMOD) a+rx $@
 53   endef
 54 
 55   # Use separate macro calls in case the source files are not in the same
 56   # directory.
 57   $(eval $(call SetupCopyFiles,COPY_MSVCR, \
 58       DEST := $(LIB_DST_DIR), \
 59       FILES := $(MSVCR_DLL), \
 60       MACRO := copy-and-chmod))
 61 
<span class="line-added"> 62   $(eval $(call SetupCopyFiles,COPY_VCRUNTIME_1, \</span>
<span class="line-added"> 63       DEST := $(LIB_DST_DIR), \</span>
<span class="line-added"> 64       FILES := $(VCRUNTIME_1_DLL), \</span>
<span class="line-added"> 65       MACRO := copy-and-chmod))</span>
<span class="line-added"> 66 </span>
 67   $(eval $(call SetupCopyFiles,COPY_MSVCP, \
 68       DEST := $(LIB_DST_DIR), \
 69       FILES := $(MSVCP_DLL), \
 70       MACRO := copy-and-chmod))
 71 
<span class="line-modified"> 72   TARGETS += $(COPY_MSVCR) $(COPY_VCRUNTIME_1) $(COPY_MSVCP)</span>
 73 
 74   ifneq ($(UCRT_DLL_DIR), )
 75     $(eval $(call SetupCopyFiles, COPY_UCRT_DLLS, \
 76         DEST := $(LIB_DST_DIR), \
 77         SRC := $(UCRT_DLL_DIR), \
 78         FILES := $(wildcard $(UCRT_DLL_DIR)/*.dll), \
 79         MACRO := copy-and-chmod, \
 80     ))
 81 
 82     TARGETS += $(COPY_UCRT_DLLS)
 83   endif
 84 endif
 85 
 86 ################################################################################
 87 # In jvm.cfg, the first listed KNOWN variant is the default. On most build
 88 # configurations, that is the server variant.
 89 ifeq ($(call And, $(call isTargetOs, windows) $(call isTargetCpu, x86)), true)
 90   DEFAULT_CFG_VARIANT ?= client
 91 endif
 92 DEFAULT_CFG_VARIANT ?= server
</pre>
</td>
</tr>
</table>
<center><a href="../common/NativeCompilation.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../devkit/createWindowsDevkit2019.sh.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>