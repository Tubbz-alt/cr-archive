<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old make/nashorn/nbproject/jdk.xml</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
  <body>
    <pre>
  1 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project name=&quot;jdk&quot; basedir=&quot;.&quot;&gt;
  2 &lt;!--
  3  Copyright (c) 2010, 2013, Oracle and/or its affiliates. All rights reserved.
  4  DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  5  
  6  This code is free software; you can redistribute it and/or modify it
  7  under the terms of the GNU General Public License version 2 only, as
  8  published by the Free Software Foundation.
  9  
 10  This code is distributed in the hope that it will be useful, but WITHOUT
 11  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 12  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 13  version 2 for more details (a copy is included in the LICENSE file that
 14  accompanied this code).
 15  
 16  You should have received a copy of the GNU General Public License version
 17  2 along with this work; if not, write to the Free Software Foundation,
 18  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 19  
 20  Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 21  or visit www.oracle.com if you need additional information or have any
 22  questions.
 23 --&gt;
 24 
 25     
 26     &lt;description&gt;
 27         Permits selection of a JDK to use when building and running project.
 28         See: http://www.netbeans.org/issues/show_bug.cgi?id=64160
 29     &lt;/description&gt;
 30 
 31     &lt;target name=&quot;-jdk-pre-preinit&quot;&gt;
 32         &lt;condition property=&quot;nbjdk.active-or-nbjdk.home&quot;&gt;
 33             &lt;or&gt;
 34                 &lt;and&gt;
 35                     &lt;isset property=&quot;nbjdk.active&quot;/&gt;
 36                     &lt;not&gt;
 37                         &lt;equals arg1=&quot;${nbjdk.active}&quot; arg2=&quot;default_platform&quot;/&gt;
 38                     &lt;/not&gt;
 39                 &lt;/and&gt;
 40                 &lt;and&gt;
 41                     &lt;isset property=&quot;nbjdk.home&quot;/&gt;
 42                     &lt;not&gt;
 43                         &lt;isset property=&quot;nbjdk.home.defaulted&quot;/&gt;
 44                     &lt;/not&gt;
 45                 &lt;/and&gt;
 46             &lt;/or&gt;
 47         &lt;/condition&gt;
 48     &lt;/target&gt;
 49 
 50     &lt;target xmlns:common=&quot;http://java.netbeans.org/freeform/jdk.xml&quot; name=&quot;-jdk-preinit&quot; depends=&quot;-jdk-pre-preinit&quot; if=&quot;nbjdk.active-or-nbjdk.home&quot;&gt;
 51         &lt;macrodef name=&quot;property&quot; uri=&quot;http://java.netbeans.org/freeform/jdk.xml&quot;&gt;
 52             &lt;attribute name=&quot;name&quot;/&gt;
 53             &lt;attribute name=&quot;value&quot;/&gt;
 54             &lt;sequential&gt;
 55                 &lt;property name=&quot;@{name}&quot; value=&quot;${@{value}}&quot;/&gt;
 56             &lt;/sequential&gt;
 57         &lt;/macrodef&gt;
 58         &lt;common:property name=&quot;nbjdk.home&quot; value=&quot;platforms.${nbjdk.active}.home&quot;/&gt;
 59         &lt;common:property name=&quot;nbjdk.javac.tmp&quot; value=&quot;platforms.${nbjdk.active}.javac&quot;/&gt;
 60         &lt;condition property=&quot;.exe&quot; value=&quot;.exe&quot;&gt;
 61             &lt;os family=&quot;windows&quot;/&gt; 
 62         &lt;/condition&gt;
 63         &lt;property name=&quot;.exe&quot; value=&quot;&quot;/&gt;
 64         &lt;condition property=&quot;nbjdk.javac&quot; value=&quot;${nbjdk.home}/bin/javac${.exe}&quot;&gt;
 65             &lt;equals arg1=&quot;${nbjdk.javac.tmp}&quot; arg2=&quot;$${platforms.${nbjdk.active}.javac}&quot;/&gt;
 66         &lt;/condition&gt;
 67         &lt;property name=&quot;nbjdk.javac&quot; value=&quot;${nbjdk.javac.tmp}&quot;/&gt;
 68         &lt;common:property name=&quot;nbjdk.java.tmp&quot; value=&quot;platforms.${nbjdk.active}.java&quot;/&gt;
 69         &lt;condition property=&quot;nbjdk.java&quot; value=&quot;${nbjdk.home}/bin/java${.exe}&quot;&gt;
 70             &lt;equals arg1=&quot;${nbjdk.java.tmp}&quot; arg2=&quot;$${platforms.${nbjdk.active}.java}&quot;/&gt;
 71         &lt;/condition&gt;
 72         &lt;property name=&quot;nbjdk.java&quot; value=&quot;${nbjdk.java.tmp}&quot;/&gt;
 73         &lt;common:property name=&quot;nbjdk.javadoc.tmp&quot; value=&quot;platforms.${nbjdk.active}.javadoc&quot;/&gt;
 74         &lt;condition property=&quot;nbjdk.javadoc&quot; value=&quot;${nbjdk.home}/bin/javadoc${.exe}&quot;&gt;
 75             &lt;equals arg1=&quot;${nbjdk.javadoc.tmp}&quot; arg2=&quot;$${platforms.${nbjdk.active}.javadoc}&quot;/&gt;
 76         &lt;/condition&gt;
 77         &lt;property name=&quot;nbjdk.javadoc&quot; value=&quot;${nbjdk.javadoc.tmp}&quot;/&gt;
 78         &lt;common:property name=&quot;nbjdk.bootclasspath.tmp&quot; value=&quot;platforms.${nbjdk.active}.bootclasspath&quot;/&gt;
 79         &lt;condition property=&quot;nbjdk.bootclasspath&quot; value=&quot;${nbjdk.home}/jre/lib/rt.jar&quot;&gt;
 80             &lt;equals arg1=&quot;${nbjdk.bootclasspath.tmp}&quot; arg2=&quot;$${platforms.${nbjdk.active}.bootclasspath}&quot;/&gt;
 81         &lt;/condition&gt;
 82         &lt;property name=&quot;nbjdk.bootclasspath&quot; value=&quot;${nbjdk.bootclasspath.tmp}&quot;/&gt;
 83         &lt;condition property=&quot;nbjdk.valid&quot;&gt;
 84             &lt;and&gt;
 85                 &lt;available file=&quot;${nbjdk.home}&quot; type=&quot;dir&quot;/&gt;
 86                 &lt;available file=&quot;${nbjdk.javac}&quot; type=&quot;file&quot;/&gt;
 87                 &lt;available file=&quot;${nbjdk.java}&quot; type=&quot;file&quot;/&gt;
 88                 &lt;available file=&quot;${nbjdk.javadoc}&quot; type=&quot;file&quot;/&gt;
 89                 
 90             &lt;/and&gt;
 91         &lt;/condition&gt;
 92         &lt;echo level=&quot;verbose&quot;&gt;nbjdk.active=${nbjdk.active} nbjdk.home=${nbjdk.home} nbjdk.java=${nbjdk.java} nbjdk.javac=${nbjdk.javac} nbjdk.javadoc=${nbjdk.javadoc} nbjdk.bootclasspath=${nbjdk.bootclasspath} nbjdk.valid=${nbjdk.valid} have-jdk-1.4=${have-jdk-1.4} have-jdk-1.5=${have-jdk-1.5}&lt;/echo&gt;
 93     &lt;/target&gt;
 94 
 95     &lt;target name=&quot;-jdk-warn&quot; depends=&quot;-jdk-preinit&quot; if=&quot;nbjdk.active-or-nbjdk.home&quot; unless=&quot;nbjdk.valid&quot;&gt;
 96         &lt;property name=&quot;jdkhome.presumed&quot; location=&quot;${java.home}/..&quot;/&gt;
 97         &lt;echo level=&quot;warning&quot;&gt;Warning: nbjdk.active=${nbjdk.active} or nbjdk.home=${nbjdk.home} is an invalid Java platform; ignoring and using ${jdkhome.presumed}&lt;/echo&gt;
 98     &lt;/target&gt;
 99 
100     &lt;target name=&quot;-jdk-presetdef-basic&quot; depends=&quot;-jdk-preinit&quot; if=&quot;nbjdk.valid&quot; unless=&quot;nbjdk.presetdef.basic.done&quot;&gt;
101         
102         
103         &lt;macrodef name=&quot;javac-presetdef&quot;&gt;
104             &lt;attribute name=&quot;javacval&quot;/&gt;
105             &lt;sequential&gt;
106                 &lt;presetdef name=&quot;javac&quot;&gt;
107                     &lt;javac fork=&quot;yes&quot; executable=&quot;@{javacval}&quot;/&gt;
108                 &lt;/presetdef&gt;
109             &lt;/sequential&gt;
110         &lt;/macrodef&gt;
111         &lt;javac-presetdef javacval=&quot;${nbjdk.javac}&quot;/&gt;
112         &lt;macrodef name=&quot;java-presetdef&quot;&gt;
113             &lt;attribute name=&quot;javaval&quot;/&gt;
114             &lt;sequential&gt;
115                 &lt;presetdef name=&quot;java&quot;&gt;
116                     &lt;java fork=&quot;yes&quot; jvm=&quot;@{javaval}&quot;/&gt;
117                 &lt;/presetdef&gt;
118             &lt;/sequential&gt;
119         &lt;/macrodef&gt;
120         &lt;java-presetdef javaval=&quot;${nbjdk.java}&quot;/&gt;
121         &lt;macrodef name=&quot;javadoc-presetdef&quot;&gt;
122             &lt;attribute name=&quot;javadocval&quot;/&gt;
123             &lt;sequential&gt;
124                 &lt;presetdef name=&quot;javadoc&quot;&gt;
125                     &lt;javadoc executable=&quot;@{javadocval}&quot;/&gt;
126                 &lt;/presetdef&gt;
127             &lt;/sequential&gt;
128         &lt;/macrodef&gt;
129         &lt;javadoc-presetdef javadocval=&quot;${nbjdk.javadoc}&quot;/&gt;
130         &lt;macrodef name=&quot;junit-presetdef&quot;&gt;
131             &lt;attribute name=&quot;javaval&quot;/&gt;
132             &lt;sequential&gt;
133                 &lt;presetdef name=&quot;junit&quot;&gt;
134                     &lt;junit fork=&quot;yes&quot; jvm=&quot;@{javaval}&quot;/&gt;
135                 &lt;/presetdef&gt;
136             &lt;/sequential&gt;
137         &lt;/macrodef&gt;
138         &lt;junit-presetdef javaval=&quot;${nbjdk.java}&quot;/&gt;
139         &lt;property name=&quot;nbjdk.presetdef.basic.done&quot; value=&quot;true&quot;/&gt;
140     &lt;/target&gt;
141 
142     &lt;target name=&quot;-jdk-presetdef-nbjpdastart&quot; depends=&quot;-jdk-preinit&quot; if=&quot;nbjdk.valid&quot; unless=&quot;nbjdk.presetdef.nbjpdastart.done&quot;&gt;
143         &lt;macrodef name=&quot;nbjpdastart-presetdef&quot;&gt;
144             &lt;attribute name=&quot;bootcpval&quot;/&gt;
145             &lt;sequential&gt;
146                 &lt;presetdef name=&quot;nbjpdastart&quot;&gt;
147                     &lt;nbjpdastart&gt;
148                         &lt;bootclasspath&gt;
149                             &lt;path path=&quot;@{bootcpval}&quot;/&gt;
150                         &lt;/bootclasspath&gt;
151                     &lt;/nbjpdastart&gt;
152                 &lt;/presetdef&gt;
153             &lt;/sequential&gt;
154         &lt;/macrodef&gt;
155         &lt;nbjpdastart-presetdef bootcpval=&quot;${nbjdk.bootclasspath}&quot;/&gt;
156         &lt;property name=&quot;nbjdk.presetdef.nbjpdastart.done&quot; value=&quot;true&quot;/&gt;
157     &lt;/target&gt;
158 
159     &lt;target name=&quot;-jdk-default&quot; unless=&quot;nbjdk.active-or-nbjdk.home&quot;&gt;
160         
161         &lt;property name=&quot;java.home.parent&quot; location=&quot;${java.home}/..&quot;/&gt;
162         &lt;condition property=&quot;nbjdk.home&quot; value=&quot;${java.home.parent}&quot;&gt;
163             &lt;available file=&quot;${java.home.parent}/lib/tools.jar&quot; type=&quot;file&quot;/&gt;
164         &lt;/condition&gt;
165         &lt;condition property=&quot;nbjdk.home&quot; value=&quot;${java.home}&quot;&gt;
166             &lt;available file=&quot;${java.home}/lib/tools.jar&quot; type=&quot;file&quot;/&gt;
167         &lt;/condition&gt;
168         
169         &lt;condition property=&quot;nbjdk.home&quot; value=&quot;/Library/Java/Home&quot;&gt;
170             &lt;available file=&quot;/Library/Java/Home&quot; type=&quot;dir&quot;/&gt;
171         &lt;/condition&gt;
172         
173         &lt;property name=&quot;nbjdk.home&quot; location=&quot;${java.home.parent}&quot;/&gt;
174         &lt;property name=&quot;nbjdk.home.defaulted&quot; value=&quot;true&quot;/&gt;
175     &lt;/target&gt;
176 
177     &lt;target name=&quot;-jdk-init&quot; depends=&quot;-jdk-preinit,-jdk-warn,-jdk-presetdef-basic,-jdk-default&quot;/&gt;
178 
179 &lt;/project&gt;
    </pre>
  </body>
</html>