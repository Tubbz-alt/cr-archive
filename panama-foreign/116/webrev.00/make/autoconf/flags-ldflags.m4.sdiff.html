<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/autoconf/flags-ldflags.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="flags-cflags.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="jdk-options.m4.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/flags-ldflags.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
135   elif test &quot;x$TOOLCHAIN_TYPE&quot; = xxlc; then
136     # We need &#39;-qminimaltoc&#39; or &#39;-qpic=large -bbigtoc&#39; if the TOC overflows.
137     # Hotspot now overflows its 64K TOC (currently only for debug),
138     # so we build with &#39;-qpic=large -bbigtoc&#39;.
139     if test &quot;x$DEBUG_LEVEL&quot; != xrelease; then
140       DEBUGLEVEL_LDFLAGS_JVM_ONLY=&quot;$DEBUGLEVEL_LDFLAGS_JVM_ONLY -bbigtoc&quot;
141     fi
142   fi
143 
144   # Setup warning flags
145   if test &quot;x$TOOLCHAIN_TYPE&quot; = xsolstudio; then
146     LDFLAGS_WARNINGS_ARE_ERRORS=&quot;-Wl,-z,fatal-warnings&quot;
147   else
148     LDFLAGS_WARNINGS_ARE_ERRORS=&quot;&quot;
149   fi
150   AC_SUBST(LDFLAGS_WARNINGS_ARE_ERRORS)
151 
152   # Setup LDFLAGS for linking executables
153   if test &quot;x$TOOLCHAIN_TYPE&quot; = xgcc; then
154     EXECUTABLE_LDFLAGS=&quot;$EXECUTABLE_LDFLAGS -Wl,--allow-shlib-undefined&quot;











155   fi
156 
157   # Export some intermediate variables for compatibility
158   LDFLAGS_CXX_JDK=&quot;$BASIC_LDFLAGS_ONLYCXX $BASIC_LDFLAGS_ONLYCXX_JDK_ONLY $DEBUGLEVEL_LDFLAGS_JDK_ONLY&quot;
159   AC_SUBST(LDFLAGS_CXX_JDK)
160   AC_SUBST(LIBJSIG_HASHSTYLE_LDFLAGS)
161   AC_SUBST(LIBJSIG_NOEXECSTACK_LDFLAGS)
162 ])
163 
164 ################################################################################
165 # $1 - Either BUILD or TARGET to pick the correct OS/CPU variables to check
166 #      conditionals against.
167 # $2 - Optional prefix for each variable defined.
168 AC_DEFUN([FLAGS_SETUP_LDFLAGS_CPU_DEP],
169 [
170   # Setup CPU-dependent basic LDFLAGS. These can differ between the target and
171   # build toolchain.
172   if test &quot;x$TOOLCHAIN_TYPE&quot; = xgcc; then
173     if test &quot;x${OPENJDK_$1_CPU}&quot; = xx86; then
174       $1_CPU_LDFLAGS_JVM_ONLY=&quot;-march=i586&quot;
</pre>
</td>
<td>
<hr />
<pre>
135   elif test &quot;x$TOOLCHAIN_TYPE&quot; = xxlc; then
136     # We need &#39;-qminimaltoc&#39; or &#39;-qpic=large -bbigtoc&#39; if the TOC overflows.
137     # Hotspot now overflows its 64K TOC (currently only for debug),
138     # so we build with &#39;-qpic=large -bbigtoc&#39;.
139     if test &quot;x$DEBUG_LEVEL&quot; != xrelease; then
140       DEBUGLEVEL_LDFLAGS_JVM_ONLY=&quot;$DEBUGLEVEL_LDFLAGS_JVM_ONLY -bbigtoc&quot;
141     fi
142   fi
143 
144   # Setup warning flags
145   if test &quot;x$TOOLCHAIN_TYPE&quot; = xsolstudio; then
146     LDFLAGS_WARNINGS_ARE_ERRORS=&quot;-Wl,-z,fatal-warnings&quot;
147   else
148     LDFLAGS_WARNINGS_ARE_ERRORS=&quot;&quot;
149   fi
150   AC_SUBST(LDFLAGS_WARNINGS_ARE_ERRORS)
151 
152   # Setup LDFLAGS for linking executables
153   if test &quot;x$TOOLCHAIN_TYPE&quot; = xgcc; then
154     EXECUTABLE_LDFLAGS=&quot;$EXECUTABLE_LDFLAGS -Wl,--allow-shlib-undefined&quot;
<span class="line-added">155     # Enabling pie on 32 bit builds prevents the JVM from allocating a continuous</span>
<span class="line-added">156     # java heap.</span>
<span class="line-added">157     if test &quot;x$OPENJDK_TARGET_CPU_BITS&quot; != &quot;x32&quot;; then</span>
<span class="line-added">158       EXECUTABLE_LDFLAGS=&quot;$EXECUTABLE_LDFLAGS -pie&quot;</span>
<span class="line-added">159     fi</span>
<span class="line-added">160   fi</span>
<span class="line-added">161 </span>
<span class="line-added">162   if test &quot;x$ALLOW_ABSOLUTE_PATHS_IN_OUTPUT&quot; = &quot;xfalse&quot;; then</span>
<span class="line-added">163     if test &quot;x$TOOLCHAIN_TYPE&quot; = xmicrosoft; then</span>
<span class="line-added">164       BASIC_LDFLAGS=&quot;$BASIC_LDFLAGS -pdbaltpath:%_PDB%&quot;</span>
<span class="line-added">165     fi</span>
166   fi
167 
168   # Export some intermediate variables for compatibility
169   LDFLAGS_CXX_JDK=&quot;$BASIC_LDFLAGS_ONLYCXX $BASIC_LDFLAGS_ONLYCXX_JDK_ONLY $DEBUGLEVEL_LDFLAGS_JDK_ONLY&quot;
170   AC_SUBST(LDFLAGS_CXX_JDK)
171   AC_SUBST(LIBJSIG_HASHSTYLE_LDFLAGS)
172   AC_SUBST(LIBJSIG_NOEXECSTACK_LDFLAGS)
173 ])
174 
175 ################################################################################
176 # $1 - Either BUILD or TARGET to pick the correct OS/CPU variables to check
177 #      conditionals against.
178 # $2 - Optional prefix for each variable defined.
179 AC_DEFUN([FLAGS_SETUP_LDFLAGS_CPU_DEP],
180 [
181   # Setup CPU-dependent basic LDFLAGS. These can differ between the target and
182   # build toolchain.
183   if test &quot;x$TOOLCHAIN_TYPE&quot; = xgcc; then
184     if test &quot;x${OPENJDK_$1_CPU}&quot; = xx86; then
185       $1_CPU_LDFLAGS_JVM_ONLY=&quot;-march=i586&quot;
</pre>
</td>
</tr>
</table>
<center><a href="flags-cflags.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="jdk-options.m4.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>