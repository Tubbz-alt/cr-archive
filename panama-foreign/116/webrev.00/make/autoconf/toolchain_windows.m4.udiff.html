<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/autoconf/toolchain_windows.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="spec.gmk.in.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../common/FindTests.gmk.udiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/toolchain_windows.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -88,12 +88,13 @@</span>
  VS_SDK_PLATFORM_NAME_2017=
  VS_SUPPORTED_2017=true
  VS_TOOLSET_SUPPORTED_2017=true
  
  VS_DESCRIPTION_2019=&quot;Microsoft Visual Studio 2019&quot;
<span class="udiff-line-modified-removed">- VS_VERSION_INTERNAL_2019=141</span>
<span class="udiff-line-modified-added">+ VS_VERSION_INTERNAL_2019=142</span>
  VS_MSVCR_2019=vcruntime140.dll
<span class="udiff-line-added">+ VS_VCRUNTIME_1_2019=vcruntime140_1.dll</span>
  VS_MSVCP_2019=msvcp140.dll
  VS_ENVVAR_2019=&quot;VS160COMNTOOLS&quot;
  VS_USE_UCRT_2019=&quot;true&quot;
  VS_VS_INSTALLDIR_2019=&quot;Microsoft Visual Studio/2019&quot;
  VS_EDITIONS_2019=&quot;BuildTools Community Professional Enterprise&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -297,10 +298,11 @@</span>
      if test &quot;x$VS_DESCRIPTION&quot; = x; then
        eval VS_DESCRIPTION=&quot;\${VS_DESCRIPTION_${VS_VERSION}}&quot;
      fi
      eval VS_VERSION_INTERNAL=&quot;\${VS_VERSION_INTERNAL_${VS_VERSION}}&quot;
      eval MSVCR_NAME=&quot;\${VS_MSVCR_${VS_VERSION}}&quot;
<span class="udiff-line-added">+     eval VCRUNTIME_1_NAME=&quot;\${VS_VCRUNTIME_1_${VS_VERSION}}&quot;</span>
      eval MSVCP_NAME=&quot;\${VS_MSVCP_${VS_VERSION}}&quot;
      eval USE_UCRT=&quot;\${VS_USE_UCRT_${VS_VERSION}}&quot;
      eval VS_SUPPORTED=&quot;\${VS_SUPPORTED_${VS_VERSION}}&quot;
      eval PLATFORM_TOOLSET=&quot;\${VS_VS_PLATFORM_NAME_${VS_VERSION}}&quot;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -363,10 +365,11 @@</span>
      if test &quot;x$VS_ENV_CMD&quot; != x; then
        TOOLCHAIN_VERSION=$VS_VERSION
        eval VS_DESCRIPTION=&quot;\${VS_DESCRIPTION_${VS_VERSION}}&quot;
        eval VS_VERSION_INTERNAL=&quot;\${VS_VERSION_INTERNAL_${VS_VERSION}}&quot;
        eval MSVCR_NAME=&quot;\${VS_MSVCR_${VS_VERSION}}&quot;
<span class="udiff-line-added">+       eval VCRUNTIME_1_NAME=&quot;\${VS_VCRUNTIME_1_${VS_VERSION}}&quot;</span>
        eval MSVCP_NAME=&quot;\${VS_MSVCP_${VS_VERSION}}&quot;
        eval USE_UCRT=&quot;\${VS_USE_UCRT_${VS_VERSION}}&quot;
        eval VS_SUPPORTED=&quot;\${VS_SUPPORTED_${VS_VERSION}}&quot;
        # The rest of the variables are already evaled while probing
        AC_MSG_NOTICE([Found $VS_DESCRIPTION])
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -800,10 +803,35 @@</span>
        MSVCP_DLL=&quot;$MSVC_DLL&quot;
      fi
      AC_SUBST(MSVCP_DLL)
    fi
  
<span class="udiff-line-added">+   AC_ARG_WITH(vcruntime-1-dll, [AS_HELP_STRING([--with-vcruntime-1-dll],</span>
<span class="udiff-line-added">+       [path to microsoft C++ runtime dll (vcruntime*_1.dll) (Windows only) @&lt;:@probed@:&gt;@])])</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   if test &quot;x$VCRUNTIME_1_NAME&quot; != &quot;x&quot;; then</span>
<span class="udiff-line-added">+     if test &quot;x$with_vcruntime_1_dll&quot; != x; then</span>
<span class="udiff-line-added">+       # If given explicitly by user, do not probe. If not present, fail directly.</span>
<span class="udiff-line-added">+       TOOLCHAIN_CHECK_POSSIBLE_MSVC_DLL($VCRUNTIME_1_NAME, [$with_vcruntime_1_dll],</span>
<span class="udiff-line-added">+           [--with-vcruntime-1-dll])</span>
<span class="udiff-line-added">+       if test &quot;x$MSVC_DLL&quot; = x; then</span>
<span class="udiff-line-added">+         AC_MSG_ERROR([Could not find a proper $VCRUNTIME_1_NAME as specified by --with-vcruntime-1-dll])</span>
<span class="udiff-line-added">+       fi</span>
<span class="udiff-line-added">+       VCRUNTIME_1_DLL=&quot;$MSVC_DLL&quot;</span>
<span class="udiff-line-added">+     elif test &quot;x$DEVKIT_VCRUNTIME_1_DLL&quot; != x; then</span>
<span class="udiff-line-added">+       TOOLCHAIN_CHECK_POSSIBLE_MSVC_DLL($VCRUNTIME_1_NAME, [$DEVKIT_VCRUNTIME_1_DLL], [devkit])</span>
<span class="udiff-line-added">+       if test &quot;x$MSVC_DLL&quot; = x; then</span>
<span class="udiff-line-added">+         AC_MSG_ERROR([Could not find a proper $VCRUNTIME_1_NAME as specified by devkit])</span>
<span class="udiff-line-added">+       fi</span>
<span class="udiff-line-added">+       VCRUNTIME_1_DLL=&quot;$MSVC_DLL&quot;</span>
<span class="udiff-line-added">+     else</span>
<span class="udiff-line-added">+       TOOLCHAIN_SETUP_MSVC_DLL([${VCRUNTIME_1_NAME}])</span>
<span class="udiff-line-added">+       VCRUNTIME_1_DLL=&quot;$MSVC_DLL&quot;</span>
<span class="udiff-line-added">+     fi</span>
<span class="udiff-line-added">+     AC_SUBST(VCRUNTIME_1_DLL)</span>
<span class="udiff-line-added">+   fi</span>
<span class="udiff-line-added">+ </span>
    AC_ARG_WITH(ucrt-dll-dir, [AS_HELP_STRING([--with-ucrt-dll-dir],
        [path to Microsoft Windows Kit UCRT DLL dir (Windows only) @&lt;:@probed@:&gt;@])])
  
    if test &quot;x$USE_UCRT&quot; = &quot;xtrue&quot;; then
      AC_MSG_CHECKING([for UCRT DLL dir])
</pre>
<center><a href="spec.gmk.in.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../common/FindTests.gmk.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>