<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/nashorn/script/nosecurity/debuggersupportapi.js</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
  <body>
    <pre>
 1 /*
 2  * Copyright (c) 2014, Oracle and/or its affiliates. All rights reserved.
 3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 4  *
 5  * This code is free software; you can redistribute it and/or modify it
 6  * under the terms of the GNU General Public License version 2 only, as
 7  * published by the Free Software Foundation.
 8  *
 9  * This code is distributed in the hope that it will be useful, but WITHOUT
10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
12  * version 2 for more details (a copy is included in the LICENSE file that
13  * accompanied this code).
14  *
15  * You should have received a copy of the GNU General Public License version
16  * 2 along with this work; if not, write to the Free Software Foundation,
17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
18  *
19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
20  * or visit www.oracle.com if you need additional information or have any
21  * questions.
22  */
23 
24 /**
25  * JDK-8044798: API for debugging Nashorn
26  *
27  * @test
28  * @run
29  */
30 
31 // Basic API class, method, field existence checks.
32 
33 // The following classes and the associated methods and fields are used as
34 // private debugger interface. Though private/implementation defined, nashorn
35 // code should not be changed to remove these classes, fields and methods.
36 // The test takes signatures of debugger interface and stores in .EXPECTED file.
37 // If any incompatible change is made to nashorn to break any of these, this
38 // test will fail.
39 
40 var Arrays = Java.type(&quot;java.util.Arrays&quot;);
41 var DebuggerSupport = Java.type(&quot;jdk.nashorn.internal.runtime.DebuggerSupport&quot;);
42 
43 print(DebuggerSupport.class);
44 print();
45 var methods = DebuggerSupport.class.declaredMethods;
46 Arrays.sort(methods, function(m1, m2) m1.name.compareTo(m2.name));
47 for each (var mth in methods) {
48     switch (mth.name) {
49         case &quot;eval&quot;:
50         case &quot;notifyInvoke&quot;:
51         case &quot;getSourceInfo&quot;:
52         case &quot;valueAsString&quot;:
53         case &quot;valueInfos&quot;:
54             print(mth);
55             break;
56         case &quot;valueInfo&quot;:
57             if (mth.parameterCount == 3) {
58                 print(mth);
59             }
60             break;
61     }
62 }
63 print();
64 
65 var DebuggerValueDesc = Java.type(&quot;jdk.nashorn.internal.runtime.DebuggerSupport.DebuggerValueDesc&quot;);
66 print(DebuggerValueDesc.class);
67 print();
68 var fields = DebuggerValueDesc.class.declaredFields;
69 Arrays.sort(fields, function(f1, f2) f1.name.compareTo(f2.name));
70 for each (var fld in fields) {
71     switch (fld.name) {
72         case &quot;key&quot;:
73         case &quot;expandable&quot;:
74         case &quot;valueAsObject&quot;:
75         case &quot;valueAsString&quot;:
76             print(fld);
77     }
78 }
79 print();
80 
81 var SourceInfo = Java.type(&quot;jdk.nashorn.internal.runtime.DebuggerSupport.SourceInfo&quot;);
82 print(SourceInfo.class);
83 print();
84 var fields = SourceInfo.class.declaredFields;
85 Arrays.sort(fields, function(f1, f2) f1.name.compareTo(f2.name));
86 for each (var fld in fields) {
87     switch (fld.name) {
88         case &quot;name&quot;:
89         case &quot;hash&quot;:
90         case &quot;url&quot;:
91         case &quot;content&quot;:
92             print(fld);
93     }
94 }
    </pre>
  </body>
</html>