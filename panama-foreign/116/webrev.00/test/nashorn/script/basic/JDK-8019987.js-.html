<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/nashorn/script/basic/JDK-8019987.js</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2010, 2013, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /**
 25  * JDK-8019987: String trimRight and trimLeft could be defined.
 26  *
 27  * @test
 28  * @run
 29  */
 30 
 31 var TESTSTRING = &quot;abcde&quot;;
 32 
 33 var SPACES                       = &quot;     &quot;;
 34 var TESTSTRING_LEFT_SPACES       = SPACES + TESTSTRING;
 35 var TESTSTRING_RIGHT_SPACES      = TESTSTRING + SPACES;
 36 var TESTSTRING_BOTH_SPACES       = SPACES + TESTSTRING + SPACES;
 37 var TESTSTRING_MIDDLE_SPACES     = TESTSTRING + SPACES + TESTSTRING;
 38 
 39 var WHITESPACE =
 40         &quot; \t&quot;    + // space and tab
 41         &quot;\n\r&quot;   + // newline and return
 42         &quot;\u2028&quot; + // line separator
 43         &quot;\u2029&quot; + // paragraph separator
 44         &quot;\u000b&quot; + // tabulation line
 45         &quot;\u000c&quot; + // ff (ctrl-l)
 46         &quot;\u00a0&quot; + // Latin-1 space
 47         &quot;\u1680&quot; + // Ogham space mark
 48         &quot;\u180e&quot; + // separator, Mongolian vowel
 49         &quot;\u2000&quot; + // en quad
 50         &quot;\u2001&quot; + // em quad
 51         &quot;\u2002&quot; + // en space
 52         &quot;\u2003&quot; + // em space
 53         &quot;\u2004&quot; + // three-per-em space
 54         &quot;\u2005&quot; + // four-per-em space
 55         &quot;\u2006&quot; + // six-per-em space
 56         &quot;\u2007&quot; + // figure space
 57         &quot;\u2008&quot; + // punctuation space
 58         &quot;\u2009&quot; + // thin space
 59         &quot;\u200a&quot; + // hair space
 60         &quot;\u202f&quot; + // narrow no-break space
 61         &quot;\u205f&quot; + // medium mathematical space
 62         &quot;\u3000&quot; + // ideographic space
 63         &quot;\ufeff&quot;;  // byte order mark
 64 var TESTSTRING_LEFT_WHITESPACE   = WHITESPACE + TESTSTRING;
 65 var TESTSTRING_RIGHT_WHITESPACE  = TESTSTRING + WHITESPACE;
 66 var TESTSTRING_BOTH_WHITESPACE   = WHITESPACE + TESTSTRING + WHITESPACE;
 67 var TESTSTRING_MIDDLE_WHITESPACE = TESTSTRING + WHITESPACE + TESTSTRING;
 68 
 69 function escape(string) {
 70     var sb = new java.lang.StringBuilder();
 71     sb.append(&quot;\&quot;&quot;);
 72 
 73     for (var i = 0; i &lt; string.length; i++) {
 74         var ch = string.charAt(i);
 75 
 76         switch (ch) {
 77         case &#39;\\&#39;:
 78             sb.append(&quot;\\\\&quot;);
 79             break;
 80         case &#39;&quot;&#39;:
 81             sb.append(&quot;\\\&quot;&quot;);
 82             break;
 83         case &#39;\&#39;&#39;:
 84             sb.append(&quot;\\\&#39;&quot;);
 85             break;
 86         case &#39;\b&#39;:
 87             sb.append(&quot;\\b&quot;);
 88             break;
 89         case &#39;\f&#39;:
 90             sb.append(&quot;\\f&quot;);
 91             break;
 92         case &#39;\n&#39;:
 93             sb.append(&quot;\\n&quot;);
 94             break;
 95         case &#39;\r&#39;:
 96             sb.append(&quot;\\r&quot;);
 97             break;
 98         case &#39;\t&#39;:
 99             sb.append(&quot;\\t&quot;);
100             break;
101         default:
102             var code = string.charCodeAt(i);
103 
104             if (code &lt; 0x20 || code &gt;= 0xFF) {
105                 sb.append(&quot;\\u&quot;);
106 
107                 var hex = java.lang.Integer.toHexString(code);
108                 for (var i = hex.length; i &lt; 4; i++) {
109                     sb.append(&#39;0&#39;);
110                 }
111                 sb.append(hex);
112             } else {
113                 sb.append(ch);
114             }
115 
116             break;
117         }
118     }
119 
120     sb.append(&quot;\&quot;&quot;);
121 
122     return sb.toString();
123 }
124 
125 var count = 0;
126 function test(expected, trimmed) {
127     count++;
128     if (trimmed != expected) {
129         print(count + &quot;: Expected: &quot; + escape(expected) + &quot;, found: &quot; + escape(trimmed));
130     }
131 }
132 
133 test(&quot;&quot;,                           SPACES.trim());
134 test(&quot;&quot;,                           SPACES.trimLeft());
135 test(&quot;&quot;,                           SPACES.trimRight());
136 
137 test(TESTSTRING,                   TESTSTRING_LEFT_SPACES.trim());
138 test(TESTSTRING,                   TESTSTRING_LEFT_SPACES.trimLeft());
139 test(TESTSTRING_LEFT_SPACES,       TESTSTRING_LEFT_SPACES.trimRight());
140 
141 test(TESTSTRING,                   TESTSTRING_RIGHT_SPACES.trim());
142 test(TESTSTRING_RIGHT_SPACES,      TESTSTRING_RIGHT_SPACES.trimLeft());
143 test(TESTSTRING,                   TESTSTRING_RIGHT_SPACES.trimRight());
144 
145 test(TESTSTRING,                   TESTSTRING_BOTH_SPACES.trim());
146 test(TESTSTRING_RIGHT_SPACES,      TESTSTRING_BOTH_SPACES.trimLeft());
147 test(TESTSTRING_LEFT_SPACES,       TESTSTRING_BOTH_SPACES.trimRight());
148 
149 test(TESTSTRING_MIDDLE_SPACES,     TESTSTRING_MIDDLE_SPACES.trim());
150 test(TESTSTRING_MIDDLE_SPACES,     TESTSTRING_MIDDLE_SPACES.trimLeft());
151 test(TESTSTRING_MIDDLE_SPACES,     TESTSTRING_MIDDLE_SPACES.trimRight());
152 
153 test(&quot;&quot;,                           WHITESPACE.trim());
154 test(&quot;&quot;,                           WHITESPACE.trimLeft());
155 test(&quot;&quot;,                           WHITESPACE.trimRight());
156 
157 test(TESTSTRING,                   TESTSTRING_LEFT_WHITESPACE.trim());
158 test(TESTSTRING,                   TESTSTRING_LEFT_WHITESPACE.trimLeft());
159 test(TESTSTRING_LEFT_WHITESPACE,   TESTSTRING_LEFT_WHITESPACE.trimRight());
160 
161 test(TESTSTRING,                   TESTSTRING_RIGHT_WHITESPACE.trim());
162 test(TESTSTRING_RIGHT_WHITESPACE,  TESTSTRING_RIGHT_WHITESPACE.trimLeft());
163 test(TESTSTRING,                   TESTSTRING_RIGHT_WHITESPACE.trimRight());
164 
165 test(TESTSTRING,                   TESTSTRING_BOTH_WHITESPACE.trim());
166 test(TESTSTRING_RIGHT_WHITESPACE,  TESTSTRING_BOTH_WHITESPACE.trimLeft());
167 test(TESTSTRING_LEFT_WHITESPACE,   TESTSTRING_BOTH_WHITESPACE.trimRight());
168 
169 test(TESTSTRING_MIDDLE_WHITESPACE, TESTSTRING_MIDDLE_WHITESPACE.trim());
170 test(TESTSTRING_MIDDLE_WHITESPACE, TESTSTRING_MIDDLE_WHITESPACE.trimLeft());
171 test(TESTSTRING_MIDDLE_WHITESPACE, TESTSTRING_MIDDLE_WHITESPACE.trimRight());
    </pre>
  </body>
</html>