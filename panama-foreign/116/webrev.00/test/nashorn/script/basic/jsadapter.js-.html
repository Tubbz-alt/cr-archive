<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/nashorn/script/basic/jsadapter.js</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2010, 2015, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /**
 25  * Verify that JSAdapter works as expected.
 26  *
 27  * @test
 28  * @run
 29  */
 30 
 31 var obj = new JSAdapter() {
 32     __get__: function(name) {
 33         Assert.assertTrue(this === obj);
 34         print(&quot;getter called for &#39;&quot; + name + &quot;&#39;&quot;); return name;
 35     },
 36 
 37     __put__: function(name, value) {
 38         Assert.assertTrue(this === obj);
 39         print(&quot;setter called for &#39;&quot; + name + &quot;&#39; with &quot; + value);
 40     },
 41 
 42     __call__: function(name, arg1, arg2) {
 43         Assert.assertTrue(this === obj);
 44         print(&quot;method &#39;&quot; + name + &quot;&#39; called with &quot; + arg1 + &quot;, &quot; + arg2);
 45     },
 46 
 47     __new__: function(arg1, arg2) {
 48         Assert.assertTrue(this === obj);
 49         print(&quot;new with &quot; + arg1 + &quot;, &quot; + arg2);
 50     },
 51 
 52     __getKeys__: function() {
 53         Assert.assertTrue(this === obj);
 54         print(&quot;__getKeys__ called&quot;);
 55         return [ &quot;foo&quot;, &quot;bar&quot; ];
 56     },
 57 
 58     __getValues__: function() {
 59         Assert.assertTrue(this === obj);
 60         print(&quot;__getValues__ called&quot;);
 61         return [ &quot;fooval&quot;, &quot;barval&quot; ];
 62     },
 63 
 64     __has__: function(name) {
 65         Assert.assertTrue(this === obj);
 66         print(&quot;__has__ called with &#39;&quot; + name + &quot;&#39;&quot;);
 67         return name == &quot;js&quot;;
 68     },
 69 
 70     __delete__: function(name) {
 71         Assert.assertTrue(this === obj);
 72         print(&quot;__delete__ called with &#39;&quot; + name + &quot;&#39;&quot;);
 73         return true;
 74     },
 75 
 76     __preventExtensions__ : function() {
 77         Assert.assertTrue(this === obj);
 78         print(&quot;__preventExtensions__ called&quot;);
 79     },
 80 
 81     __freeze__ : function() {
 82         Assert.assertTrue(this === obj);
 83         print(&quot;__freeze__ called&quot;);
 84 
 85     },
 86 
 87     __isFrozen__ : function() {
 88         Assert.assertTrue(this === obj);
 89         print(&quot;__isFrozen__ called&quot;);
 90         return false;
 91     },
 92 
 93     __seal__ : function() {
 94         Assert.assertTrue(this === obj);
 95         print(&quot;__seal__ called&quot;);
 96     },
 97 
 98     __isSealed__ : function() {
 99         Assert.assertTrue(this === obj);
100         print(&quot;__isSealed__ called&quot;);
101         return false;
102     },
103 
104     __isExtensible__ : function() {
105         Assert.assertTrue(this === obj);
106         print(&quot;__isExtensible__ called&quot;);
107         return true;
108     }
109 };
110 
111 // calls __get__
112 print(obj.foo);
113 
114 // calls __put__
115 obj.foo = 33;
116 
117 // calls __call__
118 obj.func(&quot;hello&quot;, &quot;world&quot;);
119 
120 // calls __new__
121 new obj(&quot;hey!&quot;, &quot;it works!&quot;);
122 
123 // calls __getKeys__
124 for (i in obj) {
125     print(i);
126 }
127 
128 // calls __getValues__
129 for each (i in obj) {
130     print(i);
131 }
132 
133 // calls __has__
134 var x = &quot;foo&quot; in obj;
135 print(x);
136 
137 // calls __has__
138 var y = &quot;js&quot; in obj;
139 print(y);
140 
141 // calls __delete__
142 print(delete obj.prop);
143 
144 // call __get__ and __set__
145 print(obj[&quot;js&quot;]);
146 obj[&quot;js&quot;] = &quot;javascript&quot;;
147 print(obj[&quot;javascript&quot;]);
148 
149 // call __isExtensible__, __isSealed__, __isFrozen__
150 print(Object.isExtensible(obj));
151 print(Object.isSealed(obj));
152 print(Object.isFrozen(obj));
153 
154 // call __freeze__, __seal__, __preventExtensions__
155 Object.freeze(obj);
156 Object.seal(obj);
157 Object.preventExtensions(obj);
    </pre>
  </body>
</html>