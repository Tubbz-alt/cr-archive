<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/nashorn/script/trusted/urlreader.js</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
  <body>
    <pre>
 1 /**
 2  * JDK-8008305: ScriptEngine.eval should offer the ability to provide a codebase
 3  *
 4  * @test
 5  * @run
 6  */
 7 
 8 var URLReader = Java.type(&quot;jdk.nashorn.api.scripting.URLReader&quot;);
 9 var URL = Java.type(&quot;java.net.URL&quot;);
10 var File = Java.type(&quot;java.io.File&quot;);
11 var JString = Java.type(&quot;java.lang.String&quot;);
12 var SourceHelper = Java.type(&quot;jdk.nashorn.test.models.SourceHelper&quot;);
13 
14 var url = new File(__FILE__).toURI().toURL();
15 var reader = new URLReader(url);
16 
17 // check URLReader.getURL() method
18 //Assert.assertEquals(url, reader.getURL());
19 
20 // check URL read
21 // read URL content by directly reading from URL
22 var str = SourceHelper.readFully(url);
23 // read URL content via URLReader
24 var content = new JString(SourceHelper.readFully(reader));
25 
26 // assert that the content is same
27 Assert.assertEquals(str, content);
    </pre>
  </body>
</html>