<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/tools/jlink/JLinkTest.java</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../jar/multiRelease/RuntimeTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="ModuleNamesOrderTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/tools/jlink/JLinkTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 92             // number of built-in plugins
 93             List&lt;Plugin&gt; builtInPlugins = new ArrayList&lt;&gt;();
 94             builtInPlugins.addAll(PluginRepository.getPlugins(ModuleLayer.boot()));
 95             totalPlugins = builtInPlugins.size();
 96             // actual num. of plugins loaded from jdk.jlink module
 97             int actualJLinkPlugins = 0;
 98             for (Plugin p : builtInPlugins) {
 99                 p.getState();
100                 p.getType();
101                 if (isOfJLinkModule(p)) {
102                     actualJLinkPlugins++;
103                 }
104             }
105             if (expectedJLinkPlugins != actualJLinkPlugins) {
106                 throw new AssertionError(&quot;Actual plugins loaded from jdk.jlink: &quot; +
107                         actualJLinkPlugins + &quot; which doesn&#39;t match expected number : &quot; +
108                         expectedJLinkPlugins);
109             }
110         }
111 
<span class="line-removed">112         {</span>
<span class="line-removed">113             // No --module-path specified. $JAVA_HOME/jmods should be assumed.</span>
<span class="line-removed">114             // The following should succeed as it uses only system modules.</span>
<span class="line-removed">115             String imageDir = &quot;bug818977-no-modulepath&quot;;</span>
<span class="line-removed">116             JImageGenerator.getJLinkTask()</span>
<span class="line-removed">117                     .output(helper.createNewImageDir(imageDir))</span>
<span class="line-removed">118                     .addMods(&quot;jdk.scripting.nashorn&quot;)</span>
<span class="line-removed">119                     .call().assertSuccess();</span>
<span class="line-removed">120         }</span>
<span class="line-removed">121 </span>
<span class="line-removed">122         {</span>
<span class="line-removed">123             // invalid --module-path specified. java.base not found it it.</span>
<span class="line-removed">124             // $JAVA_HOME/jmods should be added automatically.</span>
<span class="line-removed">125             // The following should succeed as it uses only system modules.</span>
<span class="line-removed">126             String imageDir = &quot;bug8189777-invalid-modulepath&quot;;</span>
<span class="line-removed">127             JImageGenerator.getJLinkTask()</span>
<span class="line-removed">128                     .modulePath(&quot;does_not_exist_path&quot;)</span>
<span class="line-removed">129                     .output(helper.createNewImageDir(imageDir))</span>
<span class="line-removed">130                     .addMods(&quot;jdk.scripting.nashorn&quot;)</span>
<span class="line-removed">131                     .call().assertSuccess();</span>
<span class="line-removed">132         }</span>
<span class="line-removed">133 </span>
134         {
135             // No --module-path specified. --add-modules ALL-MODULE-PATH specified.
136             String imageDir = &quot;bug8189777-all-module-path&quot;;
137             JImageGenerator.getJLinkTask()
138                     .output(helper.createNewImageDir(imageDir))
139                     .addMods(&quot;ALL-MODULE-PATH&quot;)
140                     .call().assertSuccess();
141         }
142 
143         {
144             String moduleName = &quot;bug8134651&quot;;
145             JImageGenerator.getJLinkTask()
146                     .modulePath(helper.defaultModulePath())
147                     .output(helper.createNewImageDir(moduleName))
148                     .addMods(&quot;leaf1&quot;)
149                     .call().assertSuccess();
150             JImageGenerator.getJLinkTask()
151                     .modulePath(helper.defaultModulePath())
152                     .addMods(&quot;leaf1&quot;)
153                     .option(&quot;--output&quot;)
</pre>
</td>
<td>
<hr />
<pre>
 92             // number of built-in plugins
 93             List&lt;Plugin&gt; builtInPlugins = new ArrayList&lt;&gt;();
 94             builtInPlugins.addAll(PluginRepository.getPlugins(ModuleLayer.boot()));
 95             totalPlugins = builtInPlugins.size();
 96             // actual num. of plugins loaded from jdk.jlink module
 97             int actualJLinkPlugins = 0;
 98             for (Plugin p : builtInPlugins) {
 99                 p.getState();
100                 p.getType();
101                 if (isOfJLinkModule(p)) {
102                     actualJLinkPlugins++;
103                 }
104             }
105             if (expectedJLinkPlugins != actualJLinkPlugins) {
106                 throw new AssertionError(&quot;Actual plugins loaded from jdk.jlink: &quot; +
107                         actualJLinkPlugins + &quot; which doesn&#39;t match expected number : &quot; +
108                         expectedJLinkPlugins);
109             }
110         }
111 






















112         {
113             // No --module-path specified. --add-modules ALL-MODULE-PATH specified.
114             String imageDir = &quot;bug8189777-all-module-path&quot;;
115             JImageGenerator.getJLinkTask()
116                     .output(helper.createNewImageDir(imageDir))
117                     .addMods(&quot;ALL-MODULE-PATH&quot;)
118                     .call().assertSuccess();
119         }
120 
121         {
122             String moduleName = &quot;bug8134651&quot;;
123             JImageGenerator.getJLinkTask()
124                     .modulePath(helper.defaultModulePath())
125                     .output(helper.createNewImageDir(moduleName))
126                     .addMods(&quot;leaf1&quot;)
127                     .call().assertSuccess();
128             JImageGenerator.getJLinkTask()
129                     .modulePath(helper.defaultModulePath())
130                     .addMods(&quot;leaf1&quot;)
131                     .option(&quot;--output&quot;)
</pre>
</td>
</tr>
</table>
<center><a href="../jar/multiRelease/RuntimeTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="ModuleNamesOrderTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>