<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.jfr/share/classes/jdk/jfr/internal/dcmd/DCmdStart.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DCmdDump.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../instrument/JDKEvents.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jfr/share/classes/jdk/jfr/internal/dcmd/DCmdStart.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 74      * @param maxSize the minimum amount data to keep in the disk repository
 75      *        before it is discarded, or &lt;code&gt;0&lt;/code&gt; if no limit should be
 76      *        set.
 77      *
 78      * @param dumpOnExit if recording should dump on exit
 79      *
 80      * @return result output
 81      *
 82      * @throws DCmdException if recording could not be started
 83      */
 84     @SuppressWarnings(&quot;resource&quot;)
 85     public String execute(String name, String[] settings, Long delay, Long duration, Boolean disk, String path, Long maxAge, Long maxSize, Long flush, Boolean dumpOnExit, Boolean pathToGcRoots) throws DCmdException {
 86         if (Logger.shouldLog(LogTag.JFR_DCMD, LogLevel.DEBUG)) {
 87             Logger.log(LogTag.JFR_DCMD, LogLevel.DEBUG, &quot;Executing DCmdStart: name=&quot; + name +
 88                     &quot;, settings=&quot; + Arrays.asList(settings) +
 89                     &quot;, delay=&quot; + delay +
 90                     &quot;, duration=&quot; + duration +
 91                     &quot;, disk=&quot; + disk+
 92                     &quot;, filename=&quot; + path +
 93                     &quot;, maxage=&quot; + maxAge +
<span class="line-modified"> 94                     &quot;, flush=&quot; + flush +</span>
 95                     &quot;, maxsize=&quot; + maxSize +
<span class="line-modified"> 96                     &quot;, dumponexit =&quot; + dumpOnExit +</span>
 97                     &quot;, path-to-gc-roots=&quot; + pathToGcRoots);
 98         }
 99         if (name != null) {
100             try {
101                 Integer.parseInt(name);
102                 throw new DCmdException(&quot;Name of recording can&#39;t be numeric&quot;);
103             } catch (NumberFormatException nfe) {
104                 // ok, can&#39;t be mixed up with name
105             }
106         }
107 
108         if (duration == null &amp;&amp; Boolean.FALSE.equals(dumpOnExit) &amp;&amp; path != null) {
109             throw new DCmdException(&quot;Filename can only be set for a time bound recording or if dumponexit=true. Set duration/dumponexit or omit filename.&quot;);
110         }
111         if (settings.length == 1 &amp;&amp; settings[0].length() == 0) {
112             throw new DCmdException(&quot;No settings specified. Use settings=none to start without any settings&quot;);
113         }
114         Map&lt;String, String&gt; s = new HashMap&lt;&gt;();
115         for (String configName : settings) {
116             try {
</pre>
</td>
<td>
<hr />
<pre>
 74      * @param maxSize the minimum amount data to keep in the disk repository
 75      *        before it is discarded, or &lt;code&gt;0&lt;/code&gt; if no limit should be
 76      *        set.
 77      *
 78      * @param dumpOnExit if recording should dump on exit
 79      *
 80      * @return result output
 81      *
 82      * @throws DCmdException if recording could not be started
 83      */
 84     @SuppressWarnings(&quot;resource&quot;)
 85     public String execute(String name, String[] settings, Long delay, Long duration, Boolean disk, String path, Long maxAge, Long maxSize, Long flush, Boolean dumpOnExit, Boolean pathToGcRoots) throws DCmdException {
 86         if (Logger.shouldLog(LogTag.JFR_DCMD, LogLevel.DEBUG)) {
 87             Logger.log(LogTag.JFR_DCMD, LogLevel.DEBUG, &quot;Executing DCmdStart: name=&quot; + name +
 88                     &quot;, settings=&quot; + Arrays.asList(settings) +
 89                     &quot;, delay=&quot; + delay +
 90                     &quot;, duration=&quot; + duration +
 91                     &quot;, disk=&quot; + disk+
 92                     &quot;, filename=&quot; + path +
 93                     &quot;, maxage=&quot; + maxAge +
<span class="line-modified"> 94                     &quot;, flush-interval=&quot; + flush +</span>
 95                     &quot;, maxsize=&quot; + maxSize +
<span class="line-modified"> 96                     &quot;, dumponexit=&quot; + dumpOnExit +</span>
 97                     &quot;, path-to-gc-roots=&quot; + pathToGcRoots);
 98         }
 99         if (name != null) {
100             try {
101                 Integer.parseInt(name);
102                 throw new DCmdException(&quot;Name of recording can&#39;t be numeric&quot;);
103             } catch (NumberFormatException nfe) {
104                 // ok, can&#39;t be mixed up with name
105             }
106         }
107 
108         if (duration == null &amp;&amp; Boolean.FALSE.equals(dumpOnExit) &amp;&amp; path != null) {
109             throw new DCmdException(&quot;Filename can only be set for a time bound recording or if dumponexit=true. Set duration/dumponexit or omit filename.&quot;);
110         }
111         if (settings.length == 1 &amp;&amp; settings[0].length() == 0) {
112             throw new DCmdException(&quot;No settings specified. Use settings=none to start without any settings&quot;);
113         }
114         Map&lt;String, String&gt; s = new HashMap&lt;&gt;();
115         for (String configName : settings) {
116             try {
</pre>
</td>
</tr>
</table>
<center><a href="DCmdDump.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../instrument/JDKEvents.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>