<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/java.base/share/classes/javax/security/auth/callback/ConfirmationCallback.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 1999, 2019, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package javax.security.auth.callback;
 27 
 28 /**
 29  * &lt;p&gt; Underlying security services instantiate and pass a
 30  * {@code ConfirmationCallback} to the {@code handle}
 31  * method of a {@code CallbackHandler} to ask for YES/NO,
 32  * OK/CANCEL, YES/NO/CANCEL or other similar confirmations.
 33  *
 34  * @since 1.4
 35  * @see javax.security.auth.callback.CallbackHandler
 36  */
 37 public class ConfirmationCallback implements Callback, java.io.Serializable {
 38 
 39     @java.io.Serial
 40     private static final long serialVersionUID = -9095656433782481624L;
 41 
 42     /**
 43      * Unspecified option type.
 44      *
 45      * &lt;p&gt; The {@code getOptionType} method returns this
 46      * value if this {@code ConfirmationCallback} was instantiated
 47      * with {@code options} instead of an {@code optionType}.
 48      */
 49     public static final int UNSPECIFIED_OPTION          = -1;
 50 
 51     /**
 52      * YES/NO confirmation option.
 53      *
 54      * &lt;p&gt; An underlying security service specifies this as the
 55      * {@code optionType} to a {@code ConfirmationCallback}
 56      * constructor if it requires a confirmation which can be answered
 57      * with either {@code YES} or {@code NO}.
 58      */
 59     public static final int YES_NO_OPTION               = 0;
 60 
 61     /**
 62      * YES/NO/CANCEL confirmation option.
 63      *
 64      * &lt;p&gt; An underlying security service specifies this as the
 65      * {@code optionType} to a {@code ConfirmationCallback}
 66      * constructor if it requires a confirmation which can be answered
 67      * with either {@code YES}, {@code NO} or {@code CANCEL}.
 68      */
 69     public static final int YES_NO_CANCEL_OPTION        = 1;
 70 
 71     /**
 72      * OK/CANCEL confirmation option.
 73      *
 74      * &lt;p&gt; An underlying security service specifies this as the
 75      * {@code optionType} to a {@code ConfirmationCallback}
 76      * constructor if it requires a confirmation which can be answered
 77      * with either {@code OK} or {@code CANCEL}.
 78      */
 79     public static final int OK_CANCEL_OPTION            = 2;
 80 
 81     /**
 82      * YES option.
 83      *
 84      * &lt;p&gt; If an {@code optionType} was specified to this
 85      * {@code ConfirmationCallback}, this option may be specified as a
 86      * {@code defaultOption} or returned as the selected index.
 87      */
 88     public static final int YES                         = 0;
 89 
 90     /**
 91      * NO option.
 92      *
 93      * &lt;p&gt; If an {@code optionType} was specified to this
 94      * {@code ConfirmationCallback}, this option may be specified as a
 95      * {@code defaultOption} or returned as the selected index.
 96      */
 97     public static final int NO                          = 1;
 98 
 99     /**
100      * CANCEL option.
101      *
102      * &lt;p&gt; If an {@code optionType} was specified to this
103      * {@code ConfirmationCallback}, this option may be specified as a
104      * {@code defaultOption} or returned as the selected index.
105      */
106     public static final int CANCEL                      = 2;
107 
108     /**
109      * OK option.
110      *
111      * &lt;p&gt; If an {@code optionType} was specified to this
112      * {@code ConfirmationCallback}, this option may be specified as a
113      * {@code defaultOption} or returned as the selected index.
114      */
115     public static final int OK                          = 3;
116 
117     /** INFORMATION message type.  */
118     public static final int INFORMATION                 = 0;
119 
120     /** WARNING message type. */
121     public static final int WARNING                     = 1;
122 
123     /** ERROR message type. */
124     public static final int ERROR                       = 2;
125     /**
126      * @serial
127      * @since 1.4
128      */
129     private String prompt;
130     /**
131      * @serial
132      * @since 1.4
133      */
134     private int messageType;
135     /**
136      * @serial
137      * @since 1.4
138      */
139     private int optionType = UNSPECIFIED_OPTION;
140     /**
141      * @serial
142      * @since 1.4
143      */
144     private int defaultOption;
145     /**
146      * @serial
147      * @since 1.4
148      */
149     private String[] options;
150     /**
151      * @serial
152      * @since 1.4
153      */
154     private int selection;
155 
156     /**
157      * Construct a {@code ConfirmationCallback} with a
158      * message type, an option type and a default option.
159      *
160      * &lt;p&gt; Underlying security services use this constructor if
161      * they require either a YES/NO, YES/NO/CANCEL or OK/CANCEL
162      * confirmation.
163      *
164      * @param messageType the message type ({@code INFORMATION},
165      *                  {@code WARNING} or {@code ERROR}).
166      *
167      * @param optionType the option type ({@code YES_NO_OPTION},
168      *                  {@code YES_NO_CANCEL_OPTION} or
169      *                  {@code OK_CANCEL_OPTION}).
170      *
171      * @param defaultOption the default option
172      *                  from the provided optionType ({@code YES},
173      *                  {@code NO}, {@code CANCEL} or
174      *                  {@code OK}).
175      *
176      * @exception IllegalArgumentException if messageType is not either
177      *                  {@code INFORMATION}, {@code WARNING},
178      *                  or {@code ERROR}, if optionType is not either
179      *                  {@code YES_NO_OPTION},
180      *                  {@code YES_NO_CANCEL_OPTION}, or
181      *                  {@code OK_CANCEL_OPTION},
182      *                  or if {@code defaultOption}
183      *                  does not correspond to one of the options in
184      *                  {@code optionType}.
185      */
186     public ConfirmationCallback(int messageType,
187                 int optionType, int defaultOption) {
188 
189         if (messageType &lt; INFORMATION || messageType &gt; ERROR ||
190             optionType &lt; YES_NO_OPTION || optionType &gt; OK_CANCEL_OPTION)
191             throw new IllegalArgumentException();
192 
193         switch (optionType) {
194         case YES_NO_OPTION:
195             if (defaultOption != YES &amp;&amp; defaultOption != NO)
196                 throw new IllegalArgumentException();
197             break;
198         case YES_NO_CANCEL_OPTION:
199             if (defaultOption != YES &amp;&amp; defaultOption != NO &amp;&amp;
200                 defaultOption != CANCEL)
201                 throw new IllegalArgumentException();
202             break;
203         case OK_CANCEL_OPTION:
204             if (defaultOption != OK &amp;&amp; defaultOption != CANCEL)
205                 throw new IllegalArgumentException();
206             break;
207         }
208 
209         this.messageType = messageType;
210         this.optionType = optionType;
211         this.defaultOption = defaultOption;
212     }
213 
214     /**
215      * Construct a {@code ConfirmationCallback} with a
216      * message type, a list of options and a default option.
217      *
218      * &lt;p&gt; Underlying security services use this constructor if
219      * they require a confirmation different from the available preset
220      * confirmations provided (for example, CONTINUE/ABORT or STOP/GO).
221      * The confirmation options are listed in the {@code options} array,
222      * and are displayed by the {@code CallbackHandler} implementation
223      * in a manner consistent with the way preset options are displayed.
224      *
225      * @param messageType the message type ({@code INFORMATION},
226      *                  {@code WARNING} or {@code ERROR}).
227      *
228      * @param options the list of confirmation options.
229      *
230      * @param defaultOption the default option, represented as an index
231      *                  into the {@code options} array.
232      *
233      * @exception IllegalArgumentException if messageType is not either
234      *                  {@code INFORMATION}, {@code WARNING},
235      *                  or {@code ERROR}, if {@code options} is null,
236      *                  if {@code options} has a length of 0,
237      *                  if any element from {@code options} is null,
238      *                  if any element from {@code options}
239      *                  has a length of 0, or if {@code defaultOption}
240      *                  does not lie within the array boundaries of
241      *                  {@code options}.
242      */
243     public ConfirmationCallback(int messageType,
244                 String[] options, int defaultOption) {
245 
246         if (messageType &lt; INFORMATION || messageType &gt; ERROR ||
247             options == null || options.length == 0 ||
248             defaultOption &lt; 0 || defaultOption &gt;= options.length)
249             throw new IllegalArgumentException();
250 
251         for (int i = 0; i &lt; options.length; i++) {
252             if (options[i] == null || options[i].isEmpty())
253                 throw new IllegalArgumentException();
254         }
255 
256         this.messageType = messageType;
257         this.options = options;
258         this.defaultOption = defaultOption;
259     }
260 
261     /**
262      * Construct a {@code ConfirmationCallback} with a prompt,
263      * message type, an option type and a default option.
264      *
265      * &lt;p&gt; Underlying security services use this constructor if
266      * they require either a YES/NO, YES/NO/CANCEL or OK/CANCEL
267      * confirmation.
268      *
269      * @param prompt the prompt used to describe the list of options.
270      *
271      * @param messageType the message type ({@code INFORMATION},
272      *                  {@code WARNING} or {@code ERROR}).
273      *
274      * @param optionType the option type ({@code YES_NO_OPTION},
275      *                  {@code YES_NO_CANCEL_OPTION} or
276      *                  {@code OK_CANCEL_OPTION}).
277      *
278      * @param defaultOption the default option
279      *                  from the provided optionType ({@code YES},
280      *                  {@code NO}, {@code CANCEL} or
281      *                  {@code OK}).
282      *
283      * @exception IllegalArgumentException if {@code prompt} is null,
284      *                  if {@code prompt} has a length of 0,
285      *                  if messageType is not either
286      *                  {@code INFORMATION}, {@code WARNING},
287      *                  or {@code ERROR}, if optionType is not either
288      *                  {@code YES_NO_OPTION},
289      *                  {@code YES_NO_CANCEL_OPTION}, or
290      *                  {@code OK_CANCEL_OPTION},
291      *                  or if {@code defaultOption}
292      *                  does not correspond to one of the options in
293      *                  {@code optionType}.
294      */
295     public ConfirmationCallback(String prompt, int messageType,
296                 int optionType, int defaultOption) {
297 
298         if (prompt == null || prompt.isEmpty() ||
299             messageType &lt; INFORMATION || messageType &gt; ERROR ||
300             optionType &lt; YES_NO_OPTION || optionType &gt; OK_CANCEL_OPTION)
301             throw new IllegalArgumentException();
302 
303         switch (optionType) {
304         case YES_NO_OPTION:
305             if (defaultOption != YES &amp;&amp; defaultOption != NO)
306                 throw new IllegalArgumentException();
307             break;
308         case YES_NO_CANCEL_OPTION:
309             if (defaultOption != YES &amp;&amp; defaultOption != NO &amp;&amp;
310                 defaultOption != CANCEL)
311                 throw new IllegalArgumentException();
312             break;
313         case OK_CANCEL_OPTION:
314             if (defaultOption != OK &amp;&amp; defaultOption != CANCEL)
315                 throw new IllegalArgumentException();
316             break;
317         }
318 
319         this.prompt = prompt;
320         this.messageType = messageType;
321         this.optionType = optionType;
322         this.defaultOption = defaultOption;
323     }
324 
325     /**
326      * Construct a {@code ConfirmationCallback} with a prompt,
327      * message type, a list of options and a default option.
328      *
329      * &lt;p&gt; Underlying security services use this constructor if
330      * they require a confirmation different from the available preset
331      * confirmations provided (for example, CONTINUE/ABORT or STOP/GO).
332      * The confirmation options are listed in the {@code options} array,
333      * and are displayed by the {@code CallbackHandler} implementation
334      * in a manner consistent with the way preset options are displayed.
335      *
336      * @param prompt the prompt used to describe the list of options.
337      *
338      * @param messageType the message type ({@code INFORMATION},
339      *                  {@code WARNING} or {@code ERROR}).
340      *
341      * @param options the list of confirmation options.
342      *
343      * @param defaultOption the default option, represented as an index
344      *                  into the {@code options} array.
345      *
346      * @exception IllegalArgumentException if {@code prompt} is null,
347      *                  if {@code prompt} has a length of 0,
348      *                  if messageType is not either
349      *                  {@code INFORMATION}, {@code WARNING},
350      *                  or {@code ERROR}, if {@code options} is null,
351      *                  if {@code options} has a length of 0,
352      *                  if any element from {@code options} is null,
353      *                  if any element from {@code options}
354      *                  has a length of 0, or if {@code defaultOption}
355      *                  does not lie within the array boundaries of
356      *                  {@code options}.
357      */
358     public ConfirmationCallback(String prompt, int messageType,
359                 String[] options, int defaultOption) {
360 
361         if (prompt == null || prompt.isEmpty() ||
362             messageType &lt; INFORMATION || messageType &gt; ERROR ||
363             options == null || options.length == 0 ||
364             defaultOption &lt; 0 || defaultOption &gt;= options.length)
365             throw new IllegalArgumentException();
366 
367         for (int i = 0; i &lt; options.length; i++) {
368             if (options[i] == null || options[i].isEmpty())
369                 throw new IllegalArgumentException();
370         }
371 
372         this.prompt = prompt;
373         this.messageType = messageType;
374         this.options = options;
375         this.defaultOption = defaultOption;
376     }
377 
378     /**
379      * Get the prompt.
380      *
381      * @return the prompt, or null if this {@code ConfirmationCallback}
382      *          was instantiated without a {@code prompt}.
383      */
384     public String getPrompt() {
385         return prompt;
386     }
387 
388     /**
389      * Get the message type.
390      *
391      * @return the message type ({@code INFORMATION},
392      *          {@code WARNING} or {@code ERROR}).
393      */
394     public int getMessageType() {
395         return messageType;
396     }
397 
398     /**
399      * Get the option type.
400      *
401      * &lt;p&gt; If this method returns {@code UNSPECIFIED_OPTION}, then this
402      * {@code ConfirmationCallback} was instantiated with
403      * {@code options} instead of an {@code optionType}.
404      * In this case, invoke the {@code getOptions} method
405      * to determine which confirmation options to display.
406      *
407      * @return the option type ({@code YES_NO_OPTION},
408      *          {@code YES_NO_CANCEL_OPTION} or
409      *          {@code OK_CANCEL_OPTION}), or
410      *          {@code UNSPECIFIED_OPTION} if this
411      *          {@code ConfirmationCallback} was instantiated with
412      *          {@code options} instead of an {@code optionType}.
413      */
414     public int getOptionType() {
415         return optionType;
416     }
417 
418     /**
419      * Get the confirmation options.
420      *
421      * @return the list of confirmation options, or null if this
422      *          {@code ConfirmationCallback} was instantiated with
423      *          an {@code optionType} instead of {@code options}.
424      */
425     public String[] getOptions() {
426         return options;
427     }
428 
429     /**
430      * Get the default option.
431      *
432      * @return the default option, represented as
433      *          {@code YES}, {@code NO}, {@code OK} or
434      *          {@code CANCEL} if an {@code optionType}
435      *          was specified to the constructor of this
436      *          {@code ConfirmationCallback}.
437      *          Otherwise, this method returns the default option as
438      *          an index into the
439      *          {@code options} array specified to the constructor
440      *          of this {@code ConfirmationCallback}.
441      */
442     public int getDefaultOption() {
443         return defaultOption;
444     }
445 
446     /**
447      * Set the selected confirmation option.
448      *
449      * @param selection the selection represented as {@code YES},
450      *          {@code NO}, {@code OK} or {@code CANCEL}
451      *          if an {@code optionType} was specified to the constructor
452      *          of this {@code ConfirmationCallback}.
453      *          Otherwise, the selection represents the index into the
454      *          {@code options} array specified to the constructor
455      *          of this {@code ConfirmationCallback}.
456      *
457      * @see #getSelectedIndex
458      */
459     public void setSelectedIndex(int selection) {
460         this.selection = selection;
461     }
462 
463     /**
464      * Get the selected confirmation option.
465      *
466      * @return the selected confirmation option represented as
467      *          {@code YES}, {@code NO}, {@code OK} or
468      *          {@code CANCEL} if an {@code optionType}
469      *          was specified to the constructor of this
470      *          {@code ConfirmationCallback}.
471      *          Otherwise, this method returns the selected confirmation
472      *          option as an index into the
473      *          {@code options} array specified to the constructor
474      *          of this {@code ConfirmationCallback}.
475      *
476      * @see #setSelectedIndex
477      */
478     public int getSelectedIndex() {
479         return selection;
480     }
481 }
    </pre>
  </body>
</html>