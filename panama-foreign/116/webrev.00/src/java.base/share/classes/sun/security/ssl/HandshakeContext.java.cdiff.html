<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/sun/security/ssl/HandshakeContext.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="Finished.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="KeyShareExtension.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/ssl/HandshakeContext.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 162,12 ***</span>
              TransportContext conContext) throws IOException {
          this.sslContext = sslContext;
          this.conContext = conContext;
          this.sslConfig = (SSLConfiguration)conContext.sslConfig.clone();
  
          this.activeProtocols = getActiveProtocols(sslConfig.enabledProtocols,
<span class="line-modified">!                 sslConfig.enabledCipherSuites, sslConfig.algorithmConstraints);</span>
          if (activeProtocols.isEmpty()) {
              throw new SSLHandshakeException(
                  &quot;No appropriate protocol (protocol is disabled or &quot; +
                  &quot;cipher suites are inappropriate)&quot;);
          }
<span class="line-new-header">--- 162,14 ---</span>
              TransportContext conContext) throws IOException {
          this.sslContext = sslContext;
          this.conContext = conContext;
          this.sslConfig = (SSLConfiguration)conContext.sslConfig.clone();
  
<span class="line-added">+         this.algorithmConstraints = new SSLAlgorithmConstraints(</span>
<span class="line-added">+                 sslConfig.userSpecifiedAlgorithmConstraints);</span>
          this.activeProtocols = getActiveProtocols(sslConfig.enabledProtocols,
<span class="line-modified">!                 sslConfig.enabledCipherSuites, algorithmConstraints);</span>
          if (activeProtocols.isEmpty()) {
              throw new SSLHandshakeException(
                  &quot;No appropriate protocol (protocol is disabled or &quot; +
                  &quot;cipher suites are inappropriate)&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 179,16 ***</span>
                  maximumVersion = pv;
              }
          }
          this.maximumActiveProtocol = maximumVersion;
          this.activeCipherSuites = getActiveCipherSuites(this.activeProtocols,
<span class="line-modified">!                 sslConfig.enabledCipherSuites, sslConfig.algorithmConstraints);</span>
          if (activeCipherSuites.isEmpty()) {
              throw new SSLHandshakeException(&quot;No appropriate cipher suite&quot;);
          }
<span class="line-removed">-         this.algorithmConstraints =</span>
<span class="line-removed">-                 new SSLAlgorithmConstraints(sslConfig.algorithmConstraints);</span>
  
          this.handshakeConsumers = new LinkedHashMap&lt;&gt;();
          this.handshakeProducers = new HashMap&lt;&gt;();
          this.handshakeHash = conContext.inputRecord.handshakeHash;
          this.handshakeOutput = new HandshakeOutStream(conContext.outputRecord);
<span class="line-new-header">--- 181,14 ---</span>
                  maximumVersion = pv;
              }
          }
          this.maximumActiveProtocol = maximumVersion;
          this.activeCipherSuites = getActiveCipherSuites(this.activeProtocols,
<span class="line-modified">!                 sslConfig.enabledCipherSuites, algorithmConstraints);</span>
          if (activeCipherSuites.isEmpty()) {
              throw new SSLHandshakeException(&quot;No appropriate cipher suite&quot;);
          }
  
          this.handshakeConsumers = new LinkedHashMap&lt;&gt;();
          this.handshakeProducers = new HashMap&lt;&gt;();
          this.handshakeHash = conContext.inputRecord.handshakeHash;
          this.handshakeOutput = new HandshakeOutStream(conContext.outputRecord);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 207,20 ***</span>
      }
  
      /**
       * Constructor for PostHandshakeContext
       */
<span class="line-modified">!     HandshakeContext(TransportContext conContext) {</span>
          this.sslContext = conContext.sslContext;
          this.conContext = conContext;
          this.sslConfig = conContext.sslConfig;
  
          this.negotiatedProtocol = conContext.protocolVersion;
          this.negotiatedCipherSuite = conContext.cipherSuite;
          this.handshakeOutput = new HandshakeOutStream(conContext.outputRecord);
          this.delegatedActions = new LinkedList&lt;&gt;();
  
          this.handshakeProducers = null;
          this.handshakeHash = null;
          this.activeProtocols = null;
          this.activeCipherSuites = null;
          this.algorithmConstraints = null;
<span class="line-new-header">--- 207,21 ---</span>
      }
  
      /**
       * Constructor for PostHandshakeContext
       */
<span class="line-modified">!     protected HandshakeContext(TransportContext conContext) {</span>
          this.sslContext = conContext.sslContext;
          this.conContext = conContext;
          this.sslConfig = conContext.sslConfig;
  
          this.negotiatedProtocol = conContext.protocolVersion;
          this.negotiatedCipherSuite = conContext.cipherSuite;
          this.handshakeOutput = new HandshakeOutStream(conContext.outputRecord);
          this.delegatedActions = new LinkedList&lt;&gt;();
  
<span class="line-added">+         this.handshakeConsumers = new LinkedHashMap&lt;&gt;();</span>
          this.handshakeProducers = null;
          this.handshakeHash = null;
          this.activeProtocols = null;
          this.activeCipherSuites = null;
          this.algorithmConstraints = null;
</pre>
<center><a href="Finished.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="KeyShareExtension.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>