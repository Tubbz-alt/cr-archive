<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/sun/security/ssl/ClientHello.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="Alert.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ClientKeyExchange.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/ssl/ClientHello.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 389     private static final
 390             class ClientHelloKickstartProducer implements SSLProducer {
 391         // Prevent instantiation of this class.
 392         private ClientHelloKickstartProducer() {
 393             // blank
 394         }
 395 
 396         // Produce kickstart handshake message.
 397         @Override
 398         public byte[] produce(ConnectionContext context) throws IOException {
 399             // The producing happens in client side only.
 400             ClientHandshakeContext chc = (ClientHandshakeContext)context;
 401 
 402             // clean up this producer
 403             chc.handshakeProducers.remove(SSLHandshake.CLIENT_HELLO.id);
 404 
 405             // the max protocol version this client is supporting.
 406             ProtocolVersion maxProtocolVersion = chc.maximumActiveProtocol;
 407 
 408             // session ID of the ClientHello message
<span class="line-modified"> 409             SessionId sessionId = SSLSessionImpl.nullSession.getSessionId();</span>
 410 
 411             // a list of cipher suites sent by the client
 412             List&lt;CipherSuite&gt; cipherSuites = chc.activeCipherSuites;
 413 
 414             //
 415             // Try to resume an existing session.
 416             //
 417             SSLSessionContextImpl ssci = (SSLSessionContextImpl)
 418                     chc.sslContext.engineGetClientSessionContext();
 419             SSLSessionImpl session = ssci.get(
 420                     chc.conContext.transport.getPeerHost(),
 421                     chc.conContext.transport.getPeerPort());
 422             if (session != null) {
 423                 // If unsafe server certificate change is not allowed, reserve
 424                 // current server certificates if the previous handshake is a
 425                 // session-resumption abbreviated initial handshake.
 426                 if (!ClientHandshakeContext.allowUnsafeServerCertChange &amp;&amp;
 427                         session.isSessionResumption()) {
 428                     try {
 429                         // If existing, peer certificate chain cannot be null.
</pre>
</td>
<td>
<hr />
<pre>
 389     private static final
 390             class ClientHelloKickstartProducer implements SSLProducer {
 391         // Prevent instantiation of this class.
 392         private ClientHelloKickstartProducer() {
 393             // blank
 394         }
 395 
 396         // Produce kickstart handshake message.
 397         @Override
 398         public byte[] produce(ConnectionContext context) throws IOException {
 399             // The producing happens in client side only.
 400             ClientHandshakeContext chc = (ClientHandshakeContext)context;
 401 
 402             // clean up this producer
 403             chc.handshakeProducers.remove(SSLHandshake.CLIENT_HELLO.id);
 404 
 405             // the max protocol version this client is supporting.
 406             ProtocolVersion maxProtocolVersion = chc.maximumActiveProtocol;
 407 
 408             // session ID of the ClientHello message
<span class="line-modified"> 409             SessionId sessionId = new SessionId(new byte[0]);</span>
 410 
 411             // a list of cipher suites sent by the client
 412             List&lt;CipherSuite&gt; cipherSuites = chc.activeCipherSuites;
 413 
 414             //
 415             // Try to resume an existing session.
 416             //
 417             SSLSessionContextImpl ssci = (SSLSessionContextImpl)
 418                     chc.sslContext.engineGetClientSessionContext();
 419             SSLSessionImpl session = ssci.get(
 420                     chc.conContext.transport.getPeerHost(),
 421                     chc.conContext.transport.getPeerPort());
 422             if (session != null) {
 423                 // If unsafe server certificate change is not allowed, reserve
 424                 // current server certificates if the previous handshake is a
 425                 // session-resumption abbreviated initial handshake.
 426                 if (!ClientHandshakeContext.allowUnsafeServerCertChange &amp;&amp;
 427                         session.isSessionResumption()) {
 428                     try {
 429                         // If existing, peer certificate chain cannot be null.
</pre>
</td>
</tr>
</table>
<center><a href="Alert.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ClientKeyExchange.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>