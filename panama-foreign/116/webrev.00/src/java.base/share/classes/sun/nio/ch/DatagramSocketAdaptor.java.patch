diff a/src/java.base/share/classes/sun/nio/ch/DatagramSocketAdaptor.java b/src/java.base/share/classes/sun/nio/ch/DatagramSocketAdaptor.java
--- a/src/java.base/share/classes/sun/nio/ch/DatagramSocketAdaptor.java
+++ b/src/java.base/share/classes/sun/nio/ch/DatagramSocketAdaptor.java
@@ -164,17 +164,27 @@
         return dc.remoteAddress();
     }
 
     @Override
     public SocketAddress getLocalSocketAddress() {
-        try {
-            return dc.getLocalAddress();
-        } catch (ClosedChannelException e) {
+        InetSocketAddress local = dc.localAddress();
+        if (local == null || isClosed())
             return null;
-        } catch (Exception x) {
-            throw new Error(x);
+
+        InetAddress addr = local.getAddress();
+        if (addr.isAnyLocalAddress())
+            return local;
+
+        SecurityManager sm = System.getSecurityManager();
+        if (sm != null) {
+            try {
+                sm.checkConnect(addr.getHostAddress(), -1);
+            } catch (SecurityException x) {
+                return new InetSocketAddress(local.getPort());
+            }
         }
+        return local;
     }
 
     @Override
     public void send(DatagramPacket p) throws IOException {
         ByteBuffer bb = null;
