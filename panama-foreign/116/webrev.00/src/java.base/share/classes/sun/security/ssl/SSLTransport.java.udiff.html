<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.base/share/classes/sun/security/ssl/SSLTransport.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="SSLSocketImpl.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="SessionTicketExtension.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/ssl/SSLTransport.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -171,16 +171,28 @@</span>
                  context.dispatch(plainText);
              }
  
              if (plainText == null) {
                  plainText = Plaintext.PLAINTEXT_NULL;
<span class="udiff-line-modified-removed">-             } else {</span>
<span class="udiff-line-modified-removed">-                 // Fill the destination buffers.</span>
<span class="udiff-line-modified-removed">-                 if ((dsts != null) &amp;&amp; (dstsLength &gt; 0) &amp;&amp;</span>
<span class="udiff-line-modified-removed">-                         (plainText.contentType ==</span>
<span class="udiff-line-modified-removed">-                             ContentType.APPLICATION_DATA.id)) {</span>
<span class="udiff-line-modified-added">+             } else if (plainText.contentType ==</span>
<span class="udiff-line-modified-added">+                             ContentType.APPLICATION_DATA.id) {</span>
<span class="udiff-line-modified-added">+                 // check handshake status</span>
<span class="udiff-line-modified-added">+                 //</span>
<span class="udiff-line-modified-added">+                 // Note that JDK does not support 0-RTT yet.  Otherwise, it is</span>
<span class="udiff-line-added">+                 // needed to check early_data.</span>
<span class="udiff-line-added">+                 if (!context.isNegotiated) {</span>
<span class="udiff-line-added">+                     if (SSLLogger.isOn &amp;&amp; SSLLogger.isOn(&quot;ssl,verbose&quot;)) {</span>
<span class="udiff-line-added">+                         SSLLogger.warning(&quot;unexpected application data &quot; +</span>
<span class="udiff-line-added">+                             &quot;before handshake completion&quot;);</span>
<span class="udiff-line-added">+                     }</span>
  
<span class="udiff-line-added">+                     throw context.fatal(Alert.UNEXPECTED_MESSAGE,</span>
<span class="udiff-line-added">+                         &quot;Receiving application data before handshake complete&quot;);</span>
<span class="udiff-line-added">+                 }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+                 // Fill the destination buffers.</span>
<span class="udiff-line-added">+                 if ((dsts != null) &amp;&amp; (dstsLength &gt; 0)) {</span>
                      ByteBuffer fragment = plainText.fragment;
                      int remains = fragment.remaining();
  
                      // Should have enough room in the destination buffers.
                      int limit = dstsOffset + dstsLength;
</pre>
<center><a href="SSLSocketImpl.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="SessionTicketExtension.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>