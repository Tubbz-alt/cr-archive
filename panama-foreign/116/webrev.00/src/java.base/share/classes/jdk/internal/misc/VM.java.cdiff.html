<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/jdk/internal/misc/VM.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../access/JavaUtilZipFileAccess.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../module-info.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/jdk/internal/misc/VM.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 25,14 ***</span>
<span class="line-new-header">--- 25,20 ---</span>
  
  package jdk.internal.misc;
  
  import static java.lang.Thread.State.*;
  
<span class="line-added">+ import java.util.ArrayList;</span>
  import java.util.Collections;
<span class="line-added">+ import java.util.List;</span>
  import java.util.Map;
  import java.util.Properties;
  
<span class="line-added">+ import jdk.internal.access.SharedSecrets;</span>
<span class="line-added">+ </span>
<span class="line-added">+ import sun.nio.ch.FileChannelImpl;</span>
<span class="line-added">+ </span>
  public class VM {
  
      // the init level when the VM is fully initialized
      private static final int JAVA_LANG_SYSTEM_INITED     = 1;
      private static final int MODULE_SYSTEM_INITED        = 2;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 412,6 ***</span>
<span class="line-new-header">--- 418,36 ---</span>
       * Those static fields remain as uninitialized if there is no mapped CDS
       * java heap data or there is any error during initialization of the
       * object class in the archived graph.
       */
      public static native void initializeFromArchive(Class&lt;?&gt; c);
<span class="line-added">+ </span>
<span class="line-added">+     /**</span>
<span class="line-added">+      * Provides access to information on buffer usage.</span>
<span class="line-added">+      */</span>
<span class="line-added">+     public interface BufferPool {</span>
<span class="line-added">+         String getName();</span>
<span class="line-added">+         long getCount();</span>
<span class="line-added">+         long getTotalCapacity();</span>
<span class="line-added">+         long getMemoryUsed();</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private static class BufferPoolsHolder {</span>
<span class="line-added">+         static final List&lt;BufferPool&gt; BUFFER_POOLS;</span>
<span class="line-added">+ </span>
<span class="line-added">+         static {</span>
<span class="line-added">+             ArrayList&lt;BufferPool&gt; bufferPools = new ArrayList&lt;&gt;(3);</span>
<span class="line-added">+             bufferPools.add(SharedSecrets.getJavaNioAccess().getDirectBufferPool());</span>
<span class="line-added">+             bufferPools.add(FileChannelImpl.getMappedBufferPool());</span>
<span class="line-added">+             bufferPools.add(FileChannelImpl.getSyncMappedBufferPool());</span>
<span class="line-added">+ </span>
<span class="line-added">+             BUFFER_POOLS = Collections.unmodifiableList(bufferPools);</span>
<span class="line-added">+         }</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     /**</span>
<span class="line-added">+      * @return the list of buffer pools.</span>
<span class="line-added">+      */</span>
<span class="line-added">+     public static List&lt;BufferPool&gt; getBufferPools() {</span>
<span class="line-added">+         return BufferPoolsHolder.BUFFER_POOLS;</span>
<span class="line-added">+     }</span>
  }
</pre>
<center><a href="../access/JavaUtilZipFileAccess.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../module-info.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>