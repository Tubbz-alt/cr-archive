<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/native/libawt/java2d/loops/GraphicsPrimitiveMgr.c</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../common/awt/debug/debug_trace.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="GraphicsPrimitiveMgr.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libawt/java2d/loops/GraphicsPrimitiveMgr.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
377                             NativePrimitive *pPrim,
378                             jint NumPrimitives)
379 {
380     jarray primitives;
381     int i;
382 
383     primitives = (*env)-&gt;NewObjectArray(env, NumPrimitives,
384                                         GraphicsPrimitive, NULL);
385     if (primitives == NULL) {
386         return JNI_FALSE;
387     }
388 
389     for (i = 0; i &lt; NumPrimitives; i++, pPrim++) {
390         jint srcflags, dstflags;
391         jobject prim;
392         PrimitiveType *pType = pPrim-&gt;pPrimType;
393         SurfaceType *pSrc = pPrim-&gt;pSrcType;
394         CompositeType *pComp = pPrim-&gt;pCompType;
395         SurfaceType *pDst = pPrim-&gt;pDstType;
396 
<span class="line-modified">397         pPrim-&gt;funcs.initializer = MapAccelFunction(pPrim-&gt;funcs_c.initializer);</span>
398 
399         /*
400          * Calculate the necessary SurfaceData lock flags for the
401          * source and destination surfaces based on the information
402          * stored in the PrimitiveType, SurfaceType, and CompositeType
403          * structures.  The starting point is the values that are
404          * already stored in the NativePrimitive structure.  These
405          * flags are usually left as 0, but can be filled in by
406          * native primitive loops that have special needs that are
407          * not deducible from their declared attributes.
408          */
409         srcflags = pPrim-&gt;srcflags;
410         dstflags = pPrim-&gt;dstflags;
411         srcflags |= pType-&gt;srcflags;
412         dstflags |= pType-&gt;dstflags;
413         dstflags |= pComp-&gt;dstflags;
414         if (srcflags &amp; SD_LOCK_READ) srcflags |= pSrc-&gt;readflags;
415         /* if (srcflags &amp; SD_LOCK_WRITE) srcflags |= pSrc-&gt;writeflags; */
416         if (dstflags &amp; SD_LOCK_READ) dstflags |= pDst-&gt;readflags;
417         if (dstflags &amp; SD_LOCK_WRITE) dstflags |= pDst-&gt;writeflags;
</pre>
</td>
<td>
<hr />
<pre>
377                             NativePrimitive *pPrim,
378                             jint NumPrimitives)
379 {
380     jarray primitives;
381     int i;
382 
383     primitives = (*env)-&gt;NewObjectArray(env, NumPrimitives,
384                                         GraphicsPrimitive, NULL);
385     if (primitives == NULL) {
386         return JNI_FALSE;
387     }
388 
389     for (i = 0; i &lt; NumPrimitives; i++, pPrim++) {
390         jint srcflags, dstflags;
391         jobject prim;
392         PrimitiveType *pType = pPrim-&gt;pPrimType;
393         SurfaceType *pSrc = pPrim-&gt;pSrcType;
394         CompositeType *pComp = pPrim-&gt;pCompType;
395         SurfaceType *pDst = pPrim-&gt;pDstType;
396 
<span class="line-modified">397         pPrim-&gt;funcs.initializer = pPrim-&gt;funcs_c.initializer;</span>
398 
399         /*
400          * Calculate the necessary SurfaceData lock flags for the
401          * source and destination surfaces based on the information
402          * stored in the PrimitiveType, SurfaceType, and CompositeType
403          * structures.  The starting point is the values that are
404          * already stored in the NativePrimitive structure.  These
405          * flags are usually left as 0, but can be filled in by
406          * native primitive loops that have special needs that are
407          * not deducible from their declared attributes.
408          */
409         srcflags = pPrim-&gt;srcflags;
410         dstflags = pPrim-&gt;dstflags;
411         srcflags |= pType-&gt;srcflags;
412         dstflags |= pType-&gt;dstflags;
413         dstflags |= pComp-&gt;dstflags;
414         if (srcflags &amp; SD_LOCK_READ) srcflags |= pSrc-&gt;readflags;
415         /* if (srcflags &amp; SD_LOCK_WRITE) srcflags |= pSrc-&gt;writeflags; */
416         if (dstflags &amp; SD_LOCK_READ) dstflags |= pDst-&gt;readflags;
417         if (dstflags &amp; SD_LOCK_WRITE) dstflags |= pDst-&gt;writeflags;
</pre>
</td>
</tr>
</table>
<center><a href="../../../common/awt/debug/debug_trace.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="GraphicsPrimitiveMgr.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>