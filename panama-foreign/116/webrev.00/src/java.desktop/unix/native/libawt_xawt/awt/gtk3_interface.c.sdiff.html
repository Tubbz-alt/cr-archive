<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/unix/native/libawt_xawt/awt/gtk3_interface.c</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="gtk2_interface.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="multiVis.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/unix/native/libawt_xawt/awt/gtk3_interface.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
2926         (*fp_g_object_unref)(pixbuf);
2927         pixbuf = scaledPixbuf;
2928     }
2929 
2930     if (pixbuf) {
2931         int nchan = (*fp_gdk_pixbuf_get_n_channels)(pixbuf);
2932         int stride = (*fp_gdk_pixbuf_get_rowstride)(pixbuf);
2933         if ((*fp_gdk_pixbuf_get_width)(pixbuf) &gt;= width
2934                 &amp;&amp; (*fp_gdk_pixbuf_get_height)(pixbuf) &gt;= height
2935                 &amp;&amp; (*fp_gdk_pixbuf_get_bits_per_sample)(pixbuf) == 8
2936                 &amp;&amp; (*fp_gdk_pixbuf_get_colorspace)(pixbuf) == GDK_COLORSPACE_RGB
2937                 &amp;&amp; nchan &gt;= 3
2938                 ) {
2939             guchar *p, *pix = (*fp_gdk_pixbuf_get_pixels)(pixbuf);
2940             ary = (*env)-&gt;GetPrimitiveArrayCritical(env, pixelArray, NULL);
2941             if (ary) {
2942                 jint _x, _y;
2943                 int index;
2944                 for (_y = 0; _y &lt; height; _y++) {
2945                     for (_x = 0; _x &lt; width; _x++) {
<span class="line-modified">2946                         p = pix + _y * stride + _x * nchan;</span>
2947 
2948                         index = (_y + dy) * jwidth + (_x + dx);
2949                         ary[index] = 0xff000000
2950                                         | (p[0] &lt;&lt; 16)
2951                                         | (p[1] &lt;&lt; 8)
2952                                         | (p[2]);
2953 
2954                     }
2955                 }
2956                 (*env)-&gt;ReleasePrimitiveArrayCritical(env, pixelArray, ary, 0);
2957             }
2958         }
2959         (*fp_g_object_unref)(pixbuf);
2960     }
2961     return JNI_FALSE;
2962 }
2963 
2964 static GdkWindow* gtk3_get_window(void *widget) {
2965     return fp_gtk_widget_get_window((GtkWidget*)widget);
2966 }
</pre>
</td>
<td>
<hr />
<pre>
2926         (*fp_g_object_unref)(pixbuf);
2927         pixbuf = scaledPixbuf;
2928     }
2929 
2930     if (pixbuf) {
2931         int nchan = (*fp_gdk_pixbuf_get_n_channels)(pixbuf);
2932         int stride = (*fp_gdk_pixbuf_get_rowstride)(pixbuf);
2933         if ((*fp_gdk_pixbuf_get_width)(pixbuf) &gt;= width
2934                 &amp;&amp; (*fp_gdk_pixbuf_get_height)(pixbuf) &gt;= height
2935                 &amp;&amp; (*fp_gdk_pixbuf_get_bits_per_sample)(pixbuf) == 8
2936                 &amp;&amp; (*fp_gdk_pixbuf_get_colorspace)(pixbuf) == GDK_COLORSPACE_RGB
2937                 &amp;&amp; nchan &gt;= 3
2938                 ) {
2939             guchar *p, *pix = (*fp_gdk_pixbuf_get_pixels)(pixbuf);
2940             ary = (*env)-&gt;GetPrimitiveArrayCritical(env, pixelArray, NULL);
2941             if (ary) {
2942                 jint _x, _y;
2943                 int index;
2944                 for (_y = 0; _y &lt; height; _y++) {
2945                     for (_x = 0; _x &lt; width; _x++) {
<span class="line-modified">2946                         p = pix + (intptr_t) _y * stride + _x * nchan;</span>
2947 
2948                         index = (_y + dy) * jwidth + (_x + dx);
2949                         ary[index] = 0xff000000
2950                                         | (p[0] &lt;&lt; 16)
2951                                         | (p[1] &lt;&lt; 8)
2952                                         | (p[2]);
2953 
2954                     }
2955                 }
2956                 (*env)-&gt;ReleasePrimitiveArrayCritical(env, pixelArray, ary, 0);
2957             }
2958         }
2959         (*fp_g_object_unref)(pixbuf);
2960     }
2961     return JNI_FALSE;
2962 }
2963 
2964 static GdkWindow* gtk3_get_window(void *widget) {
2965     return fp_gtk_widget_get_window((GtkWidget*)widget);
2966 }
</pre>
</td>
</tr>
</table>
<center><a href="gtk2_interface.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="multiVis.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>