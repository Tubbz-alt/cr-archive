<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/ui/ProcessListPanel.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ObjectListPanel.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SAPanel.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/ui/ProcessListPanel.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2001, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2001, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -34,11 +34,11 @@</span>
  import sun.jvm.hotspot.debugger.*;
  
  public class ProcessListPanel extends JPanel {
    private Debugger           dbg;
    private AbstractTableModel dataModel;
<span class="udiff-line-modified-removed">-   private java.util.List     els;</span>
<span class="udiff-line-modified-added">+   private java.util.List&lt;ProcessInfo&gt; els;</span>
    private boolean            sortByName   = true;
    private boolean            sortReversed = false;
    private javax.swing.Timer  timer;
    private JTable             table;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -71,11 +71,11 @@</span>
  
            switch (col) {
            case 0:
              return info.getName();
            case 1:
<span class="udiff-line-modified-removed">-             return new Integer(info.getPid());</span>
<span class="udiff-line-modified-added">+             return info.getPid();</span>
            default:
              throw new RuntimeException(&quot;Index (&quot; + col + &quot;, &quot; + row + &quot;) out of bounds&quot;);
            }
          }
        };
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -147,11 +147,11 @@</span>
    /** Call this to update the panel&#39;s notion of the process list */
    public synchronized void update() {
      if (!dbg.hasProcessList()) {
        throw new RuntimeException(&quot;ProcessListPanel requires that debugger supports getProcessList()&quot;);
      }
<span class="udiff-line-modified-removed">-     java.util.List newEls = dbg.getProcessList();</span>
<span class="udiff-line-modified-added">+     java.util.List&lt;ProcessInfo&gt; newEls = dbg.getProcessList();</span>
      sort(newEls);
      if (table != null) {
        // Keep the current selection if possible
        int i = table.getSelectedRow();
        int pid = getPid(els, i);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -174,28 +174,28 @@</span>
    public synchronized ProcessInfo getSelectedProcess() {
      int i = table.getSelectedRow();
      if (i &lt; 0) {
        return null;
      }
<span class="udiff-line-modified-removed">-     return (ProcessInfo) els.get(i);</span>
<span class="udiff-line-modified-added">+     return els.get(i);</span>
    }
  
<span class="udiff-line-modified-removed">-   private synchronized void sort(java.util.List els) {</span>
<span class="udiff-line-modified-removed">-     Comparator c;</span>
<span class="udiff-line-modified-added">+   private synchronized void sort(java.util.List&lt;ProcessInfo&gt; els) {</span>
<span class="udiff-line-modified-added">+     Comparator&lt;ProcessInfo&gt; c;</span>
      if (sortByName) {
<span class="udiff-line-modified-removed">-       c = new Comparator() {</span>
<span class="udiff-line-modified-removed">-           public int compare(Object o1, Object o2) {</span>
<span class="udiff-line-modified-added">+       c = new Comparator&lt;&gt;() {</span>
<span class="udiff-line-modified-added">+           public int compare(ProcessInfo o1, ProcessInfo o2) {</span>
              int scale = (sortReversed ? -1 : 1);
<span class="udiff-line-modified-removed">-             return scale * ((ProcessInfo) o1).getName().compareToIgnoreCase(((ProcessInfo) o2).getName());</span>
<span class="udiff-line-modified-added">+             return scale * o1.getName().compareToIgnoreCase(o2.getName());</span>
            }
          };
      } else {
<span class="udiff-line-modified-removed">-       c = new Comparator() {</span>
<span class="udiff-line-modified-removed">-           public int compare(Object o1, Object o2) {</span>
<span class="udiff-line-modified-added">+       c = new Comparator&lt;&gt;() {</span>
<span class="udiff-line-modified-added">+           public int compare(ProcessInfo o1, ProcessInfo o2) {</span>
              int scale = (sortReversed ? -1 : 1);
<span class="udiff-line-modified-removed">-             int pid1 = ((ProcessInfo) o1).getPid();</span>
<span class="udiff-line-modified-removed">-             int pid2 = ((ProcessInfo) o2).getPid();</span>
<span class="udiff-line-modified-added">+             int pid1 = o1.getPid();</span>
<span class="udiff-line-modified-added">+             int pid2 = o2.getPid();</span>
              int ret;
              if      (pid1 &lt;  pid2) ret = -1;
              else if (pid1 == pid2) ret = 0;
              else ret = 1;
              return ret * scale;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -214,17 +214,17 @@</span>
          });
      }
      return timer;
    }
  
<span class="udiff-line-modified-removed">-   private synchronized int getPid(java.util.List els, int index) {</span>
<span class="udiff-line-modified-removed">-     return ((ProcessInfo) els.get(index)).getPid();</span>
<span class="udiff-line-modified-added">+   private synchronized int getPid(java.util.List&lt;ProcessInfo&gt; els, int index) {</span>
<span class="udiff-line-modified-added">+     return els.get(index).getPid();</span>
    }
  
<span class="udiff-line-modified-removed">-   private synchronized int findPid(java.util.List els, int pid) {</span>
<span class="udiff-line-modified-added">+   private synchronized int findPid(java.util.List&lt;ProcessInfo&gt; els, int pid) {</span>
      for (int i = 0; i &lt; els.size(); i++) {
<span class="udiff-line-modified-removed">-       ProcessInfo info = (ProcessInfo) els.get(i);</span>
<span class="udiff-line-modified-added">+       ProcessInfo info = els.get(i);</span>
        if (info.getPid() == pid) {
          return i;
        }
      }
      return -1;
</pre>
<center><a href="ObjectListPanel.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SAPanel.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>