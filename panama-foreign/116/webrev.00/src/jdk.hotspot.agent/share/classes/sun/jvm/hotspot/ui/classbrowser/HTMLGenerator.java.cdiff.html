<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/ui/classbrowser/HTMLGenerator.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../action/ThreadInfoAction.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../tree/CTypeTreeNodeAdapter.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/ui/classbrowser/HTMLGenerator.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2002, 2017, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2002, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1065,25 ***</span>
          if (line != -1) {
              buf.append(&quot;, line = &quot;);
              buf.append(Integer.toString(line));
          }
  
<span class="line-modified">!         List locals = sd.getLocals();</span>
          if (locals != null) {
              buf.br();
              buf.append(tabs);
              buf.append(genHTMLForLocals(sd, locals));
          }
  
<span class="line-modified">!         List expressions = sd.getExpressions();</span>
          if (expressions != null) {
              buf.br();
              buf.append(tabs);
              buf.append(genHTMLForExpressions(sd, expressions));
          }
  
<span class="line-modified">!         List monitors = sd.getMonitors();</span>
          if (monitors != null) {
              buf.br();
              buf.append(tabs);
              buf.append(genHTMLForMonitors(sd, monitors));
          }
<span class="line-new-header">--- 1065,25 ---</span>
          if (line != -1) {
              buf.append(&quot;, line = &quot;);
              buf.append(Integer.toString(line));
          }
  
<span class="line-modified">!         List&lt;ScopeValue&gt; locals = sd.getLocals();</span>
          if (locals != null) {
              buf.br();
              buf.append(tabs);
              buf.append(genHTMLForLocals(sd, locals));
          }
  
<span class="line-modified">!         List&lt;ScopeValue&gt; expressions = sd.getExpressions();</span>
          if (expressions != null) {
              buf.br();
              buf.append(tabs);
              buf.append(genHTMLForExpressions(sd, expressions));
          }
  
<span class="line-modified">!         List&lt;MonitorValue&gt; monitors = sd.getMonitors();</span>
          if (monitors != null) {
              buf.br();
              buf.append(tabs);
              buf.append(genHTMLForMonitors(sd, monitors));
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1095,18 ***</span>
      protected void genScObjInfo(Formatter buf, Formatter tabs, ScopeDesc sd) {
          if (sd == null) {
              return;
          }
  
<span class="line-modified">!         List objects = sd.getObjects();</span>
          if (objects == null) {
              return;
          }
          int length = objects.size();
          for (int i = 0; i &lt; length; i++) {
              buf.append(tabs);
<span class="line-modified">!             ObjectValue ov = (ObjectValue)objects.get(i);</span>
              buf.append(&quot;ScObj&quot; + i);
              ScopeValue sv = ov.getKlass();
              if (Assert.ASSERTS_ENABLED) {
                  Assert.that(sv.isConstantOop(), &quot;scalar replaced object klass must be constant oop&quot;);
              }
<span class="line-new-header">--- 1095,18 ---</span>
      protected void genScObjInfo(Formatter buf, Formatter tabs, ScopeDesc sd) {
          if (sd == null) {
              return;
          }
  
<span class="line-modified">!         List&lt;ObjectValue&gt; objects = sd.getObjects();</span>
          if (objects == null) {
              return;
          }
          int length = objects.size();
          for (int i = 0; i &lt; length; i++) {
              buf.append(tabs);
<span class="line-modified">!             ObjectValue ov = objects.get(i);</span>
              buf.append(&quot;ScObj&quot; + i);
              ScopeValue sv = ov.getKlass();
              if (Assert.ASSERTS_ENABLED) {
                  Assert.that(sv.isConstantOop(), &quot;scalar replaced object klass must be constant oop&quot;);
              }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1350,16 ***</span>
           buf.append(&quot;unknown scope value &quot; + sv);
        }
        return buf.toString();
     }
  
<span class="line-modified">!    protected String genHTMLForScopeValues(ScopeDesc sd, boolean locals, List values) {</span>
        int length = values.size();
        Formatter buf = new Formatter(genHTML);
        buf.append(locals? &quot;locals &quot; : &quot;expressions &quot;);
        for (int i = 0; i &lt; length; i++) {
<span class="line-modified">!          ScopeValue sv = (ScopeValue) values.get(i);</span>
           if (sv == null) {
              continue;
           }
           buf.append(&#39;(&#39;);
           if (locals) {
<span class="line-new-header">--- 1350,16 ---</span>
           buf.append(&quot;unknown scope value &quot; + sv);
        }
        return buf.toString();
     }
  
<span class="line-modified">!    protected String genHTMLForScopeValues(ScopeDesc sd, boolean locals, List&lt;ScopeValue&gt; values) {</span>
        int length = values.size();
        Formatter buf = new Formatter(genHTML);
        buf.append(locals? &quot;locals &quot; : &quot;expressions &quot;);
        for (int i = 0; i &lt; length; i++) {
<span class="line-modified">!          ScopeValue sv = values.get(i);</span>
           if (sv == null) {
              continue;
           }
           buf.append(&#39;(&#39;);
           if (locals) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1385,24 ***</span>
        }
  
        return buf.toString();
     }
  
<span class="line-modified">!    protected String genHTMLForLocals(ScopeDesc sd, List locals) {</span>
        return genHTMLForScopeValues(sd, true, locals);
     }
  
<span class="line-modified">!    protected String genHTMLForExpressions(ScopeDesc sd, List expressions) {</span>
        return genHTMLForScopeValues(sd, false, expressions);
     }
  
<span class="line-modified">!    protected String genHTMLForMonitors(ScopeDesc sd, List monitors) {</span>
        int length = monitors.size();
        Formatter buf = new Formatter(genHTML);
        buf.append(&quot;monitors &quot;);
        for (int i = 0; i &lt; length; i++) {
<span class="line-modified">!          MonitorValue mv = (MonitorValue) monitors.get(i);</span>
           if (mv == null) {
              continue;
           }
           buf.append(&quot;(owner = &quot;);
           ScopeValue owner = mv.owner();
<span class="line-new-header">--- 1385,24 ---</span>
        }
  
        return buf.toString();
     }
  
<span class="line-modified">!    protected String genHTMLForLocals(ScopeDesc sd, List&lt;ScopeValue&gt; locals) {</span>
        return genHTMLForScopeValues(sd, true, locals);
     }
  
<span class="line-modified">!    protected String genHTMLForExpressions(ScopeDesc sd, List&lt;ScopeValue&gt; expressions) {</span>
        return genHTMLForScopeValues(sd, false, expressions);
     }
  
<span class="line-modified">!    protected String genHTMLForMonitors(ScopeDesc sd, List&lt;MonitorValue&gt; monitors) {</span>
        int length = monitors.size();
        Formatter buf = new Formatter(genHTML);
        buf.append(&quot;monitors &quot;);
        for (int i = 0; i &lt; length; i++) {
<span class="line-modified">!          MonitorValue mv = monitors.get(i);</span>
           if (mv == null) {
              continue;
           }
           buf.append(&quot;(owner = &quot;);
           ScopeValue owner = mv.owner();
</pre>
<center><a href="../action/ThreadInfoAction.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../tree/CTypeTreeNodeAdapter.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>