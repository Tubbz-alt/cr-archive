<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/runtime/VM.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Threads.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="VMReg.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/runtime/VM.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -37,10 +37,12 @@</span>
  import sun.jvm.hotspot.oops.*;
  import sun.jvm.hotspot.types.*;
  import sun.jvm.hotspot.utilities.*;
  import sun.jvm.hotspot.runtime.*;
  import sun.jvm.hotspot.classfile.*;
<span class="udiff-line-added">+ import sun.jvm.hotspot.utilities.Observable;</span>
<span class="udiff-line-added">+ import sun.jvm.hotspot.utilities.Observer;</span>
  
  /** &lt;P&gt; This class encapsulates the global state of the VM; the
      universe, object heap, interpreter, etc. It is a Singleton and
      must be initialized with a call to initialize() before calling
      getVM(). &lt;/P&gt;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -65,13 +67,13 @@</span>
      revisited later.) &lt;/P&gt;
  */
  
  public class VM {
    private static VM    soleInstance;
<span class="udiff-line-modified-removed">-   private static List  vmInitializedObservers = new ArrayList();</span>
<span class="udiff-line-modified-removed">-   private List         vmResumedObservers   = new ArrayList();</span>
<span class="udiff-line-modified-removed">-   private List         vmSuspendedObservers = new ArrayList();</span>
<span class="udiff-line-modified-added">+   private static List&lt;Observer&gt; vmInitializedObservers = new ArrayList&lt;&gt;();</span>
<span class="udiff-line-modified-added">+   private List&lt;Observer&gt; vmResumedObservers   = new ArrayList&lt;&gt;();</span>
<span class="udiff-line-modified-added">+   private List&lt;Observer&gt; vmSuspendedObservers = new ArrayList&lt;&gt;();</span>
    private TypeDataBase db;
    private boolean      isBigEndian;
    /** This is only present if in a debugging system */
    private JVMDebugger  debugger;
    private long         stackBias;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -132,11 +134,11 @@</span>
    // VM version strings come from Abstract_VM_Version class
    private String       vmRelease;
    private String       vmInternalInfo;
  
    private Flag[] commandLineFlags;
<span class="udiff-line-modified-removed">-   private Map flagsMap;</span>
<span class="udiff-line-modified-added">+   private Map&lt;String, Flag&gt; flagsMap;</span>
  
    private static Type intType;
    private static Type uintType;
    private static Type intxType;
    private static Type uintxType;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -996,11 +998,11 @@</span>
      return commandLineFlags;
    }
  
    public Flag getCommandLineFlag(String name) {
      if (flagsMap == null) {
<span class="udiff-line-modified-removed">-       flagsMap = new HashMap();</span>
<span class="udiff-line-modified-added">+       flagsMap = new HashMap&lt;&gt;();</span>
        Flag[] flags = getCommandLineFlags();
        for (int i = 0; i &lt; flags.length; i++) {
          flagsMap.put(flags[i].getName(), flags[i]);
        }
      }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1033,14 +1035,12 @@</span>
        commandLineFlags[f] = new Flag(type, name, addr, flags);
        flagAddr = flagAddr.addOffsetTo(flagSize);
      }
  
      // sort flags by name
<span class="udiff-line-modified-removed">-     Arrays.sort(commandLineFlags, new Comparator() {</span>
<span class="udiff-line-modified-removed">-         public int compare(Object o1, Object o2) {</span>
<span class="udiff-line-removed">-           Flag f1 = (Flag) o1;</span>
<span class="udiff-line-removed">-           Flag f2 = (Flag) o2;</span>
<span class="udiff-line-modified-added">+     Arrays.sort(commandLineFlags, new Comparator&lt;&gt;() {</span>
<span class="udiff-line-modified-added">+         public int compare(Flag f1, Flag f2) {</span>
            return f1.getName().compareTo(f2.getName());
          }
        });
    }
  
</pre>
<center><a href="Threads.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="VMReg.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>