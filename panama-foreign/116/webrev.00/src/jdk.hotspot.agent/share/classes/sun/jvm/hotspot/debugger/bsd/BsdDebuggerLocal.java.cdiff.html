<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/debugger/bsd/BsdDebuggerLocal.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="BsdDebugger.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../cdbg/CDebugger.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/debugger/bsd/BsdDebuggerLocal.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2002, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2002, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 33,10 ***</span>
<span class="line-new-header">--- 33,11 ---</span>
  import sun.jvm.hotspot.debugger.DebuggerException;
  import sun.jvm.hotspot.debugger.DebuggerUtilities;
  import sun.jvm.hotspot.debugger.MachineDescription;
  import sun.jvm.hotspot.debugger.NotInHeapException;
  import sun.jvm.hotspot.debugger.OopHandle;
<span class="line-added">+ import sun.jvm.hotspot.debugger.ProcessInfo;</span>
  import sun.jvm.hotspot.debugger.ReadResult;
  import sun.jvm.hotspot.debugger.ThreadProxy;
  import sun.jvm.hotspot.debugger.UnalignedAddressException;
  import sun.jvm.hotspot.debugger.UnmappedAddressException;
  import sun.jvm.hotspot.debugger.cdbg.CDebugger;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 73,12 ***</span>
  
      // CDebugger support
      private BsdCDebugger cdbg;
  
      // threadList and loadObjectList are filled by attach0 method
<span class="line-modified">!     private List threadList;</span>
<span class="line-modified">!     private List loadObjectList;</span>
  
      // called by native method lookupByAddress0
      private ClosestSymbol createClosestSymbol(String name, long offset) {
         return new ClosestSymbol(name, offset);
      }
<span class="line-new-header">--- 74,12 ---</span>
  
      // CDebugger support
      private BsdCDebugger cdbg;
  
      // threadList and loadObjectList are filled by attach0 method
<span class="line-modified">!     private List&lt;ThreadProxy&gt; threadList;</span>
<span class="line-modified">!     private List&lt;LoadObject&gt; loadObjectList;</span>
  
      // called by native method lookupByAddress0
      private ClosestSymbol createClosestSymbol(String name, long offset) {
         return new ClosestSymbol(name, offset);
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 228,11 ***</span>
      public boolean hasProcessList() throws DebuggerException {
          return false;
      }
  
      /** From the Debugger interface via JVMDebugger */
<span class="line-modified">!     public List getProcessList() throws DebuggerException {</span>
          throw new DebuggerException(&quot;getProcessList not implemented yet&quot;);
      }
  
      private void checkAttached() throws DebuggerException {
          if (attached) {
<span class="line-new-header">--- 229,11 ---</span>
      public boolean hasProcessList() throws DebuggerException {
          return false;
      }
  
      /** From the Debugger interface via JVMDebugger */
<span class="line-modified">!     public List&lt;ProcessInfo&gt; getProcessList() throws DebuggerException {</span>
          throw new DebuggerException(&quot;getProcessList not implemented yet&quot;);
      }
  
      private void checkAttached() throws DebuggerException {
          if (attached) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 264,12 ***</span>
      }
  
      /** From the Debugger interface via JVMDebugger */
      public synchronized void attach(int processID) throws DebuggerException {
          checkAttached();
<span class="line-modified">!         threadList = new ArrayList();</span>
<span class="line-modified">!         loadObjectList = new ArrayList();</span>
          class AttachTask implements WorkerThreadTask {
             int pid;
             public void doit(BsdDebuggerLocal debugger) {
                debugger.attach0(pid);
                debugger.attached = true;
<span class="line-new-header">--- 265,12 ---</span>
      }
  
      /** From the Debugger interface via JVMDebugger */
      public synchronized void attach(int processID) throws DebuggerException {
          checkAttached();
<span class="line-modified">!         threadList = new ArrayList&lt;&gt;();</span>
<span class="line-modified">!         loadObjectList = new ArrayList&lt;&gt;();</span>
          class AttachTask implements WorkerThreadTask {
             int pid;
             public void doit(BsdDebuggerLocal debugger) {
                debugger.attach0(pid);
                debugger.attached = true;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 284,12 ***</span>
      }
  
      /** From the Debugger interface via JVMDebugger */
      public synchronized void attach(String execName, String coreName) {
          checkAttached();
<span class="line-modified">!         threadList = new ArrayList();</span>
<span class="line-modified">!         loadObjectList = new ArrayList();</span>
          attach0(execName, coreName);
          attached = true;
          isCore = true;
          findABIVersion();
      }
<span class="line-new-header">--- 285,12 ---</span>
      }
  
      /** From the Debugger interface via JVMDebugger */
      public synchronized void attach(String execName, String coreName) {
          checkAttached();
<span class="line-modified">!         threadList = new ArrayList&lt;&gt;();</span>
<span class="line-modified">!         loadObjectList = new ArrayList&lt;&gt;();</span>
          attach0(execName, coreName);
          attached = true;
          isCore = true;
          findABIVersion();
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 534,17 ***</span>
        if (value == 0) return null;
        return new BsdAddress(this, value);
      }
  
      /** From the BsdCDebugger interface */
<span class="line-modified">!     public List/*&lt;ThreadProxy&gt;*/ getThreadList() {</span>
        requireAttach();
        return threadList;
      }
  
      /** From the BsdCDebugger interface */
<span class="line-modified">!     public List/*&lt;LoadObject&gt;*/ getLoadObjectList() {</span>
        requireAttach();
        return loadObjectList;
      }
  
      /** From the BsdCDebugger interface */
<span class="line-new-header">--- 535,17 ---</span>
        if (value == 0) return null;
        return new BsdAddress(this, value);
      }
  
      /** From the BsdCDebugger interface */
<span class="line-modified">!     public List&lt;ThreadProxy&gt; getThreadList() {</span>
        requireAttach();
        return threadList;
      }
  
      /** From the BsdCDebugger interface */
<span class="line-modified">!     public List&lt;LoadObject&gt; getLoadObjectList() {</span>
        requireAttach();
        return loadObjectList;
      }
  
      /** From the BsdCDebugger interface */
</pre>
<center><a href="BsdDebugger.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../cdbg/CDebugger.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>