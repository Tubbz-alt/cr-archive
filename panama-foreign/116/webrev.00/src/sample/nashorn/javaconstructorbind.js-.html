<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/sample/nashorn/javaconstructorbind.js</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
  <body>
    <pre>
 1 /*
 2  * Copyright (c) 2015, Oracle and/or its affiliates. All rights reserved.
 3  *
 4  * Redistribution and use in source and binary forms, with or without
 5  * modification, are permitted provided that the following conditions
 6  * are met:
 7  *
 8  *   - Redistributions of source code must retain the above copyright
 9  *     notice, this list of conditions and the following disclaimer.
10  *
11  *   - Redistributions in binary form must reproduce the above copyright
12  *     notice, this list of conditions and the following disclaimer in the
13  *     documentation and/or other materials provided with the distribution.
14  *
15  *   - Neither the name of Oracle nor the names of its
16  *     contributors may be used to endorse or promote products derived
17  *     from this software without specific prior written permission.
18  *
19  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS
20  * IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
21  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
22  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
23  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
24  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
25  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
26  * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
27  * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
28  * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
29  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
30  */
31 
32 // bind on a Java constructor
33 
34 // See Function.prototype.bind:
35 // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind
36 var bind = Function.prototype.bind;
37 
38 var URL = Java.type(&quot;java.net.URL&quot;);
39 
40 // get the constructor that accepts URL, String parameters.
41 // constructor signatures are properties of type object.
42 var newURL = URL[&quot;(URL, String)&quot;];
43 
44 // bind &quot;context&quot; URL parameter.
45 var TwitterURL = bind.call(newURL, null, new URL(&#39;https://www.twitter.com&#39;));
46 
47 // now you can create context relative URLs using the bound constructor
48 print(new TwitterURL(&quot;sundararajan_a&quot;));
49 
50 // read the URL content and print (optional part)
51 
52 var BufferedReader = Java.type(&quot;java.io.BufferedReader&quot;);
53 var InputStreamReader = Java.type(&quot;java.io.InputStreamReader&quot;);
54 
55 // function to retrieve text content of the given URL
56 function readTextFromURL(url) {
57     var str = &#39;&#39;;
58     var u = new URL(url);
59     var reader = new BufferedReader(
60         new InputStreamReader(u.openStream()));
61     try {
62         reader.lines().forEach(function(x) str += x);
63         return str;
64     } finally {
65         reader.close();
66     }
67 }
68 
69 print(readTextFromURL(new TwitterURL(&quot;sundararajan_a&quot;)));
    </pre>
  </body>
</html>