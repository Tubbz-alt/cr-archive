<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.xml.crypto/share/classes/org/jcp/xml/dsig/internal/dom/DOMKeyInfoFactory.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../../java.security.jgss/share/classes/sun/security/krb5/Checksum.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="DOMXMLSignatureFactory.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml.crypto/share/classes/org/jcp/xml/dsig/internal/dom/DOMKeyInfoFactory.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
153         node.normalize();
154 
155         Element element = null;
156         if (node.getNodeType() == Node.DOCUMENT_NODE) {
157             element = ((Document) node).getDocumentElement();
158         } else if (node.getNodeType() == Node.ELEMENT_NODE) {
159             element = (Element) node;
160         } else {
161             throw new MarshalException
162                 (&quot;xmlStructure does not contain a proper Node&quot;);
163         }
164 
165         // check tag
166         String tag = element.getLocalName();
167         String namespace = element.getNamespaceURI();
168         if (tag == null || namespace == null) {
169             throw new MarshalException(&quot;Document implementation must &quot; +
170                 &quot;support DOM Level 2 and be namespace aware&quot;);
171         }
172         if (&quot;KeyInfo&quot;.equals(tag) &amp;&amp; XMLSignature.XMLNS.equals(namespace)) {
<span class="line-modified">173             return new DOMKeyInfo(element, new UnmarshalContext(), getProvider());</span>






174         } else {
<span class="line-modified">175             throw new MarshalException(&quot;invalid KeyInfo tag: &quot; + namespace + &quot;:&quot; + tag);</span>
176         }
177     }
178 
179     private static class UnmarshalContext extends DOMCryptoContext {
180         UnmarshalContext() {}
181     }
182 
183 }
</pre>
</td>
<td>
<hr />
<pre>
153         node.normalize();
154 
155         Element element = null;
156         if (node.getNodeType() == Node.DOCUMENT_NODE) {
157             element = ((Document) node).getDocumentElement();
158         } else if (node.getNodeType() == Node.ELEMENT_NODE) {
159             element = (Element) node;
160         } else {
161             throw new MarshalException
162                 (&quot;xmlStructure does not contain a proper Node&quot;);
163         }
164 
165         // check tag
166         String tag = element.getLocalName();
167         String namespace = element.getNamespaceURI();
168         if (tag == null || namespace == null) {
169             throw new MarshalException(&quot;Document implementation must &quot; +
170                 &quot;support DOM Level 2 and be namespace aware&quot;);
171         }
172         if (&quot;KeyInfo&quot;.equals(tag) &amp;&amp; XMLSignature.XMLNS.equals(namespace)) {
<span class="line-modified">173             try {</span>
<span class="line-added">174                 return new DOMKeyInfo(element, new UnmarshalContext(), getProvider());</span>
<span class="line-added">175             } catch (MarshalException me) {</span>
<span class="line-added">176                 throw me;</span>
<span class="line-added">177             } catch (Exception e) {</span>
<span class="line-added">178                 throw new MarshalException(e);</span>
<span class="line-added">179             }</span>
180         } else {
<span class="line-modified">181             throw new MarshalException(&quot;Invalid KeyInfo tag: &quot; + namespace + &quot;:&quot; + tag);</span>
182         }
183     }
184 
185     private static class UnmarshalContext extends DOMCryptoContext {
186         UnmarshalContext() {}
187     }
188 
189 }
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../../../java.security.jgss/share/classes/sun/security/krb5/Checksum.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="DOMXMLSignatureFactory.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>