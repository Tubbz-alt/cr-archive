diff a/src/jdk.jdi/windows/native/libdt_shmem/shmem_md.c b/src/jdk.jdi/windows/native/libdt_shmem/shmem_md.c
--- a/src/jdk.jdi/windows/native/libdt_shmem/shmem_md.c
+++ b/src/jdk.jdi/windows/native/libdt_shmem/shmem_md.c
@@ -28,15 +28,10 @@
 
 #include "shmem_md.h"
 #include "sysShmem.h"
 #include "shmemBase.h"  /* for exitTransportWithError */
 
-/* Use THIS_FILE when it is available. */
-#ifndef THIS_FILE
-    #define THIS_FILE __FILE__
-#endif
-
 /*
  * These functions are not completely universal. For now, they are used
  * exclusively for Jbug's shared memory transport mechanism. They have
  * been implemented on Win32 only so far, so the abstractions may not be correct
  * yet.
@@ -47,11 +42,11 @@
 #ifdef DEBUG
 #define sysAssert(expression) {         \
     if (!(expression)) {                \
             exitTransportWithError \
             ("\"%s\", line %d: assertion failure\n", \
-             THIS_FILE, __DATE__, __LINE__); \
+             __FILE__, __DATE__, __LINE__); \
     }                                   \
 }
 #else
 #define sysAssert(expression) ((void) 0)
 #endif
