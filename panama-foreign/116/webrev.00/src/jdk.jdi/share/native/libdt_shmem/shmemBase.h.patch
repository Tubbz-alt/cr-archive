diff a/src/jdk.jdi/share/native/libdt_shmem/shmemBase.h b/src/jdk.jdi/share/native/libdt_shmem/shmemBase.h
--- a/src/jdk.jdi/share/native/libdt_shmem/shmemBase.h
+++ b/src/jdk.jdi/share/native/libdt_shmem/shmemBase.h
@@ -47,29 +47,24 @@
 jint shmemBase_sendPacket(SharedMemoryConnection *, const jdwpPacket *packet);
 jint shmemBase_receivePacket(SharedMemoryConnection *, jdwpPacket *packet);
 jint shmemBase_name(SharedMemoryTransport *, char **name);
 jint shmemBase_getlasterror(char *msg, jint size);
 
-/* Use THIS_FILE when it is available. */
-#ifndef THIS_FILE
-    #define THIS_FILE __FILE__
-#endif
-
 #ifdef DEBUG
 #define SHMEM_ASSERT(expression)  \
 do {                            \
     if (!(expression)) {                \
-        exitTransportWithError("assertion failed", THIS_FILE, __DATE__, __LINE__); \
+        exitTransportWithError("assertion failed", __FILE__, __DATE__, __LINE__); \
     } \
 } while (0)
 #else
 #define SHMEM_ASSERT(expression) ((void) 0)
 #endif
 
 #define SHMEM_GUARANTEE(expression) \
 do {                            \
     if (!(expression)) {                \
-        exitTransportWithError("assertion failed", THIS_FILE, __DATE__, __LINE__); \
+        exitTransportWithError("assertion failed", __FILE__, __DATE__, __LINE__); \
     } \
 } while (0)
 
 #endif
