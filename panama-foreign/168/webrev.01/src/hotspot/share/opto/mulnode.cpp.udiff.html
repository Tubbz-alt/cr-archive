<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/opto/mulnode.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="machnode.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="phasetype.hpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/opto/mulnode.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1997, 2017, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1997, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1164,10 +1164,22 @@</span>
    Node *shl = in(1);
    if( in1_op == Op_LShiftI &amp;&amp;
        phase-&gt;type(shl-&gt;in(2)) == t2 )
      return new AndINode( shl-&gt;in(1), phase-&gt;intcon(mask) );
  
<span class="udiff-line-added">+   // Check for (x &gt;&gt; n) &gt;&gt;&gt; 31. Replace with (x &gt;&gt;&gt; 31)</span>
<span class="udiff-line-added">+   Node *shr = in(1);</span>
<span class="udiff-line-added">+   if ( in1_op == Op_RShiftI ) {</span>
<span class="udiff-line-added">+     Node *in11 = shr-&gt;in(1);</span>
<span class="udiff-line-added">+     Node *in12 = shr-&gt;in(2);</span>
<span class="udiff-line-added">+     const TypeInt *t11 = phase-&gt;type(in11)-&gt;isa_int();</span>
<span class="udiff-line-added">+     const TypeInt *t12 = phase-&gt;type(in12)-&gt;isa_int();</span>
<span class="udiff-line-added">+     if ( t11 &amp;&amp; t2 &amp;&amp; t2-&gt;is_con(31) &amp;&amp; t12 &amp;&amp; t12-&gt;is_con() ) {</span>
<span class="udiff-line-added">+       return new URShiftINode(in11, phase-&gt;intcon(31));</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+   }</span>
<span class="udiff-line-added">+ </span>
    return NULL;
  }
  
  //------------------------------Value------------------------------------------
  // A URShiftINode shifts its input2 right by input1 amount.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1293,10 +1305,21 @@</span>
    Node *shl = in(1);
    if( shl-&gt;Opcode() == Op_LShiftL &amp;&amp;
        phase-&gt;type(shl-&gt;in(2)) == t2 )
      return new AndLNode( shl-&gt;in(1), phase-&gt;longcon(mask) );
  
<span class="udiff-line-added">+   // Check for (x &gt;&gt; n) &gt;&gt;&gt; 63. Replace with (x &gt;&gt;&gt; 63)</span>
<span class="udiff-line-added">+   Node *shr = in(1);</span>
<span class="udiff-line-added">+   if ( shr-&gt;Opcode() == Op_RShiftL ) {</span>
<span class="udiff-line-added">+     Node *in11 = shr-&gt;in(1);</span>
<span class="udiff-line-added">+     Node *in12 = shr-&gt;in(2);</span>
<span class="udiff-line-added">+     const TypeLong *t11 = phase-&gt;type(in11)-&gt;isa_long();</span>
<span class="udiff-line-added">+     const TypeInt *t12 = phase-&gt;type(in12)-&gt;isa_int();</span>
<span class="udiff-line-added">+     if ( t11 &amp;&amp; t2 &amp;&amp; t2-&gt;is_con(63) &amp;&amp; t12 &amp;&amp; t12-&gt;is_con() ) {</span>
<span class="udiff-line-added">+       return new URShiftLNode(in11, phase-&gt;intcon(63));</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+   }</span>
    return NULL;
  }
  
  //------------------------------Value------------------------------------------
  // A URShiftINode shifts its input2 right by input1 amount.
</pre>
<center><a href="machnode.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="phasetype.hpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>