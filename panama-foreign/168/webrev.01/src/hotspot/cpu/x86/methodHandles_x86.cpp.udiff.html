<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/cpu/x86/methodHandles_x86.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="macroAssembler_x86.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="sharedRuntime_x86_32.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/cpu/x86/methodHandles_x86.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -72,19 +72,19 @@</span>
                                   const char* error_message) {
    InstanceKlass** klass_addr = SystemDictionary::well_known_klass_addr(klass_id);
    Klass* klass = SystemDictionary::well_known_klass(klass_id);
    Register temp = rdi;
    Register temp2 = noreg;
<span class="udiff-line-modified-removed">-   LP64_ONLY(temp2 = rscratch1);  // used by MacroAssembler::cmpptr</span>
<span class="udiff-line-modified-added">+   LP64_ONLY(temp2 = rscratch1);  // used by MacroAssembler::cmpptr and load_klass</span>
    Label L_ok, L_bad;
    BLOCK_COMMENT(&quot;verify_klass {&quot;);
    __ verify_oop(obj);
    __ testptr(obj, obj);
    __ jcc(Assembler::zero, L_bad);
    __ push(temp); if (temp2 != noreg)  __ push(temp2);
  #define UNPUSH { if (temp2 != noreg)  __ pop(temp2);  __ pop(temp); }
<span class="udiff-line-modified-removed">-   __ load_klass(temp, obj);</span>
<span class="udiff-line-modified-added">+   __ load_klass(temp, obj, temp2);</span>
    __ cmpptr(temp, ExternalAddress((address) klass_addr));
    __ jcc(Assembler::equal, L_ok);
    intptr_t super_check_offset = klass-&gt;super_check_offset();
    __ movptr(temp, Address(temp, super_check_offset));
    __ cmpptr(temp, ExternalAddress((address) klass_addr));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -350,19 +350,19 @@</span>
          // Don&#39;t actually load the klass; just null-check the receiver.
          __ null_check(receiver_reg);
        } else {
          // load receiver klass itself
          __ null_check(receiver_reg, oopDesc::klass_offset_in_bytes());
<span class="udiff-line-modified-removed">-         __ load_klass(temp1_recv_klass, receiver_reg);</span>
<span class="udiff-line-modified-added">+         __ load_klass(temp1_recv_klass, receiver_reg, temp2);</span>
          __ verify_klass_ptr(temp1_recv_klass);
        }
        BLOCK_COMMENT(&quot;check_receiver {&quot;);
        // The receiver for the MemberName must be in receiver_reg.
        // Check the receiver against the MemberName.clazz
        if (VerifyMethodHandles &amp;&amp; iid == vmIntrinsics::_linkToSpecial) {
          // Did not load it above...
<span class="udiff-line-modified-removed">-         __ load_klass(temp1_recv_klass, receiver_reg);</span>
<span class="udiff-line-modified-added">+         __ load_klass(temp1_recv_klass, receiver_reg, temp2);</span>
          __ verify_klass_ptr(temp1_recv_klass);
        }
        if (VerifyMethodHandles &amp;&amp; iid != vmIntrinsics::_linkToInterface) {
          Label L_ok;
          Register temp2_defc = temp2;
</pre>
<center><a href="macroAssembler_x86.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="sharedRuntime_x86_32.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>