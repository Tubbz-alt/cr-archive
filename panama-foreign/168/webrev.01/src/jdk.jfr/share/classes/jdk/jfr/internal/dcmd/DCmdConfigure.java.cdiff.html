<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.jfr/share/classes/jdk/jfr/internal/dcmd/DCmdConfigure.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../Utils.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../handlers/EventHandler.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jfr/share/classes/jdk/jfr/internal/dcmd/DCmdConfigure.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 30,11 ***</span>
  import jdk.jfr.FlightRecorder;
  import jdk.jfr.internal.LogLevel;
  import jdk.jfr.internal.LogTag;
  import jdk.jfr.internal.Logger;
  import jdk.jfr.internal.Options;
<span class="line-removed">- import jdk.jfr.internal.PlatformRecorder;</span>
  import jdk.jfr.internal.PrivateAccess;
  import jdk.jfr.internal.Repository;
  import jdk.jfr.internal.SecuritySupport.SafePath;
  
  /**
<span class="line-new-header">--- 30,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 60,10 ***</span>
<span class="line-new-header">--- 59,11 ---</span>
       * @throws DCmdException
       *             if the dump could not be completed
       */
      public String execute
      (
<span class="line-added">+             boolean verbose,</span>
              String repositoryPath,
              String dumpPath,
              Integer stackDepth,
              Long globalBufferCount,
              Long globalBufferSize,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 97,70 ***</span>
                  }
                  Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Base repository path set to &quot; + repositoryPath);
              } catch (Exception e) {
                  throw new DCmdException(&quot;Could not use &quot; + repositoryPath + &quot; as repository. &quot; + e.getMessage(), e);
              }
<span class="line-modified">!             printRepositoryPath();</span>
              updated = true;
          }
  
          if (dumpPath != null)  {
              Options.setDumpPath(new SafePath(dumpPath));
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Emergency dump path set to &quot; + dumpPath);
<span class="line-modified">!             printDumpPath();</span>
              updated = true;
          }
  
          if (stackDepth != null)  {
              Options.setStackDepth(stackDepth);
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Stack depth set to &quot; + stackDepth);
<span class="line-modified">!             printStackDepth();</span>
              updated = true;
          }
  
          if (globalBufferCount != null)  {
              Options.setGlobalBufferCount(globalBufferCount);
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Global buffer count set to &quot; + globalBufferCount);
<span class="line-modified">!             printGlobalBufferCount();</span>
              updated = true;
          }
  
          if (globalBufferSize != null)  {
              Options.setGlobalBufferSize(globalBufferSize);
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Global buffer size set to &quot; + globalBufferSize);
<span class="line-modified">!             printGlobalBufferSize();</span>
              updated = true;
          }
  
          if (threadBufferSize != null)  {
              Options.setThreadBufferSize(threadBufferSize);
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Thread buffer size set to &quot; + threadBufferSize);
<span class="line-modified">!             printThreadBufferSize();</span>
              updated = true;
          }
  
          if (memorySize != null) {
              Options.setMemorySize(memorySize);
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Memory size set to &quot; + memorySize);
<span class="line-modified">!             printMemorySize();</span>
              updated = true;
          }
  
          if (maxChunkSize != null)  {
              Options.setMaxChunkSize(maxChunkSize);
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Max chunk size set to &quot; + maxChunkSize);
<span class="line-modified">!             printMaxChunkSize();</span>
              updated = true;
          }
  
          if (sampleThreads != null)  {
              Options.setSampleThreads(sampleThreads);
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Sample threads set to &quot; + sampleThreads);
<span class="line-modified">!             printSampleThreads();</span>
              updated = true;
          }
<span class="line-modified">! </span>
          if (!updated) {
              println(&quot;Current configuration:&quot;);
              println();
              printRepositoryPath();
              printStackDepth();
<span class="line-new-header">--- 97,90 ---</span>
                  }
                  Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Base repository path set to &quot; + repositoryPath);
              } catch (Exception e) {
                  throw new DCmdException(&quot;Could not use &quot; + repositoryPath + &quot; as repository. &quot; + e.getMessage(), e);
              }
<span class="line-modified">!             if (verbose) {</span>
<span class="line-added">+                 printRepositoryPath();</span>
<span class="line-added">+             }</span>
              updated = true;
          }
  
          if (dumpPath != null)  {
              Options.setDumpPath(new SafePath(dumpPath));
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Emergency dump path set to &quot; + dumpPath);
<span class="line-modified">!            if (verbose) {</span>
<span class="line-added">+                printDumpPath();</span>
<span class="line-added">+            }</span>
              updated = true;
          }
  
          if (stackDepth != null)  {
              Options.setStackDepth(stackDepth);
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Stack depth set to &quot; + stackDepth);
<span class="line-modified">!             if (verbose) {</span>
<span class="line-added">+                 printStackDepth();</span>
<span class="line-added">+             }</span>
              updated = true;
          }
  
          if (globalBufferCount != null)  {
              Options.setGlobalBufferCount(globalBufferCount);
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Global buffer count set to &quot; + globalBufferCount);
<span class="line-modified">!             if (verbose) {</span>
<span class="line-added">+                 printGlobalBufferCount();</span>
<span class="line-added">+             }</span>
              updated = true;
          }
  
          if (globalBufferSize != null)  {
              Options.setGlobalBufferSize(globalBufferSize);
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Global buffer size set to &quot; + globalBufferSize);
<span class="line-modified">!             if (verbose) {</span>
<span class="line-added">+                 printGlobalBufferSize();</span>
<span class="line-added">+             }</span>
              updated = true;
          }
  
          if (threadBufferSize != null)  {
              Options.setThreadBufferSize(threadBufferSize);
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Thread buffer size set to &quot; + threadBufferSize);
<span class="line-modified">!             if (verbose) {</span>
<span class="line-added">+                 printThreadBufferSize();</span>
<span class="line-added">+             }</span>
              updated = true;
          }
  
          if (memorySize != null) {
              Options.setMemorySize(memorySize);
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Memory size set to &quot; + memorySize);
<span class="line-modified">!             if (verbose) {</span>
<span class="line-added">+                 printMemorySize();</span>
<span class="line-added">+             }</span>
              updated = true;
          }
  
          if (maxChunkSize != null)  {
              Options.setMaxChunkSize(maxChunkSize);
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Max chunk size set to &quot; + maxChunkSize);
<span class="line-modified">!             if (verbose) {</span>
<span class="line-added">+                 printMaxChunkSize();</span>
<span class="line-added">+             }</span>
              updated = true;
          }
  
          if (sampleThreads != null)  {
              Options.setSampleThreads(sampleThreads);
              Logger.log(LogTag.JFR, LogLevel.INFO, &quot;Sample threads set to &quot; + sampleThreads);
<span class="line-modified">!             if (verbose) {</span>
<span class="line-added">+                 printSampleThreads();</span>
<span class="line-added">+             }</span>
              updated = true;
          }
<span class="line-modified">!         if (!verbose) {</span>
<span class="line-added">+             return &quot;&quot;;</span>
<span class="line-added">+         }</span>
          if (!updated) {
              println(&quot;Current configuration:&quot;);
              println();
              printRepositoryPath();
              printStackDepth();
</pre>
<center><a href="../Utils.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../handlers/EventHandler.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>