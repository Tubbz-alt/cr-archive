<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/lib/jdk/test/lib/cds/CDSTestUtils.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../apps/LingeredApp.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../process/OutputAnalyzer.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/lib/jdk/test/lib/cds/CDSTestUtils.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
266 
267     // check result of &#39;dump-the-archive&#39; operation, that is &quot;-Xshare:dump&quot;
268     public static OutputAnalyzer checkDump(OutputAnalyzer output, String... extraMatches)
269         throws Exception {
270 
271         if (!DYNAMIC_DUMP) {
272             output.shouldContain(&quot;Loading classes to share&quot;);
273         } else {
274             output.shouldContain(&quot;Buffer-space to target-space delta&quot;)
275                   .shouldContain(&quot;Written dynamic archive 0x&quot;);
276         }
277         output.shouldHaveExitValue(0);
278 
279         for (String match : extraMatches) {
280             output.shouldContain(match);
281         }
282 
283         return output;
284     }
285 






286 
287     // A commonly used convenience methods to create an archive and check the results
288     // Creates an archive and checks for errors
289     public static OutputAnalyzer createArchiveAndCheck(CDSOptions opts)
290         throws Exception {
291         return checkDump(createArchive(opts));
292     }
293 
294 
295     public static OutputAnalyzer createArchiveAndCheck(String... cliPrefix)
296         throws Exception {
297         return checkDump(createArchive(cliPrefix));
298     }
299 
300 
301     // This method should be used to check the output of child VM for common exceptions.
302     // Most of CDS tests deal with child VM processes for creating and using the archive.
303     // However exceptions that occur in the child process do not automatically propagate
304     // to the parent process. This mechanism aims to improve the propagation
305     // of exceptions and common errors.
</pre>
</td>
<td>
<hr />
<pre>
266 
267     // check result of &#39;dump-the-archive&#39; operation, that is &quot;-Xshare:dump&quot;
268     public static OutputAnalyzer checkDump(OutputAnalyzer output, String... extraMatches)
269         throws Exception {
270 
271         if (!DYNAMIC_DUMP) {
272             output.shouldContain(&quot;Loading classes to share&quot;);
273         } else {
274             output.shouldContain(&quot;Buffer-space to target-space delta&quot;)
275                   .shouldContain(&quot;Written dynamic archive 0x&quot;);
276         }
277         output.shouldHaveExitValue(0);
278 
279         for (String match : extraMatches) {
280             output.shouldContain(match);
281         }
282 
283         return output;
284     }
285 
<span class="line-added">286     // check result of dumping base archive</span>
<span class="line-added">287     public static OutputAnalyzer checkBaseDump(OutputAnalyzer output) throws Exception {</span>
<span class="line-added">288         output.shouldContain(&quot;Loading classes to share&quot;);</span>
<span class="line-added">289         output.shouldHaveExitValue(0);</span>
<span class="line-added">290         return output;</span>
<span class="line-added">291     }</span>
292 
293     // A commonly used convenience methods to create an archive and check the results
294     // Creates an archive and checks for errors
295     public static OutputAnalyzer createArchiveAndCheck(CDSOptions opts)
296         throws Exception {
297         return checkDump(createArchive(opts));
298     }
299 
300 
301     public static OutputAnalyzer createArchiveAndCheck(String... cliPrefix)
302         throws Exception {
303         return checkDump(createArchive(cliPrefix));
304     }
305 
306 
307     // This method should be used to check the output of child VM for common exceptions.
308     // Most of CDS tests deal with child VM processes for creating and using the archive.
309     // However exceptions that occur in the child process do not automatically propagate
310     // to the parent process. This mechanism aims to improve the propagation
311     // of exceptions and common errors.
</pre>
</td>
</tr>
</table>
<center><a href="../apps/LingeredApp.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../process/OutputAnalyzer.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>