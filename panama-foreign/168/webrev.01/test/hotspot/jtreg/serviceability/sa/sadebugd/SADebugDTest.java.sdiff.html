<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/serviceability/sa/sadebugd/SADebugDTest.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="DebugdUtils.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../tmtools/jstack/JstackThreadTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/serviceability/sa/sadebugd/SADebugDTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 77             for (boolean useRegistryPort : boolArray) {
 78                 for (boolean useHostname : boolArray) {
 79                     testWithPid(useRmiPort, useRegistryPort, useHostname);
 80                 }
 81             }
 82         }
 83     }
 84 
 85 
 86     private static void testWithPid(final boolean useRmiPort, final boolean useRegistryPort, final boolean useHostName) throws Exception {
 87         LingeredApp app = null;
 88 
 89         try {
 90             app = LingeredApp.startApp();
 91             System.out.println(&quot;Started LingeredApp with pid &quot; + app.getPid());
 92 
 93             do {
 94                 testResult = false;
 95                 portInUse = false;
 96                 JDKToolLauncher jhsdbLauncher = JDKToolLauncher.createUsingTestJDK(&quot;jhsdb&quot;);

 97                 jhsdbLauncher.addToolArg(&quot;debugd&quot;);
 98                 jhsdbLauncher.addToolArg(&quot;--pid&quot;);
 99                 jhsdbLauncher.addToolArg(Long.toString(app.getPid()));
100 
101                 int registryPort = REGISTRY_DEFAULT_PORT;
102                 if (useRegistryPort) {
103                     registryPort = Utils.findUnreservedFreePort(REGISTRY_DEFAULT_PORT);
104                     jhsdbLauncher.addToolArg(&quot;--registryport&quot;);
105                     jhsdbLauncher.addToolArg(Integer.toString(registryPort));
106                 }
107 
108                 int rmiPort = -1;
109                 if (useRmiPort) {
110                     rmiPort = Utils.findUnreservedFreePort(REGISTRY_DEFAULT_PORT, registryPort);
111                     jhsdbLauncher.addToolArg(&quot;--rmiport&quot;);
112                     jhsdbLauncher.addToolArg(Integer.toString(rmiPort));
113                 }
114                 if (useHostName) {
115                     jhsdbLauncher.addToolArg(&quot;--hostname&quot;);
116                     jhsdbLauncher.addToolArg(&quot;testhost&quot;);
</pre>
</td>
<td>
<hr />
<pre>
 77             for (boolean useRegistryPort : boolArray) {
 78                 for (boolean useHostname : boolArray) {
 79                     testWithPid(useRmiPort, useRegistryPort, useHostname);
 80                 }
 81             }
 82         }
 83     }
 84 
 85 
 86     private static void testWithPid(final boolean useRmiPort, final boolean useRegistryPort, final boolean useHostName) throws Exception {
 87         LingeredApp app = null;
 88 
 89         try {
 90             app = LingeredApp.startApp();
 91             System.out.println(&quot;Started LingeredApp with pid &quot; + app.getPid());
 92 
 93             do {
 94                 testResult = false;
 95                 portInUse = false;
 96                 JDKToolLauncher jhsdbLauncher = JDKToolLauncher.createUsingTestJDK(&quot;jhsdb&quot;);
<span class="line-added"> 97                 jhsdbLauncher.addVMArgs(Utils.getFilteredTestJavaOpts(&quot;-Xcomp&quot;));</span>
 98                 jhsdbLauncher.addToolArg(&quot;debugd&quot;);
 99                 jhsdbLauncher.addToolArg(&quot;--pid&quot;);
100                 jhsdbLauncher.addToolArg(Long.toString(app.getPid()));
101 
102                 int registryPort = REGISTRY_DEFAULT_PORT;
103                 if (useRegistryPort) {
104                     registryPort = Utils.findUnreservedFreePort(REGISTRY_DEFAULT_PORT);
105                     jhsdbLauncher.addToolArg(&quot;--registryport&quot;);
106                     jhsdbLauncher.addToolArg(Integer.toString(registryPort));
107                 }
108 
109                 int rmiPort = -1;
110                 if (useRmiPort) {
111                     rmiPort = Utils.findUnreservedFreePort(REGISTRY_DEFAULT_PORT, registryPort);
112                     jhsdbLauncher.addToolArg(&quot;--rmiport&quot;);
113                     jhsdbLauncher.addToolArg(Integer.toString(rmiPort));
114                 }
115                 if (useHostName) {
116                     jhsdbLauncher.addToolArg(&quot;--hostname&quot;);
117                     jhsdbLauncher.addToolArg(&quot;testhost&quot;);
</pre>
</td>
</tr>
</table>
<center><a href="DebugdUtils.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../tmtools/jstack/JstackThreadTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>