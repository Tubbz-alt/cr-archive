<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/hotspot/jtreg/serviceability/sa/ClhsdbJstackXcompStress.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="ClhsdbDumpclass.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="ClhsdbLauncher.java.udiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/serviceability/sa/ClhsdbJstackXcompStress.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -20,15 +20,12 @@</span>
   * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
   * or visit www.oracle.com if you need additional information or have any
   * questions.
   */
  
<span class="udiff-line-removed">- import java.util.ArrayList;</span>
  import java.util.Arrays;
  import java.util.List;
<span class="udiff-line-removed">- import java.util.regex.Matcher;</span>
<span class="udiff-line-removed">- import java.util.regex.Pattern;</span>
  import java.util.stream.Collectors;
  
  import jdk.test.lib.JDKToolLauncher;
  import jdk.test.lib.SA.SATestUtils;
  import jdk.test.lib.Utils;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -59,10 +56,11 @@</span>
      private static void runJstackInLoop(LingeredApp app) throws Exception {
          boolean anyMatchedCompiledFrame = false;
          for (int i = 0; i &lt; MAX_ITERATIONS; i++) {
              JDKToolLauncher launcher = JDKToolLauncher
                      .createUsingTestJDK(&quot;jhsdb&quot;);
<span class="udiff-line-added">+             launcher.addVMArgs(Utils.getFilteredTestJavaOpts(&quot;-Xcomp&quot;));</span>
              launcher.addToolArg(&quot;jstack&quot;);
              launcher.addToolArg(&quot;--pid&quot;);
              launcher.addToolArg(Long.toString(app.getPid()));
  
              ProcessBuilder pb = SATestUtils.createProcessBuilder(launcher);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -74,11 +72,11 @@</span>
              if (DEBUG) {
                  System.out.println(out.getStdout());
                  System.err.println(out.getStderr());
              }
  
<span class="udiff-line-modified-removed">-             out.stderrShouldBeEmpty(); // NPE&#39;s are reported on the err stream</span>
<span class="udiff-line-modified-added">+             out.stderrShouldBeEmptyIgnoreVMWarnings();</span>
              out.stdoutShouldNotContain(&quot;Error occurred during stack walking:&quot;);
              out.stdoutShouldContain(LingeredAppWithRecComputation.THREAD_NAME);
              List&lt;String&gt; stdoutList = Arrays.asList(out.getStdout().split(&quot;\\R&quot;));
              anyMatchedCompiledFrame = anyMatchedCompiledFrame || isMatchCompiledFrame(stdoutList);
          }
</pre>
<center><a href="ClhsdbDumpclass.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="ClhsdbLauncher.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>