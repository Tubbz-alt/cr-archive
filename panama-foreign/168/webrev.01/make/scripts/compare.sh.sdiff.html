<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/scripts/compare.sh</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="../modules/java.base/gensrc/GensrcEmojiData.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../../src/hotspot/cpu/aarch64/aarch64.ad.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/scripts/compare.sh</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 116   DIS_DIFF_FILTER=&quot;$SED \
 117       -e &#39;s/0x[0-9a-f]\{3,16\}/&lt;HEXSTR&gt;/g&#39; -e &#39;s/^[0-9a-f]\{12,20\}/&lt;ADDR&gt;/&#39; \
 118       -e &#39;s/-20[0-9][0-9]-[0-1][0-9]-[0-3][0-9]-[0-2][0-9]\{5\}/&lt;DATE&gt;/g&#39; \
 119       -e &#39;s/), built on .*/), &lt;DATE&gt;/&#39; \
 120       &quot;
 121 fi
 122 
 123 ################################################################################
 124 # Compare text files and ignore specific differences:
 125 #
 126 #  * Timestamps in Java sources generated by idl2java
 127 #  * Sorting order and cleanup style in .properties files
 128 
 129 diff_text() {
 130     OTHER_FILE=$1
 131     THIS_FILE=$2
 132 
 133     SUFFIX=&quot;${THIS_FILE##*.}&quot;
 134     NAME=&quot;${THIS_FILE##*/}&quot;
 135 
<span class="line-modified"> 136     TMP=1</span>
<span class="line-modified"> 137 </span>
<span class="line-removed"> 138     if [[ &quot;$THIS_FILE&quot; = *&quot;META-INF/MANIFEST.MF&quot; ]]; then</span>
<span class="line-removed"> 139         # Filter out date string, ant version and java version differences.</span>
<span class="line-removed"> 140         TMP=$($DIFF $OTHER_FILE $THIS_FILE | \</span>
<span class="line-removed"> 141             $GREP &#39;^[&lt;&gt;]&#39; | \</span>
<span class="line-removed"> 142             $SED -e &#39;/[&lt;&gt;] Ant-Version: Apache Ant .*/d&#39; \</span>
<span class="line-removed"> 143                  -e &#39;/[&lt;&gt;] Created-By: .* (Oracle [Corpatin)]*/d&#39; \</span>
<span class="line-removed"> 144                  -e &#39;/[&lt;&gt;]  [Corpatin]*)/d&#39; \</span>
<span class="line-removed"> 145                  -e &#39;/[&lt;&gt;].*[0-9]\{4\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}-b[0-9]\{2\}.*/d&#39;)</span>
<span class="line-removed"> 146     fi</span>
<span class="line-removed"> 147     if test &quot;x$SUFFIX&quot; = &quot;xjava&quot;; then</span>
<span class="line-removed"> 148         TMP=$($DIFF $OTHER_FILE $THIS_FILE | \</span>
<span class="line-removed"> 149             $GREP &#39;^[&lt;&gt;]&#39; | \</span>
<span class="line-removed"> 150             $SED -e &#39;/[&lt;&gt;] \* from.*\.idl/d&#39; \</span>
<span class="line-removed"> 151                  -e &#39;/[&lt;&gt;] .*[0-9]\{4\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}-b[0-9]\{2\}.*/d&#39; \</span>
<span class="line-removed"> 152                  -e &#39;/[&lt;&gt;] .*[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6\}.*/d&#39; \</span>
<span class="line-removed"> 153                  -e &#39;/[&lt;&gt;] \*.*[0-9]\{4\} \(at \)*[0-9][0-9]*:[0-9]\{2\}:[0-9]\{2\}.*/d&#39; \</span>
<span class="line-removed"> 154                  -e &#39;/\/\/ Generated from input file.*/d&#39; \</span>
<span class="line-removed"> 155                  -e &#39;/\/\/ This file was generated AUTOMATICALLY from a template file.*/d&#39; \</span>
<span class="line-removed"> 156                  -e &#39;/\/\/ java GenerateCharacter.*/d&#39;)</span>
<span class="line-removed"> 157     fi</span>
<span class="line-removed"> 158     # Ignore date strings in class files.</span>
<span class="line-removed"> 159     # Anonymous lambda classes get randomly assigned counters in their names.</span>
 160     if test &quot;x$SUFFIX&quot; = &quot;xclass&quot;; then
 161         if [ &quot;$NAME&quot; = &quot;SystemModules\$all.class&quot; ] \
 162            || [ &quot;$NAME&quot; = &quot;SystemModules\$default.class&quot; ]; then
 163             # The SystemModules\$*.classes are not comparable as they contain the
 164             # module hashes which would require a whole other level of
 165             # reproducible builds to get reproducible. There is also random
 166             # order of map initialization.
 167             TMP=&quot;&quot;
 168         elif [ &quot;$NAME&quot; = &quot;module-info.class&quot; ]; then
 169             # The module-info.class have several issues with random ordering of
 170             # elements in HashSets.
 171             MODULES_CLASS_FILTER=&quot;$SED \
 172                 -e &#39;s/,$//&#39; \
 173                 -e &#39;s/;$//&#39; \
 174                 -e &#39;s/^ *[0-9]*://&#39; \
 175                 -e &#39;s/#[0-9]* */#/&#39; \
 176                 -e &#39;s/ *\/\// \/\//&#39; \
 177                 -e &#39;s/aload *[0-9]*/aload X/&#39; \
 178                 -e &#39;s/ldc_w/ldc  /&#39; \
 179                 | $SORT \
 180                 &quot;
 181             $JAVAP -c -constants -l -p &quot;${OTHER_FILE}&quot; \
 182                 | eval &quot;$MODULES_CLASS_FILTER&quot; &gt;  ${OTHER_FILE}.javap &amp;
 183             $JAVAP -c -constants -l -p &quot;${THIS_FILE}&quot; \
 184                 | eval &quot;$MODULES_CLASS_FILTER&quot; &gt; ${THIS_FILE}.javap &amp;
 185             wait
 186             TMP=$($DIFF ${OTHER_FILE}.javap ${THIS_FILE}.javap)
<span class="line-removed"> 187         # To improve performance when large diffs are found, do a rough filtering of classes</span>
<span class="line-removed"> 188         # elibeble for these exceptions</span>
<span class="line-removed"> 189         elif $GREP -R -e &#39;[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6\}&#39; \</span>
<span class="line-removed"> 190                 -e &#39;lambda\$[a-zA-Z0-9]*\$[0-9]&#39; ${THIS_FILE} &gt; /dev/null</span>
<span class="line-removed"> 191         then</span>
<span class="line-removed"> 192             $JAVAP -c -constants -l -p &quot;${OTHER_FILE}&quot; &gt;  ${OTHER_FILE}.javap &amp;</span>
<span class="line-removed"> 193             $JAVAP -c -constants -l -p &quot;${THIS_FILE}&quot; &gt; ${THIS_FILE}.javap &amp;</span>
<span class="line-removed"> 194             wait</span>
<span class="line-removed"> 195             TMP=$($DIFF ${OTHER_FILE}.javap ${THIS_FILE}.javap | \</span>
<span class="line-removed"> 196                 $GREP &#39;^[&lt;&gt;]&#39; | \</span>
<span class="line-removed"> 197                 $SED -e &#39;/[&lt;&gt;].*[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6\}.*/d&#39; \</span>
<span class="line-removed"> 198                      -e &#39;/[&lt;&gt;].*lambda\$[a-zA-Z0-9]*\$[0-9]*/d&#39;)</span>
 199         fi
 200     fi
<span class="line-modified"> 201     if test &quot;x$SUFFIX&quot; = &quot;xproperties&quot;; then</span>
<span class="line-removed"> 202         # Filter out date string differences.</span>
<span class="line-removed"> 203         TMP=$($DIFF $OTHER_FILE $THIS_FILE | \</span>
<span class="line-removed"> 204             $GREP &#39;^[&lt;&gt;]&#39; | \</span>
<span class="line-removed"> 205             $SED -e &#39;/[&lt;&gt;].*[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6\}.*/d&#39;)</span>
<span class="line-removed"> 206     fi</span>
<span class="line-removed"> 207     if test &quot;x$SUFFIX&quot; = &quot;xhtml&quot;; then</span>
<span class="line-removed"> 208         # Some javadoc versions do not put quotes around font size</span>
<span class="line-removed"> 209         HTML_FILTER=&quot;$SED \</span>
<span class="line-removed"> 210             -e &#39;s/&lt;font size=-1&gt;/&lt;font size=\&quot;-1\&quot;&gt;/g&#39;&quot;</span>
<span class="line-removed"> 211         $CAT $THIS_FILE | eval &quot;$HTML_FILTER&quot; &gt; $THIS_FILE.filtered</span>
<span class="line-removed"> 212         $CAT $OTHER_FILE | eval &quot;$HTML_FILTER&quot; &gt; $OTHER_FILE.filtered</span>
<span class="line-removed"> 213         TMP=$($DIFF $OTHER_FILE.filtered $THIS_FILE.filtered | \</span>
<span class="line-removed"> 214             $GREP &#39;^[&lt;&gt;]&#39; | \</span>
<span class="line-removed"> 215             $SED -e &#39;/[&lt;&gt;] &lt;!-- Generated by javadoc .* on .* --&gt;/d&#39; \</span>
<span class="line-removed"> 216                  -e &#39;/[&lt;&gt;] &lt;meta name=&quot;date&quot; content=&quot;.*&quot;&gt;/d&#39; )</span>
<span class="line-removed"> 217     fi</span>
<span class="line-removed"> 218     if test &quot;$NAME&quot; = &quot;BenchmarkList&quot;; then</span>
<span class="line-removed"> 219         $SORT $THIS_FILE &gt; $THIS_FILE.sorted</span>
<span class="line-removed"> 220         $SORT $OTHER_FILE &gt; $OTHER_FILE.sorted</span>
<span class="line-removed"> 221         TMP=$($DIFF $THIS_FILE.sorted $OTHER_FILE.sorted)</span>
<span class="line-removed"> 222     fi</span>
 223     if test -n &quot;$TMP&quot;; then
 224         echo Files $OTHER_FILE and $THIS_FILE differ
 225         return 1
 226     fi
 227 
 228     return 0
 229 }
 230 
 231 ################################################################################
 232 # Compare directory structure
 233 
 234 compare_dirs() {
 235     THIS_DIR=$1
 236     OTHER_DIR=$2
 237     WORK_DIR=$3
 238 
 239     mkdir -p $WORK_DIR
 240 
 241     (cd $OTHER_DIR &amp;&amp; $FIND . -type d | $SORT &gt; $WORK_DIR/dirs_other)
 242     (cd $THIS_DIR &amp;&amp; $FIND . -type d | $SORT &gt; $WORK_DIR/dirs_this)
</pre>
<hr />
<pre>
 379     done
 380     if [ -z &quot;$found&quot; ]; then
 381         echo &quot;Identical!&quot;
 382     else
 383         REGRESSIONS=true
 384     fi
 385 }
 386 
 387 ################################################################################
 388 # Compare the rest of the files
 389 
 390 compare_general_files() {
 391     THIS_DIR=$1
 392     OTHER_DIR=$2
 393     WORK_DIR=$3
 394 
 395     GENERAL_FILES=$(cd $THIS_DIR &amp;&amp; $FIND . -type f ! -name &quot;*.so&quot; ! -name &quot;*.jar&quot; \
 396         ! -name &quot;*.zip&quot; ! -name &quot;*.debuginfo&quot; ! -name &quot;*.dylib&quot; ! -name &quot;jexec&quot; \
 397         ! -name &quot;modules&quot; ! -name &quot;ct.sym&quot; ! -name &quot;*.diz&quot; ! -name &quot;*.dll&quot; \
 398         ! -name &quot;*.cpl&quot; ! -name &quot;*.pdb&quot; ! -name &quot;*.exp&quot; ! -name &quot;*.ilk&quot; \
<span class="line-modified"> 399         ! -name &quot;*.lib&quot; ! -name &quot;*.war&quot; ! -name &quot;*.jmod&quot; ! -name &quot;*.exe&quot; \</span>
 400         ! -name &quot;*.obj&quot; ! -name &quot;*.o&quot; ! -name &quot;jspawnhelper&quot; ! -name &quot;*.a&quot; \
<span class="line-modified"> 401         ! -name &quot;*.tar.gz&quot; ! -name &quot;classes.jsa&quot; ! -name &quot;gtestLauncher&quot; \</span>
 402         ! -name &quot;*.map&quot; \
 403         | $GREP -v &quot;./bin/&quot;  | $SORT | $FILTER)
 404 
 405     echo Other files with binary differences...
 406     for f in $GENERAL_FILES
 407     do
 408         # Skip all files in test/*/native
 409         if [[ &quot;$f&quot; == */native/* ]]; then
 410             continue
 411         fi
 412         if [ -e $OTHER_DIR/$f ]; then
 413             SUFFIX=&quot;${f##*.}&quot;
 414             if [ &quot;$(basename $f)&quot; = &quot;release&quot; ]; then
<span class="line-modified"> 415                 # In release file, ignore differences in change numbers and order</span>
<span class="line-removed"> 416                 # of modules in list.</span>
 417                 OTHER_FILE=$WORK_DIR/$f.other
 418                 THIS_FILE=$WORK_DIR/$f.this
 419                 $MKDIR -p $(dirname $OTHER_FILE)
 420                 $MKDIR -p $(dirname $THIS_FILE)
<span class="line-modified"> 421                 RELEASE_FILTER=&quot;$SED \</span>
<span class="line-removed"> 422                     -e &#39;s/\:[0-9a-f]\{12,12\}/:CHANGE/g&#39; \</span>
<span class="line-removed"> 423                     -e &#39;s/[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6\}/&lt;DATE&gt;/g&#39; \</span>
<span class="line-removed"> 424                     -e &#39;s/^#.*/#COMMENT/g&#39; \</span>
<span class="line-removed"> 425                     -e &#39;s/MODULES=/MODULES=\&#39;$&#39;\n/&#39; \</span>
<span class="line-removed"> 426                     -e &#39;s/,/\&#39;$&#39;\n/g&#39; \</span>
<span class="line-removed"> 427                     | $SORT</span>
<span class="line-removed"> 428                     &quot;</span>
 429                 $CAT $OTHER_DIR/$f | eval &quot;$RELEASE_FILTER&quot; &gt; $OTHER_FILE
 430                 $CAT $THIS_DIR/$f  | eval &quot;$RELEASE_FILTER&quot; &gt; $THIS_FILE
<span class="line-removed"> 431             elif [ &quot;x$SUFFIX&quot; = &quot;xhtml&quot; ]; then</span>
<span class="line-removed"> 432                 # Ignore time stamps in docs files</span>
<span class="line-removed"> 433                 OTHER_FILE=$WORK_DIR/$f.other</span>
<span class="line-removed"> 434                 THIS_FILE=$WORK_DIR/$f.this</span>
<span class="line-removed"> 435                 $MKDIR -p $(dirname $OTHER_FILE) $(dirname $THIS_FILE)</span>
<span class="line-removed"> 436                 # Older versions of compare might have left soft links with</span>
<span class="line-removed"> 437                 # these names.</span>
<span class="line-removed"> 438                 $RM $OTHER_FILE $THIS_FILE</span>
<span class="line-removed"> 439                 #Note that | doesn&#39;t work on mac sed.</span>
<span class="line-removed"> 440                 HTML_FILTER=&quot;$SED \</span>
<span class="line-removed"> 441                     -e &#39;s/20[0-9]\{2\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6,7\}/&lt;DATE&gt;/g&#39; \</span>
<span class="line-removed"> 442                     -e &#39;s/20[0-9]\{2\}-[0-9]\{2\}-[0-9]\{2\}/&lt;DATE&gt;/g&#39; \</span>
<span class="line-removed"> 443                     -e &#39;s/\(-- Generated by javadoc \).*\( --\)/\1(removed)\2/&#39; \</span>
<span class="line-removed"> 444                     -e &#39;s/[A-Z][a-z]*, [A-Z][a-z]* [0-9][0-9]*, [0-9]\{4\} [0-9][0-9:]* [AMP]\{2,2\} [A-Z][A-Z]*/&lt;DATE&gt;/&#39; \</span>
<span class="line-removed"> 445                     -e &#39;s/from .*\.idl/\.idl/&#39; \</span>
<span class="line-removed"> 446                     &quot;</span>
<span class="line-removed"> 447                 $CAT $OTHER_DIR/$f | eval &quot;$HTML_FILTER&quot; &gt; $OTHER_FILE &amp;</span>
<span class="line-removed"> 448                 $CAT $THIS_DIR/$f  | eval &quot;$HTML_FILTER&quot; &gt; $THIS_FILE &amp;</span>
<span class="line-removed"> 449                 wait</span>
 450             elif [ &quot;$SUFFIX&quot; = &quot;svg&quot; ]; then
 451                 # GraphViz has non-determinism when generating svg files
 452                 OTHER_FILE=$WORK_DIR/$f.other
 453                 THIS_FILE=$WORK_DIR/$f.this
 454                 $MKDIR -p $(dirname $OTHER_FILE) $(dirname $THIS_FILE)
 455                 SVG_FILTER=&quot;$SED \
 456                     -e &#39;s/edge[0-9][0-9]*/edgeX/g&#39;
 457                     &quot;
 458                 $CAT $OTHER_DIR/$f | eval &quot;$SVG_FILTER&quot; &gt; $OTHER_FILE
 459                 $CAT $THIS_DIR/$f | eval &quot;$SVG_FILTER&quot; &gt; $THIS_FILE
 460             elif [[ &quot;$f&quot; = *&quot;/lib/classlist&quot; ]] || [ &quot;$SUFFIX&quot; = &quot;jar_contents&quot; ]; then
 461                 # The classlist files may have some lines in random order
 462                 OTHER_FILE=$WORK_DIR/$f.other
 463                 THIS_FILE=$WORK_DIR/$f.this
 464                 $MKDIR -p $(dirname $OTHER_FILE) $(dirname $THIS_FILE)
 465                 $RM $OTHER_FILE $THIS_FILE
 466                 $CAT $OTHER_DIR/$f | $SORT &gt; $OTHER_FILE
 467                 $CAT $THIS_DIR/$f  | $SORT &gt; $THIS_FILE
 468             else
 469                 OTHER_FILE=$OTHER_DIR/$f
</pre>
</td>
<td>
<hr />
<pre>
 116   DIS_DIFF_FILTER=&quot;$SED \
 117       -e &#39;s/0x[0-9a-f]\{3,16\}/&lt;HEXSTR&gt;/g&#39; -e &#39;s/^[0-9a-f]\{12,20\}/&lt;ADDR&gt;/&#39; \
 118       -e &#39;s/-20[0-9][0-9]-[0-1][0-9]-[0-3][0-9]-[0-2][0-9]\{5\}/&lt;DATE&gt;/g&#39; \
 119       -e &#39;s/), built on .*/), &lt;DATE&gt;/&#39; \
 120       &quot;
 121 fi
 122 
 123 ################################################################################
 124 # Compare text files and ignore specific differences:
 125 #
 126 #  * Timestamps in Java sources generated by idl2java
 127 #  * Sorting order and cleanup style in .properties files
 128 
 129 diff_text() {
 130     OTHER_FILE=$1
 131     THIS_FILE=$2
 132 
 133     SUFFIX=&quot;${THIS_FILE##*.}&quot;
 134     NAME=&quot;${THIS_FILE##*/}&quot;
 135 
<span class="line-modified"> 136     TMP=$($DIFF $THIS_FILE $OTHER_FILE)</span>
<span class="line-modified"> 137 </span>






















 138     if test &quot;x$SUFFIX&quot; = &quot;xclass&quot;; then
 139         if [ &quot;$NAME&quot; = &quot;SystemModules\$all.class&quot; ] \
 140            || [ &quot;$NAME&quot; = &quot;SystemModules\$default.class&quot; ]; then
 141             # The SystemModules\$*.classes are not comparable as they contain the
 142             # module hashes which would require a whole other level of
 143             # reproducible builds to get reproducible. There is also random
 144             # order of map initialization.
 145             TMP=&quot;&quot;
 146         elif [ &quot;$NAME&quot; = &quot;module-info.class&quot; ]; then
 147             # The module-info.class have several issues with random ordering of
 148             # elements in HashSets.
 149             MODULES_CLASS_FILTER=&quot;$SED \
 150                 -e &#39;s/,$//&#39; \
 151                 -e &#39;s/;$//&#39; \
 152                 -e &#39;s/^ *[0-9]*://&#39; \
 153                 -e &#39;s/#[0-9]* */#/&#39; \
 154                 -e &#39;s/ *\/\// \/\//&#39; \
 155                 -e &#39;s/aload *[0-9]*/aload X/&#39; \
 156                 -e &#39;s/ldc_w/ldc  /&#39; \
 157                 | $SORT \
 158                 &quot;
 159             $JAVAP -c -constants -l -p &quot;${OTHER_FILE}&quot; \
 160                 | eval &quot;$MODULES_CLASS_FILTER&quot; &gt;  ${OTHER_FILE}.javap &amp;
 161             $JAVAP -c -constants -l -p &quot;${THIS_FILE}&quot; \
 162                 | eval &quot;$MODULES_CLASS_FILTER&quot; &gt; ${THIS_FILE}.javap &amp;
 163             wait
 164             TMP=$($DIFF ${OTHER_FILE}.javap ${THIS_FILE}.javap)












 165         fi
 166     fi
<span class="line-modified"> 167 </span>





















 168     if test -n &quot;$TMP&quot;; then
 169         echo Files $OTHER_FILE and $THIS_FILE differ
 170         return 1
 171     fi
 172 
 173     return 0
 174 }
 175 
 176 ################################################################################
 177 # Compare directory structure
 178 
 179 compare_dirs() {
 180     THIS_DIR=$1
 181     OTHER_DIR=$2
 182     WORK_DIR=$3
 183 
 184     mkdir -p $WORK_DIR
 185 
 186     (cd $OTHER_DIR &amp;&amp; $FIND . -type d | $SORT &gt; $WORK_DIR/dirs_other)
 187     (cd $THIS_DIR &amp;&amp; $FIND . -type d | $SORT &gt; $WORK_DIR/dirs_this)
</pre>
<hr />
<pre>
 324     done
 325     if [ -z &quot;$found&quot; ]; then
 326         echo &quot;Identical!&quot;
 327     else
 328         REGRESSIONS=true
 329     fi
 330 }
 331 
 332 ################################################################################
 333 # Compare the rest of the files
 334 
 335 compare_general_files() {
 336     THIS_DIR=$1
 337     OTHER_DIR=$2
 338     WORK_DIR=$3
 339 
 340     GENERAL_FILES=$(cd $THIS_DIR &amp;&amp; $FIND . -type f ! -name &quot;*.so&quot; ! -name &quot;*.jar&quot; \
 341         ! -name &quot;*.zip&quot; ! -name &quot;*.debuginfo&quot; ! -name &quot;*.dylib&quot; ! -name &quot;jexec&quot; \
 342         ! -name &quot;modules&quot; ! -name &quot;ct.sym&quot; ! -name &quot;*.diz&quot; ! -name &quot;*.dll&quot; \
 343         ! -name &quot;*.cpl&quot; ! -name &quot;*.pdb&quot; ! -name &quot;*.exp&quot; ! -name &quot;*.ilk&quot; \
<span class="line-modified"> 344         ! -name &quot;*.lib&quot; ! -name &quot;*.jmod&quot; ! -name &quot;*.exe&quot; \</span>
 345         ! -name &quot;*.obj&quot; ! -name &quot;*.o&quot; ! -name &quot;jspawnhelper&quot; ! -name &quot;*.a&quot; \
<span class="line-modified"> 346         ! -name &quot;*.tar.gz&quot; ! -name &quot;*.jsa&quot; ! -name &quot;gtestLauncher&quot; \</span>
 347         ! -name &quot;*.map&quot; \
 348         | $GREP -v &quot;./bin/&quot;  | $SORT | $FILTER)
 349 
 350     echo Other files with binary differences...
 351     for f in $GENERAL_FILES
 352     do
 353         # Skip all files in test/*/native
 354         if [[ &quot;$f&quot; == */native/* ]]; then
 355             continue
 356         fi
 357         if [ -e $OTHER_DIR/$f ]; then
 358             SUFFIX=&quot;${f##*.}&quot;
 359             if [ &quot;$(basename $f)&quot; = &quot;release&quot; ]; then
<span class="line-modified"> 360                 # In release file, ignore differences in source rev numbers</span>

 361                 OTHER_FILE=$WORK_DIR/$f.other
 362                 THIS_FILE=$WORK_DIR/$f.this
 363                 $MKDIR -p $(dirname $OTHER_FILE)
 364                 $MKDIR -p $(dirname $THIS_FILE)
<span class="line-modified"> 365                 RELEASE_FILTER=&quot;$SED -e &#39;s/SOURCE=&quot;.*&quot;/SOURCE=&lt;src-rev&gt;/g&#39;&quot;</span>







 366                 $CAT $OTHER_DIR/$f | eval &quot;$RELEASE_FILTER&quot; &gt; $OTHER_FILE
 367                 $CAT $THIS_DIR/$f  | eval &quot;$RELEASE_FILTER&quot; &gt; $THIS_FILE



















 368             elif [ &quot;$SUFFIX&quot; = &quot;svg&quot; ]; then
 369                 # GraphViz has non-determinism when generating svg files
 370                 OTHER_FILE=$WORK_DIR/$f.other
 371                 THIS_FILE=$WORK_DIR/$f.this
 372                 $MKDIR -p $(dirname $OTHER_FILE) $(dirname $THIS_FILE)
 373                 SVG_FILTER=&quot;$SED \
 374                     -e &#39;s/edge[0-9][0-9]*/edgeX/g&#39;
 375                     &quot;
 376                 $CAT $OTHER_DIR/$f | eval &quot;$SVG_FILTER&quot; &gt; $OTHER_FILE
 377                 $CAT $THIS_DIR/$f | eval &quot;$SVG_FILTER&quot; &gt; $THIS_FILE
 378             elif [[ &quot;$f&quot; = *&quot;/lib/classlist&quot; ]] || [ &quot;$SUFFIX&quot; = &quot;jar_contents&quot; ]; then
 379                 # The classlist files may have some lines in random order
 380                 OTHER_FILE=$WORK_DIR/$f.other
 381                 THIS_FILE=$WORK_DIR/$f.this
 382                 $MKDIR -p $(dirname $OTHER_FILE) $(dirname $THIS_FILE)
 383                 $RM $OTHER_FILE $THIS_FILE
 384                 $CAT $OTHER_DIR/$f | $SORT &gt; $OTHER_FILE
 385                 $CAT $THIS_DIR/$f  | $SORT &gt; $THIS_FILE
 386             else
 387                 OTHER_FILE=$OTHER_DIR/$f
</pre>
</td>
</tr>
</table>
<center><a href="../modules/java.base/gensrc/GensrcEmojiData.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../../src/hotspot/cpu/aarch64/aarch64.ad.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>