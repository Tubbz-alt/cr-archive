<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/AbstractLayout.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../java.base/share/classes/java/lang/invoke/VarHandles.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MappedMemorySegment.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/AbstractLayout.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 46,29 ***</span>
<span class="line-new-header">--- 46,46 ---</span>
  import static java.lang.constant.ConstantDescs.BSM_INVOKE;
  import static java.lang.constant.ConstantDescs.CD_String;
  import static java.lang.constant.ConstantDescs.CD_long;
  
  abstract class AbstractLayout implements MemoryLayout {
<span class="line-added">+ &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span>
  
      private final OptionalLong size;
      final long alignment;
      final Map&lt;String, Constable&gt; attributes;
<span class="line-added">+ =======</span>
<span class="line-added">+     // memory layout attribute key for layout name</span>
<span class="line-added">+     static final String NAME = &quot;name&quot;;</span>
<span class="line-added">+ </span>
<span class="line-added">+     private final OptionalLong size;</span>
<span class="line-added">+     final long alignment;</span>
<span class="line-added">+     protected final Map&lt;String, Constable&gt; attributes;</span>
<span class="line-added">+ &gt;&gt;&gt;&gt;&gt;&gt;&gt; cd397502f19f72fa8a926f4508d3913c8ace9059</span>
  
      public AbstractLayout(OptionalLong size, long alignment, Map&lt;String, Constable&gt; attributes) {
          this.size = size;
          this.alignment = alignment;
          this.attributes = Collections.unmodifiableMap(attributes);
      }
  
      @Override
      public AbstractLayout withName(String name) {
<span class="line-added">+ &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span>
          return withAttribute(LAYOUT_NAME, name);
<span class="line-added">+ =======</span>
<span class="line-added">+         return withAttribute(NAME, name);</span>
<span class="line-added">+ &gt;&gt;&gt;&gt;&gt;&gt;&gt; cd397502f19f72fa8a926f4508d3913c8ace9059</span>
      }
  
      @Override
      public final Optional&lt;String&gt; name() {
<span class="line-added">+ &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span>
          return attribute(LAYOUT_NAME).map(String.class::cast);
<span class="line-added">+ =======</span>
<span class="line-added">+         return attribute(NAME).map(String.class::cast);</span>
<span class="line-added">+ &gt;&gt;&gt;&gt;&gt;&gt;&gt; cd397502f19f72fa8a926f4508d3913c8ace9059</span>
      }
  
      @Override
      public Optional&lt;Constable&gt; attribute(String name) {
          return Optional.ofNullable(attributes.get(name));
</pre>
<center><a href="../../../../../../java.base/share/classes/java/lang/invoke/VarHandles.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MappedMemorySegment.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>