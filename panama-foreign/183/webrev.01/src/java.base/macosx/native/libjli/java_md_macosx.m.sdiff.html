<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/macosx/native/libjli/java_md_macosx.m</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../hotspot/share/utilities/vmError.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../../share/classes/java/lang/StringConcatHelper.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/macosx/native/libjli/java_md_macosx.m</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
616             return JNI_FALSE;
617         }
618 
619         if (dladdr((void*)fptr, &amp;dlinfo)) {
620             char *resolved = (char*)JLI_MemAlloc(PATH_MAX+1);
621             if (resolved != NULL) {
622                 exec_path = realpath(dlinfo.dli_fname, resolved);
623                 if (exec_path == NULL) {
624                     JLI_MemFree(resolved);
625                 }
626             }
627         }
628     }
629     if (exec_path == NULL) {
630         exec_path = FindExecName(argv[0]);
631     }
632     execname = exec_path;
633     return exec_path;
634 }
635 
<span class="line-removed">636 /*</span>
<span class="line-removed">637  * BSD&#39;s implementation of CounterGet()</span>
<span class="line-removed">638  */</span>
<span class="line-removed">639 int64_t</span>
<span class="line-removed">640 CounterGet()</span>
<span class="line-removed">641 {</span>
<span class="line-removed">642     struct timeval tv;</span>
<span class="line-removed">643     gettimeofday(&amp;tv, NULL);</span>
<span class="line-removed">644     return (tv.tv_sec * 1000000) + tv.tv_usec;</span>
<span class="line-removed">645 }</span>
<span class="line-removed">646 </span>
<span class="line-removed">647 </span>
648 /* --- Splash Screen shared library support --- */
649 
650 static JavaVM* SetJavaVMValue()
651 {
652     JavaVM * jvm = NULL;
653 
654     // The handle is good for both the launcher and the libosxapp.dylib
655     void * handle = dlopen(NULL, RTLD_LAZY | RTLD_GLOBAL);
656     if (handle) {
657         typedef JavaVM* (*JLI_GetJavaVMInstance_t)();
658 
659         JLI_GetJavaVMInstance_t JLI_GetJavaVMInstance =
660             (JLI_GetJavaVMInstance_t)dlsym(handle,
661                     &quot;JLI_GetJavaVMInstance&quot;);
662         if (JLI_GetJavaVMInstance) {
663             jvm = JLI_GetJavaVMInstance();
664         }
665 
666         if (jvm) {
667             typedef void (*OSXAPP_SetJavaVM_t)(JavaVM*);
</pre>
</td>
<td>
<hr />
<pre>
616             return JNI_FALSE;
617         }
618 
619         if (dladdr((void*)fptr, &amp;dlinfo)) {
620             char *resolved = (char*)JLI_MemAlloc(PATH_MAX+1);
621             if (resolved != NULL) {
622                 exec_path = realpath(dlinfo.dli_fname, resolved);
623                 if (exec_path == NULL) {
624                     JLI_MemFree(resolved);
625                 }
626             }
627         }
628     }
629     if (exec_path == NULL) {
630         exec_path = FindExecName(argv[0]);
631     }
632     execname = exec_path;
633     return exec_path;
634 }
635 












636 /* --- Splash Screen shared library support --- */
637 
638 static JavaVM* SetJavaVMValue()
639 {
640     JavaVM * jvm = NULL;
641 
642     // The handle is good for both the launcher and the libosxapp.dylib
643     void * handle = dlopen(NULL, RTLD_LAZY | RTLD_GLOBAL);
644     if (handle) {
645         typedef JavaVM* (*JLI_GetJavaVMInstance_t)();
646 
647         JLI_GetJavaVMInstance_t JLI_GetJavaVMInstance =
648             (JLI_GetJavaVMInstance_t)dlsym(handle,
649                     &quot;JLI_GetJavaVMInstance&quot;);
650         if (JLI_GetJavaVMInstance) {
651             jvm = JLI_GetJavaVMInstance();
652         }
653 
654         if (jvm) {
655             typedef void (*OSXAPP_SetJavaVM_t)(JavaVM*);
</pre>
</td>
</tr>
</table>
<center><a href="../../../../hotspot/share/utilities/vmError.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../../share/classes/java/lang/StringConcatHelper.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>