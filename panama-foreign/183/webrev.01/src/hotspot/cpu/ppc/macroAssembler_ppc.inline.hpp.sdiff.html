<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/cpu/ppc/macroAssembler_ppc.inline.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="macroAssembler_ppc.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="methodHandles_ppc.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/cpu/ppc/macroAssembler_ppc.inline.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
264 inline address MacroAssembler::last_calls_return_pc() {
265   return _last_calls_return_pc;
266 }
267 
268 // Read from the polling page, its address is already in a register.
269 inline void MacroAssembler::load_from_polling_page(Register polling_page_address, int offset) {
270   if (USE_POLL_BIT_ONLY) {
271     int encoding = SafepointMechanism::poll_bit();
272     tdi(traptoGreaterThanUnsigned | traptoEqual, polling_page_address, encoding);
273   } else {
274     ld(R0, offset, polling_page_address);
275   }
276 }
277 
278 // Trap-instruction-based checks.
279 
280 inline void MacroAssembler::trap_null_check(Register a, trap_to_bits cmp) {
281   assert(TrapBasedNullChecks, &quot;sanity&quot;);
282   tdi(cmp, a/*reg a*/, 0);
283 }
<span class="line-removed">284 inline void MacroAssembler::trap_zombie_not_entrant() {</span>
<span class="line-removed">285   tdi(traptoUnconditional, 0/*reg 0*/, 1);</span>
<span class="line-removed">286 }</span>
<span class="line-removed">287 inline void MacroAssembler::trap_should_not_reach_here() {</span>
<span class="line-removed">288   tdi_unchecked(traptoUnconditional, 0/*reg 0*/, 2);</span>
<span class="line-removed">289 }</span>
290 
291 inline void MacroAssembler::trap_ic_miss_check(Register a, Register b) {
292   td(traptoGreaterThanUnsigned | traptoLessThanUnsigned, a, b);
293 }
294 
295 // Do an explicit null check if access to a+offset will not raise a SIGSEGV.
296 // Either issue a trap instruction that raises SIGTRAP, or do a compare that
297 // branches to exception_entry.
298 // No support for compressed oops (base page of heap). Does not distinguish
299 // loads and stores.
300 inline void MacroAssembler::null_check_throw(Register a, int offset, Register temp_reg,
301                                              address exception_entry) {
302   if (!ImplicitNullChecks || needs_explicit_null_check(offset) || !os::zero_page_read_protected()) {
303     if (TrapBasedNullChecks) {
304       assert(UseSIGTRAP, &quot;sanity&quot;);
305       trap_null_check(a);
306     } else {
307       Label ok;
308       cmpdi(CCR0, a, 0);
309       bne(CCR0, ok);
</pre>
</td>
<td>
<hr />
<pre>
264 inline address MacroAssembler::last_calls_return_pc() {
265   return _last_calls_return_pc;
266 }
267 
268 // Read from the polling page, its address is already in a register.
269 inline void MacroAssembler::load_from_polling_page(Register polling_page_address, int offset) {
270   if (USE_POLL_BIT_ONLY) {
271     int encoding = SafepointMechanism::poll_bit();
272     tdi(traptoGreaterThanUnsigned | traptoEqual, polling_page_address, encoding);
273   } else {
274     ld(R0, offset, polling_page_address);
275   }
276 }
277 
278 // Trap-instruction-based checks.
279 
280 inline void MacroAssembler::trap_null_check(Register a, trap_to_bits cmp) {
281   assert(TrapBasedNullChecks, &quot;sanity&quot;);
282   tdi(cmp, a/*reg a*/, 0);
283 }






284 
285 inline void MacroAssembler::trap_ic_miss_check(Register a, Register b) {
286   td(traptoGreaterThanUnsigned | traptoLessThanUnsigned, a, b);
287 }
288 
289 // Do an explicit null check if access to a+offset will not raise a SIGSEGV.
290 // Either issue a trap instruction that raises SIGTRAP, or do a compare that
291 // branches to exception_entry.
292 // No support for compressed oops (base page of heap). Does not distinguish
293 // loads and stores.
294 inline void MacroAssembler::null_check_throw(Register a, int offset, Register temp_reg,
295                                              address exception_entry) {
296   if (!ImplicitNullChecks || needs_explicit_null_check(offset) || !os::zero_page_read_protected()) {
297     if (TrapBasedNullChecks) {
298       assert(UseSIGTRAP, &quot;sanity&quot;);
299       trap_null_check(a);
300     } else {
301       Label ok;
302       cmpdi(CCR0, a, 0);
303       bne(CCR0, ok);
</pre>
</td>
</tr>
</table>
<center><a href="macroAssembler_ppc.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="methodHandles_ppc.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>