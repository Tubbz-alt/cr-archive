<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/cpu/ppc/c1_LIRAssembler_ppc.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="c1_FrameMap_ppc.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="c1_LIRGenerator_ppc.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/cpu/ppc/c1_LIRAssembler_ppc.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1195,11 ***</span>
      addr = frame_map()-&gt;address_for_slot(src-&gt;single_stack_ix());
    } else if (src-&gt;is_double_word())  {
      addr = frame_map()-&gt;address_for_double_slot(src-&gt;double_stack_ix());
    }
  
<span class="line-modified">!   bool unaligned = (addr.disp() - STACK_BIAS) % 8 != 0;</span>
    load(addr.base(), addr.disp(), dest, dest-&gt;type(), true /*wide*/, unaligned);
  }
  
  
  void LIR_Assembler::reg2stack(LIR_Opr from_reg, LIR_Opr dest, BasicType type, bool pop_fpu_stack) {
<span class="line-new-header">--- 1195,11 ---</span>
      addr = frame_map()-&gt;address_for_slot(src-&gt;single_stack_ix());
    } else if (src-&gt;is_double_word())  {
      addr = frame_map()-&gt;address_for_double_slot(src-&gt;double_stack_ix());
    }
  
<span class="line-modified">!   bool unaligned = addr.disp() % 8 != 0;</span>
    load(addr.base(), addr.disp(), dest, dest-&gt;type(), true /*wide*/, unaligned);
  }
  
  
  void LIR_Assembler::reg2stack(LIR_Opr from_reg, LIR_Opr dest, BasicType type, bool pop_fpu_stack) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1207,11 ***</span>
    if (dest-&gt;is_single_word()) {
      addr = frame_map()-&gt;address_for_slot(dest-&gt;single_stack_ix());
    } else if (dest-&gt;is_double_word())  {
      addr = frame_map()-&gt;address_for_slot(dest-&gt;double_stack_ix());
    }
<span class="line-modified">!   bool unaligned = (addr.disp() - STACK_BIAS) % 8 != 0;</span>
    store(from_reg, addr.base(), addr.disp(), from_reg-&gt;type(), true /*wide*/, unaligned);
  }
  
  
  void LIR_Assembler::reg2reg(LIR_Opr from_reg, LIR_Opr to_reg) {
<span class="line-new-header">--- 1207,11 ---</span>
    if (dest-&gt;is_single_word()) {
      addr = frame_map()-&gt;address_for_slot(dest-&gt;single_stack_ix());
    } else if (dest-&gt;is_double_word())  {
      addr = frame_map()-&gt;address_for_slot(dest-&gt;double_stack_ix());
    }
<span class="line-modified">!   bool unaligned = addr.disp() % 8 != 0;</span>
    store(from_reg, addr.base(), addr.disp(), from_reg-&gt;type(), true /*wide*/, unaligned);
  }
  
  
  void LIR_Assembler::reg2reg(LIR_Opr from_reg, LIR_Opr to_reg) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3084,11 ***</span>
      }
  #ifdef ASSERT
    } else {
      __ cmpdi(CCR0, obj, 0);
      __ bne(CCR0, Lupdate);
<span class="line-modified">!     __ stop(&quot;unexpect null obj&quot;, 0x9652);</span>
  #endif
    }
  
    __ bind(Lupdate);
    if (do_update) {
<span class="line-new-header">--- 3084,11 ---</span>
      }
  #ifdef ASSERT
    } else {
      __ cmpdi(CCR0, obj, 0);
      __ bne(CCR0, Lupdate);
<span class="line-modified">!     __ stop(&quot;unexpect null obj&quot;);</span>
  #endif
    }
  
    __ bind(Lupdate);
    if (do_update) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3101,11 ***</span>
        klass_reg_used = true;
        __ load_klass(klass, obj);
        metadata2reg(exact_klass-&gt;constant_encoding(), R0);
        __ cmpd(CCR0, klass, R0);
        __ beq(CCR0, ok);
<span class="line-modified">!       __ stop(&quot;exact klass and actual klass differ&quot;, 0x8564);</span>
        __ bind(ok);
      }
  #endif
  
      if (!no_conflict) {
<span class="line-new-header">--- 3101,11 ---</span>
        klass_reg_used = true;
        __ load_klass(klass, obj);
        metadata2reg(exact_klass-&gt;constant_encoding(), R0);
        __ cmpd(CCR0, klass, R0);
        __ beq(CCR0, ok);
<span class="line-modified">!       __ stop(&quot;exact klass and actual klass differ&quot;);</span>
        __ bind(ok);
      }
  #endif
  
      if (!no_conflict) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3168,11 ***</span>
          {
            Label ok;
            __ clrrdi_(R0, tmp, exact_log2(-TypeEntries::type_mask));
            __ beq(CCR0, ok); // First time here.
  
<span class="line-modified">!           __ stop(&quot;unexpected profiling mismatch&quot;, 0x7865);</span>
            __ bind(ok);
          }
  #endif
          // First time here. Set profile type.
          __ orr(R0, klass, tmp); // Combine klass and null_seen bit (only used if (tmp &amp; type_mask)==0).
<span class="line-new-header">--- 3168,11 ---</span>
          {
            Label ok;
            __ clrrdi_(R0, tmp, exact_log2(-TypeEntries::type_mask));
            __ beq(CCR0, ok); // First time here.
  
<span class="line-modified">!           __ stop(&quot;unexpected profiling mismatch&quot;);</span>
            __ bind(ok);
          }
  #endif
          // First time here. Set profile type.
          __ orr(R0, klass, tmp); // Combine klass and null_seen bit (only used if (tmp &amp; type_mask)==0).
</pre>
<center><a href="c1_FrameMap_ppc.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="c1_LIRGenerator_ppc.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>