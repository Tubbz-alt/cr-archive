diff a/test/jdk/jdk/jfr/api/consumer/TestRecordedObject.java b/test/jdk/jdk/jfr/api/consumer/TestRecordedObject.java
--- a/test/jdk/jdk/jfr/api/consumer/TestRecordedObject.java
+++ b/test/jdk/jdk/jfr/api/consumer/TestRecordedObject.java
@@ -375,18 +375,19 @@
             throw new AssertionError("Expected NullpointerException. Got " + e.getClass().getName() + " : " + e.getMessage(), e);
         }
     }
 
     private static RecordedObject makeRecordedObject() throws IOException {
-        Recording r = new Recording();
-        r.start();
-        EventWithValues t = new EventWithValues();
-        t.commit();
-        r.stop();
-        List<RecordedEvent> events = Events.fromRecording(r);
-        Events.hasEvents(events);
-        return events.get(0);
+        try (Recording r = new Recording()) {
+            r.start();
+            EventWithValues t = new EventWithValues();
+            t.commit();
+            r.stop();
+            List<RecordedEvent> events = Events.fromRecording(r);
+            Events.hasEvents(events);
+            return events.get(0);
+        }
     }
 
     private static Set<String> createAll() {
         Set<String> set = new HashSet<>();
         set.add("boolean");
