<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/MemoryLayouts.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../jdk.hotspot.agent/share/classes/sun/jvm/hotspot/oops/Symbol.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../jdk.incubator.jextract/share/classes/jdk/incubator/jextract/tool/JavaSourceBuilder.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/MemoryLayouts.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 33 import static jdk.incubator.foreign.SystemABI.ABI_AARCH64;
 34 import static jdk.incubator.foreign.SystemABI.ABI_SYSV;
 35 import static jdk.incubator.foreign.SystemABI.ABI_WINDOWS;
 36 
 37 /**
 38  * This class defines useful layout constants. Some of the constants defined in this class are explicit in both
 39  * size and byte order (see {@link #BITS_64_BE}), and can therefore be used to explicitly and unambiguously specify the
 40  * contents of a memory segment. Other constants make implicit byte order assumptions (see
 41  * {@link #JAVA_INT}); as such, these constants make it easy to work with other serialization-centric APIs,
 42  * such as {@link java.nio.ByteBuffer}.
 43  */
 44 public final class MemoryLayouts {
 45 
 46     private MemoryLayouts() {
 47         //just the one, please
 48     }
 49 
 50     /**
 51      * A value layout constant with size of one byte, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
 52      */
<span class="line-modified"> 53     public static final ValueLayout BITS_8_LE = MemoryLayout.ofValueBits(8, ByteOrder.LITTLE_ENDIAN);</span>
 54 
 55     /**
 56      * A value layout constant with size of two bytes, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
 57      */
<span class="line-modified"> 58     public static final ValueLayout BITS_16_LE = MemoryLayout.ofValueBits(16, ByteOrder.LITTLE_ENDIAN);</span>
 59 
 60     /**
 61      * A value layout constant with size of four bytes, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
 62      */
<span class="line-modified"> 63     public static final ValueLayout BITS_32_LE = MemoryLayout.ofValueBits(32, ByteOrder.LITTLE_ENDIAN);</span>
 64 
 65     /**
 66      * A value layout constant with size of eight bytes, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
 67      */
<span class="line-modified"> 68     public static final ValueLayout BITS_64_LE = MemoryLayout.ofValueBits(64, ByteOrder.LITTLE_ENDIAN);</span>
 69 
 70     /**
 71      * A value layout constant with size of one byte, and byte order set to {@link ByteOrder#BIG_ENDIAN}.
 72      */
 73     public static final ValueLayout BITS_8_BE = MemoryLayout.ofValueBits(8, ByteOrder.BIG_ENDIAN);
 74 
 75     /**
 76      * A value layout constant with size of two bytes, and byte order set to {@link ByteOrder#BIG_ENDIAN}.
 77      */
 78     public static final ValueLayout BITS_16_BE = MemoryLayout.ofValueBits(16, ByteOrder.BIG_ENDIAN);
 79 
 80     /**
 81      * A value layout constant with size of four bytes, and byte order set to {@link ByteOrder#BIG_ENDIAN}.
 82      */
 83     public static final ValueLayout BITS_32_BE = MemoryLayout.ofValueBits(32, ByteOrder.BIG_ENDIAN);
 84 
 85     /**
 86      * A value layout constant with size of eight bytes, and byte order set to {@link ByteOrder#BIG_ENDIAN}.
 87      */
 88     public static final ValueLayout BITS_64_BE = MemoryLayout.ofValueBits(64, ByteOrder.BIG_ENDIAN);
</pre>
<hr />
<pre>
269                 C_ULONGLONG = AArch64ABI.C_ULONGLONG;
270                 C_FLOAT = AArch64ABI.C_FLOAT;
271                 C_DOUBLE = AArch64ABI.C_DOUBLE;
272                 C_POINTER = AArch64ABI.C_POINTER;
273             }
274             default -&gt; throw new IllegalStateException(&quot;Unsupported ABI: &quot; + abi.name());
275         }
276     }
277 
278     /**
279      * This class defines layout constants modelling standard primitive types supported by the x64 SystemV ABI.
280      */
281     public static final class SysV {
282         private SysV() {
283             //just the one
284         }
285 
286         /**
287          * The {@code _Bool} native type.
288          */
<span class="line-modified">289         public static final ValueLayout C_BOOL = MemoryLayouts.BITS_8_LE</span>
290                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.BOOL);
291 
292 
293         /**
294          * The {@code unsigned char} native type.
295          */
<span class="line-modified">296         public static final ValueLayout C_UCHAR = MemoryLayouts.BITS_8_LE</span>
297                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_CHAR);
298 
299 
300         /**
301          * The {@code signed char} native type.
302          */
<span class="line-modified">303         public static final ValueLayout C_SCHAR = MemoryLayouts.BITS_8_LE</span>
304                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SIGNED_CHAR);
305 
306 
307         /**
308          * The {@code char} native type.
309          */
<span class="line-modified">310         public static final ValueLayout C_CHAR = MemoryLayouts.BITS_8_LE</span>
311                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.CHAR);
312 
313         /**
314          * The {@code short} native type.
315          */
<span class="line-modified">316         public static final ValueLayout C_SHORT = MemoryLayouts.BITS_16_LE</span>
317                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SHORT);
318 
319         /**
320          * The {@code unsigned short} native type.
321          */
<span class="line-modified">322         public static final ValueLayout C_USHORT = MemoryLayouts.BITS_16_LE</span>
323                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_SHORT);
324 
325         /**
326          * The {@code int} native type.
327          */
<span class="line-modified">328         public static final ValueLayout C_INT = MemoryLayouts.BITS_32_LE</span>
329                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.INT);
330 
331         /**
332          * The {@code unsigned int} native type.
333          */
<span class="line-modified">334         public static final ValueLayout C_UINT = MemoryLayouts.BITS_32_LE</span>
335                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_INT);
336 
337         /**
338          * The {@code long} native type.
339          */
<span class="line-modified">340         public static final ValueLayout C_LONG = MemoryLayouts.BITS_64_LE</span>
341                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG);
342 
343         /**
344          * The {@code unsigned long} native type.
345          */
<span class="line-modified">346         public static final ValueLayout C_ULONG = MemoryLayouts.BITS_64_LE</span>
347                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG);
348 
349 
350         /**
351          * The {@code long long} native type.
352          */
<span class="line-modified">353         public static final ValueLayout C_LONGLONG = MemoryLayouts.BITS_64_LE</span>
354                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_LONG);
355 
356         /**
357          * The {@code unsigned long long} native type.
358          */
<span class="line-modified">359         public static final ValueLayout C_ULONGLONG = MemoryLayouts.BITS_64_LE</span>
360                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG_LONG);
361 
362         /**
363          * The {@code float} native type.
364          */
<span class="line-modified">365         public static final ValueLayout C_FLOAT = MemoryLayouts.BITS_32_LE</span>
366                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.FLOAT);
367 
368         /**
369          * The {@code double} native type.
370          */
<span class="line-modified">371         public static final ValueLayout C_DOUBLE = MemoryLayouts.BITS_64_LE</span>
372                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.DOUBLE);
373 
374         /**
375          * The {@code long double} native type.
376          */
377         public static final ValueLayout C_LONGDOUBLE = MemoryLayout.ofValueBits(128, ByteOrder.LITTLE_ENDIAN)
378                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_DOUBLE);
379 
380         /**
381          * The {@code complex long double} native type.
382          */
383         public static final GroupLayout C_COMPLEX_LONGDOUBLE = MemoryLayout.ofStruct(C_LONGDOUBLE, C_LONGDOUBLE)
384                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.COMPLEX_LONG_DOUBLE);
385 
386         /**
387          * The {@code T*} native type.
388          */
<span class="line-modified">389         public static final ValueLayout C_POINTER = MemoryLayouts.BITS_64_LE</span>
390                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.POINTER);
391     }
392 
393     /**
394      * This class defines layout constants modelling standard primitive types supported by the x64 Windows ABI.
395      */
396     public static final class WinABI {
397         /**
398          * The {@code _Bool} native type.
399          */
<span class="line-modified">400         public static final ValueLayout C_BOOL = MemoryLayouts.BITS_8_LE</span>
401                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.BOOL);
<span class="line-modified">402         </span>
403         /**
404          * The {@code unsigned char} native type.
405          */
<span class="line-modified">406         public static final ValueLayout C_UCHAR = MemoryLayouts.BITS_8_LE</span>
407                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_CHAR);
408 
409         /**
410          * The {@code signed char} native type.
411          */
<span class="line-modified">412         public static final ValueLayout C_SCHAR = MemoryLayouts.BITS_8_LE</span>
413                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SIGNED_CHAR);
414 
415         /**
416          * The {@code char} native type.
417          */
<span class="line-modified">418         public static final ValueLayout C_CHAR = MemoryLayouts.BITS_8_LE</span>
419                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.CHAR);
420 
421         /**
422          * The {@code short} native type.
423          */
<span class="line-modified">424         public static final ValueLayout C_SHORT = MemoryLayouts.BITS_16_LE</span>
425                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SHORT);
426 
427         /**
428          * The {@code unsigned short} native type.
429          */
<span class="line-modified">430         public static final ValueLayout C_USHORT = MemoryLayouts.BITS_16_LE</span>
431                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_SHORT);
432 
433         /**
434          * The {@code int} native type.
435          */
<span class="line-modified">436         public static final ValueLayout C_INT = MemoryLayouts.BITS_32_LE</span>
437                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.INT);
438 
439         /**
440          * The {@code unsigned int} native type.
441          */
<span class="line-modified">442         public static final ValueLayout C_UINT = MemoryLayouts.BITS_32_LE</span>
443                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_INT);
444 
445         /**
446          * The {@code long} native type.
447          */
<span class="line-modified">448         public static final ValueLayout C_LONG = MemoryLayouts.BITS_32_LE</span>
449                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG);
450 
451         /**
452          * The {@code unsigned long} native type.
453          */
<span class="line-modified">454         public static final ValueLayout C_ULONG = MemoryLayouts.BITS_32_LE</span>
455                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG);
456 
457         /**
458          * The {@code long long} native type.
459          */
<span class="line-modified">460         public static final ValueLayout C_LONGLONG = MemoryLayouts.BITS_64_LE</span>
461                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_LONG);
462 
463         /**
464          * The {@code unsigned long long} native type.
465          */
<span class="line-modified">466         public static final ValueLayout C_ULONGLONG = MemoryLayouts.BITS_64_LE</span>
467                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG_LONG);
468 
469         /**
470          * The {@code float} native type.
471          */
<span class="line-modified">472         public static final ValueLayout C_FLOAT = MemoryLayouts.BITS_32_LE</span>
473                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.FLOAT);
474 
475         /**
476          * The {@code double} native type.
477          */
<span class="line-modified">478         public static final ValueLayout C_DOUBLE = MemoryLayouts.BITS_64_LE</span>
479                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.DOUBLE);
480 






481         /**
482          * The {@code T*} native type.
483          */
<span class="line-modified">484         public static final ValueLayout C_POINTER = MemoryLayouts.BITS_64_LE</span>
485                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.POINTER);
486 
487         public static ValueLayout asVarArg(ValueLayout l) {
488            return l.withAnnotation(Windowsx64ABI.VARARGS_ANNOTATION_NAME, &quot;true&quot;);
489         }
490     }
491 
492     /**
493      * This class defines layout constants modelling standard primitive types supported by the AArch64 ABI.
494      */
495     public static final class AArch64ABI {
496         /**
497          * The {@code _Bool} native type.
498          */
<span class="line-modified">499         public static final ValueLayout C_BOOL = MemoryLayouts.BITS_8_LE</span>
500                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.BOOL);
501 
502         /**
503          * The {@code unsigned char} native type.
504          */
<span class="line-modified">505         public static final ValueLayout C_UCHAR = MemoryLayouts.BITS_8_LE</span>
506                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_CHAR);
507 
508         /**
509          * The {@code signed char} native type.
510          */
<span class="line-modified">511         public static final ValueLayout C_SCHAR = MemoryLayouts.BITS_8_LE</span>
512                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SIGNED_CHAR);
513 
514         /**
515          * The {@code char} native type.
516          */
<span class="line-modified">517         public static final ValueLayout C_CHAR = MemoryLayouts.BITS_8_LE</span>
518                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.CHAR);
519 
520         /**
521          * The {@code short} native type.
522          */
<span class="line-modified">523         public static final ValueLayout C_SHORT = MemoryLayouts.BITS_16_LE</span>
524                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SHORT);
525 
526         /**
527          * The {@code unsigned short} native type.
528          */
<span class="line-modified">529         public static final ValueLayout C_USHORT = MemoryLayouts.BITS_16_LE</span>
530                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_SHORT);
531 
532         /**
533          * The {@code int} native type.
534          */
<span class="line-modified">535         public static final ValueLayout C_INT = MemoryLayouts.BITS_32_LE</span>
536                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.INT);
537 
538         /**
539          * The {@code unsigned int} native type.
540          */
<span class="line-modified">541         public static final ValueLayout C_UINT = MemoryLayouts.BITS_32_LE</span>
542                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_INT);
543 
544         /**
545          * The {@code long} native type.
546          */
<span class="line-modified">547         public static final ValueLayout C_LONG = MemoryLayouts.BITS_64_LE</span>
548                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG);
549 
550         /**
551          * The {@code unsigned long} native type.
552          */
<span class="line-modified">553         public static final ValueLayout C_ULONG = MemoryLayouts.BITS_64_LE</span>
554                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG);
555 
556         /**
557          * The {@code long long} native type.
558          */
<span class="line-modified">559         public static final ValueLayout C_LONGLONG = MemoryLayouts.BITS_64_LE</span>
560                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_LONG);
561 
562         /**
563          * The {@code unsigned long long} native type.
564          */
<span class="line-modified">565         public static final ValueLayout C_ULONGLONG = MemoryLayouts.BITS_64_LE</span>
566                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG_LONG);
567 
568         /**
569          * The {@code float} native type.
570          */
<span class="line-modified">571         public static final ValueLayout C_FLOAT = MemoryLayouts.BITS_32_LE</span>
572                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.FLOAT);
573 
574         /**
575          * The {@code double} native type.
576          */
<span class="line-modified">577         public static final ValueLayout C_DOUBLE = MemoryLayouts.BITS_64_LE</span>
578                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.DOUBLE);
579 






580         /**
581          * The {@code T*} native type.
582          */
<span class="line-modified">583         public static final ValueLayout C_POINTER = MemoryLayouts.BITS_64_LE</span>
584                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.POINTER);
585     }







586 }
</pre>
</td>
<td>
<hr />
<pre>
 33 import static jdk.incubator.foreign.SystemABI.ABI_AARCH64;
 34 import static jdk.incubator.foreign.SystemABI.ABI_SYSV;
 35 import static jdk.incubator.foreign.SystemABI.ABI_WINDOWS;
 36 
 37 /**
 38  * This class defines useful layout constants. Some of the constants defined in this class are explicit in both
 39  * size and byte order (see {@link #BITS_64_BE}), and can therefore be used to explicitly and unambiguously specify the
 40  * contents of a memory segment. Other constants make implicit byte order assumptions (see
 41  * {@link #JAVA_INT}); as such, these constants make it easy to work with other serialization-centric APIs,
 42  * such as {@link java.nio.ByteBuffer}.
 43  */
 44 public final class MemoryLayouts {
 45 
 46     private MemoryLayouts() {
 47         //just the one, please
 48     }
 49 
 50     /**
 51      * A value layout constant with size of one byte, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
 52      */
<span class="line-modified"> 53     public static final ValueLayout BITS_8_LE = SharedLayouts.BITS_8_LE;</span>
 54 
 55     /**
 56      * A value layout constant with size of two bytes, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
 57      */
<span class="line-modified"> 58     public static final ValueLayout BITS_16_LE = SharedLayouts.BITS_16_LE;</span>
 59 
 60     /**
 61      * A value layout constant with size of four bytes, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
 62      */
<span class="line-modified"> 63     public static final ValueLayout BITS_32_LE = SharedLayouts.BITS_32_LE;</span>
 64 
 65     /**
 66      * A value layout constant with size of eight bytes, and byte order set to {@link ByteOrder#LITTLE_ENDIAN}.
 67      */
<span class="line-modified"> 68     public static final ValueLayout BITS_64_LE = SharedLayouts.BITS_64_LE;</span>
 69 
 70     /**
 71      * A value layout constant with size of one byte, and byte order set to {@link ByteOrder#BIG_ENDIAN}.
 72      */
 73     public static final ValueLayout BITS_8_BE = MemoryLayout.ofValueBits(8, ByteOrder.BIG_ENDIAN);
 74 
 75     /**
 76      * A value layout constant with size of two bytes, and byte order set to {@link ByteOrder#BIG_ENDIAN}.
 77      */
 78     public static final ValueLayout BITS_16_BE = MemoryLayout.ofValueBits(16, ByteOrder.BIG_ENDIAN);
 79 
 80     /**
 81      * A value layout constant with size of four bytes, and byte order set to {@link ByteOrder#BIG_ENDIAN}.
 82      */
 83     public static final ValueLayout BITS_32_BE = MemoryLayout.ofValueBits(32, ByteOrder.BIG_ENDIAN);
 84 
 85     /**
 86      * A value layout constant with size of eight bytes, and byte order set to {@link ByteOrder#BIG_ENDIAN}.
 87      */
 88     public static final ValueLayout BITS_64_BE = MemoryLayout.ofValueBits(64, ByteOrder.BIG_ENDIAN);
</pre>
<hr />
<pre>
269                 C_ULONGLONG = AArch64ABI.C_ULONGLONG;
270                 C_FLOAT = AArch64ABI.C_FLOAT;
271                 C_DOUBLE = AArch64ABI.C_DOUBLE;
272                 C_POINTER = AArch64ABI.C_POINTER;
273             }
274             default -&gt; throw new IllegalStateException(&quot;Unsupported ABI: &quot; + abi.name());
275         }
276     }
277 
278     /**
279      * This class defines layout constants modelling standard primitive types supported by the x64 SystemV ABI.
280      */
281     public static final class SysV {
282         private SysV() {
283             //just the one
284         }
285 
286         /**
287          * The {@code _Bool} native type.
288          */
<span class="line-modified">289         public static final ValueLayout C_BOOL = SharedLayouts.BITS_8_LE</span>
290                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.BOOL);
291 
292 
293         /**
294          * The {@code unsigned char} native type.
295          */
<span class="line-modified">296         public static final ValueLayout C_UCHAR = SharedLayouts.BITS_8_LE</span>
297                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_CHAR);
298 
299 
300         /**
301          * The {@code signed char} native type.
302          */
<span class="line-modified">303         public static final ValueLayout C_SCHAR = SharedLayouts.BITS_8_LE</span>
304                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SIGNED_CHAR);
305 
306 
307         /**
308          * The {@code char} native type.
309          */
<span class="line-modified">310         public static final ValueLayout C_CHAR = SharedLayouts.BITS_8_LE</span>
311                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.CHAR);
312 
313         /**
314          * The {@code short} native type.
315          */
<span class="line-modified">316         public static final ValueLayout C_SHORT = SharedLayouts.BITS_16_LE</span>
317                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SHORT);
318 
319         /**
320          * The {@code unsigned short} native type.
321          */
<span class="line-modified">322         public static final ValueLayout C_USHORT = SharedLayouts.BITS_16_LE</span>
323                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_SHORT);
324 
325         /**
326          * The {@code int} native type.
327          */
<span class="line-modified">328         public static final ValueLayout C_INT = SharedLayouts.BITS_32_LE</span>
329                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.INT);
330 
331         /**
332          * The {@code unsigned int} native type.
333          */
<span class="line-modified">334         public static final ValueLayout C_UINT = SharedLayouts.BITS_32_LE</span>
335                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_INT);
336 
337         /**
338          * The {@code long} native type.
339          */
<span class="line-modified">340         public static final ValueLayout C_LONG = SharedLayouts.BITS_64_LE</span>
341                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG);
342 
343         /**
344          * The {@code unsigned long} native type.
345          */
<span class="line-modified">346         public static final ValueLayout C_ULONG = SharedLayouts.BITS_64_LE</span>
347                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG);
348 
349 
350         /**
351          * The {@code long long} native type.
352          */
<span class="line-modified">353         public static final ValueLayout C_LONGLONG = SharedLayouts.BITS_64_LE</span>
354                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_LONG);
355 
356         /**
357          * The {@code unsigned long long} native type.
358          */
<span class="line-modified">359         public static final ValueLayout C_ULONGLONG = SharedLayouts.BITS_64_LE</span>
360                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG_LONG);
361 
362         /**
363          * The {@code float} native type.
364          */
<span class="line-modified">365         public static final ValueLayout C_FLOAT = SharedLayouts.BITS_32_LE</span>
366                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.FLOAT);
367 
368         /**
369          * The {@code double} native type.
370          */
<span class="line-modified">371         public static final ValueLayout C_DOUBLE = SharedLayouts.BITS_64_LE</span>
372                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.DOUBLE);
373 
374         /**
375          * The {@code long double} native type.
376          */
377         public static final ValueLayout C_LONGDOUBLE = MemoryLayout.ofValueBits(128, ByteOrder.LITTLE_ENDIAN)
378                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_DOUBLE);
379 
380         /**
381          * The {@code complex long double} native type.
382          */
383         public static final GroupLayout C_COMPLEX_LONGDOUBLE = MemoryLayout.ofStruct(C_LONGDOUBLE, C_LONGDOUBLE)
384                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.COMPLEX_LONG_DOUBLE);
385 
386         /**
387          * The {@code T*} native type.
388          */
<span class="line-modified">389         public static final ValueLayout C_POINTER = SharedLayouts.BITS_64_LE</span>
390                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.POINTER);
391     }
392 
393     /**
394      * This class defines layout constants modelling standard primitive types supported by the x64 Windows ABI.
395      */
396     public static final class WinABI {
397         /**
398          * The {@code _Bool} native type.
399          */
<span class="line-modified">400         public static final ValueLayout C_BOOL = SharedLayouts.BITS_8_LE</span>
401                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.BOOL);
<span class="line-modified">402 </span>
403         /**
404          * The {@code unsigned char} native type.
405          */
<span class="line-modified">406         public static final ValueLayout C_UCHAR = SharedLayouts.BITS_8_LE</span>
407                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_CHAR);
408 
409         /**
410          * The {@code signed char} native type.
411          */
<span class="line-modified">412         public static final ValueLayout C_SCHAR = SharedLayouts.BITS_8_LE</span>
413                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SIGNED_CHAR);
414 
415         /**
416          * The {@code char} native type.
417          */
<span class="line-modified">418         public static final ValueLayout C_CHAR = SharedLayouts.BITS_8_LE</span>
419                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.CHAR);
420 
421         /**
422          * The {@code short} native type.
423          */
<span class="line-modified">424         public static final ValueLayout C_SHORT = SharedLayouts.BITS_16_LE</span>
425                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SHORT);
426 
427         /**
428          * The {@code unsigned short} native type.
429          */
<span class="line-modified">430         public static final ValueLayout C_USHORT = SharedLayouts.BITS_16_LE</span>
431                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_SHORT);
432 
433         /**
434          * The {@code int} native type.
435          */
<span class="line-modified">436         public static final ValueLayout C_INT = SharedLayouts.BITS_32_LE</span>
437                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.INT);
438 
439         /**
440          * The {@code unsigned int} native type.
441          */
<span class="line-modified">442         public static final ValueLayout C_UINT = SharedLayouts.BITS_32_LE</span>
443                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_INT);
444 
445         /**
446          * The {@code long} native type.
447          */
<span class="line-modified">448         public static final ValueLayout C_LONG = SharedLayouts.BITS_32_LE</span>
449                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG);
450 
451         /**
452          * The {@code unsigned long} native type.
453          */
<span class="line-modified">454         public static final ValueLayout C_ULONG = SharedLayouts.BITS_32_LE</span>
455                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG);
456 
457         /**
458          * The {@code long long} native type.
459          */
<span class="line-modified">460         public static final ValueLayout C_LONGLONG = SharedLayouts.BITS_64_LE</span>
461                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_LONG);
462 
463         /**
464          * The {@code unsigned long long} native type.
465          */
<span class="line-modified">466         public static final ValueLayout C_ULONGLONG = SharedLayouts.BITS_64_LE</span>
467                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG_LONG);
468 
469         /**
470          * The {@code float} native type.
471          */
<span class="line-modified">472         public static final ValueLayout C_FLOAT = SharedLayouts.BITS_32_LE</span>
473                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.FLOAT);
474 
475         /**
476          * The {@code double} native type.
477          */
<span class="line-modified">478         public static final ValueLayout C_DOUBLE = SharedLayouts.BITS_64_LE</span>
479                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.DOUBLE);
480 
<span class="line-added">481         /**</span>
<span class="line-added">482          * The {@code long double} native type.</span>
<span class="line-added">483          */</span>
<span class="line-added">484         public static final ValueLayout C_LONGDOUBLE = SharedLayouts.BITS_64_LE</span>
<span class="line-added">485                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_DOUBLE);</span>
<span class="line-added">486 </span>
487         /**
488          * The {@code T*} native type.
489          */
<span class="line-modified">490         public static final ValueLayout C_POINTER = SharedLayouts.BITS_64_LE</span>
491                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.POINTER);
492 
493         public static ValueLayout asVarArg(ValueLayout l) {
494            return l.withAnnotation(Windowsx64ABI.VARARGS_ANNOTATION_NAME, &quot;true&quot;);
495         }
496     }
497 
498     /**
499      * This class defines layout constants modelling standard primitive types supported by the AArch64 ABI.
500      */
501     public static final class AArch64ABI {
502         /**
503          * The {@code _Bool} native type.
504          */
<span class="line-modified">505         public static final ValueLayout C_BOOL = SharedLayouts.BITS_8_LE</span>
506                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.BOOL);
507 
508         /**
509          * The {@code unsigned char} native type.
510          */
<span class="line-modified">511         public static final ValueLayout C_UCHAR = SharedLayouts.BITS_8_LE</span>
512                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_CHAR);
513 
514         /**
515          * The {@code signed char} native type.
516          */
<span class="line-modified">517         public static final ValueLayout C_SCHAR = SharedLayouts.BITS_8_LE</span>
518                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SIGNED_CHAR);
519 
520         /**
521          * The {@code char} native type.
522          */
<span class="line-modified">523         public static final ValueLayout C_CHAR = SharedLayouts.BITS_8_LE</span>
524                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.CHAR);
525 
526         /**
527          * The {@code short} native type.
528          */
<span class="line-modified">529         public static final ValueLayout C_SHORT = SharedLayouts.BITS_16_LE</span>
530                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.SHORT);
531 
532         /**
533          * The {@code unsigned short} native type.
534          */
<span class="line-modified">535         public static final ValueLayout C_USHORT = SharedLayouts.BITS_16_LE</span>
536                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_SHORT);
537 
538         /**
539          * The {@code int} native type.
540          */
<span class="line-modified">541         public static final ValueLayout C_INT = SharedLayouts.BITS_32_LE</span>
542                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.INT);
543 
544         /**
545          * The {@code unsigned int} native type.
546          */
<span class="line-modified">547         public static final ValueLayout C_UINT = SharedLayouts.BITS_32_LE</span>
548                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_INT);
549 
550         /**
551          * The {@code long} native type.
552          */
<span class="line-modified">553         public static final ValueLayout C_LONG = SharedLayouts.BITS_64_LE</span>
554                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG);
555 
556         /**
557          * The {@code unsigned long} native type.
558          */
<span class="line-modified">559         public static final ValueLayout C_ULONG = SharedLayouts.BITS_64_LE</span>
560                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG);
561 
562         /**
563          * The {@code long long} native type.
564          */
<span class="line-modified">565         public static final ValueLayout C_LONGLONG = SharedLayouts.BITS_64_LE</span>
566                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_LONG);
567 
568         /**
569          * The {@code unsigned long long} native type.
570          */
<span class="line-modified">571         public static final ValueLayout C_ULONGLONG = SharedLayouts.BITS_64_LE</span>
572                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.UNSIGNED_LONG_LONG);
573 
574         /**
575          * The {@code float} native type.
576          */
<span class="line-modified">577         public static final ValueLayout C_FLOAT = SharedLayouts.BITS_32_LE</span>
578                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.FLOAT);
579 
580         /**
581          * The {@code double} native type.
582          */
<span class="line-modified">583         public static final ValueLayout C_DOUBLE = SharedLayouts.BITS_64_LE</span>
584                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.DOUBLE);
585 
<span class="line-added">586         /**</span>
<span class="line-added">587          * The {@code long double} native type.</span>
<span class="line-added">588          */</span>
<span class="line-added">589         public static final ValueLayout C_LONGDOUBLE = MemoryLayout.ofValueBits(128, ByteOrder.LITTLE_ENDIAN)</span>
<span class="line-added">590                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.LONG_DOUBLE);</span>
<span class="line-added">591 </span>
592         /**
593          * The {@code T*} native type.
594          */
<span class="line-modified">595         public static final ValueLayout C_POINTER = SharedLayouts.BITS_64_LE</span>
596                 .withAnnotation(AbstractLayout.NATIVE_TYPE, SystemABI.Type.POINTER);
597     }
<span class="line-added">598 </span>
<span class="line-added">599     private static class SharedLayouts { // Separate class to prevent circular clinit references</span>
<span class="line-added">600         public static final ValueLayout BITS_8_LE = MemoryLayout.ofValueBits(8, ByteOrder.LITTLE_ENDIAN);</span>
<span class="line-added">601         public static final ValueLayout BITS_16_LE = MemoryLayout.ofValueBits(16, ByteOrder.LITTLE_ENDIAN);</span>
<span class="line-added">602         public static final ValueLayout BITS_32_LE = MemoryLayout.ofValueBits(32, ByteOrder.LITTLE_ENDIAN);</span>
<span class="line-added">603         public static final ValueLayout BITS_64_LE = MemoryLayout.ofValueBits(64, ByteOrder.LITTLE_ENDIAN);</span>
<span class="line-added">604     }</span>
605 }
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../jdk.hotspot.agent/share/classes/sun/jvm/hotspot/oops/Symbol.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../jdk.incubator.jextract/share/classes/jdk/incubator/jextract/tool/JavaSourceBuilder.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>