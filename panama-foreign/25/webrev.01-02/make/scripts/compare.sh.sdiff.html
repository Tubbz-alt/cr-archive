<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/scripts/compare.sh</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="../launcher/Launcher-java.base.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../../src/hotspot/.mx.jvmci/mx_jvmci.py.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/scripts/compare.sh</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 #!/bin/bash
   2 #
<span class="line-modified">   3 # Copyright (c) 2012, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   4 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   5 #
   6 # This code is free software; you can redistribute it and/or modify it
   7 # under the terms of the GNU General Public License version 2 only, as
   8 # published by the Free Software Foundation.
   9 #
  10 # This code is distributed in the hope that it will be useful, but WITHOUT
  11 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  12 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  13 # version 2 for more details (a copy is included in the LICENSE file that
  14 # accompanied this code).
  15 #
  16 # You should have received a copy of the GNU General Public License version
  17 # 2 along with this work; if not, write to the Free Software Foundation,
  18 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  19 #
  20 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  21 # or visit www.oracle.com if you need additional information or have any
  22 # questions.
  23 #
</pre>
<hr />
<pre>
 793         OTHER_STRIPPED_FILE=$FILE_WORK_DIR/other/$NAME
 794         $MKDIR -p $FILE_WORK_DIR/this $FILE_WORK_DIR/other
 795         $CP $THIS_FILE $THIS_STRIPPED_FILE
 796         $CP $OTHER_FILE $OTHER_STRIPPED_FILE
 797         $STRIP $THIS_STRIPPED_FILE
 798         $STRIP $OTHER_STRIPPED_FILE
 799         THIS_FILE=&quot;$THIS_STRIPPED_FILE&quot;
 800         OTHER_FILE=&quot;$OTHER_STRIPPED_FILE&quot;
 801     fi
 802 
 803     if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ]; then
 804         unset _NT_SYMBOL_PATH
 805         if [ &quot;$(uname -o)&quot; = &quot;Cygwin&quot; ]; then
 806             THIS=$(cygpath -msa $THIS)
 807             OTHER=$(cygpath -msa $OTHER)
 808         fi
 809         # Build an _NT_SYMBOL_PATH that contains all known locations for
 810         # pdb files.
 811         PDB_DIRS=&quot;$(ls -d \
 812             {$OTHER,$THIS}/support/modules_{cmds,libs}/{*,*/*} \
<span class="line-removed"> 813             {$OTHER,$THIS}/support/native/java.base/java_objs \</span>
 814             {$OTHER,$THIS}/support/native/jdk.incubator.jpackage/* \
 815             )&quot;
 816         export _NT_SYMBOL_PATH=&quot;$(echo $PDB_DIRS | tr &#39; &#39; &#39;;&#39;)&quot;
 817     fi
 818 
 819     if cmp $OTHER_FILE $THIS_FILE &gt; /dev/null; then
 820         # The files were bytewise identical.
 821         if [ -n &quot;$VERBOSE&quot; ]; then
 822             echo &quot;        :           :         :         :          :          : $BIN_FILE&quot;
 823         fi
 824         return 0
 825     fi
 826     if [ -z &quot;$SKIP_BIN_DIFF&quot; ]; then
 827         BIN_MSG=&quot; diff &quot;
 828         if [[ &quot;$ACCEPTED_BIN_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
 829             DIFF_BIN=true
 830             if [[ &quot;$KNOWN_BIN_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
 831                 BIN_MSG=&quot;*$BIN_MSG*&quot;
 832                 REGRESSIONS=true
 833             else
</pre>
</td>
<td>
<hr />
<pre>
   1 #!/bin/bash
   2 #
<span class="line-modified">   3 # Copyright (c) 2012, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   4 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   5 #
   6 # This code is free software; you can redistribute it and/or modify it
   7 # under the terms of the GNU General Public License version 2 only, as
   8 # published by the Free Software Foundation.
   9 #
  10 # This code is distributed in the hope that it will be useful, but WITHOUT
  11 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  12 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  13 # version 2 for more details (a copy is included in the LICENSE file that
  14 # accompanied this code).
  15 #
  16 # You should have received a copy of the GNU General Public License version
  17 # 2 along with this work; if not, write to the Free Software Foundation,
  18 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  19 #
  20 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  21 # or visit www.oracle.com if you need additional information or have any
  22 # questions.
  23 #
</pre>
<hr />
<pre>
 793         OTHER_STRIPPED_FILE=$FILE_WORK_DIR/other/$NAME
 794         $MKDIR -p $FILE_WORK_DIR/this $FILE_WORK_DIR/other
 795         $CP $THIS_FILE $THIS_STRIPPED_FILE
 796         $CP $OTHER_FILE $OTHER_STRIPPED_FILE
 797         $STRIP $THIS_STRIPPED_FILE
 798         $STRIP $OTHER_STRIPPED_FILE
 799         THIS_FILE=&quot;$THIS_STRIPPED_FILE&quot;
 800         OTHER_FILE=&quot;$OTHER_STRIPPED_FILE&quot;
 801     fi
 802 
 803     if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ]; then
 804         unset _NT_SYMBOL_PATH
 805         if [ &quot;$(uname -o)&quot; = &quot;Cygwin&quot; ]; then
 806             THIS=$(cygpath -msa $THIS)
 807             OTHER=$(cygpath -msa $OTHER)
 808         fi
 809         # Build an _NT_SYMBOL_PATH that contains all known locations for
 810         # pdb files.
 811         PDB_DIRS=&quot;$(ls -d \
 812             {$OTHER,$THIS}/support/modules_{cmds,libs}/{*,*/*} \

 813             {$OTHER,$THIS}/support/native/jdk.incubator.jpackage/* \
 814             )&quot;
 815         export _NT_SYMBOL_PATH=&quot;$(echo $PDB_DIRS | tr &#39; &#39; &#39;;&#39;)&quot;
 816     fi
 817 
 818     if cmp $OTHER_FILE $THIS_FILE &gt; /dev/null; then
 819         # The files were bytewise identical.
 820         if [ -n &quot;$VERBOSE&quot; ]; then
 821             echo &quot;        :           :         :         :          :          : $BIN_FILE&quot;
 822         fi
 823         return 0
 824     fi
 825     if [ -z &quot;$SKIP_BIN_DIFF&quot; ]; then
 826         BIN_MSG=&quot; diff &quot;
 827         if [[ &quot;$ACCEPTED_BIN_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
 828             DIFF_BIN=true
 829             if [[ &quot;$KNOWN_BIN_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
 830                 BIN_MSG=&quot;*$BIN_MSG*&quot;
 831                 REGRESSIONS=true
 832             else
</pre>
</td>
</tr>
</table>
<center><a href="../launcher/Launcher-java.base.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../../src/hotspot/.mx.jvmci/mx_jvmci.py.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>