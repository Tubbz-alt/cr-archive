<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/conf/jib-profiles.js</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="../common/NativeCompilation.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../hotspot/src/native/dtrace/generateJvmOffsets.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/conf/jib-profiles.js</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2015, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 234     var common = {};
 235 
 236     common.organization = &quot;jpg.infra.builddeps&quot;;
 237     common.build_id = getBuildId(input);
 238     common.build_number = input.build_number != null ? input.build_number : &quot;0&quot;;
 239 
 240     // List of the main profile names used for iteration
 241     common.main_profile_names = [
 242         &quot;linux-x64&quot;, &quot;linux-x86&quot;, &quot;macosx-x64&quot;, &quot;solaris-x64&quot;,
 243         &quot;solaris-sparcv9&quot;, &quot;windows-x64&quot;, &quot;windows-x86&quot;,
 244         &quot;linux-aarch64&quot;, &quot;linux-arm32&quot;, &quot;linux-ppc64le&quot;, &quot;linux-s390x&quot;
 245     ];
 246 
 247     // These are the base setttings for all the main build profiles.
 248     common.main_profile_base = {
 249         dependencies: [&quot;boot_jdk&quot;, &quot;gnumake&quot;, &quot;jtreg&quot;, &quot;jib&quot;, &quot;autoconf&quot;, &quot;jmh&quot;, &quot;jcov&quot;],
 250         default_make_targets: [&quot;product-bundles&quot;, &quot;test-bundles&quot;, &quot;static-libs-bundles&quot;],
 251         configure_args: concat([&quot;--enable-jtreg-failure-handler&quot;],
 252             &quot;--with-exclude-translations=de,es,fr,it,ko,pt_BR,sv,ca,tr,cs,sk,ja_JP_A,ja_JP_HA,ja_JP_HI,ja_JP_I,zh_TW,zh_HK&quot;,
 253             &quot;--disable-manpages&quot;,
<span class="line-modified"> 254             &quot;--with-jvm-features=-shenandoahgc&quot;,</span>
 255             versionArgs(input, common))
 256     };
 257     // Extra settings for debug profiles
 258     common.debug_suffix = &quot;-debug&quot;;
 259     common.debug_profile_base = {
 260         configure_args: [&quot;--enable-debug&quot;],
 261         labels: &quot;debug&quot;
 262     };
 263     // Extra settings for slowdebug profiles
 264     common.slowdebug_suffix = &quot;-slowdebug&quot;;
 265     common.slowdebug_profile_base = {
 266         configure_args: [&quot;--with-debug-level=slowdebug&quot;],
 267         labels: &quot;slowdebug&quot;
 268     };
 269     // Extra settings for openjdk only profiles
 270     common.open_suffix = &quot;-open&quot;;
 271     common.open_profile_base = {
 272         configure_args: [&quot;--enable-openjdk-only&quot;],
 273         labels: &quot;open&quot;
 274     };
</pre>
<hr />
<pre>
 849         }
 850     };
 851     profiles = concatObjects(profiles, testOnlyProfiles);
 852 
 853     // Profiles used to run tests using Jib for internal dependencies.
 854     var testedProfile = input.testedProfile;
 855     if (testedProfile == null) {
 856         testedProfile = input.build_os + &quot;-&quot; + input.build_cpu;
 857     }
 858     var testedProfileJdk = testedProfile + &quot;.jdk&quot;;
 859     // Make it possible to use the test image from a different profile
 860     var testImageProfile;
 861     if (input.testImageProfile != null) {
 862         testImageProfile = input.testImageProfile;
 863     } else if (testedProfile.endsWith(&quot;-jcov&quot;)) {
 864         testImageProfile = testedProfile.substring(0, testedProfile.length - &quot;-jcov&quot;.length);
 865     } else {
 866         testImageProfile = testedProfile;
 867     }
 868     var testedProfileTest = testImageProfile + &quot;.test&quot;
<span class="line-modified"> 869     var testOnlyMake = [ &quot;run-test-prebuilt&quot;, &quot;LOG_CMDLINES=true&quot;, &quot;JTREG_VERBOSE=fail,error,time&quot; ];</span>
 870     if (testedProfile.endsWith(&quot;-gcov&quot;)) {
 871         testOnlyMake = concat(testOnlyMake, &quot;GCOV_ENABLED=true&quot;)
 872     }
 873     var testOnlyProfilesPrebuilt = {
 874         &quot;run-test-prebuilt&quot;: {
 875             target_os: input.build_os,
 876             target_cpu: input.build_cpu,
 877             dependencies: [
 878                 &quot;jtreg&quot;, &quot;gnumake&quot;, &quot;boot_jdk&quot;, &quot;devkit&quot;, &quot;jib&quot;, &quot;jcov&quot;, testedProfileJdk,
 879                 testedProfileTest
 880             ],
 881             src: &quot;src.conf&quot;,
 882             make_args: testOnlyMake,
 883             environment: {
 884                 &quot;BOOT_JDK&quot;: common.boot_jdk_home,
 885                 &quot;JDK_IMAGE_DIR&quot;: input.get(testedProfileJdk, &quot;home_path&quot;),
 886                 &quot;TEST_IMAGE_DIR&quot;: input.get(testedProfileTest, &quot;home_path&quot;)
 887             },
 888             labels: &quot;test&quot;
 889         }
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2015, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 234     var common = {};
 235 
 236     common.organization = &quot;jpg.infra.builddeps&quot;;
 237     common.build_id = getBuildId(input);
 238     common.build_number = input.build_number != null ? input.build_number : &quot;0&quot;;
 239 
 240     // List of the main profile names used for iteration
 241     common.main_profile_names = [
 242         &quot;linux-x64&quot;, &quot;linux-x86&quot;, &quot;macosx-x64&quot;, &quot;solaris-x64&quot;,
 243         &quot;solaris-sparcv9&quot;, &quot;windows-x64&quot;, &quot;windows-x86&quot;,
 244         &quot;linux-aarch64&quot;, &quot;linux-arm32&quot;, &quot;linux-ppc64le&quot;, &quot;linux-s390x&quot;
 245     ];
 246 
 247     // These are the base setttings for all the main build profiles.
 248     common.main_profile_base = {
 249         dependencies: [&quot;boot_jdk&quot;, &quot;gnumake&quot;, &quot;jtreg&quot;, &quot;jib&quot;, &quot;autoconf&quot;, &quot;jmh&quot;, &quot;jcov&quot;],
 250         default_make_targets: [&quot;product-bundles&quot;, &quot;test-bundles&quot;, &quot;static-libs-bundles&quot;],
 251         configure_args: concat([&quot;--enable-jtreg-failure-handler&quot;],
 252             &quot;--with-exclude-translations=de,es,fr,it,ko,pt_BR,sv,ca,tr,cs,sk,ja_JP_A,ja_JP_HA,ja_JP_HI,ja_JP_I,zh_TW,zh_HK&quot;,
 253             &quot;--disable-manpages&quot;,
<span class="line-modified"> 254             &quot;--disable-jvm-feature-shenandoahgc&quot;,</span>
 255             versionArgs(input, common))
 256     };
 257     // Extra settings for debug profiles
 258     common.debug_suffix = &quot;-debug&quot;;
 259     common.debug_profile_base = {
 260         configure_args: [&quot;--enable-debug&quot;],
 261         labels: &quot;debug&quot;
 262     };
 263     // Extra settings for slowdebug profiles
 264     common.slowdebug_suffix = &quot;-slowdebug&quot;;
 265     common.slowdebug_profile_base = {
 266         configure_args: [&quot;--with-debug-level=slowdebug&quot;],
 267         labels: &quot;slowdebug&quot;
 268     };
 269     // Extra settings for openjdk only profiles
 270     common.open_suffix = &quot;-open&quot;;
 271     common.open_profile_base = {
 272         configure_args: [&quot;--enable-openjdk-only&quot;],
 273         labels: &quot;open&quot;
 274     };
</pre>
<hr />
<pre>
 849         }
 850     };
 851     profiles = concatObjects(profiles, testOnlyProfiles);
 852 
 853     // Profiles used to run tests using Jib for internal dependencies.
 854     var testedProfile = input.testedProfile;
 855     if (testedProfile == null) {
 856         testedProfile = input.build_os + &quot;-&quot; + input.build_cpu;
 857     }
 858     var testedProfileJdk = testedProfile + &quot;.jdk&quot;;
 859     // Make it possible to use the test image from a different profile
 860     var testImageProfile;
 861     if (input.testImageProfile != null) {
 862         testImageProfile = input.testImageProfile;
 863     } else if (testedProfile.endsWith(&quot;-jcov&quot;)) {
 864         testImageProfile = testedProfile.substring(0, testedProfile.length - &quot;-jcov&quot;.length);
 865     } else {
 866         testImageProfile = testedProfile;
 867     }
 868     var testedProfileTest = testImageProfile + &quot;.test&quot;
<span class="line-modified"> 869     var testOnlyMake = [ &quot;test-prebuilt&quot;, &quot;LOG_CMDLINES=true&quot;, &quot;JTREG_VERBOSE=fail,error,time&quot; ];</span>
 870     if (testedProfile.endsWith(&quot;-gcov&quot;)) {
 871         testOnlyMake = concat(testOnlyMake, &quot;GCOV_ENABLED=true&quot;)
 872     }
 873     var testOnlyProfilesPrebuilt = {
 874         &quot;run-test-prebuilt&quot;: {
 875             target_os: input.build_os,
 876             target_cpu: input.build_cpu,
 877             dependencies: [
 878                 &quot;jtreg&quot;, &quot;gnumake&quot;, &quot;boot_jdk&quot;, &quot;devkit&quot;, &quot;jib&quot;, &quot;jcov&quot;, testedProfileJdk,
 879                 testedProfileTest
 880             ],
 881             src: &quot;src.conf&quot;,
 882             make_args: testOnlyMake,
 883             environment: {
 884                 &quot;BOOT_JDK&quot;: common.boot_jdk_home,
 885                 &quot;JDK_IMAGE_DIR&quot;: input.get(testedProfileJdk, &quot;home_path&quot;),
 886                 &quot;TEST_IMAGE_DIR&quot;: input.get(testedProfileTest, &quot;home_path&quot;)
 887             },
 888             labels: &quot;test&quot;
 889         }
</pre>
</td>
</tr>
</table>
<center><a href="../common/NativeCompilation.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../hotspot/src/native/dtrace/generateJvmOffsets.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>