<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.lir.amd64/src/org/graalvm/compiler/lir/amd64/AMD64MathTanOp.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>   1 /*
<a name="1" id="anc1"></a><span class="line-modified">   2  * Copyright (c) 2018, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  * Copyright (c) 2016, Intel Corporation. All rights reserved.
   4  * Intel Math Library (LIBM) Source Code
   5  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   6  *
   7  * This code is free software; you can redistribute it and/or modify it
   8  * under the terms of the GNU General Public License version 2 only, as
   9  * published by the Free Software Foundation.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
  23  * questions.
  24  */
  25 
  26 
  27 package org.graalvm.compiler.lir.amd64;
  28 
  29 import static jdk.vm.ci.amd64.AMD64.r10;
  30 import static jdk.vm.ci.amd64.AMD64.r11;
  31 import static jdk.vm.ci.amd64.AMD64.r8;
  32 import static jdk.vm.ci.amd64.AMD64.r9;
  33 import static jdk.vm.ci.amd64.AMD64.rax;
  34 import static jdk.vm.ci.amd64.AMD64.rbx;
  35 import static jdk.vm.ci.amd64.AMD64.rcx;
  36 import static jdk.vm.ci.amd64.AMD64.rdi;
  37 import static jdk.vm.ci.amd64.AMD64.rdx;
  38 import static jdk.vm.ci.amd64.AMD64.rsi;
  39 import static jdk.vm.ci.amd64.AMD64.rsp;
  40 import static jdk.vm.ci.amd64.AMD64.xmm0;
  41 import static jdk.vm.ci.amd64.AMD64.xmm1;
  42 import static jdk.vm.ci.amd64.AMD64.xmm2;
  43 import static jdk.vm.ci.amd64.AMD64.xmm3;
  44 import static jdk.vm.ci.amd64.AMD64.xmm4;
  45 import static jdk.vm.ci.amd64.AMD64.xmm5;
  46 import static jdk.vm.ci.amd64.AMD64.xmm6;
  47 import static jdk.vm.ci.amd64.AMD64.xmm7;
  48 import static org.graalvm.compiler.lir.amd64.AMD64HotSpotHelper.pointerConstant;
  49 import static org.graalvm.compiler.lir.amd64.AMD64HotSpotHelper.recordExternalAddress;
  50 
  51 import org.graalvm.compiler.asm.Label;
  52 import org.graalvm.compiler.asm.amd64.AMD64Address;
  53 import org.graalvm.compiler.asm.amd64.AMD64Assembler;
<a name="2" id="anc2"></a><span class="line-added">  54 import org.graalvm.compiler.asm.amd64.AMD64Assembler.ConditionFlag;</span>
  55 import org.graalvm.compiler.asm.amd64.AMD64MacroAssembler;
  56 import org.graalvm.compiler.lir.LIRInstructionClass;
  57 import org.graalvm.compiler.lir.asm.ArrayDataPointerConstant;
  58 import org.graalvm.compiler.lir.asm.CompilationResultBuilder;
  59 
  60 import jdk.vm.ci.amd64.AMD64;
  61 
  62 /**
  63  * &lt;pre&gt;
  64  *                     ALGORITHM DESCRIPTION - TAN()
  65  *                     ---------------------
  66  *
  67  * Polynomials coefficients and other constants.
  68  *
  69  * Note that in this algorithm, there is a different polynomial for
  70  * each breakpoint, so there are 32 sets of polynomial coefficients
  71  * as well as 32 instances of the other constants.
  72  *
  73  * The polynomial coefficients and constants are offset from the start
  74  * of the main block as follows:
  75  *
  76  *   0:  c8 | c0
  77  *  16:  c9 | c1
  78  *  32: c10 | c2
  79  *  48: c11 | c3
  80  *  64: c12 | c4
  81  *  80: c13 | c5
  82  *  96: c14 | c6
  83  * 112: c15 | c7
  84  * 128: T_hi
  85  * 136: T_lo
  86  * 144: Sigma
  87  * 152: T_hl
  88  * 160: Tau
  89  * 168: Mask
  90  * 176: (end of block)
  91  *
  92  * The total table size is therefore 5632 bytes.
  93  *
  94  * Note that c0 and c1 are always zero. We could try storing
  95  * other constants here, and just loading the low part of the
  96  * SIMD register in these cases, after ensuring the high part
  97  * is zero.
  98  *
  99  * The higher terms of the polynomial are computed in the *low*
 100  * part of the SIMD register. This is so we can overlap the
 101  * multiplication by r^8 and the unpacking of the other part.
 102  *
 103  * The constants are:
 104  * T_hi + T_lo = accurate constant term in power series
 105  * Sigma + T_hl = accurate coefficient of r in power series (Sigma=1 bit)
 106  * Tau = multiplier for the reciprocal, always -1 or 0
 107  *
 108  * The basic reconstruction formula using these constants is:
 109  *
 110  * High = tau * recip_hi + t_hi
 111  * Med = (sgn * r + t_hl * r)_hi
 112  * Low = (sgn * r + t_hl * r)_lo +
 113  *       tau * recip_lo + T_lo + (T_hl + sigma) * c + pol
 114  *
 115  * where pol = c0 + c1 * r + c2 * r^2 + ... + c15 * r^15
 116  *
 117  * (c0 = c1 = 0, but using them keeps SIMD regularity)
 118  *
 119  * We then do a compensated sum High + Med, add the low parts together
 120  * and then do the final sum.
 121  *
 122  * Here recip_hi + recip_lo is an accurate reciprocal of the remainder
 123  * modulo pi/2
 124  *
 125  * Special cases:
 126  *  tan(NaN) = quiet NaN, and raise invalid exception
 127  *  tan(INF) = NaN and raise invalid exception
 128  *  tan(+/-0) = +/-0
 129  * &lt;/pre&gt;
 130  */
 131 public final class AMD64MathTanOp extends AMD64MathIntrinsicUnaryOp {
 132 
 133     public static final LIRInstructionClass&lt;AMD64MathTanOp&gt; TYPE = LIRInstructionClass.create(AMD64MathTanOp.class);
 134 
 135     public AMD64MathTanOp() {
 136         super(TYPE, /* GPR */ rax, rcx, rdx, rbx, rsi, rdi, r8, r9, r10, r11,
 137                         /* XMM */ xmm1, xmm2, xmm3, xmm4, xmm5, xmm6, xmm7);
 138     }
 139 
 140     private ArrayDataPointerConstant onehalf = pointerConstant(16, new int[]{
 141             // @formatter:off
 142             0x00000000, 0x3fe00000, 0x00000000, 0x3fe00000
 143             // @formatter:on
 144     });
 145 
 146     private ArrayDataPointerConstant mul16 = pointerConstant(16, new int[]{
 147             // @formatter:off
 148             0x00000000, 0x40300000, 0x00000000, 0x3ff00000
 149             // @formatter:on
 150     });
 151 
 152     private ArrayDataPointerConstant signMask = pointerConstant(16, new int[]{
 153             // @formatter:off
 154             0x00000000, 0x80000000, 0x00000000, 0x80000000
 155             // @formatter:on
 156     });
 157 
 158     private ArrayDataPointerConstant pi32Inv = pointerConstant(16, new int[]{
 159             // @formatter:off
 160             0x6dc9c883, 0x3fe45f30, 0x6dc9c883, 0x40245f30
 161             // @formatter:on
 162     });
 163 
 164     private ArrayDataPointerConstant p1 = pointerConstant(16, new int[]{
 165             // @formatter:off
 166             0x54444000, 0x3fb921fb, 0x54440000, 0x3fb921fb
 167             // @formatter:on
 168     });
 169 
 170     private ArrayDataPointerConstant p2 = pointerConstant(16, new int[]{
 171             // @formatter:off
 172             0x67674000, 0xbd32e7b9, 0x4c4c0000, 0x3d468c23
 173             // @formatter:on
 174     });
 175 
 176     private ArrayDataPointerConstant p3 = pointerConstant(16, new int[]{
 177             // @formatter:off
 178             0x3707344a, 0x3aa8a2e0, 0x03707345, 0x3ae98a2e
 179             // @formatter:on
 180     });
 181 
 182     private ArrayDataPointerConstant ctable = pointerConstant(16, new int[]{
 183             // @formatter:off
 184             0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x882c10fa,
 185             0x3f9664f4, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
 186             0x00000000, 0x00000000, 0x55e6c23d, 0x3f8226e3, 0x55555555,
 187             0x3fd55555, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
 188             0x0e157de0, 0x3f6d6d3d, 0x11111111, 0x3fc11111, 0x00000000,
 189             0x00000000, 0x00000000, 0x00000000, 0x452b75e3, 0x3f57da36,
 190             0x1ba1ba1c, 0x3faba1ba, 0x00000000, 0x00000000, 0x00000000,
 191             0x00000000, 0x00000000, 0x3ff00000, 0x00000000, 0x00000000,
 192             0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x4e435f9b,
 193             0x3f953f83, 0x00000000, 0x00000000, 0x3c6e8e46, 0x3f9b74ea,
 194             0x00000000, 0x00000000, 0xda5b7511, 0x3f85ad63, 0xdc230b9b,
 195             0x3fb97558, 0x26cb3788, 0x3f881308, 0x76fc4985, 0x3fd62ac9,
 196             0x77bb08ba, 0x3f757c85, 0xb6247521, 0x3fb1381e, 0x5922170c,
 197             0x3f754e95, 0x8746482d, 0x3fc27f83, 0x11055b30, 0x3f64e391,
 198             0x3e666320, 0x3fa3e609, 0x0de9dae3, 0x3f6301df, 0x1f1dca06,
 199             0x3fafa8ae, 0x8c5b2da2, 0x3fb936bb, 0x4e88f7a5, 0x3c587d05,
 200             0x00000000, 0x3ff00000, 0xa8935dd9, 0x3f83dde2, 0x00000000,
 201             0x00000000, 0x00000000, 0x00000000, 0x5a279ea3, 0x3faa3407,
 202             0x00000000, 0x00000000, 0x432d65fa, 0x3fa70153, 0x00000000,
 203             0x00000000, 0x891a4602, 0x3f9d03ef, 0xd62ca5f8, 0x3fca77d9,
 204             0xb35f4628, 0x3f97a265, 0x433258fa, 0x3fd8cf51, 0xb58fd909,
 205             0x3f8f88e3, 0x01771cea, 0x3fc2b154, 0xf3562f8e, 0x3f888f57,
 206             0xc028a723, 0x3fc7370f, 0x20b7f9f0, 0x3f80f44c, 0x214368e9,
 207             0x3fb6dfaa, 0x28891863, 0x3f79b4b6, 0x172dbbf0, 0x3fb6cb8e,
 208             0xe0553158, 0x3fc975f5, 0x593fe814, 0x3c2ef5d3, 0x00000000,
 209             0x3ff00000, 0x03dec550, 0x3fa44203, 0x00000000, 0x00000000,
 210             0x00000000, 0x00000000, 0x9314533e, 0x3fbb8ec5, 0x00000000,
 211             0x00000000, 0x09aa36d0, 0x3fb6d3f4, 0x00000000, 0x00000000,
 212             0xdcb427fd, 0x3fb13950, 0xd87ab0bb, 0x3fd5335e, 0xce0ae8a5,
 213             0x3fabb382, 0x79143126, 0x3fddba41, 0x5f2b28d4, 0x3fa552f1,
 214             0x59f21a6d, 0x3fd015ab, 0x22c27d95, 0x3fa0e984, 0xe19fc6aa,
 215             0x3fd0576c, 0x8f2c2950, 0x3f9a4898, 0xc0b3f22c, 0x3fc59462,
 216             0x1883a4b8, 0x3f94b61c, 0x3f838640, 0x3fc30eb8, 0x355c63dc,
 217             0x3fd36a08, 0x1dce993d, 0xbc6d704d, 0x00000000, 0x3ff00000,
 218             0x2b82ab63, 0x3fb78e92, 0x00000000, 0x00000000, 0x00000000,
 219             0x00000000, 0x56f37042, 0x3fccfc56, 0x00000000, 0x00000000,
 220             0xaa563951, 0x3fc90125, 0x00000000, 0x00000000, 0x3d0e7c5d,
 221             0x3fc50533, 0x9bed9b2e, 0x3fdf0ed9, 0x5fe7c47c, 0x3fc1f250,
 222             0x96c125e5, 0x3fe2edd9, 0x5a02bbd8, 0x3fbe5c71, 0x86362c20,
 223             0x3fda08b7, 0x4b4435ed, 0x3fb9d342, 0x4b494091, 0x3fd911bd,
 224             0xb56658be, 0x3fb5e4c7, 0x93a2fd76, 0x3fd3c092, 0xda271794,
 225             0x3fb29910, 0x3303df2b, 0x3fd189be, 0x99fcef32, 0x3fda8279,
 226             0xb68c1467, 0x3c708b2f, 0x00000000, 0x3ff00000, 0x980c4337,
 227             0x3fc5f619, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
 228             0xcc03e501, 0x3fdff10f, 0x00000000, 0x00000000, 0x44a4e845,
 229             0x3fddb63b, 0x00000000, 0x00000000, 0x3768ad9f, 0x3fdb72a4,
 230             0x3dd01cca, 0x3fe5fdb9, 0xa61d2811, 0x3fd972b2, 0x5645ad0b,
 231             0x3fe977f9, 0xd013b3ab, 0x3fd78ca3, 0xbf0bf914, 0x3fe4f192,
 232             0x4d53e730, 0x3fd5d060, 0x3f8b9000, 0x3fe49933, 0xe2b82f08,
 233             0x3fd4322a, 0x5936a835, 0x3fe27ae1, 0xb1c61c9b, 0x3fd2b3fb,
 234             0xef478605, 0x3fe1659e, 0x190834ec, 0x3fe11ab7, 0xcdb625ea,
 235             0xbc8e564b, 0x00000000, 0x3ff00000, 0xb07217e3, 0x3fd248f1,
 236             0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x2b2c49d0,
 237             0x3ff2de9c, 0x00000000, 0x00000000, 0x2655bc98, 0x3ff33e58,
 238             0x00000000, 0x00000000, 0xff691fa2, 0x3ff3972e, 0xe93463bd,
 239             0x3feeed87, 0x070e10a0, 0x3ff3f5b2, 0xf4d790a4, 0x3ff20c10,
 240             0xa04e8ea3, 0x3ff4541a, 0x386accd3, 0x3ff1369e, 0x222a66dd,
 241             0x3ff4b521, 0x22a9777e, 0x3ff20817, 0x52a04a6e, 0x3ff5178f,
 242             0xddaa0031, 0x3ff22137, 0x4447d47c, 0x3ff57c01, 0x1e9c7f1d,
 243             0x3ff29311, 0x2ab7f990, 0x3fe561b8, 0x209c7df1, 0x3c87a8c5,
 244             0x00000000, 0x3ff00000, 0x4170bcc6, 0x3fdc92d8, 0x00000000,
 245             0x00000000, 0x00000000, 0x00000000, 0xc7ab4d5a, 0x40085e24,
 246             0x00000000, 0x00000000, 0xe93ea75d, 0x400b963d, 0x00000000,
 247             0x00000000, 0x94a7f25a, 0x400f37e2, 0x4b6261cb, 0x3ff5f984,
 248             0x5a9dd812, 0x4011aab0, 0x74c30018, 0x3ffaf5a5, 0x7f2ce8e3,
 249             0x4013fe8b, 0xfe8e54fa, 0x3ffd7334, 0x670d618d, 0x4016a10c,
 250             0x4db97058, 0x4000e012, 0x24df44dd, 0x40199c5f, 0x697d6ece,
 251             0x4003006e, 0x83298b82, 0x401cfc4d, 0x19d490d6, 0x40058c19,
 252             0x2ae42850, 0x3fea4300, 0x118e20e6, 0xbc7a6db8, 0x00000000,
 253             0x40000000, 0xe33345b8, 0xbfd4e526, 0x00000000, 0x00000000,
 254             0x00000000, 0x00000000, 0x65965966, 0x40219659, 0x00000000,
 255             0x00000000, 0x882c10fa, 0x402664f4, 0x00000000, 0x00000000,
 256             0x83cd3723, 0x402c8342, 0x00000000, 0x40000000, 0x55e6c23d,
 257             0x403226e3, 0x55555555, 0x40055555, 0x34451939, 0x40371c96,
 258             0xaaaaaaab, 0x400aaaaa, 0x0e157de0, 0x403d6d3d, 0x11111111,
 259             0x40111111, 0xa738201f, 0x4042bbce, 0x05b05b06, 0x4015b05b,
 260             0x452b75e3, 0x4047da36, 0x1ba1ba1c, 0x401ba1ba, 0x00000000,
 261             0x3ff00000, 0x00000000, 0x00000000, 0x00000000, 0x40000000,
 262             0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
 263             0x00000000, 0x4f48b8d3, 0xbf33eaf9, 0x00000000, 0x00000000,
 264             0x0cf7586f, 0x3f20b8ea, 0x00000000, 0x00000000, 0xd0258911,
 265             0xbf0abaf3, 0x23e49fe9, 0xbfab5a8c, 0x2d53222e, 0x3ef60d15,
 266             0x21169451, 0x3fa172b2, 0xbb254dbc, 0xbee1d3b5, 0xdbf93b8e,
 267             0xbf84c7db, 0x05b4630b, 0x3ecd3364, 0xee9aada7, 0x3f743924,
 268             0x794a8297, 0xbeb7b7b9, 0xe015f797, 0xbf5d41f5, 0xe41a4a56,
 269             0x3ea35dfb, 0xe4c2a251, 0x3f49a2ab, 0x5af9e000, 0xbfce49ce,
 270             0x8c743719, 0x3d1eb860, 0x00000000, 0x00000000, 0x1b4863cf,
 271             0x3fd78294, 0x00000000, 0x3ff00000, 0x00000000, 0xfffffff8,
 272             0x535ad890, 0xbf2b9320, 0x00000000, 0x00000000, 0x018fdf1f,
 273             0x3f16d61d, 0x00000000, 0x00000000, 0x0359f1be, 0xbf0139e4,
 274             0xa4317c6d, 0xbfa67e17, 0x82672d0f, 0x3eebb405, 0x2f1b621e,
 275             0x3f9f455b, 0x51ccf238, 0xbed55317, 0xf437b9ac, 0xbf804bee,
 276             0xc791a2b5, 0x3ec0e993, 0x919a1db2, 0x3f7080c2, 0x336a5b0e,
 277             0xbeaa48a2, 0x0a268358, 0xbf55a443, 0xdfd978e4, 0x3e94b61f,
 278             0xd7767a58, 0x3f431806, 0x2aea0000, 0xbfc9bbe8, 0x7723ea61,
 279             0xbd3a2369, 0x00000000, 0x00000000, 0xdf7796ff, 0x3fd6e642,
 280             0x00000000, 0x3ff00000, 0x00000000, 0xfffffff8, 0xb9ff07ce,
 281             0xbf231c78, 0x00000000, 0x00000000, 0xa5517182, 0x3f0ff0e0,
 282             0x00000000, 0x00000000, 0x790b4cbc, 0xbef66191, 0x848a46c6,
 283             0xbfa21ac0, 0xb16435fa, 0x3ee1d3ec, 0x2a1aa832, 0x3f9c71ea,
 284             0xfdd299ef, 0xbec9dd1a, 0x3f8dbaaf, 0xbf793363, 0x309fc6ea,
 285             0x3eb415d6, 0xbee60471, 0x3f6b83ba, 0x94a0a697, 0xbe9dae11,
 286             0x3e5c67b3, 0xbf4fd07b, 0x9a8f3e3e, 0x3e86bd75, 0xa4beb7a4,
 287             0x3f3d1eb1, 0x29cfc000, 0xbfc549ce, 0xbf159358, 0xbd397b33,
 288             0x00000000, 0x00000000, 0x871fee6c, 0x3fd666f0, 0x00000000,
 289             0x3ff00000, 0x00000000, 0xfffffff8, 0x7d98a556, 0xbf1a3958,
 290             0x00000000, 0x00000000, 0x9d88dc01, 0x3f0704c2, 0x00000000,
 291             0x00000000, 0x73742a2b, 0xbeed054a, 0x58844587, 0xbf9c2a13,
 292             0x55688a79, 0x3ed7a326, 0xee33f1d6, 0x3f9a48f4, 0xa8dc9888,
 293             0xbebf8939, 0xaad4b5b8, 0xbf72f746, 0x9102efa1, 0x3ea88f82,
 294             0xdabc29cf, 0x3f678228, 0x9289afb8, 0xbe90f456, 0x741fb4ed,
 295             0xbf46f3a3, 0xa97f6663, 0x3e79b4bf, 0xca89ff3f, 0x3f36db70,
 296             0xa8a2a000, 0xbfc0ee13, 0x3da24be1, 0xbd338b9f, 0x00000000,
 297             0x00000000, 0x11cd6c69, 0x3fd601fd, 0x00000000, 0x3ff00000,
 298             0x00000000, 0xfffffff8, 0x1a154b97, 0xbf116b01, 0x00000000,
 299             0x00000000, 0x2d427630, 0x3f0147bf, 0x00000000, 0x00000000,
 300             0xb93820c8, 0xbee264d4, 0xbb6cbb18, 0xbf94ab8c, 0x888d4d92,
 301             0x3ed0568b, 0x60730f7c, 0x3f98b19b, 0xe4b1fb11, 0xbeb2f950,
 302             0x22cf9f74, 0xbf6b21cd, 0x4a3ff0a6, 0x3e9f499e, 0xfd2b83ce,
 303             0x3f64aad7, 0x637b73af, 0xbe83487c, 0xe522591a, 0xbf3fc092,
 304             0xa158e8bc, 0x3e6e3aae, 0xe5e82ffa, 0x3f329d2f, 0xd636a000,
 305             0xbfb9477f, 0xc2c2d2bc, 0xbd135ef9, 0x00000000, 0x00000000,
 306             0xf2fdb123, 0x3fd5b566, 0x00000000, 0x3ff00000, 0x00000000,
 307             0xfffffff8, 0xc41acb64, 0xbf05448d, 0x00000000, 0x00000000,
 308             0xdbb03d6f, 0x3efb7ad2, 0x00000000, 0x00000000, 0x9e42962d,
 309             0xbed5aea5, 0x2579f8ef, 0xbf8b2398, 0x288a1ed9, 0x3ec81441,
 310             0xb0198dc5, 0x3f979a3a, 0x2fdfe253, 0xbea57cd3, 0x5766336f,
 311             0xbf617caa, 0x600944c3, 0x3e954ed6, 0xa4e0aaf8, 0x3f62c646,
 312             0x6b8fb29c, 0xbe74e3a3, 0xdc4c0409, 0xbf33f952, 0x9bffe365,
 313             0x3e6301ec, 0xb8869e44, 0x3f2fc566, 0xe1e04000, 0xbfb0cc62,
 314             0x016b907f, 0xbd119cbc, 0x00000000, 0x00000000, 0xe6b9d8fa,
 315             0x3fd57fb3, 0x00000000, 0x3ff00000, 0x00000000, 0xfffffff8,
 316             0x5daf22a6, 0xbef429d7, 0x00000000, 0x00000000, 0x06bca545,
 317             0x3ef7a27d, 0x00000000, 0x00000000, 0x7211c19a, 0xbec41c3e,
 318             0x956ed53e, 0xbf7ae3f4, 0xee750e72, 0x3ec3901b, 0x91d443f5,
 319             0x3f96f713, 0x36661e6c, 0xbe936e09, 0x506f9381, 0xbf5122e8,
 320             0xcb6dd43f, 0x3e9041b9, 0x6698b2ff, 0x3f61b0c7, 0x576bf12b,
 321             0xbe625a8a, 0xe5a0e9dc, 0xbf23499d, 0x110384dd, 0x3e5b1c2c,
 322             0x68d43db6, 0x3f2cb899, 0x6ecac000, 0xbfa0c414, 0xcd7dd58c,
 323             0x3d13500f, 0x00000000, 0x00000000, 0x85a2c8fb, 0x3fd55fe0,
 324             0x00000000, 0x3ff00000, 0x00000000, 0xfffffff8, 0x00000000,
 325             0x00000000, 0x00000000, 0x00000000, 0x2bf70ebe, 0x3ef66a8f,
 326             0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
 327             0x00000000, 0xd644267f, 0x3ec22805, 0x16c16c17, 0x3f96c16c,
 328             0x00000000, 0x00000000, 0x00000000, 0x00000000, 0xc4e09162,
 329             0x3e8d6db2, 0xbc011567, 0x3f61566a, 0x00000000, 0x00000000,
 330             0x00000000, 0x00000000, 0x1f79955c, 0x3e57da4e, 0x9334ef0b,
 331             0x3f2bbd77, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
 332             0x00000000, 0x00000000, 0x55555555, 0x3fd55555, 0x00000000,
 333             0x3ff00000, 0x00000000, 0xfffffff8, 0x5daf22a6, 0x3ef429d7,
 334             0x00000000, 0x00000000, 0x06bca545, 0x3ef7a27d, 0x00000000,
 335             0x00000000, 0x7211c19a, 0x3ec41c3e, 0x956ed53e, 0x3f7ae3f4,
 336             0xee750e72, 0x3ec3901b, 0x91d443f5, 0x3f96f713, 0x36661e6c,
 337             0x3e936e09, 0x506f9381, 0x3f5122e8, 0xcb6dd43f, 0x3e9041b9,
 338             0x6698b2ff, 0x3f61b0c7, 0x576bf12b, 0x3e625a8a, 0xe5a0e9dc,
 339             0x3f23499d, 0x110384dd, 0x3e5b1c2c, 0x68d43db6, 0x3f2cb899,
 340             0x6ecac000, 0x3fa0c414, 0xcd7dd58c, 0xbd13500f, 0x00000000,
 341             0x00000000, 0x85a2c8fb, 0x3fd55fe0, 0x00000000, 0x3ff00000,
 342             0x00000000, 0xfffffff8, 0xc41acb64, 0x3f05448d, 0x00000000,
 343             0x00000000, 0xdbb03d6f, 0x3efb7ad2, 0x00000000, 0x00000000,
 344             0x9e42962d, 0x3ed5aea5, 0x2579f8ef, 0x3f8b2398, 0x288a1ed9,
 345             0x3ec81441, 0xb0198dc5, 0x3f979a3a, 0x2fdfe253, 0x3ea57cd3,
 346             0x5766336f, 0x3f617caa, 0x600944c3, 0x3e954ed6, 0xa4e0aaf8,
 347             0x3f62c646, 0x6b8fb29c, 0x3e74e3a3, 0xdc4c0409, 0x3f33f952,
 348             0x9bffe365, 0x3e6301ec, 0xb8869e44, 0x3f2fc566, 0xe1e04000,
 349             0x3fb0cc62, 0x016b907f, 0x3d119cbc, 0x00000000, 0x00000000,
 350             0xe6b9d8fa, 0x3fd57fb3, 0x00000000, 0x3ff00000, 0x00000000,
 351             0xfffffff8, 0x1a154b97, 0x3f116b01, 0x00000000, 0x00000000,
 352             0x2d427630, 0x3f0147bf, 0x00000000, 0x00000000, 0xb93820c8,
 353             0x3ee264d4, 0xbb6cbb18, 0x3f94ab8c, 0x888d4d92, 0x3ed0568b,
 354             0x60730f7c, 0x3f98b19b, 0xe4b1fb11, 0x3eb2f950, 0x22cf9f74,
 355             0x3f6b21cd, 0x4a3ff0a6, 0x3e9f499e, 0xfd2b83ce, 0x3f64aad7,
 356             0x637b73af, 0x3e83487c, 0xe522591a, 0x3f3fc092, 0xa158e8bc,
 357             0x3e6e3aae, 0xe5e82ffa, 0x3f329d2f, 0xd636a000, 0x3fb9477f,
 358             0xc2c2d2bc, 0x3d135ef9, 0x00000000, 0x00000000, 0xf2fdb123,
 359             0x3fd5b566, 0x00000000, 0x3ff00000, 0x00000000, 0xfffffff8,
 360             0x7d98a556, 0x3f1a3958, 0x00000000, 0x00000000, 0x9d88dc01,
 361             0x3f0704c2, 0x00000000, 0x00000000, 0x73742a2b, 0x3eed054a,
 362             0x58844587, 0x3f9c2a13, 0x55688a79, 0x3ed7a326, 0xee33f1d6,
 363             0x3f9a48f4, 0xa8dc9888, 0x3ebf8939, 0xaad4b5b8, 0x3f72f746,
 364             0x9102efa1, 0x3ea88f82, 0xdabc29cf, 0x3f678228, 0x9289afb8,
 365             0x3e90f456, 0x741fb4ed, 0x3f46f3a3, 0xa97f6663, 0x3e79b4bf,
 366             0xca89ff3f, 0x3f36db70, 0xa8a2a000, 0x3fc0ee13, 0x3da24be1,
 367             0x3d338b9f, 0x00000000, 0x00000000, 0x11cd6c69, 0x3fd601fd,
 368             0x00000000, 0x3ff00000, 0x00000000, 0xfffffff8, 0xb9ff07ce,
 369             0x3f231c78, 0x00000000, 0x00000000, 0xa5517182, 0x3f0ff0e0,
 370             0x00000000, 0x00000000, 0x790b4cbc, 0x3ef66191, 0x848a46c6,
 371             0x3fa21ac0, 0xb16435fa, 0x3ee1d3ec, 0x2a1aa832, 0x3f9c71ea,
 372             0xfdd299ef, 0x3ec9dd1a, 0x3f8dbaaf, 0x3f793363, 0x309fc6ea,
 373             0x3eb415d6, 0xbee60471, 0x3f6b83ba, 0x94a0a697, 0x3e9dae11,
 374             0x3e5c67b3, 0x3f4fd07b, 0x9a8f3e3e, 0x3e86bd75, 0xa4beb7a4,
 375             0x3f3d1eb1, 0x29cfc000, 0x3fc549ce, 0xbf159358, 0x3d397b33,
 376             0x00000000, 0x00000000, 0x871fee6c, 0x3fd666f0, 0x00000000,
 377             0x3ff00000, 0x00000000, 0xfffffff8, 0x535ad890, 0x3f2b9320,
 378             0x00000000, 0x00000000, 0x018fdf1f, 0x3f16d61d, 0x00000000,
 379             0x00000000, 0x0359f1be, 0x3f0139e4, 0xa4317c6d, 0x3fa67e17,
 380             0x82672d0f, 0x3eebb405, 0x2f1b621e, 0x3f9f455b, 0x51ccf238,
 381             0x3ed55317, 0xf437b9ac, 0x3f804bee, 0xc791a2b5, 0x3ec0e993,
 382             0x919a1db2, 0x3f7080c2, 0x336a5b0e, 0x3eaa48a2, 0x0a268358,
 383             0x3f55a443, 0xdfd978e4, 0x3e94b61f, 0xd7767a58, 0x3f431806,
 384             0x2aea0000, 0x3fc9bbe8, 0x7723ea61, 0x3d3a2369, 0x00000000,
 385             0x00000000, 0xdf7796ff, 0x3fd6e642, 0x00000000, 0x3ff00000,
 386             0x00000000, 0xfffffff8, 0x4f48b8d3, 0x3f33eaf9, 0x00000000,
 387             0x00000000, 0x0cf7586f, 0x3f20b8ea, 0x00000000, 0x00000000,
 388             0xd0258911, 0x3f0abaf3, 0x23e49fe9, 0x3fab5a8c, 0x2d53222e,
 389             0x3ef60d15, 0x21169451, 0x3fa172b2, 0xbb254dbc, 0x3ee1d3b5,
 390             0xdbf93b8e, 0x3f84c7db, 0x05b4630b, 0x3ecd3364, 0xee9aada7,
 391             0x3f743924, 0x794a8297, 0x3eb7b7b9, 0xe015f797, 0x3f5d41f5,
 392             0xe41a4a56, 0x3ea35dfb, 0xe4c2a251, 0x3f49a2ab, 0x5af9e000,
 393             0x3fce49ce, 0x8c743719, 0xbd1eb860, 0x00000000, 0x00000000,
 394             0x1b4863cf, 0x3fd78294, 0x00000000, 0x3ff00000, 0x00000000,
 395             0xfffffff8, 0x65965966, 0xc0219659, 0x00000000, 0x00000000,
 396             0x882c10fa, 0x402664f4, 0x00000000, 0x00000000, 0x83cd3723,
 397             0xc02c8342, 0x00000000, 0xc0000000, 0x55e6c23d, 0x403226e3,
 398             0x55555555, 0x40055555, 0x34451939, 0xc0371c96, 0xaaaaaaab,
 399             0xc00aaaaa, 0x0e157de0, 0x403d6d3d, 0x11111111, 0x40111111,
 400             0xa738201f, 0xc042bbce, 0x05b05b06, 0xc015b05b, 0x452b75e3,
 401             0x4047da36, 0x1ba1ba1c, 0x401ba1ba, 0x00000000, 0xbff00000,
 402             0x00000000, 0x00000000, 0x00000000, 0x40000000, 0x00000000,
 403             0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
 404             0xc7ab4d5a, 0xc0085e24, 0x00000000, 0x00000000, 0xe93ea75d,
 405             0x400b963d, 0x00000000, 0x00000000, 0x94a7f25a, 0xc00f37e2,
 406             0x4b6261cb, 0xbff5f984, 0x5a9dd812, 0x4011aab0, 0x74c30018,
 407             0x3ffaf5a5, 0x7f2ce8e3, 0xc013fe8b, 0xfe8e54fa, 0xbffd7334,
 408             0x670d618d, 0x4016a10c, 0x4db97058, 0x4000e012, 0x24df44dd,
 409             0xc0199c5f, 0x697d6ece, 0xc003006e, 0x83298b82, 0x401cfc4d,
 410             0x19d490d6, 0x40058c19, 0x2ae42850, 0xbfea4300, 0x118e20e6,
 411             0x3c7a6db8, 0x00000000, 0x40000000, 0xe33345b8, 0xbfd4e526,
 412             0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x2b2c49d0,
 413             0xbff2de9c, 0x00000000, 0x00000000, 0x2655bc98, 0x3ff33e58,
 414             0x00000000, 0x00000000, 0xff691fa2, 0xbff3972e, 0xe93463bd,
 415             0xbfeeed87, 0x070e10a0, 0x3ff3f5b2, 0xf4d790a4, 0x3ff20c10,
 416             0xa04e8ea3, 0xbff4541a, 0x386accd3, 0xbff1369e, 0x222a66dd,
 417             0x3ff4b521, 0x22a9777e, 0x3ff20817, 0x52a04a6e, 0xbff5178f,
 418             0xddaa0031, 0xbff22137, 0x4447d47c, 0x3ff57c01, 0x1e9c7f1d,
 419             0x3ff29311, 0x2ab7f990, 0xbfe561b8, 0x209c7df1, 0xbc87a8c5,
 420             0x00000000, 0x3ff00000, 0x4170bcc6, 0x3fdc92d8, 0x00000000,
 421             0x00000000, 0x00000000, 0x00000000, 0xcc03e501, 0xbfdff10f,
 422             0x00000000, 0x00000000, 0x44a4e845, 0x3fddb63b, 0x00000000,
 423             0x00000000, 0x3768ad9f, 0xbfdb72a4, 0x3dd01cca, 0xbfe5fdb9,
 424             0xa61d2811, 0x3fd972b2, 0x5645ad0b, 0x3fe977f9, 0xd013b3ab,
 425             0xbfd78ca3, 0xbf0bf914, 0xbfe4f192, 0x4d53e730, 0x3fd5d060,
 426             0x3f8b9000, 0x3fe49933, 0xe2b82f08, 0xbfd4322a, 0x5936a835,
 427             0xbfe27ae1, 0xb1c61c9b, 0x3fd2b3fb, 0xef478605, 0x3fe1659e,
 428             0x190834ec, 0xbfe11ab7, 0xcdb625ea, 0x3c8e564b, 0x00000000,
 429             0x3ff00000, 0xb07217e3, 0x3fd248f1, 0x00000000, 0x00000000,
 430             0x00000000, 0x00000000, 0x56f37042, 0xbfccfc56, 0x00000000,
 431             0x00000000, 0xaa563951, 0x3fc90125, 0x00000000, 0x00000000,
 432             0x3d0e7c5d, 0xbfc50533, 0x9bed9b2e, 0xbfdf0ed9, 0x5fe7c47c,
 433             0x3fc1f250, 0x96c125e5, 0x3fe2edd9, 0x5a02bbd8, 0xbfbe5c71,
 434             0x86362c20, 0xbfda08b7, 0x4b4435ed, 0x3fb9d342, 0x4b494091,
 435             0x3fd911bd, 0xb56658be, 0xbfb5e4c7, 0x93a2fd76, 0xbfd3c092,
 436             0xda271794, 0x3fb29910, 0x3303df2b, 0x3fd189be, 0x99fcef32,
 437             0xbfda8279, 0xb68c1467, 0xbc708b2f, 0x00000000, 0x3ff00000,
 438             0x980c4337, 0x3fc5f619, 0x00000000, 0x00000000, 0x00000000,
 439             0x00000000, 0x9314533e, 0xbfbb8ec5, 0x00000000, 0x00000000,
 440             0x09aa36d0, 0x3fb6d3f4, 0x00000000, 0x00000000, 0xdcb427fd,
 441             0xbfb13950, 0xd87ab0bb, 0xbfd5335e, 0xce0ae8a5, 0x3fabb382,
 442             0x79143126, 0x3fddba41, 0x5f2b28d4, 0xbfa552f1, 0x59f21a6d,
 443             0xbfd015ab, 0x22c27d95, 0x3fa0e984, 0xe19fc6aa, 0x3fd0576c,
 444             0x8f2c2950, 0xbf9a4898, 0xc0b3f22c, 0xbfc59462, 0x1883a4b8,
 445             0x3f94b61c, 0x3f838640, 0x3fc30eb8, 0x355c63dc, 0xbfd36a08,
 446             0x1dce993d, 0x3c6d704d, 0x00000000, 0x3ff00000, 0x2b82ab63,
 447             0x3fb78e92, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
 448             0x5a279ea3, 0xbfaa3407, 0x00000000, 0x00000000, 0x432d65fa,
 449             0x3fa70153, 0x00000000, 0x00000000, 0x891a4602, 0xbf9d03ef,
 450             0xd62ca5f8, 0xbfca77d9, 0xb35f4628, 0x3f97a265, 0x433258fa,
 451             0x3fd8cf51, 0xb58fd909, 0xbf8f88e3, 0x01771cea, 0xbfc2b154,
 452             0xf3562f8e, 0x3f888f57, 0xc028a723, 0x3fc7370f, 0x20b7f9f0,
 453             0xbf80f44c, 0x214368e9, 0xbfb6dfaa, 0x28891863, 0x3f79b4b6,
 454             0x172dbbf0, 0x3fb6cb8e, 0xe0553158, 0xbfc975f5, 0x593fe814,
 455             0xbc2ef5d3, 0x00000000, 0x3ff00000, 0x03dec550, 0x3fa44203,
 456             0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x4e435f9b,
 457             0xbf953f83, 0x00000000, 0x00000000, 0x3c6e8e46, 0x3f9b74ea,
 458             0x00000000, 0x00000000, 0xda5b7511, 0xbf85ad63, 0xdc230b9b,
 459             0xbfb97558, 0x26cb3788, 0x3f881308, 0x76fc4985, 0x3fd62ac9,
 460             0x77bb08ba, 0xbf757c85, 0xb6247521, 0xbfb1381e, 0x5922170c,
 461             0x3f754e95, 0x8746482d, 0x3fc27f83, 0x11055b30, 0xbf64e391,
 462             0x3e666320, 0xbfa3e609, 0x0de9dae3, 0x3f6301df, 0x1f1dca06,
 463             0x3fafa8ae, 0x8c5b2da2, 0xbfb936bb, 0x4e88f7a5, 0xbc587d05,
 464             0x00000000, 0x3ff00000, 0xa8935dd9, 0x3f83dde2, 0x00000000,
 465             0x00000000, 0x00000000, 0x00000000
 466             // @formatter:on
 467     });
 468 
 469     private ArrayDataPointerConstant mask35 = pointerConstant(16, new int[]{
 470             // @formatter:off
 471             0xfffc0000, 0xffffffff, 0x00000000, 0x00000000
 472             // @formatter:on
 473     });
 474 
 475     private ArrayDataPointerConstant q11 = pointerConstant(16, new int[]{
 476             // @formatter:off
 477             0xb8fe4d77, 0x3f82609a
 478             // @formatter:on
 479     });
 480 
 481     private ArrayDataPointerConstant q9 = pointerConstant(16, new int[]{
 482             // @formatter:off
 483             0xbf847a43, 0x3f9664a0
 484             // @formatter:on
 485     });
 486 
 487     private ArrayDataPointerConstant q7 = pointerConstant(16, new int[]{
 488             // @formatter:off
 489             0x52c4c8ab, 0x3faba1ba
 490             // @formatter:on
 491     });
 492 
 493     private ArrayDataPointerConstant q5 = pointerConstant(16, new int[]{
 494             // @formatter:off
 495             0x11092746, 0x3fc11111
 496             // @formatter:on
 497     });
 498 
 499     private ArrayDataPointerConstant q3 = pointerConstant(16, new int[]{
 500             // @formatter:off
 501             0x55555612, 0x3fd55555
 502             // @formatter:on
 503     });
 504 
 505     private ArrayDataPointerConstant piInvTable = pointerConstant(16, new int[]{
 506             // @formatter:off
 507             0x00000000, 0x00000000, 0xa2f9836e, 0x4e441529, 0xfc2757d1,
 508             0xf534ddc0, 0xdb629599, 0x3c439041, 0xfe5163ab, 0xdebbc561,
 509             0xb7246e3a, 0x424dd2e0, 0x06492eea, 0x09d1921c, 0xfe1deb1c,
 510             0xb129a73e, 0xe88235f5, 0x2ebb4484, 0xe99c7026, 0xb45f7e41,
 511             0x3991d639, 0x835339f4, 0x9c845f8b, 0xbdf9283b, 0x1ff897ff,
 512             0xde05980f, 0xef2f118b, 0x5a0a6d1f, 0x6d367ecf, 0x27cb09b7,
 513             0x4f463f66, 0x9e5fea2d, 0x7527bac7, 0xebe5f17b, 0x3d0739f7,
 514             0x8a5292ea, 0x6bfb5fb1, 0x1f8d5d08, 0x56033046, 0xfc7b6bab,
 515             0xf0cfbc21
 516             // @formatter:on
 517     });
 518 
 519     private ArrayDataPointerConstant pi4 = pointerConstant(8, new int[]{
 520             // @formatter:off
 521             0x00000000, 0x3fe921fb,
 522     });
 523     private ArrayDataPointerConstant pi48 = pointerConstant(8, new int[]{
 524             0x4611a626, 0x3e85110b
 525             // @formatter:on
 526     });
 527 
 528     private ArrayDataPointerConstant qq2 = pointerConstant(8, new int[]{
 529             // @formatter:off
 530             0x676733af, 0x3d32e7b9
 531             // @formatter:on
 532     });
 533 
 534     private ArrayDataPointerConstant one = pointerConstant(8, new int[]{
 535             // @formatter:off
 536             0x00000000, 0x3ff00000
 537             // @formatter:on
 538     });
 539 
 540     private ArrayDataPointerConstant twoPow55 = pointerConstant(8, new int[]{
 541             // @formatter:off
 542             0x00000000, 0x43600000
 543             // @formatter:on
 544     });
 545 
 546     private ArrayDataPointerConstant twoPowM55 = pointerConstant(4, new int[]{
 547             // @formatter:off
 548             0x00000000, 0x3c800000
 549             // @formatter:on
 550     });
 551 
 552     private ArrayDataPointerConstant negZero = pointerConstant(4, new int[]{
 553             // @formatter:off
 554             0x00000000, 0x80000000
 555             // @formatter:on
 556     });
 557 
 558     @Override
 559     public void emitCode(CompilationResultBuilder crb, AMD64MacroAssembler masm) {
 560         Label block0 = new Label();
 561         Label block1 = new Label();
 562         Label block2 = new Label();
 563         Label block3 = new Label();
 564         Label block4 = new Label();
 565         Label block5 = new Label();
 566         Label block6 = new Label();
 567         Label block7 = new Label();
 568         Label block8 = new Label();
 569         Label block9 = new Label();
 570         Label block10 = new Label();
 571         Label block11 = new Label();
 572         Label block12 = new Label();
 573         Label block13 = new Label();
 574         Label block14 = new Label();
 575 
 576         masm.push(rbx);
 577         masm.subq(rsp, 16);
 578         masm.movsd(new AMD64Address(rsp, 8), xmm0);
 579 
 580         masm.pextrw(rax, xmm0, 3);
 581         masm.andl(rax, 32767);
 582         masm.subl(rax, 16314);
<a name="3" id="anc3"></a><span class="line-modified"> 583         masm.cmplAndJcc(rax, 270, ConditionFlag.Above, block0, false);</span>

 584         masm.movdqu(xmm5, recordExternalAddress(crb, onehalf));        // 0x00000000, 0x3fe00000,
 585                                                                        // 0x00000000, 0x3fe00000
 586         masm.movdqu(xmm6, recordExternalAddress(crb, mul16));          // 0x00000000, 0x40300000,
 587                                                                        // 0x00000000, 0x3ff00000
 588         masm.unpcklpd(xmm0, xmm0);
 589         masm.movdqu(xmm4, recordExternalAddress(crb, signMask));       // 0x00000000, 0x80000000,
 590                                                                        // 0x00000000, 0x80000000
 591         masm.andpd(xmm4, xmm0);
 592         masm.movdqu(xmm1, recordExternalAddress(crb, pi32Inv));        // 0x6dc9c883, 0x3fe45f30,
 593                                                                        // 0x6dc9c883, 0x40245f30
 594         masm.mulpd(xmm1, xmm0);
 595         masm.por(xmm5, xmm4);
 596         masm.addpd(xmm1, xmm5);
 597         masm.movdqu(xmm7, xmm1);
 598         masm.unpckhpd(xmm7, xmm7);
 599         masm.cvttsd2sil(rdx, xmm7);
 600         masm.cvttpd2dq(xmm1, xmm1);
 601         masm.cvtdq2pd(xmm1, xmm1);
 602         masm.mulpd(xmm1, xmm6);
 603         masm.movdqu(xmm3, recordExternalAddress(crb, p1));             // 0x54444000, 0x3fb921fb,
 604                                                                        // 0x54440000, 0x3fb921fb
 605         masm.movq(xmm5, recordExternalAddress(crb, qq2));              // 0x676733af, 0x3d32e7b9
 606         masm.addq(rdx, 469248);
 607         masm.movdqu(xmm4, recordExternalAddress(crb, p2));             // 0x67674000, 0xbd32e7b9,
 608                                                                        // 0x4c4c0000, 0x3d468c23
 609         masm.mulpd(xmm3, xmm1);
 610         masm.andq(rdx, 31);
 611         masm.mulsd(xmm5, xmm1);
 612         masm.movq(rcx, rdx);
 613         masm.mulpd(xmm4, xmm1);
 614         masm.shlq(rcx, 1);
 615         masm.subpd(xmm0, xmm3);
 616         masm.mulpd(xmm1, recordExternalAddress(crb, p3));              // 0x3707344a, 0x3aa8a2e0,
 617                                                                        // 0x03707345, 0x3ae98a2e
 618         masm.addq(rdx, rcx);
 619         masm.shlq(rcx, 2);
 620         masm.addq(rdx, rcx);
 621         masm.addsd(xmm5, xmm0);
 622         masm.movdqu(xmm2, xmm0);
 623         masm.subpd(xmm0, xmm4);
 624         masm.movq(xmm6, recordExternalAddress(crb, one));              // 0x00000000, 0x3ff00000
 625         masm.shlq(rdx, 4);
 626         masm.leaq(rax, recordExternalAddress(crb, ctable));
 627         masm.andpd(xmm5, recordExternalAddress(crb, mask35));          // 0xfffc0000, 0xffffffff,
 628                                                                        // 0x00000000, 0x00000000
 629         masm.movdqu(xmm3, xmm0);
 630         masm.addq(rax, rdx);
 631         masm.subpd(xmm2, xmm0);
 632         masm.unpckhpd(xmm0, xmm0);
 633         masm.divsd(xmm6, xmm5);
 634         masm.subpd(xmm2, xmm4);
 635         masm.movdqu(xmm7, new AMD64Address(rax, 16));
 636         masm.subsd(xmm3, xmm5);
 637         masm.mulpd(xmm7, xmm0);
 638         masm.subpd(xmm2, xmm1);
 639         masm.movdqu(xmm1, new AMD64Address(rax, 48));
 640         masm.mulpd(xmm1, xmm0);
 641         masm.movdqu(xmm4, new AMD64Address(rax, 96));
 642         masm.mulpd(xmm4, xmm0);
 643         masm.addsd(xmm2, xmm3);
 644         masm.movdqu(xmm3, xmm0);
 645         masm.mulpd(xmm0, xmm0);
 646         masm.addpd(xmm7, new AMD64Address(rax, 0));
 647         masm.addpd(xmm1, new AMD64Address(rax, 32));
 648         masm.mulpd(xmm1, xmm0);
 649         masm.addpd(xmm4, new AMD64Address(rax, 80));
 650         masm.addpd(xmm7, xmm1);
 651         masm.movdqu(xmm1, new AMD64Address(rax, 112));
 652         masm.mulpd(xmm1, xmm0);
 653         masm.mulpd(xmm0, xmm0);
 654         masm.addpd(xmm4, xmm1);
 655         masm.movdqu(xmm1, new AMD64Address(rax, 64));
 656         masm.mulpd(xmm1, xmm0);
 657         masm.addpd(xmm7, xmm1);
 658         masm.movdqu(xmm1, xmm3);
 659         masm.mulpd(xmm3, xmm0);
 660         masm.mulsd(xmm0, xmm0);
 661         masm.mulpd(xmm1, new AMD64Address(rax, 144));
 662         masm.mulpd(xmm4, xmm3);
 663         masm.movdqu(xmm3, xmm1);
 664         masm.addpd(xmm7, xmm4);
 665         masm.movdqu(xmm4, xmm1);
 666         masm.mulsd(xmm0, xmm7);
 667         masm.unpckhpd(xmm7, xmm7);
 668         masm.addsd(xmm0, xmm7);
 669         masm.unpckhpd(xmm1, xmm1);
 670         masm.addsd(xmm3, xmm1);
 671         masm.subsd(xmm4, xmm3);
 672         masm.addsd(xmm1, xmm4);
 673         masm.movdqu(xmm4, xmm2);
 674         masm.movq(xmm7, new AMD64Address(rax, 144));
 675         masm.unpckhpd(xmm2, xmm2);
 676         masm.addsd(xmm7, new AMD64Address(rax, 152));
 677         masm.mulsd(xmm7, xmm2);
 678         masm.addsd(xmm7, new AMD64Address(rax, 136));
 679         masm.addsd(xmm7, xmm1);
 680         masm.addsd(xmm0, xmm7);
 681         masm.movq(xmm7, recordExternalAddress(crb, one));              // 0x00000000, 0x3ff00000
 682         masm.mulsd(xmm4, xmm6);
 683         masm.movq(xmm2, new AMD64Address(rax, 168));
 684         masm.andpd(xmm2, xmm6);
 685         masm.mulsd(xmm5, xmm2);
 686         masm.mulsd(xmm6, new AMD64Address(rax, 160));
 687         masm.subsd(xmm7, xmm5);
 688         masm.subsd(xmm2, new AMD64Address(rax, 128));
 689         masm.subsd(xmm7, xmm4);
 690         masm.mulsd(xmm7, xmm6);
 691         masm.movdqu(xmm4, xmm3);
 692         masm.subsd(xmm3, xmm2);
 693         masm.addsd(xmm2, xmm3);
 694         masm.subsd(xmm4, xmm2);
 695         masm.addsd(xmm0, xmm4);
 696         masm.subsd(xmm0, xmm7);
 697         masm.addsd(xmm0, xmm3);
 698         masm.jmp(block14);
 699 
 700         masm.bind(block0);
 701         masm.jcc(AMD64Assembler.ConditionFlag.Greater, block1);
 702         masm.pextrw(rax, xmm0, 3);
 703         masm.movl(rdx, rax);
<a name="4" id="anc4"></a><span class="line-modified"> 704         masm.andlAndJcc(rax, 32752, ConditionFlag.Equal, block2, false);</span>

 705         masm.andl(rdx, 32767);
<a name="5" id="anc5"></a><span class="line-modified"> 706         masm.cmplAndJcc(rdx, 15904, ConditionFlag.Below, block3, false);</span>

 707         masm.movdqu(xmm2, xmm0);
 708         masm.movdqu(xmm3, xmm0);
 709         masm.movq(xmm1, recordExternalAddress(crb, q11));              // 0xb8fe4d77, 0x3f82609a
 710         masm.mulsd(xmm2, xmm0);
 711         masm.mulsd(xmm3, xmm2);
 712         masm.mulsd(xmm1, xmm2);
 713         masm.addsd(xmm1, recordExternalAddress(crb, q9));              // 0xbf847a43, 0x3f9664a0
 714         masm.mulsd(xmm1, xmm2);
 715         masm.addsd(xmm1, recordExternalAddress(crb, q7));              // 0x52c4c8ab, 0x3faba1ba
 716         masm.mulsd(xmm1, xmm2);
 717         masm.addsd(xmm1, recordExternalAddress(crb, q5));              // 0x11092746, 0x3fc11111
 718         masm.mulsd(xmm1, xmm2);
 719         masm.addsd(xmm1, recordExternalAddress(crb, q3));              // 0x55555612, 0x3fd55555
 720         masm.mulsd(xmm1, xmm3);
 721         masm.addsd(xmm0, xmm1);
 722         masm.jmp(block14);
 723 
 724         masm.bind(block3);
 725         masm.movq(xmm3, recordExternalAddress(crb, twoPow55));         // 0x00000000, 0x43600000
 726         masm.mulsd(xmm3, xmm0);
 727         masm.addsd(xmm0, xmm3);
 728         masm.mulsd(xmm0, recordExternalAddress(crb, twoPowM55));       // 0x00000000, 0x3c800000
 729         masm.jmp(block14);
 730 
 731         masm.bind(block2);
 732         masm.movdqu(xmm1, xmm0);
 733         masm.mulsd(xmm1, xmm1);
 734         masm.jmp(block14);
 735 
 736         masm.bind(block1);
 737         masm.pextrw(rax, xmm0, 3);
 738         masm.andl(rax, 32752);
<a name="6" id="anc6"></a><span class="line-modified"> 739         masm.cmplAndJcc(rax, 32752, ConditionFlag.Equal, block4, false);</span>

 740         masm.pextrw(rcx, xmm0, 3);
 741         masm.andl(rcx, 32752);
 742         masm.subl(rcx, 16224);
 743         masm.shrl(rcx, 7);
 744         masm.andl(rcx, 65532);
 745         masm.leaq(r11, recordExternalAddress(crb, piInvTable));
 746         masm.addq(rcx, r11);
 747         masm.movdq(rax, xmm0);
 748         masm.movl(r10, new AMD64Address(rcx, 20));
 749         masm.movl(r8, new AMD64Address(rcx, 24));
 750         masm.movl(rdx, rax);
 751         masm.shrq(rax, 21);
 752         masm.orl(rax, Integer.MIN_VALUE);
 753         masm.shrl(rax, 11);
 754         masm.movl(r9, r10);
 755         masm.imulq(r10, rdx);
 756         masm.imulq(r9, rax);
 757         masm.imulq(r8, rax);
 758         masm.movl(rsi, new AMD64Address(rcx, 16));
 759         masm.movl(rdi, new AMD64Address(rcx, 12));
 760         masm.movl(r11, r10);
 761         masm.shrq(r10, 32);
 762         masm.addq(r9, r10);
 763         masm.addq(r11, r8);
 764         masm.movl(r8, r11);
 765         masm.shrq(r11, 32);
 766         masm.addq(r9, r11);
 767         masm.movl(r10, rsi);
 768         masm.imulq(rsi, rdx);
 769         masm.imulq(r10, rax);
 770         masm.movl(r11, rdi);
 771         masm.imulq(rdi, rdx);
 772         masm.movl(rbx, rsi);
 773         masm.shrq(rsi, 32);
 774         masm.addq(r9, rbx);
 775         masm.movl(rbx, r9);
 776         masm.shrq(r9, 32);
 777         masm.addq(r10, rsi);
 778         masm.addq(r10, r9);
 779         masm.shlq(rbx, 32);
 780         masm.orq(r8, rbx);
 781         masm.imulq(r11, rax);
 782         masm.movl(r9, new AMD64Address(rcx, 8));
 783         masm.movl(rsi, new AMD64Address(rcx, 4));
 784         masm.movl(rbx, rdi);
 785         masm.shrq(rdi, 32);
 786         masm.addq(r10, rbx);
 787         masm.movl(rbx, r10);
 788         masm.shrq(r10, 32);
 789         masm.addq(r11, rdi);
 790         masm.addq(r11, r10);
 791         masm.movq(rdi, r9);
 792         masm.imulq(r9, rdx);
 793         masm.imulq(rdi, rax);
 794         masm.movl(r10, r9);
 795         masm.shrq(r9, 32);
 796         masm.addq(r11, r10);
 797         masm.movl(r10, r11);
 798         masm.shrq(r11, 32);
 799         masm.addq(rdi, r9);
 800         masm.addq(rdi, r11);
 801         masm.movq(r9, rsi);
 802         masm.imulq(rsi, rdx);
 803         masm.imulq(r9, rax);
 804         masm.shlq(r10, 32);
 805         masm.orq(r10, rbx);
 806         masm.movl(rax, new AMD64Address(rcx, 0));
 807         masm.movl(r11, rsi);
 808         masm.shrq(rsi, 32);
 809         masm.addq(rdi, r11);
 810         masm.movl(r11, rdi);
 811         masm.shrq(rdi, 32);
 812         masm.addq(r9, rsi);
 813         masm.addq(r9, rdi);
 814         masm.imulq(rdx, rax);
 815         masm.pextrw(rbx, xmm0, 3);
 816         masm.leaq(rdi, recordExternalAddress(crb, piInvTable));
 817         masm.subq(rcx, rdi);
 818         masm.addl(rcx, rcx);
 819         masm.addl(rcx, rcx);
 820         masm.addl(rcx, rcx);
 821         masm.addl(rcx, 19);
 822         masm.movl(rsi, 32768);
 823         masm.andl(rsi, rbx);
 824         masm.shrl(rbx, 4);
 825         masm.andl(rbx, 2047);
 826         masm.subl(rbx, 1023);
 827         masm.subl(rcx, rbx);
 828         masm.addq(r9, rdx);
 829         masm.movl(rdx, rcx);
 830         masm.addl(rdx, 32);
<a name="7" id="anc7"></a><span class="line-modified"> 831         masm.cmplAndJcc(rcx, 0, ConditionFlag.Less, block5, false);</span>

 832         masm.negl(rcx);
 833         masm.addl(rcx, 29);
 834         masm.shll(r9);
 835         masm.movl(rdi, r9);
 836         masm.andl(r9, 1073741823);
<a name="8" id="anc8"></a><span class="line-modified"> 837         masm.testlAndJcc(r9, 536870912, ConditionFlag.NotEqual, block6, false);</span>

 838         masm.shrl(r9);
 839         masm.movl(rbx, 0);
 840         masm.shlq(r9, 32);
 841         masm.orq(r9, r11);
 842 
 843         masm.bind(block7);
 844 
 845         masm.bind(block8);
<a name="9" id="anc9"></a><span class="line-modified"> 846         masm.cmpqAndJcc(r9, 0, ConditionFlag.Equal, block9, false);</span>

 847 
 848         masm.bind(block10);
 849         masm.bsrq(r11, r9);
 850         masm.movl(rcx, 29);
<a name="10" id="anc10"></a><span class="line-modified"> 851         masm.sublAndJcc(rcx, r11, ConditionFlag.LessEqual, block11, false);</span>

 852         masm.shlq(r9);
 853         masm.movq(rax, r10);
 854         masm.shlq(r10);
 855         masm.addl(rdx, rcx);
 856         masm.negl(rcx);
 857         masm.addl(rcx, 64);
 858         masm.shrq(rax);
 859         masm.shrq(r8);
 860         masm.orq(r9, rax);
 861         masm.orq(r10, r8);
 862 
 863         masm.bind(block12);
 864         masm.cvtsi2sdq(xmm0, r9);
 865         masm.shrq(r10, 1);
 866         masm.cvtsi2sdq(xmm3, r10);
 867         masm.xorpd(xmm4, xmm4);
 868         masm.shll(rdx, 4);
 869         masm.negl(rdx);
 870         masm.addl(rdx, 16368);
 871         masm.orl(rdx, rsi);
 872         masm.xorl(rdx, rbx);
 873         masm.pinsrw(xmm4, rdx, 3);
 874         masm.movq(xmm2, recordExternalAddress(crb, pi4));              // 0x00000000, 0x3fe921fb,
 875                                                                        // 0x4611a626, 0x3e85110b
 876         masm.movq(xmm7, recordExternalAddress(crb, pi48));             // 0x3fe921fb, 0x4611a626,
 877                                                                        // 0x3e85110b
 878         masm.xorpd(xmm5, xmm5);
 879         masm.subl(rdx, 1008);
 880         masm.pinsrw(xmm5, rdx, 3);
 881         masm.mulsd(xmm0, xmm4);
 882         masm.shll(rsi, 16);
 883         masm.sarl(rsi, 31);
 884         masm.mulsd(xmm3, xmm5);
 885         masm.movdqu(xmm1, xmm0);
 886         masm.mulsd(xmm0, xmm2);
 887         masm.shrl(rdi, 30);
 888         masm.addsd(xmm1, xmm3);
 889         masm.mulsd(xmm3, xmm2);
 890         masm.addl(rdi, rsi);
 891         masm.xorl(rdi, rsi);
 892         masm.mulsd(xmm7, xmm1);
 893         masm.movl(rax, rdi);
 894         masm.addsd(xmm7, xmm3);
 895         masm.movdqu(xmm2, xmm0);
 896         masm.addsd(xmm0, xmm7);
 897         masm.subsd(xmm2, xmm0);
 898         masm.addsd(xmm7, xmm2);
 899         masm.movdqu(xmm1, recordExternalAddress(crb, pi32Inv));        // 0x6dc9c883, 0x3fe45f30,
 900                                                                        // 0x6dc9c883, 0x40245f30
 901         if (masm.supports(AMD64.CPUFeature.SSE3)) {
 902             masm.movddup(xmm0, xmm0);
 903         } else {
 904             masm.movlhps(xmm0, xmm0);
 905         }
 906         masm.movdqu(xmm4, recordExternalAddress(crb, signMask));       // 0x00000000, 0x80000000,
 907                                                                        // 0x00000000, 0x80000000
 908         masm.andpd(xmm4, xmm0);
 909         masm.mulpd(xmm1, xmm0);
 910         if (masm.supports(AMD64.CPUFeature.SSE3)) {
 911             masm.movddup(xmm7, xmm7);
 912         } else {
 913             masm.movlhps(xmm7, xmm7);
 914         }
 915         masm.movdqu(xmm5, recordExternalAddress(crb, onehalf));        // 0x00000000, 0x3fe00000,
 916                                                                        // 0x00000000, 0x3fe00000
 917         masm.movdqu(xmm6, recordExternalAddress(crb, mul16));          // 0x00000000, 0x40300000,
 918                                                                        // 0x00000000, 0x3ff00000
 919         masm.por(xmm5, xmm4);
 920         masm.addpd(xmm1, xmm5);
 921         masm.movdqu(xmm5, xmm1);
 922         masm.unpckhpd(xmm5, xmm5);
 923         masm.cvttsd2sil(rdx, xmm5);
 924         masm.cvttpd2dq(xmm1, xmm1);
 925         masm.cvtdq2pd(xmm1, xmm1);
 926         masm.mulpd(xmm1, xmm6);
 927         masm.movdqu(xmm3, recordExternalAddress(crb, p1));             // 0x54444000, 0x3fb921fb,
 928                                                                        // 0x54440000, 0x3fb921fb
 929         masm.movq(xmm5, recordExternalAddress(crb, qq2));              // 0x676733af, 0x3d32e7b9
 930         masm.shll(rax, 4);
 931         masm.addl(rdx, 469248);
 932         masm.movdqu(xmm4, recordExternalAddress(crb, p2));             // 0x67674000, 0xbd32e7b9,
 933                                                                        // 0x4c4c0000, 0x3d468c23
 934         masm.mulpd(xmm3, xmm1);
 935         masm.addl(rdx, rax);
 936         masm.andl(rdx, 31);
 937         masm.mulsd(xmm5, xmm1);
 938         masm.movl(rcx, rdx);
 939         masm.mulpd(xmm4, xmm1);
 940         masm.shll(rcx, 1);
 941         masm.subpd(xmm0, xmm3);
 942         masm.mulpd(xmm1, recordExternalAddress(crb, p3));              // 0x3707344a, 0x3aa8a2e0,
 943                                                                        // 0x03707345, 0x3ae98a2e
 944         masm.addl(rdx, rcx);
 945         masm.shll(rcx, 2);
 946         masm.addl(rdx, rcx);
 947         masm.addsd(xmm5, xmm0);
 948         masm.movdqu(xmm2, xmm0);
 949         masm.subpd(xmm0, xmm4);
 950         masm.movq(xmm6, recordExternalAddress(crb, one));              // 0x00000000, 0x3ff00000
 951         masm.shll(rdx, 4);
 952         masm.leaq(rax, recordExternalAddress(crb, ctable));
 953         masm.andpd(xmm5, recordExternalAddress(crb, mask35));          // 0xfffc0000, 0xffffffff,
 954                                                                        // 0x00000000, 0x00000000
 955         masm.movdqu(xmm3, xmm0);
 956         masm.addq(rax, rdx);
 957         masm.subpd(xmm2, xmm0);
 958         masm.unpckhpd(xmm0, xmm0);
 959         masm.divsd(xmm6, xmm5);
 960         masm.subpd(xmm2, xmm4);
 961         masm.subsd(xmm3, xmm5);
 962         masm.subpd(xmm2, xmm1);
 963         masm.movdqu(xmm1, new AMD64Address(rax, 48));
 964         masm.addpd(xmm2, xmm7);
 965         masm.movdqu(xmm7, new AMD64Address(rax, 16));
 966         masm.mulpd(xmm7, xmm0);
 967         masm.movdqu(xmm4, new AMD64Address(rax, 96));
 968         masm.mulpd(xmm1, xmm0);
 969         masm.mulpd(xmm4, xmm0);
 970         masm.addsd(xmm2, xmm3);
 971         masm.movdqu(xmm3, xmm0);
 972         masm.mulpd(xmm0, xmm0);
 973         masm.addpd(xmm7, new AMD64Address(rax, 0));
 974         masm.addpd(xmm1, new AMD64Address(rax, 32));
 975         masm.mulpd(xmm1, xmm0);
 976         masm.addpd(xmm4, new AMD64Address(rax, 80));
 977         masm.addpd(xmm7, xmm1);
 978         masm.movdqu(xmm1, new AMD64Address(rax, 112));
 979         masm.mulpd(xmm1, xmm0);
 980         masm.mulpd(xmm0, xmm0);
 981         masm.addpd(xmm4, xmm1);
 982         masm.movdqu(xmm1, new AMD64Address(rax, 64));
 983         masm.mulpd(xmm1, xmm0);
 984         masm.addpd(xmm7, xmm1);
 985         masm.movdqu(xmm1, xmm3);
 986         masm.mulpd(xmm3, xmm0);
 987         masm.mulsd(xmm0, xmm0);
 988         masm.mulpd(xmm1, new AMD64Address(rax, 144));
 989         masm.mulpd(xmm4, xmm3);
 990         masm.movdqu(xmm3, xmm1);
 991         masm.addpd(xmm7, xmm4);
 992         masm.movdqu(xmm4, xmm1);
 993         masm.mulsd(xmm0, xmm7);
 994         masm.unpckhpd(xmm7, xmm7);
 995         masm.addsd(xmm0, xmm7);
 996         masm.unpckhpd(xmm1, xmm1);
 997         masm.addsd(xmm3, xmm1);
 998         masm.subsd(xmm4, xmm3);
 999         masm.addsd(xmm1, xmm4);
1000         masm.movdqu(xmm4, xmm2);
1001         masm.movq(xmm7, new AMD64Address(rax, 144));
1002         masm.unpckhpd(xmm2, xmm2);
1003         masm.addsd(xmm7, new AMD64Address(rax, 152));
1004         masm.mulsd(xmm7, xmm2);
1005         masm.addsd(xmm7, new AMD64Address(rax, 136));
1006         masm.addsd(xmm7, xmm1);
1007         masm.addsd(xmm0, xmm7);
1008         masm.movq(xmm7, recordExternalAddress(crb, one));              // 0x00000000, 0x3ff00000
1009         masm.mulsd(xmm4, xmm6);
1010         masm.movq(xmm2, new AMD64Address(rax, 168));
1011         masm.andpd(xmm2, xmm6);
1012         masm.mulsd(xmm5, xmm2);
1013         masm.mulsd(xmm6, new AMD64Address(rax, 160));
1014         masm.subsd(xmm7, xmm5);
1015         masm.subsd(xmm2, new AMD64Address(rax, 128));
1016         masm.subsd(xmm7, xmm4);
1017         masm.mulsd(xmm7, xmm6);
1018         masm.movdqu(xmm4, xmm3);
1019         masm.subsd(xmm3, xmm2);
1020         masm.addsd(xmm2, xmm3);
1021         masm.subsd(xmm4, xmm2);
1022         masm.addsd(xmm0, xmm4);
1023         masm.subsd(xmm0, xmm7);
1024         masm.addsd(xmm0, xmm3);
1025         masm.jmp(block14);
1026 
1027         masm.bind(block9);
1028         masm.addl(rdx, 64);
1029         masm.movq(r9, r10);
1030         masm.movq(r10, r8);
1031         masm.movl(r8, 0);
<a name="11" id="anc11"></a><span class="line-modified">1032         masm.cmpqAndJcc(r9, 0, ConditionFlag.NotEqual, block10, false);</span>

1033         masm.addl(rdx, 64);
1034         masm.movq(r9, r10);
1035         masm.movq(r10, r8);
<a name="12" id="anc12"></a><span class="line-modified">1036         masm.cmpqAndJcc(r9, 0, ConditionFlag.NotEqual, block10, false);</span>

1037         masm.jmp(block12);
1038 
1039         masm.bind(block11);
1040         masm.jcc(AMD64Assembler.ConditionFlag.Equal, block12);
1041         masm.negl(rcx);
1042         masm.shrq(r10);
1043         masm.movq(rax, r9);
1044         masm.shrq(r9);
1045         masm.subl(rdx, rcx);
1046         masm.negl(rcx);
1047         masm.addl(rcx, 64);
1048         masm.shlq(rax);
1049         masm.orq(r10, rax);
1050         masm.jmp(block12);
1051 
1052         masm.bind(block5);
1053         masm.notl(rcx);
1054         masm.shlq(r9, 32);
1055         masm.orq(r9, r11);
1056         masm.shlq(r9);
1057         masm.movq(rdi, r9);
<a name="13" id="anc13"></a><span class="line-modified">1058         masm.testlAndJcc(r9, Integer.MIN_VALUE, ConditionFlag.NotEqual, block13, false);</span>

1059         masm.shrl(r9);
1060         masm.movl(rbx, 0);
1061         masm.shrq(rdi, 2);
1062         masm.jmp(block8);
1063 
1064         masm.bind(block6);
1065         masm.shrl(r9);
1066         masm.movl(rbx, 1073741824);
1067         masm.shrl(rbx);
1068         masm.shlq(r9, 32);
1069         masm.orq(r9, r11);
1070         masm.shlq(rbx, 32);
1071         masm.addl(rdi, 1073741824);
1072         masm.movl(rcx, 0);
1073         masm.movl(r11, 0);
1074         masm.subq(rcx, r8);
1075         masm.sbbq(r11, r10);
1076         masm.sbbq(rbx, r9);
1077         masm.movq(r8, rcx);
1078         masm.movq(r10, r11);
1079         masm.movq(r9, rbx);
1080         masm.movl(rbx, 32768);
1081         masm.jmp(block7);
1082 
1083         masm.bind(block13);
1084         masm.shrl(r9);
1085         masm.movq(rbx, 0x100000000L);
1086         masm.shrq(rbx);
1087         masm.movl(rcx, 0);
1088         masm.movl(r11, 0);
1089         masm.subq(rcx, r8);
1090         masm.sbbq(r11, r10);
1091         masm.sbbq(rbx, r9);
1092         masm.movq(r8, rcx);
1093         masm.movq(r10, r11);
1094         masm.movq(r9, rbx);
1095         masm.movl(rbx, 32768);
1096         masm.shrq(rdi, 2);
1097         masm.addl(rdi, 1073741824);
1098         masm.jmp(block8);
1099 
1100         masm.bind(block4);
1101         masm.movq(xmm0, new AMD64Address(rsp, 8));
1102         masm.mulsd(xmm0, recordExternalAddress(crb, negZero));         // 0x00000000, 0x80000000
1103         masm.movq(new AMD64Address(rsp, 0), xmm0);
1104 
1105         masm.bind(block14);
1106         masm.addq(rsp, 16);
1107         masm.pop(rbx);
1108     }
1109 }
<a name="14" id="anc14"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="14" type="hidden" />
</body>
</html>