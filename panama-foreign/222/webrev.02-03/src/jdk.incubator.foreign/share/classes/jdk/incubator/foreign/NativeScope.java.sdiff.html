<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/NativeScope.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/NativeScope.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
302      * Allocate a block of memory in this native scope with given layout. The address returned by this method is
303      * associated with a segment which cannot be closed. Moreover, the returned address must conform to the layout alignment constraints.
304      * @param layout the layout of the block of memory to be allocated.
305      * @return an address which points to the newly allocated memory block.
306      * @throws OutOfMemoryError if there is not enough space left in this native scope, that is, if
307      * {@code limit() - size() &lt; layout.byteSize()}.
308      */
309     public MemoryAddress allocate(MemoryLayout layout) {
310         return allocate(layout.byteSize(), layout.byteAlignment());
311     }
312 
313     /**
314      * Allocate a block of memory corresponding to an array with given element layout and size.
315      * The address returned by this method is associated with a segment which cannot be closed.
316      * Moreover, the returned address must conform to the layout alignment constraints. This is equivalent to the
317      * following code:
318      * &lt;pre&gt;{@code
319     allocate(MemoryLayout.ofSequence(size, elementLayout));
320      * }&lt;/pre&gt;
321      * @param elementLayout the array element layout.
<span class="line-modified">322      * @param size the array size.</span>
323      * @return an address which points to the newly allocated memory block.
324      * @throws OutOfMemoryError if there is not enough space left in this native scope, that is, if
325      * {@code limit() - size() &lt; (elementLayout.byteSize() * size)}.
<span class="line-removed">326      * @throws IllegalArgumentException if {@code elementLayout.byteSize()} does not conform to the size of a double value.</span>
327      */
328     public MemoryAddress allocateArray(MemoryLayout elementLayout, long size) {
329         return allocate(MemoryLayout.ofSequence(size, elementLayout));
330     }
331 
332     /**
333      * Allocate a block of memory in this native scope with given size. The address returned by this method is
334      * associated with a segment which cannot be closed. Moreover, the returned address must be aligned to {@code size}.
335      * @param bytesSize the size (in bytes) of the block of memory to be allocated.
336      * @return an address which points to the newly allocated memory block.
337      * @throws OutOfMemoryError if there is not enough space left in this native scope, that is, if
338      * {@code limit() - size() &lt; bytesSize}.
339      */
340     public MemoryAddress allocate(long bytesSize) {
341         return allocate(bytesSize, bytesSize);
342     }
343 
344     /**
345      * Allocate a block of memory in this native scope with given size and alignment constraint.
346      * The address returned by this method is associated with a segment which cannot be closed. Moreover,
</pre>
</td>
<td>
<hr />
<pre>
302      * Allocate a block of memory in this native scope with given layout. The address returned by this method is
303      * associated with a segment which cannot be closed. Moreover, the returned address must conform to the layout alignment constraints.
304      * @param layout the layout of the block of memory to be allocated.
305      * @return an address which points to the newly allocated memory block.
306      * @throws OutOfMemoryError if there is not enough space left in this native scope, that is, if
307      * {@code limit() - size() &lt; layout.byteSize()}.
308      */
309     public MemoryAddress allocate(MemoryLayout layout) {
310         return allocate(layout.byteSize(), layout.byteAlignment());
311     }
312 
313     /**
314      * Allocate a block of memory corresponding to an array with given element layout and size.
315      * The address returned by this method is associated with a segment which cannot be closed.
316      * Moreover, the returned address must conform to the layout alignment constraints. This is equivalent to the
317      * following code:
318      * &lt;pre&gt;{@code
319     allocate(MemoryLayout.ofSequence(size, elementLayout));
320      * }&lt;/pre&gt;
321      * @param elementLayout the array element layout.
<span class="line-modified">322      * @param size the array element count.</span>
323      * @return an address which points to the newly allocated memory block.
324      * @throws OutOfMemoryError if there is not enough space left in this native scope, that is, if
325      * {@code limit() - size() &lt; (elementLayout.byteSize() * size)}.

326      */
327     public MemoryAddress allocateArray(MemoryLayout elementLayout, long size) {
328         return allocate(MemoryLayout.ofSequence(size, elementLayout));
329     }
330 
331     /**
332      * Allocate a block of memory in this native scope with given size. The address returned by this method is
333      * associated with a segment which cannot be closed. Moreover, the returned address must be aligned to {@code size}.
334      * @param bytesSize the size (in bytes) of the block of memory to be allocated.
335      * @return an address which points to the newly allocated memory block.
336      * @throws OutOfMemoryError if there is not enough space left in this native scope, that is, if
337      * {@code limit() - size() &lt; bytesSize}.
338      */
339     public MemoryAddress allocate(long bytesSize) {
340         return allocate(bytesSize, bytesSize);
341     }
342 
343     /**
344      * Allocate a block of memory in this native scope with given size and alignment constraint.
345      * The address returned by this method is associated with a segment which cannot be closed. Moreover,
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>