<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.foreign/share/classes/jdk/internal/foreign/abi/SharedUtils.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../Utils.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="aarch64/CallArranger.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.foreign/share/classes/jdk/internal/foreign/abi/SharedUtils.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
311         return handle;
312     }
313 
314     public static MethodHandle boxVaLists(MethodHandle handle, MethodHandle boxer) {
315         MethodType type = handle.type();
316         for (int i = 0; i &lt; type.parameterCount(); i++) {
317             if (type.parameterType(i) == VaList.class) {
318                handle = MethodHandles.filterArguments(handle, i, boxer);
319             }
320         }
321         return handle;
322     }
323 
324     static void checkType(Class&lt;?&gt; actualType, Class&lt;?&gt; expectedType) {
325         if (expectedType != actualType) {
326             throw new IllegalArgumentException(
327                     String.format(&quot;Invalid operand type: %s. %s expected&quot;, actualType, expectedType));
328         }
329     }
330 






331     public static class SimpleVaArg {
332         public final Class&lt;?&gt; carrier;
333         public final MemoryLayout layout;
334         public final Object value;
335 
336         public SimpleVaArg(Class&lt;?&gt; carrier, MemoryLayout layout, Object value) {
337             this.carrier = carrier;
338             this.layout = layout;
339             this.value = value;
340         }
341 
342         public VarHandle varHandle() {
343             return carrier == MemoryAddress.class
344                 ? MemoryHandles.asAddressVarHandle(layout.varHandle(primitiveCarrierForSize(layout.byteSize())))
345                 : layout.varHandle(carrier);
346         }
347     }
348 
349     public static class EmptyVaList implements CSupport.VaList {
350 
</pre>
</td>
<td>
<hr />
<pre>
311         return handle;
312     }
313 
314     public static MethodHandle boxVaLists(MethodHandle handle, MethodHandle boxer) {
315         MethodType type = handle.type();
316         for (int i = 0; i &lt; type.parameterCount(); i++) {
317             if (type.parameterType(i) == VaList.class) {
318                handle = MethodHandles.filterArguments(handle, i, boxer);
319             }
320         }
321         return handle;
322     }
323 
324     static void checkType(Class&lt;?&gt; actualType, Class&lt;?&gt; expectedType) {
325         if (expectedType != actualType) {
326             throw new IllegalArgumentException(
327                     String.format(&quot;Invalid operand type: %s. %s expected&quot;, actualType, expectedType));
328         }
329     }
330 
<span class="line-added">331     public static boolean isTrivial(FunctionDescriptor cDesc) {</span>
<span class="line-added">332         return cDesc.attribute(FunctionDescriptor.IS_TRIVIAL)</span>
<span class="line-added">333                 .map(Boolean.class::cast)</span>
<span class="line-added">334                 .orElse(false);</span>
<span class="line-added">335     }</span>
<span class="line-added">336 </span>
337     public static class SimpleVaArg {
338         public final Class&lt;?&gt; carrier;
339         public final MemoryLayout layout;
340         public final Object value;
341 
342         public SimpleVaArg(Class&lt;?&gt; carrier, MemoryLayout layout, Object value) {
343             this.carrier = carrier;
344             this.layout = layout;
345             this.value = value;
346         }
347 
348         public VarHandle varHandle() {
349             return carrier == MemoryAddress.class
350                 ? MemoryHandles.asAddressVarHandle(layout.varHandle(primitiveCarrierForSize(layout.byteSize())))
351                 : layout.varHandle(carrier);
352         }
353     }
354 
355     public static class EmptyVaList implements CSupport.VaList {
356 
</pre>
</td>
</tr>
</table>
<center><a href="../Utils.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="aarch64/CallArranger.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>