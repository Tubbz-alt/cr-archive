<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff doc/panama_jextract.md</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="panama_jextract.html.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="../src/jdk.incubator.jextract/share/classes/jdk/internal/jextract/impl/LayoutUtils.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>doc/panama_jextract.md</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
114             var str = s.baseAddress();
115             PyRun_SimpleStringFlags(str, NULL);
116             Py_Finalize();
117         }
118     }
119 }
120 
121 ```
122 
123 ### Running the Java code that calls Python interpreter
124 
125 ```sh
126 
127 java -Djdk.incubator.foreign.Foreign=permit --add-modules jdk.incubator.foreign \
128     -Djava.library.path=/System/Library/Frameworks/Python.framework/Versions/2.7/lib PythonMain.java
129 
130 ```
131 
132 ## Using readline library from Java code (Mac OS)
133 
<span class="line-modified">134 ### jextract a jar file for readline.h</span>
135 
136 ```sh
137 
138 jextract -l readline -t org.unix \
139   -I /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include \
140    /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/readline/readline.h
141 
142 ```
143 
144 ### Java code that uses readline
145 
146 ```java
147 
148 import jdk.incubator.foreign.Foreign;
149 import org.unix.Cstring;
150 import static org.unix.RuntimeHelper.*;
151 import static org.unix.readline_h.*;
152 
153 public class Readline {
154     public static void main(String[] args) {
</pre>
<hr />
<pre>
160             // print char* as is
161             System.out.println(p);
162             // convert char* ptr from readline as Java String &amp; print it
163             System.out.println(&quot;Hello, &quot; + Cstring.toJavaString(p));
164         }
165     }
166 }
167 
168 ```
169 
170 ### Running the java code that uses readline
171 
172 ```
173 java -Djdk.incubator.foreign.Foreign=permit --add-modules jdk.incubator.foreign \
174     -Djava.library.path=/usr/local/opt/readline/lib/ Readline.java
175 
176 ```
177 
178 ## Using libcurl from Java (Mac OS)
179 
<span class="line-modified">180 ### jextract a jar for curl.h</span>
181 
182 ```sh
183 
184 jextract -t org.unix -lcurl \
185   -I /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/ \
186   -I /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/curl/ \
187   /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/curl/curl.h
188 
189 ```
190 
191 ### Java code that uses libcurl
192 
193 ```java
194 
195 import jdk.incubator.foreign.Foreign;
196 import org.unix.Cstring;
197 import static jdk.incubator.foreign.MemoryAddress.NULL;
198 import static org.unix.RuntimeHelper.*;
199 import static org.unix.curl_h.*;
200 
</pre>
<hr />
<pre>
411 
412         for( i = 0; i &lt; m; i++ ) {
413             for( j = 0; j &lt; n; j++ ) System.out.printf(&quot; %6.2f&quot;, Cdouble.get(mat, i+j*ldm));
414             System.out.printf( &quot;\n&quot; );
415         }
416     }
417 }
418 
419 ```
420 
421 ### Compiling and running the above LAPACK sample
422 
423 ```sh
424 
425 java -Djdk.incubator.foreign.Foreign=permit \
426     --add-modules jdk.incubator.foreign \
427     -Djava.library.path=/usr/local/opt/lapack/lib \
428     TestLapack.java
429 
430 ```




























































</pre>
</td>
<td>
<hr />
<pre>
114             var str = s.baseAddress();
115             PyRun_SimpleStringFlags(str, NULL);
116             Py_Finalize();
117         }
118     }
119 }
120 
121 ```
122 
123 ### Running the Java code that calls Python interpreter
124 
125 ```sh
126 
127 java -Djdk.incubator.foreign.Foreign=permit --add-modules jdk.incubator.foreign \
128     -Djava.library.path=/System/Library/Frameworks/Python.framework/Versions/2.7/lib PythonMain.java
129 
130 ```
131 
132 ## Using readline library from Java code (Mac OS)
133 
<span class="line-modified">134 ### jextract readline.h</span>
135 
136 ```sh
137 
138 jextract -l readline -t org.unix \
139   -I /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include \
140    /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/readline/readline.h
141 
142 ```
143 
144 ### Java code that uses readline
145 
146 ```java
147 
148 import jdk.incubator.foreign.Foreign;
149 import org.unix.Cstring;
150 import static org.unix.RuntimeHelper.*;
151 import static org.unix.readline_h.*;
152 
153 public class Readline {
154     public static void main(String[] args) {
</pre>
<hr />
<pre>
160             // print char* as is
161             System.out.println(p);
162             // convert char* ptr from readline as Java String &amp; print it
163             System.out.println(&quot;Hello, &quot; + Cstring.toJavaString(p));
164         }
165     }
166 }
167 
168 ```
169 
170 ### Running the java code that uses readline
171 
172 ```
173 java -Djdk.incubator.foreign.Foreign=permit --add-modules jdk.incubator.foreign \
174     -Djava.library.path=/usr/local/opt/readline/lib/ Readline.java
175 
176 ```
177 
178 ## Using libcurl from Java (Mac OS)
179 
<span class="line-modified">180 ### jextract curl.h</span>
181 
182 ```sh
183 
184 jextract -t org.unix -lcurl \
185   -I /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/ \
186   -I /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/curl/ \
187   /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/curl/curl.h
188 
189 ```
190 
191 ### Java code that uses libcurl
192 
193 ```java
194 
195 import jdk.incubator.foreign.Foreign;
196 import org.unix.Cstring;
197 import static jdk.incubator.foreign.MemoryAddress.NULL;
198 import static org.unix.RuntimeHelper.*;
199 import static org.unix.curl_h.*;
200 
</pre>
<hr />
<pre>
411 
412         for( i = 0; i &lt; m; i++ ) {
413             for( j = 0; j &lt; n; j++ ) System.out.printf(&quot; %6.2f&quot;, Cdouble.get(mat, i+j*ldm));
414             System.out.printf( &quot;\n&quot; );
415         }
416     }
417 }
418 
419 ```
420 
421 ### Compiling and running the above LAPACK sample
422 
423 ```sh
424 
425 java -Djdk.incubator.foreign.Foreign=permit \
426     --add-modules jdk.incubator.foreign \
427     -Djava.library.path=/usr/local/opt/lapack/lib \
428     TestLapack.java
429 
430 ```
<span class="line-added">431 ## Using libproc library to list processes from Java (Mac OS)</span>
<span class="line-added">432 </span>
<span class="line-added">433 ### jextract libproc.h</span>
<span class="line-added">434 </span>
<span class="line-added">435 ```sh</span>
<span class="line-added">436 </span>
<span class="line-added">437 jextract -t org.unix \</span>
<span class="line-added">438   -I /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include \</span>
<span class="line-added">439   --filter libproc.h \</span>
<span class="line-added">440   /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/libproc.h</span>
<span class="line-added">441 </span>
<span class="line-added">442 ```</span>
<span class="line-added">443 </span>
<span class="line-added">444 ### Java program that uses libproc to list processes</span>
<span class="line-added">445 </span>
<span class="line-added">446 ```java</span>
<span class="line-added">447 </span>
<span class="line-added">448 import jdk.incubator.foreign.NativeAllocationScope;</span>
<span class="line-added">449 import org.unix.*;</span>
<span class="line-added">450 import static jdk.incubator.foreign.MemoryAddress.NULL;</span>
<span class="line-added">451 import static org.unix.libproc_h.*;</span>
<span class="line-added">452 </span>
<span class="line-added">453 public class LibprocMain {</span>
<span class="line-added">454     private static final int NAME_BUF_MAX = 256;</span>
<span class="line-added">455 </span>
<span class="line-added">456     public static void main(String[] args) {</span>
<span class="line-added">457         try (var scope = NativeAllocationScope.unboundedScope()) {</span>
<span class="line-added">458             // get the number of processes</span>
<span class="line-added">459             int numPids = proc_listallpids(NULL, 0);</span>
<span class="line-added">460             // allocate an array</span>
<span class="line-added">461             var pids = Cint.allocateArray(numPids, scope);</span>
<span class="line-added">462             // list all the pids into the native array</span>
<span class="line-added">463             proc_listallpids(pids, numPids);</span>
<span class="line-added">464             // convert native array to java array</span>
<span class="line-added">465             int[] jpids = Cint.toJavaArray(pids.segment());</span>
<span class="line-added">466             // buffer for process name</span>
<span class="line-added">467             var nameBuf = Cchar.allocateArray(NAME_BUF_MAX,scope);</span>
<span class="line-added">468             for (int i = 0; i &lt; jpids.length; i++) {</span>
<span class="line-added">469                 int pid = jpids[i];</span>
<span class="line-added">470                 // get the process name</span>
<span class="line-added">471                 proc_name(pid, nameBuf, NAME_BUF_MAX);</span>
<span class="line-added">472                 String procName = Cstring.toJavaString(nameBuf);</span>
<span class="line-added">473                 // print pid and process name</span>
<span class="line-added">474                 System.out.printf(&quot;%d %s\n&quot;, pid, procName);</span>
<span class="line-added">475             }</span>
<span class="line-added">476         }</span>
<span class="line-added">477     }</span>
<span class="line-added">478 }</span>
<span class="line-added">479 </span>
<span class="line-added">480 ```</span>
<span class="line-added">481 </span>
<span class="line-added">482 ### Compiling and running the libproc sample</span>
<span class="line-added">483 </span>
<span class="line-added">484 ```sh</span>
<span class="line-added">485 </span>
<span class="line-added">486 java -Djdk.incubator.foreign.Foreign=permit \</span>
<span class="line-added">487     --add-modules jdk.incubator.foreign \</span>
<span class="line-added">488     -Djava.library.path=/usr/lib LibprocMain.java</span>
<span class="line-added">489 </span>
<span class="line-added">490 ```</span>
</pre>
</td>
</tr>
</table>
<center><a href="panama_jextract.html.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="../src/jdk.incubator.jextract/share/classes/jdk/internal/jextract/impl/LayoutUtils.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>