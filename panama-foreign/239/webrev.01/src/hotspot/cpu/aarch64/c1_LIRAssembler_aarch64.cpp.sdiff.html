<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/cpu/aarch64/c1_LIRAssembler_aarch64.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="c1_CodeStubs_aarch64.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="gc/shenandoah/c1/shenandoahBarrierSetC1_aarch64.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/cpu/aarch64/c1_LIRAssembler_aarch64.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
1999     FloatRegister reg2 = opr2-&gt;as_double_reg();
2000     __ fcmpd(reg1, reg2);
2001   } else {
2002     ShouldNotReachHere();
2003   }
2004 }
2005 
2006 void LIR_Assembler::comp_fl2i(LIR_Code code, LIR_Opr left, LIR_Opr right, LIR_Opr dst, LIR_Op2* op){
2007   if (code == lir_cmp_fd2i || code == lir_ucmp_fd2i) {
2008     bool is_unordered_less = (code == lir_ucmp_fd2i);
2009     if (left-&gt;is_single_fpu()) {
2010       __ float_cmp(true, is_unordered_less ? -1 : 1, left-&gt;as_float_reg(), right-&gt;as_float_reg(), dst-&gt;as_register());
2011     } else if (left-&gt;is_double_fpu()) {
2012       __ float_cmp(false, is_unordered_less ? -1 : 1, left-&gt;as_double_reg(), right-&gt;as_double_reg(), dst-&gt;as_register());
2013     } else {
2014       ShouldNotReachHere();
2015     }
2016   } else if (code == lir_cmp_l2i) {
2017     Label done;
2018     __ cmp(left-&gt;as_register_lo(), right-&gt;as_register_lo());
<span class="line-modified">2019     __ mov(dst-&gt;as_register(), (u_int64_t)-1L);</span>
2020     __ br(Assembler::LT, done);
2021     __ csinc(dst-&gt;as_register(), zr, zr, Assembler::EQ);
2022     __ bind(done);
2023   } else {
2024     ShouldNotReachHere();
2025   }
2026 }
2027 
2028 
2029 void LIR_Assembler::align_call(LIR_Code code) {  }
2030 
2031 
2032 void LIR_Assembler::call(LIR_OpJavaCall* op, relocInfo::relocType rtype) {
2033   address call = __ trampoline_call(Address(op-&gt;addr(), rtype));
2034   if (call == NULL) {
2035     bailout(&quot;trampoline stub overflow&quot;);
2036     return;
2037   }
2038   add_call_info(code_offset(), op-&gt;info());
2039 }
</pre>
</td>
<td>
<hr />
<pre>
1999     FloatRegister reg2 = opr2-&gt;as_double_reg();
2000     __ fcmpd(reg1, reg2);
2001   } else {
2002     ShouldNotReachHere();
2003   }
2004 }
2005 
2006 void LIR_Assembler::comp_fl2i(LIR_Code code, LIR_Opr left, LIR_Opr right, LIR_Opr dst, LIR_Op2* op){
2007   if (code == lir_cmp_fd2i || code == lir_ucmp_fd2i) {
2008     bool is_unordered_less = (code == lir_ucmp_fd2i);
2009     if (left-&gt;is_single_fpu()) {
2010       __ float_cmp(true, is_unordered_less ? -1 : 1, left-&gt;as_float_reg(), right-&gt;as_float_reg(), dst-&gt;as_register());
2011     } else if (left-&gt;is_double_fpu()) {
2012       __ float_cmp(false, is_unordered_less ? -1 : 1, left-&gt;as_double_reg(), right-&gt;as_double_reg(), dst-&gt;as_register());
2013     } else {
2014       ShouldNotReachHere();
2015     }
2016   } else if (code == lir_cmp_l2i) {
2017     Label done;
2018     __ cmp(left-&gt;as_register_lo(), right-&gt;as_register_lo());
<span class="line-modified">2019     __ mov(dst-&gt;as_register(), (uint64_t)-1L);</span>
2020     __ br(Assembler::LT, done);
2021     __ csinc(dst-&gt;as_register(), zr, zr, Assembler::EQ);
2022     __ bind(done);
2023   } else {
2024     ShouldNotReachHere();
2025   }
2026 }
2027 
2028 
2029 void LIR_Assembler::align_call(LIR_Code code) {  }
2030 
2031 
2032 void LIR_Assembler::call(LIR_OpJavaCall* op, relocInfo::relocType rtype) {
2033   address call = __ trampoline_call(Address(op-&gt;addr(), rtype));
2034   if (call == NULL) {
2035     bailout(&quot;trampoline stub overflow&quot;);
2036     return;
2037   }
2038   add_call_info(code_offset(), op-&gt;info());
2039 }
</pre>
</td>
</tr>
</table>
<center><a href="c1_CodeStubs_aarch64.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="gc/shenandoah/c1/shenandoahBarrierSetC1_aarch64.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>