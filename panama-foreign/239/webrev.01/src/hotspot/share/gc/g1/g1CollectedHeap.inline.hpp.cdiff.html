<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/gc/g1/g1CollectedHeap.inline.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="g1CollectedHeap.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="g1CollectorState.hpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/g1/g1CollectedHeap.inline.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 191,18 ***</span>
  #ifndef PRODUCT
  // Support for G1EvacuationFailureALot
  
  inline bool
  G1CollectedHeap::evacuation_failure_alot_for_gc_type(bool for_young_gc,
<span class="line-modified">!                                                      bool during_initial_mark,</span>
                                                       bool mark_or_rebuild_in_progress) {
    bool res = false;
    if (mark_or_rebuild_in_progress) {
      res |= G1EvacuationFailureALotDuringConcMark;
    }
<span class="line-modified">!   if (during_initial_mark) {</span>
<span class="line-modified">!     res |= G1EvacuationFailureALotDuringInitialMark;</span>
    }
    if (for_young_gc) {
      res |= G1EvacuationFailureALotDuringYoungGC;
    } else {
      // GCs are mixed
<span class="line-new-header">--- 191,18 ---</span>
  #ifndef PRODUCT
  // Support for G1EvacuationFailureALot
  
  inline bool
  G1CollectedHeap::evacuation_failure_alot_for_gc_type(bool for_young_gc,
<span class="line-modified">!                                                      bool during_concurrent_start,</span>
                                                       bool mark_or_rebuild_in_progress) {
    bool res = false;
    if (mark_or_rebuild_in_progress) {
      res |= G1EvacuationFailureALotDuringConcMark;
    }
<span class="line-modified">!   if (during_concurrent_start) {</span>
<span class="line-modified">!     res |= G1EvacuationFailureALotDuringConcurrentStart;</span>
    }
    if (for_young_gc) {
      res |= G1EvacuationFailureALotDuringYoungGC;
    } else {
      // GCs are mixed
</pre>
<hr />
<pre>
<span class="line-old-header">*** 225,16 ***</span>
  
      _evacuation_failure_alot_for_current_gc = (elapsed_gcs &gt;= G1EvacuationFailureALotInterval);
  
      // Now check if G1EvacuationFailureALot is enabled for the current GC type.
      const bool in_young_only_phase = collector_state()-&gt;in_young_only_phase();
<span class="line-modified">!     const bool in_initial_mark_gc = collector_state()-&gt;in_initial_mark_gc();</span>
      const bool mark_or_rebuild_in_progress = collector_state()-&gt;mark_or_rebuild_in_progress();
  
      _evacuation_failure_alot_for_current_gc &amp;=
        evacuation_failure_alot_for_gc_type(in_young_only_phase,
<span class="line-modified">!                                           in_initial_mark_gc,</span>
                                            mark_or_rebuild_in_progress);
    }
  }
  
  inline bool G1CollectedHeap::evacuation_should_fail() {
<span class="line-new-header">--- 225,16 ---</span>
  
      _evacuation_failure_alot_for_current_gc = (elapsed_gcs &gt;= G1EvacuationFailureALotInterval);
  
      // Now check if G1EvacuationFailureALot is enabled for the current GC type.
      const bool in_young_only_phase = collector_state()-&gt;in_young_only_phase();
<span class="line-modified">!     const bool in_concurrent_start_gc = collector_state()-&gt;in_concurrent_start_gc();</span>
      const bool mark_or_rebuild_in_progress = collector_state()-&gt;mark_or_rebuild_in_progress();
  
      _evacuation_failure_alot_for_current_gc &amp;=
        evacuation_failure_alot_for_gc_type(in_young_only_phase,
<span class="line-modified">!                                           in_concurrent_start_gc,</span>
                                            mark_or_rebuild_in_progress);
    }
  }
  
  inline bool G1CollectedHeap::evacuation_should_fail() {
</pre>
<center><a href="g1CollectedHeap.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="g1CollectorState.hpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>