<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.jpackage/windows/classes/jdk/incubator/jpackage/internal/WixTool.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="WixSourcesBuilder.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="resources/WinResources_ja.properties.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.jpackage/windows/classes/jdk/incubator/jpackage/internal/WixTool.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 67     }
 68 
 69     ToolInfo find() throws ConfigException {
 70         final Path toolFileName = IOUtils.addSuffix(
 71                 Path.of(name().toLowerCase()), &quot;.exe&quot;);
 72 
 73         String[] version = new String[1];
 74         ConfigException reason = createToolValidator(toolFileName, version).get();
 75         if (version[0] != null) {
 76             if (reason == null) {
 77                 // Found in PATH.
 78                 return new ToolInfo(toolFileName, version[0]);
 79             }
 80 
 81             // Found in PATH, but something went wrong.
 82             throw reason;
 83         }
 84 
 85         for (var dir : findWixInstallDirs()) {
 86             Path path = dir.resolve(toolFileName);
<span class="line-modified"> 87             if (path.toFile().exists()) {</span>
 88                 reason = createToolValidator(path, version).get();
 89                 if (reason != null) {
 90                     throw reason;
 91                 }
 92                 return new ToolInfo(path, version[0]);
 93             }
 94         }
 95 
 96         throw reason;
 97     }
 98 
 99     private static Supplier&lt;ConfigException&gt; createToolValidator(Path toolPath,
100             String[] versionCtnr) {
101         return new ToolValidator(toolPath)
102                 .setCommandLine(&quot;/?&quot;)
103                 .setMinimalVersion(MINIMAL_VERSION)
104                 .setToolNotFoundErrorHandler(
105                         (name, ex) -&gt; new ConfigException(
106                                 I18N.getString(&quot;error.no-wix-tools&quot;),
107                                 I18N.getString(&quot;error.no-wix-tools.advice&quot;)))
</pre>
</td>
<td>
<hr />
<pre>
 67     }
 68 
 69     ToolInfo find() throws ConfigException {
 70         final Path toolFileName = IOUtils.addSuffix(
 71                 Path.of(name().toLowerCase()), &quot;.exe&quot;);
 72 
 73         String[] version = new String[1];
 74         ConfigException reason = createToolValidator(toolFileName, version).get();
 75         if (version[0] != null) {
 76             if (reason == null) {
 77                 // Found in PATH.
 78                 return new ToolInfo(toolFileName, version[0]);
 79             }
 80 
 81             // Found in PATH, but something went wrong.
 82             throw reason;
 83         }
 84 
 85         for (var dir : findWixInstallDirs()) {
 86             Path path = dir.resolve(toolFileName);
<span class="line-modified"> 87             if (Files.exists(path)) {</span>
 88                 reason = createToolValidator(path, version).get();
 89                 if (reason != null) {
 90                     throw reason;
 91                 }
 92                 return new ToolInfo(path, version[0]);
 93             }
 94         }
 95 
 96         throw reason;
 97     }
 98 
 99     private static Supplier&lt;ConfigException&gt; createToolValidator(Path toolPath,
100             String[] versionCtnr) {
101         return new ToolValidator(toolPath)
102                 .setCommandLine(&quot;/?&quot;)
103                 .setMinimalVersion(MINIMAL_VERSION)
104                 .setToolNotFoundErrorHandler(
105                         (name, ex) -&gt; new ConfigException(
106                                 I18N.getString(&quot;error.no-wix-tools&quot;),
107                                 I18N.getString(&quot;error.no-wix-tools.advice&quot;)))
</pre>
</td>
</tr>
</table>
<center><a href="WixSourcesBuilder.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="resources/WinResources_ja.properties.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>