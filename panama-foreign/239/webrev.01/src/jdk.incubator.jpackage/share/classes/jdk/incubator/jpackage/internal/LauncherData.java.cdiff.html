<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.incubator.jpackage/share/classes/jdk/incubator/jpackage/internal/LauncherData.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="IOUtils.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="PathGroup.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.jpackage/share/classes/jdk/incubator/jpackage/internal/LauncherData.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 143,11 ***</span>
                      moduleRef.descriptor());
          } else if (params.containsKey(PREDEFINED_RUNTIME_IMAGE.getID())) {
              // Failed to find module in the specified module path list and
              // there is external runtime given to jpackage.
              // Lookup module in this runtime.
<span class="line-modified">!             Path cookedRuntime = PREDEFINED_RUNTIME_IMAGE.fetchFrom(params).toPath();</span>
              launcherData.moduleInfo = ModuleInfo.fromCookedRuntime(moduleName,
                      cookedRuntime);
          }
  
          if (launcherData.moduleInfo == null) {
<span class="line-new-header">--- 143,11 ---</span>
                      moduleRef.descriptor());
          } else if (params.containsKey(PREDEFINED_RUNTIME_IMAGE.getID())) {
              // Failed to find module in the specified module path list and
              // there is external runtime given to jpackage.
              // Lookup module in this runtime.
<span class="line-modified">!             Path cookedRuntime = PREDEFINED_RUNTIME_IMAGE.fetchFrom(params);</span>
              launcherData.moduleInfo = ModuleInfo.fromCookedRuntime(moduleName,
                      cookedRuntime);
          }
  
          if (launcherData.moduleInfo == null) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 229,14 ***</span>
              throws IOException {
          Path inputDir = StandardBundlerParam.SOURCE_DIR.fetchFrom(params);
          if (inputDir == null) {
              classPath = Collections.emptyList();
          } else {
<span class="line-modified">!             try (Stream&lt;Path&gt; walk = Files.walk(inputDir, 1)) {</span>
                  Set&lt;Path&gt; jars = walk.filter(Files::isRegularFile)
                          .filter(file -&gt; file.toString().endsWith(&quot;.jar&quot;))
<span class="line-modified">!                         .map(Path::getFileName)</span>
                          .collect(Collectors.toSet());
                  jars.remove(mainJarName);
                  classPath = jars.stream().sorted().collect(Collectors.toList());
              }
          }
<span class="line-new-header">--- 229,15 ---</span>
              throws IOException {
          Path inputDir = StandardBundlerParam.SOURCE_DIR.fetchFrom(params);
          if (inputDir == null) {
              classPath = Collections.emptyList();
          } else {
<span class="line-modified">!             try (Stream&lt;Path&gt; walk = Files.walk(inputDir, Integer.MAX_VALUE)) {</span>
                  Set&lt;Path&gt; jars = walk.filter(Files::isRegularFile)
                          .filter(file -&gt; file.toString().endsWith(&quot;.jar&quot;))
<span class="line-modified">!                         .map(p -&gt; inputDir.toAbsolutePath()</span>
<span class="line-added">+                                   .relativize(p.toAbsolutePath()))</span>
                          .collect(Collectors.toSet());
                  jars.remove(mainJarName);
                  classPath = jars.stream().sorted().collect(Collectors.toList());
              }
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 290,11 ***</span>
      private static List&lt;Path&gt; getModulePath(Map&lt;String, ? super Object&gt; params)
              throws ConfigException {
          List&lt;Path&gt; modulePath = getPathListParameter(Arguments.CLIOptions.MODULE_PATH.getId(), params);
  
          if (params.containsKey(PREDEFINED_RUNTIME_IMAGE.getID())) {
<span class="line-modified">!             Path runtimePath = PREDEFINED_RUNTIME_IMAGE.fetchFrom(params).toPath();</span>
              runtimePath = runtimePath.resolve(&quot;lib&quot;);
              modulePath = Stream.of(modulePath, List.of(runtimePath))
                      .flatMap(List::stream)
                      .collect(Collectors.toUnmodifiableList());
          }
<span class="line-new-header">--- 291,11 ---</span>
      private static List&lt;Path&gt; getModulePath(Map&lt;String, ? super Object&gt; params)
              throws ConfigException {
          List&lt;Path&gt; modulePath = getPathListParameter(Arguments.CLIOptions.MODULE_PATH.getId(), params);
  
          if (params.containsKey(PREDEFINED_RUNTIME_IMAGE.getID())) {
<span class="line-modified">!             Path runtimePath = PREDEFINED_RUNTIME_IMAGE.fetchFrom(params);</span>
              runtimePath = runtimePath.resolve(&quot;lib&quot;);
              modulePath = Stream.of(modulePath, List.of(runtimePath))
                      .flatMap(List::stream)
                      .collect(Collectors.toUnmodifiableList());
          }
</pre>
<center><a href="IOUtils.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="PathGroup.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>