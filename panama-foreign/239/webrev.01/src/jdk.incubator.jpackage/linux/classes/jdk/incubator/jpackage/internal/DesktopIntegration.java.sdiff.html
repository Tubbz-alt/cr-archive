<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.jpackage/linux/classes/jdk/incubator/jpackage/internal/DesktopIntegration.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../jdk.hotspot.agent/share/classes/sun/jvm/hotspot/runtime/aarch64/AARCH64CurrentFrameGuess.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="LinuxAppImageBuilder.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.jpackage/linux/classes/jdk/incubator/jpackage/internal/DesktopIntegration.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
418             throws IOException {
419         Set&lt;String&gt; processedMimeTypes = new HashSet&lt;&gt;();
420         for (var assoc : associations) {
421             if (assoc.iconSize &lt;= 0) {
422                 // No icon.
423                 continue;
424             }
425 
426             for (var mimeType : assoc.data.mimeTypes) {
427                 if (processedMimeTypes.contains(mimeType)) {
428                     continue;
429                 }
430 
431                 processedMimeTypes.add(mimeType);
432 
433                 // Create icon name for mime type from mime type.
434                 DesktopFile faIconFile = new DesktopFile(mimeType.replace(
435                         File.separatorChar, &#39;-&#39;) + IOUtils.getSuffix(
436                                 assoc.data.iconPath));
437 
<span class="line-modified">438                 IOUtils.copyFile(assoc.data.iconPath.toFile(),</span>
<span class="line-modified">439                         faIconFile.srcPath().toFile());</span>
440 
441                 shellCommands.addIcon(mimeType, faIconFile.installPath(),
442                         assoc.iconSize);
443             }
444         }
445     }
446 
447     private void createDesktopFile(Map&lt;String, String&gt; data) throws IOException {
448         List&lt;String&gt; mimeTypes = getMimeTypeNamesFromFileAssociations();
449         data.put(&quot;DESKTOP_MIMES&quot;, &quot;MimeType=&quot; + String.join(&quot;;&quot;, mimeTypes));
450 
451         // prepare desktop shortcut
452         desktopFileResource
453                 .setSubstitutionData(data)
454                 .saveToFile(desktopFile.srcPath());
455     }
456 
457     private List&lt;String&gt; getMimeTypeNamesFromFileAssociations() {
458         return associations.stream()
459                 .map(fa -&gt; fa.data.mimeTypes)
</pre>
</td>
<td>
<hr />
<pre>
418             throws IOException {
419         Set&lt;String&gt; processedMimeTypes = new HashSet&lt;&gt;();
420         for (var assoc : associations) {
421             if (assoc.iconSize &lt;= 0) {
422                 // No icon.
423                 continue;
424             }
425 
426             for (var mimeType : assoc.data.mimeTypes) {
427                 if (processedMimeTypes.contains(mimeType)) {
428                     continue;
429                 }
430 
431                 processedMimeTypes.add(mimeType);
432 
433                 // Create icon name for mime type from mime type.
434                 DesktopFile faIconFile = new DesktopFile(mimeType.replace(
435                         File.separatorChar, &#39;-&#39;) + IOUtils.getSuffix(
436                                 assoc.data.iconPath));
437 
<span class="line-modified">438                 IOUtils.copyFile(assoc.data.iconPath,</span>
<span class="line-modified">439                         faIconFile.srcPath());</span>
440 
441                 shellCommands.addIcon(mimeType, faIconFile.installPath(),
442                         assoc.iconSize);
443             }
444         }
445     }
446 
447     private void createDesktopFile(Map&lt;String, String&gt; data) throws IOException {
448         List&lt;String&gt; mimeTypes = getMimeTypeNamesFromFileAssociations();
449         data.put(&quot;DESKTOP_MIMES&quot;, &quot;MimeType=&quot; + String.join(&quot;;&quot;, mimeTypes));
450 
451         // prepare desktop shortcut
452         desktopFileResource
453                 .setSubstitutionData(data)
454                 .saveToFile(desktopFile.srcPath());
455     }
456 
457     private List&lt;String&gt; getMimeTypeNamesFromFileAssociations() {
458         return associations.stream()
459                 .map(fa -&gt; fa.data.mimeTypes)
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../jdk.hotspot.agent/share/classes/sun/jvm/hotspot/runtime/aarch64/AARCH64CurrentFrameGuess.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="LinuxAppImageBuilder.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>