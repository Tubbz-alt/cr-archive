<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/common/Modules.gmk</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="../../.hgtags.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../../src/demo/share/jfc/SwingSet2/resources/swingset_ja.properties.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/common/Modules.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
329 MODULE_DEPS_MAKEFILE := $(MAKESUPPORT_OUTPUTDIR)/module-deps.gmk
330 
331 MODULE_INFOS := $(call FindAllModuleInfos, *)
332 
333 $(MODULE_DEPS_MAKEFILE): $(MODULE_INFOS) \
334     $(call DependOnVariable, MODULE_INFOS, $(MAKESUPPORT_OUTPUTDIR)/MODULE_INFOS.vardeps)
335 	$(call MakeTargetDir)
336 	$(RM) $@
337 	$(foreach m, $(MODULE_INFOS), \
338 	    ( $(PRINTF) &quot;DEPS_$(call GetModuleNameFromModuleInfo, $m) :=&quot; &amp;&amp; \
339 	      $(NAWK) -v MODULE=$(call GetModuleNameFromModuleInfo, $m) &#39;\
340 	          BEGIN      { if (MODULE != &quot;java.base&quot;) printf(&quot; java.base&quot;); } \
341 	          /^ *requires/ { sub(/;/, &quot;&quot;); \
342 	                          sub(/requires /, &quot; &quot;); \
343 	                          sub(/ static /, &quot; &quot;); \
344 	                          sub(/ transitive /, &quot; &quot;); \
345 	                          sub(/\/\/.*/, &quot;&quot;); \
346 	                          sub(/\/\*.*\*\//, &quot;&quot;); \
347 	                          gsub(/^ +\*.*/, &quot;&quot;); \
348 	                          gsub(/ /, &quot;&quot;); \

349 	                          printf(&quot; %s&quot;, $$0) } \
350 	          END           { printf(&quot;\n&quot;) }&#39; $m &amp;&amp; \
351 	      $(PRINTF) &quot;TRANSITIVE_MODULES_$(call GetModuleNameFromModuleInfo, $m) :=&quot; &amp;&amp; \
352 	      $(NAWK) -v MODULE=$(call GetModuleNameFromModuleInfo, $m) &#39;\
353 	          BEGIN      { if (MODULE != &quot;java.base&quot;) printf(&quot; java.base&quot;); } \
354 	          /^ *requires  *transitive/ { \
355 	                          sub(/;/, &quot;&quot;); \
356 	                          sub(/requires/, &quot;&quot;); \
357 	                          sub(/transitive/, &quot;&quot;); \
358 	                          sub(/\/\/.*/, &quot;&quot;); \
359 	                          sub(/\/\*.*\*\//, &quot;&quot;); \
360 	                          gsub(/^ +\*.*/, &quot;&quot;); \
361 	                          gsub(/ /, &quot;&quot;); \

362 	                          printf(&quot; %s&quot;, $$0) } \
363 	          END           { printf(&quot;\n&quot;) }&#39; $m \
364 	    ) &gt;&gt; $@ $(NEWLINE))
365 
366 -include $(MODULE_DEPS_MAKEFILE)
367 
368 # Find dependencies (&quot;requires&quot;) for a given module.
369 # Param 1: Module to find dependencies for.
370 FindDepsForModule = \
371   $(DEPS_$(strip $1))
372 
373 # Find dependencies (&quot;requires&quot;) transitively in 3 levels for a given module.
374 # Param 1: Module to find dependencies for.
375 FindTransitiveDepsForModule = \
376     $(sort $(call FindDepsForModule, $1) \
377         $(foreach m, $(call FindDepsForModule, $1), \
378             $(call FindDepsForModule, $m) \
379             $(foreach n, $(call FindDepsForModule, $m), \
380                  $(call FindDepsForModule, $n))))
381 
</pre>
</td>
<td>
<hr />
<pre>
329 MODULE_DEPS_MAKEFILE := $(MAKESUPPORT_OUTPUTDIR)/module-deps.gmk
330 
331 MODULE_INFOS := $(call FindAllModuleInfos, *)
332 
333 $(MODULE_DEPS_MAKEFILE): $(MODULE_INFOS) \
334     $(call DependOnVariable, MODULE_INFOS, $(MAKESUPPORT_OUTPUTDIR)/MODULE_INFOS.vardeps)
335 	$(call MakeTargetDir)
336 	$(RM) $@
337 	$(foreach m, $(MODULE_INFOS), \
338 	    ( $(PRINTF) &quot;DEPS_$(call GetModuleNameFromModuleInfo, $m) :=&quot; &amp;&amp; \
339 	      $(NAWK) -v MODULE=$(call GetModuleNameFromModuleInfo, $m) &#39;\
340 	          BEGIN      { if (MODULE != &quot;java.base&quot;) printf(&quot; java.base&quot;); } \
341 	          /^ *requires/ { sub(/;/, &quot;&quot;); \
342 	                          sub(/requires /, &quot; &quot;); \
343 	                          sub(/ static /, &quot; &quot;); \
344 	                          sub(/ transitive /, &quot; &quot;); \
345 	                          sub(/\/\/.*/, &quot;&quot;); \
346 	                          sub(/\/\*.*\*\//, &quot;&quot;); \
347 	                          gsub(/^ +\*.*/, &quot;&quot;); \
348 	                          gsub(/ /, &quot;&quot;); \
<span class="line-added">349                                   gsub(/\r/, &quot;&quot;); \</span>
350 	                          printf(&quot; %s&quot;, $$0) } \
351 	          END           { printf(&quot;\n&quot;) }&#39; $m &amp;&amp; \
352 	      $(PRINTF) &quot;TRANSITIVE_MODULES_$(call GetModuleNameFromModuleInfo, $m) :=&quot; &amp;&amp; \
353 	      $(NAWK) -v MODULE=$(call GetModuleNameFromModuleInfo, $m) &#39;\
354 	          BEGIN      { if (MODULE != &quot;java.base&quot;) printf(&quot; java.base&quot;); } \
355 	          /^ *requires  *transitive/ { \
356 	                          sub(/;/, &quot;&quot;); \
357 	                          sub(/requires/, &quot;&quot;); \
358 	                          sub(/transitive/, &quot;&quot;); \
359 	                          sub(/\/\/.*/, &quot;&quot;); \
360 	                          sub(/\/\*.*\*\//, &quot;&quot;); \
361 	                          gsub(/^ +\*.*/, &quot;&quot;); \
362 	                          gsub(/ /, &quot;&quot;); \
<span class="line-added">363                                   gsub(/\r/, &quot;&quot;); \</span>
364 	                          printf(&quot; %s&quot;, $$0) } \
365 	          END           { printf(&quot;\n&quot;) }&#39; $m \
366 	    ) &gt;&gt; $@ $(NEWLINE))
367 
368 -include $(MODULE_DEPS_MAKEFILE)
369 
370 # Find dependencies (&quot;requires&quot;) for a given module.
371 # Param 1: Module to find dependencies for.
372 FindDepsForModule = \
373   $(DEPS_$(strip $1))
374 
375 # Find dependencies (&quot;requires&quot;) transitively in 3 levels for a given module.
376 # Param 1: Module to find dependencies for.
377 FindTransitiveDepsForModule = \
378     $(sort $(call FindDepsForModule, $1) \
379         $(foreach m, $(call FindDepsForModule, $1), \
380             $(call FindDepsForModule, $m) \
381             $(foreach n, $(call FindDepsForModule, $m), \
382                  $(call FindDepsForModule, $n))))
383 
</pre>
</td>
</tr>
</table>
<center><a href="../../.hgtags.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../../src/demo/share/jfc/SwingSet2/resources/swingset_ja.properties.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>