<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/gc/g1/TestRemsetLoggingTools.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="TestGCLogMessages.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../stress/gclocker/TestExcessGCLockerCollections.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/gc/g1/TestRemsetLoggingTools.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 46         if (numGCs &gt; 0) {
 47           wb.fullGC();
 48         }
 49     }
 50 }
 51 
 52 public class TestRemsetLoggingTools {
 53 
 54     public static String runTest(String[] additionalArgs, int numGCs) throws Exception {
 55         ArrayList&lt;String&gt; finalargs = new ArrayList&lt;String&gt;();
 56         String[] defaultArgs = new String[] {
 57             &quot;-Xbootclasspath/a:.&quot;,
 58             &quot;-XX:+UnlockDiagnosticVMOptions&quot;, &quot;-XX:+WhiteBoxAPI&quot;,
 59             &quot;-cp&quot;, System.getProperty(&quot;java.class.path&quot;),
 60             &quot;-XX:+UseG1GC&quot;,
 61             &quot;-Xmn4m&quot;,
 62             &quot;-Xint&quot;, // -Xint makes the test run faster
 63             &quot;-Xms20m&quot;,
 64             &quot;-Xmx20m&quot;,
 65             &quot;-XX:ParallelGCThreads=1&quot;,
<span class="line-modified"> 66             &quot;-XX:InitiatingHeapOccupancyPercent=100&quot;, // we don&#39;t want the additional GCs due to initial marking</span>
 67             &quot;-XX:+UnlockDiagnosticVMOptions&quot;,
 68             &quot;-XX:G1HeapRegionSize=1M&quot;,
 69         };
 70 
 71         finalargs.addAll(Arrays.asList(defaultArgs));
 72 
 73         if (additionalArgs != null) {
 74             finalargs.addAll(Arrays.asList(additionalArgs));
 75         }
 76 
 77         finalargs.add(VerifySummaryOutput.class.getName());
 78         finalargs.add(String.valueOf(numGCs));
 79 
 80         ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(finalargs);
 81         OutputAnalyzer output = new OutputAnalyzer(pb.start());
 82 
 83         output.shouldHaveExitValue(0);
 84 
 85         String result = output.getStdout();
 86         return result;
</pre>
</td>
<td>
<hr />
<pre>
 46         if (numGCs &gt; 0) {
 47           wb.fullGC();
 48         }
 49     }
 50 }
 51 
 52 public class TestRemsetLoggingTools {
 53 
 54     public static String runTest(String[] additionalArgs, int numGCs) throws Exception {
 55         ArrayList&lt;String&gt; finalargs = new ArrayList&lt;String&gt;();
 56         String[] defaultArgs = new String[] {
 57             &quot;-Xbootclasspath/a:.&quot;,
 58             &quot;-XX:+UnlockDiagnosticVMOptions&quot;, &quot;-XX:+WhiteBoxAPI&quot;,
 59             &quot;-cp&quot;, System.getProperty(&quot;java.class.path&quot;),
 60             &quot;-XX:+UseG1GC&quot;,
 61             &quot;-Xmn4m&quot;,
 62             &quot;-Xint&quot;, // -Xint makes the test run faster
 63             &quot;-Xms20m&quot;,
 64             &quot;-Xmx20m&quot;,
 65             &quot;-XX:ParallelGCThreads=1&quot;,
<span class="line-modified"> 66             &quot;-XX:InitiatingHeapOccupancyPercent=100&quot;, // we don&#39;t want the additional GCs due to marking</span>
 67             &quot;-XX:+UnlockDiagnosticVMOptions&quot;,
 68             &quot;-XX:G1HeapRegionSize=1M&quot;,
 69         };
 70 
 71         finalargs.addAll(Arrays.asList(defaultArgs));
 72 
 73         if (additionalArgs != null) {
 74             finalargs.addAll(Arrays.asList(additionalArgs));
 75         }
 76 
 77         finalargs.add(VerifySummaryOutput.class.getName());
 78         finalargs.add(String.valueOf(numGCs));
 79 
 80         ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(finalargs);
 81         OutputAnalyzer output = new OutputAnalyzer(pb.start());
 82 
 83         output.shouldHaveExitValue(0);
 84 
 85         String result = output.getStdout();
 86         return result;
</pre>
</td>
</tr>
</table>
<center><a href="TestGCLogMessages.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../stress/gclocker/TestExcessGCLockerCollections.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>