<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/gc/stress/gclocker/TestExcessGCLockerCollections.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../../g1/TestRemsetLoggingTools.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../../serviceability/dcmd/gc/HeapDumpCompressedTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/gc/stress/gclocker/TestExcessGCLockerCollections.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
157     private static final String ANY_LOCKER = locker + &quot; [1-9][0-9]*M&quot;;
158     private static final String BAD_LOCKER = locker + &quot; [1-9][0-9]?M&quot;;
159 
160     private static final String[] COMMON_OPTIONS = new String[] {
161         &quot;-Xmx1G&quot;, &quot;-Xms1G&quot;, &quot;-Xmn256M&quot;, &quot;-Xlog:gc&quot; };
162 
163     public static void main(String args[]) throws Exception {
164         if (args.length &lt; 3) {
165             System.out.println(&quot;usage: TestExcessGCLockerCollectionsAux&quot; +
166                                &quot; &lt;duration sec&gt; &lt;alloc threads&gt;&quot; +
167                                &quot; &lt;jni critical threads&gt;&quot;);
168             throw new RuntimeException(&quot;Invalid arguments&quot;);
169         }
170 
171         ArrayList&lt;String&gt; finalArgs = new ArrayList&lt;String&gt;();
172         finalArgs.addAll(Arrays.asList(COMMON_OPTIONS));
173         finalArgs.add(TestExcessGCLockerCollectionsAux.class.getName());
174         finalArgs.addAll(Arrays.asList(args));
175 
176         // GC and other options obtained from test framework.
<span class="line-modified">177         ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(</span>
<span class="line-removed">178             true, finalArgs);</span>
<span class="line-removed">179         OutputAnalyzer output = new OutputAnalyzer(pb.start());</span>
180         output.shouldHaveExitValue(0);
181         //System.out.println(&quot;------------- begin stdout ----------------&quot;);
182         //System.out.println(output.getStdout());
183         //System.out.println(&quot;------------- end stdout ----------------&quot;);
184         output.stdoutShouldMatch(ANY_LOCKER);
185         output.stdoutShouldNotMatch(BAD_LOCKER);
186     }
187 }
</pre>
</td>
<td>
<hr />
<pre>
157     private static final String ANY_LOCKER = locker + &quot; [1-9][0-9]*M&quot;;
158     private static final String BAD_LOCKER = locker + &quot; [1-9][0-9]?M&quot;;
159 
160     private static final String[] COMMON_OPTIONS = new String[] {
161         &quot;-Xmx1G&quot;, &quot;-Xms1G&quot;, &quot;-Xmn256M&quot;, &quot;-Xlog:gc&quot; };
162 
163     public static void main(String args[]) throws Exception {
164         if (args.length &lt; 3) {
165             System.out.println(&quot;usage: TestExcessGCLockerCollectionsAux&quot; +
166                                &quot; &lt;duration sec&gt; &lt;alloc threads&gt;&quot; +
167                                &quot; &lt;jni critical threads&gt;&quot;);
168             throw new RuntimeException(&quot;Invalid arguments&quot;);
169         }
170 
171         ArrayList&lt;String&gt; finalArgs = new ArrayList&lt;String&gt;();
172         finalArgs.addAll(Arrays.asList(COMMON_OPTIONS));
173         finalArgs.add(TestExcessGCLockerCollectionsAux.class.getName());
174         finalArgs.addAll(Arrays.asList(args));
175 
176         // GC and other options obtained from test framework.
<span class="line-modified">177         OutputAnalyzer output = ProcessTools.executeTestJvm(finalArgs);</span>


178         output.shouldHaveExitValue(0);
179         //System.out.println(&quot;------------- begin stdout ----------------&quot;);
180         //System.out.println(output.getStdout());
181         //System.out.println(&quot;------------- end stdout ----------------&quot;);
182         output.stdoutShouldMatch(ANY_LOCKER);
183         output.stdoutShouldNotMatch(BAD_LOCKER);
184     }
185 }
</pre>
</td>
</tr>
</table>
<center><a href="../../g1/TestRemsetLoggingTools.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../../serviceability/dcmd/gc/HeapDumpCompressedTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>