<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/SequenceLayout.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/SequenceLayout.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
116      * as the flattened projection of this sequence layout.
117      * &lt;p&gt;
118      * For instance, given a sequence layout of the kind:
119      * &lt;pre&gt;{@code
120     var seq = MemoryLayout.ofSequence(4, MemoryLayout.ofSequence(3, MemoryLayouts.JAVA_INT));
121      * }&lt;/pre&gt;
122      * calling {@code seq.reshape(2, 6)} will yield the following sequence layout:
123      * &lt;pre&gt;{@code
124     var reshapeSeq = MemoryLayout.ofSequence(2, MemoryLayout.ofSequence(6, MemoryLayouts.JAVA_INT));
125      * }&lt;/pre&gt;
126      * &lt;p&gt;
127      * If one of the provided element count is the special value {@code -1}, then the element
128      * count in that position will be inferred from the remaining element counts and the
129      * element count of the flattened projection of this layout. For instance, a layout equivalent to
130      * the above {@code reshapeSeq} can also be computed in the following ways:
131      * &lt;pre&gt;{@code
132     var reshapeSeqImplicit1 = seq.reshape(-1, 6);
133     var reshapeSeqImplicit2 = seq.reshape(2, -1);
134      * }&lt;/pre&gt;
135      * @param elementCounts an array of element counts, of which at most one can be {@code -1}.
<span class="line-modified">136      * @return a new sequence layout where element element layouts in the flattened projection of this</span>
137      * sequence layout (see {@link #flatten()}) are re-arranged into one or more nested sequence layouts.
138      * @throws NullPointerException if {@code elementCounts == null}.
139      * @throws UnsupportedOperationException if this sequence layout does not have an element count.
140      * @throws IllegalArgumentException if two or more element counts are set to {@code -1}, or if one
141      * or more element count is {@code &lt;= 0} (but other than {@code -1}) or, if, after any required inference,
142      * multiplying the element counts does not yield the same element count as the flattened projection of this
143      * sequence layout.
144      */
145     public SequenceLayout reshape(long... elementCounts) {
146         Objects.requireNonNull(elementCounts);
147         if (elementCounts.length == 0) {
148             throw new IllegalArgumentException();
149         }
150         if (!elementCount().isPresent()) {
151             throw new UnsupportedOperationException(&quot;Cannot reshape a sequence layout whose element count is unspecified&quot;);
152         }
153         SequenceLayout flat = flatten();
154         long expectedCount = flat.elementCount().getAsLong();
155 
156         long actualCount = 1;
</pre>
</td>
<td>
<hr />
<pre>
116      * as the flattened projection of this sequence layout.
117      * &lt;p&gt;
118      * For instance, given a sequence layout of the kind:
119      * &lt;pre&gt;{@code
120     var seq = MemoryLayout.ofSequence(4, MemoryLayout.ofSequence(3, MemoryLayouts.JAVA_INT));
121      * }&lt;/pre&gt;
122      * calling {@code seq.reshape(2, 6)} will yield the following sequence layout:
123      * &lt;pre&gt;{@code
124     var reshapeSeq = MemoryLayout.ofSequence(2, MemoryLayout.ofSequence(6, MemoryLayouts.JAVA_INT));
125      * }&lt;/pre&gt;
126      * &lt;p&gt;
127      * If one of the provided element count is the special value {@code -1}, then the element
128      * count in that position will be inferred from the remaining element counts and the
129      * element count of the flattened projection of this layout. For instance, a layout equivalent to
130      * the above {@code reshapeSeq} can also be computed in the following ways:
131      * &lt;pre&gt;{@code
132     var reshapeSeqImplicit1 = seq.reshape(-1, 6);
133     var reshapeSeqImplicit2 = seq.reshape(2, -1);
134      * }&lt;/pre&gt;
135      * @param elementCounts an array of element counts, of which at most one can be {@code -1}.
<span class="line-modified">136      * @return a new sequence layout where element layouts in the flattened projection of this</span>
137      * sequence layout (see {@link #flatten()}) are re-arranged into one or more nested sequence layouts.
138      * @throws NullPointerException if {@code elementCounts == null}.
139      * @throws UnsupportedOperationException if this sequence layout does not have an element count.
140      * @throws IllegalArgumentException if two or more element counts are set to {@code -1}, or if one
141      * or more element count is {@code &lt;= 0} (but other than {@code -1}) or, if, after any required inference,
142      * multiplying the element counts does not yield the same element count as the flattened projection of this
143      * sequence layout.
144      */
145     public SequenceLayout reshape(long... elementCounts) {
146         Objects.requireNonNull(elementCounts);
147         if (elementCounts.length == 0) {
148             throw new IllegalArgumentException();
149         }
150         if (!elementCount().isPresent()) {
151             throw new UnsupportedOperationException(&quot;Cannot reshape a sequence layout whose element count is unspecified&quot;);
152         }
153         SequenceLayout flat = flatten();
154         long expectedCount = flat.elementCount().getAsLong();
155 
156         long actualCount = 1;
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>