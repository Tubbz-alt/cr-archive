<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/jdk.incubator.jextract/share/classes/jdk/incubator/jextract/tool/resources/CScope.java.template</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 // Generated by jextract
 2 
 3 import java.util.ArrayList;
 4 import java.util.List;
 5 import java.util.Objects;
 6 import java.util.OptionalLong;
 7 import jdk.incubator.foreign.MemoryAddress;
 8 import jdk.incubator.foreign.MemorySegment;
 9 import jdk.incubator.foreign.NativeAllocationScope;
10 
11 public final class CScope extends NativeAllocationScope {
12     private final NativeAllocationScope impl;
13     private final List&lt;MemorySegment&gt; segments = new ArrayList&lt;&gt;();
14 
15     public CScope() {
16         impl = NativeAllocationScope.unboundedScope();
17     }
18 
19     public CScope(long size) {
20         impl = NativeAllocationScope.boundedScope(size);
21     }
22 
23     @Override
24     public OptionalLong byteSize() {
25         return impl.byteSize();
26     }
27 
28     @Override
29     public long allocatedBytes() {
30         return impl.allocatedBytes();
31     }
32 
33     @Override
34     public MemoryAddress allocate(long bytesSize, long bytesAlignment) {
35         return impl.allocate(bytesSize, bytesAlignment);
36     }
37 
38     @Override
39     public void close() {
40         for (var seg : segments) {
41             seg.close();
42         }
43         impl.close();
44     }
45 
46     public MemorySegment register(MemorySegment seg) {
47         segments.add(Objects.requireNonNull(seg));
48         return seg;
49     }
50 }
51 
    </pre>
  </body>
</html>