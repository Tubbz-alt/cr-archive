<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.incubator.jextract/share/classes/jdk/internal/jextract/impl/TreeMaker.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Parser.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/jdk.incubator.jextract/share/classes/jdk/internal/jextract/impl/TreeMaker.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
108                 return createVar(Declaration.Variable.Kind.GLOBAL, c, Declaration::globalVariable);
109             default:
110                 return null;
111         }
112     }
113 
114     Position toPos(Cursor cursor) {
115         SourceLocation loc = cursor.getSourceLocation();
116         if (loc == null) {
117             return Position.NO_POSITION;
118         }
119         SourceLocation.Location sloc = loc.getFileLocation();
120         if (sloc == null) {
121             return Position.NO_POSITION;
122         }
123         return new CursorPosition(cursor);
124     }
125 
126     static class CursorPosition implements Position {
127         private final Cursor cursor;



128 
129         CursorPosition(Cursor cursor) {
130             this.cursor = cursor;




131         }
132 
133         @Override
134         public Path path() {
<span class="line-modified">135             return cursor.getSourceLocation().getFileLocation().path();</span>
136         }
137 
138         @Override
139         public int line() {
<span class="line-modified">140             return cursor.getSourceLocation().getFileLocation().line();</span>
141         }
142 
143         @Override
144         public int col() {
<span class="line-modified">145             return cursor.getSourceLocation().getFileLocation().column();</span>
146         }
147 
148         public Cursor cursor() {
149             return cursor;
150         }
151     }
152 
153     public Declaration.Function createFunction(Cursor c) {
154         checkCursor(c, CursorKind.FunctionDecl);
155         List&lt;Declaration.Variable&gt; params = new ArrayList&lt;&gt;();
156         for (int i = 0 ; i &lt; c.numberOfArgs() ; i++) {
157             params.add((Declaration.Variable)createTree(c.getArgument(i)));
158         }
159         return checkCache(c, Declaration.Function.class,
160                 ()-&gt;Declaration.function(toPos(c), c.spelling(), (Type.Function)toType(c), params.toArray(new Declaration.Variable[0])));
161     }
162 
163     public Declaration.Constant createMacro(Cursor c, Optional&lt;MacroParserImpl.Macro&gt; macro) {
164         checkCursorAny(c, CursorKind.MacroDefinition);
165         if (macro.isEmpty()) {
</pre>
</td>
<td>
<hr />
<pre>
108                 return createVar(Declaration.Variable.Kind.GLOBAL, c, Declaration::globalVariable);
109             default:
110                 return null;
111         }
112     }
113 
114     Position toPos(Cursor cursor) {
115         SourceLocation loc = cursor.getSourceLocation();
116         if (loc == null) {
117             return Position.NO_POSITION;
118         }
119         SourceLocation.Location sloc = loc.getFileLocation();
120         if (sloc == null) {
121             return Position.NO_POSITION;
122         }
123         return new CursorPosition(cursor);
124     }
125 
126     static class CursorPosition implements Position {
127         private final Cursor cursor;
<span class="line-added">128         private final Path path;</span>
<span class="line-added">129         private final int line;</span>
<span class="line-added">130         private final int column;</span>
131 
132         CursorPosition(Cursor cursor) {
133             this.cursor = cursor;
<span class="line-added">134             SourceLocation.Location loc = cursor.getSourceLocation().getFileLocation();</span>
<span class="line-added">135             this.path = loc.path();</span>
<span class="line-added">136             this.line = loc.line();</span>
<span class="line-added">137             this.column = loc.column();</span>
138         }
139 
140         @Override
141         public Path path() {
<span class="line-modified">142             return path;</span>
143         }
144 
145         @Override
146         public int line() {
<span class="line-modified">147             return line;</span>
148         }
149 
150         @Override
151         public int col() {
<span class="line-modified">152             return column;</span>
153         }
154 
155         public Cursor cursor() {
156             return cursor;
157         }
158     }
159 
160     public Declaration.Function createFunction(Cursor c) {
161         checkCursor(c, CursorKind.FunctionDecl);
162         List&lt;Declaration.Variable&gt; params = new ArrayList&lt;&gt;();
163         for (int i = 0 ; i &lt; c.numberOfArgs() ; i++) {
164             params.add((Declaration.Variable)createTree(c.getArgument(i)));
165         }
166         return checkCache(c, Declaration.Function.class,
167                 ()-&gt;Declaration.function(toPos(c), c.spelling(), (Type.Function)toType(c), params.toArray(new Declaration.Variable[0])));
168     }
169 
170     public Declaration.Constant createMacro(Cursor c, Optional&lt;MacroParserImpl.Macro&gt; macro) {
171         checkCursorAny(c, CursorKind.MacroDefinition);
172         if (macro.isEmpty()) {
</pre>
</td>
</tr>
</table>
<center><a href="Parser.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>