<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/jdk/java/foreign/valist/libVaList.c</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="VaListTest.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>test/jdk/java/foreign/valist/libVaList.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -71,10 +71,31 @@</span>
  EXPORT long long sumBigStruct(va_list list) {
      BigPoint point = va_arg(list, BigPoint);
      return point.x + point.y;
  }
  
<span class="udiff-line-added">+ typedef struct {</span>
<span class="udiff-line-added">+     long long x;</span>
<span class="udiff-line-added">+     long long y;</span>
<span class="udiff-line-added">+     long long z;</span>
<span class="udiff-line-added">+ } HugePoint;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ EXPORT long long sumHugeStruct(va_list list) {</span>
<span class="udiff-line-added">+     HugePoint point = va_arg(list, HugePoint);</span>
<span class="udiff-line-added">+     return point.x + point.y + point.z;</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ typedef struct {</span>
<span class="udiff-line-added">+     float x;</span>
<span class="udiff-line-added">+     float y;</span>
<span class="udiff-line-added">+ } FloatPoint;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ EXPORT float sumFloatStruct(va_list list) {</span>
<span class="udiff-line-added">+     FloatPoint point = va_arg(list, FloatPoint);</span>
<span class="udiff-line-added">+     return point.x + point.y;</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
  EXPORT void sumStack(long long* longSum, double* doubleSum, int numArgs, ...) { // numArgs required by spec
      va_list list;
      va_start(list, numArgs);
      long long lSum = 0;
      for (int i = 0; i &lt; 16; i++) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -138,11 +159,26 @@</span>
      point.x = 5;
      point.y = 10;
      passToUpcall(cb, 1, point);
  }
  
<span class="udiff-line-added">+ EXPORT void upcallFloatStruct(CB cb) {</span>
<span class="udiff-line-added">+     FloatPoint point;</span>
<span class="udiff-line-added">+     point.x = 1.0f;</span>
<span class="udiff-line-added">+     point.y = 2.0f;</span>
<span class="udiff-line-added">+     passToUpcall(cb, 1, point);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
  EXPORT void upcallBigStruct(CB cb) {
      BigPoint point;
      point.x = 8;
      point.y = 16;
      passToUpcall(cb, 1, point);
  }
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ EXPORT void upcallHugeStruct(CB cb) {</span>
<span class="udiff-line-added">+     HugePoint point;</span>
<span class="udiff-line-added">+     point.x = 1;</span>
<span class="udiff-line-added">+     point.y = 2;</span>
<span class="udiff-line-added">+     point.z = 3;</span>
<span class="udiff-line-added">+     passToUpcall(cb, 1, point);</span>
<span class="udiff-line-added">+ }</span>
</pre>
<center><a href="VaListTest.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>