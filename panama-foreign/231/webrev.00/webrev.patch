diff a/src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/CSupport.java b/src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/CSupport.java
--- a/src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/CSupport.java
+++ b/src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/CSupport.java
@@ -510,11 +510,11 @@
          * @param layout the original parameter layout.
          * @return a layout which is the same as {@code layout}, except for the extra attribute {@link #VARARGS_ATTRIBUTE_NAME},
          * which is set to {@code true}.
          */
         public static ValueLayout asVarArg(ValueLayout layout) {
-            return layout.withAttribute(VARARGS_ATTRIBUTE_NAME, "true");
+            return layout.withAttribute(VARARGS_ATTRIBUTE_NAME, true);
         }
     }
 
     /**
      * This class defines layout constants modelling standard primitive types supported by the AArch64 ABI.
diff a/src/jdk.incubator.foreign/share/classes/jdk/internal/foreign/abi/x64/windows/TypeClass.java b/src/jdk.incubator.foreign/share/classes/jdk/internal/foreign/abi/x64/windows/TypeClass.java
--- a/src/jdk.incubator.foreign/share/classes/jdk/internal/foreign/abi/x64/windows/TypeClass.java
+++ b/src/jdk.incubator.foreign/share/classes/jdk/internal/foreign/abi/x64/windows/TypeClass.java
@@ -61,12 +61,11 @@
             return INTEGER;
         } else if(clazz == CSupport.Win64.ArgumentClass.POINTER) {
             return POINTER;
         } else if (clazz == CSupport.Win64.ArgumentClass.FLOAT) {
             if (type.attribute(VARARGS_ATTRIBUTE_NAME)
-                    .map(String.class::cast)
-                    .map(Boolean::parseBoolean).orElse(false)) {
+                    .map(Boolean.class::cast).orElse(false)) {
                 return VARARG_FLOAT;
             }
             return FLOAT;
         }
         throw new IllegalArgumentException("Unknown ABI class: " + clazz);
