<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/HtmlConfiguration.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="HelpWriter.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="HtmlDocletWriter.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/HtmlConfiguration.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 25 
 26 package jdk.javadoc.internal.doclets.formats.html;
 27 
 28 import java.util.*;
 29 import java.util.stream.Collectors;
 30 
 31 import javax.lang.model.element.Element;
 32 import javax.lang.model.element.PackageElement;
 33 import javax.lang.model.element.TypeElement;
 34 import javax.tools.JavaFileManager;
 35 import javax.tools.JavaFileObject;
 36 import javax.tools.StandardJavaFileManager;
 37 
 38 import com.sun.source.util.DocTreePath;
 39 
 40 import jdk.javadoc.doclet.Doclet;
 41 import jdk.javadoc.doclet.DocletEnvironment;
 42 import jdk.javadoc.doclet.Reporter;
 43 import jdk.javadoc.doclet.StandardDoclet;
 44 import jdk.javadoc.doclet.Taglet;

 45 import jdk.javadoc.internal.doclets.toolkit.BaseConfiguration;
 46 import jdk.javadoc.internal.doclets.toolkit.DocletException;
 47 import jdk.javadoc.internal.doclets.toolkit.Messages;
 48 import jdk.javadoc.internal.doclets.toolkit.Resources;
 49 import jdk.javadoc.internal.doclets.toolkit.WriterFactory;
 50 import jdk.javadoc.internal.doclets.toolkit.util.DocFile;
 51 import jdk.javadoc.internal.doclets.toolkit.util.DocPath;
 52 import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;
 53 
<span class="line-removed"> 54 import static javax.tools.Diagnostic.Kind.*;</span>
<span class="line-removed"> 55 </span>
 56 /**
 57  * Configure the output based on the command-line options.
 58  * &lt;p&gt;
 59  * Also determine the length of the command-line option. For example,
 60  * for a option &quot;-header&quot; there will be a string argument associated, then the
 61  * the length of option &quot;-header&quot; is two. But for option &quot;-nohelp&quot; no argument
 62  * is needed so it&#39;s length is 1.
 63  * &lt;/p&gt;
 64  * &lt;p&gt;
 65  * Also do the error checking on the options used. For example it is illegal to
 66  * use &quot;-helpfile&quot; option when already &quot;-nohelp&quot; option is used.
 67  * &lt;/p&gt;
 68  *
 69  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
 70  *  If you write code that depends on this, you do so at your own risk.
 71  *  This code and its internal interfaces are subject to change or
 72  *  deletion without notice.&lt;/b&gt;
 73  */
 74 public class HtmlConfiguration extends BaseConfiguration {
 75 
</pre>
<hr />
<pre>
125         // Use the default locale for console messages.
126         Resources msgResources = new Resources(Locale.getDefault(),
127                 BaseConfiguration.sharedResourceBundleName,
128                 &quot;jdk.javadoc.internal.doclets.formats.html.resources.standard&quot;);
129 
130         // Use the provided locale for generated docs
131         // Ideally, the doc resources would be in different resource files than the
132         // message resources, so that we do not have different copies of the same resources.
133         if (locale.equals(Locale.getDefault())) {
134             docResources = msgResources;
135         } else {
136             docResources = new Resources(locale,
137                     BaseConfiguration.sharedResourceBundleName,
138                     &quot;jdk.javadoc.internal.doclets.formats.html.resources.standard&quot;);
139         }
140 
141         messages = new Messages(this, msgResources);
142         contents = new Contents(this);
143         options = new HtmlOptions(this);
144 
<span class="line-modified">145         String v;</span>
146         try {
<span class="line-modified">147             // the version bundle is not localized</span>
<span class="line-modified">148             ResourceBundle rb = ResourceBundle.getBundle(versionBundleName, Locale.getDefault());</span>
<span class="line-modified">149             try {</span>
<span class="line-modified">150                 v = rb.getString(&quot;release&quot;);</span>
<span class="line-removed">151             } catch (MissingResourceException e) {</span>
<span class="line-removed">152                 v = defaultDocletVersion;</span>
<span class="line-removed">153             }</span>
<span class="line-removed">154         } catch (MissingResourceException e) {</span>
<span class="line-removed">155             v = defaultDocletVersion;</span>
156         }
157         docletVersion = v;
158     }
159 
<span class="line-modified">160     private static final String versionBundleName = &quot;jdk.javadoc.internal.tool.resources.version&quot;;</span>
<span class="line-removed">161     private static final String defaultDocletVersion = System.getProperty(&quot;java.version&quot;);</span>
<span class="line-removed">162     public final String docletVersion;</span>
163     public final Date startTime = new Date();
164 
165     @Override
<span class="line-modified">166     public String getDocletVersion() {</span>
167         return docletVersion;
168     }
169 





170     @Override
171     public Resources getDocResources() {
172         return docResources;
173     }
174 
175     /**
176      * Returns a utility object providing commonly used fragments of content.
177      *
178      * @return a utility object providing commonly used fragments of content
179      */
180     public Contents getContents() {
181         return contents;
182     }
183 
184     @Override
185     public Messages getMessages() {
186         return messages;
187     }
188 
189     @Override
</pre>
</td>
<td>
<hr />
<pre>
 25 
 26 package jdk.javadoc.internal.doclets.formats.html;
 27 
 28 import java.util.*;
 29 import java.util.stream.Collectors;
 30 
 31 import javax.lang.model.element.Element;
 32 import javax.lang.model.element.PackageElement;
 33 import javax.lang.model.element.TypeElement;
 34 import javax.tools.JavaFileManager;
 35 import javax.tools.JavaFileObject;
 36 import javax.tools.StandardJavaFileManager;
 37 
 38 import com.sun.source.util.DocTreePath;
 39 
 40 import jdk.javadoc.doclet.Doclet;
 41 import jdk.javadoc.doclet.DocletEnvironment;
 42 import jdk.javadoc.doclet.Reporter;
 43 import jdk.javadoc.doclet.StandardDoclet;
 44 import jdk.javadoc.doclet.Taglet;
<span class="line-added"> 45 import jdk.javadoc.internal.Versions;</span>
 46 import jdk.javadoc.internal.doclets.toolkit.BaseConfiguration;
 47 import jdk.javadoc.internal.doclets.toolkit.DocletException;
 48 import jdk.javadoc.internal.doclets.toolkit.Messages;
 49 import jdk.javadoc.internal.doclets.toolkit.Resources;
 50 import jdk.javadoc.internal.doclets.toolkit.WriterFactory;
 51 import jdk.javadoc.internal.doclets.toolkit.util.DocFile;
 52 import jdk.javadoc.internal.doclets.toolkit.util.DocPath;
 53 import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;
 54 


 55 /**
 56  * Configure the output based on the command-line options.
 57  * &lt;p&gt;
 58  * Also determine the length of the command-line option. For example,
 59  * for a option &quot;-header&quot; there will be a string argument associated, then the
 60  * the length of option &quot;-header&quot; is two. But for option &quot;-nohelp&quot; no argument
 61  * is needed so it&#39;s length is 1.
 62  * &lt;/p&gt;
 63  * &lt;p&gt;
 64  * Also do the error checking on the options used. For example it is illegal to
 65  * use &quot;-helpfile&quot; option when already &quot;-nohelp&quot; option is used.
 66  * &lt;/p&gt;
 67  *
 68  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
 69  *  If you write code that depends on this, you do so at your own risk.
 70  *  This code and its internal interfaces are subject to change or
 71  *  deletion without notice.&lt;/b&gt;
 72  */
 73 public class HtmlConfiguration extends BaseConfiguration {
 74 
</pre>
<hr />
<pre>
124         // Use the default locale for console messages.
125         Resources msgResources = new Resources(Locale.getDefault(),
126                 BaseConfiguration.sharedResourceBundleName,
127                 &quot;jdk.javadoc.internal.doclets.formats.html.resources.standard&quot;);
128 
129         // Use the provided locale for generated docs
130         // Ideally, the doc resources would be in different resource files than the
131         // message resources, so that we do not have different copies of the same resources.
132         if (locale.equals(Locale.getDefault())) {
133             docResources = msgResources;
134         } else {
135             docResources = new Resources(locale,
136                     BaseConfiguration.sharedResourceBundleName,
137                     &quot;jdk.javadoc.internal.doclets.formats.html.resources.standard&quot;);
138         }
139 
140         messages = new Messages(this, msgResources);
141         contents = new Contents(this);
142         options = new HtmlOptions(this);
143 
<span class="line-modified">144         Runtime.Version v;</span>
145         try {
<span class="line-modified">146             v = Versions.javadocVersion();</span>
<span class="line-modified">147         } catch (RuntimeException e) {</span>
<span class="line-modified">148             assert false : e;</span>
<span class="line-modified">149             v = Runtime.version(); // arguably, the only sensible default</span>





150         }
151         docletVersion = v;
152     }
153 
<span class="line-modified">154     private final Runtime.Version docletVersion;</span>


155     public final Date startTime = new Date();
156 
157     @Override
<span class="line-modified">158     public Runtime.Version getDocletVersion() {</span>
159         return docletVersion;
160     }
161 
<span class="line-added">162     @Override</span>
<span class="line-added">163     public String getDocletVersionString() {</span>
<span class="line-added">164         return Versions.shortVersionStringOf(docletVersion);</span>
<span class="line-added">165     }</span>
<span class="line-added">166 </span>
167     @Override
168     public Resources getDocResources() {
169         return docResources;
170     }
171 
172     /**
173      * Returns a utility object providing commonly used fragments of content.
174      *
175      * @return a utility object providing commonly used fragments of content
176      */
177     public Contents getContents() {
178         return contents;
179     }
180 
181     @Override
182     public Messages getMessages() {
183         return messages;
184     }
185 
186     @Override
</pre>
</td>
</tr>
</table>
<center><a href="HelpWriter.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="HtmlDocletWriter.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>