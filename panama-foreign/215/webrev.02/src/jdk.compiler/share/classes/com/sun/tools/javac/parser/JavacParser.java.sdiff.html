<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.compiler/share/classes/com/sun/tools/javac/parser/JavacParser.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../jvm/ClassReader.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../jdk.hotspot.agent/linux/native/libsaproc/DwarfParser.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/com/sun/tools/javac/parser/JavacParser.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
3744      *  @param mods    The modifiers starting the class declaration
3745      *  @param dc       The documentation comment for the class, or null.
3746      */
3747     protected JCClassDecl classDeclaration(JCModifiers mods, Comment dc) {
3748         int pos = token.pos;
3749         accept(CLASS);
3750         Name name = typeName();
3751 
3752         List&lt;JCTypeParameter&gt; typarams = typeParametersOpt();
3753 
3754         JCExpression extending = null;
3755         if (token.kind == EXTENDS) {
3756             nextToken();
3757             extending = parseType();
3758         }
3759         List&lt;JCExpression&gt; implementing = List.nil();
3760         if (token.kind == IMPLEMENTS) {
3761             nextToken();
3762             implementing = typeList();
3763         }
<span class="line-modified">3764         List&lt;JCExpression&gt; permitting = List.nil();</span>
<span class="line-removed">3765         if (allowSealedTypes &amp;&amp; token.kind == IDENTIFIER &amp;&amp; token.name() == names.permits) {</span>
<span class="line-removed">3766             checkSourceLevel(Feature.SEALED_CLASSES);</span>
<span class="line-removed">3767             if ((mods.flags &amp; Flags.SEALED) == 0) {</span>
<span class="line-removed">3768                 log.error(token.pos, Errors.InvalidPermitsClause(Fragments.ClassIsNotSealed(&quot;class&quot;)));</span>
<span class="line-removed">3769             }</span>
<span class="line-removed">3770             nextToken();</span>
<span class="line-removed">3771             permitting = qualidentList(false);</span>
<span class="line-removed">3772         }</span>
3773         List&lt;JCTree&gt; defs = classInterfaceOrRecordBody(name, false, false);
3774         JCClassDecl result = toP(F.at(pos).ClassDef(
3775             mods, name, typarams, extending, implementing, permitting, defs));
3776         attach(result, dc);
3777         return result;
3778     }
3779 
3780     protected JCClassDecl recordDeclaration(JCModifiers mods, Comment dc) {
3781         int pos = token.pos;
3782         nextToken();
3783         mods.flags |= Flags.RECORD;
3784         Name name = typeName();
3785 
3786         List&lt;JCTypeParameter&gt; typarams = typeParametersOpt();
3787 
3788         List&lt;JCVariableDecl&gt; headerFields = formalParameters(false, true);
3789 
3790         List&lt;JCExpression&gt; implementing = List.nil();
3791         if (token.kind == IMPLEMENTS) {
3792             nextToken();
</pre>
<hr />
<pre>
3832     }
3833 
3834     /** InterfaceDeclaration = INTERFACE Ident TypeParametersOpt
3835      *                         [EXTENDS TypeList] InterfaceBody
3836      *  @param mods    The modifiers starting the interface declaration
3837      *  @param dc       The documentation comment for the interface, or null.
3838      */
3839     protected JCClassDecl interfaceDeclaration(JCModifiers mods, Comment dc) {
3840         int pos = token.pos;
3841         accept(INTERFACE);
3842 
3843         Name name = typeName();
3844 
3845         List&lt;JCTypeParameter&gt; typarams = typeParametersOpt();
3846 
3847         List&lt;JCExpression&gt; extending = List.nil();
3848         if (token.kind == EXTENDS) {
3849             nextToken();
3850             extending = typeList();
3851         }
<span class="line-modified">3852         List&lt;JCExpression&gt; permitting = List.nil();</span>
<span class="line-removed">3853         if (allowSealedTypes &amp;&amp; token.kind == IDENTIFIER &amp;&amp; token.name() == names.permits) {</span>
<span class="line-removed">3854             checkSourceLevel(Feature.SEALED_CLASSES);</span>
<span class="line-removed">3855             if ((mods.flags &amp; Flags.SEALED) == 0) {</span>
<span class="line-removed">3856                 log.error(token.pos, Errors.InvalidPermitsClause(Fragments.ClassIsNotSealed(&quot;interface&quot;)));</span>
<span class="line-removed">3857             }</span>
<span class="line-removed">3858             nextToken();</span>
<span class="line-removed">3859             permitting = typeList();</span>
<span class="line-removed">3860         }</span>
3861         List&lt;JCTree&gt; defs;
3862         defs = classInterfaceOrRecordBody(name, true, false);
3863         JCClassDecl result = toP(F.at(pos).ClassDef(
3864             mods, name, typarams, null, extending, permitting, defs));
3865         attach(result, dc);
3866         return result;
3867     }
3868 












3869     /** EnumDeclaration = ENUM Ident [IMPLEMENTS TypeList] EnumBody
3870      *  @param mods    The modifiers starting the enum declaration
3871      *  @param dc       The documentation comment for the enum, or null.
3872      */
3873     protected JCClassDecl enumDeclaration(JCModifiers mods, Comment dc) {
3874         int pos = token.pos;
3875         accept(ENUM);
3876 
3877         Name name = typeName();
3878 
3879         List&lt;JCExpression&gt; implementing = List.nil();
3880         if (token.kind == IMPLEMENTS) {
3881             nextToken();
3882             implementing = typeList();
3883         }
3884 
3885         List&lt;JCTree&gt; defs = enumBody(name);
3886         mods.flags |= Flags.ENUM;
3887         JCClassDecl result = toP(F.at(pos).
3888             ClassDef(mods, name, List.nil(),
</pre>
</td>
<td>
<hr />
<pre>
3744      *  @param mods    The modifiers starting the class declaration
3745      *  @param dc       The documentation comment for the class, or null.
3746      */
3747     protected JCClassDecl classDeclaration(JCModifiers mods, Comment dc) {
3748         int pos = token.pos;
3749         accept(CLASS);
3750         Name name = typeName();
3751 
3752         List&lt;JCTypeParameter&gt; typarams = typeParametersOpt();
3753 
3754         JCExpression extending = null;
3755         if (token.kind == EXTENDS) {
3756             nextToken();
3757             extending = parseType();
3758         }
3759         List&lt;JCExpression&gt; implementing = List.nil();
3760         if (token.kind == IMPLEMENTS) {
3761             nextToken();
3762             implementing = typeList();
3763         }
<span class="line-modified">3764         List&lt;JCExpression&gt; permitting = permitsClause(mods, &quot;class&quot;);</span>








3765         List&lt;JCTree&gt; defs = classInterfaceOrRecordBody(name, false, false);
3766         JCClassDecl result = toP(F.at(pos).ClassDef(
3767             mods, name, typarams, extending, implementing, permitting, defs));
3768         attach(result, dc);
3769         return result;
3770     }
3771 
3772     protected JCClassDecl recordDeclaration(JCModifiers mods, Comment dc) {
3773         int pos = token.pos;
3774         nextToken();
3775         mods.flags |= Flags.RECORD;
3776         Name name = typeName();
3777 
3778         List&lt;JCTypeParameter&gt; typarams = typeParametersOpt();
3779 
3780         List&lt;JCVariableDecl&gt; headerFields = formalParameters(false, true);
3781 
3782         List&lt;JCExpression&gt; implementing = List.nil();
3783         if (token.kind == IMPLEMENTS) {
3784             nextToken();
</pre>
<hr />
<pre>
3824     }
3825 
3826     /** InterfaceDeclaration = INTERFACE Ident TypeParametersOpt
3827      *                         [EXTENDS TypeList] InterfaceBody
3828      *  @param mods    The modifiers starting the interface declaration
3829      *  @param dc       The documentation comment for the interface, or null.
3830      */
3831     protected JCClassDecl interfaceDeclaration(JCModifiers mods, Comment dc) {
3832         int pos = token.pos;
3833         accept(INTERFACE);
3834 
3835         Name name = typeName();
3836 
3837         List&lt;JCTypeParameter&gt; typarams = typeParametersOpt();
3838 
3839         List&lt;JCExpression&gt; extending = List.nil();
3840         if (token.kind == EXTENDS) {
3841             nextToken();
3842             extending = typeList();
3843         }
<span class="line-modified">3844         List&lt;JCExpression&gt; permitting = permitsClause(mods, &quot;interface&quot;);</span>








3845         List&lt;JCTree&gt; defs;
3846         defs = classInterfaceOrRecordBody(name, true, false);
3847         JCClassDecl result = toP(F.at(pos).ClassDef(
3848             mods, name, typarams, null, extending, permitting, defs));
3849         attach(result, dc);
3850         return result;
3851     }
3852 
<span class="line-added">3853     List&lt;JCExpression&gt; permitsClause(JCModifiers mods, String classOrInterface) {</span>
<span class="line-added">3854         if (allowSealedTypes &amp;&amp; token.kind == IDENTIFIER &amp;&amp; token.name() == names.permits) {</span>
<span class="line-added">3855             checkSourceLevel(Feature.SEALED_CLASSES);</span>
<span class="line-added">3856             if ((mods.flags &amp; Flags.SEALED) == 0) {</span>
<span class="line-added">3857                 log.error(token.pos, Errors.InvalidPermitsClause(Fragments.ClassIsNotSealed(classOrInterface)));</span>
<span class="line-added">3858             }</span>
<span class="line-added">3859             nextToken();</span>
<span class="line-added">3860             return qualidentList(false);</span>
<span class="line-added">3861         }</span>
<span class="line-added">3862         return List.nil();</span>
<span class="line-added">3863     }</span>
<span class="line-added">3864 </span>
3865     /** EnumDeclaration = ENUM Ident [IMPLEMENTS TypeList] EnumBody
3866      *  @param mods    The modifiers starting the enum declaration
3867      *  @param dc       The documentation comment for the enum, or null.
3868      */
3869     protected JCClassDecl enumDeclaration(JCModifiers mods, Comment dc) {
3870         int pos = token.pos;
3871         accept(ENUM);
3872 
3873         Name name = typeName();
3874 
3875         List&lt;JCExpression&gt; implementing = List.nil();
3876         if (token.kind == IMPLEMENTS) {
3877             nextToken();
3878             implementing = typeList();
3879         }
3880 
3881         List&lt;JCTree&gt; defs = enumBody(name);
3882         mods.flags |= Flags.ENUM;
3883         JCClassDecl result = toP(F.at(pos).
3884             ClassDef(mods, name, List.nil(),
</pre>
</td>
</tr>
</table>
<center><a href="../jvm/ClassReader.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../jdk.hotspot.agent/linux/native/libsaproc/DwarfParser.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>