<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/package-info.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="MemorySegment.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../internal/foreign/AbstractMemorySegmentImpl.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.incubator.foreign/share/classes/jdk/incubator/foreign/package-info.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 40,20 ***</span>
   *
   * &lt;pre&gt;{@code
  static final VarHandle intHandle = MemoryHandles.varHandle(int.class, ByteOrder.nativeOrder());
  
  try (MemorySegment segment = MemorySegment.allocateNative(10 * 4)) {
<span class="line-modified">!    MemoryAddress base = segment.baseAddress();</span>
<span class="line-modified">!    for (long i = 0 ; i &lt; 10 ; i++) {</span>
<span class="line-modified">!      intHandle.set(base.addOffset(i * 4), (int)i);</span>
<span class="line-modified">!    }</span>
<span class="line-modified">!  }</span>
   * }&lt;/pre&gt;
   *
   * Here we create a var handle, namely {@code intHandle}, to manipulate values of the primitive type {@code int}, at
   * a given memory location. Also, {@code intHandle} is stored in a {@code static} and {@code final} field, to achieve
<span class="line-modified">!  * better performances and allow for inlining of the memory access operation through the {@link java.lang.invoke.VarHandle}</span>
   * instance. We then create a &lt;em&gt;native&lt;/em&gt; memory segment, that is, a memory segment backed by
   * off-heap memory; the size of the segment is 40 bytes, enough to store 10 values of the primitive type {@code int}.
   * The segment is created inside a &lt;em&gt;try-with-resources&lt;/em&gt; construct: this idiom ensures that all the memory resources
   * associated with the segment will be released at the end of the block, according to the semantics described in
   * Section {@jls 14.20.3} of &lt;cite&gt;The Java&amp;trade; Language Specification&lt;/cite&gt;. Inside the try-with-resources block, we initialize
<span class="line-new-header">--- 40,20 ---</span>
   *
   * &lt;pre&gt;{@code
  static final VarHandle intHandle = MemoryHandles.varHandle(int.class, ByteOrder.nativeOrder());
  
  try (MemorySegment segment = MemorySegment.allocateNative(10 * 4)) {
<span class="line-modified">!     MemoryAddress base = segment.baseAddress();</span>
<span class="line-modified">!     for (long i = 0 ; i &lt; 10 ; i++) {</span>
<span class="line-modified">!        intHandle.set(base.addOffset(i * 4), (int)i);</span>
<span class="line-modified">!     }</span>
<span class="line-modified">! }</span>
   * }&lt;/pre&gt;
   *
   * Here we create a var handle, namely {@code intHandle}, to manipulate values of the primitive type {@code int}, at
   * a given memory location. Also, {@code intHandle} is stored in a {@code static} and {@code final} field, to achieve
<span class="line-modified">!  * better performance and allow for inlining of the memory access operation through the {@link java.lang.invoke.VarHandle}</span>
   * instance. We then create a &lt;em&gt;native&lt;/em&gt; memory segment, that is, a memory segment backed by
   * off-heap memory; the size of the segment is 40 bytes, enough to store 10 values of the primitive type {@code int}.
   * The segment is created inside a &lt;em&gt;try-with-resources&lt;/em&gt; construct: this idiom ensures that all the memory resources
   * associated with the segment will be released at the end of the block, according to the semantics described in
   * Section {@jls 14.20.3} of &lt;cite&gt;The Java&amp;trade; Language Specification&lt;/cite&gt;. Inside the try-with-resources block, we initialize
</pre>
<center><a href="MemorySegment.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../internal/foreign/AbstractMemorySegmentImpl.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>