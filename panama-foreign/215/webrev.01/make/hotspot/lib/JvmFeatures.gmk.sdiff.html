<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/hotspot/lib/JvmFeatures.gmk</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
<body>
<center><a href="../gensrc/GensrcJvmti.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="JvmOverrideFiles.gmk.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/hotspot/lib/JvmFeatures.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 28 ################################################################################
 29 # Setup CFLAGS and EXCLUDES for the libjvm compilation, depending on which
 30 # jvm features are selected for this jvm variant.
 31 
 32 ifeq ($(call check-jvm-feature, compiler1), true)
 33   JVM_CFLAGS_FEATURES += -DCOMPILER1
 34 else
 35   JVM_EXCLUDE_PATTERNS += c1_ c1/
 36 endif
 37 
 38 ifeq ($(call check-jvm-feature, compiler2), true)
 39   JVM_CFLAGS_FEATURES += -DCOMPILER2
 40   JVM_SRC_DIRS += $(JVM_VARIANT_OUTPUTDIR)/gensrc/adfiles
 41 else
 42   JVM_EXCLUDES += opto libadt
 43   JVM_EXCLUDE_FILES += bcEscapeAnalyzer.cpp ciTypeFlow.cpp
 44   JVM_EXCLUDE_PATTERNS += c2_ runtime_ /c2/
 45 endif
 46 
 47 ifeq ($(call check-jvm-feature, zero), true)
<span class="line-modified"> 48   JVM_CFLAGS_FEATURES += -DZERO -DCC_INTERP -DZERO_LIBARCH=&#39;&quot;$(OPENJDK_TARGET_CPU_LEGACY_LIB)&quot;&#39; $(LIBFFI_CFLAGS)</span>




 49   JVM_LIBS_FEATURES += $(LIBFFI_LIBS)
 50   ifeq ($(ENABLE_LIBFFI_BUNDLING), true)
 51     JVM_LDFLAGS_FEATURES += $(call SET_EXECUTABLE_ORIGIN,/..)
 52   endif


 53 endif
 54 
 55 ifeq ($(JVM_VARIANT), custom)
 56   JVM_CFLAGS_FEATURES += -DVMTYPE=\&quot;Custom\&quot;
 57 endif
 58 
 59 ifeq ($(call check-jvm-feature, minimal), true)
 60   JVM_CFLAGS_FEATURES += -DMINIMAL_JVM -DVMTYPE=\&quot;Minimal\&quot;
 61   ifeq ($(call isTargetOs, linux), true)
 62     # Override the default -g with a more liberal strip policy for the minimal JVM
 63     JVM_STRIPFLAGS := --strip-unneeded
 64   endif
 65 endif
 66 
 67 ifeq ($(call check-jvm-feature, dtrace), true)
 68   JVM_CFLAGS_FEATURES += -DDTRACE_ENABLED
 69 endif
 70 
 71 ifeq ($(call check-jvm-feature, static-build), true)
 72   JVM_CFLAGS_FEATURES += -DSTATIC_BUILD=1
</pre>
</td>
<td>
<hr />
<pre>
 28 ################################################################################
 29 # Setup CFLAGS and EXCLUDES for the libjvm compilation, depending on which
 30 # jvm features are selected for this jvm variant.
 31 
 32 ifeq ($(call check-jvm-feature, compiler1), true)
 33   JVM_CFLAGS_FEATURES += -DCOMPILER1
 34 else
 35   JVM_EXCLUDE_PATTERNS += c1_ c1/
 36 endif
 37 
 38 ifeq ($(call check-jvm-feature, compiler2), true)
 39   JVM_CFLAGS_FEATURES += -DCOMPILER2
 40   JVM_SRC_DIRS += $(JVM_VARIANT_OUTPUTDIR)/gensrc/adfiles
 41 else
 42   JVM_EXCLUDES += opto libadt
 43   JVM_EXCLUDE_FILES += bcEscapeAnalyzer.cpp ciTypeFlow.cpp
 44   JVM_EXCLUDE_PATTERNS += c2_ runtime_ /c2/
 45 endif
 46 
 47 ifeq ($(call check-jvm-feature, zero), true)
<span class="line-modified"> 48   JVM_EXCLUDES += opto libadt</span>
<span class="line-added"> 49   JVM_EXCLUDE_PATTERNS += c1_ c1/ c2_ runtime_ /c2/</span>
<span class="line-added"> 50   JVM_EXCLUDE_FILES += templateInterpreter.cpp templateInterpreterGenerator.cpp \</span>
<span class="line-added"> 51                        bcEscapeAnalyzer.cpp ciTypeFlow.cpp</span>
<span class="line-added"> 52   JVM_CFLAGS_FEATURES += -DZERO -DZERO_LIBARCH=&#39;&quot;$(OPENJDK_TARGET_CPU_LEGACY_LIB)&quot;&#39; $(LIBFFI_CFLAGS)</span>
 53   JVM_LIBS_FEATURES += $(LIBFFI_LIBS)
 54   ifeq ($(ENABLE_LIBFFI_BUNDLING), true)
 55     JVM_LDFLAGS_FEATURES += $(call SET_EXECUTABLE_ORIGIN,/..)
 56   endif
<span class="line-added"> 57 else</span>
<span class="line-added"> 58   JVM_EXCLUDE_PATTERNS += /zero/</span>
 59 endif
 60 
 61 ifeq ($(JVM_VARIANT), custom)
 62   JVM_CFLAGS_FEATURES += -DVMTYPE=\&quot;Custom\&quot;
 63 endif
 64 
 65 ifeq ($(call check-jvm-feature, minimal), true)
 66   JVM_CFLAGS_FEATURES += -DMINIMAL_JVM -DVMTYPE=\&quot;Minimal\&quot;
 67   ifeq ($(call isTargetOs, linux), true)
 68     # Override the default -g with a more liberal strip policy for the minimal JVM
 69     JVM_STRIPFLAGS := --strip-unneeded
 70   endif
 71 endif
 72 
 73 ifeq ($(call check-jvm-feature, dtrace), true)
 74   JVM_CFLAGS_FEATURES += -DDTRACE_ENABLED
 75 endif
 76 
 77 ifeq ($(call check-jvm-feature, static-build), true)
 78   JVM_CFLAGS_FEATURES += -DSTATIC_BUILD=1
</pre>
</td>
</tr>
</table>
<center><a href="../gensrc/GensrcJvmti.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="JvmOverrideFiles.gmk.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>