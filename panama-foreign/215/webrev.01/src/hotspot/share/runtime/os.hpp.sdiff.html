<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/runtime/os.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="mutexLocker.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="reflection.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/os.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 
 25 #ifndef SHARE_RUNTIME_OS_HPP
 26 #define SHARE_RUNTIME_OS_HPP
 27 
 28 #include &quot;jvm.h&quot;
 29 #include &quot;jvmtifiles/jvmti.h&quot;
 30 #include &quot;metaprogramming/isRegisteredEnum.hpp&quot;
 31 #include &quot;metaprogramming/integralConstant.hpp&quot;
<span class="line-removed"> 32 #include &quot;runtime/extendedPC.hpp&quot;</span>
 33 #include &quot;utilities/exceptions.hpp&quot;
 34 #include &quot;utilities/ostream.hpp&quot;
 35 #include &quot;utilities/macros.hpp&quot;
 36 #ifndef _WINDOWS
 37 # include &lt;setjmp.h&gt;
 38 #endif
 39 #ifdef __APPLE__
 40 # include &lt;mach/mach_time.h&gt;
 41 #endif
 42 
 43 class AgentLibrary;
 44 class frame;
 45 
 46 // os defines the interface to operating system; this includes traditional
 47 // OS services (time, I/O) as well as other functionality with system-
 48 // dependent code.
 49 
 50 class Thread;
 51 class JavaThread;
 52 class NativeCallStack;
</pre>
<hr />
<pre>
456   static intx current_thread_id();
457   static int current_process_id();
458 
459   // Short standalone OS sleep routines suitable for slow path spin loop.
460   // Ignores safepoints/suspension/Thread.interrupt() (so keep it short).
461   // ms/ns = 0, will sleep for the least amount of time allowed by the OS.
462   // Maximum sleep time is just under 1 second.
463   static void naked_short_sleep(jlong ms);
464   static void naked_short_nanosleep(jlong ns);
465   // Longer standalone OS sleep routine - a convenience wrapper around
466   // multiple calls to naked_short_sleep. Only for use by non-JavaThreads.
467   static void naked_sleep(jlong millis);
468   // Never returns, use with CAUTION
469   static void infinite_sleep();
470   static void naked_yield () ;
471   static OSReturn set_priority(Thread* thread, ThreadPriority priority);
472   static OSReturn get_priority(const Thread* const thread, ThreadPriority&amp; priority);
473 
474   static int pd_self_suspend_thread(Thread* thread);
475 
<span class="line-modified">476   static ExtendedPC fetch_frame_from_context(const void* ucVoid, intptr_t** sp, intptr_t** fp);</span>
477   static frame      fetch_frame_from_context(const void* ucVoid);
<span class="line-removed">478   static frame      fetch_frame_from_ucontext(Thread* thread, void* ucVoid);</span>
479 
480   static void breakpoint();
481   static bool start_debugging(char *buf, int buflen);
482 
483   static address current_stack_pointer();
484   static address current_stack_base();
485   static size_t current_stack_size();
486 
487   static void verify_stack_alignment() PRODUCT_RETURN;
488 
489   static bool message_box(const char* title, const char* message);
490 
491   // run cmd in a separate process and return its exit code; or -1 on failures
492   static int fork_and_exec(char *cmd, bool use_vfork_if_available = false);
493 
494   // Call ::exit() on all platforms but Windows
495   static void exit(int num);
496 
497   // Terminate the VM, but don&#39;t exit the process
498   static void shutdown();
</pre>
</td>
<td>
<hr />
<pre>
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 
 25 #ifndef SHARE_RUNTIME_OS_HPP
 26 #define SHARE_RUNTIME_OS_HPP
 27 
 28 #include &quot;jvm.h&quot;
 29 #include &quot;jvmtifiles/jvmti.h&quot;
 30 #include &quot;metaprogramming/isRegisteredEnum.hpp&quot;
 31 #include &quot;metaprogramming/integralConstant.hpp&quot;

 32 #include &quot;utilities/exceptions.hpp&quot;
 33 #include &quot;utilities/ostream.hpp&quot;
 34 #include &quot;utilities/macros.hpp&quot;
 35 #ifndef _WINDOWS
 36 # include &lt;setjmp.h&gt;
 37 #endif
 38 #ifdef __APPLE__
 39 # include &lt;mach/mach_time.h&gt;
 40 #endif
 41 
 42 class AgentLibrary;
 43 class frame;
 44 
 45 // os defines the interface to operating system; this includes traditional
 46 // OS services (time, I/O) as well as other functionality with system-
 47 // dependent code.
 48 
 49 class Thread;
 50 class JavaThread;
 51 class NativeCallStack;
</pre>
<hr />
<pre>
455   static intx current_thread_id();
456   static int current_process_id();
457 
458   // Short standalone OS sleep routines suitable for slow path spin loop.
459   // Ignores safepoints/suspension/Thread.interrupt() (so keep it short).
460   // ms/ns = 0, will sleep for the least amount of time allowed by the OS.
461   // Maximum sleep time is just under 1 second.
462   static void naked_short_sleep(jlong ms);
463   static void naked_short_nanosleep(jlong ns);
464   // Longer standalone OS sleep routine - a convenience wrapper around
465   // multiple calls to naked_short_sleep. Only for use by non-JavaThreads.
466   static void naked_sleep(jlong millis);
467   // Never returns, use with CAUTION
468   static void infinite_sleep();
469   static void naked_yield () ;
470   static OSReturn set_priority(Thread* thread, ThreadPriority priority);
471   static OSReturn get_priority(const Thread* const thread, ThreadPriority&amp; priority);
472 
473   static int pd_self_suspend_thread(Thread* thread);
474 
<span class="line-modified">475   static address    fetch_frame_from_context(const void* ucVoid, intptr_t** sp, intptr_t** fp);</span>
476   static frame      fetch_frame_from_context(const void* ucVoid);

477 
478   static void breakpoint();
479   static bool start_debugging(char *buf, int buflen);
480 
481   static address current_stack_pointer();
482   static address current_stack_base();
483   static size_t current_stack_size();
484 
485   static void verify_stack_alignment() PRODUCT_RETURN;
486 
487   static bool message_box(const char* title, const char* message);
488 
489   // run cmd in a separate process and return its exit code; or -1 on failures
490   static int fork_and_exec(char *cmd, bool use_vfork_if_available = false);
491 
492   // Call ::exit() on all platforms but Windows
493   static void exit(int num);
494 
495   // Terminate the VM, but don&#39;t exit the process
496   static void shutdown();
</pre>
</td>
</tr>
</table>
<center><a href="mutexLocker.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="reflection.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>