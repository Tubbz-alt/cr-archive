<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.hotspot.agent/macosx/native/libsaproc/libproc_impl.c</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../../../linux/native/libsaproc/DwarfParser.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../../share/classes/sun/jvm/hotspot/HotSpotTypeDataBase.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.hotspot.agent/macosx/native/libsaproc/libproc_impl.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 39       alt_root_len = strlen(alt_root);
 40     } else {
 41       alt_root_len = 0;
 42     }
 43   }
 44 }
 45 
 46 int pathmap_open(const char* name) {
 47   int fd;
 48   char alt_path[PATH_MAX + 1];
 49 
 50   init_alt_root();
 51 
 52   if (alt_root_len &gt; 0) {
 53     strcpy(alt_path, alt_root);
 54     strcat(alt_path, name);
 55     fd = open(alt_path, O_RDONLY);
 56     if (fd &gt;= 0) {
 57       print_debug(&quot;path %s substituted for %s\n&quot;, alt_path, name);
 58       return fd;


 59     }
 60 
 61     if (strrchr(name, &#39;/&#39;)) {
 62       strcpy(alt_path, alt_root);
 63       strcat(alt_path, strrchr(name, &#39;/&#39;));
 64       fd = open(alt_path, O_RDONLY);
 65       if (fd &gt;= 0) {
 66         print_debug(&quot;path %s substituted for %s\n&quot;, alt_path, name);
 67         return fd;


 68       }
 69     }
 70   } else {
 71     fd = open(name, O_RDONLY);
 72     if (fd &gt;= 0) {
 73       return fd;


 74     }
 75   }
 76   return -1;
 77 }
 78 
 79 static bool _libsaproc_debug;
 80 
 81 void print_debug(const char* format,...) {
 82   if (_libsaproc_debug) {
 83     va_list alist;
 84 
 85     va_start(alist, format);
 86     fputs(&quot;libsaproc DEBUG: &quot;, stderr);
 87     vfprintf(stderr, format, alist);
 88     va_end(alist);
 89   }
 90 }
 91 
 92 void print_error(const char* format,...) {
 93   va_list alist;
</pre>
</td>
<td>
<hr />
<pre>
 39       alt_root_len = strlen(alt_root);
 40     } else {
 41       alt_root_len = 0;
 42     }
 43   }
 44 }
 45 
 46 int pathmap_open(const char* name) {
 47   int fd;
 48   char alt_path[PATH_MAX + 1];
 49 
 50   init_alt_root();
 51 
 52   if (alt_root_len &gt; 0) {
 53     strcpy(alt_path, alt_root);
 54     strcat(alt_path, name);
 55     fd = open(alt_path, O_RDONLY);
 56     if (fd &gt;= 0) {
 57       print_debug(&quot;path %s substituted for %s\n&quot;, alt_path, name);
 58       return fd;
<span class="line-added"> 59     } else {</span>
<span class="line-added"> 60       print_debug(&quot;can&#39;t open %s\n&quot;, alt_path);</span>
 61     }
 62 
 63     if (strrchr(name, &#39;/&#39;)) {
 64       strcpy(alt_path, alt_root);
 65       strcat(alt_path, strrchr(name, &#39;/&#39;));
 66       fd = open(alt_path, O_RDONLY);
 67       if (fd &gt;= 0) {
 68         print_debug(&quot;path %s substituted for %s\n&quot;, alt_path, name);
 69         return fd;
<span class="line-added"> 70     } else {</span>
<span class="line-added"> 71       print_debug(&quot;can&#39;t open %s\n&quot;, alt_path);</span>
 72       }
 73     }
 74   } else {
 75     fd = open(name, O_RDONLY);
 76     if (fd &gt;= 0) {
 77       return fd;
<span class="line-added"> 78     } else {</span>
<span class="line-added"> 79       print_debug(&quot;can&#39;t open %s\n&quot;, name);</span>
 80     }
 81   }
 82   return -1;
 83 }
 84 
 85 static bool _libsaproc_debug;
 86 
 87 void print_debug(const char* format,...) {
 88   if (_libsaproc_debug) {
 89     va_list alist;
 90 
 91     va_start(alist, format);
 92     fputs(&quot;libsaproc DEBUG: &quot;, stderr);
 93     vfprintf(stderr, format, alist);
 94     va_end(alist);
 95   }
 96 }
 97 
 98 void print_error(const char* format,...) {
 99   va_list alist;
</pre>
</td>
</tr>
</table>
<center><a href="../../../linux/native/libsaproc/DwarfParser.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../../share/classes/sun/jvm/hotspot/HotSpotTypeDataBase.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>