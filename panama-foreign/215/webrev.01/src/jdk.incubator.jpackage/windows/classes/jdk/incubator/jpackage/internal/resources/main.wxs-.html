<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/jdk.incubator.jpackage/windows/classes/jdk/incubator/jpackage/internal/resources/main.wxs</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
  2 &lt;Wix xmlns=&quot;http://schemas.microsoft.com/wix/2006/wi&quot;
  3      xmlns:util=&quot;http://schemas.microsoft.com/wix/UtilExtension&quot;&gt;
  4 
  5   &lt;?ifdef JpIsSystemWide ?&gt;
  6     &lt;?define JpInstallScope=&quot;perMachine&quot;?&gt;
  7   &lt;?else?&gt;
  8     &lt;?define JpInstallScope=&quot;perUser&quot;?&gt;
  9   &lt;?endif?&gt;
 10 
 11   &lt;?define JpProductLanguage=1033 ?&gt;
 12   &lt;?define JpInstallerVersion=200 ?&gt;
 13   &lt;?define JpCompressedMsi=yes ?&gt;
 14 
 15   &lt;?include $(var.JpConfigDir)/overrides.wxi ?&gt;
 16 
 17   &lt;Product
 18     Id=&quot;$(var.JpProductCode)&quot;
 19     Name=&quot;$(var.JpAppName)&quot;
 20     Language=&quot;$(var.JpProductLanguage)&quot;
 21     Version=&quot;$(var.JpAppVersion)&quot;
 22     Manufacturer=&quot;$(var.JpAppVendor)&quot;
 23     UpgradeCode=&quot;$(var.JpProductUpgradeCode)&quot;&gt;
 24 
 25     &lt;Package
 26       Description=&quot;$(var.JpAppDescription)&quot;
 27       Manufacturer=&quot;$(var.JpAppVendor)&quot;
 28       InstallerVersion=&quot;$(var.JpInstallerVersion)&quot;
 29       Compressed=&quot;$(var.JpCompressedMsi)&quot;
 30       InstallScope=&quot;$(var.JpInstallScope)&quot; Platform=&quot;x64&quot;
 31     /&gt;
 32 
 33     &lt;Media Id=&quot;1&quot; Cabinet=&quot;Data.cab&quot; EmbedCab=&quot;yes&quot; /&gt;
 34 
 35     &lt;?ifdef JpAllowDowngrades ?&gt;
 36     &lt;?ifdef JpAllowUpgrades ?&gt;
 37     &lt;MajorUpgrade
 38       AllowDowngrades=&quot;yes&quot;
 39       Disallow=&quot;no&quot;
 40     /&gt;
 41     &lt;?endif?&gt;
 42     &lt;?endif?&gt;
 43 
 44     &lt;?ifdef JpAllowDowngrades ?&gt;
 45     &lt;?ifndef JpAllowUpgrades ?&gt;
 46     &lt;MajorUpgrade
 47       AllowDowngrades=&quot;yes&quot;
 48       Disallow=&quot;yes&quot;
 49       DisallowUpgradeErrorMessage=&quot;!(loc.DisallowUpgradeErrorMessage)&quot;
 50     /&gt;
 51     &lt;?endif?&gt;
 52     &lt;?endif?&gt;
 53 
 54     &lt;?ifndef JpAllowDowngrades ?&gt;
 55     &lt;?ifdef JpAllowUpgrades ?&gt;
 56     &lt;MajorUpgrade
 57       AllowDowngrades=&quot;no&quot;
 58       Disallow=&quot;no&quot;
 59       DowngradeErrorMessage=&quot;!(loc.DowngradeErrorMessage)&quot;
 60     /&gt;
 61     &lt;?endif?&gt;
 62     &lt;?endif?&gt;
 63 
 64     &lt;?ifndef JpAllowDowngrades ?&gt;
 65     &lt;?ifndef JpAllowUpgrades ?&gt;
 66     &lt;MajorUpgrade
 67       AllowDowngrades=&quot;no&quot;
 68       Disallow=&quot;yes&quot;
 69       DowngradeErrorMessage=&quot;!(loc.DowngradeErrorMessage)&quot;
 70       DisallowUpgradeErrorMessage=&quot;!(loc.DisallowUpgradeErrorMessage)&quot;
 71     /&gt;
 72     &lt;?endif?&gt;
 73     &lt;?endif?&gt;
 74 
 75     &lt;!-- Standard required root --&gt;
 76     &lt;Directory Id=&quot;TARGETDIR&quot; Name=&quot;SourceDir&quot;/&gt;
 77 
 78     &lt;Feature Id=&quot;DefaultFeature&quot; Title=&quot;!(loc.MainFeatureTitle)&quot; Level=&quot;1&quot;&gt;
 79       &lt;ComponentGroupRef Id=&quot;Shortcuts&quot;/&gt;
 80       &lt;ComponentGroupRef Id=&quot;Files&quot;/&gt;
 81       &lt;ComponentGroupRef Id=&quot;FileAssociations&quot;/&gt;
 82     &lt;/Feature&gt;
 83 
 84     &lt;?ifdef JpInstallDirChooser ?&gt;
 85     &lt;Binary Id=&quot;JpCaDll&quot; SourceFile=&quot;wixhelper.dll&quot;/&gt;
 86     &lt;CustomAction Id=&quot;JpCheckInstallDir&quot; BinaryKey=&quot;JpCaDll&quot; DllEntry=&quot;CheckInstallDir&quot; /&gt;
 87     &lt;?endif?&gt;
 88 
 89     &lt;CustomAction Id=&quot;JpSetARPINSTALLLOCATION&quot; Property=&quot;ARPINSTALLLOCATION&quot; Value=&quot;[INSTALLDIR]&quot; /&gt;
 90     &lt;?ifdef JpIcon ?&gt;
 91     &lt;CustomAction Id=&quot;JpSetARPPRODUCTICON&quot; Property=&quot;ARPPRODUCTICON&quot; Value=&quot;[INSTALLDIR]$(var.JpIcon)&quot; /&gt;
 92     &lt;?endif?&gt;
 93 
 94     &lt;UI&gt;
 95       &lt;?ifdef JpInstallDirChooser ?&gt;
 96       &lt;Dialog Id=&quot;JpInvalidInstallDir&quot; Width=&quot;300&quot; Height=&quot;85&quot; Title=&quot;[ProductName] Setup&quot; NoMinimize=&quot;yes&quot;&gt;
 97         &lt;Control Id=&quot;JpInvalidInstallDirYes&quot; Type=&quot;PushButton&quot; X=&quot;100&quot; Y=&quot;55&quot; Width=&quot;50&quot; Height=&quot;15&quot; Default=&quot;no&quot; Cancel=&quot;no&quot; Text=&quot;Yes&quot;&gt;
 98           &lt;Publish Event=&quot;NewDialog&quot; Value=&quot;VerifyReadyDlg&quot;&gt;1&lt;/Publish&gt;
 99         &lt;/Control&gt;
100         &lt;Control Id=&quot;JpInvalidInstallDirNo&quot; Type=&quot;PushButton&quot; X=&quot;150&quot; Y=&quot;55&quot; Width=&quot;50&quot; Height=&quot;15&quot; Default=&quot;yes&quot; Cancel=&quot;yes&quot; Text=&quot;No&quot;&gt;
101           &lt;Publish Event=&quot;NewDialog&quot; Value=&quot;InstallDirDlg&quot;&gt;1&lt;/Publish&gt;
102         &lt;/Control&gt;
103         &lt;Control Id=&quot;Text&quot; Type=&quot;Text&quot; X=&quot;25&quot; Y=&quot;15&quot; Width=&quot;250&quot; Height=&quot;30&quot; TabSkip=&quot;no&quot;&gt;
104           &lt;Text&gt;!(loc.message.install.dir.exist)&lt;/Text&gt;
105         &lt;/Control&gt;
106       &lt;/Dialog&gt;
107 
108       &lt;!--
109         Run WixUI_InstallDir dialog in the default install directory.
110       --&gt;
111       &lt;Property Id=&quot;WIXUI_INSTALLDIR&quot; Value=&quot;INSTALLDIR&quot;/&gt;
112       &lt;UIRef Id=&quot;WixUI_InstallDir&quot; /&gt;
113 
114       &lt;Publish Dialog=&quot;InstallDirDlg&quot; Control=&quot;Next&quot; Event=&quot;DoAction&quot; Value=&quot;JpCheckInstallDir&quot; Order=&quot;3&quot;&gt;1&lt;/Publish&gt;
115       &lt;Publish Dialog=&quot;InstallDirDlg&quot; Control=&quot;Next&quot; Event=&quot;NewDialog&quot; Value=&quot;JpInvalidInstallDir&quot; Order=&quot;5&quot;&gt;INSTALLDIR_VALID=&quot;0&quot;&lt;/Publish&gt;
116       &lt;Publish Dialog=&quot;InstallDirDlg&quot; Control=&quot;Next&quot; Event=&quot;NewDialog&quot; Value=&quot;VerifyReadyDlg&quot; Order=&quot;5&quot;&gt;INSTALLDIR_VALID=&quot;1&quot;&lt;/Publish&gt;
117 
118       &lt;?ifndef JpLicenseRtf ?&gt;
119       &lt;!--
120         No license file provided.
121         Override the dialog sequence in built-in dialog set &quot;WixUI_InstallDir&quot;
122         to exclude license dialog.
123       --&gt;
124       &lt;Publish Dialog=&quot;WelcomeDlg&quot; Control=&quot;Next&quot; Event=&quot;NewDialog&quot; Value=&quot;InstallDirDlg&quot; Order=&quot;2&quot;&gt;1&lt;/Publish&gt;
125       &lt;Publish Dialog=&quot;InstallDirDlg&quot; Control=&quot;Back&quot; Event=&quot;NewDialog&quot; Value=&quot;WelcomeDlg&quot; Order=&quot;2&quot;&gt;1&lt;/Publish&gt;
126       &lt;?endif?&gt;
127 
128       &lt;?else?&gt;
129 
130       &lt;?ifdef JpLicenseRtf ?&gt;
131       &lt;UIRef Id=&quot;WixUI_Minimal&quot; /&gt;
132       &lt;?endif?&gt;
133 
134       &lt;?endif?&gt;
135     &lt;/UI&gt;
136 
137     &lt;?ifdef JpLicenseRtf ?&gt;
138     &lt;WixVariable Id=&quot;WixUILicenseRtf&quot; Value=&quot;$(var.JpLicenseRtf)&quot;/&gt;
139     &lt;?endif?&gt;
140 
141     &lt;InstallExecuteSequence&gt;
142       &lt;Custom Action=&quot;JpSetARPINSTALLLOCATION&quot; After=&quot;CostFinalize&quot;&gt;Not Installed&lt;/Custom&gt;
143       &lt;?ifdef JpIcon ?&gt;
144       &lt;Custom Action=&quot;JpSetARPPRODUCTICON&quot; After=&quot;JpSetARPINSTALLLOCATION&quot;&gt;Not Installed&lt;/Custom&gt;
145       &lt;?endif?&gt;
146     &lt;/InstallExecuteSequence&gt;
147   &lt;/Product&gt;
148 &lt;/Wix&gt;
    </pre>
  </body>
</html>