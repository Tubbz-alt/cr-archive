<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/HtmlConfiguration.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="HelpWriter.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="HtmlDocletWriter.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/HtmlConfiguration.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 40,21 ***</span>
  import jdk.javadoc.doclet.Doclet;
  import jdk.javadoc.doclet.DocletEnvironment;
  import jdk.javadoc.doclet.Reporter;
  import jdk.javadoc.doclet.StandardDoclet;
  import jdk.javadoc.doclet.Taglet;
  import jdk.javadoc.internal.doclets.toolkit.BaseConfiguration;
  import jdk.javadoc.internal.doclets.toolkit.DocletException;
  import jdk.javadoc.internal.doclets.toolkit.Messages;
  import jdk.javadoc.internal.doclets.toolkit.Resources;
  import jdk.javadoc.internal.doclets.toolkit.WriterFactory;
  import jdk.javadoc.internal.doclets.toolkit.util.DocFile;
  import jdk.javadoc.internal.doclets.toolkit.util.DocPath;
  import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;
  
<span class="line-removed">- import static javax.tools.Diagnostic.Kind.*;</span>
<span class="line-removed">- </span>
  /**
   * Configure the output based on the command-line options.
   * &lt;p&gt;
   * Also determine the length of the command-line option. For example,
   * for a option &quot;-header&quot; there will be a string argument associated, then the
<span class="line-new-header">--- 40,20 ---</span>
  import jdk.javadoc.doclet.Doclet;
  import jdk.javadoc.doclet.DocletEnvironment;
  import jdk.javadoc.doclet.Reporter;
  import jdk.javadoc.doclet.StandardDoclet;
  import jdk.javadoc.doclet.Taglet;
<span class="line-added">+ import jdk.javadoc.internal.Versions;</span>
  import jdk.javadoc.internal.doclets.toolkit.BaseConfiguration;
  import jdk.javadoc.internal.doclets.toolkit.DocletException;
  import jdk.javadoc.internal.doclets.toolkit.Messages;
  import jdk.javadoc.internal.doclets.toolkit.Resources;
  import jdk.javadoc.internal.doclets.toolkit.WriterFactory;
  import jdk.javadoc.internal.doclets.toolkit.util.DocFile;
  import jdk.javadoc.internal.doclets.toolkit.util.DocPath;
  import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;
  
  /**
   * Configure the output based on the command-line options.
   * &lt;p&gt;
   * Also determine the length of the command-line option. For example,
   * for a option &quot;-header&quot; there will be a string argument associated, then the
</pre>
<hr />
<pre>
<span class="line-old-header">*** 140,35 ***</span>
  
          messages = new Messages(this, msgResources);
          contents = new Contents(this);
          options = new HtmlOptions(this);
  
<span class="line-modified">!         String v;</span>
          try {
<span class="line-modified">!             // the version bundle is not localized</span>
<span class="line-modified">!             ResourceBundle rb = ResourceBundle.getBundle(versionBundleName, Locale.getDefault());</span>
<span class="line-modified">!             try {</span>
<span class="line-modified">!                 v = rb.getString(&quot;release&quot;);</span>
<span class="line-removed">-             } catch (MissingResourceException e) {</span>
<span class="line-removed">-                 v = defaultDocletVersion;</span>
<span class="line-removed">-             }</span>
<span class="line-removed">-         } catch (MissingResourceException e) {</span>
<span class="line-removed">-             v = defaultDocletVersion;</span>
          }
          docletVersion = v;
      }
  
<span class="line-modified">!     private static final String versionBundleName = &quot;jdk.javadoc.internal.tool.resources.version&quot;;</span>
<span class="line-removed">-     private static final String defaultDocletVersion = System.getProperty(&quot;java.version&quot;);</span>
<span class="line-removed">-     public final String docletVersion;</span>
      public final Date startTime = new Date();
  
      @Override
<span class="line-modified">!     public String getDocletVersion() {</span>
          return docletVersion;
      }
  
      @Override
      public Resources getDocResources() {
          return docResources;
      }
  
<span class="line-new-header">--- 139,33 ---</span>
  
          messages = new Messages(this, msgResources);
          contents = new Contents(this);
          options = new HtmlOptions(this);
  
<span class="line-modified">!         Runtime.Version v;</span>
          try {
<span class="line-modified">!             v = Versions.javadocVersion();</span>
<span class="line-modified">!         } catch (RuntimeException e) {</span>
<span class="line-modified">!             assert false : e;</span>
<span class="line-modified">!             v = Runtime.version(); // arguably, the only sensible default</span>
          }
          docletVersion = v;
      }
  
<span class="line-modified">!     private final Runtime.Version docletVersion;</span>
      public final Date startTime = new Date();
  
      @Override
<span class="line-modified">!     public Runtime.Version getDocletVersion() {</span>
          return docletVersion;
      }
  
<span class="line-added">+     @Override</span>
<span class="line-added">+     public String getDocletVersionString() {</span>
<span class="line-added">+         return Versions.shortVersionStringOf(docletVersion);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      @Override
      public Resources getDocResources() {
          return docResources;
      }
  
</pre>
<center><a href="HelpWriter.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="HtmlDocletWriter.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>