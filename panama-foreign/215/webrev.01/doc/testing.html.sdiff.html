<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff doc/testing.html</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="../.hgtags.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="testing.md.sdiff.html" target="_top">next &gt;</a></center>    <h2>doc/testing.html</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
120 &lt;p&gt;Applies to JTReg, GTest and Micro.&lt;/p&gt;
121 &lt;h4 id=&quot;vm_options&quot;&gt;VM_OPTIONS&lt;/h4&gt;
122 &lt;p&gt;Applies to JTReg, GTest and Micro.&lt;/p&gt;
123 &lt;h4 id=&quot;aot_modules&quot;&gt;AOT_MODULES&lt;/h4&gt;
124 &lt;p&gt;Applies to JTReg and GTest.&lt;/p&gt;
125 &lt;h4 id=&quot;jcov&quot;&gt;JCOV&lt;/h4&gt;
126 &lt;p&gt;This keywords applies globally to the test runner system. If set to &lt;code&gt;true&lt;/code&gt;, it enables JCov coverage reporting for all tests run. To be useful, the JDK under test must be run with a JDK built with JCov instrumentation (&lt;code&gt;configure --with-jcov=&amp;lt;path to directory containing lib/jcov.jar&amp;gt;&lt;/code&gt;, &lt;code&gt;make jcov-image&lt;/code&gt;).&lt;/p&gt;
127 &lt;p&gt;The simplest way to run tests with JCov coverage report is to use the special target &lt;code&gt;jcov-test&lt;/code&gt; instead of &lt;code&gt;test&lt;/code&gt;, e.g. &lt;code&gt;make jcov-test TEST=jdk_lang&lt;/code&gt;. This will make sure the JCov image is built, and that JCov reporting is enabled.&lt;/p&gt;
128 &lt;p&gt;The JCov report is stored in &lt;code&gt;build/$BUILD/test-results/jcov-output/report&lt;/code&gt;.&lt;/p&gt;
129 &lt;p&gt;Please note that running with JCov reporting can be very memory intensive.&lt;/p&gt;
130 &lt;h4 id=&quot;jcov_diff_changeset&quot;&gt;JCOV_DIFF_CHANGESET&lt;/h4&gt;
131 &lt;p&gt;While collecting code coverage with JCov, it is also possible to find coverage for only recently changed code. JCOV_DIFF_CHANGESET specifies a source revision. A textual report will be generated showing coverage of the diff between the specified revision and the repository tip.&lt;/p&gt;
132 &lt;p&gt;The report is stored in &lt;code&gt;build/$BUILD/test-results/jcov-output/diff_coverage_report&lt;/code&gt; file.&lt;/p&gt;
133 &lt;h3 id=&quot;jtreg-keywords&quot;&gt;JTReg keywords&lt;/h3&gt;
134 &lt;h4 id=&quot;jobs-1&quot;&gt;JOBS&lt;/h4&gt;
135 &lt;p&gt;The test concurrency (&lt;code&gt;-concurrency&lt;/code&gt;).&lt;/p&gt;
136 &lt;p&gt;Defaults to TEST_JOBS (if set by &lt;code&gt;--with-test-jobs=&lt;/code&gt;), otherwise it defaults to JOBS, except for Hotspot, where the default is &lt;em&gt;number of CPU cores/2&lt;/em&gt;, but never more than &lt;em&gt;memory size in GB/2&lt;/em&gt;.&lt;/p&gt;
137 &lt;h4 id=&quot;timeout_factor-1&quot;&gt;TIMEOUT_FACTOR&lt;/h4&gt;
138 &lt;p&gt;The timeout factor (&lt;code&gt;-timeoutFactor&lt;/code&gt;).&lt;/p&gt;
139 &lt;p&gt;Defaults to 4.&lt;/p&gt;


140 &lt;h4 id=&quot;test_mode&quot;&gt;TEST_MODE&lt;/h4&gt;
141 &lt;p&gt;The test mode (&lt;code&gt;agentvm&lt;/code&gt; or &lt;code&gt;othervm&lt;/code&gt;).&lt;/p&gt;
142 &lt;p&gt;Defaults to &lt;code&gt;agentvm&lt;/code&gt;.&lt;/p&gt;
143 &lt;h4 id=&quot;assert&quot;&gt;ASSERT&lt;/h4&gt;
144 &lt;p&gt;Enable asserts (&lt;code&gt;-ea -esa&lt;/code&gt;, or none).&lt;/p&gt;
145 &lt;p&gt;Set to &lt;code&gt;true&lt;/code&gt; or &lt;code&gt;false&lt;/code&gt;. If true, adds &lt;code&gt;-ea -esa&lt;/code&gt;. Defaults to true, except for hotspot.&lt;/p&gt;
146 &lt;h4 id=&quot;verbose&quot;&gt;VERBOSE&lt;/h4&gt;
147 &lt;p&gt;The verbosity level (&lt;code&gt;-verbose&lt;/code&gt;).&lt;/p&gt;
148 &lt;p&gt;Defaults to &lt;code&gt;fail,error,summary&lt;/code&gt;.&lt;/p&gt;
149 &lt;h4 id=&quot;retain&quot;&gt;RETAIN&lt;/h4&gt;
150 &lt;p&gt;What test data to retain (&lt;code&gt;-retain&lt;/code&gt;).&lt;/p&gt;
151 &lt;p&gt;Defaults to &lt;code&gt;fail,error&lt;/code&gt;.&lt;/p&gt;
152 &lt;h4 id=&quot;max_mem&quot;&gt;MAX_MEM&lt;/h4&gt;
153 &lt;p&gt;Limit memory consumption (&lt;code&gt;-Xmx&lt;/code&gt; and &lt;code&gt;-vmoption:-Xmx&lt;/code&gt;, or none).&lt;/p&gt;
154 &lt;p&gt;Limit memory consumption for JTReg test framework and VM under test. Set to 0 to disable the limits.&lt;/p&gt;
155 &lt;p&gt;Defaults to 512m, except for hotspot, where it defaults to 0 (no limit).&lt;/p&gt;


156 &lt;h4 id=&quot;keywords&quot;&gt;KEYWORDS&lt;/h4&gt;
<span class="line-modified">157 &lt;p&gt;JTReg kewords sent to JTReg using &lt;code&gt;-k&lt;/code&gt;. Please be careful in making sure that spaces and special characters (like &lt;code&gt;!&lt;/code&gt;) are properly quoted. To avoid some issues, the special value &lt;code&gt;%20&lt;/code&gt; can be used instead of space.&lt;/p&gt;</span>
158 &lt;h4 id=&quot;extra_problem_lists&quot;&gt;EXTRA_PROBLEM_LISTS&lt;/h4&gt;
159 &lt;p&gt;Use additional problem lists file or files, in addition to the default ProblemList.txt located at the JTReg test roots.&lt;/p&gt;
160 &lt;p&gt;If multiple file names are specified, they should be separated by space (or, to help avoid quoting issues, the special value &lt;code&gt;%20&lt;/code&gt;).&lt;/p&gt;
161 &lt;p&gt;The file names should be either absolute, or relative to the JTReg test root of the tests to be run.&lt;/p&gt;
162 &lt;h4 id=&quot;run_problem_lists&quot;&gt;RUN_PROBLEM_LISTS&lt;/h4&gt;
163 &lt;p&gt;Use the problem lists to select tests instead of excluding them.&lt;/p&gt;
164 &lt;p&gt;Set to &lt;code&gt;true&lt;/code&gt; or &lt;code&gt;false&lt;/code&gt;. If &lt;code&gt;true&lt;/code&gt;, JTReg will use &lt;code&gt;-match:&lt;/code&gt; option, otherwise &lt;code&gt;-exclude:&lt;/code&gt; will be used. Default is &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
165 &lt;h4 id=&quot;options&quot;&gt;OPTIONS&lt;/h4&gt;
166 &lt;p&gt;Additional options to the JTReg test framework.&lt;/p&gt;
167 &lt;p&gt;Use &lt;code&gt;JTREG=&amp;quot;OPTIONS=--help all&amp;quot;&lt;/code&gt; to see all available JTReg options.&lt;/p&gt;
168 &lt;h4 id=&quot;java_options-1&quot;&gt;JAVA_OPTIONS&lt;/h4&gt;
169 &lt;p&gt;Additional Java options for running test classes (sent to JTReg as &lt;code&gt;-javaoption&lt;/code&gt;).&lt;/p&gt;
170 &lt;h4 id=&quot;vm_options-1&quot;&gt;VM_OPTIONS&lt;/h4&gt;
171 &lt;p&gt;Additional Java options to be used when compiling and running classes (sent to JTReg as &lt;code&gt;-vmoption&lt;/code&gt;).&lt;/p&gt;
172 &lt;p&gt;This option is only needed in special circumstances. To pass Java options to your test classes, use &lt;code&gt;JAVA_OPTIONS&lt;/code&gt;.&lt;/p&gt;


173 &lt;h4 id=&quot;aot_modules-1&quot;&gt;AOT_MODULES&lt;/h4&gt;
174 &lt;p&gt;Generate AOT modules before testing for the specified module, or set of modules. If multiple modules are specified, they should be separated by space (or, to help avoid quoting issues, the special value &lt;code&gt;%20&lt;/code&gt;).&lt;/p&gt;
175 &lt;h4 id=&quot;retry_count&quot;&gt;RETRY_COUNT&lt;/h4&gt;
176 &lt;p&gt;Retry failed tests up to a set number of times. Defaults to 0.&lt;/p&gt;
177 &lt;h3 id=&quot;gtest-keywords&quot;&gt;Gtest keywords&lt;/h3&gt;
178 &lt;h4 id=&quot;repeat&quot;&gt;REPEAT&lt;/h4&gt;
179 &lt;p&gt;The number of times to repeat the tests (&lt;code&gt;--gtest_repeat&lt;/code&gt;).&lt;/p&gt;
180 &lt;p&gt;Default is 1. Set to -1 to repeat indefinitely. This can be especially useful combined with &lt;code&gt;OPTIONS=--gtest_break_on_failure&lt;/code&gt; to reproduce an intermittent problem.&lt;/p&gt;
181 &lt;h4 id=&quot;options-1&quot;&gt;OPTIONS&lt;/h4&gt;
182 &lt;p&gt;Additional options to the Gtest test framework.&lt;/p&gt;
183 &lt;p&gt;Use &lt;code&gt;GTEST=&amp;quot;OPTIONS=--help&amp;quot;&lt;/code&gt; to see all available Gtest options.&lt;/p&gt;
184 &lt;h4 id=&quot;aot_modules-2&quot;&gt;AOT_MODULES&lt;/h4&gt;
185 &lt;p&gt;Generate AOT modules before testing for the specified module, or set of modules. If multiple modules are specified, they should be separated by space (or, to help avoid quoting issues, the special value &lt;code&gt;%20&lt;/code&gt;).&lt;/p&gt;
186 &lt;h3 id=&quot;microbenchmark-keywords&quot;&gt;Microbenchmark keywords&lt;/h3&gt;
187 &lt;h4 id=&quot;fork&quot;&gt;FORK&lt;/h4&gt;
188 &lt;p&gt;Override the number of benchmark forks to spawn. Same as specifying &lt;code&gt;-f &amp;lt;num&amp;gt;&lt;/code&gt;.&lt;/p&gt;
189 &lt;h4 id=&quot;iter&quot;&gt;ITER&lt;/h4&gt;
190 &lt;p&gt;Number of measurement iterations per fork. Same as specifying &lt;code&gt;-i &amp;lt;num&amp;gt;&lt;/code&gt;.&lt;/p&gt;
191 &lt;h4 id=&quot;time&quot;&gt;TIME&lt;/h4&gt;
192 &lt;p&gt;Amount of time to spend in each measurement iteration, in seconds. Same as specifying &lt;code&gt;-r &amp;lt;num&amp;gt;&lt;/code&gt;&lt;/p&gt;
193 &lt;h4 id=&quot;warmup_iter&quot;&gt;WARMUP_ITER&lt;/h4&gt;
194 &lt;p&gt;Number of warmup iterations to run before the measurement phase in each fork. Same as specifying &lt;code&gt;-wi &amp;lt;num&amp;gt;&lt;/code&gt;.&lt;/p&gt;
195 &lt;h4 id=&quot;warmup_time&quot;&gt;WARMUP_TIME&lt;/h4&gt;
196 &lt;p&gt;Amount of time to spend in each warmup iteration. Same as specifying &lt;code&gt;-w &amp;lt;num&amp;gt;&lt;/code&gt;.&lt;/p&gt;
197 &lt;h4 id=&quot;results_format&quot;&gt;RESULTS_FORMAT&lt;/h4&gt;
198 &lt;p&gt;Specify to have the test run save a log of the values. Accepts the same values as &lt;code&gt;-rff&lt;/code&gt;, i.e., &lt;code&gt;text&lt;/code&gt;, &lt;code&gt;csv&lt;/code&gt;, &lt;code&gt;scsv&lt;/code&gt;, &lt;code&gt;json&lt;/code&gt;, or &lt;code&gt;latex&lt;/code&gt;.&lt;/p&gt;
199 &lt;h4 id=&quot;vm_options-2&quot;&gt;VM_OPTIONS&lt;/h4&gt;
200 &lt;p&gt;Additional VM arguments to provide to forked off VMs. Same as &lt;code&gt;-jvmArgs &amp;lt;args&amp;gt;&lt;/code&gt;&lt;/p&gt;
201 &lt;h4 id=&quot;options-2&quot;&gt;OPTIONS&lt;/h4&gt;
202 &lt;p&gt;Additional arguments to send to JMH.&lt;/p&gt;
203 &lt;h2 id=&quot;notes-for-specific-tests&quot;&gt;Notes for Specific Tests&lt;/h2&gt;
204 &lt;h3 id=&quot;docker-tests&quot;&gt;Docker Tests&lt;/h3&gt;
205 &lt;p&gt;Docker tests with default parameters may fail on systems with glibc versions not compatible with the one used in the default docker image (e.g., Oracle Linux 7.6 for x86). For example, they pass on Ubuntu 16.04 but fail on Ubuntu 18.04 if run like this on x86:&lt;/p&gt;
206 &lt;pre&gt;&lt;code&gt;$ make test TEST=&amp;quot;jtreg:test/hotspot/jtreg/containers/docker&amp;quot;&lt;/code&gt;&lt;/pre&gt;
207 &lt;p&gt;To run these tests correctly, additional parameters for the correct docker image are required on Ubuntu 18.04 by using &lt;code&gt;JAVA_OPTIONS&lt;/code&gt;.&lt;/p&gt;
<span class="line-modified">208 &lt;pre&gt;&lt;code&gt;$ make test TEST=&amp;quot;jtreg:test/hotspot/jtreg/containers/docker&amp;quot; JTREG=&amp;quot;JAVA_OPTIONS=-Djdk.test.docker.image.name=ubuntu -Djdk.test.docker.image.version=latest&amp;quot;&lt;/code&gt;&lt;/pre&gt;</span>


209 &lt;h3 id=&quot;non-us-locale&quot;&gt;Non-US locale&lt;/h3&gt;
<span class="line-modified">210 &lt;p&gt;If your locale is non-US, some tests are likely to fail. To work around this you can set the locale to US. On Unix platforms simply setting &lt;code&gt;LANG=&amp;quot;en_US&amp;quot;&lt;/code&gt; in the environment before running tests should work. On Windows, setting &lt;code&gt;JTREG=&amp;quot;VM_OPTIONS=-Duser.language=en -Duser.country=US&amp;quot;&lt;/code&gt; helps for most, but not all test cases. For example:&lt;/p&gt;</span>

211 &lt;pre&gt;&lt;code&gt;$ export LANG=&amp;quot;en_US&amp;quot; &amp;amp;&amp;amp; make test TEST=...
212 $ make test JTREG=&amp;quot;VM_OPTIONS=-Duser.language=en -Duser.country=US&amp;quot; TEST=...&lt;/code&gt;&lt;/pre&gt;
213 &lt;h3 id=&quot;pkcs11-tests&quot;&gt;PKCS11 Tests&lt;/h3&gt;
<span class="line-modified">214 &lt;p&gt;It is highly recommended to use the latest NSS version when running PKCS11 tests. Improper NSS version may lead to unexpected failures which are hard to diagnose. For example, sun/security/pkcs11/Secmod/AddTrustedCert.java may fail on Ubuntu 18.04 with the default NSS version in the system. To run these tests correctly, the system property &lt;code&gt;test.nss.lib.paths&lt;/code&gt; is required on Ubuntu 18.04 to specify the alternative NSS lib directories. For example:&lt;/p&gt;</span>
<span class="line-modified">215 &lt;pre&gt;&lt;code&gt;$ make test TEST=&amp;quot;jtreg:sun/security/pkcs11/Secmod/AddTrustedCert.java&amp;quot; JTREG=&amp;quot;JAVA_OPTIONS=-Dtest.nss.lib.paths=/path/to/your/latest/NSS-libs&amp;quot;&lt;/code&gt;&lt;/pre&gt;</span>


216 &lt;p&gt;For more notes about the PKCS11 tests, please refer to test/jdk/sun/security/pkcs11/README.&lt;/p&gt;
217 &lt;h3 id=&quot;client-ui-tests&quot;&gt;Client UI Tests&lt;/h3&gt;
218 &lt;p&gt;Some Client UI tests use key sequences which may be reserved by the operating system. Usually that causes the test failure. So it is highly recommended to disable system key shortcuts prior testing. The steps to access and disable system key shortcuts for various platforms are provided below.&lt;/p&gt;
219 &lt;h4 id=&quot;macos&quot;&gt;MacOS&lt;/h4&gt;
220 &lt;p&gt;Choose Apple menu; System Preferences, click Keyboard, then click Shortcuts; select or deselect desired shortcut.&lt;/p&gt;
221 &lt;p&gt;For example, test/jdk/javax/swing/TooltipManager/JMenuItemToolTipKeyBindingsTest/JMenuItemToolTipKeyBindingsTest.java fails on MacOS because it uses &lt;code&gt;CTRL + F1&lt;/code&gt; key sequence to show or hide tooltip message but the key combination is reserved by the operating system. To run the test correctly the default global key shortcut should be disabled using the steps described above, and then deselect &amp;quot;Turn keyboard access on or off&amp;quot; option which is responsible for &lt;code&gt;CTRL + F1&lt;/code&gt; combination.&lt;/p&gt;
222 &lt;h4 id=&quot;linux&quot;&gt;Linux&lt;/h4&gt;
223 &lt;p&gt;Open the Activities overview and start typing Settings; Choose Settings, click Devices, then click Keyboard; set or override desired shortcut.&lt;/p&gt;
224 &lt;h4 id=&quot;windows&quot;&gt;Windows&lt;/h4&gt;
225 &lt;p&gt;Type &lt;code&gt;gpedit&lt;/code&gt; in the Search and then click Edit group policy; navigate to User Configuration -&amp;gt; Administrative Templates -&amp;gt; Windows Components -&amp;gt; File Explorer; in the right-side pane look for &amp;quot;Turn off Windows key hotkeys&amp;quot; and double click on it; enable or disable hotkeys.&lt;/p&gt;
226 &lt;p&gt;Note: restart is required to make the settings take effect.&lt;/p&gt;
227 &lt;/body&gt;
228 &lt;/html&gt;
</pre>
</td>
<td>
<hr />
<pre>
120 &lt;p&gt;Applies to JTReg, GTest and Micro.&lt;/p&gt;
121 &lt;h4 id=&quot;vm_options&quot;&gt;VM_OPTIONS&lt;/h4&gt;
122 &lt;p&gt;Applies to JTReg, GTest and Micro.&lt;/p&gt;
123 &lt;h4 id=&quot;aot_modules&quot;&gt;AOT_MODULES&lt;/h4&gt;
124 &lt;p&gt;Applies to JTReg and GTest.&lt;/p&gt;
125 &lt;h4 id=&quot;jcov&quot;&gt;JCOV&lt;/h4&gt;
126 &lt;p&gt;This keywords applies globally to the test runner system. If set to &lt;code&gt;true&lt;/code&gt;, it enables JCov coverage reporting for all tests run. To be useful, the JDK under test must be run with a JDK built with JCov instrumentation (&lt;code&gt;configure --with-jcov=&amp;lt;path to directory containing lib/jcov.jar&amp;gt;&lt;/code&gt;, &lt;code&gt;make jcov-image&lt;/code&gt;).&lt;/p&gt;
127 &lt;p&gt;The simplest way to run tests with JCov coverage report is to use the special target &lt;code&gt;jcov-test&lt;/code&gt; instead of &lt;code&gt;test&lt;/code&gt;, e.g. &lt;code&gt;make jcov-test TEST=jdk_lang&lt;/code&gt;. This will make sure the JCov image is built, and that JCov reporting is enabled.&lt;/p&gt;
128 &lt;p&gt;The JCov report is stored in &lt;code&gt;build/$BUILD/test-results/jcov-output/report&lt;/code&gt;.&lt;/p&gt;
129 &lt;p&gt;Please note that running with JCov reporting can be very memory intensive.&lt;/p&gt;
130 &lt;h4 id=&quot;jcov_diff_changeset&quot;&gt;JCOV_DIFF_CHANGESET&lt;/h4&gt;
131 &lt;p&gt;While collecting code coverage with JCov, it is also possible to find coverage for only recently changed code. JCOV_DIFF_CHANGESET specifies a source revision. A textual report will be generated showing coverage of the diff between the specified revision and the repository tip.&lt;/p&gt;
132 &lt;p&gt;The report is stored in &lt;code&gt;build/$BUILD/test-results/jcov-output/diff_coverage_report&lt;/code&gt; file.&lt;/p&gt;
133 &lt;h3 id=&quot;jtreg-keywords&quot;&gt;JTReg keywords&lt;/h3&gt;
134 &lt;h4 id=&quot;jobs-1&quot;&gt;JOBS&lt;/h4&gt;
135 &lt;p&gt;The test concurrency (&lt;code&gt;-concurrency&lt;/code&gt;).&lt;/p&gt;
136 &lt;p&gt;Defaults to TEST_JOBS (if set by &lt;code&gt;--with-test-jobs=&lt;/code&gt;), otherwise it defaults to JOBS, except for Hotspot, where the default is &lt;em&gt;number of CPU cores/2&lt;/em&gt;, but never more than &lt;em&gt;memory size in GB/2&lt;/em&gt;.&lt;/p&gt;
137 &lt;h4 id=&quot;timeout_factor-1&quot;&gt;TIMEOUT_FACTOR&lt;/h4&gt;
138 &lt;p&gt;The timeout factor (&lt;code&gt;-timeoutFactor&lt;/code&gt;).&lt;/p&gt;
139 &lt;p&gt;Defaults to 4.&lt;/p&gt;
<span class="line-added">140 &lt;h4 id=&quot;failure_handler_timeout&quot;&gt;FAILURE_HANDLER_TIMEOUT&lt;/h4&gt;</span>
<span class="line-added">141 &lt;p&gt;Sets the argument &lt;code&gt;-timeoutHandlerTimeout&lt;/code&gt; for JTReg. The default value is 0. This is only valid if the failure handler is built.&lt;/p&gt;</span>
142 &lt;h4 id=&quot;test_mode&quot;&gt;TEST_MODE&lt;/h4&gt;
143 &lt;p&gt;The test mode (&lt;code&gt;agentvm&lt;/code&gt; or &lt;code&gt;othervm&lt;/code&gt;).&lt;/p&gt;
144 &lt;p&gt;Defaults to &lt;code&gt;agentvm&lt;/code&gt;.&lt;/p&gt;
145 &lt;h4 id=&quot;assert&quot;&gt;ASSERT&lt;/h4&gt;
146 &lt;p&gt;Enable asserts (&lt;code&gt;-ea -esa&lt;/code&gt;, or none).&lt;/p&gt;
147 &lt;p&gt;Set to &lt;code&gt;true&lt;/code&gt; or &lt;code&gt;false&lt;/code&gt;. If true, adds &lt;code&gt;-ea -esa&lt;/code&gt;. Defaults to true, except for hotspot.&lt;/p&gt;
148 &lt;h4 id=&quot;verbose&quot;&gt;VERBOSE&lt;/h4&gt;
149 &lt;p&gt;The verbosity level (&lt;code&gt;-verbose&lt;/code&gt;).&lt;/p&gt;
150 &lt;p&gt;Defaults to &lt;code&gt;fail,error,summary&lt;/code&gt;.&lt;/p&gt;
151 &lt;h4 id=&quot;retain&quot;&gt;RETAIN&lt;/h4&gt;
152 &lt;p&gt;What test data to retain (&lt;code&gt;-retain&lt;/code&gt;).&lt;/p&gt;
153 &lt;p&gt;Defaults to &lt;code&gt;fail,error&lt;/code&gt;.&lt;/p&gt;
154 &lt;h4 id=&quot;max_mem&quot;&gt;MAX_MEM&lt;/h4&gt;
155 &lt;p&gt;Limit memory consumption (&lt;code&gt;-Xmx&lt;/code&gt; and &lt;code&gt;-vmoption:-Xmx&lt;/code&gt;, or none).&lt;/p&gt;
156 &lt;p&gt;Limit memory consumption for JTReg test framework and VM under test. Set to 0 to disable the limits.&lt;/p&gt;
157 &lt;p&gt;Defaults to 512m, except for hotspot, where it defaults to 0 (no limit).&lt;/p&gt;
<span class="line-added">158 &lt;h4 id=&quot;max_output&quot;&gt;MAX_OUTPUT&lt;/h4&gt;</span>
<span class="line-added">159 &lt;p&gt;Set the property &lt;code&gt;javatest.maxOutputSize&lt;/code&gt; for the launcher, to change the default JTReg log limit.&lt;/p&gt;</span>
160 &lt;h4 id=&quot;keywords&quot;&gt;KEYWORDS&lt;/h4&gt;
<span class="line-modified">161 &lt;p&gt;JTReg keywords sent to JTReg using &lt;code&gt;-k&lt;/code&gt;. Please be careful in making sure that spaces and special characters (like &lt;code&gt;!&lt;/code&gt;) are properly quoted. To avoid some issues, the special value &lt;code&gt;%20&lt;/code&gt; can be used instead of space.&lt;/p&gt;</span>
162 &lt;h4 id=&quot;extra_problem_lists&quot;&gt;EXTRA_PROBLEM_LISTS&lt;/h4&gt;
163 &lt;p&gt;Use additional problem lists file or files, in addition to the default ProblemList.txt located at the JTReg test roots.&lt;/p&gt;
164 &lt;p&gt;If multiple file names are specified, they should be separated by space (or, to help avoid quoting issues, the special value &lt;code&gt;%20&lt;/code&gt;).&lt;/p&gt;
165 &lt;p&gt;The file names should be either absolute, or relative to the JTReg test root of the tests to be run.&lt;/p&gt;
166 &lt;h4 id=&quot;run_problem_lists&quot;&gt;RUN_PROBLEM_LISTS&lt;/h4&gt;
167 &lt;p&gt;Use the problem lists to select tests instead of excluding them.&lt;/p&gt;
168 &lt;p&gt;Set to &lt;code&gt;true&lt;/code&gt; or &lt;code&gt;false&lt;/code&gt;. If &lt;code&gt;true&lt;/code&gt;, JTReg will use &lt;code&gt;-match:&lt;/code&gt; option, otherwise &lt;code&gt;-exclude:&lt;/code&gt; will be used. Default is &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
169 &lt;h4 id=&quot;options&quot;&gt;OPTIONS&lt;/h4&gt;
170 &lt;p&gt;Additional options to the JTReg test framework.&lt;/p&gt;
171 &lt;p&gt;Use &lt;code&gt;JTREG=&amp;quot;OPTIONS=--help all&amp;quot;&lt;/code&gt; to see all available JTReg options.&lt;/p&gt;
172 &lt;h4 id=&quot;java_options-1&quot;&gt;JAVA_OPTIONS&lt;/h4&gt;
173 &lt;p&gt;Additional Java options for running test classes (sent to JTReg as &lt;code&gt;-javaoption&lt;/code&gt;).&lt;/p&gt;
174 &lt;h4 id=&quot;vm_options-1&quot;&gt;VM_OPTIONS&lt;/h4&gt;
175 &lt;p&gt;Additional Java options to be used when compiling and running classes (sent to JTReg as &lt;code&gt;-vmoption&lt;/code&gt;).&lt;/p&gt;
176 &lt;p&gt;This option is only needed in special circumstances. To pass Java options to your test classes, use &lt;code&gt;JAVA_OPTIONS&lt;/code&gt;.&lt;/p&gt;
<span class="line-added">177 &lt;h4 id=&quot;launcher_options&quot;&gt;LAUNCHER_OPTIONS&lt;/h4&gt;</span>
<span class="line-added">178 &lt;p&gt;Additional Java options that are sent to the java launcher that starts the JTReg harness.&lt;/p&gt;</span>
179 &lt;h4 id=&quot;aot_modules-1&quot;&gt;AOT_MODULES&lt;/h4&gt;
180 &lt;p&gt;Generate AOT modules before testing for the specified module, or set of modules. If multiple modules are specified, they should be separated by space (or, to help avoid quoting issues, the special value &lt;code&gt;%20&lt;/code&gt;).&lt;/p&gt;
181 &lt;h4 id=&quot;retry_count&quot;&gt;RETRY_COUNT&lt;/h4&gt;
182 &lt;p&gt;Retry failed tests up to a set number of times. Defaults to 0.&lt;/p&gt;
183 &lt;h3 id=&quot;gtest-keywords&quot;&gt;Gtest keywords&lt;/h3&gt;
184 &lt;h4 id=&quot;repeat&quot;&gt;REPEAT&lt;/h4&gt;
185 &lt;p&gt;The number of times to repeat the tests (&lt;code&gt;--gtest_repeat&lt;/code&gt;).&lt;/p&gt;
186 &lt;p&gt;Default is 1. Set to -1 to repeat indefinitely. This can be especially useful combined with &lt;code&gt;OPTIONS=--gtest_break_on_failure&lt;/code&gt; to reproduce an intermittent problem.&lt;/p&gt;
187 &lt;h4 id=&quot;options-1&quot;&gt;OPTIONS&lt;/h4&gt;
188 &lt;p&gt;Additional options to the Gtest test framework.&lt;/p&gt;
189 &lt;p&gt;Use &lt;code&gt;GTEST=&amp;quot;OPTIONS=--help&amp;quot;&lt;/code&gt; to see all available Gtest options.&lt;/p&gt;
190 &lt;h4 id=&quot;aot_modules-2&quot;&gt;AOT_MODULES&lt;/h4&gt;
191 &lt;p&gt;Generate AOT modules before testing for the specified module, or set of modules. If multiple modules are specified, they should be separated by space (or, to help avoid quoting issues, the special value &lt;code&gt;%20&lt;/code&gt;).&lt;/p&gt;
192 &lt;h3 id=&quot;microbenchmark-keywords&quot;&gt;Microbenchmark keywords&lt;/h3&gt;
193 &lt;h4 id=&quot;fork&quot;&gt;FORK&lt;/h4&gt;
194 &lt;p&gt;Override the number of benchmark forks to spawn. Same as specifying &lt;code&gt;-f &amp;lt;num&amp;gt;&lt;/code&gt;.&lt;/p&gt;
195 &lt;h4 id=&quot;iter&quot;&gt;ITER&lt;/h4&gt;
196 &lt;p&gt;Number of measurement iterations per fork. Same as specifying &lt;code&gt;-i &amp;lt;num&amp;gt;&lt;/code&gt;.&lt;/p&gt;
197 &lt;h4 id=&quot;time&quot;&gt;TIME&lt;/h4&gt;
198 &lt;p&gt;Amount of time to spend in each measurement iteration, in seconds. Same as specifying &lt;code&gt;-r &amp;lt;num&amp;gt;&lt;/code&gt;&lt;/p&gt;
199 &lt;h4 id=&quot;warmup_iter&quot;&gt;WARMUP_ITER&lt;/h4&gt;
200 &lt;p&gt;Number of warmup iterations to run before the measurement phase in each fork. Same as specifying &lt;code&gt;-wi &amp;lt;num&amp;gt;&lt;/code&gt;.&lt;/p&gt;
201 &lt;h4 id=&quot;warmup_time&quot;&gt;WARMUP_TIME&lt;/h4&gt;
202 &lt;p&gt;Amount of time to spend in each warmup iteration. Same as specifying &lt;code&gt;-w &amp;lt;num&amp;gt;&lt;/code&gt;.&lt;/p&gt;
203 &lt;h4 id=&quot;results_format&quot;&gt;RESULTS_FORMAT&lt;/h4&gt;
204 &lt;p&gt;Specify to have the test run save a log of the values. Accepts the same values as &lt;code&gt;-rff&lt;/code&gt;, i.e., &lt;code&gt;text&lt;/code&gt;, &lt;code&gt;csv&lt;/code&gt;, &lt;code&gt;scsv&lt;/code&gt;, &lt;code&gt;json&lt;/code&gt;, or &lt;code&gt;latex&lt;/code&gt;.&lt;/p&gt;
205 &lt;h4 id=&quot;vm_options-2&quot;&gt;VM_OPTIONS&lt;/h4&gt;
206 &lt;p&gt;Additional VM arguments to provide to forked off VMs. Same as &lt;code&gt;-jvmArgs &amp;lt;args&amp;gt;&lt;/code&gt;&lt;/p&gt;
207 &lt;h4 id=&quot;options-2&quot;&gt;OPTIONS&lt;/h4&gt;
208 &lt;p&gt;Additional arguments to send to JMH.&lt;/p&gt;
209 &lt;h2 id=&quot;notes-for-specific-tests&quot;&gt;Notes for Specific Tests&lt;/h2&gt;
210 &lt;h3 id=&quot;docker-tests&quot;&gt;Docker Tests&lt;/h3&gt;
211 &lt;p&gt;Docker tests with default parameters may fail on systems with glibc versions not compatible with the one used in the default docker image (e.g., Oracle Linux 7.6 for x86). For example, they pass on Ubuntu 16.04 but fail on Ubuntu 18.04 if run like this on x86:&lt;/p&gt;
212 &lt;pre&gt;&lt;code&gt;$ make test TEST=&amp;quot;jtreg:test/hotspot/jtreg/containers/docker&amp;quot;&lt;/code&gt;&lt;/pre&gt;
213 &lt;p&gt;To run these tests correctly, additional parameters for the correct docker image are required on Ubuntu 18.04 by using &lt;code&gt;JAVA_OPTIONS&lt;/code&gt;.&lt;/p&gt;
<span class="line-modified">214 &lt;pre&gt;&lt;code&gt;$ make test TEST=&amp;quot;jtreg:test/hotspot/jtreg/containers/docker&amp;quot; \</span>
<span class="line-added">215     JTREG=&amp;quot;JAVA_OPTIONS=-Djdk.test.docker.image.name=ubuntu</span>
<span class="line-added">216     -Djdk.test.docker.image.version=latest&amp;quot;&lt;/code&gt;&lt;/pre&gt;</span>
217 &lt;h3 id=&quot;non-us-locale&quot;&gt;Non-US locale&lt;/h3&gt;
<span class="line-modified">218 &lt;p&gt;If your locale is non-US, some tests are likely to fail. To work around this you can set the locale to US. On Unix platforms simply setting &lt;code&gt;LANG=&amp;quot;en_US&amp;quot;&lt;/code&gt; in the environment before running tests should work. On Windows, setting &lt;code&gt;JTREG=&amp;quot;VM_OPTIONS=-Duser.language=en -Duser.country=US&amp;quot;&lt;/code&gt; helps for most, but not all test cases.&lt;/p&gt;</span>
<span class="line-added">219 &lt;p&gt;For example:&lt;/p&gt;</span>
220 &lt;pre&gt;&lt;code&gt;$ export LANG=&amp;quot;en_US&amp;quot; &amp;amp;&amp;amp; make test TEST=...
221 $ make test JTREG=&amp;quot;VM_OPTIONS=-Duser.language=en -Duser.country=US&amp;quot; TEST=...&lt;/code&gt;&lt;/pre&gt;
222 &lt;h3 id=&quot;pkcs11-tests&quot;&gt;PKCS11 Tests&lt;/h3&gt;
<span class="line-modified">223 &lt;p&gt;It is highly recommended to use the latest NSS version when running PKCS11 tests. Improper NSS version may lead to unexpected failures which are hard to diagnose. For example, sun/security/pkcs11/Secmod/AddTrustedCert.java may fail on Ubuntu 18.04 with the default NSS version in the system. To run these tests correctly, the system property &lt;code&gt;test.nss.lib.paths&lt;/code&gt; is required on Ubuntu 18.04 to specify the alternative NSS lib directories.&lt;/p&gt;</span>
<span class="line-modified">224 &lt;p&gt;For example:&lt;/p&gt;</span>
<span class="line-added">225 &lt;pre&gt;&lt;code&gt;$ make test TEST=&amp;quot;jtreg:sun/security/pkcs11/Secmod/AddTrustedCert.java&amp;quot; \</span>
<span class="line-added">226     JTREG=&amp;quot;JAVA_OPTIONS=-Dtest.nss.lib.paths=/path/to/your/latest/NSS-libs&amp;quot;&lt;/code&gt;&lt;/pre&gt;</span>
227 &lt;p&gt;For more notes about the PKCS11 tests, please refer to test/jdk/sun/security/pkcs11/README.&lt;/p&gt;
228 &lt;h3 id=&quot;client-ui-tests&quot;&gt;Client UI Tests&lt;/h3&gt;
229 &lt;p&gt;Some Client UI tests use key sequences which may be reserved by the operating system. Usually that causes the test failure. So it is highly recommended to disable system key shortcuts prior testing. The steps to access and disable system key shortcuts for various platforms are provided below.&lt;/p&gt;
230 &lt;h4 id=&quot;macos&quot;&gt;MacOS&lt;/h4&gt;
231 &lt;p&gt;Choose Apple menu; System Preferences, click Keyboard, then click Shortcuts; select or deselect desired shortcut.&lt;/p&gt;
232 &lt;p&gt;For example, test/jdk/javax/swing/TooltipManager/JMenuItemToolTipKeyBindingsTest/JMenuItemToolTipKeyBindingsTest.java fails on MacOS because it uses &lt;code&gt;CTRL + F1&lt;/code&gt; key sequence to show or hide tooltip message but the key combination is reserved by the operating system. To run the test correctly the default global key shortcut should be disabled using the steps described above, and then deselect &amp;quot;Turn keyboard access on or off&amp;quot; option which is responsible for &lt;code&gt;CTRL + F1&lt;/code&gt; combination.&lt;/p&gt;
233 &lt;h4 id=&quot;linux&quot;&gt;Linux&lt;/h4&gt;
234 &lt;p&gt;Open the Activities overview and start typing Settings; Choose Settings, click Devices, then click Keyboard; set or override desired shortcut.&lt;/p&gt;
235 &lt;h4 id=&quot;windows&quot;&gt;Windows&lt;/h4&gt;
236 &lt;p&gt;Type &lt;code&gt;gpedit&lt;/code&gt; in the Search and then click Edit group policy; navigate to User Configuration -&amp;gt; Administrative Templates -&amp;gt; Windows Components -&amp;gt; File Explorer; in the right-side pane look for &amp;quot;Turn off Windows key hotkeys&amp;quot; and double click on it; enable or disable hotkeys.&lt;/p&gt;
237 &lt;p&gt;Note: restart is required to make the settings take effect.&lt;/p&gt;
238 &lt;/body&gt;
239 &lt;/html&gt;
</pre>
</td>
</tr>
</table>
<center><a href="../.hgtags.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="testing.md.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>