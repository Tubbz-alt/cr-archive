<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/sun/security/tools/keytool/WeakAlg.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../misc/UnsafeFieldOffsets.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../../../tools/jpackage/helpers/jdk/jpackage/test/AdditionalLauncher.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/sun/security/tools/keytool/WeakAlg.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
242 
243         // warn if migrating to JKS
244         importkeystore(&quot;ks&quot;, &quot;ks2&quot;, &quot;-deststoretype jks&quot;)
245                 .shouldContain(&quot;JKS keystore uses a proprietary format&quot;);
246 
247         rm(&quot;ks&quot;);
248         rm(&quot;ks2&quot;);
249         rm(&quot;ks3&quot;);
250 
251         // no warning if all certs
252         kt(&quot;-importcert -alias b -file a.crt -storetype jks -noprompt&quot;)
253                 .shouldNotContain(&quot;Warning:&quot;);
254         kt(&quot;-genkeypair -keyalg DSA -alias a -dname CN=A&quot;)
255                 .shouldContain(&quot;JKS keystore uses a proprietary format&quot;);
256         kt(&quot;-list&quot;)
257                 .shouldContain(&quot;JKS keystore uses a proprietary format&quot;);
258         kt(&quot;-list -storetype pkcs12&quot;) // warn if JKS used as PKCS12
259                 .shouldContain(&quot;JKS keystore uses a proprietary format&quot;);
260         kt(&quot;-exportcert -alias a -file a.crt&quot;)
261                 .shouldContain(&quot;JKS keystore uses a proprietary format&quot;);
<span class="line-modified">262         kt(&quot;-printcert -file a.crt&quot;) // no warning if keystore not touched</span>
<span class="line-modified">263                 .shouldNotContain(&quot;Warning:&quot;);</span>
264         kt(&quot;-certreq -alias a -file a.req&quot;)
265                 .shouldContain(&quot;JKS keystore uses a proprietary format&quot;);
266         kt(&quot;-printcertreq -file a.req&quot;) // no warning if keystore not touched
267                 .shouldNotContain(&quot;Warning:&quot;);
268 
269         // No warning if migrating from JKS
270         importkeystore(&quot;ks&quot;, &quot;ks2&quot;, &quot;&quot;)
271                 .shouldNotContain(&quot;Warning:&quot;);
272 
273         importkeystore(&quot;ks&quot;, &quot;ks3&quot;, &quot;-deststoretype pkcs12&quot;)
274                 .shouldNotContain(&quot;Warning:&quot;);
275 
276         rm(&quot;ks&quot;);
277 
278         kt(&quot;-genkeypair -keyalg DSA -alias a -dname CN=A -storetype jceks&quot;)
279                 .shouldContain(&quot;JCEKS keystore uses a proprietary format&quot;);
280         kt(&quot;-list&quot;)
281                 .shouldContain(&quot;JCEKS keystore uses a proprietary format&quot;);
282         kt(&quot;-importcert -alias b -file a.crt -noprompt&quot;)
283                 .shouldContain(&quot;JCEKS keystore uses a proprietary format&quot;);
284         kt(&quot;-exportcert -alias a -file a.crt&quot;)
285                 .shouldContain(&quot;JCEKS keystore uses a proprietary format&quot;);
<span class="line-modified">286         kt(&quot;-printcert -file a.crt&quot;)</span>
<span class="line-modified">287                 .shouldNotContain(&quot;Warning:&quot;);</span>
288         kt(&quot;-certreq -alias a -file a.req&quot;)
289                 .shouldContain(&quot;JCEKS keystore uses a proprietary format&quot;);
290         kt(&quot;-printcertreq -file a.req&quot;)
291                 .shouldNotContain(&quot;Warning:&quot;);
292         kt(&quot;-genseckey -alias c -keyalg AES -keysize 128&quot;)
293                 .shouldContain(&quot;JCEKS keystore uses a proprietary format&quot;);
294     }
295 
296     static void checkImportKeyStore() throws Exception {
297 
298         rm(&quot;ks2&quot;);
299         rm(&quot;ks3&quot;);
300 
301         importkeystore(&quot;ks&quot;, &quot;ks2&quot;, &quot;&quot;)
302                 .shouldContain(&quot;3 entries successfully imported&quot;)
303                 .shouldContain(&quot;Warning&quot;)
304                 .shouldMatch(&quot;&lt;b&gt;.*512-bit RSA key.*is disabled&quot;)
305                 .shouldMatch(&quot;&lt;a&gt;.*MD5withRSA.*is disabled&quot;);
306 
307         importkeystore(&quot;ks&quot;, &quot;ks3&quot;, &quot;-srcalias a&quot;)
</pre>
</td>
<td>
<hr />
<pre>
242 
243         // warn if migrating to JKS
244         importkeystore(&quot;ks&quot;, &quot;ks2&quot;, &quot;-deststoretype jks&quot;)
245                 .shouldContain(&quot;JKS keystore uses a proprietary format&quot;);
246 
247         rm(&quot;ks&quot;);
248         rm(&quot;ks2&quot;);
249         rm(&quot;ks3&quot;);
250 
251         // no warning if all certs
252         kt(&quot;-importcert -alias b -file a.crt -storetype jks -noprompt&quot;)
253                 .shouldNotContain(&quot;Warning:&quot;);
254         kt(&quot;-genkeypair -keyalg DSA -alias a -dname CN=A&quot;)
255                 .shouldContain(&quot;JKS keystore uses a proprietary format&quot;);
256         kt(&quot;-list&quot;)
257                 .shouldContain(&quot;JKS keystore uses a proprietary format&quot;);
258         kt(&quot;-list -storetype pkcs12&quot;) // warn if JKS used as PKCS12
259                 .shouldContain(&quot;JKS keystore uses a proprietary format&quot;);
260         kt(&quot;-exportcert -alias a -file a.crt&quot;)
261                 .shouldContain(&quot;JKS keystore uses a proprietary format&quot;);
<span class="line-modified">262         kt(&quot;-printcert -file a.crt&quot;) // warning since -keystore option is supported</span>
<span class="line-modified">263                 .shouldContain(&quot;JKS keystore uses a proprietary format&quot;);</span>
264         kt(&quot;-certreq -alias a -file a.req&quot;)
265                 .shouldContain(&quot;JKS keystore uses a proprietary format&quot;);
266         kt(&quot;-printcertreq -file a.req&quot;) // no warning if keystore not touched
267                 .shouldNotContain(&quot;Warning:&quot;);
268 
269         // No warning if migrating from JKS
270         importkeystore(&quot;ks&quot;, &quot;ks2&quot;, &quot;&quot;)
271                 .shouldNotContain(&quot;Warning:&quot;);
272 
273         importkeystore(&quot;ks&quot;, &quot;ks3&quot;, &quot;-deststoretype pkcs12&quot;)
274                 .shouldNotContain(&quot;Warning:&quot;);
275 
276         rm(&quot;ks&quot;);
277 
278         kt(&quot;-genkeypair -keyalg DSA -alias a -dname CN=A -storetype jceks&quot;)
279                 .shouldContain(&quot;JCEKS keystore uses a proprietary format&quot;);
280         kt(&quot;-list&quot;)
281                 .shouldContain(&quot;JCEKS keystore uses a proprietary format&quot;);
282         kt(&quot;-importcert -alias b -file a.crt -noprompt&quot;)
283                 .shouldContain(&quot;JCEKS keystore uses a proprietary format&quot;);
284         kt(&quot;-exportcert -alias a -file a.crt&quot;)
285                 .shouldContain(&quot;JCEKS keystore uses a proprietary format&quot;);
<span class="line-modified">286         kt(&quot;-printcert -file a.crt&quot;) // warning since -keystore option is supported</span>
<span class="line-modified">287                 .shouldContain(&quot;JCEKS keystore uses a proprietary format&quot;);</span>
288         kt(&quot;-certreq -alias a -file a.req&quot;)
289                 .shouldContain(&quot;JCEKS keystore uses a proprietary format&quot;);
290         kt(&quot;-printcertreq -file a.req&quot;)
291                 .shouldNotContain(&quot;Warning:&quot;);
292         kt(&quot;-genseckey -alias c -keyalg AES -keysize 128&quot;)
293                 .shouldContain(&quot;JCEKS keystore uses a proprietary format&quot;);
294     }
295 
296     static void checkImportKeyStore() throws Exception {
297 
298         rm(&quot;ks2&quot;);
299         rm(&quot;ks3&quot;);
300 
301         importkeystore(&quot;ks&quot;, &quot;ks2&quot;, &quot;&quot;)
302                 .shouldContain(&quot;3 entries successfully imported&quot;)
303                 .shouldContain(&quot;Warning&quot;)
304                 .shouldMatch(&quot;&lt;b&gt;.*512-bit RSA key.*is disabled&quot;)
305                 .shouldMatch(&quot;&lt;a&gt;.*MD5withRSA.*is disabled&quot;);
306 
307         importkeystore(&quot;ks&quot;, &quot;ks3&quot;, &quot;-srcalias a&quot;)
</pre>
</td>
</tr>
</table>
<center><a href="../../../misc/UnsafeFieldOffsets.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../../../tools/jpackage/helpers/jdk/jpackage/test/AdditionalLauncher.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>