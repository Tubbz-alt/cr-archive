<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/RunTestsPrebuilt.gmk</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="RunTests.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="RunTestsPrebuiltSpec.gmk.udiff.html" target="_top">next &gt;</a></center>    <h2>make/RunTestsPrebuilt.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -161,53 +161,33 @@</span>
    OPENJDK_TARGET_OS_TYPE:=unix
    ifeq ($(UNAME_OS), Linux)
      OPENJDK_TARGET_OS := linux
    else ifeq ($(UNAME_OS), Darwin)
      OPENJDK_TARGET_OS := macosx
<span class="udiff-line-removed">-   else ifeq ($(UNAME_OS), SunOS)</span>
<span class="udiff-line-removed">-     OPENJDK_TARGET_OS := solaris</span>
    else
      OPENJDK_TARGET_OS := $(UNAME_OS)
    endif
    OPENJDK_TARGET_OS_ENV := $(OPENJDK_TARGET_OS)
  endif
  
  # Assume little endian unless otherwise specified
  OPENJDK_TARGET_CPU_ENDIAN := little
  
<span class="udiff-line-modified-removed">- ifeq ($(OPENJDK_TARGET_OS), solaris)</span>
<span class="udiff-line-modified-removed">-   # On solaris, use uname -p</span>
<span class="udiff-line-modified-removed">-   UNAME_CPU := $(shell $(UNAME) -p)</span>
<span class="udiff-line-modified-removed">-   # Assume 64-bit platform</span>
<span class="udiff-line-removed">-   OPENJDK_TARGET_CPU_BITS := 64</span>
<span class="udiff-line-removed">-   ifeq ($(UNAME_CPU), i386)</span>
<span class="udiff-line-removed">-     OPENJDK_TARGET_CPU := x86_64</span>
<span class="udiff-line-removed">-   else ifeq ($(UNAME_CPU), sparc)</span>
<span class="udiff-line-removed">-     OPENJDK_TARGET_CPU := sparcv9</span>
<span class="udiff-line-removed">-     OPENJDK_TARGET_CPU_ENDIAN := big</span>
<span class="udiff-line-removed">-   else</span>
<span class="udiff-line-removed">-     OPENJDK_TARGET_CPU := $(UNAME_CPU)</span>
<span class="udiff-line-removed">-   endif</span>
<span class="udiff-line-modified-added">+ UNAME_CPU := $(shell $(UNAME) -m)</span>
<span class="udiff-line-modified-added">+ ifeq ($(UNAME_CPU), i686)</span>
<span class="udiff-line-modified-added">+   OPENJDK_TARGET_CPU := x86</span>
<span class="udiff-line-modified-added">+   OPENJDK_TARGET_CPU_BITS := 32</span>
  else
<span class="udiff-line-modified-removed">-   # ... all others use uname -m</span>
<span class="udiff-line-modified-removed">-   UNAME_CPU := $(shell $(UNAME) -m)</span>
<span class="udiff-line-modified-removed">-   ifeq ($(UNAME_CPU), i686)</span>
<span class="udiff-line-modified-removed">-     OPENJDK_TARGET_CPU := x86</span>
<span class="udiff-line-removed">-     OPENJDK_TARGET_CPU_BITS := 32</span>
<span class="udiff-line-removed">-   else</span>
<span class="udiff-line-removed">-     # Assume all others are 64-bit. We use the same CPU name as uname for</span>
<span class="udiff-line-removed">-     # at least x86_64 and aarch64.</span>
<span class="udiff-line-removed">-     OPENJDK_TARGET_CPU := $(UNAME_CPU)</span>
<span class="udiff-line-removed">-     OPENJDK_TARGET_CPU_BITS := 64</span>
<span class="udiff-line-removed">-   endif</span>
<span class="udiff-line-modified-added">+   # Assume all others are 64-bit. We use the same CPU name as uname for</span>
<span class="udiff-line-modified-added">+   # at least x86_64 and aarch64.</span>
<span class="udiff-line-modified-added">+   OPENJDK_TARGET_CPU := $(UNAME_CPU)</span>
<span class="udiff-line-modified-added">+   OPENJDK_TARGET_CPU_BITS := 64</span>
  endif
  
  OPENJDK_TARGET_CPU_ARCH := $(OPENJDK_TARGET_CPU)
  ifeq ($(OPENJDK_TARGET_CPU), x86_64)
    OPENJDK_TARGET_CPU_ARCH := x86
<span class="udiff-line-removed">- else ifeq ($(OPENJDK_TARGET_CPU), sparcv9)</span>
<span class="udiff-line-removed">-   OPENJDK_TARGET_CPU_ARCH := sparc</span>
  endif
  
  ifeq ($(OPENJDK_TARGET_OS), windows)
    ifeq ($(wildcard $(TEST_IMAGE_DIR)/bin/fixpath.exe), )
      $(info Error: fixpath is missing from test image &#39;$(TEST_IMAGE_DIR)&#39;)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -227,15 +207,10 @@</span>
        $(EXPR) `$(CAT) /proc/meminfo | $(GREP) MemTotal | $(AWK) &#39;{print $$2}&#39;` / 1024 \
    )
  else ifeq ($(OPENJDK_TARGET_OS), macosx)
    NUM_CORES := $(shell /usr/sbin/sysctl -n hw.ncpu)
    MEMORY_SIZE := $(shell $(EXPR) `/usr/sbin/sysctl -n hw.memsize` / 1024 / 1024)
<span class="udiff-line-removed">- else ifeq ($(OPENJDK_TARGET_OS), solaris)</span>
<span class="udiff-line-removed">-   NUM_CORES := $(shell /usr/sbin/psrinfo -v | $(GREP) -c on-line)</span>
<span class="udiff-line-removed">-   MEMORY_SIZE := $(shell \</span>
<span class="udiff-line-removed">-       /usr/sbin/prtconf 2&gt; /dev/null | $(GREP) &quot;^Memory [Ss]ize&quot; | $(AWK) &#39;{print $$3}&#39; \</span>
<span class="udiff-line-removed">-   )</span>
  else ifeq ($(OPENJDK_TARGET_OS), windows)
    NUM_CORES := $(NUMBER_OF_PROCESSORS)
    MEMORY_SIZE := $(shell \
        $(EXPR) `wmic computersystem get totalphysicalmemory -value \
            | $(GREP) = | $(SED) &#39;s/\\r//g&#39; \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -263,15 +238,10 @@</span>
      SHARED_LIBRARY_SUFFIX := .so
    else ifeq ($(OPENJDK_TARGET_OS), macosx)
      LD_JAOTC := $(DEVKIT_HOME)/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld
      LIBRARY_PREFIX := lib
      SHARED_LIBRARY_SUFFIX := .dylib
<span class="udiff-line-removed">-   else ifeq ($(OPENJDK_TARGET_OS), solaris)</span>
<span class="udiff-line-removed">-     # Prefer system linker for AOT on Solaris.</span>
<span class="udiff-line-removed">-     LD_JAOTC := ld</span>
<span class="udiff-line-removed">-     LIBRARY_PREFIX := lib</span>
<span class="udiff-line-removed">-     SHARED_LIBRARY_SUFFIX := .so</span>
    endif
  else
    LD := ld
  endif
  
</pre>
<center><a href="RunTests.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="RunTestsPrebuiltSpec.gmk.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>