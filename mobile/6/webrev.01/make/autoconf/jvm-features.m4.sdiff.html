<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/autoconf/jvm-features.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="jdk-options.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="lib-freetype.m4.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/jvm-features.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
303   JVM_FEATURES_CHECK_AVAILABILITY(graal, [
304     AC_MSG_CHECKING([if platform is supported by Graal])
305     # Graal is only available where JVMCI is available since it requires JVMCI.
306     if test &quot;x$OPENJDK_TARGET_CPU&quot; = &quot;xx86_64&quot; || \
307         test &quot;x$OPENJDK_TARGET_CPU&quot; = &quot;xaarch64&quot; ; then
308       AC_MSG_RESULT([yes])
309     else
310       AC_MSG_RESULT([no, $OPENJDK_TARGET_CPU])
311       AVAILABLE=false
312     fi
313   ])
314 ])
315 
316 ###############################################################################
317 # Check if the feature &#39;jfr&#39; is available on this platform.
318 #
319 AC_DEFUN_ONCE([JVM_FEATURES_CHECK_JFR],
320 [
321   JVM_FEATURES_CHECK_AVAILABILITY(jfr, [
322     AC_MSG_CHECKING([if platform is supported by JFR])
<span class="line-modified">323     if test &quot;x$OPENJDK_TARGET_OS&quot; = xaix || \</span>
<span class="line-removed">324         test &quot;x$OPENJDK_TARGET_OS-$OPENJDK_TARGET_CPU&quot; = &quot;xlinux-sparcv9&quot;; then</span>
325       AC_MSG_RESULT([no, $OPENJDK_TARGET_OS-$OPENJDK_TARGET_CPU])
326       AVAILABLE=false
327     else
328       AC_MSG_RESULT([yes])
329     fi
330   ])
331 ])
332 
333 ###############################################################################
334 # Check if the feature &#39;jvmci&#39; is available on this platform.
335 #
336 AC_DEFUN_ONCE([JVM_FEATURES_CHECK_JVMCI],
337 [
338   JVM_FEATURES_CHECK_AVAILABILITY(jvmci, [
339     AC_MSG_CHECKING([if platform is supported by JVMCI])
340     if test &quot;x$OPENJDK_TARGET_CPU&quot; = &quot;xx86_64&quot; || \
341         test &quot;x$OPENJDK_TARGET_CPU&quot; = &quot;xaarch64&quot; ; then
342       AC_MSG_RESULT([yes])
343     else
344       AC_MSG_RESULT([no, $OPENJDK_TARGET_CPU])
</pre>
<hr />
<pre>
430 [
431   # The checks below should add unavailable features to
432   # JVM_FEATURES_PLATFORM_UNAVAILABLE.
433 
434   JVM_FEATURES_CHECK_AOT
435   JVM_FEATURES_CHECK_CDS
436   JVM_FEATURES_CHECK_DTRACE
437   JVM_FEATURES_CHECK_GRAAL
438   JVM_FEATURES_CHECK_JFR
439   JVM_FEATURES_CHECK_JVMCI
440   JVM_FEATURES_CHECK_SHENANDOAHGC
441   JVM_FEATURES_CHECK_STATIC_BUILD
442   JVM_FEATURES_CHECK_ZGC
443 
444   # Filter out features by default for all variants on certain platforms.
445   # Make sure to just add to JVM_FEATURES_PLATFORM_FILTER, since it could
446   # have a value already from custom extensions.
447   if test &quot;x$OPENJDK_TARGET_OS&quot; = xaix; then
448     JVM_FEATURES_PLATFORM_FILTER=&quot;$JVM_FEATURES_PLATFORM_FILTER jfr&quot;
449   fi
<span class="line-removed">450 </span>
<span class="line-removed">451   if test &quot;x$OPENJDK_TARGET_OS-$OPENJDK_TARGET_CPU&quot; = &quot;xlinux-sparcv9&quot;; then</span>
<span class="line-removed">452     JVM_FEATURES_PLATFORM_FILTER=&quot;$JVM_FEATURES_PLATFORM_FILTER jfr&quot;</span>
<span class="line-removed">453   fi</span>
454 ])
455 
456 ###############################################################################
457 # Setup JVM_FEATURES_VARIANT_UNAVAILABLE and JVM_FEATURES_VARIANT_FILTER
458 # to contain those features that are unavailable, or should be off by default,
459 # for this particular JVM variant.
460 #
461 # arg 1: JVM variant
462 #
463 AC_DEFUN([JVM_FEATURES_PREPARE_VARIANT],
464 [
465   variant=$1
466 
467   # Check which features are unavailable for this JVM variant.
468   # This means that is not possible to build these features for this variant.
469   if test &quot;x$variant&quot; = &quot;xminimal&quot;; then
470     JVM_FEATURES_VARIANT_UNAVAILABLE=&quot;cds zero&quot;
471   elif test &quot;x$variant&quot; = &quot;xcore&quot;; then
472     JVM_FEATURES_VARIANT_UNAVAILABLE=&quot;cds minimal zero&quot;
473   elif test &quot;x$variant&quot; = &quot;xzero&quot;; then
</pre>
</td>
<td>
<hr />
<pre>
303   JVM_FEATURES_CHECK_AVAILABILITY(graal, [
304     AC_MSG_CHECKING([if platform is supported by Graal])
305     # Graal is only available where JVMCI is available since it requires JVMCI.
306     if test &quot;x$OPENJDK_TARGET_CPU&quot; = &quot;xx86_64&quot; || \
307         test &quot;x$OPENJDK_TARGET_CPU&quot; = &quot;xaarch64&quot; ; then
308       AC_MSG_RESULT([yes])
309     else
310       AC_MSG_RESULT([no, $OPENJDK_TARGET_CPU])
311       AVAILABLE=false
312     fi
313   ])
314 ])
315 
316 ###############################################################################
317 # Check if the feature &#39;jfr&#39; is available on this platform.
318 #
319 AC_DEFUN_ONCE([JVM_FEATURES_CHECK_JFR],
320 [
321   JVM_FEATURES_CHECK_AVAILABILITY(jfr, [
322     AC_MSG_CHECKING([if platform is supported by JFR])
<span class="line-modified">323     if test &quot;x$OPENJDK_TARGET_OS&quot; = xaix; then</span>

324       AC_MSG_RESULT([no, $OPENJDK_TARGET_OS-$OPENJDK_TARGET_CPU])
325       AVAILABLE=false
326     else
327       AC_MSG_RESULT([yes])
328     fi
329   ])
330 ])
331 
332 ###############################################################################
333 # Check if the feature &#39;jvmci&#39; is available on this platform.
334 #
335 AC_DEFUN_ONCE([JVM_FEATURES_CHECK_JVMCI],
336 [
337   JVM_FEATURES_CHECK_AVAILABILITY(jvmci, [
338     AC_MSG_CHECKING([if platform is supported by JVMCI])
339     if test &quot;x$OPENJDK_TARGET_CPU&quot; = &quot;xx86_64&quot; || \
340         test &quot;x$OPENJDK_TARGET_CPU&quot; = &quot;xaarch64&quot; ; then
341       AC_MSG_RESULT([yes])
342     else
343       AC_MSG_RESULT([no, $OPENJDK_TARGET_CPU])
</pre>
<hr />
<pre>
429 [
430   # The checks below should add unavailable features to
431   # JVM_FEATURES_PLATFORM_UNAVAILABLE.
432 
433   JVM_FEATURES_CHECK_AOT
434   JVM_FEATURES_CHECK_CDS
435   JVM_FEATURES_CHECK_DTRACE
436   JVM_FEATURES_CHECK_GRAAL
437   JVM_FEATURES_CHECK_JFR
438   JVM_FEATURES_CHECK_JVMCI
439   JVM_FEATURES_CHECK_SHENANDOAHGC
440   JVM_FEATURES_CHECK_STATIC_BUILD
441   JVM_FEATURES_CHECK_ZGC
442 
443   # Filter out features by default for all variants on certain platforms.
444   # Make sure to just add to JVM_FEATURES_PLATFORM_FILTER, since it could
445   # have a value already from custom extensions.
446   if test &quot;x$OPENJDK_TARGET_OS&quot; = xaix; then
447     JVM_FEATURES_PLATFORM_FILTER=&quot;$JVM_FEATURES_PLATFORM_FILTER jfr&quot;
448   fi




449 ])
450 
451 ###############################################################################
452 # Setup JVM_FEATURES_VARIANT_UNAVAILABLE and JVM_FEATURES_VARIANT_FILTER
453 # to contain those features that are unavailable, or should be off by default,
454 # for this particular JVM variant.
455 #
456 # arg 1: JVM variant
457 #
458 AC_DEFUN([JVM_FEATURES_PREPARE_VARIANT],
459 [
460   variant=$1
461 
462   # Check which features are unavailable for this JVM variant.
463   # This means that is not possible to build these features for this variant.
464   if test &quot;x$variant&quot; = &quot;xminimal&quot;; then
465     JVM_FEATURES_VARIANT_UNAVAILABLE=&quot;cds zero&quot;
466   elif test &quot;x$variant&quot; = &quot;xcore&quot;; then
467     JVM_FEATURES_VARIANT_UNAVAILABLE=&quot;cds minimal zero&quot;
468   elif test &quot;x$variant&quot; = &quot;xzero&quot;; then
</pre>
</td>
</tr>
</table>
<center><a href="jdk-options.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="lib-freetype.m4.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>