<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/autoconf/lib-freetype.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="jvm-features.m4.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="lib-std.m4.udiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/lib-freetype.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -51,17 +51,10 @@</span>
  
      FREETYPE_LIB_NAME=&quot;${LIBRARY_PREFIX}${FREETYPE_BASE_NAME}${SHARED_LIBRARY_SUFFIX}&quot;
      if ! test -s &quot;$POTENTIAL_FREETYPE_LIB_PATH/$FREETYPE_LIB_NAME&quot;; then
        AC_MSG_NOTICE([Could not find $POTENTIAL_FREETYPE_LIB_PATH/$FREETYPE_LIB_NAME. Ignoring location.])
        FOUND_FREETYPE=no
<span class="udiff-line-removed">-     else</span>
<span class="udiff-line-removed">-       if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xsolaris&quot; \</span>
<span class="udiff-line-removed">-           &amp;&amp; test -s &quot;$POTENTIAL_FREETYPE_LIB_PATH$OPENJDK_TARGET_CPU_ISADIR/$FREETYPE_LIB_NAME&quot;; then</span>
<span class="udiff-line-removed">-         # Found lib in isa dir, use that instead.</span>
<span class="udiff-line-removed">-         POTENTIAL_FREETYPE_LIB_PATH=&quot;$POTENTIAL_FREETYPE_LIB_PATH$OPENJDK_TARGET_CPU_ISADIR&quot;</span>
<span class="udiff-line-removed">-         AC_MSG_NOTICE([Rewriting to use $POTENTIAL_FREETYPE_LIB_PATH instead])</span>
<span class="udiff-line-removed">-       fi</span>
      fi
    fi
  
    if test &quot;x$FOUND_FREETYPE&quot; = &quot;xyes&quot;; then
      FREETYPE_INCLUDE_PATH=&quot;$POTENTIAL_FREETYPE_INCLUDE_PATH&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -90,15 +83,15 @@</span>
    AC_ARG_WITH(freetype-lib, [AS_HELP_STRING([--with-freetype-lib],
        [specify directory for the freetype library])])
  
    # This setup is to verify access to system installed freetype header and
    # libraries. On Windows and MacOS this does not apply and using these options
<span class="udiff-line-modified-removed">-   # will report an error. On other platforms (Linux, Solaris), they will</span>
<span class="udiff-line-modified-removed">-   # default to using the system libraries. If they are found automatically,</span>
<span class="udiff-line-modified-removed">-   # nothing need be done. If they are not found, the configure</span>
<span class="udiff-line-modified-removed">-   # &quot;--with-freetype-*&quot; options may be used to fix that. If the preference is</span>
<span class="udiff-line-modified-removed">-   # to bundle on these platforms then use --with-freetype=bundled.</span>
<span class="udiff-line-modified-added">+   # will report an error. On other platforms they will default to using the</span>
<span class="udiff-line-modified-added">+   # system libraries. If they are found automatically, nothing need be done.</span>
<span class="udiff-line-modified-added">+   # If they are not found, the configure &quot;--with-freetype-*&quot; options may be</span>
<span class="udiff-line-modified-added">+   # used to fix that. If the preference is to bundle on these platforms then</span>
<span class="udiff-line-modified-added">+   # use --with-freetype=bundled.</span>
  
    FREETYPE_BASE_NAME=freetype
    FREETYPE_CFLAGS=
    FREETYPE_LIBS=
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -167,19 +160,10 @@</span>
            # Check modules using pkg-config, but only if we have it (ugly output
            # results otherwise)
            if test &quot;x$PKG_CONFIG&quot; != &quot;x&quot; ; then
              PKG_CHECK_MODULES(FREETYPE, freetype2, [FOUND_FREETYPE=yes], [FOUND_FREETYPE=no])
              if test &quot;x$FOUND_FREETYPE&quot; = &quot;xyes&quot; ; then
<span class="udiff-line-removed">-               # On solaris, pkg_check adds -lz to freetype libs, which isn&#39;t</span>
<span class="udiff-line-removed">-               # necessary for us.</span>
<span class="udiff-line-removed">-               FREETYPE_LIBS=`$ECHO $FREETYPE_LIBS | $SED &#39;s/-lz//g&#39;`</span>
<span class="udiff-line-removed">-               # 64-bit libs for Solaris x86 are installed in the amd64</span>
<span class="udiff-line-removed">-               # subdirectory, change lib to lib/amd64</span>
<span class="udiff-line-removed">-               if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xsolaris&quot; &amp;&amp; \</span>
<span class="udiff-line-removed">-                   test &quot;x$OPENJDK_TARGET_CPU&quot; = &quot;xx86_64&quot; ; then</span>
<span class="udiff-line-removed">-                 FREETYPE_LIBS=`$ECHO $FREETYPE_LIBS | $SED &#39;s?/lib?/lib/amd64?g&#39;`</span>
<span class="udiff-line-removed">-               fi</span>
                AC_MSG_CHECKING([for freetype])
                AC_MSG_RESULT([yes (using pkg-config)])
              fi
            fi
          fi
</pre>
<center><a href="jvm-features.m4.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="lib-std.m4.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>