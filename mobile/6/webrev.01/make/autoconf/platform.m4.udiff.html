<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/autoconf/platform.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="libraries.m4.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="spec.gmk.in.udiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/platform.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -160,10 +160,22 @@</span>
        VAR_CPU=sparcv9
        VAR_CPU_ARCH=sparc
        VAR_CPU_BITS=64
        VAR_CPU_ENDIAN=big
        ;;
<span class="udiff-line-added">+     sparc)</span>
<span class="udiff-line-added">+       VAR_CPU=sparc</span>
<span class="udiff-line-added">+       VAR_CPU_ARCH=sparc</span>
<span class="udiff-line-added">+       VAR_CPU_BITS=32</span>
<span class="udiff-line-added">+       VAR_CPU_ENDIAN=big</span>
<span class="udiff-line-added">+       ;;</span>
<span class="udiff-line-added">+     sparcv9|sparc64)</span>
<span class="udiff-line-added">+       VAR_CPU=sparcv9</span>
<span class="udiff-line-added">+       VAR_CPU_ARCH=sparc</span>
<span class="udiff-line-added">+       VAR_CPU_BITS=64</span>
<span class="udiff-line-added">+       VAR_CPU_ENDIAN=big</span>
<span class="udiff-line-added">+       ;;</span>
      *)
        AC_MSG_ERROR([unsupported cpu $1])
        ;;
    esac
  ])
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -180,14 +192,10 @@</span>
        ;;
      *android*)
        VAR_OS=android
        VAR_OS_TYPE=unix
        ;;
<span class="udiff-line-removed">-     *solaris*)</span>
<span class="udiff-line-removed">-       VAR_OS=solaris</span>
<span class="udiff-line-removed">-       VAR_OS_TYPE=unix</span>
<span class="udiff-line-removed">-       ;;</span>
      *darwin*)
        VAR_OS=macosx
        VAR_OS_TYPE=unix
        ;;
      *ios*)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -387,23 +395,10 @@</span>
    elif test &quot;x$OPENJDK_$1_CPU&quot; = xx86_64; then
      OPENJDK_$1_CPU_LEGACY_LIB=&quot;amd64&quot;
    fi
    AC_SUBST(OPENJDK_$1_CPU_LEGACY_LIB)
  
<span class="udiff-line-removed">-   # OPENJDK_$1_CPU_ISADIR is normally empty. On 64-bit Solaris systems, it is set to</span>
<span class="udiff-line-removed">-   # /amd64 or /sparcv9. This string is appended to some library paths, like this:</span>
<span class="udiff-line-removed">-   # /usr/lib${OPENJDK_$1_CPU_ISADIR}/libexample.so</span>
<span class="udiff-line-removed">-   OPENJDK_$1_CPU_ISADIR=&quot;&quot;</span>
<span class="udiff-line-removed">-   if test &quot;x$OPENJDK_$1_OS&quot; = xsolaris; then</span>
<span class="udiff-line-removed">-     if test &quot;x$OPENJDK_$1_CPU&quot; = xx86_64; then</span>
<span class="udiff-line-removed">-       OPENJDK_$1_CPU_ISADIR=&quot;/amd64&quot;</span>
<span class="udiff-line-removed">-     elif test &quot;x$OPENJDK_$1_CPU&quot; = xsparcv9; then</span>
<span class="udiff-line-removed">-       OPENJDK_$1_CPU_ISADIR=&quot;/sparcv9&quot;</span>
<span class="udiff-line-removed">-     fi</span>
<span class="udiff-line-removed">-   fi</span>
<span class="udiff-line-removed">-   AC_SUBST(OPENJDK_$1_CPU_ISADIR)</span>
<span class="udiff-line-removed">- </span>
    # Setup OPENJDK_$1_CPU_OSARCH, which is used to set the os.arch Java system property
    OPENJDK_$1_CPU_OSARCH=&quot;$OPENJDK_$1_CPU&quot;
    if test &quot;x$OPENJDK_$1_OS&quot; = xlinux &amp;&amp; test &quot;x$OPENJDK_$1_CPU&quot; = xx86; then
      # On linux only, we replace x86 with i386.
      OPENJDK_$1_CPU_OSARCH=&quot;i386&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -516,13 +511,10 @@</span>
    AC_SUBST(OPENJDK_$1_OS_INCLUDE_SUBDIR)
  ])
  
  AC_DEFUN([PLATFORM_SET_RELEASE_FILE_OS_VALUES],
  [
<span class="udiff-line-removed">-   if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xsolaris&quot;; then</span>
<span class="udiff-line-removed">-     RELEASE_FILE_OS_NAME=SunOS</span>
<span class="udiff-line-removed">-   fi</span>
    if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xlinux&quot;; then
      RELEASE_FILE_OS_NAME=Linux
    fi
    if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xwindows&quot;; then
      RELEASE_FILE_OS_NAME=Windows
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -572,29 +564,13 @@</span>
    PLATFORM_EXTRACT_TARGET_AND_BUILD
    PLATFORM_SETUP_TARGET_CPU_BITS
    PLATFORM_SET_MODULE_TARGET_OS_VALUES
    PLATFORM_SET_RELEASE_FILE_OS_VALUES
    PLATFORM_SETUP_LEGACY_VARS
<span class="udiff-line-removed">-   PLATFORM_CHECK_DEPRECATION</span>
<span class="udiff-line-removed">- ])</span>
  
<span class="udiff-line-modified-removed">- AC_DEFUN([PLATFORM_CHECK_DEPRECATION],</span>
<span class="udiff-line-modified-removed">- [</span>
<span class="udiff-line-removed">-   UTIL_ARG_ENABLE(NAME: deprecated-ports, DEFAULT: false,</span>
<span class="udiff-line-removed">-       RESULT: ENABLE_DEPRECATED_PORTS,</span>
<span class="udiff-line-removed">-       DESC: [suppress the error when configuring for a deprecated port])</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   if test &quot;x$OPENJDK_TARGET_OS&quot; = xsolaris || \</span>
<span class="udiff-line-removed">-       (test &quot;x$OPENJDK_TARGET_CPU_ARCH&quot; = xsparc &amp;&amp; \</span>
<span class="udiff-line-removed">-       test &quot;x$with_jvm_variants&quot; != xzero); then</span>
<span class="udiff-line-removed">-     if test &quot;x$ENABLE_DEPRECATED_PORTS&quot; = &quot;xtrue&quot;; then</span>
<span class="udiff-line-removed">-       AC_MSG_WARN([The Solaris and SPARC ports are deprecated and may be removed in a future release.])</span>
<span class="udiff-line-removed">-     else</span>
<span class="udiff-line-removed">-       AC_MSG_ERROR(m4_normalize([The Solaris and SPARC ports are deprecated and may be removed in a</span>
<span class="udiff-line-removed">-         future release. Use --enable-deprecated-ports=yes to suppress this error.]))</span>
<span class="udiff-line-removed">-     fi</span>
<span class="udiff-line-removed">-   fi</span>
<span class="udiff-line-modified-added">+   # Deprecated in JDK 15</span>
<span class="udiff-line-modified-added">+   UTIL_DEPRECATED_ARG_ENABLE(deprecated-ports)</span>
  ])
  
  AC_DEFUN_ONCE([PLATFORM_SETUP_OPENJDK_BUILD_OS_VERSION],
  [
    ###############################################################################
</pre>
<center><a href="libraries.m4.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="spec.gmk.in.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>