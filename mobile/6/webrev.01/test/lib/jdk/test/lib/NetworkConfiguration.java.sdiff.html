<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/lib/jdk/test/lib/NetworkConfiguration.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../jdk/tools/launcher/TestHelper.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="OSVersion.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/lib/jdk/test/lib/NetworkConfiguration.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 51 public class NetworkConfiguration {
 52 
 53     private Map&lt;NetworkInterface,List&lt;Inet4Address&gt;&gt; ip4Interfaces;
 54     private Map&lt;NetworkInterface,List&lt;Inet6Address&gt;&gt; ip6Interfaces;
 55     private final boolean isIPv6Available;
 56     private boolean has_testableipv6address = false;
 57     private boolean has_sitelocaladdress = false;
 58     private boolean has_linklocaladdress = false;
 59     private boolean has_globaladdress = false;
 60 
 61     private NetworkConfiguration(
 62             Map&lt;NetworkInterface,List&lt;Inet4Address&gt;&gt; ip4Interfaces,
 63             Map&lt;NetworkInterface,List&lt;Inet6Address&gt;&gt; ip6Interfaces) {
 64         this.ip4Interfaces = ip4Interfaces;
 65         this.ip6Interfaces = ip6Interfaces;
 66 
 67         // initialize properties that can be queried
 68         isIPv6Available = !ip6Interfaces().collect(Collectors.toList()).isEmpty();
 69         ip6Interfaces().forEach(nif -&gt; {
 70             ip6Addresses(nif)
<span class="line-modified"> 71                 // On Solaris or AIX, a configuration with only local or loopback</span>
 72                 // addresses does not fully enable IPv6 operations.
 73                 // E.g. IPv6 multicasting does not work.
 74                 // So, don&#39;t set has_testableipv6address if we only find these.
<span class="line-modified"> 75                 .filter(addr -&gt; Platform.isSolaris() || Platform.isAix() ?</span>
 76                     !(addr.isAnyLocalAddress() || addr.isLoopbackAddress()) : true)
 77                 .forEach(ia -&gt; {
 78                     has_testableipv6address = true;
 79                     if (ia.isLinkLocalAddress()) has_linklocaladdress = true;
 80                     if (ia.isSiteLocalAddress()) has_sitelocaladdress = true;
 81 
 82                     if (!ia.isLinkLocalAddress() &amp;&amp;
 83                         !ia.isSiteLocalAddress() &amp;&amp;
 84                         !ia.isLoopbackAddress()) {
 85                         has_globaladdress = true;
 86                     }
 87                 });
 88         });
 89     }
 90 
 91     private static boolean isIPv6LinkLocal(InetAddress a) {
 92         return Inet6Address.class.isInstance(a) &amp;&amp; a.isLinkLocalAddress();
 93     }
 94 
 95     public static boolean isTestable(NetworkInterface nif) {
</pre>
</td>
<td>
<hr />
<pre>
 51 public class NetworkConfiguration {
 52 
 53     private Map&lt;NetworkInterface,List&lt;Inet4Address&gt;&gt; ip4Interfaces;
 54     private Map&lt;NetworkInterface,List&lt;Inet6Address&gt;&gt; ip6Interfaces;
 55     private final boolean isIPv6Available;
 56     private boolean has_testableipv6address = false;
 57     private boolean has_sitelocaladdress = false;
 58     private boolean has_linklocaladdress = false;
 59     private boolean has_globaladdress = false;
 60 
 61     private NetworkConfiguration(
 62             Map&lt;NetworkInterface,List&lt;Inet4Address&gt;&gt; ip4Interfaces,
 63             Map&lt;NetworkInterface,List&lt;Inet6Address&gt;&gt; ip6Interfaces) {
 64         this.ip4Interfaces = ip4Interfaces;
 65         this.ip6Interfaces = ip6Interfaces;
 66 
 67         // initialize properties that can be queried
 68         isIPv6Available = !ip6Interfaces().collect(Collectors.toList()).isEmpty();
 69         ip6Interfaces().forEach(nif -&gt; {
 70             ip6Addresses(nif)
<span class="line-modified"> 71                 // On AIX, a configuration with only local or loopback</span>
 72                 // addresses does not fully enable IPv6 operations.
 73                 // E.g. IPv6 multicasting does not work.
 74                 // So, don&#39;t set has_testableipv6address if we only find these.
<span class="line-modified"> 75                 .filter(addr -&gt; Platform.isAix() ?</span>
 76                     !(addr.isAnyLocalAddress() || addr.isLoopbackAddress()) : true)
 77                 .forEach(ia -&gt; {
 78                     has_testableipv6address = true;
 79                     if (ia.isLinkLocalAddress()) has_linklocaladdress = true;
 80                     if (ia.isSiteLocalAddress()) has_sitelocaladdress = true;
 81 
 82                     if (!ia.isLinkLocalAddress() &amp;&amp;
 83                         !ia.isSiteLocalAddress() &amp;&amp;
 84                         !ia.isLoopbackAddress()) {
 85                         has_globaladdress = true;
 86                     }
 87                 });
 88         });
 89     }
 90 
 91     private static boolean isIPv6LinkLocal(InetAddress a) {
 92         return Inet6Address.class.isInstance(a) &amp;&amp; a.isLinkLocalAddress();
 93     }
 94 
 95     public static boolean isTestable(NetworkInterface nif) {
</pre>
</td>
</tr>
</table>
<center><a href="../../../../jdk/tools/launcher/TestHelper.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="OSVersion.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>