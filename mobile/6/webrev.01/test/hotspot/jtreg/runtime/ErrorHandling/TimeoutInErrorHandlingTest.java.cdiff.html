<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/hotspot/jtreg/runtime/ErrorHandling/TimeoutInErrorHandlingTest.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../CompressedOops/UseCompressedOops.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../NMT/CheckForProperDetailStackTrace.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/runtime/ErrorHandling/TimeoutInErrorHandlingTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 47,17 ***</span>
      public static final boolean verbose = System.getProperty(&quot;verbose&quot;) != null;
      // 16 seconds for hs_err generation timeout = 4 seconds per step timeout
      public static final int ERROR_LOG_TIMEOUT = 16;
  
      public static void main(String[] args) throws Exception {
<span class="line-removed">- </span>
<span class="line-removed">-         int error_log_timeout = ERROR_LOG_TIMEOUT;</span>
<span class="line-removed">-         if (&quot;SunOS&quot;.equals(System.getProperty(&quot;os.name&quot;))) {</span>
<span class="line-removed">-             // Give Solaris machines 3X as much time:</span>
<span class="line-removed">-             error_log_timeout *= 3;</span>
<span class="line-removed">-         }</span>
<span class="line-removed">- </span>
          /* Start the VM and let it crash. Specify TestUnresponsiveErrorHandler which will
           * let five subsequent error reporting steps hang. The Timeout handling triggered
           * by the WatcherThread should kick in and interrupt those steps. In theory, the
           * text &quot;timeout occurred during error reporting in step ..&quot; (the little timeouts)
           * should occur in the error log up to four times, followed by the final big timeout
<span class="line-new-header">--- 47,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 80,11 ***</span>
          ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(
              &quot;-XX:+UnlockDiagnosticVMOptions&quot;,
              &quot;-Xmx100M&quot;,
              &quot;-XX:ErrorHandlerTest=14&quot;,
              &quot;-XX:+TestUnresponsiveErrorHandler&quot;,
<span class="line-modified">!             &quot;-XX:ErrorLogTimeout=&quot; + error_log_timeout,</span>
              &quot;-XX:-CreateCoredumpOnCrash&quot;,
              &quot;-version&quot;);
  
          OutputAnalyzer output_detail = new OutputAnalyzer(pb.start());
  
<span class="line-new-header">--- 73,11 ---</span>
          ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(
              &quot;-XX:+UnlockDiagnosticVMOptions&quot;,
              &quot;-Xmx100M&quot;,
              &quot;-XX:ErrorHandlerTest=14&quot;,
              &quot;-XX:+TestUnresponsiveErrorHandler&quot;,
<span class="line-modified">!             &quot;-XX:ErrorLogTimeout=&quot; + ERROR_LOG_TIMEOUT,</span>
              &quot;-XX:-CreateCoredumpOnCrash&quot;,
              &quot;-version&quot;);
  
          OutputAnalyzer output_detail = new OutputAnalyzer(pb.start());
  
</pre>
<center><a href="../CompressedOops/UseCompressedOops.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../NMT/CheckForProperDetailStackTrace.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>