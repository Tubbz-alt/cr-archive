<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/jdk/com/sun/management/OperatingSystemMXBean/TestTotalSwap.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../TEST.groups.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../UnixOperatingSystemMXBean/GetMaxFileDescriptorCount.sh.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/com/sun/management/OperatingSystemMXBean/TestTotalSwap.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2003, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2003, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 115,30 ***</span>
              // -/+ buffers/cache: 5771309056 10762231808
              // Swap:   15999168512          0 15999168512
              String swapSizeStr = ProcessTools.executeCommand(&quot;free&quot;, &quot;-b&quot;)
                                               .firstMatch(&quot;Swap:\\s+([0-9]+)\\s+.*&quot;, 1);
              return Long.parseLong(swapSizeStr);
<span class="line-removed">-         } else if (Platform.isSolaris()) {</span>
<span class="line-removed">-             // swapfile             dev   swaplo blocks   free</span>
<span class="line-removed">-             // /dev/dsk/c0t0d0s1   136,1      16 1638608 1600528</span>
<span class="line-removed">-             OutputAnalyzer out= ProcessTools.executeCommand(</span>
<span class="line-removed">-                     &quot;/usr/sbin/swap&quot;,</span>
<span class="line-removed">-                     &quot;-l&quot;</span>
<span class="line-removed">-             );</span>
<span class="line-removed">- </span>
<span class="line-removed">-             long swapSize = 0;</span>
<span class="line-removed">- </span>
<span class="line-removed">-             for (String line : out.asLines()) {</span>
<span class="line-removed">-                 if (line.contains(&quot;swapfile&quot;)) continue;</span>
<span class="line-removed">- </span>
<span class="line-removed">-                 String[] vals = line.split(&quot;\\s+&quot;);</span>
<span class="line-removed">-                 if (vals.length == 5) {</span>
<span class="line-removed">-                     swapSize += Long.parseLong(vals[3]) * 512; // size is reported in 512b blocks</span>
<span class="line-removed">-                 }</span>
<span class="line-removed">-             }</span>
<span class="line-removed">- </span>
<span class="line-removed">-             return swapSize;</span>
          } else if (Platform.isOSX()) {
              // total = 8192.00M used = 7471.11M free = 720.89M (encrypted)
              String swapSizeStr = ProcessTools.executeCommand(
                      &quot;/usr/sbin/sysctl&quot;,
                      &quot;-n&quot;,
<span class="line-new-header">--- 115,10 ---</span>
</pre>
<center><a href="../../../../TEST.groups.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../UnixOperatingSystemMXBean/GetMaxFileDescriptorCount.sh.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>