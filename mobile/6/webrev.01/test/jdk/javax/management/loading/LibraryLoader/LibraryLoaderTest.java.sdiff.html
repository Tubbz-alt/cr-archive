<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/javax/management/loading/LibraryLoader/LibraryLoaderTest.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../imageio/stream/StreamCloserLeak/run_test.sh.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../../script/CommonSetup.sh.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/javax/management/loading/LibraryLoader/LibraryLoaderTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2004, 2015, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
</pre>
<hr />
<pre>
 41 import javax.management.ObjectInstance;
 42 import javax.management.ObjectName;
 43 import javax.management.ReflectionException;
 44 
 45 public class LibraryLoaderTest {
 46 
 47     private static final String mletInfo[][] = {
 48         {&quot;testDomain:type=MLet,index=0&quot;, &quot;UseNativeLib0.html&quot;},
 49         {&quot;testDomain:type=MLet,index=1&quot;, &quot;UseNativeLib1.html&quot;}
 50     };
 51 
 52     public static void main(String args[]) throws Exception {
 53 
 54         String osName = System.getProperty(&quot;os.name&quot;);
 55         System.out.println(&quot;os.name=&quot; + osName);
 56         String osArch = System.getProperty(&quot;os.arch&quot;);
 57         System.out.println(&quot;os.name=&quot; + osArch);
 58 
 59         // Check for supported platforms:
 60         //
<span class="line-modified"> 61         // Solaris/SPARC and Windows/x86</span>
 62         //
<span class="line-modified"> 63         if ((!(osName.equals(&quot;SunOS&quot;) &amp;&amp; osArch.equals(&quot;sparc&quot;))) &amp;&amp;</span>
<span class="line-removed"> 64             (!(osName.startsWith(&quot;Windows&quot;) &amp;&amp; osArch.equals(&quot;x86&quot;)))) {</span>
 65             System.out.println(
<span class="line-modified"> 66               &quot;This test runs only on Solaris/SPARC and Windows/x86 platforms&quot;);</span>
 67             System.out.println(&quot;Bye! Bye!&quot;);
 68             return;
 69         }
 70 
 71         String libPath = System.getProperty(&quot;java.library.path&quot;);
 72         System.out.println(&quot;java.library.path=&quot; + libPath);
 73         String testSrc = System.getProperty(&quot;test.src&quot;);
 74         System.out.println(&quot;test.src=&quot; + testSrc);
 75         String workingDir = System.getProperty(&quot;user.dir&quot;);
 76         System.out.println(&quot;user.dir=&quot; + workingDir);
 77 
 78         String urlCodebase;
 79         if (testSrc.startsWith(&quot;/&quot;)) {
 80             urlCodebase =
 81                 &quot;file:&quot; + testSrc.replace(File.separatorChar, &#39;/&#39;) + &quot;/&quot;;
 82         } else {
 83             urlCodebase =
 84                 &quot;file:/&quot; + testSrc.replace(File.separatorChar, &#39;/&#39;) + &quot;/&quot;;
 85         }
 86 
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2004, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
</pre>
<hr />
<pre>
 41 import javax.management.ObjectInstance;
 42 import javax.management.ObjectName;
 43 import javax.management.ReflectionException;
 44 
 45 public class LibraryLoaderTest {
 46 
 47     private static final String mletInfo[][] = {
 48         {&quot;testDomain:type=MLet,index=0&quot;, &quot;UseNativeLib0.html&quot;},
 49         {&quot;testDomain:type=MLet,index=1&quot;, &quot;UseNativeLib1.html&quot;}
 50     };
 51 
 52     public static void main(String args[]) throws Exception {
 53 
 54         String osName = System.getProperty(&quot;os.name&quot;);
 55         System.out.println(&quot;os.name=&quot; + osName);
 56         String osArch = System.getProperty(&quot;os.arch&quot;);
 57         System.out.println(&quot;os.name=&quot; + osArch);
 58 
 59         // Check for supported platforms:
 60         //
<span class="line-modified"> 61         // Windows/x86</span>
 62         //
<span class="line-modified"> 63         if ((!(osName.startsWith(&quot;Windows&quot;) &amp;&amp; osArch.equals(&quot;x86&quot;)))) {</span>

 64             System.out.println(
<span class="line-modified"> 65               &quot;This test runs only on Windows/x86 platforms&quot;);</span>
 66             System.out.println(&quot;Bye! Bye!&quot;);
 67             return;
 68         }
 69 
 70         String libPath = System.getProperty(&quot;java.library.path&quot;);
 71         System.out.println(&quot;java.library.path=&quot; + libPath);
 72         String testSrc = System.getProperty(&quot;test.src&quot;);
 73         System.out.println(&quot;test.src=&quot; + testSrc);
 74         String workingDir = System.getProperty(&quot;user.dir&quot;);
 75         System.out.println(&quot;user.dir=&quot; + workingDir);
 76 
 77         String urlCodebase;
 78         if (testSrc.startsWith(&quot;/&quot;)) {
 79             urlCodebase =
 80                 &quot;file:&quot; + testSrc.replace(File.separatorChar, &#39;/&#39;) + &quot;/&quot;;
 81         } else {
 82             urlCodebase =
 83                 &quot;file:/&quot; + testSrc.replace(File.separatorChar, &#39;/&#39;) + &quot;/&quot;;
 84         }
 85 
</pre>
</td>
</tr>
</table>
<center><a href="../../../imageio/stream/StreamCloserLeak/run_test.sh.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../../script/CommonSetup.sh.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>