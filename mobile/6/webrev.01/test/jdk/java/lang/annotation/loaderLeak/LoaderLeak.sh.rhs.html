<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames test/jdk/java/lang/annotation/loaderLeak/LoaderLeak.sh</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre> 1 #!/bin/sh
 2 
<a name="1" id="anc1"></a><span class="line-modified"> 3 # Copyright (c) 2004, 2020, Oracle and/or its affiliates. All rights reserved.</span>
 4 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 5 #
 6 # This code is free software; you can redistribute it and/or modify it
 7 # under the terms of the GNU General Public License version 2 only, as
 8 # published by the Free Software Foundation.
 9 #
10 # This code is distributed in the hope that it will be useful, but WITHOUT
11 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
12 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
13 # version 2 for more details (a copy is included in the LICENSE file that
14 # accompanied this code).
15 #
16 # You should have received a copy of the GNU General Public License version
17 # 2 along with this work; if not, write to the Free Software Foundation,
18 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
19 #
20 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
21 # or visit www.oracle.com if you need additional information or have any
22 # questions.
23 
24 if [ &quot;${TESTSRC}&quot; = &quot;&quot; ]
25 then
26   echo &quot;TESTSRC not set.  Test cannot execute.  Failed.&quot;
27   exit 1
28 fi
29 echo &quot;TESTSRC=${TESTSRC}&quot;
30 if [ &quot;${TESTJAVA}&quot; = &quot;&quot; ]
31 then
32   echo &quot;TESTJAVA not set.  Test cannot execute.  Failed.&quot;
33   exit 1
34 fi
35 echo &quot;TESTJAVA=${TESTJAVA}&quot;
36 if [ &quot;${COMPILEJAVA}&quot; = &quot;&quot; ]; then
37   COMPILEJAVA=&quot;${TESTJAVA}&quot;
38 fi
39 echo &quot;COMPILEJAVA=${COMPILEJAVA}&quot;
40 if [ &quot;${TESTCLASSES}&quot; = &quot;&quot; ]
41 then
42   echo &quot;TESTCLASSES not set.  Test cannot execute.  Failed.&quot;
43   exit 1
44 fi
45 echo &quot;TESTCLASSES=${TESTCLASSES}&quot;
46 echo &quot;CLASSPATH=${CLASSPATH}&quot;
47 
48 # set platform-dependent variables
49 OS=`uname -s`
50 case &quot;$OS&quot; in
<a name="2" id="anc2"></a><span class="line-modified">51   Linux | Darwin | AIX )</span>
52     NULL=/dev/null
53     PS=&quot;:&quot;
54     FS=&quot;/&quot;
55     ;;
56   CYGWIN* )
57     NULL=/dev/null
58     PS=&quot;;&quot;
59     FS=&quot;/&quot;
60     ;;
61   Windows* )
62     NULL=NUL
63     PS=&quot;;&quot;
64     FS=&quot;\\&quot;
65     ;;
66   * )
67     echo &quot;Unrecognized system!&quot;
68     exit 1;
69     ;;
70 esac
71 
72 mkdir -p classes
73 cp ${TESTSRC}${FS}*.java .
74 ${COMPILEJAVA}${FS}bin${FS}javac ${TESTJAVACOPTS} ${TESTTOOLVMOPTS} -d classes A.java B.java C.java
75 ${COMPILEJAVA}${FS}bin${FS}javac ${TESTJAVACOPTS} ${TESTTOOLVMOPTS} Main.java
76 ${TESTJAVA}${FS}bin${FS}java ${TESTVMOPTS} Main
77 result=$?
78 if [ $result -eq 0 ]
79 then
80   echo &quot;Passed 1 of 2&quot;
81 else
82   echo &quot;Failed 1 of 2&quot;
83   exit $result
84 fi
85 ${TESTJAVA}${FS}bin${FS}java ${TESTVMOPTS} Main foo
86 result=$?
87 if [ $result -eq 0 ]
88 then
89   echo &quot;Passed 2 of 2&quot;
90 else
91   echo &quot;Failed 2 of 2&quot;
92 fi
93 exit $result
<a name="3" id="anc3"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="3" type="hidden" />
</body>
</html>