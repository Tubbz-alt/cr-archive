<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/awt/Window/MinimumSizeDPIVariation/MinimumSizeDPIVariation.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../AlwaysOnTop/AutoTestOnTop.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../event/KeyEvent/ExtendedModifiersTest/ExtendedModifiersTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/awt/Window/MinimumSizeDPIVariation/MinimumSizeDPIVariation.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 86             }
 87             return minimumSize;
 88         } finally {
 89             window.dispose();
 90         }
 91     }
 92 
 93     private static void check(int actual, double expected) {
 94         double i = 100 * (actual - expected) / expected;
 95         if (Math.abs(i) &gt; 10) { // no more than 10% variation
 96             System.err.println(&quot;Expected: &quot; + expected);
 97             System.err.println(&quot;Actual: &quot; + actual);
 98             throw new RuntimeException(&quot;Difference is too big: &quot; + i);
 99         }
100     }
101 
102     private static void checkAllDPI(String comp, int w, int h)
103             throws Exception {
104         if (!Platform.isOSX()) {
105             for (String dpi : List.of(&quot;1.5&quot;, &quot;1.75&quot;, &quot;2&quot;, &quot;2.5&quot;)) {
<span class="line-modified">106                 runPocess(dpi, comp, w, h);</span>
107             }
108         }
109     }
110 
<span class="line-modified">111     private static void runPocess(String dpi, String comp, int w, int h)</span>
112             throws Exception {
113         ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(
114                 &quot;-Dsun.java2d.uiScale=&quot; + dpi,
115                 MinimumSizeDPIVariation.class.getSimpleName(), comp,
116                 String.valueOf(w), String.valueOf(h), dpi);
117         Process worker = ProcessTools.startProcess(&quot;Worker&quot;, pb, null, 20,
118                 TimeUnit.SECONDS);
119         new OutputAnalyzer(worker).shouldHaveExitValue(0);
120     }
121 }
</pre>
</td>
<td>
<hr />
<pre>
 86             }
 87             return minimumSize;
 88         } finally {
 89             window.dispose();
 90         }
 91     }
 92 
 93     private static void check(int actual, double expected) {
 94         double i = 100 * (actual - expected) / expected;
 95         if (Math.abs(i) &gt; 10) { // no more than 10% variation
 96             System.err.println(&quot;Expected: &quot; + expected);
 97             System.err.println(&quot;Actual: &quot; + actual);
 98             throw new RuntimeException(&quot;Difference is too big: &quot; + i);
 99         }
100     }
101 
102     private static void checkAllDPI(String comp, int w, int h)
103             throws Exception {
104         if (!Platform.isOSX()) {
105             for (String dpi : List.of(&quot;1.5&quot;, &quot;1.75&quot;, &quot;2&quot;, &quot;2.5&quot;)) {
<span class="line-modified">106                 runProcess(dpi, comp, w, h);</span>
107             }
108         }
109     }
110 
<span class="line-modified">111     private static void runProcess(String dpi, String comp, int w, int h)</span>
112             throws Exception {
113         ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(
114                 &quot;-Dsun.java2d.uiScale=&quot; + dpi,
115                 MinimumSizeDPIVariation.class.getSimpleName(), comp,
116                 String.valueOf(w), String.valueOf(h), dpi);
117         Process worker = ProcessTools.startProcess(&quot;Worker&quot;, pb, null, 20,
118                 TimeUnit.SECONDS);
119         new OutputAnalyzer(worker).shouldHaveExitValue(0);
120     }
121 }
</pre>
</td>
</tr>
</table>
<center><a href="../AlwaysOnTop/AutoTestOnTop.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../event/KeyEvent/ExtendedModifiersTest/ExtendedModifiersTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>