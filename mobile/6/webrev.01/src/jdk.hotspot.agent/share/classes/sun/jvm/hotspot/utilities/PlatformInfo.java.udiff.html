<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/utilities/PlatformInfo.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../runtime/Threads.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../native/libsaproc/ps_core_common.c.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/utilities/PlatformInfo.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -26,18 +26,14 @@</span>
  
  /** Provides canonicalized OS and CPU information for the rest of the
      system. */
  
  public class PlatformInfo {
<span class="udiff-line-modified-removed">-   /* Returns &quot;solaris&quot; if on Solaris; &quot;win32&quot; if Windows; &quot;linux&quot; if</span>
<span class="udiff-line-removed">-      Linux. Used to determine location of dbx and import module, or</span>
<span class="udiff-line-removed">-      possible debugger agent on win32. */</span>
<span class="udiff-line-modified-added">+   /* Returns &quot;win32&quot; if Windows; &quot;linux&quot; if Linux. */</span>
    public static String getOS() throws UnsupportedPlatformException {
      String os = System.getProperty(&quot;os.name&quot;);
<span class="udiff-line-modified-removed">-     if (os.equals(&quot;SunOS&quot;)) {</span>
<span class="udiff-line-removed">-       return &quot;solaris&quot;;</span>
<span class="udiff-line-removed">-     } else if (os.equals(&quot;Linux&quot;)) {</span>
<span class="udiff-line-modified-added">+     if (os.equals(&quot;Linux&quot;)) {</span>
        return &quot;linux&quot;;
      } else if (os.equals(&quot;FreeBSD&quot;)) {
        return &quot;bsd&quot;;
      } else if (os.equals(&quot;NetBSD&quot;)) {
        return &quot;bsd&quot;;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -52,24 +48,24 @@</span>
      }
    }
  
    public static boolean knownCPU(String cpu) {
      final String[] KNOWN =
<span class="udiff-line-modified-removed">-         new String[] {&quot;i386&quot;, &quot;x86&quot;, &quot;x86_64&quot;, &quot;amd64&quot;, &quot;sparc&quot;, &quot;sparcv9&quot;, &quot;ppc64&quot;, &quot;ppc64le&quot;, &quot;aarch64&quot;};</span>
<span class="udiff-line-modified-added">+         new String[] {&quot;i386&quot;, &quot;x86&quot;, &quot;x86_64&quot;, &quot;amd64&quot;, &quot;ppc64&quot;, &quot;ppc64le&quot;, &quot;aarch64&quot;};</span>
  
      for(String s : KNOWN) {
        if(s.equals(cpu))
          return true;
      }
  
      return false;
    }
  
<span class="udiff-line-modified-removed">-   /* Returns &quot;sparc&quot; for SPARC based platforms &quot;x86&quot; for x86 based</span>
<span class="udiff-line-modified-removed">-      platforms and x86_64 for 64bit x86 based platform. Otherwise</span>
<span class="udiff-line-modified-removed">-      returns the value of os.arch. If the value is not recognized as supported,</span>
<span class="udiff-line-modified-removed">-      an exception is thrown instead. */</span>
<span class="udiff-line-modified-added">+   /* Returns &quot;x86&quot; for x86 based platforms and x86_64 for 64bit x86</span>
<span class="udiff-line-modified-added">+      based platform. Otherwise returns the value of os.arch. If the</span>
<span class="udiff-line-modified-added">+      value is not recognized as supported, an exception is thrown</span>
<span class="udiff-line-modified-added">+      instead. */</span>
  
    public static String getCPU() throws UnsupportedPlatformException {
      String cpu = System.getProperty(&quot;os.arch&quot;);
  
      // Check that CPU is supported
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -79,13 +75,10 @@</span>
  
      // Tweeks
      if (cpu.equals(&quot;i386&quot;))
        return &quot;x86&quot;;
  
<span class="udiff-line-removed">-     if (cpu.equals(&quot;sparcv9&quot;))</span>
<span class="udiff-line-removed">-       return &quot;sparc&quot;;</span>
<span class="udiff-line-removed">- </span>
      if (cpu.equals(&quot;x86_64&quot;))
        return &quot;amd64&quot;;
  
      if (cpu.equals(&quot;ppc64le&quot;))
        return &quot;ppc64&quot;;
</pre>
<center><a href="../runtime/Threads.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../native/libsaproc/ps_core_common.c.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>