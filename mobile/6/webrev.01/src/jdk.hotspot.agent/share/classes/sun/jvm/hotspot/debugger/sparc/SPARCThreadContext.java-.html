<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/debugger/sparc/SPARCThreadContext.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 
 25 package sun.jvm.hotspot.debugger.sparc;
 26 
 27 import java.lang.annotation.Native;
 28 
 29 import sun.jvm.hotspot.debugger.*;
 30 import sun.jvm.hotspot.debugger.cdbg.*;
 31 
 32 /** Currently provides just the minimal information necessary to get
 33     stack traces working. FIXME: currently hardwired for v9 -- will
 34     have to factor out v8/v9 specific code. FIXME: may want to try to
 35     share code between this class and asm/sparc. */
 36 
 37 public abstract class SPARCThreadContext implements ThreadContext {
 38   // Taken from /usr/include/sys/procfs_isa.h
 39 
 40   // One instance of the Native annotation is enough to trigger header generation
 41   // for this file.
 42   @Native
 43   public static final int R_G0 = 0;
 44   public static final int R_G1 = 1;
 45   public static final int R_G2 = 2;
 46   public static final int R_G3 = 3;
 47   public static final int R_G4 = 4;
 48   public static final int R_G5 = 5;
 49   public static final int R_G6 = 6;
 50   public static final int R_G7 = 7;
 51   public static final int R_O0 = 8;
 52   public static final int R_O1 = 9;
 53   public static final int R_O2 = 10;
 54   public static final int R_O3 = 11;
 55   public static final int R_O4 = 12;
 56   public static final int R_O5 = 13;
 57   public static final int R_O6 = 14;
 58   public static final int R_O7 = 15;
 59   public static final int R_L0 = 16;
 60   public static final int R_L1 = 17;
 61   public static final int R_L2 = 18;
 62   public static final int R_L3 = 19;
 63   public static final int R_L4 = 20;
 64   public static final int R_L5 = 21;
 65   public static final int R_L6 = 22;
 66   public static final int R_L7 = 23;
 67   public static final int R_I0 = 24;
 68   public static final int R_I1 = 25;
 69   public static final int R_I2 = 26;
 70   public static final int R_I3 = 27;
 71   public static final int R_I4 = 28;
 72   public static final int R_I5 = 29;
 73   public static final int R_I6 = 30;
 74   public static final int R_I7 = 31;
 75 
 76   // sparc-v9
 77   public static final int R_CCR = 32;
 78   // sparc-v8
 79   public static final int R_PSR = 32;
 80 
 81   public static final int R_PC = 33;
 82   public static final int R_nPC = 34;
 83 
 84   public static final int R_SP = R_O6;
 85   public static final int R_FP = R_I6;
 86 
 87   public static final int R_Y  = 35;
 88 
 89   // sparc-v9
 90   public static final int R_ASI = 36;
 91   public static final int R_FPRS = 37;
 92 
 93   // sparc-v8
 94   public static final int R_WIM = 36;
 95   public static final int R_TBR = 37;
 96 
 97   public static final int NPRGREG = 38;
 98 
 99   private static final String[] regNames = {
100     &quot;G0&quot;,    &quot;G1&quot;,    &quot;G2&quot;,    &quot;G3&quot;,
101     &quot;G4&quot;,    &quot;G5&quot;,    &quot;G6&quot;,    &quot;G7&quot;,
102     &quot;O0&quot;,    &quot;O1&quot;,    &quot;O2&quot;,    &quot;O3&quot;,
103     &quot;O4&quot;,    &quot;O5&quot;,    &quot;O6/SP&quot;, &quot;O7&quot;,
104     &quot;L0&quot;,    &quot;L1&quot;,    &quot;L2&quot;,    &quot;L3&quot;,
105     &quot;L4&quot;,    &quot;L5&quot;,    &quot;L6&quot;,    &quot;L7&quot;,
106     &quot;I0&quot;,    &quot;I1&quot;,    &quot;I2&quot;,    &quot;I3&quot;,
107     &quot;I4&quot;,    &quot;I5&quot;,    &quot;I6/FP&quot;, &quot;I7&quot;,
108     &quot;CCR/PSR&quot;, &quot;PC&quot;,  &quot;nPC&quot;,   &quot;Y&quot;,
109     &quot;ASI/WIM&quot;, &quot;FPRS/TBR&quot;
110   };
111 
112   private long[] data;
113 
114   public SPARCThreadContext() {
115     data = new long[NPRGREG];
116   }
117 
118   public int getNumRegisters() {
119     return NPRGREG;
120   }
121 
122   public String getRegisterName(int index) {
123     return regNames[index];
124   }
125 
126   public void setRegister(int index, long value) {
127     data[index] = value;
128   }
129 
130   public long getRegister(int index) {
131     return data[index];
132   }
133 
134   public CFrame getTopFrame(Debugger dbg) {
135     return null;
136   }
137 
138   /** This can&#39;t be implemented in this class since we would have to
139       tie the implementation to, for example, the debugging system */
140   public abstract void setRegisterAsAddress(int index, Address value);
141 
142   /** This can&#39;t be implemented in this class since we would have to
143       tie the implementation to, for example, the debugging system */
144   public abstract Address getRegisterAsAddress(int index);
145 }
    </pre>
  </body>
</html>