<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.sctp/unix/native/libsctp/SctpChannelImpl.c</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="Sctp.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="SctpNet.c.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.sctp/unix/native/libsctp/SctpChannelImpl.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2009, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2009, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -324,14 +324,15 @@</span>
          case SCTP_ADDR_ADDED :
              event = sun_nio_ch_sctp_PeerAddrChange_SCTP_ADDR_ADDED;
              break;
          case SCTP_ADDR_MADE_PRIM :
              event = sun_nio_ch_sctp_PeerAddrChange_SCTP_ADDR_MADE_PRIM;
<span class="udiff-line-removed">- #ifdef __linux__  /* Solaris currently doesn&#39;t support SCTP_ADDR_CONFIRMED */</span>
              break;
<span class="udiff-line-added">+ #ifdef __linux__</span>
          case SCTP_ADDR_CONFIRMED :
              event = sun_nio_ch_sctp_PeerAddrChange_SCTP_ADDR_CONFIRMED;
<span class="udiff-line-added">+             break;</span>
  #endif  /* __linux__ */
      }
  
      addressObj = SockAddrToInetSocketAddress(env, (struct sockaddr*)&amp;spc-&gt;spc_aaddr);
      CHECK_NULL(addressObj);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -477,24 +478,10 @@</span>
                      return 0;
                  }
                  bufp = newBuf;
                  rv += rvSAVE;
              }
<span class="udiff-line-removed">- #ifdef __sparc</span>
<span class="udiff-line-removed">-               else if ((intptr_t)addr &amp; 0x3) {</span>
<span class="udiff-line-removed">-                 /* the given buffer is not 4 byte aligned */</span>
<span class="udiff-line-removed">-                 char* newBuf;</span>
<span class="udiff-line-removed">-                 if ((newBuf = malloc(SCTP_NOTIFICATION_SIZE)) == NULL) {</span>
<span class="udiff-line-removed">-                     JNU_ThrowOutOfMemoryError(env, &quot;Out of native heap space.&quot;);</span>
<span class="udiff-line-removed">-                     return -1;</span>
<span class="udiff-line-removed">-                 }</span>
<span class="udiff-line-removed">-                 allocated = JNI_TRUE;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-                 memcpy(newBuf, addr, rv);</span>
<span class="udiff-line-removed">-                 bufp = newBuf;</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">- #endif</span>
              snp = (union sctp_notification *) bufp;
              if (handleNotification(env, fd, resultContainerObj, snp, rv,
                                     (msg-&gt;msg_flags &amp; MSG_EOR),
                                     &amp;sa.sa) == JNI_TRUE) {
                  /* We have received a notification that is of interest
</pre>
<center><a href="Sctp.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="SctpNet.c.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>