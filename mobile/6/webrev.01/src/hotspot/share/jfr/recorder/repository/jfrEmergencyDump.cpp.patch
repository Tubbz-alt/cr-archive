diff a/src/hotspot/share/jfr/recorder/repository/jfrEmergencyDump.cpp b/src/hotspot/share/jfr/recorder/repository/jfrEmergencyDump.cpp
--- a/src/hotspot/share/jfr/recorder/repository/jfrEmergencyDump.cpp
+++ b/src/hotspot/share/jfr/recorder/repository/jfrEmergencyDump.cpp
@@ -528,11 +528,11 @@
     EventShutdown e;
     e.set_reason("VM Error");
     e.commit();
   } else {
     // OOM
-    LeakProfiler::emit_events(max_jlong, false);
+    LeakProfiler::emit_events(max_jlong, false, false);
   }
   EventDumpReason event;
   event.set_reason(exception_handler ? "Crash" : "Out of Memory");
   event.set_recordingId(-1);
   event.commit();
