<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/prims/jvmti.xml</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../precompiled/precompiled.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../runtime/abstract_vm_version.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/prims/jvmti.xml</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  409 
  410   &lt;intro id=&quot;writingAgents&quot; label=&quot;Writing Agents&quot;&gt;
  411     Agents can be written in any native language that supports C
  412     language calling conventions and C or C++
  413     definitions.
  414     &lt;p/&gt;
  415     The function, event, data type, and constant definitions needed for
  416     using &lt;jvmti/&gt; are defined in the include file &lt;code&gt;jvmti.h&lt;/code&gt;.
  417     To use these definitions add the &lt;tm&gt;J2SE&lt;/tm&gt; include directory
  418     to your include path and add
  419     &lt;example&gt;
  420 #include &amp;lt;jvmti.h&amp;gt;
  421     &lt;/example&gt;
  422     to your source code.
  423   &lt;/intro&gt;
  424 
  425   &lt;intro id=&quot;deployingAgents&quot; label=&quot;Deploying Agents&quot;&gt;
  426     An agent is deployed in a platform specific manner but is typically the
  427     platform equivalent of a dynamic library. On the &lt;tm&gt;Windows&lt;/tm&gt; operating
  428     system, for example, an agent library is a &quot;Dynamic Linked Library&quot; (DLL).
<span class="line-modified">  429     On the &lt;tm&gt;Solaris&lt;/tm&gt; Operating Environment, an agent library is a shared</span>
<span class="line-modified">  430     object (&lt;code&gt;.so&lt;/code&gt; file).</span>
  431     &lt;p/&gt;
  432 
  433     An agent may be started at VM startup by specifying the agent library
  434     name using a &lt;internallink id=&quot;starting&quot;&gt;command line option&lt;/internallink&gt;.
  435     Some implementations may support a mechanism to &lt;internallink id=&quot;onattach&quot;&gt;
  436     start agents&lt;/internallink&gt; in the live &lt;functionlink id=&quot;GetPhase&quot;&gt;phase&lt;/functionlink&gt;.
  437     The details of how this is initiated are implementation specific.
  438   &lt;/intro&gt;
  439 
  440     &lt;intro id=&quot;entryPoint&quot; label=&quot;Statically Linked Agents (since version 1.2.3)&quot;&gt;
  441 
  442       A native JVMTI Agent may be &lt;i&gt;statically linked&lt;/i&gt; with the VM.
  443       The manner in which the library and VM image are combined is
  444       implementation-dependent.
  445       An agent L whose image has been combined with the VM is defined as
  446       &lt;i&gt;statically linked&lt;/i&gt; if and only if the agent exports a function
  447       called Agent_OnLoad_L.
  448 &lt;p/&gt;
  449       If a &lt;i&gt;statically linked&lt;/i&gt; agent L exports a function called
  450       Agent_OnLoad_L and a function called Agent_OnLoad, the Agent_OnLoad
</pre>
<hr />
<pre>
  480     &lt;p/&gt;
  481     One of the two following
  482     command-line options is used on VM startup to
  483     properly load and run agents.
  484     These arguments identify the library containing
  485     the agent as well as an options
  486     string to be passed in at startup.
  487     &lt;dl&gt;
  488       &lt;dt&gt;&lt;code&gt;-agentlib:&lt;/code&gt;&lt;i&gt;&amp;lt;agent-lib-name&amp;gt;&lt;/i&gt;&lt;code&gt;=&lt;/code&gt;&lt;i&gt;&amp;lt;options&amp;gt;&lt;/i&gt;&lt;/dt&gt;
  489       &lt;dd&gt;
  490         The name following &lt;code&gt;-agentlib:&lt;/code&gt; is the name of the
  491         library to load.  Lookup of the library, both its full name and location,
  492         proceeds in a platform-specific manner.
  493         Typically, the &lt;i&gt;&amp;lt;agent-lib-name&amp;gt;&lt;/i&gt; is expanded to an
  494         operating system specific file name.
  495         The &lt;i&gt;&amp;lt;options&amp;gt;&lt;/i&gt; will be passed to the agent on start-up.
  496         For example, if the option
  497         &lt;code&gt;-agentlib:foo=opt1,opt2&lt;/code&gt; is specified, the VM will attempt to
  498         load the shared library &lt;code&gt;foo.dll&lt;/code&gt; from the system &lt;code&gt;PATH&lt;/code&gt;
  499         under &lt;tm&gt;Windows&lt;/tm&gt; or &lt;code&gt;libfoo.so&lt;/code&gt; from the
<span class="line-modified">  500         &lt;code&gt;LD_LIBRARY_PATH&lt;/code&gt; under the &lt;tm&gt;Solaris&lt;/tm&gt; operating</span>
<span class="line-removed">  501         environment.</span>
  502         If the agent library is statically linked into the executable
  503         then no actual loading takes place.
  504     &lt;p/&gt;
  505       &lt;/dd&gt;
  506       &lt;dt&gt;&lt;code&gt;-agentpath:&lt;/code&gt;&lt;i&gt;&amp;lt;path-to-agent&amp;gt;&lt;/i&gt;&lt;code&gt;=&lt;/code&gt;&lt;i&gt;&amp;lt;options&amp;gt;&lt;/i&gt;&lt;/dt&gt;
  507       &lt;dd&gt;
  508         The path following &lt;code&gt;-agentpath:&lt;/code&gt; is the absolute path from which
  509         to load the library.
  510         No library name expansion will occur.
  511         The &lt;i&gt;&amp;lt;options&amp;gt;&lt;/i&gt; will be passed to the agent on start-up.
  512         For example, if the option
  513         &lt;code&gt;-agentpath:c:\myLibs\foo.dll=opt1,opt2&lt;/code&gt; is specified, the VM will attempt to
  514         load the shared library &lt;code&gt;c:\myLibs\foo.dll&lt;/code&gt;. If the agent
  515         library is statically linked into the executable
  516         then no actual loading takes place.
  517     &lt;p/&gt;
  518       &lt;/dd&gt;
  519     &lt;/dl&gt;
  520     For a dynamic shared library agent, the start-up routine
  521     &lt;internallink id=&quot;onload&quot;&gt;&lt;code&gt;Agent_OnLoad&lt;/code&gt;&lt;/internallink&gt;
</pre>
<hr />
<pre>
13310         &lt;vmbuf&gt;&lt;void/&gt;&lt;/vmbuf&gt;
13311         &lt;description&gt;
13312           Native address of the code
13313         &lt;/description&gt;
13314       &lt;/param&gt;
13315       &lt;param id=&quot;length&quot;&gt;
13316         &lt;jint/&gt;
13317         &lt;description&gt;
13318           Length in bytes of the code
13319         &lt;/description&gt;
13320       &lt;/param&gt;
13321     &lt;/parameters&gt;
13322   &lt;/event&gt;
13323 
13324   &lt;event label=&quot;Data Dump Request&quot;
13325          id=&quot;DataDumpRequest&quot; const=&quot;JVMTI_EVENT_DATA_DUMP_REQUEST&quot; num=&quot;71&quot;&gt;
13326     &lt;description&gt;
13327       Sent by the VM to request the agent to dump its data.  This
13328       is just a hint and the agent need not react to this event.
13329       This is useful for processing command-line signals from users.  For
<span class="line-modified">13330       example, in the Java 2 SDK a CTRL-Break on Win32 and a CTRL-\ on Solaris</span>
13331       causes the VM to send this event to the agent.
13332     &lt;/description&gt;
13333     &lt;origin&gt;jvmpi&lt;/origin&gt;
13334     &lt;capabilities&gt;
13335     &lt;/capabilities&gt;
13336     &lt;parameters&gt;
13337     &lt;/parameters&gt;
13338   &lt;/event&gt;
13339 
13340   &lt;event label=&quot;Monitor Contended Enter&quot;
13341          id=&quot;MonitorContendedEnter&quot; const=&quot;JVMTI_EVENT_MONITOR_CONTENDED_ENTER&quot; filtered=&quot;thread&quot; num=&quot;75&quot;&gt;
13342     &lt;description&gt;
13343       Sent when a thread is attempting to enter a Java programming language
13344       monitor already acquired by another thread.
13345     &lt;/description&gt;
13346     &lt;origin&gt;jvmpi&lt;/origin&gt;
13347     &lt;capabilities&gt;
13348       &lt;required id=&quot;can_generate_monitor_events&quot;&gt;&lt;/required&gt;
13349     &lt;/capabilities&gt;
13350     &lt;parameters&gt;
</pre>
</td>
<td>
<hr />
<pre>
  409 
  410   &lt;intro id=&quot;writingAgents&quot; label=&quot;Writing Agents&quot;&gt;
  411     Agents can be written in any native language that supports C
  412     language calling conventions and C or C++
  413     definitions.
  414     &lt;p/&gt;
  415     The function, event, data type, and constant definitions needed for
  416     using &lt;jvmti/&gt; are defined in the include file &lt;code&gt;jvmti.h&lt;/code&gt;.
  417     To use these definitions add the &lt;tm&gt;J2SE&lt;/tm&gt; include directory
  418     to your include path and add
  419     &lt;example&gt;
  420 #include &amp;lt;jvmti.h&amp;gt;
  421     &lt;/example&gt;
  422     to your source code.
  423   &lt;/intro&gt;
  424 
  425   &lt;intro id=&quot;deployingAgents&quot; label=&quot;Deploying Agents&quot;&gt;
  426     An agent is deployed in a platform specific manner but is typically the
  427     platform equivalent of a dynamic library. On the &lt;tm&gt;Windows&lt;/tm&gt; operating
  428     system, for example, an agent library is a &quot;Dynamic Linked Library&quot; (DLL).
<span class="line-modified">  429     On &lt;tm&gt;Linux&lt;/tm&gt; Operating Environment, an agent library is a shared object</span>
<span class="line-modified">  430     (&lt;code&gt;.so&lt;/code&gt; file).</span>
  431     &lt;p/&gt;
  432 
  433     An agent may be started at VM startup by specifying the agent library
  434     name using a &lt;internallink id=&quot;starting&quot;&gt;command line option&lt;/internallink&gt;.
  435     Some implementations may support a mechanism to &lt;internallink id=&quot;onattach&quot;&gt;
  436     start agents&lt;/internallink&gt; in the live &lt;functionlink id=&quot;GetPhase&quot;&gt;phase&lt;/functionlink&gt;.
  437     The details of how this is initiated are implementation specific.
  438   &lt;/intro&gt;
  439 
  440     &lt;intro id=&quot;entryPoint&quot; label=&quot;Statically Linked Agents (since version 1.2.3)&quot;&gt;
  441 
  442       A native JVMTI Agent may be &lt;i&gt;statically linked&lt;/i&gt; with the VM.
  443       The manner in which the library and VM image are combined is
  444       implementation-dependent.
  445       An agent L whose image has been combined with the VM is defined as
  446       &lt;i&gt;statically linked&lt;/i&gt; if and only if the agent exports a function
  447       called Agent_OnLoad_L.
  448 &lt;p/&gt;
  449       If a &lt;i&gt;statically linked&lt;/i&gt; agent L exports a function called
  450       Agent_OnLoad_L and a function called Agent_OnLoad, the Agent_OnLoad
</pre>
<hr />
<pre>
  480     &lt;p/&gt;
  481     One of the two following
  482     command-line options is used on VM startup to
  483     properly load and run agents.
  484     These arguments identify the library containing
  485     the agent as well as an options
  486     string to be passed in at startup.
  487     &lt;dl&gt;
  488       &lt;dt&gt;&lt;code&gt;-agentlib:&lt;/code&gt;&lt;i&gt;&amp;lt;agent-lib-name&amp;gt;&lt;/i&gt;&lt;code&gt;=&lt;/code&gt;&lt;i&gt;&amp;lt;options&amp;gt;&lt;/i&gt;&lt;/dt&gt;
  489       &lt;dd&gt;
  490         The name following &lt;code&gt;-agentlib:&lt;/code&gt; is the name of the
  491         library to load.  Lookup of the library, both its full name and location,
  492         proceeds in a platform-specific manner.
  493         Typically, the &lt;i&gt;&amp;lt;agent-lib-name&amp;gt;&lt;/i&gt; is expanded to an
  494         operating system specific file name.
  495         The &lt;i&gt;&amp;lt;options&amp;gt;&lt;/i&gt; will be passed to the agent on start-up.
  496         For example, if the option
  497         &lt;code&gt;-agentlib:foo=opt1,opt2&lt;/code&gt; is specified, the VM will attempt to
  498         load the shared library &lt;code&gt;foo.dll&lt;/code&gt; from the system &lt;code&gt;PATH&lt;/code&gt;
  499         under &lt;tm&gt;Windows&lt;/tm&gt; or &lt;code&gt;libfoo.so&lt;/code&gt; from the
<span class="line-modified">  500         &lt;code&gt;LD_LIBRARY_PATH&lt;/code&gt; under &lt;tm&gt;Linux&lt;/tm&gt;.</span>

  501         If the agent library is statically linked into the executable
  502         then no actual loading takes place.
  503     &lt;p/&gt;
  504       &lt;/dd&gt;
  505       &lt;dt&gt;&lt;code&gt;-agentpath:&lt;/code&gt;&lt;i&gt;&amp;lt;path-to-agent&amp;gt;&lt;/i&gt;&lt;code&gt;=&lt;/code&gt;&lt;i&gt;&amp;lt;options&amp;gt;&lt;/i&gt;&lt;/dt&gt;
  506       &lt;dd&gt;
  507         The path following &lt;code&gt;-agentpath:&lt;/code&gt; is the absolute path from which
  508         to load the library.
  509         No library name expansion will occur.
  510         The &lt;i&gt;&amp;lt;options&amp;gt;&lt;/i&gt; will be passed to the agent on start-up.
  511         For example, if the option
  512         &lt;code&gt;-agentpath:c:\myLibs\foo.dll=opt1,opt2&lt;/code&gt; is specified, the VM will attempt to
  513         load the shared library &lt;code&gt;c:\myLibs\foo.dll&lt;/code&gt;. If the agent
  514         library is statically linked into the executable
  515         then no actual loading takes place.
  516     &lt;p/&gt;
  517       &lt;/dd&gt;
  518     &lt;/dl&gt;
  519     For a dynamic shared library agent, the start-up routine
  520     &lt;internallink id=&quot;onload&quot;&gt;&lt;code&gt;Agent_OnLoad&lt;/code&gt;&lt;/internallink&gt;
</pre>
<hr />
<pre>
13309         &lt;vmbuf&gt;&lt;void/&gt;&lt;/vmbuf&gt;
13310         &lt;description&gt;
13311           Native address of the code
13312         &lt;/description&gt;
13313       &lt;/param&gt;
13314       &lt;param id=&quot;length&quot;&gt;
13315         &lt;jint/&gt;
13316         &lt;description&gt;
13317           Length in bytes of the code
13318         &lt;/description&gt;
13319       &lt;/param&gt;
13320     &lt;/parameters&gt;
13321   &lt;/event&gt;
13322 
13323   &lt;event label=&quot;Data Dump Request&quot;
13324          id=&quot;DataDumpRequest&quot; const=&quot;JVMTI_EVENT_DATA_DUMP_REQUEST&quot; num=&quot;71&quot;&gt;
13325     &lt;description&gt;
13326       Sent by the VM to request the agent to dump its data.  This
13327       is just a hint and the agent need not react to this event.
13328       This is useful for processing command-line signals from users.  For
<span class="line-modified">13329       example, in the Java 2 SDK a CTRL-Break on Win32 and a CTRL-\ on Linux</span>
13330       causes the VM to send this event to the agent.
13331     &lt;/description&gt;
13332     &lt;origin&gt;jvmpi&lt;/origin&gt;
13333     &lt;capabilities&gt;
13334     &lt;/capabilities&gt;
13335     &lt;parameters&gt;
13336     &lt;/parameters&gt;
13337   &lt;/event&gt;
13338 
13339   &lt;event label=&quot;Monitor Contended Enter&quot;
13340          id=&quot;MonitorContendedEnter&quot; const=&quot;JVMTI_EVENT_MONITOR_CONTENDED_ENTER&quot; filtered=&quot;thread&quot; num=&quot;75&quot;&gt;
13341     &lt;description&gt;
13342       Sent when a thread is attempting to enter a Java programming language
13343       monitor already acquired by another thread.
13344     &lt;/description&gt;
13345     &lt;origin&gt;jvmpi&lt;/origin&gt;
13346     &lt;capabilities&gt;
13347       &lt;required id=&quot;can_generate_monitor_events&quot;&gt;&lt;/required&gt;
13348     &lt;/capabilities&gt;
13349     &lt;parameters&gt;
</pre>
</td>
</tr>
</table>
<center><a href="../precompiled/precompiled.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../runtime/abstract_vm_version.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>