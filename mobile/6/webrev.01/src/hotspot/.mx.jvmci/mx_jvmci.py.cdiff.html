<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/.mx.jvmci/mx_jvmci.py</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
<body>
<center><a href="../../../make/test/JtregNativeJdk.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="suite.py.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/.mx.jvmci/mx_jvmci.py</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 385,11 ***</span>
      # Build the other VM flavors
      with Task(&#39;BuildHotSpotJVMCIOthers: fastdebug&#39;, tasks) as t:
          if t: _runmultimake([&#39;--jdk-jvm-variants&#39;, &#39;server&#39;, &#39;--jdk-debug-levels&#39;, &#39;fastdebug&#39;])
  
      with Task(&#39;CleanAndBuildIdealGraphVisualizer&#39;, tasks, disableJacoco=True) as t:
<span class="line-modified">!         if t and platform.processor() != &#39;sparc&#39;:</span>
              buildxml = mx._cygpathU2W(join(_suite.dir, &#39;src&#39;, &#39;share&#39;, &#39;tools&#39;, &#39;IdealGraphVisualizer&#39;, &#39;build.xml&#39;))
              mx.run([&#39;ant&#39;, &#39;-f&#39;, buildxml, &#39;-q&#39;, &#39;clean&#39;, &#39;build&#39;], env=_igvBuildEnv())
  
  mx_gate.add_gate_runner(_suite, _jvmci_gate_runner)
  mx_gate.add_gate_argument(&#39;-g&#39;, &#39;--only-build-jvmci&#39;, action=&#39;store_false&#39;, dest=&#39;buildNonJVMCI&#39;, help=&#39;only build the JVMCI VM&#39;)
<span class="line-new-header">--- 385,11 ---</span>
      # Build the other VM flavors
      with Task(&#39;BuildHotSpotJVMCIOthers: fastdebug&#39;, tasks) as t:
          if t: _runmultimake([&#39;--jdk-jvm-variants&#39;, &#39;server&#39;, &#39;--jdk-debug-levels&#39;, &#39;fastdebug&#39;])
  
      with Task(&#39;CleanAndBuildIdealGraphVisualizer&#39;, tasks, disableJacoco=True) as t:
<span class="line-modified">!         if t:</span>
              buildxml = mx._cygpathU2W(join(_suite.dir, &#39;src&#39;, &#39;share&#39;, &#39;tools&#39;, &#39;IdealGraphVisualizer&#39;, &#39;build.xml&#39;))
              mx.run([&#39;ant&#39;, &#39;-f&#39;, buildxml, &#39;-q&#39;, &#39;clean&#39;, &#39;build&#39;], env=_igvBuildEnv())
  
  mx_gate.add_gate_runner(_suite, _jvmci_gate_runner)
  mx_gate.add_gate_argument(&#39;-g&#39;, &#39;--only-build-jvmci&#39;, action=&#39;store_false&#39;, dest=&#39;buildNonJVMCI&#39;, help=&#39;only build the JVMCI VM&#39;)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 484,22 ***</span>
      This is needed to support HotSpot&#39;s assembly dumping features.
      By default it downloads the Intel syntax version, use the &#39;att&#39; argument to install AT&amp;T syntax.&quot;&quot;&quot;
      flavor = &#39;intel&#39;
      if &#39;att&#39; in args:
          flavor = &#39;att&#39;
<span class="line-removed">-     if mx.get_arch() == &quot;sparcv9&quot;:</span>
<span class="line-removed">-         flavor = &quot;sparcv9&quot;</span>
      lib = mx.add_lib_suffix(&#39;hsdis-&#39; + mx.get_arch())
      path = join(_suite.dir, &#39;lib&#39;, lib)
  
      sha1s = {
          &#39;att/hsdis-amd64.dll&#39; : &#39;bcbd535a9568b5075ab41e96205e26a2bac64f72&#39;,
          &#39;att/hsdis-amd64.so&#39; : &#39;58919ba085d4ef7a513f25bae75e7e54ee73c049&#39;,
          &#39;intel/hsdis-amd64.dll&#39; : &#39;6a388372cdd5fe905c1a26ced614334e405d1f30&#39;,
          &#39;intel/hsdis-amd64.so&#39; : &#39;844ed9ffed64fe9599638f29a8450c50140e3192&#39;,
          &#39;intel/hsdis-amd64.dylib&#39; : &#39;fdb13ef0d7d23d93dacaae9c98837bea0d4fc5a2&#39;,
<span class="line-removed">-         &#39;sparcv9/hsdis-sparcv9.so&#39;: &#39;970640a9af0bd63641f9063c11275b371a59ee60&#39;,</span>
      }
  
      flavoredLib = flavor + &quot;/&quot; + lib
      if flavoredLib not in sha1s:
          mx.logv(&quot;hsdis not supported on this plattform or architecture&quot;)
<span class="line-new-header">--- 484,19 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 577,22 ***</span>
      os = mx.get_os()
      if &#39;darwin&#39; in os:
          os = &#39;macosx&#39;
      elif &#39;linux&#39; in os:
          os = &#39;linux&#39;
<span class="line-removed">-     elif &#39;solaris&#39; in os:</span>
<span class="line-removed">-         os = &#39;solaris&#39;</span>
      elif &#39;cygwin&#39; in os or &#39;mingw&#39; in os:
          os = &#39;windows&#39;
      return os
  
  def _get_openjdk_cpu():
      cpu = mx.get_arch()
      if cpu == &#39;amd64&#39;:
          cpu = &#39;x86_64&#39;
<span class="line-removed">-     elif cpu == &#39;sparcv9&#39;:</span>
<span class="line-removed">-         cpu = &#39;sparcv9&#39;</span>
      return cpu
  
  def _get_openjdk_os_cpu():
      return _get_openjdk_os() + &#39;-&#39; + _get_openjdk_cpu()
  
<span class="line-new-header">--- 574,18 ---</span>
</pre>
<center><a href="../../../make/test/JtregNativeJdk.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="suite.py.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>