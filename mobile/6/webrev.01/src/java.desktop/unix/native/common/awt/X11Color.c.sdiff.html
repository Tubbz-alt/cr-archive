<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/unix/native/common/awt/X11Color.c</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="CUPSfuncs.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="fontpath.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/unix/native/common/awt/X11Color.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  72     UNAVAILABLE_COLOR   = 2,
  73     ALLOCATED_COLOR     = 3
  74 };
  75 
  76 /*
  77  * Constants to control the filling of the colormap.
  78  * By default, try to allocate colors in the default colormap until
  79  * CMAP_ALLOC_DEFAULT colors are being used (by Java and/or other
  80  * applications).
  81  * For cases where the default colormap may already have a large
  82  * number of colors in it, make sure that we ourselves try to add
  83  * at least CMAP_ALLOC_MIN new colors, even if we need to allocate
  84  * more than the DEFAULT to do that.
  85  * Under no circumstances will the colormap be filled to more than
  86  * CMAP_ALLOC_MAX colors.
  87  */
  88 #define CMAP_ALLOC_MIN          100     /* minimum number of colors to &quot;add&quot; */
  89 #define CMAP_ALLOC_DEFAULT      200     /* default number of colors in cmap */
  90 #define CMAP_ALLOC_MAX          245     /* maximum number of colors in cmap */
  91 
<span class="line-removed">  92 #ifdef __solaris__</span>
<span class="line-removed">  93 #include &lt;sys/utsname.h&gt;</span>
<span class="line-removed">  94 </span>
<span class="line-removed">  95 struct {</span>
<span class="line-removed">  96     char *machine;</span>
<span class="line-removed">  97     int  cubesize;</span>
<span class="line-removed">  98 } machinemap[] = {</span>
<span class="line-removed">  99     { &quot;i86pc&quot;, LOOKUPSIZE / 4 }, /* BugTraq ID 4102599 */</span>
<span class="line-removed"> 100     { &quot;sun4c&quot;, LOOKUPSIZE / 4 },</span>
<span class="line-removed"> 101     { &quot;sun4m&quot;, LOOKUPSIZE / 2 },</span>
<span class="line-removed"> 102     { &quot;sun4d&quot;, LOOKUPSIZE / 2 },</span>
<span class="line-removed"> 103     { &quot;sun4u&quot;, LOOKUPSIZE / 1 },</span>
<span class="line-removed"> 104 };</span>
<span class="line-removed"> 105 </span>
<span class="line-removed"> 106 #define MACHMAPSIZE     (sizeof(machinemap) / sizeof(machinemap[0]))</span>
<span class="line-removed"> 107 </span>
<span class="line-removed"> 108 int getVirtCubeSize() {</span>
<span class="line-removed"> 109     struct utsname name;</span>
<span class="line-removed"> 110     int i, ret;</span>
<span class="line-removed"> 111 </span>
<span class="line-removed"> 112     ret = uname(&amp;name);</span>
<span class="line-removed"> 113     if (ret &lt; 0) {</span>
<span class="line-removed"> 114 #ifdef DEBUG</span>
<span class="line-removed"> 115 #include &lt;errno.h&gt;</span>
<span class="line-removed"> 116         jio_fprintf(stderr, &quot;uname errno = %d, using default cubesize %d\n&quot;,</span>
<span class="line-removed"> 117                     errno, LOOKUPSIZE);</span>
<span class="line-removed"> 118 #endif</span>
<span class="line-removed"> 119         return LOOKUPSIZE;</span>
<span class="line-removed"> 120     }</span>
<span class="line-removed"> 121 </span>
<span class="line-removed"> 122     for (i = 0; i &lt; MACHMAPSIZE; i++) {</span>
<span class="line-removed"> 123         if (strcmp(name.machine, machinemap[i].machine) == 0) {</span>
<span class="line-removed"> 124 #ifdef DEBUG</span>
<span class="line-removed"> 125             if (debug_colormap) {</span>
<span class="line-removed"> 126                 jio_fprintf(stderr, &quot;&#39;%s&#39;.cubesize = &#39;%d&#39;\n&quot;,</span>
<span class="line-removed"> 127                             machinemap[i].machine, machinemap[i].cubesize);</span>
<span class="line-removed"> 128             }</span>
<span class="line-removed"> 129 #endif</span>
<span class="line-removed"> 130             return machinemap[i].cubesize;</span>
<span class="line-removed"> 131         }</span>
<span class="line-removed"> 132     }</span>
<span class="line-removed"> 133 </span>
<span class="line-removed"> 134 #ifdef DEBUG</span>
<span class="line-removed"> 135     if (debug_colormap) {</span>
<span class="line-removed"> 136         jio_fprintf(stderr, &quot;unknown machine &#39;%s&#39; using cubesize %d\n&quot;,</span>
<span class="line-removed"> 137                     name.machine, LOOKUPSIZE);</span>
<span class="line-removed"> 138     }</span>
<span class="line-removed"> 139 #endif</span>
<span class="line-removed"> 140     return LOOKUPSIZE;</span>
<span class="line-removed"> 141 }</span>
<span class="line-removed"> 142 #else /* __solaris__ */</span>
 143 #define getVirtCubeSize()       (LOOKUPSIZE)
<span class="line-removed"> 144 #endif /* __solaris__ */</span>
 145 
 146 unsigned char img_bwgamma[256];
 147 uns_ordered_dither_array img_oda_alpha;
 148 
 149 #ifdef NEED_IMAGE_CONVERT
 150 ImgConvertFcn DirectImageConvert;
 151 ImgConvertFcn Dir16IcmOpqUnsImageConvert;
 152 ImgConvertFcn Dir16IcmTrnUnsImageConvert;
 153 ImgConvertFcn Dir16IcmOpqSclImageConvert;
 154 ImgConvertFcn Dir16DcmOpqUnsImageConvert;
 155 ImgConvertFcn Dir16DcmTrnUnsImageConvert;
 156 ImgConvertFcn Dir16DcmOpqSclImageConvert;
 157 ImgConvertFcn Dir32IcmOpqUnsImageConvert;
 158 ImgConvertFcn Dir32IcmTrnUnsImageConvert;
 159 ImgConvertFcn Dir32IcmOpqSclImageConvert;
 160 ImgConvertFcn Dir32DcmOpqUnsImageConvert;
 161 ImgConvertFcn Dir32DcmTrnUnsImageConvert;
 162 ImgConvertFcn Dir32DcmOpqSclImageConvert;
 163 
 164 ImgConvertFcn PseudoImageConvert;
</pre>
</td>
<td>
<hr />
<pre>
  72     UNAVAILABLE_COLOR   = 2,
  73     ALLOCATED_COLOR     = 3
  74 };
  75 
  76 /*
  77  * Constants to control the filling of the colormap.
  78  * By default, try to allocate colors in the default colormap until
  79  * CMAP_ALLOC_DEFAULT colors are being used (by Java and/or other
  80  * applications).
  81  * For cases where the default colormap may already have a large
  82  * number of colors in it, make sure that we ourselves try to add
  83  * at least CMAP_ALLOC_MIN new colors, even if we need to allocate
  84  * more than the DEFAULT to do that.
  85  * Under no circumstances will the colormap be filled to more than
  86  * CMAP_ALLOC_MAX colors.
  87  */
  88 #define CMAP_ALLOC_MIN          100     /* minimum number of colors to &quot;add&quot; */
  89 #define CMAP_ALLOC_DEFAULT      200     /* default number of colors in cmap */
  90 #define CMAP_ALLOC_MAX          245     /* maximum number of colors in cmap */
  91 



















































  92 #define getVirtCubeSize()       (LOOKUPSIZE)

  93 
  94 unsigned char img_bwgamma[256];
  95 uns_ordered_dither_array img_oda_alpha;
  96 
  97 #ifdef NEED_IMAGE_CONVERT
  98 ImgConvertFcn DirectImageConvert;
  99 ImgConvertFcn Dir16IcmOpqUnsImageConvert;
 100 ImgConvertFcn Dir16IcmTrnUnsImageConvert;
 101 ImgConvertFcn Dir16IcmOpqSclImageConvert;
 102 ImgConvertFcn Dir16DcmOpqUnsImageConvert;
 103 ImgConvertFcn Dir16DcmTrnUnsImageConvert;
 104 ImgConvertFcn Dir16DcmOpqSclImageConvert;
 105 ImgConvertFcn Dir32IcmOpqUnsImageConvert;
 106 ImgConvertFcn Dir32IcmTrnUnsImageConvert;
 107 ImgConvertFcn Dir32IcmOpqSclImageConvert;
 108 ImgConvertFcn Dir32DcmOpqUnsImageConvert;
 109 ImgConvertFcn Dir32DcmTrnUnsImageConvert;
 110 ImgConvertFcn Dir32DcmOpqSclImageConvert;
 111 
 112 ImgConvertFcn PseudoImageConvert;
</pre>
</td>
</tr>
</table>
<center><a href="CUPSfuncs.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="fontpath.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>