<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.desktop/unix/native/common/awt/X11Color.c</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="CUPSfuncs.c.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="fontpath.c.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/unix/native/common/awt/X11Color.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -87,63 +87,11 @@</span>
   */
  #define CMAP_ALLOC_MIN          100     /* minimum number of colors to &quot;add&quot; */
  #define CMAP_ALLOC_DEFAULT      200     /* default number of colors in cmap */
  #define CMAP_ALLOC_MAX          245     /* maximum number of colors in cmap */
  
<span class="udiff-line-removed">- #ifdef __solaris__</span>
<span class="udiff-line-removed">- #include &lt;sys/utsname.h&gt;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- struct {</span>
<span class="udiff-line-removed">-     char *machine;</span>
<span class="udiff-line-removed">-     int  cubesize;</span>
<span class="udiff-line-removed">- } machinemap[] = {</span>
<span class="udiff-line-removed">-     { &quot;i86pc&quot;, LOOKUPSIZE / 4 }, /* BugTraq ID 4102599 */</span>
<span class="udiff-line-removed">-     { &quot;sun4c&quot;, LOOKUPSIZE / 4 },</span>
<span class="udiff-line-removed">-     { &quot;sun4m&quot;, LOOKUPSIZE / 2 },</span>
<span class="udiff-line-removed">-     { &quot;sun4d&quot;, LOOKUPSIZE / 2 },</span>
<span class="udiff-line-removed">-     { &quot;sun4u&quot;, LOOKUPSIZE / 1 },</span>
<span class="udiff-line-removed">- };</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- #define MACHMAPSIZE     (sizeof(machinemap) / sizeof(machinemap[0]))</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- int getVirtCubeSize() {</span>
<span class="udiff-line-removed">-     struct utsname name;</span>
<span class="udiff-line-removed">-     int i, ret;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     ret = uname(&amp;name);</span>
<span class="udiff-line-removed">-     if (ret &lt; 0) {</span>
<span class="udiff-line-removed">- #ifdef DEBUG</span>
<span class="udiff-line-removed">- #include &lt;errno.h&gt;</span>
<span class="udiff-line-removed">-         jio_fprintf(stderr, &quot;uname errno = %d, using default cubesize %d\n&quot;,</span>
<span class="udiff-line-removed">-                     errno, LOOKUPSIZE);</span>
<span class="udiff-line-removed">- #endif</span>
<span class="udiff-line-removed">-         return LOOKUPSIZE;</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     for (i = 0; i &lt; MACHMAPSIZE; i++) {</span>
<span class="udiff-line-removed">-         if (strcmp(name.machine, machinemap[i].machine) == 0) {</span>
<span class="udiff-line-removed">- #ifdef DEBUG</span>
<span class="udiff-line-removed">-             if (debug_colormap) {</span>
<span class="udiff-line-removed">-                 jio_fprintf(stderr, &quot;&#39;%s&#39;.cubesize = &#39;%d&#39;\n&quot;,</span>
<span class="udiff-line-removed">-                             machinemap[i].machine, machinemap[i].cubesize);</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">- #endif</span>
<span class="udiff-line-removed">-             return machinemap[i].cubesize;</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- #ifdef DEBUG</span>
<span class="udiff-line-removed">-     if (debug_colormap) {</span>
<span class="udiff-line-removed">-         jio_fprintf(stderr, &quot;unknown machine &#39;%s&#39; using cubesize %d\n&quot;,</span>
<span class="udiff-line-removed">-                     name.machine, LOOKUPSIZE);</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- #endif</span>
<span class="udiff-line-removed">-     return LOOKUPSIZE;</span>
<span class="udiff-line-removed">- }</span>
<span class="udiff-line-removed">- #else /* __solaris__ */</span>
  #define getVirtCubeSize()       (LOOKUPSIZE)
<span class="udiff-line-removed">- #endif /* __solaris__ */</span>
  
  unsigned char img_bwgamma[256];
  uns_ordered_dither_array img_oda_alpha;
  
  #ifdef NEED_IMAGE_CONVERT
</pre>
<center><a href="CUPSfuncs.c.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="fontpath.c.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>