<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/jvmci/jvmciJavaClasses.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="jvmciJavaClasses.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="jvmciRuntime.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/jvmci/jvmciJavaClasses.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
107     objectarray_field(HotSpotCompiledCode, sites, &quot;[Ljdk/vm/ci/code/site/Site;&quot;)                              \
108     objectarray_field(HotSpotCompiledCode, assumptions, &quot;[Ljdk/vm/ci/meta/Assumptions$Assumption;&quot;)           \
109     objectarray_field(HotSpotCompiledCode, methods, &quot;[Ljdk/vm/ci/meta/ResolvedJavaMethod;&quot;)                   \
110     objectarray_field(HotSpotCompiledCode, comments, &quot;[Ljdk/vm/ci/hotspot/HotSpotCompiledCode$Comment;&quot;)      \
111     primarray_field(HotSpotCompiledCode, dataSection, &quot;[B&quot;)                                                   \
112     int_field(HotSpotCompiledCode, dataSectionAlignment)                                                      \
113     objectarray_field(HotSpotCompiledCode, dataSectionPatches, &quot;[Ljdk/vm/ci/code/site/DataPatch;&quot;)            \
114     boolean_field(HotSpotCompiledCode, isImmutablePIC)                                                        \
115     int_field(HotSpotCompiledCode, totalFrameSize)                                                            \
116     object_field(HotSpotCompiledCode, deoptRescueSlot, &quot;Ljdk/vm/ci/code/StackSlot;&quot;)                          \
117   end_class                                                                                                   \
118   start_class(HotSpotCompiledCode_Comment, jdk_vm_ci_hotspot_HotSpotCompiledCode_Comment)                     \
119     object_field(HotSpotCompiledCode_Comment, text, &quot;Ljava/lang/String;&quot;)                                     \
120     int_field(HotSpotCompiledCode_Comment, pcOffset)                                                          \
121   end_class                                                                                                   \
122   start_class(HotSpotCompiledNmethod, jdk_vm_ci_hotspot_HotSpotCompiledNmethod)                               \
123     object_field(HotSpotCompiledNmethod, method, &quot;Ljdk/vm/ci/hotspot/HotSpotResolvedJavaMethod;&quot;)             \
124     object_field(HotSpotCompiledNmethod, installationFailureMessage, &quot;Ljava/lang/String;&quot;)                    \
125     int_field(HotSpotCompiledNmethod, entryBCI)                                                               \
126     int_field(HotSpotCompiledNmethod, id)                                                                     \
<span class="line-modified">127     long_field(HotSpotCompiledNmethod, compileState)                                                           \</span>
128     boolean_field(HotSpotCompiledNmethod, hasUnsafeAccess)                                                    \
129   end_class                                                                                                   \
130   start_class(HotSpotForeignCallTarget, jdk_vm_ci_hotspot_HotSpotForeignCallTarget)                           \
131     long_field(HotSpotForeignCallTarget, address)                                                             \
132   end_class                                                                                                   \
133   start_class(VMField, jdk_vm_ci_hotspot_VMField)                                                             \
134     object_field(VMField, name, &quot;Ljava/lang/String;&quot;)                                                         \
135     object_field(VMField, type, &quot;Ljava/lang/String;&quot;)                                                         \
136     long_field(VMField, offset)                                                                               \
137     long_field(VMField, address)                                                                              \
138     object_field(VMField, value, &quot;Ljava/lang/Object;&quot;)                                                        \
139     jvmci_constructor(VMField, &quot;(Ljava/lang/String;Ljava/lang/String;JJLjava/lang/Object;)V&quot;)                 \
140   end_class                                                                                                   \
141   start_class(VMFlag, jdk_vm_ci_hotspot_VMFlag)                                                               \
142     object_field(VMFlag, name, &quot;Ljava/lang/String;&quot;)                                                          \
143     object_field(VMFlag, type, &quot;Ljava/lang/String;&quot;)                                                          \
144     object_field(VMFlag, value, &quot;Ljava/lang/Object;&quot;)                                                         \
145     jvmci_constructor(VMFlag, &quot;(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Object;)V&quot;)                    \
146   end_class                                                                                                   \
147   start_class(VMIntrinsicMethod, jdk_vm_ci_hotspot_VMIntrinsicMethod)                                         \
</pre>
<hr />
<pre>
527   }
528   static inline Klass* asKlass(JVMCIEnv* env, oop jvmci_type) {
529     return (Klass*) HotSpotResolvedObjectTypeImpl::metadataPointer(env, jvmci_type);
530   }
531 
532   static void compute_offsets(TRAPS);
533   static void compute_offset(int &amp;dest_offset, Klass* klass, const char* name, const char* signature, bool static_field, TRAPS);
534 
535   JVMCI_CLASSES_DO(HS_START_CLASS, END_CLASS, CHAR_FIELD, INT_FIELD, BOOLEAN_FIELD, LONG_FIELD, FLOAT_FIELD, OBJECT_FIELD, PRIMARRAY_FIELD, OBJECTARRAY_FIELD, STATIC_OBJECT_FIELD, STATIC_OBJECTARRAY_FIELD, STATIC_INT_FIELD, STATIC_BOOLEAN_FIELD, METHOD, CONSTRUCTOR)
536 };
537 
538 #undef HS_START_CLASS
539 
540 #define JNI_START_CLASS(simpleClassName, fullClassName)                                             \
541   START_CLASS(simpleClassName, fullClassName)                                                       \
542   friend class JNIJVMCI;                                                                            \
543   private:                                                                                          \
544   static void check(JVMCIEnv* jvmciEnv, JVMCIObject obj, const char* field_name, jfieldID offset);  \
545   static jclass _class;                                                                             \
546 public:                                                                                             \
<span class="line-modified">547  static jclass clazz() { assert(_class != NULL, #fullClassName &quot; uninitialized&quot;); return _class; }                         \</span>
548  static jclass fullClassName ##_class()  { assert(_class != NULL, &quot;uninit&quot;); return _class; }
549 
550 #undef METHOD
551 #undef CONSTRUCTOR
552 #undef FIELD
553 #undef OOPISH_FIELD
554 #undef STATIC_FIELD
555 #undef STATIC_OOPISH_FIELD
556 
557 #define FIELD(simpleClassName, name, type)                                \
558   private:                                                                \
559     static jfieldID _##name##_field_id;                                   \
560   public:                                                                 \
561     static type get_  ## name(JVMCIEnv* jvmciEnv, JVMCIObject obj);       \
562     static void set_  ## name(JVMCIEnv* jvmciEnv, JVMCIObject obj, type x);
563 
564 #define OOPISH_FIELD(simpleClassName, name, type, hstype) \
565   FIELD(simpleClassName, name, type)
566 
567 #define STATIC_FIELD(simpleClassName, name, type)   \
</pre>
<hr />
<pre>
622   static jmethodID _HotSpotConstantPool_fromMetaspace_method;
623   static jmethodID _HotSpotResolvedObjectTypeImpl_fromMetaspace_method;
624   static jmethodID _HotSpotResolvedPrimitiveType_fromMetaspace_method;
625 
626  public:
627   static jmethodID Class_getName_method() { return _Class_getName_method; }
628 
629   static jclass    byte_array()           { assert(_byte_array != NULL, &quot;uninit&quot;);      return _byte_array; }
630 
631   static jclass    box_class(BasicType type)       { assert(_box_classes[type]!= NULL, &quot;uninit&quot;);      return _box_classes[type]; }
632   static jfieldID  box_field(BasicType type)       { assert(_box_fields[type]!= NULL, &quot;uninit&quot;);       return _box_fields[type]; }
633   static jmethodID box_constructor(BasicType type) { assert(_box_constructors[type]!= NULL, &quot;uninit&quot;); return _box_constructors[type]; }
634 
635   static jmethodID HotSpotResolvedJavaMethodImpl_fromMetaspace_method()     { assert(_HotSpotResolvedJavaMethodImpl_fromMetaspace_method     != NULL, &quot;uninit&quot;); return _HotSpotResolvedJavaMethodImpl_fromMetaspace_method; }
636   static jmethodID HotSpotConstantPool_fromMetaspace_method()           { assert(_HotSpotConstantPool_fromMetaspace_method           != NULL, &quot;uninit&quot;); return _HotSpotConstantPool_fromMetaspace_method; }
637   static jmethodID HotSpotResolvedObjectTypeImpl_fromMetaspace_method() { assert(_HotSpotResolvedObjectTypeImpl_fromMetaspace_method != NULL, &quot;uninit&quot;); return _HotSpotResolvedObjectTypeImpl_fromMetaspace_method; }
638   static jmethodID HotSpotResolvedPrimitiveType_fromMetaspace_method()  { assert(_HotSpotResolvedPrimitiveType_fromMetaspace_method  != NULL, &quot;uninit&quot;); return _HotSpotResolvedPrimitiveType_fromMetaspace_method; }
639 
640   static void initialize_ids(JNIEnv* env);
641   static void initialize_field_id(JNIEnv* env, jfieldID &amp;dest_offset, jclass klass, const char* klass_name, const char* name, const char* signature, bool static_field);

642 
643   static jobject resolve_handle(JVMCIObject obj) { return obj.as_jobject(); }
644   static JVMCIObject wrap(jobject obj) { return JVMCIObject(obj, false); }
645 
646   JVMCI_CLASSES_DO(JNI_START_CLASS, END_CLASS, CHAR_FIELD, INT_FIELD, BOOLEAN_FIELD, LONG_FIELD, FLOAT_FIELD, OBJECT_FIELD, PRIMARRAY_FIELD, OBJECTARRAY_FIELD, STATIC_OBJECT_FIELD, STATIC_OBJECTARRAY_FIELD, STATIC_INT_FIELD, STATIC_BOOLEAN_FIELD, METHOD, CONSTRUCTOR)
647 };
648 
649 #undef JNI_START_CLASS
650 #undef START_CLASS
651 #undef END_CLASS
652 #undef METHOD
653 #undef CONSTRUCTOR
654 #undef FIELD
655 #undef CHAR_FIELD
656 #undef INT_FIELD
657 #undef BOOLEAN_FIELD
658 #undef LONG_FIELD
659 #undef FLOAT_FIELD
660 #undef OBJECT_FIELD
661 #undef PRIMARRAY_FIELD
</pre>
</td>
<td>
<hr />
<pre>
107     objectarray_field(HotSpotCompiledCode, sites, &quot;[Ljdk/vm/ci/code/site/Site;&quot;)                              \
108     objectarray_field(HotSpotCompiledCode, assumptions, &quot;[Ljdk/vm/ci/meta/Assumptions$Assumption;&quot;)           \
109     objectarray_field(HotSpotCompiledCode, methods, &quot;[Ljdk/vm/ci/meta/ResolvedJavaMethod;&quot;)                   \
110     objectarray_field(HotSpotCompiledCode, comments, &quot;[Ljdk/vm/ci/hotspot/HotSpotCompiledCode$Comment;&quot;)      \
111     primarray_field(HotSpotCompiledCode, dataSection, &quot;[B&quot;)                                                   \
112     int_field(HotSpotCompiledCode, dataSectionAlignment)                                                      \
113     objectarray_field(HotSpotCompiledCode, dataSectionPatches, &quot;[Ljdk/vm/ci/code/site/DataPatch;&quot;)            \
114     boolean_field(HotSpotCompiledCode, isImmutablePIC)                                                        \
115     int_field(HotSpotCompiledCode, totalFrameSize)                                                            \
116     object_field(HotSpotCompiledCode, deoptRescueSlot, &quot;Ljdk/vm/ci/code/StackSlot;&quot;)                          \
117   end_class                                                                                                   \
118   start_class(HotSpotCompiledCode_Comment, jdk_vm_ci_hotspot_HotSpotCompiledCode_Comment)                     \
119     object_field(HotSpotCompiledCode_Comment, text, &quot;Ljava/lang/String;&quot;)                                     \
120     int_field(HotSpotCompiledCode_Comment, pcOffset)                                                          \
121   end_class                                                                                                   \
122   start_class(HotSpotCompiledNmethod, jdk_vm_ci_hotspot_HotSpotCompiledNmethod)                               \
123     object_field(HotSpotCompiledNmethod, method, &quot;Ljdk/vm/ci/hotspot/HotSpotResolvedJavaMethod;&quot;)             \
124     object_field(HotSpotCompiledNmethod, installationFailureMessage, &quot;Ljava/lang/String;&quot;)                    \
125     int_field(HotSpotCompiledNmethod, entryBCI)                                                               \
126     int_field(HotSpotCompiledNmethod, id)                                                                     \
<span class="line-modified">127     long_field(HotSpotCompiledNmethod, compileState)                                                          \</span>
128     boolean_field(HotSpotCompiledNmethod, hasUnsafeAccess)                                                    \
129   end_class                                                                                                   \
130   start_class(HotSpotForeignCallTarget, jdk_vm_ci_hotspot_HotSpotForeignCallTarget)                           \
131     long_field(HotSpotForeignCallTarget, address)                                                             \
132   end_class                                                                                                   \
133   start_class(VMField, jdk_vm_ci_hotspot_VMField)                                                             \
134     object_field(VMField, name, &quot;Ljava/lang/String;&quot;)                                                         \
135     object_field(VMField, type, &quot;Ljava/lang/String;&quot;)                                                         \
136     long_field(VMField, offset)                                                                               \
137     long_field(VMField, address)                                                                              \
138     object_field(VMField, value, &quot;Ljava/lang/Object;&quot;)                                                        \
139     jvmci_constructor(VMField, &quot;(Ljava/lang/String;Ljava/lang/String;JJLjava/lang/Object;)V&quot;)                 \
140   end_class                                                                                                   \
141   start_class(VMFlag, jdk_vm_ci_hotspot_VMFlag)                                                               \
142     object_field(VMFlag, name, &quot;Ljava/lang/String;&quot;)                                                          \
143     object_field(VMFlag, type, &quot;Ljava/lang/String;&quot;)                                                          \
144     object_field(VMFlag, value, &quot;Ljava/lang/Object;&quot;)                                                         \
145     jvmci_constructor(VMFlag, &quot;(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Object;)V&quot;)                    \
146   end_class                                                                                                   \
147   start_class(VMIntrinsicMethod, jdk_vm_ci_hotspot_VMIntrinsicMethod)                                         \
</pre>
<hr />
<pre>
527   }
528   static inline Klass* asKlass(JVMCIEnv* env, oop jvmci_type) {
529     return (Klass*) HotSpotResolvedObjectTypeImpl::metadataPointer(env, jvmci_type);
530   }
531 
532   static void compute_offsets(TRAPS);
533   static void compute_offset(int &amp;dest_offset, Klass* klass, const char* name, const char* signature, bool static_field, TRAPS);
534 
535   JVMCI_CLASSES_DO(HS_START_CLASS, END_CLASS, CHAR_FIELD, INT_FIELD, BOOLEAN_FIELD, LONG_FIELD, FLOAT_FIELD, OBJECT_FIELD, PRIMARRAY_FIELD, OBJECTARRAY_FIELD, STATIC_OBJECT_FIELD, STATIC_OBJECTARRAY_FIELD, STATIC_INT_FIELD, STATIC_BOOLEAN_FIELD, METHOD, CONSTRUCTOR)
536 };
537 
538 #undef HS_START_CLASS
539 
540 #define JNI_START_CLASS(simpleClassName, fullClassName)                                             \
541   START_CLASS(simpleClassName, fullClassName)                                                       \
542   friend class JNIJVMCI;                                                                            \
543   private:                                                                                          \
544   static void check(JVMCIEnv* jvmciEnv, JVMCIObject obj, const char* field_name, jfieldID offset);  \
545   static jclass _class;                                                                             \
546 public:                                                                                             \
<span class="line-modified">547  static jclass clazz() { assert(_class != NULL, #fullClassName &quot; uninitialized&quot;); return _class; }  \</span>
548  static jclass fullClassName ##_class()  { assert(_class != NULL, &quot;uninit&quot;); return _class; }
549 
550 #undef METHOD
551 #undef CONSTRUCTOR
552 #undef FIELD
553 #undef OOPISH_FIELD
554 #undef STATIC_FIELD
555 #undef STATIC_OOPISH_FIELD
556 
557 #define FIELD(simpleClassName, name, type)                                \
558   private:                                                                \
559     static jfieldID _##name##_field_id;                                   \
560   public:                                                                 \
561     static type get_  ## name(JVMCIEnv* jvmciEnv, JVMCIObject obj);       \
562     static void set_  ## name(JVMCIEnv* jvmciEnv, JVMCIObject obj, type x);
563 
564 #define OOPISH_FIELD(simpleClassName, name, type, hstype) \
565   FIELD(simpleClassName, name, type)
566 
567 #define STATIC_FIELD(simpleClassName, name, type)   \
</pre>
<hr />
<pre>
622   static jmethodID _HotSpotConstantPool_fromMetaspace_method;
623   static jmethodID _HotSpotResolvedObjectTypeImpl_fromMetaspace_method;
624   static jmethodID _HotSpotResolvedPrimitiveType_fromMetaspace_method;
625 
626  public:
627   static jmethodID Class_getName_method() { return _Class_getName_method; }
628 
629   static jclass    byte_array()           { assert(_byte_array != NULL, &quot;uninit&quot;);      return _byte_array; }
630 
631   static jclass    box_class(BasicType type)       { assert(_box_classes[type]!= NULL, &quot;uninit&quot;);      return _box_classes[type]; }
632   static jfieldID  box_field(BasicType type)       { assert(_box_fields[type]!= NULL, &quot;uninit&quot;);       return _box_fields[type]; }
633   static jmethodID box_constructor(BasicType type) { assert(_box_constructors[type]!= NULL, &quot;uninit&quot;); return _box_constructors[type]; }
634 
635   static jmethodID HotSpotResolvedJavaMethodImpl_fromMetaspace_method()     { assert(_HotSpotResolvedJavaMethodImpl_fromMetaspace_method     != NULL, &quot;uninit&quot;); return _HotSpotResolvedJavaMethodImpl_fromMetaspace_method; }
636   static jmethodID HotSpotConstantPool_fromMetaspace_method()           { assert(_HotSpotConstantPool_fromMetaspace_method           != NULL, &quot;uninit&quot;); return _HotSpotConstantPool_fromMetaspace_method; }
637   static jmethodID HotSpotResolvedObjectTypeImpl_fromMetaspace_method() { assert(_HotSpotResolvedObjectTypeImpl_fromMetaspace_method != NULL, &quot;uninit&quot;); return _HotSpotResolvedObjectTypeImpl_fromMetaspace_method; }
638   static jmethodID HotSpotResolvedPrimitiveType_fromMetaspace_method()  { assert(_HotSpotResolvedPrimitiveType_fromMetaspace_method  != NULL, &quot;uninit&quot;); return _HotSpotResolvedPrimitiveType_fromMetaspace_method; }
639 
640   static void initialize_ids(JNIEnv* env);
641   static void initialize_field_id(JNIEnv* env, jfieldID &amp;dest_offset, jclass klass, const char* klass_name, const char* name, const char* signature, bool static_field);
<span class="line-added">642   static void register_natives(JNIEnv* env);</span>
643 
644   static jobject resolve_handle(JVMCIObject obj) { return obj.as_jobject(); }
645   static JVMCIObject wrap(jobject obj) { return JVMCIObject(obj, false); }
646 
647   JVMCI_CLASSES_DO(JNI_START_CLASS, END_CLASS, CHAR_FIELD, INT_FIELD, BOOLEAN_FIELD, LONG_FIELD, FLOAT_FIELD, OBJECT_FIELD, PRIMARRAY_FIELD, OBJECTARRAY_FIELD, STATIC_OBJECT_FIELD, STATIC_OBJECTARRAY_FIELD, STATIC_INT_FIELD, STATIC_BOOLEAN_FIELD, METHOD, CONSTRUCTOR)
648 };
649 
650 #undef JNI_START_CLASS
651 #undef START_CLASS
652 #undef END_CLASS
653 #undef METHOD
654 #undef CONSTRUCTOR
655 #undef FIELD
656 #undef CHAR_FIELD
657 #undef INT_FIELD
658 #undef BOOLEAN_FIELD
659 #undef LONG_FIELD
660 #undef FLOAT_FIELD
661 #undef OBJECT_FIELD
662 #undef PRIMARRAY_FIELD
</pre>
</td>
</tr>
</table>
<center><a href="jvmciJavaClasses.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="jvmciRuntime.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>