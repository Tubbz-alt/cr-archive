<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/jvmci/jvmci_globals.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="jvmciRuntime.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="jvmci_globals.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/jvmci/jvmci_globals.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 91     if (BootstrapJVMCI &amp;&amp; UseJVMCINativeLibrary) {
 92       jio_fprintf(defaultStream::error_stream(), &quot;-XX:+BootstrapJVMCI is not compatible with -XX:+UseJVMCINativeLibrary\n&quot;);
 93       return false;
 94     }
 95     if (BootstrapJVMCI &amp;&amp; (TieredStopAtLevel &lt; CompLevel_full_optimization)) {
 96       jio_fprintf(defaultStream::error_stream(),
 97           &quot;-XX:+BootstrapJVMCI is not compatible with -XX:TieredStopAtLevel=%d\n&quot;, TieredStopAtLevel);
 98       return false;
 99     }
100   }
101 
102   if (!EnableJVMCI) {
103     // Switch off eager JVMCI initialization if JVMCI is disabled.
104     // Don&#39;t throw error if EagerJVMCI is set to allow testing.
105     if (EagerJVMCI) {
106       FLAG_SET_DEFAULT(EagerJVMCI, false);
107     }
108   }
109   JVMCI_FLAG_CHECKED(EagerJVMCI)
110 

111   CHECK_NOT_SET(JVMCITraceLevel,              EnableJVMCI)
112   CHECK_NOT_SET(JVMCICounterSize,             EnableJVMCI)
113   CHECK_NOT_SET(JVMCICountersExcludeCompiler, EnableJVMCI)
114   CHECK_NOT_SET(JVMCIUseFastLocking,          EnableJVMCI)
115   CHECK_NOT_SET(JVMCINMethodSizeLimit,        EnableJVMCI)
116   CHECK_NOT_SET(JVMCIPrintProperties,         EnableJVMCI)
117   CHECK_NOT_SET(UseJVMCINativeLibrary,        EnableJVMCI)
118   CHECK_NOT_SET(JVMCILibPath,                 EnableJVMCI)
119   CHECK_NOT_SET(JVMCILibDumpJNIConfig,        EnableJVMCI)
120 
121 #ifndef COMPILER2
122   JVMCI_FLAG_CHECKED(MaxVectorSize)
123   JVMCI_FLAG_CHECKED(ReduceInitialCardMarks)
124   JVMCI_FLAG_CHECKED(UseMultiplyToLenIntrinsic)
125   JVMCI_FLAG_CHECKED(UseSquareToLenIntrinsic)
126   JVMCI_FLAG_CHECKED(UseMulAddIntrinsic)
127   JVMCI_FLAG_CHECKED(UseMontgomeryMultiplyIntrinsic)
128   JVMCI_FLAG_CHECKED(UseMontgomerySquareIntrinsic)
129 #endif // !COMPILER2
130 
</pre>
<hr />
<pre>
149           &quot;Could not open file for dumping JVMCI shared library JNI config: %s\n&quot;, JVMCILibDumpJNIConfig);
150       return false;
151     }
152   }
153 
154   return true;
155 }
156 
157 // Convert JVMCI flags from experimental to product
158 bool JVMCIGlobals::enable_jvmci_product_mode(JVMFlag::Flags origin) {
159   const char *JVMCIFlags[] = {
160     &quot;EnableJVMCI&quot;,
161     &quot;EnableJVMCIProduct&quot;,
162     &quot;UseJVMCICompiler&quot;,
163     &quot;JVMCIPrintProperties&quot;,
164     &quot;EagerJVMCI&quot;,
165     &quot;JVMCIThreads&quot;,
166     &quot;JVMCICounterSize&quot;,
167     &quot;JVMCICountersExcludeCompiler&quot;,
168     &quot;JVMCINMethodSizeLimit&quot;,


169     &quot;JVMCILibPath&quot;,
170     &quot;JVMCILibDumpJNIConfig&quot;,
171     &quot;UseJVMCINativeLibrary&quot;,
172     NULL
173   };
174 
175   for (int i = 0; JVMCIFlags[i] != NULL; i++) {
176     JVMFlag *jvmciFlag = (JVMFlag *)JVMFlag::find_declared_flag(JVMCIFlags[i]);
177     if (jvmciFlag == NULL) {
178       return false;
179     }
180     jvmciFlag-&gt;clear_experimental();
181     jvmciFlag-&gt;set_product();
182   }
183 
184   bool value = true;
185   JVMFlag *jvmciEnableFlag = JVMFlag::find_flag(&quot;EnableJVMCIProduct&quot;);
186   if (JVMFlag::boolAtPut(jvmciEnableFlag, &amp;value, origin) != JVMFlag::SUCCESS) {
187     return false;
188   }
</pre>
</td>
<td>
<hr />
<pre>
 91     if (BootstrapJVMCI &amp;&amp; UseJVMCINativeLibrary) {
 92       jio_fprintf(defaultStream::error_stream(), &quot;-XX:+BootstrapJVMCI is not compatible with -XX:+UseJVMCINativeLibrary\n&quot;);
 93       return false;
 94     }
 95     if (BootstrapJVMCI &amp;&amp; (TieredStopAtLevel &lt; CompLevel_full_optimization)) {
 96       jio_fprintf(defaultStream::error_stream(),
 97           &quot;-XX:+BootstrapJVMCI is not compatible with -XX:TieredStopAtLevel=%d\n&quot;, TieredStopAtLevel);
 98       return false;
 99     }
100   }
101 
102   if (!EnableJVMCI) {
103     // Switch off eager JVMCI initialization if JVMCI is disabled.
104     // Don&#39;t throw error if EagerJVMCI is set to allow testing.
105     if (EagerJVMCI) {
106       FLAG_SET_DEFAULT(EagerJVMCI, false);
107     }
108   }
109   JVMCI_FLAG_CHECKED(EagerJVMCI)
110 
<span class="line-added">111   CHECK_NOT_SET(JVMCIEventLogLevel,           EnableJVMCI)</span>
112   CHECK_NOT_SET(JVMCITraceLevel,              EnableJVMCI)
113   CHECK_NOT_SET(JVMCICounterSize,             EnableJVMCI)
114   CHECK_NOT_SET(JVMCICountersExcludeCompiler, EnableJVMCI)
115   CHECK_NOT_SET(JVMCIUseFastLocking,          EnableJVMCI)
116   CHECK_NOT_SET(JVMCINMethodSizeLimit,        EnableJVMCI)
117   CHECK_NOT_SET(JVMCIPrintProperties,         EnableJVMCI)
118   CHECK_NOT_SET(UseJVMCINativeLibrary,        EnableJVMCI)
119   CHECK_NOT_SET(JVMCILibPath,                 EnableJVMCI)
120   CHECK_NOT_SET(JVMCILibDumpJNIConfig,        EnableJVMCI)
121 
122 #ifndef COMPILER2
123   JVMCI_FLAG_CHECKED(MaxVectorSize)
124   JVMCI_FLAG_CHECKED(ReduceInitialCardMarks)
125   JVMCI_FLAG_CHECKED(UseMultiplyToLenIntrinsic)
126   JVMCI_FLAG_CHECKED(UseSquareToLenIntrinsic)
127   JVMCI_FLAG_CHECKED(UseMulAddIntrinsic)
128   JVMCI_FLAG_CHECKED(UseMontgomeryMultiplyIntrinsic)
129   JVMCI_FLAG_CHECKED(UseMontgomerySquareIntrinsic)
130 #endif // !COMPILER2
131 
</pre>
<hr />
<pre>
150           &quot;Could not open file for dumping JVMCI shared library JNI config: %s\n&quot;, JVMCILibDumpJNIConfig);
151       return false;
152     }
153   }
154 
155   return true;
156 }
157 
158 // Convert JVMCI flags from experimental to product
159 bool JVMCIGlobals::enable_jvmci_product_mode(JVMFlag::Flags origin) {
160   const char *JVMCIFlags[] = {
161     &quot;EnableJVMCI&quot;,
162     &quot;EnableJVMCIProduct&quot;,
163     &quot;UseJVMCICompiler&quot;,
164     &quot;JVMCIPrintProperties&quot;,
165     &quot;EagerJVMCI&quot;,
166     &quot;JVMCIThreads&quot;,
167     &quot;JVMCICounterSize&quot;,
168     &quot;JVMCICountersExcludeCompiler&quot;,
169     &quot;JVMCINMethodSizeLimit&quot;,
<span class="line-added">170     &quot;JVMCIEventLogLevel&quot;,</span>
<span class="line-added">171     &quot;JVMCITraceLevel&quot;,</span>
172     &quot;JVMCILibPath&quot;,
173     &quot;JVMCILibDumpJNIConfig&quot;,
174     &quot;UseJVMCINativeLibrary&quot;,
175     NULL
176   };
177 
178   for (int i = 0; JVMCIFlags[i] != NULL; i++) {
179     JVMFlag *jvmciFlag = (JVMFlag *)JVMFlag::find_declared_flag(JVMCIFlags[i]);
180     if (jvmciFlag == NULL) {
181       return false;
182     }
183     jvmciFlag-&gt;clear_experimental();
184     jvmciFlag-&gt;set_product();
185   }
186 
187   bool value = true;
188   JVMFlag *jvmciEnableFlag = JVMFlag::find_flag(&quot;EnableJVMCIProduct&quot;);
189   if (JVMFlag::boolAtPut(jvmciEnableFlag, &amp;value, origin) != JVMFlag::SUCCESS) {
190     return false;
191   }
</pre>
</td>
</tr>
</table>
<center><a href="jvmciRuntime.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="jvmci_globals.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>