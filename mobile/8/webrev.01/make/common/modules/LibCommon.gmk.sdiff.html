<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/common/modules/LibCommon.gmk</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
<body>
<center><a href="LauncherCommon.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="../../data/symbols/java.base-F.sym.txt.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/common/modules/LibCommon.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
10 #
11 # This code is distributed in the hope that it will be useful, but WITHOUT
12 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
13 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
14 # version 2 for more details (a copy is included in the LICENSE file that
15 # accompanied this code).
16 #
17 # You should have received a copy of the GNU General Public License version
18 # 2 along with this work; if not, write to the Free Software Foundation,
19 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
20 #
21 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
22 # or visit www.oracle.com if you need additional information or have any
23 # questions.
24 #
25 
26 include JdkNativeCompilation.gmk
27 
28 ################################################################################
29 
<span class="line-removed">30 GLOBAL_VERSION_INFO_RESOURCE := $(TOPDIR)/src/java.base/windows/native/common/version.rc</span>
<span class="line-removed">31 </span>
32 # Absolute paths to lib files on windows for use in LIBS. Should figure out a more
33 # elegant solution to this.
34 WIN_JAVA_LIB := $(SUPPORT_OUTPUTDIR)/native/java.base/libjava/java.lib
35 
36 # Tell the compiler not to export any functions unless declared so in
37 # the source code. On Windows, this is the default and cannot be changed.
38 # On Mac, we have always exported all symbols, probably due to oversight
39 # and/or misunderstanding. To emulate this, don&#39;t hide any symbols
40 # by default.
41 # On AIX/xlc we need at least xlc 13.1 for the symbol hiding (see JDK-8214063)
42 # Also provide an override for non-conformant libraries.
43 ifeq ($(TOOLCHAIN_TYPE), gcc)
44   CFLAGS_JDKLIB += -fvisibility=hidden
45   CXXFLAGS_JDKLIB += -fvisibility=hidden
46   LDFLAGS_JDKLIB += -Wl,--exclude-libs,ALL
47   EXPORT_ALL_SYMBOLS := -fvisibility=default
48 else ifeq ($(TOOLCHAIN_TYPE), clang)
49   CFLAGS_JDKLIB += -fvisibility=hidden
50   CXXFLAGS_JDKLIB += -fvisibility=hidden
51   EXPORT_ALL_SYMBOLS := -fvisibility=default
</pre>
</td>
<td>
<hr />
<pre>
10 #
11 # This code is distributed in the hope that it will be useful, but WITHOUT
12 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
13 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
14 # version 2 for more details (a copy is included in the LICENSE file that
15 # accompanied this code).
16 #
17 # You should have received a copy of the GNU General Public License version
18 # 2 along with this work; if not, write to the Free Software Foundation,
19 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
20 #
21 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
22 # or visit www.oracle.com if you need additional information or have any
23 # questions.
24 #
25 
26 include JdkNativeCompilation.gmk
27 
28 ################################################################################
29 


30 # Absolute paths to lib files on windows for use in LIBS. Should figure out a more
31 # elegant solution to this.
32 WIN_JAVA_LIB := $(SUPPORT_OUTPUTDIR)/native/java.base/libjava/java.lib
33 
34 # Tell the compiler not to export any functions unless declared so in
35 # the source code. On Windows, this is the default and cannot be changed.
36 # On Mac, we have always exported all symbols, probably due to oversight
37 # and/or misunderstanding. To emulate this, don&#39;t hide any symbols
38 # by default.
39 # On AIX/xlc we need at least xlc 13.1 for the symbol hiding (see JDK-8214063)
40 # Also provide an override for non-conformant libraries.
41 ifeq ($(TOOLCHAIN_TYPE), gcc)
42   CFLAGS_JDKLIB += -fvisibility=hidden
43   CXXFLAGS_JDKLIB += -fvisibility=hidden
44   LDFLAGS_JDKLIB += -Wl,--exclude-libs,ALL
45   EXPORT_ALL_SYMBOLS := -fvisibility=default
46 else ifeq ($(TOOLCHAIN_TYPE), clang)
47   CFLAGS_JDKLIB += -fvisibility=hidden
48   CXXFLAGS_JDKLIB += -fvisibility=hidden
49   EXPORT_ALL_SYMBOLS := -fvisibility=default
</pre>
</td>
</tr>
</table>
<center><a href="LauncherCommon.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="../../data/symbols/java.base-F.sym.txt.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>