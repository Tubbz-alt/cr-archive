<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/modules/java.desktop/lib/Awt2dLibraries.gmk</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../../java.base/Launcher.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../../jdk.accessibility/Launcher.gmk.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/modules/java.desktop/lib/Awt2dLibraries.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 99     libawt/java2d/opengl \
100     libawt/java2d/windows \
101     libawt/windows \
102     common/awt/medialib \
103     libmlib_image \
104     include \
105     java.base:libjava \
106     java.base:include \
107     #
108 
109 LIBAWT_CFLAGS += -D__MEDIALIB_OLD_NAMES -D__USE_J2D_NAMES $(X_CFLAGS)
110 
111 LIBAWT_CFLAGS += -DMLIB_NO_LIBSUNMATH
112 
113 ifeq ($(call isTargetOs, windows), true)
114   LIBAWT_CFLAGS += -EHsc -DUNICODE -D_UNICODE
115   ifeq ($(call isTargetCpuBits, 64), true)
116     LIBAWT_CFLAGS += -DMLIB_OS64BIT
117   endif
118 
<span class="line-modified">119   LIBAWT_RC_FLAGS ?= -I $(TOPDIR)/src/java.base/windows/native/launcher/icons</span>
120   LIBAWT_VERSIONINFO_RESOURCE := $(TOPDIR)/src/$(MODULE)/windows/native/libawt/windows/awt.rc
121 endif
122 
123 ifeq ($(call isTargetOs, linux), true)
124   # FIXME: This is probably not what we want to do, but keep it now for compatibility.
125   LIBAWT_CFLAGS += $(EXPORT_ALL_SYMBOLS)
126 endif
127 
128 # Turn off all warnings for debug_mem.c This is needed because the specific warning
129 # about initializing a declared &#39;extern&#39; cannot be turned off individually. Only
130 # applies to debug builds.
131 ifeq ($(TOOLCHAIN_TYPE), gcc)
132   BUILD_LIBAWT_debug_mem.c_CFLAGS := -w
133   # This option improves performance of MaskFill in Java2D by 20% for some gcc
134   LIBAWT_CFLAGS += -fgcse-after-reload
135 endif
136 
137 $(eval $(call SetupJdkLibrary, BUILD_LIBAWT, \
138     NAME := awt, \
139     EXTRA_SRC := $(LIBAWT_EXTRA_SRC), \
</pre>
<hr />
<pre>
152     LDFLAGS_windows := -delayload:user32.dll -delayload:gdi32.dll \
153         -delayload:shell32.dll -delayload:winmm.dll \
154         -delayload:winspool.drv -delayload:imm32.dll \
155         -delayload:ole32.dll -delayload:comdlg32.dll \
156         -delayload:comctl32.dll -delayload:shlwapi.dll, \
157     LIBS_unix := -ljvm -ljava $(LIBM), \
158     LIBS_linux :=  $(LIBDL), \
159     LIBS_aix := $(LIBDL),\
160     LIBS_macosx := -lmlib_image \
161         -framework Cocoa \
162         -framework OpenGL \
163         -framework JavaNativeFoundation \
164         -framework JavaRuntimeSupport \
165         -framework ApplicationServices \
166         -framework AudioToolbox, \
167     LIBS_windows := kernel32.lib user32.lib gdi32.lib winspool.lib \
168         imm32.lib ole32.lib uuid.lib shell32.lib \
169         comdlg32.lib winmm.lib comctl32.lib shlwapi.lib \
170         delayimp.lib jvm.lib $(WIN_JAVA_LIB) advapi32.lib, \
171     VERSIONINFO_RESOURCE := $(LIBAWT_VERSIONINFO_RESOURCE), \
<span class="line-modified">172     RC_FLAGS := $(RC_FLAGS) $(LIBAWT_RC_FLAGS) \</span>
<span class="line-removed">173         -D &quot;JDK_FNAME=awt.dll&quot; \</span>
<span class="line-removed">174         -D &quot;JDK_INTERNAL_NAME=awt&quot; \</span>
<span class="line-removed">175         -D &quot;JDK_FTYPE=0x2L&quot;, \</span>
176 ))
177 
178 $(BUILD_LIBAWT): $(call FindLib, java.base, java)
179 
180 ifeq ($(call isTargetOs, macosx), true)
181   $(BUILD_LIBAWT): $(BUILD_LIBMLIB_IMAGE)
182 endif
183 
184 TARGETS += $(BUILD_LIBAWT)
185 
186 ################################################################################
187 
188 ifeq ($(call isTargetOs, windows macosx), false)
189   ifeq ($(ENABLE_HEADLESS_ONLY), false)
190 
191     LIBAWT_XAWT_EXTRA_SRC := \
192         common/awt \
193         common/java2d \
194         common/font \
195         #
</pre>
</td>
<td>
<hr />
<pre>
 99     libawt/java2d/opengl \
100     libawt/java2d/windows \
101     libawt/windows \
102     common/awt/medialib \
103     libmlib_image \
104     include \
105     java.base:libjava \
106     java.base:include \
107     #
108 
109 LIBAWT_CFLAGS += -D__MEDIALIB_OLD_NAMES -D__USE_J2D_NAMES $(X_CFLAGS)
110 
111 LIBAWT_CFLAGS += -DMLIB_NO_LIBSUNMATH
112 
113 ifeq ($(call isTargetOs, windows), true)
114   LIBAWT_CFLAGS += -EHsc -DUNICODE -D_UNICODE
115   ifeq ($(call isTargetCpuBits, 64), true)
116     LIBAWT_CFLAGS += -DMLIB_OS64BIT
117   endif
118 
<span class="line-modified">119   LIBAWT_RCFLAGS ?= -I$(TOPDIR)/src/java.base/windows/native/launcher/icons</span>
120   LIBAWT_VERSIONINFO_RESOURCE := $(TOPDIR)/src/$(MODULE)/windows/native/libawt/windows/awt.rc
121 endif
122 
123 ifeq ($(call isTargetOs, linux), true)
124   # FIXME: This is probably not what we want to do, but keep it now for compatibility.
125   LIBAWT_CFLAGS += $(EXPORT_ALL_SYMBOLS)
126 endif
127 
128 # Turn off all warnings for debug_mem.c This is needed because the specific warning
129 # about initializing a declared &#39;extern&#39; cannot be turned off individually. Only
130 # applies to debug builds.
131 ifeq ($(TOOLCHAIN_TYPE), gcc)
132   BUILD_LIBAWT_debug_mem.c_CFLAGS := -w
133   # This option improves performance of MaskFill in Java2D by 20% for some gcc
134   LIBAWT_CFLAGS += -fgcse-after-reload
135 endif
136 
137 $(eval $(call SetupJdkLibrary, BUILD_LIBAWT, \
138     NAME := awt, \
139     EXTRA_SRC := $(LIBAWT_EXTRA_SRC), \
</pre>
<hr />
<pre>
152     LDFLAGS_windows := -delayload:user32.dll -delayload:gdi32.dll \
153         -delayload:shell32.dll -delayload:winmm.dll \
154         -delayload:winspool.drv -delayload:imm32.dll \
155         -delayload:ole32.dll -delayload:comdlg32.dll \
156         -delayload:comctl32.dll -delayload:shlwapi.dll, \
157     LIBS_unix := -ljvm -ljava $(LIBM), \
158     LIBS_linux :=  $(LIBDL), \
159     LIBS_aix := $(LIBDL),\
160     LIBS_macosx := -lmlib_image \
161         -framework Cocoa \
162         -framework OpenGL \
163         -framework JavaNativeFoundation \
164         -framework JavaRuntimeSupport \
165         -framework ApplicationServices \
166         -framework AudioToolbox, \
167     LIBS_windows := kernel32.lib user32.lib gdi32.lib winspool.lib \
168         imm32.lib ole32.lib uuid.lib shell32.lib \
169         comdlg32.lib winmm.lib comctl32.lib shlwapi.lib \
170         delayimp.lib jvm.lib $(WIN_JAVA_LIB) advapi32.lib, \
171     VERSIONINFO_RESOURCE := $(LIBAWT_VERSIONINFO_RESOURCE), \
<span class="line-modified">172     EXTRA_RCFLAGS := $(LIBAWT_RCFLAGS), \</span>



173 ))
174 
175 $(BUILD_LIBAWT): $(call FindLib, java.base, java)
176 
177 ifeq ($(call isTargetOs, macosx), true)
178   $(BUILD_LIBAWT): $(BUILD_LIBMLIB_IMAGE)
179 endif
180 
181 TARGETS += $(BUILD_LIBAWT)
182 
183 ################################################################################
184 
185 ifeq ($(call isTargetOs, windows macosx), false)
186   ifeq ($(ENABLE_HEADLESS_ONLY), false)
187 
188     LIBAWT_XAWT_EXTRA_SRC := \
189         common/awt \
190         common/java2d \
191         common/font \
192         #
</pre>
</td>
</tr>
</table>
<center><a href="../../java.base/Launcher.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../../jdk.accessibility/Launcher.gmk.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>