<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/autoconf/flags-other.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="../Main.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="spec.gmk.in.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/flags-other.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 47 [
 48   ## Setup strip.
 49   # FIXME: should this really be per platform, or should it be per toolchain type?
 50   # strip is not provided by clang; so guessing platform makes most sense.
 51   # FIXME: we should really only export STRIPFLAGS from here, not POST_STRIP_CMD.
 52   if test &quot;x$OPENJDK_TARGET_OS&quot; = xlinux; then
 53     STRIPFLAGS=&quot;-g&quot;
 54   elif test &quot;x$OPENJDK_TARGET_OS&quot; = xmacosx; then
 55     STRIPFLAGS=&quot;-S&quot;
 56   elif test &quot;x$OPENJDK_TARGET_OS&quot; = xaix; then
 57     STRIPFLAGS=&quot;-X32_64&quot;
 58   fi
 59 
 60   AC_SUBST(STRIPFLAGS)
 61 ])
 62 
 63 AC_DEFUN([FLAGS_SETUP_RCFLAGS],
 64 [
 65   # On Windows, we need to set RC flags.
 66   if test &quot;x$TOOLCHAIN_TYPE&quot; = xmicrosoft; then
<span class="line-modified"> 67     RC_FLAGS=&quot;-nologo -l0x409&quot;</span>
<span class="line-removed"> 68     JVM_RCFLAGS=&quot;-nologo&quot;</span>
 69     if test &quot;x$DEBUG_LEVEL&quot; = xrelease; then
<span class="line-modified"> 70       RC_FLAGS=&quot;$RC_FLAGS -DNDEBUG&quot;</span>
<span class="line-removed"> 71       JVM_RCFLAGS=&quot;$JVM_RCFLAGS -DNDEBUG&quot;</span>
 72     fi
<span class="line-removed"> 73 </span>
<span class="line-removed"> 74     # The version variables used to create RC_FLAGS may be overridden</span>
<span class="line-removed"> 75     # in a custom configure script, or possibly the command line.</span>
<span class="line-removed"> 76     # Let those variables be expanded at make time in spec.gmk.</span>
<span class="line-removed"> 77     # The \$ are escaped to the shell, and the $(...) variables</span>
<span class="line-removed"> 78     # are evaluated by make.</span>
<span class="line-removed"> 79     RC_FLAGS=&quot;$RC_FLAGS \</span>
<span class="line-removed"> 80         -D\&quot;JDK_VERSION_STRING=\$(VERSION_STRING)\&quot; \</span>
<span class="line-removed"> 81         -D\&quot;JDK_COMPANY=\$(COMPANY_NAME)\&quot; \</span>
<span class="line-removed"> 82         -D\&quot;JDK_FILEDESC=\$(JDK_RC_NAME) binary\&quot; \</span>
<span class="line-removed"> 83         -D\&quot;JDK_VER=\$(VERSION_NUMBER)\&quot; \</span>
<span class="line-removed"> 84         -D\&quot;JDK_COPYRIGHT=Copyright \xA9 $COPYRIGHT_YEAR\&quot; \</span>
<span class="line-removed"> 85         -D\&quot;JDK_NAME=\$(JDK_RC_NAME) \$(VERSION_FEATURE)\&quot; \</span>
<span class="line-removed"> 86         -D\&quot;JDK_FVER=\$(subst .,\$(COMMA),\$(VERSION_NUMBER_FOUR_POSITIONS))\&quot;&quot;</span>
<span class="line-removed"> 87 </span>
<span class="line-removed"> 88     JVM_RCFLAGS=&quot;$JVM_RCFLAGS \</span>
<span class="line-removed"> 89         -D\&quot;HS_VERSION_STRING=\$(VERSION_STRING)\&quot; \</span>
<span class="line-removed"> 90         -D\&quot;HS_COMPANY=\$(COMPANY_NAME)\&quot; \</span>
<span class="line-removed"> 91         -D\&quot;HS_VER=\$(VERSION_NUMBER_FOUR_POSITIONS)\&quot; \</span>
<span class="line-removed"> 92         -D\&quot;HS_INTERNAL_NAME=jvm\&quot; \</span>
<span class="line-removed"> 93         -D\&quot;HS_COPYRIGHT=Copyright $COPYRIGHT_YEAR\&quot; \</span>
<span class="line-removed"> 94         -D\&quot;HS_FNAME=jvm.dll\&quot; \</span>
<span class="line-removed"> 95         -D\&quot;HS_NAME=\$(PRODUCT_NAME) \$(VERSION_SHORT)\&quot; \</span>
<span class="line-removed"> 96         -D\&quot;HS_FVER=\$(subst .,\$(COMMA),\$(VERSION_NUMBER_FOUR_POSITIONS))\&quot;&quot;</span>
 97   fi
<span class="line-modified"> 98   AC_SUBST(RC_FLAGS)</span>
<span class="line-removed"> 99   AC_SUBST(JVM_RCFLAGS)</span>
100 ])
101 
102 ################################################################################
103 # platform independent
104 AC_DEFUN([FLAGS_SETUP_ASFLAGS],
105 [
106   if test &quot;x$OPENJDK_TARGET_OS&quot; = xmacosx; then
107     JVM_BASIC_ASFLAGS=&quot;-x assembler-with-cpp -mno-omit-leaf-frame-pointer -mstack-alignment=16&quot;
108   fi
109 ])
110 
111 ################################################################################
112 # $1 - Either BUILD or TARGET to pick the correct OS/CPU variables to check
113 #      conditionals against.
114 # $2 - Optional prefix for each variable defined.
115 AC_DEFUN([FLAGS_SETUP_ASFLAGS_CPU_DEP],
116 [
117   # Misuse EXTRA_CFLAGS to mimic old behavior
118   $2JVM_ASFLAGS=&quot;$JVM_BASIC_ASFLAGS ${$2EXTRA_CFLAGS}&quot;
119 
</pre>
</td>
<td>
<hr />
<pre>
 47 [
 48   ## Setup strip.
 49   # FIXME: should this really be per platform, or should it be per toolchain type?
 50   # strip is not provided by clang; so guessing platform makes most sense.
 51   # FIXME: we should really only export STRIPFLAGS from here, not POST_STRIP_CMD.
 52   if test &quot;x$OPENJDK_TARGET_OS&quot; = xlinux; then
 53     STRIPFLAGS=&quot;-g&quot;
 54   elif test &quot;x$OPENJDK_TARGET_OS&quot; = xmacosx; then
 55     STRIPFLAGS=&quot;-S&quot;
 56   elif test &quot;x$OPENJDK_TARGET_OS&quot; = xaix; then
 57     STRIPFLAGS=&quot;-X32_64&quot;
 58   fi
 59 
 60   AC_SUBST(STRIPFLAGS)
 61 ])
 62 
 63 AC_DEFUN([FLAGS_SETUP_RCFLAGS],
 64 [
 65   # On Windows, we need to set RC flags.
 66   if test &quot;x$TOOLCHAIN_TYPE&quot; = xmicrosoft; then
<span class="line-modified"> 67     RCFLAGS=&quot;-nologo&quot;</span>

 68     if test &quot;x$DEBUG_LEVEL&quot; = xrelease; then
<span class="line-modified"> 69       RCFLAGS=&quot;$RCFLAGS -DNDEBUG&quot;</span>

 70     fi
























 71   fi
<span class="line-modified"> 72   AC_SUBST(RCFLAGS)</span>

 73 ])
 74 
 75 ################################################################################
 76 # platform independent
 77 AC_DEFUN([FLAGS_SETUP_ASFLAGS],
 78 [
 79   if test &quot;x$OPENJDK_TARGET_OS&quot; = xmacosx; then
 80     JVM_BASIC_ASFLAGS=&quot;-x assembler-with-cpp -mno-omit-leaf-frame-pointer -mstack-alignment=16&quot;
 81   fi
 82 ])
 83 
 84 ################################################################################
 85 # $1 - Either BUILD or TARGET to pick the correct OS/CPU variables to check
 86 #      conditionals against.
 87 # $2 - Optional prefix for each variable defined.
 88 AC_DEFUN([FLAGS_SETUP_ASFLAGS_CPU_DEP],
 89 [
 90   # Misuse EXTRA_CFLAGS to mimic old behavior
 91   $2JVM_ASFLAGS=&quot;$JVM_BASIC_ASFLAGS ${$2EXTRA_CFLAGS}&quot;
 92 
</pre>
</td>
</tr>
</table>
<center><a href="../Main.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="spec.gmk.in.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>