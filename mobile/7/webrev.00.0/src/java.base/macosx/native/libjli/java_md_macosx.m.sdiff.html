<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/macosx/native/libjli/java_md_macosx.m</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../make/modules/java.base/lib/CoreLibraries.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/java.base/macosx/native/libjli/java_md_macosx.m</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
632             return JNI_FALSE;
633         }
634 
635         if (dladdr((void*)fptr, &amp;dlinfo)) {
636             char *resolved = (char*)JLI_MemAlloc(PATH_MAX+1);
637             if (resolved != NULL) {
638                 exec_path = realpath(dlinfo.dli_fname, resolved);
639                 if (exec_path == NULL) {
640                     JLI_MemFree(resolved);
641                 }
642             }
643         }
644     }
645     if (exec_path == NULL) {
646         exec_path = FindExecName(argv[0]);
647     }
648     execname = exec_path;
649     return exec_path;
650 }
651 
<span class="line-removed">652 /*</span>
<span class="line-removed">653  * BSD&#39;s implementation of CounterGet()</span>
<span class="line-removed">654  */</span>
<span class="line-removed">655 int64_t</span>
<span class="line-removed">656 CounterGet()</span>
<span class="line-removed">657 {</span>
<span class="line-removed">658     struct timeval tv;</span>
<span class="line-removed">659     gettimeofday(&amp;tv, NULL);</span>
<span class="line-removed">660     return (tv.tv_sec * 1000000) + tv.tv_usec;</span>
<span class="line-removed">661 }</span>
<span class="line-removed">662 </span>
<span class="line-removed">663 </span>
664 /* --- Splash Screen shared library support --- */
665 
666 static JavaVM* SetJavaVMValue()
667 {
668     JavaVM * jvm = NULL;
669 
670     // The handle is good for both the launcher and the libosxapp.dylib
671     void * handle = dlopen(NULL, RTLD_LAZY | RTLD_GLOBAL);
672     if (handle) {
673         typedef JavaVM* (*JLI_GetJavaVMInstance_t)();
674 
675         JLI_GetJavaVMInstance_t JLI_GetJavaVMInstance =
676             (JLI_GetJavaVMInstance_t)dlsym(handle,
677                     &quot;JLI_GetJavaVMInstance&quot;);
678         if (JLI_GetJavaVMInstance) {
679             jvm = JLI_GetJavaVMInstance();
680         }
681 
682         if (jvm) {
683             typedef void (*OSXAPP_SetJavaVM_t)(JavaVM*);
</pre>
</td>
<td>
<hr />
<pre>
632             return JNI_FALSE;
633         }
634 
635         if (dladdr((void*)fptr, &amp;dlinfo)) {
636             char *resolved = (char*)JLI_MemAlloc(PATH_MAX+1);
637             if (resolved != NULL) {
638                 exec_path = realpath(dlinfo.dli_fname, resolved);
639                 if (exec_path == NULL) {
640                     JLI_MemFree(resolved);
641                 }
642             }
643         }
644     }
645     if (exec_path == NULL) {
646         exec_path = FindExecName(argv[0]);
647     }
648     execname = exec_path;
649     return exec_path;
650 }
651 












652 /* --- Splash Screen shared library support --- */
653 
654 static JavaVM* SetJavaVMValue()
655 {
656     JavaVM * jvm = NULL;
657 
658     // The handle is good for both the launcher and the libosxapp.dylib
659     void * handle = dlopen(NULL, RTLD_LAZY | RTLD_GLOBAL);
660     if (handle) {
661         typedef JavaVM* (*JLI_GetJavaVMInstance_t)();
662 
663         JLI_GetJavaVMInstance_t JLI_GetJavaVMInstance =
664             (JLI_GetJavaVMInstance_t)dlsym(handle,
665                     &quot;JLI_GetJavaVMInstance&quot;);
666         if (JLI_GetJavaVMInstance) {
667             jvm = JLI_GetJavaVMInstance();
668         }
669 
670         if (jvm) {
671             typedef void (*OSXAPP_SetJavaVM_t)(JavaVM*);
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../make/modules/java.base/lib/CoreLibraries.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>