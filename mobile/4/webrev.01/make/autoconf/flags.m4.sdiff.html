<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/autoconf/flags.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="flags-cflags.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="lib-freetype.m4.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/flags.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
261   if test &quot;x$TOOLCHAIN_TYPE&quot; = xxlc; then
262     MACHINE_FLAG=&quot;-q${OPENJDK_TARGET_CPU_BITS}&quot;
263   elif test &quot;x$TOOLCHAIN_TYPE&quot; = xsolstudio; then
264     MACHINE_FLAG=&quot;-m${OPENJDK_TARGET_CPU_BITS}&quot;
265   elif test &quot;x$TOOLCHAIN_TYPE&quot; = xgcc || test &quot;x$TOOLCHAIN_TYPE&quot; = xclang; then
266     if test &quot;x$OPENJDK_TARGET_CPU_ARCH&quot; = xx86 &amp;&amp;
267         test &quot;x$OPENJDK_TARGET_CPU&quot; != xx32 ||
268         test &quot;x$OPENJDK_TARGET_CPU_ARCH&quot; = xsparc ||
269         test &quot;x$OPENJDK_TARGET_CPU_ARCH&quot; = xppc; then
270       MACHINE_FLAG=&quot;-m${OPENJDK_TARGET_CPU_BITS}&quot;
271     fi
272   fi
273 
274   # FIXME: global flags are not used yet...
275   # The &quot;global&quot; flags will *always* be set. Without them, it is not possible to
276   # get a working compilation.
277   GLOBAL_CFLAGS=&quot;$MACHINE_FLAG $SYSROOT_CFLAGS $USER_CFLAGS&quot;
278   GLOBAL_CXXFLAGS=&quot;$MACHINE_FLAG $SYSROOT_CFLAGS $USER_CXXFLAGS&quot;
279   GLOBAL_LDFLAGS=&quot;$MACHINE_FLAG $SYSROOT_LDFLAGS $USER_LDFLAGS&quot;
280   # FIXME: Don&#39;t really know how to do with this, but this was the old behavior
<span class="line-modified">281   GLOBAL_CPPFLAGS=&quot;$SYSROOT_CFLAGS&quot;</span>




282   AC_SUBST(GLOBAL_CFLAGS)
283   AC_SUBST(GLOBAL_CXXFLAGS)
284   AC_SUBST(GLOBAL_LDFLAGS)
285   AC_SUBST(GLOBAL_CPPFLAGS)
286 
287   # FIXME: For compatilibity, export this as EXTRA_CFLAGS for now.
288   EXTRA_CFLAGS=&quot;$MACHINE_FLAG $USER_CFLAGS&quot;
289   EXTRA_CXXFLAGS=&quot;$MACHINE_FLAG $USER_CXXFLAGS&quot;
290   EXTRA_LDFLAGS=&quot;$MACHINE_FLAG $USER_LDFLAGS&quot;
291   EXTRA_ASFLAGS=&quot;$USER_ASFLAGS&quot;
292 
293   AC_SUBST(EXTRA_CFLAGS)
294   AC_SUBST(EXTRA_CXXFLAGS)
295   AC_SUBST(EXTRA_LDFLAGS)
296   AC_SUBST(EXTRA_ASFLAGS)
297 
298   # For autoconf testing to work, the global flags must also be stored in the
299   # &quot;unnamed&quot; CFLAGS etc.
300   CFLAGS=&quot;$GLOBAL_CFLAGS&quot;
301   CXXFLAGS=&quot;$GLOBAL_CXXFLAGS&quot;
</pre>
</td>
<td>
<hr />
<pre>
261   if test &quot;x$TOOLCHAIN_TYPE&quot; = xxlc; then
262     MACHINE_FLAG=&quot;-q${OPENJDK_TARGET_CPU_BITS}&quot;
263   elif test &quot;x$TOOLCHAIN_TYPE&quot; = xsolstudio; then
264     MACHINE_FLAG=&quot;-m${OPENJDK_TARGET_CPU_BITS}&quot;
265   elif test &quot;x$TOOLCHAIN_TYPE&quot; = xgcc || test &quot;x$TOOLCHAIN_TYPE&quot; = xclang; then
266     if test &quot;x$OPENJDK_TARGET_CPU_ARCH&quot; = xx86 &amp;&amp;
267         test &quot;x$OPENJDK_TARGET_CPU&quot; != xx32 ||
268         test &quot;x$OPENJDK_TARGET_CPU_ARCH&quot; = xsparc ||
269         test &quot;x$OPENJDK_TARGET_CPU_ARCH&quot; = xppc; then
270       MACHINE_FLAG=&quot;-m${OPENJDK_TARGET_CPU_BITS}&quot;
271     fi
272   fi
273 
274   # FIXME: global flags are not used yet...
275   # The &quot;global&quot; flags will *always* be set. Without them, it is not possible to
276   # get a working compilation.
277   GLOBAL_CFLAGS=&quot;$MACHINE_FLAG $SYSROOT_CFLAGS $USER_CFLAGS&quot;
278   GLOBAL_CXXFLAGS=&quot;$MACHINE_FLAG $SYSROOT_CFLAGS $USER_CXXFLAGS&quot;
279   GLOBAL_LDFLAGS=&quot;$MACHINE_FLAG $SYSROOT_LDFLAGS $USER_LDFLAGS&quot;
280   # FIXME: Don&#39;t really know how to do with this, but this was the old behavior
<span class="line-modified">281   if test &quot;x$OPENJDK_TARGET_OS&quot; = xios; then</span>
<span class="line-added">282     GLOBAL_CPPFLAGS=&quot;$MACHINE_FLAG $USER_CFLAGS $SYSROOT_CFLAGS&quot;</span>
<span class="line-added">283   else</span>
<span class="line-added">284     GLOBAL_CPPFLAGS=&quot;$SYSROOT_CFLAGS&quot;</span>
<span class="line-added">285   fi</span>
286   AC_SUBST(GLOBAL_CFLAGS)
287   AC_SUBST(GLOBAL_CXXFLAGS)
288   AC_SUBST(GLOBAL_LDFLAGS)
289   AC_SUBST(GLOBAL_CPPFLAGS)
290 
291   # FIXME: For compatilibity, export this as EXTRA_CFLAGS for now.
292   EXTRA_CFLAGS=&quot;$MACHINE_FLAG $USER_CFLAGS&quot;
293   EXTRA_CXXFLAGS=&quot;$MACHINE_FLAG $USER_CXXFLAGS&quot;
294   EXTRA_LDFLAGS=&quot;$MACHINE_FLAG $USER_LDFLAGS&quot;
295   EXTRA_ASFLAGS=&quot;$USER_ASFLAGS&quot;
296 
297   AC_SUBST(EXTRA_CFLAGS)
298   AC_SUBST(EXTRA_CXXFLAGS)
299   AC_SUBST(EXTRA_LDFLAGS)
300   AC_SUBST(EXTRA_ASFLAGS)
301 
302   # For autoconf testing to work, the global flags must also be stored in the
303   # &quot;unnamed&quot; CFLAGS etc.
304   CFLAGS=&quot;$GLOBAL_CFLAGS&quot;
305   CXXFLAGS=&quot;$GLOBAL_CXXFLAGS&quot;
</pre>
</td>
</tr>
</table>
<center><a href="flags-cflags.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="lib-freetype.m4.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>