<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/autoconf/toolchain.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="platform.m4.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../common/JdkNativeCompilation.gmk.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/toolchain.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 187,11 ***</span>
      SHARED_LIBRARY_SUFFIX=&#39;.so&#39;
      STATIC_LIBRARY_SUFFIX=&#39;.a&#39;
      SHARED_LIBRARY=&#39;lib[$]1.so&#39;
      STATIC_LIBRARY=&#39;lib[$]1.a&#39;
      OBJ_SUFFIX=&#39;.o&#39;
<span class="line-modified">!     if test &quot;x$OPENJDK_TARGET_OS&quot; = xmacosx; then</span>
        # For full static builds, we&#39;re overloading the SHARED_LIBRARY
        # variables in order to limit the amount of changes required.
        # It would be better to remove SHARED and just use LIBRARY and
        # LIBRARY_SUFFIX for libraries that can be built either
        # shared or static and use STATIC_* for libraries that are
<span class="line-new-header">--- 187,11 ---</span>
      SHARED_LIBRARY_SUFFIX=&#39;.so&#39;
      STATIC_LIBRARY_SUFFIX=&#39;.a&#39;
      SHARED_LIBRARY=&#39;lib[$]1.so&#39;
      STATIC_LIBRARY=&#39;lib[$]1.a&#39;
      OBJ_SUFFIX=&#39;.o&#39;
<span class="line-modified">!     if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xmacosx&quot; || test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xios&quot; ; then</span>
        # For full static builds, we&#39;re overloading the SHARED_LIBRARY
        # variables in order to limit the amount of changes required.
        # It would be better to remove SHARED and just use LIBRARY and
        # LIBRARY_SUFFIX for libraries that can be built either
        # shared or static and use STATIC_* for libraries that are
</pre>
<hr />
<pre>
<span class="line-old-header">*** 223,11 ***</span>
  
    # Use indirect variable referencing
    toolchain_var_name=VALID_TOOLCHAINS_$OPENJDK_BUILD_OS
    VALID_TOOLCHAINS=${!toolchain_var_name}
  
<span class="line-modified">!   if test &quot;x$OPENJDK_TARGET_OS&quot; = xmacosx; then</span>
      if test -n &quot;$XCODEBUILD&quot;; then
        # On Mac OS X, default toolchain to clang after Xcode 5
        XCODE_VERSION_OUTPUT=`&quot;$XCODEBUILD&quot; -version 2&gt;&amp;1 | $HEAD -n 1`
        $ECHO &quot;$XCODE_VERSION_OUTPUT&quot; | $GREP &quot;Xcode &quot; &gt; /dev/null
        if test $? -ne 0; then
<span class="line-new-header">--- 223,11 ---</span>
  
    # Use indirect variable referencing
    toolchain_var_name=VALID_TOOLCHAINS_$OPENJDK_BUILD_OS
    VALID_TOOLCHAINS=${!toolchain_var_name}
  
<span class="line-modified">!   if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xmacosx&quot; || test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xios&quot; ; then</span>
      if test -n &quot;$XCODEBUILD&quot;; then
        # On Mac OS X, default toolchain to clang after Xcode 5
        XCODE_VERSION_OUTPUT=`&quot;$XCODEBUILD&quot; -version 2&gt;&amp;1 | $HEAD -n 1`
        $ECHO &quot;$XCODE_VERSION_OUTPUT&quot; | $GREP &quot;Xcode &quot; &gt; /dev/null
        if test $? -ne 0; then
</pre>
<hr />
<pre>
<span class="line-old-header">*** 996,15 ***</span>
      BUILD_LD=&quot;$BUILD_CC&quot;
      BUILD_LDCXX=&quot;$BUILD_CXX&quot;
  
      PATH=&quot;$OLDPATH&quot;
  
<span class="line-modified">!     TOOLCHAIN_EXTRACT_COMPILER_VERSION(BUILD_CC, [BuildC])</span>
<span class="line-modified">!     TOOLCHAIN_EXTRACT_COMPILER_VERSION(BUILD_CXX, [BuildC++])</span>
<span class="line-modified">!     TOOLCHAIN_PREPARE_FOR_VERSION_COMPARISONS([BUILD_], [OPENJDK_BUILD_], [build ])</span>
<span class="line-modified">!     TOOLCHAIN_EXTRACT_LD_VERSION(BUILD_LD, [build linker])</span>
<span class="line-modified">!     TOOLCHAIN_PREPARE_FOR_LD_VERSION_COMPARISONS([BUILD_], [OPENJDK_BUILD_])</span>
    else
      # If we are not cross compiling, use the normal target compilers for
      # building the build platform executables.
      BUILD_CC=&quot;$CC&quot;
      BUILD_CXX=&quot;$CXX&quot;
<span class="line-new-header">--- 996,17 ---</span>
      BUILD_LD=&quot;$BUILD_CC&quot;
      BUILD_LDCXX=&quot;$BUILD_CXX&quot;
  
      PATH=&quot;$OLDPATH&quot;
  
<span class="line-modified">!     if test &quot;x$OPENJDK_TARGET_OS&quot; != &quot;xandroid&quot;; then</span>
<span class="line-modified">!       TOOLCHAIN_EXTRACT_COMPILER_VERSION(BUILD_CC, [BuildC])</span>
<span class="line-modified">!       TOOLCHAIN_EXTRACT_COMPILER_VERSION(BUILD_CXX, [BuildC++])</span>
<span class="line-modified">!       TOOLCHAIN_PREPARE_FOR_VERSION_COMPARISONS([BUILD_], [OPENJDK_BUILD_], [build ])</span>
<span class="line-modified">!       TOOLCHAIN_EXTRACT_LD_VERSION(BUILD_LD, [build linker])</span>
<span class="line-added">+       TOOLCHAIN_PREPARE_FOR_LD_VERSION_COMPARISONS([BUILD_], [OPENJDK_BUILD_])</span>
<span class="line-added">+     fi</span>
    else
      # If we are not cross compiling, use the normal target compilers for
      # building the build platform executables.
      BUILD_CC=&quot;$CC&quot;
      BUILD_CXX=&quot;$CXX&quot;
</pre>
<center><a href="platform.m4.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../common/JdkNativeCompilation.gmk.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>