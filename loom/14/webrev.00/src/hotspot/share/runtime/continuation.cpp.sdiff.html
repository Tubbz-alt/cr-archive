<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/runtime/continuation.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../memory/iterator.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="frame.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/continuation.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
5927         values.describe(-1, bottom, &quot;continuation entry&quot;);
5928     }
5929   }
5930 }
5931 #endif
5932 
5933 void Continuation::nmethod_patched(nmethod* nm) {
5934   //log_info(jvmcont)(&quot;nmethod patched %p&quot;, nm);
5935   oop* keepalive = nm-&gt;get_keepalive();
5936   if (keepalive == NULL) {
5937     return;
5938   }
5939   WeakHandle wh = WeakHandle::from_raw(keepalive);
5940   oop resolved = wh.resolve();
5941 #ifdef DEBUG
5942   Universe::heap()-&gt;is_in_or_null(resolved);
5943 #endif
5944 
5945 #ifndef PRODUCT
5946   CountOops count;
<span class="line-modified">5947   nm-&gt;oops_do(&amp;count, false, true);</span>
5948   assert(nm-&gt;nr_oops() &gt;= count.nr_oops(), &quot;should be&quot;);
5949 #endif
5950 
5951   if (resolved == NULL) {
5952     return;
5953   }
5954 
5955   if (UseCompressedOops) {
5956     PersistOops&lt;narrowOop&gt; persist(nm-&gt;nr_oops(), (objArrayOop) resolved);
5957     nm-&gt;oops_do(&amp;persist);
5958   } else {
5959     PersistOops&lt;oop&gt; persist(nm-&gt;nr_oops(), (objArrayOop) resolved);;
5960     nm-&gt;oops_do(&amp;persist);
5961   }
5962 }
5963 
5964 static void print_oop(void *p, oop obj, outputStream* st) {
5965   if (!log_develop_is_enabled(Trace, jvmcont) &amp;&amp; st != NULL) return;
5966 
5967   if (st == NULL) st = tty;
</pre>
</td>
<td>
<hr />
<pre>
5927         values.describe(-1, bottom, &quot;continuation entry&quot;);
5928     }
5929   }
5930 }
5931 #endif
5932 
5933 void Continuation::nmethod_patched(nmethod* nm) {
5934   //log_info(jvmcont)(&quot;nmethod patched %p&quot;, nm);
5935   oop* keepalive = nm-&gt;get_keepalive();
5936   if (keepalive == NULL) {
5937     return;
5938   }
5939   WeakHandle wh = WeakHandle::from_raw(keepalive);
5940   oop resolved = wh.resolve();
5941 #ifdef DEBUG
5942   Universe::heap()-&gt;is_in_or_null(resolved);
5943 #endif
5944 
5945 #ifndef PRODUCT
5946   CountOops count;
<span class="line-modified">5947   nm-&gt;oops_do(&amp;count, false);</span>
5948   assert(nm-&gt;nr_oops() &gt;= count.nr_oops(), &quot;should be&quot;);
5949 #endif
5950 
5951   if (resolved == NULL) {
5952     return;
5953   }
5954 
5955   if (UseCompressedOops) {
5956     PersistOops&lt;narrowOop&gt; persist(nm-&gt;nr_oops(), (objArrayOop) resolved);
5957     nm-&gt;oops_do(&amp;persist);
5958   } else {
5959     PersistOops&lt;oop&gt; persist(nm-&gt;nr_oops(), (objArrayOop) resolved);;
5960     nm-&gt;oops_do(&amp;persist);
5961   }
5962 }
5963 
5964 static void print_oop(void *p, oop obj, outputStream* st) {
5965   if (!log_develop_is_enabled(Trace, jvmcont) &amp;&amp; st != NULL) return;
5966 
5967   if (st == NULL) st = tty;
</pre>
</td>
</tr>
</table>
<center><a href="../memory/iterator.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="frame.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>