diff a/src/hotspot/share/gc/shared/barrierSetNMethod.cpp b/src/hotspot/share/gc/shared/barrierSetNMethod.cpp
--- a/src/hotspot/share/gc/shared/barrierSetNMethod.cpp
+++ b/src/hotspot/share/gc/shared/barrierSetNMethod.cpp
@@ -59,10 +59,11 @@
 
   return true;
 }
 
 bool BarrierSetNMethod::nmethod_entry_barrier(nmethod* nm) {
+  nm->mark_as_maybe_on_continuation();
   LoadPhantomOopClosure cl;
   nm->oops_do(&cl);
   disarm(nm);
 
   return true;
