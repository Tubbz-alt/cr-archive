<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/vmTestbase/nsk/monitoring/share/thread/ThreadMonitoringScenarioBase.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../stress/strace/strace001.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/vmTestbase/nsk/monitoring/share/thread/ThreadMonitoringScenarioBase.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 77         }
 78 
 79         /**
 80          * Verifies that given stack trace element from stack trace is expected
 81          * in pre-defined state. This method will be called by checkStackTrace
 82          * for each element.
 83          *
 84          * @param element stack trace element
 85          * @return true if element is expected, false otherwise
 86          */
 87         protected boolean isStackTraceElementExpected(StackTraceElement element) {
 88                 return false;
 89         }
 90 
 91         /**
 92          * Check that stack trace element is expected.
 93          */
 94         protected boolean checkStackTraceElement(StackTraceElement element, String[] expectedMethods) {
 95                 String name = element.getClassName() + &quot;.&quot; + element.getMethodName();
 96                 for (String method : expectedMethods)
<span class="line-modified"> 97                         if (method.equals(name))</span>
 98                                 return true;
 99                 return false;
100         }
101 
102         /**
103          * Check that lock info matches given lock object.
104          *
105          * @param lockInfo lock info
106          * @param lock lock object
107          */
108         protected void checkLockInfo(LockInfo lockInfo, Object lock) {
109                 if (lock != null) {
110                         verify(lockInfo.getClassName().equals(lock.getClass().getName()), &quot;LockInfo.getClassName() = &quot; + lockInfo.getClassName() + &quot; differs from lock.getClass().getName() = &quot; + lock.getClass().getName());
111                         verify(lockInfo.getIdentityHashCode() == System.identityHashCode(lock), &quot;LockInfo.getIdentityHashCode() = &quot; + lockInfo.getIdentityHashCode() + &quot; differs from System.identityHashCode(lock) = &quot; + System.identityHashCode(lock));
112                         String expectedToString = lock.getClass().getName() + &#39;@&#39; + Integer.toHexString(System.identityHashCode(lock));
113                         verify(lockInfo.toString().equals(expectedToString), &quot;LockInfo.toString() = &quot; + lockInfo.toString() + &quot; differs from expected toString() = &quot; + expectedToString);
114                 } else
115                         verify(lockInfo == null, &quot;Unexpected ThreadInfo.getLockInfo(): &quot; + ThreadUtils.strLockInfo(lockInfo));
116         }
117 
</pre>
</td>
<td>
<hr />
<pre>
 77         }
 78 
 79         /**
 80          * Verifies that given stack trace element from stack trace is expected
 81          * in pre-defined state. This method will be called by checkStackTrace
 82          * for each element.
 83          *
 84          * @param element stack trace element
 85          * @return true if element is expected, false otherwise
 86          */
 87         protected boolean isStackTraceElementExpected(StackTraceElement element) {
 88                 return false;
 89         }
 90 
 91         /**
 92          * Check that stack trace element is expected.
 93          */
 94         protected boolean checkStackTraceElement(StackTraceElement element, String[] expectedMethods) {
 95                 String name = element.getClassName() + &quot;.&quot; + element.getMethodName();
 96                 for (String method : expectedMethods)
<span class="line-modified"> 97                         if (name.startsWith(method))</span>
 98                                 return true;
 99                 return false;
100         }
101 
102         /**
103          * Check that lock info matches given lock object.
104          *
105          * @param lockInfo lock info
106          * @param lock lock object
107          */
108         protected void checkLockInfo(LockInfo lockInfo, Object lock) {
109                 if (lock != null) {
110                         verify(lockInfo.getClassName().equals(lock.getClass().getName()), &quot;LockInfo.getClassName() = &quot; + lockInfo.getClassName() + &quot; differs from lock.getClass().getName() = &quot; + lock.getClass().getName());
111                         verify(lockInfo.getIdentityHashCode() == System.identityHashCode(lock), &quot;LockInfo.getIdentityHashCode() = &quot; + lockInfo.getIdentityHashCode() + &quot; differs from System.identityHashCode(lock) = &quot; + System.identityHashCode(lock));
112                         String expectedToString = lock.getClass().getName() + &#39;@&#39; + Integer.toHexString(System.identityHashCode(lock));
113                         verify(lockInfo.toString().equals(expectedToString), &quot;LockInfo.toString() = &quot; + lockInfo.toString() + &quot; differs from expected toString() = &quot; + expectedToString);
114                 } else
115                         verify(lockInfo == null, &quot;Unexpected ThreadInfo.getLockInfo(): &quot; + ThreadUtils.strLockInfo(lockInfo));
116         }
117 
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../stress/strace/strace001.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>